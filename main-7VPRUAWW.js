import{$ as gi,$a as pne,$b as yke,A as Xf,Aa as No,Ab as rd,B as wR,Ba as Ys,Bb as qu,C as Cz,Ca as kz,Cb as C1,D as ane,Da as qAe,Db as zc,E as BAe,Ea as Iz,Eb as za,F as _R,Fa as HAe,Fb as Ua,G as Ez,Ga as sS,Gb as Mz,H as Ds,Ha as bh,Hb as lS,I as lne,Ia as IR,Ib as gne,J as x1,Ja as Dk,Jb as vg,K as v1,Ka as Nk,Kb as is,L as SR,La as YAe,Lb as Fz,M as une,Ma as XAe,Mb as cke,N as Lc,Na as KAe,Nb as yne,O as CR,Oa as ZAe,Ob as bne,P as xb,Pa as QAe,Pb as Rk,Q as oS,Qa as JAe,Qb as Oz,R as w1,Ra as eke,Rb as fke,S as cne,Sa as Zf,Sb as nd,T as $Ae,Ta as tke,Tb as dke,U as zAe,Ua as DR,Ub as nu,V as UAe,Va as Al,Vb as pke,W as ER,Wa as vr,Wb as hke,X as Tz,Xa as Mk,Xb as xne,Y as _1,Ya as rke,Yb as mke,Z as Kf,Za as Dz,Zb as gke,_ as Ns,_a as Nz,_b as yn,a as Gt,aa as ns,ab as nke,ac as MR,b as Is,ba as VAe,bb as Cn,bc as bke,c as vR,ca as xr,cb as oke,cc as xke,da as jn,db as ike,dc as uS,e as N,ea as GAe,eb as xh,ec as vke,f as mt,fa as En,fb as Fk,fc as wke,g as fn,ga as fne,gb as Ok,gc as Rz,h as Pc,ha as Et,hb as Qf,hc as od,i as Tl,ia as Zt,ib as ske,ic as _ke,j as je,ja as Az,jb as hne,jc as Ske,k as PAe,ka as dne,kb as ake,kc as vne,l as bb,la as TR,lb as Jf,lc as Cke,m as LAe,ma as os,mb as ed,mc as Eke,n as Ak,na as Bn,nb as ru,o as one,oa as Ba,ob as mne,p as ine,pa as AR,pb as Bc,pc as FR,q as Xn,qa as WAe,qb as NR,qc as cS,r as Hs,ra as vb,rb as aS,s as b1,sa as xg,sb as Ei,sc as wb,t as Wu,ta as S1,tb as Ui,tc as Pk,u as kr,ua as gh,ub as $a,uc as fS,v as nS,va as yh,vb as vh,w as sne,wa as kR,wb as lke,x as jAe,xa as Ik,xb as $c,y as dn,ya as jc,yb as uke,z as kk,za as iS,zb as td}from"./chunk-MPM6KI4S.js";function Uc(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var D1,Sg,xoe=N(()=>{"use strict";D1=class{constructor(r,n){this.backend=r,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,n){this.dataIdsCount++,this.data.set(r,n)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}},Sg=class{refCount(r){return Uc("refCount")}incRef(r){return Uc("incRef")}timerAvailable(){return!0}time(r){return Uc("time")}read(r){return Uc("read")}readSync(r){return Uc("readSync")}readToGPU(r,n){return Uc("readToGPU")}numDataIds(){return Uc("numDataIds")}disposeData(r,n){return Uc("disposeData")}write(r,n,o){return Uc("write")}move(r,n,o,i,s){return Uc("move")}createTensorFromGPUData(r,n,o){return Uc("createTensorFromGPUData")}memory(){return Uc("memory")}floatPrecision(){return Uc("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Uc("dispose")}}});function PIe(t){let r=t.length,n=0;for(;r>0;)n=Math.random()*r|0,r--,a8(t,r,n)}function rkt(t,r){if(t.length!==r.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${r.length}`);let n=t.length,o=0;for(;n>0;)o=Math.random()*n|0,n--,a8(t,n,o),a8(r,n,o)}function Xk(t,r,n){return Math.max(t,Math.min(r,n))}function nkt(t){return t%2===0?t:t+1}function a8(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function okt(t){let r=0;for(let n=0;n<t.length;n++)r+=t[n];return r}function ikt(t,r){let n=Math.random();return r*n+(1-n)*t}function skt(t,r){let n=0;for(let o=0;o<t.length;o++){let i=Number(t[o])-Number(r[o]);n+=i*i}return n}function pe(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}function Bo(t,r,n=""){pe(ou(t,r),()=>n+` Shapes ${t} and ${r} must match`)}function ad(t){pe(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function on(t){if(t.length===0)return 1;let r=t[0];for(let n=1;n<t.length;n++)r*=t[n];return r}function akt(t){return t.length===0}function voe(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&r[n]!==null&&t[n]!==r[n])return!1;return!0}function ou(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function Sb(t){return t%1===0}function lkt(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let r=Math.exp(2*t);return(r-1)/(r+1)}}function ukt(t){let r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function ckt(t){let r=new Uint32Array(t);for(let n=0;n<t;++n)r[n]=n;return PIe(r),r}function mS(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function fkt(t,r=i=>0,n,o){return new Promise((i,s)=>{let a=0,l=()=>{if(t()){i();return}a++;let u=r(a);if(n!=null&&a>=n){s();return}o!=null?o(l,u):setTimeout(l,u)};l()})}function dkt(t,r){let n=1,o=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(o!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${o} and dim ${s}`);o=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(o===-1){if(r>0&&r!==n)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(r%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${r} / ${n}`);let i=t.slice();return i[o]=r/n,i}function gs(t,r){let n=r.length;return t=t==null?r.map((o,i)=>i):[].concat(t),pe(t.every(o=>o>=-n&&o<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),pe(t.every(o=>Sb(o)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(o=>o<0?n+o:o)}function woe(t,r){let n=[],o=[],i=r!=null&&Array.isArray(r)&&r.length===0,s=r==null||i?null:gs(r,t).sort(),a=0;for(let l=0;l<t.length;++l){if(s!=null){if(s[a]===l&&t[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(s[a]==null||s[a]>l)&&t[l]===1&&(n.push(t[l]),o.push(l)),s[a]<=l&&a++}t[l]!==1&&(n.push(t[l]),o.push(l))}return{newShape:n,keptDims:o}}function _oe(t,r){return l8(t,r)}function l8(t,r){let n=null;if(t==null||t==="float32")n=new Float32Array(r);else if(t==="int32")n=new Int32Array(r);else if(t==="bool")n=new Uint8Array(r);else if(t==="string")n=new Array(r);else throw new Error(`Unknown data type ${t}`);return n}function Soe(t,r){for(let n=0;n<t.length;n++){let o=t[n];if(isNaN(o)||!isFinite(o))throw Error(`A tensor of type ${r} being uploaded contains ${o}.`)}}function Coe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function pkt(t,r){return!(r==="complex64"||r==="float32"&&t!=="complex64"||r==="int32"&&t!=="float32"&&t!=="complex64"||r==="bool"&&t==="bool")}function Kk(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Eoe(t){if(t==null)return 0;let r=0;return t.forEach(n=>r+=n.length),r}function Sh(t){return typeof t=="string"||t instanceof String}function LIe(t){return typeof t=="boolean"}function jIe(t){return typeof t=="number"}function N1(t){return Array.isArray(t)?N1(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":jIe(t)?"float32":Sh(t)?"string":LIe(t)?"bool":"float32"}function Cg(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Zk(t,r){for(let n=r;n<t;++n)if(t%n===0)return n;return t}function Eg(t){let r=t.length;if(r<2)return[];let n=new Array(r-1);n[r-2]=t[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*t[o+1];return n}function BIe(t,r,n,o=!1){let i=new Array;if(r.length===1){let s=r[0]*(o?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{let s=r[0],a=r.slice(1),l=a.reduce((u,c)=>u*c)*(o?2:1);for(let u=0;u<s;u++)i[u]=BIe(t+u*l,a,n,o)}return i}function hS(t,r,n=!1){if(t.length===0)return r[0];let o=t.reduce((i,s)=>i*s)*(n?2:1);if(o===0)return[];if(o!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}${n?" for a complex tensor":""}.`);return BIe(0,t,r,n)}function hkt(t,r){if(Array.isArray(t))return t;if(r==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(r==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(r==="bool"||r==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${r}`)}function s3(t,r){let n=Qk(t,r);for(let o=0;o<n.length;o++)n[o]=1;return n}function Qk(t,r){if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function mkt(t,r){let n=t.reduce((o,i)=>o*i,1);if(r==null||r==="float32")return hS(t,new Float32Array(n));if(r==="int32")return hS(t,new Int32Array(n));if(r==="bool")return hS(t,new Uint8Array(n));throw new Error(`Unknown data type ${r}`)}function ei(t){t.forEach(r=>{pe(Number.isInteger(r)&&r>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function gkt(t,r,n){if(r===0)return 0;if(r===1)return t[0];let o=t[t.length-1];for(let i=0;i<t.length-1;++i)o+=n[i]*t[i];return o}function ykt(t,r,n){if(r===0)return[];if(r===1)return[t];let o=new Array(r);for(let i=0;i<o.length-1;++i)o[i]=Math.floor(t/n[i]),t-=o[i]*n[i];return o[o.length-1]=t,o}function gS(t){return t&&t.then&&typeof t.then=="function"}var Xs=N(()=>{"use strict";});function xkt(t){let r={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...o)=>(vkt(r,o[0],o[1]),o.join("="))),r}function vkt(t,r,n){t[decodeURIComponent(r)]=decodeURIComponent(n||"")}function wkt(t,r){let n=r.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:r}function Me(){return u8}function zIe(t){u8=t}var $Ie,Jk,u8,ba=N(()=>{"use strict";Xs();$Ie="tfjsflags",Jk=class{constructor(r){this.global=r,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=xkt,this.populateURLFlags()}setPlatform(r,n){this.platform!=null&&(Me().getBool("IS_TEST")||Me().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${r}.`)),this.platformName=r,this.platform=n}registerFlag(r,n,o){if(this.flagRegistry[r]={evaluationFn:n,setHook:o},this.urlFlags[r]!=null){let i=this.urlFlags[r];Me().getBool("IS_TEST")||Me().getBool("PROD")||console.warn(`Setting feature override from URL ${r}: ${i}.`),this.set(r,i)}}getAsync(r){return je(this,null,function*(){return r in this.flags?this.flags[r]:(this.flags[r]=yield this.evaluateFlag(r),this.flags[r])})}get(r){if(r in this.flags)return this.flags[r];let n=this.evaluateFlag(r);if(gS(n))throw new Error(`Flag ${r} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[r]=n,this.flags[r]}getNumber(r){return this.get(r)}getBool(r){return this.get(r)}getString(r){return this.get(r)}getFlags(){return this.flags}get features(){return this.flags}set(r,n){if(this.flagRegistry[r]==null)throw new Error(`Cannot set flag ${r} as it has not been registered.`);this.flags[r]=n,this.flagRegistry[r].setHook!=null&&this.flagRegistry[r].setHook(n)}evaluateFlag(r){if(this.flagRegistry[r]==null)throw new Error(`Cannot evaluate flag '${r}': no evaluation function found.`);return this.flagRegistry[r].evaluationFn()}setFlags(r){this.flags=Object.assign({},r)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let r=this.getQueryParams(this.global.location.search);$Ie in r&&r[$Ie].split(",").forEach(o=>{let[i,s]=o.split(":");this.urlFlags[i]=wkt(i,s)})}};u8=null});function Aoe(){if(Toe==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Toe=t}return Toe}function _kt(){let t=Aoe();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function a3(t,r){let n=_kt();if(n.has(t))return n.get(t);{let o=r();return n.set(t,o),n.get(t)}}var Toe,c8=N(()=>{"use strict";});var Cb,Tg,Ag,np,Eb,yS,bS,Tb,Ab,kg,Ig,Dg,Ng,Mg,kb,xS,Ib,vS,Db,Nb,wS,M1,koe,_S,Ch,Fg,Og,SS,Mb,Fb,Ob,CS,Rb,Pb,ES,TS,Rg,Pg,AS,Lb,kS,IS,DS,jb,NS,MS,FS,Bb,eI,tI,rI,Lg,OS,jg,RS,Bg,F1,$g,$b,zg,PS,LS,jS,Ug,Vg,zb,Ub,BS,O1,Gg,Eh,$S,zS,Wg,qg,Hg,Vb,R1,P1,US,Yg,Xg,L1,j1,B1,Skt,Ioe,Ckt,Gb,VS,Ekt,Wb,Kg,qb,GS,Hb,WS,qS,Yb,Xb,Zg,Kb,Qg,HS,Jg,Zb,$1,YS,XS,KS,Qb,Jb,ex,tx,Tkt,e0,rx,nx,ZS,QS,JS,eC,tC,t0,r0,ox,ix,rC,sx,nC,n0,ax,o0,i0,oC,iC,sC,lx,s0,ux,a0,l0,u0,c0,f0,d0,cx,fx,dx,px,aC,lC,uC,cC,fC,p0,dC,z1,pC,hC,mC,gC,h0,m0,g0,Th,yC,bC,Ah,xC,hx,mx,Akt,gx,y0,nI,vC,U1,V1,G1,Ee=N(()=>{"use strict";Cb="Abs",Tg="Acos",Ag="Acosh",np="Add",Eb="AddN",yS="All",bS="Any",Tb="ArgMax",Ab="ArgMin",kg="Asin",Ig="Asinh",Dg="Atan",Ng="Atanh",Mg="Atan2",kb="AvgPool",xS="AvgPoolGrad",Ib="AvgPool3D",vS="AvgPool3DGrad",Db="BatchMatMul",Nb="BatchToSpaceND",wS="Bincount",M1="BitwiseAnd",koe="BroadcastTo",_S="BroadcastArgs",Ch="Cast",Fg="Ceil",Og="ClipByValue",SS="Complex",Mb="ComplexAbs",Fb="Concat",Ob="Conv2D",CS="Conv2DBackpropFilter",Rb="Conv2DBackpropInput",Pb="Conv3D",ES="Conv3DBackpropFilterV2",TS="Conv3DBackpropInputV2",Rg="Cos",Pg="Cosh",AS="Cumprod",Lb="Cumsum",kS="CropAndResize",IS="DenseBincount",DS="DepthToSpace",jb="DepthwiseConv2dNative",NS="DepthwiseConv2dNativeBackpropFilter",MS="DepthwiseConv2dNativeBackpropInput",FS="Diag",Bb="Dilation2D",eI="Dilation2DBackpropInput",tI="Dilation2DBackpropFilter",rI="Draw",Lg="RealDiv",OS="Einsum",jg="Elu",RS="EluGrad",Bg="Erf",F1="Equal",$g="Exp",$b="ExpandDims",zg="Expm1",PS="FFT",LS="Fill",jS="FlipLeftRight",Ug="Floor",Vg="FloorDiv",zb="FusedBatchNorm",Ub="GatherV2",BS="GatherNd",O1="Greater",Gg="GreaterEqual",Eh="Identity",$S="IFFT",zS="Imag",Wg="IsFinite",qg="IsInf",Hg="IsNan",Vb="LeakyRelu",R1="Less",P1="LessEqual",US="LinSpace",Yg="Log",Xg="Log1p",L1="LogicalAnd",j1="LogicalNot",B1="LogicalOr",Skt="LogicalXor",Ioe="LogSoftmax",Ckt="LowerBound",Gb="LRN",VS="LRNGrad",Ekt="MatrixBandPart",Wb="Max",Kg="Maximum",qb="MaxPool",GS="MaxPoolGrad",Hb="MaxPool3D",WS="MaxPool3DGrad",qS="MaxPoolWithArgmax",Yb="Mean",Xb="Min",Zg="Minimum",Kb="MirrorPad",Qg="Mod",HS="Multinomial",Jg="Multiply",Zb="Neg",$1="NotEqual",YS="NonMaxSuppressionV3",XS="NonMaxSuppressionV4",KS="NonMaxSuppressionV5",Qb="OnesLike",Jb="OneHot",ex="Pack",tx="PadV2",Tkt="Pool",e0="Pow",rx="Prelu",nx="Prod",ZS="RaggedGather",QS="RaggedRange",JS="RaggedTensorToTensor",eC="Range",tC="Real",t0="Reciprocal",r0="Relu",ox="Reshape",ix="ResizeNearestNeighbor",rC="ResizeNearestNeighborGrad",sx="ResizeBilinear",nC="ResizeBilinearGrad",n0="Relu6",ax="Reverse",o0="Round",i0="Rsqrt",oC="ScatterNd",iC="TensorScatterUpdate",sC="SearchSorted",lx="Select",s0="Selu",ux="Slice",a0="Sin",l0="Sinh",u0="Sign",c0="Sigmoid",f0="Softplus",d0="Sqrt",cx="Sum",fx="SpaceToBatchND",dx="SplitV",px="Softmax",aC="SparseFillEmptyRows",lC="SparseReshape",uC="SparseSegmentMean",cC="SparseSegmentSum",fC="SparseToDense",p0="SquaredDifference",dC="Square",z1="StaticRegexReplace",pC="StridedSlice",hC="StringNGrams",mC="StringSplit",gC="StringToHashBucketFast",h0="Sub",m0="Tan",g0="Tanh",Th="Tile",yC="TopK",bC="Transform",Ah="Transpose",xC="Unique",hx="Unpack",mx="UnsortedSegmentSum",Akt="UpperBound",gx="ZerosLike",y0="Step",nI="FromPixels",vC="RotateWithOffset",U1="_FusedMatMul",V1="FusedConv2D",G1="FusedDepthwiseConv2D"});function b0(...t){Me().getBool("IS_TEST")||Me().getBool("PROD")||console.warn(...t)}function kkt(...t){Me().getBool("IS_TEST")||Me().getBool("PROD")||console.log(...t)}var f8=N(()=>{"use strict";ba();});function wC(t,r){let n=Noe(t,r);return oI.get(n)}function d8(t){return l3.get(t)}function u3(t){let r=oI.entries(),n=[];for(;;){let{done:o,value:i}=r.next();if(o)break;let[s,a]=i,[l]=s.split("_");l===t&&n.push(a)}return n}function iI(t){let{kernelName:r,backendName:n}=t,o=Noe(r,n);oI.has(o)&&b0(`The kernel '${r}' for backend '${n}' is already registered`),oI.set(o,t)}function Doe(t){let{kernelName:r}=t;l3.has(r)&&Me().getBool("DEBUG")&&b0(`Overriding the gradient for '${r}'`),l3.set(r,t)}function Ikt(t,r){let n=Noe(t,r);if(!oI.has(n))throw new Error(`The kernel '${t}' for backend '${r}' is not registered`);oI.delete(n)}function Dkt(t){if(!l3.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);l3.delete(t)}function Nkt(t,r){u3(t).forEach(o=>{let i=Object.assign({},o,{backendName:r});iI(i)})}function Noe(t,r){return`${r}_${t}`}var oI,l3,c3=N(()=>{"use strict";ba();c8();f8();oI=a3("kernelRegistry",()=>new Map),l3=a3("gradRegistry",()=>new Map)});function p8(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Moe=N(()=>{"use strict";});var JIe=mt((qLr,QIe)=>{"use strict";QIe.exports=yi;var op=null;try{op=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function yi(t,r,n){this.low=t|0,this.high=r|0,this.unsigned=!!n}yi.prototype.__isLong__;Object.defineProperty(yi.prototype,"__isLong__",{value:!0});function Gc(t){return(t&&t.__isLong__)===!0}yi.isLong=Gc;var VIe={},GIe={};function SC(t,r){var n,o,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(o=GIe[t],o)?o:(n=bi(t,(t|0)<0?-1:0,!0),i&&(GIe[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(o=VIe[t],o)?o:(n=bi(t,t<0?-1:0,!1),i&&(VIe[t]=n),n))}yi.fromInt=SC;function ip(t,r){if(isNaN(t))return r?_C:sp;if(r){if(t<0)return _C;if(t>=YIe)return ZIe}else{if(t<=-qIe)return Vc;if(t+1>=qIe)return KIe}return t<0?ip(-t,r).neg():bi(t%aI|0,t/aI|0,r)}yi.fromNumber=ip;function bi(t,r,n){return new yi(t,r,n)}yi.fromBits=bi;var h8=Math.pow;function Ooe(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return sp;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return Ooe(t.substring(1),r,n).neg();for(var i=ip(h8(n,8)),s=sp,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+l),n);if(l<8){var c=ip(h8(n,l));s=s.mul(c).add(ip(u))}else s=s.mul(i),s=s.add(ip(u))}return s.unsigned=r,s}yi.fromString=Ooe;function kh(t,r){return typeof t=="number"?ip(t,r):typeof t=="string"?Ooe(t,r):bi(t.low,t.high,typeof r=="boolean"?r:t.unsigned)}yi.fromValue=kh;var WIe=65536,Mkt=1<<24,aI=WIe*WIe,YIe=aI*aI,qIe=YIe/2,HIe=SC(Mkt),sp=SC(0);yi.ZERO=sp;var _C=SC(0,!0);yi.UZERO=_C;var sI=SC(1);yi.ONE=sI;var XIe=SC(1,!0);yi.UONE=XIe;var Foe=SC(-1);yi.NEG_ONE=Foe;var KIe=bi(-1,2147483647,!1);yi.MAX_VALUE=KIe;var ZIe=bi(-1,-1,!0);yi.MAX_UNSIGNED_VALUE=ZIe;var Vc=bi(0,-2147483648,!1);yi.MIN_VALUE=Vc;var $t=yi.prototype;$t.toInt=function(){return this.unsigned?this.low>>>0:this.low};$t.toNumber=function(){return this.unsigned?(this.high>>>0)*aI+(this.low>>>0):this.high*aI+(this.low>>>0)};$t.toString=function(r){if(r=r||10,r<2||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Vc)){var n=ip(r),o=this.div(n),i=o.mul(n).sub(this);return o.toString(r)+i.toInt().toString(r)}else return"-"+this.neg().toString(r);for(var s=ip(h8(r,6),this.unsigned),a=this,l="";;){var u=a.div(s),c=a.sub(u.mul(s)).toInt()>>>0,f=c.toString(r);if(a=u,a.isZero())return f+l;for(;f.length<6;)f="0"+f;l=""+f+l}};$t.getHighBits=function(){return this.high};$t.getHighBitsUnsigned=function(){return this.high>>>0};$t.getLowBits=function(){return this.low};$t.getLowBitsUnsigned=function(){return this.low>>>0};$t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Vc)?64:this.neg().getNumBitsAbs();for(var r=this.high!=0?this.high:this.low,n=31;n>0&&!(r&1<<n);n--);return this.high!=0?n+33:n+1};$t.isZero=function(){return this.high===0&&this.low===0};$t.eqz=$t.isZero;$t.isNegative=function(){return!this.unsigned&&this.high<0};$t.isPositive=function(){return this.unsigned||this.high>=0};$t.isOdd=function(){return(this.low&1)===1};$t.isEven=function(){return(this.low&1)===0};$t.equals=function(r){return Gc(r)||(r=kh(r)),this.unsigned!==r.unsigned&&this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low};$t.eq=$t.equals;$t.notEquals=function(r){return!this.eq(r)};$t.neq=$t.notEquals;$t.ne=$t.notEquals;$t.lessThan=function(r){return this.comp(r)<0};$t.lt=$t.lessThan;$t.lessThanOrEqual=function(r){return this.comp(r)<=0};$t.lte=$t.lessThanOrEqual;$t.le=$t.lessThanOrEqual;$t.greaterThan=function(r){return this.comp(r)>0};$t.gt=$t.greaterThan;$t.greaterThanOrEqual=function(r){return this.comp(r)>=0};$t.gte=$t.greaterThanOrEqual;$t.ge=$t.greaterThanOrEqual;$t.compare=function(r){if(Gc(r)||(r=kh(r)),this.eq(r))return 0;var n=this.isNegative(),o=r.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1};$t.comp=$t.compare;$t.negate=function(){return!this.unsigned&&this.eq(Vc)?Vc:this.not().add(sI)};$t.neg=$t.negate;$t.add=function(r){Gc(r)||(r=kh(r));var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=r.high>>>16,l=r.high&65535,u=r.low>>>16,c=r.low&65535,f=0,d=0,p=0,h=0;return h+=s+c,p+=h>>>16,h&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=o+l,f+=d>>>16,d&=65535,f+=n+a,f&=65535,bi(p<<16|h,f<<16|d,this.unsigned)};$t.subtract=function(r){return Gc(r)||(r=kh(r)),this.add(r.neg())};$t.sub=$t.subtract;$t.multiply=function(r){if(this.isZero())return sp;if(Gc(r)||(r=kh(r)),op){var n=op.mul(this.low,this.high,r.low,r.high);return bi(n,op.get_high(),this.unsigned)}if(r.isZero())return sp;if(this.eq(Vc))return r.isOdd()?Vc:sp;if(r.eq(Vc))return this.isOdd()?Vc:sp;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(HIe)&&r.lt(HIe))return ip(this.toNumber()*r.toNumber(),this.unsigned);var o=this.high>>>16,i=this.high&65535,s=this.low>>>16,a=this.low&65535,l=r.high>>>16,u=r.high&65535,c=r.low>>>16,f=r.low&65535,d=0,p=0,h=0,m=0;return m+=a*f,h+=m>>>16,m&=65535,h+=s*f,p+=h>>>16,h&=65535,h+=a*c,p+=h>>>16,h&=65535,p+=i*f,d+=p>>>16,p&=65535,p+=s*c,d+=p>>>16,p&=65535,p+=a*u,d+=p>>>16,p&=65535,d+=o*f+i*c+s*u+a*l,d&=65535,bi(h<<16|m,d<<16|p,this.unsigned)};$t.mul=$t.multiply;$t.divide=function(r){if(Gc(r)||(r=kh(r)),r.isZero())throw Error("division by zero");if(op){if(!this.unsigned&&this.high===-2147483648&&r.low===-1&&r.high===-1)return this;var n=(this.unsigned?op.div_u:op.div_s)(this.low,this.high,r.low,r.high);return bi(n,op.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_C:sp;var o,i,s;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return _C;if(r.gt(this.shru(1)))return XIe;s=_C}else{if(this.eq(Vc)){if(r.eq(sI)||r.eq(Foe))return Vc;if(r.eq(Vc))return sI;var a=this.shr(1);return o=a.div(r).shl(1),o.eq(sp)?r.isNegative()?sI:Foe:(i=this.sub(r.mul(o)),s=o.add(i.div(r)),s)}else if(r.eq(Vc))return this.unsigned?_C:sp;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();s=sp}for(i=this;i.gte(r);){o=Math.max(1,Math.floor(i.toNumber()/r.toNumber()));for(var l=Math.ceil(Math.log(o)/Math.LN2),u=l<=48?1:h8(2,l-48),c=ip(o),f=c.mul(r);f.isNegative()||f.gt(i);)o-=u,c=ip(o,this.unsigned),f=c.mul(r);c.isZero()&&(c=sI),s=s.add(c),i=i.sub(f)}return s};$t.div=$t.divide;$t.modulo=function(r){if(Gc(r)||(r=kh(r)),op){var n=(this.unsigned?op.rem_u:op.rem_s)(this.low,this.high,r.low,r.high);return bi(n,op.get_high(),this.unsigned)}return this.sub(this.div(r).mul(r))};$t.mod=$t.modulo;$t.rem=$t.modulo;$t.not=function(){return bi(~this.low,~this.high,this.unsigned)};$t.and=function(r){return Gc(r)||(r=kh(r)),bi(this.low&r.low,this.high&r.high,this.unsigned)};$t.or=function(r){return Gc(r)||(r=kh(r)),bi(this.low|r.low,this.high|r.high,this.unsigned)};$t.xor=function(r){return Gc(r)||(r=kh(r)),bi(this.low^r.low,this.high^r.high,this.unsigned)};$t.shiftLeft=function(r){return Gc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?bi(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):bi(0,this.low<<r-32,this.unsigned)};$t.shl=$t.shiftLeft;$t.shiftRight=function(r){return Gc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?bi(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):bi(this.high>>r-32,this.high>=0?0:-1,this.unsigned)};$t.shr=$t.shiftRight;$t.shiftRightUnsigned=function(r){if(Gc(r)&&(r=r.toInt()),r&=63,r===0)return this;var n=this.high;if(r<32){var o=this.low;return bi(o>>>r|n<<32-r,n>>>r,this.unsigned)}else return r===32?bi(n,0,this.unsigned):bi(n>>>r-32,0,this.unsigned)};$t.shru=$t.shiftRightUnsigned;$t.shr_u=$t.shiftRightUnsigned;$t.toSigned=function(){return this.unsigned?bi(this.low,this.high,!1):this};$t.toUnsigned=function(){return this.unsigned?this:bi(this.low,this.high,!0)};$t.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()};$t.toBytesLE=function(){var r=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]};$t.toBytesBE=function(){var r=this.high,n=this.low;return[r>>>24,r>>>16&255,r>>>8&255,r&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};yi.fromBytes=function(r,n,o){return o?yi.fromBytesLE(r,n):yi.fromBytesBE(r,n)};yi.fromBytesLE=function(r,n){return new yi(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,n)};yi.fromBytesBE=function(r,n){return new yi(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],n)}});function f3(t){return EC.fromString(t,!0,16)}function Roe(t){return t.xor(t.shru(47))}function rDe(t,r,n){let o=t.slice(r,r+n);return EC.fromBytes(Array.from(o),!0,!0)}function ti(t,r){return rDe(t,r,8)}function eDe(t,r){return rDe(t,r,4)}function xa(t,r){return r===0?t:t.shru(r).or(t.shl(64-r))}function W1(t,r,n=f3("9ddfea08eb382d69")){let o=t.xor(r).mul(n);o=o.xor(o.shru(47));let i=r.xor(o).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Fkt(t,r,n,o,i,s){i=i.add(t),s=xa(s.add(i).add(o),21);let a=i;return i=i.add(r),i=i.add(n),s=s.add(xa(i,44)),[i.add(o),s.add(a)]}function m8(t,r,n,o){return Fkt(ti(t,r),ti(t,r+8),ti(t,r+16),ti(t,r+24),n,o)}function Okt(t,r=t.length){if(r>=8){let n=iu.add(r*2),o=ti(t,0).add(iu),i=ti(t,r-8),s=xa(i,37).mul(n).add(o),a=xa(o,25).add(i).mul(n);return W1(s,a,n)}if(r>=4){let n=iu.add(r*2),o=eDe(t,0);return W1(o.shl(3).add(r),eDe(t,r-4),n)}if(r>0){let n=t[0],o=t[r>>1],i=t[r-1],s=n+(o<<8),a=r+(i<<2);return Roe(iu.mul(s).xor(tDe.mul(a))).mul(iu)}return iu}function Rkt(t,r=t.length){let n=iu.add(r*2),o=ti(t,0).mul(CC),i=ti(t,8),s=ti(t,r-8).mul(n),a=ti(t,r-16).mul(iu);return W1(xa(o.add(i),43).add(xa(s,30)).add(a),o.add(xa(i.add(iu),18)).add(s),n)}function Pkt(t,r=t.length){let n=iu.add(r*2),o=ti(t,0).mul(iu),i=ti(t,8),s=ti(t,r-8).mul(n),a=ti(t,r-16).mul(iu),l=xa(o.add(i),43).add(xa(s,30)).add(a),u=W1(l,o.add(xa(i.add(iu),18)).add(s),n),c=ti(t,16).mul(n),f=ti(t,24),d=l.add(ti(t,r-32)).mul(n),p=u.add(ti(t,r-24)).mul(n);return W1(xa(c.add(f),43).add(xa(d,30)).add(p),c.add(xa(f.add(o),18)).add(d),n)}function Lkt(t,r=t.length){let n=EC.fromNumber(81,!0);if(r<=32)return r<=16?Okt(t,r):Rkt(t,r);if(r<=64)return Pkt(t,r);let o=n,i=n.mul(CC).add(113),s=Roe(i.mul(iu).add(113)).mul(iu),a=[EC.UZERO,EC.UZERO],l=[EC.UZERO,EC.UZERO];o=o.mul(iu).add(ti(t,0));let u=0,c=(r-1>>6)*64,f=c+(r-1&63)-63;do o=xa(o.add(i).add(a[0]).add(ti(t,u+8)),37).mul(CC),i=xa(i.add(a[1]).add(ti(t,u+48)),42).mul(CC),o=o.xor(l[1]),i=i.add(a[0]).add(ti(t,u+40)),s=xa(s.add(l[0]),33).mul(CC),a=m8(t,u,a[1].mul(CC),o.add(l[0])),l=m8(t,u+32,s.add(l[1]),i.add(ti(t,u+16))),[s,o]=[o,s],u+=64;while(u!==c);let d=CC.add(s.and(255).shl(1));return u=f,l[0]=l[0].add(r-1&63),a[0]=a[0].add(l[0]),l[0]=l[0].add(a[0]),o=xa(o.add(i).add(a[0]).add(ti(t,u+8)),37).mul(d),i=xa(i.add(a[1]).add(ti(t,u+48)),42).mul(d),o=o.xor(l[1].mul(9)),i=i.add(a[0].mul(9).add(ti(t,u+40))),s=xa(s.add(l[0]),33).mul(d),a=m8(t,u,a[1].mul(d),o.add(l[0])),l=m8(t,u+32,s.add(l[1]),i.add(ti(t,u+16))),[s,o]=[o,s],W1(W1(a[0],l[0],d).add(Roe(i).mul(tDe)).add(s),W1(a[1],l[1],d).add(o),d)}var Poe,EC,tDe,CC,iu,nDe=N(()=>{"use strict";Poe=Pc(JIe());EC=Poe.default||Poe;tDe=f3("c3a5c85c97cb3127"),CC=f3("b492b66fbe98f273"),iu=f3("9ae16a3b2f90404f")});var Y={};fn(Y,{arraysEqual:()=>ou,arraysEqualWithNull:()=>voe,assert:()=>pe,assertNonNegativeIntegerDimensions:()=>ei,assertNonNull:()=>ad,assertShapesMatch:()=>Bo,bytesFromStringArray:()=>Eoe,bytesPerElement:()=>Kk,checkConversionForErrors:()=>Soe,clamp:()=>Xk,computeStrides:()=>Eg,convertBackendValuesAndArrayBuffer:()=>hkt,createScalarValue:()=>jkt,createShuffledIndices:()=>ckt,decodeString:()=>uI,distSquared:()=>skt,encodeString:()=>q1,fetch:()=>$kt,fingerPrint64:()=>Lkt,flatten:()=>Ih,getArrayFromDType:()=>l8,getTypedArrayFromDType:()=>_oe,hasEncodingLoss:()=>pkt,hexToLong:()=>f3,indexToLoc:()=>ykt,inferDtype:()=>N1,inferFromImplicitShape:()=>dkt,isBoolean:()=>LIe,isFunction:()=>Cg,isInt:()=>Sb,isNumber:()=>jIe,isPromise:()=>gS,isScalarShape:()=>akt,isString:()=>Sh,isTypedArray:()=>Vi,isValidDtype:()=>Coe,locToIndex:()=>gkt,makeOnesTypedArray:()=>s3,makeZerosNestedTypedArray:()=>mkt,makeZerosTypedArray:()=>Qk,nearestDivisor:()=>Zk,nearestLargerEven:()=>nkt,now:()=>TC,parseAxisParam:()=>gs,randUniform:()=>ikt,repeatedTry:()=>fkt,rightPad:()=>mS,shuffle:()=>PIe,shuffleCombo:()=>rkt,sizeFromShape:()=>on,sizeToSquarishShape:()=>ukt,squeezeShape:()=>woe,sum:()=>okt,swap:()=>a8,tanh:()=>lkt,toNestedArray:()=>hS,toTypedArray:()=>lI});function jkt(t,r){return r==="string"?q1(t):lI([t],r)}function Bkt(t,r){return t instanceof Float32Array&&r==="float32"||t instanceof Int32Array&&r==="int32"||t instanceof Uint8Array&&r==="bool"}function lI(t,r){if(r==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ih(t)),Me().getBool("DEBUG")&&Soe(t,r),Bkt(t,r))return t;if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool"){let n=new Uint8Array(t.length);for(let o=0;o<n.length;++o)Math.round(t[o])!==0&&(n[o]=1);return n}else throw new Error(`Unknown data type ${r}`)}function TC(){return Me().platform.now()}function $kt(t,r){return Me().platform.fetch(t,r)}function q1(t,r="utf-8"){return r=r||"utf-8",Me().platform.encode(t,r)}function uI(t,r="utf-8"){return r=r||"utf-8",Me().platform.decode(t,r)}function Vi(t){return Me().platform.isTypedArray!=null?Me().platform.isTypedArray(t):p8(t)}function Ih(t,r=[],n=!1){if(r==null&&(r=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||gS(t)||t==null||Vi(t)&&n)r.push(t);else if(Array.isArray(t)||Vi(t))for(let o=0;o<t.length;++o)Ih(t[o],r,n);else{let o=-1;for(let i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(o=Math.max(o,Number(i)));for(let i=0;i<=o;i++)Ih(t[i],r,n)}return r}var Ze=N(()=>{"use strict";ba();Moe();Xs();Xs();nDe();});function zkt(t,r,n){if(r!=="float32")return!1;for(let o=0;o<t.length;o++){let i=t[o];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}var g8,Loe,oDe=N(()=>{"use strict";ba();Ze();g8=class{constructor(r,n){this.backendTimer=r,this.logger=n,n==null&&(this.logger=new Loe)}profileKernel(r,n,o){let i,s=()=>{i=o()},a,l=TC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(let c of i)c.dataSync();a=Promise.resolve({kernelMs:TC()-l})}if(Me().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){let f=i[c];f.data().then(d=>{zkt(d,f.dtype,r)})}return{kernelName:r,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(r){let{kernelName:n,outputs:o,timeMs:i,inputs:s,extraInfo:a}=r;o.forEach(l=>{Promise.all([l.data(),i,a]).then(u=>{this.logger.logKernelProfile(n,l,u[0],u[1],s,u[2])})})}};Loe=class{logKernelProfile(r,n,o,i,s,a){let l=typeof i=="number"?mS(`${i}ms`,9):i.error,u=mS(r,25),c=n.rank,f=n.size,d=mS(n.shape.toString(),14),p="";for(let h in s){let m=s[h];if(m!=null){let g=m.shape||n.shape,y=g.length;p+=`${h}: ${y}D ${y>0?g:""} `}}console.log(`%c${u}	%c${l}	%c${c}D ${d}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function iDe(t,r,n){let o={},i={};for(let u=0;u<r.length;u++)o[r[u].id]=!0;for(let u=0;u<t.length;u++){let c=t[u],f=c.inputs;for(let d in f){let p=f[d],h=!1;for(let m=0;m<r.length;m++)if(o[p.id]){c.outputs.forEach(g=>o[g.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}let s={};s[n.id]=!0;let a={};for(let u=t.length-1;u>=0;u--){let c=t[u],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(let p in f)s[f[p].id]=!0,a[c.id]=!0;break}}let l=[];for(let u=0;u<t.length;u++){let c=t[u];if(i[c.id]&&a[c.id]){let f={};for(let p in c.inputs){let h=c.inputs[p];o[h.id]&&(f[p]=h)}let d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,l.push(d)}}return l}function sDe(t,r,n,o){for(let i=r.length-1;i>=0;i--){let s=r[i],a=[];if(s.outputs.forEach(u=>{let c=t[u.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let l=s.gradient(a);for(let u in s.inputs){if(!(u in l))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(l)}.`);let c=n(()=>l[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let f=s.inputs[u];if(!ou(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{let d=t[f.id];t[f.id]=o(d,c),d.dispose()}}}}var aDe=N(()=>{"use strict";Ze();});function uDe(t,r,n,o){let i=Eg(r),s=Ukt(t,r,n,i),a=r.length,l=y8(t,r,n,i,s),u=["Tensor"];return o&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${a}`),u.push(`  shape: [${r}]`),u.push("  values:")),u.push(l.map(c=>"    "+c).join(`
`)),u.join(`
`)}function Ukt(t,r,n,o){let i=on(r),s=o[o.length-1],a=new Array(s).fill(0),l=r.length,u=n==="complex64"?h3(t):t;if(l>1)for(let c=0;c<i/s;c++){let f=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],p3(u[f+d],0,n).length)}return a}function p3(t,r,n){let o;return Array.isArray(t)?o=`${parseFloat(t[0].toFixed(joe))} + ${parseFloat(t[1].toFixed(joe))}j`:Sh(t)?o=`'${t}'`:n==="bool"?o=cDe(t):o=parseFloat(t.toFixed(joe)).toString(),mS(o,r)}function cDe(t){return t===0?"false":"true"}function y8(t,r,n,o,i,s=!0){let a=n==="complex64"?2:1,l=r[0],u=r.length;if(u===0){if(n==="complex64"){let g=h3(t);return[p3(g[0],0,n)]}return n==="bool"?[cDe(t[0])]:[t[0].toString()]}if(u===1){if(l>lDe){let y=d3*a,b=Array.from(t.slice(0,y)),x=Array.from(t.slice((l-d3)*a,l*a));return n==="complex64"&&(b=h3(b),x=h3(x)),["["+b.map((v,w)=>p3(v,i[w],n)).join(", ")+", ..., "+x.map((v,w)=>p3(v,i[l-d3+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?h3(t):Array.from(t)).map((y,b)=>p3(y,i[b],n)).join(", ")+"]"]}let c=r.slice(1),f=o.slice(1),d=o[0]*a,p=[];if(l>lDe){for(let g=0;g<d3;g++){let y=g*d,b=y+d;p.push(...y8(t.slice(y,b),c,n,f,i,!1))}p.push("...");for(let g=l-d3;g<l;g++){let y=g*d,b=y+d;p.push(...y8(t.slice(y,b),c,n,f,i,g===l-1))}}else for(let g=0;g<l;g++){let y=g*d,b=y+d;p.push(...y8(t.slice(y,b),c,n,f,i,g===l-1))}let h=u===2?",":"";p[0]="["+(l>0?p[0]+h:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+h;let m=`,
`;for(let g=2;g<u;g++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":m),p}function h3(t){let r=[];for(let n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return r}var lDe,d3,joe,fDe=N(()=>{"use strict";Ze();lDe=20,d3=3,joe=7});function dDe(t){Dh=t}function pDe(t){cI=t}function hDe(t){Vkt=t}function Ce(){return a3("Tensor",()=>tn)}var Tn,Dh,cI,Vkt,tn,x0,Je=N(()=>{"use strict";c8();fDe();Ze();Ze();Tn=class{constructor(r,n,o){if(this.dtype=n,this.shape=r.slice(),this.size=on(r),o!=null){let i=o.length;pe(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=o||l8(n,this.size),this.strides=Eg(r)}set(r,...n){n.length===0&&(n=[0]),pe(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let o=this.locToIndex(n);this.values[o]=r}get(...r){r.length===0&&(r=[0]);let n=0;for(let i of r){if(i<0||i>=this.shape[n]){let s=`Requested out of range element at ${r}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let o=r[r.length-1];for(let i=0;i<r.length-1;++i)o+=this.strides[i]*r[i];return this.values[o]}locToIndex(r){if(this.rank===0)return 0;if(this.rank===1)return r[0];let n=r[r.length-1];for(let o=0;o<r.length-1;++o)n+=this.strides[o]*r[o];return n}indexToLoc(r){if(this.rank===0)return[];if(this.rank===1)return[r];let n=new Array(this.shape.length);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(r/this.strides[o]),r-=n[o]*this.strides[o];return n[n.length-1]=r,n}get rank(){return this.shape.length}toTensor(){return Dh().makeTensor(this.values,this.shape,this.dtype)}},Dh=null,cI=null,Vkt=null;tn=class{constructor(r,n,o,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=r.slice(),this.dtype=n||"float32",this.size=on(r),this.strides=Eg(r),this.dataId=o,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return je(this,null,function*(){let r=yield this.data();return cI.buffer(this.shape,this.dtype,r)})}bufferSync(){return cI.buffer(this.shape,this.dtype,this.dataSync())}array(){return je(this,null,function*(){let r=yield this.data();return hS(this.shape,r,this.dtype==="complex64")})}arraySync(){return hS(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return je(this,null,function*(){this.throwIfDisposed();let r=Dh().read(this.dataId);if(this.dtype==="string"){let n=yield r;try{return n.map(o=>uI(o))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return r})}dataToGPU(r){return this.throwIfDisposed(),Dh().readToGPU(this.dataId,r)}dataSync(){this.throwIfDisposed();let r=Dh().readSync(this.dataId);if(this.dtype==="string")try{return r.map(n=>uI(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return r}bytes(){return je(this,null,function*(){this.throwIfDisposed();let r=yield Dh().read(this.dataId);return this.dtype==="string"?r:new Uint8Array(r.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Dh().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(r=!1){return cI.print(this,r)}clone(){return this.throwIfDisposed(),cI.clone(this)}toString(r=!1){let n=this.dataSync();return uDe(n,this.shape,this.dtype,r)}cast(r){return this.throwIfDisposed(),cI.cast(this,r)}variable(r=!0,n,o){return this.throwIfDisposed(),Dh().makeVariable(this,r,n,o)}};Object.defineProperty(tn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});Ce();x0=class extends tn{constructor(r,n,o,i){super(r.shape,r.dtype,r.dataId,i),this.trainable=n,this.name=o}assign(r){if(r.dtype!==this.dtype)throw new Error(`dtype of the new value (${r.dtype}) and previous value (${this.dtype}) must match`);if(!ou(r.shape,this.shape))throw new Error(`shape of the new value (${r.shape}) and previous value (${this.shape}) must match`);Dh().disposeTensor(this),this.dataId=r.dataId,Dh().incRef(this,null)}dispose(){Dh().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(x0,Symbol.hasInstance,{value:t=>t instanceof tn&&t.assign!=null&&t.assign instanceof Function})});function Gi(t,r){if(t==="string"||r==="string"){if(t==="string"&&r==="string")return"string";throw new Error(`Can not upcast ${t} with ${r}`)}return Gkt[t][r]}function H1(t){return Gi(t,"int32")}function b8(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function x8(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}var Boe,mDe,gDe,yDe,bDe,Gkt,fI=N(()=>{"use strict";Boe=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(Boe||{}),mDe=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(mDe||{}),gDe=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(gDe||{}),yDe=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(yDe||{}),bDe=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(bDe||{}),Gkt={float32:yDe,int32:mDe,bool:gDe,complex64:bDe}});var v8={};fn(v8,{assertTypesMatch:()=>$oe,getTensorsInContainer:()=>m3,isTensorInList:()=>Wkt,makeTypesMatch:()=>sn});function sn(t,r){if(t.dtype===r.dtype)return[t,r];let n=Gi(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function $oe(t,r){pe(t.dtype===r.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${r.dtype}) input must match`)}function Wkt(t,r){return r.some(n=>n.id===t.id)}function m3(t){let r=[];return xDe(t,r,new Set),r}function xDe(t,r,n){if(t==null)return;if(t instanceof tn){r.push(t);return}if(!qkt(t))return;let o=t;for(let i in o){let s=o[i];n.has(s)||(n.add(s),xDe(s,r,n))}}function qkt(t){return Array.isArray(t)||typeof t=="object"}var ri=N(()=>{"use strict";Je();fI();Ze();});function zoe(t){return t.kernelName!=null}function Ykt(t){let r=s3(on(t),"float32");return ue.makeTensor(r,t,"float32")}function Uoe(){let t=Aoe();if(t._tfengine==null){let r=new Jk(t);t._tfengine=new Hkt(r)}return zIe(t._tfengine.ENV),dDe(()=>t._tfengine),t._tfengine}function Xkt(t,r){let n={a:t,b:r};return ue.runKernel(np,n)}var w8,Hkt,ue,ze=N(()=>{"use strict";xoe();ba();c8();Ee();c3();f8();oDe();aDe();Je();ri();Ze();Ze();w8=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(r=>r.name)))}}}dispose(){for(let r in this.registeredVariables)this.registeredVariables[r].dispose()}},Hkt=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new w8}ready(){return je(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o];if(yield this.initializeBackend(i).success){yield this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:o}=this.initializeBackendsAndReturnBest();if(o)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:o}=this.initializeBackend(n);if(o)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,o,i=1){return n in this.registryFactory?(b0(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:o,priority:i},!0)}setBackend(n){return je(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:o,asyncInit:i}=this.initializeBackend(n);if(!(i?yield o:o))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new g8(this.backendInstance),!0})}setupRegisteredKernels(){u3(this.backendName).forEach(o=>{o.setupFunc!=null&&o.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){u3(n).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[n])})}initializeBackend(n){let o=this.registryFactory[n];if(o==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let i=o.factory();if(i&&!(i instanceof Sg)&&typeof i.then=="function"){let s=++this.pendingBackendInitId,a=i.then(l=>s<this.pendingBackendInitId?!1:(this.registry[n]=l,this.pendingBackendInit=null,!0)).catch(l=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,b0(`Initialization of backend ${n} failed`),b0(l.stack||l.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(i){return b0(`Initialization of backend ${n} failed`),b0(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,o)=>this.registryFactory[o].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o],{success:s,asyncInit:a}=this.initializeBackend(i);if(a||s)return{name:i,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,o){let i=this.state.tensorInfo.get(o),s=i.backend,a=this.readSync(o),l=s.refCount(o);s.disposeData(o,!0),i.backend=n,n.move(o,a,i.shape,i.dtype,l),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,o){let i=null;if(o==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");o=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof o!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=n}let s;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(s),()=>(s=o(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(n,o,i){n();try{let s=i();return o(),s}catch(s){throw o(),s}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let o=ue.runKernel(Eh,{x:n}),i={x:n},s=l=>({x:()=>{let u="float32",c={x:l},f={dtype:u};return ue.runKernel(Ch,c,f)}}),a=[];return this.addTapeNode(this.state.activeScope.name,i,[o],s,a,{}),o}runKernel(n,o,i){if(this.backendName==null&&this.backend,!(wC(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:o,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,o,i){let s=this.backend.numDataIds(),a=0;i.forEach(c=>{a+=c.dtype==="complex64"?3:1});let l=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=s-o-a-l;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let o,i=[],s=this.isTapeOn(),a=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,f=zoe(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(zoe(n)){let{kernelName:g,inputs:y,attrs:b}=n;this.backendName==null&&this.backend;let x=wC(g,this.backendName);pe(x!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),u=()=>{let v=this.backend.numDataIds();c=x.kernelFunc({inputs:y,attrs:b,backend:this.backend});let w=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,v,w);let _=w.map(S=>S.rank!=null?S:this.makeTensorFromTensorInfo(S));if(s){let S=this.getTensorsForGradient(g,y,_);i=this.saveTensorsForBackwardMode(S)}return _}}else{let{forwardFunc:g}=n,y=b=>{s&&(i=b.map(x=>this.keep(this.clone(x))))};u=()=>{let b=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,y));let x=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,b,x),x}}let{inputs:d,attrs:p}=n,h=zoe(n)?null:n.backwardsFunc,m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?o=u():(m=this.profiler.profileKernel(f,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),o=m.outputs)}),s&&this.addTapeNode(f,d,o,h,i,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:o.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(c)?o:o[0]}saveTensorsForBackwardMode(n){return n.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(n,o,i){let s=d8(n);if(s!=null){let a=s.inputsToSave||[],l=s.outputsToSave||[],u;s.saveAllInputs?(pe(Array.isArray(o),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(o).map(f=>o[f])):u=a.map(f=>o[f]);let c=i.filter((f,d)=>l[d]);return u.concat(c)}return[]}makeTensor(n,o,i,s){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",s=s||this.backend;let a=n;i==="string"&&Sh(n[0])&&(a=n.map(c=>q1(c)));let l=s.write(a,o,i),u=new tn(o,i,l,this.nextTensorId());if(this.trackTensor(u,s),i==="string"){let c=this.state.tensorInfo.get(l),f=Eoe(a);this.state.numBytes+=f-c.bytes,c.bytes=f}return u}makeTensorFromDataId(n,o,i,s){i=i||"float32";let a={dataId:n,shape:o,dtype:i};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(n,o){let{dataId:i,shape:s,dtype:a}=n,l=new tn(s,a,i,this.nextTensorId());return this.trackTensor(l,o),l}makeVariable(n,o=!0,i,s){i=i||this.nextVariableId().toString(),s!=null&&s!==n.dtype&&(n=n.cast(s));let a=new x0(n,o,i,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(n,o){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*Kk(n.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:o||this.backend,dtype:n.dtype,shape:n.shape,bytes:i})),n instanceof x0||this.track(n)}incRef(n,o){this.trackTensor(n,o),this.backend.incRef(n.dataId)}removeDataId(n,o){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===o&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let o=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=o.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let i=n.size*Kk(n.dtype);this.state.numBytes-=i}o.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,o.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let o=this.state.registeredVariables[n];this.disposeVariable(o)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return je(this,null,function*(){this.state.profiling=!0;let o=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-o,this.state.activeProfile.newTensors=this.state.numTensors-i;for(let s of this.state.activeProfile.kernels)s.kernelTimeMs=yield s.kernelTimeMs,s.extraInfo=yield s.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,o,i,s,a,l){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:o,outputs:i,saved:a},c=d8(n);c!=null&&(s=c.gradFunc),s!=null&&(u.gradient=f=>(f=f.map((d,p)=>{if(d==null){let h=i[p],m=Qk(h.size,h.dtype);return this.makeTensor(m,h.shape,h.dtype)}return d}),s(f.length>1?f:f[0],a,l))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let o={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(o.name=n),this.state.scopeStack.push(o),this.state.activeScope=o}endScope(n){let o=m3(n),i=new Set(o.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let l=this.state.activeScope.track[a];!l.kept&&!i.has(l.id)&&l.dispose()}let s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],o.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(n,o,i,s=!1){if(pe(o.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));pe(a instanceof tn,()=>"The result y returned by f() must be a tensor.");let l=iDe(this.state.activeTape,o,a);if(!s&&l.length===0&&o.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[a.id]=i??Ykt(a.shape),sDe(u,l,f=>this.tidy(f),Xkt);let c=o.map(f=>u[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(let d of f.saved)d.dispose()}),this.state.activeTape=null),{value:a,grads:c}})}customGrad(n){return pe(Cg(n),()=>"The f passed in customGrad(f) must be a function."),(...o)=>{pe(o.every(u=>u instanceof tn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i,s={};o.forEach((u,c)=>{s[c]=u});let a=(u,c)=>(i=n(...o,c),pe(i.value instanceof tn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),pe(Cg(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),l=(u,c)=>{let f=i.gradFunc(u,c),d=Array.isArray(f)?f:[f];pe(d.length===o.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),pe(d.every(h=>h instanceof tn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,m)=>{p[m]=()=>h}),p};return this.runKernelFunc({forwardFunc:a,backwardsFunc:l,inputs:s})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,o){return this.state.tensorInfo.get(n).backend.readToGPU(n,o)}time(n){return je(this,null,function*(){let o=TC(),i=yield this.backend.time(n);return i.wallMs=TC()-o,i})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new w8;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();ue=Uoe()});var yx={};fn(yx,{isBrowser:()=>Goe,isMobile:()=>Qkt,mockIsMobile:()=>Zkt});function Kkt(){return typeof navigator<"u"&&navigator!=null}function Zkt(t){Voe=t}function Qkt(t){if(Voe!==void 0)return Voe;if(t||Kkt()){if(t||(t=navigator),t.product==="ReactNative")return!0;let r=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!r){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}return!1}function Goe(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Voe,Woe=N(()=>{"use strict";});var Hu,dI=N(()=>{"use strict";ze();Woe();ba();Hu=Me();Hu.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Hu.registerFlag("IS_BROWSER",()=>Goe());Hu.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Hu.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Hu.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Hu.registerFlag("PROD",()=>!1);Hu.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Hu.getBool("DEBUG"));Hu.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Hu.registerFlag("IS_TEST",()=>!1);Hu.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Hu.getBool("DEBUG"));Hu.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Hu.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Hu.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function Ga(t,r){let n=t;if(Vi(t))return r==="string"?[]:[t.length];if(b8(t)){let i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(x8(t))return[t.buffer.size/(r==null?4:Kk(r))];if(!Array.isArray(t))return[];let o=[];for(;Array.isArray(n)||Vi(n)&&r!=="string";)o.push(n.length),n=n[0];return Array.isArray(t)&&Me().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&wDe(t,o,[]),o}function wDe(t,r,n){if(n=n||[],!Array.isArray(t)&&!Vi(t)){pe(r.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${r[0]} elements`);return}pe(r.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),pe(t.length===r[0],()=>`Element arr[${n.join("][")}] should have ${r[0]} elements, but has ${t.length} elements`);let o=r.slice(1);for(let i=0;i<t.length;++i)wDe(t[i],o,n.concat(i))}function vDe(t,r,n,o){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==r||t==="numeric"&&r==="string")throw new Error(`Argument '${n}' passed to '${o}' must be ${t} tensor, but got ${r} tensor`)}}function J(t,r,n,o="numeric"){if(t instanceof Ce())return vDe(o,t.dtype,r,n),t;let i=N1(t);if(i!=="string"&&["bool","int32","float32"].indexOf(o)>=0&&(i=o),vDe(o,i,r,n),t==null||!Vi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let u=t==null?"null":t.constructor.name;throw new Error(`Argument '${r}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let s=Ga(t,i);!Vi(t)&&!Array.isArray(t)&&(t=[t]);let l=i!=="string"?lI(t,i):Ih(t,[],!0);return ue.makeTensor(l,s,i)}function bx(t,r,n,o="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${r} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>J(s,`${r}[${a}]`,n,o))}var Le=N(()=>{"use strict";ze();ba();Je();fI();Ze();Xs();});function se(t){let r=Object.keys(t);if(r.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${r.length} keys.`);let n=r[0],o=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+qoe;let i=(...s)=>{ue.startScope(n);try{let a=o(...s);return gS(a)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(a),a}catch(a){throw ue.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var qoe,Ne=N(()=>{"use strict";ze();Ze();qoe="__op"});function Jkt(t,r){let n=J(t,"real","complex"),o=J(r,"imag","complex");Bo(n.shape,o.shape,`real and imag shapes, ${n.shape} and ${o.shape}, must match in call to tf.complex().`);let i={real:n,imag:o};return ue.runKernel(SS,i)}var Yu,Y1=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yu=se({complex_:Jkt})});function su(t,r,n,o){if(o==null)o=N1(t);else if(o==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(x8(t)||b8(t)){if(o!=="float32"&&o!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${o}.`);return ue.backend.createTensorFromGPUData(t,r||n,o)}if(!Vi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(r!=null){ei(r);let i=on(r),s=on(n);pe(i===s,()=>`Based on the provided shape, [${r}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1?l!==on(r.slice(a)):!0;pe(n[a]===r[a]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${r}). `)}}return!Vi(t)&&!Array.isArray(t)&&(t=[t]),r=r||n,t=o!=="string"?lI(t,o):Ih(t,[],!0),ue.makeTensor(t,r,o)}var xx=N(()=>{"use strict";ze();fI();Ze();});function Ti(t,r,n){let o=Ga(t,n);return su(t,r,o,n)}var g3=N(()=>{"use strict";Le();xx();});var vx,Hoe=N(()=>{"use strict";vx={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function eIt(t,r){let n=0,o=t.length;for(;n<=o;){let i=Math.floor((o-n)/2)+n,s=r(t[i]);if(s===0)return i;s<0?o=i:n=i+1}return-1}var Wa,X1=N(()=>{"use strict";Ze();Wa=class t{static join(r){return new t(r).slice()}constructor(r){if(this.shards=[],this.previousShardIndex=0,r==null||(r instanceof Array||(r=[r]),r=r.map(o=>Vi(o)?o.buffer:o),r.length===0))return;this.bufferUniformSize=r[0].byteLength;let n=0;for(let o=0;o<r.length;o++){let i=r[o];o!==r.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(r=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(r=isNaN(Number(r))?0:r,n=isNaN(Number(n))?0:n,r=Math.max(0,r),n=Math.min(this.byteLength,n),n<=r)return new ArrayBuffer(0);let o=this.findShardForByte(r);if(o===-1)throw new Error(`Could not find start shard for byte ${r}`);let i=n-r,s=new ArrayBuffer(i),a=new Uint8Array(s),l=0;for(let u=o;u<this.shards.length;u++){let c=this.shards[u],d=r+l-c.start,p=l,m=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(a.set(g,p),l+=g.length,n<c.end)break}return s}findShardForByte(r){if(this.shards.length===0||r<0||r>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(r/this.bufferUniformSize),this.previousShardIndex;function n(i){return r<i.start?-1:r>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let o=eIt(this.shards,n);return o===-1?-1:(this.previousShardIndex=o,this.previousShardIndex)}}});function tIt(){Me().set("PROD",!0)}function rIt(){Me().set("DEBUG",!0)}function nIt(){Me().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function _De(t){Me().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function oIt(){ue.disposeVariables()}function ld(){return ue}function pI(){return ue.memory()}function iIt(t){return ue.profile(t)}function Pe(t,r){return ue.tidy(t,r)}function Cr(t){m3(t).forEach(n=>n.dispose())}function Ms(t){return ue.keep(t)}function sIt(t){return ue.time(t)}function SDe(t){return ue.setBackend(t)}function Yoe(){return ue.ready()}function Xoe(){return ue.backendName}function aIt(t){ue.removeBackend(t)}function lIt(t){return ue.findBackend(t)}function uIt(t){return ue.findBackendFactory(t)}function y3(t,r,n=1){return ue.registerBackend(t,r,n)}function b3(){return ue.backend}function cIt(t,r){Me().setPlatform(t,r)}var Wc=N(()=>{"use strict";ze();ba();Je();ri();hDe(_De)});function TDe(t,r){return je(this,null,function*(){let n=[],o=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){let l=i[a],u=Array.isArray(t)?t[a].tensor:t[l];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${u.dtype}`);let c={name:l,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let f=new Promise(d=>je(this,null,function*(){let p=yield u.bytes(),h=p.reduce((y,b)=>y+b.length,0)+K1*p.length,m=new Uint8Array(h),g=0;for(let y=0;y<p.length;y++){let b=p[y],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,g),g+=K1,m.set(b,g),g+=b.length}d(m)}));o.push(f)}else o.push(u.data());r!=null&&(c.group=r),n.push(c)}let s=yield Promise.all(o);return{data:pIt(s),specs:n}})}function _8(t,r){let n=new Wa(t),o={},i=0;for(let s of r){let a=fIt(s,(l,u)=>n.slice(i+l,i+u));o[s.name]=ADe(s,n.slice(i,i+a)),i+=a}return o}function fIt(t,r){let n=on(t.shape),o;if("quantization"in t){let i=t.quantization;o=vx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=K1+new Uint32Array(r(i,i+K1))[0];return i}else o=vx[t.dtype];return n*o}function dIt(t,r){return je(this,null,function*(){let n=on(t.shape),o;if("quantization"in t){let i=t.quantization;o=vx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=K1+new Uint32Array(yield r(i,i+K1))[0];return i}else o=vx[t.dtype];return n*o})}function ADe(t,r){let n=t.name,o=t.dtype,i=t.shape,s=on(i),a,l=0;if("quantization"in t){let u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=vx[u.dtype],f=u.dtype==="uint8"?new Uint8Array(r):new Uint16Array(r);if(o==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){a=new Float32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=p*u.scale+u.min}}else if(u.dtype==="float16")a=yIt()(f);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(o==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);a=new Int32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=Math.round(p*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*c}else if(o==="string"){let u=on(t.shape);a=[];for(let c=0;c<u;c++){let f=new Uint32Array(r.slice(l,l+K1))[0];l+=K1;let d=new Uint8Array(r.slice(l,l+f));a.push(d),l+=f}}else{let u=vx[o];if(o==="float32")a=new Float32Array(r);else if(o==="int32")a=new Int32Array(r);else if(o==="bool")a=new Uint8Array(r);else if(o==="complex64"){a=new Float32Array(r);let c=new Float32Array(a.length/2),f=new Float32Array(a.length/2);for(let m=0;m<c.length;m++)c[m]=a[m*2],f[m]=a[m*2+1];let d=Ti(c,i,"float32"),p=Ti(f,i,"float32"),h=Yu(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*u}return Ti(a,i,o)}function CDe(t,r,n){return je(this,null,function*(){let o=new Uint8Array(r);for(;o.byteLength<n;){let{done:i,value:s}=yield t.read();if(i&&s==null){let l=n-o.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}let a=new Uint8Array(o.length+s.byteLength);a.set(o,0),a.set(new Uint8Array(s),o.length),o=a}return o.buffer})}function Koe(t,r){return je(this,null,function*(){let n={},o=t.getReader(),i=new ArrayBuffer(0);for(let s of r){let a=yield dIt(s,(c,f)=>je(this,null,function*(){return i=yield CDe(o,i,f),i.slice(c,f)}));i=yield CDe(o,i,a);let l=i.slice(0,a);i=i.slice(a);let u=ADe(s,l);if(n[s.name]=u,Xoe()==="webgpu"){let c=b3();"uploadToGPU"in c&&on(u.shape)>=Me().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function pIt(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let r=0,n=[];t.forEach(s=>{if(r+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});let o=new Uint8Array(r),i=0;return n.forEach(s=>{o.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),o.buffer}function EDe(t){return Zoe?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function kDe(t){if(Zoe)return Buffer.from(t).toString("base64");let r=new Uint8Array(t),n="";for(let o=0,i=r.length;o<i;o++)n+=String.fromCharCode(r[o]);return btoa(n)}function IDe(t){if(Zoe){let o=Buffer.from(t,"base64");return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}let r=atob(t),n=new Uint8Array(r.length);for(let o=0;o<r.length;++o)n.set([r.charCodeAt(o)],o);return n.buffer}function DDe(t){return Wa.join(t)}function Qoe(t){let r="/";for(t=t.trim();t.endsWith(r);)t=t.slice(0,t.length-1);let n=t.split(r);return n[n.length-1]}function S8(t,r){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function Joe(t,r,n){let o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(o.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!r)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");o.weightSpecs=r,o.weightData=n}return t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(o.initializerSignature=t.initializerSignature),o}function hI(t,r){return je(this,null,function*(){let n,o;return t.weightsManifest!=null&&([n,o]=yield r(t.weightsManifest)),Joe(t,n,o)})}function v0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:EDe(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:EDe(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Wa(t.weightData).byteLength}}function x3(t){let r=[];for(let n of t)r.push(...n.weights);return r}function hIt(){let t=n=>{let o=n<<13,i=0;for(;!(o&8388608);)i-=8388608,o<<=1;return o&=-8388609,i+=947912704,o|i},r=new Uint32Array(2048);r[0]=0;for(let n=1;n<1024;n++)r[n]=t(n);for(let n=1024;n<2048;n++)r[n]=939524096+(n-1024<<13);return r}function mIt(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let r=1;r<31;r++)t[r]=r<<23;for(let r=33;r<63;r++)t[r]=2147483648+(r-32<<23);return t}function gIt(){let t=new Uint32Array(64);for(let r=0;r<64;r++)t[r]=1024;return t[0]=t[32]=0,t}function yIt(){let t=hIt(),r=mIt(),n=gIt();return o=>{let i=new ArrayBuffer(4*o.length),s=new Uint32Array(i);for(let a=0;a<o.length;a++){let l=o[a],u=t[n[l>>10]+(l&1023)]+r[l>>10];s[a]=u}return new Float32Array(i)}}var K1,Zoe,Z1=N(()=>{"use strict";Y1();g3();Ze();Hoe();X1();Wc();ba();Wc();K1=4;Zoe=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var Ks,NDe,MDe,FDe,ODe,AC=N(()=>{"use strict";Ks=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(r){t.getInstance().saveRouters.push(r)}static registerLoadRouter(r){t.getInstance().loadRouters.push(r)}static getSaveHandlers(r){return t.getHandlers(r,"save")}static getLoadHandlers(r,n){return t.getHandlers(r,"load",n)}static getHandlers(r,n,o){let i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(a=>{let l=a(r,o);l!==null&&i.push(l)}),i}},NDe=t=>Ks.registerSaveRouter(t),MDe=t=>Ks.registerLoadRouter(t),FDe=t=>Ks.getSaveHandlers(t),ODe=(t,r)=>Ks.getLoadHandlers(t,r)});function RDe(){if(!Me().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,r=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(r==null)throw new Error("The current browser does not appear to support IndexedDB.");return r}function rie(t){let r=t.result;r.createObjectStore(kC,{keyPath:"modelPath"}),r.createObjectStore(Q1,{keyPath:"modelPath"})}function bIt(t){return new IC(t)}function xIt(t){return t.startsWith(IC.URL_SCHEME)?t.slice(IC.URL_SCHEME.length):t}var eie,tie,kC,Q1,IC,PDe,C8,nie=N(()=>{"use strict";dI();ba();Z1();AC();X1();eie="tensorflowjs",tie=1,kC="models_store",Q1="model_info_store";IC=(()=>{class t{constructor(n){if(this.indexedDB=RDe(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return je(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return je(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,o){return new Promise((i,s)=>{let a=this.indexedDB.open(eie,tie);a.onupgradeneeded=()=>rie(a),a.onsuccess=()=>{let l=a.result;if(o==null){let u=l.transaction(kC,"readonly"),f=u.objectStore(kC).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return l.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(f.result.modelArtifacts)},f.onerror=d=>(l.close(),s(f.error)),u.oncomplete=()=>l.close()}else{o.weightData=Wa.join(o.weightData);let u=v0(o),c=l.transaction(Q1,"readwrite"),f=c.objectStore(Q1),d;try{d=f.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(h){return s(h)}let p;d.onsuccess=()=>{p=l.transaction(kC,"readwrite");let h=p.objectStore(kC),m;try{m=h.put({modelPath:this.modelPath,modelArtifacts:o,modelArtifactsInfo:u})}catch(g){return s(g)}m.onsuccess=()=>i({modelArtifactsInfo:u}),m.onerror=g=>{f=c.objectStore(Q1);let y=f.delete(this.modelPath);y.onsuccess=()=>(l.close(),s(m.error)),y.onerror=b=>(l.close(),s(m.error))}},d.onerror=h=>(l.close(),s(d.error)),c.oncomplete=()=>{p==null?l.close():p.oncomplete=()=>l.close()}}},a.onerror=l=>s(a.error)})}}return t.URL_SCHEME="indexeddb://",t})(),PDe=t=>Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(IC.URL_SCHEME)?bIt(t.slice(IC.URL_SCHEME.length)):null;Ks.registerSaveRouter(PDe);Ks.registerLoadRouter(PDe);C8=class{constructor(){this.indexedDB=RDe()}listModels(){return je(this,null,function*(){return new Promise((r,n)=>{let o=this.indexedDB.open(eie,tie);o.onupgradeneeded=()=>rie(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(Q1,"readonly"),l=s.objectStore(Q1).getAll();l.onsuccess=()=>{let u={};for(let c of l.result)u[c.modelPath]=c.modelArtifactsInfo;r(u)},l.onerror=u=>(i.close(),n(l.error)),s.oncomplete=()=>i.close()},o.onerror=i=>n(o.error)})})}removeModel(r){return je(this,null,function*(){return r=xIt(r),new Promise((n,o)=>{let i=this.indexedDB.open(eie,tie);i.onupgradeneeded=()=>rie(i),i.onsuccess=()=>{let s=i.result,a=s.transaction(Q1,"readwrite"),l=a.objectStore(Q1),u=l.get(r),c;u.onsuccess=()=>{if(u.result==null)return s.close(),o(new Error(`Cannot find model with path '${r}' in IndexedDB.`));{let f=l.delete(r),d=()=>{c=s.transaction(kC,"readwrite");let h=c.objectStore(kC).delete(r);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=m=>o(u.error)};f.onsuccess=d,f.onerror=p=>(d(),s.close(),o(u.error))}},u.onerror=f=>(s.close(),o(u.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>o(i.error)})})}}});function jDe(t){return{info:[mI,t,LDe].join(wx),topology:[mI,t,vIt].join(wx),weightSpecs:[mI,t,wIt].join(wx),weightData:[mI,t,_It].join(wx),modelMetadata:[mI,t,SIt].join(wx)}}function BDe(t){for(let r of Object.values(t))window.localStorage.removeItem(r)}function CIt(t){let r=t.split(wx);if(r.length<3)throw new Error(`Invalid key format: ${t}`);return r.slice(1,r.length-1).join(wx)}function EIt(t){return t.startsWith(DC.URL_SCHEME)?t.slice(DC.URL_SCHEME.length):t}function TIt(t){return new DC(t)}var wx,mI,LDe,vIt,wIt,_It,SIt,DC,$De,E8,oie=N(()=>{"use strict";dI();ba();Ze();Z1();X1();AC();wx="/",mI="tensorflowjs_models",LDe="info",vIt="model_topology",wIt="weight_specs",_It="weight_data",SIt="model_metadata";DC=(()=>{class t{constructor(n){if(!Me().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=jDe(this.modelPath)}save(n){return je(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let o=JSON.stringify(n.modelTopology),i=JSON.stringify(n.weightSpecs),s=v0(n),a=Wa.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,o),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,kDe(a));let l={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(l)),{modelArtifactsInfo:s}}catch{throw BDe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}})}load(){return je(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let o={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);o.modelTopology=i;let s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);o.weightSpecs=s;let a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){let u=JSON.parse(a);o.format=u.format,o.generatedBy=u.generatedBy,o.convertedBy=u.convertedBy,u.signature!=null&&(o.signature=u.signature),u.userDefinedMetadata!=null&&(o.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(o.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(o.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(o.trainingConfig=u.trainingConfig)}let l=this.LS.getItem(this.keys.weightData);if(l==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return o.weightData=IDe(l),o})}}return t.URL_SCHEME="localstorage://",t})(),$De=t=>Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(DC.URL_SCHEME)?TIt(t.slice(DC.URL_SCHEME.length)):null;Ks.registerSaveRouter($De);Ks.registerLoadRouter($De);E8=class{constructor(){pe(Me().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),pe(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return je(this,null,function*(){let r={},n=mI+wx,o=wx+LDe;for(let i=0;i<this.LS.length;++i){let s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(o)){let a=CIt(s);r[a]=JSON.parse(this.LS.getItem(s))}}return r})}removeModel(r){return je(this,null,function*(){r=EIt(r);let n=jDe(r);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${r}'`);let o=JSON.parse(this.LS.getItem(n.info));return BDe(n),o})}}});function T8(t){if(t.indexOf(gI)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Nh.getSchemes().join(",")}`);return{scheme:t.split(gI)[0],path:t.split(gI)[1]}}function zDe(t,r,n=!1){return je(this,null,function*(){pe(t!==r,()=>`Old path and new path are the same: '${t}'`);let o=Ks.getLoadHandlers(t);pe(o.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),pe(o.length<2,()=>`Copying failed because more than one (${o.length}) load handlers for source URL ${t}.`);let i=o[0],s=Ks.getSaveHandlers(r);pe(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${r}.`),pe(s.length<2,()=>`Copying failed because more than one (${o.length}) save handlers for destination URL ${r}.`);let a=s[0],l=T8(t).scheme,u=T8(t).path,c=l===T8(t).scheme,f=yield i.load();n&&c&&(yield Nh.getManager(l).removeModel(u));let d=yield a.save(f);return n&&!c&&(yield Nh.getManager(l).removeModel(u)),d.modelArtifactsInfo})}function UDe(){return je(this,null,function*(){let t=Nh.getSchemes(),r={};for(let n of t){let o=yield Nh.getManager(n).listModels();for(let i in o){let s=n+gI+i;r[s]=o[i]}}return r})}function VDe(t){return je(this,null,function*(){let r=T8(t);return Nh.getManager(r.scheme).removeModel(r.path)})}function GDe(t,r){return je(this,null,function*(){return zDe(t,r,!1)})}function WDe(t,r){return je(this,null,function*(){return zDe(t,r,!0)})}var gI,Nh,iie=N(()=>{"use strict";Ze();AC();gI="://",Nh=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(r,n){pe(r!=null,()=>"scheme must not be undefined or null."),r.endsWith(gI)&&(r=r.slice(0,r.indexOf(gI))),pe(r.length>0,()=>"scheme must not be an empty string.");let o=t.getInstance();pe(o.managers[r]==null,()=>`A model store manager is already registered for scheme '${r}'.`),o.managers[r]=n}static getManager(r){let n=t.getInstance().managers[r];if(n==null)throw new Error(`Cannot find model manager for scheme '${r}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}}});var sie,qDe=N(()=>{"use strict";dI();ba();nie();oie();iie();Moe();sie=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(r,n){return fetch(r,n)}now(){return performance.now()}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(r)}decode(r,n){return new TextDecoder(n).decode(r)}setTimeoutCustom(r,n){if(typeof window>"u"||!Me().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(r,n);return}this.functionRefs.push(r),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",o=>{if(o.source===window&&o.data.name===this.messageName){o.stopPropagation();let i=this.functionRefs[o.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(r){return p8(r)}};if(Me().get("IS_BROWSER")){Me().setPlatform("browser",new sie);try{Nh.registerManager(DC.URL_SCHEME,new E8)}catch{}try{Nh.registerManager(IC.URL_SCHEME,new C8)}catch{}}});var YDe=mt((yI,HDe)=>{"use strict";var AIt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},NC=AIt();HDe.exports=yI=NC.fetch;NC.fetch&&(yI.default=NC.fetch.bind(NC));yI.Headers=NC.Headers;yI.Request=NC.Request;yI.Response=NC.Response});var XDe=mt(()=>{"use strict"});var kIt,aie,lie,KDe=N(()=>{"use strict";ba();kIt={importFetch:()=>YDe()},lie=class{constructor(){this.util=XDe(),this.textEncoder=new this.util.TextEncoder}fetch(r,n){return Me().global.fetch!=null?Me().global.fetch(r,n):(aie==null&&(aie=kIt.importFetch()),aie(r,n))}now(){let r=process.hrtime();return r[0]*1e3+r[1]/1e6}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(r)}decode(r,n){return r.length===0?"":new this.util.TextDecoder(n).decode(r)}isTypedArray(r){return this.util.types.isFloat32Array(r)||this.util.types.isInt32Array(r)||this.util.types.isUint8Array(r)||this.util.types.isUint8ClampedArray(r)}};Me().get("IS_NODE")&&!Me().get("IS_BROWSER")&&Me().setPlatform("node",new lie)});function er(t,r="float32",n){return r=r||"float32",ei(t),new Tn(t,r,n)}var _x=N(()=>{"use strict";Je();Ze();});function IIt(t,r){let n=J(t,"x","cast");if(!Coe(r))throw new Error(`Failed to cast to unknown dtype ${r}`);if(r==="string"&&n.dtype!=="string"||r!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let o={x:n},i={dtype:r};return ue.runKernel(Ch,o,i)}var rt,pn=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();rt=se({cast_:IIt})});function DIt(t){let n={x:J(t,"x","clone","string_or_numeric")};return ue.runKernel(Eh,n)}var Xu,bI=N(()=>{"use strict";ze();Ee();Le();Ne();Xu=se({clone_:DIt})});function A8(t,r=!1){console.log(t.toString(r))}var uie=N(()=>{"use strict";});var NIt,ZDe=N(()=>{"use strict";ze();dI();qDe();KDe();_x();pn();bI();uie();Je();Uoe();NIt={buffer:er,cast:rt,clone:Xu,print:A8};pDe(NIt)});function MIt(t,r){let n=J(t,"a","add"),o=J(r,"b","add");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(np,i)}var Ke,$o=N(()=>{"use strict";ze();Ee();ri();Le();Ne();Ke=se({add_:MIt})});function FIt(t,r){let n=J(t,"a","floorDiv"),o=J(r,"b","floorDiv");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Vg,i)}var xI,k8=N(()=>{"use strict";ze();Ee();ri();Le();Ne();xI=se({floorDiv_:FIt})});function OIt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");if([n,o]=sn(n,o),n.dtype==="int32"&&o.dtype==="int32")return xI(n,o);let i={a:n,b:o},s={};return ue.runKernel(Lg,i,s)}var Tt,Kn=N(()=>{"use strict";ze();Ee();ri();Le();k8();Ne();Tt=se({div_:OIt})});function RIt(t,r){let n=J(t,"a","mul"),o=J(r,"b","mul");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Jg,i)}var we,fr=N(()=>{"use strict";ze();Ee();ri();Le();Ne();we=se({mul_:RIt})});function PIt(t){let r=J(t,"x","abs");if(r.dtype==="complex64"){let n={x:r};return ue.runKernel(Mb,n)}else{let n={x:r};return ue.runKernel(Cb,n)}}var Ao,MC=N(()=>{"use strict";ze();Ee();Le();Ne();Ao=se({abs_:PIt})});function LIt(t){let n={x:J(t,"x","acos")};return ue.runKernel(Tg,n)}var I8,QDe=N(()=>{"use strict";ze();Ee();Le();Ne();I8=se({acos_:LIt})});function jIt(t){let n={x:J(t,"x","acosh")};return ue.runKernel(Ag,n)}var D8,JDe=N(()=>{"use strict";ze();Ee();Le();Ne();D8=se({acosh_:jIt})});function BIt(t){pe(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),pe(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let r=t.map((i,s)=>J(i,`tensors${s}`,"addN")),n=r[0];r.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),r.forEach(i=>{if(!ou(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let o=r;return ue.runKernel(Eb,o)}var eNe,tNe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();eNe=se({addN_:BIt})});function $It(t,r=null,n=!1){let i={x:J(t,"x","all","bool")},s={axis:r,keepDims:n};return ue.runKernel(yS,i,s)}var vI,cie=N(()=>{"use strict";ze();Ee();Le();Ne();vI=se({all_:$It})});function zIt(t,r=null,n=!1){let i={x:J(t,"x","any","bool")},s={axis:r,keepDims:n};return ue.runKernel(bS,i,s)}var FC,fie=N(()=>{"use strict";ze();Ee();Le();Ne();FC=se({any_:zIt})});function UIt(t,r=0){let o={x:J(t,"x","argMax")},i={axis:r};return ue.runKernel(Tb,o,i)}var qc,die=N(()=>{"use strict";ze();Ee();Le();Ne();qc=se({argMax_:UIt})});function VIt(t,r=0){let o={x:J(t,"x","argMin")},i={axis:r};return ue.runKernel(Ab,o,i)}var N8,pie=N(()=>{"use strict";ze();Ee();Le();Ne();N8=se({argMin_:VIt})});function GIt(t){let n={x:J(t,"x","asin")};return ue.runKernel(kg,n)}var M8,rNe=N(()=>{"use strict";ze();Ee();Le();Ne();M8=se({asin_:GIt})});function WIt(t){let n={x:J(t,"x","asinh")};return ue.runKernel(Ig,n)}var F8,nNe=N(()=>{"use strict";ze();Ee();Le();Ne();F8=se({asinh_:WIt})});function qIt(t){let n={x:J(t,"x","atan")};return ue.runKernel(Dg,n)}var O8,oNe=N(()=>{"use strict";ze();Ee();Le();Ne();O8=se({atan_:qIt})});function HIt(t,r){let n=J(t,"a","atan2"),o=J(r,"b","atan2");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Mg,i)}var R8,hie=N(()=>{"use strict";ze();Ee();ri();Le();Ne();R8=se({atan2_:HIt})});function YIt(t){let n={x:J(t,"x","atanh")};return ue.runKernel(Ng,n)}var P8,iNe=N(()=>{"use strict";ze();Ee();Le();Ne();P8=se({atanh_:YIt})});function XIt(t,r,n,o,i="NHWC",s){let a=t[3],l=[...r,a],u=aNe(i);return OC(t,l,n,s,o,null,null,u)}function gie(t,r,n,o,i,s,a="channelsLast"){let[l,u]=v3(r),c;if(a==="channelsLast")c=[l,u,t[3],t[3]];else if(a==="channelsFirst")c=[l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return OC(t,c,n,o,i,s,!1,a)}function KIt(t,r,n,o,i,s,a="NDHWC"){let[l,u,c]=mie(r),f,d;if(a==="NDHWC")d="channelsLast",f=[l,u,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",f=[l,u,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return sNe(t,f,n,o,i,!1,d,s)}function OC(t,r,n,o,i,s,a=!1,l="channelsLast"){let[u,c,f,d]=[-1,-1,-1,-1];if(l==="channelsLast")[u,c,f,d]=t;else if(l==="channelsFirst")[u,d,c,f]=t;else throw new Error(`Unknown dataFormat ${l}`);let[p,h,,m]=r,[g,y]=v3(n),[b,x]=v3(o),v=wI(p,b),w=wI(h,x),{padInfo:_,outHeight:S,outWidth:C}=JIt(i,c,f,g,y,v,w,s,l),E=a?m*d:m,T;return l==="channelsFirst"?T=[u,E,S,C]:l==="channelsLast"&&(T=[u,S,C,E]),{batchSize:u,dataFormat:l,inHeight:c,inWidth:f,inChannels:d,outHeight:S,outWidth:C,outChannels:E,padInfo:_,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:h,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:b,dilationWidth:x,inShape:t,outShape:T,filterShape:r}}function sNe(t,r,n,o,i,s=!1,a="channelsLast",l){let[u,c,f,d,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[u,c,f,d,p]=t;else if(a==="channelsFirst")[u,p,c,f,d]=t;else throw new Error(`Unknown dataFormat ${a}`);let[h,m,g,,y]=r,[b,x,v]=mie(n),[w,_,S]=mie(o),C=wI(h,w),E=wI(m,_),T=wI(g,S),{padInfo:I,outDepth:k,outHeight:F,outWidth:D}=eDt(i,c,f,d,b,x,v,C,E,T,l),L=s?y*p:y,P;return a==="channelsFirst"?P=[u,L,k,F,D]:a==="channelsLast"&&(P=[u,k,F,D,L]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:k,outHeight:F,outWidth:D,outChannels:L,padInfo:I,strideDepth:b,strideHeight:x,strideWidth:v,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationDepth:w,dilationHeight:_,dilationWidth:S,inShape:t,outShape:P,filterShape:r}}function ZIt(t,r,n,o,i){o==null&&(o=yie(t,r,n));let s=t[0],a=t[1],l=w3((s-r+2*o)/n+1,i),u=w3((a-r+2*o)/n+1,i);return[l,u]}function QIt(t,r,n,o,i,s){i==null&&(i=yie(t,r[0],o[0]));let a=[0,0,0,n];for(let l=0;l<3;l++)t[l]+2*i>=r[l]&&(a[l]=w3((t[l]-r[l]+2*i)/o[l]+1,s));return a}function yie(t,r,n,o=1){let i=wI(r,o);return Math.floor((t[0]*(n-1)-n+i)/2)}function v3(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function mie(t){return typeof t=="number"?[t,t,t]:t}function wI(t,r){return r<=1?t:t+(t-1)*(r-1)}function JIt(t,r,n,o,i,s,a,l,u){let c,f,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=ZIt([r,n],s,o,t,l);f=h[0],d=h[1]}else if(t==="same"){f=Math.ceil(r/o),d=Math.ceil(n/i);let p=Math.max(0,(f-1)*o+s-r),h=Math.max(0,(d-1)*i+a-n),m=Math.floor(p/2),g=p-m,y=Math.floor(h/2),b=h-y;c={top:m,bottom:g,left:y,right:b,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((r-s+1)/o),d=Math.ceil((n-a+1)/i);else if(typeof t=="object"){let p=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],m=u==="channelsLast"?t[2][0]:t[3][0],g=u==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:m,right:g,type:p===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},f=w3((r-s+p+h)/o+1,l),d=w3((n-a+m+g)/i+1,l)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:d}}function eDt(t,r,n,o,i,s,a,l,u,c,f){let d,p,h,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let y=QIt([r,n,o,1],[l,u,c],1,[i,s,a],t,f);p=y[0],h=y[1],m=y[2]}else if(t==="same"){p=Math.ceil(r/i),h=Math.ceil(n/s),m=Math.ceil(o/a);let g=(p-1)*i+l-r,y=(h-1)*s+u-n,b=(m-1)*a+c-o,x=Math.floor(g/2),v=g-x,w=Math.floor(y/2),_=y-w,S=Math.floor(b/2),C=b-S;d={top:w,bottom:_,left:S,right:C,front:x,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function w3(t,r){if(!r)return Math.trunc(t);switch(r){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${r}`)}}function ud(t){let[r,n,o]=v3(t);return r===1&&n===1&&o===1}function va(t,r){return ud(t)||ud(r)}function w0(t){return v3(t).every(r=>r>0)}function aNe(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function go(t,r,n){if(n!=null){if(typeof r=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);if(typeof r=="number")pe(Sb(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);else if(typeof r=="object")r.forEach(o=>{o.forEach(i=>{pe(Sb(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${r}`)}}var Fs=N(()=>{"use strict";Ze();});function tDt(t,r){let o={x:J(t,"x","reshape","string_or_numeric")},i={shape:r};return ue.runKernel(ox,o,i)}var Se,Yt=N(()=>{"use strict";ze();Ee();Le();Ne();Se=se({reshape_:tDt})});function rDt(t,r,n,o,i){let s=J(t,"x","avgPool","float32"),a=1;pe(va(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pe(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),go("avgPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(kb,c,f);return d=rt(d,s.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var J1,L8=N(()=>{"use strict";ze();Ee();Le();Ze();pn();Fs();Ne();Yt();J1=se({avgPool_:rDt})});function nDt(t,r,n,o,i,s="NDHWC"){let a=J(t,"x","avgPool3d","float32"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),pe(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),pe(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),pe(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),go("avgPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Ib,c,f);return d=rt(d,l.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var j8,lNe=N(()=>{"use strict";ze();Ee();Le();Ze();pn();Fs();Ne();Yt();j8=se({avgPool3d_:nDt})});function oDt(t,r=0){pe(t.length>=1,()=>"Pass at least one tensor to concat");let n=bx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Xu(n[0]);let o=n,i={axis:r};return ue.runKernel(Fb,o,i)}var On,fd=N(()=>{"use strict";ze();Ee();Le();Ze();bI();Ne();On=se({concat_:oDt})});function iDt(t,r,n=!1,o=!1){let i=J(t,"a","matMul"),s=J(r,"b","matMul");[i,s]=sn(i,s);let a={a:i,b:s},l={transposeA:n,transposeB:o};return ue.runKernel(Db,a,l)}var Vr,Mh=N(()=>{"use strict";ze();Ee();ri();Le();Ne();Vr=se({matMul_:iDt})});function sDt(t){let n={x:J(t,"x","sigmoid","float32")};return ue.runKernel(c0,n)}var kl,_I=N(()=>{"use strict";ze();Ee();Le();Ne();kl=se({sigmoid_:sDt})});function aDt(t,r,n){let o=J(t,"x","slice","string_or_numeric");if(o.rank===0)throw new Error("Slicing scalar is not possible");let i={x:o},s={begin:r,size:n};return ue.runKernel(ux,i,s)}var zr,Ku=N(()=>{"use strict";ze();Ee();Le();Ne();zr=se({slice_:aDt})});function lDt(t){let n={x:J(t,"x","tanh","float32")};return ue.runKernel(g0,n)}var Fh,bie=N(()=>{"use strict";ze();Ee();Le();Ne();Fh=se({tanh_:lDt})});function uDt(t,r,n,o,i,s){let a=J(t,"forgetBias","basicLSTMCell"),l=J(r,"lstmKernel","basicLSTMCell"),u=J(n,"lstmBias","basicLSTMCell"),c=J(o,"data","basicLSTMCell"),f=J(i,"c","basicLSTMCell"),d=J(s,"h","basicLSTMCell"),p=On([c,d],1),h=Vr(p,l),m=Ke(h,u),g=m.shape[0],y=m.shape[1]/4,b=[g,y],x=zr(m,[0,0],b),v=zr(m,[0,y],b),w=zr(m,[0,y*2],b),_=zr(m,[0,y*3],b),S=Ke(we(kl(x),Fh(v)),we(f,kl(Ke(a,w)))),C=we(Fh(S),kl(_));return[S,C]}var uNe,cNe=N(()=>{"use strict";Le();$o();fd();Mh();fr();Ne();_I();Ku();bie();uNe=se({basicLSTMCell_:uDt})});function cDt(t,r,n){let o=J(t,"x","batchToSpaceND"),i=r.reduce((l,u)=>l*u);pe(o.rank>=1+r.length,()=>`input rank is ${o.rank} but should be > than blockShape.length ${r.length}`),pe(n.length===r.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${r.length}`),pe(o.shape[0]%i===0,()=>`input tensor batch is ${o.shape[0]} but is not divisible by the product of the elements of blockShape ${r.join(" * ")} === ${i}`);let s={x:o},a={blockShape:r,crops:n};return ue.runKernel(Nb,s,a)}var ew,_3=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();ew=se({batchToSpaceND_:cDt})});function fNe(t){let r;return t.rank===0||t.rank===1?r=Se(t,[1,1,1,t.size]):t.rank===2?r=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?r=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):r=t,r}var dNe=N(()=>{"use strict";Yt()});function fDt(t,r,n,o,i,s){s==null&&(s=.001);let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;o!=null&&(f=J(o,"offset","batchNorm")),pe(l.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),pe(f==null||l.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),pe(c==null||l.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:fNe(a),scale:c,offset:f,mean:l,variance:u},h={varianceEpsilon:s},m=ue.runKernel(zb,p,h);return Se(m,a.shape)}var _0,SI=N(()=>{"use strict";ze();Ee();Le();Ze();dNe();Ne();Yt();_0=se({batchNorm_:fDt})});function dDt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),pe(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),pe(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),pe(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&pe(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&pe(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),_0(a,l,u,f,c,s)}var B8,pNe=N(()=>{"use strict";Le();Ze();SI();Ne();B8=se({batchNorm2d_:dDt})});function pDt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),pe(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),pe(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),pe(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&pe(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&pe(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),_0(a,l,u,f,c,s)}var $8,hNe=N(()=>{"use strict";Le();Ze();SI();Ne();$8=se({batchNorm3d_:pDt})});function hDt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),pe(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),pe(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),pe(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&pe(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&pe(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),_0(a,l,u,f,c,s)}var z8,mNe=N(()=>{"use strict";Le();Ze();SI();Ne();z8=se({batchNorm4d_:hDt})});function mDt(t,r,n){let o=J(t,"x","bincount"),i=J(r,"weights","bincount");pe(o.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${o.dtype}`),pe(n>=0,()=>`size must be non-negative, but got ${n}.`),pe(i.size===o.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n};return ue.runKernel(wS,s,a)}var U8,xie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();U8=se({bincount_:mDt})});function gDt(t,r){let n=J(t,"x","bitwiseAnd"),o=J(r,"y","bitwiseAnd");if(!ou(n.shape,o.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${o.shape}`);if(n.dtype!=="int32"||o.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${o.dtype}`);let i={a:n,b:o};return ue.runKernel(M1,i)}var gNe,yNe=N(()=>{"use strict";ze();Ee();Le();Xs();Ne();gNe=se({bitwiseAnd_:gDt})});function yDt(t,r){let n=J(t,"s0","broadcastArgs","int32"),o=J(r,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(o.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${o.rank}`);let i={s0:n,s1:o};return ue.runKernel(_S,i)}var bNe,xNe=N(()=>{"use strict";ze();Ee();Le();Ne();bNe=se({broadcastArgs_:yDt})});function bDt(t,r){let n=J(t,"broadcastTo","x"),o=n.shape;if(ei(r),r.length<n.rank)throw new Error(`broadcastTo(): shape.length=${r.length} < input.rank=${n.rank}.`);if(r.length>n.rank){let c=n.shape.slice();for(;c.length<r.length;)c.unshift(1);n=Se(n,c)}let i=n.shape,s=Array.from(r);for(let c=r.length-1;c>=0;c--)if(i[c]===r[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return Xu(n);let l={x:n},u={reps:s};return ue.runKernel(Th,l,u)}var S0,V8=N(()=>{"use strict";ze();Ee();Le();Xs();bI();Ne();Yt();S0=se({broadcastTo_:bDt})});function xDt(t){let n={x:J(t,"x","ceil","float32")};return ue.runKernel(Fg,n)}var G8,vNe=N(()=>{"use strict";ze();Ee();Le();Ne();G8=se({ceil_:xDt})});function ap(t,r,n){ei(t),n=n||N1(r);let o={shape:t,value:r,dtype:n};return ue.runKernel(LS,{},o)}var CI=N(()=>{"use strict";ze();Ee();Ze();Xs();});function vDt(t,r,n){let o=J(t,"x","clipByValue");if(pe(r<=n,()=>`Error in clip: min (${r}) must be less than or equal to max (${n}).`),r===n)return ap(o.shape,r,o.dtype);let i={x:o},s={clipValueMin:r,clipValueMax:n};return ue.runKernel(Og,i,s)}var Zs,wNe=N(()=>{"use strict";ze();Ee();Le();Ze();CI();Ne();Zs=se({clipByValue_:vDt})});function wDt(t){return On(t,0)}var W8,_Ne=N(()=>{"use strict";fd();Ne();W8=se({concat1d_:wDt})});function _Dt(t,r){return On(t,r)}var q8,SNe=N(()=>{"use strict";fd();Ne();q8=se({concat2d_:_Dt})});function SDt(t,r){return On(t,r)}var H8,CNe=N(()=>{"use strict";fd();Ne();H8=se({concat3d_:SDt})});function CDt(t,r){return On(t,r)}var Y8,ENe=N(()=>{"use strict";fd();Ne();Y8=se({concat4d_:CDt})});function EDt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","conv2d","float32"),u=J(r,"filter","conv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),pe(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),pe(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),go("conv2d",o,a);let d=i==="NHWC"?c.shape[3]:c.shape[1];pe(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),pe(va(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),pe(w0(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),pe(w0(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:u},h={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},m=ue.runKernel(Ob,p,h);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var Zu,RC=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();Zu=se({conv2d_:EDt})});function TDt(t,r,n,o,i="NWC",s=1,a){let l=J(t,"x","conv1d"),u=J(r,"filter","conv1d"),c=l,f=!1;l.rank===2&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1]])),pe(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),pe(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),go("conv1d",o,a),pe(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),pe(va(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),pe(w0(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),pe(w0(n),()=>"Error in conv1D: Stride should be larger than 0."),pe(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=Se(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=Zu(p,d,[1,n],o,"NHWC",[1,s],a);return f?Se(y,[y.shape[2],y.shape[3]]):Se(y,[y.shape[0],y.shape[2],y.shape[3]])}var EI,vie=N(()=>{"use strict";Le();Ze();RC();Fs();Ne();Yt();EI=se({conv1d_:TDt})});function ADt(t,r,n,o,i,s="NHWC",a){pe(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let l=t,u=r,c=!1;r.rank===3&&(c=!0,u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]),l=[1,t[0],t[1],t[2]]),pe(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),pe(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),pe(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let f=s==="NHWC"?l[3]:l[1],d=s==="NHWC"?u.shape[3]:u.shape[1];pe(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),pe(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),go("conv2dDerInput",i,a);let p={dy:u,filter:n},h={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:l},m=ue.runKernel(Rb,p,h);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var TI,X8=N(()=>{"use strict";ze();Ee();Ze();Fs();Ne();Yt();TI=se({conv2DBackpropInput_:ADt})});function kDt(t,r,n,o,i,s){let a=J(t,"x","conv2dTranspose"),l=J(r,"filter","conv2dTranspose");return TI(n,a,l,o,i,"NHWC",s)}var AI,wie=N(()=>{"use strict";Le();X8();Ne();AI=se({conv2dTranspose_:kDt})});function IDt(t,r,n,o,i="NDHWC",s=[1,1,1]){let a=J(t,"x","conv3d"),l=J(r,"filter","conv3d"),u=a,c=!1;a.rank===4&&(c=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),pe(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),pe(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),pe(u.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${l.shape[3]}.`),pe(va(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),pe(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),pe(w0(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),pe(w0(n),()=>"Error in conv3D: Strides should be larger than 0.");let f={x:u,filter:l},d={strides:n,pad:o,dataFormat:i,dilations:s},p=ue.runKernel(Pb,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var K8,TNe=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();K8=se({conv3d_:IDt})});function DDt(t,r,n,o,i){pe(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let s=t,a=r,l=!1;r.rank===4&&(l=!0,a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);let u=s[4],c=a.shape[4];pe(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),pe(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),pe(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),pe(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),pe(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let f={dy:a,filter:n},d={pad:i,strides:o,inputShape:s},p=ue.runKernel(TS,f,d);return l?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Z8,_ie=N(()=>{"use strict";ze();Ee();Ze();Ne();Yt();Z8=se({conv3DBackpropInput_:DDt})});function NDt(t,r,n,o,i){let s=J(t,"x","conv3dTranspose"),a=J(r,"filter","conv3dTranspose");return Z8(n,s,a,o,i)}var Q8,ANe=N(()=>{"use strict";Le();_ie();Ne();Q8=se({conv3dTranspose_:NDt})});function MDt(t){let n={x:J(t,"x","cos","float32")};return ue.runKernel(Rg,n)}var tw,J8=N(()=>{"use strict";ze();Ee();Le();Ne();tw=se({cos_:MDt})});function FDt(t){let n={x:J(t,"x","cosh","float32")};return ue.runKernel(Pg,n)}var kI,Sie=N(()=>{"use strict";ze();Ee();Le();Ne();kI=se({cosh_:FDt})});function ODt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumprod")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(AS,s,a)}var PC,eU=N(()=>{"use strict";ze();Ee();Le();Ne();PC=se({cumprod_:ODt})});function RDt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumsum")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(Lb,s,a)}var II,tU=N(()=>{"use strict";ze();Ee();Le();Ne();II=se({cumsum_:RDt})});function PDt(t,r,n,o=!1){let i=J(t,"x","denseBincount"),s=J(r,"weights","denseBincount");pe(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),pe(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),pe(n>=0,()=>`size must be non-negative, but got ${n}.`),pe(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);let a={x:i,weights:s},l={size:n,binaryOutput:o};return ue.runKernel(IS,a,l)}var S3,kNe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();S3=se({denseBincount_:PDt})});function LDt(t,r,n="NHWC"){let o=J(t,"x","depthToSpace","float32"),i=n==="NHWC"?o.shape[1]:o.shape[2],s=n==="NHWC"?o.shape[2]:o.shape[3],a=n==="NHWC"?o.shape[3]:o.shape[1];pe(r>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${r}`),pe(i*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${r}  for depthToSpace with input shape
    ${o.shape}`),pe(s*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${r} for depthToSpace with input shape
        ${o.shape}`),pe(a%(r*r)===0,()=>`Dimension size must be evenly divisible by ${r*r} but is ${a} for depthToSpace with input shape ${o.shape}`);let l={x:o},u={blockSize:r,dataFormat:n};return ue.runKernel(DS,l,u)}var rU,Cie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();rU=se({depthToSpace_:LDt})});function jDt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","depthwiseConv2d","float32"),u=J(r,"filter","depthwiseConv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),pe(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),pe(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=i==="NHWC"?c.shape[3]:c.shape[1];pe(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),go("depthwiseConv2d",o,a);let p={x:c,filter:u},h={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},m=ue.runKernel(jb,p,h);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var C0,C3=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();C0=se({depthwiseConv2d_:jDt})});function BDt(t){let n={x:J(t,"x","diag")};return ue.runKernel(FS,n)}var INe,DNe=N(()=>{"use strict";ze();Ee();Le();Ne();INe=se({diag_:BDt})});function $Dt(t,r,n,o,i=[1,1],s="NHWC"){let a=J(t,"x","dilation2d"),l=J(r,"filter","dilation2d");pe(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),pe(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),pe(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=a,c=!1;a.rank===3&&(u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),pe(u.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${l.shape[2]}`);let f={x:u,filter:l},d={strides:n,pad:o,dilations:i},p=ue.runKernel(Bb,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var nU,Eie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();nU=se({dilation2d_:$Dt})});var Qu={};fn(Qu,{assertAndGetBroadcastShape:()=>jr,getBroadcastDims:()=>NNe,getReductionAxes:()=>oo});function NNe(t,r){let n=t.length,o=[];for(let i=0;i<n;i++){let s=n-1-i,a=t[s]||1;(r[r.length-1-i]||1)>1&&a===1&&o.unshift(s)}return o}function oo(t,r){let n=[];for(let o=0;o<r.length;o++){let i=t[t.length-o-1],s=r.length-o-1,a=r[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function jr(t,r){let n=Math.max(t.length,r.length),o=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=r[r.length-i-1];if(a==null&&(a=1),s===1)o[n-i-1]=a;else if(a===1)o[n-i-1]=s;else if(s!==a){let l=`Operands could not be broadcast together with shapes ${t} and ${r}.`;throw Error(l)}else o[n-i-1]=s}return o}var ko=N(()=>{"use strict";});function zDt(t,r){let n=J(t,"a","equal","string_or_numeric"),o=J(r,"b","equal","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(F1,i)}var Il,E3=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();Il=se({equal_:zDt})});function UDt(t,r,n){let o=J(r,"a","where"),i=J(n,"b","where"),s=J(t,"condition","where","bool"),a=jr(jr(s.shape,o.shape),i.shape),l=S0(s,a),u=S0(o,a),c=S0(i,a),f={condition:l,t:u,e:c};return ue.runKernel(lx,f)}var yo,dd=N(()=>{"use strict";ze();Ee();Le();V8();ko();Ne();yo=se({where_:UDt})});function VDt(t){let n={x:J(t,"x","zerosLike")};return ue.runKernel(gx,n)}var ar,zo=N(()=>{"use strict";ze();Ee();Le();Ne();ar=se({zerosLike_:VDt})});function GDt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");[n,o]=sn(n,o);let i=Tt(n,o),s=ar(i),a=Il(o,s);return yo(a,s,i)}var oU,Tie=N(()=>{"use strict";ri();Le();Kn();E3();Ne();dd();zo();oU=se({divNoNan_:GDt})});function WDt(t,r){let n=J(t,"t1","dot"),o=J(r,"t2","dot");pe((n.rank===1||n.rank===2)&&(o.rank===1||o.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);let i=n.rank===1?n.size:n.shape[1],s=o.rank===1?o.size:o.shape[0];if(pe(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&o.rank===1){let a=Se(n,[1,-1]),l=Se(o,[-1,1]),u=Vr(a,l);return Se(u,[])}else if(n.rank===1&&o.rank===2){let a=Se(n,[1,-1]),l=Se(o,[o.shape[0],o.shape[1]]),u=Vr(a,l);return Se(u,[u.size])}else if(n.rank===2&&o.rank===1){let a=Se(o,[-1,1]),l=Vr(n,a);return Se(l,[l.size])}else{let a=Se(o,[o.shape[0],o.shape[1]]);return Vr(n,a)}}var iU,Aie=N(()=>{"use strict";Le();Ze();Mh();Ne();Yt();iU=se({dot_:WDt})});function qDt(t,...r){let n=r.map((i,s)=>J(i,`tensors${s}`,"einsum")),o={equation:t};return ue.runKernel(OS,n,o)}var rw,kie=N(()=>{"use strict";ze();Ee();Le();Ne();rw=se({einsum_:qDt})});function HDt(t){let n={x:J(t,"x","elu","float32")};return ue.runKernel(jg,n)}var E0,sU=N(()=>{"use strict";ze();Ee();Le();Ne();E0=se({elu_:HDt})});function YDt(t,r){let n=J(t,"x","ensureShape","string_or_numeric");if(!voe(n.shape,r))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${r}`);return t}var MNe,FNe=N(()=>{"use strict";Le();Xs();Ne();MNe=se({ensureShape_:YDt})});function XDt(t){let r=J(t,"x","erf");pe(r.dtype==="int32"||r.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),r.dtype==="int32"&&(r=rt(r,"float32"));let n={x:r};return ue.runKernel(Bg,n)}var DI,ONe=N(()=>{"use strict";ze();Ee();Le();Ze();pn();Ne();DI=se({erf_:XDt})});function Iie(t,r){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==r-1-n)return!1;return!0}function RNe(t,r,n){let o=t.length+r.length,i=[],s=0,a=0;for(let l=0;l<o;l++)n.indexOf(l)===-1?i.push(t[s++]):i.push(r[a++]);return i}function Die(t,r){let n=[],o=t.length;for(let s=0;s<o;s++)r.indexOf(s)===-1&&n.push(t[s]);let i=r.map(s=>t[s]);return[n,i]}function lp(t,r){let n=r.map(o=>1);return RNe(t,n,r)}function KDt(t,r,n){pe(Iie(r,n),()=>`${t} supports only inner-most axes for now. Got axes ${r} and rank-${n} input.`)}function Nie(t,r){if(Iie(t,r))return null;let n=[];for(let o=0;o<r;++o)t.indexOf(o)===-1&&n.push(o);return t.forEach(o=>n.push(o)),n}function T3(t){return t.map((r,n)=>[n,r]).sort((r,n)=>r[1]-n[1]).map(r=>r[0])}function ZDt(t,r){let n=[];for(let o=r-t;o<r;++o)n.push(o);return n}var Oh=N(()=>{"use strict";Ze();});function QDt(t,r=null,n=!1){let i={x:J(t,"x","max")},s={reductionIndices:r,keepDims:n};return ue.runKernel(Wb,i,s)}var Qs,NI=N(()=>{"use strict";ze();Ee();Le();Ne();Qs=se({max_:QDt})});function JDt(t,r=null,n=!1){let i={x:J(t,"x","min")},s={axis:r,keepDims:n};return ue.runKernel(Xb,i,s)}var Sx,aU=N(()=>{"use strict";ze();Ee();Le();Ne();Sx=se({min_:JDt})});function eNt(t,r){let n=J(t,"base","pow"),o=J(r,"exp","pow");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(e0,i)}var qa,nw=N(()=>{"use strict";ze();Ee();ri();Le();Ne();qa=se({pow_:eNt})});function Ot(t,r){if((Vi(t)&&r!=="string"||Array.isArray(t))&&r!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(r==="string"&&Vi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return su(t,[],[],r)}var Uo=N(()=>{"use strict";Ze();xx();});function tNt(t){let n={x:J(t,"x","sqrt","float32")};return ue.runKernel(d0,n)}var Zn,Rh=N(()=>{"use strict";ze();Ee();Le();Ne();Zn=se({sqrt_:tNt})});function rNt(t){let r=J(t,"x","square"),n={};return ue.runKernel("Square",{x:r},n)}var qr,ys=N(()=>{"use strict";ze();Le();Ne();qr=se({square_:rNt})});function nNt(t,r=null,n=!1){let o=J(t,"x","sum");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(cx,i,s)}var It,Ai=N(()=>{"use strict";ze();Ee();Le();pn();Ne();It=se({sum_:nNt})});function oNt(t,r="euclidean",n=null,o=!1){t=J(t,"x","norm");let i=PNe(t,r,n),s=i.shape;if(o){let a=gs(n,t.shape);s=lp(i.shape,a)}return Se(i,s)}function PNe(t,r,n=null){if(t.rank===0)return Ao(t);if(t.rank!==1&&n===null)return PNe(Se(t,[-1]),r,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(r===1)return It(Ao(t),n);if(r===1/0)return Qs(Ao(t),n);if(r===-1/0)return Sx(Ao(t),n);if(r==="euclidean"||r===2)return Zn(It(qa(Ao(t),Ot(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}if(Array.isArray(n)&&n.length===2){if(r===1)return Qs(It(Ao(t),n[0]),n[1]-1);if(r===1/0)return Qs(It(Ao(t),n[1]),n[0]);if(r===-1/0)return Sx(It(Ao(t),n[1]),n[0]);if(r==="fro"||r==="euclidean")return Zn(It(qr(t),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var Cx,A3=N(()=>{"use strict";Le();Ze();MC();Oh();NI();aU();Ne();nw();Yt();Uo();Rh();ys();Ai();Cx=se({norm_:oNt})});function iNt(t,r=null,n=!1){return Cx(t,"euclidean",r,n)}var lU,Fie=N(()=>{"use strict";A3();Ne();lU=se({euclideanNorm_:iNt})});function sNt(t){let n={x:J(t,"x","exp")};return ue.runKernel($g,n)}var xi,T0=N(()=>{"use strict";ze();Ee();Le();Ne();xi=se({exp_:sNt})});function aNt(t,r=0){let n=J(t,"x","expandDims","string_or_numeric");pe(r<=n.rank,()=>"Axis must be <= rank of the tensor");let o={input:n},i={dim:r};return ue.runKernel($b,o,i)}var ki,MI=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();ki=se({expandDims_:aNt})});function lNt(t){let n={x:J(t,"x","expm1")};return ue.runKernel(zg,n)}var uU,LNe=N(()=>{"use strict";ze();Ee();Le();Ne();uU=se({expm1_:lNt})});function uNt(t,r){let n=J(t,"x","tile","string_or_numeric");pe(n.rank===r.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${r}.`);let o={x:n},i={reps:r};return ue.runKernel(Th,o,i)}var wa,FI=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();wa=se({tile_:uNt})});function cNt(t,r,n,o="float32"){r==null&&(r=t);let i=er([t,r],o),s=t<=r?t:r;for(let l=0;l<s;++l)i.set(1,l,l);let a=Se(i.toTensor(),[t,r]);if(n==null)return a;if(n.length===1)return wa(ki(a,0),[n[0],1,1]);if(n.length===2)return wa(ki(ki(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return wa(ki(ki(ki(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var LC,Oie=N(()=>{"use strict";_x();MI();Ne();Yt();FI();LC=se({eye_:cNt})});function fNt(t){let n={x:J(t,"x","floor","float32")};return ue.runKernel(Ug,n)}var A0,cU=N(()=>{"use strict";ze();Ee();Le();Ne();A0=se({floor_:fNt})});function dNt(t,r,n=0,o=0){let i=J(t,"x","gather"),s=J(r,"indices","gather","int32"),a={x:i,indices:s},l={axis:n,batchDims:o};return ue.runKernel(Ub,a,l)}var k0,k3=N(()=>{"use strict";ze();Ee();Le();Ne();k0=se({gather_:dNt})});function pNt(t,r){let n=J(t,"a","greater","string_or_numeric"),o=J(r,"b","greater","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(O1,i)}var ni,I0=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();ni=se({greater_:pNt})});function hNt(t,r){let n=J(t,"a","greaterEqual","string_or_numeric"),o=J(r,"b","greaterEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Gg,i)}var au,jC=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();au=se({greaterEqual_:hNt})});function mNt(t){let n={input:J(t,"input","imag")};return ue.runKernel(zS,n)}var ow,I3=N(()=>{"use strict";ze();Ee();Le();Ne();ow=se({imag_:mNt})});function gNt(t){let n={x:J(t,"x","isFinite")};return ue.runKernel(Wg,n)}var fU,jNe=N(()=>{"use strict";ze();Ee();Le();Ne();fU=se({isFinite_:gNt})});function yNt(t){let n={x:J(t,"x","isInf")};return ue.runKernel(qg,n)}var dU,BNe=N(()=>{"use strict";ze();Ee();Le();Ne();dU=se({isInf_:yNt})});function bNt(t){let n={x:J(t,"x","isNaN")};return ue.runKernel(Hg,n)}var pU,$Ne=N(()=>{"use strict";ze();Ee();Le();Ne();pU=se({isNaN_:bNt})});function xNt(t,r=.2){let o={x:J(t,"x","leakyRelu")},i={alpha:r};return ue.runKernel(Vb,o,i)}var iw,hU=N(()=>{"use strict";ze();Ee();Le();Ne();iw=se({leakyRelu_:xNt})});function vNt(t,r){let n=J(t,"a","less","string_or_numeric"),o=J(r,"b","less","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(R1,i)}var Ex,D3=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();Ex=se({less_:vNt})});function wNt(t,r){let n=J(t,"a","lessEqual","string_or_numeric"),o=J(r,"b","lessEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(P1,i)}var Hc,sw=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();Hc=se({lessEqual_:wNt})});function zNe(t,r,n){if(n<=0)throw new Error("The number of values should be positive.");let o={start:t,stop:r,num:n};return ue.runKernel(US,{},o)}var UNe=N(()=>{"use strict";ze();Ee();});function _Nt(t,r=5,n=1,o=1,i=.5){let s=J(t,"x","localResponseNormalization");pe(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),pe(Sb(r),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${r}.`);let a=s,l=!1;s.rank===3&&(l=!0,a=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let u={x:a},c={depthRadius:r,bias:n,alpha:o,beta:i},f=ue.runKernel(Gb,u,c);return l?Se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var mU,Rie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();mU=se({localResponseNormalization_:_Nt})});function SNt(t){let n={x:J(t,"x","log","float32")};return ue.runKernel(Yg,n)}var Js,OI=N(()=>{"use strict";ze();Ee();Le();Ne();Js=se({log_:SNt})});function CNt(t){let n={x:J(t,"x","log1p")};return ue.runKernel(Xg,n)}var aw,Pie=N(()=>{"use strict";ze();Ee();Le();Ne();aw=se({log1p_:CNt})});function VNe(t){return pe(Cg(t),()=>"The f passed in grad(f) must be a function"),(r,n)=>{let o=J(r,"x","tf.grad","string_or_numeric"),i=n!=null?J(n,"dy","tf.grad"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(o),[o],i);return i!=null&&Bo(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),gU(a),a[0]})}}function GNe(t){return pe(Cg(t),()=>"The f passed in grads(f) must be a function"),(r,n)=>{pe(Array.isArray(r),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let o=bx(r,"args","tf.grads","string_or_numeric"),i=n!=null?J(n,"dy","tf.grads"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(...o),o,i);return i!=null&&Bo(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),gU(a),a})}}function WNe(t){return pe(Cg(t),()=>"The f passed in valueAndGrad(f) must be a function"),(r,n)=>{pe(r instanceof tn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),pe(n==null||n instanceof tn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:o,value:i}=ue.gradients(()=>t(r),[r],n);return gU(o),{grad:o[0],value:i}}}function qNe(t){return pe(Cg(t),()=>"The f passed in valueAndGrads(f) must be a function"),(r,n)=>{pe(Array.isArray(r)&&r.every(i=>i instanceof tn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),pe(n==null||n instanceof tn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let o=ue.gradients(()=>t(...r),r,n);return n!=null&&Bo(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),gU(o.grads),o}}function N3(t,r){pe(Cg(t),()=>"The f passed in variableGrads(f) must be a function"),pe(r==null||Array.isArray(r)&&r.every(c=>c instanceof x0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=r!=null;if(!n){r=[];for(let c in ue.registeredVariables)r.push(ue.registeredVariables[c])}let o=n?r.filter(c=>!c.trainable):null,i=r.length;r=r.filter(c=>c.trainable),pe(r.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let s=!0,{value:a,grads:l}=ue.gradients(t,r,null,s);pe(l.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),pe(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);let u={};return r.forEach((c,f)=>{l[f]!=null&&(u[c.name]=l[f])}),o?.forEach(c=>u[c.name]=null),{value:a,grads:u}}function Dl(t){return ue.customGrad(t)}function gU(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var Tx=N(()=>{"use strict";ze();Je();Le();Ze();});function ENt(t){let n={x:J(t,"x","neg")};return ue.runKernel(Zb,n)}var Zr,ea=N(()=>{"use strict";ze();Ee();Le();Ne();Zr=se({neg_:ENt})});function TNt(t){let n={x:J(t,"x","softplus")};return ue.runKernel(f0,n)}var Ph,Lie=N(()=>{"use strict";ze();Ee();Le();Ne();Ph=se({softplus_:TNt})});function ANt(t){let r=J(t,"x","logSigmoid");return Dl(o=>({value:Zr(Ph(Zr(o))),gradFunc:a=>we(a,kl(Zr(o)))}))(r)}var yU,HNe=N(()=>{"use strict";Tx();Le();fr();ea();Ne();_I();Lie();yU=se({logSigmoid_:ANt})});function kNt(t,r){let n=J(t,"a","sub"),o=J(r,"b","sub");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(h0,i)}var wt,io=N(()=>{"use strict";ze();Ee();ri();Le();Ne();wt=se({sub_:kNt})});function INt(t,r=-1){let n=J(t,"logits","logSoftmax");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${r}`);return Dl((i,s)=>{let l=Qs(i,r,!0),u=wt(i,l),c=wt(rt(u,"float32"),Js(It(xi(u),r,!0)));return s([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,m=!0,g=xi(h);return wt(d,we(It(d,r,m),g))}}})(n)}var RI,YNe=N(()=>{"use strict";Tx();Le();pn();T0();OI();NI();fr();Ne();io();Ai();RI=se({logSoftmax_:INt})});function DNt(t,r=null,n=!1){let o=J(t,"x","logSumExp"),i=gs(r,o.shape),s=Qs(o,i,!0),a=wt(o,s),l=xi(a),u=It(l,i),c=Js(u),f=Ke(Se(s,c.shape),c);if(n){let d=lp(f.shape,i);return Se(f,d)}return f}var lw,bU=N(()=>{"use strict";Le();Ze();$o();Oh();T0();OI();NI();Ne();Yt();io();Ai();lw=se({logSumExp_:DNt})});function NNt(t,r){let n=J(t,"a","logicalAnd","bool"),o=J(r,"b","logicalAnd","bool");jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(L1,i)}var Ha,BC=N(()=>{"use strict";ze();Ee();Le();ko();Ne();Ha=se({logicalAnd_:NNt})});function MNt(t){let n={x:J(t,"x","logicalNot","bool")};return ue.runKernel(j1,n)}var uw,M3=N(()=>{"use strict";ze();Ee();Le();Ne();uw=se({logicalNot_:MNt})});function FNt(t,r){let n=J(t,"a","logicalOr","bool"),o=J(r,"b","logicalOr","bool");jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(B1,i)}var PI,xU=N(()=>{"use strict";ze();Ee();Le();ko();Ne();PI=se({logicalOr_:FNt})});function ONt(t,r){let n=J(t,"a","logicalXor","bool"),o=J(r,"b","logicalXor","bool");return jr(n.shape,o.shape),Ha(PI(t,r),uw(Ha(t,r)))}var vU,jie=N(()=>{"use strict";Le();ko();BC();M3();xU();Ne();vU=se({logicalXor_:ONt})});function RNt(t,r,n="left"){let o=J(t,"sortedSequence","searchSorted"),i=J(r,"values","searchSorted"),s=o.shape[o.shape.length-1],a=i.shape[i.shape.length-1],l=Se(o,[-1,s]),u=Se(i,[-1,a]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(on(u.shape)>=wU)throw new Error(`values tensor size must less than ${wU}`);if(l.shape[1]>=wU)throw new Error(`trailing dim_size must less than ${wU} for int32 output type, was ${l.shape[1]}`);let c={sortedSequence:l,values:u},f={side:n};return ue.runKernel(sC,c,f)}var wU,F3,_U=N(()=>{"use strict";ze();Ee();Le();Xs();Ne();Yt();wU=2147483648;F3=se({searchSorted_:RNt})});function XNe(t,r){return F3(t,r,"left")}var KNe=N(()=>{"use strict";_U();});function PNt(t,r,n,o,i){let s=J(t,"x","maxPool"),a=1,l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pe(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),pe(va(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),go("maxPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(qb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var cw,SU=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();cw=se({maxPool_:PNt})});function LNt(t,r=[1,1,1],n,o,i,s="NDHWC"){let a=J(t,"x","maxPool3d"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),pe(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),pe(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),go("maxPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Hb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var CU,ZNe=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();CU=se({maxPool3d_:LNt})});function jNt(t,r,n,o,i=!1){let a={x:J(t,"x","maxPoolWithArgmax")},l={filterSize:r,strides:n,pad:o,includeBatchInIndex:i},u=ue.runKernel(qS,a,l);return{result:u[0],indexes:u[1]}}var QNe,JNe=N(()=>{"use strict";ze();Ee();Le();Ne();QNe=se({maxPoolWithArgmax_:jNt})});function BNt(t,r){let n=J(t,"a","maximum"),o=J(r,"b","maximum");[n,o]=sn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Kg,i)}var Ju,O3=N(()=>{"use strict";ze();Ee();ri();Le();ko();pn();Ne();Ju=se({maximum_:BNt})});function $Nt(t,r=null,n=!1){let i={x:J(t,"x","mean")},s={axis:r,keepDims:n};return ue.runKernel(Yb,i,s)}var bo,R3=N(()=>{"use strict";ze();Ee();Le();Ne();bo=se({mean_:$Nt})});function xo(t,r="float32"){if(ei(t),r==="complex64"){let o=xo(t,"float32"),i=xo(t,"float32");return Yu(o,i)}let n=Qk(on(t),r);return ue.makeTensor(n,t,r)}var LI=N(()=>{"use strict";ze();Ze();Y1();});function Wi(t,r="float32"){if(ei(t),r==="complex64"){let o=Wi(t,"float32"),i=xo(t,"float32");return Yu(o,i)}let n=s3(on(t),r);return ue.makeTensor(n,t,r)}var $C=N(()=>{"use strict";ze();Ze();Xs();Y1();LI();});function eMe(t,r,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let o=J(t,"x","meshgrid",t instanceof tn?t.dtype:"float32");if(r===void 0)return[o];let i=J(r,"y","meshgrid",r instanceof tn?r.dtype:"float32"),s=on(o.shape),a=on(i.shape);return n==="xy"?(o=Se(o,[1,-1]),i=Se(i,[-1,1]),[Vr(Wi([a,1],o.dtype),o),Vr(i,Wi([1,s],i.dtype))]):(o=Se(o,[-1,1]),i=Se(i,[1,-1]),[Vr(o,Wi([1,a],o.dtype)),Vr(Wi([s,1],i.dtype),i)])}var tMe=N(()=>{"use strict";Mh();$C();Yt();Je();Le();Xs();});function zNt(t,r){let n=J(t,"a","minimum"),o=J(r,"b","minimum");[n,o]=sn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Zg,i)}var pd,P3=N(()=>{"use strict";ze();Ee();ri();Le();ko();pn();Ne();pd=se({minimum_:zNt})});function UNt(t,r,n){pe(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let o=J(t,"x","mirrorPad");if(o.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");pe(r.length===o.rank,()=>`Padding doesn't match input. Must be ${o.rank}. Got ${r.length}.`);let i=n==="reflect"?1:0;for(let l=0;l<o.rank;l++)pe(r[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pe(r[l][0]>=0&&r[l][0]<=o.shape[l]-i&&r[l][1]>=0&&r[l][1]<=o.shape[l]-i,()=>`Padding in dimension ${l} cannot be greater than or equal to ${o.shape[l]-i} or less than 0 for input of shape ${o.shape}`);let s={paddings:r,mode:n},a={x:o};return ue.runKernel(Kb,a,s)}var EU,Bie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();EU=se({mirrorPad_:UNt})});function VNt(t,r){let n=J(t,"a","mod"),o=J(r,"b","mod");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Qg,i)}var TU,$ie=N(()=>{"use strict";ze();Ee();ri();Le();Ne();TU=se({mod_:VNt})});function GNt(t,r=null,n=!1){t=J(t,"x","moments");let o=gs(r,t.shape),i=bo(t,o,n),s=i.shape;n||(s=lp(i.shape,o));let a=qr(wt(rt(t,"float32"),Se(i,s))),l=bo(a,o,n);return{mean:i,variance:l}}var zC,rMe=N(()=>{"use strict";Le();Ze();Oh();pn();R3();Ne();Yt();ys();io();zC=se({moments_:GNt})});function WNt(t,r,n,o){let i=J(r,"data","multiRNNCell"),s=bx(n,"c","multiRNNCell"),a=bx(o,"h","multiRNNCell"),l=i,u=[];for(let d=0;d<t.length;d++){let p=t[d](l,s[d],a[d]);u.push(p[0]),u.push(p[1]),l=p[1]}let c=[],f=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),f.push(u[d+1]);return[c,f]}var nMe,oMe=N(()=>{"use strict";Le();Ne();nMe=se({multiRNNCell_:WNt})});function qNt(t,r,n,o=!1){let i=J(t,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();let u={logits:a===1?Se(i,[1,-1]):i},c={numSamples:r,seed:n,normalized:o},f=ue.runKernel(HS,u,c);return a===1?Se(f,[f.size]):f}var iMe,sMe=N(()=>{"use strict";ze();Ee();Le();Ne();Yt();iMe=se({multinomial_:qNt})});function HNt(t,r){let n=J(t,"a","notEqual","string_or_numeric"),o=J(r,"b","notEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel($1,i)}var Lh,AU=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();Lh=se({notEqual_:HNt})});function YNt(t,r,n=1,o=0,i="int32"){if(r<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${r}`);let a={indices:J(t,"indices","oneHot","int32")},l={dtype:i,depth:r,onValue:n,offValue:o};return ue.runKernel(Jb,a,l)}var D0,kU=N(()=>{"use strict";ze();Ee();Le();Ne();D0=se({oneHot_:YNt})});function XNt(t){let n={x:J(t,"x","onesLike")};return ue.runKernel(Qb,n)}var Os,aMe=N(()=>{"use strict";ze();Ee();Le();Ne();Os=se({onesLike_:XNt})});function KNt(t,r){let n=J(t,"v1","outerProduct"),o=J(r,"v2","outerProduct");pe(n.rank===1&&o.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${o.rank}.`);let i=Se(n,[-1,1]),s=Se(o,[1,-1]);return Vr(i,s)}var lMe,uMe=N(()=>{"use strict";Le();Ze();Mh();Ne();Yt();lMe=se({outerProduct_:KNt})});function ZNt(t,r,n=0){let o=J(t,"x","pad");if(o.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:r,constantValue:n},s={x:o};return ue.runKernel(tx,s,i)}var lu,fw=N(()=>{"use strict";ze();Ee();Le();Ne();lu=se({pad_:ZNt})});function QNt(t,r,n=0){return pe(r.length===2,()=>"Invalid number of paddings. Must be length of 2."),lu(t,[r],n)}var cMe,fMe=N(()=>{"use strict";Ze();Ne();fw();cMe=se({pad1d_:QNt})});function JNt(t,r,n=0){return pe(r.length===2&&r[0].length===2&&r[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),lu(t,r,n)}var dMe,pMe=N(()=>{"use strict";Ze();Ne();fw();dMe=se({pad2d_:JNt})});function eMt(t,r,n=0){return pe(r.length===3&&r[0].length===2&&r[1].length===2&&r[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),lu(t,r,n)}var hMe,mMe=N(()=>{"use strict";Ze();Ne();fw();hMe=se({pad3d_:eMt})});function tMt(t,r,n=0){return pe(r.length===4&&r[0].length===2&&r[1].length===2&&r[2].length===2&&r[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),lu(t,r,n)}var gMe,yMe=N(()=>{"use strict";Ze();Ne();fw();gMe=se({pad4d_:tMt})});function rMt(t,r,n){let o=J(t,"x","spaceToBatchND");pe(o.rank>=1+r.length,()=>`input rank ${o.rank} should be > than [blockShape] ${r.length}`),pe(n.length===r.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${r.length}`),pe(o.shape.reduce((a,l,u)=>u>0&&u<=r.length?a&&(l+n[u-1][0]+n[u-1][1])%r[u-1]===0:a,!0),()=>`input spatial dimensions ${o.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${r.toString()}`);let i={x:o},s={blockShape:r,paddings:n};return ue.runKernel(fx,i,s)}var dw,L3=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();dw=se({spaceToBatchND_:rMt})});function nMt(t,r,n,o,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),o===0&&(o="valid");let l=J(t,"x","maxPool"),u=l,c=!1;l.rank===3&&(c=!0,u=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),pe(va(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);let f=gie(u.shape,r,s,i,o),d=[f.dilationHeight,f.dilationWidth],p;o==="same"?p=iMt([f.filterHeight,f.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[m,g]=oMt([f.inHeight,f.inWidth],d,p),y=h?o:"valid",b=h?u:dw(u,d,m),v=(n==="avg"?()=>J1(b,r,s,y,a):()=>cw(b,r,s,y,a))(),w=h?v:ew(v,d,g);return c?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function oMt(t,r,n){let o=n.map(f=>f[0]),i=n.map(f=>f[1]),s=t.concat(o,i),a=r.map((f,d)=>(f-s[d]%f)%f),l=i.map((f,d)=>f+a[d]),u=r.map((f,d)=>[o[d],l[d]]),c=r.map((f,d)=>[0,a[d]]);return[u,c]}function iMt(t,r){let o=t.map((a,l)=>a+(a-1)*(r[l]-1)).map(a=>a-1),i=o.map(a=>Math.floor(a/2)),s=o.map((a,l)=>a-i[l]);return o.map((a,l)=>[i[l],s[l]])}var IU,zie=N(()=>{"use strict";Le();Ze();L8();_3();Fs();SU();Ne();Yt();L3();IU=se({pool_:nMt})});function sMt(t,r){let n=J(t,"x","prelu"),o=J(r,"alpha","prelu"),i={x:n,alpha:o};return ue.runKernel(rx,i)}var pw,DU=N(()=>{"use strict";ze();Ee();Le();Ne();pw=se({prelu_:sMt})});function aMt(t,r=null,n=!1){let o=J(t,"x","prod");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(nx,i,s)}var NU,Uie=N(()=>{"use strict";ze();Ee();Le();pn();Ne();NU=se({prod_:aMt})});function lMt(t,r,n,o){let i=t.map((f,d)=>J(f,`tensors${d}`,"raggedGather","int32")),s=J(r,"paramsDenseValues","raggedGather"),a=J(n,"indices","raggedGather","int32"),l={paramsNestedSplits:i,paramsDenseValues:s,indices:a},u={outputRaggedRank:o},c=ue.runKernel(ZS,l,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var bMe,xMe=N(()=>{"use strict";ze();Ee();Le();Ne();bMe=se({raggedGather_:lMt})});function uMt(t,r,n){let o=J(t,"starts","raggedRange"),i=J(r,"limits","raggedRange",o.dtype),s=J(n,"deltas","raggedRange",o.dtype),a={starts:o,limits:i,deltas:s},l=ue.runKernel(QS,a);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}var vMe,wMe=N(()=>{"use strict";ze();Ee();Le();Ne();vMe=se({raggedRange_:uMt})});function cMt(t,r,n,o,i){let s=J(t,"shape","raggedTensorToTensor","int32"),a=J(r,"values","raggedTensorToTensor"),l=J(n,"defaultValue","raggedTensorToTensor",a.dtype),u=o.map((d,p)=>J(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:s,values:a,defaultValue:l,rowPartitionTensors:u},f={rowPartitionTypes:i};return ue.runKernel(JS,c,f)}var _Me,SMe=N(()=>{"use strict";ze();Ee();Le();Ne();_Me=se({raggedTensorToTensor_:cMt})});function fMt(t,r,n){ei(t);let o=on(t),i=null;if(n==null||n==="float32")i=new Float32Array(o);else if(n==="int32")i=new Int32Array(o);else if(n==="bool")i=new Uint8Array(o);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<o;s++)i[s]=r();return ue.makeTensor(i,t,n)}var CMe,EMe=N(()=>{"use strict";ze();Ze();Xs();Ne();CMe=se({rand_:fMt})});var AMe=mt((TMe,Vie)=>{"use strict";(function(t,r,n){function o(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new o(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(TMe,typeof Vie=="object"&&Vie,typeof define=="function"&&define)});var IMe=mt((kMe,Gie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(kMe,typeof Gie=="object"&&Gie,typeof define=="function"&&define)});var NMe=mt((DMe,Wie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(DMe,typeof Wie=="object"&&Wie,typeof define=="function"&&define)});var FMe=mt((MMe,qie)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,p,h;return d=c[f],d^=d>>>7,p=d^d<<24,d=c[f+1&7],p^=d^d>>>10,d=c[f+3&7],p^=d^d>>>3,d=c[f+4&7],p^=d^d<<7,d=c[f+7&7],d=d^d<<13,p^=d^d<<9,c[f]=p,l.i=f+1&7,p};function u(c,f){var d,p,h=[];if(f===(f|0))p=h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(MMe,typeof qie=="object"&&qie,typeof define=="function"&&define)});var RMe=mt((OMe,Hie)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,p,h;return l.w=c=c+1640531527|0,h=f[d+34&127],p=f[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=f[d]=h^p,l.i=d,h+(c^c>>>16)|0};function u(c,f){var d,p,h,m,g,y=[],b=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,b=Math.max(b,f.length)),h=0,m=-32;m<b;++m)f&&(p^=f.charCodeAt((m+32)%f.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=p+g,h=d==0?h+1:0);for(h>=128&&(y[(f&&f.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=y[h+34&127],d=y[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,y[h]=p^d;c.w=g,c.X=y,c.i=h}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})(OMe,typeof Hie=="object"&&Hie,typeof define=="function"&&define)});var LMe=mt((PMe,Yie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,p=l.d,h=l.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-p|0,l.d=p<<16^d>>>16^h,l.a=h-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(PMe,typeof Yie=="object"&&Yie,typeof define=="function"&&define)});var jMe=mt(()=>{"use strict"});var $Me=mt((BMe,MU)=>{"use strict";(function(t,r,n){var o=256,i=6,s=52,a="random",l=n.pow(o,i),u=n.pow(2,s),c=u*2,f=o-1,d;function p(v,w,_){var S=[];w=w==!0?{entropy:!0}:w||{};var C=y(g(w.entropy?[v,x(r)]:v??b(),3),S),E=new h(S),T=function(){for(var I=E.g(i),k=l,F=0;I<u;)I=(I+F)*o,k*=o,F=E.g(1);for(;I>=c;)I/=2,k/=2,F>>>=1;return(I+F)/k};return T.int32=function(){return E.g(4)|0},T.quick=function(){return E.g(4)/4294967296},T.double=T,y(x(E.S),r),(w.pass||_||function(I,k,F,D){return D&&(D.S&&m(D,E),I.state=function(){return m(E,{})}),F?(n[a]=I,k):I})(T,C,"global"in w?w.global:this==n,w.state)}function h(v){var w,_=v.length,S=this,C=0,E=S.i=S.j=0,T=S.S=[];for(_||(v=[_++]);C<o;)T[C]=C++;for(C=0;C<o;C++)T[C]=T[E=f&E+v[C%_]+(w=T[C])],T[E]=w;(S.g=function(I){for(var k,F=0,D=S.i,L=S.j,P=S.S;I--;)k=P[D=f&D+1],F=F*o+P[f&(P[D]=P[L=f&L+k])+(P[L]=k)];return S.i=D,S.j=L,F})(o)}function m(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function g(v,w){var _=[],S=typeof v,C;if(w&&S=="object")for(C in v)try{_.push(g(v[C],w-1))}catch{}return _.length?_:S=="string"?v:v+"\0"}function y(v,w){for(var _=v+"",S,C=0;C<_.length;)w[f&C]=f&(S^=w[f&C]*19)+_.charCodeAt(C++);return x(w)}function b(){try{var v;return d&&(v=d.randomBytes)?v=v(o):(v=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(v)),x(v)}catch{var w=t.navigator,_=w&&w.plugins;return[+new Date,t,_,t.screen,x(r)]}}function x(v){return String.fromCharCode.apply(0,v)}if(y(n.random(),r),typeof MU=="object"&&MU.exports){MU.exports=p;try{d=jMe()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+a]=p})(typeof self<"u"?self:BMe,[],Math)});var j3=mt((FYr,zMe)=>{"use strict";var dMt=AMe(),pMt=IMe(),hMt=NMe(),mMt=FMe(),gMt=RMe(),yMt=LMe(),UC=$Me();UC.alea=dMt;UC.xor128=pMt;UC.xorwow=hMt;UC.xorshift7=mMt;UC.xor4096=gMt;UC.tychei=yMt;zMe.exports=UC});var Qie={};fn(Qie,{TEST_EPSILON_FLOAT16:()=>UMe,createVideoElement:()=>EMt,encodeStrings:()=>VMe,expectArrayBuffersEqual:()=>CMt,expectArraysClose:()=>xMt,expectArraysEqual:()=>wMt,expectNumbersClose:()=>_Mt,expectPromiseToFail:()=>vMt,expectValuesInRange:()=>SMt,play:()=>TMt,testEpsilon:()=>Kie});function xMt(t,r,n){return n==null&&(n=Kie()),Xie(t,r,(o,i)=>Zie(o,i,n))}function Kie(){return ue.backend.floatPrecision()===32?bMt:UMe}function Xie(t,r,n){let o=!0;if((Vi(t)||Vi(r))&&(o=!1),Vi(t)&&Vi(r)&&(o=!0),o){let a=t.constructor.name,l=r.constructor.name;if(a!==l)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${l}`)}if(Array.isArray(t)&&Array.isArray(r)){let a=Ga(t),l=Ga(r);if(!ou(a,l))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${l}]`)}let i=Vi(t)?t:Ih(t),s=Vi(r)?r:Ih(r);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){let l=i[a],u=s[a];if(!n(l,u))throw new Error(`Arrays differ: actual[${a}] = ${l}, expected[${a}] = ${u}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function vMt(t,r){t().then(()=>r.fail(),()=>r()),typeof expect<"u"&&expect().nothing()}function wMt(t,r){let n=typeof r=="string"||typeof r=="number"||typeof r=="boolean"?[r]:r;return Sh(t)||Sh(t[0])||Sh(r)||Sh(r[0])?Xie(t,n,(o,i)=>o==i):Xie(t,r,(o,i)=>Zie(o,i,0))}function _Mt(t,r,n){if(n==null&&(n=Kie()),!Zie(t,r,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${r}`);typeof expect<"u"&&expect().nothing()}function Zie(t,r,n){return!isFinite(t)&&!isFinite(r)?!0:!(isNaN(t)||isNaN(r)||Math.abs(t-r)>n)}function SMt(t,r,n){for(let o=0;o<t.length;o++)if(t[o]<r||t[o]>n)throw new Error(`Value out of range:${t[o]} low: ${r}, high: ${n}`)}function CMt(t,r){let n=new Float32Array(t),o=new Float32Array(r);if(n.length!==o.length)throw new Error(`Expected ArrayBuffer to be of length ${o.length}, but it was ${n.length}`);for(let i=0;i<o.length;i++)if(n[i]!==o[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${o[i]} but got ${n[i]} instead`)}function VMe(t){for(let r=0;r<t.length;r++){let n=t[r];Array.isArray(n)?VMe(n):t[r]=q1(n)}return t}function EMt(t){let r=document.createElement("video");return"playsInline"in r&&(r.playsInline=!0),r.muted=!0,r.loop=!0,r.style.position="fixed",r.style.left="0px",r.style.top="0px",r.preload="auto",r.appendChild(t),new Promise(n=>{r.addEventListener("loadeddata",o=>n(r)),r.load()})}function TMt(t){return je(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(r=>{t.requestVideoFrameCallback(r)}))})}var bMt,UMe,GMe=N(()=>{"use strict";ze();Le();Ze();bMt=.001,UMe=.1});var RU,VC,FU,OU,B3=N(()=>{"use strict";RU=Pc(j3());VC=class{constructor(r,n,o,i,s){this.mean=r,this.stdDev=n,this.dtype=o,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let a=s||Math.random();this.random=RU.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let i=this.nextVal;return this.nextVal=NaN,i}let r,n,o=!1;for(;!o;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);let l=Math.sqrt(-2*Math.log(a)/a);r=this.mean+this.stdDev*i*l,n=this.mean+this.stdDev*s*l,(!this.truncated||this.isValidTruncated(r))&&(o=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(r)}convertValue(r){return this.dtype==null||this.dtype==="float32"?r:Math.round(r)}isValidTruncated(r){return r<=this.upper&&r>=this.lower}},FU=class{constructor(r,n,o,i){this.alpha=r,this.beta=1/n,this.dtype=o;let s=i||Math.random();this.randu=RU.alea(s.toString()),this.randn=new VC(0,1,o,!1,this.randu()),r<1?this.d=r+2/3:this.d=r-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let r,n,o,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,r=i*i,n=1-.331*r*r,o=.5*r+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<o)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(r){return this.dtype==="float32"?r:Math.round(r)}},OU=class{constructor(r=0,n=1,o,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=r,this.range=n-r,this.dtype=o,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${r} - ${n} <= 1 and dtype is not float`);this.random=RU.alea(i)}convertValue(r){return this.canReturnFloat()?r:Math.round(r)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function AMt(t,r,n=1,o="float32",i){if(ei(t),n==null&&(n=1),o==null&&(o="float32"),o!=="float32"&&o!=="int32")throw new Error(`Unsupported data type ${o}`);let s=new FU(r,n,o,i),a=er(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var WMe,qMe=N(()=>{"use strict";Xs();_x();Ne();B3();WMe=se({randomGamma_:AMt})});function kMt(t,r=0,n=1,o,i){if(ei(t),o!=null&&o==="bool")throw new Error(`Unsupported data type ${o}`);let s=new VC(r,n,o,!1,i),a=er(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var GC,Jie=N(()=>{"use strict";Xs();_x();Ne();B3();GC=se({randomNormal_:kMt})});function IMt(t,r,n){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);return GC(t,0,1,r,n)}var HMe,YMe=N(()=>{"use strict";Ne();Jie();HMe=se({randomStandardNormal_:IMt})});function DMt(t,r=0,n=1,o="float32",i){ei(t);let s=er(t,o),a=new OU(r,n,null,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}var Yc,PU=N(()=>{"use strict";Xs();_x();Ne();B3();Yc=se({randomUniform_:DMt})});function NMt(t,r,n,o){return Yc(t,r,n,"int32",o)}var XMe,KMe=N(()=>{"use strict";Ne();PU();XMe=se({randomUniformInt_:NMt})});function N0(t,r,n=1,o="float32"){if(n===0)throw new Error("Cannot have a step of zero");let i={start:t,stop:r,step:n,dtype:o};return ue.runKernel(eC,{},i)}var LU=N(()=>{"use strict";ze();Ee();});function MMt(t){let n={input:J(t,"input","real")};return ue.runKernel(tC,n)}var Ax,$3=N(()=>{"use strict";ze();Ee();Le();Ne();Ax=se({real_:MMt})});function FMt(t){let n={x:J(t,"x","reciprocal")};return ue.runKernel(t0,n)}var jU,ZMe=N(()=>{"use strict";ze();Ee();Le();Ne();jU=se({reciprocal_:FMt})});function OMt(t){let n={x:J(t,"x","relu")};return ue.runKernel(r0,n)}var _a,jI=N(()=>{"use strict";ze();Ee();Le();Ne();_a=se({relu_:OMt})});function RMt(t){let n={x:J(t,"x","relu6")};return ue.runKernel(n0,n)}var BI,BU=N(()=>{"use strict";ze();Ee();Le();Ne();BI=se({relu6_:RMt})});function PMt(t,r){let o={x:J(t,"x","reverse")},i={dims:r};return ue.runKernel(ax,o,i)}var bs,kx=N(()=>{"use strict";ze();Ee();Le();Ne();bs=se({reverse_:PMt})});function LMt(t){let r=J(t,"x","reverse");return pe(r.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${r.rank}.`),bs(r,0)}var QMe,JMe=N(()=>{"use strict";Le();Ze();Ne();kx();QMe=se({reverse1d_:LMt})});function jMt(t,r){let n=J(t,"x","reverse");return pe(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),bs(n,r)}var eFe,tFe=N(()=>{"use strict";Le();Ze();Ne();kx();eFe=se({reverse2d_:jMt})});function BMt(t,r){let n=J(t,"x","reverse");return pe(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),bs(n,r)}var rFe,nFe=N(()=>{"use strict";Le();Ze();Ne();kx();rFe=se({reverse3d_:BMt})});function $Mt(t,r){let n=J(t,"x","reverse");return pe(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),bs(n,r)}var oFe,iFe=N(()=>{"use strict";Le();Ze();Ne();kx();oFe=se({reverse4d_:$Mt})});function zMt(t){let n={x:J(t,"x","round")};return ue.runKernel(o0,n)}var $I,ese=N(()=>{"use strict";ze();Ee();Le();Ne();$I=se({round_:zMt})});function UMt(t){let n={x:J(t,"x","rsqrt","float32")};return ue.runKernel(i0,n)}var zI,tse=N(()=>{"use strict";ze();Ee();Le();Ne();zI=se({rsqrt_:UMt})});function VMt(t){let n={x:J(t,"x","selu")};return ue.runKernel(s0,n)}var UI,rse=N(()=>{"use strict";ze();Ee();Le();Ne();UI=se({selu_:VMt})});function GMt(t,r,n,o,i,s=[1,1],a="NHWC"){let l=J(t,"x","separableConv2d"),u=J(r,"depthwiseFilter","separableConv2d"),c=J(n,"pointwiseFilter","separableConv2d"),f=l,d=!1;if(l.rank===3&&(d=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");pe(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),pe(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),pe(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),pe(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),pe(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],h=u.shape[3];pe(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let m=C0(f,u,o,i,a,s),y=Zu(m,c,1,"valid",a);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var VI,nse=N(()=>{"use strict";Le();Ze();RC();C3();Ne();Yt();VI=se({separableConv2d_:GMt})});function WMt(t,r){return je(this,null,function*(){let n=J(t,"x","setdiff1d"),o=J(r,"y","setdiff1d");pe(n.dtype===o.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${o.dtype}).`),pe(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),pe(o.rank===1,()=>`y should be 1D tensor, but got y (${o.shape}).`);let i=yield n.data(),s=yield o.data(),a=new Set(s),l=0;for(let f=0;f<i.length;f++)a.has(i[f])||l++;let u=new Tn([l],n.dtype),c=new Tn([l],"int32");for(let f=0,d=0;f<i.length;f++)a.has(i[f])||(u.values[d]=i[f],c.values[d]=f,d++);return[u.toTensor(),c.toTensor()]})}var sFe,aFe=N(()=>{"use strict";Je();Le();Ze();sFe=WMt});function qMt(t){let n={x:J(t,"x","sign")};return ue.runKernel(u0,n)}var $U,lFe=N(()=>{"use strict";ze();Ee();Le();Ne();$U=se({sign_:qMt})});function HMt(t){let n={x:J(t,"x","sin","float32")};return ue.runKernel(a0,n)}var GI,ose=N(()=>{"use strict";ze();Ee();Le();Ne();GI=se({sin_:HMt})});function YMt(t){let n={x:J(t,"x","sinh")};return ue.runKernel(l0,n)}var WI,ise=N(()=>{"use strict";ze();Ee();Le();Ne();WI=se({sinh_:YMt})});function XMt(t,r,n){let o=J(t,"x","slice1d");return pe(o.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${o.rank} tensor`),zr(o,[r],[n])}var qI,uFe=N(()=>{"use strict";Le();Ze();Ne();Ku();qI=se({slice1d_:XMt})});function KMt(t,r,n){let o=J(t,"x","slice2d");return pe(o.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${o.rank} tensor`),zr(o,r,n)}var z3,cFe=N(()=>{"use strict";Le();Ze();Ne();Ku();z3=se({slice2d_:KMt})});function ZMt(t,r,n){let o=J(t,"x","slice3d");return pe(o.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${o.rank} tensor`),zr(o,r,n)}var HI,fFe=N(()=>{"use strict";Le();Ze();Ne();Ku();HI=se({slice3d_:ZMt})});function QMt(t,r,n){let o=J(t,"x","slice4d");return pe(o.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${o.rank} tensor`),zr(o,r,n)}var WC,dFe=N(()=>{"use strict";Le();Ze();Ne();Ku();WC=se({slice4d_:QMt})});function JMt(t,r=-1){let n=J(t,"logits","softmax","float32");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${r}`);let o={logits:n},i={dim:r};return ue.runKernel(px,o,i)}var hw,pFe=N(()=>{"use strict";ze();Ee();Le();Ne();hw=se({softmax_:JMt})});function eFt(t){pe(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(PS,r)}var mw,zU=N(()=>{"use strict";ze();Ee();Ze();Ne();mw=se({fft_:eFt})});function tFt(t){pe(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel($S,r)}var Ix,UU=N(()=>{"use strict";ze();Ee();Ze();Ne();Ix=se({ifft_:tFt})});function rFt(t){let r=t.shape[t.shape.length-1],n=t.size/r,o;if(r<=2){let i=Se(t,[n,r]);o=Ix(i)}else{let i=[n,2*(r-1)],s=Se(Ax(t),[n,r]),a=Se(ow(t),[n,r]),l=bs(zr(s,[0,1],[n,r-2]),1),u=we(bs(zr(a,[0,1],[n,r-2]),1),Ot(-1)),c=On([s,l],1),f=On([a,u],1),d=Se(Yu(c,f),[i[0],i[1]]);o=Ix(d)}if(o=Ax(o),t.rank===3&&t.shape[0]!==0){let i=o,s=t.shape[0];o=Se(o,[s,o.shape[0]/s,o.shape[1]]),i.dispose()}return o}var YI,sse=N(()=>{"use strict";Y1();fd();I3();fr();Ne();$3();Yt();kx();Uo();Ku();UU();YI=se({irfft_:rFt})});function nFt(t,r,n=0){let i={x:J(t,"x","split")},s={numOrSizeSplits:r,axis:n};return ue.runKernel(dx,i,s)}var xs,qC=N(()=>{"use strict";ze();Ee();Le();Ne();xs=se({split_:nFt})});function oFt(t,r){pe(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],o=t.size/n,i;if(r!=null&&r<n){let m=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=r,i=zr(t,m,g),n=r}else if(r!=null&&r>n){let m=t.shape.map(g=>g);m[t.shape.length-1]=r-n,i=On([t,xo(m)],t.shape.length-1),n=r}else i=t;let s=ar(i),a=Se(Yu(i,s),[o,n]),l=mw(a),u=Math.floor(n/2)+1,c=Ax(l),f=ow(l),d=xs(c,[u,n-u],c.shape.length-1),p=xs(f,[u,n-u],f.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=u,Se(Yu(d[0],p[0]),h)}var gw,VU=N(()=>{"use strict";Ze();Y1();fd();I3();Ne();$3();Yt();Ku();qC();LI();zo();zU();gw=se({rfft_:oFt})});function iFt(t,r){let n=J(t,"a","squaredDifference"),o=J(r,"b","squaredDifference");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o},s={};return ue.runKernel(p0,i,s)}var XI,GU=N(()=>{"use strict";ze();Ee();ri();Le();ko();Ne();XI=se({squaredDifference_:iFt})});function sFt(t,r){let n=J(t,"x","squeeze","string_or_numeric");return Se(n,woe(n.shape,r).newShape)}var Xc,U3=N(()=>{"use strict";Le();Ze();Ne();Yt();Xc=se({squeeze_:sFt})});function aFt(t,r=0){let n=bx(t,"tensors","stack","string_or_numeric");pe(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&pe(r<=n[0].rank,()=>"Axis must be <= rank of the tensor");let o=n,i={axis:r};return ue.runKernel(ex,o,i)}var ss,yw=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();ss=se({stack_:aFt})});function lFt(t,r=0){let o={x:J(t,"x","step")},i={alpha:r};return ue.runKernel(y0,o,i)}var up,KI=N(()=>{"use strict";ze();Ee();Le();Ne();up=se({step_:lFt})});function uFt(t,r,n,o,i=0,s=0,a=0,l=0,u=0){let f={x:J(t,"x","stridedSlice","string_or_numeric")},d={begin:r,end:n,strides:o,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};return ue.runKernel(pC,f,d)}var WU,hFe=N(()=>{"use strict";ze();Ee();Le();Ne();WU=se({stridedSlice_:uFt})});function cFt(t){let n={x:J(t,"x","tan","float32")};return ue.runKernel(m0,n)}var qU,mFe=N(()=>{"use strict";ze();Ee();Le();Ne();qU=se({tan_:cFt})});function oi(t,r){ad(t);let n=Ga(t,r);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return su(t,null,n,r)}var bw=N(()=>{"use strict";Le();Ze();xx();});function Dx(t,r,n){if(ad(t),r!=null&&r.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let o=Ga(t,n);if(o.length!==2&&o.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return su(t,r,o,n)}var HU=N(()=>{"use strict";Le();Ze();xx();});function YU(t,r,n){if(ad(t),r!=null&&r.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let o=Ga(t,n);if(o.length!==3&&o.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return su(t,r,o,n)}var ase=N(()=>{"use strict";Le();Ze();xx();});function gFe(t,r,n){if(ad(t),r!=null&&r.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let o=Ga(t,n);if(o.length!==4&&o.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return su(t,r,o,n)}var yFe=N(()=>{"use strict";Le();Ze();xx();});function bFe(t,r,n){if(ad(t),r!=null&&r.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let o=Ga(t,n);if(o.length!==5&&o.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return su(t,r,o,n)}var xFe=N(()=>{"use strict";Le();Ze();xx();});function vFe(t,r,n){if(ad(t),r!=null&&r.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let o=Ga(t,n);if(o.length!==6&&o.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return r=r||o,su(t,r,o,n)}var wFe=N(()=>{"use strict";Le();Ze();xx();});var V3={};fn(V3,{calculateShapes:()=>_Fe,validateInput:()=>ZI,validateUpdateShape:()=>lse});function lse(t,r,n){let o=r.rank>1?r.shape[r.rank-1]:1,i=r.rank>1?r.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${r.shape}, shape: ${t}, sliceDim: ${o}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<o+(n.rank-i))throw new Error(s+` Output shape length < ${o+(n.rank-i)}`);if(n.rank!==i+t.length-o)throw new Error(s+` update.rank != ${i+t.length-o}`);for(let a=0;a<i;++a)if(n.shape[a]!==r.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${r.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+o])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function ZI(t,r,n){if(r.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${r.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(r.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(r.size===0)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}lse(n,r,t)}function _Fe(t,r,n){let o=r.shape.length,i=o>1?r.shape[o-1]:1,s=n.length,a=1;for(let d=i;d<s;++d)a*=n[d];let l=i<1?1:i,u=on(r.shape)/l,c=[...Eg(n.slice(0,i)),1],f=on(n);return{sliceRank:i,numUpdates:u,sliceSize:a,strides:c,outputSize:f}}var G3=N(()=>{"use strict";Ze()});function fFt(t,r,n){let o=J(t,"tensor","tensorScatterupdate"),i=J(r,"indices","tensorScatterupdate","int32"),s=J(n,"updates","tensorScatterupdate");if(ZI(s,i,o.shape),o.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${o.dtype} and ${s.dtype}.`);let a={tensor:o,indices:i,updates:s},l={};return ue.runKernel(iC,a,l)}var SFe,CFe=N(()=>{"use strict";ze();Ee();Le();Ne();G3();SFe=se({tensorScatterUpdate_:fFt})});function dFt(t,r=1,n=!0){let o=J(t,"x","topk");if(o.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let i=o.shape[o.shape.length-1];if(r<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${r}`);if(r>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${r}`);let s={x:o},a={k:r,sorted:n},[l,u]=ue.runKernel(yC,s,a);return{values:l,indices:u}}var XU,use=N(()=>{"use strict";ze();Ee();Le();Ne();XU=se({topk_:dFt})});function pFt(t,r=0,n=1,o,i){if(ei(t),o!=null&&o==="bool")throw new Error("Unsupported data type $ { dtype }");let s=new VC(r,n,o,!0,i),a=er(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var QI,EFe=N(()=>{"use strict";Xs();_x();Ne();B3();QI=se({truncatedNormal_:pFt})});function hFt(t,r=0){let n=J(t,"x","unique","string_or_numeric");pe(n.rank>0,()=>"The input tensor must be at least 1D");let o={x:n},i={axis:r},[s,a]=ue.runKernel(xC,o,i);return{values:s,indices:a}}var KU,cse=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();KU=se({unique_:hFt})});function mFt(t,r,n){let o=J(t,"x","unsortedSegmentSum"),i=J(r,"segmentIds","unsortedSegmentSum","int32");pe(Sb(n),()=>"numSegments must be of dtype int");let s={x:o,segmentIds:i},a={numSegments:n};return ue.runKernel(mx,s,a)}var JI,ZU=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();JI=se({unsortedSegmentSum_:mFt})});function gFt(t,r=0){let n=J(t,"x","unstack","string_or_numeric");pe(r>=-n.shape.length&&r<n.shape.length,()=>`Axis = ${r} is not in [-${n.shape.length}, ${n.shape.length})`);let o={value:n},i={axis:r};return ue.runKernel(hx,o,i)}var Ya,eD=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Ya=se({unstack_:gFt})});function TFe(t,r){return F3(t,r,"right")}var AFe=N(()=>{"use strict";_U();});function QU(t,r=!0,n,o){return ue.makeVariable(t,r,n,o)}var kFe=N(()=>{"use strict";ze();});function JU(t,r){let n=[];for(let s=0;s<r.length;s++)r[s]&&n.push(s);let o=er(t,"int32"),i=er([n.length,t.length],"int32");for(let s=0;s<n.length;s++){let a=o.indexToLoc(n[s]),l=s*t.length;i.values.set(a,l)}return i.toTensor()}var fse=N(()=>{"use strict";_x();});function yFt(t){return je(this,null,function*(){let r=J(t,"condition","whereAsync","bool"),n=yield r.data(),o=JU(r.shape,n);return t!==r&&r.dispose(),o})}var e7,dse=N(()=>{"use strict";fse();Le();e7=yFt});function bFt(t,r,n){return je(this,null,function*(){let o=J(t,"tensor","boolMask"),i=J(r,"mask","boolMask","bool"),s=n??0,a=i.rank,l=o.shape;pe(a>0,()=>"mask cannot be scalar"),Bo(l.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let g=s;g<s+a;g++)u*=l[g];let c=l.slice(0,s).concat([u],l.slice(s+a)),f=Se(o,c),d=Se(i,[-1]),p=yield e7(d),h=Xc(p,[1]),m=k0(f,h,s);return t!==o&&o.dispose(),r!==i&&i.dispose(),h.dispose(),f.dispose(),d.dispose(),p.dispose(),m})}var xFt,IFe=N(()=>{"use strict";Le();Ze();k3();Yt();U3();dse();xFt=bFt});function vFt(t,r,n){let o=J(t,"x","transpose");if(r==null&&(r=o.shape.map((a,l)=>l).reverse()),pe(o.rank===r.length,()=>`Error in transpose: rank of input ${o.rank} must match length of perm ${r}.`),r.forEach(a=>{pe(a>=0&&a<o.rank,()=>`All entries in 'perm' must be between 0 and ${o.rank-1} but got ${r}`)}),o.rank<=1)return o.clone();let i={x:o},s={perm:r};return o.dtype==="complex64"?Pe(()=>{let a=Ax(o),l=ow(o);return a=ue.runKernel(Ah,{x:a},s),l=ue.runKernel(Ah,{x:l},s),n&&(l=Zr(l)),Yu(a,l)}):ue.runKernel(Ah,i,s)}var Gr,Nx=N(()=>{"use strict";ze();Wc();Ee();Le();Ze();Y1();I3();ea();Ne();$3();Gr=se({transpose_:vFt})});function wFt(t,r,n,o,i=!0){let s=J(t,"v","movingAverage"),a=J(r,"x","movingAverage"),l=J(n,"decay","movingAverage");$oe(s,a),pe(ou(s.shape,a.shape),()=>"Shape mismatch in v and x");let u=Ot(1),c=wt(u,l),f=we(wt(a,s),c);if(i){pe(o!=null,()=>"When using zeroDebias: true, step is required.");let d=J(o,"step","movingAverage");f=Tt(f,wt(u,qa(l,d)))}return Ke(s,f)}var _Ft,DFe=N(()=>{"use strict";ri();Le();Ze();$o();Kn();fr();Ne();nw();Uo();io();_Ft=se({movingAverage_:wFt})});function SFt(t,r,n){ei(n);let o=J(t,"indices","scatterND","int32"),i=J(r,"updates","scatterND");ZI(i,o,n);let s={indices:o,updates:i},a={shape:n};return ue.runKernel(oC,s,a)}var CFt,NFe=N(()=>{"use strict";ze();Ee();Le();Xs();Ne();G3();CFt=se({scatterND_:SFt})});function MFe(t,r,n,o){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);let a=r.size;if(!(r.rank===0||r.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${r.shape}, should be [] or [${i}]`);if(r.dtype!==o.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var FFe=N(()=>{"use strict"});function TFt(t,r,n,o=0){ei(n);let i=J(t,"sparseIndices","sparseToDense","int32"),s=J(r,"sparseValues","sparseToDense","string_or_numeric"),a=J(o,"defaultValue","sparseToDense",s.dtype);MFe(i,s,n,a);let l={sparseIndices:i,sparseValues:s,defaultValue:a},u={outputShape:n};return ue.runKernel(fC,l,u)}var AFt,OFe=N(()=>{"use strict";ze();Ee();FFe();Le();Xs();Ne();AFt=se({sparseToDense_:TFt})});function kFt(t,r){let n=J(r,"indices","gatherND","int32"),i={params:J(t,"x","gatherND","string_or_numeric"),indices:n};return ue.runKernel(BS,i)}var IFt,RFe=N(()=>{"use strict";ze();Ee();Le();Ne();IFt=se({gatherND_:kFt})});function PFe(t,r){if(r==null)return t.shape.slice();if(ou(t.shape,r))return r;if(t.shape.length===r.length){let n=[];for(let o=0;o<t.shape.length;o++)r[o]==null&&t.shape[o]!=null?n.push(t.shape[o]):n.push(r[o]);return n}return r}var LFe=N(()=>{"use strict";Ze();});function DFt(t,r,n,o){let i=J(t,"x","dropout");if(pe(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),pe(r>=0&&r<1,()=>`rate must be a float in the range [0, 1), but got ${r}.`),r===0)return t instanceof tn?i.clone():i;let s=PFe(i,n),a=1-r,l=Tt(A0(Ke(Yc(s,0,1,"float32",o),a)),a);return we(i,l)}var pse,jFe=N(()=>{"use strict";Je();Le();Ze();$o();Kn();LFe();cU();fr();Ne();PU();pse=se({dropout_:DFt})});function hse(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function W3(t,r,n){let o=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){let a=2*Math.PI*s/(t+o-1);i[s]=r-n*Math.cos(a)}return oi(i,"float32")}var q3=N(()=>{"use strict";bw();});function NFt(t,r,n=1){return je(this,null,function*(){let o=J(t,"predictions","inTopK"),i=J(r,"targets","inTopK");pe(o.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${o.rank}`),pe(o.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${o.rank} and targets rank ${i.rank}`),Bo(o.shape.slice(0,o.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=o.shape[o.shape.length-1];pe(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);let a=yield o.data(),l=yield i.data(),[u,c]=[a.length/s,s],f=_oe("bool",u);for(let d=0;d<u;d++){let p=d*c,h=a.subarray(p,p+c),m=[];for(let g=0;g<h.length;g++)m.push({value:h[g],index:g});m.sort((g,y)=>y.value-g.value),f[d]=0;for(let g=0;g<n;g++)if(m[g].index===l[d]){f[d]=1;break}}return t!==o&&o.dispose(),r!==i&&i.dispose(),Ti(f,i.shape,"bool")})}var MFt,BFe=N(()=>{"use strict";Le();Ze();g3();MFt=NFt});function FFt(t,r,n,o,i,s="NHWC",a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),pe(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),pe(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),pe(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=s==="NHWC"?l.shape[3]:l.shape[1],f=s==="NHWC"?u.shape[3]:u.shape[1];pe(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),pe(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),go("conv2dDerFilter",i,a);let d={x:l,dy:u},p={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return ue.runKernel(CS,d,p)}var tD,t7=N(()=>{"use strict";ze();Ee();Ze();Fs();Ne();Yt();tD=se({conv2DBackpropFilter_:FFt})});function HC(t,r,n){if(n==null||n==="linear")return t;if(n==="relu")return we(t,up(r));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function YC(t,r){let n=r,o=oo(t.shape,r.shape);return o.length>0&&(n=It(n,o)),Se(n,t.shape)}function XC(t,r,n,o){if(r==="linear")return t;if(r==="relu")return _a(t);if(r==="elu")return E0(t);if(r==="relu6")return BI(t);if(r==="prelu")return pw(t,n);if(r==="leakyrelu")return iw(t,o);if(r==="sigmoid")return kl(t);throw new Error(`Unknown fused activation ${r}.`)}var KC,rD=N(()=>{"use strict";ko();sU();hU();fr();DU();jI();BU();Yt();_I();KI();Ai();KC=(t,r)=>!(t>0)||r==="linear"});function OFt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(u=u||"linear",KC(ue.state.gradientDepth,u)===!1){pe(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=Zu(t,r,n,o,i,s,a);return l!=null&&(S=Ke(S,l)),XC(S,u,c,f)}let d=J(t,"x","conv2d","float32"),p=J(r,"filter","conv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),pe(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),pe(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),go("fused conv2d",o,a);let g=i==="NHWC"?h.shape[3]:h.shape[1];pe(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),pe(va(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let y=OC(h.shape,p.shape,n,s,o,a),b;l!=null&&(b=J(l,"bias","fused conv2d"),[b]=sn(b,d),i==="NHWC"?jr(y.outShape,b.shape):(pe(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),pe(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(c!=null){let S=c.shape;if(pe(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)pe(S[0]===1||S[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${y.outChannels}).`);else if(S.length===3)try{jr(S,y.outShape)}catch{let E=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(E)}x=J(c,"prelu weights","fused conv2d")}let v=(S,C)=>{pe(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[E,T,I,k]=C,F=HC(S,I,u);pe(ud(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let D=TI(T.shape,F,E,n,o),L=tD(T,F,E.shape,n,o),P=[D,L];if(k!=null){let R=YC(k,F);P.push(R)}return P},w={x:h,filter:p,bias:b,preluActivationWeights:x},_={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Dl((C,E,T)=>{let I=ue.runKernel(V1,w,_);return T([E,C,I]),m&&(I=Se(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:v}})(h,p):Dl((C,E,T,I)=>{let k=ue.runKernel(V1,w,_);return I([E,C,k,T]),m&&(k=Se(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(h,p,b)}var $Fe,zFe=N(()=>{"use strict";ze();Tx();Ee();ri();Le();Ze();$o();ko();RC();t7();X8();Fs();rD();Ne();Yt();$Fe=se({fusedConv2d_:OFt})});function RFt(t,r,n,o,i,s=[1,1],a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={x:l,dy:u},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return ue.runKernel(NS,c,f)}var r7,mse=N(()=>{"use strict";ze();Ee();Ne();Yt();r7=se({depthwiseConv2dNativeBackpropFilter_:RFt})});function PFt(t,r,n,o,i,s=[1,1],a){let l=r,u=!1;r.rank===3&&(u=!0,l=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={dy:l,filter:n},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},d=ue.runKernel(MS,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var n7,gse=N(()=>{"use strict";ze();Ee();Ne();Yt();n7=se({depthwiseConv2dNativeBackpropInput_:PFt})});function LFt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(KC(ue.state.gradientDepth,u)===!1){let _=C0(t,r,n,o,i,s,a);return l!=null&&(_=Ke(_,l)),XC(_,u,c,f)}let d=J(t,"x","depthwiseConv2d","float32"),p=J(r,"filter","depthwiseConv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),pe(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),pe(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),pe(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),s==null&&(s=[1,1]),pe(va(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),go("fused depthwiseConv2d",o,a);let g=OC(h.shape,p.shape,n,s,o,a,!0),y;l!=null&&(y=J(l,"bias","fused conv2d"),[y]=sn(y,d),jr(g.outShape,y.shape));let b;c!=null&&(b=J(c,"prelu weights","fused depthwiseConv2d"));let x=(_,S)=>{pe(ud(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[C,E,T,I]=S,k=HC(_,T,u),F=n7(E.shape,k,C,n,o,s,a),D=r7(E,k,C.shape,n,o,s,a);if(I!=null){let L=YC(y,k);return[F,D,L]}return[F,D]},v={x:h,filter:p,bias:y,preluActivationWeights:b},w={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Dl((S,C,E)=>{let T=ue.runKernel(G1,v,w);return E([C,S,T]),m&&(T=Se(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(h,p):Dl((S,C,E,T)=>{let I=ue.runKernel(G1,v,w);return T([C,S,I,E]),m&&(I=Se(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(h,p,y)}var UFe,VFe=N(()=>{"use strict";ze();Tx();Ee();ri();Le();Ze();$o();ko();Fs();C3();mse();gse();rD();Ne();Yt();UFe=se({fusedDepthwiseConv2d_:LFt})});function jFt({a:t,b:r,transposeA:n=!1,transposeB:o=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}){if(KC(ue.state.gradientDepth,s)===!1){let k=Vr(t,r,n,o);return i!=null&&(k=Ke(k,i)),XC(k,s,a,l)}let u=J(t,"a","fused matMul"),c=J(r,"b","fused matMul");[u,c]=sn(u,c);let f=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=o?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=o?c.shape[c.rank-2]:c.shape[c.rank-1],m=u.shape.slice(0,-2),g=c.shape.slice(0,-2),y=on(m),b=on(g);pe(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${o} must match.`);let v=jr(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),w=n?Se(u,[y,f,p]):Se(u,[y,p,f]),_=o?Se(c,[b,h,d]):Se(c,[b,d,h]),S;i!=null&&(S=J(i,"bias","fused matMul"),[S]=sn(S,u),jr(v,S.shape));let C;a!=null&&(C=J(a,"prelu weights","fused matMul"));let E=(k,F)=>{let[D,L,P,R]=F,V=HC(Se(k,P.shape),P,s),G,U;if(!n&&!o?(G=Vr(V,L,!1,!0),U=Vr(D,V,!0,!1)):!n&&o?(G=Vr(V,L,!1,!1),U=Vr(V,D,!0,!1)):n&&!o?(G=Vr(L,V,!1,!0),U=Vr(D,V,!1,!1)):(G=Vr(L,V,!0,!0),U=Vr(V,D,!0,!0)),i!=null){let H=YC(R,V);return[G,U,H]}else return[G,U]},T={a:w,b:_,bias:S,preluActivationWeights:C},I={transposeA:n,transposeB:o,activation:s,leakyreluAlpha:l};return i==null?Dl((F,D,L)=>{let P=ue.runKernel(U1,T,I);return L([F,D,P]),{value:Se(P,v),gradFunc:E}})(w,_):Dl((F,D,L,P)=>{let R=ue.runKernel(U1,T,I);return P([F,D,R,L]),{value:Se(R,v),gradFunc:E}})(w,_,S)}var GFe,WFe=N(()=>{"use strict";ze();Tx();Ee();ri();Le();Ze();$o();ko();rD();Mh();Ne();Yt();GFe=se({fusedMatMul_:jFt})});var xw={};fn(xw,{conv2d:()=>$Fe,depthwiseConv2d:()=>UFe,matMul:()=>GFe});var qFe=N(()=>{"use strict";zFe();VFe();WFe();});function BFt(t){return W3(t,.54,.46)}var HFe,YFe=N(()=>{"use strict";Ne();q3();HFe=se({hammingWindow_:BFt})});function $Ft(t){return W3(t,.5,.5)}var o7,yse=N(()=>{"use strict";Ne();q3();o7=se({hannWindow_:$Ft})});function zFt(t,r,n,o=!1,i=0){let s=0,a=[];for(;s+r<=t.size;)a.push(zr(t,s,r)),s+=n;if(o)for(;s<t.size;){let l=s+r-t.size,u=On([zr(t,s,r-l),ap([l],i)]);a.push(u),s+=n}return a.length===0?Dx([],[0,r]):Se(On(a),[a.length,r])}var i7,bse=N(()=>{"use strict";fd();CI();Ne();Yt();Ku();HU();i7=se({frame_:zFt})});function UFt(t,r,n,o,i=o7){o==null&&(o=hse(r));let s=i7(t,r,n),a=we(s,i(r));return gw(a,o)}var XFe,KFe=N(()=>{"use strict";fr();Ne();q3();VU();bse();yse();XFe=se({stft_:UFt})});function VFt(t,r,n,o,i="bilinear",s=0){let a=J(t,"image","cropAndResize"),l=J(r,"boxes","cropAndResize","float32"),u=J(n,"boxInd","cropAndResize","int32"),c=l.shape[0];pe(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),pe(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${l.shape}.`),pe(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${l.shape}.`),pe(o.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${o.length}.`),pe(o[0]>=1&&o[1]>=1,()=>`cropSize must be atleast [1,1], but was ${o}`),pe(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);let f={image:a,boxes:l,boxInd:u},d={method:i,extrapolationValue:s,cropSize:o};return ue.runKernel(kS,f,d)}var ZFe,QFe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();ZFe=se({cropAndResize_:VFt})});function GFt(t){let r=J(t,"image","flipLeftRight","float32");pe(r.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${r.rank}.`);let n={image:r};return ue.runKernel(jS,n,{})}var JFe,eOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();JFe=se({flipLeftRight_:GFt})});function WFt(t){let r=J(t,"image","grayscaleToRGB"),n=r.rank-1,o=r.shape[n];pe(r.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${r.rank}.`),pe(o===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${o}.`);let i=new Array(r.rank);return i.fill(1,0,n),i[n]=3,wa(r,i)}var tOe,rOe=N(()=>{"use strict";Le();Ze();Ne();FI();tOe=se({grayscaleToRGB_:WFt})});function qFt(t){let r=J(t,"image","RGBToGrayscale"),n=r.rank-1,o=r.shape[n];pe(r.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${r.rank}.`),pe(o===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${o}.`);let i=r.dtype,s=rt(r,"float32"),a=oi([.2989,.587,.114]),l;switch(r.rank){case 2:l=rw("ij,j->i",s,a);break;case 3:l=rw("ijk,k->ij",s,a);break;case 4:l=rw("ijkl,l->ijk",s,a);break;case 5:l=rw("ijklm,m->ijkl",s,a);break;case 6:l=rw("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return l=ki(l,-1),rt(l,i)}var nOe,oOe=N(()=>{"use strict";Le();Ze();pn();kie();MI();Ne();bw();nOe=se({rgbToGrayscale_:qFt})});function HFt(t,r,n=0,o=.5){let i=J(t,"image","rotateWithOffset","float32");pe(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let s={image:i},a={radians:r,fillValue:n,center:o};return ue.runKernel(vC,s,a)}var iOe,sOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();iOe=se({rotateWithOffset_:HFt})});function cp(t,r,n,o,i,s){o==null&&(o=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);let a=t.shape[0];return n=Math.min(n,a),pe(0<=o&&o<=1,()=>`iouThreshold must be in [0, 1], but was '${o}'`),pe(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),pe(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),pe(r.rank===1,()=>"scores must be a 1D tensor"),pe(r.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${r.shape[0]}`),pe(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s}}var ZC=N(()=>{"use strict";Ze();});function YFt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let s=J(t,"boxes","nonMaxSuppression","float32"),a=J(r,"scores","nonMaxSuppression","float32"),l=cp(s,a,n,o,i);n=l.maxOutputSize,o=l.iouThreshold,i=l.scoreThreshold;let u={maxOutputSize:n,iouThreshold:o,scoreThreshold:i};return ue.runKernel(YS,{boxes:s,scores:a},u)}var aOe,lOe=N(()=>{"use strict";ze();Ee();Le();ZC();Ne();aOe=se({nonMaxSuppression_:YFt})});function uOe(t,r,n){let o=XFt(t,r,n),i=o<0?-(o+1):o;t.splice(i,0,r)}function XFt(t,r,n){return ZFt(t,r,n||KFt)}function KFt(t,r){return t>r?1:t<r?-1:0}function ZFt(t,r,n){let o=0,i=t.length,s=0,a=!1;for(;o<i;){s=o+(i-o>>>1);let l=n(r,t[s]);l>0?o=s+1:(i=s,a=!l)}return a?o:-o-1}var cOe=N(()=>{"use strict";});function s7(t,r,n,o,i){return xse(t,r,n,o,i,0)}function a7(t,r,n,o,i,s){return xse(t,r,n,o,i,0,!1,s,!0)}function l7(t,r,n,o,i,s){return xse(t,r,n,o,i,s,!0)}function xse(t,r,n,o,i,s,a=!1,l=!1,u=!1){let c=[];for(let y=0;y<r.length;y++)r[y]>i&&c.push({score:r[y],boxIndex:y,suppressBeginIndex:0});c.sort(fOe);let f=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&c.length>0;){let y=c.pop(),{score:b,boxIndex:x,suppressBeginIndex:v}=y;if(b<i)break;let w=!1;for(let _=d.length-1;_>=v;--_){let S=QFt(t,x,d[_]);if(S>=o){w=!0;break}if(y.score=y.score*JFt(o,f,S),y.score<=i)break}y.suppressBeginIndex=d.length,w||(y.score===b?(d.push(x),p.push(y.score)):y.score>i&&uOe(c,y,fOe))}let h=d.length,m=n-h;l&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));let g={selectedIndices:d};return a&&(g.selectedScores=p),u&&(g.validOutputs=h),g}function QFt(t,r,n){let o=t.subarray(r*4,r*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(o[0],o[2]),a=Math.min(o[1],o[3]),l=Math.max(o[0],o[2]),u=Math.max(o[1],o[3]),c=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(l-s)*(u-a),m=(d-c)*(p-f);if(h<=0||m<=0)return 0;let g=Math.max(s,c),y=Math.max(a,f),b=Math.min(l,d),x=Math.min(u,p),v=Math.max(b-g,0)*Math.max(x-y,0);return v/(h+m-v)}function JFt(t,r,n){let o=Math.exp(r*n*n);return n<=t?o:0}function fOe(t,r){return t.score-r.score||t.score===r.score&&r.boxIndex-t.boxIndex}var H3=N(()=>{"use strict";cOe();});function eOt(s,a,l){return je(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let u=J(t,"boxes","nonMaxSuppressionAsync"),c=J(r,"scores","nonMaxSuppressionAsync"),f=cp(u,c,n,o,i);n=f.maxOutputSize,o=f.iouThreshold,i=f.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:m}=s7(p,h,n,o,i);return u!==t&&u.dispose(),c!==r&&c.dispose(),oi(m,"int32")})}var dOe,pOe=N(()=>{"use strict";H3();Le();ZC();bw();dOe=eOt});function tOt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=cp(a,l,n,o,i,s);n=u.maxOutputSize,o=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;let c={boxes:a,scores:l},f={maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s},d=ue.runKernel(KS,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}var hOe,mOe=N(()=>{"use strict";ze();Ee();Le();ZC();Ne();hOe=se({nonMaxSuppressionWithScore_:tOt})});function rOt(a,l,u){return je(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=cp(c,f,n,o,i,s);n=d.maxOutputSize,o=d.iouThreshold,i=d.scoreThreshold,s=d.softNmsSigma;let p=yield Promise.all([c.data(),f.data()]),h=p[0],m=p[1],{selectedIndices:g,selectedScores:y}=l7(h,m,n,o,i,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:oi(g,"int32"),selectedScores:oi(y)}})}var gOe,yOe=N(()=>{"use strict";H3();Le();ZC();bw();gOe=rOt});function nOt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=cp(a,l,n,o,i,null),c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p={boxes:a,scores:l},h={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:s},m=ue.runKernel(XS,p,h);return{selectedIndices:m[0],validOutputs:m[1]}}var bOe,xOe=N(()=>{"use strict";ze();Ee();Le();ZC();Ne();bOe=se({nonMaxSuppressionPadded_:nOt})});function oOt(a,l,u){return je(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=cp(c,f,n,o,i,null),p=d.maxOutputSize,h=d.iouThreshold,m=d.scoreThreshold,[g,y]=yield Promise.all([c.data(),f.data()]),{selectedIndices:b,validOutputs:x}=a7(g,y,p,h,m,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:oi(b,"int32"),validOutputs:Ot(x,"int32")}})}var vOe,wOe=N(()=>{"use strict";H3();Le();ZC();Uo();bw();vOe=oOt});function iOt(t,r,n=!1,o=!1){let i=J(t,"images","resizeBilinear");pe(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),pe(r.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${r}.`),pe(o===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(sx,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var u7,vse=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();u7=se({resizeBilinear_:iOt})});function sOt(t,r,n=!1,o=!1){let i=J(t,"images","resizeNearestNeighbor");pe(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),pe(r.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${r}.`),pe(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),pe(o===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(ix,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var c7,wse=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();c7=se({resizeNearestNeighbor_:sOt})});function aOt(t,r="binary",n=!1,o=.5){let i=J(t,"image","threshold"),s=.2989,a=.587,l=.114,u=i.shape[0]*i.shape[1],c=we(oi([o]),255),f,d,p,h;if(pe(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),pe(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),pe(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),pe(r==="otsu"||r==="binary",()=>`Method must be binary or otsu, but was ${r}`),i.shape[2]===3){[f,d,p]=xs(i,[1,1,1],-1);let y=we(f,s),b=we(d,a),x=we(p,l);h=Ke(Ke(y,b),x)}else h=t;if(r==="otsu"){let y=U8(rt($I(h),"int32"),Ti([]),256);c=lOt(y,u)}let m=n?Hc(h,c):ni(h,c);return rt(we(m,255),"int32")}function lOt(t,r){let n=oi([-1]),o=oi([0]),i=oi([0]),s,a,l,u,c,f;for(let d=0;d<t.size-1;d++){s=zr(t,0,d+1),a=zr(t,d+1),c=Tt(It(s),r),f=Tt(It(a),r);let p=It(we(s,N0(0,s.size)));l=Tt(p,It(s));let h=ap(a.shape,s.size),m=Ke(N0(0,a.size),h),g=we(a,m);u=Tt(It(g),It(a));let y=wt(l,u),b=wt(l,u),x=we(c,f);i=we(we(x,y),b);let v=ni(i,o);o=yo(v,i,o),n=yo(v,oi([d]),n)}return n}var _Oe,SOe=N(()=>{"use strict";bw();Ne();pn();qC();xie();sw();I0();Ai();$o();fr();Kn();io();ese();dd();CI();Ku();LU();g3();Ze();Le();_Oe=se({threshold_:aOt})});function uOt(t,r,n="nearest",o="constant",i=0,s){let a=J(t,"image","transform","float32"),l=J(r,"transforms","transform","float32");pe(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),pe(l.rank===2&&(l.shape[0]===a.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),pe(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);let u={image:a,transforms:l},c={interpolation:n,fillMode:o,fillValue:i,outputShape:s};return ue.runKernel(bC,u,c)}var COe,EOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();COe=se({transform_:uOt})});function cOt(t,r,n){let o=J(t,"a","bandPart");pe(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);let i=o.shape,[s,a]=o.shape.slice(-2),l,u;typeof r=="number"?(pe(r%1===0,()=>`bandPart(): numLower must be an integer, got ${r}.`),pe(r<=s,()=>`bandPart(): numLower (${r}) must not be greater than the number of rows (${s}).`),l=J(r<0?s:r,"numLower","bandPart")):(pe(r.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=yo(Ex(r,0),s,pd(r,s))),typeof n=="number"?(pe(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),pe(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),u=J(n<0?a:n,"numUpper","bandPart")):(pe(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=yo(Ex(n,0),a,pd(n,a)));let c=Se(N0(0,s,1,"int32"),[-1,1]),f=N0(0,a,1,"int32"),d=wt(c,f),p=Ha(Hc(d,l),au(d,Zr(u))),h=xo([s,a],o.dtype);return Se(ss(Ya(Se(o,[-1,s,a])).map(m=>yo(p,m,h))),i)}var TOe,AOe=N(()=>{"use strict";Le();Ze();jC();D3();sw();BC();P3();ea();Ne();LU();Yt();yw();io();eD();dd();LI();TOe=se({bandPart_:cOt})});function fOt(t){let r;if(Array.isArray(t)){r=!1,pe(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=t[0].shape[0];for(let s=1;s<t.length;++s)pe(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else r=!0,t=xs(t,t.shape[0],0).map(i=>Xc(i,[0]));pe(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],o=t;for(let i=0;i<t.length;++i)n.push(ue.tidy(()=>{let s=o[i];if(i>0)for(let a=0;a<i;++a){let l=we(It(we(n[a],s)),n[a]);s=wt(s,l)}return Tt(s,Cx(s,"euclidean"))}));return r?ss(n,0):n}var kOe,IOe=N(()=>{"use strict";ze();Ze();Kn();fr();A3();Ne();qC();U3();yw();io();Ai();kOe=se({gramSchmidt_:fOt})});function dOt(t,r=!1){if(pe(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return DOe(t,r);{let n=t.shape.slice(0,t.shape.length-2).reduce((u,c)=>u*c),o=Ya(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];o.forEach(u=>{let[c,f]=DOe(u,r);i.push(c),s.push(f)});let a=Se(ss(i,0),t.shape),l=Se(ss(s,0),t.shape);return[a,l]}}function DOe(t,r=!1){return ue.tidy(()=>{pe(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],o=t.shape[1],i=LC(n),s=Xu(t),a=Dx([[1]],[1,1]),l=Xu(a),u=n>=o?o:n;for(let c=0;c<u;++c){let f=s,d=l,p=i;[l,s,i]=ue.tidy(()=>{let h=zr(s,[c,c],[n-c,1]),m=Cx(h),g=zr(s,[c,c],[1,1]),y=yo(ni(g,0),Dx([[-1]]),Dx([[1]])),b=wt(g,we(y,m)),x=Tt(h,b);x.shape[0]===1?l=Xu(a):l=On([a,zr(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);let v=Zr(Tt(Vr(y,b),m)),w=zr(s,[c,0],[n-c,o]),_=we(v,l),S=Gr(l);if(c===0)s=wt(w,Vr(_,Vr(S,w)));else{let T=wt(w,Vr(_,Vr(S,w)));s=On([zr(s,[0,0],[c,o]),T],0)}let C=Gr(_),E=zr(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=wt(E,Vr(Vr(E,l),C));else{let T=wt(E,Vr(Vr(E,l),C));i=On([zr(i,[0,0],[n,c]),T],1)}return[l,s,i]}),Cr([f,d,p])}return!r&&n>o&&(i=zr(i,[0,0],[n,o]),s=zr(s,[0,0],[o,o])),[i,s]})}var NOe,MOe=N(()=>{"use strict";ze();Wc();Ze();bI();fd();Kn();Oie();I0();Mh();fr();ea();A3();Ne();Yt();Ku();yw();io();HU();Nx();eD();dd();NOe=se({qr_:dOt})});var Ii,jh=N(()=>{"use strict";Ii=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Ii||{})});function pOt(t,r,n=Ii.SUM_BY_NONZERO_WEIGHTS){let o=J(t,"losses","computeWeightedLoss"),i=null;r!=null&&(i=J(r,"weights","computeWeightedLoss"));let s=i==null?o:we(o,i);if(n===Ii.NONE)return s;if(n===Ii.SUM)return It(s);if(n===Ii.MEAN){if(i==null)return bo(s);{let a=o.size/i.size,l=Tt(It(s),It(i));return a>1?Tt(l,Ot(a)):l}}if(n===Ii.SUM_BY_NONZERO_WEIGHTS){if(i==null)return Tt(It(s),Ot(o.size));{let a=we(i,Wi(o.shape)),l=rt(It(Lh(a,Ot(0))),"float32");return Tt(It(s),l)}}throw Error(`Unknown reduction: ${n}`)}var Xa,M0=N(()=>{"use strict";Le();pn();Kn();jh();R3();fr();AU();$C();Ne();Uo();Ai();Xa=se({computeWeightedLoss_:pOt})});function hOt(t,r,n,o=Ii.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","absoluteDifference"),s=J(r,"predictions","absoluteDifference"),a=null;n!=null&&(a=J(n,"weights","absoluteDifference")),Bo(i.shape,s.shape,"Error in absoluteDifference: ");let l=Ao(wt(i,s));return Xa(l,a,o)}var FOe,OOe=N(()=>{"use strict";Le();Ze();MC();jh();Ne();io();M0();FOe=se({absoluteDifference_:hOt})});function mOt(t,r,n,o,i=Ii.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","cosineDistance"),a=J(r,"predictions","cosineDistance"),l=null;o!=null&&(l=J(o,"weights","cosineDistance")),Bo(s.shape,a.shape,"Error in cosineDistance: ");let u=Ot(1),c=wt(u,It(we(s,a),n,!0));return Xa(c,l,i)}var ROe,POe=N(()=>{"use strict";Le();Ze();jh();fr();Ne();Uo();io();Ai();M0();ROe=se({cosineDistance_:mOt})});function gOt(t,r,n,o=Ii.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","hingeLoss"),s=J(r,"predictions","hingeLoss"),a=null;n!=null&&(a=J(n,"weights","hingeLoss")),Bo(i.shape,s.shape,"Error in hingeLoss: ");let l=Ot(1);i=wt(we(Ot(2),i),l);let u=_a(wt(l,we(i,s)));return Xa(u,a,o)}var LOe,jOe=N(()=>{"use strict";Le();Ze();jh();fr();Ne();jI();Uo();io();M0();LOe=se({hingeLoss_:gOt})});function yOt(t,r,n,o=1,i=Ii.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","huberLoss"),a=J(r,"predictions","huberLoss"),l=null;n!=null&&(l=J(n,"weights","huberLoss")),Bo(s.shape,a.shape,"Error in huberLoss: ");let u=Ot(o),c=Ao(wt(a,s)),f=pd(c,u),d=wt(c,f),p=Ke(we(Ot(.5),qr(f)),we(u,d));return Xa(p,l,i)}var BOe,$Oe=N(()=>{"use strict";Le();Ze();MC();$o();jh();P3();fr();Ne();Uo();ys();io();M0();BOe=se({huberLoss_:yOt})});function bOt(t,r,n,o=1e-7,i=Ii.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","logLoss"),a=J(r,"predictions","logLoss"),l=null;n!=null&&(l=J(n,"weights","logLoss")),Bo(s.shape,a.shape,"Error in logLoss: ");let u=Ot(1),c=Ot(o),f=Zr(we(s,Js(Ke(a,c)))),d=we(wt(u,s),Js(Ke(wt(u,a),c))),p=wt(f,d);return Xa(p,l,i)}var zOe,UOe=N(()=>{"use strict";Le();Ze();$o();OI();jh();fr();ea();Ne();Uo();io();M0();zOe=se({logLoss_:bOt})});function xOt(t,r,n,o=Ii.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","meanSquaredError"),s=J(r,"predictions","meanSquaredError"),a=null;n!=null&&(a=J(n,"weights","meanSquaredError")),Bo(i.shape,s.shape,"Error in meanSquaredError: ");let l=XI(i,s);return Xa(l,a,o)}var VOe,GOe=N(()=>{"use strict";Le();Ze();jh();Ne();GU();M0();VOe=se({meanSquaredError_:xOt})});function vOt(t,r){let n=J(t,"labels","sigmoidCrossEntropyWithLogits"),o=J(r,"logits","sigmoidCrossEntropyWithLogits");Bo(n.shape,o.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=_a(o),s=we(o,n),a=aw(xi(Zr(Ao(o))));return Ke(wt(i,s),a)}function wOt(t,r,n,o=0,i=Ii.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"multiClassLabels","sigmoidCrossEntropy"),a=J(r,"logits","sigmoidCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","sigmoidCrossEntropy")),Bo(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),o>0){let c=Ot(o),f=Ot(1),d=Ot(.5);s=Ke(we(s,wt(f,c)),we(d,c))}let u=vOt(s,a);return Xa(u,l,i)}var WOe,qOe=N(()=>{"use strict";Le();Ze();MC();$o();T0();Pie();jh();fr();ea();Ne();jI();Uo();io();M0();WOe=se({sigmoidCrossEntropy_:wOt})});function _Ot(t,r,n=-1){if(n===-1&&(n=r.rank-1),n!==r.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${r.rank} and dim was ${n}`);return Dl((i,s,a)=>{let u=lw(s,[n],!0),c=wt(rt(s,"float32"),u);a([i,c]);let f=Zr(we(c,i));return{value:It(f,[n]),gradFunc:(h,m)=>{let[g,y]=m,b=lp(h.shape,[n]);return[we(Se(h,b),wt(rt(g,"float32"),xi(y))),we(Se(h,b),wt(xi(y),rt(g,"float32")))]}}})(t,r)}function SOt(t,r,n,o=0,i=Ii.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"onehotLabels","softmaxCrossEntropy"),a=J(r,"logits","softmaxCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","softmaxCrossEntropy")),Bo(s.shape,a.shape,"Error in softmaxCrossEntropy: "),o>0){let c=Ot(o),f=Ot(1),d=Ot(s.shape[1]);s=Ke(we(s,wt(f,c)),Tt(c,d))}let u=_Ot(s,a);return Xa(u,l,i)}var HOe,YOe=N(()=>{"use strict";Tx();Le();Ze();$o();Oh();pn();Kn();T0();bU();jh();fr();ea();Ne();Yt();Uo();io();Ai();M0();HOe=se({softmaxCrossEntropy_:SOt})});function COt(t,r,n,o){let i=J(t,"indices","sparseFillEmptyRows","int32"),s=J(r,"values","sparseFillEmptyRows"),a=J(n,"denseShape","sparseFillEmptyRows","int32"),l=J(o,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);let u={indices:i,values:s,denseShape:a,defaultValue:l},c=ue.runKernel(aC,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var XOe,KOe=N(()=>{"use strict";ze();Ee();Le();Ne();XOe=se({sparseFillEmptyRows_:COt})});function EOt(t,r,n){let o=J(t,"inputIndices","sparseReshape","int32"),i=J(r,"inputShape","sparseReshape","int32"),s=J(n,"newShape","sparseReshape","int32");if(o.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);let a={inputIndices:o,inputShape:i,newShape:s},l=ue.runKernel(lC,a);return{outputIndices:l[0],outputShape:l[1]}}var ZOe,QOe=N(()=>{"use strict";ze();Ee();Le();Ne();ZOe=se({sparseReshape_:EOt})});function TOt(t,r,n){let o=J(t,"data","sparseSegmentMean"),i=J(r,"indices","sparseSegmentMean","int32"),s=J(n,"segmentIds","sparseSegmentMean","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(uC,a)}var JOe,eRe=N(()=>{"use strict";ze();Ee();Le();Ne();JOe=se({sparseSegmentMean_:TOt})});function AOt(t,r,n){let o=J(t,"data","sparseSegmentSum"),i=J(r,"indices","sparseSegmentSum","int32"),s=J(n,"segmentIds","sparseSegmentSum","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(cC,a)}var tRe,rRe=N(()=>{"use strict";ze();Ee();Le();Ne();tRe=se({sparseSegmentSum_:AOt})});function kOt(t,r,n,o,i,s,a,l){let u=J(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=J(r,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let f={separator:n,nGramWidths:o,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:l},d={data:u,dataSplits:c},p=ue.runKernel(hC,d,f);return{nGrams:p[0],nGramsSplits:p[1]}}var nRe,oRe=N(()=>{"use strict";ze();Ee();Le();Ne();nRe=se({stringNGrams_:kOt})});function IOt(t,r,n=!0){let o=J(t,"input","stringSplit","string"),i=J(r,"delimiter","stringSplit","string");if(o.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${o.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);let s={skipEmpty:n},a={input:o,delimiter:i},l=ue.runKernel(mC,a,s);return{indices:l[0],values:l[1],shape:l[2]}}var iRe,sRe=N(()=>{"use strict";ze();Ee();Le();Ne();iRe=se({stringSplit_:IOt})});function DOt(t,r){let n=J(t,"input","stringToHashBucketFast","string"),o={numBuckets:r};if(r<=0)throw new Error("Number of buckets must be at least 1");let i={input:n};return ue.runKernel(gC,i,o)}var aRe,lRe=N(()=>{"use strict";ze();Ee();Le();Ne();aRe=se({stringToHashBucketFast_:DOt})});function NOt(t,r,n,o=!0){let i=J(t,"input","staticRegexReplace","string"),s={pattern:r,rewrite:n,replaceGlobal:o};return ue.runKernel(z1,{x:i},s)}var uRe,cRe=N(()=>{"use strict";ze();Ee();Le();Ne();uRe=se({staticRegexReplace_:NOt})});var MOt,FOt,ec,_se,OOt,ROt,POt,Fr=N(()=>{"use strict";MC();QDe();JDe();$o();tNe();cie();fie();die();pie();rNe();nNe();oNe();hie();iNe();L8();lNe();cNe();_3();SI();pNe();hNe();mNe();xie();yNe();xNe();V8();_x();pn();vNe();wNe();bI();Y1();fd();_Ne();SNe();CNe();ENe();vie();RC();wie();TNe();ANe();J8();Sie();eU();tU();kNe();Cie();C3();DNe();Eie();Kn();Tie();Aie();kie();sU();FNe();E3();ONe();Fie();T0();MI();LNe();Oie();CI();cU();k8();k3();I0();jC();I3();jNe();BNe();$Ne();hU();D3();sw();UNe();Rie();OI();Pie();HNe();YNe();bU();BC();M3();xU();jie();KNe();Mh();NI();SU();ZNe();JNe();O3();R3();tMe();aU();P3();Bie();$ie();rMe();fr();oMe();sMe();ea();AU();kU();$C();aMe();uMe();fw();fMe();pMe();mMe();yMe();zie();nw();DU();uie();Uie();xMe();wMe();SMe();EMe();qMe();Jie();YMe();PU();KMe();LU();$3();ZMe();jI();BU();Yt();kx();JMe();tFe();nFe();iFe();ese();tse();Uo();rse();nse();aFe();_I();lFe();ose();ise();Ku();uFe();cFe();fFe();dFe();pFe();Lie();L3();zU();UU();sse();VU();qC();Rh();ys();GU();U3();yw();KI();hFe();io();Ai();mFe();bie();g3();bw();HU();ase();yFe();xFe();wFe();CFe();FI();use();EFe();cse();ZU();eD();AFe();kFe();dd();dse();LI();zo();IFe();Nx();A3();DFe();NFe();_U();OFe();RFe();jFe();q3();BFe();Ne();VU();zU();UU();sse();qFe();YFe();yse();bse();KFe();QFe();eOe();rOe();oOe();sOe();lOe();pOe();mOe();yOe();xOe();wOe();vse();wse();SOe();EOe();AOe();IOe();MOe();OOe();M0();POe();jOe();$Oe();UOe();GOe();qOe();YOe();KOe();QOe();eRe();rRe();oRe();sRe();lRe();cRe();MOt={fft:mw,ifft:Ix,rfft:gw,irfft:YI},FOt={hammingWindow:HFe,hannWindow:o7,frame:i7,stft:XFe},ec={flipLeftRight:JFe,grayscaleToRGB:tOe,resizeNearestNeighbor:c7,resizeBilinear:u7,rgbToGrayscale:nOe,rotateWithOffset:iOe,cropAndResize:ZFe,nonMaxSuppression:aOe,nonMaxSuppressionAsync:dOe,nonMaxSuppressionWithScore:hOe,nonMaxSuppressionWithScoreAsync:gOe,nonMaxSuppressionPadded:bOe,nonMaxSuppressionPaddedAsync:vOe,threshold:_Oe,transform:COe},_se={bandPart:TOe,gramSchmidt:kOe,qr:NOe},OOt={absoluteDifference:FOe,computeWeightedLoss:Xa,cosineDistance:ROe,hingeLoss:LOe,huberLoss:BOe,logLoss:zOe,meanSquaredError:VOe,sigmoidCrossEntropy:WOe,softmaxCrossEntropy:HOe},ROt={sparseFillEmptyRows:XOe,sparseReshape:ZOe,sparseSegmentMean:JOe,sparseSegmentSum:tRe},POt={stringNGrams:nRe,stringSplit:iRe,stringToHashBucketFast:aRe,staticRegexReplace:uRe}});var tt={};fn(tt,{Serializable:()=>Y3,SerializationMap:()=>f7,getRegisteredName:()=>jOt,registerClass:()=>Cse});function Cse(t,r,n){pe(t.className!=null,()=>"Class being registered does not have the static className property defined."),pe(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),pe(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof r>"u"&&(r="Custom"),typeof n>"u"&&(n=t.className);let o=n,i=r+">"+o;return f7.register(t),LOt.set(i,t),Sse.set(t,i),t}function jOt(t){return Sse.has(t)?Sse.get(t):t.className}var LOt,Sse,Y3,f7,d7=N(()=>{"use strict";Ze();LOt=new Map,Sse=new Map,Y3=class{getClassName(){return this.constructor.className}static fromConfig(r,n){return new r(n)}},f7=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(r){t.getMap().classNameMap[r.className]=[r,r.fromConfig]}}});var Sa,vw=N(()=>{"use strict";Wc();Tx();Fr();d7();Sa=class extends Y3{minimize(r,n=!1,o){let{value:i,grads:s}=this.computeGradients(r,o);if(o!=null){let a=o.map(l=>({name:l.name,tensor:s[l.name]}));this.applyGradients(a)}else this.applyGradients(s);return Cr(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(r,n){return N3(r,n)}dispose(){this.iterations_!=null&&Cr(this.iterations_)}saveIterations(){return je(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ot(this.iterations_,"int32")}})}getWeights(){return je(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(r){return je(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(r){return je(this,null,function*(){return this.iterations_=(yield r[0].tensor.data())[0],r.slice(1)})}};Object.defineProperty(Sa,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null})});var ww,p7=N(()=>{"use strict";ze();Wc();$o();Kn();fr();Fr();ys();zo();vw();ww=class extends Sa{static get className(){return"Adadelta"}constructor(r,n,o=null){super(),this.learningRate=r,this.rho=n,this.epsilon=o,this.accumulatedGrads=[],this.accumulatedUpdates=[],o==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accum_grad`,variable:Pe(()=>ar(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${o}/accum_var`,variable:Pe(()=>ar(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Pe(()=>{let f=Ke(we(u,this.rho),we(qr(l),1-this.rho)),d=we(Tt(Zn(Ke(c,this.epsilon)),Zn(Ke(u,this.epsilon))),l),p=Ke(we(c,this.rho),we(qr(d),1-this.rho));u.assign(f),c.assign(p);let h=Ke(we(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Cr(this.accumulatedGrads.map(r=>r.variable)),Cr(this.accumulatedUpdates.map(r=>r.variable)))}getWeights(){return je(this,null,function*(){let r=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=r.length/2,o=!1;this.accumulatedGrads=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedUpdates=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.rho,n.epsilon)}}});var _w,h7=N(()=>{"use strict";ze();Wc();$o();Kn();CI();fr();Rh();ys();vw();_w=class extends Sa{static get className(){return"Adagrad"}constructor(r,n=.1){super(),this.learningRate=r,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accumulator`,variable:Pe(()=>ap(s.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(r)?r[i].tensor:r[o];if(a==null)return;let l=this.accumulatedGrads[i].variable;Pe(()=>{let u=Ke(l,qr(a));l.assign(u);let c=Ke(we(Tt(a,Zn(Ke(u,ue.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Cr(this.accumulatedGrads.map(r=>r.variable))}getWeights(){return je(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulatedGrads=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(r,n){return new r(n.learningRate,n.initialAccumulatorValue)}}});var Sw,m7=N(()=>{"use strict";ze();Wc();$o();Kn();fr();nw();Uo();Rh();ys();io();zo();vw();Sw=class extends Sa{static get className(){return"Adam"}constructor(r,n,o,i=null){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Pe(()=>{this.accBeta1=Ot(n).variable(),this.accBeta2=Ot(o).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);Pe(()=>{let o=wt(1,this.accBeta1),i=wt(1,this.accBeta2);n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:Pe(()=>ar(l).variable(u))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:Pe(()=>ar(l).variable(u))});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),h=Ke(we(d,this.beta2),we(qr(c),1-this.beta2)),m=Tt(p,o),g=Tt(h,i);f.assign(p),d.assign(h);let y=Ke(we(Tt(m,Ke(Zn(g),this.epsilon)),-this.learningRate),l);l.assign(y)}),this.accBeta1.assign(we(this.accBeta1,this.beta1)),this.accBeta2.assign(we(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedSecondMoment!=null&&Cr(this.accumulatedSecondMoment.map(r=>r.variable))}getWeights(){return je(this,null,function*(){let r=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r),Pe(()=>{this.accBeta1.assign(qa(this.beta1,this.iterations_+1)),this.accBeta2.assign(qa(this.beta2,this.iterations_+1))});let n=r.length/2,o=!1;this.accumulatedFirstMoment=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedSecondMoment=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)}}});var Cw,g7=N(()=>{"use strict";ze();Wc();MC();$o();Kn();O3();fr();Uo();io();zo();vw();Cw=class extends Sa{static get className(){return"Adamax"}constructor(r,n,o,i=null,s=0){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Pe(()=>{this.iteration=Ot(0).variable(),this.accBeta1=Ot(n).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);Pe(()=>{let o=wt(1,this.accBeta1),i=Tt(-this.learningRate,Ke(we(this.iteration,this.decay),1));n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:ar(l).variable(u)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:ar(l).variable(u)});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),h=we(d,this.beta2),m=Ao(c),g=Ju(h,m);f.assign(p),d.assign(g);let y=Ke(we(Tt(i,o),Tt(p,Ke(g,this.epsilon))),l);l.assign(y)}),this.iteration.assign(Ke(this.iteration,1)),this.accBeta1.assign(we(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedWeightedInfNorm!=null&&Cr(this.accumulatedWeightedInfNorm.map(r=>r.variable))}getWeights(){return je(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(r){return je(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}});var F0,X3=N(()=>{"use strict";ze();Wc();$o();fr();Uo();vw();F0=class extends Sa{static get className(){return"SGD"}constructor(r){super(),this.learningRate=r,this.setLearningRate(r)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=Array.isArray(r)?r[i].tensor:r[o];if(s==null)return;let a=ue.registeredVariables[o];Pe(()=>{let l=Ke(we(this.c,s),a);a.assign(l)})}),this.incrementIterations()}setLearningRate(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=Ms(Ot(-r))}dispose(){this.c.dispose()}getWeights(){return je(this,null,function*(){return[yield this.saveIterations()]})}setWeights(r){return je(this,null,function*(){if(r=yield this.extractIterations(r),r.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(r,n){return new r(n.learningRate)}}});var Ew,y7=N(()=>{"use strict";ze();Wc();$o();fr();Uo();zo();X3();Ew=class extends F0{static get className(){return"Momentum"}constructor(r,n,o=!1){super(r),this.learningRate=r,this.momentum=n,this.useNesterov=o,this.accumulations=[],this.m=Ot(this.momentum)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${o}/momentum`,variable:Pe(()=>ar(s).variable(!1))});let a=this.accumulations[i].variable,l=Array.isArray(r)?r[i].tensor:r[o];l!=null&&Pe(()=>{let u,c=Ke(we(this.m,a),l);this.useNesterov?u=Ke(we(this.c,Ke(l,we(c,this.m))),s):u=Ke(we(this.c,c),s),a.assign(c),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Cr(this.accumulations.map(r=>r.variable))}setMomentum(r){this.momentum=r}getWeights(){return je(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulations=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)}}});var Tw,b7=N(()=>{"use strict";ze();Wc();$o();Kn();fr();Rh();ys();io();zo();vw();Tw=class extends Sa{static get className(){return"RMSProp"}constructor(r,n=.9,o=0,i=null,s=!1){if(super(),this.learningRate=r,this.decay=n,this.momentum=o,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=ue.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${o}/rms`,variable:Pe(()=>ar(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${o}/momentum`,variable:Pe(()=>ar(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${o}/mg`,variable:Pe(()=>ar(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Pe(()=>{let f=Ke(we(u,this.decay),we(qr(l),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[i].variable,p=Ke(we(d,this.decay),we(l,1-this.decay)),h=Tt(we(l,this.learningRate),Zn(wt(f,Ke(qr(p),this.epsilon)))),m=Ke(we(c,this.momentum),h);u.assign(f),d.assign(p),c.assign(m);let g=wt(s,m);s.assign(g)}else{let d=Ke(we(u,this.decay),we(qr(l),1-this.decay)),p=Ke(we(c,this.momentum),Tt(we(l,this.learningRate),Zn(Ke(d,this.epsilon))));u.assign(d),c.assign(p);let h=wt(s,p);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Cr(this.accumulatedMeanSquares.map(r=>r.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Cr(this.accumulatedMeanGrads.map(r=>r.variable)),this.accumulatedMoments!=null&&Cr(this.accumulatedMoments.map(r=>r.variable))}getWeights(){return je(this,null,function*(){let r=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&r.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=this.centered?r.length/3:r.length/2,o=!1;this.accumulatedMeanSquares=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedMoments=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.centered&&(this.accumulatedMeanGrads=r.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}});function fRe(){for(let t of BOt)Cse(t)}var BOt,dRe=N(()=>{"use strict";p7();h7();m7();g7();y7();b7();X3();d7();BOt=[ww,_w,Sw,Cw,Ew,Tw,F0]});function pRe(t){return new Promise(r=>setTimeout(r)).then(t)}function GOt(t="model"){return new Ese(t)}function hRe(t){return new Tse(t)}var $Ot,zOt,UOt,Ese,Tse,VOt,mRe=N(()=>{"use strict";dI();ba();Z1();AC();X1();$Ot="model",zOt=".json",UOt=".weights.bin";Ese=(()=>{class t{constructor(n){if(!Me().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=$Ot),this.modelJsonFileName=n+zOt,this.weightDataFileName=n+UOt}save(n){return je(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let o=Wa.join(n.weightData),i=window.URL.createObjectURL(new Blob([o],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a=S8(n,s),l=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=l,yield pRe(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=i,yield pRe(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:v0(n)}}})}}return t.URL_SCHEME="downloads://",t})(),Tse=class{constructor(r){if(r==null||r.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${r}`);this.jsonFile=r[0],this.weightsFiles=r.slice(1)}load(){return je(this,null,function*(){return new Promise((r,n)=>{let o=new FileReader;o.onload=i=>{let s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){r({modelTopology:a});return}let u=hI(s,c=>this.loadWeights(c));r(u)},o.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),o.readAsText(this.jsonFile)})})}loadWeights(r){let n=[],o=[];for(let a of r)n.push(...a.weights),o.push(...a.paths);let i=this.checkManifestAndWeightFiles(r),s=o.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[n,a])}loadWeightsFile(r,n){return new Promise((o,i)=>{let s=new FileReader;s.onload=a=>{let l=a.target.result;o(l)},s.onerror=a=>i(`Failed to weights data from file of path '${r}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(r){let n=[],o=this.weightsFiles.map(s=>Qoe(s.name)),i={};for(let s of r)s.paths.forEach(a=>{let l=Qoe(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),o.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);i[a]=this.weightsFiles[o.indexOf(l)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}},VOt=t=>Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ese.URL_SCHEME)?GOt(t.slice(Ese.URL_SCHEME.length)):null;Ks.registerSaveRouter(VOt)});function Ase(t,r,n,o){a(t),n=n??0,o=o??1,l(n,o);let i=0,s=u=>(u.then(c=>{let f=n+ ++i/t.length*(o-n);return r(f),c}),u);function a(u){pe(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function l(u,c){pe(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),pe(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),pe(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(t.map(s))}var gRe=N(()=>{"use strict";Ze();});function kse(t,r){return je(this,null,function*(){r==null&&(r={});let n=r.fetchFunc==null?Me().platform.fetch:r.fetchFunc,o=t.map(d=>n(d,r.requestInit,{isBinary:!0})),l=(r.onProgress==null?yield Promise.all(o):yield Ase(o,r.onProgress,0,.5)).map(d=>d.arrayBuffer());return r.onProgress==null?yield Promise.all(l):yield Ase(l,r.onProgress,.5,1)})}function yRe(t,r){var n;let o=r.fetchFunc==null?Me().platform.fetch:r.fetchFunc,i=0,s;return(n=r.onProgress)===null||n===void 0||n.call(r,0),new ReadableStream({pull:a=>je(this,null,function*(){for(var l;i<t.length;){s||(s=(yield o(t[i],r.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield s.read();if(u){i++,s=void 0,(l=r.onProgress)===null||l===void 0||l.call(r,i/t.length);continue}a.enqueue(c);return}a.close()})})}function bRe(t,r="",n,o){return je(this,null,function*(){return Ise(a=>kse(a,{requestInit:o}))(t,r,n)})}function Ise(t){return(r,n="",o)=>je(this,null,function*(){let i=r.map(()=>!1),s={},a=o!=null?o.map(()=>!1):[],l=[];if(r.forEach((h,m)=>{let g=0;h.weights.forEach(y=>{let b="quantization"in y?y.quantization.dtype:y.dtype,x=vx[b]*on(y.shape),v=()=>{i[m]=!0,s[m]==null&&(s[m]=[]),s[m].push({manifestEntry:y,groupOffset:g,sizeBytes:x})};o!=null?o.forEach((w,_)=>{w===y.name&&(v(),a[_]=!0)}):v(),l.push(y.name),g+=x})}),!a.every(h=>h)){let h=o.filter((m,g)=>!a[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}let u=i.reduce((h,m,g)=>(m&&h.push(g),h),[]),c=[];u.forEach(h=>{r[h].paths.forEach(m=>{let g=n+(n.endsWith("/")?"":"/")+m;c.push(g)})});let f=yield t(c),d={},p=0;return u.forEach(h=>{let m=r[h].paths.length,g=new Wa(f.slice(p,p+m));s[h].forEach(b=>{let x=g.slice(b.groupOffset,b.groupOffset+b.sizeBytes),v=_8(x,[b.manifestEntry]);for(let w in v)d[w]=v[w]}),p+=m}),d})}var Dse=N(()=>{"use strict";ba();Ze();X1();Z1();gRe();Hoe();});function HOt(t){let r=t.lastIndexOf("/"),n=t.lastIndexOf("?"),o=t.substring(0,r),i=n>r?t.substring(n):"";return[o+"/",i]}function x7(t){return t.match(xRe.URL_SCHEME_REGEX)!=null}function v7(t,r){return new xRe(t,r)}function wRe(t,r){return v7(t,r)}var WOt,qOt,xRe,vRe,_Re=N(()=>{"use strict";ba();Ze();Z1();X1();AC();Dse();WOt="application/octet-stream",qOt="application/json",xRe=(()=>{class t{constructor(n,o){if(this.DEFAULT_METHOD="POST",o==null&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.weightUrlConverter=o.weightUrlConverter,o.fetchFunc!=null?(pe(typeof o.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=Me().platform.fetch,pe(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&pe(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,o.requestInit!=null&&o.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{},this.loadOptions=o}save(n){return je(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let o=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);o.body=new FormData;let i=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],s=S8(n,i);if(o.body.append("model.json",new Blob([JSON.stringify(s)],{type:qOt}),"model.json"),n.weightData!=null){let l=Wa.join(n.weightData);o.body.append("model.weights.bin",new Blob([l],{type:WOt}),"model.weights.bin")}let a=yield this.fetch(this.path,o);if(a.ok)return{modelArtifactsInfo:v0(n),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})}loadModelJSON(){return je(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let o;try{o=yield n.json()}catch{let l=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?l+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":l+=" Please make sure the server is serving valid JSON for this request.",new Error(l)}let i=o.modelTopology,s=o.weightsManifest;if(i==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return o})}load(){return je(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return hI(n,o=>this.loadWeights(o))})}loadStream(){return je(this,null,function*(){let n=yield this.loadModelJSON(),o=yield this.getWeightUrls(n.weightsManifest),i=x3(n.weightsManifest),s=()=>yRe(o,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:i,getWeightStream:s})})}getWeightUrls(n){return je(this,null,function*(){let o=Array.isArray(this.path)?this.path[1]:this.path,[i,s]=HOt(o),a=this.weightPathPrefix||i,l=[],u=[];for(let c of n)for(let f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):l.push(a+f+s);return this.weightUrlConverter&&l.push(...yield Promise.all(u)),l})}loadWeights(n){return je(this,null,function*(){let o=yield this.getWeightUrls(n),i=x3(n),s=yield kse(o,this.loadOptions);return[i,s]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();vRe=(t,r)=>{if(typeof fetch>"u"&&(r==null||r.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(o=>x7(o)):n=x7(t),n)return v7(t,r)}return null};Ks.registerSaveRouter(vRe);Ks.registerLoadRouter(vRe)});function SRe(t,r,n,o){let i=arguments;return new Nse(Mse(...i))}function Mse(t,r,n,o){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new K3(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new K3({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new K3({modelTopology:t,weightSpecs:r,weightData:n,trainingConfig:o}))}function CRe(t){return new w7(t)}function ERe(t){return new w7(t)}var K3,w7,Nse,TRe=N(()=>{"use strict";K3=class{constructor(r){this.modelArtifacts=r}load(){return this.modelArtifacts}},w7=class{constructor(r){this.saveHandler=r}save(r){return this.saveHandler(r)}},Nse=class{constructor(r){r.load&&(this.load=()=>Promise.resolve(r.load())),r.save&&(this.save=n=>Promise.resolve(r.save(n)))}}});var hd={};fn(hd,{CompositeArrayBuffer:()=>Wa,browserFiles:()=>hRe,browserHTTPRequest:()=>wRe,concatenateArrayBuffers:()=>DDe,copyModel:()=>GDe,decodeWeights:()=>_8,decodeWeightsStream:()=>Koe,encodeWeights:()=>TDe,fromMemory:()=>SRe,fromMemorySync:()=>Mse,getLoadHandlers:()=>ODe,getModelArtifactsForJSON:()=>hI,getModelArtifactsForJSONSync:()=>Joe,getModelArtifactsInfoForJSON:()=>v0,getSaveHandlers:()=>FDe,getWeightSpecs:()=>x3,http:()=>v7,isHTTPScheme:()=>x7,listModels:()=>UDe,loadWeights:()=>bRe,moveModel:()=>WDe,registerLoadRouter:()=>MDe,registerSaveRouter:()=>NDe,removeModel:()=>VDe,weightsLoaderFactory:()=>Ise,withSaveHandler:()=>CRe,withSaveHandlerSync:()=>ERe});var ARe=N(()=>{"use strict";nie();oie();mRe();_Re();Z1();TRe();AC();Dse();X1();iie();});function YOt(t,r,n){let o=J(t,"labels","confusionMatrix"),i=J(r,"predictions","confusionMatrix");pe(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),pe(o.rank===1,()=>`Expected the rank of labels to be 1, but got ${o.rank}`),pe(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),pe(o.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${o.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),pe(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let s=D0(rt(o,"int32"),n),a=D0(rt(i,"int32"),n),l=Gr(s),u=Vr(l,a);return rt(u,"int32")}var kRe,IRe=N(()=>{"use strict";Le();Ze();pn();Mh();kU();Ne();Nx();kRe=se({confusionMatrix_:YOt})});var Fse={};fn(Fse,{confusionMatrix:()=>kRe});var DRe=N(()=>{"use strict";IRe();});var _7={};fn(_7,{draw:()=>rRt,fromPixels:()=>nRt,fromPixelsAsync:()=>JOt,toPixels:()=>tRt});function MRe(t,r=3){if(r>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,o=!1,i=!1,s=!1,a=!1,l=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)o=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(wC(nI,ue.backendName)!=null){let m={pixels:t},g={numChannels:r};return ue.runKernel(nI,m,g)}let[c,f]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(a)d=t.getContext("2d").getImageData(0,0,c,f).data;else if(o||n)d=t.data;else if(s||i||l){if(QC==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")QC=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else QC=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});QC.canvas.width=c,QC.canvas.height=f,QC.drawImage(t,0,0,c,f),d=QC.getImageData(0,0,c,f).data}let p;if(r===4)p=new Int32Array(d);else{let m=c*f;p=new Int32Array(m*r);for(let g=0;g<m;g++)for(let y=0;y<r;++y)p[g*r+y]=d[g*4+y]}return YU(p,[f,c,r],"int32")}function XOt(t){return t!=null&&t.data instanceof Uint8Array}function KOt(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function ZOt(t){return t!=null&&t.width!==0&&t.height!==0}function QOt(t){return KOt()&&!(t instanceof ImageBitmap)&&ZOt(t)&&!XOt(t)}function JOt(t,r=3){return je(this,null,function*(){let n=null;if(Me().getBool("WRAP_TO_IMAGEBITMAP")&&QOt(t)){let o;try{o=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{o=null}o!=null&&o.width===t.width&&o.height===t.height?n=o:n=t}else n=t;return MRe(n,r)})}function FRe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let r=t.rank===2?1:t.shape[2];if(r>4||r===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${r}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function eRt(t){let r=t?.alpha||1;if(r>1||r<0)throw new Error(`Alpha value ${r} is suppoed to be in range [0 - 1].`)}function tRt(t,r){return je(this,null,function*(){let n=J(t,"img","toPixels");if(!(t instanceof tn)){let c=n;n=rt(c,"int32"),c.dispose()}FRe(n);let[o,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],a=yield n.data(),l=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*o*4);for(let c=0;c<o*i;++c){let f=[0,0,0,255];for(let p=0;p<s;p++){let h=a[c*s+p];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(f[0]=h*l,f[1]=h*l,f[2]=h*l):f[p]=h*l}let d=c*4;u[d+0]=Math.round(f[0]),u[d+1]=Math.round(f[1]),u[d+2]=Math.round(f[2]),u[d+3]=Math.round(f[3])}if(r!=null){NRe||wC(rI,ue.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),NRe=!0),r.width=i,r.height=o;let c=r.getContext("2d"),f=new ImageData(u,i,o);c.putImageData(f,0,0)}return n!==t&&n.dispose(),u})}function rRt(t,r,n){let o=J(t,"img","draw");if(!(t instanceof tn)){let a=o;o=rt(a,"int32"),a.dispose()}FRe(o),eRt(n?.imageOptions);let i={image:o},s={canvas:r,options:n};ue.runKernel(rI,i,s)}var QC,NRe,nRt,ORe=N(()=>{"use strict";ze();ba();Ee();c3();Je();Le();pn();Ne();ase();NRe=!1;nRt=se({fromPixels_:MRe})});var Ose={};fn(Ose,{prepareAndValidate:()=>RRe});function RRe(t,r){let n=t.shape.length,o=r.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(o<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${o}.`);if(r.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${r.dtype}.`);if(r.shape[o-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${r.shape[o-1]} vs. ${n}`);if(on(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let i=r.shape,s=i[i.length-1],a=1;for(let d=0;d<i.length-1;++d)a*=i[d];let l=t.shape,u=i.slice();u.pop();let c=1;for(let d=s;d<n;++d)c*=l[d],u.push(l[d]);let f=[...Eg(t.shape).map(d=>d/c),1].slice(0,s);return[u,a,c,f]}var Rse=N(()=>{"use strict";Ze()});var Rs={};fn(Rs,{assertParamsValid:()=>iRt,computeFlatOffset:()=>cRt,computeOutShape:()=>aRt,getNormalizedAxes:()=>lRt,isSliceContinous:()=>uRt,maskToAxes:()=>sRt,parseSliceParams:()=>Lse,sliceInfo:()=>fRt,startForAxis:()=>VRe,startIndicesWithElidedDims:()=>$Re,stopForAxis:()=>GRe,stopIndicesWithElidedDims:()=>zRe,stridesForAxis:()=>URe,stridesWithElidedDims:()=>LRe});function iRt(t,r,n){let o=t.shape.length;pe(o===r.length,()=>`Error in slice${o}D: Length of begin ${r} must match the rank of the array (${o}).`),pe(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must match the rank of the array (${o}).`);for(let i=0;i<o;++i)pe(r[i]+n[i]<=t.shape[i],()=>`Error in slice${o}D: begin[${i}] + size[${i}] (${r[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function sRt(t){let r=[],n=0;for(;t>0;)t&1&&r.push(n),t/=2,n++;return r}function aRt(t,r,n){let o=[];for(let i=0;i<t.length;i++)o[i]=Math.ceil((r[i]-t[i])/n[i]);return o}function LRe(t,r,n,o){let i=[...t];for(let s=i.length;s<o.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[r]=1:(i.splice(r,0,1),i.pop());return i}function jRe(t,r,n){return n<=t?n:n-(r-1)}function BRe(t,r){let n=[];for(let o=0;o<t;o++)n.push(r+o);return n}function lRt(t,r,n,o,i,s,a,l,u){let c=t.length,f=new Array(c),d=new Array(c),p=new Array(c);if(r.length&&n>0){let h=r[0],m=n+1;f=$Re(a,h,m,o,t),d=zRe(l,h,m,i,t),p=LRe(s,h,m,t)}else for(let h=0;h<c;h++)f[h]=VRe(a,o,s,t,h,u),d[h]=GRe(l,i,s,t,h,u),p[h]=URe(s,h,u);return{begin:f,end:d,strides:p}}function $Re(t,r,n,o,i){let s=[...i],a=BRe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=0;else{let u=jRe(r,n,l),c=o[u];t&1<<u&&(c=0),s[l]=c}return s}function zRe(t,r,n,o,i){let s=[...i],a=BRe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=Number.MAX_SAFE_INTEGER;else{let u=jRe(r,n,l),c=o[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),s[l]=c}for(let l=0;l<s.length;l++){let u=i[l];s[l]<0&&(s[l]+=u),s[l]=Xk(0,s[l],i[l])}return s}function URe(t,r,n){let o=t[r];return(n&1<<r||o==null)&&(o=1),o}function VRe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),a=Xk(0,a,u-1),a}function GRe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),l>0?a=Xk(0,a,u):a=Xk(-1,a,u-1),a}function uRt(t,r,n){let o=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){o=i;break}for(let i=o+1;i<n.length;i++)if(r[i]>0||n[i]!==t[i])return!1;return!0}function cRt(t,r){let n=t.length>0?t[t.length-1]:1;for(let o=0;o<t.length-1;o++)n+=t[o]*r[o];return n}function Lse(t,r,n){let o,i=t.shape.length;typeof r=="number"?o=[r,...new Array(i-1).fill(0)]:r.length<i?o=r.concat(new Array(i-r.length).fill(0)):o=r.slice(),o.forEach(a=>{pe(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,l)=>a>=0?a:(pe(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${l}.`),t.shape[l]-o[l])),[o,s]}function fRt(t,r,n,o,i,s,a,l,u){let c;if(o==null?(c=new Array(r.length),c.fill(1)):c=o,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:r.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};for(let v=0;v<d.dims;v++)f&&1<<v&l&&d.numAddAxisAfterEllipsis++,1<<v&a&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};dRt(d,p);let h=!0,m=!0,g=!0,y=[],b=[];for(let v=0;v<t.length;++v){if(p.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);let w=!!(p.shrinkAxisMask&1<<v),_=t[v];if(_===-1){y.push(w?1:-1);continue}let S=[p.beginMask&1<<v,p.endMask&1<<v],C=[p.strides[v]>0?0:-1,p.strides[v]>0?_:_-1];if(w&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[v]===1;let E=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(w){let F=p.begin[v]<0?_+p.begin[v]:p.begin[v];if(p.begin[v]=F,p.end[v]=p.begin[v]+1,F<0||F>=_)throw Error(`slice index ${p.begin[v]} of dimension ${v} out of bounds.`)}else p.begin[v]=PRe(p.begin[v],0,p.strides[v],_,S,C),p.end[v]=PRe(p.end[v],1,p.strides[v],_,S,C);let k=p.strides[v]===1&&p.begin[v]===0&&p.end[v]===_;h=h&&k,m=m&&(v===0&&p.strides[v]===1||k)}else h=h&&p.strides[v]===1&&E,m=m&&(v===0&&p.strides[v]===1||E);let T,I=!1;if(p.beginValid&&p.endValid?(T=p.end[v]-p.begin[v],I=!0):w?(T=1,I=!0):E&&_>=0&&(p.strides[v]<0?T=-_:T=_,I=!0),I){let k;T===0||T<0!=p.strides[v]<0?k=0:k=Math.trunc(T/p.strides[v])+(T%p.strides[v]!==0?1:0),y.push(k)}else y.push(-1)}for(let v=0;v<p.finalShapeGatherIndices.length;++v){let w=p.finalShapeGatherIndices[v];w>=0?b.push(y[w]):w===Pse&&b.push(1)}return{finalShapeSparse:b.filter((v,w)=>p.finalShapeGatherIndices[w]!==Pse),finalShape:b,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function dRt(t,r){r.beginMask=0,r.endMask=0,r.shrinkAxisMask=0;let n=0;r.beginValid=t.begin!=null,r.endValid=t.end!=null,r.begin=new Array(r.dims),r.end=new Array(r.dims),r.strides=new Array(r.dims),r.finalShapeGatherIndices=[],r.finalShapeGatherIndicesSparse=[],r.inputShapeGatherIndicesSparse=new Array(r.dims);for(let o=0;o<t.dims;o++)if(1<<o&t.ellipsisMask){let i=Math.min(r.dims-(t.dims-o)+1+t.numAddAxisAfterEllipsis,r.dims);for(;n<i;n++)r.begin[n]=0,r.end[n]=0,r.strides[n]=1,r.beginMask|=1<<n,r.endMask|=1<<n,r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(-1),r.inputShapeGatherIndicesSparse[n]=o}else if(1<<o&t.newAxisMask)r.finalShapeGatherIndices.push(Pse),r.finalShapeGatherIndicesSparse.push(-1);else{if(n===r.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${r.dims} dims, ${r.begin.length}.`);t.begin!=null&&(r.begin[n]=t.begin[o]),t.end!=null&&(r.end[n]=t.end[o]),r.strides[n]=t.strides[o],t.beginMask&1<<o&&(r.beginMask|=1<<n),t.endMask&1<<o&&(r.endMask|=1<<n),t.shrinkAxisMask&1<<o?(r.finalShapeGatherIndices.push(oRt),r.finalShapeGatherIndicesSparse.push(-1),r.shrinkAxisMask|=1<<n):(r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(o)),r.inputShapeGatherIndicesSparse[n]=o,n++}}function PRe(t,r,n,o,i,s){if(i[r])return n>0?s[r]:s[r+1&1];{let a=t<0?o+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}var Pse,oRt,S7=N(()=>{"use strict";Ze();Pse=-2,oRt=-1});var jse,WRe=N(()=>{"use strict";jse="4.19.0"});var nD,Bse=N(()=>{"use strict";p7();h7();m7();g7();y7();b7();X3();nD=class{static sgd(r){return new F0(r)}static momentum(r,n,o=!1){return new Ew(r,n,o)}static rmsprop(r,n=.9,o=0,i=null,s=!1){return new Tw(r,n,o,i,s)}static adam(r=.001,n=.9,o=.999,i=null){return new Sw(r,n,o,i)}static adadelta(r=.001,n=.95,o=null){return new ww(r,n,o)}static adamax(r=.002,n=.9,o=.999,i=null,s=0){return new Cw(r,n,o,i,s)}static adagrad(r,n=.1){return new _w(r,n)}}});var fp,qRe=N(()=>{"use strict";Bse();fp=nD});function oD(){return new Promise(t=>pRt(()=>t()))}var pRt,HRe=N(()=>{"use strict";pRt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t()});function hRt(t,r){let n=t[0].length;t.forEach((i,s)=>{pe(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),pe(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let o=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)pe(a===r||i[a]===o[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${o}) along the non-concatenated axis ${s}.`)})}function mRt(t,r){let n=t[0].slice();for(let o=1;o<t.length;o++)n[r]+=t[o][r];return n}var YRe=N(()=>{"use strict";Ze();});var XRe=N(()=>{"use strict";});function gRt(t,r,n){let o=new Array;if(n==null&&r==null)return o;if(r==null)for(;o.length<t+n.length;)o.push(-1);else o=r.slice();if(n==null)return o;if(t+n.length!==o.length)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${o.length}`);for(let i=1;i<n.length;++i){let s=n[i],a=o[o.length-n.length+i],l=o[a];if(s>=0)if(l>=0){if(l!==s)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${l}`)}else o[a]=s}return o}function yRt(t){let r={FIRST_DIM_SIZE:Mx.FIRST_DIM_SIZE,VALUE_ROWIDS:Mx.VALUE_ROWIDS,ROW_LENGTHS:Mx.ROW_LENGTHS,ROW_SPLITS:Mx.ROW_SPLITS,ROW_LIMITS:Mx.ROW_LIMITS,ROW_STARTS:Mx.ROW_STARTS},n=[];for(let o of t)if(o in r)n.push(r[o]);else break;return n}function bRt(t){return t.length===0?0:t[0]===Mx.FIRST_DIM_SIZE?t.length-1:t.length}function xRt(t,r){if(t==null||r==null)return;let n=t.length,o=r.length;if(n>=o)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${r}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${o})`);for(let i=0;i<Math.min(n,o-1);++i){let s=t[i],a=r[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${r} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}var Mx,KRe=N(()=>{"use strict";Mx=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(Mx||{})});function vRt(t){return t<=C7?t:Zk(t,Math.floor(Math.sqrt(t)))}var C7,$se=N(()=>{"use strict";Ze();C7=30});function wRt(t,r,n){let o=n*(typeof t=="number"?t:t[0]),i=r*(typeof t=="number"?t:t[1]);return[o,i]}var ZRe=N(()=>{"use strict";});function _Rt(t,r,n,o=!0){let i=[];if(o)i=i.concat(r.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);let s=r.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/r[a],r[a]]);i=i.concat(t.slice(s+1))}return i}function SRt(t,r,n=!0){let o=[];if(n){o.push(r);for(let i=r+1;i<t;++i)i<=2*r?(o.push(i),o.push(i-(r+1))):o.push(i)}else{let i=[],s=[];for(let a=1;a<t;++a)a>=r*2+1||a%2===1?s.push(a):i.push(a);o.push(...i),o.push(0),o.push(...s)}return o}function CRt(t,r,n,o=!0){let i=[];o?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=r.length?o?i.push(r[s-1]*t[s]):i.push(t[s]/r[s-1]):i.push(t[s]);return i}function ERt(t,r){let n=[0];for(let o=0;o<r;++o)n.push(t[o][0]);return n}function TRt(t,r,n){let o=t.slice(0,1);for(let i=0;i<n;++i)o.push(t[i+1]-r[i][0]-r[i][1]);return o}var QRe=N(()=>{"use strict";});var zse,Use,Vse=N(()=>{"use strict";zse=1.7580993408473768,Use=1.0507009873554805});var ARt,kRt,IRt,DRt,NRt,MRt,JRe=N(()=>{"use strict";ARt=.3275911,kRt=.254829592,IRt=-.284496736,DRt=1.421413741,NRt=-1.453152027,MRt=1.061405429});function FRt(t,r){if(t.length!==r.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${r.length}.`);let n=new Float32Array(t.length*2);for(let o=0;o<n.length;o+=2)n[o]=t[o/2],n[o+1]=r[o/2];return n}function ORt(t){let r=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=t[o],n[o/2]=t[o+1];return{real:r,imag:n}}function RRt(t){let r=Math.ceil(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function PRt(t){let r=Math.floor(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function LRt(t,r){let n=t[r*2],o=t[r*2+1];return{real:n,imag:o}}function jRt(t,r,n,o){t[o*2]=r,t[o*2+1]=n}function BRt(t,r){let n=new Float32Array(t/2),o=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){let s=(r?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),o[i]=Math.sin(s)}return{real:n,imag:o}}function $Rt(t,r,n){let o=(n?2:-2)*Math.PI*(t/r),i=Math.cos(o),s=Math.sin(o);return{real:i,imag:s}}var e3e=N(()=>{"use strict";});function URt(t,r){t=t.replace(/\s/g,"");let n=(t.length-t.replace(zRt,"").length)/Gse.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Gse}").`);let[o,i]=t.split(Gse);pe(o.indexOf(r3e)===-1,()=>`The ellipsis notation ("${r3e}") is not supported yet.`);let s=o.split(t3e),a=s.length;if(r!==a)throw new Error(`Expected ${a} input tensors, received ${r}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let l=[];for(let p=0;p<i.length;++p){let h=i[p];if(!s.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);l.indexOf(h)===-1&&l.push(h)}for(let p=0;p<o.length;++p){let h=o[p];l.indexOf(h)===-1&&h!==t3e&&l.push(h)}let u=new Array(s.length);for(let p=0;p<a;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let h=0;h<s[p].length;++h)u[p].push(l.indexOf(s[p][h]))}let c=l.length,f=i.length,d=[];for(let p=f;p<c;++p)d.push(p);return{allDims:l,summedDims:d,idDims:u}}function VRt(t,r){let n=new Array(t);n.fill(-1);for(let i=0;i<r.length;++i)n[r[i]]=i;let o=[];for(let i=0;i<t;++i)n[i]===-1&&o.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:o}}function GRt(t,r,n){let o=new Array(t);for(let i=0;i<n.length;++i){let s=n[i].shape;for(let a=0;a<r[i].length;++a)o[r[i][a]]===void 0?o[r[i][a]]=s[a]:pe(o[r[i][a]]===s[a],()=>`Expected dimension ${o[r[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function WRt(t,r){let n=t,o=[],i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)o.push([]);let s=[];for(let a=0;a<n.length;++a){let l=n[a],u=HRt(r,l);for(let c of u)s.indexOf(c)===-1&&(o[a].push(c),s.push(c))}return{path:n,steps:o}}function qRt(t){return t.every((r,n)=>r===n)}function HRt(t,r){let n=[];for(let o=0;o<t.length;++o)(t[o].length===0||t[o].indexOf(r)!==-1||r===-1)&&n.push(o);return n}var Gse,zRt,t3e,r3e,n3e=N(()=>{"use strict";Xs();Gse="->",zRt=/->/g,t3e=",",r3e="..."});function YRt(t,r,n=0){let o=[];if(typeof r=="number")pe(t.shape[n]%r===0,()=>"Number of splits must evenly divide the axis."),o=new Array(r).fill(t.shape[n]/r);else{let i=r.reduce((a,l)=>(l===-1&&(a+=1),a),0);pe(i<=1,()=>"There should be only one negative value in split array.");let s=r.indexOf(-1);if(s!==-1){let a=r.reduce((l,u)=>u>0?l+u:l);r[s]=t.shape[n]-a}pe(t.shape[n]===r.reduce((a,l)=>a+l),()=>"The sum of sizes must match the size of the axis dimension."),o=r}return o}var o3e=N(()=>{"use strict";Ze()});function XRt(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function KRt(t,r){return`indices(${t}, 0) is invalid: ${r} < 0`}function ZRt(t,r,n){return`indices(${t}, 0) is invalid: ${r} >= ${n}`}var i3e=N(()=>{"use strict";});function QRt(t,r){return`only one output dimension may be -1, not both ${t} and ${r}`}function JRt(t,r){return`size ${t} must be non-negative, not ${r}`}function e3t(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function t3t(t,r){let n=on(t),o=on(r);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${o}. inputShape=${t} outputShape= ${r}`}function r3t(t,r){let n=on(t),o=on(r);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${o}. inputShape=${t} outputShape=${r}`}var s3e=N(()=>{"use strict";Ze();});function n3t(){return"segment ids must be >= 0"}function o3t(){return"segment ids are not increasing"}function i3t(t,r){return`Segment id ${t} out of range [0, ${r}), possibly because segmentIds input is not sorted.`}function s3t(t,r,n){return`Bad: indices[${t}] == ${r} out of range [0, ${n})`}var a3e=N(()=>{"use strict";});var Wse={};fn(Wse,{collectGatherOpShapeInfo:()=>u3t,computeOutShape:()=>l3t,segOpComputeOptimalWindowSize:()=>a3t});function a3t(t,r){let n=!1,o;for(t<=C7?(o=t,n=!0):o=Zk(t,Math.floor(Math.sqrt(t)));!n;)o>r||o===t?n=!0:o=Zk(t,o+1);return o}function l3t(t,r,n){let o=[],i=t.length;for(let s=0;s<i;s++)s!==r?o.push(t[s]):o.push(n);return o}function u3t(t,r,n,o){let i=r.shape.length,s=t.shape.length;if(o!==0&&(o<-i||o>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${o}`);if(o<0&&(o+=i),o>s)throw new Error(`batchDims (${o}) must be less than rank(x) (
    ${s}).`);if(n<o)throw new Error(`batchDims (${o}) must be less than or equal to axis (${n}).`);for(let d=0;d<o;++d)if(t.shape[d]!==r.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${r.shape[d]}.`);let a=t.shape[n],l=[],u=1,c=1,f=1;for(let d=0;d<o;++d)l.push(t.shape[d]),u*=t.shape[d];for(let d=o;d<n;d++)l.push(t.shape[d]),c*=t.shape[d];for(let d=o;d<i;d++)l.push(r.shape[d]);for(let d=n+1;d<s;d++)l.push(t.shape[d]),f*=t.shape[d];return{batchSize:u,sliceSize:f,outerSize:c,dimSize:a,outputShape:l}}var l3e=N(()=>{"use strict";Ze();$se();});var ce={};fn(ce,{ERF_A1:()=>kRt,ERF_A2:()=>IRt,ERF_A3:()=>DRt,ERF_A4:()=>NRt,ERF_A5:()=>MRt,ERF_P:()=>ARt,PARALLELIZE_THRESHOLD:()=>C7,RowPartitionType:()=>Mx,SELU_SCALE:()=>Use,SELU_SCALEALPHA:()=>zse,applyActivation:()=>XC,assertAndGetBroadcastShape:()=>jr,assertAxesAreInnerMostDims:()=>KDt,assertParamsConsistent:()=>hRt,assignToTypedArray:()=>jRt,axesAreInnerMostDims:()=>Iie,calculateShapes:()=>_Fe,checkEinsumDimSizes:()=>GRt,checkPadOnDimRoundingMode:()=>go,combineLocations:()=>RNe,combineRaggedTensorToTensorShapes:()=>gRt,complexWithEvenIndex:()=>RRt,complexWithOddIndex:()=>PRt,computeConv2DInfo:()=>OC,computeConv3DInfo:()=>sNe,computeDefaultPad:()=>yie,computeDilation2DInfo:()=>XIt,computeOptimalWindowSize:()=>vRt,computeOutAndReduceShapes:()=>Die,computeOutShape:()=>mRt,computePool2DInfo:()=>gie,computePool3DInfo:()=>KIt,convertConv2DDataFormat:()=>aNe,decodeEinsumEquation:()=>URt,eitherStridesOrDilationsAreOne:()=>va,expandShapeToKeepDim:()=>lp,exponent:()=>$Rt,exponents:()=>BRt,fromStringArrayToUint8:()=>f3t,fromUint8ToStringArray:()=>c3t,getAxesPermutation:()=>Nie,getBroadcastDims:()=>NNe,getComplexWithIndex:()=>LRt,getEinsumComputePath:()=>WRt,getEinsumPermutation:()=>VRt,getFusedBiasGradient:()=>YC,getFusedDyActivation:()=>HC,getImageCenter:()=>wRt,getInnerMostAxes:()=>ZDt,getPermuted:()=>SRt,getRaggedRank:()=>bRt,getReductionAxes:()=>oo,getReshaped:()=>_Rt,getReshapedPermuted:()=>CRt,getRowPartitionTypesHelper:()=>yRt,getSliceBeginCoords:()=>ERt,getSliceSize:()=>TRt,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>XRt,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>KRt,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>ZRt,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>e3t,getSparseReshapeInputOutputMismatchErrorMessage:()=>r3t,getSparseReshapeInputOutputMultipleErrorMessage:()=>t3t,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>QRt,getSparseReshapeNegativeOutputDimErrorMessage:()=>JRt,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>s3t,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>n3t,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>o3t,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>i3t,getUndoAxesPermutation:()=>T3,isIdentityPermutation:()=>qRt,log:()=>kkt,mergeRealAndImagArrays:()=>FRt,prepareAndValidate:()=>RRe,prepareSplitSize:()=>YRt,segment_util:()=>Wse,shouldFuse:()=>KC,slice_util:()=>Rs,splitRealAndImagArrays:()=>ORt,stridesOrDilationsArePositive:()=>w0,tupleValuesAreOne:()=>ud,upcastType:()=>Gi,validateDefaultValueShape:()=>xRt,validateInput:()=>ZI,validateUpdateShape:()=>lse,warn:()=>b0});function c3t(t){try{return t.map(r=>uI(r))}catch(r){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${r}`)}}function f3t(t){return t.map(r=>q1(r))}var u3e=N(()=>{"use strict";Ze();Oh();ko();YRe();Fs();rD();XRe();KRe();$se();S7();fI();ZRe();QRe();Rse();G3();Vse();rD();JRe();f8();e3e();n3e();o3e();i3e();s3e();a3e();l3e();});var Ca={};fn(Ca,{nonMaxSuppressionV3Impl:()=>s7,nonMaxSuppressionV4Impl:()=>a7,nonMaxSuppressionV5Impl:()=>l7,whereImpl:()=>JU});var c3e=N(()=>{"use strict";H3();fse();});var qse=N(()=>{"use strict";ARe();DRe();ko();ORe();Rse();G3();S7();d7();ri();GMe();Ze();WRe();p7();h7();m7();g7();y7();vw();Bse();b7();X3();Je();fI();Fr();jh();qRe();Wc();c3();Tx();ba();HRe();u3e();Woe();c3e();xoe();Ee();});var Mo={};fn(Mo,{Abs:()=>Cb,Acos:()=>Tg,Acosh:()=>Ag,AdadeltaOptimizer:()=>ww,AdagradOptimizer:()=>_w,AdamOptimizer:()=>Sw,AdamaxOptimizer:()=>Cw,Add:()=>np,AddN:()=>Eb,All:()=>yS,Any:()=>bS,ArgMax:()=>Tb,ArgMin:()=>Ab,Asin:()=>kg,Asinh:()=>Ig,Atan:()=>Dg,Atan2:()=>Mg,Atanh:()=>Ng,AvgPool:()=>kb,AvgPool3D:()=>Ib,AvgPool3DGrad:()=>vS,AvgPoolGrad:()=>xS,BatchMatMul:()=>Db,BatchToSpaceND:()=>Nb,Bincount:()=>wS,BitwiseAnd:()=>M1,BroadcastArgs:()=>_S,BroadcastTo:()=>koe,Cast:()=>Ch,Ceil:()=>Fg,ClipByValue:()=>Og,Complex:()=>SS,ComplexAbs:()=>Mb,Concat:()=>Fb,Conv2D:()=>Ob,Conv2DBackpropFilter:()=>CS,Conv2DBackpropInput:()=>Rb,Conv3D:()=>Pb,Conv3DBackpropFilterV2:()=>ES,Conv3DBackpropInputV2:()=>TS,Cos:()=>Rg,Cosh:()=>Pg,CropAndResize:()=>kS,Cumprod:()=>AS,Cumsum:()=>Lb,DataStorage:()=>D1,DenseBincount:()=>IS,DepthToSpace:()=>DS,DepthwiseConv2dNative:()=>jb,DepthwiseConv2dNativeBackpropFilter:()=>NS,DepthwiseConv2dNativeBackpropInput:()=>MS,Diag:()=>FS,Dilation2D:()=>Bb,Dilation2DBackpropFilter:()=>tI,Dilation2DBackpropInput:()=>eI,Draw:()=>rI,ENV:()=>u8,Einsum:()=>OS,Elu:()=>jg,EluGrad:()=>RS,Environment:()=>Jk,Equal:()=>F1,Erf:()=>Bg,Exp:()=>$g,ExpandDims:()=>$b,Expm1:()=>zg,FFT:()=>PS,Fill:()=>LS,FlipLeftRight:()=>jS,Floor:()=>Ug,FloorDiv:()=>Vg,FromPixels:()=>nI,FusedBatchNorm:()=>zb,FusedConv2D:()=>V1,FusedDepthwiseConv2D:()=>G1,GatherNd:()=>BS,GatherV2:()=>Ub,Greater:()=>O1,GreaterEqual:()=>Gg,IFFT:()=>$S,Identity:()=>Eh,Imag:()=>zS,IsFinite:()=>Wg,IsInf:()=>qg,IsNan:()=>Hg,KernelBackend:()=>Sg,LRN:()=>Gb,LRNGrad:()=>VS,LeakyRelu:()=>Vb,Less:()=>R1,LessEqual:()=>P1,LinSpace:()=>US,Log:()=>Yg,Log1p:()=>Xg,LogSoftmax:()=>Ioe,LogicalAnd:()=>L1,LogicalNot:()=>j1,LogicalOr:()=>B1,LogicalXor:()=>Skt,LowerBound:()=>Ckt,MatrixBandPart:()=>Ekt,Max:()=>Wb,MaxPool:()=>qb,MaxPool3D:()=>Hb,MaxPool3DGrad:()=>WS,MaxPoolGrad:()=>GS,MaxPoolWithArgmax:()=>qS,Maximum:()=>Kg,Mean:()=>Yb,Min:()=>Xb,Minimum:()=>Zg,MirrorPad:()=>Kb,Mod:()=>Qg,MomentumOptimizer:()=>Ew,Multinomial:()=>HS,Multiply:()=>Jg,Neg:()=>Zb,NonMaxSuppressionV3:()=>YS,NonMaxSuppressionV4:()=>XS,NonMaxSuppressionV5:()=>KS,NotEqual:()=>$1,OP_SCOPE_SUFFIX:()=>qoe,OneHot:()=>Jb,OnesLike:()=>Qb,Optimizer:()=>Sa,OptimizerConstructors:()=>nD,Pack:()=>ex,PadV2:()=>tx,Pool:()=>Tkt,Pow:()=>e0,Prelu:()=>rx,Prod:()=>nx,RMSPropOptimizer:()=>Tw,RaggedGather:()=>ZS,RaggedRange:()=>QS,RaggedTensorToTensor:()=>JS,Range:()=>eC,Rank:()=>Boe,Real:()=>tC,RealDiv:()=>Lg,Reciprocal:()=>t0,Reduction:()=>Ii,Relu:()=>r0,Relu6:()=>n0,Reshape:()=>ox,ResizeBilinear:()=>sx,ResizeBilinearGrad:()=>nC,ResizeNearestNeighbor:()=>ix,ResizeNearestNeighborGrad:()=>rC,Reverse:()=>ax,RotateWithOffset:()=>vC,Round:()=>o0,Rsqrt:()=>i0,SGDOptimizer:()=>F0,ScatterNd:()=>oC,SearchSorted:()=>sC,Select:()=>lx,Selu:()=>s0,Sigmoid:()=>c0,Sign:()=>u0,Sin:()=>a0,Sinh:()=>l0,Slice:()=>ux,Softmax:()=>px,Softplus:()=>f0,SpaceToBatchND:()=>fx,SparseFillEmptyRows:()=>aC,SparseReshape:()=>lC,SparseSegmentMean:()=>uC,SparseSegmentSum:()=>cC,SparseToDense:()=>fC,SplitV:()=>dx,Sqrt:()=>d0,Square:()=>dC,SquaredDifference:()=>p0,StaticRegexReplace:()=>z1,Step:()=>y0,StridedSlice:()=>pC,StringNGrams:()=>hC,StringSplit:()=>mC,StringToHashBucketFast:()=>gC,Sub:()=>h0,Sum:()=>cx,Tan:()=>m0,Tanh:()=>g0,Tensor:()=>tn,TensorBuffer:()=>Tn,TensorScatterUpdate:()=>iC,Tile:()=>Th,TopK:()=>yC,Transform:()=>bC,Transpose:()=>Ah,Unique:()=>xC,Unpack:()=>hx,UnsortedSegmentSum:()=>mx,UpperBound:()=>Akt,Variable:()=>x0,ZerosLike:()=>gx,_FusedMatMul:()=>U1,abs:()=>Ao,acos:()=>I8,acosh:()=>D8,add:()=>Ke,addN:()=>eNe,all:()=>vI,any:()=>FC,argMax:()=>qc,argMin:()=>N8,asin:()=>M8,asinh:()=>F8,atan:()=>O8,atan2:()=>R8,atanh:()=>P8,avgPool:()=>J1,avgPool3d:()=>j8,backend:()=>b3,backend_util:()=>ce,basicLSTMCell:()=>uNe,batchNorm:()=>_0,batchNorm2d:()=>B8,batchNorm3d:()=>$8,batchNorm4d:()=>z8,batchToSpaceND:()=>ew,bincount:()=>U8,bitwiseAnd:()=>gNe,booleanMaskAsync:()=>xFt,broadcastArgs:()=>bNe,broadcastTo:()=>S0,broadcast_util:()=>Qu,browser:()=>_7,buffer:()=>er,cast:()=>rt,ceil:()=>G8,clipByValue:()=>Zs,clone:()=>Xu,complex:()=>Yu,concat:()=>On,concat1d:()=>W8,concat2d:()=>q8,concat3d:()=>H8,concat4d:()=>Y8,conv1d:()=>EI,conv2d:()=>Zu,conv2dTranspose:()=>AI,conv3d:()=>K8,conv3dTranspose:()=>Q8,copyRegisteredKernels:()=>Nkt,cos:()=>tw,cosh:()=>kI,cosineWindow:()=>W3,cumprod:()=>PC,cumsum:()=>II,customGrad:()=>Dl,denseBincount:()=>S3,deprecationWarn:()=>_De,depthToSpace:()=>rU,depthwiseConv2d:()=>C0,device_util:()=>yx,diag:()=>INe,dilation2d:()=>nU,disableDeprecationWarnings:()=>nIt,dispose:()=>Cr,disposeVariables:()=>oIt,div:()=>Tt,divNoNan:()=>oU,dot:()=>iU,dropout:()=>pse,einsum:()=>rw,elu:()=>E0,enableDebugMode:()=>rIt,enableProdMode:()=>tIt,enclosingPowerOfTwo:()=>hse,engine:()=>ld,ensureShape:()=>MNe,env:()=>Me,equal:()=>Il,erf:()=>DI,euclideanNorm:()=>lU,exp:()=>xi,expandDims:()=>ki,expm1:()=>uU,eye:()=>LC,fft:()=>mw,fill:()=>ap,findBackend:()=>lIt,findBackendFactory:()=>uIt,floor:()=>A0,floorDiv:()=>xI,fused:()=>xw,gather:()=>k0,gatherND:()=>IFt,gather_util:()=>Ose,getBackend:()=>Xoe,getGradient:()=>d8,getKernel:()=>wC,getKernelsForBackend:()=>u3,grad:()=>VNe,grads:()=>GNe,greater:()=>ni,greaterEqual:()=>au,ifft:()=>Ix,imag:()=>ow,image:()=>ec,inTopKAsync:()=>MFt,io:()=>hd,irfft:()=>YI,isFinite:()=>fU,isInf:()=>dU,isNaN:()=>pU,keep:()=>Ms,kernel_impls:()=>Ca,leakyRelu:()=>iw,less:()=>Ex,lessEqual:()=>Hc,linalg:()=>_se,linspace:()=>zNe,localResponseNormalization:()=>mU,log:()=>Js,log1p:()=>aw,logSigmoid:()=>yU,logSoftmax:()=>RI,logSumExp:()=>lw,logicalAnd:()=>Ha,logicalNot:()=>uw,logicalOr:()=>PI,logicalXor:()=>vU,losses:()=>OOt,lowerBound:()=>XNe,matMul:()=>Vr,math:()=>Fse,max:()=>Qs,maxPool:()=>cw,maxPool3d:()=>CU,maxPoolWithArgmax:()=>QNe,maximum:()=>Ju,mean:()=>bo,memory:()=>pI,meshgrid:()=>eMe,min:()=>Sx,minimum:()=>pd,mirrorPad:()=>EU,mod:()=>TU,moments:()=>zC,movingAverage:()=>_Ft,mul:()=>we,multiRNNCell:()=>nMe,multinomial:()=>iMe,neg:()=>Zr,nextFrame:()=>oD,norm:()=>Cx,notEqual:()=>Lh,oneHot:()=>D0,ones:()=>Wi,onesLike:()=>Os,op:()=>se,outerProduct:()=>lMe,pad:()=>lu,pad1d:()=>cMe,pad2d:()=>dMe,pad3d:()=>hMe,pad4d:()=>gMe,pool:()=>IU,pow:()=>qa,prelu:()=>pw,print:()=>A8,prod:()=>NU,profile:()=>iIt,raggedGather:()=>bMe,raggedRange:()=>vMe,raggedTensorToTensor:()=>_Me,rand:()=>CMe,randomGamma:()=>WMe,randomNormal:()=>GC,randomStandardNormal:()=>HMe,randomUniform:()=>Yc,randomUniformInt:()=>XMe,range:()=>N0,ready:()=>Yoe,real:()=>Ax,reciprocal:()=>jU,registerBackend:()=>y3,registerGradient:()=>Doe,registerKernel:()=>iI,relu:()=>_a,relu6:()=>BI,removeBackend:()=>aIt,reshape:()=>Se,reverse:()=>bs,reverse1d:()=>QMe,reverse2d:()=>eFe,reverse3d:()=>rFe,reverse4d:()=>oFe,rfft:()=>gw,round:()=>$I,rsqrt:()=>zI,scalar:()=>Ot,scatterND:()=>CFt,scatter_util:()=>V3,searchSorted:()=>F3,selu:()=>UI,separableConv2d:()=>VI,serialization:()=>tt,setBackend:()=>SDe,setPlatform:()=>cIt,setdiff1dAsync:()=>sFe,sigmoid:()=>kl,sign:()=>$U,signal:()=>FOt,sin:()=>GI,sinh:()=>WI,slice:()=>zr,slice1d:()=>qI,slice2d:()=>z3,slice3d:()=>HI,slice4d:()=>WC,slice_util:()=>Rs,softmax:()=>hw,softplus:()=>Ph,spaceToBatchND:()=>dw,sparse:()=>ROt,sparseToDense:()=>AFt,spectral:()=>MOt,split:()=>xs,sqrt:()=>Zn,square:()=>qr,squaredDifference:()=>XI,squeeze:()=>Xc,stack:()=>ss,step:()=>up,stridedSlice:()=>WU,string:()=>POt,sub:()=>wt,sum:()=>It,sumOutType:()=>H1,tan:()=>qU,tanh:()=>Fh,tensor:()=>Ti,tensor1d:()=>oi,tensor2d:()=>Dx,tensor3d:()=>YU,tensor4d:()=>gFe,tensor5d:()=>bFe,tensor6d:()=>vFe,tensorScatterUpdate:()=>SFe,tensor_util:()=>v8,test_util:()=>Qie,tidy:()=>Pe,tile:()=>wa,time:()=>sIt,topk:()=>XU,train:()=>fp,transpose:()=>Gr,truncatedNormal:()=>QI,unique:()=>KU,unregisterGradient:()=>Dkt,unregisterKernel:()=>Ikt,unsortedSegmentSum:()=>JI,unstack:()=>Ya,upcastType:()=>Gi,upperBound:()=>TFe,util:()=>Y,valueAndGrad:()=>WNe,valueAndGrads:()=>qNe,variable:()=>QU,variableGrads:()=>N3,version_core:()=>jse,where:()=>yo,whereAsync:()=>e7,zeros:()=>xo,zerosLike:()=>ar});var re=N(()=>{"use strict";ZDe();dRe();qse();fRe()});var aLe=N(()=>{"use strict";Fr();Je();Ce().prototype.abs=function(){return this.throwIfDisposed(),Ao(this)}});var lLe=N(()=>{"use strict";Fr();Je();Ce().prototype.acos=function(){return this.throwIfDisposed(),I8(this)}});var uLe=N(()=>{"use strict";Fr();Je();Ce().prototype.acosh=function(){return this.throwIfDisposed(),D8(this)}});var cLe=N(()=>{"use strict";$o();Je();Ce().prototype.add=function(t){return this.throwIfDisposed(),Ke(this,t)}});var fLe=N(()=>{"use strict";cie();Je();Ce().prototype.all=function(t,r){return this.throwIfDisposed(),vI(this,t,r)}});var dLe=N(()=>{"use strict";fie();Je();Ce().prototype.any=function(t,r){return this.throwIfDisposed(),FC(this,t,r)}});var pLe=N(()=>{"use strict";die();Je();Ce().prototype.argMax=function(t){return this.throwIfDisposed(),qc(this,t)}});var hLe=N(()=>{"use strict";pie();Je();Ce().prototype.argMin=function(t){return this.throwIfDisposed(),N8(this,t)}});var mLe=N(()=>{"use strict";Yt();Je();Ze();Ce().prototype.asScalar=function(){return this.throwIfDisposed(),pe(this.size===1,()=>"The array must have only 1 element."),Se(this,[])}});var gLe=N(()=>{"use strict";Fr();Je();Ce().prototype.asType=function(t){return this.throwIfDisposed(),rt(this,t)}});var yLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as1D=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var bLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as2D=function(t,r){return this.throwIfDisposed(),Se(this,[t,r])}});var xLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as3D=function(t,r,n){return this.throwIfDisposed(),Se(this,[t,r,n])}});var vLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as4D=function(t,r,n,o){return this.throwIfDisposed(),Se(this,[t,r,n,o])}});var wLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as5D=function(t,r,n,o,i){return this.throwIfDisposed(),Se(this,[t,r,n,o,i])}});var _Le=N(()=>{"use strict";Fr();Je();Ce().prototype.asin=function(){return this.throwIfDisposed(),M8(this)}});var SLe=N(()=>{"use strict";Fr();Je();Ce().prototype.asinh=function(){return this.throwIfDisposed(),F8(this)}});var CLe=N(()=>{"use strict";Fr();Je();Ce().prototype.atan=function(){return this.throwIfDisposed(),O8(this)}});var ELe=N(()=>{"use strict";hie();Je();Ce().prototype.atan2=function(t){return this.throwIfDisposed(),R8(this,t)}});var TLe=N(()=>{"use strict";Fr();Je();Ce().prototype.atanh=function(){return this.throwIfDisposed(),P8(this)}});var ALe=N(()=>{"use strict";L8();Je();Ce().prototype.avgPool=function(t,r,n,o){return this.throwIfDisposed(),J1(this,t,r,n,o)}});var kLe=N(()=>{"use strict";_3();Je();Ce().prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),ew(this,t,r)}});var ILe=N(()=>{"use strict";SI();Je();Ce().prototype.batchNorm=function(t,r,n,o,i){return this.throwIfDisposed(),_0(this,t,r,n,o,i)}});var DLe=N(()=>{"use strict";V8();Je();Ce().prototype.broadcastTo=function(t){return this.throwIfDisposed(),S0(this,t)}});var NLe=N(()=>{"use strict";Fr();Je();Ce().prototype.cast=function(t){return this.throwIfDisposed(),rt(this,t)}});var MLe=N(()=>{"use strict";Fr();Je();Ce().prototype.ceil=function(){return this.throwIfDisposed(),G8(this)}});var FLe=N(()=>{"use strict";Fr();Je();Ce().prototype.clipByValue=function(t,r){return this.throwIfDisposed(),Zs(this,t,r)}});var OLe=N(()=>{"use strict";fd();Je();Ce().prototype.concat=function(t,r){return this.throwIfDisposed(),t instanceof tn&&(t=[t]),On([this,...t],r)}});var RLe=N(()=>{"use strict";vie();Je();Ce().prototype.conv1d=function(t,r,n,o,i,s){return this.throwIfDisposed(),EI(this,t,r,n,o,i,s)}});var PLe=N(()=>{"use strict";wie();Je();Ce().prototype.conv2dTranspose=function(t,r,n,o,i){return this.throwIfDisposed(),AI(this,t,r,n,o,i)}});var LLe=N(()=>{"use strict";RC();Je();Ce().prototype.conv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),Zu(this,t,r,n,o,i,s)}});var jLe=N(()=>{"use strict";Fr();Je();Ce().prototype.cos=function(){return this.throwIfDisposed(),tw(this)}});var BLe=N(()=>{"use strict";Fr();Je();Ce().prototype.cosh=function(){return this.throwIfDisposed(),kI(this)}});var $Le=N(()=>{"use strict";eU();Je();Ce().prototype.cumprod=function(t,r,n){return this.throwIfDisposed(),PC(this,t,r,n)}});var zLe=N(()=>{"use strict";tU();Je();Ce().prototype.cumsum=function(t,r,n){return this.throwIfDisposed(),II(this,t,r,n)}});var ULe=N(()=>{"use strict";Cie();Je();Ce().prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),rU(this,t,r)}});var VLe=N(()=>{"use strict";C3();Je();Ce().prototype.depthwiseConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),C0(this,t,r,n,o,i,s)}});var GLe=N(()=>{"use strict";Eie();Je();Ce().prototype.dilation2d=function(t,r,n,o,i){return this.throwIfDisposed(),nU(this,t,r,n,o,i)}});var WLe=N(()=>{"use strict";Tie();Je();Ce().prototype.divNoNan=function(t){return this.throwIfDisposed(),oU(this,t)}});var qLe=N(()=>{"use strict";Kn();Je();Ce().prototype.div=function(t){return this.throwIfDisposed(),Tt(this,t)}});var HLe=N(()=>{"use strict";Aie();Je();Ce().prototype.dot=function(t){return this.throwIfDisposed(),iU(this,t)}});var YLe=N(()=>{"use strict";sU();Je();Ce().prototype.elu=function(){return this.throwIfDisposed(),E0(this)}});var XLe=N(()=>{"use strict";E3();Je();Ce().prototype.equal=function(t){return this.throwIfDisposed(),Il(this,t)}});var KLe=N(()=>{"use strict";Fr();Je();Ce().prototype.erf=function(){return this.throwIfDisposed(),DI(this)}});var ZLe=N(()=>{"use strict";Fie();Je();Ce().prototype.euclideanNorm=function(t,r){return this.throwIfDisposed(),lU(this,t,r)}});var QLe=N(()=>{"use strict";Fr();Je();Ce().prototype.exp=function(){return this.throwIfDisposed(),xi(this)}});var JLe=N(()=>{"use strict";MI();Je();Ce().prototype.expandDims=function(t){return this.throwIfDisposed(),ki(this,t)}});var eje=N(()=>{"use strict";Fr();Je();Ce().prototype.expm1=function(){return this.throwIfDisposed(),uU(this)}});var tje=N(()=>{"use strict";Fr();Je();Ce().prototype.fft=function(){return this.throwIfDisposed(),mw(this)}});var rje=N(()=>{"use strict";Yt();Je();Ce().prototype.flatten=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var nje=N(()=>{"use strict";Fr();Je();Ce().prototype.floor=function(){return this.throwIfDisposed(),A0(this)}});var oje=N(()=>{"use strict";k8();Je();Ce().prototype.floorDiv=function(t){return this.throwIfDisposed(),xI(this,t)}});var ije=N(()=>{"use strict";k3();Je();Ce().prototype.gather=function(t,r,n){return this.throwIfDisposed(),k0(this,t,r,n)}});var sje=N(()=>{"use strict";jC();Je();Ce().prototype.greaterEqual=function(t){return this.throwIfDisposed(),au(this,t)}});var aje=N(()=>{"use strict";I0();Je();Ce().prototype.greater=function(t){return this.throwIfDisposed(),ni(this,t)}});var lje=N(()=>{"use strict";Fr();Je();Ce().prototype.ifft=function(){return this.throwIfDisposed(),Ix(this)}});var uje=N(()=>{"use strict";Fr();Je();Ce().prototype.irfft=function(){return this.throwIfDisposed(),YI(this)}});var cje=N(()=>{"use strict";Fr();Je();Ce().prototype.isFinite=function(){return this.throwIfDisposed(),fU(this)}});var fje=N(()=>{"use strict";Fr();Je();Ce().prototype.isInf=function(){return this.throwIfDisposed(),dU(this)}});var dje=N(()=>{"use strict";Fr();Je();Ce().prototype.isNaN=function(){return this.throwIfDisposed(),pU(this)}});var pje=N(()=>{"use strict";hU();Je();Ce().prototype.leakyRelu=function(t){return this.throwIfDisposed(),iw(this,t)}});var hje=N(()=>{"use strict";sw();Je();Ce().prototype.lessEqual=function(t){return this.throwIfDisposed(),Hc(this,t)}});var mje=N(()=>{"use strict";D3();Je();Ce().prototype.less=function(t){return this.throwIfDisposed(),Ex(this,t)}});var gje=N(()=>{"use strict";Rie();Je();Ce().prototype.localResponseNormalization=function(t,r,n,o){return this.throwIfDisposed(),mU(this,t,r,n,o)}});var yje=N(()=>{"use strict";Fr();Je();Ce().prototype.logSigmoid=function(){return this.throwIfDisposed(),yU(this)}});var bje=N(()=>{"use strict";Fr();Je();Ce().prototype.logSoftmax=function(t){return this.throwIfDisposed(),RI(this,t)}});var xje=N(()=>{"use strict";bU();Je();Ce().prototype.logSumExp=function(t,r){return this.throwIfDisposed(),lw(this,t,r)}});var vje=N(()=>{"use strict";Fr();Je();Ce().prototype.log=function(){return this.throwIfDisposed(),Js(this)}});var wje=N(()=>{"use strict";Fr();Je();Ce().prototype.log1p=function(){return this.throwIfDisposed(),aw(this)}});var _je=N(()=>{"use strict";BC();Je();Ce().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ha(this,t)}});var Sje=N(()=>{"use strict";M3();Je();Ce().prototype.logicalNot=function(){return this.throwIfDisposed(),uw(this)}});var Cje=N(()=>{"use strict";xU();Je();Ce().prototype.logicalOr=function(t){return this.throwIfDisposed(),PI(this,t)}});var Eje=N(()=>{"use strict";jie();Je();Ce().prototype.logicalXor=function(t){return this.throwIfDisposed(),vU(this,t)}});var Tje=N(()=>{"use strict";Mh();Je();Ce().prototype.matMul=function(t,r,n){return this.throwIfDisposed(),Vr(this,t,r,n)}});var Aje=N(()=>{"use strict";SU();Je();Ce().prototype.maxPool=function(t,r,n,o){return this.throwIfDisposed(),cw(this,t,r,n,o)}});var kje=N(()=>{"use strict";NI();Je();Ce().prototype.max=function(t,r){return this.throwIfDisposed(),Qs(this,t,r)}});var Ije=N(()=>{"use strict";O3();Je();Ce().prototype.maximum=function(t){return this.throwIfDisposed(),Ju(this,t)}});var Dje=N(()=>{"use strict";R3();Je();Ce().prototype.mean=function(t,r){return this.throwIfDisposed(),bo(this,t,r)}});var Nje=N(()=>{"use strict";aU();Je();Ce().prototype.min=function(t,r){return this.throwIfDisposed(),Sx(this,t,r)}});var Mje=N(()=>{"use strict";P3();Je();Ce().prototype.minimum=function(t){return this.throwIfDisposed(),pd(this,t)}});var Fje=N(()=>{"use strict";Bie();Je();Ce().prototype.mirrorPad=function(t,r){return this.throwIfDisposed(),EU(this,t,r)}});var Oje=N(()=>{"use strict";$ie();Je();Ce().prototype.mod=function(t){return this.throwIfDisposed(),TU(this,t)}});var Rje=N(()=>{"use strict";fr();Je();Ce().prototype.mul=function(t){return this.throwIfDisposed(),we(this,t)}});var Pje=N(()=>{"use strict";Fr();Je();Ce().prototype.neg=function(){return this.throwIfDisposed(),Zr(this)}});var Lje=N(()=>{"use strict";Fr();Je();Ce().prototype.norm=function(t,r,n){return this.throwIfDisposed(),Cx(this,t,r,n)}});var jje=N(()=>{"use strict";AU();Je();Ce().prototype.notEqual=function(t){return this.throwIfDisposed(),Lh(this,t)}});var Bje=N(()=>{"use strict";kU();Je();Ce().prototype.oneHot=function(t,r=1,n=0){return this.throwIfDisposed(),D0(this,t,r,n)}});var $je=N(()=>{"use strict";Fr();Je();Ce().prototype.onesLike=function(){return this.throwIfDisposed(),Os(this)}});var zje=N(()=>{"use strict";fw();Je();Ce().prototype.pad=function(t,r){return this.throwIfDisposed(),lu(this,t,r)}});var Uje=N(()=>{"use strict";zie();Je();Ce().prototype.pool=function(t,r,n,o,i,s){return this.throwIfDisposed(),IU(this,t,r,n,o,i,s)}});var Vje=N(()=>{"use strict";nw();Je();Ce().prototype.pow=function(t){return this.throwIfDisposed(),qa(this,t)}});var Gje=N(()=>{"use strict";DU();Je();Ce().prototype.prelu=function(t){return this.throwIfDisposed(),pw(this,t)}});var Wje=N(()=>{"use strict";Uie();Je();Ce().prototype.prod=function(t,r){return this.throwIfDisposed(),NU(this,t,r)}});var qje=N(()=>{"use strict";Fr();Je();Ce().prototype.reciprocal=function(){return this.throwIfDisposed(),jU(this)}});var Hje=N(()=>{"use strict";jI();Je();Ce().prototype.relu=function(){return this.throwIfDisposed(),_a(this)}});var Yje=N(()=>{"use strict";BU();Je();Ce().prototype.relu6=function(){return this.throwIfDisposed(),BI(this)}});var Xje=N(()=>{"use strict";Yt();Je();Ce().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Se(this,t.shape)}});var Kje=N(()=>{"use strict";Yt();Je();Ce().prototype.reshape=function(t){return this.throwIfDisposed(),Se(this,t)}});var Zje=N(()=>{"use strict";vse();Je();Ce().prototype.resizeBilinear=function(t,r,n){return this.throwIfDisposed(),u7(this,t,r,n)}});var Qje=N(()=>{"use strict";wse();Je();Ce().prototype.resizeNearestNeighbor=function(t,r,n){return this.throwIfDisposed(),c7(this,t,r,n)}});var Jje=N(()=>{"use strict";kx();Je();Ce().prototype.reverse=function(t){return this.throwIfDisposed(),bs(this,t)}});var e4e=N(()=>{"use strict";Fr();Je();Ce().prototype.rfft=function(){return this.throwIfDisposed(),gw(this)}});var t4e=N(()=>{"use strict";Fr();Je();Ce().prototype.round=function(){return this.throwIfDisposed(),$I(this)}});var r4e=N(()=>{"use strict";Fr();Je();Ce().prototype.rsqrt=function(){return this.throwIfDisposed(),zI(this)}});var n4e=N(()=>{"use strict";rse();Je();Ce().prototype.selu=function(){return this.throwIfDisposed(),UI(this)}});var o4e=N(()=>{"use strict";nse();Je();Ce().prototype.separableConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),VI(this,t,r,n,o,i,s)}});var i4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sigmoid=function(){return this.throwIfDisposed(),kl(this)}});var s4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sign=function(){return this.throwIfDisposed(),$U(this)}});var a4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sin=function(){return this.throwIfDisposed(),GI(this)}});var l4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sinh=function(){return this.throwIfDisposed(),WI(this)}});var u4e=N(()=>{"use strict";Fr();Je();Ce().prototype.slice=function(t,r){return this.throwIfDisposed(),zr(this,t,r)}});var c4e=N(()=>{"use strict";Fr();Je();Ce().prototype.softmax=function(t){return this.throwIfDisposed(),hw(this,t)}});var f4e=N(()=>{"use strict";Fr();Je();Ce().prototype.softplus=function(){return this.throwIfDisposed(),Ph(this)}});var d4e=N(()=>{"use strict";L3();Je();Ce().prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),dw(this,t,r)}});var p4e=N(()=>{"use strict";qC();Je();Ce().prototype.split=function(t,r){return this.throwIfDisposed(),xs(this,t,r)}});var h4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sqrt=function(){return this.throwIfDisposed(),Zn(this)}});var m4e=N(()=>{"use strict";Fr();Je();Ce().prototype.square=function(){return this.throwIfDisposed(),qr(this)}});var g4e=N(()=>{"use strict";GU();Je();Ce().prototype.squaredDifference=function(t){return this.throwIfDisposed(),XI(this,t)}});var y4e=N(()=>{"use strict";U3();Je();Ce().prototype.squeeze=function(t){return this.throwIfDisposed(),Xc(this,t)}});var b4e=N(()=>{"use strict";yw();Je();Ce().prototype.stack=function(t,r){this.throwIfDisposed();let n=t instanceof tn?[this,t]:[this,...t];return ss(n,r)}});var x4e=N(()=>{"use strict";Fr();Je();Ce().prototype.step=function(t){return this.throwIfDisposed(),up(this,t)}});var v4e=N(()=>{"use strict";Fr();Je();Ce().prototype.stridedSlice=function(t,r,n,o,i,s,a,l){return this.throwIfDisposed(),WU(this,t,r,n,o,i,s,a,l)}});var w4e=N(()=>{"use strict";io();Je();Ce().prototype.sub=function(t){return this.throwIfDisposed(),wt(this,t)}});var _4e=N(()=>{"use strict";Ai();Je();Ce().prototype.sum=function(t,r){return this.throwIfDisposed(),It(this,t,r)}});var S4e=N(()=>{"use strict";Fr();Je();Ce().prototype.tan=function(){return this.throwIfDisposed(),qU(this)}});var C4e=N(()=>{"use strict";Fr();Je();Ce().prototype.tanh=function(){return this.throwIfDisposed(),Fh(this)}});var E4e=N(()=>{"use strict";FI();Je();Ce().prototype.tile=function(t){return this.throwIfDisposed(),wa(this,t)}});var T4e=N(()=>{"use strict";Fr();Je();Ce().prototype.toBool=function(){return this.throwIfDisposed(),rt(this,"bool")}});var A4e=N(()=>{"use strict";Fr();Je();Ce().prototype.toFloat=function(){return this.throwIfDisposed(),rt(this,"float32")}});var k4e=N(()=>{"use strict";Fr();Je();Ce().prototype.toInt=function(){return this.throwIfDisposed(),rt(this,"int32")}});var I4e=N(()=>{"use strict";use();Je();Ce().prototype.topk=function(t,r){return this.throwIfDisposed(),XU(this,t,r)}});var D4e=N(()=>{"use strict";Nx();Je();Ce().prototype.transpose=function(t){return this.throwIfDisposed(),Gr(this,t)}});var N4e=N(()=>{"use strict";cse();Je();Ce().prototype.unique=function(t){return this.throwIfDisposed(),KU(this,t)}});var M4e=N(()=>{"use strict";ZU();Je();Ce().prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),JI(this,t,r)}});var F4e=N(()=>{"use strict";eD();Je();Ce().prototype.unstack=function(t){return this.throwIfDisposed(),Ya(this,t)}});var O4e=N(()=>{"use strict";dd();Je();Ce().prototype.where=function(t,r){return this.throwIfDisposed(),yo(t,this,r)}});var R4e=N(()=>{"use strict";Fr();Je();Ce().prototype.zerosLike=function(){return this.throwIfDisposed(),ar(this)}});var _3t={};var Zse=N(()=>{"use strict";aLe();lLe();uLe();cLe();fLe();dLe();pLe();hLe();mLe();gLe();yLe();bLe();xLe();vLe();wLe();_Le();SLe();CLe();ELe();TLe();ALe();kLe();ILe();DLe();NLe();MLe();FLe();OLe();RLe();PLe();LLe();jLe();BLe();$Le();zLe();ULe();VLe();GLe();WLe();qLe();HLe();YLe();XLe();KLe();ZLe();QLe();JLe();eje();tje();rje();nje();oje();ije();sje();aje();lje();uje();cje();fje();dje();pje();hje();mje();gje();yje();bje();xje();vje();wje();_je();Sje();Cje();Eje();Tje();Aje();kje();Ije();Dje();Nje();Mje();Fje();Oje();Rje();Pje();Lje();jje();Bje();$je();zje();Uje();Vje();Gje();Wje();qje();Hje();Yje();Xje();Kje();Zje();Qje();Jje();e4e();t4e();r4e();n4e();o4e();i4e();s4e();a4e();l4e();u4e();c4e();f4e();d4e();p4e();h4e();m4e();g4e();y4e();b4e();x4e();v4e();w4e();_4e();S4e();C4e();E4e();T4e();A4e();k4e();I4e();D4e();N4e();M4e();F4e();O4e();R4e();});var tGe=mt((eGe,sce)=>{"use strict";(function(t){typeof eGe=="object"&&typeof sce<"u"?sce.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).p5=t()})(function(){var t,r,n;return function o(i,s,a){function l(f,d){if(!s[f]){if(!i[f]){var p=typeof vR=="function"&&vR;if(!d&&p)return p(f,!0);if(u)return u(f,!0);throw(d=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",d}p=s[f]={exports:{}},i[f][0].call(p.exports,function(h){return l(i[f][1][h]||h)},p,p.exports,o,i,s,a)}return s[f].exports}for(var u=typeof vR=="function"&&vR,c=0;c<a.length;c++)l(a[c]);return l}({1:[function(o,i,s){"use strict";s.byteLength=function(g){var g=p(g),m=g[0],g=g[1];return 3*(m+g)/4-g},s.toByteArray=function(h){var m,g,b=p(h),y=b[0],b=b[1],x=new u(function(_,S){return 3*(_+S)/4-S}(y,b)),v=0,w=0<b?y-4:y;for(g=0;g<w;g+=4)m=l[h.charCodeAt(g)]<<18|l[h.charCodeAt(g+1)]<<12|l[h.charCodeAt(g+2)]<<6|l[h.charCodeAt(g+3)],x[v++]=m>>16&255,x[v++]=m>>8&255,x[v++]=255&m;return b===2&&(m=l[h.charCodeAt(g)]<<2|l[h.charCodeAt(g+1)]>>4,x[v++]=255&m),b===1&&(m=l[h.charCodeAt(g)]<<10|l[h.charCodeAt(g+1)]<<4|l[h.charCodeAt(g+2)]>>2,x[v++]=m>>8&255,x[v++]=255&m),x},s.fromByteArray=function(h){for(var m,g=h.length,y=g%3,b=[],x=0,v=g-y;x<v;x+=16383)b.push(function(w,_,S){for(var C,E=[],T=_;T<S;T+=3)C=(w[T]<<16&16711680)+(w[T+1]<<8&65280)+(255&w[T+2]),E.push(function(I){return a[I>>18&63]+a[I>>12&63]+a[I>>6&63]+a[63&I]}(C));return E.join("")}(h,x,v<x+16383?v:x+16383));return y==1?(m=h[g-1],b.push(a[m>>2]+a[m<<4&63]+"==")):y==2&&(m=(h[g-2]<<8)+h[g-1],b.push(a[m>>10]+a[m>>4&63]+a[m<<2&63]+"=")),b.join("")};for(var a=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=c.length;f<d;++f)a[f]=c[f],l[c.charCodeAt(f)]=f;function p(h){var m=h.length;if(0<m%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=h.indexOf("="),m=(h=h===-1?m:h)===m?0:4-h%4,[h,m]}l[45]=62,l[95]=63},{}],2:[function(o,i,s){},{}],3:[function(o,i,s){},{}],4:[function(o,i,s){(function(p){"use strict";var l=o("base64-js"),u=o("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(s.Buffer=p,s.SlowBuffer=function($){return+$!=$&&($=0),p.alloc(+$)},s.INSPECT_MAX_BYTES=50,2147483647);function d($){if(f<$)throw new RangeError('The value "'+$+'" is invalid for option "size"');return $=new Uint8Array($),Object.setPrototypeOf($,p.prototype),$}function p($,M,z){if(typeof $!="number")return h($,M,z);if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g($)}function h($,M,z){if(typeof $=="string"){var q=$,ee=M;if(p.isEncoding(ee=typeof ee=="string"&&ee!==""?ee:"utf8"))return ae=0|x(q,ee),Q=d(ae),Q=(q=Q.write(q,ee))!==ae?Q.slice(0,q):Q;throw new TypeError("Unknown encoding: "+ee)}if(ArrayBuffer.isView($))return y($);if($!=null){if(H($,ArrayBuffer)||$&&H($.buffer,ArrayBuffer)){var ae=$,q=M,Q=z;if(q<0||ae.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<q+(Q||0))throw new RangeError('"length" is outside of buffer bounds');return ae=q===void 0&&Q===void 0?new Uint8Array(ae):Q===void 0?new Uint8Array(ae,q):new Uint8Array(ae,q,Q),Object.setPrototypeOf(ae,p.prototype),ae}if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ee=$.valueOf&&$.valueOf(),ee!=null&&ee!==$)return p.from(ee,M,z);var le=function(ie){{var K,ge;if(p.isBuffer(ie))return K=0|b(ie.length),(ge=d(K)).length!==0&&ie.copy(ge,0,0,K),ge}if(ie.length!==void 0)return typeof ie.length!="number"||X(ie.length)?d(0):y(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return y(ie.data)}($);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return p.from($[Symbol.toPrimitive]("string"),M,z)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function m($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function g($){return m($),d($<0?0:0|b($))}function y($){for(var M=$.length<0?0:0|b($.length),z=d(M),q=0;q<M;q+=1)z[q]=255&$[q];return z}function b($){if(f<=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|$}function x($,M){if(p.isBuffer($))return $.length;if(ArrayBuffer.isView($)||H($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var z=$.length,q=2<arguments.length&&arguments[2]===!0;if(!q&&z===0)return 0;for(var ee=!1;;)switch(M){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return V($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return G($).length;default:if(ee)return q?-1:V($).length;M=(""+M).toLowerCase(),ee=!0}}function v($,M,z){var q,ee=!1;if((M=M===void 0||M<0?0:M)>this.length||(z=z===void 0||z>this.length?this.length:z)<=0||(z>>>=0)<=(M>>>=0))return"";for($=$||"utf8";;)switch($){case"hex":var ae=this,Te=M,Q=z,ge=ae.length;(!Q||Q<0||ge<Q)&&(Q=ge);for(var le="",ie=Te=!Te||Te<0?0:Te;ie<Q;++ie)le+=fe[ae[ie]];return le;case"utf8":case"utf-8":return T(this,M,z);case"ascii":var K=this,ge=M,ne=z,ye="";ne=Math.min(K.length,ne);for(var xe=ge;xe<ne;++xe)ye+=String.fromCharCode(127&K[xe]);return ye;case"latin1":case"binary":var De=this,Te=M,Fe=z,$e="";Fe=Math.min(De.length,Fe);for(var at=Te;at<Fe;++at)$e+=String.fromCharCode(De[at]);return $e;case"base64":return We=this,q=z,(jt=M)===0&&q===We.length?l.fromByteArray(We):l.fromByteArray(We.slice(jt,q));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var We=M,jt=z,_t=this.slice(We,jt),kt="",Rt=0;Rt<_t.length;Rt+=2)kt+=String.fromCharCode(_t[Rt]+256*_t[Rt+1]);return kt;default:if(ee)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),ee=!0}}function w($,M,z){var q=$[M];$[M]=$[z],$[z]=q}function _($,M,z,q,ee){if($.length===0)return-1;if(typeof z=="string"?(q=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),(z=(z=X(z=+z)?ee?0:$.length-1:z)<0?$.length+z:z)>=$.length){if(ee)return-1;z=$.length-1}else if(z<0){if(!ee)return-1;z=0}if(typeof M=="string"&&(M=p.from(M,q)),p.isBuffer(M))return M.length===0?-1:S($,M,z,q,ee);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?(ee?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call($,M,z):S($,[M],z,q,ee);throw new TypeError("val must be string, number or Buffer")}function S($,M,z,q,ee){var ae=1,Q=$.length,le=M.length;if(q!==void 0&&((q=String(q).toLowerCase())==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if($.length<2||M.length<2)return-1;Q/=ae=2,le/=2,z/=2}function ie(xe,De){return ae===1?xe[De]:xe.readUInt16BE(De*ae)}if(ee)for(var K=-1,ge=z;ge<Q;ge++)if(ie($,ge)===ie(M,K===-1?0:ge-K)){if(ge-(K=K===-1?ge:K)+1===le)return K*ae}else K!==-1&&(ge-=ge-K),K=-1;else for(ge=z=Q<z+le?Q-le:z;0<=ge;ge--){for(var ne=!0,ye=0;ye<le;ye++)if(ie($,ge+ye)!==ie(M,ye)){ne=!1;break}if(ne)return ge}return-1}function C($,M,z,q){return U(function(ee){for(var ae=[],Q=0;Q<ee.length;++Q)ae.push(255&ee.charCodeAt(Q));return ae}(M),$,z,q)}function E($,M,z,q){return U(function(ee,ae){for(var Q,le,ie=[],K=0;K<ee.length&&!((ae-=2)<0);++K)le=ee.charCodeAt(K),Q=le>>8,le=le%256,ie.push(le),ie.push(Q);return ie}(M,$.length-z),$,z,q)}function T($,M,z){z=Math.min($.length,z);for(var q=[],ee=M;ee<z;){var ae,Q,le,ie,K=$[ee],ge=null,ne=239<K?4:223<K?3:191<K?2:1;if(ee+ne<=z)switch(ne){case 1:K<128&&(ge=K);break;case 2:(192&(ae=$[ee+1]))==128&&127<(ie=(31&K)<<6|63&ae)&&(ge=ie);break;case 3:ae=$[ee+1],Q=$[ee+2],(192&ae)==128&&(192&Q)==128&&2047<(ie=(15&K)<<12|(63&ae)<<6|63&Q)&&(ie<55296||57343<ie)&&(ge=ie);break;case 4:ae=$[ee+1],Q=$[ee+2],le=$[ee+3],(192&ae)==128&&(192&Q)==128&&(192&le)==128&&65535<(ie=(15&K)<<18|(63&ae)<<12|(63&Q)<<6|63&le)&&ie<1114112&&(ge=ie)}ge===null?(ge=65533,ne=1):65535<ge&&(ge-=65536,q.push(ge>>>10&1023|55296),ge=56320|1023&ge),q.push(ge),ee+=ne}var ye=q,xe=ye.length;if(xe<=I)return String.fromCharCode.apply(String,ye);for(var De="",Te=0;Te<xe;)De+=String.fromCharCode.apply(String,ye.slice(Te,Te+=I));return De}s.kMaxLength=f,(p.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf($,M),$.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=h,Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function($,M,z){return M=M,z=z,m($=$),!($<=0)&&M!==void 0?typeof z=="string"?d($).fill(M,z):d($).fill(M):d($)},p.allocUnsafe=g,p.allocUnsafeSlow=g,p.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==p.prototype},p.compare=function($,M){if(H($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),H(M,Uint8Array)&&(M=p.from(M,M.offset,M.byteLength)),!p.isBuffer($)||!p.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===M)return 0;for(var z=$.length,q=M.length,ee=0,ae=Math.min(z,q);ee<ae;++ee)if($[ee]!==M[ee]){z=$[ee],q=M[ee];break}return z<q?-1:q<z?1:0},p.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function($,M){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return p.alloc(0);if(M===void 0)for(ee=M=0;ee<$.length;++ee)M+=$[ee].length;for(var z=p.allocUnsafe(M),q=0,ee=0;ee<$.length;++ee){var ae=$[ee];if(H(ae,Uint8Array)&&(ae=p.from(ae)),!p.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(z,q),q+=ae.length}return z},p.byteLength=x,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<$;M+=2)w(this,M,M+1);return this},p.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<$;M+=4)w(this,M,M+3),w(this,M+1,M+2);return this},p.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<$;M+=8)w(this,M,M+7),w(this,M+1,M+6),w(this,M+2,M+5),w(this,M+3,M+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?T(this,0,$):v.apply(this,arguments)},p.prototype.equals=function($){if(p.isBuffer($))return this===$||p.compare(this,$)===0;throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var M="",$=s.INSPECT_MAX_BYTES,M=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim();return this.length>$&&(M+=" ... "),"<Buffer "+M+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function($,M,z,q,ee){if(H($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),!p.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(z===void 0&&(z=$?$.length:0),q===void 0&&(q=0),ee===void 0&&(ee=this.length),(M=M===void 0?0:M)<0||z>$.length||q<0||ee>this.length)throw new RangeError("out of range index");if(ee<=q&&z<=M)return 0;if(ee<=q)return-1;if(z<=M)return 1;if(this===$)return 0;for(var ae=(ee>>>=0)-(q>>>=0),Q=(z>>>=0)-(M>>>=0),le=Math.min(ae,Q),ie=this.slice(q,ee),K=$.slice(M,z),ge=0;ge<le;++ge)if(ie[ge]!==K[ge]){ae=ie[ge],Q=K[ge];break}return ae<Q?-1:Q<ae?1:0},p.prototype.includes=function($,M,z){return this.indexOf($,M,z)!==-1},p.prototype.indexOf=function($,M,z){return _(this,$,M,z,!0)},p.prototype.lastIndexOf=function($,M,z){return _(this,$,M,z,!1)},p.prototype.write=function($,M,z,q){if(M===void 0)q="utf8",z=this.length,M=0;else if(z===void 0&&typeof M=="string")q=M,z=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(z)?(z>>>=0,q===void 0&&(q="utf8")):(q=z,z=void 0)}var ee=this.length-M;if((z===void 0||ee<z)&&(z=ee),0<$.length&&(z<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");q=q||"utf8";for(var ae,Q,le,ie=!1;;)switch(q){case"hex":var K=this,ge=$,ne=M,ye=z,xe=(ne=Number(ne)||0,K.length-ne);(!ye||xe<(ye=Number(ye)))&&(ye=xe),(xe=ge.length)/2<ye&&(ye=xe/2);for(var De=0;De<ye;++De){var Te=parseInt(ge.substr(2*De,2),16);if(X(Te))return De;K[ne+De]=Te}return De;case"utf8":case"utf-8":return xe=M,le=z,U(V($,(Q=this).length-xe),Q,xe,le);case"ascii":return C(this,$,M,z);case"latin1":case"binary":return C(this,$,M,z);case"base64":return Q=this,le=M,ae=z,U(G($),Q,le,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,$,M,z);default:if(ie)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),ie=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function k($,M,z){if($%1!=0||$<0)throw new RangeError("offset is not uint");if(z<$+M)throw new RangeError("Trying to access beyond buffer length")}function F($,M,z,q,ee,ae){if(!p.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee<M||M<ae)throw new RangeError('"value" argument is out of bounds');if(z+q>$.length)throw new RangeError("Index out of range")}function D($,M,z,q){if(z+q>$.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function L($,M,z,q,ee){return M=+M,z>>>=0,ee||D($,0,z,4),u.write($,M,z,q,23,4),z+4}function P($,M,z,q,ee){return M=+M,z>>>=0,ee||D($,0,z,8),u.write($,M,z,q,52,8),z+8}p.prototype.slice=function($,M){var z=this.length,z=(($=~~$)<0?($+=z)<0&&($=0):z<$&&($=z),(M=M===void 0?z:~~M)<0?(M+=z)<0&&(M=0):z<M&&(M=z),M<$&&(M=$),this.subarray($,M));return Object.setPrototypeOf(z,p.prototype),z},p.prototype.readUIntLE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=this[$],ee=1,ae=0;++ae<M&&(ee*=256);)q+=this[$+ae]*ee;return q},p.prototype.readUIntBE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=this[$+--M],ee=1;0<M&&(ee*=256);)q+=this[$+--M]*ee;return q},p.prototype.readUInt8=function($,M){return $>>>=0,M||k($,1,this.length),this[$]},p.prototype.readUInt16LE=function($,M){return $>>>=0,M||k($,2,this.length),this[$]|this[$+1]<<8},p.prototype.readUInt16BE=function($,M){return $>>>=0,M||k($,2,this.length),this[$]<<8|this[$+1]},p.prototype.readUInt32LE=function($,M){return $>>>=0,M||k($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},p.prototype.readUInt32BE=function($,M){return $>>>=0,M||k($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},p.prototype.readIntLE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=this[$],ee=1,ae=0;++ae<M&&(ee*=256);)q+=this[$+ae]*ee;return(ee*=128)<=q&&(q-=Math.pow(2,8*M)),q},p.prototype.readIntBE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=M,ee=1,ae=this[$+--q];0<q&&(ee*=256);)ae+=this[$+--q]*ee;return(ee*=128)<=ae&&(ae-=Math.pow(2,8*M)),ae},p.prototype.readInt8=function($,M){return $>>>=0,M||k($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},p.prototype.readInt16LE=function($,M){return $>>>=0,M||k($,2,this.length),M=this[$]|this[$+1]<<8,32768&M?4294901760|M:M},p.prototype.readInt16BE=function($,M){return $>>>=0,M||k($,2,this.length),M=this[$+1]|this[$]<<8,32768&M?4294901760|M:M},p.prototype.readInt32LE=function($,M){return $>>>=0,M||k($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},p.prototype.readInt32BE=function($,M){return $>>>=0,M||k($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},p.prototype.readFloatLE=function($,M){return $>>>=0,M||k($,4,this.length),u.read(this,$,!0,23,4)},p.prototype.readFloatBE=function($,M){return $>>>=0,M||k($,4,this.length),u.read(this,$,!1,23,4)},p.prototype.readDoubleLE=function($,M){return $>>>=0,M||k($,8,this.length),u.read(this,$,!0,52,8)},p.prototype.readDoubleBE=function($,M){return $>>>=0,M||k($,8,this.length),u.read(this,$,!1,52,8)},p.prototype.writeUIntLE=function($,M,z,q){$=+$,M>>>=0,z>>>=0,q||F(this,$,M,z,Math.pow(2,8*z)-1,0);var ee=1,ae=0;for(this[M]=255&$;++ae<z&&(ee*=256);)this[M+ae]=$/ee&255;return M+z},p.prototype.writeUIntBE=function($,M,z,q){$=+$,M>>>=0,z>>>=0,q||F(this,$,M,z,Math.pow(2,8*z)-1,0);var ee=z-1,ae=1;for(this[M+ee]=255&$;0<=--ee&&(ae*=256);)this[M+ee]=$/ae&255;return M+z},p.prototype.writeUInt8=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,1,255,0),this[M]=255&$,M+1},p.prototype.writeUInt16LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,65535,0),this[M]=255&$,this[M+1]=$>>>8,M+2},p.prototype.writeUInt16BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,65535,0),this[M]=$>>>8,this[M+1]=255&$,M+2},p.prototype.writeUInt32LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,4294967295,0),this[M+3]=$>>>24,this[M+2]=$>>>16,this[M+1]=$>>>8,this[M]=255&$,M+4},p.prototype.writeUInt32BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,4294967295,0),this[M]=$>>>24,this[M+1]=$>>>16,this[M+2]=$>>>8,this[M+3]=255&$,M+4},p.prototype.writeIntLE=function($,M,z,q){$=+$,M>>>=0,q||F(this,$,M,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=0,ae=1,Q=0;for(this[M]=255&$;++ee<z&&(ae*=256);)$<0&&Q===0&&this[M+ee-1]!==0&&(Q=1),this[M+ee]=($/ae>>0)-Q&255;return M+z},p.prototype.writeIntBE=function($,M,z,q){$=+$,M>>>=0,q||F(this,$,M,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=z-1,ae=1,Q=0;for(this[M+ee]=255&$;0<=--ee&&(ae*=256);)$<0&&Q===0&&this[M+ee+1]!==0&&(Q=1),this[M+ee]=($/ae>>0)-Q&255;return M+z},p.prototype.writeInt8=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,1,127,-128),this[M]=255&($=$<0?255+$+1:$),M+1},p.prototype.writeInt16LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,32767,-32768),this[M]=255&$,this[M+1]=$>>>8,M+2},p.prototype.writeInt16BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,32767,-32768),this[M]=$>>>8,this[M+1]=255&$,M+2},p.prototype.writeInt32LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,2147483647,-2147483648),this[M]=255&$,this[M+1]=$>>>8,this[M+2]=$>>>16,this[M+3]=$>>>24,M+4},p.prototype.writeInt32BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,2147483647,-2147483648),this[M]=($=$<0?4294967295+$+1:$)>>>24,this[M+1]=$>>>16,this[M+2]=$>>>8,this[M+3]=255&$,M+4},p.prototype.writeFloatLE=function($,M,z){return L(this,$,M,!0,z)},p.prototype.writeFloatBE=function($,M,z){return L(this,$,M,!1,z)},p.prototype.writeDoubleLE=function($,M,z){return P(this,$,M,!0,z)},p.prototype.writeDoubleBE=function($,M,z){return P(this,$,M,!1,z)},p.prototype.copy=function($,M,z,q){if(!p.isBuffer($))throw new TypeError("argument should be a Buffer");if(z=z||0,q||q===0||(q=this.length),M>=$.length&&(M=$.length),(q=0<q&&q<z?z:q)===z||$.length===0||this.length===0)return 0;if((M=M||0)<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length);var ee=(q=$.length-M<q-z?$.length-M+z:q)-z;if(this===$&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(M,z,q);else if(this===$&&z<M&&M<q)for(var ae=ee-1;0<=ae;--ae)$[ae+M]=this[ae+z];else Uint8Array.prototype.set.call($,this.subarray(z,q),M);return ee},p.prototype.fill=function($,M,z,q){if(typeof $=="string"){if(typeof M=="string"?(q=M,M=0,z=this.length):typeof z=="string"&&(q=z,z=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!p.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var ee;$.length===1&&(ee=$.charCodeAt(0),(q==="utf8"&&ee<128||q==="latin1")&&($=ee))}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(M<0||this.length<M||this.length<z)throw new RangeError("Out of range index");var ae;if(!(z<=M))if(M>>>=0,z=z===void 0?this.length:z>>>0,typeof($=$||0)=="number")for(ae=M;ae<z;++ae)this[ae]=$;else{var Q=p.isBuffer($)?$:p.from($,q),le=Q.length;if(le===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ae=0;ae<z-M;++ae)this[ae+M]=Q[ae%le]}return this};var R=/[^+/0-9A-Za-z-_]/g;function V($,M){M=M||1/0;for(var z,q=$.length,ee=null,ae=[],Q=0;Q<q;++Q){if(55295<(z=$.charCodeAt(Q))&&z<57344){if(!ee){if(56319<z){-1<(M-=3)&&ae.push(239,191,189);continue}if(Q+1===q){-1<(M-=3)&&ae.push(239,191,189);continue}ee=z;continue}if(z<56320){-1<(M-=3)&&ae.push(239,191,189),ee=z;continue}z=65536+(ee-55296<<10|z-56320)}else ee&&-1<(M-=3)&&ae.push(239,191,189);if(ee=null,z<128){if(--M<0)break;ae.push(z)}else if(z<2048){if((M-=2)<0)break;ae.push(z>>6|192,63&z|128)}else if(z<65536){if((M-=3)<0)break;ae.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;ae.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ae}function G($){return l.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}($))}function U($,M,z,q){for(var ee=0;ee<q&&!(ee+z>=M.length||ee>=$.length);++ee)M[ee+z]=$[ee];return ee}function H($,M){return $ instanceof M||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===M.name}function X($){return $!=$}var fe=function(){for(var $="0123456789abcdef",M=new Array(256),z=0;z<16;++z)for(var q=16*z,ee=0;ee<16;++ee)M[q+ee]=$[z]+$[ee];return M}()}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(o,i,s){i.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l)||l===null)return l;throw TypeError("Can't set "+String(l)+" as a prototype")}},{"../internals/is-object":75}],7:[function(u,i,s){var a=u("../internals/well-known-symbol"),l=u("../internals/object-create"),u=u("../internals/object-define-property"),c=a("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),i.exports=function(d){f[c][d]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(o,i,s){"use strict";var a=o("../internals/string-multibyte").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},{"../internals/string-multibyte":124}],9:[function(o,i,s){i.exports=function(a,l,u){if(a instanceof l)return a;throw TypeError("Incorrect "+(u?u+" ":"")+"invocation")}},{}],10:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l))return l;throw TypeError(String(l)+" is not an object")}},{"../internals/is-object":75}],11:[function(o,i,s){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,i,s){"use strict";function a(P){return d(P)&&p(L,h(P))}var l,u=D("../internals/array-buffer-native"),c=D("../internals/descriptors"),f=D("../internals/global"),d=D("../internals/is-object"),p=D("../internals/has"),h=D("../internals/classof"),m=D("../internals/create-non-enumerable-property"),g=D("../internals/redefine"),y=D("../internals/object-define-property").f,b=D("../internals/object-get-prototype-of"),x=D("../internals/object-set-prototype-of"),I=D("../internals/well-known-symbol"),D=D("../internals/uid"),v=f.Int8Array,w=v&&v.prototype,_=f.Uint8ClampedArray,_=_&&_.prototype,S=v&&b(v),C=w&&b(w),E=Object.prototype,T=E.isPrototypeOf,I=I("toStringTag"),k=D("TYPED_ARRAY_TAG"),F=u&&!!x&&h(f.opera)!=="Opera",D=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(l in L)f[l]||(F=!1);if((!F||typeof S!="function"||S===Function.prototype)&&(S=function(){throw TypeError("Incorrect invocation")},F))for(l in L)f[l]&&x(f[l],S);if((!F||!C||C===E)&&(C=S.prototype,F))for(l in L)f[l]&&x(f[l].prototype,C);if(F&&b(_)!==C&&x(_,C),c&&!p(C,I))for(l in D=!0,y(C,I,{get:function(){return d(this)?this[k]:void 0}}),L)f[l]&&m(f[l],k,l);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:D&&k,aTypedArray:function(P){if(a(P))return P;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(P){if(x){if(T.call(S,P))return P}else for(var R in L)if(p(L,l)&&(R=f[R],R&&(P===R||T.call(R,P))))return P;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(P,R,V){if(c){if(V)for(var G in L)G=f[G],G&&p(G.prototype,P)&&delete G.prototype[P];C[P]&&!V||g(C,P,!V&&F&&w[P]||R)}},exportTypedArrayStaticMethod:function(P,R,V){var G,U;if(c){if(x){if(V)for(G in L)(U=f[G])&&p(U,P)&&delete U[P];if(S[P]&&!V)return;try{return g(S,P,!V&&F&&v[P]||R)}catch{}}for(G in L)!(U=f[G])||U[P]&&!V||g(U,P,R)}},isView:function(P){return P=h(P),P==="DataView"||p(L,P)},isTypedArray:a,TypedArray:S,TypedArrayPrototype:C}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(z,i,s){"use strict";function a(ne){return[255&ne]}function l(ne){return[255&ne,ne>>8&255]}function u(ne){return[255&ne,ne>>8&255,ne>>16&255,ne>>24&255]}function c(ne){return ne[3]<<24|ne[2]<<16|ne[1]<<8|ne[0]}function f(ne){return ae(ne,23,4)}function d(ne){return ae(ne,52,8)}function p(ne,ye){D(ne[H],ye,{get:function(){return R(this)[ye]}})}function h($e,ye,Fe,De){if(Fe=E(Fe),$e=R($e),Fe+ye>$e.byteLength)throw ee(X);var Te=R($e.buffer).bytes,Fe=Fe+$e.byteOffset,$e=Te.slice(Fe,Fe+ye);return De?$e:$e.reverse()}function m(ne,ye,xe,De,Te,Fe){if(xe=E(xe),ne=R(ne),xe+ye>ne.byteLength)throw ee(X);for(var $e=R(ne.buffer).bytes,at=xe+ne.byteOffset,We=De(+Te),jt=0;jt<ye;jt++)$e[at+jt]=We[Fe?jt:ye-jt-1]}var g=z("../internals/global"),y=z("../internals/descriptors"),b=z("../internals/array-buffer-native"),x=z("../internals/create-non-enumerable-property"),v=z("../internals/redefine-all"),w=z("../internals/fails"),_=z("../internals/an-instance"),S=z("../internals/to-integer"),C=z("../internals/to-length"),E=z("../internals/to-index"),T=z("../internals/ieee754"),I=z("../internals/object-get-prototype-of"),k=z("../internals/object-set-prototype-of"),F=z("../internals/object-get-own-property-names").f,D=z("../internals/object-define-property").f,L=z("../internals/array-fill"),P=z("../internals/set-to-string-tag"),z=z("../internals/internal-state"),R=z.get,V=z.set,G="ArrayBuffer",U="DataView",H="prototype",X="Wrong index",fe=g[G],$=fe,M=g[U],z=M&&M[H],q=Object.prototype,ee=g.RangeError,ae=T.pack,Q=T.unpack;if(b){if(!w(function(){fe(1)})||!w(function(){new fe(-1)})||w(function(){return new fe,new fe(1.5),new fe(NaN),fe.name!=G})){for(var le,g=($=function(xe){return _(this,$),new fe(E(xe))})[H]=fe[H],ie=F(fe),K=0;ie.length>K;)(le=ie[K++])in $||x($,le,fe[le]);g.constructor=$}k&&I(z)!==q&&k(z,q);var T=new M(new $(2)),ge=z.setInt8;T.setInt8(0,2147483648),T.setInt8(1,2147483649),!T.getInt8(0)&&T.getInt8(1)||v(z,{setInt8:function(ye,xe){ge.call(this,ye,xe<<24>>24)},setUint8:function(ye,xe){ge.call(this,ye,xe<<24>>24)}},{unsafe:!0})}else $=function(ne){_(this,$,G),ne=E(ne),V(this,{bytes:L.call(new Array(ne),0),byteLength:ne}),y||(this.byteLength=ne)},M=function(ne,Te,xe){_(this,M,U),_(ne,$,U);var De=R(ne).byteLength,Te=S(Te);if(Te<0||De<Te)throw ee("Wrong offset");if(De<Te+(xe=xe===void 0?De-Te:C(xe)))throw ee("Wrong length");V(this,{buffer:ne,byteLength:xe,byteOffset:Te}),y||(this.buffer=ne,this.byteLength=xe,this.byteOffset=Te)},y&&(p($,"byteLength"),p(M,"buffer"),p(M,"byteLength"),p(M,"byteOffset")),v(M[H],{getInt8:function(ne){return h(this,1,ne)[0]<<24>>24},getUint8:function(ne){return h(this,1,ne)[0]},getInt16:function(ne){return ne=h(this,2,ne,1<arguments.length?arguments[1]:void 0),(ne[1]<<8|ne[0])<<16>>16},getUint16:function(ne){return ne=h(this,2,ne,1<arguments.length?arguments[1]:void 0),ne[1]<<8|ne[0]},getInt32:function(ne){return c(h(this,4,ne,1<arguments.length?arguments[1]:void 0))},getUint32:function(ne){return c(h(this,4,ne,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ne){return Q(h(this,4,ne,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ne){return Q(h(this,8,ne,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ne,ye){m(this,1,ne,a,ye)},setUint8:function(ne,ye){m(this,1,ne,a,ye)},setInt16:function(ne,ye){m(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setUint16:function(ne,ye){m(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setInt32:function(ne,ye){m(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setUint32:function(ne,ye){m(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ne,ye){m(this,4,ne,f,ye,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ne,ye){m(this,8,ne,d,ye,2<arguments.length?arguments[2]:void 0)}});P($,G),P(M,U),i.exports={ArrayBuffer:$,DataView:M}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length"),c=Math.min;i.exports=[].copyWithin||function(y,d){var p=a(this),h=u(p.length),m=l(y,h),g=l(d,h),y=2<arguments.length?arguments[2]:void 0,b=c((y===void 0?h:l(y,h))-g,h-m),x=1;for(g<m&&m<g+b&&(x=-1,g+=b-1,m+=b-1);0<b--;)g in p?p[m]=p[g]:delete p[m],m+=x,g+=x;return p}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length");i.exports=function(c){for(var f=a(this),d=u(f.length),h=arguments.length,p=l(1<h?arguments[1]:void 0,d),h=2<h?arguments[2]:void 0,m=h===void 0?d:l(h,d);p<m;)f[p++]=c;return f}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(u,i,s){"use strict";var a=u("../internals/array-iteration").forEach,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("forEach"),u=u("forEach");i.exports=l&&u?[].forEach:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(o,i,s){"use strict";var a=o("../internals/function-bind-context"),l=o("../internals/to-object"),u=o("../internals/call-with-safe-iteration-closing"),c=o("../internals/is-array-iterator-method"),f=o("../internals/to-length"),d=o("../internals/create-property"),p=o("../internals/get-iterator-method");i.exports=function(_){var m,g,y,b,x,v,w=l(_),_=typeof this=="function"?this:Array,S=arguments.length,C=1<S?arguments[1]:void 0,E=C!==void 0,T=p(w),I=0;if(E&&(C=a(C,2<S?arguments[2]:void 0,2)),T==null||_==Array&&c(T))for(g=new _(m=f(w.length));I<m;I++)v=E?C(w[I],I):w[I],d(g,I,v);else for(x=(b=T.call(w)).next,g=new _;!(y=x.call(b)).done;I++)v=E?u(b,C,[y.value,I],!0):y.value,d(g,I,v);return g.length=I,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(o,i,s){function a(f){return function(d,p,h){var m,g=l(d),y=u(g.length),b=c(h,y);if(f&&p!=p){for(;b<y;)if((m=g[b++])!=m)return!0}else for(;b<y;b++)if((f||b in g)&&g[b]===p)return f||b||0;return!f&&-1}}var l=o("../internals/to-indexed-object"),u=o("../internals/to-length"),c=o("../internals/to-absolute-index");i.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(o,i,s){function a(h){var m=h==1,g=h==2,y=h==3,b=h==4,x=h==6,v=h==5||x;return function(w,_,S,C){for(var E,T,I=c(w),k=u(I),F=l(_,S,3),D=f(k.length),L=0,_=C||d,P=m?_(w,D):g?_(w,0):void 0;L<D;L++)if((v||L in k)&&(T=F(E=k[L],L,I),h)){if(m)P[L]=T;else if(T)switch(h){case 3:return!0;case 5:return E;case 6:return L;case 2:p.call(P,E)}else if(b)return!1}return x?-1:y||b?b:P}}var l=o("../internals/function-bind-context"),u=o("../internals/indexed-object"),c=o("../internals/to-object"),f=o("../internals/to-length"),d=o("../internals/array-species-create"),p=[].push;i.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(h,i,s){"use strict";var a=h("../internals/to-indexed-object"),l=h("../internals/to-integer"),u=h("../internals/to-length"),p=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),c=Math.min,f=[].lastIndexOf,d=!!f&&1/[1].lastIndexOf(1,-0)<0,p=p("lastIndexOf"),h=h("indexOf",{ACCESSORS:!0,1:0});i.exports=d||!p||!h?function(m){if(d)return f.apply(this,arguments)||0;var g=a(this),y=u(g.length),b=y-1;for((b=1<arguments.length?c(b,l(arguments[1])):b)<0&&(b=y+b);0<=b;b--)if(b in g&&g[b]===m)return b||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/engine-v8-version"),c=l("species");i.exports=function(f){return 51<=u||!a(function(){var d=[];return(d.constructor={})[c]=function(){return{foo:1}},d[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(o,i,s){"use strict";var a=o("../internals/fails");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(o,i,s){function a(p){throw p}var l=o("../internals/descriptors"),u=o("../internals/fails"),c=o("../internals/has"),f=Object.defineProperty,d={};i.exports=function(p,h){var m,g,y,b;return c(d,p)?d[p]:(m=[][p],g=!!c(h=h||{},"ACCESSORS")&&h.ACCESSORS,y=c(h,0)?h[0]:a,b=c(h,1)?h[1]:void 0,d[p]=!!m&&!u(function(){if(g&&!l)return!0;var x={length:-1};g?f(x,1,{enumerable:!0,get:a}):x[1]=1,m.call(x,y,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(o,i,s){function a(d){return function(p,h,m,g){l(h);var y=u(p),b=c(y),x=f(y.length),v=d?x-1:0,w=d?-1:1;if(m<2)for(;;){if(v in b){g=b[v],v+=w;break}if(v+=w,d?v<0:x<=v)throw TypeError("Reduce of empty array with no initial value")}for(;d?0<=v:v<x;v+=w)v in b&&(g=h(g,b[v],v,y));return g}}var l=o("../internals/a-function"),u=o("../internals/to-object"),c=o("../internals/indexed-object"),f=o("../internals/to-length");i.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/is-array"),u=o("../internals/well-known-symbol")("species");i.exports=function(c,f){var d;return new((d=l(c)&&(typeof(d=c.constructor)=="function"&&(d===Array||l(d.prototype))||a(d)&&(d=d[u])===null)?void 0:d)===void 0?Array:d)(f===0?0:f)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(o,i,s){var a=o("../internals/an-object");i.exports=function(l,u,c,f){try{return f?u(a(c)[0],c[1]):u(c)}catch(d){throw f=l.return,f!==void 0&&a(f.call(l)),d}}},{"../internals/an-object":10}],27:[function(o,i,s){var a=o("../internals/well-known-symbol")("iterator"),l=!1;try{var u=0,c={next:function(){return{done:!!u++}},return:function(){l=!0}};c[a]=function(){return this},Array.from(c,function(){throw 2})}catch{}i.exports=function(f,d){if(!d&&!l)return!1;var p=!1;try{var h={};h[a]=function(){return{next:function(){return{done:p=!0}}}},f(h)}catch{}return p}},{"../internals/well-known-symbol":149}],28:[function(o,i,s){var a={}.toString;i.exports=function(l){return a.call(l).slice(8,-1)}},{}],29:[function(o,i,s){var a=o("../internals/to-string-tag-support"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("toStringTag"),c=l(function(){return arguments}())=="Arguments";i.exports=a?l:function(f){var d;return f===void 0?"Undefined":f===null?"Null":typeof(d=function(p,h){try{return p[h]}catch{}}(f=Object(f),u))=="string"?d:c?l(f):(d=l(f))=="Object"&&typeof f.callee=="function"?"Arguments":d}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(y,i,s){"use strict";var a=y("../internals/object-define-property").f,l=y("../internals/object-create"),u=y("../internals/redefine-all"),c=y("../internals/function-bind-context"),f=y("../internals/an-instance"),d=y("../internals/iterate"),p=y("../internals/define-iterator"),h=y("../internals/set-species"),m=y("../internals/descriptors"),g=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),b=y.set,x=y.getterFor;i.exports={getConstructor:function(v,w,_,S){function C(k,F,D){var L,P=I(k),R=E(k,F);return R?R.value=D:(P.last=R={index:L=g(F,!0),key:F,value:D,previous:F=P.last,next:void 0,removed:!1},P.first||(P.first=R),F&&(F.next=R),m?P.size++:k.size++,L!=="F"&&(P.index[L]=R)),k}function E(L,F){var D,L=I(L),P=g(F);if(P!=="F")return L.index[P];for(D=L.first;D;D=D.next)if(D.key==F)return D}var T=v(function(k,F){f(k,T,w),b(k,{type:w,index:l(null),first:void 0,last:void 0,size:0}),m||(k.size=0),F!=null&&d(F,k[S],k,_)}),I=x(w);return u(T.prototype,{clear:function(){for(var k=I(this),F=k.index,D=k.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete F[D.index],D=D.next;k.first=k.last=void 0,m?k.size=0:this.size=0},delete:function(P){var F,D,L=I(this),P=E(this,P);return P&&(F=P.next,D=P.previous,delete L.index[P.index],P.removed=!0,D&&(D.next=F),F&&(F.previous=D),L.first==P&&(L.first=F),L.last==P&&(L.last=D),m?L.size--:this.size--),!!P},forEach:function(k){for(var F,D=I(this),L=c(k,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:D.first;)for(L(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(k){return!!E(this,k)}}),u(T.prototype,_?{get:function(k){return k=E(this,k),k&&k.value},set:function(k,F){return C(this,k===0?0:k,F)}}:{add:function(k){return C(this,k=k===0?0:k,k)}}),m&&a(T.prototype,"size",{get:function(){return I(this).size}}),T},setStrong:function(v,w,_){var S=w+" Iterator",C=x(w),E=x(S);p(v,w,function(T,I){b(this,{type:S,target:T,state:C(T),kind:I,last:void 0})},function(){for(var T=E(this),I=T.kind,k=T.last;k&&k.removed;)k=k.previous;return T.target&&(T.last=k=k?k.next:T.state.first)?I=="keys"?{value:k.key,done:!1}:I=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:T.target=void 0,done:!0}},_?"entries":"values",!_,!0),h(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(b,i,s){"use strict";function a(C){return C.frozen||(C.frozen=new l)}function l(){this.entries=[]}function u(C,E){return w(C.entries,function(T){return T[0]===E})}var c=b("../internals/redefine-all"),f=b("../internals/internal-metadata").getWeakData,d=b("../internals/an-object"),p=b("../internals/is-object"),h=b("../internals/an-instance"),m=b("../internals/iterate"),g=b("../internals/array-iteration"),y=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,v=b.getterFor,w=g.find,_=g.findIndex,S=0;l.prototype={get:function(C){if(C=u(this,C),C)return C[1]},has:function(C){return!!u(this,C)},set:function(C,E){var T=u(this,C);T?T[1]=E:this.entries.push([C,E])},delete:function(C){var E=_(this.entries,function(T){return T[0]===C});return~E&&this.entries.splice(E,1),!!~E}},i.exports={getConstructor:function(C,E,T,I){function k(L,P,R){var V=D(L),G=f(d(P),!0);return G===!0?a(V).set(P,R):G[V.id]=R,L}var F=C(function(L,P){h(L,F,E),x(L,{type:E,id:S++,frozen:void 0}),P!=null&&m(P,L[I],L,T)}),D=v(E);return c(F.prototype,{delete:function(L){var P,R=D(this);return!!p(L)&&((P=f(L))===!0?a(R).delete(L):P&&y(P,R.id)&&delete P[R.id])},has:function(L){var P,R=D(this);return!!p(L)&&((P=f(L))===!0?a(R).has(L):P&&y(P,R.id))}}),c(F.prototype,T?{get:function(L){var P,R=D(this);if(p(L))return(P=f(L))===!0?a(R).get(L):P?P[R.id]:void 0},set:function(L,P){return k(this,L,P)}}:{add:function(L){return k(this,L,!0)}}),F}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/redefine"),f=o("../internals/internal-metadata"),d=o("../internals/iterate"),p=o("../internals/an-instance"),h=o("../internals/is-object"),m=o("../internals/fails"),g=o("../internals/check-correctness-of-iteration"),y=o("../internals/set-to-string-tag"),b=o("../internals/inherit-if-required");i.exports=function(x,v,w){function _(G){var U=P[G];c(P,G,G=="add"?function(H){return U.call(this,H===0?0:H),this}:G=="delete"?function(H){return!(F&&!h(H))&&U.call(this,H===0?0:H)}:G=="get"?function(H){return F&&!h(H)?void 0:U.call(this,H===0?0:H)}:G=="has"?function(H){return!(F&&!h(H))&&U.call(this,H===0?0:H)}:function(H,X){return U.call(this,H===0?0:H,X),this})}var S,C,E,T,I,k=x.indexOf("Map")!==-1,F=x.indexOf("Weak")!==-1,D=k?"set":"add",L=l[x],P=L&&L.prototype,R=L,V={};return u(x,typeof L!="function"||!(F||P.forEach&&!m(function(){new L().entries().next()})))?(R=w.getConstructor(v,x,k,D),f.REQUIRED=!0):u(x,!0)&&(C=(S=new R)[D](F?{}:-0,1)!=S,E=m(function(){S.has(1)}),T=g(function(G){new L(G)}),I=!F&&m(function(){for(var G=new L,U=5;U--;)G[D](U,U);return!G.has(-0)}),T||(((R=v(function(G,U){return p(G,R,x),G=b(new L,G,R),U!=null&&d(U,G[D],G,k),G})).prototype=P).constructor=R),(E||I)&&(_("delete"),_("has"),k&&_("get")),(I||C)&&_(D),F&&P.clear&&delete P.clear),V[x]=R,a({global:!0,forced:R!=L},V),y(R,x),F||w.setStrong(R,x,k),R}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/own-keys"),u=o("../internals/object-get-own-property-descriptor"),c=o("../internals/object-define-property");i.exports=function(f,d){for(var p=l(d),h=c.f,m=u.f,g=0;g<p.length;g++){var y=p[g];a(f,y)||h(f,y,m(d,y))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(o,i,s){var a=o("../internals/well-known-symbol")("match");i.exports=function(l){var u=/./;try{"/./"[l](u)}catch{try{return u[a]=!1,"/./"[l](u)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(o,i,s){var a=o("../internals/require-object-coercible"),l=/"/g;i.exports=function(p,c,f,d){var p=String(a(p)),h="<"+c;return f!==""&&(h+=" "+f+'="'+String(d).replace(l,"&quot;")+'"'),h+">"+p+"</"+c+">"}},{"../internals/require-object-coercible":114}],37:[function(o,i,s){"use strict";function a(){return this}var l=o("../internals/iterators-core").IteratorPrototype,u=o("../internals/object-create"),c=o("../internals/create-property-descriptor"),f=o("../internals/set-to-string-tag"),d=o("../internals/iterators");i.exports=function(p,h,m){return h+=" Iterator",p.prototype=u(l,{next:c(1,m)}),f(p,h,!1,!0),d[h]=a,p}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=a?function(c,f,d){return l.f(c,f,u(1,d))}:function(c,f,d){return c[f]=d,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(o,i,s){i.exports=function(a,l){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:l}}},{}],40:[function(o,i,s){"use strict";var a=o("../internals/to-primitive"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=function(c,f,d){f=a(f),f in c?l.f(c,f,u(0,d)):c[f]=d}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(b,i,s){"use strict";function a(){return this}var l=b("../internals/export"),u=b("../internals/create-iterator-constructor"),c=b("../internals/object-get-prototype-of"),f=b("../internals/object-set-prototype-of"),d=b("../internals/set-to-string-tag"),p=b("../internals/create-non-enumerable-property"),h=b("../internals/redefine"),m=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),y=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,v=b.BUGGY_SAFARI_ITERATORS,w=m("iterator"),_="values",S="entries";i.exports=function(C,E,T,V,k,F,D){u(T,E,V);function L($){if($===k&&X)return X;if(!v&&$ in U)return U[$];switch($){case"keys":case _:case S:return function(){return new T(this,$)}}return function(){return new T(this)}}var P,R,V=E+" Iterator",G=!1,U=C.prototype,H=U[w]||U["@@iterator"]||k&&U[k],X=!v&&H||L(k),fe=E=="Array"&&U.entries||H;if(fe&&(fe=c(fe.call(new C)),x!==Object.prototype&&fe.next&&(g||c(fe)===x||(f?f(fe,x):typeof fe[w]!="function"&&p(fe,w,a)),d(fe,V,!0,!0),g&&(y[V]=a))),k==_&&H&&H.name!==_&&(G=!0,X=function(){return H.call(this)}),g&&!D||U[w]===X||p(U,w,X),y[E]=X,k)if(P={values:L(_),keys:F?X:L("keys"),entries:L(S)},D)for(R in P)!v&&!G&&R in U||h(U,R,P[R]);else l({target:E,proto:!0,forced:v||G},P);return P}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(o,i,s){var a=o("../internals/path"),l=o("../internals/has"),u=o("../internals/well-known-symbol-wrapped"),c=o("../internals/object-define-property").f;i.exports=function(f){var d=a.Symbol||(a.Symbol={});l(d,f)||c(d,f,{value:u.f(f)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(l,i,s){var a=l("../internals/global"),l=l("../internals/is-object"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(f){return c?u.createElement(f):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(o,i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(o)},{"../internals/engine-user-agent":47}],47:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(u,i,s){var a,l,c=u("../internals/global"),u=u("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?l=(a=c.split("."))[0]+a[1]:u&&(!(a=u.match(/Edge\/(\d+)/))||74<=a[1])&&(a=u.match(/Chrome\/(\d+)/))&&(l=a[1]),i.exports=l&&+l},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(o,i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/object-get-own-property-descriptor").f,u=o("../internals/create-non-enumerable-property"),c=o("../internals/redefine"),f=o("../internals/set-global"),d=o("../internals/copy-constructor-properties"),p=o("../internals/is-forced");i.exports=function(h,m){var g,y,b,x=h.target,v=h.global,w=h.stat,_=v?a:w?a[x]||f(x,{}):(a[x]||{}).prototype;if(_)for(g in m){if(y=m[g],b=h.noTargetGet?(b=l(_,g))&&b.value:_[g],!p(v?g:x+(w?".":"#")+g,h.forced)&&b!==void 0){if(typeof y==typeof b)continue;d(y,b)}(h.sham||b&&b.sham)&&u(y,"sham",!0),c(_,g,y,h)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(o,i,s){i.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(m,i,s){"use strict";m("../modules/es.regexp.exec");var a=m("../internals/redefine"),l=m("../internals/fails"),u=m("../internals/well-known-symbol"),c=m("../internals/regexp-exec"),f=m("../internals/create-non-enumerable-property"),d=u("species"),p=!l(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),h="a".replace(/./,"$0")==="$0",m=u("replace"),g=!!/./[m]&&/./[m]("a","$0")==="",y=!l(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});i.exports=function(b,x,v,w){var _,S,C=u(b),E=!l(function(){var I={};return I[C]=function(){return 7},""[b](I)!=7}),T=E&&!l(function(){var I=!1,k=/a/;return b==="split"&&((k={constructor:{}}).constructor[d]=function(){return k},k.flags="",k[C]=/./[C]),k.exec=function(){return I=!0,null},k[C](""),!I});E&&T&&(b!=="replace"||p&&h&&!g)&&(b!=="split"||y)||(_=/./[C],v=(T=v(C,""[b],function(I,k,F,D,L){return k.exec===c?E&&!L?{done:!0,value:_.call(k,F,D)}:{done:!0,value:I.call(F,k,D)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],S=T[1],a(String.prototype,b,v),a(RegExp.prototype,C,x==2?function(I,k){return S.call(I,this,k)}:function(I){return S.call(I,this)})),w&&f(RegExp.prototype[C],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(o,i,s){"use strict";function a(f,d,p,h,m,g,y,b){for(var x,v=m,w=0,_=!!y&&c(y,b,3);w<h;){if(w in p){if(x=_?_(p[w],w,d):p[w],0<g&&l(x))v=a(f,d,x,u(x.length),v,g-1)-1;else{if(9007199254740991<=v)throw TypeError("Exceed the acceptable array length");f[v]=x}v++}w++}return v}var l=o("../internals/is-array"),u=o("../internals/to-length"),c=o("../internals/function-bind-context");i.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(o,i,s){var a=o("../internals/a-function");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,d){return l.call(u,f,d)};case 3:return function(f,d,p){return l.call(u,f,d,p)}}return function(){return l.apply(u,arguments)}}},{"../internals/a-function":5}],56:[function(o,i,s){"use strict";var a=o("../internals/a-function"),l=o("../internals/is-object"),u=[].slice,c={};i.exports=Function.bind||function(f){var d=a(this),p=u.call(arguments,1),h=function(){var m=p.concat(u.call(arguments));if(this instanceof h){var g=d,y=m.length,b=m;if(!(y in c)){for(var x=[],v=0;v<y;v++)x[v]="a["+v+"]";c[y]=Function("C,a","return new C("+x.join(",")+")")}return c[y](g,b)}return d.apply(f,m)};return l(d.prototype)&&(h.prototype=d.prototype),h}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(o,i,s){function a(c){return typeof c=="function"?c:void 0}var l=o("../internals/path"),u=o("../internals/global");i.exports=function(c,f){return arguments.length<2?a(l[c])||a(u[c]):l[c]&&l[c][f]||u[c]&&u[c][f]}},{"../internals/global":60,"../internals/path":105}],58:[function(o,i,s){var a=o("../internals/classof"),l=o("../internals/iterators"),u=o("../internals/well-known-symbol")("iterator");i.exports=function(c){if(c!=null)return c[u]||c["@@iterator"]||l[a(c)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/get-iterator-method");i.exports=function(u){var c=l(u);if(typeof c!="function")throw TypeError(String(u)+" is not iterable");return a(c.call(u))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(o,i,s){(function(a){function l(u){return u&&u.Math==Math&&u}i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(o,i,s){var a={}.hasOwnProperty;i.exports=function(l,u){return a.call(l,u)}},{}],62:[function(o,i,s){i.exports={}},{}],63:[function(o,i,s){var a=o("../internals/global");i.exports=function(l,u){var c=a.console;c&&c.error&&(arguments.length===1?c.error(l):c.error(l,u))}},{"../internals/global":60}],64:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("document","documentElement")},{"../internals/get-built-in":57}],65:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/document-create-element");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(o,i,s){var a=Math.abs,l=Math.pow,u=Math.floor,c=Math.log,f=Math.LN2;i.exports={pack:function(d,p,v){var m,g,y,b=new Array(v),x=8*v-p-1,v=(1<<x)-1,w=v>>1,_=p===23?l(2,-24)-l(2,-77):0,S=d<0||d===0&&1/d<0?1:0,C=0;for((d=a(d))!=d||d===1/0?(g=d!=d?1:0,m=v):(m=u(c(d)/f),d*(y=l(2,-m))<1&&(m--,y*=2),2<=(d+=1<=m+w?_/y:_*l(2,1-w))*y&&(m++,y/=2),v<=m+w?(g=0,m=v):1<=m+w?(g=(d*y-1)*l(2,p),m+=w):(g=d*l(2,w-1)*l(2,p),m=0));8<=p;b[C++]=255&g,g/=256,p-=8);for(m=m<<p|g,x+=p;0<x;b[C++]=255&m,m/=256,x-=8);return b[--C]|=128*S,b},unpack:function(d,p){var h,m=d.length,v=8*m-p-1,g=(1<<v)-1,y=g>>1,b=v-7,x=m-1,v=d[x--],w=127&v;for(v>>=7;0<b;w=256*w+d[x],x--,b-=8);for(h=w&(1<<-b)-1,w>>=-b,b+=p;0<b;h=256*h+d[x],x--,b-=8);if(w===0)w=1-y;else{if(w===g)return h?NaN:v?-1/0:1/0;h+=l(2,p),w-=y}return(v?-1:1)*h*l(2,w-p)}}},{}],67:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/classof-raw"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/object-set-prototype-of");i.exports=function(u,c,f){return l&&typeof(c=c.constructor)=="function"&&c!==f&&a(c=c.prototype)&&c!==f.prototype&&l(u,c),u}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,i,s){var a=a("../internals/shared-store"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},{"../internals/shared-store":120}],70:[function(o,i,s){function a(b){f(b,h,{value:{objectID:"O"+ ++m,weakData:{}}})}var l=o("../internals/hidden-keys"),u=o("../internals/is-object"),c=o("../internals/has"),f=o("../internals/object-define-property").f,d=o("../internals/uid"),p=o("../internals/freezing"),h=d("meta"),m=0,g=Object.isExtensible||function(){return!0},y=i.exports={REQUIRED:!1,fastKey:function(b,x){if(!u(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!c(b,h)){if(!g(b))return"F";if(!x)return"E";a(b)}return b[h].objectID},getWeakData:function(b,x){if(!c(b,h)){if(!g(b))return!0;if(!x)return!1;a(b)}return b[h].weakData},onFreeze:function(b){return p&&y.REQUIRED&&g(b)&&!c(b,h)&&a(b),b}};l[h]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(v,i,s){var a,l,u,c,f,d,p,h,m=v("../internals/native-weak-map"),w=v("../internals/global"),g=v("../internals/is-object"),y=v("../internals/create-non-enumerable-property"),b=v("../internals/has"),x=v("../internals/shared-key"),v=v("../internals/hidden-keys"),w=w.WeakMap;p=m?(a=new w,l=a.get,u=a.has,c=a.set,f=function(_,S){return c.call(a,_,S),S},d=function(_){return l.call(a,_)||{}},function(_){return u.call(a,_)}):(v[h=x("state")]=!0,f=function(_,S){return y(_,h,S),S},d=function(_){return b(_,h)?_[h]:{}},function(_){return b(_,h)}),i.exports={set:f,get:d,has:p,enforce:function(_){return p(_)?d(_):f(_,{})},getterFor:function(_){return function(S){if(g(S)&&(S=d(S)).type===_)return S;throw TypeError("Incompatible receiver, "+_+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(o,i,s){var a=o("../internals/well-known-symbol"),l=o("../internals/iterators"),u=a("iterator"),c=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=Array.isArray||function(l){return a(l)=="Array"}},{"../internals/classof-raw":28}],74:[function(o,i,s){function a(h,m){return(h=f[c(h)])==p||h!=d&&(typeof m=="function"?l(m):!!m)}var l=o("../internals/fails"),u=/#|\.prototype\./,c=a.normalize=function(h){return String(h).replace(u,".").toLowerCase()},f=a.data={},d=a.NATIVE="N",p=a.POLYFILL="P";i.exports=a},{"../internals/fails":51}],75:[function(o,i,s){i.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(o,i,s){i.exports=!1},{}],77:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("match");i.exports=function(c){var f;return a(c)&&((f=c[u])!==void 0?!!f:l(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(o,i,s){function a(h,m){this.stopped=h,this.result=m}var l=o("../internals/an-object"),u=o("../internals/is-array-iterator-method"),c=o("../internals/to-length"),f=o("../internals/function-bind-context"),d=o("../internals/get-iterator-method"),p=o("../internals/call-with-safe-iteration-closing");(i.exports=function(h,m,g,y,b){var x,v,w,_,S,C,E=f(m,g,y?2:1);if(b)x=h;else{if(typeof(m=d(h))!="function")throw TypeError("Target is not iterable");if(u(m)){for(v=0,w=c(h.length);v<w;v++)if((_=y?E(l(C=h[v])[0],C[1]):E(h[v]))&&_ instanceof a)return _;return new a(!1)}x=m.call(h)}for(S=x.next;!(C=S.call(x)).done;)if(typeof(_=p(x,E,C.value,y))=="object"&&_&&_ instanceof a)return _;return new a(!1)}).stop=function(h){return new a(!0,h)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(d,i,s){"use strict";var a,l,u=d("../internals/object-get-prototype-of"),c=d("../internals/create-non-enumerable-property"),f=d("../internals/has"),p=d("../internals/well-known-symbol"),d=d("../internals/is-pure"),p=p("iterator"),h=!1;[].keys&&("next"in(l=[].keys())?(u=u(u(l)))!==Object.prototype&&(a=u):h=!0),a==null&&(a={}),d||f(a,p)||c(a,p,function(){return this}),i.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(o,i,s){i.exports={}},{}],81:[function(o,i,s){i.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(y,i,s){var a,l,u,c,f,d,p,h,m=y("../internals/global"),S=y("../internals/object-get-own-property-descriptor").f,_=y("../internals/classof-raw"),g=y("../internals/task").set,y=y("../internals/engine-is-ios"),b=m.MutationObserver||m.WebKitMutationObserver,x=m.process,v=m.Promise,w=_(x)=="process",_=S(m,"queueMicrotask"),S=_&&_.value;S||(a=function(){var C,E;for(w&&(C=x.domain)&&C.exit();l;){E=l.fn,l=l.next;try{E()}catch(T){throw l?c():u=void 0,T}}u=void 0,C&&C.enter()},c=w?function(){x.nextTick(a)}:b&&!y?(f=!0,d=document.createTextNode(""),new b(a).observe(d,{characterData:!0}),function(){d.data=f=!f}):v&&v.resolve?(p=v.resolve(void 0),h=p.then,function(){h.call(p,a)}):function(){g.call(m,a)}),i.exports=S||function(C){C={fn:C,next:void 0},u&&(u.next=C),l||(l=C,c()),u=C}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(o,i,s){o=o("../internals/global"),i.exports=o.Promise},{"../internals/global":60}],84:[function(o,i,s){o=o("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/is-pure"),c=l("iterator");i.exports=!a(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),d=f.searchParams,p="";return f.pathname="c%20d",d.forEach(function(h,m){d.delete("b"),p+=m+h}),u&&!f.toJSON||!d.sort||f.href!=="http://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||p!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(a,i,s){var l=a("../internals/global"),a=a("../internals/inspect-source"),l=l.WeakMap;i.exports=typeof l=="function"&&/native code/.test(a(l))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(o,i,s){"use strict";function a(u){var c,f;this.promise=new u(function(d,p){if(c!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");c=d,f=p}),this.resolve=l(c),this.reject=l(f)}var l=o("../internals/a-function");i.exports.f=function(u){return new a(u)}},{"../internals/a-function":5}],88:[function(o,i,s){var a=o("../internals/is-regexp");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":77}],89:[function(o,i,s){var a=o("../internals/global").isFinite;i.exports=Number.isFinite||function(l){return typeof l=="number"&&a(l)}},{"../internals/global":60}],90:[function(o,i,s){"use strict";var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/object-keys"),c=o("../internals/object-get-own-property-symbols"),f=o("../internals/object-property-is-enumerable"),d=o("../internals/to-object"),p=o("../internals/indexed-object"),h=Object.assign,m=Object.defineProperty;i.exports=!h||l(function(){var g,y,b,x;return!(!a||h({b:1},h(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},x="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,x.split("").forEach(function(v){y[v]=v}),h({},g)[b]!=7||u(h({},y)).join("")!=x)})?function(g,y){for(var b=d(g),x=arguments.length,v=1,w=c.f,_=f.f;v<x;)for(var S,C=p(arguments[v++]),E=w?u(C).concat(w(C)):u(C),T=E.length,I=0;I<T;)S=E[I++],a&&!_.call(C,S)||(b[S]=C[S]);return b}:h},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(m,i,s){function a(){}var l,u=m("../internals/an-object"),c=m("../internals/object-define-properties"),f=m("../internals/enum-bug-keys"),d=m("../internals/hidden-keys"),p=m("../internals/html"),h=m("../internals/document-create-element"),m=m("../internals/shared-key"),g="prototype",y="script",b=m("IE_PROTO"),x=function(w){return"<"+y+">"+w+"</"+y+">"},v=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch{}v=l?((w=l).write(x("")),w.close(),_=w.parentWindow.Object,w=null,_):(w=h("iframe"),_="java"+y+":",w.style.display="none",p.appendChild(w),w.src=String(_),(_=w.contentWindow.document).open(),_.write(x("document.F=Object")),_.close(),_.F);for(var w,_,S=f.length;S--;)delete v[g][f[S]];return v()};d[b]=!0,i.exports=Object.create||function(w,_){var S;return w!==null?(a[g]=u(w),S=new a,a[g]=null,S[b]=w):S=v(),_===void 0?S:c(S,_)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/an-object"),c=o("../internals/object-keys");i.exports=a?Object.defineProperties:function(f,d){u(f);for(var p,h=c(d),m=h.length,g=0;g<m;)l.f(f,p=h[g++],d[p]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/ie8-dom-define"),u=o("../internals/an-object"),c=o("../internals/to-primitive"),f=Object.defineProperty;s.f=a?f:function(d,p,h){if(u(d),p=c(p,!0),u(h),l)try{return f(d,p,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(d[p]=h.value),d}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-property-is-enumerable"),u=o("../internals/create-property-descriptor"),c=o("../internals/to-indexed-object"),f=o("../internals/to-primitive"),d=o("../internals/has"),p=o("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;s.f=a?h:function(m,g){if(m=c(m),g=f(g,!0),p)try{return h(m,g)}catch{}if(d(m,g))return u(!l.f.call(m,g),m[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(o,i,s){var a=o("../internals/to-indexed-object"),l=o("../internals/object-get-own-property-names").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(f){if(!c||u.call(f)!="[object Window]")return l(a(f));try{return l(f)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(o,i,s){s.f=Object.getOwnPropertySymbols},{}],98:[function(c,i,s){var a=c("../internals/has"),l=c("../internals/to-object"),u=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),f=u("IE_PROTO"),d=Object.prototype;i.exports=c?Object.getPrototypeOf:function(p){return p=l(p),a(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?d:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/to-indexed-object"),u=o("../internals/array-includes").indexOf,c=o("../internals/hidden-keys");i.exports=function(f,d){var p,h=l(f),m=0,g=[];for(p in h)!a(c,p)&&a(h,p)&&g.push(p);for(;d.length>m;)!a(h,p=d[m++])||~u(g,p)||g.push(p);return g}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys");i.exports=Object.keys||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(o,i,s){"use strict";var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(c){return c=l(this,c),!!c&&c.enumerable}:a},{}],102:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,c=!1,f={};try{(u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),c=f instanceof Array}catch{}return function(d,p){return a(d),l(p),c?u.call(d,p):d.__proto__=p,d}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(o,i,s){"use strict";var a=o("../internals/to-string-tag-support"),l=o("../internals/classof");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(o,i,s){var a=o("../internals/get-built-in"),l=o("../internals/object-get-own-property-names"),u=o("../internals/object-get-own-property-symbols"),c=o("../internals/an-object");i.exports=a("Reflect","ownKeys")||function(f){var d=l.f(c(f)),p=u.f;return p?d.concat(p(f)):d}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(o,i,s){o=o("../internals/global"),i.exports=o},{"../internals/global":60}],106:[function(o,i,s){i.exports=function(a){try{return{error:!1,value:a()}}catch(l){return{error:!0,value:l}}}},{}],107:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/is-object"),u=o("../internals/new-promise-capability");i.exports=function(c,f){return a(c),l(f)&&f.constructor===c?f:((0,(c=u.f(c)).resolve)(f),c.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(o,i,s){var a=o("../internals/redefine");i.exports=function(l,u,c){for(var f in u)a(l,f,u[f],c);return l}},{"../internals/redefine":109}],109:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/create-non-enumerable-property"),u=d("../internals/has"),c=d("../internals/set-global"),f=d("../internals/inspect-source"),d=d("../internals/internal-state"),p=d.get,h=d.enforce,m=String(String).split("String");(i.exports=function(g,y,b,_){var v=!!_&&!!_.unsafe,w=!!_&&!!_.enumerable,_=!!_&&!!_.noTargetGet;typeof b=="function"&&(typeof y!="string"||u(b,"name")||l(b,"name",y),h(b).source=m.join(typeof y=="string"?y:"")),g===a?w?g[y]=b:c(y,b):(v?!_&&g[y]&&(w=!0):delete g[y],w?g[y]=b:l(g,y,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(o,i,s){var a=o("./classof-raw"),l=o("./regexp-exec");i.exports=function(u,c){var f=u.exec;if(typeof f=="function"){if(f=f.call(u,c),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(c,i,s){"use strict";var a,l,u=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),f=RegExp.prototype.exec,d=String.prototype.replace,p=f,h=(a=/a/,l=/b*/g,f.call(a,"a"),f.call(l,"a"),a.lastIndex!==0||l.lastIndex!==0),m=c.UNSUPPORTED_Y||c.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;i.exports=p=h||g||m?function(y){var b,x,v,w,_=this,S=m&&_.sticky,C=u.call(_),E=_.source,T=0,I=y;return S&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),I=String(y).slice(_.lastIndex),0<_.lastIndex&&(!_.multiline||_.multiline&&y[_.lastIndex-1]!==`
`)&&(E="(?: "+E+")",I=" "+I,T++),x=new RegExp("^(?:"+E+")",C)),g&&(x=new RegExp("^"+E+"$(?!\\s)",C)),h&&(b=_.lastIndex),v=f.call(S?x:_,I),S?v?(v.input=v.input.slice(T),v[0]=v[0].slice(T),v.index=_.lastIndex,_.lastIndex+=v[0].length):_.lastIndex=0:h&&v&&(_.lastIndex=_.global?v.index+v[0].length:b),g&&v&&1<v.length&&d.call(v[0],x,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(v[w]=void 0)}),v}:p},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(o,i,s){"use strict";var a=o("../internals/an-object");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},{"../internals/an-object":10}],113:[function(o,i,s){"use strict";o=o("./fails");function a(l,u){return RegExp(l,u)}s.UNSUPPORTED_Y=o(function(){var l=a("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),s.BROKEN_CARET=o(function(){var l=a("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},{"./fails":51}],114:[function(o,i,s){i.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],115:[function(o,i,s){i.exports=Object.is||function(a,l){return a===l?a!==0||1/a==1/l:a!=a&&l!=l}},{}],116:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/create-non-enumerable-property");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(o,i,s){"use strict";var a=o("../internals/get-built-in"),l=o("../internals/object-define-property"),u=o("../internals/well-known-symbol"),c=o("../internals/descriptors"),f=u("species");i.exports=function(p){var p=a(p),h=l.f;c&&p&&!p[f]&&h(p,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(o,i,s){var a=o("../internals/object-define-property").f,l=o("../internals/has"),u=o("../internals/well-known-symbol")("toStringTag");i.exports=function(c,f,d){c&&!l(c=d?c:c.prototype,u)&&a(c,u,{configurable:!0,value:f})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(o,i,s){var a=o("../internals/shared"),l=o("../internals/uid"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(a,i,s){var u=a("../internals/global"),a=a("../internals/set-global"),l="__core-js_shared__",u=u[l]||a(l,{});i.exports=u},{"../internals/global":60,"../internals/set-global":116}],121:[function(o,i,s){var a=o("../internals/is-pure"),l=o("../internals/shared-store");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-function"),u=o("../internals/well-known-symbol")("species");i.exports=function(d,f){var d=a(d).constructor;return d===void 0||(d=a(d)[u])==null?f:l(d)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(o,i,s){var a=o("../internals/fails");i.exports=function(l){return a(function(){var u=""[l]('"');return u!==u.toLowerCase()||3<u.split('"').length})}},{"../internals/fails":51}],124:[function(o,i,s){function a(c){return function(h,m){var p,h=String(u(h)),m=l(m),g=h.length;return m<0||g<=m?c?"":void 0:(p=h.charCodeAt(m))<55296||56319<p||m+1===g||(g=h.charCodeAt(m+1))<56320||57343<g?c?h.charAt(m):p:c?h.slice(m,m+2):g-56320+(p-55296<<10)+65536}}var l=o("../internals/to-integer"),u=o("../internals/require-object-coercible");i.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},{"../internals/engine-user-agent":47}],126:[function(o,i,s){function a(d){return function(g,x,b){var g=String(c(g)),y=g.length,b=b===void 0?" ":String(b),x=l(x);return x<=y||b==""?g:((y=u.call(b,f((x=x-y)/b.length))).length>x&&(y=y.slice(0,x)),d?g+y:y+g)}}var l=o("../internals/to-length"),u=o("../internals/string-repeat"),c=o("../internals/require-object-coercible"),f=Math.ceil;i.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(o,i,s){"use strict";function a(v){return v+22+75*(v<26)}function l(v){var w,_=[],S=(v=function(H){for(var X=[],fe=0,$=H.length;fe<$;){var M,z=H.charCodeAt(fe++);55296<=z&&z<=56319&&fe<$?(64512&(M=H.charCodeAt(fe++)))==56320?X.push(((1023&z)<<10)+(1023&M)+65536):(X.push(z),fe--):X.push(z)}return X}(v)).length,C=128,E=0,T=72;for(D=0;D<v.length;D++)(w=v[D])<128&&_.push(x(w));var I=_.length,k=I;for(I&&_.push("-");k<S;){for(var F=u,D=0;D<v.length;D++)C<=(w=v[D])&&w<F&&(F=w);var L=k+1;if(F-C>b((u-E)/L))throw RangeError(g);for(E+=(F-C)*L,C=F,D=0;D<v.length;D++){if((w=v[D])<C&&++E>u)throw RangeError(g);if(w==C){for(var P=E,R=c;;R+=c){var V=R<=T?1:T+f<=R?f:R-T;if(P<V)break;var G=P-V,U=c-V;_.push(x(a(V+G%U))),P=b(G/U)}_.push(x(a(P))),T=function(H,X,fe){var $=0;for(H=fe?b(H/p):H>>1,H+=b(H/X);y*f>>1<H;$+=c)H=b(H/y);return b($+(y+1)*H/(H+d))}(E,L,k==I),E=0,++k}}++E,++C}return _.join("")}var u=2147483647,c=36,f=26,d=38,p=700,h=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",y=c-1,b=Math.floor,x=String.fromCharCode;i.exports=function(v){for(var w,_=[],S=v.toLowerCase().replace(m,".").split("."),C=0;C<S.length;C++)w=S[C],_.push(h.test(w)?"xn--"+l(w):w);return _.join(".")}},{}],128:[function(o,i,s){"use strict";var a=o("../internals/to-integer"),l=o("../internals/require-object-coercible");i.exports="".repeat||function(u){var c=String(l(this)),f="",d=a(u);if(d<0||d==1/0)throw RangeError("Wrong number of repetitions");for(;0<d;(d>>>=1)&&(c+=c))1&d&&(f+=c);return f}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/whitespaces");i.exports=function(u){return a(function(){return!!l[u]()||"\u200B\x85\u180E"[u]()!="\u200B\x85\u180E"||l[u].name!==u})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(u,i,s){function a(d){return function(p){return p=String(l(p)),1&d&&(p=p.replace(c,"")),p=2&d?p.replace(f,""):p}}var l=u("../internals/require-object-coercible"),u="["+u("../internals/whitespaces")+"]",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$");i.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(y,i,s){function a(k){return function(){I(k)}}function l(k){I(k.data)}function u(k){f.postMessage(k+"",b.protocol+"//"+b.host)}var c,f=y("../internals/global"),d=y("../internals/fails"),p=y("../internals/classof-raw"),h=y("../internals/function-bind-context"),m=y("../internals/html"),g=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),b=f.location,x=f.setImmediate,v=f.clearImmediate,w=f.process,_=f.MessageChannel,S=f.Dispatch,C=0,E={},T="onreadystatechange",I=function(k){var F;E.hasOwnProperty(k)&&(F=E[k],delete E[k],F())};x&&v||(x=function(k){for(var F=[],D=1;D<arguments.length;)F.push(arguments[D++]);return E[++C]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,F)},c(C),C},v=function(k){delete E[k]},p(w)=="process"?c=function(k){w.nextTick(a(k))}:S&&S.now?c=function(k){S.now(a(k))}:_&&!y?(y=(p=new _).port2,p.port1.onmessage=l,c=h(y.postMessage,y,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||d(u)||b.protocol==="file:"?c=T in g("script")?function(k){m.appendChild(g("script"))[T]=function(){m.removeChild(this),I(k)}}:function(k){setTimeout(a(k),0)}:(c=u,f.addEventListener("message",l,!1))),i.exports={set:x,clear:v}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=function(l){if(typeof l!="number"&&a(l)!="Number")throw TypeError("Incorrect invocation");return+l}},{"../internals/classof-raw":28}],133:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.max,u=Math.min;i.exports=function(c,f){return c=a(c),c<0?l(c+f,0):u(c,f)}},{"../internals/to-integer":136}],134:[function(o,i,s){var a=o("../internals/to-integer"),l=o("../internals/to-length");i.exports=function(c){if(c===void 0)return 0;var c=a(c),f=l(c);if(c!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(o,i,s){var a=o("../internals/indexed-object"),l=o("../internals/require-object-coercible");i.exports=function(u){return a(l(u))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(o,i,s){var a=Math.ceil,l=Math.floor;i.exports=function(u){return isNaN(u=+u)?0:(0<u?l:a)(u)}},{}],137:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.min;i.exports=function(u){return 0<u?l(a(u),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(o,i,s){var a=o("../internals/require-object-coercible");i.exports=function(l){return Object(a(l))}},{"../internals/require-object-coercible":114}],139:[function(o,i,s){var a=o("../internals/to-positive-integer");i.exports=function(l,u){if(l=a(l),l%u)throw RangeError("Wrong offset");return l}},{"../internals/to-positive-integer":140}],140:[function(o,i,s){var a=o("../internals/to-integer");i.exports=function(l){if(l=a(l),l<0)throw RangeError("The argument can't be less than 0");return l}},{"../internals/to-integer":136}],141:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l,u){if(!a(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(o,i,s){var a={};a[o("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(o,i,s){"use strict";function a(Te,Fe){for(var $e=0,at=Fe.length,We=new(ne(Te))(at);$e<at;)We[$e]=Fe[$e++];return We}function l(Te,Fe){M(Te,Fe,{get:function(){return fe(this)[Fe]}})}function u(Te){return Te instanceof ae||(Te=I(Te))=="ArrayBuffer"||Te=="SharedArrayBuffer"}function c(Te,Fe){return ye(Te)&&typeof Fe!="symbol"&&Fe in Te&&String(+Fe)==String(Fe)}function f(Te,Fe){return c(Te,Fe=E(Fe,!0))?v(2,Te[Fe]):z(Te,Fe)}function d(Te,Fe,$e){return!(c(Te,Fe=E(Fe,!0))&&k($e)&&T($e,"value"))||T($e,"get")||T($e,"set")||$e.configurable||T($e,"writable")&&!$e.writable||T($e,"enumerable")&&!$e.enumerable?M(Te,Fe,$e):(Te[Fe]=$e.value,Te)}var p=o("../internals/export"),h=o("../internals/global"),m=o("../internals/descriptors"),g=o("../internals/typed-array-constructors-require-wrappers"),y=o("../internals/array-buffer-view-core"),b=o("../internals/array-buffer"),x=o("../internals/an-instance"),v=o("../internals/create-property-descriptor"),w=o("../internals/create-non-enumerable-property"),_=o("../internals/to-length"),S=o("../internals/to-index"),C=o("../internals/to-offset"),E=o("../internals/to-primitive"),T=o("../internals/has"),I=o("../internals/classof"),k=o("../internals/is-object"),F=o("../internals/object-create"),D=o("../internals/object-set-prototype-of"),L=o("../internals/object-get-own-property-names").f,P=o("../internals/typed-array-from"),R=o("../internals/array-iteration").forEach,V=o("../internals/set-species"),G=o("../internals/object-define-property"),U=o("../internals/object-get-own-property-descriptor"),H=o("../internals/internal-state"),X=o("../internals/inherit-if-required"),fe=H.get,$=H.set,M=G.f,z=U.f,q=Math.round,ee=h.RangeError,ae=b.ArrayBuffer,Q=b.DataView,le=y.NATIVE_ARRAY_BUFFER_VIEWS,ie=y.TYPED_ARRAY_TAG,K=y.TypedArray,ge=y.TypedArrayPrototype,ne=y.aTypedArrayConstructor,ye=y.isTypedArray,xe="BYTES_PER_ELEMENT",De="Wrong length";m?(le||(U.f=f,G.f=d,l(ge,"buffer"),l(ge,"byteOffset"),l(ge,"byteLength"),l(ge,"length")),p({target:"Object",stat:!0,forced:!le},{getOwnPropertyDescriptor:f,defineProperty:d}),i.exports=function(Be,Fe,$e){function at(Ge,de){M(Ge,de,{get:function(){var me=this,oe=de;return(me=fe(me)).view[_t](oe*We+me.byteOffset,!0)},set:function(me){var oe=this,be=de;oe=fe(oe),$e&&(me=(me=q(me))<0?0:255<me?255:255&me),oe.view[kt](be*We+oe.byteOffset,me,!0)},enumerable:!0})}var We=Be.match(/\d+$/)[0]/8,jt=Be+($e?"Clamped":"")+"Array",_t="get"+Be,kt="set"+Be,Rt=h[jt],Mt=Rt,Be=Mt&&Mt.prototype,ut={};le?g&&(Mt=Fe(function(Ge,de,me,oe){return x(Ge,Mt,jt),X(k(de)?u(de)?oe!==void 0?new Rt(de,C(me,We),oe):me!==void 0?new Rt(de,C(me,We)):new Rt(de):ye(de)?a(Mt,de):P.call(Mt,de):new Rt(S(de)),Ge,Mt)}),D&&D(Mt,K),R(L(Rt),function(Ge){Ge in Mt||w(Mt,Ge,Rt[Ge])}),Mt.prototype=Be):(Mt=Fe(function(Ge,de,me,oe){x(Ge,Mt,jt);var be,Oe,Ve=0,Qe=0;if(k(de)){if(!u(de))return ye(de)?a(Mt,de):P.call(Mt,de);var St=de,Qe=C(me,We),me=de.byteLength;if(oe===void 0){if(me%We||(be=me-Qe)<0)throw ee(De)}else if(me<(be=_(oe)*We)+Qe)throw ee(De);Oe=be/We}else Oe=S(de),St=new ae(be=Oe*We);for($(Ge,{buffer:St,byteOffset:Qe,byteLength:be,length:Oe,view:new Q(St)});Ve<Oe;)at(Ge,Ve++)}),D&&D(Mt,K),Be=Mt.prototype=F(ge)),Be.constructor!==Mt&&w(Be,"constructor",Mt),ie&&w(Be,ie,jt),ut[jt]=Mt,p({global:!0,forced:Mt!=Rt,sham:!le},ut),xe in Mt||w(Mt,xe,We),xe in Be||w(Be,xe,We),V(jt)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(c,i,s){var a=c("../internals/global"),l=c("../internals/fails"),u=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=a.ArrayBuffer,d=a.Int8Array;i.exports=!c||!l(function(){d(1)})||!l(function(){new d(-1)})||!u(function(p){new d,new d(null),new d(1.5),new d(p)},!0)||l(function(){return new d(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(o,i,s){var a=o("../internals/to-object"),l=o("../internals/to-length"),u=o("../internals/get-iterator-method"),c=o("../internals/is-array-iterator-method"),f=o("../internals/function-bind-context"),d=o("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(p){var h,m,g,y,b,x,v=a(p),w=arguments.length,_=1<w?arguments[1]:void 0,S=_!==void 0,C=u(v);if(C!=null&&!c(C))for(x=(b=C.call(v)).next,v=[];!(y=x.call(b)).done;)v.push(y.value);for(S&&2<w&&(_=f(_,arguments[2],2)),m=l(v.length),g=new(d(this))(m),h=0;h<m;h++)g[h]=S?_(v[h],h):v[h];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(o,i,s){var a=0,l=Math.random();i.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++a+l).toString(36)}},{}],147:[function(o,i,s){o=o("../internals/native-symbol"),i.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(o,i,s){o=o("../internals/well-known-symbol"),s.f=o},{"../internals/well-known-symbol":149}],149:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/shared"),u=d("../internals/has"),c=d("../internals/uid"),f=d("../internals/native-symbol"),d=d("../internals/use-symbol-as-uid"),p=l("wks"),h=a.Symbol,m=d?h:h&&h.withoutSetter||c;i.exports=function(g){return u(p,g)||(f&&u(h,g)?p[g]=h[g]:p[g]=m("Symbol."+g)),p[g]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(o,i,s){i.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],151:[function(u,i,s){"use strict";var a=u("../internals/export"),l=u("../internals/global"),f=u("../internals/array-buffer"),u=u("../internals/set-species"),c="ArrayBuffer",f=f[c];a({global:!0,forced:l[c]!==f},{ArrayBuffer:f}),u(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(v,i,s){"use strict";var a=v("../internals/export"),l=v("../internals/fails"),u=v("../internals/is-array"),c=v("../internals/is-object"),f=v("../internals/to-object"),d=v("../internals/to-length"),p=v("../internals/create-property"),h=v("../internals/array-species-create"),m=v("../internals/array-method-has-species-support"),x=v("../internals/well-known-symbol"),v=v("../internals/engine-v8-version"),g=x("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",x=51<=v||!l(function(){var w=[];return w[g]=!1,w.concat()[0]!==w}),v=m("concat");a({target:"Array",proto:!0,forced:!x||!v},{concat:function(w){for(var _,S,C,E,T,I=f(this),k=h(I,0),F=0,D=-1,L=arguments.length;D<L;D++)if(T=void 0,!c(E=C=D===-1?I:arguments[D])||((T=E[g])!==void 0?!T:!u(E))){if(y<=F)throw TypeError(b);p(k,F++,C)}else{if(S=d(C.length),y<F+S)throw TypeError(b);for(_=0;_<S;_++,F++)_ in C&&p(k,F,C[_])}return k.length=F,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-copy-within"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:l}),u("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").every,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("every"),c=c("every");a({target:"Array",proto:!0,forced:!u||!c},{every:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-fill"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:l}),u("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").filter,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("filter"),c=c("filter");a({target:"Array",proto:!0,forced:!u||!c},{filter:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-iteration").findIndex,u=d("../internals/add-to-unscopables"),d=d("../internals/array-method-uses-to-length"),c="findIndex",f=!0,d=d(c);c in[]&&Array(1)[c](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!d},{findIndex:function(p){return l(this,p,1<arguments.length?arguments[1]:void 0)}}),u(c)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/a-function"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(p){var h,m=u(this),g=c(m.length);return f(p),(h=d(m,0)).length=l(h,m,m,g,0,1,p,1<arguments.length?arguments[1]:void 0),h}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var p=arguments.length?arguments[0]:void 0,h=u(this),m=c(h.length),g=d(h,0);return g.length=l(g,h,h,m,0,p===void 0?1:f(p)),g}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/array-from");a({target:"Array",stat:!0,forced:!o("../internals/check-correctness-of-iteration")(function(u){Array.from(u)})},{from:l})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/array-includes").includes,u=o("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!o("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return l(this,c,1<arguments.length?arguments[1]:void 0)}}),u("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-includes").indexOf,f=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),u=[].indexOf,c=!!u&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!f||!d},{indexOf:function(p){return c?u.apply(this,arguments)||0:l(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(f,i,s){"use strict";var a=f("../internals/to-indexed-object"),l=f("../internals/add-to-unscopables"),u=f("../internals/iterators"),c=f("../internals/internal-state"),f=f("../internals/define-iterator"),d="Array Iterator",p=c.set,h=c.getterFor(d);i.exports=f(Array,"Array",function(m,g){p(this,{type:d,target:a(m),index:0,kind:g})},function(){var m=h(this),g=m.target,y=m.kind,b=m.index++;return!g||b>=g.length?{value:m.target=void 0,done:!0}:y=="keys"?{value:b,done:!1}:y=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(f,i,s){"use strict";var a=f("../internals/export"),c=f("../internals/indexed-object"),l=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),u=[].join,c=c!=Object,f=f("join",",");a({target:"Array",proto:!0,forced:c||!f},{join:function(d){return u.call(l(this),d===void 0?",":d)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").map,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("map"),c=c("map");a({target:"Array",proto:!0,forced:!u||!c},{map:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(g,i,s){"use strict";var a=g("../internals/export"),l=g("../internals/is-object"),u=g("../internals/is-array"),c=g("../internals/to-absolute-index"),f=g("../internals/to-length"),d=g("../internals/to-indexed-object"),p=g("../internals/create-property"),h=g("../internals/well-known-symbol"),m=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),m=m("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),y=h("species"),b=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!m||!g},{slice:function(v,w){var _,S,C,E=d(this),T=f(E.length),I=c(v,T),k=c(w===void 0?T:w,T);if(u(E)&&((_=typeof(_=E.constructor)=="function"&&(_===Array||u(_.prototype))||l(_)&&(_=_[y])===null?void 0:_)===Array||_===void 0))return b.call(E,I,k);for(S=new(_===void 0?Array:_)(x(k-I,0)),C=0;I<k;I++,C++)I in E&&p(S,C,E[I]);return S.length=C,S}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").some,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("some"),c=c("some");a({target:"Array",proto:!0,forced:!u||!c},{some:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(m,i,s){"use strict";var a=m("../internals/export"),l=m("../internals/to-absolute-index"),u=m("../internals/to-integer"),c=m("../internals/to-length"),f=m("../internals/to-object"),d=m("../internals/array-species-create"),p=m("../internals/create-property"),h=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),h=h("splice"),m=m("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,y=Math.min;a({target:"Array",proto:!0,forced:!h||!m},{splice:function(F,x){var v,w,_,S,C,E,T=f(this),I=c(T.length),k=l(F,I),F=arguments.length;if(F===0?v=w=0:w=F===1?(v=0,I-k):(v=F-2,y(g(u(x),0),I-k)),9007199254740991<I+v-w)throw TypeError("Maximum allowed length exceeded");for(_=d(T,w),S=0;S<w;S++)(C=k+S)in T&&p(_,S,T[C]);if(v<(_.length=w)){for(S=k;S<I-w;S++)E=S+v,(C=S+w)in T?T[E]=T[C]:delete T[E];for(S=I;I-w+v<S;S--)delete T[S-1]}else if(w<v)for(S=I-w;k<S;S--)E=S+v-1,(C=S+w-1)in T?T[E]=T[C]:delete T[E];for(S=0;S<v;S++)T[S+k]=arguments[S+2];return T.length=I-w+v,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(o,i,s){o("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(o,i,s){o("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(l,i,s){var a=l("../internals/descriptors"),l=l("../internals/object-define-property").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/;!a||"name"in u||l(u,"name",{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(a,i,s){var a=a("../internals/export"),l=Math.hypot,u=Math.abs,c=Math.sqrt;a({target:"Math",stat:!0,forced:!!l&&l(1/0,NaN)!==1/0},{hypot:function(f,d){for(var p,h,m=0,g=0,y=arguments.length,b=0;g<y;)b<(p=u(arguments[g++]))?(m=m*(h=b/p)*h+1,b=p):m+=0<p?(h=p/b)*h:p;return b===1/0?1/0:b*c(m)}})},{"../internals/export":50}],176:[function(a,i,s){var a=a("../internals/export"),l=Math.log,u=Math.LN2;a({target:"Math",stat:!0},{log2:function(c){return l(c)/u}})},{"../internals/export":50}],177:[function(o,i,s){o("../internals/export")({target:"Math",stat:!0},{sign:o("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(o,i,s){"use strict";function a(D){var L,P,R,V,G,U,H,X=m(D,!1);if(typeof X=="string"&&2<X.length){if((D=(X=w(X)).charCodeAt(0))===43||D===45){if((L=X.charCodeAt(2))===88||L===120)return NaN}else if(D===48){switch(X.charCodeAt(1)){case 66:case 98:P=2,R=49;break;case 79:case 111:P=8,R=55;break;default:return+X}for(G=(V=X.slice(2)).length,U=0;U<G;U++)if((H=V.charCodeAt(U))<48||R<H)return NaN;return parseInt(V,P)}}return+X}var l=o("../internals/descriptors"),u=o("../internals/global"),c=o("../internals/is-forced"),f=o("../internals/redefine"),d=o("../internals/has"),p=o("../internals/classof-raw"),h=o("../internals/inherit-if-required"),m=o("../internals/to-primitive"),g=o("../internals/fails"),y=o("../internals/object-create"),b=o("../internals/object-get-own-property-names").f,x=o("../internals/object-get-own-property-descriptor").f,v=o("../internals/object-define-property").f,w=o("../internals/string-trim").trim,_="Number",S=u[_],C=S.prototype,E=p(y(C))==_;if(c(_,!S(" 0o1")||!S("0b1")||S("+0x1"))){for(var T,I=function(L){var L=arguments.length<1?0:L,P=this;return P instanceof I&&(E?g(function(){C.valueOf.call(P)}):p(P)!=_)?h(new S(a(L)),P,I):a(L)},k=l?b(S):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;k.length>F;F++)d(S,T=k[F])&&!d(I,T)&&v(I,T,x(S,T));(I.prototype=C).constructor=I,f(u,_,I)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(o,i,s){o("../internals/export")({target:"Number",stat:!0},{isFinite:o("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(d,i,s){"use strict";function a(m,g,y){return g===0?y:g%2==1?a(m,g-1,y*m):a(m*m,g/2,y)}var l=d("../internals/export"),u=d("../internals/to-integer"),c=d("../internals/this-number-value"),f=d("../internals/string-repeat"),d=d("../internals/fails"),p=1 .toFixed,h=Math.floor;l({target:"Number",proto:!0,forced:p&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!d(function(){p.call({})})},{toFixed:function(_){function g(T,I){for(var k=-1,F=I;++k<6;)F+=T*S[k],S[k]=F%1e7,F=h(F/1e7)}function y(T){for(var I=6,k=0;0<=--I;)k+=S[I],S[I]=h(k/T),k=k%T*1e7}function b(){for(var T,I=6,k="";0<=--I;)k===""&&I!==0&&S[I]===0||(T=String(S[I]),k=k===""?T:k+f.call("0",7-T.length)+T);return k}var x,v,w=c(this),_=u(_),S=[0,0,0,0,0,0],C="",E="0";if(_<0||20<_)throw RangeError("Incorrect fraction digits");if(w!=w)return"NaN";if(w<=-1e21||1e21<=w)return String(w);if(w<0&&(C="-",w=-w),1e-21<w)if(w=(x=function(T){for(var I=0,k=T;4096<=k;)I+=12,k/=4096;for(;2<=k;)I+=1,k/=2;return I}(w*a(2,69,1))-69)<0?w*a(2,-x,1):w/a(2,x,1),w*=4503599627370496,0<(x=52-x)){for(g(0,w),v=_;7<=v;)g(1e7,0),v-=7;for(g(a(10,v,1),0),v=x-1;23<=v;)y(1<<23),v-=23;y(1<<v),g(1,1),y(2),E=b()}else g(0,w),g(1<<-x,0),E=b()+f.call("0",_);return E=0<_?C+((w=E.length)<=_?"0."+f.call("0",_-w)+E:E.slice(0,w-_)+"."+E.slice(w-_)):C+E}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==l},{assign:l})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/iterate"),u=o("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(c){var f={};return l(c,function(d,p){u(f,d,p)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(c,i,s){var a=c("../internals/export"),f=c("../internals/fails"),l=c("../internals/to-indexed-object"),u=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),f=f(function(){u(1)});a({target:"Object",stat:!0,forced:!c||f,sham:!c},{getOwnPropertyDescriptor:function(d,p){return u(l(d),p)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/fails"),u=u("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:l(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:u})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(f,i,s){var a=f("../internals/export"),l=f("../internals/fails"),u=f("../internals/to-object"),c=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:l(function(){c(1)}),sham:!f},{getPrototypeOf:function(d){return c(u(d))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/to-object"),u=o("../internals/object-keys");a({target:"Object",stat:!0,forced:o("../internals/fails")(function(){u(1)})},{keys:function(c){return u(l(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(u,i,s){var a=u("../internals/to-string-tag-support"),l=u("../internals/redefine"),u=u("../internals/object-to-string");a||l(Object.prototype,"toString",u,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function($e,i,s){"use strict";var a,l,u,c,f=$e("../internals/export"),d=$e("../internals/is-pure"),p=$e("../internals/global"),h=$e("../internals/get-built-in"),m=$e("../internals/native-promise-constructor"),g=$e("../internals/redefine"),y=$e("../internals/redefine-all"),b=$e("../internals/set-to-string-tag"),x=$e("../internals/set-species"),v=$e("../internals/is-object"),w=$e("../internals/a-function"),_=$e("../internals/an-instance"),S=$e("../internals/classof-raw"),C=$e("../internals/inspect-source"),E=$e("../internals/iterate"),T=$e("../internals/check-correctness-of-iteration"),I=$e("../internals/species-constructor"),k=$e("../internals/task").set,F=$e("../internals/microtask"),D=$e("../internals/promise-resolve"),L=$e("../internals/host-report-errors"),P=$e("../internals/new-promise-capability"),R=$e("../internals/perform"),V=$e("../internals/internal-state"),G=$e("../internals/is-forced"),at=$e("../internals/well-known-symbol"),U=$e("../internals/engine-v8-version"),H=at("species"),X="Promise",fe=V.get,$=V.set,M=V.getterFor(X),z=m,q=p.TypeError,ee=p.document,ae=p.process,Q=h("fetch"),le=P.f,ie=le,K=S(ae)=="process",ge=!!(ee&&ee.createEvent&&p.dispatchEvent),ne="unhandledrejection",ye="rejectionhandled",xe=1,De=2,Te=1,Fe=2,$e=G(X,function(){var ut,Ge;return C(z)===String(z)&&(U===66||!K&&typeof PromiseRejectionEvent!="function")?!0:!(!d||z.prototype.finally)||!(51<=U&&/native code/.test(z))&&(Ge=function(de){de(function(){},function(){})},((ut=z.resolve(1)).constructor={})[H]=Ge,!(ut.then(function(){})instanceof Ge))}),at=$e||!T(function(ut){z.all(ut).catch(function(){})}),We=function(ut){var Ge;return!(!v(ut)||typeof(Ge=ut.then)!="function")&&Ge},jt=function(ut,Ge,de){var me;Ge.notified||(Ge.notified=!0,me=Ge.reactions,F(function(){for(var oe,be,Oe=Ge.value,Ve=Ge.state==xe,Qe=0;me.length>Qe;){var St,Nt,Ft,Ut=me[Qe++],en=Ve?Ut.ok:Ut.fail,Lr=Ut.resolve,ur=Ut.reject,Yr=Ut.domain;try{en?(Ve||(Ge.rejection===Fe&&function(Rr,hi){k.call(p,function(){K?ae.emit("rejectionHandled",Rr):_t(ye,Rr,hi.value)})}(ut,Ge),Ge.rejection=Te),en===!0?St=Oe:(Yr&&Yr.enter(),St=en(Oe),Yr&&(Yr.exit(),Ft=!0)),St===Ut.promise?ur(q("Promise-chain cycle")):(Nt=We(St))?Nt.call(St,Lr,ur):Lr(St)):ur(Oe)}catch(Rr){Yr&&!Ft&&Yr.exit(),ur(Rr)}}Ge.reactions=[],Ge.notified=!1,de&&!Ge.rejection&&(oe=ut,be=Ge,k.call(p,function(){var Rr=be.value,hi=kt(be);if(hi&&(hi=R(function(){K?ae.emit("unhandledRejection",Rr,oe):_t(ne,oe,Rr)}),be.rejection=K||kt(be)?Fe:Te,hi.error))throw hi.value}))}))},_t=function(ut,Ge,de){var me;ge?((me=ee.createEvent("Event")).promise=Ge,me.reason=de,me.initEvent(ut,!1,!0),p.dispatchEvent(me)):me={promise:Ge,reason:de},(Ge=p["on"+ut])?Ge(me):ut===ne&&L("Unhandled promise rejection",de)},kt=function(ut){return ut.rejection!==Te&&!ut.parent},Rt=function(ut,Ge,de,me){return function(oe){ut(Ge,de,oe,me)}},Mt=function(ut,Ge,de,me){Ge.done||(Ge.done=!0,(Ge=me||Ge).value=de,Ge.state=De,jt(ut,Ge,!0))},Be=function(ut,Ge,de,me){if(!Ge.done){Ge.done=!0,me&&(Ge=me);try{if(ut===de)throw q("Promise can't be resolved itself");var oe=We(de);oe?F(function(){var be={done:!1};try{oe.call(de,Rt(Be,ut,be,Ge),Rt(Mt,ut,be,Ge))}catch(Oe){Mt(ut,be,Oe,Ge)}}):(Ge.value=de,Ge.state=xe,jt(ut,Ge,!1))}catch(be){Mt(ut,{done:!1},be,Ge)}}};$e&&(z=function(ut){_(this,z,X),w(ut),a.call(this);var Ge=fe(this);try{ut(Rt(Be,this,Ge),Rt(Mt,this,Ge))}catch(de){Mt(this,Ge,de)}},(a=function(ut){$(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(z.prototype,{then:function(ut,Ge){var de=M(this),me=le(I(this,z));return me.ok=typeof ut!="function"||ut,me.fail=typeof Ge=="function"&&Ge,me.domain=K?ae.domain:void 0,de.parent=!0,de.reactions.push(me),de.state!=0&&jt(this,de,!1),me.promise},catch:function(ut){return this.then(void 0,ut)}}),l=function(){var ut=new a,Ge=fe(ut);this.promise=ut,this.resolve=Rt(Be,ut,Ge),this.reject=Rt(Mt,ut,Ge)},P.f=le=function(ut){return ut===z||ut===u?new l:ie(ut)},d||typeof m!="function"||(c=m.prototype.then,g(m.prototype,"then",function(ut,Ge){var de=this;return new z(function(me,oe){c.call(de,me,oe)}).then(ut,Ge)},{unsafe:!0}),typeof Q=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ut){return D(z,Q.apply(p,arguments))}}))),f({global:!0,wrap:!0,forced:$e},{Promise:z}),b(z,X,!1,!0),x(X),u=h(X),f({target:X,stat:!0,forced:$e},{reject:function(ut){var Ge=le(this);return Ge.reject.call(void 0,ut),Ge.promise}}),f({target:X,stat:!0,forced:d||$e},{resolve:function(ut){return D(d&&this===u?z:this,ut)}}),f({target:X,stat:!0,forced:at},{all:function(ut){var Ge=this,de=le(Ge),me=de.resolve,oe=de.reject,be=R(function(){var Oe=w(Ge.resolve),Ve=[],Qe=0,St=1;E(ut,function(Nt){var Ft=Qe++,Ut=!1;Ve.push(void 0),St++,Oe.call(Ge,Nt).then(function(en){Ut||(Ut=!0,Ve[Ft]=en,--St||me(Ve))},oe)}),--St||me(Ve)});return be.error&&oe(be.value),de.promise},race:function(ut){var Ge=this,de=le(Ge),me=de.reject,oe=R(function(){var be=w(Ge.resolve);E(ut,function(Oe){be.call(Ge,Oe).then(de.resolve,me)})});return oe.error&&me(oe.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(p,i,s){var a=p("../internals/export"),y=p("../internals/get-built-in"),l=p("../internals/a-function"),u=p("../internals/an-object"),c=p("../internals/is-object"),f=p("../internals/object-create"),d=p("../internals/function-bind"),p=p("../internals/fails"),h=y("Reflect","construct"),m=p(function(){function b(){}return!(h(function(){},[],b)instanceof b)}),g=!p(function(){h(function(){})}),y=m||g;a({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(b,x){l(b),u(x);var v=arguments.length<3?b:l(arguments[2]);if(g&&!m)return h(b,x,v);if(b==v){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var w=[null];return w.push.apply(w,x),new(d.apply(b,w))}return w=v.prototype,v=f(c(w)?w:Object.prototype),w=Function.apply.call(b,v,x),c(w)?w:v}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/is-object"),u=o("../internals/an-object"),c=o("../internals/has"),f=o("../internals/object-get-own-property-descriptor"),d=o("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function p(h,m){var g,y=arguments.length<3?h:arguments[2];return u(h)===y?h[m]:(g=f.f(h,m))?c(g,"value")?g.value:g.get===void 0?void 0:g.get.call(y):l(g=d(h))?p(g,m,y):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/inherit-if-required"),f=o("../internals/object-define-property").f,d=o("../internals/object-get-own-property-names").f,p=o("../internals/is-regexp"),h=o("../internals/regexp-flags"),m=o("../internals/regexp-sticky-helpers"),g=o("../internals/redefine"),y=o("../internals/fails"),b=o("../internals/internal-state").set,x=o("../internals/set-species"),v=o("../internals/well-known-symbol")("match"),w=l.RegExp,_=w.prototype,S=/a/g,C=/a/g,E=new w(S)!==S,T=m.UNSUPPORTED_Y;if(a&&u("RegExp",!E||T||y(function(){return C[v]=!1,w(S)!=S||w(C)==C||w(S,"i")!="/a/i"}))){for(var I=function(D,L){var P,R=this instanceof I,V=p(D),G=L===void 0;return!R&&V&&D.constructor===I&&G?D:(E?V&&!G&&(D=D.source):D instanceof I&&(G&&(L=h.call(D)),D=D.source),T&&(P=!!L&&-1<L.indexOf("y"))&&(L=L.replace(/y/g,"")),V=c(E?new w(D,L):w(D,L),R?this:_,I),T&&P&&b(V,{sticky:P}),V)},k=d(w),F=0;k.length>F;)(function(D){D in I||f(I,D,{configurable:!0,get:function(){return w[D]},set:function(L){w[D]=L}})})(k[F++]);(_.constructor=I).prototype=_,g(l,"RegExp",I)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(c,i,s){"use strict";var a=c("../internals/redefine"),l=c("../internals/an-object"),p=c("../internals/fails"),u=c("../internals/regexp-flags"),c="toString",f=RegExp.prototype,d=f[c],p=p(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),h=d.name!=c;(p||h)&&a(RegExp.prototype,c,function(){var m=l(this),g=String(m.source),y=m.flags;return"/"+g+"/"+String(y===void 0&&m instanceof RegExp&&!("flags"in f)?u.call(m):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Set",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),m=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".endsWith,h=Math.min,m=m("endsWith");a({target:"String",proto:!0,forced:!!(d||m||!(a=l(String.prototype,"endsWith"))||a.writable)&&!m},{endsWith:function(g){var y=String(f(this)),b=(c(g),1<arguments.length?arguments[1]:void 0),x=u(y.length),b=b===void 0?x:h(u(b),x),x=String(g);return p?p.call(y,x,b):y.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/not-a-regexp"),u=o("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!o("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(u(this)).indexOf(l(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(u,i,s){"use strict";var a=u("../internals/string-multibyte").charAt,l=u("../internals/internal-state"),u=u("../internals/define-iterator"),c="String Iterator",f=l.set,d=l.getterFor(c);u(String,"String",function(p){f(this,{type:c,string:String(p),index:0})},function(){var p=d(this),h=p.string,m=p.index;return m>=h.length?{value:void 0,done:!0}:(h=a(h,m),p.index+=h.length,{value:h,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-length"),c=o("../internals/require-object-coercible"),f=o("../internals/advance-string-index"),d=o("../internals/regexp-exec-abstract");a("match",1,function(p,h,m){return[function(g){var y=c(this),b=g?.[p];return b!==void 0?b.call(g,y):new RegExp(g)[p](String(y))},function(g){var y=m(h,g,this);if(y.done)return y.value;var b=l(g),x=String(this);if(!b.global)return d(b,x);for(var v=b.unicode,w=[],_=b.lastIndex=0;(S=d(b,x))!==null;){var S=String(S[0]);(w[_]=S)===""&&(b.lastIndex=f(x,u(b.lastIndex),v)),_++}return _===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-pad").start;a({target:"String",proto:!0,forced:o("../internals/string-pad-webkit-bug")},{padStart:function(u){return l(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(o,i,s){o("../internals/export")({target:"String",proto:!0},{repeat:o("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/require-object-coercible"),p=o("../internals/advance-string-index"),h=o("../internals/regexp-exec-abstract"),m=Math.max,g=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;a("replace",2,function(v,w,_,S){var C=S.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=S.REPLACE_KEEPS_$0,T=C?"$":"$0";return[function(I,k){var F=d(this),D=I?.[v];return D!==void 0?D.call(I,F,k):w.call(String(F),I,k)},function(I,k){if(!C&&E||typeof k=="string"&&k.indexOf(T)===-1){var F=_(w,I,this,k);if(F.done)return F.value}for(var D,L=l(I),P=String(this),R=typeof k=="function",V=(R||(k=String(k)),L.global),G=(V&&(D=L.unicode,L.lastIndex=0),[]);($=h(L,P))!==null&&(G.push($),V);)String($[0])===""&&(L.lastIndex=p(P,c(L.lastIndex),D));for(var U,H="",X=0,fe=0;fe<G.length;fe++){for(var $=G[fe],M=String($[0]),z=m(g(f($.index),P.length),0),q=[],ee=1;ee<$.length;ee++)q.push((U=$[ee])===void 0?U:String(U));var ae=$.groups,Q=R?(Q=[M].concat(q,z,P),ae!==void 0&&Q.push(ae),String(k.apply(void 0,Q))):function(le,ie,K,ge,ne,ye){var xe=K+le.length,De=ge.length,Te=x;return ne!==void 0&&(ne=u(ne),Te=b),w.call(ye,Te,function(Fe,$e){var at;switch($e.charAt(0)){case"$":return"$";case"&":return le;case"`":return ie.slice(0,K);case"'":return ie.slice(xe);case"<":at=ne[$e.slice(1,-1)];break;default:var We,jt=+$e;if(jt==0)return Fe;if(De<jt)return(We=y(jt/10))!==0&&We<=De?ge[We-1]===void 0?$e.charAt(1):ge[We-1]+$e.charAt(1):Fe;at=ge[jt-1]}return at===void 0?"":at})}(M,P,z,q,ae,k);X<=z&&(H+=P.slice(X,z)+Q,X=z+M.length)}return H+P.slice(X)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/require-object-coercible"),c=o("../internals/same-value"),f=o("../internals/regexp-exec-abstract");a("search",1,function(d,p,h){return[function(m){var g=u(this),y=m?.[d];return y!==void 0?y.call(m,g):new RegExp(m)[d](String(g))},function(m){var g,y=h(p,m,this);return y.done?y.value:(y=l(m),m=String(this),g=y.lastIndex,c(g,0)||(y.lastIndex=0),m=f(y,m),c(y.lastIndex,g)||(y.lastIndex=g),m===null?-1:m.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(g,i,s){"use strict";var a=g("../internals/fix-regexp-well-known-symbol-logic"),l=g("../internals/is-regexp"),u=g("../internals/an-object"),c=g("../internals/require-object-coercible"),f=g("../internals/species-constructor"),d=g("../internals/advance-string-index"),p=g("../internals/to-length"),h=g("../internals/regexp-exec-abstract"),m=g("../internals/regexp-exec"),g=g("../internals/fails"),y=[].push,b=Math.min,x=4294967295,v=!g(function(){return!RegExp(x,"y")});a("split",2,function(w,_,S){var C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(E,T){var I=String(c(this)),k=T===void 0?x:T>>>0;if(k==0)return[];if(E===void 0)return[I];if(!l(E))return _.call(I,E,k);for(var F,D,L,P=[],T=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),R=0,V=new RegExp(E.source,T+"g");(F=m.call(V,I))&&!(R<(D=V.lastIndex)&&(P.push(I.slice(R,F.index)),1<F.length&&F.index<I.length&&y.apply(P,F.slice(1)),L=F[0].length,R=D,P.length>=k));)V.lastIndex===F.index&&V.lastIndex++;return R===I.length?!L&&V.test("")||P.push(""):P.push(I.slice(R)),P.length>k?P.slice(0,k):P}:"0".split(void 0,0).length?function(E,T){return E===void 0&&T===0?[]:_.call(this,E,T)}:_;return[function(E,T){var I=c(this),k=E?.[w];return k!==void 0?k.call(E,I,T):C.call(String(I),E,T)},function(F,T){var I=S(C,F,this,T,C!==_);if(I.done)return I.value;var I=u(F),k=String(this),F=f(I,RegExp),D=I.unicode,L=(I.ignoreCase?"i":"")+(I.multiline?"m":"")+(I.unicode?"u":"")+(v?"y":"g"),P=new F(v?I:"^(?:"+I.source+")",L),R=T===void 0?x:T>>>0;if(R==0)return[];if(k.length===0)return h(P,k)===null?[k]:[];for(var V=0,G=0,U=[];G<k.length;){P.lastIndex=v?G:0;var H,X=h(P,v?k:k.slice(G));if(X===null||(H=b(p(P.lastIndex+(v?0:G)),k.length))===V)G=d(k,G,D);else{if(U.push(k.slice(V,G)),U.length===R)return U;for(var fe=1;fe<=X.length-1;fe++)if(U.push(X[fe]),U.length===R)return U;G=V=H}}return U.push(k.slice(V)),U}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),m=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".startsWith,h=Math.min,m=m("startsWith");a({target:"String",proto:!0,forced:!!(d||m||!(a=l(String.prototype,"startsWith"))||a.writable)&&!m},{startsWith:function(x){var y=String(f(this)),b=(c(x),u(h(1<arguments.length?arguments[1]:void 0,y.length))),x=String(x);return p?p.call(y,x,b):y.slice(b,b+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/create-html");a({target:"String",proto:!0,forced:o("../internals/string-html-forced")("sub")},{sub:function(){return l(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-trim").trim;a({target:"String",proto:!0,forced:o("../internals/string-trim-forced")("trim")},{trim:function(){return l(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(b,i,s){"use strict";var a,l,u,c,f,d=b("../internals/export"),p=b("../internals/descriptors"),h=b("../internals/global"),m=b("../internals/has"),g=b("../internals/is-object"),y=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=h.Symbol;!p||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(a={},b(l=function(){var v=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof l?new x(v):v===void 0?x():x(v);return v===""&&(a[w]=!0),w},x),(h=l.prototype=x.prototype).constructor=l,u=h.toString,c=String(x("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,y(h,"description",{configurable:!0,get:function(){var v=g(this)?this.valueOf():this,w=u.call(v);return m(a,v)?"":(v=c?w.slice(7,-1):w.replace(f,"$1"))===""?void 0:v}}),d({global:!0,forced:!0},{Symbol:l}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(o,i,s){o("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(ie,i,s){"use strict";function a(oe,be){var Oe=at[oe]=I(ye[le]);return K(Oe,{type:Q,tag:oe,description:be}),m||(Oe.description=be),Oe}function l(oe,Ve){_(oe);var Oe=C(Ve),Ve=k(Oe).concat(me(Oe));return ee(Ve,function(Qe){m&&!de.call(Oe,Qe)||Ge(oe,Qe,Oe[Qe])}),oe}function u(Ve,Qe){var Oe,Ve=C(Ve),Qe=E(Qe,!0);if(Ve!==ne||!x(at,Qe)||x(We,Qe))return!(Oe=De(Ve,Qe))||!x(at,Qe)||x(Ve,ae)&&Ve[ae][Qe]||(Oe.enumerable=!0),Oe}function c(be){var be=Fe(C(be)),Oe=[];return ee(be,function(Ve){x(at,Ve)||x(X,Ve)||Oe.push(Ve)}),Oe}var f=ie("../internals/export"),d=ie("../internals/global"),p=ie("../internals/get-built-in"),h=ie("../internals/is-pure"),m=ie("../internals/descriptors"),g=ie("../internals/native-symbol"),y=ie("../internals/use-symbol-as-uid"),b=ie("../internals/fails"),x=ie("../internals/has"),v=ie("../internals/is-array"),w=ie("../internals/is-object"),_=ie("../internals/an-object"),S=ie("../internals/to-object"),C=ie("../internals/to-indexed-object"),E=ie("../internals/to-primitive"),T=ie("../internals/create-property-descriptor"),I=ie("../internals/object-create"),k=ie("../internals/object-keys"),F=ie("../internals/object-get-own-property-names"),D=ie("../internals/object-get-own-property-names-external"),L=ie("../internals/object-get-own-property-symbols"),P=ie("../internals/object-get-own-property-descriptor"),R=ie("../internals/object-define-property"),V=ie("../internals/object-property-is-enumerable"),G=ie("../internals/create-non-enumerable-property"),U=ie("../internals/redefine"),H=ie("../internals/shared"),kt=ie("../internals/shared-key"),X=ie("../internals/hidden-keys"),fe=ie("../internals/uid"),$=ie("../internals/well-known-symbol"),M=ie("../internals/well-known-symbol-wrapped"),z=ie("../internals/define-well-known-symbol"),q=ie("../internals/set-to-string-tag"),Rt=ie("../internals/internal-state"),ee=ie("../internals/array-iteration").forEach,ae=kt("hidden"),Q="Symbol",le="prototype",ie=$("toPrimitive"),K=Rt.set,ge=Rt.getterFor(Q),ne=Object[le],ye=d.Symbol,xe=p("JSON","stringify"),De=P.f,Te=R.f,Fe=D.f,$e=V.f,at=H("symbols"),We=H("op-symbols"),jt=H("string-to-symbol-registry"),_t=H("symbol-to-string-registry"),kt=H("wks"),Rt=d.QObject,Mt=!Rt||!Rt[le]||!Rt[le].findChild,Be=m&&b(function(){return I(Te({},"a",{get:function(){return Te(this,"a",{value:7}).a}})).a!=7})?function(oe,be,Oe){var Ve=De(ne,be);Ve&&delete ne[be],Te(oe,be,Oe),Ve&&oe!==ne&&Te(ne,be,Ve)}:Te,ut=y?function(oe){return typeof oe=="symbol"}:function(oe){return Object(oe)instanceof ye},Ge=function(oe,be,Oe){return oe===ne&&Ge(We,be,Oe),_(oe),be=E(be,!0),_(Oe),(x(at,be)?(Oe.enumerable?(x(oe,ae)&&oe[ae][be]&&(oe[ae][be]=!1),Oe=I(Oe,{enumerable:T(0,!1)})):(x(oe,ae)||Te(oe,ae,T(1,{})),oe[ae][be]=!0),Be):Te)(oe,be,Oe)},de=function(be){var be=E(be,!0),Oe=$e.call(this,be);return!(this===ne&&x(at,be)&&!x(We,be))&&(!(Oe||!x(this,be)||!x(at,be)||x(this,ae)&&this[ae][be])||Oe)},me=function(Oe){var be=Oe===ne,Oe=Fe(be?We:C(Oe)),Ve=[];return ee(Oe,function(Qe){!x(at,Qe)||be&&!x(ne,Qe)||Ve.push(at[Qe])}),Ve};g||(U((ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor");var oe=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,be=fe(oe),Oe=function(Ve){this===ne&&Oe.call(We,Ve),x(this,ae)&&x(this[ae],be)&&(this[ae][be]=!1),Be(this,be,T(1,Ve))};return m&&Mt&&Be(ne,be,{configurable:!0,set:Oe}),a(be,oe)})[le],"toString",function(){return ge(this).tag}),U(ye,"withoutSetter",function(oe){return a(fe(oe),oe)}),V.f=de,R.f=Ge,P.f=u,F.f=D.f=c,L.f=me,M.f=function(oe){return a($(oe),oe)},m&&(Te(ye[le],"description",{configurable:!0,get:function(){return ge(this).description}}),h||U(ne,"propertyIsEnumerable",de,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:ye}),ee(k(kt),function(oe){z(oe)}),f({target:Q,stat:!0,forced:!g},{for:function(Oe){var be,Oe=String(Oe);return x(jt,Oe)?jt[Oe]:(be=ye(Oe),jt[Oe]=be,_t[be]=Oe,be)},keyFor:function(oe){if(!ut(oe))throw TypeError(oe+" is not a symbol");if(x(_t,oe))return _t[oe]},useSetter:function(){Mt=!0},useSimple:function(){Mt=!1}}),f({target:"Object",stat:!0,forced:!g,sham:!m},{create:function(oe,be){return be===void 0?I(oe):l(I(oe),be)},defineProperty:Ge,defineProperties:l,getOwnPropertyDescriptor:u}),f({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:c,getOwnPropertySymbols:me}),f({target:"Object",stat:!0,forced:b(function(){L.f(1)})},{getOwnPropertySymbols:function(oe){return L.f(S(oe))}}),xe&&f({target:"JSON",stat:!0,forced:!g||b(function(){var oe=ye();return xe([oe])!="[null]"||xe({a:oe})!="{}"||xe(Object(oe))!="{}"})},{stringify:function(oe,be,Oe){for(var Ve,Qe=[oe],St=1;St<arguments.length;)Qe.push(arguments[St++]);if((w(Ve=be)||oe!==void 0)&&!ut(oe))return v(be)||(be=function(Nt,Ft){if(typeof Ve=="function"&&(Ft=Ve.call(this,Nt,Ft)),!ut(Ft))return Ft}),Qe[1]=be,xe.apply(null,Qe)}}),ye[le][ie]||G(ye[le],ie,ye[le].valueOf),q(ye,Q),X[ae]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-copy-within"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(c,f){return l.call(u(this),c,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").every,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-fill"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").filter,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(d){for(var p=l(c(this),d,1<arguments.length?arguments[1]:void 0),d=u(this,this.constructor),h=0,m=p.length,g=new(f(d))(m);h<m;)g[h]=p[h++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").findIndex,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").find,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(o,i,s){o("../internals/typed-array-constructor")("Float32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],217:[function(o,i,s){o("../internals/typed-array-constructor")("Float64",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],218:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").forEach,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(c){l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").includes,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").indexOf,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(o,i,s){o("../internals/typed-array-constructor")("Int16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],222:[function(o,i,s){o("../internals/typed-array-constructor")("Int32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],223:[function(l,i,s){"use strict";function a(){return u.call(d(this))}var m=l("../internals/global"),h=l("../internals/array-buffer-view-core"),p=l("../modules/es.array.iterator"),l=l("../internals/well-known-symbol")("iterator"),m=m.Uint8Array,u=p.values,c=p.keys,f=p.entries,d=h.aTypedArray,p=h.exportTypedArrayMethod,h=m&&m.prototype[l],m=!!h&&(h.name=="values"||h.name==null);p("entries",function(){return f.call(d(this))}),p("keys",function(){return c.call(d(this))}),p("values",a,!m),p(l,a,!m)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].join;l("join",function(c){return u.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-last-index-of"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").map,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(d){return l(c(this),d,1<arguments.length?arguments[1]:void 0,function(p,h){return new(f(u(p,p.constructor)))(h)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").right,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").left,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=Math.floor;l("reverse",function(){for(var c,f=a(this).length,d=u(f/2),p=0;p<d;)c=this[p],this[p++]=this[--f],this[f]=c;return this})},{"../internals/array-buffer-view-core":12}],230:[function(f,i,s){"use strict";var a=f("../internals/array-buffer-view-core"),l=f("../internals/to-length"),u=f("../internals/to-offset"),c=f("../internals/to-object"),f=f("../internals/fails"),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(p){d(this);var h=u(1<arguments.length?arguments[1]:void 0,1),m=this.length,g=c(p),y=l(g.length),b=0;if(m<y+h)throw RangeError("Wrong length");for(;b<y;)this[h+b]=g[b++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(l,i,s){"use strict";var f=l("../internals/array-buffer-view-core"),a=l("../internals/species-constructor"),l=l("../internals/fails"),u=f.aTypedArray,c=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,d=[].slice;f("slice",function(p,h){for(var m=d.call(u(this),p,h),p=a(this,this.constructor),g=0,y=m.length,b=new(c(p))(y);g<y;)b[g]=m[g++];return b},l(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").some,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].sort;l("sort",function(c){return u.call(a(this),c)})},{"../internals/array-buffer-view-core":12}],234:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/to-length"),u=o("../internals/to-absolute-index"),c=o("../internals/species-constructor"),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(g,p){var h=f(this),m=h.length,g=u(g,m);return new(c(h,h.constructor))(h.buffer,h.byteOffset+g*h.BYTES_PER_ELEMENT,l((p===void 0?m:u(p,m))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(l,i,s){"use strict";var f=l("../internals/global"),a=l("../internals/array-buffer-view-core"),l=l("../internals/fails"),u=f.Int8Array,c=a.aTypedArray,f=a.exportTypedArrayMethod,d=[].toLocaleString,p=[].slice,h=!!u&&l(function(){d.call(new u(1))});f("toLocaleString",function(){return d.apply(h?p.call(c(this)):c(this),arguments)},l(function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()})||!l(function(){u.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(l,i,s){"use strict";var a=l("../internals/array-buffer-view-core").exportTypedArrayMethod,f=l("../internals/fails"),l=l("../internals/global").Uint8Array,l=l&&l.prototype||{},u=[].toString,c=[].join,f=(f(function(){u.call({})})&&(u=function(){return c.call(this)}),l.toString!=u);a("toString",u,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(o,i,s){o("../internals/typed-array-constructor")("Uint16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],238:[function(o,i,s){o("../internals/typed-array-constructor")("Uint32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],239:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],240:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(x,_,s){"use strict";function a(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}}var l,u,c,f,d,v=x("../internals/global"),p=x("../internals/redefine-all"),h=x("../internals/internal-metadata"),m=x("../internals/collection"),g=x("../internals/collection-weak"),y=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),v=!v.ActiveXObject&&"ActiveXObject"in v,w=Object.isExtensible,_=_.exports=m("WeakMap",a,g);x&&v&&(l=g.getConstructor(a,"WeakMap",!0),h.REQUIRED=!0,m=_.prototype,u=m.delete,c=m.has,f=m.get,d=m.set,p(m,{delete:function(S){var C;return y(S)&&!w(S)?((C=b(this)).frozen||(C.frozen=new l),u.call(this,S)||C.frozen.delete(S)):u.call(this,S)},has:function(S){var C;return y(S)&&!w(S)?((C=b(this)).frozen||(C.frozen=new l),c.call(this,S)||C.frozen.has(S)):c.call(this,S)},get:function(S){var C;return!y(S)||w(S)||((C=b(this)).frozen||(C.frozen=new l),c.call(this,S))?f.call(this,S):C.frozen.get(S)},set:function(S,C){var E;return!y(S)||w(S)||((E=b(this)).frozen||(E.frozen=new l),c.call(this,S))?d.call(this,S,C):E.frozen.set(S,C),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(o,i,s){var a,l=o("../internals/global"),u=o("../internals/dom-iterables"),c=o("../internals/array-for-each"),f=o("../internals/create-non-enumerable-property");for(a in u){var d=l[a],d=d&&d.prototype;if(d&&d.forEach!==c)try{f(d,"forEach",c)}catch{d.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(d,i,s){var a,l=d("../internals/global"),u=d("../internals/dom-iterables"),c=d("../modules/es.array.iterator"),f=d("../internals/create-non-enumerable-property"),d=d("../internals/well-known-symbol"),p=d("iterator"),h=d("toStringTag"),m=c.values;for(a in u){var g=l[a],y=g&&g.prototype;if(y){if(y[p]!==m)try{f(y,p,m)}catch{y[p]=m}if(y[h]||f(y,h,a),u[a]){for(var b in c)if(y[b]!==c[b])try{f(y,b,c[b])}catch{y[b]=c[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(ae,i,s){"use strict";ae("../modules/es.array.iterator");function a(Q){try{return decodeURIComponent(Q)}catch{return Q}}function l(Q){return z[Q]}function u(Q){return encodeURIComponent(Q).replace(M,l)}function c(Q){this.entries.length=0,q(this.entries,Q)}function f(Q,le){if(Q<le)throw TypeError("Not enough arguments")}function d(){v(this,d,R);var Q,le,ie,K,ge,ne,ye,xe,De=0<arguments.length?arguments[0]:void 0,Te=[];if(G(this,{type:R,entries:Te,updateURL:function(){},updateSearchParams:c}),De!==void 0)if(E(De))if(typeof(Q=F(De))=="function")for(ie=(le=Q.call(De)).next;!(K=ie.call(le)).done;){if((ne=(ge=(K=k(C(K.value))).next).call(K)).done||(ye=ge.call(K)).done||!ge.call(K).done)throw TypeError("Expected sequence with length 2");Te.push({key:ne.value+"",value:ye.value+""})}else for(xe in De)w(De,xe)&&Te.push({key:xe,value:De[xe]+""});else q(Te,typeof De=="string"?De.charAt(0)==="?"?De.slice(1):De:De+"")}var p=ae("../internals/export"),P=ae("../internals/get-built-in"),h=ae("../internals/native-url"),m=ae("../internals/redefine"),g=ae("../internals/redefine-all"),y=ae("../internals/set-to-string-tag"),b=ae("../internals/create-iterator-constructor"),x=ae("../internals/internal-state"),v=ae("../internals/an-instance"),w=ae("../internals/has"),_=ae("../internals/function-bind-context"),S=ae("../internals/classof"),C=ae("../internals/an-object"),E=ae("../internals/is-object"),T=ae("../internals/object-create"),I=ae("../internals/create-property-descriptor"),k=ae("../internals/get-iterator"),F=ae("../internals/get-iterator-method"),ae=ae("../internals/well-known-symbol"),D=P("fetch"),L=P("Headers"),P=ae("iterator"),R="URLSearchParams",V=R+"Iterator",G=x.set,U=x.getterFor(R),H=x.getterFor(V),X=/\+/g,fe=Array(4),$=function(Q){var le,ie=Q.replace(X," "),K=4;try{return decodeURIComponent(ie)}catch{for(;K;)ie=ie.replace((le=K--,fe[le-1]||(fe[le-1]=RegExp("((?:%[\\da-f]{2}){"+le+"})","gi"))),a);return ie}},M=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},q=function(Q,le){if(le)for(var ie,K=le.split("&"),ge=0;ge<K.length;)(ie=K[ge++]).length&&(ie=ie.split("="),Q.push({key:$(ie.shift()),value:$(ie.join("="))}))},ee=b(function(Q,le){G(this,{type:V,iterator:k(U(Q).entries),kind:le})},"Iterator",function(){var le=H(this),Q=le.kind,le=le.iterator.next(),ie=le.value;return le.done||(le.value=Q==="keys"?ie.key:Q==="values"?ie.value:[ie.key,ie.value]),le}),ae=d.prototype;g(ae,{append:function(Q,le){f(arguments.length,2);var ie=U(this);ie.entries.push({key:Q+"",value:le+""}),ie.updateURL()},delete:function(Q){f(arguments.length,1);for(var le=U(this),ie=le.entries,K=Q+"",ge=0;ge<ie.length;)ie[ge].key===K?ie.splice(ge,1):ge++;le.updateURL()},get:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",K=0;K<le.length;K++)if(le[K].key===ie)return le[K].value;return null},getAll:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",K=[],ge=0;ge<le.length;ge++)le[ge].key===ie&&K.push(le[ge].value);return K},has:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",K=0;K<le.length;)if(le[K++].key===ie)return!0;return!1},set:function(Q,le){f(arguments.length,1);for(var ie,K=U(this),ge=K.entries,ne=!1,ye=Q+"",xe=le+"",De=0;De<ge.length;De++)(ie=ge[De]).key===ye&&(ne?ge.splice(De--,1):(ne=!0,ie.value=xe));ne||ge.push({key:ye,value:xe}),K.updateURL()},sort:function(){for(var Q,le,ie=U(this),K=ie.entries,ge=K.slice(),ne=K.length=0;ne<ge.length;ne++){for(Q=ge[ne],le=0;le<ne;le++)if(K[le].key>Q.key){K.splice(le,0,Q);break}le===ne&&K.push(Q)}ie.updateURL()},forEach:function(Q){for(var le,ie=U(this).entries,K=_(Q,1<arguments.length?arguments[1]:void 0,3),ge=0;ge<ie.length;)K((le=ie[ge++]).value,le.key,this)},keys:function(){return new ee(this,"keys")},values:function(){return new ee(this,"values")},entries:function(){return new ee(this,"entries")}},{enumerable:!0}),m(ae,P,ae.entries),m(ae,"toString",function(){for(var Q,le=U(this).entries,ie=[],K=0;K<le.length;)Q=le[K++],ie.push(u(Q.key)+"="+u(Q.value));return ie.join("&")},{enumerable:!0}),y(d,R),p({global:!0,forced:!h},{URLSearchParams:d}),h||typeof D!="function"||typeof L!="function"||p({global:!0,enumerable:!0,forced:!0},{fetch:function(ge){var le,ie,K,ge=[ge];return 1<arguments.length&&(E(le=arguments[1])&&(ie=le.body,S(ie)===R&&((K=le.headers?new L(le.headers):new L).has("content-type")||K.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),le=T(le,{body:I(0,String(ie)),headers:I(0,K)}))),ge.push(le)),D.apply(this,ge)}}),i.exports={URLSearchParams:d,getState:U}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,i,s){"use strict";k("../modules/es.string.iterator");function a(ke){var Ct,Ht,xt,In;if(typeof ke=="number"){for(Ct=[],Ht=0;Ht<4;Ht++)Ct.unshift(ke%256),ke=V(ke/256);return Ct.join(".")}if(typeof ke!="object")return ke;for(Ct="",xt=ye(ke),Ht=0;Ht<8;Ht++)In&&ke[Ht]===0||(In=In&&!1,xt===Ht?(Ct+=Ht?":":"::",In=!0):(Ct+=ke[Ht].toString(16),Ht<7&&(Ct+=":")));return"["+Ct+"]"}function l(ke){return!ke.host||ke.cannotBeABaseURL||ke.scheme=="file"}function u(ke,Ct,Ht,xt){var In,gt,Yn,zt=Ht||ut,Ln=0,Vt="",ks=!1,ya=!1,ps=!1;for(Ht||(ke.scheme="",ke.username="",ke.password="",ke.host=null,ke.port=null,ke.path=[],ke.query=null,ke.fragment=null,ke.cannotBeABaseURL=!1,Ct=Ct.replace(K,"")),Ct=Ct.replace(ge,""),In=S(Ct);Ln<=In.length;){switch(gt=In[Ln],zt){case ut:if(!gt||!$.test(gt)){if(Ht)return H;zt=de;continue}Vt+=gt.toLowerCase(),zt=Ge;break;case Ge:if(gt&&(M.test(gt)||gt=="+"||gt=="-"||gt=="."))Vt+=gt.toLowerCase();else{if(gt!=":"){if(Ht)return H;Vt="",zt=de,Ln=0;continue}if(Ht&&(We(ke)!=w(at,Vt)||Vt=="file"&&(jt(ke)||ke.port!==null)||ke.scheme=="file"&&!ke.host))return;if(ke.scheme=Vt,Ht)return void(We(ke)&&at[ke.scheme]==ke.port&&(ke.port=null));Vt="",ke.scheme=="file"?zt=en:We(ke)&&xt&&xt.scheme==ke.scheme?zt=me:We(ke)?zt=Ve:In[Ln+1]=="/"?(zt=oe,Ln++):(ke.cannotBeABaseURL=!0,ke.path.push(""),zt=hi)}break;case de:if(!xt||xt.cannotBeABaseURL&&gt!="#")return H;if(xt.cannotBeABaseURL&&gt=="#"){ke.scheme=xt.scheme,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",ke.cannotBeABaseURL=!0,zt=Gs;break}zt=xt.scheme=="file"?en:be;continue;case me:if(gt!="/"||In[Ln+1]!="/"){zt=be;continue}zt=Qe,Ln++;break;case oe:if(gt=="/"){zt=St;break}zt=Rr;continue;case be:if(ke.scheme=xt.scheme,gt==d)ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query;else if(gt=="/"||gt=="\\"&&We(ke))zt=Oe;else if(gt=="?")ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query="",zt=Ql;else{if(gt!="#"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.path.pop(),zt=Rr;continue}ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=Gs}break;case Oe:if(!We(ke)||gt!="/"&&gt!="\\"){if(gt!="/"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,zt=Rr;continue}zt=St}else zt=Qe;break;case Ve:if(zt=Qe,gt!="/"||Vt.charAt(Ln+1)!="/")continue;Ln++;break;case Qe:if(gt=="/"||gt=="\\")break;zt=St;continue;case St:if(gt=="@"){ks&&(Vt="%40"+Vt);for(var ks=!0,Pa=S(Vt),mg=0;mg<Pa.length;mg++){var Yf=Pa[mg];Yf!=":"||ps?(Yf=$e(Yf,Fe),ps?ke.password+=Yf:ke.username+=Yf):ps=!0}Vt=""}else if(gt==d||gt=="/"||gt=="?"||gt=="#"||gt=="\\"&&We(ke)){if(ks&&Vt=="")return U;Ln-=S(Vt).length+1,Vt="",zt=Nt}else Vt+=gt;break;case Nt:case Ft:if(Ht&&ke.scheme=="file"){zt=ur;continue}if(gt!=":"||ya){if(gt==d||gt=="/"||gt=="?"||gt=="#"||gt=="\\"&&We(ke)){if(We(ke)&&Vt=="")return X;if(Ht&&Vt==""&&(jt(ke)||ke.port!==null))return;if(Yn=ne(ke,Vt))return Yn;if(Vt="",zt=Yr,Ht)return;continue}gt=="["?ya=!0:gt=="]"&&(ya=!1),Vt+=gt}else{if(Vt=="")return X;if(Yn=ne(ke,Vt))return Yn;if(Vt="",zt=Ut,Ht==Ft)return}break;case Ut:if(!z.test(gt)){if(gt==d||gt=="/"||gt=="?"||gt=="#"||gt=="\\"&&We(ke)||Ht){if(Vt!=""){var gg=parseInt(Vt,10);if(65535<gg)return fe;ke.port=We(ke)&&gg===at[ke.scheme]?null:gg,Vt=""}if(Ht)return;zt=Yr;continue}return fe}Vt+=gt;break;case en:if(ke.scheme="file",gt=="/"||gt=="\\")zt=Lr;else{if(!xt||xt.scheme!="file"){zt=Rr;continue}if(gt==d)ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query;else if(gt=="?")ke.host=xt.host,ke.path=xt.path.slice(),ke.query="",zt=Ql;else{if(gt!="#"){kt(In.slice(Ln).join(""))||(ke.host=xt.host,ke.path=xt.path.slice(),Rt(ke)),zt=Rr;continue}ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=Gs}}break;case Lr:if(gt=="/"||gt=="\\"){zt=ur;break}xt&&xt.scheme=="file"&&!kt(In.slice(Ln).join(""))&&(_t(xt.path[0],!0)?ke.path.push(xt.path[0]):ke.host=xt.host),zt=Rr;continue;case ur:if(gt==d||gt=="/"||gt=="\\"||gt=="?"||gt=="#"){if(!Ht&&_t(Vt))zt=Rr;else{if(Vt==""){if(ke.host="",Ht)return}else{if(Yn=ne(ke,Vt))return Yn;if(ke.host=="localhost"&&(ke.host=""),Ht)return;Vt=""}zt=Yr}continue}Vt+=gt;break;case Yr:if(We(ke)){if(zt=Rr,gt!="/"&&gt!="\\")continue}else if(Ht||gt!="?")if(Ht||gt!="#"){if(gt!=d&&(zt=Rr,gt!="/"))continue}else ke.fragment="",zt=Gs;else ke.query="",zt=Ql;break;case Rr:if(gt==d||gt=="/"||gt=="\\"&&We(ke)||!Ht&&(gt=="?"||gt=="#")){if(Be(Vt)?(Rt(ke),gt=="/"||gt=="\\"&&We(ke)||ke.path.push("")):Mt(Vt)?gt=="/"||gt=="\\"&&We(ke)||ke.path.push(""):(ke.scheme=="file"&&!ke.path.length&&_t(Vt)&&(ke.host&&(ke.host=""),Vt=Vt.charAt(0)+":"),ke.path.push(Vt)),Vt="",ke.scheme=="file"&&(gt==d||gt=="?"||gt=="#"))for(;1<ke.path.length&&ke.path[0]==="";)ke.path.shift();gt=="?"?(ke.query="",zt=Ql):gt=="#"&&(ke.fragment="",zt=Gs)}else Vt+=$e(gt,Te);break;case hi:gt=="?"?(ke.query="",zt=Ql):gt=="#"?(ke.fragment="",zt=Gs):gt!=d&&(ke.path[0]+=$e(gt,xe));break;case Ql:Ht||gt!="#"?gt!=d&&(gt=="'"&&We(ke)?ke.query+="%27":ke.query+=gt=="#"?"%23":$e(gt,xe)):(ke.fragment="",zt=Gs);break;case Gs:gt!=d&&(ke.fragment+=$e(gt,De))}Ln++}}function c(gt){var Ct,Ht,xt=v(this,c,"URL"),In=1<arguments.length?arguments[1]:void 0,gt=String(gt),Yn=P(xt,{type:"URL"});if(In!==void 0){if(In instanceof c)Ct=R(In);else if(Ht=u(Ct={},String(In)))throw TypeError(Ht)}if(Ht=u(Yn,gt,null,Ct))throw TypeError(Ht);var zt=Yn.searchParams=new D;(In=L(zt)).updateSearchParams(Yn.query),In.updateURL=function(){Yn.query=String(zt)||null},g||(xt.href=_i.call(xt),xt.origin=Hn.call(xt),xt.protocol=Sl.call(xt),xt.username=Ra.call(xt),xt.password=jo.call(xt),xt.host=Cl.call(xt),xt.hostname=fR.call(xt),xt.port=dR.call(xt),xt.pathname=pR.call(xt),xt.search=bz.call(xt),xt.searchParams=hR.call(xt),xt.hash=mR.call(xt))}function f(ke,Ct){return{get:ke,set:Ct,configurable:!0,enumerable:!0}}var d,p,h,m=k("../internals/export"),g=k("../internals/descriptors"),y=k("../internals/native-url"),Eo=k("../internals/global"),b=k("../internals/object-define-properties"),x=k("../internals/redefine"),v=k("../internals/an-instance"),w=k("../internals/has"),_=k("../internals/object-assign"),S=k("../internals/array-from"),C=k("../internals/string-multibyte").codeAt,E=k("../internals/string-punycode-to-ascii"),T=k("../internals/set-to-string-tag"),I=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),F=Eo.URL,D=I.URLSearchParams,L=I.getState,P=k.set,R=k.getterFor("URL"),V=Math.floor,G=Math.pow,U="Invalid authority",H="Invalid scheme",X="Invalid host",fe="Invalid port",$=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,z=/\d/,q=/^(0x|0X)/,ee=/^[0-7]+$/,ae=/^\d+$/,Q=/^[\dA-Fa-f]+$/,le=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ie=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,K=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ge=/[\u0009\u000A\u000D]/g,ne=function(ke,Ct){var Ht,xt,In;if(Ct.charAt(0)=="[")return Ct.charAt(Ct.length-1)=="]"&&(Ht=function(gt){var Yn=[0,0,0,0,0,0,0,0],zt=0,Ln=null,Vt=0,ks,ya,ps,Pa,mg,Yf,gg,La=function(){return gt.charAt(Vt)};if(La()==":"){if(gt.charAt(1)!=":")return;Vt+=2,zt++,Ln=zt}for(;La();){if(zt==8)return;if(La()==":"){if(Ln!==null)return;Vt++,zt++,Ln=zt;continue}for(ks=ya=0;ya<4&&Q.test(La());)ks=ks*16+parseInt(La(),16),Vt++,ya++;if(La()=="."){if(ya==0||(Vt-=ya,zt>6))return;for(ps=0;La();){if(Pa=null,ps>0)if(La()=="."&&ps<4)Vt++;else return;if(!z.test(La()))return;for(;z.test(La());){if(mg=parseInt(La(),10),Pa===null)Pa=mg;else{if(Pa==0)return;Pa=Pa*10+mg}if(Pa>255)return;Vt++}Yn[zt]=Yn[zt]*256+Pa,ps++,(ps==2||ps==4)&&zt++}if(ps!=4)return;break}else if(La()==":"){if(Vt++,!La())return}else if(La())return;Yn[zt++]=ks}if(Ln!==null)for(Yf=zt-Ln,zt=7;zt!=0&&Yf>0;)gg=Yn[zt],Yn[zt--]=Yn[Ln+Yf-1],Yn[Ln+--Yf]=gg;else if(zt!=8)return;return Yn}(Ct.slice(1,-1)))?void(ke.host=Ht):X;if(We(ke))return Ct=E(Ct),le.test(Ct)||(Ht=function(gt){var Yn=gt.split("."),zt,Ln,Vt,ks,ya,ps,Pa;if(Yn.length&&Yn[Yn.length-1]==""&&Yn.pop(),(zt=Yn.length)>4)return gt;for(Ln=[],Vt=0;Vt<zt;Vt++){if(ks=Yn[Vt],ks=="")return gt;if(ya=10,ks.length>1&&ks.charAt(0)=="0"&&(ya=q.test(ks)?16:8,ks=ks.slice(ya==8?1:2)),ks==="")ps=0;else{if(!(ya==10?ae:ya==8?ee:Q).test(ks))return gt;ps=parseInt(ks,ya)}Ln.push(ps)}for(Vt=0;Vt<zt;Vt++)if(ps=Ln[Vt],Vt==zt-1){if(ps>=G(256,5-zt))return null}else if(ps>255)return null;for(Pa=Ln.pop(),Vt=0;Vt<Ln.length;Vt++)Pa+=Ln[Vt]*G(256,3-Vt);return Pa}(Ct))===null?X:void(ke.host=Ht);if(ie.test(Ct))return X;for(Ht="",xt=S(Ct),In=0;In<xt.length;In++)Ht+=$e(xt[In],xe);ke.host=Ht},ye=function(ke){for(var Ct=null,Ht=1,xt=null,In=0,gt=0;gt<8;gt++)ke[gt]!==0?(Ht<In&&(Ct=xt,Ht=In),xt=null,In=0):(xt===null&&(xt=gt),++In);return Ht<In&&(Ct=xt,Ht=In),Ct},xe={},De=_({},xe,{" ":1,'"':1,"<":1,">":1,"`":1}),Te=_({},De,{"#":1,"?":1,"{":1,"}":1}),Fe=_({},Te,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$e=function(ke,Ct){var Ht=C(ke,0);return 32<Ht&&Ht<127&&!w(Ct,ke)?ke:encodeURIComponent(ke)},at={ftp:21,file:null,http:80,https:443,ws:80,wss:443},We=function(ke){return w(at,ke.scheme)},jt=function(ke){return ke.username!=""||ke.password!=""},_t=function(ke,Ct){return ke.length==2&&$.test(ke.charAt(0))&&((ke=ke.charAt(1))==":"||!Ct&&ke=="|")},kt=function(ke){return 1<ke.length&&_t(ke.slice(0,2))&&(ke.length==2||(ke=ke.charAt(2))==="/"||ke==="\\"||ke==="?"||ke==="#")},Rt=function(ke){var Ct=ke.path,Ht=Ct.length;!Ht||ke.scheme=="file"&&Ht==1&&_t(Ct[0],!0)||Ct.pop()},Mt=function(ke){return ke==="."||ke.toLowerCase()==="%2e"},Be=function(ke){return(ke=ke.toLowerCase())===".."||ke==="%2e."||ke===".%2e"||ke==="%2e%2e"},ut={},Ge={},de={},me={},oe={},be={},Oe={},Ve={},Qe={},St={},Nt={},Ft={},Ut={},en={},Lr={},ur={},Yr={},Rr={},hi={},Ql={},Gs={},Eo=c.prototype,_i=function(){var ke=R(this),Ct=ke.scheme,Ht=ke.username,xt=ke.password,In=ke.host,gt=ke.port,Yn=ke.path,zt=ke.query,Ln=ke.fragment,Vt=Ct+":";return In!==null?(Vt+="//",jt(ke)&&(Vt+=Ht+(xt?":"+xt:"")+"@"),Vt+=a(In),gt!==null&&(Vt+=":"+gt)):Ct=="file"&&(Vt+="//"),Vt+=ke.cannotBeABaseURL?Yn[0]:Yn.length?"/"+Yn.join("/"):"",zt!==null&&(Vt+="?"+zt),Ln!==null&&(Vt+="#"+Ln),Vt},Hn=function(){var ke=R(this),Ct=ke.scheme,Ht=ke.port;if(Ct=="blob")try{return new URL(Ct.path[0]).origin}catch{return"null"}return Ct!="file"&&We(ke)?Ct+"://"+a(ke.host)+(Ht!==null?":"+Ht:""):"null"},Sl=function(){return R(this).scheme+":"},Ra=function(){return R(this).username},jo=function(){return R(this).password},Cl=function(){var Ct=R(this),ke=Ct.host,Ct=Ct.port;return ke===null?"":Ct===null?a(ke):a(ke)+":"+Ct},fR=function(){var ke=R(this).host;return ke===null?"":a(ke)},dR=function(){var ke=R(this).port;return ke===null?"":String(ke)},pR=function(){var ke=R(this),Ct=ke.path;return ke.cannotBeABaseURL?Ct[0]:Ct.length?"/"+Ct.join("/"):""},bz=function(){var ke=R(this).query;return ke?"?"+ke:""},hR=function(){return R(this).searchParams},mR=function(){var ke=R(this).fragment;return ke?"#"+ke:""};g&&b(Eo,{href:f(_i,function(Ht){var Ct=R(this),Ht=String(Ht),Ht=u(Ct,Ht);if(Ht)throw TypeError(Ht);L(Ct.searchParams).updateSearchParams(Ct.query)}),origin:f(Hn),protocol:f(Sl,function(ke){var Ct=R(this);u(Ct,String(ke)+":",ut)}),username:f(Ra,function(ke){var Ct=R(this),Ht=S(String(ke));if(!l(Ct)){Ct.username="";for(var xt=0;xt<Ht.length;xt++)Ct.username+=$e(Ht[xt],Fe)}}),password:f(jo,function(ke){var Ct=R(this),Ht=S(String(ke));if(!l(Ct)){Ct.password="";for(var xt=0;xt<Ht.length;xt++)Ct.password+=$e(Ht[xt],Fe)}}),host:f(Cl,function(ke){var Ct=R(this);Ct.cannotBeABaseURL||u(Ct,String(ke),Nt)}),hostname:f(fR,function(ke){var Ct=R(this);Ct.cannotBeABaseURL||u(Ct,String(ke),Ft)}),port:f(dR,function(ke){var Ct=R(this);l(Ct)||((ke=String(ke))==""?Ct.port=null:u(Ct,ke,Ut))}),pathname:f(pR,function(ke){var Ct=R(this);Ct.cannotBeABaseURL||(Ct.path=[],u(Ct,ke+"",Yr))}),search:f(bz,function(ke){var Ct=R(this);(ke=String(ke))==""?Ct.query=null:(ke.charAt(0)=="?"&&(ke=ke.slice(1)),Ct.query="",u(Ct,ke,Ql)),L(Ct.searchParams).updateSearchParams(Ct.query)}),searchParams:f(hR),hash:f(mR,function(ke){var Ct=R(this);(ke=String(ke))==""?Ct.fragment=null:(ke.charAt(0)=="#"&&(ke=ke.slice(1)),Ct.fragment="",u(Ct,ke,Gs))})}),x(Eo,"toJSON",function(){return _i.call(this)},{enumerable:!0}),x(Eo,"toString",function(){return _i.call(this)},{enumerable:!0}),F&&(p=F.createObjectURL,h=F.revokeObjectURL,p&&x(c,"createObjectURL",function(ke){return p.apply(F,arguments)}),h&&x(c,"revokeObjectURL",function(ke){return h.apply(F,arguments)})),T(c,"URL"),m({global:!0,forced:!y,sham:!g},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(o,i,s){"use strict";i.exports=o("./").polyfill()},{"./":247}],247:[function(o,i,s){(function(a,l){var u,c;u=this,c=function(){"use strict";function f(ne){return typeof ne=="function"}var d=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},p=0,h=void 0,m=void 0,g=function(ne,ye){_[p]=ne,_[p+1]=ye,(p+=2)===2&&(m?m(S):D())},y=typeof window<"u"?window:void 0,b=y||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var ne=setTimeout;return function(){return ne(S,1)}}var _=new Array(1e3);function S(){for(var ne=0;ne<p;ne+=2)(0,_[ne])(_[ne+1]),_[ne]=void 0,_[ne+1]=void 0;p=0}function C(){try{var ne=Function("return this")().require("vertx");return(h=ne.runOnLoop||ne.runOnContext)!==void 0?function(){h(S)}:w()}catch{return w()}}var E,T,I,D=void 0;function k(ne,ye){var xe,De=this,Te=new this.constructor(P),Fe=(Te[L]===void 0&&Q(Te),De._state);return Fe?(xe=arguments[Fe-1],g(function(){return ee(Fe,Te,xe,De._result)})):z(De,Te,ne,ye),Te}function F(ne){var ye;return ne&&typeof ne=="object"&&ne.constructor===this?ne:(X(ye=new this(P),ne),ye)}var D=x?function(){return a.nextTick(S)}:b?(T=0,x=new b(S),I=document.createTextNode(""),x.observe(I,{characterData:!0}),function(){I.data=T=++T%2}):v?((E=new MessageChannel).port1.onmessage=S,function(){return E.port2.postMessage(0)}):(y===void 0&&typeof o=="function"?C:w)(),L=Math.random().toString(36).substring(2);function P(){}var R=void 0,V=1,G=2;function U(ne,ye,xe){g(function(De){var Te=!1,Fe=function($e,at,We,jt){try{$e.call(at,We,jt)}catch(_t){return _t}}(xe,ye,function($e){Te||(Te=!0,(ye!==$e?X:$)(De,$e))},function($e){Te||(Te=!0,M(De,$e))},De._label);!Te&&Fe&&(Te=!0,M(De,Fe))},ne)}function H(ne,ye,xe){var De,Te;ye.constructor===ne.constructor&&xe===k&&ye.constructor.resolve===F?(De=ne,(Te=ye)._state===V?$(De,Te._result):Te._state===G?M(De,Te._result):z(Te,void 0,function(Fe){return X(De,Fe)},function(Fe){return M(De,Fe)})):xe!==void 0&&f(xe)?U(ne,ye,xe):$(ne,ye)}function X(ne,ye){if(ne===ye)M(ne,new TypeError("You cannot resolve a promise with itself"));else if(xe=typeof ye,ye===null||xe!="object"&&xe!="function")$(ne,ye);else{xe=void 0;try{xe=ye.then}catch(De){return void M(ne,De)}H(ne,ye,xe)}var xe}function fe(ne){ne._onerror&&ne._onerror(ne._result),q(ne)}function $(ne,ye){ne._state===R&&(ne._result=ye,ne._state=V,ne._subscribers.length!==0&&g(q,ne))}function M(ne,ye){ne._state===R&&(ne._state=G,ne._result=ye,g(fe,ne))}function z(ne,ye,xe,De){var Te=ne._subscribers,Fe=Te.length;ne._onerror=null,Te[Fe]=ye,Te[Fe+V]=xe,Te[Fe+G]=De,Fe===0&&ne._state&&g(q,ne)}function q(ne){var ye=ne._subscribers,xe=ne._state;if(ye.length!==0){for(var De,Te=void 0,Fe=ne._result,$e=0;$e<ye.length;$e+=3)De=ye[$e],Te=ye[$e+xe],De?ee(xe,De,Te,Fe):Te(Fe);ne._subscribers.length=0}}function ee(ne,ye,xe,De){var Te=f(xe),Fe=void 0,$e=void 0,at=!0;if(Te){try{Fe=xe(De)}catch(We){at=!1,$e=We}if(ye===Fe)return void M(ye,new TypeError("A promises callback cannot return that same promise."))}else Fe=De;ye._state===R&&(Te&&at?X(ye,Fe):at===!1?M(ye,$e):ne===V?$(ye,Fe):ne===G&&M(ye,Fe))}var ae=0;function Q(ne){ne[L]=ae++,ne._state=void 0,ne._result=void 0,ne._subscribers=[]}ie.prototype._enumerate=function(ne){for(var ye=0;this._state===R&&ye<ne.length;ye++)this._eachEntry(ne[ye],ye)},ie.prototype._eachEntry=function(ne,ye){var xe=this._instanceConstructor,De=xe.resolve;if(De===F){var Te,Fe=void 0,$e=void 0,at=!1;try{Fe=ne.then}catch(We){at=!0,$e=We}Fe===k&&ne._state!==R?this._settledAt(ne._state,ye,ne._result):typeof Fe!="function"?(this._remaining--,this._result[ye]=ne):xe===K?(Te=new xe(P),at?M(Te,$e):H(Te,ne,Fe),this._willSettleAt(Te,ye)):this._willSettleAt(new xe(function(We){return We(ne)}),ye)}else this._willSettleAt(De(ne),ye)},ie.prototype._settledAt=function(ne,ye,xe){var De=this.promise;De._state===R&&(this._remaining--,ne===G?M(De,xe):this._result[ye]=xe),this._remaining===0&&$(De,this._result)},ie.prototype._willSettleAt=function(ne,ye){var xe=this;z(ne,void 0,function(De){return xe._settledAt(V,ye,De)},function(De){return xe._settledAt(G,ye,De)})};var le=ie;function ie(ne,ye){this._instanceConstructor=ne,this.promise=new ne(P),this.promise[L]||Q(this.promise),d(ye)?(this.length=ye.length,this._remaining=ye.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ye),this._remaining!==0)||$(this.promise,this._result)):M(this.promise,new Error("Array Methods must be provided an Array"))}ge.prototype.catch=function(ne){return this.then(null,ne)},ge.prototype.finally=function(ne){var ye=this.constructor;return f(ne)?this.then(function(xe){return ye.resolve(ne()).then(function(){return xe})},function(xe){return ye.resolve(ne()).then(function(){throw xe})}):this.then(ne,ne)};var K=ge;function ge(ne){if(this[L]=ae++,this._result=this._state=void 0,this._subscribers=[],P!==ne){if(typeof ne!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ge))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ye=this;try{ne(function(xe){X(ye,xe)},function(xe){M(ye,xe)})}catch(xe){M(ye,xe)}}}return K.prototype.then=k,K.all=function(ne){return new le(this,ne).promise},K.race=function(ne){var ye=this;return d(ne)?new ye(function(xe,De){for(var Te=ne.length,Fe=0;Fe<Te;Fe++)ye.resolve(ne[Fe]).then(xe,De)}):new ye(function(xe,De){return De(new TypeError("You must pass an array to race."))})},K.resolve=F,K.reject=function(ne){var ye=new this(P);return M(ye,ne),ye},K._setScheduler=function(ne){m=ne},K._setAsap=function(ne){g=ne},K._asap=g,K.polyfill=function(){var ne=void 0;if(l!==void 0)ne=l;else if(typeof self<"u")ne=self;else try{ne=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ye=ne.Promise;if(ye){var xe=null;try{xe=Object.prototype.toString.call(ye.resolve())}catch{}if(xe==="[object Promise]"&&!ye.cast)return}ne.Promise=K},K.Promise=K},typeof s=="object"&&i!==void 0?i.exports=c():typeof t=="function"&&t.amd?t(c):u.ES6Promise=c()}).call(this,o("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(o,i,s){var a,l;a=this,l=function(u,c){"use strict";var f=5e3,d="callback";function p(m){try{delete window[m]}catch{window[m]=void 0}}function h(m){m=document.getElementById(m),m&&document.getElementsByTagName("head")[0].removeChild(m)}c.exports=function(m){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=m,b=g.timeout||f,x=g.jsonpCallback||d,v=void 0;return new Promise(function(w,_){var S=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),C=x+"_"+S,E=(window[S]=function(T){w({ok:!0,json:function(){return Promise.resolve(T)}}),v&&clearTimeout(v),h(C),p(S)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));E.setAttribute("src",""+y+x+"="+S),g.charset&&E.setAttribute("charset",g.charset),E.id=C,document.getElementsByTagName("head")[0].appendChild(E),v=setTimeout(function(){_(new Error("JSONP request to "+m+" timed out")),p(S),h(C),window[S]=function(){p(S)}},b),E.onerror=function(){_(new Error("JSONP request to "+m+" failed")),p(S),h(C),v&&clearTimeout(v)}})}},typeof t=="function"&&t.amd?t(["exports","module"],l):s!==void 0&&i!==void 0?l(0,i):(l(l={exports:{}},l),a.fetchJsonp=l.exports)},{}],249:[function(o,i,s){var a=function(l){"use strict";var u,c,f,d,p,h,m,g,y,b,x;if(!(l===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=l.document,u=function(){return l.URL||l.webkitURL||l},c=x.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in c,d=/constructor/i.test(l.HTMLElement)||l.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(v){(l.setImmediate||l.setTimeout)(function(){throw v},0)},m=4e4,g=function(v){setTimeout(function(){typeof v=="string"?u().revokeObjectURL(v):v.remove()},m)},y=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v},x=(b=function(v,w,T){T||(v=y(v));var S,C,E=this,T=v.type==="application/octet-stream",I=function(){for(var k=E,F="writestart progress write writeend".split(" "),D=void 0,L=(F=[].concat(F)).length;L--;){var P=k["on"+F[L]];if(typeof P=="function")try{P.call(k,D||k)}catch(R){h(R)}}};E.readyState=E.INIT,f?(S=u().createObjectURL(v),setTimeout(function(){var k,F;c.href=S,c.download=w,k=c,F=new MouseEvent("click"),k.dispatchEvent(F),I(),g(S),E.readyState=E.DONE})):(p||T&&d)&&l.FileReader?((C=new FileReader).onloadend=function(){var k=p?C.result:C.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(k,"_blank")||(l.location.href=k),k=void 0,E.readyState=E.DONE,I()},C.readAsDataURL(v),E.readyState=E.INIT):(S=S||u().createObjectURL(v),!T&&l.open(S,"_blank")||(l.location.href=S),E.readyState=E.DONE,I(),g(S))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(v,w,_){return w=w||v.name||"download",_||(v=y(v)),navigator.msSaveOrOpenBlob(v,w)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(v,w,_){return new b(v,w||v.name||"download",_)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=a:t!=null&&t.amd!==null&&t("FileSaver.js",function(){return a})},{}],250:[function(o,i,s){var a,l=Object.defineProperty,u=(l(s,"__esModule",{value:!0}),s),c={GIFEncoder:()=>I,applyPalette:()=>function(R,V,G="rgb565"){if(!R||!R.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(R instanceof Uint8Array||R instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<V.length)throw new Error("applyPalette() only works with 256 colors or less");let U=new Uint32Array(R.buffer),H=U.length,X=G==="rgb444"?4096:65536,fe=new Uint8Array(H),$=new Array(X);if(G==="rgba4444")for(let ge=0;ge<H;ge++){var ee=U[ge],M=ee>>24&255,z=ee>>16&255,q=ee>>8&255,ee=255&ee,ae=g(ee,q,z,M),ae=ae in $?$[ae]:$[ae]=function(ne,ye,xe,De,Te){let Fe=0,$e=1e100;for(let _t=0;_t<Te.length;_t++){var at,We=Te[_t],jt=C(We[3]-De);jt>$e||(at=We[0],(jt+=C(at-ne))>$e||(at=We[1],(jt+=C(at-ye))>$e||(at=We[2],(jt+=C(at-xe))>$e||($e=jt,Fe=_t))))}return Fe}(ee,q,z,M,V);fe[ge]=ae}else{let ge=G==="rgb444"?y:m;for(let ne=0;ne<H;ne++){var ie=U[ne],Q=ie>>16&255,le=ie>>8&255,ie=255&ie,K=ge(ie,le,Q),K=K in $?$[K]:$[K]=function(ye,xe,De,Te){let Fe=0,$e=1e100;for(let _t=0;_t<Te.length;_t++){var at,We=Te[_t],jt=C(We[0]-ye);jt>$e||(at=We[1],(jt+=C(at-xe))>$e||(at=We[2],(jt+=C(at-De))>$e||($e=jt,Fe=_t)))}return Fe}(ie,le,Q,V);fe[ne]=K}}return fe},default:()=>P,nearestColor:()=>function(R,V,G=_){return R[E(R,V,G)]},nearestColorIndex:()=>E,nearestColorIndexWithDistance:()=>T,prequantize:()=>function(R,{roundRGB:V=5,roundAlpha:G=10,oneBitAlpha:U=null}={}){let H=new Uint32Array(R.buffer);for(let z=0;z<H.length;z++){var M=H[z];let q=M>>24&255;var X,fe=M>>16&255,$=M>>8&255,M=255&M;q=S(q,G),U&&(X=typeof U=="number"?U:127,q=q<=X?0:255),M=S(M,V),$=S($,V),fe=S(fe,V),H[z]=q<<24|fe<<16|$<<8|M<<0}},quantize:()=>function(R,V,G={}){var{format:U="rgb565",clearAlpha:H=!0,clearAlphaColor:X=0,clearAlphaThreshold:fe=0,oneBitAlpha:$=!1}=G;if(!R||!R.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(R instanceof Uint8Array||R instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");R=new Uint32Array(R.buffer);let M=G.useSqrt!==!1,z=U==="rgba4444",q=function(kt,Rt){let Mt=Rt==="rgb444"?4096:65536,Be=new Array(Mt),ut=kt.length;if(Rt==="rgba4444")for(let Lr=0;Lr<ut;++Lr){var oe=kt[Lr],Ge=oe>>24&255,de=oe>>16&255,me=oe>>8&255,oe=255&oe,be=g(oe,me,de,Ge);let ur=be in Be?Be[be]:Be[be]=w();ur.rc+=oe,ur.gc+=me,ur.bc+=de,ur.ac+=Ge,ur.cnt++}else if(Rt==="rgb444")for(let Lr=0;Lr<ut;++Lr){var Qe=kt[Lr],Oe=Qe>>16&255,Ve=Qe>>8&255,Qe=255&Qe,St=y(Qe,Ve,Oe);let ur=St in Be?Be[St]:Be[St]=w();ur.rc+=Qe,ur.gc+=Ve,ur.bc+=Oe,ur.cnt++}else for(let Lr=0;Lr<ut;++Lr){var Ut=kt[Lr],Nt=Ut>>16&255,Ft=Ut>>8&255,Ut=255&Ut,en=m(Ut,Ft,Nt);let ur=en in Be?Be[en]:Be[en]=w();ur.rc+=Ut,ur.gc+=Ft,ur.bc+=Nt,ur.cnt++}return Be}(R,U),ee=q.length,ae=ee-1,Q=new Uint32Array(ee+1);for(var le=0,ie=0;ie<ee;++ie){let kt=q[ie];kt!=null&&(We=1/kt.cnt,z&&(kt.ac*=We),kt.rc*=We,kt.gc*=We,kt.bc*=We,q[le++]=kt)}x(V)/le<.022&&(M=!1);for(var K,ge,ne,ie=0;ie<le-1;++ie)q[ie].fw=ie+1,q[ie+1].bk=ie,M&&(q[ie].cnt=Math.sqrt(q[ie].cnt));for(M&&(q[ie].cnt=Math.sqrt(q[ie].cnt)),ie=0;ie<le;++ie){v(q,ie,!1);var ye=q[ie].err;for(ge=++Q[0];1<ge&&(ne=ge>>1,!(q[K=Q[ne]].err<=ye));ge=ne)Q[ge]=K;Q[ge]=ie}var xe,De=le-V;for(ie=0;ie<De;){for(;;){var Te=Q[1];if((xe=q[Te]).tm>=xe.mtm&&q[xe.nn].mtm<=xe.tm)break;for(xe.mtm==ae?Te=Q[1]=Q[Q[0]--]:(v(q,Te,!1),xe.tm=ie),ye=q[Te].err,ge=1;(ne=ge+ge)<=Q[0]&&(ne<Q[0]&&q[Q[ne]].err>q[Q[ne+1]].err&&ne++,!(ye<=q[K=Q[ne]].err));ge=ne)Q[ge]=K;Q[ge]=Te}var Fe=q[xe.nn],$e=xe.cnt,at=Fe.cnt,We=1/($e+at);z&&(xe.ac=We*($e*xe.ac+at*Fe.ac)),xe.rc=We*($e*xe.rc+at*Fe.rc),xe.gc=We*($e*xe.gc+at*Fe.gc),xe.bc=We*($e*xe.bc+at*Fe.bc),xe.cnt+=Fe.cnt,xe.mtm=++ie,q[Fe.bk].fw=Fe.fw,q[Fe.fw].bk=Fe.bk,Fe.mtm=ae}let jt=[];for(ie=0;;0){let kt=b(Math.round(q[ie].rc),0,255),Rt=b(Math.round(q[ie].gc),0,255),Mt=b(Math.round(q[ie].bc),0,255),Be=255;z&&(Be=b(Math.round(q[ie].ac),0,255),$&&(_t=typeof $=="number"?$:127,Be=Be<=_t?0:255),H&&Be<=fe&&(kt=Rt=Mt=X,Be=0));var _t=z?[kt,Rt,Mt,Be]:[kt,Rt,Mt];if(function(ut,Ge){for(let oe=0;oe<ut.length;oe++){var me=ut[oe],de=me[0]===Ge[0]&&me[1]===Ge[1]&&me[2]===Ge[2],me=!(4<=me.length&&4<=Ge.length)||me[3]===Ge[3];if(de&&me)return!0}return!1}(jt,_t)||jt.push(_t),(ie=q[ie].fw)==0)break}return jt},snapColorsToPalette:()=>function(R,V,G=5){if(R.length&&V.length){var U=R.map(M=>M.slice(0,3)),H=G*G,X=R[0].length;for(let M=0;M<V.length;M++){let z=V[M];z=z.length<X?[z[0],z[1],z[2],255]:z.length>X?z.slice(0,3):z.slice();var $=T(U,z.slice(0,3),_),fe=$[0],$=$[1];0<$&&$<=H&&(R[fe]=z)}}}};for(a in c)l(u,a,{get:c[a],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function d(R=256){let V=0,G=new Uint8Array(R);return{get buffer(){return G.buffer},reset(){V=0},bytesView(){return G.subarray(0,V)},bytes(){return G.slice(0,V)},writeByte(H){U(V+1),G[V]=H,V++},writeBytes(H,X=0,fe=H.length){U(V+fe);for(let $=0;$<fe;$++)G[V++]=H[$+X]},writeBytesView(H,X=0,fe=H.byteLength){U(V+fe),G.set(H.subarray(X,X+fe),V),V+=fe}};function U(H){var X=G.length;if(!(H<=X)){H=Math.max(H,X*(X<1048576?2:1.125)>>>0),X!=0&&(H=Math.max(H,256));let fe=G;G=new Uint8Array(H),0<V&&G.set(fe.subarray(0,V),0)}}}var p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],h=function(R,V,G,z,H=d(512),X=new Uint8Array(256),fe=new Int32Array(5003),$=new Int32Array(5003)){var M=fe.length,z=Math.max(2,z);X.fill(0),$.fill(0),fe.fill(-1);let q=0,ee=0;var ae=z+1;let Q=ae,le=!1,ie=Q,K=(1<<ie)-1;var ge=1<<ae-1;let ne=1+ge,ye=2+ge,xe=0,De=G[0],Te=0;for(let _t=M;_t<65536;_t*=2)++Te;Te=8-Te,H.writeByte(z),jt(ge);var Fe=G.length;for(let _t=1;_t<Fe;_t++)e:{var $e=G[_t],at=($e<<12)+De;let kt=$e<<Te^De;if(fe[kt]===at)De=$[kt];else{for(var We=kt===0?1:M-kt;0<=fe[kt];)if((kt-=We)<0&&(kt+=M),fe[kt]===at){De=$[kt];break e}jt(De),De=$e,ye<4096?($[kt]=ye++,fe[kt]=at):(fe.fill(-1),ye=2+ge,le=!0,jt(ge))}}return jt(De),jt(ne),H.writeByte(0),H.bytesView();function jt(_t){for(q&=p[ee],0<ee?q|=_t<<ee:q=_t,ee+=ie;8<=ee;)X[xe++]=255&q,254<=xe&&(H.writeByte(xe),H.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;if((ye>K||le)&&(le?(ie=Q,K=(1<<ie)-1,le=!1):(++ie,K=ie===12?1<<ie:(1<<ie)-1)),_t==ne){for(;0<ee;)X[xe++]=255&q,254<=xe&&(H.writeByte(xe),H.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;0<xe&&(H.writeByte(xe),H.writeBytesView(X,0,xe),xe=0)}}};function m(R,V,G){return R<<8&63488|V<<2&992|G>>3}function g(R,V,G,U){return R>>4|240&V|(240&G)<<4|(240&U)<<8}function y(R,V,G){return R>>4<<8|240&V|G>>4}function b(R,V,G){return R<V?V:G<R?G:R}function x(R){return R*R}function v(R,V,G){var U=0,H=1e100;let X=R[V];for(var fe=X.cnt,$=X.ac,M=X.rc,z=X.gc,q=X.bc,ee=X.fw;ee!=0;ee=R[ee].fw){var ae,Q=R[ee],le=Q.cnt,le=fe*le/(fe+le);H<=le||(ae=0,G&&H<=(ae+=le*x(Q.ac-$))||H<=(ae+=le*x(Q.rc-M))||H<=(ae+=le*x(Q.gc-z))||H<=(ae+=le*x(Q.bc-q))||(H=ae,U=ee))}X.err=H,X.nn=U}function w(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function _(R,V){for(var G=0,U=0;U<R.length;U++){var H=R[U]-V[U];G+=H*H}return G}function S(R,V){return 1<V?Math.round(R/V)*V:R}function C(R){return R*R}function E(R,V,G=_){let U=1/0,H=-1;for(let fe=0;fe<R.length;fe++){var X=G(V,R[fe]);X<U&&(U=X,H=fe)}return H}function T(R,V,G=_){let U=1/0,H=-1;for(let fe=0;fe<R.length;fe++){var X=G(V,R[fe]);X<U&&(U=X,H=fe)}return[H,U]}function I(R={}){let{initialCapacity:V=4096,auto:G=!0}=R,U=d(V),H=new Uint8Array(256),X=new Int32Array(5003),fe=new Int32Array(5003),$=!1;return{reset(){U.reset(),$=!1},finish(){U.writeByte(f.trailer)},bytes(){return U.bytes()},bytesView(){return U.bytesView()},get buffer(){return U.buffer},get stream(){return U},writeHeader:M,writeFrame(z,q,ee,De={}){var{transparent:Q=!1,transparentIndex:le=0,delay:We=0,palette:ie=null,repeat:Fe=0,colorDepth:K=8,dispose:ge=-1}=De;let ne=!1;if(G?$||(ne=!0,M(),$=!0):ne=!!De.first,q=Math.max(0,Math.floor(q)),ee=Math.max(0,Math.floor(ee)),ne){if(!ie)throw new Error("First frame must include a { palette } option");var[De,$e,xe,at,Te=8]=[U,q,ee,ie,K];at=L(at.length)-1,Te=128|Te-1<<4|at,F(De,$e),F(De,xe),De.writeBytes([Te,0,0]),k(U,ie),0<=Fe&&(at=U,$e=Fe,at.writeByte(33),at.writeByte(255),at.writeByte(11),D(at,"NETSCAPE2.0"),at.writeByte(3),at.writeByte(1),F(at,$e),at.writeByte(0))}var ye,xe=Math.round(We/10),De=U,Te=ge,Fe=xe,$e=Q,at=le,We=(De.writeByte(33),De.writeByte(249),De.writeByte(4),at<0&&(at=0,$e=!1),$e=$e?(ye=1,2):ye=0,0<=Te&&($e=7&Te),$e<<=2,De.writeByte(0|$e|ye),F(De,Fe),De.writeByte(at||0),De.writeByte(0),!!ie&&!ne);ge=U,Q=q,le=ee,ye=We?ie:null,ge.writeByte(44),F(ge,0),F(ge,0),F(ge,Q),F(ge,le),ye?(Q=L(ye.length)-1,ge.writeByte(128|Q)):ge.writeByte(0),We&&k(U,ie),[Fe,De,le,Q,ge=8,We,ie,z]=[U,z,q,ee,K,H,X,fe],h(le,Q,De,ge,Fe,We,ie,z)}};function M(){D(U,"GIF89a")}}function k(R,V){var G=1<<L(V.length);for(let U=0;U<G;U++){let H=[0,0,0];U<V.length&&(H=V[U]),R.writeByte(H[0]),R.writeByte(H[1]),R.writeByte(H[2])}}function F(R,V){R.writeByte(255&V),R.writeByte(V>>8&255)}function D(R,V){for(var G=0;G<V.length;G++)R.writeByte(V.charCodeAt(G))}function L(R){return Math.max(Math.ceil(Math.log2(R)),1)}var P=I},{}],251:[function(o,i,s){s.read=function(a,l,u,c,v){var d,p,h=8*v-c-1,m=(1<<h)-1,g=m>>1,y=-7,b=u?v-1:0,x=u?-1:1,v=a[l+b];for(b+=x,d=v&(1<<-y)-1,v>>=-y,y+=h;0<y;d=256*d+a[l+b],b+=x,y-=8);for(p=d&(1<<-y)-1,d>>=-y,y+=c;0<y;p=256*p+a[l+b],b+=x,y-=8);if(d===0)d=1-g;else{if(d===m)return p?NaN:1/0*(v?-1:1);p+=Math.pow(2,c),d-=g}return(v?-1:1)*p*Math.pow(2,d-c)},s.write=function(a,l,u,c,f,w){var p,h,m=8*w-f-1,g=(1<<m)-1,y=g>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:w-1,v=c?1:-1,w=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(h=isNaN(l)?1:0,p=g):(p=Math.floor(Math.log(l)/Math.LN2),l*(c=Math.pow(2,-p))<1&&(p--,c*=2),2<=(l+=1<=p+y?b/c:b*Math.pow(2,1-y))*c&&(p++,c/=2),g<=p+y?(h=0,p=g):1<=p+y?(h=(l*c-1)*Math.pow(2,f),p+=y):(h=l*Math.pow(2,y-1)*Math.pow(2,f),p=0));8<=f;a[u+x]=255&h,x+=v,h/=256,f-=8);for(p=p<<f|h,m+=f;0<m;a[u+x]=255&p,x+=v,p/=256,m-=8);a[u+x-v]|=128*w}},{}],252:[function(o,i,s){"use strict";var a;function l(de,me){return de.b===me.b&&de.a===me.a}function u(de,me){return de.b<me.b||de.b===me.b&&de.a<=me.a}function c(de,me,oe){var be=me.b-de.b,Oe=oe.b-me.b;return 0<be+Oe?be<Oe?me.a-de.a+be/(be+Oe)*(de.a-oe.a):me.a-oe.a+Oe/(be+Oe)*(oe.a-de.a):0}function f(de,me,oe){var be=me.b-de.b,Oe=oe.b-me.b;return 0<be+Oe?(me.a-oe.a)*be+(me.a-de.a)*Oe:0}function d(de,me){return de.a<me.a||de.a===me.a&&de.b<=me.b}function p(de,me,oe){var be=me.a-de.a,Oe=oe.a-me.a;return 0<be+Oe?be<Oe?me.b-de.b+be/(be+Oe)*(de.b-oe.b):me.b-oe.b+Oe/(be+Oe)*(oe.b-de.b):0}function h(de,me,oe){var be=me.a-de.a,Oe=oe.a-me.a;return 0<be+Oe?(me.b-oe.b)*be+(me.b-de.b)*Oe:0}function m(de,me,oe,be){return(de=de<0?0:de)<=(oe=oe<0?0:oe)?oe===0?(me+be)/2:me+de/(de+oe)*(be-me):be+oe/(de+oe)*(me-be)}function g(de){var me=w(de.b);return S(me,de.c),S(me.b,de.c),C(me,de.a),me}function y(de,me){var oe=!1,be=!1;de!==me&&(me.a!==de.a&&(be=!0,T(me.a,de.a)),me.d!==de.d&&(oe=!0,I(me.d,de.d)),_(me,de),be||(S(me,de.a),de.a.c=de),oe||(C(me,de.d),de.d.a=de))}function b(de){var me=de.b,oe=!1;de.d!==de.b.d&&(oe=!0,I(de.d,de.b.d)),de.c===de?T(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,_(de,de.b.e),oe||C(de,de.d)),me.c===me?(T(me.a,null),I(me.d,null)):(de.d.a=me.b.e,me.a.c=me.c,_(me,me.b.e)),E(de)}function x(de){var me=w(de),oe=me.b;return _(me,de.e),me.a=de.b.a,S(oe,me.a),me.d=oe.d=de.d,me=me.b,_(de.b,de.b.b.e),_(de.b,me),de.b.a=me.a,me.b.a.c=me.b,me.b.d=de.b.d,me.f=de.f,me.b.f=de.b.f,me}function v(de,me){var oe=!1,be=w(de),Oe=be.b;return me.d!==de.d&&(oe=!0,I(me.d,de.d)),_(be,de.e),_(Oe,me),be.a=de.b.a,Oe.a=me.a,be.d=Oe.d=de.d,de.d.a=Oe,oe||C(be,de.d),be}function w(de){var me=new xe,oe=new xe,be=de.b.h;return(((oe.h=be).b.h=me).h=de).b.h=oe,me.b=oe,((me.c=me).e=oe).b=me,(oe.c=oe).e=me}function _(de,me){var oe=de.c,be=me.c;oe.b.e=me,(be.b.e=de).c=be,me.c=oe}function S(de,me){var oe=me.f,be=new Te(me,oe);for(oe.e=be,oe=(me.f=be).c=de;oe.a=be,(oe=oe.c)!==de;);}function C(de,me){var oe=me.d,be=new ye(me,oe);for(oe.b=be,(me.d=be).a=de,be.c=me.c,oe=de;oe.d=be,(oe=oe.e)!==de;);}function E(de){var me=de.h;de=de.b.h,(me.b.h=de).b.h=me}function T(de,me){for(var oe=de.c,be=oe;be.a=me,(be=be.c)!==oe;);oe=de.f,((be=de.e).f=oe).e=be}function I(de,me){for(var oe=de.a,be=oe;be.d=me,(be=be.e)!==oe;);oe=de.d,((be=de.b).d=oe).b=be}function k(de){var me=0;return Math.abs(de[1])>Math.abs(de[0])&&(me=1),me=Math.abs(de[2])>Math.abs(de[me])?2:me}function F(de,me){de.f+=me.f,de.b.f+=me.b.f}function D(de,me,oe){return de=de.a,me=me.a,oe=oe.a,me.b.a===de?oe.b.a===de?u(me.a,oe.a)?f(oe.b.a,me.a,oe.a)<=0:0<=f(me.b.a,oe.a,me.a):f(oe.b.a,de,oe.a)<=0:oe.b.a===de?0<=f(me.b.a,de,me.a):(me=c(me.b.a,de,me.a),(de=c(oe.b.a,de,oe.a))<=me)}function L(de){de.a.i=null;var me=de.e;me.a.c=me.c,me.c.a=me.a,de.e=null}function P(de,me){b(de.a),de.c=!1,(de.a=me).i=de}function R(de){for(var me=de.a.a;(de=Ge(de)).a.a===me;);return de.c&&(P(de,me=v(ut(de).a.b,de.a.e)),de=Ge(de)),de}function V(de,me,oe){var be=new Be;return be.a=oe,be.e=le(de.f,me.e,be),oe.i=be}function G(de,me){switch(de.s){case 100130:return(1&me)!=0;case 100131:return me!==0;case 100132:return 0<me;case 100133:return me<0;case 100134:return 2<=me||me<=-2}return!1}function U(de){var me=de.a,oe=me.d;oe.c=de.d,oe.a=me,L(de)}function H(de,me,oe){for(me=(de=me).a;de!==oe;){de.c=!1;var be=ut(de),Oe=be.a;if(Oe.a!==me.a){if(!be.c){U(de);break}P(be,Oe=v(me.c.b,Oe.b))}me.c!==Oe&&(y(Oe.b.e,Oe),y(me,Oe)),U(de),me=be.a,de=be}return me}function X(de,me,oe,be,Oe,Ve){for(var Qe=!0;V(de,me,oe.b),(oe=oe.c)!==be;);for(Oe===null&&(Oe=ut(me).a.b.c);(oe=(be=ut(me)).a.b).a===Oe.a;)oe.c!==Oe&&(y(oe.b.e,oe),y(Oe.b.e,oe)),be.f=me.f-oe.f,be.d=G(de,be.f),me.b=!0,!Qe&&z(de,me)&&(F(oe,Oe),L(me),b(Oe)),Qe=!1,me=be,Oe=oe;me.b=!0,Ve&&ee(de,me)}function fe(de,me,oe,be,Oe){var Ve=[me.g[0],me.g[1],me.g[2]];me.d=null,me.d=de.o&&de.o(Ve,oe,be,de.c)||null,me.d===null&&(Oe?de.n||(ne(de,100156),de.n=!0):me.d=oe[0])}function $(de,me,oe){var be=[null,null,null,null];be[0]=me.a.d,be[1]=oe.a.d,fe(de,me.a,be,[.5,.5,0,0],!1),y(me,oe)}function M(de,me,oe,be,Oe){var Ve=Math.abs(me.b-de.b)+Math.abs(me.a-de.a),Qe=Math.abs(oe.b-de.b)+Math.abs(oe.a-de.a),St=Oe+1;be[Oe]=.5*Qe/(Ve+Qe),be[St]=.5*Ve/(Ve+Qe),de.g[0]+=be[Oe]*me.g[0]+be[St]*oe.g[0],de.g[1]+=be[Oe]*me.g[1]+be[St]*oe.g[1],de.g[2]+=be[Oe]*me.g[2]+be[St]*oe.g[2]}function z(de,me){var oe=ut(me),be=me.a,Oe=oe.a;if(u(be.a,Oe.a)){if(0<f(Oe.b.a,be.a,Oe.a))return;if(l(be.a,Oe.a)){if(be.a!==Oe.a){var oe=de.e,Ve=be.a.h;if(0<=Ve){var Qe=(oe=oe.b).d,St=oe.e,Nt=oe.c,Ft=Nt[Ve];Qe[Ft]=Qe[oe.a],(Nt[Qe[Ft]]=Ft)<=--oe.a&&(Ft<=1||u(St[Qe[Ft>>1]],St[Qe[Ft]])?Rt:Mt)(oe,Ft),St[Ve]=null,Nt[Ve]=oe.b,oe.b=Ve}else for(oe.c[-(Ve+1)]=null;0<oe.a&&oe.c[oe.d[oe.a-1]]===null;)--oe.a;$(de,Oe.b.e,be)}}else x(Oe.b),y(be,Oe.b.e),me.b=oe.b=!0}else{if(f(be.b.a,Oe.a,be.a)<0)return;Ge(me).b=me.b=!0,x(be.b),y(Oe.b.e,be)}return 1}function q(de,me){var oe=ut(me),be=me.a,Oe=oe.a,Ve=be.a,Qe=Oe.a,St=be.b.a,Nt=Oe.b.a,Ft=new Te;if(f(St,de.a,Ve),f(Nt,de.a,Qe),!(Ve===Qe||Math.min(Ve.a,St.a)>Math.max(Qe.a,Nt.a))){if(u(Ve,Qe)){if(0<f(Nt,Ve,Qe))return}else if(f(St,Qe,Ve)<0)return;var Ut,en,Lr=St,ur=Ve,Yr=Nt,Rr=Qe;if(u(Lr,ur)||(Ut=Lr,Lr=ur,ur=Ut),u(Yr,Rr)||(Ut=Yr,Yr=Rr,Rr=Ut),u(Lr,Yr)||(Ut=Lr,Lr=Yr,Yr=Ut,Ut=ur,ur=Rr,Rr=Ut),u(Yr,ur)?u(ur,Rr)?((Ut=c(Lr,Yr,ur))+(en=c(Yr,ur,Rr))<0&&(Ut=-Ut,en=-en),Ft.b=m(Ut,Yr.b,en,ur.b)):((Ut=f(Lr,Yr,ur))+(en=-f(Lr,Rr,ur))<0&&(Ut=-Ut,en=-en),Ft.b=m(Ut,Yr.b,en,Rr.b)):Ft.b=(Yr.b+ur.b)/2,d(Lr,ur)||(Ut=Lr,Lr=ur,ur=Ut),d(Yr,Rr)||(Ut=Yr,Yr=Rr,Rr=Ut),d(Lr,Yr)||(Ut=Lr,Lr=Yr,Yr=Ut,Ut=ur,ur=Rr,Rr=Ut),d(Yr,ur)?d(ur,Rr)?((Ut=p(Lr,Yr,ur))+(en=p(Yr,ur,Rr))<0&&(Ut=-Ut,en=-en),Ft.a=m(Ut,Yr.a,en,ur.a)):((Ut=h(Lr,Yr,ur))+(en=-h(Lr,Rr,ur))<0&&(Ut=-Ut,en=-en),Ft.a=m(Ut,Yr.a,en,Rr.a)):Ft.a=(Yr.a+ur.a)/2,u(Ft,de.a)&&(Ft.b=de.a.b,Ft.a=de.a.a),Lr=u(Ve,Qe)?Ve:Qe,u(Lr,Ft)&&(Ft.b=Lr.b,Ft.a=Lr.a),l(Ft,Ve)||l(Ft,Qe))return z(de,me),0;if(!l(St,de.a)&&0<=f(St,de.a,Ft)||!l(Nt,de.a)&&f(Nt,de.a,Ft)<=0){if(Nt===de.a)x(be.b),y(Oe.b,be),be=ut(me=R(me)).a,H(de,ut(me),oe),X(de,me,be.b.e,be,be,!0);else{if(St!==de.a)return 0<=f(St,de.a,Ft)&&(Ge(me).b=me.b=!0,x(be.b),be.a.b=de.a.b,be.a.a=de.a.a),void(f(Nt,de.a,Ft)<=0&&(me.b=oe.b=!0,x(Oe.b),Oe.a.b=de.a.b,Oe.a.a=de.a.a));for(x(Oe.b),y(be.e,Oe.b.e),Qe=(Ve=oe=me).a.b.a;(Ve=Ge(Ve)).a.b.a===Qe;);Ve=ut(me=Ve).a.b.c,oe.a=Oe.b.e,X(de,me,(Oe=H(de,oe,null)).c,be.b.c,Ve,!0)}return 1}x(be.b),x(Oe.b),y(Oe.b.e,be),be.a.b=Ft.b,be.a.a=Ft.a,be.a.h=$e(de.e,be.a),be=be.a,Oe=[0,0,0,0],Ft=[Ve.d,St.d,Qe.d,Nt.d],be.g[0]=be.g[1]=be.g[2]=0,M(be,Ve,St,Oe,0),M(be,Qe,Nt,Oe,2),fe(de,be,Ft,Oe,!0),Ge(me).b=me.b=oe.b=!0}}function ee(de,me){for(var oe=ut(me);;){for(;oe.b;)oe=ut(me=oe);if(!me.b&&((me=Ge(oe=me))===null||!me.b))break;me.b=!1;var be=me.a,Oe=oe.a;if(Ve=be.b.a!==Oe.b.a)e:{var Ve,Qe=ut(Ve=me),St=Ve.a,Nt=Qe.a,Ft=void 0;if(u(St.b.a,Nt.b.a)){if(f(St.b.a,Nt.b.a,St.a)<0){Ve=!1;break e}Ge(Ve).b=Ve.b=!0,Ft=x(St),y(Nt.b,Ft),Ft.d.c=Ve.d}else{if(0<f(Nt.b.a,St.b.a,Nt.a)){Ve=!1;break e}Ve.b=Qe.b=!0,Ft=x(Nt),y(St.e,Nt.b),Ft.b.d.c=Ve.d}Ve=!0}if(Ve&&(oe.c?(L(oe),b(Oe),Oe=(oe=ut(me)).a):me.c&&(L(me),b(be),be=(me=Ge(oe)).a)),be.a!==Oe.a){if(be.b.a===Oe.b.a||me.c||oe.c||be.b.a!==de.a&&Oe.b.a!==de.a)z(de,me);else if(q(de,me))break}be.a===Oe.a&&be.b.a===Oe.b.a&&(F(Oe,be),L(me),b(be),me=Ge(oe))}}function ae(de,me){var oe=new Be,be=g(de.b);be.a.b=4e150,be.a.a=me,be.b.a.b=-4e150,be.b.a.a=me,de.a=be.b.a,oe.a=be,oe.f=0,oe.d=!1,oe.c=!1,oe.h=!0,oe.b=!1,be=le(be=de.f,be.a,oe),oe.e=be}function Q(de){this.a=new ie,this.b=de,this.c=D}function le(de,me,oe){for(;(me=me.c).b!==null&&!de.c(de.b,me.b,oe););return de=new ie(oe,me.a,me),me.a.c=de,me.a=de}function ie(de,me,oe){this.b=de||null,this.a=me||this,this.c=oe||this}function K(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ge(de,me){if(de.d!==me)for(;de.d!==me;)if(de.d<me)switch(de.d){case 0:ne(de,100151),de.u(null);break;case 1:ne(de,100152),de.t()}else switch(de.d){case 2:ne(de,100154),de.v();break;case 1:ne(de,100153),de.w()}}function ne(de,me){de.p&&de.p(me,de.c)}function ye(de,me){this.b=de||this,this.d=me||this,this.a=null,this.c=!1}function xe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function De(){this.c=new Te,this.a=new ye,this.b=new xe,this.d=new xe,this.b.b=this.d,this.d.b=this.b}function Te(de,me){this.e=de||this,this.f=me||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Fe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new We}function $e(de,me){var oe,be,Oe;return de.e?(2*(be=++(oe=de.b).a)>oe.f&&(oe.f*=2,oe.c=jt(oe.c,oe.f+1)),oe.b===0?Oe=be:(Oe=oe.b,oe.b=oe.c[oe.b]),oe.e[Oe]=me,oe.c[Oe]=be,oe.d[be]=Oe,oe.h&&Mt(oe,be),Oe):(oe=de.a++,de.c[oe]=me,-(oe+1))}function at(de){if(de.a===0)return kt(de.b);var me=de.c[de.d[de.a-1]];if(de.b.a!==0&&u(_t(de.b),me))return kt(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return me}function We(){this.d=jt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function jt(de,me){for(var oe=Array(me),be=0;be<de.length;be++)oe[be]=de[be];for(;be<me;be++)oe[be]=0;return oe}function _t(de){return de.e[de.d[1]]}function kt(de){var me=de.d,oe=de.e,be=de.c,Oe=me[1],Ve=oe[Oe];return 0<de.a&&(me[1]=me[de.a],be[me[1]]=1,oe[Oe]=null,be[Oe]=de.b,de.b=Oe,0<--de.a&&Rt(de,1)),Ve}function Rt(de,me){for(var oe=de.d,be=de.e,Oe=de.c,Ve=me,Qe=oe[Ve];;){var St=Ve<<1,Nt=(St<de.a&&u(be[oe[St+1]],be[oe[St]])&&(St+=1),oe[St]);if(St>de.a||u(be[Qe],be[Nt])){Oe[oe[Ve]=Qe]=Ve;break}Oe[oe[Ve]=Nt]=Ve,Ve=St}}function Mt(de,me){for(var oe=de.d,be=de.e,Oe=de.c,Ve=me,Qe=oe[Ve];;){var St=Ve>>1,Nt=oe[St];if(St==0||u(be[Nt],be[Qe])){Oe[oe[Ve]=Qe]=Ve;break}Oe[oe[Ve]=Nt]=Ve,Ve=St}}function Be(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ut(de){return de.e.c.b}function Ge(de){return de.e.a.b}(a=K.prototype).x=function(){ge(this,0)},a.B=function(de,me){switch(de){case 100142:return;case 100140:switch(me){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=me)}break;case 100141:return void(this.m=!!me);default:return void ne(this,100900)}ne(this,100901)},a.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ne(this,100900)}return!1},a.A=function(de,me,oe){this.j[0]=de,this.j[1]=me,this.j[2]=oe},a.z=function(de,me){var oe=me||null;switch(de){case 100100:case 100106:this.h=oe;break;case 100104:case 100110:this.l=oe;break;case 100101:case 100107:this.k=oe;break;case 100102:case 100108:this.i=oe;break;case 100103:case 100109:this.p=oe;break;case 100105:case 100111:this.o=oe;break;case 100112:this.r=oe;break;default:ne(this,100900)}},a.C=function(de,me){var oe=!1,be=[0,0,0];ge(this,2);for(var Oe=0;Oe<3;++Oe){var Ve=de[Oe];Ve<-1e150&&(Ve=-1e150,oe=!0),1e150<Ve&&(Ve=1e150,oe=!0),be[Oe]=Ve}oe&&ne(this,100155),(oe=this.q)===null?y(oe=g(this.b),oe.b):(x(oe),oe=oe.e),oe.a.d=me,oe.a.g[0]=be[0],oe.a.g[1]=be[1],oe.a.g[2]=be[2],oe.f=1,oe.b.f=-1,this.q=oe},a.u=function(de){ge(this,0),this.d=1,this.b=new De,this.c=de},a.t=function(){ge(this,1),this.d=2,this.q=null},a.v=function(){ge(this,2),this.d=1},a.w=function(){ge(this,1),this.d=0;var de,me,oe=this.j[0],be=this.j[1],Oe=this.j[2],Ve=!1,Qe=[oe,be,Oe];if(oe===0&&be===0&&Oe===0){for(var be=[-2e150,-2e150,-2e150],St=[2e150,2e150,2e150],Oe=[],Nt=[],oe=(Ve=this.b.c).e;oe!==Ve;oe=oe.e)for(var Ft=0;Ft<3;++Ft){var Ut=oe.g[Ft];Ut<St[Ft]&&(St[Ft]=Ut,Nt[Ft]=oe),Ut>be[Ft]&&(be[Ft]=Ut,Oe[Ft]=oe)}if(be[1]-St[1]>be[oe=0]-St[0]&&(oe=1),St[oe=be[2]-St[2]>be[oe]-St[oe]?2:oe]>=be[oe])Qe[0]=0,Qe[1]=0,Qe[2]=1;else{for(St=Nt[oe],Oe=Oe[oe],Nt=[be=0,0,0],St=[St.g[0]-Oe.g[0],St.g[1]-Oe.g[1],St.g[2]-Oe.g[2]],Ft=[0,0,0],oe=Ve.e;oe!==Ve;oe=oe.e)Ft[0]=oe.g[0]-Oe.g[0],Ft[1]=oe.g[1]-Oe.g[1],Ft[2]=oe.g[2]-Oe.g[2],Nt[0]=St[1]*Ft[2]-St[2]*Ft[1],Nt[1]=St[2]*Ft[0]-St[0]*Ft[2],Nt[2]=St[0]*Ft[1]-St[1]*Ft[0],be<(Ut=Nt[0]*Nt[0]+Nt[1]*Nt[1]+Nt[2]*Nt[2])&&(be=Ut,Qe[0]=Nt[0],Qe[1]=Nt[1],Qe[2]=Nt[2]);be<=0&&(Qe[0]=Qe[1]=Qe[2]=0,Qe[k(St)]=1)}Ve=!0}for(Nt=k(Qe),oe=this.b.c,be=(Nt+1)%3,Oe=(Nt+2)%3,Nt=0<Qe[Nt]?1:-1,Qe=oe.e;Qe!==oe;Qe=Qe.e)Qe.b=Qe.g[be],Qe.a=Nt*Qe.g[Oe];if(Ve){for(Qe=0,oe=(Ve=this.b.a).b;oe!==Ve;oe=oe.b)if(!((be=oe.a).f<=0))for(;Qe+=(be.a.b-be.b.a.b)*(be.a.a+be.b.a.a),(be=be.e)!==oe.a;);if(Qe<0)for(Ve=(Qe=this.b.c).e;Ve!==Qe;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,Qe=this.b.b,oe=Qe.h;oe!==Qe;oe=Ve)Ve=oe.h,be=oe.e,l(oe.a,oe.b.a)&&oe.e.e!==oe&&($(this,be,oe),b(oe),be=(oe=be).e),be.e===oe&&(be!==oe&&(be!==Ve&&be!==Ve.b||(Ve=Ve.h),b(be)),oe!==Ve&&oe!==Ve.b||(Ve=Ve.h),b(oe));for(this.e=Qe=new Fe,Ve=this.b.c,oe=Ve.e;oe!==Ve;oe=oe.e)oe.h=$e(Qe,oe);var en=Qe;en.d=[];for(var Lr=0;Lr<en.a;Lr++)en.d[Lr]=Lr;en.d.sort(function(Rr){return function(hi,Ql){return u(Rr[hi],Rr[Ql])?1:-1}}(en.c)),en.e=!0;for(var ur=en.b,Yr=ur.a;1<=Yr;--Yr)Rt(ur,Yr);for(ur.h=!0,this.f=new Q(this),ae(this,-4e150),ae(this,4e150);(Qe=at(this.e))!==null;){for(;;){e:if((oe=this.e).a===0)Ve=_t(oe.b);else if(Ve=oe.c[oe.d[oe.a-1]],oe.b.a!==0&&u(oe=_t(oe.b),Ve)){Ve=oe;break e}if(Ve===null||!l(Ve,Qe))break;Ve=at(this.e),$(this,Qe.c,Ve.c)}(function Rr(hi,Ql){for(var Gs,Eo=(hi.a=Ql).c;Eo.i===null;)if((Eo=Eo.c)===Ql.c){var Eo=hi,_i=Ql;(jo=new Be).a=_i.c.b;for(var Cl=(Hn=Eo.f).a;(Cl=Cl.a).b!==null&&!Hn.c(Hn.b,jo,Cl.b););var Hn,Sl,Ra=ut(Hn=Cl.b),jo=Hn.a,Cl=Ra.a;return void(f(jo.b.a,_i,jo.a)===0?l((jo=Hn.a).a,_i)||l(jo.b.a,_i)||(x(jo.b),Hn.c&&(b(jo.c),Hn.c=!1),y(_i.c,jo),Rr(Eo,_i)):(Sl=u(Cl.b.a,jo.b.a)?Hn:Ra,Ra=void 0,Hn.d||Sl.c?(Ra=Sl===Hn?v(_i.c.b,jo.e):v(Cl.b.c.b,_i.c).b,Sl.c?P(Sl,Ra):((Hn=V(jo=Eo,Hn,Ra)).f=Ge(Hn).f+Hn.a.f,Hn.d=G(jo,Hn.f)),Rr(Eo,_i)):X(Eo,Hn,_i.c,_i.c,null,!0)))}Hn=(jo=ut(Eo=R(Eo.i))).a,(jo=H(hi,jo,null)).c===Hn?(jo=(Hn=jo).c,Cl=ut(Eo),Ra=Eo.a,Sl=Cl.a,Gs=!1,Ra.b.a!==Sl.b.a&&q(hi,Eo),l(Ra.a,hi.a)&&(y(jo.b.e,Ra),jo=ut(Eo=R(Eo)).a,H(hi,ut(Eo),Cl),Gs=!0),l(Sl.a,hi.a)&&(y(Hn,Sl.b.e),Hn=H(hi,Cl,null),Gs=!0),Gs?X(hi,Eo,Hn.c,jo,jo,!0):(_i=u(Sl.a,Ra.a)?Sl.b.e:Ra,X(hi,Eo,_i=v(Hn.c.b,_i),_i.c,_i.c,!1),_i.b.i.c=!0,ee(hi,Eo))):X(hi,Eo,jo.c,Hn,Hn,!0)})(this,Qe)}for(this.a=this.f.a.a.b.a.a,Qe=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++Qe,L(Ve);for(this.f=null,(Qe=this.e).b=null,Qe.d=null,this.e=Qe.c=null,Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)Ve=oe.b,(oe=oe.a).e.e===oe&&(F(oe.c,oe),b(oe));if(!this.n){if(Qe=this.b,this.m)for(oe=Qe.b.h;oe!==Qe.b;oe=Ve)Ve=oe.h,oe.b.d.c!==oe.d.c?oe.f=oe.d.c?1:-1:b(oe);else for(oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,oe.c){for(oe=oe.a;u(oe.b.a,oe.a);oe=oe.c.b);for(;u(oe.a,oe.b.a);oe=oe.e);for(be=oe.c.b,Oe=void 0;oe.e!==be;)if(u(oe.b.a,be.a)){for(;be.e!==oe&&(u((me=be.e).b.a,me.a)||f(be.a,be.b.a,be.e.b.a)<=0);)be=(Oe=v(be.e,be)).b;be=be.c.b}else{for(;be.e!==oe&&(u((de=oe.c.b).a,de.b.a)||0<=f(oe.b.a,oe.a,oe.c.b.a));)oe=(Oe=v(oe,oe.c.b)).b;oe=oe.e}for(;be.e.e!==oe;)Oe=v(be.e,be),be=Oe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=(Qe=this.b).a.b;Ve!==Qe.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),oe=Ve.a;this.k&&this.k(oe.a.d,this.c),(oe=oe.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for(Qe=this.b,Ve=!!this.l,oe=!1,be=-1,Oe=Qe.a.d;Oe!==Qe.a;Oe=Oe.d)if(Oe.c)for(oe||(this.h&&this.h(4,this.c),oe=!0),Nt=Oe.a;Ve&&(St=Nt.b.d.c?0:1,be!==St&&(be=St,this.l&&this.l(!!be,this.c))),this.k&&this.k(Nt.a.d,this.c),(Nt=Nt.e)!==Oe.a;);oe&&this.i&&this.i(this.c)}if(this.r){for(Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,!oe.c){for(Oe=(be=oe.a).e,Nt=void 0;Oe=(Nt=Oe).e,(Nt.d=null)===Nt.b.d&&(Nt.c===Nt?T(Nt.a,null):(Nt.a.c=Nt.c,_(Nt,Nt.b.e)),(St=Nt.b).c===St?T(St.a,null):(St.a.c=St.c,_(St,St.b.e)),E(Nt)),Nt!==be;);be=oe.d,((oe=oe.b).d=be).b=oe}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:K,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},K.prototype.gluDeleteTess=K.prototype.x,K.prototype.gluTessProperty=K.prototype.B,K.prototype.gluGetTessProperty=K.prototype.y,K.prototype.gluTessNormal=K.prototype.A,K.prototype.gluTessCallback=K.prototype.z,K.prototype.gluTessVertex=K.prototype.C,K.prototype.gluTessBeginPolygon=K.prototype.u,K.prototype.gluTessBeginContour=K.prototype.t,K.prototype.gluTessEndContour=K.prototype.v,K.prototype.gluTessEndPolygon=K.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(o,i,s){"use strict";function a(u,c,f,d){var p=0,h=(d=d===void 0?{}:d).loop===void 0?null:d.loop,m=d.palette===void 0?null:d.palette;if(c<=0||f<=0||65535<c||65535<f)throw new Error("Width/Height invalid.");function g(C){if(C=C.length,C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}u[p++]=71,u[p++]=73,u[p++]=70,u[p++]=56,u[p++]=57,u[p++]=97;var y=0,b=0;if(m!==null){for(var x=g(m);x>>=1;)++y;if(x=1<<y,--y,d.background!==void 0){if(x<=(b=d.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(u[p++]=255&c,u[p++]=c>>8&255,u[p++]=255&f,u[p++]=f>>8&255,u[p++]=(m!==null?128:0)|y,u[p++]=b,u[p++]=0,m!==null)for(var v=0,w=m.length;v<w;++v){var _=m[v];u[p++]=_>>16&255,u[p++]=_>>8&255,u[p++]=255&_}if(h!==null){if(h<0||65535<h)throw new Error("Loop count invalid.");u[p++]=33,u[p++]=255,u[p++]=11,u[p++]=78,u[p++]=69,u[p++]=84,u[p++]=83,u[p++]=67,u[p++]=65,u[p++]=80,u[p++]=69,u[p++]=50,u[p++]=46,u[p++]=48,u[p++]=3,u[p++]=1,u[p++]=255&h,u[p++]=h>>8&255,u[p++]=0}var S=!1;this.addFrame=function(C,E,T,I,k,F){if(S===!0&&(--p,S=!1),F=F===void 0?{}:F,C<0||E<0||65535<C||65535<E)throw new Error("x/y invalid.");if(T<=0||I<=0||65535<T||65535<I)throw new Error("Width/Height invalid.");if(k.length<T*I)throw new Error("Not enough pixels for the frame size.");var D=!0,L=F.palette;if(L==null&&(D=!1,L=m),L==null)throw new Error("Must supply either a local or global palette.");for(var R=g(L),P=0;R>>=1;)++P;var R=1<<P,V=F.delay===void 0?0:F.delay,G=F.disposal===void 0?0:F.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var U=!1,H=0;if(F.transparent!==void 0&&F.transparent!==null&&(U=!0,(H=F.transparent)<0||R<=H))throw new Error("Transparent color index.");if(G===0&&!U&&V===0||(u[p++]=33,u[p++]=249,u[p++]=4,u[p++]=G<<2|(U===!0?1:0),u[p++]=255&V,u[p++]=V>>8&255,u[p++]=H,u[p++]=0),u[p++]=44,u[p++]=255&C,u[p++]=C>>8&255,u[p++]=255&E,u[p++]=E>>8&255,u[p++]=255&T,u[p++]=T>>8&255,u[p++]=255&I,u[p++]=I>>8&255,u[p++]=D===!0?128|P-1:0,D===!0)for(var X=0,fe=L.length;X<fe;++X){var $=L[X];u[p++]=$>>16&255,u[p++]=$>>8&255,u[p++]=255&$}return p=function(M,z,q,ee){M[z++]=q;var ae=z++,Q=1<<q,le=Q-1,ie=1+Q,K=1+ie,ge=q+1,ne=0,ye=0;function xe(kt){for(;kt<=ne;)M[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(M[ae]=255,ae=z++)}function De(kt){ye|=kt<<ne,ne+=ge,xe(8)}var Te=ee[0]&le,Fe={};De(Q);for(var $e=1,at=ee.length;$e<at;++$e){var We=ee[$e]&le,jt=Te<<8|We,_t=Fe[jt];if(_t===void 0){for(ye|=Te<<ne,ne+=ge;8<=ne;)M[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(M[ae]=255,ae=z++);K===4096?(De(Q),K=1+ie,ge=q+1,Fe={}):(1<<ge<=K&&++ge,Fe[jt]=K++),Te=We}else Te=_t}return De(Te),De(ie),xe(1),ae+1===z?M[ae]=0:(M[ae]=z-ae-1,M[z++]=0),z}(u,p,P<2?2:P,k)},this.end=function(){return S===!1&&(u[p++]=59,S=!0),p},this.getOutputBuffer=function(){return u},this.setOutputBuffer=function(C){u=C},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(C){p=C}}function l(u,c,f,d){for(var p=u[c++],h=1<<p,m=1+h,g=1+m,y=p+1,b=(1<<y)-1,x=0,v=0,w=0,_=u[c++],S=new Int32Array(4096),C=null;;){for(;x<16&&_!==0;)v|=u[c++]<<x,x+=8,_===1?_=u[c++]:--_;if(x<y)break;var E=v&b;if(v>>=y,x-=y,E==h)g=1+m,b=(1<<(y=p+1))-1,C=null;else{if(E==m)break;for(var T=E<g?E:C,I=0,k=T;h<k;)k=S[k]>>8,++I;var F=k;if(d<w+I+(T!==E?1:0))return void console.log("Warning, gif stream longer than expected.");f[w++]=F;var D=w+=I;for(T!==E&&(f[w++]=F),k=T;I--;)k=S[k],f[--D]=255&k,k>>=8;C!==null&&g<4096&&(S[g++]=C<<8|F,b+1<=g&&y<12&&(++y,b=b<<1|1)),C=E}}w!==d&&console.log("Warning, gif stream shorter than expected.")}try{s.GifWriter=a,s.GifReader=function(u){var c=0;if(u[c++]!==71||u[c++]!==73||u[c++]!==70||u[c++]!==56||(u[c++]+1&253)!=56||u[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=u[c++]|u[c++]<<8,d=u[c++]|u[c++]<<8,p=u[c++],h=1<<1+(7&p),m=(u[c++],u[c++],null),g=null,y=(p>>7&&(m=c,c+=3*(g=h)),!0),b=[],x=0,v=null,w=0,_=null;for(this.width=f,this.height=d;y&&c<u.length;)switch(u[c++]){case 33:switch(u[c++]){case 255:if(u[c]!==11||u[c+1]==78&&u[c+2]==69&&u[c+3]==84&&u[c+4]==83&&u[c+5]==67&&u[c+6]==65&&u[c+7]==80&&u[c+8]==69&&u[c+9]==50&&u[c+10]==46&&u[c+11]==48&&u[c+12]==3&&u[c+13]==1&&u[c+16]==0)c+=14,_=u[c++]|u[c++]<<8,c++;else for(c+=12;;){if(!(0<=(C=u[c++])))throw Error("Invalid block size");if(C===0)break;c+=C}break;case 249:if(u[c++]!==4||u[c+4]!==0)throw new Error("Invalid graphics extension block.");var S=u[c++],x=u[c++]|u[c++]<<8,v=u[c++];!(1&S)&&(v=null),w=S>>2&7,c++;break;case 254:for(;;){if(!(0<=(C=u[c++])))throw Error("Invalid block size");if(C===0)break;c+=C}break;default:throw new Error("Unknown graphic control label: 0x"+u[c-1].toString(16))}break;case 44:var C,E=u[c++]|u[c++]<<8,T=u[c++]|u[c++]<<8,I=u[c++]|u[c++]<<8,k=u[c++]|u[c++]<<8,V=u[c++],F=V>>6&1,D=1<<1+(7&V),L=m,P=g,R=!1,V=(V>>7&&(R=!0,L=c,c+=3*(P=D)),c);for(c++;;){if(!(0<=(C=u[c++])))throw Error("Invalid block size");if(C===0)break;c+=C}b.push({x:E,y:T,width:I,height:k,has_local_palette:R,palette_offset:L,palette_size:P,data_offset:V,data_length:c-V,transparent_index:v,interlaced:!!F,delay:x,disposal:w});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+u[c-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return _},this.frameInfo=function(G){if(G<0||G>=b.length)throw new Error("Frame index out of range.");return b[G]},this.decodeAndBlitFrameBGRA=function(G,U){for(var G=this.frameInfo(G),H=G.width*G.height,X=new Uint8Array(H),fe=(l(u,G.data_offset,X,H),G.palette_offset),$=G.transparent_index,M=($===null&&($=256),G.width),z=f-M,q=M,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),K=0,ge=X.length;K<ge;++K){var ne,ye,xe=X[K];q===0&&(q=M,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(M+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[fe+3*xe],ye=u[fe+3*xe+1],xe=u[fe+3*xe+2],U[Q++]=xe,U[Q++]=ye,U[Q++]=ne,U[Q++]=255),--q}},this.decodeAndBlitFrameRGBA=function(G,U){for(var G=this.frameInfo(G),H=G.width*G.height,X=new Uint8Array(H),fe=(l(u,G.data_offset,X,H),G.palette_offset),$=G.transparent_index,M=($===null&&($=256),G.width),z=f-M,q=M,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),K=0,ge=X.length;K<ge;++K){var ne,ye,xe=X[K];q===0&&(q=M,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(M+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[fe+3*xe],ye=u[fe+3*xe+1],xe=u[fe+3*xe+2],U[Q++]=ne,U[Q++]=ye,U[Q++]=xe,U[Q++]=255),--q}}}}catch{}},{}],254:[function(o,i,s){(function(a){var l,u;l=this,u=function(c){"use strict";function f(W){if(this==null)throw TypeError();var O,j=String(this),B=j.length,W=W?Number(W):0;if(!((W=W!=W?0:W)<0||B<=W))return 55296<=(O=j.charCodeAt(W))&&O<=56319&&W+1<B&&56320<=(B=j.charCodeAt(W+1))&&B<=57343?1024*(O-55296)+B-56320+65536:O}String.prototype.codePointAt||((d=function(){try{var A={},O=Object.defineProperty,j=O(A,A,A)&&O}catch{}return j}())?d(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var d,p=0,h=-3;function m(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(A,O){this.source=A,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=O,this.destLen=0,this.ltree=new m,this.dtree=new m}var y=new m,b=new m,x=new Uint8Array(30),v=new Uint16Array(30),w=new Uint8Array(30),_=new Uint16Array(30),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new m,E=new Uint8Array(320);function T(A,O,j,B){for(var W,Z=0;Z<j;++Z)A[Z]=0;for(Z=0;Z<30-j;++Z)A[Z+j]=Z/j|0;for(W=B,Z=0;Z<30;++Z)O[Z]=W,W+=1<<A[Z]}var I=new Uint16Array(16);function k(A,O,j,B){for(var W,Z=0;Z<16;++Z)A.table[Z]=0;for(Z=0;Z<B;++Z)A.table[O[j+Z]]++;for(Z=W=A.table[0]=0;Z<16;++Z)I[Z]=W,W+=A.table[Z];for(Z=0;Z<B;++Z)O[j+Z]&&(A.trans[I[O[j+Z]]++]=Z)}function F(A,O,j){if(!O)return j;for(;A.bitcount<24;)A.tag|=A.source[A.sourceIndex++]<<A.bitcount,A.bitcount+=8;var B=A.tag&65535>>>16-O;return A.tag>>>=O,A.bitcount-=O,B+j}function D(A,O){for(;A.bitcount<24;)A.tag|=A.source[A.sourceIndex++]<<A.bitcount,A.bitcount+=8;for(var j=0,B=0,W=0,Z=A.tag;B=2*B+(1&Z),Z>>>=1,j+=O.table[++W],0<=(B-=O.table[W]););return A.tag=Z,A.bitcount-=W,O.trans[j+B]}function L(A,O,j){for(;;){var B=D(A,O);if(B===256)return p;if(B<256)A.dest[A.destLen++]=B;else for(var W,Z=F(A,x[B-=257],v[B]),B=D(A,j),te=W=A.destLen-F(A,w[B],_[B]);te<W+Z;++te)A.dest[A.destLen++]=A.dest[te]}}for(var P=y,R=b,V=0;V<7;++V)P.table[V]=0;for(P.table[7]=24,P.table[8]=152,P.table[9]=112,V=0;V<24;++V)P.trans[V]=256+V;for(V=0;V<144;++V)P.trans[24+V]=V;for(V=0;V<8;++V)P.trans[168+V]=280+V;for(V=0;V<112;++V)P.trans[176+V]=144+V;for(V=0;V<5;++V)R.table[V]=0;for(R.table[5]=32,V=0;V<32;++V)R.trans[V]=V;T(x,v,4,3),T(w,_,2,1),x[28]=0,v[28]=258;var G=function(A,O){var j,B,W,Z=new g(A,O);do{switch(W=void 0,(B=Z).bitcount--||(B.tag=B.source[B.sourceIndex++],B.bitcount=7),W=1&B.tag,B.tag>>>=1,B=W,F(Z,2,0)){case 0:j=function(Ye){for(var br,nn;8<Ye.bitcount;)Ye.sourceIndex--,Ye.bitcount-=8;if((br=256*Ye.source[Ye.sourceIndex+1]+Ye.source[Ye.sourceIndex])!==(65535&~(256*Ye.source[Ye.sourceIndex+3]+Ye.source[Ye.sourceIndex+2])))return h;for(Ye.sourceIndex+=4,nn=br;nn;--nn)Ye.dest[Ye.destLen++]=Ye.source[Ye.sourceIndex++];return Ye.bitcount=0,p}(Z);break;case 1:j=L(Z,y,b);break;case 2:ot=Xe=ht=He=te=Ae=Ue=qe=Re=ve=_e=he=void 0;for(var te,he=Z,_e=Z.ltree,ve=Z.dtree,Re=F(he,5,257),qe=F(he,5,1),Ue=F(he,4,4),Ae=0;Ae<19;++Ae)E[Ae]=0;for(Ae=0;Ae<Ue;++Ae){var ht=F(he,3,0);E[S[Ae]]=ht}for(k(C,E,0,19),te=0;te<Re+qe;){var Xe=D(he,C);switch(Xe){case 16:for(var ot=E[te-1],He=F(he,2,3);He;--He)E[te++]=ot;break;case 17:for(He=F(he,3,3);He;--He)E[te++]=0;break;case 18:for(He=F(he,7,11);He;--He)E[te++]=0;break;default:E[te++]=Xe}}k(_e,E,0,Re),k(ve,E,Re,qe),j=L(Z,Z.ltree,Z.dtree);break;default:j=h}if(j!==p)throw new Error("Data error")}while(!B);return Z.destLen<Z.dest.length?typeof Z.dest.slice=="function"?Z.dest.slice(0,Z.destLen):Z.dest.subarray(0,Z.destLen):Z.dest};function U(A,O,j,B,W){return Math.pow(1-W,3)*A+3*Math.pow(1-W,2)*W*O+3*(1-W)*Math.pow(W,2)*j+Math.pow(W,3)*B}function H(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function X(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function fe(A){throw new Error(A)}function $(A,O){A||fe(O)}H.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},H.prototype.addPoint=function(A,O){typeof A=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=A,this.x2=A),A<this.x1&&(this.x1=A),A>this.x2&&(this.x2=A)),typeof O=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=O,this.y2=O),O<this.y1&&(this.y1=O),O>this.y2&&(this.y2=O))},H.prototype.addX=function(A){this.addPoint(A,null)},H.prototype.addY=function(A){this.addPoint(null,A)},H.prototype.addBezier=function(A,O,j,B,W,Z,te,he){var _e=[A,O],ve=[j,B],Re=[W,Z],qe=[te,he];this.addPoint(A,O),this.addPoint(te,he);for(var Ue=0;Ue<=1;Ue++){var Ae,ht=6*_e[Ue]-12*ve[Ue]+6*Re[Ue],Xe=-3*_e[Ue]+9*ve[Ue]-9*Re[Ue]+3*qe[Ue],ot=3*ve[Ue]-3*_e[Ue];Xe==0?ht==0||0<(Ae=-ot/ht)&&Ae<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],Ae)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],Ae))):(Ae=Math.pow(ht,2)-4*ot*Xe)<0||(0<(ot=(-ht+Math.sqrt(Ae))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot))),0<(ot=(-ht-Math.sqrt(Ae))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot))))}},H.prototype.addQuad=function(A,O,j,B,W,Z){j=A+2/3*(j-A),B=O+2/3*(B-O),this.addBezier(A,O,j,B,j+1/3*(W-A),B+1/3*(Z-O),W,Z)},X.prototype.moveTo=function(A,O){this.commands.push({type:"M",x:A,y:O})},X.prototype.lineTo=function(A,O){this.commands.push({type:"L",x:A,y:O})},X.prototype.curveTo=X.prototype.bezierCurveTo=function(A,O,j,B,W,Z){this.commands.push({type:"C",x1:A,y1:O,x2:j,y2:B,x:W,y:Z})},X.prototype.quadTo=X.prototype.quadraticCurveTo=function(A,O,j,B){this.commands.push({type:"Q",x1:A,y1:O,x:j,y:B})},X.prototype.close=X.prototype.closePath=function(){this.commands.push({type:"Z"})},X.prototype.extend=function(A){var O;if(A.commands)A=A.commands;else if(A instanceof H)return O=A,this.moveTo(O.x1,O.y1),this.lineTo(O.x2,O.y1),this.lineTo(O.x2,O.y2),this.lineTo(O.x1,O.y2),void this.close();Array.prototype.push.apply(this.commands,A)},X.prototype.getBoundingBox=function(){for(var A=new H,O=0,j=0,B=0,W=0,Z=0;Z<this.commands.length;Z++){var te=this.commands[Z];switch(te.type){case"M":A.addPoint(te.x,te.y),O=B=te.x,j=W=te.y;break;case"L":A.addPoint(te.x,te.y),B=te.x,W=te.y;break;case"Q":A.addQuad(B,W,te.x1,te.y1,te.x,te.y),B=te.x,W=te.y;break;case"C":A.addBezier(B,W,te.x1,te.y1,te.x2,te.y2,te.x,te.y),B=te.x,W=te.y;break;case"Z":B=O,W=j;break;default:throw new Error("Unexpected path command "+te.type)}}return A.isEmpty()&&A.addPoint(0,0),A},X.prototype.draw=function(A){A.beginPath();for(var O=0;O<this.commands.length;O+=1){var j=this.commands[O];j.type==="M"?A.moveTo(j.x,j.y):j.type==="L"?A.lineTo(j.x,j.y):j.type==="C"?A.bezierCurveTo(j.x1,j.y1,j.x2,j.y2,j.x,j.y):j.type==="Q"?A.quadraticCurveTo(j.x1,j.y1,j.x,j.y):j.type==="Z"&&A.closePath()}this.fill&&(A.fillStyle=this.fill,A.fill()),this.stroke&&(A.strokeStyle=this.stroke,A.lineWidth=this.strokeWidth,A.stroke())},X.prototype.toPathData=function(A){function O(){for(var Z=arguments,te="",he=0;he<arguments.length;he+=1){var _e=Z[he];0<=_e&&0<he&&(te+=" "),te+=(_e=_e,Math.round(_e)===_e?""+Math.round(_e):_e.toFixed(A))}return te}A=A!==void 0?A:2;for(var j="",B=0;B<this.commands.length;B+=1){var W=this.commands[B];W.type==="M"?j+="M"+O(W.x,W.y):W.type==="L"?j+="L"+O(W.x,W.y):W.type==="C"?j+="C"+O(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"?j+="Q"+O(W.x1,W.y1,W.x,W.y):W.type==="Z"&&(j+="Z")}return j},X.prototype.toSVG=function(A){var O=(O='<path d="')+this.toPathData(A)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?O+=' fill="none"':O+=' fill="'+this.fill+'"'),this.stroke&&(O+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),O+="/>"},X.prototype.toDOMElement=function(O){var O=this.toPathData(O),j=document.createElementNS("http://www.w3.org/2000/svg","path");return j.setAttribute("d",O),j};var M={fail:fe,argument:$,assert:$},z={},q={},ee={};function ae(A){return function(){return A}}q.BYTE=function(A){return M.argument(0<=A&&A<=255,"Byte value should be between 0 and 255."),[A]},ee.BYTE=ae(1),q.CHAR=function(A){return[A.charCodeAt(0)]},ee.CHAR=ae(1),q.CHARARRAY=function(A){for(var O=[],j=0;j<A.length;j+=1)O[j]=A.charCodeAt(j);return O},ee.CHARARRAY=function(A){return A.length},q.USHORT=function(A){return[A>>8&255,255&A]},ee.USHORT=ae(2),q.SHORT=function(A){return[(A=32768<=A?-(65536-A):A)>>8&255,255&A]},ee.SHORT=ae(2),q.UINT24=function(A){return[A>>16&255,A>>8&255,255&A]},ee.UINT24=ae(3),q.ULONG=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]},ee.ULONG=ae(4),q.LONG=function(A){return[(A=2147483648<=A?-(4294967296-A):A)>>24&255,A>>16&255,A>>8&255,255&A]},ee.LONG=ae(4),q.FIXED=q.ULONG,ee.FIXED=ee.ULONG,q.FWORD=q.SHORT,ee.FWORD=ee.SHORT,q.UFWORD=q.USHORT,ee.UFWORD=ee.USHORT,q.LONGDATETIME=function(A){return[0,0,0,0,A>>24&255,A>>16&255,A>>8&255,255&A]},ee.LONGDATETIME=ae(8),q.TAG=function(A){return M.argument(A.length===4,"Tag should be exactly 4 ASCII characters."),[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)]},ee.TAG=ae(4),q.Card8=q.BYTE,ee.Card8=ee.BYTE,q.Card16=q.USHORT,ee.Card16=ee.USHORT,q.OffSize=q.BYTE,ee.OffSize=ee.BYTE,q.SID=q.USHORT,ee.SID=ee.USHORT,q.NUMBER=function(A){return-107<=A&&A<=107?[A+139]:108<=A&&A<=1131?[247+((A-=108)>>8),255&A]:-1131<=A&&A<=-108?[251+((A=-A-108)>>8),255&A]:-32768<=A&&A<=32767?q.NUMBER16(A):q.NUMBER32(A)},ee.NUMBER=function(A){return q.NUMBER(A).length},q.NUMBER16=function(A){return[28,A>>8&255,255&A]},ee.NUMBER16=ae(3),q.NUMBER32=function(A){return[29,A>>24&255,A>>16&255,A>>8&255,255&A]},ee.NUMBER32=ae(5),q.REAL=function(A){for(var O=A.toString(),j=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(O),B=(j&&(j=parseFloat("1e"+((j[2]?+j[2]:0)+j[1].length)),O=(Math.round(A*j)/j).toString()),""),W=0,Z=O.length;W<Z;W+=1){var te=O[W];B+=te==="e"?O[++W]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var he=[30],_e=0,ve=(B+=1&B.length?"f":"ff").length;_e<ve;_e+=2)he.push(parseInt(B.substr(_e,2),16));return he},ee.REAL=function(A){return q.REAL(A).length},q.NAME=q.CHARARRAY,ee.NAME=ee.CHARARRAY,q.STRING=q.CHARARRAY,ee.STRING=ee.CHARARRAY,z.UTF8=function(A,O,j){for(var B=[],W=j,Z=0;Z<W;Z++,O+=1)B[Z]=A.getUint8(O);return String.fromCharCode.apply(null,B)},z.UTF16=function(A,O,j){for(var B=[],W=j/2,Z=0;Z<W;Z++,O+=2)B[Z]=A.getUint16(O);return String.fromCharCode.apply(null,B)},q.UTF16=function(A){for(var O=[],j=0;j<A.length;j+=1){var B=A.charCodeAt(j);O[O.length]=B>>8&255,O[O.length]=255&B}return O},ee.UTF16=function(A){return 2*A.length};var Q,le={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"},ie=(z.MACSTRING=function(A,O,j,B){var W=le[B];if(W!==void 0){for(var Z="",te=0;te<j;te++){var he=A.getUint8(O+te);Z+=he<=127?String.fromCharCode(he):W[127&he]}return Z}},typeof WeakMap=="function"&&new WeakMap);function K(A){return-128<=A&&A<=127}q.MACSTRING=function(A,O){var j=function(te){if(!Q)for(var he in Q={},le)Q[he]=new String(he);var _e=Q[te];if(_e!==void 0){if(ie){var ve=ie.get(_e);if(ve!==void 0)return ve}var Re=le[te];if(Re!==void 0){for(var qe={},Ue=0;Ue<Re.length;Ue++)qe[Re.charCodeAt(Ue)]=Ue+128;return ie&&ie.set(_e,qe),qe}}}(O);if(j!==void 0){for(var B=[],W=0;W<A.length;W++){var Z=A.charCodeAt(W);if(128<=Z&&(Z=j[Z])===void 0)return;B[W]=Z}return B}},ee.MACSTRING=function(A,O){return A=q.MACSTRING(A,O),A!==void 0?A.length:0},q.VARDELTAS=function(A){for(var B=0,O=[];B<A.length;)var j=A[B],B=(j===0?function(W,Z,te){for(var he=0,_e=W.length;Z<_e&&he<64&&W[Z]===0;)++Z,++he;return te.push(128|he-1),Z}:-128<=j&&j<=127?function(W,Z,te){for(var he=0,_e=W.length,ve=Z;ve<_e&&he<64;){var Re=W[ve];if(!K(Re)||Re===0&&ve+1<_e&&W[ve+1]===0)break;++ve,++he}te.push(he-1);for(var qe=Z;qe<ve;++qe)te.push(W[qe]+256&255);return ve}:function(W,Z,te){for(var he=0,_e=W.length,ve=Z;ve<_e&&he<64;){var Re=W[ve];if(Re===0||K(Re)&&ve+1<_e&&K(W[ve+1]))break;++ve,++he}te.push(64|he-1);for(var qe=Z;qe<ve;++qe){var Ue=W[qe];te.push(Ue+65536>>8&255,Ue+256&255)}return ve})(A,B,O);return O},q.INDEX=function(A){for(var O=1,j=[O],B=[],W=0;W<A.length;W+=1){var Z=q.OBJECT(A[W]);Array.prototype.push.apply(B,Z),O+=Z.length,j.push(O)}if(B.length===0)return[0,0];for(var te=[],he=1+Math.floor(Math.log(O)/Math.log(2))/8|0,_e=[void 0,q.BYTE,q.USHORT,q.UINT24,q.ULONG][he],ve=0;ve<j.length;ve+=1){var Re=_e(j[ve]);Array.prototype.push.apply(te,Re)}return Array.prototype.concat(q.Card16(A.length),q.OffSize(he),te,B)},ee.INDEX=function(A){return q.INDEX(A).length},q.DICT=function(A){for(var O=[],j=Object.keys(A),B=j.length,W=0;W<B;W+=1){var Z=parseInt(j[W],0),te=A[Z];O=(O=O.concat(q.OPERAND(te.value,te.type))).concat(q.OPERATOR(Z))}return O},ee.DICT=function(A){return q.DICT(A).length},q.OPERATOR=function(A){return A<1200?[A]:[12,A-1200]},q.OPERAND=function(A,O){var j=[];if(Array.isArray(O))for(var B=0;B<O.length;B+=1)M.argument(A.length===O.length,"Not enough arguments given for type"+O),j=j.concat(q.OPERAND(A[B],O[B]));else if(O==="SID")j=j.concat(q.NUMBER(A));else if(O==="offset")j=j.concat(q.NUMBER32(A));else if(O==="number")j=j.concat(q.NUMBER(A));else{if(O!=="real")throw new Error("Unknown operand type "+O);j=j.concat(q.REAL(A))}return j},q.OP=q.BYTE,ee.OP=ee.BYTE;var ge=typeof WeakMap=="function"&&new WeakMap;function ne(A,O,j){for(var B=0;B<O.length;B+=1){var W=O[B];this[W.name]=W.value}if(this.tableName=A,this.fields=O,j)for(var Z=Object.keys(j),te=0;te<Z.length;te+=1){var he=Z[te],_e=j[he];this[he]!==void 0&&(this[he]=_e)}}function ye(A,O,j){j===void 0&&(j=O.length);var B=new Array(O.length+1);B[0]={name:A+"Count",type:"USHORT",value:j};for(var W=0;W<O.length;W++)B[W+1]={name:A+W,type:"USHORT",value:O[W]};return B}function xe(A,O,j){var B=O.length,W=new Array(B+1);W[0]={name:A+"Count",type:"USHORT",value:B};for(var Z=0;Z<B;Z++)W[Z+1]={name:A+Z,type:"TABLE",value:j(O[Z],Z)};return W}function De(A,O,j){var B=O.length,W=[];W[0]={name:A+"Count",type:"USHORT",value:B};for(var Z=0;Z<B;Z++)W=W.concat(j(O[Z],Z));return W}function Te(A){A.format===1?ne.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ye("glyph",A.glyphs))):M.assert(!1,"Can't create coverage table format 2 yet.")}function Fe(A){ne.call(this,"scriptListTable",De("scriptRecord",A,function(O,j){var B=O.script,W=B.defaultLangSys;return M.assert(!!W,"Unable to write GSUB: script "+O.tag+" has no default language system."),[{name:"scriptTag"+j,type:"TAG",value:O.tag},{name:"script"+j,type:"TABLE",value:new ne("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ne("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:W.reqFeatureIndex}].concat(ye("featureIndex",W.featureIndexes)))}].concat(De("langSys",B.langSysRecords,function(Z,te){var he=Z.langSys;return[{name:"langSysTag"+te,type:"TAG",value:Z.tag},{name:"langSys"+te,type:"TABLE",value:new ne("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:he.reqFeatureIndex}].concat(ye("featureIndex",he.featureIndexes)))}]})))}]}))}function $e(A){ne.call(this,"featureListTable",De("featureRecord",A,function(O,j){var B=O.feature;return[{name:"featureTag"+j,type:"TAG",value:O.tag},{name:"feature"+j,type:"TABLE",value:new ne("featureTable",[{name:"featureParams",type:"USHORT",value:B.featureParams}].concat(ye("lookupListIndex",B.lookupListIndexes)))}]}))}function at(A,O){ne.call(this,"lookupListTable",xe("lookup",A,function(j){var B=O[j.lookupType];return M.assert(!!B,"Unable to write GSUB lookup type "+j.lookupType+" tables."),new ne("lookupTable",[{name:"lookupType",type:"USHORT",value:j.lookupType},{name:"lookupFlag",type:"USHORT",value:j.lookupFlag}].concat(xe("subtable",j.subtables,B)))}))}q.CHARSTRING=function(A){if(ge){var O=ge.get(A);if(O!==void 0)return O}for(var Z=[],j=A.length,B=0;B<j;B+=1)var W=A[B],Z=Z.concat(q[W.type](W.value));return ge&&ge.set(A,Z),Z},ee.CHARSTRING=function(A){return q.CHARSTRING(A).length},q.OBJECT=function(A){var O=q[A.type];return M.argument(O!==void 0,"No encoding function for type "+A.type),O(A.value)},ee.OBJECT=function(A){var O=ee[A.type];return M.argument(O!==void 0,"No sizeOf function for type "+A.type),O(A.value)},q.TABLE=function(A){for(var O=[],j=A.fields.length,B=[],W=[],Z=0;Z<j;Z+=1){var te=A.fields[Z],_e=q[te.type],he=(M.argument(_e!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),A[te.name]),_e=_e(he=he===void 0?te.value:he);te.type==="TABLE"?(W.push(O.length),O=O.concat([0,0]),B.push(_e)):O=O.concat(_e)}for(var ve=0;ve<B.length;ve+=1){var Re=W[ve],qe=O.length;M.argument(qe<65536,"Table "+A.tableName+" too big."),O[Re]=qe>>8,O[Re+1]=255&qe,O=O.concat(B[ve])}return O},ee.TABLE=function(A){for(var O=0,j=A.fields.length,B=0;B<j;B+=1){var W=A.fields[B],Z=ee[W.type],te=(M.argument(Z!==void 0,"No sizeOf function for field type "+W.type+" ("+W.name+")"),A[W.name]);O+=Z(te=te===void 0?W.value:te),W.type==="TABLE"&&(O+=2)}return O},q.RECORD=q.TABLE,ee.RECORD=ee.TABLE,q.LITERAL=function(A){return A},ee.LITERAL=function(A){return A.length},ne.prototype.encode=function(){return q.TABLE(this)},ne.prototype.sizeOf=function(){return ee.TABLE(this)};var We={Table:ne,Record:ne,Coverage:(Te.prototype=Object.create(ne.prototype)).constructor=Te,ScriptList:(Fe.prototype=Object.create(ne.prototype)).constructor=Fe,FeatureList:($e.prototype=Object.create(ne.prototype)).constructor=$e,LookupList:(at.prototype=Object.create(ne.prototype)).constructor=at,ushortList:ye,tableList:xe,recordList:De};function jt(A,O){return A.getUint8(O)}function _t(A,O){return A.getUint16(O,!1)}function kt(A,O){return A.getUint32(O,!1)}function Rt(A,O){return A.getInt16(O,!1)+A.getUint16(O+2,!1)/65535}var Mt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Be(A,O){this.data=A,this.offset=O,this.relativeOffset=0}Be.prototype.parseByte=function(){var A=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,A},Be.prototype.parseChar=function(){var A=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,A},Be.prototype.parseCard8=Be.prototype.parseByte,Be.prototype.parseCard16=Be.prototype.parseUShort=function(){var A=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,A},Be.prototype.parseSID=Be.prototype.parseUShort,Be.prototype.parseOffset16=Be.prototype.parseUShort,Be.prototype.parseShort=function(){var A=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,A},Be.prototype.parseF2Dot14=function(){var A=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,A},Be.prototype.parseOffset32=Be.prototype.parseULong=function(){var A=kt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,A},Be.prototype.parseFixed=function(){var A=Rt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,A},Be.prototype.parseString=function(A){var O=this.data,j=this.offset+this.relativeOffset,B="";this.relativeOffset+=A;for(var W=0;W<A;W++)B+=String.fromCharCode(O.getUint8(j+W));return B},Be.prototype.parseTag=function(){return this.parseString(4)},Be.prototype.parseLongDateTime=function(){var A=kt(this.data,this.offset+this.relativeOffset+4);return A-=2082844800,this.relativeOffset+=8,A},Be.prototype.parseVersion=function(A){var O=_t(this.data,this.offset+this.relativeOffset),j=_t(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,O+j/(A=A===void 0?4096:A)/10},Be.prototype.skip=function(A,O){this.relativeOffset+=Mt[A]*(O=O===void 0?1:O)},Be.prototype.parseULongList=function(A){A===void 0&&(A=this.parseULong());for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getUint32(B),B+=4;return this.relativeOffset+=4*A,O},Be.prototype.parseOffset16List=Be.prototype.parseUShortList=function(A){A===void 0&&(A=this.parseUShort());for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getUint16(B),B+=2;return this.relativeOffset+=2*A,O},Be.prototype.parseShortList=function(A){for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getInt16(B),B+=2;return this.relativeOffset+=2*A,O},Be.prototype.parseByteList=function(A){for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getUint8(B++);return this.relativeOffset+=A,O},Be.prototype.parseList=function(A,O){O||(O=A,A=this.parseUShort());for(var j=new Array(A),B=0;B<A;B++)j[B]=O.call(this);return j},Be.prototype.parseList32=function(A,O){O||(O=A,A=this.parseULong());for(var j=new Array(A),B=0;B<A;B++)j[B]=O.call(this);return j},Be.prototype.parseRecordList=function(A,O){O||(O=A,A=this.parseUShort());for(var j=new Array(A),B=Object.keys(O),W=0;W<A;W++){for(var Z={},te=0;te<B.length;te++){var he=B[te],_e=O[he];Z[he]=_e.call(this)}j[W]=Z}return j},Be.prototype.parseRecordList32=function(A,O){O||(O=A,A=this.parseULong());for(var j=new Array(A),B=Object.keys(O),W=0;W<A;W++){for(var Z={},te=0;te<B.length;te++){var he=B[te],_e=O[he];Z[he]=_e.call(this)}j[W]=Z}return j},Be.prototype.parseStruct=function(A){if(typeof A=="function")return A.call(this);for(var O=Object.keys(A),j={},B=0;B<O.length;B++){var W=O[B],Z=A[W];j[W]=Z.call(this)}return j},Be.prototype.parseValueRecord=function(A){var O;if((A=A===void 0?this.parseUShort():A)!==0)return O={},1&A&&(O.xPlacement=this.parseShort()),2&A&&(O.yPlacement=this.parseShort()),4&A&&(O.xAdvance=this.parseShort()),8&A&&(O.yAdvance=this.parseShort()),16&A&&(O.xPlaDevice=void 0,this.parseShort()),32&A&&(O.yPlaDevice=void 0,this.parseShort()),64&A&&(O.xAdvDevice=void 0,this.parseShort()),128&A&&(O.yAdvDevice=void 0,this.parseShort()),O},Be.prototype.parseValueRecordList=function(){for(var A=this.parseUShort(),O=this.parseUShort(),j=new Array(O),B=0;B<O;B++)j[B]=this.parseValueRecord(A);return j},Be.prototype.parsePointer=function(A){var O=this.parseOffset16();if(0<O)return new Be(this.data,this.offset+O).parseStruct(A)},Be.prototype.parsePointer32=function(A){var O=this.parseOffset32();if(0<O)return new Be(this.data,this.offset+O).parseStruct(A)},Be.prototype.parseListOfLists=function(A){for(var O=this.parseOffset16List(),j=O.length,B=this.relativeOffset,W=new Array(j),Z=0;Z<j;Z++){var te=O[Z];if(te===0)W[Z]=void 0;else if(this.relativeOffset=te,A){for(var he=this.parseOffset16List(),_e=new Array(he.length),ve=0;ve<he.length;ve++)this.relativeOffset=te+he[ve],_e[ve]=A.call(this);W[Z]=_e}else W[Z]=this.parseUShortList()}return this.relativeOffset=B,W},Be.prototype.parseCoverage=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort(),j=this.parseUShort();if(O===1)return{format:1,glyphs:this.parseUShortList(j)};if(O!==2)throw new Error("0x"+A.toString(16)+": Coverage format must be 1 or 2.");for(var B=new Array(j),W=0;W<j;W++)B[W]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:B}},Be.prototype.parseClassDef=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();if(O===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(O===2)return{format:2,ranges:this.parseRecordList({start:Be.uShort,end:Be.uShort,classId:Be.uShort})};throw new Error("0x"+A.toString(16)+": ClassDef format must be 1 or 2.")},Be.list=function(A,O){return function(){return this.parseList(A,O)}},Be.list32=function(A,O){return function(){return this.parseList32(A,O)}},Be.recordList=function(A,O){return function(){return this.parseRecordList(A,O)}},Be.recordList32=function(A,O){return function(){return this.parseRecordList32(A,O)}},Be.pointer=function(A){return function(){return this.parsePointer(A)}},Be.pointer32=function(A){return function(){return this.parsePointer32(A)}},Be.tag=Be.prototype.parseTag,Be.byte=Be.prototype.parseByte,Be.uShort=Be.offset16=Be.prototype.parseUShort,Be.uShortList=Be.prototype.parseUShortList,Be.uLong=Be.offset32=Be.prototype.parseULong,Be.uLongList=Be.prototype.parseULongList,Be.struct=Be.prototype.parseStruct,Be.coverage=Be.prototype.parseCoverage,Be.classDef=Be.prototype.parseClassDef;var ut={reserved:Be.uShort,reqFeatureIndex:Be.uShort,featureIndexes:Be.uShortList},Ge=(Be.prototype.parseScriptList=function(){return this.parsePointer(Be.recordList({tag:Be.tag,script:Be.pointer({defaultLangSys:Be.pointer(ut),langSysRecords:Be.recordList({tag:Be.tag,langSys:Be.pointer(ut)})})}))||[]},Be.prototype.parseFeatureList=function(){return this.parsePointer(Be.recordList({tag:Be.tag,feature:Be.pointer({featureParams:Be.offset16,lookupListIndexes:Be.uShortList})}))||[]},Be.prototype.parseLookupList=function(A){return this.parsePointer(Be.list(Be.pointer(function(){var O=this.parseUShort(),j=(M.argument(1<=O&&O<=9,"GPOS/GSUB lookup type "+O+" unknown."),this.parseUShort()),B=16&j;return{lookupType:O,lookupFlag:j,subtables:this.parseList(Be.pointer(A[O])),markFilteringSet:B?this.parseUShort():void 0}})))||[]},Be.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var A=this.parseUShort(),O=this.parseUShort();return M.argument(A===1&&O<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Be.offset32,featureTableSubstitutionOffset:Be.offset32})})||[]},{getByte:jt,getCard8:jt,getUShort:_t,getCard16:_t,getShort:function(A,O){return A.getInt16(O,!1)},getULong:kt,getFixed:Rt,getTag:function(A,O){for(var j="",B=O;B<O+4;B+=1)j+=String.fromCharCode(A.getInt8(B));return j},getOffset:function(A,O,j){for(var B=0,W=0;W<j;W+=1)B=(B<<=8)+A.getUint8(O+W);return B},getBytes:function(A,O,j){for(var B=[],W=O;W<j;W+=1)B.push(A.getUint8(W));return B},bytesToString:function(A){for(var O="",j=0;j<A.length;j+=1)O+=String.fromCharCode(A[j]);return O},Parser:Be}),de={parse:function(A,O){for(var j={},B=(j.version=Ge.getUShort(A,O),M.argument(j.version===0,"cmap table version should be 0."),j.numTables=Ge.getUShort(A,O+2),-1),W=j.numTables-1;0<=W;--W){var Z=Ge.getUShort(A,O+4+8*W),te=Ge.getUShort(A,O+4+8*W+2);if(Z===3&&(te===0||te===1||te===10)||Z===0&&(te===0||te===1||te===2||te===3||te===4)){B=Ge.getULong(A,O+4+8*W+4);break}}if(B===-1)throw new Error("No valid cmap sub-tables found.");var he=new Ge.Parser(A,O+B);if(j.format=he.parseUShort(),j.format===12){var _e,ve=j,Re=he;Re.parseUShort(),ve.length=Re.parseULong(),ve.language=Re.parseULong(),ve.groupCount=_e=Re.parseULong(),ve.glyphIndexMap={};for(var qe=0;qe<_e;qe+=1)for(var Ue=Re.parseULong(),Ae=Re.parseULong(),ht=Re.parseULong(),Xe=Ue;Xe<=Ae;Xe+=1)ve.glyphIndexMap[Xe]=ht,ht++}else{if(j.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+j.format+").");var ot=j,He=A,Ye=O,br=B;ot.length=he.parseUShort(),ot.language=he.parseUShort(),ot.segCount=nn=he.parseUShort()>>1,he.skip("uShort",3),ot.glyphIndexMap={};for(var nn,Sr=new Ge.Parser(He,Ye+br+14),Ar=new Ge.Parser(He,Ye+br+16+2*nn),wn=new Ge.Parser(He,Ye+br+16+4*nn),mi=new Ge.Parser(He,Ye+br+16+6*nn),hs=Ye+br+16+8*nn,qs=0;qs<nn-1;qs+=1)for(var Jl=void 0,eu=Sr.parseUShort(),mh=Ar.parseUShort(),Jo=wn.parseShort(),Si=mi.parseUShort(),Do=mh;Do<=eu;Do+=1)Si!==0?(hs=(hs=mi.offset+mi.relativeOffset-2)+Si+2*(Do-mh),(Jl=Ge.getUShort(He,hs))!==0&&(Jl=Jl+Jo&65535)):Jl=Do+Jo&65535,ot.glyphIndexMap[Do]=Jl}return j},make:function(A){for(var O=!0,j=A.length-1;0<j;--j)if(65535<A.get(j).unicode){console.log("Adding CMAP format 12 (needed!)"),O=!1;break}var B,W,Z=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:O?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:O?12:20}],te=(Z=(Z=O?Z:Z.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new We.Table("cmap",Z));for(te.segments=[],j=0;j<A.length;j+=1){for(var he=A.get(j),_e=0;_e<he.unicodes.length;_e+=1)B=he.unicodes[_e],W=j,te.segments.push({end:B,start:B,delta:-(B-W),offset:0,glyphIndex:W});te.segments=te.segments.sort(function(Ye,br){return Ye.start-br.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var ve=te.segments.length,Re=0,qe=[],Ue=[],Ae=[],ht=[],Xe=[],ot=[];for(j=0;j<ve;j+=1){var He=te.segments[j];He.end<=65535&&He.start<=65535?(qe=qe.concat({name:"end_"+j,type:"USHORT",value:He.end}),Ue=Ue.concat({name:"start_"+j,type:"USHORT",value:He.start}),Ae=Ae.concat({name:"idDelta_"+j,type:"SHORT",value:He.delta}),ht=ht.concat({name:"idRangeOffset_"+j,type:"USHORT",value:He.offset}),He.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+j,type:"USHORT",value:He.glyphId}))):Re+=1,O||He.glyphIndex===void 0||(ot=(ot=(ot=ot.concat({name:"cmap12Start_"+j,type:"ULONG",value:He.start})).concat({name:"cmap12End_"+j,type:"ULONG",value:He.end})).concat({name:"cmap12Glyph_"+j,type:"ULONG",value:He.glyphIndex}))}return te.segCountX2=2*(ve-Re),te.searchRange=2*Math.pow(2,Math.floor(Math.log(ve-Re)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(qe),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Ue),te.fields=te.fields.concat(Ae),te.fields=te.fields.concat(ht),te.fields=te.fields.concat(Xe),te.cmap4Length=14+2*qe.length+2+2*Ue.length+2*Ae.length+2*ht.length+2*Xe.length,O||(Z=16+4*ot.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Z},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ot.length/3}]),te.fields=te.fields.concat(ot)),te}},me=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],be=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Oe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(A){this.font=A}function Qe(A){this.cmap=A}function St(A,O){this.encoding=A,this.charset=O}function Nt(A){switch(A.version){case 1:this.names=Oe.slice();break;case 2:this.names=new Array(A.numberOfGlyphs);for(var O=0;O<A.numberOfGlyphs;O++)A.glyphNameIndex[O]<Oe.length?this.names[O]=Oe[A.glyphNameIndex[O]]:this.names[O]=A.names[A.glyphNameIndex[O]-Oe.length];break;case 2.5:this.names=new Array(A.numberOfGlyphs);for(var j=0;j<A.numberOfGlyphs;j++)this.names[j]=Oe[j+A.glyphNameIndex[j]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(A){var O=A.codePointAt(0),j=this.font.glyphs;if(j){for(var B=0;B<j.length;B+=1)for(var W=j.get(B),Z=0;Z<W.unicodes.length;Z+=1)if(W.unicodes[Z]===O)return B}return null},Qe.prototype.charToGlyphIndex=function(A){return this.cmap.glyphIndexMap[A.codePointAt(0)]||0},St.prototype.charToGlyphIndex=function(A){return A=A.codePointAt(0),A=this.encoding[A],this.charset.indexOf(A)},Nt.prototype.nameToGlyphIndex=function(A){return this.names.indexOf(A)},Nt.prototype.glyphIndexToName=function(A){return this.names[A]};var Ft={line:function(A,O,j,B,W){A.beginPath(),A.moveTo(O,j),A.lineTo(B,W),A.stroke()}};function Ut(A){this.bindConstructorValues(A)}function en(A,O,j){Object.defineProperty(A,O,{get:function(){return A.path,A[j]},set:function(B){A[j]=B},enumerable:!0,configurable:!0})}function Lr(A,O){if(this.font=A,this.glyphs={},Array.isArray(O))for(var j=0;j<O.length;j++)this.glyphs[j]=O[j];this.length=O&&O.length||0}Ut.prototype.bindConstructorValues=function(A){var O;this.index=A.index||0,this.name=A.name||null,this.unicode=A.unicode||void 0,this.unicodes=A.unicodes||A.unicode!==void 0?[A.unicode]:[],A.xMin&&(this.xMin=A.xMin),A.yMin&&(this.yMin=A.yMin),A.xMax&&(this.xMax=A.xMax),A.yMax&&(this.yMax=A.yMax),A.advanceWidth&&(this.advanceWidth=A.advanceWidth),Object.defineProperty(this,"path",(A=A.path,O=A||new X,{configurable:!0,get:function(){return O=typeof O=="function"?O():O},set:function(j){O=j}}))},Ut.prototype.addUnicode=function(A){this.unicodes.length===0&&(this.unicode=A),this.unicodes.push(A)},Ut.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ut.prototype.getPath=function(A,O,j,B,W){A=A!==void 0?A:0,O=O!==void 0?O:0,j=j!==void 0?j:72;for(var Z,te,he=(B=B||{}).xScale,_e=B.yScale,ve=((Z=B.hinting&&W&&W.hinting?this.path&&W.hinting.exec(this,j):Z)?(te=W.hinting.getCommands(Z),A=Math.round(A),O=Math.round(O),he=_e=1):(te=this.path.commands,B=1/this.path.unitsPerEm*j,he===void 0&&(he=B),_e===void 0&&(_e=B)),new X),Re=0;Re<te.length;Re+=1){var qe=te[Re];qe.type==="M"?ve.moveTo(A+qe.x*he,O+-qe.y*_e):qe.type==="L"?ve.lineTo(A+qe.x*he,O+-qe.y*_e):qe.type==="Q"?ve.quadraticCurveTo(A+qe.x1*he,O+-qe.y1*_e,A+qe.x*he,O+-qe.y*_e):qe.type==="C"?ve.curveTo(A+qe.x1*he,O+-qe.y1*_e,A+qe.x2*he,O+-qe.y2*_e,A+qe.x*he,O+-qe.y*_e):qe.type==="Z"&&ve.closePath()}return ve},Ut.prototype.getContours=function(){if(this.points===void 0)return[];for(var A=[],O=[],j=0;j<this.points.length;j+=1){var B=this.points[j];O.push(B),B.lastPointOfContour&&(A.push(O),O=[])}return M.argument(O.length===0,"There are still points left in the current contour."),A},Ut.prototype.getMetrics=function(){for(var A=this.path.commands,O=[],j=[],B=0;B<A.length;B+=1){var W=A[B];W.type!=="Z"&&(O.push(W.x),j.push(W.y)),W.type!=="Q"&&W.type!=="C"||(O.push(W.x1),j.push(W.y1)),W.type==="C"&&(O.push(W.x2),j.push(W.y2))}var Z={xMin:Math.min.apply(null,O),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,O),yMax:Math.max.apply(null,j),leftSideBearing:this.leftSideBearing};return isFinite(Z.xMin)||(Z.xMin=0),isFinite(Z.xMax)||(Z.xMax=this.advanceWidth),isFinite(Z.yMin)||(Z.yMin=0),isFinite(Z.yMax)||(Z.yMax=0),Z.rightSideBearing=this.advanceWidth-Z.leftSideBearing-(Z.xMax-Z.xMin),Z},Ut.prototype.draw=function(A,O,j,B,W){this.getPath(O,j,B,W).draw(A)},Ut.prototype.drawPoints=function(A,O,j,B){function W(Re,qe,Ue,Ae){var ht=2*Math.PI;A.beginPath();for(var Xe=0;Xe<Re.length;Xe+=1)A.moveTo(qe+Re[Xe].x*Ae,Ue+Re[Xe].y*Ae),A.arc(qe+Re[Xe].x*Ae,Ue+Re[Xe].y*Ae,2,0,ht,!1);A.closePath(),A.fill()}O=O!==void 0?O:0,j=j!==void 0?j:0;for(var B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),Z=[],te=[],he=this.path,_e=0;_e<he.commands.length;_e+=1){var ve=he.commands[_e];ve.x!==void 0&&Z.push({x:ve.x,y:-ve.y}),ve.x1!==void 0&&te.push({x:ve.x1,y:-ve.y1}),ve.x2!==void 0&&te.push({x:ve.x2,y:-ve.y2})}A.fillStyle="blue",W(Z,O,j,B),A.fillStyle="red",W(te,O,j,B)},Ut.prototype.drawMetrics=function(A,O,j,B){O=O!==void 0?O:0,j=j!==void 0?j:0,B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),A.lineWidth=1,A.strokeStyle="black",Ft.line(A,O,-1e4,O,1e4),Ft.line(A,-1e4,j,1e4,j);var W=this.xMin||0,Z=this.yMin||0,te=this.xMax||0,he=this.yMax||0,_e=this.advanceWidth||0;A.strokeStyle="blue",Ft.line(A,O+W*B,-1e4,O+W*B,1e4),Ft.line(A,O+te*B,-1e4,O+te*B,1e4),Ft.line(A,-1e4,j+-Z*B,1e4,j+-Z*B),Ft.line(A,-1e4,j+-he*B,1e4,j+-he*B),A.strokeStyle="green",Ft.line(A,O+_e*B,-1e4,O+_e*B,1e4)},Lr.prototype.get=function(A){return typeof this.glyphs[A]=="function"&&(this.glyphs[A]=this.glyphs[A]()),this.glyphs[A]},Lr.prototype.push=function(A,O){this.glyphs[A]=O,this.length++};var ur={GlyphSet:Lr,glyphLoader:function(A,O){return new Ut({index:O,font:A})},ttfGlyphLoader:function(A,O,j,B,W,Z){return function(){var te=new Ut({index:O,font:A});return te.path=function(){j(te,B,W);var he=Z(A.glyphs,te);return he.unitsPerEm=A.unitsPerEm,he},en(te,"xMin","_xMin"),en(te,"xMax","_xMax"),en(te,"yMin","_yMin"),en(te,"yMax","_yMax"),te}},cffGlyphLoader:function(A,O,j,B){return function(){var W=new Ut({index:O,font:A});return W.path=function(){var Z=j(A,W,B);return Z.unitsPerEm=A.unitsPerEm,Z},W}}};function Yr(A){return A=A.length<1240?107:A.length<33900?1131:32768,A}function Rr(A,O,j){var B,W=[],Z=[],te=Ge.getCard16(A,O);if(te!==0){for(var he=Ge.getByte(A,O+2),_e=O+(te+1)*he+2,ve=O+3,Re=0;Re<te+1;Re+=1)W.push(Ge.getOffset(A,ve,he)),ve+=he;B=_e+W[te]}else B=O+2;for(var qe=0;qe<W.length-1;qe+=1){var Ue=Ge.getBytes(A,_e+W[qe],_e+W[qe+1]);j&&(Ue=j(Ue)),Z.push(Ue)}return{objects:Z,startOffset:O,endOffset:B}}function hi(A,O){if(O===28)return A.parseByte()<<8|A.parseByte();if(O===29)return A.parseByte()<<24|A.parseByte()<<16|A.parseByte()<<8|A.parseByte();if(O===30){for(var j=A,B="",W=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var te=j.parseByte(),Z=te>>4,te=15&te;if(Z==15||(B+=W[Z],te==15))break;B+=W[te]}return parseFloat(B)}if(32<=O&&O<=246)return O-139;if(247<=O&&O<=250)return 256*(O-247)+A.parseByte()+108;if(251<=O&&O<=254)return 256*-(O-251)-A.parseByte()-108;throw new Error("Invalid b0 "+O)}function Ql(A,O,j){var B=new Ge.Parser(A,O=O!==void 0?O:0),W=[],Z=[];for(j=j!==void 0?j:A.length;B.relativeOffset<j;){var te=B.parseByte();te<=21?(te===12&&(te=1200+B.parseByte()),W.push([te,Z]),Z=[]):Z.push(hi(B,te))}for(var he=W,_e={},ve=0;ve<he.length;ve+=1){var Re=he[ve][0],qe=he[ve][1],Ue=void 0,Ue=qe.length===1?qe[0]:qe;if(_e.hasOwnProperty(Re)&&!isNaN(_e[Re]))throw new Error("Object "+_e+" already has key "+Re);_e[Re]=Ue}return _e}function Gs(A,O){return O=O<=390?me[O]:A[O-391]}function Eo(A,O,j){for(var B,W={},Z=0;Z<O.length;Z+=1){var te=O[Z];if(Array.isArray(te.type)){var he=[];he.length=te.type.length;for(var _e=0;_e<te.type.length;_e++)(B=A[te.op]!==void 0?A[te.op][_e]:void 0)===void 0&&(B=te.value!==void 0&&te.value[_e]!==void 0?te.value[_e]:null),te.type[_e]==="SID"&&(B=Gs(j,B)),he[_e]=B;W[te.name]=he}else(B=A[te.op])===void 0&&(B=te.value!==void 0?te.value:null),te.type==="SID"&&(B=Gs(j,B)),W[te.name]=B}return W}var _i=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Hn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Sl(A,O,j,B){return Eo(Ql(A,O,j),Hn,B)}function Ra(A,O,j,B){for(var W=[],Z=0;Z<j.length;Z+=1){var te=new DataView(new Uint8Array(j[Z]).buffer),te=(he=B,Eo(Ql(te,0,te.byteLength),_i,he)),he=(te._subrs=[],te._subrsBias=0,te.private[0]),_e=te.private[1];he!==0&&_e!==0&&(he=Sl(A,_e+O,he,B),te._defaultWidthX=he.defaultWidthX,te._nominalWidthX=he.nominalWidthX,he.subrs!==0&&(_e=Rr(A,_e+he.subrs+O),te._subrs=_e.objects,te._subrsBias=Yr(te._subrs)),te._privateDict=he),W.push(te)}return W}function jo(A,O,j){var B,W,Z,te,he,_e,ve,Re,qe,Ue=new X,Ae=[],ht=0,Xe=!1,ot=!1,He=0,Ye=0,br=(qe=(A.isCIDFont?(he=A.tables.cff.topDict._fdSelect[O.index],he=A.tables.cff.topDict._fdArray[he],_e=he._subrs,ve=he._subrsBias,Re=he._defaultWidthX,he):(_e=A.tables.cff.topDict._subrs,ve=A.tables.cff.topDict._subrsBias,Re=A.tables.cff.topDict._defaultWidthX,A.tables.cff.topDict))._nominalWidthX,Re);function nn(Ar,wn){ot&&Ue.closePath(),Ue.moveTo(Ar,wn),ot=!0}function Sr(){Ae.length%2==0||Xe||(br=Ae.shift()+qe),ht+=Ae.length>>1,Ae.length=0,Xe=!0}return function Ar(wn){for(var mi,hs,qs,Jl,eu,mh,Jo,Si,Do,tu,rs,El,Ci=0;Ci<wn.length;){var ja=wn[Ci];switch(Ci+=1,ja){case 1:case 3:Sr();break;case 4:1<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),Ye+=Ae.pop(),nn(He,Ye);break;case 5:for(;0<Ae.length;)He+=Ae.shift(),Ye+=Ae.shift(),Ue.lineTo(He,Ye);break;case 6:for(;0<Ae.length&&(He+=Ae.shift(),Ue.lineTo(He,Ye),Ae.length!==0);)Ye+=Ae.shift(),Ue.lineTo(He,Ye);break;case 7:for(;0<Ae.length&&(Ye+=Ae.shift(),Ue.lineTo(He,Ye),Ae.length!==0);)He+=Ae.shift(),Ue.lineTo(He,Ye);break;case 8:for(;0<Ae.length;)B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);break;case 10:eu=Ae.pop()+ve,(mh=_e[eu])&&Ar(mh);break;case 11:return;case 12:switch(ja=wn[Ci],Ci+=1,ja){case 35:B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),Jo=Z+Ae.shift(),Si=te+Ae.shift(),Do=Jo+Ae.shift(),tu=Si+Ae.shift(),rs=Do+Ae.shift(),El=tu+Ae.shift(),He=rs+Ae.shift(),Ye=El+Ae.shift(),Ae.shift(),Ue.curveTo(B,W,Z,te,Jo,Si),Ue.curveTo(Do,tu,rs,El,He,Ye);break;case 34:B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),Jo=Z+Ae.shift(),Si=te,Do=Jo+Ae.shift(),tu=te,rs=Do+Ae.shift(),El=Ye,He=rs+Ae.shift(),Ue.curveTo(B,W,Z,te,Jo,Si),Ue.curveTo(Do,tu,rs,El,He,Ye);break;case 36:B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),Jo=Z+Ae.shift(),Si=te,Do=Jo+Ae.shift(),tu=te,rs=Do+Ae.shift(),El=tu+Ae.shift(),He=rs+Ae.shift(),Ue.curveTo(B,W,Z,te,Jo,Si),Ue.curveTo(Do,tu,rs,El,He,Ye);break;case 37:B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),Jo=Z+Ae.shift(),Si=te+Ae.shift(),Do=Jo+Ae.shift(),tu=Si+Ae.shift(),rs=Do+Ae.shift(),El=tu+Ae.shift(),Math.abs(rs-He)>Math.abs(El-Ye)?He=rs+Ae.shift():Ye=El+Ae.shift(),Ue.curveTo(B,W,Z,te,Jo,Si),Ue.curveTo(Do,tu,rs,El,He,Ye);break;default:console.log("Glyph "+O.index+": unknown operator 1200"+ja),Ae.length=0}break;case 14:0<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),ot&&(Ue.closePath(),ot=!1);break;case 18:Sr();break;case 19:case 20:Sr(),Ci+=ht+7>>3;break;case 21:2<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),Ye+=Ae.pop(),nn(He+=Ae.pop(),Ye);break;case 22:1<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),nn(He+=Ae.pop(),Ye);break;case 23:Sr();break;case 24:for(;2<Ae.length;)B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);He+=Ae.shift(),Ye+=Ae.shift(),Ue.lineTo(He,Ye);break;case 25:for(;6<Ae.length;)He+=Ae.shift(),Ye+=Ae.shift(),Ue.lineTo(He,Ye);B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);break;case 26:for(Ae.length%2&&(He+=Ae.shift());0<Ae.length;)B=He,W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z,Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);break;case 27:for(Ae.length%2&&(Ye+=Ae.shift());0<Ae.length;)B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te,Ue.curveTo(B,W,Z,te,He,Ye);break;case 28:mi=wn[Ci],hs=wn[Ci+1],Ae.push((mi<<24|hs<<16)>>16),Ci+=2;break;case 29:eu=Ae.pop()+A.gsubrsBias,(mh=A.gsubrs[eu])&&Ar(mh);break;case 30:for(;0<Ae.length&&(B=He,W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye),Ae.length!==0);)B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),Ye=te+Ae.shift(),He=Z+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye);break;case 31:for(;0<Ae.length&&(B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),Ye=te+Ae.shift(),He=Z+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye),Ae.length!==0);)B=He,W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye);break;default:ja<32?console.log("Glyph "+O.index+": unknown operator "+ja):ja<247?Ae.push(ja-139):ja<251?(mi=wn[Ci],Ci+=1,Ae.push(256*(ja-247)+mi+108)):ja<255?(mi=wn[Ci],Ci+=1,Ae.push(256*-(ja-251)-mi-108)):(mi=wn[Ci],hs=wn[Ci+1],qs=wn[Ci+2],Jl=wn[Ci+3],Ci+=4,Ae.push((mi<<24|hs<<16|qs<<8|Jl)/65536))}}}(j),O.advanceWidth=br,Ue}function Cl(A,O){var j,B=me.indexOf(A);return 0<=B&&(j=B),0<=(B=O.indexOf(A))?j=B+me.length:(j=me.length+O.length,O.push(A)),j}function fR(A,O,j){for(var B={},W=0;W<A.length;W+=1){var Z=A[W],te=O[Z.name];te===void 0||function he(_e,ve){if(_e===ve)return 1;if(Array.isArray(_e)&&Array.isArray(ve)&&_e.length===ve.length){for(var Re=0;Re<_e.length;Re+=1)if(!he(_e[Re],ve[Re]))return;return 1}}(te,Z.value)||(Z.type==="SID"&&(te=Cl(te,j)),B[Z.op]={name:Z.name,type:Z.type,value:te})}return B}function dR(A,O){var j=new We.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return j.dict=fR(_i,A,O),j}function pR(A){var O=new We.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return O.topDicts=[{name:"topDict_0",type:"TABLE",value:A}],O}function bz(A){for(var O=new We.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),j=0;j<A.length;j+=1){var B=A.get(j),W=function(Z){for(var te=[],he=Z.path,_e=(te.push({name:"width",type:"NUMBER",value:Z.advanceWidth}),0),ve=0,Re=0;Re<he.commands.length;Re+=1){var qe,Ue,Ae,ht,Xe=void 0,ot=void 0,He=he.commands[Re];(He=He.type==="Q"?{type:"C",x:He.x,y:He.y,x1:1/3*_e+2/3*He.x1,y1:1/3*ve+2/3*He.y1,x2:1/3*He.x+2/3*He.x1,y2:1/3*He.y+2/3*He.y1}:He).type==="M"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rmoveto",type:"OP",value:21}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="L"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rlineto",type:"OP",value:5}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="C"&&(qe=Math.round(He.x1-_e),Ue=Math.round(He.y1-ve),Ae=Math.round(He.x2-He.x1),ht=Math.round(He.y2-He.y1),Xe=Math.round(He.x-He.x2),ot=Math.round(He.y-He.y2),te.push({name:"dx1",type:"NUMBER",value:qe}),te.push({name:"dy1",type:"NUMBER",value:Ue}),te.push({name:"dx2",type:"NUMBER",value:Ae}),te.push({name:"dy2",type:"NUMBER",value:ht}),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rrcurveto",type:"OP",value:8}),_e=Math.round(He.x),ve=Math.round(He.y))}return te.push({name:"endchar",type:"OP",value:14}),te}(B);O.charStrings.push({name:B.name,type:"CHARSTRING",value:W})}return O}var hR={parse:function(A,O,j){j.tables.cff={},he=A,B=O,(W={}).formatMajor=Ge.getCard8(he,B),W.formatMinor=Ge.getCard8(he,B+1),W.size=Ge.getCard8(he,B+2),W.offsetSize=Ge.getCard8(he,B+3),W.startOffset=B,W.endOffset=B+4;var he=Rr(A,W.endOffset,Ge.bytesToString),B=Rr(A,he.endOffset),W=Rr(A,B.endOffset,Ge.bytesToString),he=Rr(A,W.endOffset);if(j.gsubrs=he.objects,j.gsubrsBias=Yr(j.gsubrs),(he=Ra(A,O,B.objects,W.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+he.length);if(B=he[0],(j.tables.cff.topDict=B)._privateDict&&(j.defaultWidthX=B._privateDict.defaultWidthX,j.nominalWidthX=B._privateDict.nominalWidthX),B.ros[0]!==void 0&&B.ros[1]!==void 0&&(j.isCIDFont=!0),j.isCIDFont){var he=B.fdArray,Z=B.fdSelect;if(he===0||Z===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");he=Ra(A,O,Rr(A,he+=O).objects,W.objects),B._fdArray=he,B._fdSelect=function(Ue,Ae,ht,Xe){var ot,He=[],Ye=new Ge.Parser(Ue,Ae);if((Ue=Ye.parseCard8())===0)for(var br=0;br<ht;br++){if(Xe<=(ot=Ye.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");He.push(ot)}else{if(Ue!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ue);var nn,Sr=Ye.parseCard16(),Ar=Ye.parseCard16();if(Ar!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ar);for(var wn=0;wn<Sr;wn++){if(ot=Ye.parseCard8(),nn=Ye.parseCard16(),Xe<=ot)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");if(ht<nn)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+nn);for(;Ar<nn;Ar++)He.push(ot);Ar=nn}if(nn!==ht)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+nn)}return He}(A,Z+=O,j.numGlyphs,he.length)}var Z=O+B.private[1],he=Sl(A,Z,B.private[0],W.objects),te=(j.defaultWidthX=he.defaultWidthX,j.nominalWidthX=he.nominalWidthX,he.subrs!==0?(Z=Rr(A,Z+he.subrs),j.subrs=Z.objects,j.subrsBias=Yr(j.subrs)):(j.subrs=[],j.subrsBias=0),Rr(A,O+B.charStrings)),he=(j.nGlyphs=te.objects.length,function(Re,qe,Ue,Ae){var ht=new Ge.Parser(Re,qe),Xe=(--Ue,[".notdef"]);if((Re=ht.parseCard8())===0)for(var ot=0;ot<Ue;ot+=1)He=ht.parseSID(),Xe.push(Gs(Ae,He));else if(Re===1)for(;Xe.length<=Ue;)for(var He=ht.parseSID(),Ye=ht.parseCard8(),br=0;br<=Ye;br+=1)Xe.push(Gs(Ae,He)),He+=1;else{if(Re!==2)throw new Error("Unknown charset format "+Re);for(;Xe.length<=Ue;){He=ht.parseSID(),Ye=ht.parseCard16();for(var nn=0;nn<=Ye;nn+=1)Xe.push(Gs(Ae,He)),He+=1}}return Xe}(A,O+B.charset,j.nGlyphs,W.objects));B.encoding===0?j.cffEncoding=new St(oe,he):B.encoding===1?j.cffEncoding=new St(be,he):j.cffEncoding=function(Re,qe,Ue){var Ae={},ht=new Ge.Parser(Re,qe);if((Re=ht.parseCard8())===0)for(var Xe=ht.parseCard8(),ot=0;ot<Xe;ot+=1)Ae[Ye=ht.parseCard8()]=ot;else{if(Re!==1)throw new Error("Unknown encoding format "+Re);for(var He=ht.parseCard8(),Ye=1,br=0;br<He;br+=1)for(var nn=ht.parseCard8(),Sr=ht.parseCard8(),Ar=nn;Ar<=nn+Sr;Ar+=1)Ae[Ar]=Ye,Ye+=1}return new St(Ae,Ue)}(A,O+B.encoding,he),j.encoding=j.encoding||j.cffEncoding,j.glyphs=new ur.GlyphSet(j);for(var _e=0;_e<j.nGlyphs;_e+=1){var ve=te.objects[_e];j.glyphs.push(_e,ur.cffGlyphLoader(j,_e,jo,ve))}},make:function(A,Re){for(var j,B=new We.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),W=1/Re.unitsPerEm,W={version:Re.version,fullName:Re.fullName,familyName:Re.familyName,weight:Re.weightName,fontBBox:Re.fontBBox||[0,0,0,0],fontMatrix:[W,0,0,W,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Z=[],te=1;te<A.length;te+=1)j=A.get(te),Z.push(j.name);var he,_e,ve=[],Re=(B.header=new We.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),B.nameIndex=function(Ue){var Ae=new We.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ae.names=[];for(var ht=0;ht<Ue.length;ht+=1)Ae.names.push({name:"name_"+ht,type:"NAME",value:Ue[ht]});return Ae}([Re.postScriptName]),dR(W,ve)),qe=(B.topDictIndex=pR(Re),B.globalSubrIndex=new We.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),B.charsets=function(Ue,Ae){for(var ht=new We.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Ue.length;Xe+=1){var ot=Cl(Ue[Xe],Ae);ht.fields.push({name:"glyph_"+Xe,type:"SID",value:ot})}return ht}(Z,ve),B.charStringsIndex=bz(A),B.privateDict=(qe={},he=ve,(_e=new We.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=fR(Hn,qe,he),_e),B.stringIndex=function(Ue){var Ae=new We.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ae.strings=[];for(var ht=0;ht<Ue.length;ht+=1)Ae.strings.push({name:"string_"+ht,type:"STRING",value:Ue[ht]});return Ae}(ve),B.header.sizeOf()+B.nameIndex.sizeOf()+B.topDictIndex.sizeOf()+B.stringIndex.sizeOf()+B.globalSubrIndex.sizeOf());return W.charset=qe,W.encoding=0,W.charStrings=W.charset+B.charsets.sizeOf(),W.private[1]=W.charStrings+B.charStringsIndex.sizeOf(),Re=dR(W,ve),B.topDictIndex=pR(Re),B}},mR={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.fontRevision=Math.round(1e3*B.parseFixed())/1e3,j.checkSumAdjustment=B.parseULong(),j.magicNumber=B.parseULong(),M.argument(j.magicNumber===1594834165,"Font header has wrong magic number."),j.flags=B.parseUShort(),j.unitsPerEm=B.parseUShort(),j.created=B.parseLongDateTime(),j.modified=B.parseLongDateTime(),j.xMin=B.parseShort(),j.yMin=B.parseShort(),j.xMax=B.parseShort(),j.yMax=B.parseShort(),j.macStyle=B.parseUShort(),j.lowestRecPPEM=B.parseUShort(),j.fontDirectionHint=B.parseShort(),j.indexToLocFormat=B.parseShort(),j.glyphDataFormat=B.parseShort(),j},make:function(A){var O=Math.round(new Date().getTime()/1e3)+2082844800,j=O;return A.createdTimestamp&&(j=A.createdTimestamp+2082844800),new We.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:j},{name:"modified",type:"LONGDATETIME",value:O},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],A)}},ke={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.ascender=B.parseShort(),j.descender=B.parseShort(),j.lineGap=B.parseShort(),j.advanceWidthMax=B.parseUShort(),j.minLeftSideBearing=B.parseShort(),j.minRightSideBearing=B.parseShort(),j.xMaxExtent=B.parseShort(),j.caretSlopeRise=B.parseShort(),j.caretSlopeRun=B.parseShort(),j.caretOffset=B.parseShort(),B.relativeOffset+=8,j.metricDataFormat=B.parseShort(),j.numberOfHMetrics=B.parseUShort(),j},make:function(A){return new We.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],A)}},Ct={parse:function(A,O,j,B,W){for(var Z,te,he=new Ge.Parser(A,O),_e=0;_e<B;_e+=1){_e<j&&(Z=he.parseUShort(),te=he.parseShort());var ve=W.get(_e);ve.advanceWidth=Z,ve.leftSideBearing=te}},make:function(A){for(var O=new We.Table("hmtx",[]),j=0;j<A.length;j+=1){var W=A.get(j),B=W.advanceWidth||0,W=W.leftSideBearing||0;O.fields.push({name:"advanceWidth_"+j,type:"USHORT",value:B}),O.fields.push({name:"leftSideBearing_"+j,type:"SHORT",value:W})}return O}},Ht={make:function(A){for(var O=new We.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:A.length}]),j="",B=12+4*A.length,W=0;W<A.length;++W){var Z=j.indexOf(A[W]);Z<0&&(Z=j.length,j+=A[W]),O.fields.push({name:"offset "+W,type:"USHORT",value:B+Z}),O.fields.push({name:"length "+W,type:"USHORT",value:A[W].length})}return O.fields.push({name:"stringPool",type:"CHARARRAY",value:j}),O},parse:function(A,O){for(var j=new Ge.Parser(A,O),B=j.parseULong(),W=(M.argument(B===1,"Unsupported ltag table version."),j.skip("uLong",1),j.parseULong()),Z=[],te=0;te<W;te++){for(var he="",_e=O+j.parseUShort(),ve=j.parseUShort(),Re=_e;Re<_e+ve;++Re)he+=String.fromCharCode(A.getInt8(Re));Z.push(he)}return Z}},xt={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.numGlyphs=B.parseUShort(),j.version===1&&(j.maxPoints=B.parseUShort(),j.maxContours=B.parseUShort(),j.maxCompositePoints=B.parseUShort(),j.maxCompositeContours=B.parseUShort(),j.maxZones=B.parseUShort(),j.maxTwilightPoints=B.parseUShort(),j.maxStorage=B.parseUShort(),j.maxFunctionDefs=B.parseUShort(),j.maxInstructionDefs=B.parseUShort(),j.maxStackElements=B.parseUShort(),j.maxSizeOfInstructions=B.parseUShort(),j.maxComponentElements=B.parseUShort(),j.maxComponentDepth=B.parseUShort()),j},make:function(A){return new We.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:A}])}},In=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],gt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Yn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},zt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Ln="utf-16",Vt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},ks={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function ya(A,O,j){switch(A){case 0:return Ln;case 1:return ks[j]||Vt[O];case 3:if(O===1||O===10)return Ln}}function ps(A){var O,j={};for(O in A)j[A[O]]=parseInt(O);return j}function Pa(A,O,j,B,W,Z){return new We.Record("NameRecord",[{name:"platformID",type:"USHORT",value:A},{name:"encodingID",type:"USHORT",value:O},{name:"languageID",type:"USHORT",value:j},{name:"nameID",type:"USHORT",value:B},{name:"length",type:"USHORT",value:W},{name:"offset",type:"USHORT",value:Z}])}function mg(A,O){if((j=function(Z,te){var he=Z.length,_e=te.length-he+1;e:for(var ve=0;ve<_e;ve++)for(;ve<_e;ve++){for(var Re=0;Re<he;Re++)if(te[ve+Re]!==Z[Re])continue e;return ve}return-1}(A,O))<0)for(var j=O.length,B=0,W=A.length;B<W;++B)O.push(A[B]);return j}var Yf={parse:function(A,O,j){for(var B={},W=new Ge.Parser(A,O),O=W.parseUShort(),Z=W.parseUShort(),te=W.offset+W.parseUShort(),he=0;he<Z;he++){var ht=W.parseUShort(),_e=W.parseUShort(),ve=W.parseUShort(),Re=W.parseUShort(),Re=In[Re]||Re,qe=W.parseUShort(),Ue=W.parseUShort(),Ae=function(ot,He,Ye){switch(ot){case 0:if(He===65535)return"und";if(Ye)return Ye[He];break;case 1:return gt[He];case 3:return zt[He]}}(ht,ve,j),ht=ya(ht,_e,ve);ht!==void 0&&Ae!==void 0&&(_e=void 0,(_e=ht===Ln?z.UTF16(A,te+Ue,qe):z.MACSTRING(A,te+Ue,qe,ht))&&((ve=(ve=B[Re])===void 0?B[Re]={}:ve)[Ae]=_e))}return O===1&&W.parseUShort(),B},make:function(A,O){var j,B=[],W={},Z=ps(In);for(j in A){var te=Z[j];if(te===void 0&&(te=j),Ue=parseInt(te),isNaN(Ue))throw new Error('Name table entry "'+j+'" does not exist, see nameTableNames for complete list.');W[Ue]=A[j],B.push(Ue)}for(var he=ps(gt),_e=ps(zt),ve=[],Re=[],qe=0;qe<B.length;qe++){var Ue,Ae,ht=W[Ue=B[qe]];for(Ae in ht){var Xe=ht[Ae],nn=1,ot=he[Ae],He=Yn[ot],Ye=ya(nn,He,ot),Ye=q.MACSTRING(Xe,Ye),br=(Ye===void 0&&(nn=0,(ot=O.indexOf(Ae))<0&&(ot=O.length,O.push(Ae)),He=4,Ye=q.UTF16(Xe)),mg(Ye,Re)),nn=(ve.push(Pa(nn,He,ot,Ue,Ye.length,br)),_e[Ae]);nn!==void 0&&(ot=mg(He=q.UTF16(Xe),Re),ve.push(Pa(3,1,nn,Ue,He.length,ot)))}}ve.sort(function(wn,mi){return wn.platformID-mi.platformID||wn.encodingID-mi.encodingID||wn.languageID-mi.languageID||wn.nameID-mi.nameID});for(var Sr=new We.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ve.length},{name:"stringOffset",type:"USHORT",value:6+12*ve.length}]),Ar=0;Ar<ve.length;Ar++)Sr.fields.push({name:"record_"+Ar,type:"RECORD",value:ve[Ar]});return Sr.fields.push({name:"strings",type:"LITERAL",value:Re}),Sr}},gg=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],La={parse:function(A,O){var j={},B=new Ge.Parser(A,O);j.version=B.parseUShort(),j.xAvgCharWidth=B.parseShort(),j.usWeightClass=B.parseUShort(),j.usWidthClass=B.parseUShort(),j.fsType=B.parseUShort(),j.ySubscriptXSize=B.parseShort(),j.ySubscriptYSize=B.parseShort(),j.ySubscriptXOffset=B.parseShort(),j.ySubscriptYOffset=B.parseShort(),j.ySuperscriptXSize=B.parseShort(),j.ySuperscriptYSize=B.parseShort(),j.ySuperscriptXOffset=B.parseShort(),j.ySuperscriptYOffset=B.parseShort(),j.yStrikeoutSize=B.parseShort(),j.yStrikeoutPosition=B.parseShort(),j.sFamilyClass=B.parseShort(),j.panose=[];for(var W=0;W<10;W++)j.panose[W]=B.parseByte();return j.ulUnicodeRange1=B.parseULong(),j.ulUnicodeRange2=B.parseULong(),j.ulUnicodeRange3=B.parseULong(),j.ulUnicodeRange4=B.parseULong(),j.achVendID=String.fromCharCode(B.parseByte(),B.parseByte(),B.parseByte(),B.parseByte()),j.fsSelection=B.parseUShort(),j.usFirstCharIndex=B.parseUShort(),j.usLastCharIndex=B.parseUShort(),j.sTypoAscender=B.parseShort(),j.sTypoDescender=B.parseShort(),j.sTypoLineGap=B.parseShort(),j.usWinAscent=B.parseUShort(),j.usWinDescent=B.parseUShort(),1<=j.version&&(j.ulCodePageRange1=B.parseULong(),j.ulCodePageRange2=B.parseULong()),2<=j.version&&(j.sxHeight=B.parseShort(),j.sCapHeight=B.parseShort(),j.usDefaultChar=B.parseUShort(),j.usBreakChar=B.parseUShort(),j.usMaxContent=B.parseUShort()),j},make:function(A){return new We.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],A)},unicodeRanges:gg,getUnicodeRange:function(A){for(var O=0;O<gg.length;O+=1){var j=gg[O];if(A>=j.begin&&A<j.end)return O}return-1}},JTe={parse:function(A,O){var j={},B=new Ge.Parser(A,O);switch(j.version=B.parseVersion(),j.italicAngle=B.parseFixed(),j.underlinePosition=B.parseShort(),j.underlineThickness=B.parseShort(),j.isFixedPitch=B.parseULong(),j.minMemType42=B.parseULong(),j.maxMemType42=B.parseULong(),j.minMemType1=B.parseULong(),j.maxMemType1=B.parseULong(),j.version){case 1:j.names=Oe.slice();break;case 2:j.numberOfGlyphs=B.parseUShort(),j.glyphNameIndex=new Array(j.numberOfGlyphs);for(var W=0;W<j.numberOfGlyphs;W++)j.glyphNameIndex[W]=B.parseUShort();j.names=[];for(var Z,te=0;te<j.numberOfGlyphs;te++)j.glyphNameIndex[te]>=Oe.length&&(Z=B.parseChar(),j.names.push(B.parseString(Z)));break;case 2.5:j.numberOfGlyphs=B.parseUShort(),j.offset=new Array(j.numberOfGlyphs);for(var he=0;he<j.numberOfGlyphs;he++)j.offset[he]=B.parseChar()}return j},make:function(){return new We.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ph=new Array(9),Sk=(ph[1]=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:1,coverage:this.parsePointer(Be.coverage),deltaGlyphId:this.parseUShort()}:O===2?{substFormat:2,coverage:this.parsePointer(Be.coverage),substitute:this.parseOffset16List()}:void M.assert(!1,"0x"+A.toString(16)+": lookup type 1 format must be 1 or 2.")},ph[2]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),sequences:this.parseListOfLists()}},ph[3]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),alternateSets:this.parseListOfLists()}},ph[4]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB ligature table identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Be.uShort,lookupListIndex:Be.uShort});ph[5]=function(){var A,O,j=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:B,coverage:this.parsePointer(Be.coverage),ruleSets:this.parseListOfLists(function(){var W=this.parseUShort(),Z=this.parseUShort();return{input:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(Z,Sk)}})}:B===2?{substFormat:B,coverage:this.parsePointer(Be.coverage),classDef:this.parsePointer(Be.classDef),classSets:this.parseListOfLists(function(){var W=this.parseUShort(),Z=this.parseUShort();return{classes:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(Z,Sk)}})}:B===3?(A=this.parseUShort(),O=this.parseUShort(),{substFormat:B,coverages:this.parseList(A,Be.pointer(Be.coverage)),lookupRecords:this.parseRecordList(O,Sk)}):void M.assert(!1,"0x"+j.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ph[6]=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:1,coverage:this.parsePointer(Be.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Sk)}})}:O===2?{substFormat:2,coverage:this.parsePointer(Be.coverage),backtrackClassDef:this.parsePointer(Be.classDef),inputClassDef:this.parsePointer(Be.classDef),lookaheadClassDef:this.parsePointer(Be.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Sk)}})}:O===3?{substFormat:3,backtrackCoverage:this.parseList(Be.pointer(Be.coverage)),inputCoverage:this.parseList(Be.pointer(Be.coverage)),lookaheadCoverage:this.parseList(Be.pointer(Be.coverage)),lookupRecords:this.parseRecordList(Sk)}:void M.assert(!1,"0x"+A.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ph[7]=function(){var A=this.parseUShort(),A=(M.argument(A===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),O=new Be(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:A,extension:ph[A].call(O)}},ph[8]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),backtrackCoverage:this.parseList(Be.pointer(Be.coverage)),lookaheadCoverage:this.parseList(Be.pointer(Be.coverage)),substitutes:this.parseUShortList()}};var xz=new Array(9);xz[1]=function(A){return A.substFormat===1?new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)},{name:"deltaGlyphID",type:"USHORT",value:A.deltaGlyphId}]):new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)}].concat(We.ushortList("substitute",A.substitute)))},xz[3]=function(A){return M.assert(A.substFormat===1,"Lookup type 3 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)}].concat(We.tableList("altSet",A.alternateSets,function(O){return new We.Table("alternateSetTable",We.ushortList("alternate",O))})))},xz[4]=function(A){return M.assert(A.substFormat===1,"Lookup type 4 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)}].concat(We.tableList("ligSet",A.ligatureSets,function(O){return new We.Table("ligatureSetTable",We.tableList("ligature",O,function(j){return new We.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:j.ligGlyph}].concat(We.ushortList("component",j.components,j.components.length+1)))}))})))};var eAe={parse:function(A,O){return O=(A=new Be(A,O=O||0)).parseVersion(1),M.argument(O===1||O===1.1,"Unsupported GSUB table version."),O===1?{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(ph)}:{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(ph),variations:A.parseFeatureVariationsList()}},make:function(A){return new We.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(A.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(A.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(A.lookups,xz)}])}},tAe={parse:function(A,O){for(var j=new Ge.Parser(A,O),B=j.parseULong(),W=(M.argument(B===1,"Unsupported META table version."),j.parseULong(),j.parseULong(),j.parseULong()),Z={},te=0;te<W;te++){var he=j.parseTag(),ve=j.parseULong(),_e=j.parseULong(),ve=z.UTF8(A,O+ve,_e);Z[he]=ve}return Z},make:function(A){var O,j=Object.keys(A).length,B="",W=16+12*j,Z=new We.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:W},{name:"numTags",type:"ULONG",value:j}]);for(O in A){var te=B.length;B+=A[O],Z.fields.push({name:"tag "+O,type:"TAG",value:O}),Z.fields.push({name:"offset "+O,type:"ULONG",value:W+te}),Z.fields.push({name:"length "+O,type:"ULONG",value:A[O].length})}return Z.fields.push({name:"stringPool",type:"CHARARRAY",value:B}),Z}};function rAe(A){return Math.log(A)/Math.log(2)|0}function Zre(A){for(;A.length%4!=0;)A.push(0);for(var O=0,j=0;j<A.length;j+=4)O+=(A[j]<<24)+(A[j+1]<<16)+(A[j+2]<<8)+A[j+3];return O%=Math.pow(2,32)}function nAe(A,O,j,B){return new We.Record("Table Record",[{name:"tag",type:"TAG",value:A!==void 0?A:""},{name:"checkSum",type:"ULONG",value:O!==void 0?O:0},{name:"offset",type:"ULONG",value:j!==void 0?j:0},{name:"length",type:"ULONG",value:B!==void 0?B:0}])}function oAe(A){for(var O=new We.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),j=(O.tables=A,O.numTables=A.length,Math.pow(2,rAe(O.numTables))),B=(O.searchRange=16*j,O.entrySelector=rAe(j),O.rangeShift=16*O.numTables-O.searchRange,[]),W=[],Z=O.sizeOf()+nAe().sizeOf()*O.numTables;Z%4!=0;)Z+=1,W.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<A.length;te+=1){var he=A[te],_e=(M.argument(he.tableName.length===4,"Table name"+he.tableName+" is invalid."),he.sizeOf()),ve=nAe(he.tableName,Zre(he.encode()),Z,_e);for(B.push({name:ve.tag+" Table Record",type:"RECORD",value:ve}),W.push({name:he.tableName+" table",type:"RECORD",value:he}),Z+=_e,M.argument(!isNaN(Z),"Something went wrong calculating the offset.");Z%4!=0;)Z+=1,W.push({name:"padding",type:"BYTE",value:0})}return B.sort(function(Re,qe){return Re.value.tag>qe.value.tag?1:-1}),O.fields=O.fields.concat(B),O.fields=O.fields.concat(W),O}function iAe(A,O,j){for(var B=0;B<O.length;B+=1){var W=A.charToGlyphIndex(O[B]);if(0<W)return A.glyphs.get(W).getMetrics()}return j}var fEt={make:oAe,fontToTable:function(A){for(var O,j=[],B=[],W=[],Z=[],te=[],he=[],_e=[],ve=0,Re=0,qe=0,Ue=0,Ae=0,ht=0;ht<A.glyphs.length;ht+=1){var Xe=A.glyphs.get(ht),ot=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+ht+"): advanceWidth is not a number.");(ot<O||O===void 0)&&0<ot&&(O=ot),ve<ot&&(ve=ot);var ot=La.getUnicodeRange(ot);if(ot<32)Re|=1<<ot;else if(ot<64)qe|=1<<ot-32;else if(ot<96)Ue|=1<<ot-64;else{if(!(ot<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ae|=1<<ot-96}Xe.name!==".notdef"&&(ot=Xe.getMetrics(),j.push(ot.xMin),B.push(ot.yMin),W.push(ot.xMax),Z.push(ot.yMax),he.push(ot.leftSideBearing),_e.push(ot.rightSideBearing),te.push(Xe.advanceWidth))}var He,Ye={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,B),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,Z),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(ja){for(var xR=0,Tk=0;Tk<ja.length;Tk+=1)xR+=ja[Tk];return xR/ja.length}(te),minLeftSideBearing:Math.min.apply(null,he),maxLeftSideBearing:Math.max.apply(null,he),minRightSideBearing:Math.min.apply(null,_e)},br=(Ye.ascender=A.ascender,Ye.descender=A.descender,mR.make({flags:3,unitsPerEm:A.unitsPerEm,xMin:Ye.xMin,yMin:Ye.yMin,xMax:Ye.xMax,yMax:Ye.yMax,lowestRecPPEM:3,createdTimestamp:A.createdTimestamp})),nn=ke.make({ascender:Ye.ascender,descender:Ye.descender,advanceWidthMax:Ye.advanceWidthMax,minLeftSideBearing:Ye.minLeftSideBearing,minRightSideBearing:Ye.minRightSideBearing,xMaxExtent:Ye.maxLeftSideBearing+(Ye.xMax-Ye.xMin),numberOfHMetrics:A.glyphs.length}),Sr=xt.make(A.glyphs.length),Ar=La.make({xAvgCharWidth:Math.round(Ye.advanceWidthAvg),usWeightClass:A.tables.os2.usWeightClass,usWidthClass:A.tables.os2.usWidthClass,usFirstCharIndex:O,usLastCharIndex:ve,ulUnicodeRange1:Re,ulUnicodeRange2:qe,ulUnicodeRange3:Ue,ulUnicodeRange4:Ae,fsSelection:A.tables.os2.fsSelection,sTypoAscender:Ye.ascender,sTypoDescender:Ye.descender,sTypoLineGap:0,usWinAscent:Ye.yMax,usWinDescent:Math.abs(Ye.yMin),ulCodePageRange1:1,sxHeight:iAe(A,"xyvw",{yMax:Math.round(Ye.ascender/2)}).yMax,sCapHeight:iAe(A,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ye).yMax,usDefaultChar:A.hasChar(" ")?32:0,usBreakChar:A.hasChar(" ")?32:0}),wn=Ct.make(A.glyphs),mi=de.make(A.glyphs),Si=A.getEnglishName("fontFamily"),Do=A.getEnglishName("fontSubfamily"),Jo=Si+" "+Do,hs=(hs=A.getEnglishName("postScriptName"))||Si.replace(/\s/g,"")+"-"+Do,qs={};for(He in A.names)qs[He]=A.names[He];qs.uniqueID||(qs.uniqueID={en:A.getEnglishName("manufacturer")+":"+Jo}),qs.postScriptName||(qs.postScriptName={en:hs}),qs.preferredFamily||(qs.preferredFamily=A.names.fontFamily),qs.preferredSubfamily||(qs.preferredSubfamily=A.names.fontSubfamily);var eu=[],Jl=Yf.make(qs,eu),eu=0<eu.length?Ht.make(eu):void 0,mh=JTe.make(),Jo=hR.make(A.glyphs,{version:A.getEnglishName("version"),fullName:Jo,familyName:Si,weightName:Do,postScriptName:hs,unitsPerEm:A.unitsPerEm,fontBBox:[0,Ye.yMin,Ye.ascender,Ye.advanceWidthMax]}),Si=A.metas&&0<Object.keys(A.metas).length?tAe.make(A.metas):void 0,Do=[br,nn,Sr,Ar,Jl,mi,mh,Jo,wn];eu&&Do.push(eu),A.tables.gsub&&Do.push(eAe.make(A.tables.gsub)),Si&&Do.push(Si);for(var tu=Zre((hs=oAe(Do)).encode()),rs=hs.fields,El=!1,Ci=0;Ci<rs.length;Ci+=1)if(rs[Ci].name==="head table"){rs[Ci].value.checkSumAdjustment=2981146554-tu,El=!0;break}if(El)return hs;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Zre};function Qre(A,O){for(var j=0,B=A.length-1;j<=B;){var W=j+B>>>1,Z=A[W].tag;if(Z===O)return W;Z<O?j=1+W:B=W-1}return-j-1}function sAe(A,O){for(var j=0,B=A.length-1;j<=B;){var W=j+B>>>1,Z=A[W];if(Z===O)return W;Z<O?j=1+W:B=W-1}return-j-1}function aAe(A,O){for(var j=0,B=A.length-1;j<=B;){var W,Z=j+B>>>1,te=(W=A[Z]).start;if(te===O)return W;te<O?j=1+Z:B=Z-1}if(0<j)return O>(W=A[j-1]).end?0:W}function vz(A,O){this.font=A,this.tableName=O}function wz(A){vz.call(this,A,"gpos")}function yg(A){vz.call(this,A,"gsub")}function lAe(A,O,j){for(var B=A.subtables,W=0;W<B.length;W++){var Z=B[W];if(Z.substFormat===O)return Z}if(j)return B.push(j),j}function uAe(A){for(var O=new ArrayBuffer(A.length),j=new Uint8Array(O),B=0;B<A.length;++B)j[B]=A[B];return O}function Ck(A,O){if(!A)throw O}function cAe(A,O,j,B,W){var Z=0<(O&B)?(Z=A.parseByte(),j+(Z=O&W?Z:-Z)):0<(O&W)?j:j+A.parseShort();return Z}function dEt(A,O,j){var B,W=new Ge.Parser(O,j);if(A.numberOfContours=W.parseShort(),A._xMin=W.parseShort(),A._yMin=W.parseShort(),A._xMax=W.parseShort(),A._yMax=W.parseShort(),0<A.numberOfContours){for(var Z=A.endPointIndices=[],te=0;te<A.numberOfContours;te+=1)Z.push(W.parseUShort());A.instructionLength=W.parseUShort(),A.instructions=[];for(var he=0;he<A.instructionLength;he+=1)A.instructions.push(W.parseByte());for(var _e=Z[Z.length-1]+1,ve=[],Re=0;Re<_e;Re+=1)if(B=W.parseByte(),ve.push(B),0<(8&B))for(var qe=W.parseByte(),Ue=0;Ue<qe;Ue+=1)ve.push(B),Re+=1;if(M.argument(ve.length===_e,"Bad flags."),0<Z.length){var Ae,ht=[];if(0<_e){for(var Xe=0;Xe<_e;Xe+=1)B=ve[Xe],(Ae={}).onCurve=!!(1&B),Ae.lastPointOfContour=0<=Z.indexOf(Xe),ht.push(Ae);for(var ot=0,He=0;He<_e;He+=1)B=ve[He],(Ae=ht[He]).x=cAe(W,B,ot,2,16),ot=Ae.x;for(var Ye=0,br=0;br<_e;br+=1)B=ve[br],(Ae=ht[br]).y=cAe(W,B,Ye,4,32),Ye=Ae.y}A.points=ht}else A.points=[]}else if(A.numberOfContours===0)A.points=[];else{A.isComposite=!0,A.points=[],A.components=[];for(var nn=!0;nn;){ve=W.parseUShort();var Sr={glyphIndex:W.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ve)?0<(2&ve)?(Sr.dx=W.parseShort(),Sr.dy=W.parseShort()):Sr.matchedPoints=[W.parseUShort(),W.parseUShort()]:0<(2&ve)?(Sr.dx=W.parseChar(),Sr.dy=W.parseChar()):Sr.matchedPoints=[W.parseByte(),W.parseByte()],0<(8&ve)?Sr.xScale=Sr.yScale=W.parseF2Dot14():0<(64&ve)?(Sr.xScale=W.parseF2Dot14(),Sr.yScale=W.parseF2Dot14()):0<(128&ve)&&(Sr.xScale=W.parseF2Dot14(),Sr.scale01=W.parseF2Dot14(),Sr.scale10=W.parseF2Dot14(),Sr.yScale=W.parseF2Dot14()),A.components.push(Sr),nn=!!(32&ve)}if(256&ve){A.instructionLength=W.parseUShort(),A.instructions=[];for(var Ar=0;Ar<A.instructionLength;Ar+=1)A.instructions.push(W.parseByte())}}}function Jre(A,O){for(var j=[],B=0;B<A.length;B+=1){var W=A[B],W={x:O.xScale*W.x+O.scale01*W.y+O.dx,y:O.scale10*W.x+O.yScale*W.y+O.dy,onCurve:W.onCurve,lastPointOfContour:W.lastPointOfContour};j.push(W)}return j}function fAe(A){var O=new X;if(A)for(var j=function(qe){for(var Ue=[],Ae=[],ht=0;ht<qe.length;ht+=1){var Xe=qe[ht];Ae.push(Xe),Xe.lastPointOfContour&&(Ue.push(Ae),Ae=[])}return M.argument(Ae.length===0,"There are still points left in the current contour."),Ue}(A),B=0;B<j.length;++B){var W,Z=j[B],te=Z[Z.length-1],he=Z[0];te.onCurve?O.moveTo(te.x,te.y):he.onCurve?O.moveTo(he.x,he.y):(W={x:.5*(te.x+he.x),y:.5*(te.y+he.y)},O.moveTo(W.x,W.y));for(var _e=0;_e<Z.length;++_e){var ve,Re=te,te=he,he=Z[(_e+1)%Z.length];te.onCurve?O.lineTo(te.x,te.y):(ve=he,Re.onCurve||(te.x,Re.x,te.y,Re.y),he.onCurve||(ve={x:.5*(te.x+he.x),y:.5*(te.y+he.y)}),O.quadraticCurveTo(te.x,te.y,ve.x,ve.y))}O.closePath()}return O}function pEt(A,O){if(O.isComposite)for(var j=0;j<O.components.length;j+=1){var B=O.components[j],W=A.get(B.glyphIndex);if(W.getPath(),W.points){var Z=void 0;if(B.matchedPoints===void 0)Z=Jre(W.points,B);else{if(B.matchedPoints[0]>O.points.length-1||B.matchedPoints[1]>W.points.length-1)throw Error("Matched points out of range in "+O.name);var te=O.points[B.matchedPoints[0]],he=W.points[B.matchedPoints[1]],B={xScale:B.xScale,scale01:B.scale01,scale10:B.scale10,yScale:B.yScale,dx:0,dy:0},he=Jre([he],B)[0];B.dx=te.x-he.x,B.dy=te.y-he.y,Z=Jre(W.points,B)}O.points=O.points.concat(Z)}}return fAe(O.points)}(wz.prototype=vz.prototype={searchTag:Qre,binSearch:sAe,getTable:function(A){var O=this.font.tables[this.tableName];return O=!O&&A?this.font.tables[this.tableName]=this.createDefaultTable():O},getScriptNames:function(){var A=this.getTable();return A?A.scripts.map(function(O){return O.tag}):[]},getDefaultScriptName:function(){var A=this.getTable();if(A){for(var O=!1,j=0;j<A.scripts.length;j++){var B=A.scripts[j].tag;if(B==="DFLT")return B;B==="latn"&&(O=!0)}return O?"latn":void 0}},getScriptTable:function(A,O){var j,B=this.getTable(O);if(B)return j=B.scripts,0<=(B=Qre(B.scripts,A=A||"DFLT"))?j[B].script:O?(j.splice(-1-B,0,O={tag:A,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),O.script):void 0},getLangSysTable:function(W,O,j){var B,W=this.getScriptTable(W,j);if(W)return O&&O!=="dflt"&&O!=="DFLT"?0<=(B=Qre(W.langSysRecords,O))?W.langSysRecords[B].langSys:j?(W.langSysRecords.splice(-1-B,0,j={tag:O,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),j.langSys):void 0:W.defaultLangSys},getFeatureTable:function(A,O,j,B){if(A=this.getLangSysTable(A,O,B),A){for(var W,Z=A.featureIndexes,te=this.font.tables[this.tableName].features,he=0;he<Z.length;he++)if((W=te[Z[he]]).tag===j)return W.feature;if(B)return O=te.length,M.assert(O===0||j>=te[O-1].tag,"Features must be added in alphabetical order."),te.push(W={tag:j,feature:{params:0,lookupListIndexes:[]}}),Z.push(O),W.feature}},getLookupTables:function(Z,O,j,B,W){var Z=this.getFeatureTable(Z,O,j,W),te=[];if(Z){for(var he,_e=Z.lookupListIndexes,ve=this.font.tables[this.tableName].lookups,Re=0;Re<_e.length;Re++)(he=ve[_e[Re]]).lookupType===B&&te.push(he);if(te.length===0&&W)return O=ve.length,ve.push(he={lookupType:B,lookupFlag:0,subtables:[],markFilteringSet:void 0}),_e.push(O),[he]}return te},getGlyphClass:function(A,O){switch(A.format){case 1:return A.startGlyph<=O&&O<A.startGlyph+A.classes.length?A.classes[O-A.startGlyph]:0;case 2:var j=aAe(A.ranges,O);return j?j.classId:0}},getCoverageIndex:function(A,O){switch(A.format){case 1:var j=sAe(A.glyphs,O);return 0<=j?j:-1;case 2:return j=aAe(A.ranges,O),j?j.index+O-j.start:-1}},expandCoverage:function(A){if(A.format===1)return A.glyphs;for(var O=[],j=A.ranges,B=0;B<j.length;B++)for(var W=j[B],Z=W.start,te=W.end,he=Z;he<=te;he++)O.push(he);return O}}).init=function(){var A=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(A)},wz.prototype.getKerningValue=function(A,O,j){for(var B=0;B<A.length;B++)for(var W=A[B].subtables,Z=0;Z<W.length;Z++){var te=W[Z],he=this.getCoverageIndex(te.coverage,O);if(!(he<0))switch(te.posFormat){case 1:for(var _e=te.pairSets[he],ve=0;ve<_e.length;ve++){var Re=_e[ve];if(Re.secondGlyph===j)return Re.value1&&Re.value1.xAdvance||0}break;case 2:var Ue=this.getGlyphClass(te.classDef1,O),qe=this.getGlyphClass(te.classDef2,j),Ue=te.classRecords[Ue][qe];return Ue.value1&&Ue.value1.xAdvance||0}}return 0},wz.prototype.getKerningTables=function(A,O){if(this.font.tables.gpos)return this.getLookupTables(A,O,"kern",2)},(yg.prototype=vz.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},yg.prototype.getSingle=function(A,O,j){for(var B=[],W=this.getLookupTables(O,j,A,1),Z=0;Z<W.length;Z++)for(var te=W[Z].subtables,he=0;he<te.length;he++){var _e=te[he],ve=this.expandCoverage(_e.coverage),Re=void 0;if(_e.substFormat===1)for(var qe=_e.deltaGlyphId,Re=0;Re<ve.length;Re++){var Ue=ve[Re];B.push({sub:Ue,by:Ue+qe})}else{var Ae=_e.substitute;for(Re=0;Re<ve.length;Re++)B.push({sub:ve[Re],by:Ae[Re]})}}return B},yg.prototype.getAlternates=function(A,O,j){for(var B=[],W=this.getLookupTables(O,j,A,3),Z=0;Z<W.length;Z++)for(var te=W[Z].subtables,he=0;he<te.length;he++)for(var _e=te[he],ve=this.expandCoverage(_e.coverage),Re=_e.alternateSets,qe=0;qe<ve.length;qe++)B.push({sub:ve[qe],by:Re[qe]});return B},yg.prototype.getLigatures=function(A,O,j){for(var B=[],W=this.getLookupTables(O,j,A,4),Z=0;Z<W.length;Z++)for(var te=W[Z].subtables,he=0;he<te.length;he++)for(var _e=te[he],ve=this.expandCoverage(_e.coverage),Re=_e.ligatureSets,qe=0;qe<ve.length;qe++)for(var Ue=ve[qe],Ae=Re[qe],ht=0;ht<Ae.length;ht++){var Xe=Ae[ht];B.push({sub:[Ue].concat(Xe.components),by:Xe.ligGlyph})}return B},yg.prototype.addSingle=function(A,O,j,B){j=lAe(this.getLookupTables(j,B,A,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),M.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format),B=O.sub,A=this.binSearch(j.coverage.glyphs,B),A<0&&(j.coverage.glyphs.splice(A=-1-A,0,B),j.substitute.splice(A,0,0)),j.substitute[A]=O.by},yg.prototype.addAlternate=function(A,O,j,B){j=lAe(this.getLookupTables(j,B,A,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),M.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format),B=O.sub,A=this.binSearch(j.coverage.glyphs,B),A<0&&(j.coverage.glyphs.splice(A=-1-A,0,B),j.alternateSets.splice(A,0,0)),j.alternateSets[A]=O.by},yg.prototype.addLigature=function(Z,_e,he,W){var he=this.getLookupTables(he,W,Z,4,!0)[0],W=he.subtables[0],Z=(W||(he.subtables[0]=W={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),M.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),_e.sub[0]),te=_e.sub.slice(1),he={ligGlyph:_e.by,components:te},_e=this.binSearch(W.coverage.glyphs,Z);if(0<=_e){for(var ve=W.ligatureSets[_e],Re=0;Re<ve.length;Re++)if(function(qe,Ue){var Ae=qe.length;if(Ae===Ue.length){for(var ht=0;ht<Ae;ht++)if(qe[ht]!==Ue[ht])return;return 1}}(ve[Re].components,te))return;ve.push(he)}else W.coverage.glyphs.splice(_e=-1-_e,0,Z),W.ligatureSets.splice(_e,0,[he])},yg.prototype.getFeature=function(A,O,j){if(/ss\d\d/.test(A))return this.getSingle(A,O,j);switch(A){case"aalt":case"salt":return this.getSingle(A,O,j).concat(this.getAlternates(A,O,j));case"dlig":case"liga":case"rlig":return this.getLigatures(A,O,j)}},yg.prototype.add=function(A,O,j,B){if(/ss\d\d/.test(A))return this.addSingle(A,O,j,B);switch(A){case"aalt":case"salt":return typeof O.by=="number"?this.addSingle(A,O,j,B):this.addAlternate(A,O,j,B);case"dlig":case"liga":case"rlig":return this.addLigature(A,O,j,B)}};var dAe={getPath:fAe,parse:function(A,O,j,B){for(var W=new ur.GlyphSet(B),Z=0;Z<j.length-1;Z+=1){var te=j[Z];te!==j[Z+1]?W.push(Z,ur.ttfGlyphLoader(B,Z,dEt,A,O+te,pEt)):W.push(Z,ur.glyphLoader(B,Z))}return W}};function pAe(A){this.font=A,this.getCommands=function(O){return dAe.getPath(O).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function hEt(A){return A}function hAe(A){return Math.sign(A)*Math.round(Math.abs(A))}function mEt(A){return Math.sign(A)*Math.round(Math.abs(2*A))/2}function gEt(A){return Math.sign(A)*(Math.round(Math.abs(A)+.5)-.5)}function yEt(A){return Math.sign(A)*Math.ceil(Math.abs(A))}function bEt(A){return Math.sign(A)*Math.floor(Math.abs(A))}function mAe(A){var O=this.srPeriod,j=this.srPhase,B=1;return A<0&&(A=-A,B=-1),A+=this.srThreshold-j,A=Math.trunc(A/O)*O,(A+=j)<0?j*B:A*B}var bg={x:1,y:0,axis:"x",distance:function(A,O,j,B){return(j?A.xo:A.x)-(B?O.xo:O.x)},interpolate:function(A,O,j,B){var W,Z,te,he,_e,ve,Re;if(!B||B===this)return W=A.xo-O.xo,Z=A.xo-j.xo,_e=O.x-O.xo,ve=j.x-j.xo,(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?void(A.x=A.xo+(_e+ve)/2):void(A.x=A.xo+(_e*he+ve*te)/Re);W=B.distance(A,O,!0,!0),Z=B.distance(A,j,!0,!0),_e=B.distance(O,O,!1,!0),ve=B.distance(j,j,!1,!0),(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?bg.setRelative(A,A,(_e+ve)/2,B,!0):bg.setRelative(A,A,(_e*he+ve*te)/Re,B,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(A,O,j,B,W){var Z,te;B&&B!==this?(Z=W?O.xo:O.x,te=W?O.yo:O.y,Z+=j*B.x,te+=j*B.y,A.x=Z+(A.y-te)/B.normalSlope):A.x=(W?O.xo:O.x)+j},slope:0,touch:function(A){A.xTouched=!0},touched:function(A){return A.xTouched},untouch:function(A){A.xTouched=!1}},gb={x:0,y:1,axis:"y",distance:function(A,O,j,B){return(j?A.yo:A.y)-(B?O.yo:O.y)},interpolate:function(A,O,j,B){var W,Z,te,he,_e,ve,Re;if(!B||B===this)return W=A.yo-O.yo,Z=A.yo-j.yo,_e=O.y-O.yo,ve=j.y-j.yo,(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?void(A.y=A.yo+(_e+ve)/2):void(A.y=A.yo+(_e*he+ve*te)/Re);W=B.distance(A,O,!0,!0),Z=B.distance(A,j,!0,!0),_e=B.distance(O,O,!1,!0),ve=B.distance(j,j,!1,!0),(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?gb.setRelative(A,A,(_e+ve)/2,B,!0):gb.setRelative(A,A,(_e*he+ve*te)/Re,B,!0)},normalSlope:0,setRelative:function(A,O,j,B,W){var Z,te;B&&B!==this?(Z=W?O.xo:O.x,te=W?O.yo:O.y,Z+=j*B.x,te+=j*B.y,A.y=te+B.normalSlope*(A.x-Z)):A.y=(W?O.yo:O.y)+j},slope:Number.POSITIVE_INFINITY,touch:function(A){A.yTouched=!0},touched:function(A){return A.yTouched},untouch:function(A){A.yTouched=!1}};function gR(A,O){this.x=A,this.y=O,this.axis=void 0,this.slope=O/A,this.normalSlope=-A/O,Object.freeze(this)}function yR(A,O){var j=Math.sqrt(A*A+O*O);return O/=j,(A/=j)===1&&O===0?bg:A===0&&O===1?gb:new gR(A,O)}function yb(A,O,j,B){this.x=this.xo=Math.round(64*A)/64,this.y=this.yo=Math.round(64*O)/64,this.lastPointOfContour=j,this.onCurve=B,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(bg),Object.freeze(gb),gR.prototype.distance=function(A,O,j,B){return this.x*bg.distance(A,O,j,B)+this.y*gb.distance(A,O,j,B)},gR.prototype.interpolate=function(A,W,Z,B){var te=B.distance(A,W,!0,!0),he=B.distance(A,Z,!0,!0),W=B.distance(W,W,!1,!0),Z=B.distance(Z,Z,!1,!0),te=Math.abs(te),he=Math.abs(he),_e=te+he;_e===0?this.setRelative(A,A,(W+Z)/2,B,!0):this.setRelative(A,A,(W*he+Z*te)/_e,B,!0)},gR.prototype.setRelative=function(A,Z,_e,ve,he){var te=he?Z.xo:Z.x,he=he?Z.yo:Z.y,Z=te+_e*(ve=ve||this).x,te=he+_e*ve.y,he=ve.normalSlope,_e=this.slope,ve=A.x,Re=A.y;A.x=(_e*ve-he*Z+te-Re)/(_e-he),A.y=_e*(A.x-ve)+Re},gR.prototype.touch=function(A){A.xTouched=!0,A.yTouched=!0},yb.prototype.nextTouched=function(A){for(var O=this.nextPointOnContour;!A.touched(O)&&O!==this;)O=O.nextPointOnContour;return O},yb.prototype.prevTouched=function(A){for(var O=this.prevPointOnContour;!A.touched(O)&&O!==this;)O=O.prevPointOnContour;return O};var bR=Object.freeze(new yb(0,0)),xEt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function m1(A,O){switch(this.env=A,this.stack=[],this.prog=O,A){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=bg,this.round=hAe}}function _z(A){for(var O=A.tZone=new Array(A.gZone.length),j=0;j<O.length;j++)O[j]=new yb(0,0)}function gAe(A,O){var j,B=A.prog,W=A.ip,Z=1;do if((j=B[++W])===88)Z++;else if(j===89)Z--;else if(j===64)W+=B[W+1]+1;else if(j===65)W+=2*B[W+1]+1;else if(176<=j&&j<=183)W+=j-176+1;else if(184<=j&&j<=191)W+=2*(j-184+1);else if(O&&Z===1&&j===27)break;while(0<Z);A.ip=W}function yAe(A,O){c.DEBUG&&console.log(O.step,"SVTCA["+A.axis+"]"),O.fv=O.pv=O.dpv=A}function bAe(A,O){c.DEBUG&&console.log(O.step,"SPVTCA["+A.axis+"]"),O.pv=O.dpv=A}function xAe(A,O){c.DEBUG&&console.log(O.step,"SFVTCA["+A.axis+"]"),O.fv=A}function vAe(A,O){var j,W=O.stack,B=W.pop(),W=W.pop(),Z=O.z2[B],te=O.z1[W];c.DEBUG&&console.log("SPVTL["+A+"]",B,W),B=A?(j=Z.y-te.y,te.x-Z.x):(j=te.x-Z.x,te.y-Z.y),O.pv=O.dpv=yR(j,B)}function wAe(A,O){var j,W=O.stack,B=W.pop(),W=W.pop(),Z=O.z2[B],te=O.z1[W];c.DEBUG&&console.log("SFVTL["+A+"]",B,W),B=A?(j=Z.y-te.y,te.x-Z.x):(j=te.x-Z.x,te.y-Z.y),O.fv=yR(j,B)}function ene(A){c.DEBUG&&console.log(A.step,"POP[]"),A.stack.pop()}function _Ae(A,O){var j=O.stack.pop(),B=O.z0[j],W=O.fv,Z=O.pv,te=(c.DEBUG&&console.log(O.step,"MDAP["+A+"]",j),Z.distance(B,bR));A&&(te=O.round(te)),W.setRelative(B,bR,te,Z),W.touch(B),O.rp0=O.rp1=j}function SAe(A,O){var j,B,W,Z=O.z2,te=Z.length-2;c.DEBUG&&console.log(O.step,"IUP["+A.axis+"]");for(var he=0;he<te;he++)j=Z[he],A.touched(j)||(B=j.prevTouched(A))!==j&&(B===(W=j.nextTouched(A))&&A.setRelative(j,j,A.distance(B,B,!1,!0),A,!0),A.interpolate(j,B,W,A))}function CAe(A,O){for(var j=O.stack,B=A?O.rp1:O.rp2,W=(A?O.z0:O.z1)[B],Z=O.fv,te=O.pv,he=O.loop,_e=O.z2;he--;){var ve=j.pop(),Re=_e[ve],qe=te.distance(W,W,!1,!0);Z.setRelative(Re,Re,qe,te),Z.touch(Re),c.DEBUG&&console.log(O.step,(1<O.loop?"loop "+(O.loop-he)+": ":"")+"SHP["+(A?"rp1":"rp2")+"]",ve)}O.loop=1}function EAe(A,O){for(var j=O.stack,te=A?O.rp1:O.rp2,B=(A?O.z0:O.z1)[te],W=O.fv,Z=O.pv,te=j.pop(),he=O.z2[O.contours[te]],_e=he,ve=(c.DEBUG&&console.log(O.step,"SHC["+A+"]",te),Z.distance(B,B,!1,!0));_e!==B&&W.setRelative(_e,_e,ve,Z),(_e=_e.nextPointOnContour)!==he;);}function TAe(A,O){var j,B,he=O.stack,W=A?O.rp1:O.rp2,W=(A?O.z0:O.z1)[W],Z=O.fv,te=O.pv,he=he.pop();switch(c.DEBUG&&console.log(O.step,"SHZ["+A+"]",he),he){case 0:j=O.tZone;break;case 1:j=O.gZone;break;default:throw new Error("Invalid zone")}for(var _e=te.distance(W,W,!1,!0),ve=j.length-2,Re=0;Re<ve;Re++)B=j[Re],Z.setRelative(B,B,_e,te)}function AAe(A,O){var B=O.stack,j=B.pop()/64,B=B.pop(),W=O.z1[B],Z=O.z0[O.rp0],te=O.fv,he=O.pv;te.setRelative(W,Z,j,he),te.touch(W),c.DEBUG&&console.log(O.step,"MSIRP["+A+"]",j,B),O.rp1=O.rp0,O.rp2=B,A&&(O.rp0=B)}function kAe(A,O){var j=O.stack,he=j.pop(),j=j.pop(),B=O.z0[j],W=O.fv,Z=O.pv,te=O.cvt[he],he=(c.DEBUG&&console.log(O.step,"MIAP["+A+"]",he,"(",te,")",j),Z.distance(B,bR));A&&(Math.abs(he-te)<O.cvCutIn&&(he=te),he=O.round(he)),W.setRelative(B,bR,he,Z),O.zp0===0&&(B.xo=B.x,B.yo=B.y),W.touch(B),O.rp0=O.rp1=j}function IAe(A,O){var j=O.stack,B=j.pop(),W=O.z2[B];c.DEBUG&&console.log(O.step,"GC["+A+"]",B),j.push(64*O.dpv.distance(W,bR,A,!1))}function DAe(A,O){var B=O.stack,j=B.pop(),B=B.pop(),W=O.z1[j],Z=O.z0[B],Z=O.dpv.distance(Z,W,A,A);c.DEBUG&&console.log(O.step,"MD["+A+"]",j,B,"->",Z),O.stack.push(Math.round(64*Z))}function tne(A,O){var j=O.stack,B=j.pop(),W=O.fv,Z=O.pv,te=O.ppem,he=O.deltaBase+16*(A-1),_e=O.deltaShift,ve=O.z0;c.DEBUG&&console.log(O.step,"DELTAP["+A+"]",B,j);for(var Re=0;Re<B;Re++){var qe=j.pop(),Ue=j.pop();he+((240&Ue)>>4)===te&&(0<=(Ue=(15&Ue)-8)&&Ue++,c.DEBUG&&console.log(O.step,"DELTAPFIX",qe,"by",Ue*_e),qe=ve[qe],W.setRelative(qe,qe,Ue*_e,Z))}}function Sz(A,O){var j=O.stack,B=j.pop();c.DEBUG&&console.log(O.step,"ROUND[]"),j.push(64*O.round(B/64))}function rne(A,O){var j=O.stack,B=j.pop(),W=O.ppem,Z=O.deltaBase+16*(A-1),te=O.deltaShift;c.DEBUG&&console.log(O.step,"DELTAC["+A+"]",B,j);for(var he=0;he<B;he++){var _e=j.pop(),ve=j.pop();Z+((240&ve)>>4)===W&&(0<=(ve=(15&ve)-8)&&ve++,ve=ve*te,c.DEBUG&&console.log(O.step,"DELTACFIX",_e,"by",ve),O.cvt[_e]+=ve)}}function NAe(A,O){var j,W=O.stack,B=W.pop(),W=W.pop(),Z=O.z2[B],te=O.z1[W];c.DEBUG&&console.log(O.step,"SDPVTL["+A+"]",B,W),B=A?(j=Z.y-te.y,te.x-Z.x):(j=te.x-Z.x,te.y-Z.y),O.dpv=yR(j,B)}function g1(A,O){var j=O.stack,B=O.prog,W=O.ip;c.DEBUG&&console.log(O.step,"PUSHB["+A+"]");for(var Z=0;Z<A;Z++)j.push(B[++W]);O.ip=W}function y1(A,O){var j=O.ip,B=O.prog,W=O.stack;c.DEBUG&&console.log(O.ip,"PUSHW["+A+"]");for(var Z=0;Z<A;Z++){var te=B[++j]<<8|B[++j];32768&te&&(te=-(1+(65535^te))),W.push(te)}O.ip=j}function cr(A,O,j,B,W,Z){var te,he,ve=Z.stack,_e=A&&ve.pop(),ve=ve.pop(),Re=Z.rp0,Re=Z.z0[Re],qe=Z.z1[ve],Ue=Z.minDis,Ae=Z.fv,ht=Z.dpv,Xe=te=ht.distance(qe,Re,!0,!0),ot=0<=Xe?1:-1;Xe=Math.abs(Xe),A&&(he=Z.cvt[_e],B&&Math.abs(Xe-he)<Z.cvCutIn&&(Xe=he)),j&&Xe<Ue&&(Xe=Ue),B&&(Xe=Z.round(Xe)),Ae.setRelative(qe,Re,ot*Xe,ht),Ae.touch(qe),c.DEBUG&&console.log(Z.step,(A?"MIRP[":"MDRP[")+(O?"M":"m")+(j?">":"_")+(B?"R":"_")+(W===0?"Gr":W===1?"Bl":W===2?"Wh":"")+"]",A?_e+"("+Z.cvt[_e]+","+he+")":"",ve,"(d =",te,"->",ot*Xe,")"),Z.rp1=Z.rp0,Z.rp2=ve,O&&(Z.rp0=ve)}pAe.prototype.exec=function(A,O){if(typeof O!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var j=this.font,B=this._prepState;if(!B||B.ppem!==O){var W=this._fpgmState;if(!W){m1.prototype=xEt,(W=this._fpgmState=new m1("fpgm",j.tables.fpgm)).funcs=[],W.font=j,c.DEBUG&&(console.log("---EXEC FPGM---"),W.step=-1);try{Ek(W)}catch(ve){return console.log("Hinting error in FPGM:"+ve),void(this._errorState=3)}}m1.prototype=W,(B=this._prepState=new m1("prep",j.tables.prep)).ppem=O;var Z=j.tables.cvt;if(Z)for(var te=B.cvt=new Array(Z.length),he=O/j.unitsPerEm,_e=0;_e<Z.length;_e++)te[_e]=Z[_e]*he;else B.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),B.step=-1);try{Ek(B)}catch(ve){this._errorState<2&&console.log("Hinting error in PREP:"+ve),this._errorState=2}}if(!(1<this._errorState))try{return vEt(A,B)}catch(ve){this._errorState<1&&(console.log("Hinting error:"+ve),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var vEt=function(A,O){var j=O.ppem/O.font.unitsPerEm,B=j,W=A.components;if(m1.prototype=O,W){for(var Z=O.font,te=[],he=[],_e=0;_e<W.length;_e++){var ve=W[_e],Re=Z.glyphs.get(ve.glyphIndex),qe=new m1("glyf",Re.instructions);c.DEBUG&&(console.log("---EXEC COMP "+_e+"---"),qe.step=-1),MAe(Re,qe,j,B);for(var Ue=Math.round(ve.dx*j),Ae=Math.round(ve.dy*B),ht=qe.gZone,Xe=qe.contours,ot=0;ot<ht.length;ot++){var He=ht[ot];He.xTouched=He.yTouched=!1,He.xo=He.x=He.x+Ue,He.yo=He.y=He.y+Ae}var Ye=te.length;te.push.apply(te,ht);for(var br=0;br<Xe.length;br++)he.push(Xe[br]+Ye)}A.instructions&&!qe.inhibitGridFit&&((qe=new m1("glyf",A.instructions)).gZone=qe.z0=qe.z1=qe.z2=te,qe.contours=he,te.push(new yb(0,0),new yb(Math.round(A.advanceWidth*j),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),qe.step=-1),Ek(qe),te.length-=2)}else qe=new m1("glyf",A.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),qe.step=-1),MAe(A,qe,j,B),te=qe.gZone;return te},MAe=function(A,O,j,B){for(var W,Z,te,he=A.points||[],_e=he.length,ve=O.gZone=O.z0=O.z1=O.z2=[],Re=O.contours=[],qe=0;qe<_e;qe++)W=he[qe],ve[qe]=new yb(W.x*j,W.y*B,W.lastPointOfContour,W.onCurve);for(var Ue=0;Ue<_e;Ue++)W=ve[Ue],Z||(Z=W,Re.push(Ue)),W.lastPointOfContour?((W.nextPointOnContour=Z).prevPointOnContour=W,Z=void 0):(te=ve[Ue+1],(W.nextPointOnContour=te).prevPointOnContour=W);if(!O.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",O.stack);for(var Ae=0;Ae<_e;Ae++)console.log(Ae,ve[Ae].x,ve[Ae].y)}if(ve.push(new yb(0,0),new yb(Math.round(A.advanceWidth*j),0)),Ek(O),ve.length-=2,c.DEBUG){console.log("FINISHED GLYPH",O.stack);for(var ht=0;ht<_e;ht++)console.log(ht,ve[ht].x,ve[ht].y)}}},Ek=function(A){var O=A.prog;if(O){var j,B=O.length;for(A.ip=0;A.ip<B;A.ip++){if(c.DEBUG&&A.step++,!(j=wEt[O[A.ip]]))throw new Error("unknown instruction: 0x"+Number(O[A.ip]).toString(16));j(A)}}},wEt=[yAe.bind(void 0,gb),yAe.bind(void 0,bg),bAe.bind(void 0,gb),bAe.bind(void 0,bg),xAe.bind(void 0,gb),xAe.bind(void 0,bg),vAe.bind(void 0,0),vAe.bind(void 0,1),wAe.bind(void 0,0),wAe.bind(void 0,1),function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"SPVFS[]",O,j),A.pv=A.dpv=yR(j,O)},function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"SPVFS[]",O,j),A.fv=yR(j,O)},function(A){var O=A.stack,j=A.pv;c.DEBUG&&console.log(A.step,"GPV[]"),O.push(16384*j.x),O.push(16384*j.y)},function(A){var O=A.stack,j=A.fv;c.DEBUG&&console.log(A.step,"GFV[]"),O.push(16384*j.x),O.push(16384*j.y)},function(A){A.fv=A.pv,c.DEBUG&&console.log(A.step,"SFVTPV[]")},function(O){var j=(te=O.stack).pop(),B=te.pop(),W=te.pop(),Z=te.pop(),te=te.pop(),_e=O.z0,Re=O.z1,he=_e[j],_e=_e[B],ve=Re[W],Re=Re[Z],O=O.z2[te],j=(c.DEBUG&&console.log("ISECT[], ",j,B,W,Z,te),he.x),B=he.y,W=_e.x,Z=_e.y,te=ve.x,he=ve.y,_e=Re.x,ve=Re.y,Re=(j-W)*(he-ve)-(B-Z)*(te-_e),qe=j*Z-B*W,Ue=te*ve-he*_e;O.x=(qe*(te-_e)-Ue*(j-W))/Re,O.y=(qe*(he-ve)-Ue*(B-Z))/Re},function(A){A.rp0=A.stack.pop(),c.DEBUG&&console.log(A.step,"SRP0[]",A.rp0)},function(A){A.rp1=A.stack.pop(),c.DEBUG&&console.log(A.step,"SRP1[]",A.rp1)},function(A){A.rp2=A.stack.pop(),c.DEBUG&&console.log(A.step,"SRP2[]",A.rp2)},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZP0[]",O),A.zp0=O){case 0:A.tZone||_z(A),A.z0=A.tZone;break;case 1:A.z0=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZP1[]",O),A.zp1=O){case 0:A.tZone||_z(A),A.z1=A.tZone;break;case 1:A.z1=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZP2[]",O),A.zp2=O){case 0:A.tZone||_z(A),A.z2=A.tZone;break;case 1:A.z2=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZPS[]",O),A.zp0=A.zp1=A.zp2=O){case 0:A.tZone||_z(A),A.z0=A.z1=A.z2=A.tZone;break;case 1:A.z0=A.z1=A.z2=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){A.loop=A.stack.pop(),c.DEBUG&&console.log(A.step,"SLOOP[]",A.loop)},function(A){c.DEBUG&&console.log(A.step,"RTG[]"),A.round=hAe},function(A){c.DEBUG&&console.log(A.step,"RTHG[]"),A.round=gEt},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SMD[]",O),A.minDis=O/64},function(A){c.DEBUG&&console.log(A.step,"ELSE[]"),gAe(A,!1)},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"JMPR[]",O),A.ip+=O-1},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SCVTCI[]",O),A.cvCutIn=O/64},void 0,void 0,function(A){var O=A.stack;c.DEBUG&&console.log(A.step,"DUP[]"),O.push(O[O.length-1])},ene,function(A){c.DEBUG&&console.log(A.step,"CLEAR[]"),A.stack.length=0},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"SWAP[]"),O.push(j),O.push(B)},function(A){var O=A.stack;c.DEBUG&&console.log(A.step,"DEPTH[]"),O.push(O.length)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"CINDEX[]",j),O.push(O[O.length-j])},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"MINDEX[]",j),O.push(O.splice(O.length-j,1)[0])},void 0,void 0,void 0,function(A){var O=(B=A.stack).pop(),j=B.pop(),B=(c.DEBUG&&console.log(A.step,"LOOPCALL[]",O,j),A.ip),W=A.prog;A.prog=A.funcs[O];for(var Z=0;Z<j;Z++)Ek(A),c.DEBUG&&console.log(++A.step,Z+1<j?"next loopcall":"done loopcall",Z);A.ip=B,A.prog=W},function(A){var O=A.stack.pop(),j=(c.DEBUG&&console.log(A.step,"CALL[]",O),A.ip),B=A.prog;A.prog=A.funcs[O],Ek(A),A.ip=j,A.prog=B,c.DEBUG&&console.log(++A.step,"returning from",O)},function(A){if(A.env!=="fpgm")throw new Error("FDEF not allowed here");var B=A.stack,O=A.prog,j=A.ip,B=B.pop(),W=j;for(c.DEBUG&&console.log(A.step,"FDEF[]",B);O[++j]!==45;);A.ip=j,A.funcs[B]=O.slice(W+1,j)},void 0,_Ae.bind(void 0,0),_Ae.bind(void 0,1),SAe.bind(void 0,gb),SAe.bind(void 0,bg),CAe.bind(void 0,0),CAe.bind(void 0,1),EAe.bind(void 0,0),EAe.bind(void 0,1),TAe.bind(void 0,0),TAe.bind(void 0,1),function(A){for(var O=A.stack,j=A.loop,B=A.fv,W=O.pop()/64,Z=A.z2;j--;){var te=O.pop(),he=Z[te];c.DEBUG&&console.log(A.step,(1<A.loop?"loop "+(A.loop-j)+": ":"")+"SHPIX[]",te,W),B.setRelative(he,he,W),B.touch(he)}A.loop=1},function(A){for(var O=A.stack,j=A.rp1,B=A.rp2,W=A.loop,Z=A.z0[j],te=A.z1[B],he=A.fv,_e=A.dpv,ve=A.z2;W--;){var Re=O.pop(),qe=ve[Re];c.DEBUG&&console.log(A.step,(1<A.loop?"loop "+(A.loop-W)+": ":"")+"IP[]",Re,j,"<->",B),he.interpolate(qe,Z,te,_e),he.touch(qe)}A.loop=1},AAe.bind(void 0,0),AAe.bind(void 0,1),function(A){for(var O=A.stack,j=A.rp0,B=A.z0[j],W=A.loop,Z=A.fv,te=A.pv,he=A.z1;W--;){var _e=O.pop(),ve=he[_e];c.DEBUG&&console.log(A.step,(1<A.loop?"loop "+(A.loop-W)+": ":"")+"ALIGNRP[]",_e),Z.setRelative(ve,B,0,te),Z.touch(ve)}A.loop=1},function(A){c.DEBUG&&console.log(A.step,"RTDG[]"),A.round=mEt},kAe.bind(void 0,0),kAe.bind(void 0,1),function(A){var O=A.prog,j=A.ip,B=A.stack,W=O[++j];c.DEBUG&&console.log(A.step,"NPUSHB[]",W);for(var Z=0;Z<W;Z++)B.push(O[++j]);A.ip=j},function(A){var O=A.ip,j=A.prog,B=A.stack,W=j[++O];c.DEBUG&&console.log(A.step,"NPUSHW[]",W);for(var Z=0;Z<W;Z++){var te=j[++O]<<8|j[++O];32768&te&&(te=-(1+(65535^te))),B.push(te)}A.ip=O},function(A){var B=A.stack,O=(O=A.store)||(A.store=[]),j=B.pop(),B=B.pop();c.DEBUG&&console.log(A.step,"WS",j,B),O[B]=j},function(W){var O=W.stack,j=W.store,B=O.pop(),W=(c.DEBUG&&console.log(W.step,"RS",B),j&&j[B]||0);O.push(W)},function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"WCVTP",O,j),A.cvt[j]=O/64},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"RCVT",j),O.push(64*A.cvt[j])},IAe.bind(void 0,0),IAe.bind(void 0,1),void 0,DAe.bind(void 0,0),DAe.bind(void 0,1),function(A){c.DEBUG&&console.log(A.step,"MPPEM[]"),A.stack.push(A.ppem)},void 0,function(A){c.DEBUG&&console.log(A.step,"FLIPON[]"),A.autoFlip=!0},void 0,void 0,function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"LT[]",j,B),O.push(B<j?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"LTEQ[]",j,B),O.push(B<=j?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"GT[]",j,B),O.push(j<B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"GTEQ[]",j,B),O.push(j<=B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"EQ[]",j,B),O.push(j===B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"NEQ[]",j,B),O.push(j!==B?1:0)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"ODD[]",j),O.push(Math.trunc(j)%2?1:0)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"EVEN[]",j),O.push(Math.trunc(j)%2?0:1)},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"IF[]",O),O||(gAe(A,!0),c.DEBUG&&console.log(A.step,"EIF[]"))},function(A){c.DEBUG&&console.log(A.step,"EIF[]")},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"AND[]",j,B),O.push(j&&B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"OR[]",j,B),O.push(j||B?1:0)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"NOT[]",j),O.push(j?0:1)},tne.bind(void 0,1),function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SDB[]",O),A.deltaBase=O},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SDS[]",O),A.deltaShift=Math.pow(.5,O)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"ADD[]",j,B),O.push(B+j)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"SUB[]",j,B),O.push(B-j)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"DIV[]",j,B),O.push(64*B/j)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"MUL[]",j,B),O.push(B*j/64)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"ABS[]",j),O.push(Math.abs(j))},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"NEG[]",j),O.push(-j)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"FLOOR[]",j),O.push(64*Math.floor(j/64))},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"CEILING[]",j),O.push(64*Math.ceil(j/64))},Sz.bind(void 0,0),Sz.bind(void 0,1),Sz.bind(void 0,2),Sz.bind(void 0,3),void 0,void 0,void 0,void 0,function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"WCVTF[]",O,j),A.cvt[j]=O*A.ppem/A.font.unitsPerEm},tne.bind(void 0,2),tne.bind(void 0,3),rne.bind(void 0,1),rne.bind(void 0,2),rne.bind(void 0,3),function(A){var O,j=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SROUND[]",j),A.round=mAe,192&j){case 0:O=.5;break;case 64:O=1;break;case 128:O=2;break;default:throw new Error("invalid SROUND value")}switch(A.srPeriod=O,48&j){case 0:A.srPhase=0;break;case 16:A.srPhase=.25*O;break;case 32:A.srPhase=.5*O;break;case 48:A.srPhase=.75*O;break;default:throw new Error("invalid SROUND value")}A.srThreshold=(j&=15)===0?0:(j/8-.5)*O},function(A){var O,j=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"S45ROUND[]",j),A.round=mAe,192&j){case 0:O=Math.sqrt(2)/2;break;case 64:O=Math.sqrt(2);break;case 128:O=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(A.srPeriod=O,48&j){case 0:A.srPhase=0;break;case 16:A.srPhase=.25*O;break;case 32:A.srPhase=.5*O;break;case 48:A.srPhase=.75*O;break;default:throw new Error("invalid S45ROUND value")}A.srThreshold=(j&=15)===0?0:(j/8-.5)*O},void 0,void 0,function(A){c.DEBUG&&console.log(A.step,"ROFF[]"),A.round=hEt},void 0,function(A){c.DEBUG&&console.log(A.step,"RUTG[]"),A.round=yEt},function(A){c.DEBUG&&console.log(A.step,"RDTG[]"),A.round=bEt},ene,ene,void 0,void 0,void 0,void 0,void 0,function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SCANCTRL[]",O)},NAe.bind(void 0,0),NAe.bind(void 0,1),function(A){var O=A.stack,j=O.pop(),B=0;c.DEBUG&&console.log(A.step,"GETINFO[]",j),1&j&&(B=35),32&j&&(B|=4096),O.push(B)},void 0,function(A){var O=A.stack,j=O.pop(),B=O.pop(),W=O.pop();c.DEBUG&&console.log(A.step,"ROLL[]"),O.push(B),O.push(j),O.push(W)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"MAX[]",j,B),O.push(Math.max(B,j))},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"MIN[]",j,B),O.push(Math.min(B,j))},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SCANTYPE[]",O)},function(A){var O=A.stack.pop(),j=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"INSTCTRL[]",O,j),O){case 1:return void(A.inhibitGridFit=!!j);case 2:return void(A.ignoreCvt=!!j);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,g1.bind(void 0,1),g1.bind(void 0,2),g1.bind(void 0,3),g1.bind(void 0,4),g1.bind(void 0,5),g1.bind(void 0,6),g1.bind(void 0,7),g1.bind(void 0,8),y1.bind(void 0,1),y1.bind(void 0,2),y1.bind(void 0,3),y1.bind(void 0,4),y1.bind(void 0,5),y1.bind(void 0,6),y1.bind(void 0,7),y1.bind(void 0,8),cr.bind(void 0,0,0,0,0,0),cr.bind(void 0,0,0,0,0,1),cr.bind(void 0,0,0,0,0,2),cr.bind(void 0,0,0,0,0,3),cr.bind(void 0,0,0,0,1,0),cr.bind(void 0,0,0,0,1,1),cr.bind(void 0,0,0,0,1,2),cr.bind(void 0,0,0,0,1,3),cr.bind(void 0,0,0,1,0,0),cr.bind(void 0,0,0,1,0,1),cr.bind(void 0,0,0,1,0,2),cr.bind(void 0,0,0,1,0,3),cr.bind(void 0,0,0,1,1,0),cr.bind(void 0,0,0,1,1,1),cr.bind(void 0,0,0,1,1,2),cr.bind(void 0,0,0,1,1,3),cr.bind(void 0,0,1,0,0,0),cr.bind(void 0,0,1,0,0,1),cr.bind(void 0,0,1,0,0,2),cr.bind(void 0,0,1,0,0,3),cr.bind(void 0,0,1,0,1,0),cr.bind(void 0,0,1,0,1,1),cr.bind(void 0,0,1,0,1,2),cr.bind(void 0,0,1,0,1,3),cr.bind(void 0,0,1,1,0,0),cr.bind(void 0,0,1,1,0,1),cr.bind(void 0,0,1,1,0,2),cr.bind(void 0,0,1,1,0,3),cr.bind(void 0,0,1,1,1,0),cr.bind(void 0,0,1,1,1,1),cr.bind(void 0,0,1,1,1,2),cr.bind(void 0,0,1,1,1,3),cr.bind(void 0,1,0,0,0,0),cr.bind(void 0,1,0,0,0,1),cr.bind(void 0,1,0,0,0,2),cr.bind(void 0,1,0,0,0,3),cr.bind(void 0,1,0,0,1,0),cr.bind(void 0,1,0,0,1,1),cr.bind(void 0,1,0,0,1,2),cr.bind(void 0,1,0,0,1,3),cr.bind(void 0,1,0,1,0,0),cr.bind(void 0,1,0,1,0,1),cr.bind(void 0,1,0,1,0,2),cr.bind(void 0,1,0,1,0,3),cr.bind(void 0,1,0,1,1,0),cr.bind(void 0,1,0,1,1,1),cr.bind(void 0,1,0,1,1,2),cr.bind(void 0,1,0,1,1,3),cr.bind(void 0,1,1,0,0,0),cr.bind(void 0,1,1,0,0,1),cr.bind(void 0,1,1,0,0,2),cr.bind(void 0,1,1,0,0,3),cr.bind(void 0,1,1,0,1,0),cr.bind(void 0,1,1,0,1,1),cr.bind(void 0,1,1,0,1,2),cr.bind(void 0,1,1,0,1,3),cr.bind(void 0,1,1,1,0,0),cr.bind(void 0,1,1,1,0,1),cr.bind(void 0,1,1,1,0,2),cr.bind(void 0,1,1,1,0,3),cr.bind(void 0,1,1,1,1,0),cr.bind(void 0,1,1,1,1,1),cr.bind(void 0,1,1,1,1,2),cr.bind(void 0,1,1,1,1,3)],_Et=Array.from||function(A){return A.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Qo(A){(A=A||{}).empty||(Ck(A.familyName,"When creating a new Font object, familyName is required."),Ck(A.styleName,"When creating a new Font object, styleName is required."),Ck(A.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ck(A.ascender,"When creating a new Font object, ascender is required."),Ck(A.descender,"When creating a new Font object, descender is required."),Ck(A.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:A.familyName||" "},fontSubfamily:{en:A.styleName||" "},fullName:{en:A.fullName||A.familyName+" "+A.styleName},postScriptName:{en:A.postScriptName||(A.familyName+A.styleName).replace(/\s/g,"")},designer:{en:A.designer||" "},designerURL:{en:A.designerURL||" "},manufacturer:{en:A.manufacturer||" "},manufacturerURL:{en:A.manufacturerURL||" "},license:{en:A.license||" "},licenseURL:{en:A.licenseURL||" "},version:{en:A.version||"Version 0.1"},description:{en:A.description||" "},copyright:{en:A.copyright||" "},trademark:{en:A.trademark||" "}},this.unitsPerEm=A.unitsPerEm||1e3,this.ascender=A.ascender,this.descender=A.descender,this.createdTimestamp=A.createdTimestamp,this.tables={os2:{usWeightClass:A.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:A.widthClass||this.usWidthClasses.MEDIUM,fsSelection:A.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ur.GlyphSet(this,A.glyphs||[]),this.encoding=new Ve(this),this.position=new wz(this),this.substitution=new yg(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new pAe(this):void 0)}})}function FAe(A,O){var j,B=JSON.stringify(A),W=256;for(j in O){var Z=parseInt(j);if(Z&&!(Z<256)){if(JSON.stringify(O[j])===B)return Z;W<=Z&&(W=Z+1)}}return O[W]=A,W}Qo.prototype.hasChar=function(A){return this.encoding.charToGlyphIndex(A)!==null},Qo.prototype.charToGlyphIndex=function(A){return this.encoding.charToGlyphIndex(A)},Qo.prototype.charToGlyph=function(A){return A=this.charToGlyphIndex(A),this.glyphs.get(A)||this.glyphs.get(0)},Qo.prototype.stringToGlyphs=function(A,O){O=O||this.defaultRenderOptions;for(var j=_Et(A),B=[],W=0;W<j.length;W+=1){var Z=j[W];B.push(this.charToGlyphIndex(Z))}var te=B.length;if(O.features){var A=O.script||this.substitution.getDefaultScriptName(),he=[];O.features.liga&&(he=he.concat(this.substitution.getFeature("liga",A,O.language))),O.features.rlig&&(he=he.concat(this.substitution.getFeature("rlig",A,O.language)));for(var _e=0;_e<te;_e+=1)for(var ve=0;ve<he.length;ve++){for(var Re=he[ve],qe=Re.sub,Ue=qe.length,Ae=0;Ae<Ue&&qe[Ae]===B[_e+Ae];)Ae++;Ae===Ue&&(B.splice(_e,Ue,Re.by),te=te-Ue+1)}}for(var ht=new Array(te),Xe=this.glyphs.get(0),ot=0;ot<te;ot+=1)ht[ot]=this.glyphs.get(B[ot])||Xe;return ht},Qo.prototype.nameToGlyphIndex=function(A){return this.glyphNames.nameToGlyphIndex(A)},Qo.prototype.nameToGlyph=function(A){return A=this.nameToGlyphIndex(A),this.glyphs.get(A)||this.glyphs.get(0)},Qo.prototype.glyphIndexToName=function(A){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(A):""},Qo.prototype.getKerningValue=function(A,O){A=A.index||A,O=O.index||O;var j=this.position.defaultKerningTables;return j?this.position.getKerningValue(j,A,O):this.kerningPairs[A+","+O]||0},Qo.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Qo.prototype.forEachGlyph=function(A,O,j,B,W,Z){O=O!==void 0?O:0,j=j!==void 0?j:0,W=W||this.defaultRenderOptions;var te,he=1/this.unitsPerEm*(B=B!==void 0?B:72),_e=this.stringToGlyphs(A,W);W.kerning&&(A=W.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(A,W.language));for(var ve=0;ve<_e.length;ve+=1){var Re=_e[ve];Z.call(this,Re,O,j,B,W),Re.advanceWidth&&(O+=Re.advanceWidth*he),W.kerning&&ve<_e.length-1&&(O+=(te?this.position.getKerningValue(te,Re.index,_e[ve+1].index):this.getKerningValue(Re,_e[ve+1]))*he),W.letterSpacing?O+=W.letterSpacing*B:W.tracking&&(O+=W.tracking/1e3*B)}return O},Qo.prototype.getPath=function(A,O,j,B,W){var Z=new X;return this.forEachGlyph(A,O,j,B,W,function(te,he,_e,ve){te=te.getPath(he,_e,ve,W,this),Z.extend(te)}),Z},Qo.prototype.getPaths=function(A,O,j,B,W){var Z=[];return this.forEachGlyph(A,O,j,B,W,function(te,he,_e,ve){te=te.getPath(he,_e,ve,W,this),Z.push(te)}),Z},Qo.prototype.getAdvanceWidth=function(A,O,j){return this.forEachGlyph(A,0,0,O,j,function(){})},Qo.prototype.draw=function(A,O,j,B,W,Z){this.getPath(O,j,B,W,Z).draw(A)},Qo.prototype.drawPoints=function(A,O,j,B,W,Z){this.forEachGlyph(O,j,B,W,Z,function(te,he,_e,ve){te.drawPoints(A,he,_e,ve)})},Qo.prototype.drawMetrics=function(A,O,j,B,W,Z){this.forEachGlyph(O,j,B,W,Z,function(te,he,_e,ve){te.drawMetrics(A,he,_e,ve)})},Qo.prototype.getEnglishName=function(A){if(A=this.names[A],A)return A.en},Qo.prototype.validate=function(){var A=this;function O(j){j=A.getEnglishName(j),j&&j.trim().length}O("fontFamily"),O("weightName"),O("manufacturer"),O("copyright"),O("version"),this.unitsPerEm},Qo.prototype.toTables=function(){return fEt.fontToTable(this)},Qo.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Qo.prototype.toArrayBuffer=function(){for(var A=this.toTables().encode(),O=new ArrayBuffer(A.length),j=new Uint8Array(O),B=0;B<A.length;B++)j[B]=A[B];return O},Qo.prototype.download=function(A){var O=this.getEnglishName("fontFamily"),j=this.getEnglishName("fontSubfamily"),B=(A=A||O.replace(/\s/g,"")+"-"+j+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,B.byteLength,function(W){W.root.getFile(A,{create:!0},function(Z){Z.createWriter(function(te){var he=new DataView(B),he=new Blob([he],{type:"font/opentype"});te.write(he),te.addEventListener("writeend",function(){location.href=Z.toURL()},!1)})})},function(W){throw new Error(W.name+": "+W.message)})):(O=o("fs"),j=function(W){for(var Z=new a(W.byteLength),te=new Uint8Array(W),he=0;he<Z.length;++he)Z[he]=te[he];return Z}(B),O.writeFileSync(A,j))},Qo.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Qo.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Qo.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var SEt={make:function(A,O){var j=new We.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:A.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:A.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*A.axes.length}]);j.offsetToData=j.sizeOf();for(var B,W,Z,te=0;te<A.axes.length;te++)j.fields=j.fields.concat((B=te,W=A.axes[te],Z=O,Z=FAe(W.name,O),[{name:"tag_"+B,type:"TAG",value:W.tag},{name:"minValue_"+B,type:"FIXED",value:W.minValue<<16},{name:"defaultValue_"+B,type:"FIXED",value:W.defaultValue<<16},{name:"maxValue_"+B,type:"FIXED",value:W.maxValue<<16},{name:"flags_"+B,type:"USHORT",value:0},{name:"nameID_"+B,type:"USHORT",value:Z}]));for(var he=0;he<A.instances.length;he++)j.fields=j.fields.concat(function(_e,ve,Re,qe){for(var Ue=[{name:"nameID_"+_e,type:"USHORT",value:FAe(ve.name,qe)},{name:"flags_"+_e,type:"USHORT",value:0}],Ae=0;Ae<Re.length;++Ae){var ht=Re[Ae].tag;Ue.push({name:"axis_"+_e+" "+ht,type:"FIXED",value:ve.coordinates[ht]<<16})}return Ue}(he,A.instances[he],A.axes,O));return j},parse:function(A,O,j){for(var B,W,Z,te,he=new Ge.Parser(A,O),_e=he.parseULong(),ve=(M.argument(_e===65536,"Unsupported fvar table version."),he.parseOffset16()),Re=(he.skip("uShort",1),he.parseUShort()),qe=he.parseUShort(),Ue=he.parseUShort(),Ae=he.parseUShort(),ht=[],Xe=0;Xe<Re;Xe++)ht.push((B=A,W=O+ve+Xe*qe,Z=j,te={},B=new Ge.Parser(B,W),te.tag=B.parseTag(),te.minValue=B.parseFixed(),te.defaultValue=B.parseFixed(),te.maxValue=B.parseFixed(),B.skip("uShort",1),te.name=Z[B.parseUShort()]||{},te));for(var ot=[],He=O+ve+Re*qe,Ye=0;Ye<Ue;Ye++)ot.push(function(br,nn,Sr,Ar){var wn={},mi=new Ge.Parser(br,nn);wn.name=Ar[mi.parseUShort()]||{},mi.skip("uShort",1),wn.coordinates={};for(var hs=0;hs<Sr.length;++hs)wn.coordinates[Sr[hs].tag]=mi.parseFixed();return wn}(A,He+Ye*Ae,ht,j));return{axes:ht,instances:ot}}},hh=new Array(10);hh[1]=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{posFormat:1,coverage:this.parsePointer(Be.coverage),value:this.parseValueRecord()}:O===2?{posFormat:2,coverage:this.parsePointer(Be.coverage),values:this.parseValueRecordList()}:void M.assert(!1,"0x"+A.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},hh[2]=function(){var A,O,j,B,Z=this.offset+this.relativeOffset,W=this.parseUShort(),Z=(M.assert(W===1||W===2,"0x"+Z.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Be.coverage)),te=this.parseUShort(),he=this.parseUShort();return W===1?{posFormat:W,coverage:Z,valueFormat1:te,valueFormat2:he,pairSets:this.parseList(Be.pointer(Be.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(he)}})))}:W===2?(A=this.parsePointer(Be.classDef),O=this.parsePointer(Be.classDef),j=this.parseUShort(),B=this.parseUShort(),{posFormat:W,coverage:Z,valueFormat1:te,valueFormat2:he,classDef1:A,classDef2:O,class1Count:j,class2Count:B,classRecords:this.parseList(j,Be.list(B,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(he)}}))}):void 0},hh[3]=function(){return{error:"GPOS Lookup 3 not supported"}},hh[4]=function(){return{error:"GPOS Lookup 4 not supported"}},hh[5]=function(){return{error:"GPOS Lookup 5 not supported"}},hh[6]=function(){return{error:"GPOS Lookup 6 not supported"}},hh[7]=function(){return{error:"GPOS Lookup 7 not supported"}},hh[8]=function(){return{error:"GPOS Lookup 8 not supported"}},hh[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var CEt=new Array(10),EEt={parse:function(A,O){return O=(A=new Be(A,O=O||0)).parseVersion(1),M.argument(O===1||O===1.1,"Unsupported GPOS table version "+O),O===1?{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(hh)}:{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(hh),variations:A.parseFeatureVariationsList()}},make:function(A){return new We.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(A.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(A.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(A.lookups,CEt)}])}},TEt={parse:function(A,O){if(A=new Ge.Parser(A,O),(O=A.parseUShort())===0){var j=A,B={},qe=(j.skip("uShort"),j.parseUShort()),W=(M.argument(qe===0,"Unsupported kern sub-table version."),j.skip("uShort",2),j.parseUShort());j.skip("uShort",3);for(var Z=0;Z<W;Z+=1){var te=j.parseUShort(),he=j.parseUShort(),_e=j.parseShort();B[te+","+he]=_e}return B}if(O!==1)throw new Error("Unsupported kern table version ("+O+").");var ve=A,Re={},qe=(ve.skip("uShort"),1<ve.parseULong()&&console.warn("Only the first kern subtable is supported."),ve.skip("uLong"),255&ve.parseUShort());if(ve.skip("uShort"),qe==0){var Ue=ve.parseUShort();ve.skip("uShort",3);for(var Ae=0;Ae<Ue;Ae+=1){var ht=ve.parseUShort(),Xe=ve.parseUShort(),ot=ve.parseShort();Re[ht+","+Xe]=ot}}return Re}},AEt={parse:function(A,O,j,B){for(var W=new Ge.Parser(A,O),Z=B?W.parseUShort:W.parseULong,te=[],he=0;he<j+1;he+=1){var _e=Z.call(W);B&&(_e*=2),te.push(_e)}return te}};function kEt(A,O){o("fs").readFile(A,function(j,B){if(j)return O(j.message);O(null,uAe(B))})}function IEt(A,O){var j=new XMLHttpRequest;j.open("get",A,!0),j.responseType="arraybuffer",j.onload=function(){return j.response?O(null,j.response):O("Font could not be loaded: "+j.statusText)},j.onerror=function(){O("Font could not be loaded")},j.send()}function OAe(A,O){for(var j=[],B=12,W=0;W<O;W+=1){var Z=Ge.getTag(A,B),te=Ge.getULong(A,B+4),he=Ge.getULong(A,B+8),_e=Ge.getULong(A,B+12);j.push({tag:Z,checksum:te,offset:he,length:_e,compression:!1}),B+=16}return j}function Ws(j,O){if(O.compression!=="WOFF")return{data:j,offset:O.offset};var j=new Uint8Array(j.buffer,O.offset+2,O.compressedLength-2),B=new Uint8Array(O.length);if(G(j,B),B.byteLength!==O.length)throw new Error("Decompression error: "+O.tag+" decompressed length doesn't match recorded length");return{data:new DataView(B.buffer,0),offset:0}}function nne(Ye){var O,j,B,W,Z,te,he,_e,ve,Re,qe,Ue,Ae,ht,Xe=new Qo({empty:!0}),ot=new DataView(Ye,0),He=[],Ye=Ge.getTag(ot,0);if(Ye==="\0\0\0"||Ye==="true"||Ye==="typ1")Xe.outlinesFormat="truetype",He=OAe(ot,B=Ge.getUShort(ot,4));else if(Ye==="OTTO")Xe.outlinesFormat="cff",He=OAe(ot,B=Ge.getUShort(ot,4));else{if(Ye!=="wOFF")throw new Error("Unsupported OpenType signature "+Ye);var br=Ge.getTag(ot,4);if(br==="\0\0\0")Xe.outlinesFormat="truetype";else{if(br!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ye);Xe.outlinesFormat="cff"}He=function(Si,Do){for(var tu=[],rs=44,El=0;El<Do;El+=1){var Ci=Ge.getTag(Si,rs),ja=Ge.getULong(Si,rs+4),xR=Ge.getULong(Si,rs+8),Tk=Ge.getULong(Si,rs+12),RAe=void 0,RAe=xR<Tk&&"WOFF";tu.push({tag:Ci,offset:ja,compression:RAe,compressedLength:xR,length:Tk}),rs+=20}return tu}(ot,B=Ge.getUShort(ot,12))}for(var nn=0;nn<B;nn+=1){var Sr=He[nn],Ar=void 0;switch(Sr.tag){case"cmap":Ar=Ws(ot,Sr),Xe.tables.cmap=de.parse(Ar.data,Ar.offset),Xe.encoding=new Qe(Xe.tables.cmap);break;case"cvt ":Ar=Ws(ot,Sr),ht=new Ge.Parser(Ar.data,Ar.offset),Xe.tables.cvt=ht.parseShortList(Sr.length/2);break;case"fvar":Z=Sr;break;case"fpgm":Ar=Ws(ot,Sr),ht=new Ge.Parser(Ar.data,Ar.offset),Xe.tables.fpgm=ht.parseByteList(Sr.length);break;case"head":Ar=Ws(ot,Sr),Xe.tables.head=mR.parse(Ar.data,Ar.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,O=Xe.tables.head.indexToLocFormat;break;case"hhea":Ar=Ws(ot,Sr),Xe.tables.hhea=ke.parse(Ar.data,Ar.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":ve=Sr;break;case"ltag":Ar=Ws(ot,Sr),j=Ht.parse(Ar.data,Ar.offset);break;case"maxp":Ar=Ws(ot,Sr),Xe.tables.maxp=xt.parse(Ar.data,Ar.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Ue=Sr;break;case"OS/2":Ar=Ws(ot,Sr),Xe.tables.os2=La.parse(Ar.data,Ar.offset);break;case"post":Ar=Ws(ot,Sr),Xe.tables.post=JTe.parse(Ar.data,Ar.offset),Xe.glyphNames=new Nt(Xe.tables.post);break;case"prep":Ar=Ws(ot,Sr),ht=new Ge.Parser(Ar.data,Ar.offset),Xe.tables.prep=ht.parseByteList(Sr.length);break;case"glyf":te=Sr;break;case"loca":qe=Sr;break;case"CFF ":W=Sr;break;case"kern":Re=Sr;break;case"GPOS":he=Sr;break;case"GSUB":_e=Sr;break;case"meta":Ae=Sr}}if(br=Ws(ot,Ue),Xe.tables.name=Yf.parse(br.data,br.offset,j),Xe.names=Xe.tables.name,te&&qe)Ye=O===0,br=Ws(ot,qe),br=AEt.parse(br.data,br.offset,Xe.numGlyphs,Ye),Ye=Ws(ot,te),Xe.glyphs=dAe.parse(Ye.data,Ye.offset,br,Xe);else{if(!W)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ye=Ws(ot,W),hR.parse(Ye.data,Ye.offset,Xe)}for(var br=Ws(ot,ve),wn=(Ct.parse(br.data,br.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),mi=wn.tables.cmap.glyphIndexMap,hs=Object.keys(mi),qs=0;qs<hs.length;qs+=1){var Jl,eu=hs[qs],mh=mi[eu];(Jl=wn.glyphs.get(mh)).addUnicode(parseInt(eu))}for(var Jo=0;Jo<wn.glyphs.length;Jo+=1)Jl=wn.glyphs.get(Jo),wn.cffEncoding?wn.isCIDFont?Jl.name="gid"+Jo:Jl.name=wn.cffEncoding.charset[Jo]:wn.glyphNames.names&&(Jl.name=wn.glyphNames.glyphIndexToName(Jo));return Re?(Ye=Ws(ot,Re),Xe.kerningPairs=TEt.parse(Ye.data,Ye.offset)):Xe.kerningPairs={},he&&(br=Ws(ot,he),Xe.tables.gpos=EEt.parse(br.data,br.offset),Xe.position.init()),_e&&(Ye=Ws(ot,_e),Xe.tables.gsub=eAe.parse(Ye.data,Ye.offset)),Z&&(br=Ws(ot,Z),Xe.tables.fvar=SEt.parse(br.data,br.offset,Xe.names)),Ae&&(Ye=Ws(ot,Ae),Xe.tables.meta=tAe.parse(Ye.data,Ye.offset),Xe.metas=Xe.tables.meta),Xe}c.Font=Qo,c.Glyph=Ut,c.Path=X,c.BoundingBox=H,c._parse=Ge,c.parse=nne,c.load=function(A,O){(typeof window>"u"?kEt:IEt)(A,function(j,B){if(j)return O(j);var W;try{W=nne(B)}catch(Z){return O(Z,null)}return O(null,W)})},c.loadSync=function(A){return nne(uAe(o("fs").readFileSync(A)))},Object.defineProperty(c,"__esModule",{value:!0})},typeof s=="object"&&i!==void 0?u(s):typeof t=="function"&&t.amd?t(["exports"],u):u(l.opentype={})}).call(this,o("buffer").Buffer)},{buffer:4,fs:2}],255:[function(o,i,s){(function(a){function l(f,d){for(var p=0,h=f.length-1;0<=h;h--){var m=f[h];m==="."?f.splice(h,1):m===".."?(f.splice(h,1),p++):p&&(f.splice(h,1),p--)}if(d)for(;p--;)f.unshift("..");return f}function u(f,d){if(f.filter)return f.filter(d);for(var p=[],h=0;h<f.length;h++)d(f[h],h,f)&&p.push(f[h]);return p}s.resolve=function(){for(var f="",d=!1,p=arguments.length-1;-1<=p&&!d;p--){var h=0<=p?arguments[p]:a.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");h&&(f=h+"/"+f,d=h.charAt(0)==="/")}return(d?"/":"")+(f=l(u(f.split("/"),function(m){return!!m}),!d).join("/"))||"."},s.normalize=function(f){var d=s.isAbsolute(f),p=c(f,-1)==="/";return(f=(f=l(u(f.split("/"),function(h){return!!h}),!d).join("/"))||d?f:".")&&p&&(f+="/"),(d?"/":"")+f},s.isAbsolute=function(f){return f.charAt(0)==="/"},s.join=function(){var f=Array.prototype.slice.call(arguments,0);return s.normalize(u(f,function(d,p){if(typeof d!="string")throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))},s.relative=function(f,d){function p(v){for(var w=0;w<v.length&&v[w]==="";w++);for(var _=v.length-1;0<=_&&v[_]==="";_--);return _<w?[]:v.slice(w,_-w+1)}f=s.resolve(f).substr(1),d=s.resolve(d).substr(1);for(var h=p(f.split("/")),m=p(d.split("/")),g=Math.min(h.length,m.length),y=g,b=0;b<g;b++)if(h[b]!==m[b]){y=b;break}for(var x=[],b=y;b<h.length;b++)x.push("..");return(x=x.concat(m.slice(y))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var d=f.charCodeAt(0)===47,p=-1,h=!0,m=f.length-1;1<=m;--m)if(f.charCodeAt(m)===47){if(!h){p=m;break}}else h=!1;return p===-1?d?"/":".":d&&p===1?"/":f.slice(0,p)},s.basename=function(f,d){return f=function(p){typeof p!="string"&&(p+="");for(var h=0,m=-1,g=!0,y=p.length-1;0<=y;--y)if(p.charCodeAt(y)===47){if(!g){h=y+1;break}}else m===-1&&(g=!1,m=y+1);return m===-1?"":p.slice(h,m)}(f),f=d&&f.substr(-1*d.length)===d?f.substr(0,f.length-d.length):f},s.extname=function(f){typeof f!="string"&&(f+="");for(var d=-1,p=0,h=-1,m=!0,g=0,y=f.length-1;0<=y;--y){var b=f.charCodeAt(y);if(b===47){if(m)continue;p=y+1;break}h===-1&&(m=!1,h=y+1),b===46?d===-1?d=y:g!==1&&(g=1):d!==-1&&(g=-1)}return d===-1||h===-1||g===0||g===1&&d===h-1&&d===p+1?"":f.slice(d,h)};var c="ab".substr(-1)==="b"?function(f,d,p){return f.substr(d,p)}:function(f,d,p){return d<0&&(d=f.length+d),f.substr(d,p)}}).call(this,o("_process"))},{_process:256}],256:[function(o,u,s){var a,l,u=u.exports={};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:c}catch{a=c}try{l=typeof clearTimeout=="function"?clearTimeout:f}catch{l=f}function d(w){if(a===setTimeout)return setTimeout(w,0);if((a===c||!a)&&setTimeout)return(a=setTimeout)(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this,w,0)}}}var p,h=[],m=!1,g=-1;function y(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&b())}function b(){if(!m){for(var w=d(y),_=(m=!0,h.length);_;){for(p=h,h=[];++g<_;)p&&p[g].run();g=-1,_=h.length}p=null,m=!1,function(S){if(l===clearTimeout)return clearTimeout(S);if((l===f||!l)&&clearTimeout)return(l=clearTimeout)(S);try{l(S)}catch{try{return l.call(null,S)}catch{return l.call(this,S)}}}(w)}}function x(w,_){this.fun=w,this.array=_}function v(){}u.nextTick=function(w){var _=new Array(arguments.length-1);if(1<arguments.length)for(var S=1;S<arguments.length;S++)_[S-1]=arguments[S];h.push(new x(w,_)),h.length!==1||m||d(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=v,u.addListener=v,u.once=v,u.off=v,u.removeListener=v,u.removeAllListeners=v,u.emit=v,u.prependListener=v,u.prependOnceListener=v,u.listeners=function(w){return[]},u.binding=function(w){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(w){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],257:[function(o,i,s){i=function(a){"use strict";var l,u=Object.prototype,c=u.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},f=C.iterator||"@@iterator",d=C.asyncIterator||"@@asyncIterator",p=C.toStringTag||"@@toStringTag";function h(V,z,U,q){var X,fe,$,M,z=z&&z.prototype instanceof w?z:w,z=Object.create(z.prototype),q=new L(q||[]);return z._invoke=(X=V,fe=U,$=q,M=g,function(ee,ae){if(M===b)throw new Error("Generator is already running");if(M===x){if(ee==="throw")throw ae;return R()}for($.method=ee,$.arg=ae;;){var Q=$.delegate;if(Q&&(Q=function le(ie,K){var ge=ie.iterator[K.method];if(ge===l){if(K.delegate=null,K.method==="throw"){if(ie.iterator.return&&(K.method="return",K.arg=l,le(ie,K),K.method==="throw"))return v;K.method="throw",K.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}if(ge=m(ge,ie.iterator,K.arg),ge.type==="throw")return K.method="throw",K.arg=ge.arg,K.delegate=null,v;if(ge=ge.arg,!ge)return K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,v;{if(!ge.done)return ge;K[ie.resultName]=ge.value,K.next=ie.nextLoc,K.method!=="return"&&(K.method="next",K.arg=l)}return K.delegate=null,v}(Q,$),Q)){if(Q===v)continue;return Q}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(M===g)throw M=x,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);if(M=b,Q=m(X,fe,$),Q.type==="normal"){if(M=$.done?x:y,Q.arg!==v)return{value:Q.arg,done:$.done}}else Q.type==="throw"&&(M=x,$.method="throw",$.arg=Q.arg)}}),z}function m(V,G,U){try{return{type:"normal",arg:V.call(G,U)}}catch(H){return{type:"throw",arg:H}}}a.wrap=h;var g="suspendedStart",y="suspendedYield",b="executing",x="completed",v={};function w(){}function _(){}function S(){}var C={},E=(C[f]=function(){return this},Object.getPrototypeOf),E=E&&E(E(P([]))),T=(E&&E!==u&&c.call(E,f)&&(C=E),S.prototype=w.prototype=Object.create(C));function I(V){["next","throw","return"].forEach(function(G){V[G]=function(U){return this._invoke(G,U)}})}function k(V){var G;this._invoke=function(U,H){function X(){return new Promise(function(fe,$){(function M(le,q,ee,ae){var Q,le=m(V[le],V,q);if(le.type!=="throw")return(q=(Q=le.arg).value)&&typeof q=="object"&&c.call(q,"__await")?Promise.resolve(q.__await).then(function(ie){M("next",ie,ee,ae)},function(ie){M("throw",ie,ee,ae)}):Promise.resolve(q).then(function(ie){Q.value=ie,ee(Q)},function(ie){return M("throw",ie,ee,ae)});ae(le.arg)})(U,H,fe,$)})}return G=G?G.then(X,X):X()}}function F(V){var G={tryLoc:V[0]};1 in V&&(G.catchLoc=V[1]),2 in V&&(G.finallyLoc=V[2],G.afterLoc=V[3]),this.tryEntries.push(G)}function D(V){var G=V.completion||{};G.type="normal",delete G.arg,V.completion=G}function L(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(F,this),this.reset(!0)}function P(V){if(V){var G,U=V[f];if(U)return U.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length))return G=-1,(U=function H(){for(;++G<V.length;)if(c.call(V,G))return H.value=V[G],H.done=!1,H;return H.value=l,H.done=!0,H}).next=U}return{next:R}}function R(){return{value:l,done:!0}}return(_.prototype=T.constructor=S).constructor=_,S[p]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(V){return V=typeof V=="function"&&V.constructor,!!V&&(V===_||(V.displayName||V.name)==="GeneratorFunction")},a.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,S):(V.__proto__=S,p in V||(V[p]="GeneratorFunction")),V.prototype=Object.create(T),V},a.awrap=function(V){return{__await:V}},I(k.prototype),k.prototype[d]=function(){return this},a.AsyncIterator=k,a.async=function(V,G,U,H){var X=new k(h(V,G,U,H));return a.isGeneratorFunction(G)?X:X.next().then(function(fe){return fe.done?fe.value:X.next()})},I(T),T[p]="Generator",T[f]=function(){return this},T.toString=function(){return"[object Generator]"},a.keys=function(V){var G,U=[];for(G in V)U.push(G);return U.reverse(),function H(){for(;U.length;){var X=U.pop();if(X in V)return H.value=X,H.done=!1,H}return H.done=!0,H}},a.values=P,L.prototype={constructor:L,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(D),!V)for(var G in this)G.charAt(0)==="t"&&c.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=l)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var G=this;function U(z,q){return fe.type="throw",fe.arg=V,G.next=z,q&&(G.method="next",G.arg=l),!!q}for(var H=this.tryEntries.length-1;0<=H;--H){var X=this.tryEntries[H],fe=X.completion;if(X.tryLoc==="root")return U("end");if(X.tryLoc<=this.prev){var $=c.call(X,"catchLoc"),M=c.call(X,"finallyLoc");if($&&M){if(this.prev<X.catchLoc)return U(X.catchLoc,!0);if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else if($){if(this.prev<X.catchLoc)return U(X.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return U(X.finallyLoc)}}}},abrupt:function(V,G){for(var U=this.tryEntries.length-1;0<=U;--U){var H=this.tryEntries[U];if(H.tryLoc<=this.prev&&c.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var X=H;break}}var fe=(X=X&&(V==="break"||V==="continue")&&X.tryLoc<=G&&G<=X.finallyLoc?null:X)?X.completion:{};return fe.type=V,fe.arg=G,X?(this.method="next",this.next=X.finallyLoc,v):this.complete(fe)},complete:function(V,G){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&G&&(this.next=G),v},finish:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U=this.tryEntries[G];if(U.finallyLoc===V)return this.complete(U.completion,U.afterLoc),D(U),v}},catch:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U,H,X=this.tryEntries[G];if(X.tryLoc===V)return(U=X.completion).type==="throw"&&(H=U.arg,D(X)),H}throw new Error("illegal catch attempt")},delegateYield:function(V,G,U){return this.delegate={iterator:P(V),resultName:G,nextLoc:U},this.method==="next"&&(this.arg=l),v}},a}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(o,i,s){(function(a){"use strict";var l,u,c,f,d,p,h,m,g,y;function b(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function x(D){return D=typeof D!="string"?String(D):D}function v(D){var L={next:function(){var P=D.shift();return{done:P===void 0,value:P}}};return u&&(L[Symbol.iterator]=function(){return L}),L}function w(D){this.map={},D instanceof w?D.forEach(function(L,P){this.append(P,L)},this):Array.isArray(D)?D.forEach(function(L){this.append(L[0],L[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(L){this.append(L,D[L])},this)}function _(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function S(D){return new Promise(function(L,P){D.onload=function(){L(D.result)},D.onerror=function(){P(D.error)}})}function C(D){var L=new FileReader,P=S(L);return L.readAsArrayBuffer(D),P}function E(D){var L;return D.slice?D.slice(0):((L=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),L.buffer)}function T(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(c&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(f&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(l&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(d&&c&&h(D))this._bodyArrayBuffer=E(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d||!ArrayBuffer.prototype.isPrototypeOf(D)&&!m(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=E(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var D=_(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var D,L,P=_(this);if(P)return P;if(this._bodyBlob)return P=this._bodyBlob,D=new FileReader,L=S(D),D.readAsText(P),L;if(this._bodyArrayBuffer)return Promise.resolve(function(R){for(var V=new Uint8Array(R),G=new Array(V.length),U=0;U<V.length;U++)G[U]=String.fromCharCode(V[U]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function I(D,L){var P,R=(L=L||{}).body;if(D instanceof I){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,L.headers||(this.headers=new w(D.headers)),this.method=D.method,this.mode=D.mode,R||D._bodyInit==null||(R=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=L.credentials||this.credentials||"omit",!L.headers&&this.headers||(this.headers=new w(L.headers)),this.method=(D=L.method||this.method||"GET",P=D.toUpperCase(),-1<g.indexOf(P)?P:D),this.mode=L.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(R)}function k(D){var L=new FormData;return D.trim().split("&").forEach(function(P){var R;P&&(R=(P=P.split("=")).shift().replace(/\+/g," "),P=P.join("=").replace(/\+/g," "),L.append(decodeURIComponent(R),decodeURIComponent(P)))}),L}function F(D,L){L=L||{},this.type="default",this.status=L.status===void 0?200:L.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in L?L.statusText:"OK",this.headers=new w(L.headers),this.url=L.url||"",this._initBody(D)}a.fetch||(l="URLSearchParams"in a,u="Symbol"in a&&"iterator"in Symbol,c="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in a,(d="ArrayBuffer"in a)&&(p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=function(D){return D&&DataView.prototype.isPrototypeOf(D)},m=ArrayBuffer.isView||function(D){return D&&-1<p.indexOf(Object.prototype.toString.call(D))}),w.prototype.append=function(D,L){D=b(D),L=x(L);var P=this.map[D];this.map[D]=P?P+","+L:L},w.prototype.delete=function(D){delete this.map[b(D)]},w.prototype.get=function(D){return D=b(D),this.has(D)?this.map[D]:null},w.prototype.has=function(D){return this.map.hasOwnProperty(b(D))},w.prototype.set=function(D,L){this.map[b(D)]=x(L)},w.prototype.forEach=function(D,L){for(var P in this.map)this.map.hasOwnProperty(P)&&D.call(L,this.map[P],P,this)},w.prototype.keys=function(){var D=[];return this.forEach(function(L,P){D.push(P)}),v(D)},w.prototype.values=function(){var D=[];return this.forEach(function(L){D.push(L)}),v(D)},w.prototype.entries=function(){var D=[];return this.forEach(function(L,P){D.push([P,L])}),v(D)},u&&(w.prototype[Symbol.iterator]=w.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},T.call(I.prototype),T.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},F.error=function(){var D=new F(null,{status:0,statusText:""});return D.type="error",D},y=[301,302,303,307,308],F.redirect=function(D,L){if(y.indexOf(L)===-1)throw new RangeError("Invalid status code");return new F(null,{status:L,headers:{location:D}})},a.Headers=w,a.Request=I,a.Response=F,a.fetch=function(D,L){return new Promise(function(P,R){var V=new I(D,L),G=new XMLHttpRequest;G.onload=function(){var U,H={status:G.status,statusText:G.statusText,headers:(H=G.getAllResponseHeaders()||"",U=new w,H.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function($){var $=$.split(":"),M=$.shift().trim();M&&($=$.join(":").trim(),U.append(M,$))}),U)},X=(H.url="responseURL"in G?G.responseURL:H.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);P(new F(X,H))},G.onerror=function(){R(new TypeError("Network request failed"))},G.ontimeout=function(){R(new TypeError("Network request failed"))},G.open(V.method,V.url,!0),V.credentials==="include"?G.withCredentials=!0:V.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&c&&(G.responseType="blob"),V.headers.forEach(function(U,H){G.setRequestHeader(H,U)}),G.send(V._bodyInit===void 0?null:V._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(o,i,s){"use strict";o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l=c(o("../core/main")),u=c(o("../color/color_conversion"));function c(p){return p&&p.__esModule?p:{default:p}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],d=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];l.default.prototype._rgbColorName=function(g){var h,m,g=u.default._rgbaToHSBA(g),y=[(a=g)[0],g[1],g[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(g=y[0].toString().split(""))[m=g.length-1]=parseInt(g[m]),g[m]<2.5?g[m]=0:2.5<=g[m]&&g[m]<7.5&&(g[m]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[m]&&(g[m]=0,g[0]=g[0]+1),y[0]=10*g[0]+g[1]):7.5<=g[m]?y[0]=10:y[0]=g[m]),y[2]=y[2]/255;for(var b=y.length-1;1<=b;b--)y[b]<=.25?y[b]=0:.25<y[b]&&y[b]<.75?y[b]=.5:y[b]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var v=0;v<f.length;v++){if(f[v].h===a[0]&&f[v].s===a[1]&&f[v].b===a[2]){h=f[v].name;break}h="white"}}else for(var w=0;w<d.length;w++)if(d[w].h===y[0]&&d[w].s===y[1]&&d[w].b===y[2]){h=d[w].name;break}return h},o=l.default,s.default=o},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o},l="_Description",u="_fallbackDesc",c="_fallbackTable",f="_Label",d="_labelDesc",p="_labelTable";function h(m){if(m==="label"||m==="fallback")throw new Error("description should not be LABEL or FALLBACK");return m.endsWith(".")||m.endsWith(";")||m.endsWith(",")||m.endsWith("?")||m.endsWith("!")||(m+="."),m}a.default.prototype.describe=function(m,g){var y;a.default._validateParameters("describe",arguments),typeof m=="string"&&(y=this.canvas.id,m=h(m),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==m&&(this.descriptions.fallback.innerHTML=m):this._describeHTML("fallback",m),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==m&&(this.descriptions.label.innerHTML=m):this._describeHTML("label",m)))},a.default.prototype.describeElement=function(m,g,y){var b,x;a.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof m=="string"&&(b=this.canvas.id,g=h(g),x=function(v){if(v==="label"||v==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return v.endsWith(".")||v.endsWith(";")||v.endsWith(",")?v=v.replace(/.$/,":"):v.endsWith(":")||(v+=":"),v}(m),m=m.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[m]?this.descriptions.fallbackElements[m].innerHTML!==x&&(this.descriptions.fallbackElements[m].innerHTML=x):this._describeElementHTML("fallback",m,x),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[m]?this.descriptions.labelElements[m].innerHTML!==x&&(this.descriptions.labelElements[m].innerHTML=x):this._describeElementHTML("label",m,x)))},a.default.prototype._describeHTML=function(m,g){var y,b=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(b+l))?this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+u,'"></p>')):(y='<div id="'.concat(b).concat(l,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(u,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(b)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(u)),this.descriptions.fallback.innerHTML=g):m==="label"&&(this.dummyDOM.querySelector("#".concat(b+f))?this.dummyDOM.querySelector("#".concat(b+p))&&this.dummyDOM.querySelector("#".concat(b+p)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(d,'"></p>')):(y='<div id="'.concat(b).concat(f,'" class="p5Label"><p id="').concat(b).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+d),this.descriptions.label.innerHTML=g)},a.default.prototype._describeElementHTML=function(m,g,y){var b,x=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(x+l))?this.dummyDOM.querySelector("#"+x+c)||this.dummyDOM.querySelector("#"+x+u).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(l,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+g,this.dummyDOM.querySelector("#"+x+c).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=y):m==="label"&&(this.dummyDOM.querySelector("#".concat(x+f))?this.dummyDOM.querySelector("#".concat(x+p))||this.dummyDOM.querySelector("#"+x+d).insertAdjacentHTML("afterend",'<table id="'.concat(x+p,'"></table>')):(b='<div id="'.concat(x).concat(f,'" class="p5Label"><table id="').concat(x).concat(p,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(m=document.createElement("tr")).id=x+"_lte_"+g,this.dummyDOM.querySelector("#"+x+p).appendChild(m),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=y)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateGridOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,h,m){return p="".concat(p," canvas, ").concat(h," by ").concat(m," pixels, contains ").concat(d[0]),p=(d[0]===1?"".concat(p," shape: "):"".concat(p," shapes: ")).concat(d[1]),p}((u=function(d,p){var h,m="",g="",y=0;for(h in p){var b,x=0;for(b in p[h]){var v='<li id="'.concat(d,"shape").concat(y,'">').concat(p[h][b].color," ").concat(h,",");h==="line"?v+=" location = ".concat(p[h][b].pos,", length = ").concat(p[h][b].length," pixels"):(v+=" location = ".concat(p[h][b].pos),h!=="point"&&(v+=", area = ".concat(p[h][b].area," %")),v+="</li>"),m+=v,x++,y++}g=1<x?"".concat(g," ").concat(x," ").concat(h,"s"):"".concat(g," ").concat(x," ").concat(h)}return{numShapes:[y,g],details:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var h,m,g=0,y="",b=Array.from(Array(10),function(){return Array(10)});for(h in p)for(var x in p[h]){var v=void 0;v=h!=="line"?'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][x].color," ").concat(h,"</a>"):'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][x].color," ").concat(h," midpoint</a>"),b[p[h][x].loc.locY][p[h][x].loc.locX]?b[p[h][x].loc.locY][p[h][x].loc.locX]=b[p[h][x].loc.locY][p[h][x].loc.locX]+"  "+v:b[p[h][x].loc.locY][p[h][x].loc.locX]=v,g++}for(m in b){var w,_="<tr>";for(w in b[m])_+="<td>",b[m][w]!==void 0&&(_+=b[m][w]),_+="</td>";y=y+_+"</tr>"}return y}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),f!==l.map.innerHTML&&(l.map.innerHTML=f),u.details!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=u.details),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c){return function(f){if(Array.isArray(f)){for(var d=0,p=new Array(f.length);d<f.length;d++)p[d]=f[d];return p}}(c)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(c,f,d){return f=Math.floor(c[0]/f*10),c=Math.floor(c[1]/d*10),f===10&&(f-=1),c===10&&(c-=1),{locX:f,locY:c}}a.default.prototype.textOutput=function(c){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(c){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(c,f){var d,p,h,m=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),"");f==="Fallback"?(d=m+c,this.dummyDOM.querySelector("#".concat(p=m+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(m,"_Description"))?this.dummyDOM.querySelector("#".concat(m,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(m)).innerHTML='<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(d=m+c+(g=f),this.dummyDOM.querySelector("#".concat(p=m+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(m,"_Label"))?this.dummyDOM.querySelector("#".concat(m,"_Label")):this.dummyDOM.querySelector("#".concat(m))).insertAdjacentHTML("afterend",'<div id="'.concat(p,'"></div>'))),this._accessibleOutputs[d]={},c==="textOutput"?(g="#".concat(m,"gridOutput").concat(g),h='<div id="'.concat(d,'">Text Output<div id="').concat(d,'Summary" aria-label="text output summary"><p id="').concat(d,'_summary"></p><ul id="').concat(d,'_list"></ul></div><table id="').concat(d,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h,this._accessibleOutputs[d].list=this.dummyDOM.querySelector("#".concat(d,"_list"))):c==="gridOutput"&&(g="#".concat(m,"textOutput").concat(g),h='<div id="'.concat(d,'">Grid Output<p id="').concat(d,'_summary" aria-label="grid output summary"><table id="').concat(d,'_map" summary="grid output content"></table><ul id="').concat(d,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h,this._accessibleOutputs[d].map=this.dummyDOM.querySelector("#".concat(d,"_map"))),this._accessibleOutputs[d].shapeDetails=this.dummyDOM.querySelector("#".concat(d,"_shapeDetails")),this._accessibleOutputs[d].summary=this.dummyDOM.querySelector("#".concat(d,"_summary"))},a.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},a.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},a.default.prototype._accsCanvasColors=function(c,f){c==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},a.default.prototype._accsOutput=function(c,f){c==="ellipse"&&f[2]===f[3]?c="circle":c==="rectangle"&&f[2]===f[3]&&(c="square");var d,p,h={},m=!0,g=function(b,x){var v;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(v=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(v=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(v=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(v=(x[0]+x[2])/2,(x[1]+x[3])/2):(v=x[0],x[1]),[v,b]}(c,f);if(c==="line"?(h.color=this.ingredients.colors.stroke,h.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),d=this._getPos(f[0],[1]),p=this._getPos(f[2],[3]),h.loc=u(g,this.width,this.height),h.pos=d===p?"at ".concat(d):"from ".concat(d," to ").concat(p)):(c==="point"?h.color=this.ingredients.colors.stroke:(h.color=this.ingredients.colors.fill,h.area=this._getArea(c,f)),h.pos=this._getPos.apply(this,l(g)),h.loc=u(g,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[h]){for(var y in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][y])===JSON.stringify(h)&&(m=!1);m===!0&&this.ingredients.shapes[c].push(h)}}else this.ingredients.shapes[c]=[h]},a.default.prototype._getPos=function(p,d){var p=new DOMPointReadOnly(p,d),d=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),p=p.matrixTransform(d),d=p.x,p=p.y,h=this.width*this._pixelDensity,m=this.height*this._pixelDensity;return d<.4*h?p<.4*m?"top left":.6*m<p?"bottom left":"mid left":.6*h<d?p<.4*m?"top right":.6*m<p?"bottom right":"mid right":p<.4*m?"top middle":.6*m<p?"bottom middle":"middle"},a.default.prototype._getArea=function(c,f){var d,p,h=0,m=(c==="arc"?(h=(d=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(p=f[0],x=f[1],m=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),v=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),y=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),g=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),p=Math.abs(p*(v-g)+m*(g-x)+y*(x-v))/2,d>Math.PI?h+=p:h-=p)):c==="ellipse"||c==="circle"?h=3.14*f[2]/2*f[3]/2:c==="line"||c==="point"?h=0:c==="quadrilateral"?h=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:c==="rectangle"||c==="square"?h=f[2]*f[3]:c==="triangle"&&(h=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),g=this.height*this._pixelDensity,y=[new DOMPoint(0,0),new DOMPoint(m,0),new DOMPoint(m,g),new DOMPoint(0,g)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=y.map(function(w){return w.matrixTransform(b)}),v=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*h/v)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.concat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateTextOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,h,m){return h="Your output is a, ".concat(h," by ").concat(m," pixels, ").concat(p," canvas containing the following"),h=d===1?"".concat(h," shape:"):"".concat(h," ").concat(d," shapes:"),h}((u=function(d,p){var h,m="",g=0;for(h in p)for(var y in p[h]){var b='<li><a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][y].color," ").concat(h,"</a>");h==="line"?b+=", ".concat(p[h][y].pos,", ").concat(p[h][y].length," pixels long.</li>"):(b+=", at ".concat(p[h][y].pos),h!=="point"&&(b+=", covering ".concat(p[h][y].area,"% of the canvas")),b+=".</li>"),m+=b,g++}return{numShapes:g,listShapes:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var h,m="",g=0;for(h in p)for(var y in p[h]){var b='<tr id="'.concat(d,"shape").concat(g,'"><th>').concat(p[h][y].color," ").concat(h,"</th>");h==="line"?b+="<td>location = ".concat(p[h][y].pos,"</td><td>length = ").concat(p[h][y].length," pixels</td></tr>"):(b+="<td>location = ".concat(p[h][y].pos,"</td>"),h!=="point"&&(b+="<td> area = ".concat(p[h][y].area,"%</td>")),b+="</tr>"),m+=b,g++}return m}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),u.listShapes!==l.list.innerHTML&&(l.list.innerHTML=u.listShapes),f!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=f),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(o,i,s){"use strict";var a=(a=o("./core/main"))&&a.__esModule?a:{default:a};o("./core/constants"),o("./core/environment"),o("./core/friendly_errors/stacktrace"),o("./core/friendly_errors/validate_params"),o("./core/friendly_errors/file_errors"),o("./core/friendly_errors/fes_core"),o("./core/friendly_errors/sketch_reader"),o("./core/helpers"),o("./core/legacy"),o("./core/preload"),o("./core/p5.Element"),o("./core/p5.Graphics"),o("./core/p5.Renderer"),o("./core/p5.Renderer2D"),o("./core/rendering"),o("./core/shim"),o("./core/structure"),o("./core/transform"),o("./core/shape/2d_primitives"),o("./core/shape/attributes"),o("./core/shape/curves"),o("./core/shape/vertex"),o("./accessibility/outputs"),o("./accessibility/textOutput"),o("./accessibility/gridOutput"),o("./accessibility/color_namer"),o("./color/color_conversion"),o("./color/creating_reading"),o("./color/p5.Color"),o("./color/setting"),o("./data/p5.TypedDict"),o("./data/local_storage.js"),o("./dom/dom"),o("./accessibility/describe"),o("./events/acceleration"),o("./events/keyboard"),o("./events/mouse"),o("./events/touch"),o("./image/filters"),o("./image/image"),o("./image/loading_displaying"),o("./image/p5.Image"),o("./image/pixels"),o("./io/files"),o("./io/p5.Table"),o("./io/p5.TableRow"),o("./io/p5.XML"),o("./math/calculation"),o("./math/math"),o("./math/noise"),o("./math/p5.Vector"),o("./math/random"),o("./math/trigonometry"),o("./typography/attributes"),o("./typography/loading_displaying"),o("./typography/p5.Font"),o("./utilities/array_functions"),o("./utilities/conversion"),o("./utilities/string_functions"),o("./utilities/time_date"),o("./webgl/3d_primitives"),o("./webgl/interaction"),o("./webgl/light"),o("./webgl/loading"),o("./webgl/material"),o("./webgl/p5.Camera"),o("./webgl/p5.DataArray"),o("./webgl/p5.Geometry"),o("./webgl/p5.Matrix"),o("./webgl/p5.RendererGL.Immediate"),o("./webgl/p5.RendererGL"),o("./webgl/p5.RendererGL.Retained"),o("./webgl/p5.Framebuffer"),o("./webgl/p5.Shader"),o("./webgl/p5.RenderBuffer"),o("./webgl/p5.Texture"),o("./webgl/text"),o("./core/init"),i.exports=a.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.ColorConversion={_hsbaToHSLA:function(a){var l=a[0],u=a[1],c=a[2],f=(2-u)*c/2;return f!=0&&(f==1?u=0:f<.5?u/=2-u:u=u*c/(2-2*f)),[l,u,f,a[3]]},_hsbaToRGBA:function(a){var l,u,c,f,d,p=6*a[0],h=a[1],m=a[2];return h===0?[m,m,m,a[3]]:(u=m*(1-h),c=m*(1-h*(p-(l=Math.floor(p)))),h=m*(1-h*(1+l-p)),p=l===1?(f=c,d=m,u):l===2?(f=u,d=m,h):l===3?(f=u,d=c,m):l===4?(f=h,d=u,m):l===5?(f=m,d=u,c):(f=m,d=h,u),[f,d,p,a[3]])},_hslaToHSBA:function(a){var l=a[0],u=a[1],c=a[2],f=c<.5?(1+u)*c:c+u-c*u;return[l,u=2*(f-c)/f,f,a[3]]},_hslaToRGBA:function(a){var l,u=6*a[0],c=a[1],f=a[2];return c===0?[f,f,f,a[3]]:[(l=function(d,p,h){return d<0?d+=6:6<=d&&(d-=6),d<1?p+(h-p)*d:d<3?h:d<4?p+(h-p)*(4-d):p})(2+u,c=2*f-(f=f<.5?(1+c)*f:f+c-f*c),f),l(u,c,f),l(u-2,c,f),a[3]]},_rgbaToHSBA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),h=p-Math.min(c,f,d);return h==0?u=l=0:(u=h/p,c===p?l=(f-d)/h:f===p?l=2+(d-c)/h:d===p&&(l=4+(c-f)/h),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,p,a[3]]},_rgbaToHSLA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),m=Math.min(c,f,d),h=p+m,m=p-m;return m==0?u=l=0:(u=h<1?m/h:m/(2-h),c===p?l=(f-d)/m:f===p?l=2+(d-c)/m:d===p&&(l=4+(c-f)/m),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,h/2,a[3]]}},o=o.default.ColorConversion,s.default=o},{"../core/main":280}],266:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.alpha=function(p){return u.default._validateParameters("alpha",arguments),this.color(p)._getAlpha()},u.default.prototype.blue=function(p){return u.default._validateParameters("blue",arguments),this.color(p)._getBlue()},u.default.prototype.brightness=function(p){return u.default._validateParameters("brightness",arguments),this.color(p)._getBrightness()},u.default.prototype.color=function(){for(var p,h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return u.default._validateParameters("color",m),m[0]instanceof u.default.Color?m[0]:(p=Array.isArray(m[0])?m[0]:m,new u.default.Color(this,p))},u.default.prototype.green=function(p){return u.default._validateParameters("green",arguments),this.color(p)._getGreen()},u.default.prototype.hue=function(p){return u.default._validateParameters("hue",arguments),this.color(p)._getHue()},u.default.prototype.lerpColor=function(p,h,m){u.default._validateParameters("lerpColor",arguments);var g,y,b,x=this._colorMode,v=this._colorMaxes;if(x===c.RGB)y=p.levels.map(function(w){return w/255}),b=h.levels.map(function(w){return w/255});else if(x===c.HSB)p._getBrightness(),h._getBrightness(),y=p.hsba,b=h.hsba;else{if(x!==c.HSL)throw new Error("".concat(x," cannot be used for interpolation."));p._getLightness(),h._getLightness(),y=p.hsla,b=h.hsla}return m=Math.max(Math.min(m,1),0),this.lerp===void 0&&(this.lerp=function(w,_,S){return S*(_-w)+w}),x===c.RGB?g=this.lerp(y[0],b[0],m):(.5<Math.abs(y[0]-b[0])&&(y[0]>b[0]?b[0]+=1:y[0]+=1),1<=(g=this.lerp(y[0],b[0],m))&&--g),p=this.lerp(y[1],b[1],m),h=this.lerp(y[2],b[2],m),y=this.lerp(y[3],b[3],m),g*=v[x][0],p*=v[x][1],h*=v[x][2],y*=v[x][3],this.color(g,p,h,y)},u.default.prototype.lightness=function(p){return u.default._validateParameters("lightness",arguments),this.color(p)._getLightness()},u.default.prototype.red=function(p){return u.default._validateParameters("red",arguments),this.color(p)._getRed()},u.default.prototype.saturation=function(p){return u.default._validateParameters("saturation",arguments),this.color(p)._getSaturation()};var d=u.default;s.default=d},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(g,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}g("core-js/modules/es.symbol"),g("core-js/modules/es.symbol.description"),g("core-js/modules/es.symbol.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.iterator"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.get-own-property-descriptor"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.iterator"),g("core-js/modules/es.string.trim"),g("core-js/modules/es.weak-map"),g("core-js/modules/web.dom-collections.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(g("../core/main")),c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=d();if(_&&_.has(w))return _.get(w);var S,C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(C,S,T):C[S]=w[S])}return C.default=w,_&&_.set(w,C),C}(g("../core/constants")),f=p(g("./color_conversion"));function d(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,d=function(){return w},w)}function p(w){return w&&w.__esModule?w:{default:w}}function h(w,_){for(var S=0;S<_.length;S++){var C=_[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=/\s*/,v=/(\d{1,3})/,y=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(y.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(g.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),RGBA:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",y.source,"\\)$"].join(g.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSL:new RegExp(["^hsl\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSLA:new RegExp(["^hsla\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSB:new RegExp(["^hsb\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSBA:new RegExp(["^hsba\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i")},v=(u.default.Color=function(){function w(E,T){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(E._colorMode,E._colorMaxes),![c.RGB,c.HSL,c.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=w._parseInputs.apply(this,T),this._calculateLevels()}var _,S,C;return _=w,C=[{key:"_parseInputs",value:function(E,T,I,k){var F,D=arguments.length,L=this.mode,P=this.maxes[L],R=[];if(3<=D){for(R[0]=E/P[0],R[1]=T/P[1],R[2]=I/P[2],R[3]=typeof k=="number"?k/P[3]:1,F=R.length-1;0<=F;--F){var V=R[F];V<0?R[F]=0:1<V&&(R[F]=1)}return L===c.HSL?f.default._hslaToRGBA(R):L===c.HSB?f.default._hsbaToRGBA(R):R}if(D===1&&typeof E=="string"){if(I=E.trim().toLowerCase(),m[I])return w._parseInputs.call(this,m[I]);if(x.HEX3.test(I))return(R=x.HEX3.exec(I).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,R;if(x.HEX6.test(I))return(R=x.HEX6.exec(I).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,R;if(x.HEX4.test(I))return R=x.HEX4.exec(I).slice(1).map(function(G){return parseInt(G+G,16)/255});if(x.HEX8.test(I))return R=x.HEX8.exec(I).slice(1).map(function(G){return parseInt(G,16)/255});if(x.RGB.test(I))return(R=x.RGB.exec(I).slice(1).map(function(G){return G/255}))[3]=1,R;if(x.RGB_PERCENT.test(I))return(R=x.RGB_PERCENT.exec(I).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,R;if(x.RGBA.test(I))return R=x.RGBA.exec(I).slice(1).map(function(G,U){return U===3?parseFloat(G):G/255});if(x.RGBA_PERCENT.test(I))return R=x.RGBA_PERCENT.exec(I).slice(1).map(function(G,U){return U===3?parseFloat(G):parseFloat(G)/100});if(x.HSL.test(I)?(R=x.HSL.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSLA.test(I)&&(R=x.HSLA.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),(R=R.map(function(G){return Math.max(Math.min(G,1),0)})).length)return f.default._hslaToRGBA(R);if(x.HSB.test(I)?(R=x.HSB.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSBA.test(I)&&(R=x.HSBA.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),R.length){for(F=R.length-1;0<=F;--F)R[F]=Math.max(Math.min(R[F],1),0);return f.default._hsbaToRGBA(R)}R=[1,1,1,1]}else{if(D!==1&&D!==2||typeof E!="number")throw new Error("".concat(arguments,"is not a valid color representation."));R[0]=E/P[2],R[1]=E/P[2],R[2]=E/P[2],R[3]=typeof T=="number"?T/P[3]:1,R=R.map(function(G){return Math.max(Math.min(G,1),0)})}return R}}],(S=[{key:"toString",value:function(E){var T=this.levels,I=this._array,k=I[3];switch(E){case"#rrggbb":return"#".concat(T[0]<16?"0".concat(T[0].toString(16)):T[0].toString(16),T[1]<16?"0".concat(T[1].toString(16)):T[1].toString(16),T[2]<16?"0".concat(T[2].toString(16)):T[2].toString(16));case"#rrggbbaa":return"#".concat(T[0]<16?"0".concat(T[0].toString(16)):T[0].toString(16),T[1]<16?"0".concat(T[1].toString(16)):T[1].toString(16),T[2]<16?"0".concat(T[2].toString(16)):T[2].toString(16),T[3]<16?"0".concat(T[3].toString(16)):T[3].toString(16));case"#rgb":return"#".concat(Math.round(15*I[0]).toString(16),Math.round(15*I[1]).toString(16),Math.round(15*I[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*I[0]).toString(16),Math.round(15*I[1]).toString(16),Math.round(15*I[2]).toString(16),Math.round(15*I[3]).toString(16));case"rgb":return"rgb(".concat(T[0],", ",T[1],", ",T[2],")");case"rgb%":return"rgb(".concat((100*I[0]).toPrecision(3),"%, ",(100*I[1]).toPrecision(3),"%, ",(100*I[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*I[0]).toPrecision(3),"%, ",(100*I[1]).toPrecision(3),"%, ",(100*I[2]).toPrecision(3),"%, ",(100*I[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(T[0],",",T[1],",",T[2],",",k,")")}}},{key:"setRed",value:function(E){this._array[0]=E/this.maxes[c.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(E){this._array[1]=E/this.maxes[c.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(E){this._array[2]=E/this.maxes[c.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(E){this._array[3]=E/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var E=this._array,T=this.levels=new Array(E.length),I=E.length-1;0<=I;--I)T[I]=Math.round(255*E[I]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(E,T){this.mode=E,this.maxes=T}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[c.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[c.RGB][1]}},{key:"_getHue",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[c.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])}}])&&h(_.prototype,S),C&&h(_,C),w}(),u.default.Color);s.default=v},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.fill"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),u.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},u.default.prototype.endClip=function(){this._renderer.endClip()},u.default.prototype.clip=function(p,h){this._renderer.beginClip(h),p(),this._renderer.endClip(h)},u.default.prototype.background=function(){var p;return(p=this._renderer).background.apply(p,arguments),this},u.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},u.default.prototype.colorMode=function(p,h,m,g,y){return u.default._validateParameters("colorMode",arguments),p!==c.RGB&&p!==c.HSB&&p!==c.HSL||(this._colorMode=p,p=this._colorMaxes[p],arguments.length===2?(p[0]=h,p[1]=h,p[2]=h,p[3]=h):arguments.length===4?(p[0]=h,p[1]=m,p[2]=g):arguments.length===5&&(p[0]=h,p[1]=m,p[2]=g,p[3]=y)),this},u.default.prototype.fill=function(){var p;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(p=this._renderer).fill.apply(p,arguments),this},u.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},u.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},u.default.prototype.stroke=function(){var p;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(p=this._renderer).stroke.apply(p,arguments),this},u.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},u.default.prototype.noErase=function(){return this._renderer.noErase(),this};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QUADRATIC=s.LINEAR=s._CTX_MIDDLE=s._DEFAULT_LEADMULT=s._DEFAULT_TEXT_FILL=s.WORD=s.CHAR=s.BOLDITALIC=s.BOLD=s.ITALIC=s.NORMAL=s.BLUR=s.ERODE=s.DILATE=s.POSTERIZE=s.INVERT=s.OPAQUE=s.GRAY=s.THRESHOLD=s.BURN=s.DODGE=s.SOFT_LIGHT=s.HARD_LIGHT=s.OVERLAY=s.REPLACE=s.SCREEN=s.MULTIPLY=s.EXCLUSION=s.SUBTRACT=s.DIFFERENCE=s.LIGHTEST=s.DARKEST=s.ADD=s.REMOVE=s.BLEND=s.UP_ARROW=s.TAB=s.SHIFT=s.RIGHT_ARROW=s.RETURN=s.OPTION=s.LEFT_ARROW=s.ESCAPE=s.ENTER=s.DOWN_ARROW=s.DELETE=s.CONTROL=s.BACKSPACE=s.ALT=s.AUTO=s.HSL=s.HSB=s.RGB=s.MITER=s.BEVEL=s.ROUND=s.SQUARE=s.PROJECT=s.PIE=s.CHORD=s.OPEN=s.CLOSE=s.TESS=s.QUAD_STRIP=s.QUADS=s.TRIANGLE_STRIP=s.TRIANGLE_FAN=s.TRIANGLES=s.LINE_LOOP=s.LINE_STRIP=s.LINES=s.POINTS=s.BASELINE=s.BOTTOM=s.TOP=s.CENTER=s.LEFT=s.RIGHT=s.RADIUS=s.CORNERS=s.CORNER=s.RAD_TO_DEG=s.DEG_TO_RAD=s.RADIANS=s.DEGREES=s.TWO_PI=s.TAU=s.QUARTER_PI=s.PI=s.HALF_PI=s.WAIT=s.TEXT=s.MOVE=s.HAND=s.CROSS=s.ARROW=s.WEBGL2=s.WEBGL=s.P2D=s.VERSION=void 0,s.RGBA=s.HALF_FLOAT=s.FLOAT=s.UNSIGNED_INT=s.UNSIGNED_BYTE=s.COVER=s.CONTAIN=s.FALLBACK=s.LABEL=s.AXES=s.GRID=s._DEFAULT_FILL=s._DEFAULT_STROKE=s.PORTRAIT=s.LANDSCAPE=s.SMOOTH=s.FLAT=s.MIRROR=s.CLAMP=s.REPEAT=s.NEAREST=s.IMAGE=s.IMMEDIATE=s.TEXTURE=s.FILL=s.STROKE=s.CURVE=s.BEZIER=void 0;var a=Math.PI,l=(s.VERSION="1.9.4",s.P2D="p2d",s.WEBGL="webgl",s.WEBGL2="webgl2",s.ARROW="default",s.CROSS="crosshair",s.HAND="pointer",s.MOVE="move",s.TEXT="text",s.WAIT="wait",a/2),l=(s.HALF_PI=l,a),l=(s.PI=l,a/4),l=(s.QUARTER_PI=l,2*a),l=(s.TAU=l,2*a),l=(s.TWO_PI=l,s.DEGREES="degrees",s.RADIANS="radians",a/180),l=(s.DEG_TO_RAD=l,180/a);s.RAD_TO_DEG=l,s.CORNER="corner",s.CORNERS="corners",s.RADIUS="radius",s.RIGHT="right",s.LEFT="left",s.CENTER="center",s.TOP="top",s.BOTTOM="bottom",s.BASELINE="alphabetic",s.POINTS=0,s.LINES=1,s.LINE_STRIP=3,s.LINE_LOOP=2,s.TRIANGLES=4,s.TRIANGLE_FAN=6,s.TRIANGLE_STRIP=5,s.QUADS="quads",s.QUAD_STRIP="quad_strip",s.TESS="tess",s.CLOSE="close",s.OPEN="open",s.CHORD="chord",s.PIE="pie",s.PROJECT="square",s.SQUARE="butt",s.ROUND="round",s.BEVEL="bevel",s.MITER="miter",s.RGB="rgb",s.HSB="hsb",s.HSL="hsl",s.AUTO="auto",s.ALT=18,s.BACKSPACE=8,s.CONTROL=17,s.DELETE=46,s.DOWN_ARROW=40,s.ENTER=13,s.ESCAPE=27,s.LEFT_ARROW=37,s.OPTION=18,s.RETURN=13,s.RIGHT_ARROW=39,s.SHIFT=16,s.TAB=9,s.UP_ARROW=38,s.BLEND="source-over",s.REMOVE="destination-out",s.ADD="lighter",s.DARKEST="darken",s.LIGHTEST="lighten",s.DIFFERENCE="difference",s.SUBTRACT="subtract",s.EXCLUSION="exclusion",s.MULTIPLY="multiply",s.SCREEN="screen",s.REPLACE="copy",s.OVERLAY="overlay",s.HARD_LIGHT="hard-light",s.SOFT_LIGHT="soft-light",s.DODGE="color-dodge",s.BURN="color-burn",s.THRESHOLD="threshold",s.GRAY="gray",s.OPAQUE="opaque",s.INVERT="invert",s.POSTERIZE="posterize",s.DILATE="dilate",s.ERODE="erode",s.BLUR="blur",s.NORMAL="normal",s.ITALIC="italic",s.BOLD="bold",s.BOLDITALIC="bold italic",s.CHAR="CHAR",s.WORD="WORD",s._DEFAULT_TEXT_FILL="#000000",s._DEFAULT_LEADMULT=1.25,s._CTX_MIDDLE="middle",s.LINEAR="linear",s.QUADRATIC="quadratic",s.BEZIER="bezier",s.CURVE="curve",s.STROKE="stroke",s.FILL="fill",s.TEXTURE="texture",s.IMMEDIATE="immediate",s.IMAGE="image",s.NEAREST="nearest",s.REPEAT="repeat",s.CLAMP="clamp",s.MIRROR="mirror",s.FLAT="flat",s.SMOOTH="smooth",s.LANDSCAPE="landscape",s.PORTRAIT="portrait",s._DEFAULT_STROKE="#000000",s._DEFAULT_FILL="#FFFFFF",s.GRID="grid",s.AXES="axes",s.LABEL="label",s.FALLBACK="fallback",s.CONTAIN="contain",s.COVER="cover",s.UNSIGNED_BYTE="unsigned-byte",s.UNSIGNED_INT="unsigned-int",s.FLOAT="float",s.HALF_FLOAT="half-float",s.RGBA="rgba"},{}],270:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(c=o("./main"))&&c.__esModule?c:{default:c},c=function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=f();if(b&&b.has(y))return b.get(y);var x,v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var _;Object.prototype.hasOwnProperty.call(y,x)&&((_=w?Object.getOwnPropertyDescriptor(y,x):null)&&(_.get||_.set)?Object.defineProperty(v,x,_):v[x]=y[x])}return v.default=y,b&&b.set(y,v),v}(o("./constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}var d=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],p=(u.default.prototype._frameRate=0,u.default.prototype._lastFrameTime=window.performance.now(),u.default.prototype._targetFrameRate=60,window.print),h=!1;function m(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}u.default.prototype.print=function(){var y;arguments.length?(y=console).log.apply(y,arguments):h||(p(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(h=!0))},u.default.prototype.frameCount=0,u.default.prototype.deltaTime=0,u.default.prototype.focused=document.hasFocus(),u.default.prototype.cursor=function(y,b,x){var v,w="auto",_=this._curElement.elt;d.includes(y)?w=y:typeof y=="string"&&(v="",b&&x&&typeof b=="number"&&typeof x=="number"&&(v="".concat(b," ").concat(x)),w=y.substring(0,7)==="http://"||y.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(y)?"url(".concat(y,") ").concat(v,", auto"):y),_.style.cursor=w},u.default.prototype.frameRate=function(y){return u.default._validateParameters("frameRate",arguments),typeof y!="number"||y<0?this._frameRate:(this._setProperty("_targetFrameRate",y),y===0&&this._setProperty("_frameRate",y),this)},u.default.prototype.getFrameRate=function(){return this.frameRate()},u.default.prototype.setFrameRate=function(y){return this.frameRate(y)},u.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},u.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},u.default.prototype.webglVersion=c.P2D,u.default.prototype.displayWidth=screen.width,u.default.prototype.displayHeight=screen.height,u.default.prototype.windowWidth=m(),u.default.prototype.windowHeight=g(),u.default.prototype._onresize=function(y){this._setProperty("windowWidth",m()),this._setProperty("windowHeight",g());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(y))===void 0||b||y.preventDefault()},u.default.prototype.width=0,u.default.prototype.height=0,u.default.prototype.fullscreen=function(y){if(u.default._validateParameters("fullscreen",arguments),y===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(y){if(y=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},u.default.prototype.pixelDensity=function(y){var b;return u.default._validateParameters("pixelDensity",arguments),typeof y=="number"?(y!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=y),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},u.default.prototype.displayDensity=function(){return window.devicePixelRatio},u.default.prototype.getURL=function(){return location.href},u.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(y){return y!==""})},u.default.prototype.getURLParams=function(){for(var y,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(y=b.exec(location.search))!=null;)y.index===b.lastIndex&&b.lastIndex++,x[y[1]]=y[2];return x},o=u.default,s.default=o},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(d=o("../main"))&&d.__esModule?d:{default:d};o("../internationalization");function l(p,h){h=h||console.log.bind(console),u||f(),u.some(function(m){var g;if(p.message&&p.message.match("\\W?".concat(m.name,"\\W"))!==null)return g=m.type==="function"?"".concat(m.name,"()"):m.name,h("Did you just try to use p5.js's ".concat(g," ").concat(m.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var u=null,f=null,c=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},u=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function p(m){return Object.getOwnPropertyNames(m).filter(function(g){return g[0]!=="_"&&!(g in h)&&(h[g]=!0)}).map(function(g){var y=typeof m[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:y}})}var h={};(u=[].concat(p(a.default.prototype),p(o("../constants")))).sort(function(m,g){return g.name.length-m.name.length})},d=(a.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)})),a.default);s.default=d},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(a=o("../main"))&&a.__esModule?a:{default:a};o("../internationalization"),a.default._friendlyFileLoadError=function(){},o=a.default,s.default=o},{"../internationalization":278,"../main":280}],273:[function(o,i,s){"use strict";function a(M){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(M)}function l(M){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(z){return a(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":a(z)})(M)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=G(o("../main")),c=o("../internationalization"),f=V(o("../constants")),d,p,h,m,g,y,b,x,v,w,_,S,C,E,T,I,k,F,D,L,P;function R(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,R=function(){return M},M)}function V(M){if(M&&M.__esModule)return M;if(M===null||l(M)!=="object"&&typeof M!="function")return{default:M};var z=R();if(z&&z.has(M))return z.get(M);var q,ee,ae={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in M)Object.prototype.hasOwnProperty.call(M,q)&&((ee=Q?Object.getOwnPropertyDescriptor(M,q):null)&&(ee.get||ee.set)?Object.defineProperty(ae,q,ee):ae[q]=M[q]);return ae.default=M,z&&z.set(M,ae),ae}function G(M){return M&&M.__esModule?M:{default:M}}function U(M){return fe(M)||X(M)||H()}function H(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function X(M){if(Symbol.iterator in Object(M)||Object.prototype.toString.call(M)==="[object Arguments]")return Array.from(M)}function fe(M){if(Array.isArray(M)){for(var z=0,q=new Array(M.length);z<M.length;z++)q[z]=M[z];return q}}u.default._fesCodeReader=function(){};var $=u.default;s.default=$},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../main"))&&o.__esModule?o:{default:o};function a(){var l=/(^|@)\S+:\d+/,u=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(u)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(u)},this).map(function(d){var p=(d=-1<d.indexOf("(eval ")?d.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):d).replace(/^\s+/,"").replace(/\(eval code/g,"("),h=p.match(/ (\((.+):(\d+):(\d+)\)$)/),p=(p=h?p.replace(h[0],""):p).split(/\s+/).slice(1),h=this.extractLocation(h?h[1]:p.pop());return{functionName:p.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(h[0])?void 0:h[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(d){return!d.match(c)},this).map(function(d){var p,h;return(d=-1<d.indexOf(" > eval")?d.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):d).indexOf("@")===-1&&d.indexOf(":")===-1?{functionName:d}:{functionName:(h=d.match(p=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&h[1]?h[1]:void 0,fileName:(h=this.extractLocation(d.replace(p,"")))[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)/i,p=f.message.split(`
`),h=[],m=2,g=p.length;m<g;m+=2){var y=d.exec(p[m]);y&&h.push({fileName:y[2],lineNumber:y[1],source:p[m]})}return h},parseOpera10:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,p=f.stacktrace.split(`
`),h=[],m=0,g=p.length;m<g;m+=2){var y=d.exec(p[m]);y&&h.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:p[m]})}return h},parseOpera11:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(l)&&!d.match(/^Error created at/)},this).map(function(d){var p,m=d.split("@"),h=this.extractLocation(m.pop()),m=m.shift()||"";return{functionName:m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(p=m.match(/\(([^)]*)\)/)?m.replace(/^[^(]+\(([^)]*)\)$/,"$1"):p)===void 0||p==="[arguments not available]"?void 0:p.split(","),fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)}}}o.default._getErrorStackParser=function(){return new a},o=o.default,s.default=o},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../main"))&&l.__esModule?l:{default:l};(function(f){if(!(f&&f.__esModule)&&!(f===null||c(f)!=="object"&&typeof f!="function")){var d=u();if(d&&d.has(f))return d.get(f);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=m?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=f[p])}h.default=f,d&&d.set(f,h)}})(o("../constants")),o("../internationalization");function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default._validateParameters=l.default._clearValidateParamsCache=function(){},o=l.default,s.default=o},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function l(f){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=m?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=f[p])}return h.default=f,d&&d.set(f,h),h}(o("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}s.default={modeAdjust:function(f,d,p,h,m){return m===u.CORNER?{x:f,y:d,w:p,h}:m===u.CORNERS?{x:f,y:d,w:p-f,h:h-d}:m===u.RADIUS?{x:f-p,y:d-h,w:2*p,h:2*h}:m===u.CENTER?{x:f-.5*p,y:d-.5*h,w:p,h}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(l=o("../core/main"))&&l.__esModule?l:{default:l};o("./internationalization");var l=Promise.resolve();Promise.all([new Promise(function(u,c){document.readyState==="complete"?u():window.addEventListener("load",u,!1)}),l]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(o,i,s){"use strict";o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.setTranslatorLanguage=s.currentTranslatorLanguage=s.availableTranslatorLanguages=s.initialize=s.translator=void 0;var a,l,u=f(o("i18next")),c=f(o("i18next-browser-languagedetector"));function f(h){return h&&h.__esModule?h:{default:h}}function d(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var p=function(){function h(b,x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.init(b,x)}var m,g,y;return m=h,(g=[{key:"fetchWithTimeout",value:function(b,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(b,x),new Promise(function(w,_){return setTimeout(function(){return _(new Error("timeout"))},v)})])}},{key:"init",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=b,this.options=x}},{key:"read",value:function(b,x,v){var w=this.options.loadPath;b===this.options.fallback?v(null,a[b][x]):l.includes(b)?(w=this.services.interpolator.interpolate(w,{lng:b,ns:x}),this.loadUrl(w,v)):v("Not found",!1)}},{key:"loadUrl",value:function(b,x){this.fetchWithTimeout(b).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(b))},function(){throw new Error("failed loading ".concat(b))}).then(function(v){return x(null,v)}).catch(x)}}])&&d(m.prototype,g),y&&d(m,y),h}();p.type="backend",s.translator=function(h,m){console.debug("p5.js translator called before translations were loaded"),u.default.t(h,m)},s.initialize=function(){return u.default.use(c.default).use(p).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(h){s.translator=h},function(h){return console.debug("Translations failed to load (".concat(h,")"))})},s.availableTranslatorLanguages=function(){return u.default.languages},s.currentTranslatorLanguage=function(h){return u.default.language},s.setTranslatorLanguage=function(h){return u.default.changeLanguage(h||void 0,function(m){return console.debug("Translations failed to load (".concat(m,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},o.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},o.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},o.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},o=o.default,s.default=o},{"./main":280}],280:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("./shim");var u=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function f(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var d,p=function(){function h(b,w){var v=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(h.prototype._registeredMethods),_=!0,S=!1,C=void 0;try{for(var E,T=w[Symbol.iterator]();!(_=(E=T.next()).done);_=!0){var I=E.value;this._registeredMethods[I]=h.prototype._registeredMethods[I].slice()}}catch(U){S=!0,C=U}finally{try{_||T.return==null||T.return()}finally{if(S)throw C}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),h.prototype.callRegisteredHooksFor=function(U){var H=this||h.prototype,X=this._isGlobal?window:this;if(H._registeredMethods.hasOwnProperty(U)){var H=H._registeredMethods[U],fe=!0,U=!1,$=void 0;try{for(var M,z=H[Symbol.iterator]();!(fe=(M=z.next()).done);fe=!0){var q=M.value;typeof q=="function"&&q.call(X)}}catch(Q){U=!0,$=Q}finally{try{fe||z.return==null||z.return()}finally{if(U)throw $}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var U=v._isGlobal?window:v;if(U.preload){v.callRegisteredHooksFor("beforePreload");var H,X=document.getElementById(v._loadingScreenId),fe=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=v._loadingScreenId,(v._userNode||document.body).appendChild(X)),v._preloadMethods);for(H in fe){fe[H]=fe[H]||h;var $=fe[H];$!==h.prototype&&$!==h||(v._isGlobal&&(window[H]=v._wrapPreload(v,H)),$=v),v._registeredPreloadMethods[H]=$[H],$[H]=v._wrapPreload($,H)}U.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var U,H=this._isGlobal?window:this;H._preloadCount===0&&((U=document.getElementById(H._loadingScreenId))&&U.parentNode.removeChild(U),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),H._setup(),this._recording||H._draw()))},this._decrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||typeof U.preload!="function"||(U._setProperty("_preloadCount",U._preloadCount-1),U._runIfPreloadsAreDone())},this._wrapPreload=function(U,H){var X=this;return function(){X._incrementPreload();for(var fe=arguments.length,$=new Array(fe),M=0;M<fe;M++)$[M]=arguments[M];return X._registeredPreloadMethods[H].apply(U,$)}},this._incrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||U._setProperty("_preloadCount",U._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var U=v._isGlobal?window:v;if(typeof U.preload=="function")for(var H in v._preloadMethods)U[H]=v._preloadMethods[H][H],U[H]&&v&&(U[H]=U[H].bind(v));v._millisStart=window.performance.now(),U._preloadDone=!0,typeof U.setup=="function"&&U.setup();var X=document.getElementsByTagName("canvas"),fe=!0,$=!1,M=void 0;try{for(var z,q=X[Symbol.iterator]();!(fe=(z=q.next()).done);fe=!0){var ee=z.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(ae){$=!0,M=ae}finally{try{fe||q.return==null||q.return()}finally{if($)throw M}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(){var U=window.performance.now(),H=U-v._lastTargetFrameTime,X=1e3/v._targetFrameRate;(!v._loop||X-5<=H)&&(v.deltaTime=U-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+X,U),v._lastRealFrameTime=U,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(U,H){v[U]=H,v._isGlobal&&(window[U]=H)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var U=document.getElementById(v._loadingScreenId);if(U&&(U.parentNode.removeChild(U),v._incrementPreload()),v._curElement){for(var H in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(H,v._events[H]);var X=!0,U=!1,fe=void 0;try{for(var $,M=v._elements[Symbol.iterator]();!(X=($=M.next()).done);X=!0){var z,q=$.value;for(z in q.elt&&q.elt.parentNode&&q.elt.parentNode.removeChild(q.elt),q._events)q.elt.removeEventListener(z,q._events[z])}}catch(ie){U=!0,fe=ie}finally{try{X||M.return==null||M.return()}finally{if(U)throw fe}}var ee=v;v._registeredMethods.remove.forEach(function(ie){ie!==void 0&&ie.call(ee)})}if(v._isGlobal){for(var ae in h.prototype)try{delete window[ae]}catch{window[ae]=void 0}for(var Q in v)if(v.hasOwnProperty(Q))try{delete window[Q]}catch{window[Q]=void 0}h.instance=null}},this._registeredMethods.init.forEach(function(U){U!==void 0&&U.call(this)},this),this._setupPromisePreloads();var k,F,D=this._createFriendlyGlobalFunctionBinder();if(b)b(this),h._checkForUserDefinedFunctions(this);else{for(var L in this._isGlobal=!0,h.instance=this,h.prototype)typeof h.prototype[L]=="function"?(k=L.substring(2),this._events.hasOwnProperty(k)||(Math.hasOwnProperty(L)&&Math[L]===h.prototype[L]?D(L,h.prototype[L]):D(L,h.prototype[L].bind(this)))):D(L,h.prototype[L]);for(var P in this)this.hasOwnProperty(P)&&D(P,this[P])}for(F in this._events){var R=this["_on".concat(F)];R&&(R=R.bind(this),window.addEventListener(F,R,{passive:!1}),this._events[F]=R)}function V(){v._setProperty("focused",!0)}function G(){v._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",G),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",G)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var m,g,y;return m=h,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=u.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(b,x){h.prototype._preloadMethods.hasOwnProperty(b)||(h.prototype._preloadMethods[b]=x)}},{key:"registerMethod",value:function(b,x){var v=this||h.prototype;v._registeredMethods.hasOwnProperty(b)||(v._registeredMethods[b]=[]),v._registeredMethods[b].push(x)}},{key:"unregisterMethod",value:function(b,x){var v=this||h.prototype;if(v._registeredMethods.hasOwnProperty(b)){for(var w=v._registeredMethods[b],_=[],S=0;S<w.length;S++)w[S]===x&&_.push(S);for(var C=_.length-1;0<=C;C--)w.splice(_[C],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=b.globalObject||window;return b.log||console.log.bind(console),function(v,w){h.disableFriendlyErrors,x[v]=w}}}])&&f(m.prototype,g),y&&f(m,y),h}();for(d in p.instance=null,p.disableFriendlyErrors=!1,u)p.prototype[d]=u[d];p.VERSION=u.VERSION,p.prototype._preloadMethods={loadJSON:p.prototype,loadImage:p.prototype,loadStrings:p.prototype,loadXML:p.prototype,loadBytes:p.prototype,loadTable:p.prototype,loadFont:p.prototype,loadModel:p.prototype,loadShader:p.prototype},p.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},p.prototype._registeredPreloadMethods={},s.default=p},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Element=function(){function u(p,h){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.elt=p,this._pInst=this._pixelsState=h,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var c,f,d;return c=u,d=[{key:"_adjustListener",value:function(p,h,m){return h===!1?a.default.Element._detachListener(p,m):a.default.Element._attachListener(p,h,m),this}},{key:"_attachListener",value:function(p,h,m){m._events[p]&&a.default.Element._detachListener(p,m),h=h.bind(m),m.elt.addEventListener(p,h,!1),m._events[p]=h}},{key:"_detachListener",value:function(p,h){var m=h._events[p];h.elt.removeEventListener(p,m,!1),h._events[p]=null}}],(f=[{key:"parent",value:function(p){return p===void 0?this.elt.parentNode:(typeof p=="string"?(p[0]==="#"&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof a.default.Element&&(p=p.elt),p.appendChild(this.elt),this)}},{key:"id",value:function(p){return p===void 0?this.elt.id:(this.elt.id=p,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(p){return p===void 0?this.elt.className:(this.elt.className=p,this)}},{key:"mousePressed",value:function(p){return a.default.Element._adjustListener("mousedown",function(h){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(h),p.call(this,h)},this),this}},{key:"doubleClicked",value:function(p){return a.default.Element._adjustListener("dblclick",p,this),this}},{key:"mouseWheel",value:function(p){return a.default.Element._adjustListener("wheel",p,this),this}},{key:"mouseReleased",value:function(p){return a.default.Element._adjustListener("mouseup",p,this),this}},{key:"mouseClicked",value:function(p){return a.default.Element._adjustListener("click",p,this),this}},{key:"mouseMoved",value:function(p){return a.default.Element._adjustListener("mousemove",p,this),this}},{key:"mouseOver",value:function(p){return a.default.Element._adjustListener("mouseover",p,this),this}},{key:"mouseOut",value:function(p){return a.default.Element._adjustListener("mouseout",p,this),this}},{key:"touchStarted",value:function(p){return a.default.Element._adjustListener("touchstart",p,this),this}},{key:"touchMoved",value:function(p){return a.default.Element._adjustListener("touchmove",p,this),this}},{key:"touchEnded",value:function(p){return a.default.Element._adjustListener("touchend",p,this),this}},{key:"dragOver",value:function(p){return a.default.Element._adjustListener("dragover",p,this),this}},{key:"dragLeave",value:function(p){return a.default.Element._adjustListener("dragleave",p,this),this}},{key:"_setProperty",value:function(p,h){this[p]=h}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Element,s.default=o},{"./main":280}],282:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=o("./main"))&&b.__esModule?b:{default:b},c=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=f();if(v&&v.has(x))return v.get(x);var w,_={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=S?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(_,w,C):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("./constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function h(x){return function(){var v,w=y(x);return m(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=y(this).constructor,Reflect.construct(w,arguments,v)):w.apply(this,arguments))}}function m(x,v){return!v||l(v)!=="object"&&typeof v!="function"?g(x):v}function g(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}u.default.Graphics=function(x){var v=S;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=h(S);function S(C,E,P,I,k){var F;if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");L=k||document.createElement("canvas"),(F=_.call(this,L,I)).canvas=L;var D,L=P||c.P2D,P=I._userNode||document.body;for(D in k||P.appendChild(F.canvas),u.default.prototype)F[D]||(typeof u.default.prototype[D]=="function"?F[D]=u.default.prototype[D].bind(g(F)):F[D]=u.default.prototype[D]);return u.default.prototype._initializeInstanceVariables.apply(g(F)),F.width=C,F.height=E,F._pixelDensity=I._pixelDensity,L===c.WEBGL?(F._renderer=new u.default.RendererGL(F.canvas,g(F),!1),C=(k=F._renderer._adjustDimensions(C,E)).adjustedWidth,E=k.adjustedHeight):F._renderer=new u.default.Renderer2D(F.canvas,g(F),!1),I._elements.push(g(F)),Object.defineProperty(g(F),"deltaTime",{get:function(){return this._pInst.deltaTime}}),F._renderer.resize(C,E),F._renderer._applyDefaults(),m(F,g(F))}return v=S,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var C,E=this._pInst._elements.indexOf(this);for(C in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(C,this._events[C])}},{key:"createFramebuffer",value:function(C){return new u.default.Framebuffer(this,C)}}])&&d(v.prototype,x),w&&d(v,w),S}(u.default.Element);var b=u.default.Graphics;s.default=b},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(y=o("./main"))&&y.__esModule?y:{default:y},u=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var v=c();if(v&&v.has(x))return v.get(x);var w,_={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=S?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(_,w,C):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants"));function c(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,c=function(){return x},x)}function f(x){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function h(x){return function(){var v,w,_=g(x);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=g(this).constructor,Reflect.construct(_,arguments,v)):_.apply(this,arguments),_=this,!(w=v)||f(w)!=="object"&&typeof w!="function"?m(_):w}}function m(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function g(x){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}var y=function(x){var v=S;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=h(S);function S(C,E,T){var I;if(this instanceof S)return(I=_.call(this,C,E)).canvas=C,I._pixelsState=E,T?(I._isMainCanvas=!0,I._pInst._setProperty("_curElement",m(I)),I._pInst._setProperty("canvas",I.canvas),I._pInst._setProperty("width",I.width),I._pInst._setProperty("height",I.height)):(I.canvas.style.display="none",I._styles=[]),I._clipping=!1,I._clipInvert=!1,I._textSize=12,I._textLeading=15,I._textFont="sans-serif",I._textStyle=u.NORMAL,I._textAscent=null,I._textDescent=null,I._textAlign=u.LEFT,I._textBaseline=u.BASELINE,I._textWrap=u.WORD,I._rectMode=u.CORNER,I._ellipseMode=u.CENTER,I._curveTightness=0,I._imageMode=u.CORNER,I._tint=null,I._doStroke=!0,I._doFill=!0,I._strokeSet=!1,I._fillSet=!1,I._leadingSet=!1,I._pushPopDepth=0,I;throw new TypeError("Cannot call a class as a function")}return v=S,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(C){this._pushPopDepth--,C.properties&&Object.assign(this,C.properties)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=C.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(C,E){this.width=C,this.height=E,this.elt.width=C*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(C,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(C,E,T,I){var k=this._pixelsState,F=k._pixelDensity,D=this.canvas;if(C===void 0&&E===void 0)C=E=0,T=k.width,I=k.height;else if(C*=F,E*=F,T===void 0&&I===void 0)return C<0||E<0||C>=D.width||E>=D.height?[0,0,0,0]:this._getPixel(C,E);return k=new l.default.Image(T*F,I*F),k.pixelDensity(F),k.canvas.getContext("2d").drawImage(D,C,E,T*F,I*F,0,0,T*F,I*F),k}},{key:"textLeading",value:function(C){return typeof C=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",C),this._pInst):this._textLeading}},{key:"textStyle",value:function(C){return C?(C!==u.NORMAL&&C!==u.ITALIC&&C!==u.BOLD&&C!==u.BOLDITALIC||this._setProperty("_textStyle",C),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(C,E){return C!==void 0?(this._setProperty("_textAlign",C),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(C){return this._setProperty("_textWrap",C),this._textWrap}},{key:"text",value:function(C,E,T,I,k){var F,D,L,P,R=this._pInst,V=this._textWrap,G=Number.MAX_VALUE,U=T;if((this._doFill||this._doStroke)&&C!==void 0){if(F=(C=(C=typeof C!="string"?C.toString():C).replace(/(\t)/g,"  ")).split(`
`),I!==void 0){switch(this._rectMode===u.CENTER&&(E-=I/2),this._textAlign){case u.CENTER:E+=I/2;break;case u.RIGHT:E+=I}if(k!==void 0){this._rectMode===u.CENTER&&(T-=k/2,U-=k/2);var C=T,H=R.textAscent();switch(this._textBaseline){case u.BOTTOM:P=T+k,T=Math.max(P,T),U+=H;break;case u.CENTER:P=T+k/2,T=Math.max(P,T),U+=H/2}G=T+k-H,this._textBaseline===u.CENTER&&(G=C+k-H/2)}else this._textBaseline!==u.BOTTOM&&this._textBaseline!==u.CENTER||(U=T-(C=R.textSize()*this._textLeading)/2,G=T+C/2);if(V===u.WORD){for(var X=[],fe=0;fe<F.length;fe++){for(var $="",M=F[fe].split(" "),z=0;z<M.length;z++)D="".concat($+M[z])+" ",$=I<(L=this.textWidth(D))&&0<$.length?(X.push($),"".concat(M[z])+" "):D;X.push($)}var q=0;this._textBaseline===u.CENTER?q=(X.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(q=(X.length-1)*R.textLeading());for(var ee=0;ee<F.length;ee++){$="",M=F[ee].split(" ");for(var ae=0;ae<M.length;ae++)D="".concat($+M[ae])+" ",I<(L=this.textWidth(D))&&0<$.length?(this._renderText(R,$.trim(),E,T-q,G,U),$="".concat(M[ae])+" ",T+=R.textLeading()):$=D;this._renderText(R,$.trim(),E,T-q,G,U),T+=R.textLeading()}}else{for(var Q=[],le=0;le<F.length;le++)for(var ie=F[le].split($=""),K=0;K<ie.length;K++)D="".concat($+ie[K]),(L=this.textWidth(D))<=I?$+=ie[K]:I<L&&0<$.length&&(Q.push($),$="".concat(ie[K]));Q.push($);var ge=0;this._textBaseline===u.CENTER?ge=(Q.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(ge=(Q.length-1)*R.textLeading());for(var ne=0;ne<F.length;ne++){ie=F[ne].split($="");for(var ye=0;ye<ie.length;ye++)D="".concat($+ie[ye]),(L=this.textWidth(D))<=I?$+=ie[ye]:I<L&&0<$.length&&(this._renderText(R,$.trim(),E,T-ge,G,U),T+=R.textLeading(),$="".concat(ie[ye]))}this._renderText(R,$.trim(),E,T-ge,G,U),T+=R.textLeading()}}else{var xe=0;this._textBaseline===u.CENTER?xe=(F.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(xe=(F.length-1)*R.textLeading());for(var De=0;De<F.length;De++)this._renderText(R,F[De],E,T-xe,G,U-xe),T+=R.textLeading()}return R}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(C)==="object"&&C.font&&C.font.supported}},{key:"_updateTextMetrics",value:function(){var C,E,T,I,k,F;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((C=document.createElement("span")).style.fontFamily=this._textFont,C.style.fontSize="".concat(this._textSize,"px"),C.innerHTML="ABCjgq|",(F=document.createElement("div")).style.display="inline-block",F.style.width="1px",F.style.height="0px",I=((E=document.createElement("div")).appendChild(C),E.appendChild(F),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),F.style.verticalAlign="baseline",b(F)),k=b(C),T=I[1]-k[1],I=(F.style.verticalAlign="bottom",b(F)),k=b(C),F=I[1]-k[1]-T,document.body.removeChild(E),this._setProperty("_textAscent",T),this._setProperty("_textDescent",F)),this}}])&&d(v.prototype,x),w&&d(v,w),S}(l.default.Element);function b(x){var v=0,w=0;if(x.offsetParent)for(;v+=x.offsetLeft,w+=x.offsetTop,x=x.offsetParent;);else v+=x.offsetLeft,w+=x.offsetTop;return[v,w]}y.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*u._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer=y,o=l.default.Renderer,s.default=o},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(x,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=x("./main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=C?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(S,_,E):S[_]=v[_])}return S.default=v,w&&w.set(v,S),S}(x("./constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function p(v,w,_){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(T,C,E){var T=function(I,k){for(;!Object.prototype.hasOwnProperty.call(I,k)&&(I=g(I))!==null;);return I}(T,C);if(T)return(T=Object.getOwnPropertyDescriptor(T,C)).get?T.get.call(E):T.value})(v,w,_||v)}function h(v,w){return(h=Object.setPrototypeOf||function(_,S){return _.__proto__=S,_})(v,w)}function m(v){return function(){var w,_=g(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=g(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function g(v){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}x("./p5.Renderer");var y="rgba(0,0,0,0)",b=function(v){var w=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&h(w,v);var _,S=m(C);function C(E,T,I){if(this instanceof C)return(E=S.call(this,E,T,I)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return w=C,(v=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof u.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new u.default.Graphics(this.width,this.height,c.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,T){p(g(C.prototype),"resize",this).call(this,E,T),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,T;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof u.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),T=(T=this._pInst).color.apply(T,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(T.levels),T=T.toString(),this._setFill(T),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,T){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,T).toString(),this.drawingContext.strokeStyle=E,T=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=T,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(p(g(C.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(c.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),p(g(C.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,T,I,k,F,D,L,P,R){E.gifProperties&&E._animateGif(this._pInst);try{u.default.MediaElement&&E instanceof u.default.MediaElement&&E._ensureCanvas();var V=(V=this._tint&&E.canvas?this._getTintedImageCanvas(E):V)||E.canvas||E.elt,G=1;E.width&&0<E.width&&(G=V.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(V,G*T,G*I,G*k,G*F,D,L,P,R),this._isErasing&&this._pInst.erase()}catch(U){if(U.name!=="NS_ERROR_NOT_AVAILABLE")throw U}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var T=E.tintCanvas.getContext("2d");return T.save(),T.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(T.drawImage(E.canvas,0,0),T.globalCompositeOperation="luminosity",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="color",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="multiply",T.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),T.fillRect(0,0,E.canvas.width,E.canvas.height),T.globalCompositeOperation="destination-in"),T.globalAlpha=this._tint[3]/255,T.drawImage(E.canvas,0,0),T.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==c.BLEND&&E!==c.REMOVE&&E!==c.DARKEST&&E!==c.LIGHTEST&&E!==c.DIFFERENCE&&E!==c.MULTIPLY&&E!==c.EXCLUSION&&E!==c.SCREEN&&E!==c.REPLACE&&E!==c.OVERLAY&&E!==c.HARD_LIGHT&&E!==c.SOFT_LIGHT&&E!==c.DODGE&&E!==c.BURN&&E!==c.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,T=arguments.length,I=new Array(T),k=0;k<T;k++)I[k]=arguments[k];var F=I[I.length-1],D=Array.prototype.slice.call(I,0,I.length-1);this.drawingContext.globalCompositeOperation=F,u.default.prototype.copy.apply(this,D),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,T){return E=this.drawingContext.getImageData(E,T,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,T=E._pixelDensity,I=this.width*T,T=this.height*T,I=this.drawingContext.getImageData(0,0,I,T);E._setProperty("imageData",I),E._setProperty("pixels",I.data)}},{key:"set",value:function(E,T,I){E=Math.floor(E),T=Math.floor(T);var k=this._pixelsState;if(I instanceof u.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(k._pixelDensity,k._pixelDensity),this.drawingContext.clearRect(E,T,I.width,I.height),this.drawingContext.drawImage(I.canvas,E,T),this.drawingContext.restore();else{var F=0,D=0,L=0,P=0,R=4*(T*k._pixelDensity*(this.width*k._pixelDensity)+E*k._pixelDensity);if(k.imageData||k.loadPixels(),typeof I=="number")R<k.pixels.length&&(L=D=F=I,P=255);else if(Array.isArray(I)){if(I.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");R<k.pixels.length&&(F=I[0],D=I[1],L=I[2],P=I[3])}else I instanceof u.default.Color&&R<k.pixels.length&&(F=I.levels[0],D=I.levels[1],L=I.levels[2],P=I.levels[3]);for(var V=0;V<k._pixelDensity;V++)for(var G=0;G<k._pixelDensity;G++)R=4*((T*k._pixelDensity+G)*this.width*k._pixelDensity+(E*k._pixelDensity+V)),k.pixels[R]=F,k.pixels[R+1]=D,k.pixels[R+2]=L,k.pixels[R+3]=P}}},{key:"updatePixels",value:function(E,T,I,k){var F=this._pixelsState,D=F._pixelDensity;E===void 0&&T===void 0&&I===void 0&&k===void 0&&(T=E=0,I=this.width,k=this.height),E*=D,T*=D,I*=D,k*=D,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=F.imageData),this.drawingContext.putImageData(F.imageData,E,T,0,0,I,k)}},{key:"_acuteArcToBezier",value:function(E,T){var D=T/2,I=Math.cos(D),P=Math.sin(D),k=1/Math.tan(D),D=E+D,F=Math.cos(D),D=Math.sin(D),L=(4-I)/3,P=P+(I-L)*k;return{ax:Math.cos(E).toFixed(7),ay:Math.sin(E).toFixed(7),bx:(L*F+P*D).toFixed(7),by:(L*D-P*F).toFixed(7),cx:(L*F-P*D).toFixed(7),cy:(L*D+P*F).toFixed(7),dx:Math.cos(E+T).toFixed(7),dy:Math.sin(E+T).toFixed(7)}}},{key:"arc",value:function(E,T,I,k,F,D,L){var P,R=this.drawingContext,V=I/2,G=k/2,U=[];for(E+=V,T+=G;1e-5<=D-F;)P=Math.min(D-F,c.HALF_PI),U.push(this._acuteArcToBezier(F,P)),F+=P;return this._doFill&&(this._clipping||R.beginPath(),U.forEach(function(H,X){X===0&&R.moveTo(E+H.ax*V,T+H.ay*G),R.bezierCurveTo(E+H.bx*V,T+H.by*G,E+H.cx*V,T+H.cy*G,E+H.dx*V,T+H.dy*G)}),L!==c.PIE&&L!=null||R.lineTo(E,T),R.closePath(),this._clipping||R.fill()),this._doStroke&&(this._clipping||R.beginPath(),U.forEach(function(H,X){X===0&&R.moveTo(E+H.ax*V,T+H.ay*G),R.bezierCurveTo(E+H.bx*V,T+H.by*G,E+H.cx*V,T+H.cy*G,E+H.dx*V,T+H.dy*G)}),L===c.PIE?(R.lineTo(E,T),R.closePath()):L===c.CHORD&&R.closePath(),this._clipping||R.stroke()),this}},{key:"ellipse",value:function(P){var T=this.drawingContext,I=this._doFill,k=this._doStroke,F=parseFloat(P[0]),D=parseFloat(P[1]),L=parseFloat(P[2]),P=parseFloat(P[3]);if(I&&!k){if(this._getFill()===y)return this}else if(!I&&k&&this._getStroke()===y)return this;F+=L/2,D+=P/2,L/=2,P/=2,this._clipping||T.beginPath(),T.ellipse(F,D,L,P,0,0,2*Math.PI),!this._clipping&&I&&T.fill(),!this._clipping&&k&&T.stroke()}},{key:"line",value:function(E,T,I,k){var F=this.drawingContext;return this._doStroke&&this._getStroke()!==y&&(this._clipping||F.beginPath(),F.moveTo(E,T),F.lineTo(I,k),F.stroke()),this}},{key:"point",value:function(E,T){var I,k,F=this.drawingContext;return!this._doStroke||this._getStroke()===y?this:(I=this._getStroke(),k=this._getFill(),this._clipping||this._setFill(I),this._clipping||F.beginPath(),F.arc(E,T,F.lineWidth/2,0,c.TWO_PI,!1),void(this._clipping||(F.fill(),this._setFill(k))))}},{key:"quad",value:function(E,T,I,k,F,D,L,P){var R=this.drawingContext,V=this._doFill,G=this._doStroke;if(V&&!G){if(this._getFill()===y)return this}else if(!V&&G&&this._getStroke()===y)return this;return this._clipping||R.beginPath(),R.moveTo(E,T),R.lineTo(I,k),R.lineTo(F,D),R.lineTo(L,P),R.closePath(),!this._clipping&&V&&R.fill(),!this._clipping&&G&&R.stroke(),this}},{key:"rect",value:function(G){var T,I,k=G[0],F=G[1],D=G[2],L=G[3],P=G[4],R=G[5],V=G[6],G=G[7],U=this.drawingContext,H=this._doFill,X=this._doStroke;if(H&&!X){if(this._getFill()===y)return this}else if(!H&&X&&this._getStroke()===y)return this;return this._clipping||U.beginPath(),P===void 0?U.rect(k,F,D,L):(R===void 0&&(R=P),V===void 0&&(V=R),G===void 0&&(G=V),X=(H=Math.abs(D))/2,I=(T=Math.abs(L))/2,T<2*(P=H<2*P?X:P)&&(P=I),T<2*(R=H<2*R?X:R)&&(R=I),T<2*(V=H<2*V?X:V)&&(V=I),T<2*(G=H<2*G?X:G)&&(G=I),this._clipping||U.beginPath(),U.moveTo(k+P,F),U.arcTo(k+D,F,k+D,F+L,R),U.arcTo(k+D,F+L,k,F+L,V),U.arcTo(k,F+L,k,F,G),U.arcTo(k,F,k+D,F,P),U.closePath()),!this._clipping&&this._doFill&&U.fill(),!this._clipping&&this._doStroke&&U.stroke(),this}},{key:"triangle",value:function(V){var T=this.drawingContext,I=this._doFill,k=this._doStroke,F=V[0],D=V[1],L=V[2],P=V[3],R=V[4],V=V[5];if(I&&!k){if(this._getFill()===y)return this}else if(!I&&k&&this._getStroke()===y)return this;this._clipping||T.beginPath(),T.moveTo(F,D),T.lineTo(L,P),T.lineTo(R,V),T.closePath(),!this._clipping&&I&&T.fill(),!this._clipping&&k&&T.stroke()}},{key:"endShape",value:function(E,T,I,k,F,D,L){if(T.length!==0&&(this._doStroke||this._doFill)){var P,R,V,G=E===c.CLOSE,U=(G&&!D&&T.push(T[0]),T.length);if(I&&L===null){if(3<U){var H=[],X=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[1][0],T[1][1]),R=1;R+2<U;R++)P=T[R],H[0]=[P[0],P[1]],H[1]=[P[0]+(X*T[R+1][0]-X*T[R-1][0])/6,P[1]+(X*T[R+1][1]-X*T[R-1][1])/6],H[2]=[T[R+1][0]+(X*T[R][0]-X*T[R+2][0])/6,T[R+1][1]+(X*T[R][1]-X*T[R+2][1])/6],H[3]=[T[R+1][0],T[R+1][1]],this.drawingContext.bezierCurveTo(H[1][0],H[1][1],H[2][0],H[2][1],H[3][0],H[3][1]);G&&this.drawingContext.lineTo(T[R+1][0],T[R+1][1]),this._doFillStrokeClose(G)}}else if(k&&L===null){for(this._clipping||this.drawingContext.beginPath(),R=0;R<U;R++)T[R].isVert?T[R].moveTo?this.drawingContext.moveTo(T[R][0],T[R][1]):this.drawingContext.lineTo(T[R][0],T[R][1]):this.drawingContext.bezierCurveTo(T[R][0],T[R][1],T[R][2],T[R][3],T[R][4],T[R][5]);this._doFillStrokeClose(G)}else if(F&&L===null){for(this._clipping||this.drawingContext.beginPath(),R=0;R<U;R++)T[R].isVert?T[R].moveTo?this.drawingContext.moveTo(T[R][0],T[R][1]):this.drawingContext.lineTo(T[R][0],T[R][1]):this.drawingContext.quadraticCurveTo(T[R][0],T[R][1],T[R][2],T[R][3]);this._doFillStrokeClose(G)}else if(L===c.POINTS)for(R=0;R<U;R++)P=T[R],this._doStroke&&this._pInst.stroke(P[6]),this._pInst.point(P[0],P[1]);else if(L===c.LINES)for(R=0;R+1<U;R+=2)P=T[R],this._doStroke&&this._pInst.stroke(T[R+1][6]),this._pInst.line(P[0],P[1],T[R+1][0],T[R+1][1]);else if(L===c.TRIANGLES)for(R=0;R+2<U;R+=3)P=T[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0],P[1]),this.drawingContext.lineTo(T[R+1][0],T[R+1][1]),this.drawingContext.lineTo(T[R+2][0],T[R+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(T[R+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(T[R+2][6]),this.drawingContext.stroke());else if(L===c.TRIANGLE_STRIP)for(R=0;R+1<U;R++)P=T[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[R+1][0],T[R+1][1]),this.drawingContext.lineTo(P[0],P[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+1][5]),R+2<U&&(this.drawingContext.lineTo(T[R+2][0],T[R+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+2][5])),this._doFillStrokeClose(G);else if(L===c.TRIANGLE_FAN){if(2<U){for(this._clipping||this.drawingContext.beginPath(),R=2;R<U;R++)P=T[R],this.drawingContext.moveTo(T[0][0],T[0][1]),this.drawingContext.lineTo(T[R-1][0],T[R-1][1]),this.drawingContext.lineTo(P[0],P[1]),this.drawingContext.lineTo(T[0][0],T[0][1]),R<U-1&&(this._doFill&&P[5]!==T[R+1][5]||this._doStroke&&P[6]!==T[R+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(P[5]),this.drawingContext.fill(),this._pInst.fill(T[R+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(P[6]),this.drawingContext.stroke(),this._pInst.stroke(T[R+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(G)}}else if(L===c.QUADS)for(R=0;R+3<U;R+=4){for(P=T[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0],P[1]),V=1;V<4;V++)this.drawingContext.lineTo(T[R+V][0],T[R+V][1]);this.drawingContext.lineTo(P[0],P[1]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+3][6]),this._doFillStrokeClose(G)}else if(L===c.QUAD_STRIP){if(3<U)for(R=0;R+1<U;R+=2)P=T[R],this._clipping||this.drawingContext.beginPath(),R+3<U?(this.drawingContext.moveTo(T[R+2][0],T[R+2][1]),this.drawingContext.lineTo(P[0],P[1]),this.drawingContext.lineTo(T[R+1][0],T[R+1][1]),this.drawingContext.lineTo(T[R+3][0],T[R+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+3][6])):(this.drawingContext.moveTo(P[0],P[1]),this.drawingContext.lineTo(T[R+1][0],T[R+1][1])),this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[0][0],T[0][1]),R=1;R<U;R++)(P=T[R]).isVert&&(P.moveTo?(G&&this.drawingContext.closePath(),this.drawingContext.moveTo(P[0],P[1])):this.drawingContext.lineTo(P[0],P[1]));this._doFillStrokeClose(G)}D=F=k=I=!1,G&&T.pop()}return this}},{key:"strokeCap",value:function(E){return E!==c.ROUND&&E!==c.SQUARE&&E!==c.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==c.ROUND&&E!==c.BEVEL&&E!==c.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,T,I,k,F,D,L,P){return this._pInst.beginShape(),this._pInst.vertex(E,T),this._pInst.bezierVertex(I,k,F,D,L,P),this._pInst.endShape(),this}},{key:"curve",value:function(E,T,I,k,F,D,L,P){return this._pInst.beginShape(),this._pInst.curveVertex(E,T),this._pInst.curveVertex(I,k),this._pInst.curveVertex(F,D),this._pInst.curveVertex(L,P),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,T,I,k,F,D){this.drawingContext.transform(E,T,I,k,F,D)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,T){return this.drawingContext.scale(E,T),this}},{key:"translate",value:function(E,T){return E instanceof u.default.Vector&&(T=E.y,E=E.x),this.drawingContext.translate(E,T),this}},{key:"_renderText",value:function(E,T,I,k,F,D){if(!(k<D||F<=k))return E.push(),this._isOpenType()?this._textFont._renderPath(T,I,k,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(T,I,k),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(T,I,k))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E=this._pInst,T=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),T=this._textFont,this._isOpenType()&&(T=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),T||"sans-serif");return/\s/.exec(T)&&(T='"'.concat(T,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(T),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,E}},{key:"push",value:function(){return this.drawingContext.save(),p(g(C.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,p(g(C.prototype),"pop",this).call(this,E)}}])&&d(w.prototype,v),_&&d(w,_),C}(u.default.Renderer),x=(b.prototype.text=function(v,w,_,T,C){T!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(E=!0,this.drawingContext.textBaseline=c.TOP);var E,T=u.default.Renderer.prototype.text.apply(this,arguments);return E&&(this.drawingContext.textBaseline=c.BASELINE),T},u.default.Renderer2D=b,u.default.Renderer2D);s.default=x},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(o=o("./main"))&&o.__esModule?o:{default:o};a.default.prototype._promisePreloads=[];function l(){return{}}var u=!(a.default.prototype.registerPromisePreload=function(c){a.default.prototype._promisePreloads.push(c)});a.default.prototype._setupPromisePreloads=function(){var c=!0,f=!1,d=void 0;try{for(var p,h=this._promisePreloads[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value,g=this,y=m.method,b=m.addCallbacks,x=m.legacyPreloadSetup,v=m.target||this,w=v[y].bind(v);if(v===a.default.prototype){if(u)continue;g=null,w=v[y]}v[y]=this._wrapPromisePreload(g,w,b),x&&(v[x.method]=this._legacyPreloadGenerator(g,x,v[y]))}}catch(_){f=!0,d=_}finally{try{c||h.return==null||h.return()}finally{if(f)throw d}}u=!0},a.default.prototype._wrapPromisePreload=function(c,f,d){var p=function(){for(var h=this,m=(this._incrementPreload(),null),g=null,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(d)for(var v=b.length-1;0<=v&&!g&&typeof b[v]=="function";v--)g=m,m=b.pop();var w=Promise.resolve(f.apply(this,b));return m&&w.then(m),g&&w.catch(g),w.then(function(){return h._decrementPreload()}),w};return p=c?p.bind(c):p},a.default.prototype._legacyPreloadGenerator=function(c,h,d){var p=h.createBaseObject||l,h=function(){var m=this;this._incrementPreload();for(var g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];var x=p.apply(this,y);return d.apply(this,y).then(function(v){Object.assign(x,v),m._decrementPreload()}),x};return h=c?h.bind(c):h}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=o("./main"))&&p.__esModule?p:{default:p},u=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function f(h){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("./p5.Graphics"),o("./p5.Renderer2D"),o("../webgl/p5.RendererGL");var d="defaultCanvas0",p=(l.default.prototype.createCanvas=function(h,m,g,y){var b,x,v;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(g=u.P2D,y=arguments[2]):b=g||u.P2D,y)(v=document.getElementById(d))&&v.parentNode.removeChild(v),v=y,this._defaultGraphicsCreated=!1;else{if(b===u.WEBGL)(v=document.getElementById(d))&&(v.parentNode.removeChild(v),x=this._renderer,this._elements=this._elements.filter(function(_){return _!==x})),(v=document.createElement("canvas")).id=d,v.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)v=this.canvas;else{v=y||document.createElement("canvas");for(var w=0;document.getElementById("defaultCanvas".concat(w));)w++;d="defaultCanvas".concat(w),v.id=d,v.classList.add("p5Canvas")}this._setupDone||(v.dataset.hidden=!0,v.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(g=document.createElement("main"),document.body.appendChild(g)),document.getElementsByTagName("main")[0])).appendChild(v)}return b===u.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(v,this,!0)),this._elements.push(this._renderer),h=(y=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=y.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(v,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(h,m),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(h,m,g){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,b,x,v={};for(y in this.drawingContext){var w=this.drawingContext[y];f(w)!=="object"&&typeof w!="function"&&(v[y]=w)}for(x in this._renderer instanceof l.default.RendererGL&&(h=(b=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=b.adjustedHeight),this.width=h,this.height=m,this._renderer.resize(h,m),v)try{this.drawingContext[x]=v[x]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},l.default.prototype.createGraphics=function(h,m){for(var g=arguments.length,y=new Array(2<g?g-2:0),b=2;b<g;b++)y[b-2]=arguments[b];return y[0]instanceof HTMLCanvasElement&&(y[1]=y[0],y[0]=u.P2D),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(h,m,y[0],this,y[1])},l.default.prototype.createFramebuffer=function(h){return new l.default.Framebuffer(this,h)},l.default.prototype.clearDepth=function(h){this._assert3d("clearDepth"),this._renderer.clearDepth(h)},l.default.prototype.blendMode=function(h){l.default._validateParameters("blendMode",arguments),h===u.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),h=u.BLEND),this._renderer.blendMode(h)},l.default);s.default=p},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(o("../main")),c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=d();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../constants")),f=p(o("../helpers"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){return m&&m.__esModule?m:{default:m}}function h(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),u.default.prototype._normalizeArcAngles=function(m,g,y,b,x){var v;return m-=c.TWO_PI*Math.floor(m/c.TWO_PI),g-=c.TWO_PI*Math.floor(g/c.TWO_PI),v=Math.min(Math.abs(m-g),c.TWO_PI-Math.abs(m-g)),x&&(m=m<=c.HALF_PI?Math.atan(y/b*Math.tan(m)):m>c.HALF_PI&&m<=3*c.HALF_PI?Math.atan(y/b*Math.tan(m))+c.PI:Math.atan(y/b*Math.tan(m))+c.TWO_PI,g=g<=c.HALF_PI?Math.atan(y/b*Math.tan(g)):g>c.HALF_PI&&g<=3*c.HALF_PI?Math.atan(y/b*Math.tan(g))+c.PI:Math.atan(y/b*Math.tan(g))+c.TWO_PI),g<m&&(g+=c.TWO_PI),{start:m,stop:g,correspondToSamePoint:v<1e-5}},u.default.prototype.arc=function(m,g,y,b,x,v,w,_){return u.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==v&&(x=this._toRadians(x),v=this._toRadians(v),y=Math.abs(y),b=Math.abs(b),m=f.default.modeAdjust(m,g,y,b,this._renderer._ellipseMode),(g=this._normalizeArcAngles(x,v,m.w,m.h,!0)).correspondToSamePoint?this._renderer.ellipse([m.x,m.y,m.w,m.h,_]):(this._renderer.arc(m.x,m.y,m.w,m.h,g.start,g.stop,w,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[m.x,m.y,m.w,m.h,g.start,g.stop,w]))),this},u.default.prototype.ellipse=function(m,g,y,b,x){return u.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},u.default.prototype.circle=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.default._validateParameters("circle",g);var b=g.slice(0,2);return b.push(g[2],g[2]),this._renderEllipse.apply(this,h(b))},u.default.prototype._renderEllipse=function(m,g,y,b,x){return(this._renderer._doStroke||this._renderer._doFill)&&(y<0&&(y=Math.abs(y)),b===void 0?b=y:b<0&&(b=Math.abs(b)),m=f.default.modeAdjust(m,g,y,b,this._renderer._ellipseMode),this._renderer.ellipse([m.x,m.y,m.w,m.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[m.x,m.y,m.w,m.h])),this},u.default.prototype.line=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("line",y),this._renderer._doStroke&&(m=this._renderer).line.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",y),this},u.default.prototype.point=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("point",y),this._renderer._doStroke&&(y.length===1&&y[0]instanceof u.default.Vector?this._renderer.point.call(this._renderer,y[0].x,y[0].y,y[0].z):((m=this._renderer).point.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",y))),this},u.default.prototype.quad=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("quad",y),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&y.length<12?this._renderer.quad.call(this._renderer,y[0],y[1],0,y[2],y[3],0,y[4],y[5],0,y[6],y[7],0,y[8],y[9]):((m=this._renderer).quad.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",y))),this},u.default.prototype.rect=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return u.default._validateParameters("rect",g),this._renderRect.apply(this,g)},u.default.prototype.square=function(m,g,y,b,x,v,w){return u.default._validateParameters("square",arguments),this._renderRect.call(this,m,g,y,y,b,x,v,w)},u.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var m=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),g=[m.x,m.y,m.w,m.h],y=4;y<arguments.length;y++)g[y]=arguments[y];this._renderer.rect(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[m.x,m.y,m.w,m.h])}return this},u.default.prototype.triangle=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return u.default._validateParameters("triangle",g),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",g),this},o=u.default,s.default=o},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype.ellipseMode=function(p){return u.default._validateParameters("ellipseMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._ellipseMode=p),this},u.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},u.default.prototype.rectMode=function(p){return u.default._validateParameters("rectMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._rectMode=p),this},u.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},u.default.prototype.strokeCap=function(p){return u.default._validateParameters("strokeCap",arguments),p!==c.ROUND&&p!==c.SQUARE&&p!==c.PROJECT||this._renderer.strokeCap(p),this},u.default.prototype.strokeJoin=function(p){return u.default._validateParameters("strokeJoin",arguments),p!==c.ROUND&&p!==c.BEVEL&&p!==c.MITER||this._renderer.strokeJoin(p),this},u.default.prototype.strokeWeight=function(p){return u.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(p),this};var d=u.default;s.default=d},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(l=o("../main"))&&l.__esModule?l:{default:l};o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(u=this._renderer).bezier.apply(u,f),this},a.default.prototype.bezierDetail=function(u){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=u,this},a.default.prototype.bezierPoint=function(u,c,f,d,p){a.default._validateParameters("bezierPoint",arguments);var h=1-p;return Math.pow(h,3)*u+3*Math.pow(h,2)*p*c+3*h*Math.pow(p,2)*f+Math.pow(p,3)*d},a.default.prototype.bezierTangent=function(u,c,f,d,p){a.default._validateParameters("bezierTangent",arguments);var h=1-p;return 3*d*Math.pow(p,2)-3*f*Math.pow(p,2)+6*f*h*p-6*c*h*p+3*c*Math.pow(h,2)-3*u*Math.pow(h,2)},a.default.prototype.curve=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("curve",f),this._renderer._doStroke&&(u=this._renderer).curve.apply(u,f),this},a.default.prototype.curveDetail=function(u){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=u<3?3:u,this},a.default.prototype.curveTightness=function(u){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=u,this},a.default.prototype.curvePoint=function(u,c,f,d,p){a.default._validateParameters("curvePoint",arguments);var h=this._renderer._curveTightness,m=p*p*p,g=p*p;return u*((h-1)/2*m+(1-h)*g+(h-1)/2*p)+c*((h+3)/2*m+(-5-h)/2*g+1)+f*((-3-h)/2*m+(h+2)*g+(1-h)/2*p)+d*((1-h)/2*m+(h-1)/2*g)},a.default.prototype.curveTangent=function(u,c,f,d,g){a.default._validateParameters("curveTangent",arguments);var h=this._renderer._curveTightness,m=g*g*3,g=2*g;return u*((h-1)/2*m+(1-h)*g+(h-1)/2)+c*((h+3)/2*m+(-5-h)/2*g)+f*((-3-h)/2*m+(h+2)*g+(1-h)/2)+d*((1-h)/2*m+(h-1)/2*g)};var l=a.default;s.default=l},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(o,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(v=o("../main"))&&v.__esModule?v:{default:v},c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=f();if(_&&_.has(w))return _.get(w);var S,C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(C,S,T):C[S]=w[S])}return C.default=w,_&&_.set(w,C),C}(o("../constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}var d=null,p=[],h=[],m=!1,g=!1,y=!1,b=!1,x=!0,v=(u.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(h=[],b=!0),this},u.default.prototype.beginShape=function(w){var _;return u.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(_=this._renderer).beginShape.apply(_,arguments):(d=w===c.POINTS||w===c.LINES||w===c.TRIANGLES||w===c.TRIANGLE_FAN||w===c.TRIANGLE_STRIP||w===c.QUADS||w===c.QUAD_STRIP?w:null,p=[],h=[]),this},u.default.prototype.bezierVertex=function(){for(var w,_=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];if(u.default._validateParameters("bezierVertex",S),this._renderer.isP3D)(w=this._renderer).bezierVertex.apply(w,S);else if(p.length===0)u.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{m=!0;for(var E=[],T=0;T<S.length;T++)E[T]=S[T];E.isVert=!1,(b?h:p).push(E)}return this},u.default.prototype.curveVertex=function(){for(var w,_=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];return u.default._validateParameters("curveVertex",S),this._renderer.isP3D?(w=this._renderer).curveVertex.apply(w,S):(g=!0,this.vertex(S[0],S[1])),this},u.default.prototype.endContour=function(){if(!this._renderer.isP3D){var w=h[0].slice();w.isVert=h[0].isVert,w.moveTo=!1,h.push(w),x&&(p.push(p[0]),x=!1);for(var _=0;_<h.length;_++)p.push(h[_])}return this},u.default.prototype.endShape=function(w){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(u.default._validateParameters("endShape",arguments),_<1&&(console.log("\u{1F338} p5.js says: You can not have less than one instance"),_=1),this._renderer.isP3D)this._renderer.endShape(w,g,m,y,b,d,_);else{if(_!==1&&console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode"),p.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;_=w===c.CLOSE,_&&!b&&p.push(p[0]),this._renderer.endShape(w,p,g,m,y,b,d),x=!(b=y=m=g=!1),_&&p.pop()}return this},u.default.prototype.quadraticVertex=function(){for(var w,_=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];if(u.default._validateParameters("quadraticVertex",S),this._renderer.isP3D)(w=this._renderer).quadraticVertex.apply(w,S);else{if(this._contourInited)return(w={}).x=S[0],w.y=S[1],w.x3=S[2],w.y3=S[3],w.type=c.QUADRATIC,this._contourVertices.push(w),this;if(0<p.length){y=!0;for(var E=[],T=0;T<S.length;T++)E[T]=S[T];E.isVert=!1,(b?h:p).push(E)}else u.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},u.default.prototype.vertex=function(w,_,S,C,E){var T;return this._renderer.isP3D?(T=this._renderer).vertex.apply(T,arguments):((T=[]).isVert=!0,T[0]=w,T[1]=_,T[2]=0,T[3]=0,T[4]=0,T[5]=this._renderer._getFill(),T[6]=this._renderer._getStroke(),S&&(T.moveTo=S),(b?(h.length===0&&(T.moveTo=!0),h):p).push(T)),this},u.default.prototype.normal=function(w,_,S){var C;return this._assert3d("normal"),u.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this},u.default);s.default=v},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(o,i,s){},{}],292:[function(o,i,s){"use strict";o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.noLoop=function(){this._loop=!1},o.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},o.default.prototype.isLooping=function(){return this._loop},o.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},o.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},o.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var l=parseInt(a),u=((isNaN(l)||l<1)&&(l=1),this._isGlobal?window:this);if(typeof u.draw=="function"){u.setup===void 0&&u.scale(u._pixelDensity,u._pixelDensity);for(var c=0;c<l;c++){u.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),u._renderer.isP3D&&u._renderer._update(),u._setProperty("frameCount",u.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{u.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},o=o.default,s.default=o},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var u=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||u?(u=this._renderer).applyMatrix.apply(u,l(arguments.length<=0?void 0:arguments[0])):(u=this._renderer).applyMatrix.apply(u,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(u,c){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(u),c),this},a.default.prototype.rotateX=function(u){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(u)),this},a.default.prototype.rotateY=function(u){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(u)),this},a.default.prototype.rotateZ=function(u){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(u)),this},a.default.prototype.scale=function(u,c,f){var d;return a.default._validateParameters("scale",arguments),u instanceof a.default.Vector?(u=(d=u).x,c=d.y,f=d.z):Array.isArray(u)&&(u=(d=u)[0],c=d[1],f=d[2]||1),isNaN(c)?c=f=u:isNaN(f)&&(f=1),this._renderer.scale(u,c,f),this},a.default.prototype.shearX=function(u){return a.default._validateParameters("shearX",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,0,Math.tan(u),1,0,0),this},a.default.prototype.shearY=function(u){return a.default._validateParameters("shearY",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,Math.tan(u),0,1,0,0),this},a.default.prototype.translate=function(u,c,f){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(u,c,f):this._renderer.translate(u,c),this},o=a.default,s.default=o},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator");var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(f){return function(d){if(Array.isArray(d)){for(var p=0,h=new Array(d.length);p<d.length;p++)h[p]=d[p];return h}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default.prototype.storeItem=function(f,d){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),d===void 0&&console.log("You cannot store undefined variables using storeItem().");var p=c(d);switch(p){case"number":case"boolean":d=d.toString();break;case"object":d instanceof l.default.Color?p="p5.Color":d instanceof l.default.Vector&&(p="p5.Vector",d=[d.x,d.y,d.z]),d=JSON.stringify(d)}localStorage.setItem(f,d),f="".concat(f,"p5TypeID"),localStorage.setItem(f,p)},l.default.prototype.getItem=function(f){var d=localStorage.getItem(f),p=localStorage.getItem("".concat(f,"p5TypeID"));if(p===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(d!==null)switch(p){case"number":d=parseFloat(d);break;case"boolean":d=d==="true";break;case"object":d=JSON.parse(d);break;case"p5.Color":d=JSON.parse(d),d=this.color.apply(this,u(d.levels));break;case"p5.Vector":d=JSON.parse(d),d=this.createVector.apply(this,u(d))}return d},l.default.prototype.clearStorage=function(){var f=this;Object.keys(localStorage).forEach(function(d){d.endsWith("p5TypeID")&&f.removeItem(d.replace("p5TypeID",""))})},l.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.object.keys"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(o=o("../core/main"))&&o.__esModule?o:{default:o};function c(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&f(y,b)}function f(y,b){return(f=Object.setPrototypeOf||function(x,v){return x.__proto__=v,x})(y,b)}function d(y){return function(){var b,x=p(y),x=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=p(this).constructor,Reflect.construct(x,arguments,b)):x.apply(this,arguments),this);if(!b||l(b)!=="object"&&typeof b!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function p(y){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(y)}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function m(y,b){for(var x=0;x<b.length;x++){var v=b[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}function g(y,b,x){b&&m(y.prototype,b),x&&m(y,x)}u.default.prototype.createStringDict=function(y,b){return u.default._validateParameters("createStringDict",arguments),new u.default.StringDict(y,b)},u.default.prototype.createNumberDict=function(y,b){return u.default._validateParameters("createNumberDict",arguments),new u.default.NumberDict(y,b)},u.default.TypedDict=function(){function y(b,x){return h(this,y),b instanceof Object?this.data=b:(this.data={},this.data[b]=x),this}return g(y,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,x){this._validate(x)?this.data[b]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var x in b)this.set(x,b[x])}},{key:"create",value:function(b,x){b instanceof Object&&x===void 0?this._addObj(b):b!==void 0?this.set(b,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var x,v="";for(x in this.data)v+="".concat(x,",").concat(this.data[x],`
`);var w=new Blob([v],{type:"text/csv"});u.default.prototype.downloadFile(w,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,x){u.default.prototype.saveJSON(this.data,b,x)}},{key:"_validate",value:function(b){return!0}}]),y}(),u.default.StringDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){h(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="string"}}]),b}(),u.default.NumberDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){h(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]+=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,v){this.add(x,-v)}},{key:"mult",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]*=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]/=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var v,w=this.data[Object.keys(this.data)[0]];for(v in this.data)this.data[v]*x<w*x&&(w=this.data[v]);return w}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var v=Object.keys(this.data)[0],w=1;w<Object.keys(this.data).length;w++)Object.keys(this.data)[w]*x<v*x&&(v=Object.keys(this.data)[w]);return v}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),o=u.default.TypedDict,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function c(v,w,_){w&&u(v.prototype,w),_&&u(v,_)}function f(v,w){return(f=Object.setPrototypeOf||function(_,S){return _.__proto__=S,_})(v,w)}function d(v){return function(){var w,_,S=h(v);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(S,arguments,w)):S.apply(this,arguments),S=this,!(_=w)||g(_)!=="object"&&typeof _!="function"?p(S):_}}function p(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}function y(v,w,_){return(w._userNode||document.body).appendChild(v),_=new(_?l.default.MediaElement:l.default.Element)(v,w),w._elements.push(_),_}function b(v,T,_,S){var C=document.createElement(T),E=(typeof(_=_||"")=="string"&&(_=[_]),!0),T=!1,I=void 0;try{for(var k,F=_[Symbol.iterator]();!(E=(k=F.next()).done);E=!0){var D=k.value,L=document.createElement("source");L.setAttribute("src",D),C.appendChild(L)}}catch(R){T=!0,I=R}finally{try{E||F.return==null||F.return()}finally{if(T)throw I}}typeof S=="function"&&C.addEventListener("canplaythrough",function R(){S(),C.removeEventListener("canplaythrough",R)});var P=y(C,v,!0);return P.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){P.width=C.videoWidth,P.height=C.videoHeight,P.elt.width===0&&(P.elt.width=C.videoWidth),P.elt.height===0&&(P.elt.height=C.videoHeight),P.presetPlaybackRate&&(P.elt.playbackRate=P.presetPlaybackRate,delete P.presetPlaybackRate),P.loadedmetadata=!0}),P}l.default.prototype.select=function(v,w){return l.default._validateParameters("select",arguments),w=this._getContainer(w).querySelector(v),w?this._wrapElement(w):null},l.default.prototype.selectAll=function(v,w){l.default._validateParameters("selectAll",arguments);var _=[],S=this._getContainer(w).querySelectorAll(v);if(S)for(var C=0;C<S.length;C++){var E=this._wrapElement(S[C]);_.push(E)}return _},l.default.prototype._getContainer=function(v){var w=document;return typeof v=="string"?w=document.querySelector(v)||document:v instanceof l.default.Element?w=v.elt:v instanceof HTMLElement&&(w=v),w},l.default.prototype._wrapElement=function(v){var w,_=Array.prototype.slice.call(v.children);return v.tagName==="INPUT"&&v.type==="checkbox"?((w=new l.default.Element(v,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},w):v.tagName==="VIDEO"||v.tagName==="AUDIO"?new l.default.MediaElement(v,this):v.tagName==="SELECT"?this.createSelect(new l.default.Element(v,this)):0<_.length&&_.every(function(S){return S.tagName==="INPUT"||S.tagName==="LABEL"})?this.createRadio(new l.default.Element(v,this)):new l.default.Element(v,this)},l.default.prototype.removeElements=function(v){l.default._validateParameters("removeElements",arguments),this._elements.filter(function(w){return!(w.elt instanceof HTMLCanvasElement)}).map(function(w){return w.remove()})},l.default.Element.prototype.changed=function(v){return l.default.Element._adjustListener("change",v,this),this},l.default.Element.prototype.input=function(v){return l.default.Element._adjustListener("input",v,this),this},l.default.prototype.createDiv=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("div");return w.innerHTML=v,y(w,this)},l.default.prototype.createP=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("p");return w.innerHTML=v,y(w,this)},l.default.prototype.createSpan=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("span");return w.innerHTML=v,y(w,this)},l.default.prototype.createImg=function(){l.default._validateParameters("createImg",arguments);var v,w=document.createElement("img"),_=arguments;return 1<_.length&&typeof _[1]=="string"&&(w.alt=_[1]),2<_.length&&typeof _[2]=="string"&&(w.crossOrigin=_[2]),w.src=_[0],v=y(w,this),w.addEventListener("load",function(){v.width=w.offsetWidth||w.width,v.height=w.offsetHeight||w.height;var S=_[_.length-1];typeof S=="function"&&S(v)}),v},l.default.prototype.createA=function(v,w,_){l.default._validateParameters("createA",arguments);var S=document.createElement("a");return S.href=v,S.innerHTML=w,_&&(S.target=_),y(S,this)},l.default.prototype.createSlider=function(v,w,_,S){l.default._validateParameters("createSlider",arguments);var C=document.createElement("input");return C.type="range",C.min=v,C.max=w,S===0?C.step=1e-18:S&&(C.step=S),typeof _=="number"&&(C.value=_),y(C,this)},l.default.prototype.createButton=function(v,w){l.default._validateParameters("createButton",arguments);var _=document.createElement("button");return _.innerHTML=v,w&&(_.value=w),y(_,this)},l.default.prototype.createCheckbox=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];l.default._validateParameters("createCheckbox",w);var S=document.createElement("div"),C=document.createElement("input"),E=(C.type="checkbox",document.createElement("label")),T=(E.appendChild(C),S.appendChild(E),y(S,this));return T.checked=function(){var I=T.elt.firstElementChild.getElementsByTagName("input")[0];if(I){if(arguments.length===0)return I.checked;I.checked=!(arguments.length<=0||!arguments[0])}return T},this.value=function(I){return T.value=I,this},w[0]&&(T.value(w[0]),(S=document.createElement("span")).innerHTML=w[0],E.appendChild(S)),w[1]&&(C.checked=!0),T},l.default.prototype.createSelect=function(){for(var v,w=arguments.length,_=new Array(w),S=0;S<w;S++)_[S]=arguments[S];l.default._validateParameters("createSelect",_);var C,E=_[0];return E instanceof l.default.Element&&E.elt instanceof HTMLSelectElement?this.elt=(v=E).elt:E instanceof HTMLSelectElement?(v=y(E,this),this.elt=E):(C=document.createElement("select"),E&&typeof E=="boolean"&&C.setAttribute("multiple","true"),v=y(C,this),this.elt=C),v.option=function(T,I){var k;if(T!==void 0){for(var F,D=0;D<this.elt.length;D+=1)if(this.elt[D].textContent===T){k=D;break}k!==void 0?I===!1?this.elt.remove(k):this.elt[k].value=I:((F=document.createElement("option")).textContent=T,F.value=I===void 0?T:I,this.elt.appendChild(F),this._pInst._elements.push(F))}},v.selected=function(T){if(T!==void 0){for(var I=0;I<this.elt.length;I+=1)this.elt[I].value.toString()===T.toString()&&(this.elt.selectedIndex=I);return this}if(this.elt.getAttribute("multiple")){var k=[],F=!0,D=!1,L=void 0;try{for(var P,R=this.elt.selectedOptions[Symbol.iterator]();!(F=(P=R.next()).done);F=!0){var V=P.value;k.push(V.value)}}catch(G){D=!0,L=G}finally{try{F||R.return==null||R.return()}finally{if(D)throw L}}return k}return this.elt.value},v.disable=function(T){if(typeof T=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===T&&(this.elt[I].disabled=!0,this.elt[I].selected=!1);else this.elt.disabled=!0;return this},v.enable=function(T){if(typeof T=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===T&&(this.elt[I].disabled=!1,this.elt[I].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},v},l.default.prototype.createRadio=function(){function v(T){return T instanceof HTMLInputElement&&T.type==="radio"}function w(T){return T instanceof HTMLLabelElement}var _,S,C,E=arguments.length<=0?void 0:arguments[0];return E instanceof l.default.Element&&(E.elt instanceof HTMLDivElement||E.elt instanceof HTMLSpanElement)?(_=E,this.elt=E.elt):E instanceof HTMLDivElement||E instanceof HTMLSpanElement?(_=y(E,this),S=this.elt=E,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(C=arguments.length<=1?void 0:arguments[1])):(typeof E=="string"&&(C=E),S=document.createElement("div"),_=y(S,this),this.elt=S),_._name=C||"radioOption",_._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(T){return v(T)||w(T)&&v(T.firstElementChild)}).map(function(T){return v(T)?T:T.firstElementChild})},_.option=function(T,I){var k,F,D,L=!0,P=!1,R=void 0;try{for(var V,G=_._getOptionsArray()[Symbol.iterator]();!(L=(V=G.next()).done);L=!0){var U=V.value;if(U.value===T){k=U;break}}}catch(H){P=!0,R=H}finally{try{L||G.return==null||G.return()}finally{if(P)throw R}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",T)),k.setAttribute("name",_._name),w(k.parentElement)?F=k.parentElement:(F=document.createElement("label")).insertAdjacentElement("afterbegin",k),F.lastElementChild instanceof HTMLSpanElement?D=F.lastElementChild:(D=document.createElement("span"),k.insertAdjacentElement("afterend",D)),D.innerHTML=I===void 0?T:I,this.elt.appendChild(F),k},_.remove=function(T){var I=!0,k=!1,F=void 0;try{for(var D,L=_._getOptionsArray()[Symbol.iterator]();!(I=(D=L.next()).done);I=!0){var P=D.value;if(P.value===T)return void(w(P.parentElement)?P.parentElement:P).remove()}}catch(R){k=!0,F=R}finally{try{I||L.return==null||L.return()}finally{if(k)throw F}}},_.value=function(){var T="",I=!0,k=!1,F=void 0;try{for(var D,L=_._getOptionsArray()[Symbol.iterator]();!(I=(D=L.next()).done);I=!0){var P=D.value;if(P.checked){T=P.value;break}}}catch(R){k=!0,F=R}finally{try{I||L.return==null||L.return()}finally{if(k)throw F}}return T},_.selected=function(T){var I=null;if(T===void 0){var k=!0,F=!1,D=void 0;try{for(var L,P=_._getOptionsArray()[Symbol.iterator]();!(k=(L=P.next()).done);k=!0){var R=L.value;if(R.checked){I=R;break}}}catch(X){F=!0,D=X}finally{try{k||P.return==null||P.return()}finally{if(F)throw D}}}else{_._getOptionsArray().forEach(function($){$.checked=!1,$.removeAttribute("checked")});var V=!0,F=!1,D=void 0;try{for(var G,U=_._getOptionsArray()[Symbol.iterator]();!(V=(G=U.next()).done);V=!0){var H=G.value;H.value===T&&(H.setAttribute("checked",!0),H.checked=!0,I=H)}}catch($){F=!0,D=$}finally{try{V||U.return==null||U.return()}finally{if(F)throw D}}}return I},_.disable=function(){var T=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],I=!0,k=!1,F=void 0;try{for(var D,L=_._getOptionsArray()[Symbol.iterator]();!(I=(D=L.next()).done);I=!0)D.value.setAttribute("disabled",T)}catch(P){k=!0,F=P}finally{try{I||L.return==null||L.return()}finally{if(k)throw F}}},_},l.default.prototype.createColorPicker=function(v){l.default._validateParameters("createColorPicker",arguments);var w=document.createElement("input");return w.type="color",v?v instanceof l.default.Color?w.value=v.toString("#rrggbb"):(l.default.prototype._colorMode="rgb",l.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},w.value=l.default.prototype.color(v).toString("#rrggbb")):w.value="#000000",(w=y(w,this)).color=function(){return v&&(v.mode&&(l.default.prototype._colorMode=v.mode),v.maxes&&(l.default.prototype._colorMaxes=v.maxes)),l.default.prototype.color(this.elt.value)},w},l.default.prototype.createInput=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",_=(l.default._validateParameters("createInput",arguments),document.createElement("input"));return _.setAttribute("value",v),_.setAttribute("type",w),y(_,this)},l.default.prototype.createFileInput=function(v){var w,_=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(l.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(w=document.createElement("input")).setAttribute("type","file"),_&&w.setAttribute("multiple",!0),w.addEventListener("change",function(S){var C=!0,E=!1,T=void 0;try{for(var I,k=S.target.files[Symbol.iterator]();!(C=(I=k.next()).done);C=!0){var F=I.value;l.default.File._load(F,v)}}catch(D){E=!0,T=D}finally{try{C||k.return==null||k.return()}finally{if(E)throw T}}},!1),y(w,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},l.default.prototype.createVideo=function(v,w){return l.default._validateParameters("createVideo",arguments),b(this,"video",v,w)},l.default.prototype.createAudio=function(v,w){return l.default._validateParameters("createAudio",arguments),b(this,"audio",v,w)},l.default.prototype.VIDEO="video",l.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(v){var w=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return w?new Promise(function(_,S){w.call(navigator,v,_,S)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),l.default.prototype.createCapture=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];if(l.default._validateParameters("createCapture",w),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var S,C=!0,E=!0,T=!1,I=0,k=w;I<k.length;I++){var F=k[I];F===l.default.prototype.VIDEO?E=!1:F===l.default.prototype.AUDIO?C=!1:g(F)==="object"?(F.flipped!==void 0&&(T=F.flipped,delete F.flipped),D=Object.assign({},D,F)):typeof F=="function"&&(S=F)}var D=Object.assign({},{video:C,audio:E},D),L=document.createElement("video"),P=(L.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(D).then(function(R){try{"srcObject"in L?L.srcObject=R:L.src=window.URL.createObjectURL(R)}catch{L.src=R}}).catch(function(R){R.name==="NotFoundError"&&l.default._friendlyError("No webcam found on this device","createCapture"),R.name==="NotAllowedError"&&l.default._friendlyError("Access to the camera was denied","createCapture"),console.error(R)}),y(L,this,!0));return P.loadedmetadata=!1,L.addEventListener("loadedmetadata",function(){L.play(),L.width?(P.width=L.width,P.height=L.height,T&&(P.elt.style.transform="scaleX(-1)")):(P.width=P.elt.width=L.videoWidth,P.height=P.elt.height=L.videoHeight),P.loadedmetadata=!0,S&&S(L.srcObject)}),P.flipped=T,P},l.default.prototype.createElement=function(v,w){return l.default._validateParameters("createElement",arguments),v=document.createElement(v),w!==void 0&&(v.innerHTML=w),y(v,this)},l.default.Element.prototype.addClass=function(v){return this.elt.className?this.hasClass(v)||(this.elt.className=this.elt.className+" "+v):this.elt.className=v,this},l.default.Element.prototype.removeClass=function(v){return this.elt.classList.remove(v),this},l.default.Element.prototype.hasClass=function(v){return this.elt.classList.contains(v)},l.default.Element.prototype.toggleClass=function(v){return this.elt.classList.contains(v)?this.elt.classList.remove(v):this.elt.classList.add(v),this},l.default.Element.prototype.child=function(v){return v===void 0?this.elt.childNodes:(typeof v=="string"?(v[0]==="#"&&(v=v.substring(1)),v=document.getElementById(v)):v instanceof l.default.Element&&(v=v.elt),v instanceof HTMLElement&&this.elt.appendChild(v),this)},l.default.Element.prototype.center=function(v){var w=this.elt.style.display,_=this.elt.style.display==="none",S=this.parent().style.display==="none",C={x:this.elt.offsetLeft,y:this.elt.offsetTop},E=(_&&this.show(),S&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),T=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return v==="both"||v===void 0?this.position(E/2+this.parent().offsetLeft,T/2+this.parent().offsetTop):v==="horizontal"?this.position(E/2+this.parent().offsetLeft,C.y):v==="vertical"&&this.position(C.x,T/2+this.parent().offsetTop),this.style("display",w),_&&this.hide(),S&&this.parent().hide(),this},l.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},l.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},l.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=v,this},l.default.Element.prototype._rotate=function(){var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=v,this},l.default.Element.prototype.style=function(v,w){if((w=w instanceof l.default.Color?"rgba("+w.levels[0]+","+w.levels[1]+","+w.levels[2]+","+w.levels[3]/255+")":w)===void 0){if(v.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(v);for(var _=v.split(";"),S=0;S<_.length;S++){var C=_[S].split(":");C[0]&&C[1]&&(this.elt.style[C[0].trim()]=C[1].trim())}}else this.elt.style[v]=w,v!=="width"&&v!=="height"&&v!=="left"&&v!=="top"||(w=window.getComputedStyle(this.elt).getPropertyValue(v).replace(/[^\d.]/g,""),this[v]=Math.round(parseFloat(w,10)));return this},l.default.Element.prototype.attribute=function(v,w){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return w===void 0?this.elt.getAttribute(v):(this.elt.setAttribute(v,w),this);if(w===void 0)return this.elt.firstChild.getAttribute(v);for(var _=0;_<this.elt.childNodes.length;_++)this.elt.childNodes[_].setAttribute(v,w)},l.default.Element.prototype.removeAttribute=function(v){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var w=0;w<this.elt.childNodes.length;w++)this.elt.childNodes[w].removeAttribute(v);return this.elt.removeAttribute(v),this},l.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},l.default.Element.prototype.show=function(){return this.elt.style.display="block",this},l.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},l.default.Element.prototype.size=function(v,w){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var _=v,S=w,C=l.default.prototype.AUTO;if(_!==C||S!==C){if(_===C?_=w*this.width/this.height:S===C&&(S=v*this.height/this.width),this.elt instanceof HTMLCanvasElement){var E,T={},I=this.elt.getContext("2d");for(E in I)T[E]=I[E];for(E in this.elt.setAttribute("width",_*this._pInst._pixelDensity),this.elt.setAttribute("height",S*this._pInst._pixelDensity),this.elt.style.width=_+"px",this.elt.style.height=S+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),T)this.elt.getContext("2d")[E]=T[E]}else this.elt.style.width=_+"px",this.elt.style.height=S+"px",this.elt.width=_,this.elt.height=S;this.width=_,this.height=S,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",_),this._pInst._setProperty("height",S))}return this},l.default.Element.prototype.remove=function(){this instanceof l.default.MediaElement&&(this.stop(),(w=this.elt.srcObject)!==null&&w.getTracks().forEach(function(_){_.stop()}));var v,w=this._pInst._elements.indexOf(this);for(v in w!==-1&&this._pInst._elements.splice(w,1),this._events)this.elt.removeEventListener(v,this._events[v]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},l.default.Element.prototype.drop=function(v,w){var _;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",_=function(S){S.preventDefault()}),this.elt.addEventListener("dragleave",_)),l.default.Element._attachListener("drop",function(C){C.preventDefault(),typeof w=="function"&&w.call(this,C);var C=C.dataTransfer.files,E=!0,T=!1,I=void 0;try{for(var k,F=C[Symbol.iterator]();!(E=(k=F.next()).done);E=!0){var D=k.value;l.default.File._load(D,v)}}catch(L){T=!0,I=L}finally{try{E||F.return==null||F.return()}finally{if(T)throw I}}},this)):console.log("The File APIs are not fully supported in this browser."),this},l.default.Element.prototype.draggable=function(v){var w,_="ontouchstart"in window,S=0,C=0,E=0,T=0,I=_?"touchend":"mouseup",k=_?"touchmove":"mousemove";function F(L){var P;L=L||window.event,T=_?(P=L.changedTouches,S=E-parseInt(P[0].clientX),C=T-parseInt(P[0].clientY),E=parseInt(P[0].clientX),parseInt(P[0].clientY)):(S=E-parseInt(L.clientX),C=T-parseInt(L.clientY),E=parseInt(L.clientX),parseInt(L.clientY)),v.style.left=v.offsetLeft-S+"px",v.style.top=v.offsetTop-C+"px"}function D(){document.removeEventListener(I,D,!1),document.removeEventListener(k,F,!1)}return v===void 0?w=v=this.elt:v!==this.elt&&v.elt!==this.elt&&(v=v.elt,w=this.elt),w.addEventListener(_?"touchstart":"mousedown",function(L){{var P;L=L||window.event,T=_?(P=L.changedTouches,E=parseInt(P[0].clientX),parseInt(P[0].clientY)):(E=parseInt(L.clientX),parseInt(L.clientY))}return document.addEventListener(I,D,!1),document.addEventListener(k,F,!1),!1},!1),w.style.cursor="move",this};function x(v,w,_,S){m(this,x),this.callback=v,this.time=w,this.id=_,this.val=S}o=function(v){var w=S;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&f(w,v);var _=d(S);function S(C,E){m(this,S);var T=p(E=_.call(this,C,E));return E.elt.crossOrigin="anonymous",E._prevTime=0,E._cueIDCounter=0,E._cues=[],E.pixels=[],E._pixelsState=p(E),E._pixelDensity=1,E._modified=!1,E._frameOnCanvas=-1,Object.defineProperty(T,"src",{get:function(){var I=T.elt.children[0].src,k=T.elt.src===window.location.href?"":T.elt.src;return I===window.location.href?k:I},set:function(I){for(var k=0;k<T.elt.children.length;k++)T.elt.removeChild(T.elt.children[k]);var F=document.createElement("source");F.src=I,C.appendChild(F),T.elt.src=I,T.modified=!0}}),T._onended=function(){},T.elt.onended=function(){T._onended(T)},E}return c(S,[{key:"play",value:function(){var C;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(C=this.elt.play())&&C.catch&&C.catch(function(E){E.name==="NotAllowedError"?console.error(E):console.error("Media play method encountered an unexpected error",E)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var C=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(C)},{passive:!0,once:!0})}},{key:"autoplay",value:function(C){var E=this,T=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",C),C&&!T&&(C=function(){return E._setupAutoplayFailDetection()},this.elt.readyState===4?C():this.elt.addEventListener("canplay",C,{passive:!0,once:!0})),this}},{key:"volume",value:function(C){if(C===void 0)return this.elt.volume;this.elt.volume=C}},{key:"speed",value:function(C){if(C===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=C:this.presetPlaybackRate=C}},{key:"time",value:function(C){return C===void 0?this.elt.currentTime:(this.elt.currentTime=C,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var C=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&C&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];return l.default.Renderer2D.prototype.loadPixels.apply(this,E)}},{key:"updatePixels",value:function(C,E,T,I){return this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.updatePixels.call(this,C,E,T,I)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];return l.default.Renderer2D.prototype.get.apply(this,E)}},{key:"_getPixel",value:function(){this.loadPixels();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];return l.default.Renderer2D.prototype._getPixel.apply(this,E)}},{key:"set",value:function(C,E,T){this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.set.call(this,C,E,T),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];l.default.prototype.copy.apply(this,E)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];l.default.Image.prototype.mask.apply(this,E)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(C){this._modified=C}},{key:"onended",value:function(C){return this._onended=C,this}},{key:"connect",value:function(C){var E,T;if(typeof l.default.prototype.getAudioContext=="function")E=l.default.prototype.getAudioContext(),T=l.default.soundOut.input;else try{T=(E=C.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=E.createMediaElementSource(this.elt),this.audioSourceNode.connect(T)),C?C.input?this.audioSourceNode.connect(C.input):this.audioSourceNode.connect(C):this.audioSourceNode.connect(T)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(C,k,T){var I=this._cueIDCounter++,k=new x(k,C,I,T);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),I}},{key:"removeCue",value:function(C){for(var E=0;E<this._cues.length;E++)this._cues[E].id===C&&(console.log(C),this._cues.splice(E,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var C=this.time(),E=0;E<this._cues.length;E++){var T=this._cues[E].time,I=this._cues[E].val;this._prevTime<T&&T<=C&&this._cues[E].callback(I)}this._prevTime=C}}]),S}(l.default.Element),l.default.MediaElement=o,o=function(){function v(w,_){m(this,v),this.file=w,this._pInst=_,_=w.type.split("/"),this.type=_[0],this.subtype=_[1],this.name=w.name,this.size=w.size,this.data=void 0}return c(v,null,[{key:"_createLoader",value:function(w,_){var S=new FileReader;return S.onload=function(C){var E,T=new l.default.File(w);T.file.type==="application/json"?T.data=JSON.parse(C.target.result):T.file.type==="text/xml"?(E=new DOMParser().parseFromString(C.target.result,"text/xml"),T.data=new l.default.XML(E.documentElement)):T.data=C.target.result,_(T)},S}},{key:"_load",value:function(w,_){var S;/^text\//.test(w.type)||w.type==="application/json"?l.default.File._createLoader(w,_).readAsText(w):/^(video|audio)\//.test(w.type)?((S=new l.default.File(w)).data=URL.createObjectURL(w),_(S)):l.default.File._createLoader(w,_).readAsDataURL(w)}}]),v}(),l.default.File=o,o=l.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(g,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(g=g("../core/main"))&&g.__esModule?g:{default:g};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var l=a.default.prototype.pRotationZ=0,u=0,c=0,f="clockwise",d="clockwise",p="clockwise",h=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),m=30,g=(a.default.prototype.setMoveThreshold=function(y){a.default._validateParameters("setMoveThreshold",arguments),h=y},a.default.prototype.setShakeThreshold=function(y){a.default._validateParameters("setShakeThreshold",arguments),m=y},a.default.prototype._ondeviceorientation=function(y){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(y.beta)),this._setProperty("rotationY",this._fromDegrees(y.gamma)),this._setProperty("rotationZ",this._fromDegrees(y.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(y){this._updatePAccelerations(),this._setProperty("accelerationX",2*y.acceleration.x),this._setProperty("accelerationY",2*y.acceleration.y),this._setProperty("accelerationZ",2*y.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var y,b,x,v,w,_=this._isGlobal?window:this;typeof _.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&_.deviceMoved(),typeof _.deviceTurned=="function"&&(b=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,y=l+180,0<b-x&&b-x<270||b-x<-270?f="clockwise":(b-x<0||270<b-x)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(y=b),90<Math.abs(b-y)&&Math.abs(b-y)<270&&(y=b,this._setProperty("turnAxis","X"),_.deviceTurned()),this.pRotateDirectionX=f,l=y-180,x=this._toDegrees(this.rotationY)+180,b=this._toDegrees(this.pRotationY)+180,y=u+180,0<x-b&&x-b<270||x-b<-270?d="clockwise":(x-b<0||270<x-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(y=x),90<Math.abs(x-y)&&Math.abs(x-y)<270&&(y=x,this._setProperty("turnAxis","Y"),_.deviceTurned()),this.pRotateDirectionY=d,u=y-180,0<(b=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&b-x<270||b-x<-270?p="clockwise":(b-x<0||270<b-x)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(c=b),90<Math.abs(b-c)&&Math.abs(b-c)<270&&(c=b,this._setProperty("turnAxis","Z"),_.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),typeof _.deviceShaken=="function"&&(this.pAccelerationX!==null&&(v=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),m<v+w&&_.deviceShaken())},a.default);s.default=g},{"../core/main":280}],298:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(l){var u;this._downKeys[l.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",l.which),this._downKeys[l.which]=!0,this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyPressed!="function"||l.charCode||u.keyPressed(l)===!1&&l.preventDefault())},a.default.prototype._onkeyup=function(l){this._downKeys[l.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),this._setProperty("keyCode",l.which);var u=this._isGlobal?window:this;typeof u.keyReleased=="function"&&u.keyReleased(l)===!1&&l.preventDefault()},a.default.prototype._onkeypress=function(l){var u;l.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",l.which),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyTyped=="function"&&u.keyTyped(l)===!1&&l.preventDefault())},a.default.prototype._onblur=function(l){this._downKeys={}},a.default.prototype.keyIsDown=function(l){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[l]||!1},a.default.prototype._areDownKeys=function(){for(var l in this._downKeys)if(this._downKeys.hasOwnProperty(l)&&this._downKeys[l]===!0)return!0;return!1},o=a.default,s.default=o},{"../core/main":280}],299:[function(o,i,s){"use strict";function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function l(d){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(u=o("../core/main"))&&u.__esModule?u:{default:u},c=function(d){if(d&&d.__esModule)return d;if(d===null||l(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var y;Object.prototype.hasOwnProperty.call(d,h)&&((y=g?Object.getOwnPropertyDescriptor(d,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=d[h])}return m.default=d,p&&p.set(d,m),m}(o("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}u.default.prototype.movedX=0,u.default.prototype.movedY=0,u.default.prototype._hasMouseInteracted=!1,u.default.prototype.mouseX=0,u.default.prototype.mouseY=0,u.default.prototype.pmouseX=0,u.default.prototype.pmouseY=0,u.default.prototype.winMouseX=0,u.default.prototype.winMouseY=0,u.default.prototype.pwinMouseX=0,u.default.prototype.pwinMouseY=0,u.default.prototype.mouseButton=0,u.default.prototype.mouseIsPressed=!1,u.default.prototype._updateNextMouseCoords=function(d){var p,h,m,g,y;this._curElement!==null&&(!d.touches||0<d.touches.length)&&(p=this._curElement.elt,h=this.width,m=this.height,(g=d)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),y=p.getBoundingClientRect(),h=p.scrollWidth/h||1,p=p.scrollHeight/m||1,m={x:(g.clientX-y.left)/h,y:(g.clientY-y.top)/p,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",d.movementX),this._setProperty("movedY",d.movementY),this._setProperty("mouseX",m.x),this._setProperty("mouseY",m.y),this._setProperty("winMouseX",m.winX),this._setProperty("winMouseY",m.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},u.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},u.default.prototype._setMouseButton=function(d){d.button===1?this._setProperty("mouseButton",c.CENTER):d.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},u.default.prototype._onmousemove=function(d){var p=this._isGlobal?window:this;this._updateNextMouseCoords(d),this.mouseIsPressed?typeof p.mouseDragged=="function"?p.mouseDragged(d)===!1&&d.preventDefault():typeof p.touchMoved=="function"&&p.touchMoved(d)===!1&&d.preventDefault():typeof p.mouseMoved=="function"&&p.mouseMoved(d)===!1&&d.preventDefault()},u.default.prototype._onmousedown=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(d),this._updateNextMouseCoords(d),this.touchstart||(typeof p.mousePressed=="function"?p.mousePressed(d)===!1&&d.preventDefault():typeof p.touchStarted=="function"&&p.touchStarted(d)===!1&&d.preventDefault(),this.touchstart=!1)},u.default.prototype._onmouseup=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof p.mouseReleased=="function"?p.mouseReleased(d)===!1&&d.preventDefault():typeof p.touchEnded=="function"&&p.touchEnded(d)===!1&&d.preventDefault(),this.touchend=!1)},u.default.prototype._ondragend=u.default.prototype._onmouseup,u.default.prototype._ondragover=u.default.prototype._onmousemove,u.default.prototype._onclick=function(d){var p=this._isGlobal?window:this;typeof p.mouseClicked=="function"&&p.mouseClicked(d)===!1&&d.preventDefault()},u.default.prototype._ondblclick=function(d){var p=this._isGlobal?window:this;typeof p.doubleClicked=="function"&&p.doubleClicked(d)===!1&&d.preventDefault()},u.default.prototype._mouseWheelDeltaY=0,u.default.prototype._pmouseWheelDeltaY=0,u.default.prototype._onwheel=function(d){var p=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",d.deltaY),typeof p.mouseWheel=="function"&&(d.delta=d.deltaY,p.mouseWheel(d)===!1&&d.preventDefault())},u.default.prototype.requestPointerLock=function(){var d=this._curElement.elt;return d.requestPointerLock=d.requestPointerLock||d.mozRequestPointerLock,d.requestPointerLock?(d.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},u.default.prototype.exitPointerLock=function(){document.exitPointerLock()},o=u.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.touches=[],o.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var l=[],u=0;u<a.touches.length;u++)l[u]=function(y,g,b,p){var h=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,m=y.getBoundingClientRect(),g=y.scrollWidth/g||1,y=y.scrollHeight/b||1,b=p.touches[h]||p.changedTouches[h];return{x:(b.clientX-m.left)/g,y:(b.clientY-m.top)/y,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,a,u);this._setProperty("touches",l)}},o.default.prototype._ontouchstart=function(a){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof l.touchStarted=="function"&&(l.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},o.default.prototype._ontouchmove=function(a){var l=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof l.touchMoved=="function"?l.touchMoved(a)===!1&&a.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(a)===!1&&a.preventDefault()},o.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"&&(l.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},o=o.default,s.default=o},{"../core/main":280}],301:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l,u,c,f={_toPixels:function(d){var p,h;return d instanceof ImageData?d.data:d.getContext("2d")?d.getContext("2d").getImageData(0,0,d.width,d.height).data:d.getContext("webgl")?(h=(p=d.getContext("webgl")).drawingBufferWidth*p.drawingBufferHeight*4,h=new Uint8Array(h),p.readPixels(0,0,d.width,d.height,p.RGBA,p.UNSIGNED_BYTE,h),h):void 0},_getARGB:function(d,p){return p*=4,d[3+p]<<24&4278190080|d[p]<<16&16711680|d[1+p]<<8&65280|255&d[2+p]},_setPixels:function(d,p){for(var h,m=0,g=d.length;m<g;m++)d[0+(h=4*m)]=(16711680&p[m])>>>16,d[1+h]=(65280&p[m])>>>8,d[2+h]=255&p[m],d[3+h]=(4278190080&p[m])>>>24},_toImageData:function(d){return d instanceof ImageData?d:d.getContext("2d").getImageData(0,0,d.width,d.height)},_createImageData:function(d,p){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(d,p)},apply:function(d,y,h){var m=d.getContext("2d"),g=m.getImageData(0,0,d.width,d.height),y=y(g,h);y instanceof ImageData?m.putImageData(y,0,0,0,0,d.width,d.height):m.putImageData(g,0,0,0,0,d.width,d.height)},threshold:function(d){for(var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,h=f._toPixels(d),m=Math.floor(255*p),g=0;g<h.length;g+=4){var y=void 0,y=m<=.2126*h[g]+.7152*h[g+1]+.0722*h[g+2]?255:0;h[g]=h[g+1]=h[g+2]=y}},gray:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4){var m=p[h],g=p[h+1],y=p[h+2];p[h]=p[h+1]=p[h+2]=.2126*m+.7152*g+.0722*y}},opaque:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4)p[h+3]=255;return p},invert:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4)p[h]=255-p[h],p[h+1]=255-p[h+1],p[h+2]=255-p[h+2]},posterize:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,h=f._toPixels(d);if(p<2||255<p)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var m=p-1,g=0;g<h.length;g+=4){var y=h[g],b=h[g+1],x=h[g+2];h[g]=255*(y*p>>8)/m,h[g+1]=255*(b*p>>8)/m,h[g+2]=255*(x*p>>8)/m}},dilate:function(d){for(var p,h,m,g,y,b,x,v,w,_=f._toPixels(d),S=0,C=_.length?_.length/4:0,E=new Int32Array(C);S<C;)for(h=(p=S)+d.width;S<h;)g=m=f._getARGB(_,S),(w=S-1)<p&&(w=S),h<=(v=S+1)&&(v=S),(y=S-d.width)<0&&(y=0),C<=(b=S+d.width)&&(b=S),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,g=x),g<(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,g=x),g<(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(m=y,g=v),g<(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(m=b,g=w),E[S++]=m;f._setPixels(_,E)},erode:function(d){for(var p,h,m,g,y,b,x,v,w,_=f._toPixels(d),S=0,C=_.length?_.length/4:0,E=new Int32Array(C);S<C;)for(h=(p=S)+d.width;S<h;)g=m=f._getARGB(_,S),(w=S-1)<p&&(w=S),h<=(v=S+1)&&(v=S),(y=S-d.width)<0&&(y=0),C<=(b=S+d.width)&&(b=S),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(m=w,g=x),(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))<g&&(m=w,g=x),(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<g&&(m=y,g=v),(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<g&&(m=b,g=w),E[S++]=m;f._setPixels(_,E)},blur:function(d,p){for(var h,m,g,y,b,x,v,w,_,S,C=f._toPixels(d),E=d.width,T=d.height,I=E*T,k=new Int32Array(I),F=0;F<I;F++)k[F]=f._getARGB(C,F);var D,L,P,R,V,G,U,H,X=new Int32Array(I),fe=new Int32Array(I),$=new Int32Array(I),M=new Int32Array(I),z=0,q=3.5*p|0;if(a!==(q=q<1?1:q<248?q:248)){l=1+(a=q)<<1,u=new Int32Array(l),c=new Array(l);for(var ee=0;ee<l;ee++)c[ee]=new Int32Array(256);for(var ae=1,Q=q-1;ae<q;ae++){u[q+ae]=u[Q]=G=Q*Q,U=c[q+ae],H=c[Q--];for(var le=0;le<256;le++)U[le]=H[le]=G*le}V=u[q]=q*q,U=c[q];for(var ie=0;ie<256;ie++)U[ie]=V*ie}for(L=0;L<T;L++){for(D=0;D<E;D++){if(y=g=m=b=h=0,(x=D-a)<0)S=-x,x=0;else{if(E<=x)break;S=0}for(P=S;P<l&&!(E<=x);P++){var K=k[x+z];R=c[P],b+=R[(-16777216&K)>>>24],m+=R[(16711680&K)>>16],g+=R[(65280&K)>>8],y+=R[255&K],h+=u[P],x++}X[v=z+D]=b/h,fe[v]=m/h,$[v]=g/h,M[v]=y/h}z+=E}for(_=(w=-a)*E,L=z=0;L<T;L++){for(D=0;D<E;D++){if(y=g=m=b=h=0,w<0)S=v=-w,x=D;else{if(T<=w)break;S=0,v=w,x=D+_}for(P=S;P<l&&!(T<=v);P++)R=c[P],b+=R[X[x]],m+=R[fe[x]],g+=R[$[x]],y+=R[M[x]],h+=u[P],v++,x+=E;k[D+z]=b/h<<24|m/h<<16|g/h<<8|y/h}z+=E,_+=E,w++}f._setPixels(C,k)}};s.default=f},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("omggif"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f){return function(d){if(Array.isArray(d)){for(var p=0,h=new Array(d.length);p<d.length;p++)h[p]=d[p];return h}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(f,d){return a.default._validateParameters("createImage",arguments),new a.default.Image(f,d)},a.default.prototype.saveCanvas=function(){for(var f,d,p,h,m,g,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];switch(a.default._validateParameters("saveCanvas",b),b[0]instanceof HTMLCanvasElement?(f=b[0],b.shift()):b[0]instanceof a.default.Element?(f=b[0].elt,b.shift()):b[0]instanceof a.default.Framebuffer?(h=b[0],(m=this.createGraphics(h.width,h.height)).pixelDensity(pixelDensity()),h.loadPixels(),m.loadPixels(),m.pixels.set(h.pixels),m.updatePixels(),f=m.elt,b.shift()):f=this._curElement&&this._curElement.elt,1<=b.length&&(d=b[0]),p=(p=2<=b.length?b[1]:p)||a.default.prototype._checkFileExtension(d,p)[1]||"png"){default:g="image/png";break;case"jpeg":case"jpg":g="image/jpeg"}f.toBlob(function(v){a.default.prototype.downloadFile(v,d,p),m&&m.remove()},g)},a.default.prototype.encodeAndDownloadGif=function(f,d){for(var p=f.gifProperties,h=p.loopLimit,m=(h===1?h=null:h===null&&(h=0),new Uint8Array(f.width*f.height*p.numFrames)),g=[],y={},b=0;b<p.numFrames;b++){for(var x=new Set,v=p.frames[b].image.data,w=v.length,_=new Uint32Array(f.width*f.height),S=0,C=0;S<w;S+=4,C++){var E=v[S+0]<<16|v[S+1]<<8|v[S+2]<<0;x.add(E),_[C]=E}var T=c(x).sort().toString();y[T]===void 0?y[T]={freq:1,frames:[b]}:(y[T].freq+=1,y[T].frames.push(b)),g.push(_)}for(var F=[],I=Object.keys(y).sort(function($,M){return y[M].freq-y[$].freq}),k=I[0].split(",").map(function($){return parseInt($)}),F=F.concat(y[k].frames),D=new Set(k),L=1;L<I.length;L++){var P=I[L].split(",").map(function($){return parseInt($)}).filter(function($){return!D.has($)});if(k.length+P.length<=256){for(var R=0;R<P.length;R++)k.push(P[R]),D.add(P[R]);F=F.concat(y[I[L]].frames)}}F=new Set(F);for(var V={},G=0;G<k.length;G++)V[k[G]]||(V[k[G]]=G);for(var U=1;U<k.length;)U<<=1;k.length=U;for(var h={loop:h,palette:new Uint32Array(k)},H=new l.default.GifWriter(m,f.width,f.height,h),X={},fe=0;fe<p.numFrames;fe++)(function(M){var z=!F.has(M),q=z?[]:k,ee=new Uint8Array(f.width*f.height),ae={},Q=new Set,le=(g[M].forEach(function(ye,xe){z?(ae[ye]===void 0&&(ae[ye]=q.length,q.push(ye)),ee[xe]=ae[ye]):ee[xe]=V[ye],0<M&&g[M-1][xe]!==ye&&Q.add(ye)}),{}),ie=q.filter(function(ye){return!Q.has(ye)});if(0<ie.length){var ie=ie[0],K=(z?ae:V)[ie];if(0<M){for(var ge=0;ge<g[M].length;ge++)g[M-1][ge]===g[M][ge]&&(ee[ge]=K);le.transparent=K,X.frameOpts.disposal=1}}if(le.delay=p.frames[M].delay/10,z){for(var ne=1;ne<q.length;)ne<<=1;q.length=ne,le.palette=new Uint32Array(q)}0<M&&H.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),X={pixelPaletteIndex:ee,frameOpts:le}})(fe);X.frameOpts.disposal=1,H.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),h=new Blob([m.slice(0,H.end())],{type:"image/gif"}),a.default.prototype.downloadFile(h,d,"gif")},a.default.prototype.saveFrames=function(f,d,p,g,m){a.default._validateParameters("saveFrames",arguments),p=a.default.prototype.constrain(p=p||3,0,15),p*=1e3;var g=a.default.prototype.constrain(g||15,0,22),y=0,b=a.default.prototype._makeFrame,x=this._curElement.elt,v=[],w=setInterval(function(){v.push(b(f+y,d,x)),y++},1e3/g);setTimeout(function(){if(clearInterval(w),m)m(v);else for(var _=0,S=v;_<S.length;_++){var C=S[_];a.default.prototype.downloadFile(C.imageData,C.filename,C.ext)}v=[]},.01+p)},a.default.prototype._makeFrame=function(f,d,m){var h,m=this?this._curElement.elt:m;if(d)switch(d.toLowerCase()){case"png":h="image/png";break;case"jpeg":case"jpg":h="image/jpeg";break;default:h="image/png"}else d="png",h="image/png";var m=(m=m.toDataURL(h)).replace(h,"image/octet-stream"),g={};return g.imageData=m,g.filename=f,g.ext=d,g},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var u=m(o("../core/main")),c=m(o("../core/helpers")),f=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=h();if(v&&v.has(x))return v.get(x);var w,_={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=S?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(_,w,C):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants")),d=m(o("omggif")),p=o("gifenc");function h(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,h=function(){return x},x)}function m(x){return x&&x.__esModule?x:{default:x}}function g(x,v,w,_,S,C,E){try{var T=x[C](E),I=T.value}catch(k){return void w(k)}T.done?v(I):Promise.resolve(I).then(_,S)}function y(x,v,w,_,S,C,E,T,I,k,F){var D,L,P,R,V,G,U,H,X;return x===f.COVER&&(D=v,P=w,U=C,H=E,G=T,X=I,L=k,R=F,V=Math.max(U/L,H/R),U/=V,H/=V,V=G,G=X,D===f.CENTER?V+=(L-U)/2:D===f.RIGHT&&(V+=L-U),P===f.CENTER?G+=(R-H)/2:P===f.BOTTOM&&(G+=R-H),T=(X={x:V,y:G,w:U,h:H}).x,I=X.y,k=X.w,F=X.h),x===f.CONTAIN&&(D=v,L=w,P=_,R=S,V=C,G=E,U=k,H=F,X=Math.max(U/V,H/G),U/=X,H/=X,X=P,P=R,D===f.CENTER?X+=(V-U)/2:D===f.RIGHT&&(X+=V-U),L===f.CENTER?P+=(G-H)/2:L===f.BOTTOM&&(P+=G-H),_=(x={x:X,y:P,w:U,h:H}).x,S=x.y,C=x.w,E=x.h),{sx:T,sy:I,sw:k,sh:F,dx:_,dy:S,dw:C,dh:E}}function b(x,v){return 0<x&&x<v?x:v}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadImage=function(x,v,w){u.default._validateParameters("loadImage",arguments);var _=new u.default.Image(1,1,this),S=this,C=new Request(x,{method:"GET",mode:"cors"});return fetch(x,C).then(function(E){var T,I=E.headers.get("content-type");I===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),I&&I.includes("image/gif")?E.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),F=_,D=v,L=w,P=(function(z){S._decrementPreload()}).bind(S),R=new d.default.GifReader(k),V=(F.width=F.canvas.width=R.width,F.height=F.canvas.height=R.height,[]),G=R.numFrames(),U=new Uint8ClampedArray(F.width*F.height*4),H=0;H<G;H++){var X=R.frameInfo(H),fe=F.drawingContext.getImageData(0,0,F.width,F.height),$=(U=fe.data.slice(),function(z,q){try{q.decodeAndBlitFrameRGBA(z,U)}catch(ee){u.default._friendlyFileLoadError(8,F.src),typeof L=="function"?L(ee):console.error(ee)}}(H,R),new ImageData(U,F.width,F.height)),$=(F.drawingContext.putImageData($,0,0),X.delay);$===0&&($=10),V.push({image:F.drawingContext.getImageData(0,0,F.width,F.height),delay:10*$}),X.disposal===2?F.drawingContext.clearRect(X.x,X.y,X.width,X.height):X.disposal===3&&F.drawingContext.putImageData(fe,0,0,X.x,X.y,X.width,X.height)}(k=R.loopCount())===null?k=1:k===0&&(k=null),F.drawingContext.putImageData(V[0].image,0,0),1<V.length&&(F.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:V,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(F),P()}},function(k){typeof w=="function"?(w(k),S._decrementPreload()):console.error(k)}):((T=new Image).onload=function(){_.width=_.canvas.width=T.width,_.height=_.canvas.height=T.height,_.drawingContext.drawImage(T,0,0),_.modified=!0,typeof v=="function"&&v(_),S._decrementPreload()},T.onerror=function(k){u.default._friendlyFileLoadError(0,T.src),typeof w=="function"?(w(k),S._decrementPreload()):console.error(k)},x.indexOf("data:image/")!==0&&(T.crossOrigin="Anonymous"),T.src=x),_.modified=!0}).catch(function(E){u.default._friendlyFileLoadError(0,x),typeof w=="function"?(w(E),S._decrementPreload()):console.error(E)}),_},u.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function w(_,S){var C,E,T,I,k,F,D,L,P,R,V,G,U,H,X,fe,$,M,z,q,ee,ae,Q,le,ie,K,ge=arguments;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(C=2<ge.length&&ge[2]!==void 0?ge[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof _!="string")throw TypeError("fileName parameter must be a string");ne.next=3;break;case 3:if(typeof S!="number")throw TypeError("Duration parameter must be a number");ne.next=5;break;case 5:if(E=C&&C.delay||0,T=C&&C.units||"seconds",I=C&&C.silent||!1,k=C&&C.notificationDuration||0,F=C&&C.notificationID||"progressBar",typeof E!="number")throw TypeError("Delay parameter must be a number");ne.next=12;break;case 12:if(T!=="seconds"&&T!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ne.next=14;break;case 14:if(typeof I!="boolean")throw TypeError("Silent parameter must be a boolean");ne.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");ne.next=18;break;case 18:if(typeof F!="string")throw TypeError("Notification ID parameter must be a string");ne.next=20;break;case 20:return this._recording=!0,R=this._targetFrameRate,D=(D=1/(R=R!==1/0&&R!==void 0&&R!==0?R:60)*1e3)<20?20:D,P=(L=T==="seconds"?S*R:S)+(R=T==="seconds"?E*R:E),R=R,this.frameCount=R,V=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(F)!==null&&document.getElementById(F).remove(),I||((U=this.createP("")).id(F),U.style("font-size","16px"),U.style("font-family","Montserrat"),U.style("background-color","#ffffffa0"),U.style("padding","8px"),U.style("border-radius","10px"),U.position(0,0)),this._renderer instanceof u.default.RendererGL&&(X=this.drawingContext,H=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4)),this.noLoop(),ne.next=39,Promise.resolve();case 39:if(R<P)return this.redraw(),le=void 0,le=this._renderer instanceof u.default.RendererGL?(H=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4),X.readPixels(0,0,X.drawingBufferWidth,X.drawingBufferHeight,X.RGBA,X.UNSIGNED_BYTE,H),function(ye,xe,De){for(var Te=parseInt(De/2),Fe=4*xe,$e=new Uint8Array(4*xe),at=0;at<Te;++at){var We=at*Fe,jt=(De-at-1)*Fe;$e.set(ye.subarray(We,We+Fe)),ye.copyWithin(We,jt,jt+Fe),ye.set($e,jt)}return ye}(H,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(le),R++,I||U.html("Saved frame <b>"+G.length.toString()+"</b> out of "+L.toString()),ne.next=48,new Promise(function(ye){return setTimeout(ye,0)});ne.next=50;break;case 48:ne.next=39;break;case 50:I||U.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(V),fe=(0,p.GIFEncoder)(),$=function(ye){for(var xe=new Uint8Array(ye.length*ye[0].length),De=0;De<ye.length;De++)xe.set(ye[De],De*ye[0].length);var Te=(0,p.quantize)(xe,256,{format:"rgba4444",oneBitAlpha:!0});return Te.length===256?Te[Te.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Te.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Te}(G),M={},z=function(ye){for(var xe=ye.length/4,De=new Uint8Array(xe),Te=0;Te<xe;Te++){var Fe=ye[4*Te]<<24|ye[4*Te+1]<<16|ye[4*Te+2]<<8|ye[4*Te+3];M[Fe]===void 0&&(M[Fe]=(0,p.nearestColorIndex)($,ye.slice(4*Te,4*(Te+1)))),De[Te]=M[Fe]}return De},q=$.length-1,ee=[],ae=0;case 60:if(!(ae<G.length)){ne.next=71;break}if(Q=z(G[ae]),le=Q.slice(),ae===0)fe.writeFrame(Q,this.width,this.height,{palette:$,delay:D,dispose:1});else{for(ie=0;ie<Q.length;ie++)Q[ie]===ee[ie]&&(Q[ie]=q);fe.writeFrame(Q,this.width,this.height,{delay:D,transparent:!0,transparentIndex:q,dispose:1})}return ee=le,I||U.html("Rendered frame <b>"+ae.toString()+"</b> out of "+L.toString()),ne.next=68,new Promise(function(ye){return setTimeout(ye,0)});case 68:ae++,ne.next=60;break;case 71:fe.finish(),K=fe.bytesView(),K=new Blob([K],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),I||(U.html("Done. Downloading your gif!\u{1F338}"),0<k&&setTimeout(function(){return U.remove()},1e3*k)),u.default.prototype.downloadFile(K,_,"gif");case 80:case"end":return ne.stop()}},w,this)});var x,v=function(){var w=this,_=arguments;return new Promise(function(S,C){var E=x.apply(w,_);function T(k){g(E,S,C,T,I,"next",k)}function I(k){g(E,S,C,T,I,"throw",k)}T(void 0)})};return function(w,_){return v.apply(this,arguments)}}(),u.default.prototype.image=function(x,v,w,_,R,V,G,U,X,k,F,D){u.default._validateParameters("image",arguments);var H=x.width,L=x.height,P=(D=D||f.CENTER,F=F||f.CENTER,x.elt&&(H=H!==void 0?H:x.elt.width,L=L!==void 0?L:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(H=H!==void 0?H:x.elt.videoWidth,L=L!==void 0?L:x.elt.videoHeight),_||H),R=R||L,V=V||0,G=G||0,U=b(U!==void 0?U:H,H),H=b(X!==void 0?X:L,L),X=1;x.elt&&!x.canvas&&x.elt.style.width&&(X=x.elt.videoWidth&&!_?x.elt.videoWidth:x.elt.width,X/=parseInt(x.elt.style.width,10)),V*=X,G*=X,H*=X,U*=X,L=y(k,F,D,(L=c.default.modeAdjust(v,w,P,R,this._renderer._imageMode)).x,L.y,L.w,L.h,V,G,U,H),this._renderer.image(x,L.sx,L.sy,L.sw,L.sh,L.dx,L.dy,L.dw,L.dh)},u.default.prototype.tint=function(){for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];u.default._validateParameters("tint",v);var _=this.color.apply(this,v);this._renderer._tint=_.levels},u.default.prototype.noTint=function(){this._renderer._tint=null},u.default.prototype._getTintedImageCanvas=u.default.Renderer2D.prototype._getTintedImageCanvas,u.default.prototype.imageMode=function(x){u.default._validateParameters("imageMode",arguments),x!==f.CORNER&&x!==f.CORNERS&&x!==f.CENTER||(this._renderer._imageMode=x)},o=u.default,s.default=o},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f,d){for(var p=0;p<d.length;p++){var h=d[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}a.default.Image=function(){function f(m,g){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=g,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var d,p,h;return d=f,(p=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(b){var g,y=this.gifProperties,b=b._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=b),y.playing&&(y.timeDisplayed=b-y.lastChangeTime,g=y.frames[y.displayIndex].delay,y.timeDisplayed>=g&&(g=Math.floor(y.timeDisplayed/g),y.timeDisplayed=0,y.lastChangeTime=b,y.displayIndex+=g,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(b=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[b].image,0,0),y.displayIndex=b,this.setModified(!0))))}},{key:"_setProperty",value:function(m,g){this[m]=g,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,g,y,b){a.default.Renderer2D.prototype.updatePixels.call(this,m,g,y,b),this.setModified(!0)}},{key:"get",value:function(m,g,y,b){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,g)}},{key:"set",value:function(m,g,y){a.default.Renderer2D.prototype.set.call(this,m,g,y),this.setModified(!0)}},{key:"resize",value:function(m,g){m===0&&g===0?(m=this.canvas.width,g=this.canvas.height):m===0?m=this.canvas.width*g/this.canvas.height:g===0&&(g=this.canvas.height*m/this.canvas.width),m=Math.floor(m),g=Math.floor(g);var y=document.createElement("canvas");if(y.width=m,y.height=g,this.gifProperties)for(var b=this.gifProperties,x=0;x<b.numFrames;x++){for(var v=this.drawingContext.createImageData(m,g),w=(T=T=E=C=S=void 0,b.frames[x].image),_=v,S=0,C=0;C<_.height;C++)for(var E=0;E<_.width;E++){var T=Math.floor(E*w.width/_.width),T=4*(Math.floor(C*w.height/_.height)*w.width+T);_.data[S++]=w.data[T++],_.data[S++]=w.data[T++],_.data[S++]=w.data[T++],_.data[S++]=w.data[+T]}b.frames[x].image=v}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=m,this.canvas.height=this.height=g,this.drawingContext.drawImage(y,0,0,m,g,0,0,m,g),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];a.default.prototype.copy.apply(this,g)}},{key:"mask",value:function(m){var g=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,b=1,x=[m=m===void 0?this:m,0,0,(b=m instanceof a.default.Renderer?m._pInst._pixelDensity:b)*m.width,b*m.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=g,this.setModified(!0)}},{key:"filter",value:function(m,g){l.default.apply(this.canvas,l.default[m],g),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,g),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,g){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,m):a.default.prototype.saveCanvas(this.canvas,m,g)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var g;this.gifProperties&&(m<(g=this.gifProperties).numFrames&&0<=m?(g.timeDisplayed=0,g.lastChangeTime=0,g.displayIndex=m,this.drawingContext.putImageData(g.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,g){if(this.gifProperties){var y=this.gifProperties;if(g<y.numFrames&&0<=g)y.frames[g].delay=m;else{var b=!0,g=!1,x=void 0;try{for(var v,w=y.frames[Symbol.iterator]();!(b=(v=w.next()).done);b=!0)v.value.delay=m}catch(S){g=!0,x=S}finally{try{b||w.return==null||w.return()}finally{if(g)throw x}}}}}}])&&c(d.prototype,p),h&&c(d,h),f}(),o=a.default.Image,s.default=o},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(c){return c&&c.__esModule?c:{default:c}}o("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var c,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];a.default._validateParameters("blend",d),this._renderer?(c=this._renderer).blend.apply(c,d):a.default.Renderer2D.prototype.blend.apply(this,d)},a.default.prototype.copy=function(){for(var c,f,d,p,h,m,g,y,b,x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];if(a.default._validateParameters("copy",v),v.length===9)c=v[0],f=v[1],d=v[2],p=v[3],h=v[4],m=v[5],g=v[6],y=v[7],b=v[8];else{if(v.length!==8)throw new Error("Signature not supported");c=this,f=v[0],d=v[1],p=v[2],h=v[3],m=v[4],g=v[5],y=v[6],b=v[7]}a.default.prototype._copyHelper(this,c,f,d,p,h,m,g,y,b)},a.default.prototype._copyHelper=function(c,f,d,p,h,m,g,y,b,x){var v=f.canvas.width/f.width,w=0,_=0;f._renderer&&f._renderer.isP3D&&(w=f.width/2,_=f.height/2),c._renderer&&c._renderer.isP3D?(c.push(),c.resetMatrix(),c.noLights(),c.blendMode(c.BLEND),c.imageMode(c.CORNER),a.default.RendererGL.prototype.image.call(c._renderer,f,d+w,p+_,h,m,g,y,b,x),c.pop()):c.drawingContext.drawImage(f.canvas,v*(d+w),v*(p+_),v*h,v*m,g,y,b,x)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("filter",f);var g=(function(){var y,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])===!1&&(b.useWebGL=!1)),b}).apply(void 0,f),p=g.shader,h=g.operation,m=g.value,g=g.useWebGL;this._renderer.isP3D&&p?a.default.RendererGL.prototype.filter.call(this._renderer,p):g||this._renderer.isP3D?(!g&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,h,m):((p=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),p.filter.apply(p,f),this.copy(p._renderer,0,0,this.width,this.height,0,0,this.width,this.height),p.clear())):this.canvas!==void 0?l.default.apply(this.canvas,l.default[h],m):l.default.apply(this.elt,l.default[h],m)},a.default.prototype.get=function(c,f,d,p){var h;return a.default._validateParameters("get",arguments),(h=this._renderer).get.apply(h,arguments)},a.default.prototype.loadPixels=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},a.default.prototype.set=function(c,f,d){this._renderer.set(c,f,d)},a.default.prototype.updatePixels=function(c,f,d,p){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,f,d,p)},o=a.default,s.default=o},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=f(o("../core/main")),u=(o("whatwg-fetch"),o("es6-promise/auto"),f(o("fetch-jsonp"))),c=f(o("file-saver"));function f(m){return m&&m.__esModule?m:{default:m}}function d(m){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}function p(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(m,g){g&&g!==!0&&g!=="true"||(g="");var y="";return(m=m||"untitled")&&m.includes(".")&&(y=m.split(".").pop()),g&&y!==g&&(y=g,m="".concat(m,".").concat(y)),[m,y]}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),l.default.prototype.loadJSON=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];l.default._validateParameters("loadJSON",g);for(var b,x,v,w=g[0],_={},S="json",C=1;C<g.length;C++){var E=g[C];typeof E=="string"?E!=="jsonp"&&E!=="json"||(S=E):typeof E=="function"?b?x=E:b=E:d(E)==="object"&&(E.hasOwnProperty("jsonpCallback")||E.hasOwnProperty("jsonpCallbackFunction"))&&(S="jsonp",v=E)}var T=this;return this.httpDo(w,"GET",v,S,function(I){for(var k in I)_[k]=I[k];b!==void 0&&b(I),T._decrementPreload()},function(I){if(l.default._friendlyFileLoadError(5,w),!x)throw I;x(I)}),_},l.default.prototype.loadStrings=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];l.default._validateParameters("loadStrings",g);for(var b,x,v=[],w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var S=this;return l.default.prototype.httpDo.call(this,g[0],"GET","text",function(C){for(var E=C.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),T=0,I=E.length;T<I;T+=32768)Array.prototype.push.apply(v,E.slice(T,Math.min(T+32768,I)));b!==void 0&&b(v),S._decrementPreload()},function(C){if(l.default._friendlyFileLoadError(3,C),!x)throw C;x(C)}),v},l.default.prototype.loadTable=function(m){var g,y,b,x=[],v=!1,w=m.substring(m.lastIndexOf(".")+1,m.length);w==="csv"?b=",":w==="ssv"?b=";":w==="tsv"&&(b="	");for(var _=1;_<arguments.length;_++)typeof arguments[_]=="function"?g===void 0?g=arguments[_]:y===void 0&&(y=arguments[_]):typeof arguments[_]=="string"&&(x.push(arguments[_]),arguments[_]==="header"&&(v=!0),arguments[_]==="csv"?b=",":arguments[_]==="ssv"?b=";":arguments[_]==="tsv"&&(b="	"));var S=new l.default.Table,C=this;return this.httpDo(m,"GET","table",function(E){for(var T,I,k={},F=0,D=[],L=0,P=null,R=function(){k.currentState=F,k.token=""},V=function(){P.push(k.token),R()},G=function(){k.currentState=4,D.push(P),P=null};;){if((T=E[L++])==null){if(k.escaped)throw new Error("Unclosed quote in file.");if(P){V(),G();break}}if(P===null&&(k.escaped=!1,P=[],R()),k.currentState===F){if(T==='"'){k.escaped=!0,k.currentState=1;continue}k.currentState=1}if(k.currentState===1&&k.escaped)if(T==='"')E[L]==='"'?(k.token+='"',L++):(k.escaped=!1,k.currentState=2);else{if(T==="\r")continue;k.token+=T}else T==="\r"?(E[L]===`
`&&L++,V(),G()):T===`
`?(V(),G()):T===b?V():k.currentState===1&&(k.token+=T)}if(v)S.columns=D.shift();else for(var U=0;U<D[0].length;U++)S.columns[U]="null";for(var H=0;H<D.length;H++)(D[H].length!==1||D[H][0]!=="undefined"&&D[H][0]!=="")&&((I=new l.default.TableRow).arr=D[H],I.obj=function(X,fe){if((fe=fe||[])===void 0)for(var $=0;$<X.length;$++)fe[$.toString()]=$;return Object.fromEntries(fe.map(function(M,z){return[M,X[z]]}))}(D[H],S.columns),S.addRow(I));typeof g=="function"&&g(S),C._decrementPreload()},function(E){l.default._friendlyFileLoadError(2,m),y?y(E):console.error(E)}),S},l.default.prototype.loadXML=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];for(var b,x,v=new l.default.XML,w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var S=this;return this.httpDo(g[0],"GET","xml",function(C){for(var E in C)v[E]=C[E];b!==void 0&&b(v),S._decrementPreload()},function(C){if(l.default._friendlyFileLoadError(1,C),!x)throw C;x(C)}),v},l.default.prototype.loadBytes=function(m,g,y){var b={},x=this;return this.httpDo(m,"GET","arrayBuffer",function(v){b.bytes=new Uint8Array(v),typeof g=="function"&&g(b),x._decrementPreload()},function(v){if(l.default._friendlyFileLoadError(6,m),!y)throw v;y(v)}),b},l.default.prototype.httpGet=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return l.default._validateParameters("httpGet",g),g.splice(1,0,"GET"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpPost=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return l.default._validateParameters("httpPost",g),g.splice(1,0,"POST"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpDo=function(){for(var m,g,y,b={},x=0,v="text/plain",w=arguments.length-1;0<w&&typeof(w<0||arguments.length<=w?void 0:arguments[w])=="function";w--)x++;var _=arguments.length-x,S=arguments.length<=0?void 0:arguments[0];if(_==2&&typeof S=="string"&&d(arguments.length<=1?void 0:arguments[1])==="object")F=new Request(S,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var C,E="GET",T=1;T<arguments.length;T++){var I=T<0||arguments.length<=T?void 0:arguments[T];if(typeof I=="string")I==="GET"||I==="POST"||I==="PUT"||I==="DELETE"?E=I:I==="json"||I==="jsonp"||I==="binary"||I==="arrayBuffer"||I==="xml"||I==="text"||I==="table"?m=I:C=I;else if(typeof I=="number")C=I.toString();else if(d(I)==="object")if(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))for(var k in I)b[k]=I[k];else v=I instanceof l.default.XML?(C=I.serialize(),"application/xml"):(C=JSON.stringify(I),"application/json");else typeof I=="function"&&(g?y=I:g=I)}var _=E==="GET"?new Headers:new Headers({"Content-Type":v}),F=new Request(S,{method:E,mode:"cors",body:C,headers:_})}return(_=(_=(m=m||(S.includes("json")?"json":S.includes("xml")?"xml":"text"))==="jsonp"?(0,u.default)(S,b):fetch(F)).then(function(D){if(!D.ok)throw(L=new Error(D.body)).status=D.status,L.ok=!1,L;var L=0;switch((L=m!=="jsonp"?D.headers.get("content-length"):L)&&64e6<L&&l.default._friendlyFileLoadError(7,S),m){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(P){return P=new DOMParser().parseFromString(P,"text/xml"),new l.default.XML(P.documentElement)});default:return D.text()}})).then(g||function(){}),_.catch(y||console.error),_},window.URL=window.URL||window.webkitURL,l.default.prototype._pWriters=[],l.default.prototype.createWriter=function(m,g){var y,b;for(b in l.default.prototype._pWriters)if(l.default.prototype._pWriters[b].name===m)return y=new l.default.PrintWriter(m+this.millis(),g),l.default.prototype._pWriters.push(y),y;return y=new l.default.PrintWriter(m,g),l.default.prototype._pWriters.push(y),y},l.default.PrintWriter=function(m,g){var y=this;this.name=m,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),l.default.prototype.writeFile(x,m,g),l.default.prototype._pWriters)l.default.prototype._pWriters[b].name===this.name&&l.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},l.default.prototype.save=function(m,g,y){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)l.default.prototype.saveCanvas(x);else if(b[0]instanceof l.default.Renderer||b[0]instanceof l.default.Graphics)l.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")l.default.prototype.saveCanvas(x,b[0]);else switch(h(b[1],b[2])[1]){case"json":return void l.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void l.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?l.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof l.default.Table?l.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof l.default.Image?l.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof l.default.SoundFile&&l.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},l.default.prototype.saveJSON=function(m,g,y){l.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(m):JSON.stringify(m,void 0,2),this.saveStrings(y.split(`
`),g,"json")},l.default.prototype.saveJSONObject=l.default.prototype.saveJSON,l.default.prototype.saveJSONArray=l.default.prototype.saveJSON,l.default.prototype.saveStrings=function(m,g,y,b){l.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(g,y||"txt"),v=0;v<m.length;v++)b?x.write(m[v]+`\r
`):x.write(m[v]+`
`);x.close(),x.clear()},l.default.prototype.saveTable=function(m,g,y){l.default._validateParameters("saveTable",arguments),b=y===void 0?g.substring(g.lastIndexOf(".")+1,g.length):y;var b,x=this.createWriter(g,b),v=m.columns,w=b==="tsv"?"	":",";if(b!=="html"){if(v[0]!=="0"){for(var _=0;_<v.length;_++)_<v.length-1?x.write(v[_]+w):x.write(v[_]);x.write(`
`)}for(var S=0;S<m.rows.length;S++){for(var C=void 0,C=0;C<m.rows[S].arr.length;C++)C<m.rows[S].arr.length-1?b==="csv"&&String(m.rows[S].arr[C]).includes(",")?x.write('"'+m.rows[S].arr[C]+'"'+w):x.write(m.rows[S].arr[C]+w):b==="csv"&&String(m.rows[S].arr[C]).includes(",")?x.write('"'+m.rows[S].arr[C]+'"'):x.write(m.rows[S].arr[C]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),v[0]!=="0"){x.print("    <tr>");for(var E=0;E<v.length;E++){var T=p(v[E]);x.print("      <td>".concat(T)),x.print("      </td>")}x.print("    </tr>")}for(var I=0;I<m.rows.length;I++){x.print("    <tr>");for(var k=0;k<m.columns.length;k++){var F=p(m.rows[I].getString(k));x.print("      <td>".concat(F)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},l.default.prototype.writeFile=function(x,g,y){var b="application/octet-stream",x=(l.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));l.default.prototype.downloadFile(x,g,y)},l.default.prototype.downloadFile=function(m,x,v){var b,x=h(x,v),v=x[0];m instanceof Blob?c.default.saveAs(m,v):((b=document.createElement("a")).href=m,b.download=v,b.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},b.style.display="none",document.body.appendChild(b),l.default.prototype._isSafari()&&(m=(m=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(m)),b.click())},l.default.prototype._checkFileExtension=h,l.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},o=l.default,s.default=o},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Table=function(){function u(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,m=u;if(!(h instanceof m))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=p}var c,f,d;return c=u,(f=[{key:"addRow",value:function(p){if(p=p||new a.default.TableRow,p.arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,h){if(typeof h=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[h]===p)return this.rows[m]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].arr[h]===p)return this.rows[g];return null}},{key:"findRows",value:function(p,h){var m=[];if(typeof h=="string")for(var g=0;g<this.rows.length;g++)this.rows[g].obj[h]===p&&m.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[h]===p&&m.push(this.rows[y]);return m}},{key:"matchRow",value:function(p,h){if(typeof h=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[h].match(p))return this.rows[m]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].obj[h].match(p))return this.rows[g];return null}},{key:"matchRows",value:function(p,h){var m=[];if(typeof h=="number")for(var g=0;g<this.rows.length;g++)this.rows[g].arr[h].match(p)&&m.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[h].match(p)&&m.push(this.rows[y]);return m}},{key:"getColumn",value:function(p){var h=[];if(typeof p=="string")for(var m=0;m<this.rows.length;m++)h.push(this.rows[m].obj[p]);else for(var g=0;g<this.rows.length;g++)h.push(this.rows[g].arr[p]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,h){for(var m=[],g=0;g<p.length;g++)m.push(p.charAt(g).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(m.join("|"),"g");if(h===void 0)for(var b=0;b<this.columns.length;b++)for(var x=0;x<this.rows.length;x++){var v=(v=this.rows[x].arr[b]).replace(y,"");this.rows[x].arr[b]=v,this.rows[x].obj[this.columns[b]]=v}else if(typeof h=="string")for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].obj[h]).replace(y,""),S=(this.rows[w].obj[h]=_,this.columns.indexOf(h));this.rows[w].arr[S]=_}else for(var C=0;C<this.rows.length;C++){var E=(E=this.rows[C].arr[h]).replace(y,"");this.rows[C].arr[h]=E,this.rows[C].obj[this.columns[h]]=E}}},{key:"trim",value:function(p){var h=new RegExp(" ","g");if(p===void 0)for(var m=0;m<this.columns.length;m++)for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[m]).replace(h,"");this.rows[g].arr[m]=y,this.rows[g].obj[this.columns[m]]=y}else if(typeof p=="string")for(var b=0;b<this.rows.length;b++){var x=(x=this.rows[b].obj[p]).replace(h,""),v=(this.rows[b].obj[p]=x,this.columns.indexOf(p));this.rows[b].arr[v]=x}else for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].arr[p]).replace(h,"");this.rows[w].arr[p]=_,this.rows[w].obj[this.columns[p]]=_}}},{key:"removeColumn",value:function(g){typeof g=="string"?m=this.columns.indexOf(h=g):h=this.columns[m=g];var h,m,g=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(g);for(var y=0;y<this.rows.length;y++){var b=this.rows[y].arr,x=b.splice(m+1,b.length);b.pop(),this.rows[y].arr=b.concat(x),delete this.rows[y].obj[h]}}},{key:"set",value:function(p,h,m){this.rows[p].set(h,m)}},{key:"setNum",value:function(p,h,m){this.rows[p].setNum(h,m)}},{key:"setString",value:function(p,h,m){this.rows[p].setString(h,m)}},{key:"get",value:function(p,h){return this.rows[p].get(h)}},{key:"getNum",value:function(p,h){return this.rows[p].getNum(h)}},{key:"getString",value:function(p,h){return this.rows[p].getString(h)}},{key:"getObject",value:function(p){for(var h,m={},g=0;g<this.rows.length;g++)if(h=this.rows[g].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));m[h[p]]=h}else m[g]=this.rows[g].obj;return m}},{key:"getArray",value:function(){for(var p=[],h=0;h<this.rows.length;h++)p.push(this.rows[h].arr);return p}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(o,i,s){"use strict";o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.TableRow=function(){function l(d,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var h=[];d&&(h=d.split(p=p||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var u,c,f;return u=l,(c=[{key:"set",value:function(d,p){if(typeof d=="string"){var h=this.table.columns.indexOf(d);if(!(0<=h))throw new Error('This table has no column named "'.concat(d,'"'));this.obj[d]=p,this.arr[h]=p}else{if(!(d<this.table.columns.length))throw new Error("Column #".concat(d," is out of the range of this table"));this.arr[d]=p,h=this.table.columns[d],this.obj[h]=p}}},{key:"setNum",value:function(d,p){p=parseFloat(p),this.set(d,p)}},{key:"setString",value:function(d,p){p=p.toString(),this.set(d,p)}},{key:"get",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d]}},{key:"getNum",value:function(d){var p=parseFloat(typeof d=="string"?this.obj[d]:this.arr[d]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[d]," is NaN (Not a Number)");return p}},{key:"getString",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d].toString()}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function u(c){for(var f=[],d=0;d<c.length;d++)f.push(new a.default.XML(c[d]));return f}a.default.XML=function(){function c(h){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var f,d,p;return f=c,(d=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var m=this.DOM.innerHTML,g=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(h);y.innerHTML=m;for(var b=0;b<g.length;b++)y.setAttribute(g[b].nodeName,g[b].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],m=0;m<this.DOM.childNodes.length;m++)h.push(this.DOM.childNodes[m].nodeName);return h}},{key:"getChildren",value:function(h){return u(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new a.default.XML(this.DOM.children[h]);var m=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.children[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var v=b.value;if(v.tagName===h)return new a.default.XML(v)}}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}}},{key:"addChild",value:function(h){h instanceof a.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var m=-1;if(typeof h=="string"){for(var g=0;g<this.DOM.children.length;g++)if(this.DOM.children[g].tagName===h){m=g;break}}else m=h;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],m=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var v=b.value;h.push(v.nodeName)}}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}return h}},{key:"hasAttribute",value:function(h){var m={},g=!0,y=!1,b=void 0;try{for(var x,v=this.DOM.attributes[Symbol.iterator]();!(g=(x=v.next()).done);g=!0){var w=x.value;m[w.nodeName]=w.nodeValue}}catch(_){y=!0,b=_}finally{try{g||v.return==null||v.return()}finally{if(y)throw b}}return!!m[h]}},{key:"getNum",value:function(h,m){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(S){b=!0,x=S}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return Number(g[h])||m||0}},{key:"getString",value:function(h,m){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(S){b=!0,x=S}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return g[h]?String(g[h]):m||null}},{key:"setAttribute",value:function(h,m){this.DOM.setAttribute(h,m)}},{key:"getContent",value:function(h){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&l(f.prototype,d),p&&l(f,p),c}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(u,c,f){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(u,f),c)},a.default.prototype.dist=function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return a.default._validateParameters("dist",c),c.length===4?Math.hypot(c[2]-c[0],c[3]-c[1]):c.length===6?Math.hypot(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(u,c,f){return a.default._validateParameters("lerp",arguments),f*(c-u)+u},a.default.prototype.log=Math.log,a.default.prototype.mag=function(u,c){return a.default._validateParameters("mag",arguments),Math.hypot(u,c)},a.default.prototype.map=function(u,c,f,d,p,h){return a.default._validateParameters("map",arguments),u=(u-c)/(f-c)*(p-d)+d,h?d<p?this.constrain(u,d,p):this.constrain(u,p,d):u},a.default.prototype.max=function(){for(var u=function(p){return Math.max.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.min=function(){for(var u=function(p){return Math.min.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.norm=function(u,c,f){return a.default._validateParameters("norm",arguments),this.map(u,c,f,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(u,c){return c?(c=Math.pow(10,c),Math.round(u*c)/c):Math.round(u)},a.default.prototype.sq=function(u){return u*u},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(d){a.default._validateParameters("fract",arguments);var c,f=0,d=Number(d);return isNaN(d)||Math.abs(d)===1/0?d:(d<0&&(d=-d,f=1),String(d).includes(".")&&!String(d).includes("e")?(c=String(d),c=+("0"+c.slice(c.indexOf("."))),Math.abs(f-c)):d<1?Math.abs(f-d):0)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f,d){return(l=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(p,h,m){var g=[null];return g.push.apply(g,h),h=new(Function.bind.apply(p,g)),m&&u(h,m.prototype),h}).apply(null,arguments)}function u(c,f){return(u=Object.setPrototypeOf||function(d,p){return d.__proto__=p,d})(c,f)}a.default.prototype.createVector=function(c,f,d){return this instanceof a.default?l(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(c,f,d)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(d,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,d=(d=d("../core/main"))&&d.__esModule?d:{default:d};function a(p){return .5*(1-Math.cos(p*Math.PI))}var l,u=4095,c=4,f=.5,d=(d.default.prototype.noise=function(p){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(l==null){l=new Array(4096);for(var g=0;g<4096;g++)l[g]=Math.random()}p<0&&(p=-p),h<0&&(h=-h),m<0&&(m=-m);for(var y,b,x=Math.floor(p),v=Math.floor(h),w=Math.floor(m),_=p-x,S=h-v,C=m-w,E=0,T=.5,I=0;I<c;I++){var k=x+(v<<4)+(w<<8),F=a(_),D=a(S),L=l[k&u];L+=F*(l[k+1&u]-L),y=l[k+16&u],L+=D*((y+=F*(l[k+16+1&u]-y))-L),y=l[(k+=256)&u],y+=F*(l[k+1&u]-y),b=l[k+16&u],y+=D*((b+=F*(l[k+16+1&u]-b))-y),E+=(L+=a(C)*(y-L))*T,T*=f,x<<=1,v<<=1,w<<=1,1<=(_*=2)&&(x++,_--),1<=(S*=2)&&(v++,S--),1<=(C*=2)&&(w++,C--)}return E},d.default.prototype.noiseDetail=function(p,h){0<p&&(c=p),0<h&&(f=h)},d.default.prototype.noiseSeed=function(p){g=4294967296;var h,m,g,y={setSeed:function(x){m=h=(x??Math.random()*g)>>>0},getSeed:function(){return h},rand:function(){return(m=(1664525*m+1013904223)%g)/g}};y.setSeed(p),l=new Array(4096);for(var b=0;b<4096;b++)l[b]=y.rand()},d.default);s.default=d},{"../core/main":280}],313:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}function d(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}u.default.Vector=function(){function h(){var w=this,b=h;if(!(w instanceof b))throw new TypeError("Cannot call a class as a function");var x,v,w=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,v=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,v=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=v,this.z=w}var m,g,y;return m=h,y=[{key:"fromAngle",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new u.default.Vector(x*Math.cos(b),x*Math.sin(b),0)}},{key:"fromAngles",value:function(C,_){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,w=Math.cos(_),_=Math.sin(_),S=Math.cos(C),C=Math.sin(C);return new u.default.Vector(v*C*_,-v*S,v*C*w)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*c.TWO_PI)}},{key:"random3D",value:function(){var b=Math.random()*c.TWO_PI,x=2*Math.random()-1,w=Math.sqrt(1-x*x),v=w*Math.cos(b),w=w*Math.sin(b);return new u.default.Vector(v,w,x)}},{key:"copy",value:function(b){return b.copy(b)}},{key:"add",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),S.add(_),S}},{key:"rem",value:function(b,x){if(b instanceof u.default.Vector&&x instanceof u.default.Vector)return(b=b.copy()).rem(x),b}},{key:"sub",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),S.sub(_),S}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),S.mult(_),S}},{key:"rotate",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length===2?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),S.set(w)),S.rotate(_),S}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),S.div(_),S}},{key:"dot",value:function(b,x){return b.dot(x)}},{key:"cross",value:function(b,x){return b.cross(x)}},{key:"dist",value:function(b,x){return b.dist(x)}},{key:"lerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2],C=x[3];return C?C.set(w):(C=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(_,S),C}},{key:"slerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2],C=x[3];return C?C.set(w):(C=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(_,S),C}},{key:"mag",value:function(b){return b.mag()}},{key:"magSq",value:function(b){return b.magSq()}},{key:"normalize",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1];return x.length<2?_=w.copy():(_ instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),_.set(w)),_.normalize()}},{key:"limit",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length<3?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),S.set(w)),S.limit(_)}},{key:"setMag",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length<3?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),S.set(w)),S.setMag(_)}},{key:"heading",value:function(b){return b.heading()}},{key:"angleBetween",value:function(b,x){return b.angleBetween(x)}},{key:"reflect",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length<3?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),S.set(w)),S.reflect(_)}},{key:"array",value:function(b){return b.array()}},{key:"equals",value:function(b,x){var v;return b instanceof u.default.Vector?v=b:Array.isArray(b)?v=new u.default.Vector().set(b):u.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),v.equals(x)}}],(g=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(b,x,v){return b instanceof u.default.Vector?(this.x=b.x||0,this.y=b.y||0,this.z=b.z||0):Array.isArray(b)?(this.x=b[0]||0,this.y=b[1]||0,this.z=b[2]||0):(this.x=b||0,this.y=x||0,this.z=v||0),this}},{key:"copy",value:function(){return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new u.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(b,x,v){return b instanceof u.default.Vector?(this.x+=b.x||0,this.y+=b.y||0,this.z+=b.z||0):Array.isArray(b)?(this.x+=b[0]||0,this.y+=b[1]||0,this.z+=b[2]||0):(this.x+=b||0,this.y+=x||0,this.z+=v||0),this}},{key:"calculateRemainder2D",value:function(b,x){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(b,x,v){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),v!==0&&(this.z=this.z%v),this}},{key:"rem",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_,S,C=x[0],E=x[1],T=x[2];if(C instanceof u.default.Vector){if([C.x,C.y,C.z].every(Number.isFinite))return w=parseFloat(C.x),_=parseFloat(C.y),S=parseFloat(C.z),this.calculateRemainder3D(w,_,S)}else if(Array.isArray(C)){if(C.every(Number.isFinite))return C.length===2?this.calculateRemainder2D(C[0],C[1]):C.length===3?this.calculateRemainder3D(C[0],C[1],C[2]):void 0}else if(x.length===1){if(Number.isFinite(C)&&C!==0)return this.x=this.x%C,this.y=this.y%C,this.z=this.z%C,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(C,E)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(C,E,T)}},{key:"sub",value:function(b,x,v){return b instanceof u.default.Vector?(this.x-=b.x||0,this.y-=b.y||0,this.z-=b.z||0):Array.isArray(b)?(this.x-=b[0]||0,this.y-=b[1]||0,this.z-=b[2]||0):(this.x-=b||0,this.y-=x||0,this.z-=v||0),this}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_=x[0],S=x[1],C=x[2];return _ instanceof u.default.Vector?Number.isFinite(_.x)&&Number.isFinite(_.y)&&Number.isFinite(_.z)&&typeof _.x=="number"&&typeof _.y=="number"&&typeof _.z=="number"?(this.x*=_.x,this.y*=_.y,this.z*=_.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(_)?_.every(function(E){return Number.isFinite(E)})&&_.every(function(E){return typeof E=="number"})?_.length===1?(this.x*=_[0],this.y*=_[0],this.z*=_[0]):_.length===2?(this.x*=_[0],this.y*=_[1]):_.length===3&&(this.x*=_[0],this.y*=_[1],this.z*=_[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(w=x).every(function(E){return Number.isFinite(E)})&&w.every(function(E){return typeof E=="number"})?(x.length===1&&(this.x*=_,this.y*=_,this.z*=_),x.length===2&&(this.x*=_,this.y*=S),x.length===3&&(this.x*=_,this.y*=S,this.z*=C)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];if(w instanceof u.default.Vector)if(Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"){var C=w.z===0&&this.z===0;if(w.x===0||w.y===0||!C&&w.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=w.x,this.y/=w.y,C||(this.z/=w.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(w))if(w.every(Number.isFinite)&&w.every(function(E){return typeof E=="number"})){if(w.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;w.length===1?(this.x/=w[0],this.y/=w[0],this.z/=w[0]):w.length===2?(this.x/=w[0],this.y/=w[1]):w.length===3&&(this.x/=w[0],this.y/=w[1],this.z/=w[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(E){return typeof E=="number"})){if(x.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=w,this.y/=w,this.z/=w),x.length===2&&(this.x/=w,this.y/=_),x.length===3&&(this.x/=w,this.y/=_,this.z/=S)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var b=this.x,x=this.y,v=this.z;return b*b+x*x+v*v}},{key:"dot",value:function(b,x,v){return b instanceof u.default.Vector?this.dot(b.x,b.y,b.z):this.x*(b||0)+this.y*(x||0)+this.z*(v||0)}},{key:"cross",value:function(w){var x=this.y*w.z-this.z*w.y,v=this.z*w.x-this.x*w.z,w=this.x*w.y-this.y*w.x;return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,x,v,w):new u.default.Vector(x,v,w)}},{key:"dist",value:function(b){return b.copy().sub(this).mag()}},{key:"normalize",value:function(){var b=this.mag();return b!==0&&this.mult(1/b),this}},{key:"limit",value:function(b){var x=this.magSq();return b*b<x&&this.div(Math.sqrt(x)).mult(b),this}},{key:"setMag",value:function(b){return this.normalize().mult(b)}},{key:"heading",value:function(){var b=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(b):b}},{key:"setHeading",value:function(b){this.isPInst&&(b=this._toRadians(b));var x=this.mag();return this.x=x*Math.cos(b),this.y=x*Math.sin(b),this}},{key:"rotate",value:function(x){var x=this.heading()+x,v=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*v,this.y=Math.sin(x)*v,this}},{key:"angleBetween",value:function(b){var x;return this.magSq()*b.magSq()==0?NaN:(x=this.cross(b),b=Math.atan2(x.mag(),this.dot(b))*Math.sign(x.z||1),this.isPInst?this._fromRadians(b):b)}},{key:"lerp",value:function(b,x,v,w){return b instanceof u.default.Vector?this.lerp(b.x,b.y,b.z,x):(this.x+=(b-this.x)*w||0,this.y+=(x-this.y)*w||0,this.z+=(v-this.z)*w||0,this)}},{key:"slerp",value:function(b,x){if(x!==0){if(x===1)return this.set(b);var v=this.mag(),w=b.mag();if(v*w==0)this.mult(1-x).add(b.x*x,b.y*x,b.z*x);else{var _=this.cross(b),S=_.mag(),C=Math.atan2(S,this.dot(b));if(0<S)_.x/=S,_.y/=S,_.z/=S;else{if(C<.5*Math.PI)return this.mult(1-x).add(b.x*x,b.y*x,b.z*x),this;this.z===0&&b.z===0?_.set(0,0,1):this.x!==0?_.set(this.y,-this.x,0).normalize():_.set(1,0,0)}S=_.cross(this),b=1-x+x*w/v,_=b*Math.cos(x*C),w=b*Math.sin(x*C),this.x=this.x*_+S.x*w,this.y=this.y*_+S.y*w,this.z=this.z*_+S.z*w}}return this}},{key:"reflect",value:function(b){return b.normalize(),this.sub(b.mult(2*this.dot(b)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(S,x,v){var w,_,S=S instanceof u.default.Vector?(w=S.x||0,_=S.y||0,S.z||0):Array.isArray(S)?(w=S[0]||0,_=S[1]||0,S[2]||0):(w=S||0,_=x||0,v||0);return this.x===w&&this.y===_&&this.z===S}}])&&d(m.prototype,g),y&&d(m,y),h}();var p=u.default.Vector;s.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(f,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f},l="_lcg_random_state",u=4294967296,c=0,f=(a.default.prototype._lcg=function(d){return this[d]=(1664525*this[d]+1013904223)%u,this[d]/u},a.default.prototype._lcgSetSeed=function(d,p){this[d]=(p??Math.random()*u)>>>0},a.default.prototype.randomSeed=function(d){this._lcgSetSeed(l,d),this._gaussian_previous=!1},a.default.prototype.random=function(d,p){var h,m;return a.default._validateParameters("random",arguments),h=this[l]!=null?this._lcg(l):Math.random(),d===void 0?h:p===void 0?Array.isArray(d)?d[Math.floor(h*d.length)]:h*d:(p<d&&(m=d,d=p,p=m),h*(p-d)+d)},a.default.prototype.randomGaussian=function(d){var p,h,m,g,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)p=c,this._gaussian_previous=!1;else{for(;1<=(g=(h=this.random(2)-1)*h+(m=this.random(2)-1)*m););p=h*(g=Math.sqrt(-2*Math.log(g)/g)),c=m*g,this._gaussian_previous=!0}return p*y+(d||0)},a.default);s.default=f},{"../core/main":280}],315:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype._angleMode=c.RADIANS,u.default.prototype.acos=function(p){return this._fromRadians(Math.acos(p))},u.default.prototype.asin=function(p){return this._fromRadians(Math.asin(p))},u.default.prototype.atan=function(p){return this._fromRadians(Math.atan(p))},u.default.prototype.atan2=function(p,h){return this._fromRadians(Math.atan2(p,h))},u.default.prototype.cos=function(p){return Math.cos(this._toRadians(p))},u.default.prototype.sin=function(p){return Math.sin(this._toRadians(p))},u.default.prototype.tan=function(p){return Math.tan(this._toRadians(p))},u.default.prototype.degrees=function(p){return p*c.RAD_TO_DEG},u.default.prototype.radians=function(p){return p*c.DEG_TO_RAD},u.default.prototype.angleMode=function(p){if(u.default._validateParameters("angleMode",arguments),p===void 0)return this._angleMode;p!==c.DEGREES&&p!==c.RADIANS||p!==this._angleMode&&(p===c.RADIANS?(this._setProperty("pRotationX",this.pRotationX*c.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*c.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*c.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*c.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*c.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*c.RAD_TO_DEG)),this._angleMode=p)},u.default.prototype._toRadians=function(p){return this._angleMode===c.DEGREES?p*c.DEG_TO_RAD:p},u.default.prototype._toDegrees=function(p){return this._angleMode===c.RADIANS?p*c.RAD_TO_DEG:p},u.default.prototype._fromRadians=function(p){return this._angleMode===c.DEGREES?p*c.RAD_TO_DEG:p},u.default.prototype._fromDegrees=function(p){return this._angleMode===c.RADIANS?p*c.DEG_TO_RAD:p};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(o,i,s){"use strict";o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.textAlign=function(l,u){var c;return a.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},a.default.prototype.textLeading=function(l){var u;return a.default._validateParameters("textLeading",arguments),(u=this._renderer).textLeading.apply(u,arguments)},a.default.prototype.textSize=function(l){var u;return a.default._validateParameters("textSize",arguments),(u=this._renderer).textSize.apply(u,arguments)},a.default.prototype.textStyle=function(l){var u;return a.default._validateParameters("textStyle",arguments),(u=this._renderer).textStyle.apply(u,arguments)},a.default.prototype.textWidth=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];if(u[0]+="",a.default._validateParameters("textWidth",u),u[0].length===0)return 0;for(var f=u[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),d=[],p=0;p<f.length;p++)d.push(this._renderer.textWidth(f[p]));return Math.max.apply(Math,d)},a.default.prototype.textAscent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textAscent",u),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textDescent",u),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(l){return a.default._validateParameters("textWrap",[l]),this._renderer.textWrap(l)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=p(o("../core/constants")),f=p(o("opentype.js"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=d();if(g&&g.has(m))return g.get(m);var y,b,x={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&((b=v?Object.getOwnPropertyDescriptor(m,y):null)&&(b.get||b.set)?Object.defineProperty(x,y,b):x[y]=m[y]);return x.default=m,g&&g.set(m,x),x}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadFont=function(m,g,y){u.default._validateParameters("loadFont",arguments);var b=new u.default.Font(this),x=this;return f.load(m,function(_,S){if(_)return u.default._friendlyFileLoadError(4,m),y!==void 0?y(_):void console.error(_,m);b.font=S,g!==void 0&&g(b),x._decrementPreload();var _=m.split("\\").pop().split("/").pop(),S=_.lastIndexOf("."),C=S<1?null:_.slice(S+1);["ttf","otf","woff","woff2"].includes(C)&&(C=_.slice(0,S!==-1?S:0),(_=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(C,`;
src: url(`).concat(m,`);
}
`))),document.head.appendChild(_))}),b},u.default.prototype.text=function(m,g,y,b,x){var v;return u.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(v=this._renderer).text.apply(v,arguments):this},u.default.prototype.textFont=function(m,g){if(u.default._validateParameters("textFont",arguments),arguments.length){if(m)return this._renderer._setProperty("_textFont",m),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var h=u.default;s.default=h},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(o,i,s){"use strict";function a(E){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(E)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../core/main"))&&l.__esModule?l:{default:l},u=function(E){if(E&&E.__esModule)return E;if(E===null||f(E)!=="object"&&typeof E!="function")return{default:E};var T=c();if(T&&T.has(E))return T.get(E);var I,k={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(I in E){var D;Object.prototype.hasOwnProperty.call(E,I)&&((D=F?Object.getOwnPropertyDescriptor(E,I):null)&&(D.get||D.set)?Object.defineProperty(k,I,D):k[I]=E[I])}return k.default=E,T&&T.set(E,k),k}(o("../core/constants"));function c(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,c=function(){return E},E)}function f(E){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(T){return a(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":a(T)})(E)}function d(E,T){for(var I=0;I<T.length;I++){var k=T[I];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}function p(E,T){var I=E.length;return E[T<0?T%I+I:T%I]}function h(E,T,I,k){var F,D,L;return k?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),D=h.tmpPoint1,L=h.tmpPoint2,D.x=T.x-E.x,D.y=T.y-E.y,L.x=I.x-T.x,L.y=I.y-T.y,F=D.x*L.x+D.y*L.y,D=Math.sqrt(D.x*D.x+D.y*D.y),L=Math.sqrt(L.x*L.x+L.y*L.y),Math.acos(F/(D*L))<k):(T[0]-E[0])*(I[1]-E[1])-(I[0]-E[0])*(T[1]-E[1])==0}function m(M,q,z,ee,ae,D,L,P,R){var V=1-R,U=Math.pow(V,3),H=Math.pow(V,2),$=R*R,X=$*R,G=U*M+3*H*R*z+3*V*R*R*ae+X*L,U=U*q+3*H*R*ee+3*V*R*R*D+X*P,H=M+2*R*(z-M)+$*(ae-2*z+M),X=q+2*R*(ee-q)+$*(D-2*ee+q),fe=z+2*R*(ae-z)+$*(L-2*ae+z),$=ee+2*R*(D-ee)+$*(P-2*D+ee),M=V*M+R*z,z=V*q+R*ee,q=V*ae+R*L,ee=V*D+R*P,ae=90-180*Math.atan2(H-fe,X-$)/Math.PI;return(fe<H||X<$)&&(ae+=180),{x:G,y:U,m:{x:H,y:X},n:{x:fe,y:$},start:{x:M,y:z},end:{x:q,y:ee},alpha:ae}}function g(E,T,I,k,F,D,L,P,R){return R==null?S(E,T,I,k,F,D,L,P):m(E,T,I,k,F,D,L,P,function(V,G,U,H,X,fe,$,M,z){if(!(z<0||S(V,G,U,H,X,fe,$,M)<z)){var q,ee=.5,ae=1-ee;for(q=S(V,G,U,H,X,fe,$,M,ae);.01<Math.abs(q-z);)q=S(V,G,U,H,X,fe,$,M,ae+=(q<z?1:-1)*(ee/=2));return ae}}(E,T,I,k,F,D,L,P,R))}function y(E,T,I){for(var k,F,D,L,P,R=0,V=0,G=(E=function(U,H){function X(Te,Fe,$e){var at,We;if(!Te)return["C",Fe.x,Fe.y,Fe.x,Fe.y,Fe.x,Fe.y];switch(Te[0]in{T:1,Q:1}||(Fe.qx=Fe.qy=null),Te[0]){case"M":Fe.X=Te[1],Fe.Y=Te[2];break;case"A":Te=["C"].concat(x.apply(0,[Fe.x,Fe.y].concat(Te.slice(1))));break;case"S":We=$e==="C"||$e==="S"?(at=2*Fe.x-Fe.bx,2*Fe.y-Fe.by):(at=Fe.x,Fe.y),Te=["C",at,We].concat(Te.slice(1));break;case"T":$e==="Q"||$e==="T"?(Fe.qx=2*Fe.x-Fe.qx,Fe.qy=2*Fe.y-Fe.qy):(Fe.qx=Fe.x,Fe.qy=Fe.y),Te=["C"].concat(_(Fe.x,Fe.y,Fe.qx,Fe.qy,Te[1],Te[2]));break;case"Q":Fe.qx=Te[1],Fe.qy=Te[2],Te=["C"].concat(_(Fe.x,Fe.y,Te[1],Te[2],Te[3],Te[4]));break;case"L":Te=["C"].concat(w(Fe.x,Fe.y,Te[1],Te[2]));break;case"H":Te=["C"].concat(w(Fe.x,Fe.y,Te[1],Fe.y));break;case"V":Te=["C"].concat(w(Fe.x,Fe.y,Fe.x,Te[1]));break;case"Z":Te=["C"].concat(w(Fe.x,Fe.y,Fe.X,Fe.Y))}return Te}function fe(Te,Fe){if(7<Te[Fe].length){Te[Fe].shift();for(var $e=Te[Fe];$e.length;)Q[Fe]="A",q&&(le[Fe]="A"),Te.splice(Fe++,0,["C"].concat($e.splice(0,6)));Te.splice(Fe,1),M=Math.max(z.length,q&&q.length||0)}}function $(Te,Fe,$e,at,We){Te&&Fe&&Te[We][0]==="M"&&Fe[We][0]!=="M"&&(Fe.splice(We,0,["M",at.x,at.y]),$e.bx=0,$e.by=0,$e.x=Te[We][1],$e.y=Te[We][2],M=Math.max(z.length,q&&q.length||0))}var M,z=b(U),q=H&&b(H),ee={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],le=[],ie="",K="";M=Math.max(z.length,q&&q.length||0);for(var ge=0;ge<M;ge++){(ie=z[ge]?z[ge][0]:ie)!=="C"&&(Q[ge]=ie,ge&&(K=Q[ge-1])),z[ge]=X(z[ge],ee,K),Q[ge]!=="A"&&ie==="C"&&(Q[ge]="C"),fe(z,ge),q&&((ie=q[ge]?q[ge][0]:ie)!=="C"&&(le[ge]=ie,ge&&(K=le[ge-1])),q[ge]=X(q[ge],ae,K),le[ge]!=="A"&&ie==="C"&&(le[ge]="C"),fe(q,ge)),$(z,q,ee,ae,ge),$(q,z,ae,ee,ge);var ne=z[ge],ye=q&&q[ge],xe=ne.length,De=q&&ye.length;ee.x=ne[xe-2],ee.y=ne[xe-1],ee.bx=parseFloat(ne[xe-4])||ee.x,ee.by=parseFloat(ne[xe-3])||ee.y,ae.bx=q&&(parseFloat(ye[De-4])||ae.x),ae.by=q&&(parseFloat(ye[De-3])||ae.y),ae.x=q&&ye[De-2],ae.y=q&&ye[De-1]}return q?[z,q]:z}(E)).length;V<G;V++){if((D=E[V])[0]==="M")k=+D[1],F=+D[2];else{if(T<R+(L=g(k,F,D[1],D[2],D[3],D[4],D[5],D[6]))&&!I)return{x:(P=g(k,F,D[1],D[2],D[3],D[4],D[5],D[6],T-R)).x,y:P.y,alpha:P.alpha};R+=L,k=+D[5],F=+D[6]}D.shift()}return P=(P=I?R:m(k,F,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:P.x,y:P.y,alpha:P.alpha}:P}function b(E){var T=[],I=0,k=0,F=0,D=0,L=0;if(E){E[0][0]==="M"&&(F=I=+E[0][1],D=k=+E[0][2],L++,T[0]=["M",I,k]);for(var P,R,V=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",G=L,U=E.length;G<U;G++){if(T.push(P=[]),(R=E[G])[0]!==R[0].toUpperCase())switch(P[0]=R[0].toUpperCase(),P[0]){case"A":P[1]=R[1],P[2]=R[2],P[3]=R[3],P[4]=R[4],P[5]=R[5],P[6]=+(R[6]+I),P[7]=+(R[7]+k);break;case"V":P[1]=+R[1]+k;break;case"H":P[1]=+R[1]+I;break;case"R":for(var H,X=2,fe=(H=[I,k].concat(R.slice(1))).length;X<fe;X++)H[X]=+H[X]+I,H[++X]=+H[X]+k;T.pop(),T=T.concat(v(H,V));break;case"M":F=+R[1]+I,D=+R[2]+k;break;default:for(var $=1,M=R.length;$<M;$++)P[$]=+R[$]+($%2?I:k)}else if(R[0]==="R")H=[I,k].concat(R.slice(1)),T.pop(),T=T.concat(v(H,V)),P=["R"].concat(R.slice(-2));else for(var z=0,q=R.length;z<q;z++)P[z]=R[z];switch(P[0]){case"Z":I=F,k=D;break;case"H":I=P[1];break;case"V":k=P[1];break;case"M":F=P[P.length-2],D=P[P.length-1];break;default:I=P[P.length-2],k=P[P.length-1]}}}return T}function x(E,T,I,k,q,Q,ee,P,R,V){function G(De,Te,Fe){return{x:De*Math.cos(Fe)-Te*Math.sin(Fe),y:De*Math.sin(Fe)+Te*Math.cos(Fe)}}var U,M=Math.PI,z=120*M/180,H=M/180*(+q||0),X=[],fe=(V?(ge=V[0],U=V[1],ie=V[2],K=V[3]):(E=(ae=G(E,T,-H)).x,T=ae.y,1<(fe=($=(E-(P=(ae=G(P,R,-H)).x))/2)*$/(I*I)+(ae=(T-(R=ae.y))/2)*ae/(k*k))&&(I*=fe=Math.sqrt(fe),k*=fe),fe=I*I,le=k*k,ie=(Q=(Q===ee?-1:1)*Math.sqrt(Math.abs((fe*le-fe*ae*ae-le*$*$)/(fe*ae*ae+le*$*$))))*I*ae/k+(E+P)/2,K=Q*-k*$/I+(T+R)/2,ge=Math.asin(((T-K)/k).toFixed(9)),U=Math.asin(((R-K)/k).toFixed(9)),(ge=E<ie?M-ge:ge)<0&&(ge=2*M+ge),(U=P<ie?M-U:U)<0&&(U=2*M+U),ee&&U<ge&&(ge-=2*M),!ee&&ge<U&&(U-=2*M)),U-ge),$=(Math.abs(fe)>z&&(le=U,ae=P,Q=R,U=ge+z*(ee&&ge<U?1:-1),X=x(P=ie+I*Math.cos(U),R=K+k*Math.sin(U),I,k,q,0,ee,ae,Q,[U,le,ie,K])),fe=U-ge,Math.cos(ge)),M=Math.sin(ge),z=Math.cos(U),q=Math.sin(U),ee=Math.tan(fe/4),ae=4/3*I*ee,Q=4/3*k*ee,le=[E,T],ie=[E+ae*M,T-Q*$],K=[P+ae*q,R-Q*z],ge=[P,R];if(ie[0]=2*le[0]-ie[0],ie[1]=2*le[1]-ie[1],V)return[ie,K,ge].concat(X);for(var ne=[],ye=0,xe=(X=[ie,K,ge].concat(X).join().split(",")).length;ye<xe;ye++)ne[ye]=ye%2?G(X[ye-1],X[ye],H).y:G(X[ye],X[ye+1],H).x;return ne}function v(E,T){for(var I=[],k=0,F=E.length;k<F-2*!T;k+=2){var D=[{x:+E[k-2],y:+E[k-1]},{x:+E[k],y:+E[k+1]},{x:+E[k+2],y:+E[k+3]},{x:+E[k+4],y:+E[k+5]}];T?k?F-4===k?D[3]={x:+E[0],y:+E[1]}:F-2===k&&(D[2]={x:+E[0],y:+E[1]},D[3]={x:+E[2],y:+E[3]}):D[0]={x:+E[F-2],y:+E[F-1]}:F-4===k?D[3]=D[2]:k||(D[0]={x:+E[k],y:+E[k+1]}),I.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return I}function w(E,T,I,k){return[E,T,I,k,I,k]}function _(E,T,I,k,F,D){return[1/3*E+2/3*I,1/3*T+2/3*k,1/3*F+2/3*I,1/3*D+2/3*k,F,D]}function S(E,T,I,k,F,D,L,P,R){for(var V=(R=1<(R=R??1)?1:R<0?0:R)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],U=0,H=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],X=0;X<12;X++){var $=V*G[X]+V,fe=C($,E,I,F,L),$=C($,T,k,D,P);U+=H[X]*Math.sqrt(fe*fe+$*$)}return V*U}function C(E,T,I,k,F){return E*(E*(-3*T+9*I-9*k+3*F)+6*T-12*I+6*k)-3*T+3*I}l.default.Font=function(){function E(F){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.parent=F,this.cache={},this.font=void 0}var T,I,k;return T=E,(I=[{key:"textBounds",value:function(F){var D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,P=4<arguments.length?arguments[4]:void 0,R=P&&P.renderer&&P.renderer._pInst||this.parent,V=R._renderer.drawingContext,G=(V.textAlign||u.LEFT,V.textBaseline||u.BASELINE,G||R._renderer._textSize);if(!Q){for(var U=[],H=[],X=[],fe=(X[0]=[],[]),$=this._scale(G),M=R._renderer.textLeading(),z=0,q=(this.font.forEachGlyph(F,D,L,G,P,function(K,ge,ne,ye){var xe=K.getMetrics();K.index===0?X[z+=1]=[]:(X[z].push(ge+xe.xMin*$),X[z].push(ge+xe.xMax*$),fe.push(ne+z*M+-xe.yMin*$),fe.push(ne+z*M+-xe.yMax*$))}),0<X[z].length&&(U[z]=Math.min.apply(null,X[z]),H[z]=Math.max.apply(null,X[z])),0),ee=0;ee<=z;ee++){U[ee]=Math.min.apply(null,X[ee]),H[ee]=Math.max.apply(null,X[ee]);var ae=H[ee]-U[ee];q<ae&&(q=ae)}var V=Math.min.apply(null,U),Q={x:V,y:L=Math.min.apply(null,fe),h:Math.max.apply(null,fe)-L,w:q,advance:V-D},G=this._handleAlignment(R._renderer,F,Q.x,Q.y,Q.w+Q.advance);Q.x=G.x,Q.y=G.y}return Q}},{key:"textToPoints",value:function(F,D,L,P,R){var V=D,G=[],U=F.split(/\r?\n|\r|\n/g);P=P||this.parent._renderer._textSize;for(var H,X,fe,$=0;$<U.length;$++){var M=0;D=V;for(var z=(z=U[$]).replace("	","  "),q=this._getGlyphs(z),ee=0;ee<q.length;ee++){if(X=z,!((fe=q)[H=ee].name&&fe[H].name==="space"||X.length===fe.length&&X[H]===" "))for(var ae=function(K){for(var ge,ne=[],ye=0;ye<K.length;ye++)K[ye].type==="M"&&(ge&&ne.push(ge),ge=[]),ge.push(function(xe){var De=[xe.type];return xe.type==="M"||xe.type==="L"?De.push(xe.x,xe.y):xe.type==="C"?De.push(xe.x1,xe.y1,xe.x2,xe.y2,xe.x,xe.y):xe.type==="Q"&&De.push(xe.x1,xe.y1,xe.x,xe.y),De}(K[ye]));return ne.push(ge),ne}(q[ee].getPath(D,L,P).commands),Q=0;Q<ae.length;Q++)for(var le=function(K,ge){for(var ge=function(Fe,$e){if(f(Fe)!=="object")Fe=$e;else for(var at in $e)Fe[at]===void 0&&(Fe[at]=$e[at]);return Fe}(ge,{sampleFactor:.1,simplifyThreshold:0}),ne=y(K,0,1),ye=ne/(ne*ge.sampleFactor),xe=[],De=0;De<ne;De+=ye)xe.push(y(K,De));return ge.simplifyThreshold&&function(Te){for(var Fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,$e=0,at=Te.length-1;3<Te.length&&0<=at;--at)h(p(Te,at-1),p(Te,at),p(Te,at+1),Fe)&&(Te.splice(at%Te.length,1),$e++)}(xe,ge.simplifyThreshold),xe}(ae[Q],R),ie=0;ie<le.length;ie++)le[ie].x+=M,G.push(le[ie]);M+=q[ee].advanceWidth*this._scale(P)}L+=this.parent._renderer._textLeading}return G}},{key:"_getGlyphs",value:function(F){return this.font.stringToGlyphs(F)}},{key:"_getPath",value:function(F,V,L,P){var R=(P&&P.renderer&&P.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(R,F,V,L);return this.font.getPath(F,V.x,V.y,R._textSize,P)}},{key:"_getPathData",value:function(F,D,L,P){var R=3;return typeof F=="string"&&2<arguments.length?F=this._getPath(F,D,L,P):f(D)==="object"&&(P=D),P&&typeof P.decimals=="number"&&(R=P.decimals),F.toPathData(R)}},{key:"_getSVG",value:function(F,D,L,P){var R=3;return typeof F=="string"&&2<arguments.length?F=this._getPath(F,D,L,P):f(D)==="object"&&(P=D),P&&(typeof P.decimals=="number"&&(R=P.decimals),typeof P.strokeWidth=="number"&&(F.strokeWidth=P.strokeWidth),P.fill!==void 0&&(F.fill=P.fill),P.stroke!==void 0&&(F.stroke=P.stroke)),F.toSVG(R)}},{key:"_renderPath",value:function(G,H,X,P){var R=P&&P.renderer||this.parent._renderer,V=R.drawingContext,G=(f(G)==="object"&&G.commands?G:this._getPath(G,H,X,P)).commands,U=(V.beginPath(),!0),H=!1,X=void 0;try{for(var fe,$=G[Symbol.iterator]();!(U=(fe=$.next()).done);U=!0){var M=fe.value;M.type==="M"?V.moveTo(M.x,M.y):M.type==="L"?V.lineTo(M.x,M.y):M.type==="C"?V.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?V.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&V.closePath()}}catch(z){H=!0,X=z}finally{try{U||$.return==null||$.return()}finally{if(H)throw X}}return R._doStroke&&R._strokeSet&&!R._clipping&&V.stroke(),R._doFill&&!R._clipping&&(R._fillSet||R._setFill(u._DEFAULT_TEXT_FILL),V.fill()),this}},{key:"_textWidth",value:function(F,D){return this.font.getAdvanceWidth(F,D)}},{key:"_textAscent",value:function(F){return this.font.ascender*this._scale(F)}},{key:"_textDescent",value:function(F){return-this.font.descender*this._scale(F)}},{key:"_scale",value:function(F){return 1/this.font.unitsPerEm*(F||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(F,D,L,P,R){var V=F._textSize;switch(R===void 0&&(R=this._textWidth(D,V)),F._textAlign){case u.CENTER:L-=R/2;break;case u.RIGHT:L-=R}switch(F._textBaseline){case u.TOP:P+=this._textAscent(V);break;case u.CENTER:P+=this._textAscent(V)/2;break;case u.BOTTOM:P-=this._textDescent(V)}return{x:L,y:P}}}])&&d(T.prototype,I),k&&d(T,k),E}(),o=l.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.append=function(a,l){return a.push(l),a},o.default.prototype.arrayCopy=function(a,l,u,c,f){var d,p;a=f!==void 0?(p=Math.min(f,a.length),d=c,a.slice(l,p+l)):(p=u!==void 0?(p=u,Math.min(p,a.length)):a.length,u=l,a.slice(d=0,p)),Array.prototype.splice.apply(u,[d,p].concat(a))},o.default.prototype.concat=function(a,l){return a.concat(l)},o.default.prototype.reverse=function(a){return a.reverse()},o.default.prototype.shorten=function(a){return a.pop(),a},o.default.prototype.shuffle=function(a,l){for(var u,c,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),d=(a=l||f?a:a.slice()).length;1<d;)u=this.random(0,1)*d|0,c=a[--d],a[d]=a[u],a[u]=c;return a},o.default.prototype.sort=function(a,c){var u=c?a.slice(0,Math.min(c,a.length)):a,c=c?a.slice(Math.min(c,a.length)):[];return(u=typeof u[0]=="string"?u.sort():u.sort(function(f,d){return f-d})).concat(c)},o.default.prototype.splice=function(a,l,u){return Array.prototype.splice.apply(a,[u,0].concat(l)),a},o.default.prototype.subset=function(a,l,u){return u!==void 0?a.slice(l,l+u):a.slice(l,a.length)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.float=function(l){return l instanceof Array?l.map(parseFloat):parseFloat(l)},a.default.prototype.int=function(l){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return l===1/0||l==="Infinity"?1/0:l===-1/0||l==="-Infinity"?-1/0:typeof l=="string"?parseInt(l,u):typeof l=="number"?0|l:typeof l=="boolean"?l?1:0:l instanceof Array?l.map(function(c){return a.default.prototype.int(c,u)}):void 0},a.default.prototype.str=function(l){return l instanceof Array?l.map(a.default.prototype.str):String(l)},a.default.prototype.boolean=function(l){return typeof l=="number"?l!==0:typeof l=="string"?l.toLowerCase()==="true":typeof l=="boolean"?l:l instanceof Array?l.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(l){return l=a.default.prototype.int(l,10),typeof l=="number"?(l+128)%256-128:l instanceof Array?l.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(l){return typeof l!="number"||isNaN(l)?l instanceof Array?l.map(a.default.prototype.char):typeof l=="string"?a.default.prototype.char(parseInt(l,10)):void 0:String.fromCharCode(l)},a.default.prototype.unchar=function(l){return typeof l=="string"&&l.length===1?l.charCodeAt(0):l instanceof Array?l.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(l,u){if(u=u??8,l instanceof Array)return l.map(function(f){return a.default.prototype.hex(f,u)});if(l===1/0||l===-1/0)return(l===1/0?"F":"0").repeat(u);if(typeof l=="number"){l<0&&(l=4294967295+l+1);for(var c=Number(l).toString(16).toUpperCase();c.length<u;)c="0".concat(c);return c=c.length>=u?c.substring(c.length-u,c.length):c}},a.default.prototype.unhex=function(l){return l instanceof Array?l.map(a.default.prototype.unhex):parseInt("0x".concat(l),16)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(p=o("../core/main"))&&p.__esModule?p:{default:p};function l(h,m){return function(g){if(Array.isArray(g))return g}(h)||function(g,y){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var b=[],x=!0,v=!1,w=void 0;try{for(var _,S=g[Symbol.iterator]();!(x=(_=S.next()).done)&&(b.push(_.value),!y||b.length!==y);x=!0);}catch(C){v=!0,w=C}finally{try{x||S.return==null||S.return()}finally{if(v)throw w}}return b}}(h,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(h,m,g){var b=l(h.toString().split("."),2),y=b[0],b=b[1];return g===void 0?(y=y.padStart(m,"0"),b?y+"."+b:y):(y=(h=l(h.toFixed(g).toString().split("."),2))[0],b=h[1],y=y.padStart(m,"0"),b===void 0?y:y+"."+b)}function c(b,m){var g=(b=b.toString()).indexOf("."),y=g!==-1?b.substring(g):"",b=(b=g!==-1?b.substring(0,g):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(m===0)y="";else if(m!==void 0)if(m>y.length)for(var x=m-(y+=g===-1?".":"").length+1,v=0;v<x;v++)y+="0";else y=y.substring(0,m+1);return b+y}function f(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function d(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),a.default.prototype.join=function(h,m){return a.default._validateParameters("join",arguments),h.join(m)},a.default.prototype.match=function(h,m){return a.default._validateParameters("match",arguments),h.match(m)},a.default.prototype.matchAll=function(h,m){a.default._validateParameters("matchAll",arguments);for(var g=new RegExp(m,"g"),y=g.exec(h),b=[];y!==null;)b.push(y),y=g.exec(h);return b},a.default.prototype.nf=function(h,m,g){return a.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(y){return u(y,m,g)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):u(h,m,g)},a.default.prototype.nfc=function(h,m){return a.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(g){return c(g,m)}):c(h,m)},a.default.prototype.nfp=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("nfp",m);var y=a.default.prototype.nf.apply(this,m);return y instanceof Array?y.map(f):f(y)},a.default.prototype.nfs=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("nfs",m);var y=a.default.prototype.nf.apply(this,m);return y instanceof Array?y.map(d):d(y)},a.default.prototype.split=function(h,m){return a.default._validateParameters("split",arguments),h.split(m)},a.default.prototype.splitTokens=function(h,m){var g,y;return a.default._validateParameters("splitTokens",arguments),y=m!==void 0?(y=/\]/g.exec(m=m),(g=/\[/g.exec(m))&&y?(m=m.slice(0,y.index)+m.slice(y.index+1),g=/\[/g.exec(m),m=m.slice(0,g.index)+m.slice(g.index+1),new RegExp("[\\[".concat(m,"\\]]"),"g")):y?(m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[".concat(m,"\\]]"),"g")):g?(m=m.slice(0,g.index)+m.slice(g.index+1),new RegExp("[".concat(m,"\\[]"),"g")):new RegExp("[".concat(m,"]"),"g")):/\s/g,h.split(y).filter(function(b){return b})},a.default.prototype.trim=function(h){return a.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var p=a.default;s.default=p},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.day=function(){return new Date().getDate()},o.default.prototype.hour=function(){return new Date().getHours()},o.default.prototype.minute=function(){return new Date().getMinutes()},o.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},o.default.prototype.month=function(){return new Date().getMonth()+1},o.default.prototype.second=function(){return new Date().getSeconds()},o.default.prototype.year=function(){return new Date().getFullYear()},o=o.default,s.default=o},{"../core/main":280}],323:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=(o("./p5.Geometry"),function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("../core/constants")));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}u.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},u.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},u.default.prototype.buildGeometry=function(h){return this._renderer.buildGeometry(h)},u.default.prototype.freeGeometry=function(h){this._renderer._freeBuffers(h.gid)},u.default.prototype.plane=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),u.default._validateParameters("plane",arguments),"plane|".concat(y,"|").concat(b));return this._renderer.geometryInHash(x)||((h=new u.default.Geometry(y,b,function(){for(var v,w,_=0;_<=this.detailY;_++)for(var S=_/this.detailY,C=0;C<=this.detailX;C++)v=C/this.detailX,w=new u.default.Vector(v-.5,S-.5,0),this.vertices.push(w),this.uvs.push(v,S)})).computeFaces().computeNormals(),y<=1&&b<=1?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,h)),this._renderer.drawBuffersScaled(x,m,g,1),this},u.default.prototype.box=function(h,m,g,y,b){this._assert3d("box"),u.default._validateParameters("box",arguments),h===void 0&&(h=50),m===void 0&&(m=h),g===void 0&&(g=m);var x,v=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,v=(b===void 0&&(b=v?1:4),"box|".concat(y=y===void 0?v?1:4:y,"|").concat(b));return this._renderer.geometryInHash(v)||((x=new u.default.Geometry(y,b,function(){var w=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(_,S){for(var S=4*S,C=0;C<4;C++){var E=_[C],E=new u.default.Vector((2*(1&E)-1)/2,((2&E)-1)/2,((4&E)/2-1)/2);w.vertices.push(E),w.uvs.push(1&C,(2&C)/2)}w.faces.push([S,1+S,2+S]),w.faces.push([2+S,1+S,3+S])})})).computeNormals(),y<=4&&b<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,x)),this._renderer.drawBuffersScaled(v,h,m,g),this},u.default.prototype.sphere=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),u.default._validateParameters("sphere",arguments),this.ellipsoid(h,h,h,m,g),this};function d(h,m,g,y,b,x,v){h=h<=0?1:h,m=m<0?0:m,g=g<=0?h:g,y=y<3?3:y;for(var w,_,S=(x=x===void 0||x)?-2:0,C=(b=b<1?1:b)+((v=v===void 0?m!==0:v)?2:0),E=Math.atan2(h-m,g),T=Math.sin(E),I=Math.cos(E),k=S;k<=C;++k){var F=k/b,D=g*F,L=void 0,L=k<0?(F=D=0,h):b<k?(D=g,F=1,m):h+(m-h)*F;for(k!==-2&&k!==b+2||(L=0),D-=g/2,w=0;w<y;++w){var P=w/(y-1),V=2*Math.PI*P,R=Math.sin(V),V=Math.cos(V),G=(this.vertices.push(new u.default.Vector(R*L,D,V*L)),void 0),G=k<0?new u.default.Vector(0,-1,0):b<k&&m?new u.default.Vector(0,1,0):new u.default.Vector(R*I,T,V*I);this.vertexNormals.push(G),this.uvs.push(P,F)}}var U=0;if(x){for(_=0;_<y;++_)this.faces.push([U+_,U+y+(_+1)%y,U+y+_]);U+=2*y}for(k=0;k<b;++k){for(w=0;w<y;++w){var H=(w+1)%y;this.faces.push([U+w,U+H,U+y+H]),this.faces.push([U+w,U+y+H,U+y+w])}U+=y}if(v)for(U+=y,w=0;w<y;++w)this.faces.push([U+w,U+(w+1)%y,U+y])}u.default.prototype.cylinder=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],w=(this._assert3d("cylinder"),u.default._validateParameters("cylinder",arguments),"cylinder|".concat(y,"|").concat(b,"|").concat(x,"|").concat(v));return this._renderer.geometryInHash(w)||(h=new u.default.Geometry(y,b),d.call(h,1,1,1,y,b,x,v),y<=24&&b<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,h)),this._renderer.drawBuffersScaled(w,m,g,m),this},u.default.prototype.cone=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=(this._assert3d("cone"),u.default._validateParameters("cone",arguments),"cone|".concat(y,"|").concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||(h=new u.default.Geometry(y,b),d.call(h,1,0,1,y,b,x,!1),y<=24&&b<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,m,g,m),this},u.default.prototype.ellipsoid=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:m,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,v=(this._assert3d("ellipsoid"),u.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||((h=new u.default.Geometry(b,x,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,S=Math.PI*_-Math.PI/2,C=Math.cos(S),E=Math.sin(S),T=0;T<=this.detailX;T++){var I=T/this.detailX,F=2*Math.PI*I,k=Math.cos(F),F=Math.sin(F),F=new u.default.Vector(C*F,E,C*k);this.vertices.push(F),this.vertexNormals.push(F),this.uvs.push(I,_)}})).computeFaces(),b<=24&&x<=24?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,m,g,y),this},u.default.prototype.torus=function(h,v,g,y){if(this._assert3d("torus"),u.default._validateParameters("torus",arguments),h===void 0)h=50;else if(!h)return;if(v===void 0)v=10;else if(!v)return;g===void 0&&(g=24),y===void 0&&(y=16);var b,x=(v/h).toPrecision(4),v="torus|".concat(x,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(v)||((b=new u.default.Geometry(g,y,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,S=2*Math.PI*_,C=Math.cos(S),E=Math.sin(S),T=1+x*C,I=0;I<=this.detailX;I++){var k=I/this.detailX,F=2*Math.PI*k,L=Math.cos(F),F=Math.sin(F),D=new u.default.Vector(T*L,T*F,x*E),L=new u.default.Vector(C*L,C*F,E);this.vertices.push(D),this.vertexNormals.push(L),this.uvs.push(k,_)}})).computeFaces(),g<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,b)),this._renderer.drawBuffersScaled(v,h,h,h),this},u.default.RendererGL.prototype.point=function(h,m){var g=[];return g.push(new u.default.Vector(h,m,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(g,this.immediateMode.buffers.point),this},u.default.RendererGL.prototype.triangle=function(v){var m=v[0],g=v[1],y=v[2],b=v[3],x=v[4],v=v[5],w=(this.geometryInHash("tri")||((w=new u.default.Geometry(1,1,function(){var C=[];C.push(new u.default.Vector(0,0,0)),C.push(new u.default.Vector(1,0,0)),C.push(new u.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var _=Math.sign(m*b-y*g+y*v-x*b+x*g-m*v),S=new u.default.Matrix([y-m,b-g,0,0,x-m,v-g,0,0,0,0,_,0,m,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=S,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},u.default.RendererGL.prototype.ellipse=function(h){this.arc(h[0],h[1],h[2],h[3],0,c.TWO_PI,c.OPEN,h[4])},u.default.RendererGL.prototype.arc=function(){var h,m=arguments.length<=0?void 0:arguments[0],g=arguments.length<=1?void 0:arguments[1],y=arguments.length<=2?void 0:arguments[2],b=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],v=arguments.length<=5?void 0:arguments[5],w=arguments.length<=6?void 0:arguments[6],_=(arguments.length<=7?void 0:arguments[7])||25,S=(Math.abs(v-x)>=c.TWO_PI?"".concat(C="ellipse","|"):"".concat(C="arc","|").concat(x,"|").concat(v,"|").concat(w,"|")).concat(_,"|"),C=(this.geometryInHash(S)||((h=new u.default.Geometry(_,1,function(){if(x.toFixed(10)!==v.toFixed(10)){w!==c.PIE&&w!==void 0||(this.vertices.push(new u.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var E=0;E<=_;E++){var I=(v-x)*(E/_)+x,T=.5+Math.cos(I)/2,I=.5+Math.sin(I)/2;this.vertices.push(new u.default.Vector(T,I,0)),this.uvs.push([T,I]),E<_-1&&(this.faces.push([0,E+1,E+2]),this.edges.push([E+1,E+2]))}switch(w){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case c.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case c.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),_<=50?h._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(C," with more than 50 detail")),this.createBuffers(S,h)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(S)}finally{this.uMVMatrix=C}return this},u.default.RendererGL.prototype.rect=function(h){var m=h[0],g=h[1],y=h[2],b=h[3];if(h[4]===void 0){var w=this._pInst._glAttributes.perPixelLighting,x=h[4]||(w?1:24),v=h[5]||(w?1:16),w="rect|".concat(x,"|").concat(v),_=(this.geometryInHash(w)||((_=new u.default.Geometry(x,v,function(){for(var G=0;G<=this.detailY;G++)for(var U=G/this.detailY,H=0;H<=this.detailX;H++){var X=H/this.detailX,fe=new u.default.Vector(X,U,0);this.vertices.push(fe),this.uvs.push(X,U)}0<x&&0<v&&(this.edges=[[0,x],[x,(x+1)*(v+1)-1],[(x+1)*(v+1)-1,(x+1)*v],[(x+1)*v,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(w,_)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(w)}finally{this.uMVMatrix=_}}else{var w=h[4],_=h[5]===void 0?w:h[5],S=h[6]===void 0?_:h[6],h=h[7]===void 0?S:h[7],F=y,C=b,I=((F+=m)<m&&(I=m,m=F,F=I),(C+=g)<g&&(I=g,g=C,C=I),Math.min((F-m)/2,(C-g)/2)),E=(I<w&&(w=I),I<_&&(_=I),I<S&&(S=I),I<h&&(h=I),m),T=g,I=F,m=C,k=(this.beginShape(),_!==0?(this.vertex(I-_,T),this.quadraticVertex(I,T,I,T+_)):this.vertex(I,T),S!==0?(this.vertex(I,m-S),this.quadraticVertex(I,m,I-S,m)):this.vertex(I,m),h!==0?(this.vertex(E+h,m),this.quadraticVertex(E,m,E,m-h)):this.vertex(E,m),w!==0?(this.vertex(E,T+w),this.quadraticVertex(E,T,E+w,T)):this.vertex(E,T),!(this.immediateMode.geometry.uvs.length=0)),g=!1,F=void 0;try{for(var D,L=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(D=L.next()).done);k=!0){var P=D.value,R=(P.x-E)/y,V=(P.y-T)/b;this.immediateMode.geometry.uvs.push(R,V)}}catch($){g=!0,F=$}finally{try{k||L.return==null||L.return()}finally{if(g)throw F}}this.endShape(c.CLOSE)}return this},u.default.RendererGL.prototype.quad=function(h,m,g,y,b,x,v,w,_,S,C,E){var T=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,I=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(h,"|").concat(m,"|").concat(g,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(v,"|").concat(w,"|").concat(_,"|").concat(S,"|").concat(C,"|").concat(E,"|").concat(T,"|").concat(I);if(!this.geometryInHash(k)){var F=new u.default.Geometry(T,I,function(){for(var H=1/(this.detailX-1),X=1/(this.detailY-1),fe=0;fe<this.detailY;fe++)for(var $=0;$<this.detailX;$++){var M=$*H,z=fe*X;this.vertices.push(new u.default.Vector((1-M)*((1-z)*h+z*S)+M*((1-z)*y+z*v),(1-M)*((1-z)*m+z*C)+M*((1-z)*b+z*w),(1-M)*((1-z)*g+z*E)+M*((1-z)*x+z*_))),this.uvs.push([M,z])}});F.faces=[];for(var D=0;D<I-1;D++)for(var L=0;L<T-1;L++){var P=L+D*T,R=L+1+(D+1)*T,V=L+(D+1)*T;F.faces.push([P,L+1+D*T,R]),F.faces.push([P,R,V])}F.computeNormals();for(var G=[F.edges.length=0,2,3,1],U=0;U<G.length;U++)F.edges.push([G[U],G[(U+1)%G.length]]);F._edgesToVertices(),this.createBuffers(k,F)}return this.drawBuffers(k),this},u.default.RendererGL.prototype.bezier=function(h,m,g,y,b,x,v,w,_,S,C,E){arguments.length===8&&(C=w,S=v,w=x,v=b,b=y,y=g,g=x=_=E=0);var T=this._pInst._bezierDetail||20;this.beginShape();for(var I=0;I<=T;I++){var k=Math.pow(1-I/T,3),F=I/T*3*Math.pow(1-I/T,2),D=3*Math.pow(I/T,2)*(1-I/T),L=Math.pow(I/T,3);this.vertex(h*k+y*F+v*D+S*L,m*k+b*F+w*D+C*L,g*k+x*F+_*D+E*L)}return this.endShape(),this},u.default.RendererGL.prototype.curve=function(h,m,g,y,b,x,v,w,_,S,C,E){arguments.length===8&&(S=v,C=w,v=b,w=y,b=y=g,g=x=_=E=0);var T=this._pInst._curveDetail;this.beginShape();for(var I=0;I<=T;I++){var k=.5*Math.pow(I/T,3),F=.5*Math.pow(I/T,2),D=I/T*.5;this.vertex(k*(3*y-h-3*v+S)+F*(2*h-5*y+4*v-S)+D*(-h+v)+2*y*.5,k*(3*b-m-3*w+C)+F*(2*m-5*b+4*w-C)+D*(-m+w)+2*b*.5,k*(3*x-g-3*_+E)+F*(2*g-5*x+4*_-E)+D*(-g+_)+2*x*.5)}return this.endShape(),this},u.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},u.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var S=1/this._lutBezierDetail,C=0,E=1,T=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableBezier[T]=this._bezierCoefficients(x),E.toFixed(6)===S.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++T,this._lookUpTableBezier[T]=this._bezierCoefficients(x);break}C+=S,E-=S,++T}}for(var I=this._lookUpTableBezier.length,k=[],F=0;F<4;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var D=[];for(F=0;F<4;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),_===6){this.isBezier=!0;var v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],L=Math.hypot(v[0]-v[1],w[0]-w[1]),R=Math.hypot(v[1]-v[2],w[1]-w[2]),P=Math.hypot(v[2]-v[3],w[2]-w[3]),R=L+R+P;for(L/=R,P/=R,b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[3][b]*L),k[2].push(k[0][b]*P+k[3][b]*(1-P)),D[1].push(D[0][b]*(1-L)+D[3][b]*L),D[2].push(D[0][b]*P+D[3][b]*(1-P));for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][F]*D[F][b];h+=v[F]*this._lookUpTableBezier[y][F],m+=w[F]*this._lookUpTableBezier[y][F]}this.vertex(h,m)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(_===9){this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var V=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(v[0]-v[1],w[0]-w[1],V[0]-V[1]),R=Math.hypot(v[1]-v[2],w[1]-w[2],V[1]-V[2]),U=Math.hypot(v[2]-v[3],w[2]-w[3],V[2]-V[3]),_=G+R+U;for(G/=_,U/=_,b=0;b<4;b++)k[1].push(k[0][b]*(1-G)+k[3][b]*G),k[2].push(k[0][b]*U+k[3][b]*(1-U)),D[1].push(D[0][b]*(1-G)+D[3][b]*G),D[2].push(D[0][b]*U+D[3][b]*(1-U));for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=g=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][F]*D[F][b];h+=v[F]*this._lookUpTableBezier[y][F],m+=w[F]*this._lookUpTableBezier[y][F],g+=V[F]*this._lookUpTableBezier[y][F]}this.vertex(h,m,g)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},u.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var S=1/this._lutQuadraticDetail,C=0,E=1,T=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[T]=this._quadraticCoefficients(x),E.toFixed(6)===S.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++T,this._lookUpTableQuadratic[T]=this._quadraticCoefficients(x);break}C+=S,E-=S,++T}}for(var I=this._lookUpTableQuadratic.length,k=[],F=0;F<3;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var D=[];for(F=0;F<3;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),_===4){this.isQuadratic=!0;var v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],L=Math.hypot(v[0]-v[1],w[0]-w[1]);for(L/=L+Math.hypot(v[1]-v[2],w[1]-w[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[2][b]*L),D[1].push(D[0][b]*(1-L)+D[2][b]*L);for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][F]*D[F][b];h+=v[F]*this._lookUpTableQuadratic[y][F],m+=w[F]*this._lookUpTableQuadratic[y][F]}this.vertex(h,m)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(_===6){this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var P=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],R=Math.hypot(v[0]-v[1],w[0]-w[1],P[0]-P[1]);for(R/=R+Math.hypot(v[1]-v[2],w[1]-w[2],P[1]-P[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-R)+k[2][b]*R),D[1].push(D[0][b]*(1-R)+D[2][b]*R);for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=g=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][F]*D[F][b];h+=v[F]*this._lookUpTableQuadratic[y][F],m+=w[F]*this._lookUpTableQuadratic[y][F],g+=P[F]*this._lookUpTableQuadratic[y][F]}this.vertex(h,m,g)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},u.default.RendererGL.prototype.curveVertex=function(){var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var S=1/this._lutBezierDetail,C=0,E=1,T=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableBezier[T]=this._bezierCoefficients(x),E.toFixed(6)===S.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++T,this._lookUpTableBezier[T]=this._bezierCoefficients(x);break}C+=S,E-=S,++T}}var I=this._lookUpTableBezier.length;if(_===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<I;b++)m=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],this.vertex(m,g);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}}else if(_===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),h=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<I;b++)m=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],y=h[0]*this._lookUpTableBezier[b][0]+h[1]*this._lookUpTableBezier[b][1]+h[2]*this._lookUpTableBezier[b][2]+h[3]*this._lookUpTableBezier[b][3],this.vertex(m,g,y);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}},u.default.RendererGL.prototype.image=function(h,E,g,T,b,x,v,w,_){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(h),this._pInst.textureMode(c.NORMAL);var S=0,C=(E<=h.width&&(S=E/h.width),1),E=(E+T<=h.width&&(C=(E+T)/h.width),0),T=(g<=h.height&&(E=g/h.height),1);g+b<=h.height&&(T=(g+b)/h.height),this.beginShape(),this.vertex(x,v,0,S,E),this.vertex(x+w,v,0,C,E),this.vertex(x+w,v+_,0,C,T),this.vertex(x,v+_,0,S,T),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var p=u.default;s.default=p},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(m,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}var h=function(){function m(x){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new u.default.Matrix,x.uMVMatrix=new u.default.Matrix,this.geometry=new u.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(m.nextGeometryId),m.nextGeometryId++,this.hasTransform=!1}var g,y,b;return g=m,(y=[{key:"transformVertices",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uMVMatrix.multiplyPoint(w)}):x}},{key:"transformNormals",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uNMatrix.multiplyVec3(w)}):x}},{key:"addGeometry",value:function(x){for(var v,w=this,_=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(C,E){return C===w.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),S=((v=this.geometry.vertices).push.apply(v,d(this.transformVertices(x.vertices))),(v=this.geometry.vertexNormals).push.apply(v,d(this.transformNormals(x.vertexNormals))),(v=this.geometry.uvs).push.apply(v,d(x.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,d(x.faces.map(function(C){return C.map(function(E){return E+_})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,d(x.edges.map(function(C){return C.map(function(E){return E+_})}))),d(x.vertexColors));S.length<4*x.vertices.length;)S.push.apply(S,d(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,d(S))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(v===c.TRIANGLE_STRIP||v===c.QUAD_STRIP)for(var _=2;_<x.vertices.length;_++)_%2==0?w.push([_,_-1,_-2]):w.push([_,_-2,_-1]);else if(v===c.TRIANGLE_FAN)for(var S=2;S<x.vertices.length;S++)w.push([0,S-1,S]);else for(var C=0;C<x.vertices.length;C+=3)w.push([C,C+1,C+2]);this.addGeometry(Object.assign({},x,{faces:w}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&p(g.prototype,y),b&&p(g,b),m}();h.nextGeometryId=0,s.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=o("../core/main"))&&d.__esModule?d:{default:d},u=function(p){if(p&&p.__esModule)return p;if(p===null||f(p)!=="object"&&typeof p!="function")return{default:p};var h=c();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function c(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,c=function(){return p},p)}function f(p){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}l.default.prototype.orbitControl=function(p,h,m,_){var y=this,b=(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);p===void 0&&(p=1),h===void 0&&(h=p),m===void 0&&(m=1),f(_)!=="object"&&(_={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=_.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,v,w,C=_.freeRotation,_=C!==void 0&&C,S=[],C=(this.touches.forEach(function(L){y._renderer.prevTouches.forEach(function(P){L.id===P.id&&(P={x:L.x,y:L.y,px:P.x,py:P.y},S.push(P))})}),this._renderer.prevTouches=this.touches,0),E=0,T=0,I=0,k=0,F=this.height<this.width?this.height:this.width,D=!1;return 0<S.length?(D=0<S[0].x&&S[0].x<this.width&&0<S[0].y&&S[0].y<this.height,S.length===1?(E=-p*((x=S[0]).x-x.px)/F,T=h*(x.y-x.py)/F):(x=S[0],v=S[1],C=-(Math.hypot(x.x-v.x,x.y-v.y)-Math.hypot(x.px-v.px,x.py-v.py))*m*4e-4,I=.5*(x.x+v.x)-.5*(x.px+v.px),k=.5*(x.y+v.y)-.5*(x.py+v.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*m,C*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(E=-p*this.movedX/F,T=h*this.movedY/F):this.mouseButton===this.RIGHT&&(I=this.movedX,k=this.movedY*b.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(_?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,E===0&&T===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*E,.6*T),1e-6<this._renderer.rotateVelocity.magSq()?(_?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),I===0&&k===0||!this._renderer.executeRotateAndMove||(x=2*I/this.width,v=2*-k/this.height,this._renderer.moveVelocity.add(.15*x,.15*v)),1e-6<this._renderer.moveVelocity.magSq()?(m=b._getLocalAxes(),p=b.eyeX-b.centerX,h=b.eyeY-b.centerY,F=b.eyeZ-b.centerZ,D=Math.sqrt(p*p+h*h+F*F),C=new l.default.Vector(b.centerX,b.centerY,b.centerZ),C=b.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,T=(E=this._renderer.uPMatrix.mat4)[15]===0?(w=(E[8]+C.x)/E[0]*D,(E[9]+C.y)/E[5]*D):(w=(C.x-E[12])/E[0],(C.y-E[13])/E[5]),b.setPosition(b.eyeX+w*m.x[0]+T*m.y[0],b.eyeY+w*m.x[1]+T*m.y[1],b.eyeZ+w*m.x[2]+T*m.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];l.default._validateParameters("debugMode",h);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);h[0]===u.GRID?this.registerMethod("post",this._grid(h[1],h[2],h[3],h[4],h[5])):h[0]===u.AXES?this.registerMethod("post",this._axesIcon(h[1],h[2],h[3],h[4])):(this.registerMethod("post",this._grid(h[0],h[1],h[2],h[3],h[4])),this.registerMethod("post",this._axesIcon(h[5],h[6],h[7],h[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1)},l.default.prototype._grid=function(p,h,m,g,y){p===void 0&&(p=this.width/2),h===void 0&&(h=Math.round(p/30)<4?4:Math.round(p/30)),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0);var b=p/h,x=p/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var v=0;v<=h;v++)this.beginShape(this.LINES),this.vertex(-x+m,g,v*b-x+y),this.vertex(x+m,g,v*b-x+y),this.endShape();for(var w=0;w<=h;w++)this.beginShape(this.LINES),this.vertex(w*b-x+m,g,-x+y),this.vertex(w*b-x+m,g,x+y),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(p,h,m,g){return p===void 0&&(p=40<this.width/20?this.width/20:40),h===void 0&&(h=-this.width/4),m===void 0&&(m=h),g===void 0&&(g=h),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h+p,m,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h,m+p,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h,m,g+p),this.endShape(),this.pop()}};var d=l.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.ambientLight=function(l,u,c,f){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var d=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(d._array[0],d._array[1],d._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(l,u,c){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},a.default.prototype.directionalLight=function(l,y,g,f,d,p){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),l=l instanceof a.default.Color?l:this.color(l,y,g);var h,m,y=arguments[arguments.length-1],g=typeof y=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=y.x,m=y.y,y.z),y=Math.sqrt(h*h+m*m+g*g);return this._renderer.directionalLightDirections.push(h/y,m/y,g/y),this._renderer.directionalLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(l,g,y,f,d,p){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),l=l instanceof a.default.Color?l:this.color(l,g,y);var h,m,g=arguments[arguments.length-1],y=typeof g=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=g.x,m=g.y,g.z);return this._renderer.pointLightPositions.push(h,m,y),this._renderer.pointLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(l){this._renderer.activeImageLight=l,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(l){this.filter(this._renderer._getSphereMapping(l))},a.default.prototype.lights=function(){this._assert3d("lights");var l=this.color("rgb(128,128,128)");return this.ambientLight(l),this.directionalLight(l,0,0,-1),this},a.default.prototype.lightFalloff=function(l,u,c){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),l<0&&(l=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),l===0&&u===0&&c===0&&(l=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=l,this._renderer.linearAttenuation=u,this._renderer.quadraticAttenuation=c,this},a.default.prototype.spotLight=function(l,u,c,f,d,p,h,m,g,y,b){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var x,v,w,_=arguments.length;switch(_){case 11:case 10:x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(h,m,g);break;case 9:l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),w=new a.default.Vector(d,p,h),y=m,b=g):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=new a.default.Vector(d,p,h),y=m,b=g):h instanceof a.default.Vector?(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=h,y=m,b=g):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(h,m,g));break;case 8:y=(w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,h)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,h)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),h),m);break;case 7:l instanceof a.default.Color&&u instanceof a.default.Vector?(x=l,v=u,w=new a.default.Vector(c,f,d),y=p,b=h):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p,b=h):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p,b=h):w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,h)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,h)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),h);break;case 6:f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d),y=p);break;case 5:l instanceof a.default.Color&&u instanceof a.default.Vector&&c instanceof a.default.Vector?(x=l,v=u,w=c,y=f,b=d):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d));break;case 4:x=l,v=u,w=c,y=f;break;case 3:x=l,v=u,w=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(_<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(v.x,v.y,v.z),w.normalize(),this._renderer.spotLightDirections.push(w.x,w.y,w.z),y===void 0&&(y=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),y=this._renderer._pInst._toRadians(y),this._renderer.spotLightAngle.push(Math.cos(y)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("noLights",u),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var l=(p=o("../core/main"))&&p.__esModule?p:{default:p};function u(h){return function(m){if(Array.isArray(m)){for(var g=0,y=new Array(m.length);g<m.length;g++)y[g]=m[g];return y}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(h,m,g,y,b,x,v){try{var w=h[x](v),_=w.value}catch(S){return void g(S)}w.done?m(_):Promise.resolve(_).then(y,b)}function f(h){return function(){var m=this,g=arguments;return new Promise(function(y,b){var x=h.apply(m,g);function v(_){c(x,y,b,v,w,"next",_)}function w(_){c(x,y,b,v,w,"throw",_)}v(void 0)})}}function d(h){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("./p5.Geometry"),l.default.prototype.loadModel=function(h,m){l.default._validateParameters("loadModel",arguments);var g,y,b=!1,x=!1,v=!1,w=h.slice(-4),_=(m&&d(m)==="object"?(b=m.normalize||!1,g=m.successCallback,y=m.failureCallback,w=m.fileType||w,x=m.flipU||!1,v=m.flipV||!1):typeof m=="boolean"?(b=m,g=arguments[2],y=arguments[3],arguments[4]!==void 0&&(w=arguments[4])):(g=typeof m=="function"?m:void 0,y=arguments[2],arguments[3]!==void 0&&(w=arguments[3])),new l.default.Geometry),S=(_.gid="".concat(h,"|").concat(b),this);function C(){return(C=f(regeneratorRuntime.mark(function T(I){var k,F,D,L;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:for(k=[],F=0;F<I.length;F++)(D=I[F].match(/^mtllib (.+)/))&&function(){var R="",V=D[1],G=h.split("/");R=1<G.length?(G.pop(),G.join("/")+"/"+V):V,k.push(function(){return E.apply(this,arguments)}(R).then(function(U){return U?(H=S,X=R,new Promise(function(fe,$){var M=null,z={};H.loadStrings(X,function(q){for(var ee=0;ee<q.length;++ee){var ae,Q=q[ee].trim().split(/\s+/);Q[0]==="newmtl"?(ae=Q[1],z[M=ae]={}):Q[0]==="Kd"?z[M].diffuseColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ka"?z[M].ambientColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ks"?z[M].specularColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="map_Kd"&&(z[M].texturePath=Q[1])}fe(z)},$)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(R)),{});var H,X}).catch(function(U){return console.warn("Error loading MTL file: ".concat(R),U),{}}))}();return P.prev=2,P.next=5,Promise.all(k);case 5:return L=P.sent,L=Object.assign.apply(Object,[{}].concat(u(L))),P.abrupt("return",L);case 10:return P.prev=10,P.t0=P.catch(2),P.abrupt("return",{});case 13:case"end":return P.stop()}},T,null,[[2,10]])}))).apply(this,arguments)}function E(){return(E=f(regeneratorRuntime.mark(function T(I){var k;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,fetch(I,{method:"HEAD"});case 3:return k=F.sent,F.abrupt("return",k.ok);case 7:return F.prev=7,F.t0=F.catch(0),F.abrupt("return",!1);case 10:case"end":return F.stop()}},T,null,[[0,7]])}))).apply(this,arguments)}return w.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(T){(function(I,k){if(function(F){for(var D=new DataView(F),L=[115,111,108,105,100],P=0;P<5;P++)if(function(R,V,G){for(var U=0,H=R.length;U<H;U++)if(R[U]!==V.getUint8(G+U,!1))return;return 1}(L,D,P))return;return 1}(k))(function(F,D){for(var L,P,R,V,G,U,H,X=new DataView(D),fe=X.getUint32(80,!0),$=!1,M=0;M<70;M++)X.getUint32(M,!1)===1129270351&&X.getUint8(M+4)===82&&X.getUint8(M+5)===61&&($=!0,V=[],G=X.getUint8(M+6)/255,U=X.getUint8(M+7)/255,H=X.getUint8(M+8)/255);for(var z=0;z<fe;z++){for(var q,ee=84+50*z,ae=X.getFloat32(ee,!0),Q=X.getFloat32(4+ee,!0),le=X.getFloat32(8+ee,!0),ie=($&&(q=X.getUint16(48+ee,!0),R=32768&q?(L=G,P=U,H):(L=(31&q)/31,P=(q>>5&31)/31,(q>>10&31)/31)),new l.default.Vector(ae,Q,le)),K=1;K<=3;K++){var ge=ee+12*K,ge=new l.default.Vector(X.getFloat32(ge,!0),X.getFloat32(4+ge,!0),X.getFloat32(8+ge,!0));F.vertices.push(ge),F.vertexNormals.push(ie),$&&V.push(L,P,R)}F.faces.push([3*z,3*z+1,3*z+2]),F.uvs.push([0,0],[0,0],[0,0])}})(I,k);else{if(k=new DataView(k),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");k=new TextDecoder("utf-8").decode(k).split(`
`),function(F,D){for(var L,P,R="",V=[],G=0;G<D.length;++G){for(var U=D[G].trim(),H=U.split(" "),X=0;X<H.length;++X)H[X]===""&&H.splice(X,1);if(H.length!==0)switch(R){case"":if(H[0]!=="solid")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "solid"'));R="solid";break;case"solid":if(H[0]!=="facet"||H[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "facet normal"'));L=new l.default.Vector(parseFloat(H[2]),parseFloat(H[3]),parseFloat(H[4])),F.vertexNormals.push(L,L,L),R="facet normal";break;case"facet normal":if(H[0]!=="outer"||H[1]!=="loop")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(H[0]==="vertex")P=new l.default.Vector(parseFloat(H[1]),parseFloat(H[2]),parseFloat(H[3])),F.vertices.push(P),F.uvs.push([0,0]),V.push(F.vertices.indexOf(P));else{if(H[0]!=="endloop")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "vertex" or "endloop"'));F.faces.push(V),V=[],R="endloop"}break;case"endloop":if(H[0]!=="endfacet")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(H[0]!=="endsolid"){if(H[0]!=="facet"||H[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "endsolid" or "facet normal"'));L=new l.default.Vector(parseFloat(H[2]),parseFloat(H[3]),parseFloat(H[4])),F.vertexNormals.push(L,L,L),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}}(I,k)}})(_,T),b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),S._decrementPreload(),typeof g=="function"&&g(_)},y):w.match(/\.obj$/i)?this.loadStrings(h,function(){var T=f(regeneratorRuntime.mark(function I(k){var F;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,function(){return C.apply(this,arguments)}(k);case 3:F=D.sent,function(L,P){for(var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},V={v:[],vt:[],vn:[]},G={},U=null,H=new Set,X=!1,fe=!1,$=0;$<P.length;++$){var M=P[$].trim().split(/\b\s+/);if(0<M.length){if(M[0]==="usemtl")U=M[1];else if(M[0]==="v"||M[0]==="vn"){var z=new l.default.Vector(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));V[M[0]].push(z)}else if(M[0]==="vt")z=[parseFloat(M[1]),1-parseFloat(M[2])],V[M[0]].push(z);else if(M[0]==="f")for(var q=3;q<M.length;++q){for(var ee=[],ae=[1,q-1,q],Q=0;Q<ae.length;++Q){for(var le,ie=M[ae[Q]],K=ie.split("/"),ge=0;ge<K.length;ge++)K[ge]=parseInt(K[ge])-1;G[ie]||(G[ie]={}),G[ie][U]===void 0?(le=L.vertices.length,L.vertices.push(V.v[K[0]].copy()),L.uvs.push(V.vt[K[1]]?V.vt[K[1]].slice():[0,0]),L.vertexNormals.push(V.vn[K[2]]?V.vn[K[2]].copy():new l.default.Vector),G[ie][U]=le,ee.push(le),U&&R[U]&&R[U].diffuseColor&&H.add(V.v[K[0]])):ee.push(G[ie][U])}if(ee[0]!==ee[1]&&ee[0]!==ee[2]&&ee[1]!==ee[2])if(L.faces.push(ee),U&&R[U]&&R[U].diffuseColor){X=X=!0;for(var ne=R[U].diffuseColor,ye=0;ye<ee.length;ye++)L.vertexColors.push(ne[0]),L.vertexColors.push(ne[1]),L.vertexColors.push(ne[2])}else fe=!0}}}if(L.vertexNormals.length===0&&L.computeNormals(),X===fe)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(_,k,F),D.next=11;break;case 7:return D.prev=7,D.t0=D.catch(0),y?y(D.t0):l.default._friendlyError("Error during parsing: "+D.t0.message),D.abrupt("return");case 11:return D.prev=11,b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),S._decrementPreload(),typeof g=="function"&&g(_),D.finish(11);case 18:case"end":return D.stop()}},I,null,[[0,7,11,18]])}));return function(I){return T.apply(this,arguments)}}(),y):(l.default._friendlyFileLoadError(3,h),y?y():l.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),_},l.default.prototype.model=function(h){this._assert3d("model"),l.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h.edges.length===0&&h._makeTriangleEdges(),h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var p=l.default;s.default=p},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Texture"),u.default.prototype.loadShader=function(p,h,m,g){u.default._validateParameters("loadShader",arguments),g=g||console.error;function y(){x._decrementPreload(),m&&m(b)}var b=new u.default.Shader,x=this,v=!1,w=!1;return this.loadStrings(p,function(_){b._vertSrc=_.join(`
`),w=!0,v&&y()},g),this.loadStrings(h,function(_){b._fragSrc=_.join(`
`),v=!0,w&&y()},g),b},u.default.prototype.createShader=function(p,h){return u.default._validateParameters("createShader",arguments),new u.default.Shader(this._renderer,p,h)},u.default.prototype.createFilterShader=function(p){u.default._validateParameters("createFilterShader",arguments);var h=p.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,h=new u.default.Shader(this._renderer,h,p);return this._renderer.GL?h.ensureCompiledOnContext(this):h.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),h},u.default.prototype.shader=function(p){return this._assert3d("shader"),u.default._validateParameters("shader",arguments),p.ensureCompiledOnContext(this),p.isStrokeShader()?this._renderer.userStrokeShader=p:(this._renderer.userFillShader=p,this._renderer._useNormalMaterial=!1),this},u.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},u.default.prototype.texture=function(p){return this._assert3d("texture"),u.default._validateParameters("texture",arguments),p.gifProperties&&p._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=p,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.textureMode=function(p){p!==c.IMAGE&&p!==c.NORMAL?console.warn("You tried to set ".concat(p," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=p},u.default.prototype.textureWrap=function(p){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,m=(this._renderer.textureWrapX=p,this._renderer.textureWrapY=h,!0),g=!1,y=void 0;try{for(var b,x=this._renderer.textures.values()[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)b.value.setWrapMode(p,h)}catch(v){g=!0,y=v}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}},u.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return u.default._validateParameters("normalMaterial",h),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},u.default.prototype.ambientMaterial=function(p,h,m){this._assert3d("ambientMaterial"),u.default._validateParameters("ambientMaterial",arguments);var g=u.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.emissiveMaterial=function(p,h,m,g){this._assert3d("emissiveMaterial"),u.default._validateParameters("emissiveMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.specularMaterial=function(p,h,m,g){this._assert3d("specularMaterial"),u.default._validateParameters("specularMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.shininess=function(p){return this._assert3d("shininess"),u.default._validateParameters("shininess",arguments),this._renderer._useShininess=p=p<1?1:p,this},u.default.prototype.metalness=function(p){return this._assert3d("metalness"),p=1-Math.exp(-p/100),this._renderer._useMetalness=p,this},u.default.RendererGL.prototype._applyColorBlend=function(p,y){var m=this.GL,g=this.drawMode===c.TEXTURE,y=y||this.userFillShader||this.userStrokeShader||this.userPointShader||g||this.curBlendMode!==c.BLEND||p[p.length-1]<1||this._isErasing;return y!==this._isBlending&&(y||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?m.enable(m.BLEND):m.disable(m.BLEND),m.depthMask(!0),this._isBlending=y),this._applyBlendMode(),p},u.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var p=this.GL;switch(this.curBlendMode){case c.BLEND:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.ADD:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE);break;case c.REMOVE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.DST_COLOR,p.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.ONE_MINUS_DST_COLOR,p.ONE_MINUS_SRC_COLOR,p.ONE,p.ONE);break;case c.REPLACE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ZERO);break;case c.SUBTRACT:p.blendEquationSeparate(p.FUNC_REVERSE_SUBTRACT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(o,i,s){"use strict";o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.prototype.camera=function(){var u;this._assert3d("camera");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("camera",f),(u=this._renderer._curCamera).camera.apply(u,f),this},a.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("perspective",f),(u=this._renderer._curCamera).perspective.apply(u,f),this},a.default.prototype.linePerspective=function(u){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(u===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=u},a.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("ortho",f),(u=this._renderer._curCamera).ortho.apply(u,f),this},a.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("frustum",f),(u=this._renderer._curCamera).frustum.apply(u,f),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new a.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},a.default.Camera=function(){function u(p){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var c,f,d;return c=u,(f=[{key:"perspective",value:function(y,h,m,g){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),h===void 0&&(h=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),g<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=m,this.cameraFar=g,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),b=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/h,0,0,0,0,-y*this.yScale,0,0,0,0,(g+m)*b,-1,0,0,2*g*m*b,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,C,m,g,y,b){E===void 0&&(E=-this._renderer.width/2),C===void 0&&(C=+this._renderer.width/2),m===void 0&&(m=-this._renderer.height/2),g===void 0&&(g=+this._renderer.height/2),y===void 0&&(y=0),b===void 0&&(b=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=y;var T=C-E,x=g-m,v=(this.cameraFar=b)-y,w=2/T,_=2/x*this.yScale,S=-2/v,C=-(C+E)/T,E=-(g+m)/x,T=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,0,0,S,0,C,E,T,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,C,m,g,y,b){E===void 0&&(E=.05*-this._renderer.width),C===void 0&&(C=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),g===void 0&&(g=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),this.cameraNear=y;var T=C-E,x=g-m,v=(this.cameraFar=b)-y,w=2*y/T,_=2*y/x*this.yScale,S=-2*b*y/v,C=(C+E)/T,E=(g+m)/x,T=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,C,E,T,-1,0,0,S,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,h,m,g){var y=this.centerX,b=this.centerY,x=this.centerZ,v=(y-=this.eyeX,b-=this.eyeY,x-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(v.rotate(this._renderer._pInst._toRadians(w),h,m,g),[y*v.mat4[0]+b*v.mat4[4]+x*v.mat4[8],y*v.mat4[1]+b*v.mat4[5]+x*v.mat4[9],y*v.mat4[2]+b*v.mat4[6]+x*v.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var h=this._getLocalAxes();this._rotateView(p,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(p){var h=this._getLocalAxes();this._rotateView(p,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(p,h,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,h,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,h,m,g,y,b,x,v,w){return p===void 0&&(p=this.defaultEyeX,h=this.defaultEyeY,m=this.defaultEyeZ,g=p,y=h,v=1,w=x=b=0),this.eyeX=p,this.eyeY=h,this.eyeZ=m,g!==void 0&&(this.centerX=g,this.centerY=y,this.centerZ=b),x!==void 0&&(this.upX=x,this.upY=v,this.upZ=w),g=this._getLocalAxes(),this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1),y=-p,this.cameraMatrix.translate([y,-h,-m]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(g,y,m){var b=this._getLocalAxes(),g=[b.x[0]*g,b.x[1]*g,b.x[2]*g],y=[b.y[0]*y,b.y[1]*y,b.y[2]*y],b=[b.z[0]*m,b.z[1]*m,b.z[2]*m];this.camera(this.eyeX+g[0]+y[0]+b[0],this.eyeY+g[1]+y[1]+b[1],this.eyeZ+g[2]+y[2]+b[2],this.centerX+g[0]+y[0]+b[0],this.centerY+g[1]+y[1]+b[1],this.centerZ+g[2]+y[2]+b[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,h,m){var g=p-this.eyeX,y=h-this.eyeY,b=m-this.eyeZ;this.camera(p,h,m,this.centerX+g,this.centerY+y,this.centerZ+b,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var h=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];h<m.length;h++){var g=m[h];this[g]=p[g]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,h,m){var g,y,b,x,v,w,_,S,C,E,T,I,k,F,D,L,P,R;m===0?this.set(p):m===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/p.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/p.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new a.default.Vector(p.eyeX,p.eyeY,p.eyeZ),v=new a.default.Vector(h.eyeX,h.eyeY,h.eyeZ),L=new a.default.Vector(p.centerX,p.centerY,p.centerZ),R=new a.default.Vector(h.centerX,h.centerY,h.centerZ),b=a.default.Vector.dist(x,L),g=a.default.Vector.dist(v,R),g=b*Math.pow(g/b,m),b=a.default.Vector.sub(x,v),y=1,1e-6<(P=(F=x.copy().sub(v).sub(L).add(R)).magSq())&&(y=a.default.Vector.dot(b,F)/P,y=Math.max(0,Math.min(y,1))),b=a.default.Vector.lerp(a.default.Vector.lerp(x,L,y),a.default.Vector.lerp(v,R,y),m),F=p.cameraMatrix.createSubMatrix3x3(),P=h.cameraMatrix.createSubMatrix3x3(),x=F.row(2),L=P.row(2),v=F.row(1),R=P.row(1),p=new a.default.Vector,h=new a.default.Vector,w=new a.default.Vector,_=new a.default.Vector,1-(S=.5*((F=(P=P.mult3x3(F.copy().transpose3x3())).diagonal())[0]+F[1]+F[2]-1))<1e-7?(p.set(a.default.Vector.lerp(x,L,m)).normalize(),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),h.set(a.default.Vector.lerp(v,R,m)).normalize()):(L=1/(1-S),R=Math.max(F[0],F[1],F[2]),I=P.mat3[1]+P.mat3[3],k=P.mat3[2]+P.mat3[6],D=P.mat3[5]+P.mat3[7],R=R===F[0]?(E=.5*I*(L/=C=Math.sqrt((F[0]-S)*L)),T=.5*k*L,.5*(P.mat3[7]-P.mat3[5])/C):R===F[1]?(T=.5*D*(L/=E=Math.sqrt((F[1]-S)*L)),C=.5*I*L,.5*(P.mat3[2]-P.mat3[6])/E):(C=.5*k*(L/=T=Math.sqrt((F[2]-S)*L)),E=.5*D*L,.5*(P.mat3[3]-P.mat3[1])/T),I=m*Math.atan2(R,S),k=Math.cos(I),F=Math.sin(I),(R=new a.default.Matrix("mat3",[k+(D=1-k)*C*C,D*(L=C*E)+F*T,D*(P=T*C)-F*E,D*L-F*T,k+D*E*E,D*(m=E*T)+F*C,D*P+F*E,D*m-F*C,k+D*T*T])).multiplyVec3(x,p),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),R.multiplyVec3(v,h)),this.camera(w.x,w.y,w.z,_.x,_.y,_.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var p=new a.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p.yScale=this.yScale,p}},{key:"_getLocalAxes",value:function(){var p=this.eyeX-this.centerX,h=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,x=Math.sqrt(p*p+h*h+m*m),x=(x!==0&&(p/=x,h/=x,m/=x),this.upX),g=(v=this.upY)*m-(w=this.upZ)*h,y=-x*m+w*p,b=x*h-v*p,x=h*b-m*y,v=-p*b+m*g,w=p*y-h*g,_=Math.sqrt(g*g+y*y+b*b),_=(_!==0&&(g/=_,y/=_,b/=_),Math.sqrt(x*x+v*v+w*w));return _!==0&&(x/=_,v/=_,w/=_),{x:[g,y,b],y:[x,v,w],z:[p,h,m]}}},{key:"_orbit",value:function(p,_,w){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(x,b),w=((g=(g*=Math.pow(10,w))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,b))))+_),_=p;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),b.mult(Math.cos(w)),v.mult(Math.cos(_)*Math.sin(w)),x.mult(Math.sin(_)*Math.sin(w)),y.set(b).add(v).add(x),this.eyeX=g*y.x+this.centerX,this.eyeY=g*y.y+this.centerY,this.eyeZ=g*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,_,C){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(y,x),E=Math.atan2(_,w),E=(v.mult(Math.sin(E)),x.mult(Math.cos(E)).add(v),Math.sqrt(w*w+_*_)),v=a.default.Vector.cross(y,x),w=((g=(g*=Math.pow(10,C))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.cos(E)),_=Math.sin(E),C=b.dot(y),E=b.dot(x),S=C*w+E*_,C=-C*_+E*w,E=b.dot(v);b.x=S*y.x+C*x.x+E*v.x,b.y=S*y.y+C*x.y+E*v.y,b.z=S*y.z+C*x.z+E*v.z,x.mult(-_),y.mult(w).add(x).mult(g),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,b.x,b.y,b.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&l(c.prototype,f),d&&l(c,d),u}(),a.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix)},o=a.default.Camera,s.default=o},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.DataArray=function(){function l(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,p=this,h=l;if(!(p instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(d),this.initialLength=d}var u,c,f;return u=l,(c=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var d;this.length<this.data.length/2&&(d=1<<Math.ceil(Math.log2(this.length)),(d=new Float32Array(d)).set(this.data.subarray(0,this.length),0),this.data=d)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];this.ensureLength(this.length+p.length),this.data.set(p,this.length),this.length+=p.length}},{key:"slice",value:function(d,p){return this.data.slice(d,Math.min(p,this.length))}},{key:"subArray",value:function(d,p){return this.data.subarray(d,Math.min(p,this.length))}},{key:"ensureLength",value:function(d){for(;this.data.length<d;){var p=new Float32Array(2*this.data.length);p.set(this.data,0),this.data=p}}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.DataArray,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(T,i,s){"use strict";function a(I){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(I)}function l(I){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(k){return a(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":a(k)})(I)}T("core-js/modules/es.symbol"),T("core-js/modules/es.symbol.description"),T("core-js/modules/es.symbol.iterator"),T("core-js/modules/es.array.fill"),T("core-js/modules/es.array.includes"),T("core-js/modules/es.array.iterator"),T("core-js/modules/es.object.get-own-property-descriptor"),T("core-js/modules/es.object.get-prototype-of"),T("core-js/modules/es.object.to-string"),T("core-js/modules/es.reflect.construct"),T("core-js/modules/es.reflect.get"),T("core-js/modules/es.regexp.to-string"),T("core-js/modules/es.string.includes"),T("core-js/modules/es.string.iterator"),T("core-js/modules/es.typed-array.float32-array"),T("core-js/modules/es.typed-array.uint8-array"),T("core-js/modules/es.typed-array.uint8-clamped-array"),T("core-js/modules/es.typed-array.copy-within"),T("core-js/modules/es.typed-array.every"),T("core-js/modules/es.typed-array.fill"),T("core-js/modules/es.typed-array.filter"),T("core-js/modules/es.typed-array.find"),T("core-js/modules/es.typed-array.find-index"),T("core-js/modules/es.typed-array.for-each"),T("core-js/modules/es.typed-array.includes"),T("core-js/modules/es.typed-array.index-of"),T("core-js/modules/es.typed-array.iterator"),T("core-js/modules/es.typed-array.join"),T("core-js/modules/es.typed-array.last-index-of"),T("core-js/modules/es.typed-array.map"),T("core-js/modules/es.typed-array.reduce"),T("core-js/modules/es.typed-array.reduce-right"),T("core-js/modules/es.typed-array.reverse"),T("core-js/modules/es.typed-array.set"),T("core-js/modules/es.typed-array.slice"),T("core-js/modules/es.typed-array.some"),T("core-js/modules/es.typed-array.sort"),T("core-js/modules/es.typed-array.subarray"),T("core-js/modules/es.typed-array.to-locale-string"),T("core-js/modules/es.typed-array.to-string"),T("core-js/modules/es.weak-map"),T("core-js/modules/web.dom-collections.iterator"),T("core-js/modules/es.array.fill"),T("core-js/modules/es.array.includes"),T("core-js/modules/es.array.iterator"),T("core-js/modules/es.object.get-prototype-of"),T("core-js/modules/es.object.to-string"),T("core-js/modules/es.string.includes"),T("core-js/modules/es.typed-array.float32-array"),T("core-js/modules/es.typed-array.uint8-array"),T("core-js/modules/es.typed-array.uint8-clamped-array"),T("core-js/modules/es.typed-array.copy-within"),T("core-js/modules/es.typed-array.every"),T("core-js/modules/es.typed-array.fill"),T("core-js/modules/es.typed-array.filter"),T("core-js/modules/es.typed-array.find"),T("core-js/modules/es.typed-array.find-index"),T("core-js/modules/es.typed-array.for-each"),T("core-js/modules/es.typed-array.includes"),T("core-js/modules/es.typed-array.index-of"),T("core-js/modules/es.typed-array.iterator"),T("core-js/modules/es.typed-array.join"),T("core-js/modules/es.typed-array.last-index-of"),T("core-js/modules/es.typed-array.map"),T("core-js/modules/es.typed-array.reduce"),T("core-js/modules/es.typed-array.reduce-right"),T("core-js/modules/es.typed-array.reverse"),T("core-js/modules/es.typed-array.set"),T("core-js/modules/es.typed-array.slice"),T("core-js/modules/es.typed-array.some"),T("core-js/modules/es.typed-array.sort"),T("core-js/modules/es.typed-array.subarray"),T("core-js/modules/es.typed-array.to-locale-string"),T("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(E=T("../core/main"))&&E.__esModule?E:{default:E},c=function(I){if(I&&I.__esModule)return I;if(I===null||l(I)!=="object"&&typeof I!="function")return{default:I};var k=p();if(k&&k.has(I))return k.get(I);var F,D={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(F in I){var P;Object.prototype.hasOwnProperty.call(I,F)&&((P=L?Object.getOwnPropertyDescriptor(I,F):null)&&(P.get||P.set)?Object.defineProperty(D,F,P):D[F]=I[F])}return D.default=I,k&&k.set(I,D),D}(T("../core/constants")),f=T("./p5.Texture"),d=T("./p5.RendererGL");function p(){var I;return typeof WeakMap!="function"?null:(I=new WeakMap,p=function(){return I},I)}function h(I,k){return function(F){if(Array.isArray(F))return F}(I)||function(F,D){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]"){var L=[],P=!0,R=!1,V=void 0;try{for(var G,U=F[Symbol.iterator]();!(P=(G=U.next()).done)&&(L.push(G.value),!D||L.length!==D);P=!0);}catch(H){R=!0,V=H}finally{try{P||U.return==null||U.return()}finally{if(R)throw V}}return L}}(I,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(I,k,F){return k in I?Object.defineProperty(I,k,{value:F,enumerable:!0,configurable:!0,writable:!0}):I[k]=F,I}function g(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function y(I,k){for(var F=0;F<k.length;F++){var D=k[F];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(I,D.key,D)}}function b(I,k,F){k&&y(I.prototype,k),F&&y(I,F)}function x(I,k,F){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,L,P){var R=function(V,G){for(;!Object.prototype.hasOwnProperty.call(V,G)&&(V=_(V))!==null;);return V}(R,L);if(R)return(R=Object.getOwnPropertyDescriptor(R,L)).get?R.get.call(P):R.value})(I,k,F||I)}function v(I,k){return(v=Object.setPrototypeOf||function(F,D){return F.__proto__=D,F})(I,k)}function w(I){return function(){var k,F=_(I),F=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=_(this).constructor,Reflect.construct(F,arguments,k)):F.apply(this,arguments),this);if(!k||l(k)!=="object"&&typeof k!="function"){if(F!==void 0)return F;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function _(I){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(I)}var S=function(I){var k=D;if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(I&&I.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),I&&v(k,I);var F=w(D);function D(L){var P;return g(this,D),(P=F.call(this,L.target._renderer)).fbo=L,P.yScale=-1,P}return b(D,[{key:"_computeCameraDefaultSettings",value:function(){x(_(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(u.default.Camera),C=(u.default.FramebufferCamera=S,function(){function I(k,F){g(this,I),this.framebuffer=k,this.property=F}return b(I,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),I}()),E=(u.default.FramebufferTexture=C,function(){function I(k){var F=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},L=(g(this,I),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||c.UNSIGNED_BYTE,this.channels=D.channels||(k._renderer._pInst._glAttributes.alpha?c.RGBA:c.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||c.FLOAT,this.textureFiltering=D.textureFiltering||c.LINEAR,D.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==c.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||k.pixelDensity(),k._renderer.GL);if(this.gl=L,D.width&&D.height?(P=k._renderer._adjustDimensions(D.width,D.height),this.width=P.adjustedWidth,this.height=P.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=L.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=L.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var P=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=P,this.draw(function(){return F.target.clear()})}return b(I,[{key:"resize",value:function(k,F){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(k,F);k=D.adjustedWidth,F=D.adjustedHeight,this.width=k,this.height=F,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===c.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===c.WEBGL&&this.depthFormat===c.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),[c.UNSIGNED_BYTE,c.FLOAT,c.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&![c.UNSIGNED_INT,c.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=c.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==c.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===c.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),k.halfFloat||this.format!==c.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.channels===c.RGB&&[c.FLOAT,c.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=c.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,F=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),D=k.getParameter(k.FRAMEBUFFER_BINDING),L=k.createTexture();if(!L)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,L);var P=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,P.internalFormat,this.width*this.density,this.height*this.density,0,P.format,P.type,null),this.colorTexture=L,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,L,0),this.useDepth){var L=k.createTexture();if(!L)throw new Error("Unable to create depth texture");var R=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,L),k.texImage2D(k.TEXTURE_2D,0,R.internalFormat,this.width*this.density,this.height*this.density,0,R.format,R.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,L,0),this.depthTexture=L}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),P.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(R=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),R.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new C(this,"depthTexture"),L=k.NEAREST,this.depthP5Texture=new u.default.Texture(this.target._renderer,this.depth,{minFilter:L,magFilter:L}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new C(this,"colorTexture"),P=this.textureFiltering===c.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new u.default.Texture(this.target._renderer,this.color,{minFilter:P,magFilter:P}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,F),k.bindFramebuffer(k.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var k,F,D=this.gl,L=this.format===c.FLOAT?D.FLOAT:this.format===c.HALF_FLOAT?this.target.webglVersion===c.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,P=this.channels===c.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===c.WEBGL2?(m(F={},D.FLOAT,m({},D.RGBA,D.RGBA32F)),m(F,D.HALF_FLOAT,m({},D.RGBA,D.RGBA16F)),m(F,D.UNSIGNED_BYTE,(m(k={},D.RGBA,D.RGBA8),m(k,D.RGB,D.RGB8),k)),F[L][P]):this.format===c.HALF_FLOAT?D.RGBA:P,format:P,type:L}}},{key:"_glDepthFormat",value:function(){var D=this.gl,k=this.useStencil?this.depthFormat===c.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===c.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===c.FLOAT?D.FLOAT:D.UNSIGNED_INT,F=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===c.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===c.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===c.WEBGL2?this.depthFormat===c.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:F,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var L=this.color,k=this.depth,F=this.colorRenderbuffer,D=this.depthRenderbuffer,L=(this._deleteTexture(L),k&&this._deleteTexture(k),this.gl);F&&L.deleteRenderbuffer(F),D&&L.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new S(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,F=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&F.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,L=F;D<L.length;D++){var R=h(L[D],2),P=R[0],R=R[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,P,R)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,F=this.target._renderer.activeFramebuffer(),D=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,d.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),F?k.bindFramebuffer(k.FRAMEBUFFER,F._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,F,D,L){u.default._validateParameters("p5.Framebuffer.get",arguments);var P=this._glColorFormat();if(k===void 0&&F===void 0)F=k=0,D=this.width,L=this.height;else if(D===void 0&&L===void 0)return(k<0||F<0||k>=this.width||F>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1)),(0,d.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,F*this.density,P.format,P.type);k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1),D=this.target.constrain(D,1,this.width-k),L=this.target.constrain(L,1,this.height-F);for(var R=(0,d.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,F*this.density,D*this.density,L*this.density,P.format,P.type),V=new Uint8ClampedArray(D*L*this.density*this.density*4),G=(V.fill(255),P.type===this.gl.RGB?3:4),U=0;U<L*this.density;U++)for(var H=0;H<D*this.density;H++)for(var X=0;X<4;X++){var fe,$=4*(U*D*this.density+H)+X;X<G&&(fe=G==4?$:(U*D*this.density+H)*G+X,V[$]=R[fe])}return k=new u.default.Image(D*this.density,L*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(V),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(D,L),k}},{key:"updatePixels",value:function(){var k=this.gl,F=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=F.format===k.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,L=F.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof L)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,this.pixels),this.colorP5Texture.unbindTexture(),L=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),L?k.bindFramebuffer(k.FRAMEBUFFER,L._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),I}()),T=u.default.Framebuffer=E;s.default=T},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(m,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}u.default.Geometry=function(){function m(x,v,w){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new u.default.DataArray,this.lineTangentsIn=new u.default.DataArray,this.lineTangentsOut=new u.default.DataArray,this.lineSides=new u.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new u.default.DataArray,this.detailX=x!==void 0?x:1,this.detailY=v!==void 0?v:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,w instanceof Function&&w.call(this)}var g,y,b;return g=m,(y=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new u.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),v=new u.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),w=0;w<this.vertices.length;w++){var _=this.vertices[w];x.x=Math.min(x.x,_.x),x.y=Math.min(x.y,_.y),x.z=Math.min(x.z,_.z),v.x=Math.max(v.x,_.x),v.y=Math.max(v.y,_.y),v.z=Math.max(v.z,_.z)}var S=new u.default.Vector(v.x-x.x,v.y-x.y,v.z-x.z),C=new u.default.Vector((x.x+v.x)/2,(x.y+v.y)/2,(x.z+v.z)/2);this.boundingBoxCache={min:x,max:v,size:S,offset:C}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,v,w,_=this.detailX+1,S=0;S<this.detailY;S++)for(var C=0;C<this.detailX;C++)v=(S+1)*_+C+1,this.faces.push([S*_+C,x=S*_+C+1,w=(S+1)*_+C]),this.faces.push([w,x,v]);return this}},{key:"_getFaceNormal",value:function(v){var v=this.faces[v],w=this.vertices[v[0]],S=this.vertices[v[1]],v=this.vertices[v[2]],S=u.default.Vector.sub(S,w),v=u.default.Vector.sub(v,w),w=u.default.Vector.cross(S,v),_=u.default.Vector.mag(w),S=_/(u.default.Vector.mag(S)*u.default.Vector.mag(v));return S===0||isNaN(S)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),w):(1<S&&(S=1),w.mult(Math.asin(S)/_))}},{key:"computeNormals",value:function(){var x,v=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:c.FLAT,_=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,S=this.vertexNormals,C=this.vertices,E=this.faces;if(w===c.SMOOTH){for(var T={},I=[],k=Math.pow(10,_===void 0?3:_),F=function(V){return Math.round(V*k)/k},D=function(V){return"".concat(F(V.x),",").concat(F(V.y),",").concat(F(V.z))},L=0;L<C.length;L++){var P=C[L],R=D(P);T[R]===void 0&&(T[R]=I.length,I.push(P))}E.forEach(function(V){for(var G=0;G<3;++G){var U=V[G],U=C[U],U=D(U);V[G]=T[U]}}),this.edges.forEach(function(V){for(var G=0;G<2;++G){var U=V[G],U=C[U],U=D(U);V[G]=T[U]}}),this.vertices=C=I}for(x=S.length=0;x<C.length;++x)S.push(new u.default.Vector);for(E.forEach(function(V,G){for(var U=v._getFaceNormal(G),H=0;H<3;++H){var X=V[H];S[X].add(U)}}),x=0;x<C.length;++x)S[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var v=this.detailX+1,w=u.default.Vector.add(this.vertexNormals[x*v],this.vertexNormals[x*v+this.detailX]),w=u.default.Vector.div(w,2);this.vertexNormals[x*v]=w,this.vertexNormals[x*v+this.detailX]=w}return this}},{key:"averagePoleNormals",value:function(){for(var x=new u.default.Vector(0,0,0),v=0;v<this.detailX;v++)x.add(this.vertexNormals[v]);for(var x=u.default.Vector.div(x,this.detailX),w=0;w<this.detailX;w++)this.vertexNormals[w]=x;x=new u.default.Vector(0,0,0);for(var _=this.vertices.length-1;_>this.vertices.length-1-this.detailX;_--)x.add(this.vertexNormals[_]);x=u.default.Vector.div(x,this.detailX);for(var S=this.vertices.length-1;S>this.vertices.length-1-this.detailX;S--)this.vertexNormals[S]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,v=new Map,w=new Set,_=0;_<this.edges.length;_++){var S,C=this.edges[_-1],E=this.edges[_],T=this.vertices[E[0]],I=this.vertices[E[1]],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[0],4*(E[0]+1)):[0,0,0,0],F=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],D=I.copy().sub(T).normalize(),L=0<D.magSq();L&&this._addSegment(T,I,k,F,D),0<_&&C[1]===E[0]?w.has(E[0])||(w.add(E[0]),v.delete(E[0]),x&&L&&D.dot(x)<1-1e-8&&this._addJoin(T,x,D,k)):(L&&!w.has(E[0])&&((S=v.get(E[0]))?(this._addJoin(T,S.dir,D,k),v.delete(E[0]),w.add(E[0])):v.set(E[0],{point:T,dir:D.copy().mult(-1),color:k})),x&&!w.has(C[1])&&((S=v.get(C[1]))?(this._addJoin(this.vertices[C[1]],x,S.dir.copy().mult(-1),k),v.delete(C[1]),w.add(C[1])):v.set(C[1],{point:this.vertices[C[1]],dir:x,color:k}),x=void 0)),_!==this.edges.length-1||w.has(E[1])||((T=v.get(E[1]))?(this._addJoin(I,D,T.dir.copy().mult(-1),F),v.delete(E[1]),w.add(E[1])):v.set(E[1],{point:I,dir:D,color:F})),L&&(x=D)}var P=!0,R=!1,V=void 0;try{for(var G,U=v.values()[Symbol.iterator]();!(P=(G=U.next()).done);P=!0){var H=G.value,X=H.point,fe=H.dir,$=H.color;this._addCap(X,fe,$)}}catch(M){R=!0,V=M}finally{try{P||U.return==null||U.return()}finally{if(R)throw V}}return this}},{key:"_addSegment",value:function(C,E,w,_,S){var C=C.array(),E=E.array(),T=S.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var I=0,k=[this.lineTangentsIn,this.lineTangentsOut];I<k.length;I++)for(var F=k[I],D=0;D<6;D++)F.push.apply(F,d(T));return(S=this.lineVertices).push.apply(S,d(C).concat(d(E),d(C),d(E),d(E),d(C))),(S=this.lineVertexColors).push.apply(S,d(w).concat(d(_),d(w),d(_),d(_),d(w))),this}},{key:"_addCap",value:function(x,v,w){for(var _,S=x.array(),C=v.array(),E=[0,0,0],T=0;T<6;T++)(_=this.lineVertices).push.apply(_,d(S)),(_=this.lineTangentsIn).push.apply(_,d(C)),(_=this.lineTangentsOut).push.apply(_,E),(_=this.lineVertexColors).push.apply(_,d(w));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,v,w,_){for(var S,C=x.array(),E=v.array(),T=w.array(),I=0;I<12;I++)(S=this.lineVertices).push.apply(S,d(C)),(S=this.lineTangentsIn).push.apply(S,d(E)),(S=this.lineTangentsOut).push.apply(S,d(T)),(S=this.lineVertexColors).push.apply(S,d(_));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),v=this.vertices[0].copy(),w=0;w<this.vertices.length;w++)x.x=Math.max(x.x,this.vertices[w].x),v.x=Math.min(v.x,this.vertices[w].x),x.y=Math.max(x.y,this.vertices[w].y),v.y=Math.min(v.y,this.vertices[w].y),x.z=Math.max(x.z,this.vertices[w].z),v.z=Math.min(v.z,this.vertices[w].z);for(var _=u.default.Vector.lerp(x,v,.5),S=u.default.Vector.sub(x,v),C=200/Math.max(Math.max(S.x,S.y),S.z),E=0;E<this.vertices.length;E++)this.vertices[E].sub(_),this.vertices[E].mult(C)}return this}}])&&p(g.prototype,y),b&&p(g,b),m}();var h=u.default.Geometry;s.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(f,i,s){"use strict";f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f};function l(d,p){for(var h=0;h<p.length;h++){var m=p[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}var u=Array,c=function(d){return Array.isArray(d)},f=(typeof Float32Array<"u"&&(u=Float32Array,c=function(d){return Array.isArray(d)||d instanceof Float32Array}),a.default.Matrix=function(){function d(){var g=this,y=d;if(g instanceof y)return arguments.length&&((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])instanceof a.default&&(this.p5=(y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new u([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new u([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var p,h,m;return p=d,m=[{key:"identity",value:function(g){return new a.default.Matrix(g)}}],(h=[{key:"set",value:function(g){var y=arguments;if(g instanceof a.default.Matrix?y=g.mat4:c(g)&&(y=g),y.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(y.length,"."),"p5.Matrix.set");else for(var b=0;b<16;b++)this.mat4[b]=y[b];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var g;return this.mat3!==void 0?((g=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],g.mat3[1]=this.mat3[1],g.mat3[2]=this.mat3[2],g.mat3[3]=this.mat3[3],g.mat3[4]=this.mat3[4],g.mat3[5]=this.mat3[5],g.mat3[6]=this.mat3[6],g.mat3[7]=this.mat3[7],g.mat3[8]=this.mat3[8]):((g=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],g.mat4[1]=this.mat4[1],g.mat4[2]=this.mat4[2],g.mat4[3]=this.mat4[3],g.mat4[4]=this.mat4[4],g.mat4[5]=this.mat4[5],g.mat4[6]=this.mat4[6],g.mat4[7]=this.mat4[7],g.mat4[8]=this.mat4[8],g.mat4[9]=this.mat4[9],g.mat4[10]=this.mat4[10],g.mat4[11]=this.mat4[11],g.mat4[12]=this.mat4[12],g.mat4[13]=this.mat4[13],g.mat4[14]=this.mat4[14],g.mat4[15]=this.mat4[15]),g}},{key:"transpose",value:function(g){var y,b,x,v,w,_;return g instanceof a.default.Matrix?(y=g.mat4[1],b=g.mat4[2],x=g.mat4[3],v=g.mat4[6],w=g.mat4[7],_=g.mat4[11],this.mat4[0]=g.mat4[0],this.mat4[1]=g.mat4[4],this.mat4[2]=g.mat4[8],this.mat4[3]=g.mat4[12],this.mat4[4]=y,this.mat4[5]=g.mat4[5],this.mat4[6]=g.mat4[9],this.mat4[7]=g.mat4[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g.mat4[10],this.mat4[11]=g.mat4[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g.mat4[15]):c(g)&&(y=g[1],b=g[2],x=g[3],v=g[6],w=g[7],_=g[11],this.mat4[0]=g[0],this.mat4[1]=g[4],this.mat4[2]=g[8],this.mat4[3]=g[12],this.mat4[4]=y,this.mat4[5]=g[5],this.mat4[6]=g[9],this.mat4[7]=g[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g[10],this.mat4[11]=g[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g[15]),this}},{key:"invert",value:function(R){R instanceof a.default.Matrix?(y=R.mat4[0],b=R.mat4[1],x=R.mat4[2],v=R.mat4[3],w=R.mat4[4],_=R.mat4[5],S=R.mat4[6],C=R.mat4[7],E=R.mat4[8],T=R.mat4[9],I=R.mat4[10],k=R.mat4[11],F=R.mat4[12],D=R.mat4[13],L=R.mat4[14],P=R.mat4[15]):c(R)&&(y=R[0],b=R[1],x=R[2],v=R[3],w=R[4],_=R[5],S=R[6],C=R[7],E=R[8],T=R[9],I=R[10],k=R[11],F=R[12],D=R[13],L=R[14],P=R[15]);var y,b,x,v,w,_,S,C,E,T,I,k,F,D,L,P,R=y*_-b*w,V=y*S-x*w,G=y*C-v*w,U=b*S-x*_,H=b*C-v*_,X=x*C-v*S,fe=E*D-T*F,$=E*L-I*F,M=E*P-k*F,z=T*L-I*D,q=T*P-k*D,ee=I*P-k*L,ae=R*ee-V*q+G*z+U*M-H*$+X*fe;return ae?(this.mat4[0]=(_*ee-S*q+C*z)*(ae=1/ae),this.mat4[1]=(x*q-b*ee-v*z)*ae,this.mat4[2]=(D*X-L*H+P*U)*ae,this.mat4[3]=(I*H-T*X-k*U)*ae,this.mat4[4]=(S*M-w*ee-C*$)*ae,this.mat4[5]=(y*ee-x*M+v*$)*ae,this.mat4[6]=(L*G-F*X-P*V)*ae,this.mat4[7]=(E*X-I*G+k*V)*ae,this.mat4[8]=(w*q-_*M+C*fe)*ae,this.mat4[9]=(b*M-y*q-v*fe)*ae,this.mat4[10]=(F*H-D*G+P*R)*ae,this.mat4[11]=(T*G-E*H-k*R)*ae,this.mat4[12]=(_*$-w*z-S*fe)*ae,this.mat4[13]=(y*z-b*$+x*fe)*ae,this.mat4[14]=(D*V-F*U-L*R)*ae,this.mat4[15]=(E*U-T*V+I*R)*ae,this):null}},{key:"invert3x3",value:function(){var g=this.mat3[0],y=this.mat3[1],b=this.mat3[2],x=this.mat3[3],v=this.mat3[4],w=this.mat3[5],_=this.mat3[6],S=this.mat3[7],C=this.mat3[8],E=C*v-w*S,T=-C*x+w*_,I=S*x-v*_,k=g*E+y*T+b*I;return k?(this.mat3[0]=E*(k=1/k),this.mat3[1]=(-C*y+b*S)*k,this.mat3[2]=(w*y-b*v)*k,this.mat3[3]=T*k,this.mat3[4]=(C*g-b*_)*k,this.mat3[5]=(-w*g+b*x)*k,this.mat3[6]=I*k,this.mat3[7]=(-S*g+y*_)*k,this.mat3[8]=(v*g-y*x)*k,this):null}},{key:"transpose3x3",value:function(g){var y=(g=g===void 0?this.mat3:g)[1],b=g[2],x=g[5];return this.mat3[0]=g[0],this.mat3[1]=g[3],this.mat3[2]=g[6],this.mat3[3]=y,this.mat3[4]=g[4],this.mat3[5]=g[7],this.mat3[6]=b,this.mat3[7]=x,this.mat3[8]=g[8],this}},{key:"inverseTranspose",value:function(g){if(g=g.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=g[0],this.mat3[1]=g[1],this.mat3[2]=g[2],this.mat3[3]=g[4],this.mat3[4]=g[5],this.mat3[5]=g[6],this.mat3[6]=g[8],this.mat3[7]=g[9],this.mat3[8]=g[10]),g=this.invert3x3(),g)g.transpose3x3(this.mat3);else for(var y=0;y<9;y++)this.mat3[y]=0;return this}},{key:"determinant",value:function(){var g=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],y=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],v=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],w=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],_=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],S=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],C=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],E=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],T=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return g*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-y*T+b*E+x*C-v*S+w*_}},{key:"mult",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4[0],x=this.mat4[1],v=this.mat4[2],w=this.mat4[3];return this.mat4[0]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[1]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[2]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[3]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[4],x=this.mat4[5],v=this.mat4[6],w=this.mat4[7],this.mat4[4]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[5]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[6]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[7]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[8],x=this.mat4[9],v=this.mat4[10],w=this.mat4[11],this.mat4[8]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[9]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[10]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[11]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[12],x=this.mat4[13],v=this.mat4[14],w=this.mat4[15],this.mat4[12]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[13]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[14]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[15]=b*y[3]+x*y[7]+v*y[11]+w*y[15],this}},{key:"apply",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4,x=b[0],v=b[4],w=b[8],_=b[12],x=(b[0]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[4]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[8]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[12]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[1]),v=b[5],w=b[9],_=b[13],x=(b[1]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[5]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[9]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[13]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[2]),v=b[6],w=b[10],_=b[14],x=(b[2]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[6]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[10]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[14]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[3]),v=b[7],w=b[11],_=b[15];return b[3]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[7]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[11]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[15]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,this}},{key:"scale",value:function(g,y,b){return g instanceof a.default.Vector?(y=g.y,b=g.z,g=g.x):g instanceof Array&&(y=g[1],b=g[2],g=g[0]),this.mat4[0]*=g,this.mat4[1]*=g,this.mat4[2]*=g,this.mat4[3]*=g,this.mat4[4]*=y,this.mat4[5]*=y,this.mat4[6]*=y,this.mat4[7]*=y,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(R,q,z,x){q instanceof a.default.Vector?(z=q.y,x=q.z,q=q.x):q instanceof Array&&(z=q[1],x=q[2],q=q[0]);var v=Math.sqrt(q*q+z*z+x*x),v=(q*=1/v,z*=1/v,x*=1/v,this.mat4[0]),w=this.mat4[1],_=this.mat4[2],S=this.mat4[3],C=this.mat4[4],E=this.mat4[5],T=this.mat4[6],I=this.mat4[7],k=this.mat4[8],F=this.mat4[9],D=this.mat4[10],L=this.mat4[11],P=Math.sin(R),R=Math.cos(R),V=1-R,G=q*q*V+R,U=z*q*V+x*P,H=x*q*V-z*P,X=q*z*V-x*P,fe=z*z*V+R,$=x*z*V+q*P,M=q*x*V+z*P,z=z*x*V-q*P,q=x*x*V+R;return this.mat4[0]=v*G+C*U+k*H,this.mat4[1]=w*G+E*U+F*H,this.mat4[2]=_*G+T*U+D*H,this.mat4[3]=S*G+I*U+L*H,this.mat4[4]=v*X+C*fe+k*$,this.mat4[5]=w*X+E*fe+F*$,this.mat4[6]=_*X+T*fe+D*$,this.mat4[7]=S*X+I*fe+L*$,this.mat4[8]=v*M+C*z+k*q,this.mat4[9]=w*M+E*z+F*q,this.mat4[10]=_*M+T*z+D*q,this.mat4[11]=S*M+I*z+L*q,this}},{key:"translate",value:function(x){var y=x[0],b=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*y+this.mat4[4]*b+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*y+this.mat4[5]*b+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*y+this.mat4[6]*b+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*y+this.mat4[7]*b+this.mat4[11]*x}},{key:"rotateX",value:function(g){this.rotate(g,1,0,0)}},{key:"rotateY",value:function(g){this.rotate(g,0,1,0)}},{key:"rotateZ",value:function(g){this.rotate(g,0,0,1)}},{key:"perspective",value:function(v,y,b,x){var v=1/Math.tan(v/2),w=1/(b-x);return this.mat4[0]=v/y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=v,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+b)*w,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*b*w,this.mat4[15]=0,this}},{key:"ortho",value:function(g,y,b,x,v,w){var _=1/(g-y),S=1/(b-x),C=1/(v-w);return this.mat4[0]=-2*_,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*S,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*C,this.mat4[11]=0,this.mat4[12]=(g+y)*_,this.mat4[13]=(x+b)*S,this.mat4[14]=(w+v)*C,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(g,y,b,x){var v=new Array(4),w=this.mat4;return v[0]=w[0]*g+w[4]*y+w[8]*b+w[12]*x,v[1]=w[1]*g+w[5]*y+w[9]*b+w[13]*x,v[2]=w[2]*g+w[6]*y+w[10]*b+w[14]*x,v[3]=w[3]*g+w[7]*y+w[11]*b+w[15]*x,v}},{key:"multiplyPoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,0);return new a.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(b){var y;if(b===this||b===this.mat3)y=this.copy().mat3;else if(b instanceof a.default.Matrix)y=b.mat3;else if(c(b))y=b;else{if(arguments.length!==9)return;y=arguments}var b=this.mat3[0],x=this.mat3[1],v=this.mat3[2];return this.mat3[0]=b*y[0]+x*y[3]+v*y[6],this.mat3[1]=b*y[1]+x*y[4]+v*y[7],this.mat3[2]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[3],x=this.mat3[4],v=this.mat3[5],this.mat3[3]=b*y[0]+x*y[3]+v*y[6],this.mat3[4]=b*y[1]+x*y[4]+v*y[7],this.mat3[5]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[6],x=this.mat3[7],v=this.mat3[8],this.mat3[6]=b*y[0]+x*y[3]+v*y[6],this.mat3[7]=b*y[1]+x*y[4]+v*y[7],this.mat3[8]=b*y[2]+x*y[5]+v*y[8],this}},{key:"column",value:function(g){return new a.default.Vector(this.mat3[3*g],this.mat3[3*g+1],this.mat3[3*g+2])}},{key:"row",value:function(g){return new a.default.Vector(this.mat3[g],this.mat3[g+3],this.mat3[g+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(g,y){return(y=y===void 0?g.copy():y).x=this.row(0).dot(g),y.y=this.row(1).dot(g),y.z=this.row(2).dot(g),y}},{key:"createSubMatrix3x3",value:function(){var g=new a.default.Matrix("mat3");return g.mat3[0]=this.mat4[0],g.mat3[1]=this.mat4[1],g.mat3[2]=this.mat4[2],g.mat3[3]=this.mat4[4],g.mat3[4]=this.mat4[5],g.mat3[5]=this.mat4[6],g.mat3[6]=this.mat4[8],g.mat3[7]=this.mat4[9],g.mat3[8]=this.mat4[10],g}}])&&l(p.prototype,h),m&&l(p,m),d}(),a.default.Matrix);s.default=f},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.RenderBuffer=function(){function l(d,p,h,m,g,y){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.size=d,this.src=p,this.dst=h,this.attr=m,this._renderer=g,this.map=y}var u,c,f;return u=l,(c=[{key:"_prepareBuffer",value:function(d,p){var h,m,g,x=p.attributes,y=this._renderer.GL,b=d.model||d,x=x[this.attr];x&&(h=d[this.dst],0<(m=b[this.src]).length?((g=!h)&&(d[this.dst]=h=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,h),!g&&b.dirtyFlags[this.src]===!1||(g=(d=this.map)?d(m):m,this._renderer._bindBuffer(h,y.ARRAY_BUFFER,g),b.dirtyFlags[this.src]=!1),p.enableAttrib(x,this.size)):(d=x.location)!==-1&&this._renderer.registerEnabled.has(d)&&(y.disableVertexAttribArray(d),this._renderer.registerEnabled.delete(d)))}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.RenderBuffer,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("./p5.RenderBuffer"),u.default.RendererGL.prototype.beginShape=function(m){return this.immediateMode.shapeMode=m!==void 0?m:c.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var p={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},h=(u.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==c.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},u.default.RendererGL.prototype.vertex=function(m,g){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in p){var b=p[y],y=this.immediateMode.geometry[y];y.push.apply(y,d(y.slice(y.length-3*b,y.length-2*b)).concat(d(y.slice(y.length-b,y.length))))}var x,v,w=x=v=0,_=(arguments.length===3?w=arguments[2]:arguments.length===4?(x=arguments[2],v=arguments[3]):arguments.length===5&&(w=arguments[2],x=arguments[3],v=arguments[4]),new u.default.Vector(m,g,w)),_=(this.immediateMode.geometry.vertices.push(_),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),_=(this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(_[0],_[1],_[2],_[3]),this.textureMode!==c.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,v/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,v),this.immediateMode._bezierVertex[0]=m,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=w,this.immediateMode._quadraticVertex[0]=m,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=w,this},u.default.RendererGL.prototype.normal=function(m,g,y){return m instanceof u.default.Vector?this._currentNormal=m:this._currentNormal=new u.default.Vector(m,g,y),this},u.default.RendererGL.prototype.endShape=function(m,g,y,b,x,v){var w,_=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===c.TESS&&(this.immediateMode.shapeMode,c.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),w=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN,w=!0),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._doFill&&!w&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(_),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},u.default.RendererGL.prototype._processVertices=function(m){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,m=m===c.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,m),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===c.TESS,m=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g||m)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},u.default.RendererGL.prototype._calculateEdges=function(m,g,y){var b=[],x=0,v=this.immediateMode.contourIndices.slice(),w=0;switch(m){case c.TRIANGLE_STRIP:for(x=0;x<g.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case c.TRIANGLE_FAN:for(x=1;x<g.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,g.length-1]);break;case c.TRIANGLES:for(x=0;x<g.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case c.LINES:for(x=0;x<g.length-1;x+=2)b.push([x,x+1]);break;case c.QUADS:for(x=0;x<g.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case c.QUAD_STRIP:for(x=0;x<g.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<g.length;x++)x+1<g.length&&x+1!==v[0]?b.push([x,x+1]):((y||w)&&b.push([x,w]),0<v.length&&(w=v.shift()))}return m!==c.TESS&&y&&b.push([g.length-1,0]),b},u.default.RendererGL.prototype._tesselateShape=function(){for(var m=this,g=(this.immediateMode.shapeMode=c.TRIANGLES,[[]]),y=0;y<this.immediateMode.geometry.vertices.length;y++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===y&&(this.immediateMode.contourIndices.shift(),g.push([])),g[g.length-1].push(this.immediateMode.geometry.vertices[y].x,this.immediateMode.geometry.vertices[y].y,this.immediateMode.geometry.vertices[y].z,this.immediateMode.geometry.uvs[2*y],this.immediateMode.geometry.uvs[2*y+1],this.immediateMode.geometry.vertexColors[4*y],this.immediateMode.geometry.vertexColors[4*y+1],this.immediateMode.geometry.vertexColors[4*y+2],this.immediateMode.geometry.vertexColors[4*y+3],this.immediateMode.geometry.vertexNormals[y].x,this.immediateMode.geometry.vertexNormals[y].y,this.immediateMode.geometry.vertexNormals[y].z);for(var b,x=this._triangulate(g),v=this.immediateMode.geometry.vertices,w=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),_=0,S=x.length;_<S;_+=u.default.RendererGL.prototype.tessyVertexSize)w.push.apply(w,d(x.slice(_+5,_+9))),this.normal.apply(this,d(x.slice(_+9,_+12))),this.vertex.apply(this,d(x.slice(_,_+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(C){return C.map(function(E){if(!b.has(E)){var T=v[E],I=m.immediateMode.geometry.vertices.findIndex(function(V){return T.x===V.x&&T.y===V.y&&T.z===V.z});if(I===-1){for(var k=1/0,F=0,D=0;D<m.immediateMode.geometry.vertices.length;D++){var P=m.immediateMode.geometry.vertices[D],R=T.x-P.x,L=T.y-P.y,P=T.z-P.z,R=R*R+L*L+P*P;R<k&&(k=R,F=D)}I=F}b.set(E,I)}return b.get(E)})})),this.immediateMode.geometry.vertexColors=w},u.default.RendererGL.prototype._drawImmediateFill=function(){var m,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,y=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,m=this._getImmediateFillShader(),this._setFillUniforms(m),!0),x=!1,v=void 0;try{for(var w,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(w=_.next()).done);b=!0)w.value._prepareBuffer(this.immediateMode.geometry,m)}catch(S){x=!0,v=S}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}if(m.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),g===1)y.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{y.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,g)}catch{console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode")}m.unbindShader()},u.default.RendererGL.prototype._drawImmediateStroke=function(){var m=this.GL,g=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),y=(this._setStrokeUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(this.immediateMode.geometry,g)}catch(_){b=!0,x=_}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),m.drawArrays(m.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),g.unbindShader()},u.default.RendererGL);s.default=h},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=(o("./p5.RendererGL"),o("./p5.RenderBuffer"),function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants")));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.RendererGL.prototype.freeGeometry=function(p){p.gid?this._freeBuffers(p.gid):console.warn("The model you passed to freeGeometry does not have an id!")},u.default.RendererGL.prototype._initBufferDefaults=function(p){var h;return this._freeBuffers(p),1e3<Object.keys(this.retainedMode.geometry).length&&(h=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(h)),this.retainedMode.geometry[p]={}},u.default.RendererGL.prototype._freeBuffers=function(p){var h,m=this.retainedMode.geometry[p];function g(y){var b=!0,x=!1,v=void 0;try{for(var w,_=y[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var S=w.value;m[S.dst]&&(h.deleteBuffer(m[S.dst]),m[S.dst]=null)}}catch(C){x=!0,v=C}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}}m&&(delete this.retainedMode.geometry[p],h=this.GL,m.indexBuffer&&h.deleteBuffer(m.indexBuffer),g(this.retainedMode.buffers.stroke),g(this.retainedMode.buffers.fill))},u.default.RendererGL.prototype.createBuffers=function(x,h){var m,g,y,b=this.GL,x=this._initBufferDefaults(x),v=(x.model=h,x.indexBuffer);return h.faces.length?(v=v||(x.indexBuffer=b.createBuffer()),y=(g=(m=u.default.RendererGL.prototype._flatten(h.faces)).some(function(w){return 65535<w}))?Uint32Array:Uint16Array,this._bindBuffer(v,b.ELEMENT_ARRAY_BUFFER,m,y),x.indexBufferType=g?b.UNSIGNED_INT:b.UNSIGNED_SHORT,x.vertexCount=3*h.faces.length):(v&&(b.deleteBuffer(v),x.indexBuffer=null),x.vertexCount=h.vertices?h.vertices.length:0),x.lineVertexCount=h.lineVertices?h.lineVertices.length/3:0,x},u.default.RendererGL.prototype.drawBuffers=function(p){var h=this.GL,m=this.retainedMode.geometry[p];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[p].vertexCount){this._useVertexColor=0<m.model.vertexColors.length;var g=this._getRetainedFillShader(),y=(this._setFillUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.retainedMode.buffers.fill[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(m,g)}catch(T){b=!0,x=T}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),m.indexBuffer&&this._bindBuffer(m.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,m.model.hasFillTransparency()),this._drawElements(h.TRIANGLES,p),g.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<m.lineVertexCount){this._useLineColor=0<m.model.vertexStrokeColors.length;var _=this._getRetainedStrokeShader(),S=(this._setStrokeUniforms(_),!0),b=!1,x=void 0;try{for(var C,E=this.retainedMode.buffers.stroke[Symbol.iterator]();!(S=(C=E.next()).done);S=!0)C.value._prepareBuffer(m,_)}catch(k){b=!0,x=k}finally{try{S||E.return==null||E.return()}finally{if(b)throw x}}_.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,m.model.hasStrokeTransparency()),this._drawArrays(h.TRIANGLES,p),_.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(m),this},u.default.RendererGL.prototype.drawBuffersScaled=function(p,h,m,g){var y=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,m,g),this.drawBuffers(p)}finally{this.uMVMatrix=y}},u.default.RendererGL.prototype._drawArrays=function(p,h){return this.GL.drawArrays(p,0,this.retainedMode.geometry[h].lineVertexCount),this},u.default.RendererGL.prototype._drawElements=function(p,m){var m=this.retainedMode.geometry[m],g=this.GL;if(m.indexBuffer){if(this._pInst.webglVersion!==c.WEBGL2&&m.indexBufferType===g.UNSIGNED_INT&&!g.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");g.drawElements(g.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else g.drawArrays(p||g.TRIANGLES,0,m.vertexCount)},u.default.RendererGL.prototype._drawPoints=function(p,h){var m=this.GL,g=this._getImmediatePointShader();this._setPointUniforms(g),this._bindBuffer(h,m.ARRAY_BUFFER,this._vToNArray(p),Float32Array,m.STATIC_DRAW),g.enableAttrib(g.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),m.drawArrays(m.Points,0,p.length),g.unbindShader()};var d=u.default.RendererGL;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(D,i,s){"use strict";function a(U){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(U)}function l(U){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(H){return a(H)}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":a(H)})(U)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.readPixelsWebGL=V,s.readPixelWebGL=G,s.default=void 0;var u=m(D("../core/main")),c=function(U){if(U&&U.__esModule)return U;if(U===null||l(U)!=="object"&&typeof U!="function")return{default:U};var H=h();if(H&&H.has(U))return H.get(U);var X,fe={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(X in U){var M;Object.prototype.hasOwnProperty.call(U,X)&&((M=$?Object.getOwnPropertyDescriptor(U,X):null)&&(M.get||M.set)?Object.defineProperty(fe,X,M):fe[X]=U[X])}return fe.default=U,H&&H.set(U,fe),fe}(D("../core/constants")),f=m(D("./GeometryBuilder")),d=m(D("libtess")),p=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function h(){var U;return typeof WeakMap!="function"?null:(U=new WeakMap,h=function(){return U},U)}function m(U){return U&&U.__esModule?U:{default:U}}function g(U){return function(H){if(Array.isArray(H)){for(var X=0,fe=new Array(H.length);X<H.length;X++)fe[X]=H[X];return fe}}(U)||function(H){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]")return Array.from(H)}(U)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(U,H){for(var X=0;X<H.length;X++){var fe=H[X];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(U,fe.key,fe)}}function b(U,H,X){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,$,M){var z=function(q,ee){for(;!Object.prototype.hasOwnProperty.call(q,ee)&&(q=_(q))!==null;);return q}(z,$);if(z)return(z=Object.getOwnPropertyDescriptor(z,$)).get?z.get.call(M):z.value})(U,H,X||U)}function x(U,H){return(x=Object.setPrototypeOf||function(X,fe){return X.__proto__=fe,X})(U,H)}function v(U){return function(){var H,X,fe=_(U);return H=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(H=_(this).constructor,Reflect.construct(fe,arguments,H)):fe.apply(this,arguments),fe=this,!(X=H)||l(X)!=="object"&&typeof X!="function"?w(fe):X}}function w(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function _(U){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)})(U)}function S(U,H,X){H in U?Object.defineProperty(U,H,{value:X,enumerable:!0,configurable:!0,writable:!0}):U[H]=X}function C(U,H){F+="#define STROKE_CAP_".concat(U," ").concat(H,`
`),I[c[U]]=H}function E(U,H){F+="#define STROKE_JOIN_".concat(U," ").concat(H,`
`),k[c[U]]=H}var T,I={},k={},F="",D=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),E("ROUND",0),E("MITER",1),E("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),L={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:F+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:F+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},P=L.sphereMappingFrag;for(T in L)L[T]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+L[T];S(D={},c.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),S(D,c.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),S(D,c.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),S(D,c.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),S(D,c.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),S(D,c.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),S(D,c.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),S(D,c.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var R=D;function V(U,H,le,fe,$,M,z,q,ee,ae){var Q=H.getParameter(H.FRAMEBUFFER_BINDING),le=(H.bindFramebuffer(H.FRAMEBUFFER,le),q===H.RGBA?4:3),ie=M*z*le,K=ee===H.UNSIGNED_BYTE?Uint8Array:Float32Array;if(U instanceof K&&U.length===ie||(U=new K(ie)),H.readPixels(fe,ae?ae-$-z:$,M,z,q,ee,U),H.bindFramebuffer(H.FRAMEBUFFER,Q),ae)for(var ge=Math.floor(z/2),ne=new K(M*le),ye=0;ye<ge;ye++){var xe=ye*M*4,De=(z-ye-1)*M*4;ne.set(U.subarray(xe,xe+4*M)),U.copyWithin(xe,De,De+4*M),U.set(ne,De)}return U}function G(U,ee,X,fe,$,M,z){var q=U.getParameter(U.FRAMEBUFFER_BINDING),ee=(U.bindFramebuffer(U.FRAMEBUFFER,ee),$===U.RGBA?4:3),ee=new(M===U.UNSIGNED_BYTE?Uint8Array:Float32Array)(ee);return U.readPixels(X,z?z-fe-1:fe,1,1,$,M,ee),U.bindFramebuffer(U.FRAMEBUFFER,q),Array.from(ee)}u.default.prototype.setAttributes=function(U,H){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var X=!0;if(H!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[U]!==H&&(this._glAttributes[U]=H,X=!1)):U instanceof Object&&this._glAttributes!==U&&(this._glAttributes=U,X=!1),this._renderer.isP3D&&!X){if(!this._setupDone){for(var fe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(fe))return void u.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},u.default.RendererGL=function(U){var H=$;if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),U&&x(H,U);var X,fe=v($);function $(M,z,q,ee){if(this instanceof $)return(M=fe.call(this,M,z,q))._setAttributeDefaults(z),M._initContext(),M.isP3D=!0,M.geometryBuilder=void 0,M.GL=M.drawingContext,M._pInst._setProperty("drawingContext",M.drawingContext),M._isErasing=!1,M._clipDepths=[],M._isClipApplied=!1,M._stencilTestOn=!1,M._enableLighting=!1,M.ambientLightColors=[],M.mixedAmbientLight=[],M.mixedSpecularColor=[],M.specularColors=[1,1,1],M.directionalLightDirections=[],M.directionalLightDiffuseColors=[],M.directionalLightSpecularColors=[],M.pointLightPositions=[],M.pointLightDiffuseColors=[],M.pointLightSpecularColors=[],M.spotLightPositions=[],M.spotLightDirections=[],M.spotLightDiffuseColors=[],M.spotLightSpecularColors=[],M.spotLightAngle=[],M.spotLightConc=[],M.activeImageLight=null,M.diffusedTextures=new Map,M.specularTextures=new Map,M.drawMode=c.FILL,M.curFillColor=M._cachedFillStyle=[1,1,1,1],M.curAmbientColor=M._cachedFillStyle=[1,1,1,1],M.curSpecularColor=M._cachedFillStyle=[0,0,0,0],M.curEmissiveColor=M._cachedFillStyle=[0,0,0,0],M.curStrokeColor=M._cachedStrokeStyle=[0,0,0,1],M.curBlendMode=c.BLEND,M.preEraseBlend=void 0,M._cachedBlendMode=void 0,M.webglVersion===c.WEBGL2?M.blendExt=M.GL:M.blendExt=M.GL.getExtension("EXT_blend_minmax"),M._isBlending=!1,M._hasSetAmbient=!1,M._useSpecularMaterial=!1,M._useEmissiveMaterial=!1,M._useNormalMaterial=!1,M._useShininess=1,M._useMetalness=0,M._useLineColor=!1,M._useVertexColor=!1,M.registerEnabled=new Set,M._tint=[255,255,255,255],M.constantAttenuation=1,M.linearAttenuation=0,M.quadraticAttenuation=0,M.uMVMatrix=new u.default.Matrix,M.uPMatrix=new u.default.Matrix,M.uNMatrix=new u.default.Matrix("mat3"),M.curMatrix=new u.default.Matrix("mat3"),M._currentNormal=new u.default.Vector(0,0,1),M._curCamera=new u.default.Camera(w(M)),M._curCamera._computeCameraDefaultSettings(),M._curCamera._setDefaultCamera(),M.filterCamera=new u.default.Camera(w(M)),M.filterCamera._computeCameraDefaultSettings(),M.filterCamera._setDefaultCamera(),M.prevTouches=[],M.zoomVelocity=0,M.rotateVelocity=new u.default.Vector(0,0),M.moveVelocity=new u.default.Vector(0,0),M.executeZoom=!1,M.executeRotateAndMove=!1,M.specularShader=void 0,M.sphereMapping=void 0,M.diffusedShader=void 0,M._defaultLightShader=void 0,M._defaultImmediateModeShader=void 0,M._defaultNormalShader=void 0,M._defaultColorShader=void 0,M._defaultPointShader=void 0,M.userFillShader=void 0,M.userStrokeShader=void 0,M.userPointShader=void 0,M.retainedMode={geometry:{},buffers:{stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(M)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(M)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(M)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(M))],fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(M),M._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(M),M._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(M)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(M),M._flatten)],text:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(M),M._vToNArray),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(M),M._flatten)]}},M.immediateMode={geometry:new u.default.Geometry,shapeMode:c.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(M),M._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(M),M._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(M)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(M),M._flatten)],stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(M)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(M)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(M)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(M))],point:M.GL.createBuffer()}},M.pointSize=5,M.curStrokeWeight=1,M.curStrokeCap=c.ROUND,M.curStrokeJoin=c.ROUND,M.textures=new Map,M.framebuffers=new Set,M.activeFramebuffers=[],M.filterShader=void 0,M.filterLayer=void 0,M.filterLayerTemp=void 0,M.defaultFilterShaders={},M.textureMode=c.IMAGE,M.textureWrapX=c.CLAMP,M.textureWrapY=c.CLAMP,M._tex=null,M._curveTightness=6,M._lookUpTableBezier=[],M._lookUpTableQuadratic=[],M._lutBezierDetail=0,M._lutQuadraticDetail=0,M.isProcessingVertices=!1,M._tessy=M._initTessy(),M.fontInfos={},M._curShader=void 0,M;throw new TypeError("Cannot call a class as a function")}return H=$,(U=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var M;if(this.geometryBuilder)return M=this.geometryBuilder.finish(),this.geometryBuilder=void 0,M;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(M){return this.beginGeometry(),M(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(M){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};M._glAttributes===null?M._glAttributes=z:M._glAttributes=Object.assign(z,M._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?c.WEBGL2:c.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var M=this.drawingContext;M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var M=this.drawingContext;return M.getParameter(M.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(M,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(u.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),q=Math.min(M,ee),ee=Math.min(z,ee);return q===M&&ee===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(q,", height: ").concat(ee,".")),{adjustedWidth:q,adjustedHeight:ee}}},{key:"_resetContext",value:function(M,z){var q,ee=this.width,ae=this.height,le=this.canvas.id,Q=this._pInst instanceof u.default.Graphics,le=(Q?((q=this._pInst).canvas.parentNode.removeChild(q.canvas),q.canvas=document.createElement("canvas"),(q._pInst._userNode||document.body).appendChild(q.canvas),u.default.Element.call(q,q.canvas,q._pInst),q.width=ee,q.height=ae):((q=this.canvas)&&q.parentNode.removeChild(q),(q=document.createElement("canvas")).id=le,(this._pInst._userNode||document.body).appendChild(q),this._pInst.canvas=q,this.canvas=q),new u.default.RendererGL(this._pInst.canvas,this._pInst,!Q));this._pInst._setProperty("_renderer",le),le.resize(ee,ae),le._applyDefaults(),Q||this._pInst._elements.push(le),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,M)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),M=ee.levels[0]/255,z=ee.levels[1]/255,q=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(M,z,q,ee)}},{key:"fill",value:function(M,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ae._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(M,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ae._array}},{key:"strokeCap",value:function(M){this.curStrokeCap=M}},{key:"strokeJoin",value:function(M){this.curStrokeJoin=M}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(M,z){M.width===z.width&&M.height===z.height||M.resize(z.width,z.height),M.pixelDensity()!==z.pixelDensity()&&M.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var M,z,q=this,ee=this.getFilterLayer(),ae=void 0,Q=void 0,le=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(Q=arguments.length<=0?void 0:arguments[0],S(M={},c.BLUR,3),S(M,c.POSTERIZE,4),S(M,c.THRESHOLD,.5),ae=Q in(M=M)&&(arguments.length<=1?void 0:arguments[1])===void 0?M[Q]:arguments.length<=1?void 0:arguments[1],Q in this.defaultFilterShaders||(this.defaultFilterShaders[Q]=new u.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,R[Q])),this.filterShader=this.defaultFilterShaders[Q]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ie=(this.matchSize(ee,le),ee.draw(function(){return q._pInst.clear()}),[1/(le.width*le.pixelDensity()),1/(le.height*le.pixelDensity())]);Q===c.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,le),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(c.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ie),this.filterShader.setUniform("canvasSize",[le.width,le.height]),this.filterShader.setUniform("radius",Math.max(1,ae)),z.draw(function(){q.filterShader.setUniform("direction",[1,0]),q.filterShader.setUniform("tex0",le),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),ee.draw(function(){q.filterShader.setUniform("direction",[0,1]),q.filterShader.setUniform("tex0",z),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.pop()):ee.draw(function(){q._pInst.noStroke(),q._pInst.blendMode(c.BLEND),q._pInst.shader(q.filterShader),q.filterShader.setUniform("tex0",le),q.filterShader.setUniform("texelSize",ie),q.filterShader.setUniform("canvasSize",[le.width,le.height]),q.filterShader.setUniform("filterParameter",ae),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(c.CORNER),this._pInst.blendMode(c.BLEND),le.filterCamera._resize(),this._pInst.setCamera(le.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-le.width/2,-le.height/2,le.width,le.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(M){return M?this._pInst.pixelDensity(M):this._pInst.pixelDensity()}},{key:"blendMode",value:function(M){M===c.DARKEST||M===c.LIGHTEST||M===c.ADD||M===c.BLEND||M===c.SUBTRACT||M===c.SCREEN||M===c.EXCLUSION||M===c.REPLACE||M===c.MULTIPLY||M===c.REMOVE?this.curBlendMode=M:M!==c.BURN&&M!==c.OVERLAY&&M!==c.HARD_LIGHT&&M!==c.SOFT_LIGHT&&M!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(M,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(c.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,M/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(b(_($.prototype),"beginClip",this).call(this,M),this.drawTarget()._isClipApplied=!0,this.GL);M.clearStencil(0),M.clear(M.STENCIL_BUFFER_BIT),M.enable(M.STENCIL_TEST),this._stencilTestOn=!0,M.stencilFunc(M.ALWAYS,1,255),M.stencilOp(M.KEEP,M.KEEP,M.REPLACE),M.disable(M.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var M=this.GL;M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.stencilFunc(this._clipInvert?M.EQUAL:M.NOTEQUAL,0,255),M.enable(M.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(_($.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(M){this.curStrokeWeight!==M&&(this.pointSize=M,this.curStrokeWeight=M)}},{key:"_getPixel",value:function(M,z){var q=this.GL;return G(q,null,M,z,q.RGBA,q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var M,z,q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(M=this._pInst._pixelDensity,z=this.GL,q._setProperty("pixels",V(q.pixels,z,null,0,0,this.width*M,this.height*M,z.RGBA,z.UNSIGNED_BYTE,this.height*M)))}},{key:"updatePixels",value:function(){var M=this._getTempFramebuffer();M.pixels=this._pixelsState.pixels,M.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(c.CENTER),this._pInst.image(M,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:c.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:c.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(M){return this.retainedMode.geometry[M]!==void 0}},{key:"viewport",value:function(M,z){this._viewport=[0,0,M,z],this.GL.viewport(0,0,M,z)}},{key:"resize",value:function(ae,ee){u.default.Renderer.prototype.resize.call(this,ae,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var ae=this._pixelsState,q=(ae.pixels!==void 0&&ae._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,ae=void 0;try{for(var Q,le=this.framebuffers[Symbol.iterator]();!(q=(Q=le.next()).done);q=!0)Q.value._canvasSizeChanged()}catch(ie){ee=!0,ae=ie}finally{try{q||le.return==null||le.return()}finally{if(ee)throw ae}}}},{key:"clear",value:function(){var M=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,q=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,ae=this.activeFramebuffer();ae&&ae.format===c.UNSIGNED_BYTE&&!ae.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(M*ee,z*ee,q*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(M,z,q,ee,ae,Q){arguments.length===16?u.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([M,z,0,0,q,ee,0,0,0,0,1,0,ae,Q,0,1])}},{key:"translate",value:function(M,z,q){return M instanceof u.default.Vector&&(q=M.z,z=M.y,M=M.x),this.uMVMatrix.translate([M,z,q]),this}},{key:"scale",value:function(M,z,q){return this.uMVMatrix.scale(M,z,q),this}},{key:"rotate",value:function(M,z){return z===void 0?this.rotateZ(M):(u.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(M){return this.rotate(M,1,0,0),this}},{key:"rotateY",value:function(M){return this.rotate(M,0,1,0),this}},{key:"rotateZ",value:function(M){return this.rotate(M,0,0,1),this}},{key:"push",value:function(){var M=u.default.Renderer.prototype.push.apply(this),z=M.properties;return z.uMVMatrix=this.uMVMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,M}},{key:"pop",value:function(){var M;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,q=new Array(z),ee=0;ee<z;ee++)q[ee]=arguments[ee];(M=b(_($.prototype),"pop",this)).call.apply(M,[this].concat(q)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var M=this.drawTarget();M._isClipApplied!==this._stencilTestOn&&(M._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var M=this.userStrokeShader;return M&&M.isStrokeShader()?M:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(M){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(P)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",M),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var M=this.userFillShader;if(this._useNormalMaterial&&(!M||!M.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getImmediateModeShader();return M}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var M=this.userFillShader;if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getColorShader();return M}},{key:"_getImmediatePointShader",value:function(){var M=this.userPointShader;return M&&M.isPointShader()?M:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+L.phongFrag):this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+L.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===c.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(M,z){var q="";return this.webglVersion===c.WEBGL2&&(q+=`#version 300 es
#define WEBGL2
`),M==="vert"?q+=`#define VERTEX_SHADER
`:M==="frag"&&(q+=`#define FRAGMENT_SHADER
`),z&&(q+="precision ".concat(z,` float;
`)),q}},{key:"_getEmptyTexture",value:function(){var M;return this._emptyTexture||((M=new u.default.Image(1,1)).set(0,0,255),this._emptyTexture=new u.default.Texture(this,M)),this._emptyTexture}},{key:"getTexture",value:function(M){M instanceof u.default.Framebuffer&&(M=M.color);var z=this.textures.get(M);return z||(z=new u.default.Texture(this,M),this.textures.set(M,z),z)}},{key:"getDiffusedTexture",value:function(M){var z,q,ee=this;return this.diffusedTextures.get(M)!=null?this.diffusedTextures.get(M):(z=Math.floor(M.height/M.width*200),q=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(L.imageLightVert,L.imageLightDiffusedFrag)),q.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",M),ee._pInst.noStroke(),ee._pInst.rectMode(c.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(M,q),q)}},{key:"getSpecularTexture",value:function(M){var z=this;if(this.specularTextures.get(M)!=null)return this.specularTextures.get(M);for(var q,ee=[],ae=this._pInst.createFramebuffer({width:512,height:512,density:1}),Q=Math.log(512)/Math.log(2),le=(this.specularShader||(this.specularShader=this._pInst.createShader(L.imageLightVert,L.imageLightSpecularFrag)),512);1<=le;le/=2)(function(ie){ae.resize(ie,ie);var K=1-Math.log(ie)/Math.log(2)/Q;ae.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",M),z.specularShader.setUniform("roughness",K),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(ie,ie)}),ee.push(ae.get().drawingContext.getImageData(0,0,ie,ie))})(le);return ae.remove(),q=new p.MipmapTexture(this,ee,{}),this.specularTextures.set(M,q),q}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(M){return new u.default.Framebuffer(this,M)}},{key:"_setStrokeUniforms",value:function(M){M.bindShader(),M.setUniform("uUseLineColor",this._useLineColor),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uStrokeWeight",this.curStrokeWeight),M.setUniform("uStrokeCap",I[this.curStrokeCap]),M.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(M){var z=this,q=(M.bindShader(),this.mixedSpecularColor=g(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,ae){return z.curFillColor[ae]*z._useMetalness+ee*(1-z._useMetalness)})),M.setUniform("uUseVertexColor",this._useVertexColor),M.setUniform("uMaterialColor",this.curFillColor),M.setUniform("isTexture",!!this._tex),this._tex&&M.setUniform("uSampler",this._tex),M.setUniform("uTint",this._tint),M.setUniform("uHasSetAmbient",this._hasSetAmbient),M.setUniform("uAmbientMatColor",this.curAmbientColor),M.setUniform("uSpecularMatColor",this.mixedSpecularColor),M.setUniform("uEmissiveMatColor",this.curEmissiveColor),M.setUniform("uSpecular",this._useSpecularMaterial),M.setUniform("uEmissive",this._useEmissiveMaterial),M.setUniform("uShininess",this._useShininess),M.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(M),M.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),q=(M.setUniform("uPointLightCount",q),M.setUniform("uPointLightLocation",this.pointLightPositions),M.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),M.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),q=(M.setUniform("uDirectionalLightCount",q),M.setUniform("uLightingDirection",this.directionalLightDirections),M.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),M.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),q=(this.mixedAmbientLight=g(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=z._useMetalness,Math.max(0,ee)})),M.setUniform("uAmbientLightCount",q),M.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);M.setUniform("uSpotLightCount",q),M.setUniform("uSpotLightAngle",this.spotLightAngle),M.setUniform("uSpotLightConc",this.spotLightConc),M.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),M.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),M.setUniform("uSpotLightLocation",this.spotLightPositions),M.setUniform("uSpotLightDirection",this.spotLightDirections),M.setUniform("uConstantAttenuation",this.constantAttenuation),M.setUniform("uLinearAttenuation",this.linearAttenuation),M.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),M.bindTextures()}},{key:"_setImageLightUniforms",value:function(M){var z,q;M.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),M.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),q=20/this._useShininess,M.setUniform("levelOfDetail",8*q),M.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(M){M.bindShader(),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(M,z,q,ee,ae){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,M),q!==void 0&&((M=q)instanceof u.default.DataArray?M=q.dataArray():M instanceof(ee||Float32Array)||(M=new(ee||Float32Array)(M)),this.GL.bufferData(z,M,ae||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(M,z){return M.length===z.length&&M.every(function(q,ee){return q===z[ee]})}},{key:"_isTypedArray",value:function(M){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return M instanceof z})}},{key:"_flatten",value:function(M){return M.flat()}},{key:"_vToNArray",value:function(M){return M.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(M){var z=M*M,q=1-M,ee=q*q;return[ee*q,3*ee*M,3*q*z,z*M]}},{key:"_quadraticCoefficients",value:function(M){var z=1-M;return[z*z,2*z*M,M*M]}},{key:"_bezierToCatmull",value:function(M){return[M[1],M[1]+(M[2]-M[0])/this._curveTightness,M[2]-(M[3]-M[1])/this._curveTightness,M[2]]}},{key:"_initTessy",value:function(){var M=new d.default.GluTesselator;return M.gluTessCallback(d.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,q){var ee=!0,ae=!1,Q=void 0;try{for(var le,ie=z[Symbol.iterator]();!(ee=(le=ie.next()).done);ee=!0){var K=le.value;q.push(K)}}catch(ge){ae=!0,Q=ge}finally{try{ee||ie.return==null||ie.return()}finally{if(ae)throw Q}}}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==d.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_COMBINE,function(z,q,ee){for(var ae=new Array(u.default.RendererGL.prototype.tessyVertexSize).fill(0),Q=0;Q<ee.length;Q++)for(var le=0;le<ae.length;le++)ee[Q]!==0&&q[Q]&&(ae[le]+=q[Q][le]*ee[Q]);return ae}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),M.gluTessProperty(d.default.gluEnum.GLU_TESS_WINDING_RULE,d.default.windingRule.GLU_TESS_WINDING_NONZERO),M}},{key:"_triangulate",value:function(M){var z=M[0]?M[0][2]:void 0,q=!0,ee=!0,K=!1,ne=void 0;try{for(var ae,Q=M[Symbol.iterator]();!(ee=(ae=Q.next()).done);ee=!0)for(var le=ae.value,ie=0;ie<le.length;ie+=u.default.RendererGL.prototype.tessyVertexSize)if(le[ie+2]!==z){q=!1;break}}catch(at){K=!0,ne=at}finally{try{ee||Q.return==null||Q.return()}finally{if(K)throw ne}}q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var K=[],ge=(this._tessy.gluTessBeginPolygon(K),!0),ne=!1,ye=void 0;try{for(var xe,De=M[Symbol.iterator]();!(ge=(xe=De.next()).done);ge=!0){var Te=xe.value;this._tessy.gluTessBeginContour();for(var Fe=0;Fe<Te.length;Fe+=u.default.RendererGL.prototype.tessyVertexSize){var $e=Te.slice(Fe,Fe+u.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex($e,$e)}this._tessy.gluTessEndContour()}}catch(at){ne=!0,ye=at}finally{try{ge||De.return==null||De.return()}finally{if(ne)throw ye}}return this._tessy.gluTessEndPolygon(),K}}])&&y(H.prototype,U),X&&y(H,X),$}(u.default.Renderer),u.default.prototype._assert3d=function(U){if(!this._renderer.isP3D)throw new Error("".concat(U,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},u.default.RendererGL.prototype.tessyVertexSize=12,D=u.default.RendererGL,s.default=D},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Shader=function(){function u(p,h,m){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=h,this._fragSrc=m,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var c,f,d;return c=u,(f=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return a.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return a.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(p){var h=new a.default.Shader(p._renderer,this._vertSrc,this._fragSrc);return h.ensureCompiledOnContext(p),h}},{key:"ensureCompiledOnContext",value:function(p){if(this._glProgram!==0&&this._renderer!==p._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=p._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,h=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),m=0;m<h;++m){var g=p.getActiveAttrib(this._glProgram,m),y=g.name,b=p.getAttribLocation(this._glProgram,y),x={};x.name=y,x.location=b,x.index=m,x.type=g.type,x.size=g.size,this.attributes[y]=x}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,h=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),m=0,g=0;g<h;++g){var y=p.getActiveUniform(this._glProgram,g),b={},x=(b.location=p.getUniformLocation(this._glProgram,y.name),b.size=y.size,y.name);1<y.size&&(x=x.substring(0,x.indexOf("[0]"))),b.name=x,b.type=y.type,b._cachedData=void 0,b.type===p.SAMPLER_2D&&(b.samplerIndex=m,m++,this.samplers.push(b)),b.isArray=1<y.size||b.type===p.FLOAT_MAT3||b.type===p.FLOAT_MAT4||b.type===p.FLOAT_VEC2||b.type===p.FLOAT_VEC3||b.type===p.FLOAT_VEC4||b.type===p.INT_VEC2||b.type===p.INT_VEC4||b.type===p.INT_VEC3,this.uniforms[x]=b}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,h=!0,m=!1,g=void 0;try{for(var y,b=this.samplers[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var x=y.value,v=x.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+x.samplerIndex),v.bindTexture(),v.update(),p.uniform1i(x.location,x.samplerIndex)}}catch(w){m=!0,g=w}finally{try{h||b.return==null||b.return()}finally{if(m)throw g}}}},{key:"updateTextures",value:function(){var p=!0,h=!1,m=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value.texture;b&&b.update()}}catch(x){h=!0,m=x}finally{try{p||y.return==null||y.return()}finally{if(h)throw m}}}},{key:"unbindTextures",value:function(){var p=!0,h=!1,m=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;this.setUniform(b.name,this._renderer._getEmptyTexture())}}catch(x){h=!0,m=x}finally{try{p||y.return==null||y.return()}finally{if(h)throw m}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,h=this._renderer.uPMatrix,m=this._renderer.uMVMatrix,g=m.copy();g.mult(h),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",h.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,h){var m=this.uniforms[p];if(m){var g=this._renderer.GL;if(m.isArray){if(m._cachedData&&this._renderer._arraysEqual(m._cachedData,h))return;m._cachedData=h.slice(0)}else{if(m._cachedData&&m._cachedData===h)return;Array.isArray(h)?m._cachedData=h.slice(0):m._cachedData=h}var y=m.location;switch(this.useProgram(),m.type){case g.BOOL:h===!0?g.uniform1i(y,1):g.uniform1i(y,0);break;case g.INT:1<m.size?h.length&&g.uniform1iv(y,h):g.uniform1i(y,h);break;case g.FLOAT:1<m.size?h.length&&g.uniform1fv(y,h):g.uniform1f(y,h);break;case g.FLOAT_MAT3:g.uniformMatrix3fv(y,!1,h);break;case g.FLOAT_MAT4:g.uniformMatrix4fv(y,!1,h);break;case g.FLOAT_VEC2:1<m.size?h.length&&g.uniform2fv(y,h):g.uniform2f(y,h[0],h[1]);break;case g.FLOAT_VEC3:1<m.size?h.length&&g.uniform3fv(y,h):g.uniform3f(y,h[0],h[1],h[2]);break;case g.FLOAT_VEC4:1<m.size?h.length&&g.uniform4fv(y,h):g.uniform4f(y,h[0],h[1],h[2],h[3]);break;case g.INT_VEC2:1<m.size?h.length&&g.uniform2iv(y,h):g.uniform2i(y,h[0],h[1]);break;case g.INT_VEC3:1<m.size?h.length&&g.uniform3iv(y,h):g.uniform3i(y,h[0],h[1],h[2]);break;case g.INT_VEC4:1<m.size?h.length&&g.uniform4iv(y,h):g.uniform4i(y,h[0],h[1],h[2],h[3]);break;case g.SAMPLER_2D:g.activeTexture(g.TEXTURE0+m.samplerIndex),m.texture=h instanceof a.default.Texture?h:this._renderer.getTexture(h),g.uniform1i(y,m.samplerIndex),m.texture.src.gifProperties&&m.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(p){return p!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,h,m,g,y,b){var x;return p&&(p=p.location)!==-1&&(x=this._renderer.GL,this._renderer.registerEnabled.has(p)||(x.enableVertexAttribArray(p),this._renderer.registerEnabled.add(p)),this._renderer.GL.vertexAttribPointer(p,h,m||x.FLOAT,g||!1,y||0,b||0)),this}},{key:"disableRemainingAttributes",value:function(){var p=this,h=!0,m=!1,g=void 0;try{for(var y,b=this._renderer.registerEnabled.values()[Symbol.iterator]();!(h=(y=b.next()).done);h=!0)(function(){var x=y.value;Object.keys(p.attributes).some(function(v){return p.attributes[v].location===x})||(p._renderer.GL.disableVertexAttribArray(x),p._renderer.registerEnabled.delete(x))})()}catch(x){m=!0,g=x}finally{try{h||b.return==null||b.return()}finally{if(m)throw g}}}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Shader,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.checkWebGLCapabilities=x,s.default=s.MipmapTexture=void 0;var u=(b=o("../core/main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=C?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(S,_,E):S[_]=v[_])}return S.default=v,w&&w.set(v,S),S}(o("../core/constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){return(d=Object.setPrototypeOf||function(_,S){return _.__proto__=S,_})(v,w)}function p(v){return function(){var w,_=h(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function y(v,w,_){w&&g(v.prototype,w),_&&g(v,_)}u.default.Texture=function(){function v(T,_,E){m(this,v),this._renderer=T;var C=this._renderer.GL,E=(E=E||{},this.src=_,this.glTex=void 0,this.glTarget=C.TEXTURE_2D,this.glFormat=E.format||C.RGBA,this.mipmaps=!1,this.glMinFilter=E.minFilter||C.LINEAR,this.glMagFilter=E.magFilter||C.LINEAR,this.glWrapS=E.wrapS||C.CLAMP_TO_EDGE,this.glWrapT=E.wrapT||C.CLAMP_TO_EDGE,this.glDataType=E.dataType||C.UNSIGNED_BYTE,x(T)),T=(this.glFormat!==C.HALF_FLOAT||E.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=C.FLOAT),this.glFormat!==C.HALF_FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||E.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.glFormat!==C.FLOAT||E.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=C.UNSIGNED_BYTE),this.glFormat!==C.FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||E.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.isSrcMediaElement=u.default.MediaElement!==void 0&&_ instanceof u.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=u.default.Element!==void 0&&_ instanceof u.default.Element&&!(_ instanceof u.default.Graphics)&&!(_ instanceof u.default.Renderer),this.isSrcP5Image=_ instanceof u.default.Image,this.isSrcP5Graphics=_ instanceof u.default.Graphics,this.isSrcP5Renderer=_ instanceof u.default.Renderer,this.isImageData=typeof ImageData<"u"&&_ instanceof ImageData,this.isFramebufferTexture=_ instanceof u.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=T.width,this.height=T.height,this.init(T),this}return y(v,[{key:"_getTextureDataFromSource",value:function(){var w;return this.isFramebufferTexture?w=this.src.rawTexture():this.isSrcP5Image?w=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?w=this.src.elt:this.isImageData&&(w=this.src),w}},{key:"init",value:function(w){var _,S=this._renderer.GL;this.isFramebufferTexture||(this.glTex=S.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.glMagFilter),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(_=new Uint8Array([1,1,1,1]),S.texImage2D(this.glTarget,0,S.RGBA,1,1,0,this.glFormat,this.glDataType,_)):S.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w))}},{key:"update",value:function(){var w,_,S,C=this.src;return C.width!==0&&C.height!==0&&!this.isFramebufferTexture&&(w=this._getTextureDataFromSource(),_=!1,S=this._renderer.GL,w.width!==this.width||w.height!==this.height?(_=!0,this.width=w.width||C.width,this.height=w.height||C.height,this.isSrcP5Image?C.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&C.setModified(!0)):this.isSrcP5Image?C.isModified()&&C.setModified(!(_=!0)):this.isSrcMediaElement?C.isModified()?C.setModified(!(_=!0)):C.loadedmetadata&&this._videoPrevUpdateTime!==C.time()&&(this._videoPrevUpdateTime=C.time(),_=!0):this.isImageData?C._dirty&&(_=!(C._dirty=!1)):_=!0,_&&(this.bindTexture(),S.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w)),_)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(w,_){var S=this._renderer.GL;this.glMinFilter=this.glFilter(w),this.glMagFilter=this.glFilter(_),this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.glMinFilter),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(w){var _=this._renderer.GL;return w===c.NEAREST?_.NEAREST:_.LINEAR}},{key:"setWrapMode",value:function(w,_){function S(I){return(I&I-1)==0}var C=this._renderer.GL,T=this._getTextureDataFromSource(),T=T.naturalWidth&&T.naturalHeight?(E=T.naturalWidth,T.naturalHeight):(E=this.width,this.height),E=S(E),T=S(T);w===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapS=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):w===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapS=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):this.glWrapS=C.CLAMP_TO_EDGE,_===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapT=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):_===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapT=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):this.glWrapT=C.CLAMP_TO_EDGE,this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this.glWrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),v}();var b=function(v){var w=S;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&d(w,v);var _=p(S);function S(C,E,T){return m(this,S),E=(C=_.call(this,C,E,T))._renderer.GL,C.glMinFilter===E.LINEAR&&(C.glMinFilter=E.LINEAR_MIPMAP_LINEAR),C}return y(S,[{key:"glFilter",value:function(C){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(C){var E=this._renderer.GL;this.glTex=E.createTexture(),this.bindTexture();for(var T=0;T<C.length;T++)E.texImage2D(this.glTarget,T,this.glFormat,this.glFormat,this.glDataType,C[T]);this.glMinFilter=E.LINEAR_MIPMAP_LINEAR,E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,this.glMagFilter),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),S}(u.default.Texture);function x(C){var w=C.GL,C=C.webglVersion,_=C===c.WEBGL2?w.getExtension("EXT_color_buffer_float")&&w.getExtension("EXT_float_blend"):w.getExtension("OES_texture_float"),S=_&&w.getExtension("OES_texture_float_linear"),C=C===c.WEBGL2?w.getExtension("EXT_color_buffer_float"):w.getExtension("OES_texture_half_float");return{float:_,floatLinear:S,halfFloat:C,halfFloatLinear:C&&w.getExtension("OES_texture_half_float_linear")}}s.MipmapTexture=b,o=u.default.Texture,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.iterator");var u,c=(u=o("../core/main"))&&u.__esModule?u:{default:u},f=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=d();if(w&&w.has(v))return w.get(v);var _,S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=C?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(S,_,E):S[_]=v[_])}return S.default=v,w&&w.set(v,S),S}(o("../core/constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}function p(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function m(v,w,_){w&&h(v.prototype,w),_&&h(v,_)}o("./p5.Shader"),o("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(v){return this._isOpenType()?this._textFont._textWidth(v,this._textSize):0};var g=function(){function v(w,_){p(this,v),this.width=w,this.height=_,this.infos=[]}return m(v,[{key:"findImage",value:function(w){var _,S,C=this.width*this.height;if(C<w)throw new Error("font is too complex to render in 3D");for(var E=this.infos.length-1;0<=E;--E){var T=this.infos[E];if(T.index+w<C){S=(_=T).imageData;break}}if(!_){try{S=new ImageData(this.width,this.height)}catch{var I=document.getElementsByTagName("canvas")[0],k=!I,F=(I||((I=document.createElement("canvas")).style.display="none",document.body.appendChild(I)),I.getContext("2d"));F&&(S=F.createImageData(this.width,this.height)),k&&document.body.removeChild(I)}this.infos.push(_={index:0,imageData:S})}return F=_.index,_.index+=w,S._dirty=!0,{imageData:S,index:F}}}]),v}();function y(T,w,_,S,C){var E=T.imageData.data,T=4*T.index++;E[T++]=w,E[T++]=_,E[T++]=S,E[+T]=C}var b=Math.sqrt(3),x=function(){function v(w){p(this,v),this.font=w,this.strokeImageInfos=new g(64,64),this.colDimImageInfos=new g(64,64),this.rowDimImageInfos=new g(64,64),this.colCellImageInfos=new g(64,64),this.rowCellImageInfos=new g(64,64),this.glyphInfos={}}return m(v,[{key:"getGlyphInfo",value:function(w){var _=this.glyphInfos[w.index];if(!_){var S=w.getBoundingBox(),C=S.x1,E=S.y1,T=S.x2-C,I=S.y2-E,k=w.path.commands;if(T==0||I==0||!k.length)return this.glyphInfos[w.index]={};for(var F=[],D=[],L=[],P=8;0<=P;--P)L.push([]);for(P=8;0<=P;--P)D.push([]);var R,V,G,U,H=function(){function _t(kt,Rt,Mt,Be){p(this,_t),this.p0=kt,this.c0=Rt,this.c1=Mt,this.p1=Be}return m(_t,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ut){var Rt=c.default.Vector.lerp(this.p0,this.c0,ut),Be=c.default.Vector.lerp(this.c0,this.c1,ut),Mt=c.default.Vector.lerp(Rt,Be,ut),Be=(this.c1=c.default.Vector.lerp(this.c1,this.p1,ut),this.c0=c.default.Vector.lerp(Be,this.c1,ut),c.default.Vector.lerp(Mt,this.c0,ut)),ut=new _t(this.p0,Rt,Mt,Be);return this.p0=Be,ut}},{key:"splitInflections",value:function(){var kt=c.default.Vector.sub(this.c0,this.p0),Rt=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),kt),Mt=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),kt),c.default.Vector.mult(Rt,2)),Be=[],ut=Rt.x*Mt.y-Rt.y*Mt.x;return ut!==0&&0<=(kt=(Mt=kt.x*Mt.y-kt.y*Mt.x)*Mt-4*ut*(kt.x*Rt.y-kt.y*Rt.x))&&(ut<0&&(ut=-ut,Mt=-Mt),kt=(-Mt+(Rt=Math.sqrt(kt)))/(2*ut),0<(Mt=(-Mt-Rt)/(2*ut))&&Mt<1&&(Be.push(this.split(Mt)),kt=1-(1-kt)/(1-Mt)),0<kt&&kt<1&&Be.push(this.split(kt))),Be.push(this),Be}}]),_t}(),X=!0,fe=!1,$=void 0;try{for(var M,z=k[Symbol.iterator]();!(X=(M=z.next()).done);X=!0){var q=M.value,ee=(q.x-C)/T,ae=(q.y-E)/I;if(!We(R,V,ee,ae)){switch(q.type){case"M":G=ee,U=ae;break;case"L":at(R,V,ee,ae);break;case"Q":var Q=(q.x1-C)/T,le=(q.y1-E)/I;Fe([R,ee,Q],[V,ae,le],{x:R,y:V,cx:Q,cy:le});break;case"Z":We(R,V,G,U)?F.push({x:R,y:V}):(at(R,V,G,U),F.push({x:G,y:U}));break;case"C":for(var ie=function(me,Ve,Qe,Mt,Be,ut,Ge,de){var me=new H(new c.default.Vector(me,Ve),new c.default.Vector(Qe,Mt),new c.default.Vector(Be,ut),new c.default.Vector(Ge,de)).splitInflections(),oe=[],be=30/b,Oe=!0,Ve=!1,Qe=void 0;try{for(var St,Nt=me[Symbol.iterator]();!(Oe=(St=Nt.next()).done);Oe=!0){for(var Ft=St.value,Ut=[],en=void 0;!(.125<=(en=be/Ft.quadError()));){var Lr=Math.pow(en,.3333333333333333),ur=Ft.split(Lr),Yr=Ft.split(1-Lr/(1-Lr));oe.push(ur),Ut.push(Ft),Ft=Yr}en<1&&oe.push(Ft.split(.5)),oe.push(Ft),Array.prototype.push.apply(oe,Ut.reverse())}}catch(Rr){Ve=!0,Qe=Rr}finally{try{Oe||Nt.return==null||Nt.return()}finally{if(Ve)throw Qe}}return oe}(R,V,(q.x1-C)/T,(q.y1-E)/I,(q.x2-C)/T,(q.y2-E)/I,ee,ae),K=0;K<ie.length;K++){var ge=ie[K].toQuadratic();Fe([ge.x,ge.x1,ge.cx],[ge.y,ge.y1,ge.cy],ge)}break;default:throw new Error("unknown command type: ".concat(q.type))}R=ee,V=ae}}}catch(_t){fe=!0,$=_t}finally{try{X||z.return==null||z.return()}finally{if(fe)throw $}}for(var ne=F.length,ye=this.strokeImageInfos.findImage(ne),xe=ye.index,De=0;De<ne;++De){var Te=F[De];y(ye,$e(Te.x),$e(Te.y),$e(Te.cx),$e(Te.cy))}(_=this.glyphInfos[w.index]={glyph:w,uGlyphRect:[S.x1,-S.y1,S.x2,-S.y2],strokeImageInfo:ye,strokes:F,colInfo:jt(L,this.colDimImageInfos,this.colCellImageInfos),rowInfo:jt(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[_.colInfo.dimOffset,_.rowInfo.dimOffset]}return _;function Fe(_t,kt,Rt){var Mt=F.length;function Be(oe,be,Oe){for(var Ve=oe.length;0<Ve--;){var Qe=oe[Ve];Qe<be&&(be=Qe),Oe<Qe&&(Oe=Qe)}return{min:be,max:Oe}}F.push(Rt);for(var Rt=Be(_t,1,0),_t=Math.max(Math.floor(9*Rt.min-.5),0),ut=Math.min(Math.ceil(9*Rt.max+.5),9),Ge=_t;Ge<ut;++Ge)L[Ge].push(Mt);for(var Rt=Be(kt,1,0),_t=Math.max(Math.floor(9*Rt.min-.5),0),de=Math.min(Math.ceil(9*Rt.max+.5),9),me=_t;me<de;++me)D[me].push(Mt)}function $e(_t){return(_t=(Rt=255)*_t)<(kt=0)?kt:Rt<_t?Rt:_t;var kt,Rt}function at(_t,kt,Rt,Mt){Fe([_t,Rt],[kt,Mt],{x:_t,y:kt,cx:(_t+Rt)/2,cy:(kt+Mt)/2})}function We(_t,kt,Rt,Mt){return Math.abs(Rt-_t)<1e-5&&Math.abs(Mt-kt)<1e-5}function jt(_t,kt,Rt){for(var Mt=_t.length,Be=kt.findImage(Mt),kt=Be.index,ut=0,Ge=0;Ge<Mt;++Ge)ut+=_t[Ge].length;for(var de=Rt.findImage(ut),me=0;me<Mt;++me){var oe=_t[me],be=oe.length,Oe=de.index;y(Be,Oe>>7,127&Oe,be>>7,127&be);for(var Ve=0;Ve<be;++Ve){var Qe=oe[Ve]+xe;y(de,Qe>>7,127&Qe,0,0)}}return{cellImageInfo:de,dimOffset:kt,dimImageInfo:Be}}}}]),v}();c.default.RendererGL.prototype._renderText=function(v,w,_,S,C){if(this._textFont&&typeof this._textFont!="string"){if(!(C<=S)&&this._doFill){if(this._isOpenType()){v.push();var C=this._doStroke,E=this.drawMode,T=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),I=(I=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(T)),_=this._textFont._handleAlignment(this,w,_,S),S=this._textSize/T.unitsPerEm,k=(this.translate(_.x,_.y,0),this.scale(S,S,1),this.GL),_=!this._defaultFontShader,F=this._getFontShader(),D=(F.init(),F.bindShader(),_&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),L=(D||((S=this._textGeom=new c.default.Geometry(1,1,function(){for(var K=0;K<=1;K++)for(var ge=0;ge<=1;ge++)this.vertices.push(new c.default.Vector(ge,K,0)),this.uvs.push(ge,K)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",S)),!0),_=!1,S=void 0;try{for(var P,R=this.retainedMode.buffers.text[Symbol.iterator]();!(L=(P=R.next()).done);L=!0)P.value._prepareBuffer(D,F)}catch(K){_=!0,S=K}finally{try{L||R.return==null||R.return()}finally{if(_)throw S}}this._bindBuffer(D.indexBuffer,k.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var V=0,G=null,U=T.stringToGlyphs(w),H=!0,X=!1,fe=void 0;try{for(var $,M=U[Symbol.iterator]();!(H=($=M.next()).done);H=!0){var z,q,ee=$.value,ae=(G&&(V+=T.getKerningValue(G,ee)),I.getGlyphInfo(ee));ae.uGlyphRect&&(z=ae.rowInfo,q=ae.colInfo,F.setUniform("uSamplerStrokes",ae.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",z.cellImageInfo.imageData),F.setUniform("uSamplerRows",z.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",q.cellImageInfo.imageData),F.setUniform("uSamplerCols",q.dimImageInfo.imageData),F.setUniform("uGridOffset",ae.uGridOffset),F.setUniform("uGlyphRect",ae.uGlyphRect),F.setUniform("uGlyphOffset",V),F.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),V+=ee.advanceWidth,G=ee}}catch(K){X=!0,fe=K}finally{try{H||M.return==null||M.return()}finally{if(X)throw fe}}}finally{F.unbindShader(),this._doStroke=C,this.drawMode=E,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),v.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return v}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})});function $G(t,r){return x9t.call(t,r)}function zG(t){if(Array.isArray(t)){for(var r=new Array(t.length),n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);var o=[];for(var i in t)$G(t,i)&&o.push(i);return o}function Ol(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function UG(t){for(var r=0,n=t.length,o;r<n;){if(o=t.charCodeAt(r),o>=48&&o<=57){r++;continue}return!1}return!0}function V0(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function FP(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function BG(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(BG(t[r]))return!0}else if(typeof t=="object"){for(var o=zG(t),i=o.length,s=0;s<i;s++)if(BG(t[o[s]]))return!0}}return!1}function rGe(t,r){var n=[t];for(var o in r){var i=typeof r[o]=="object"?JSON.stringify(r[o],null,2):r[o];typeof i<"u"&&n.push(o+": "+i)}return n.join(`
`)}var b9t,x9t,OP,RP=N(()=>{"use strict";b9t=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])},t(r,n)};return function(r,n){t(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),x9t=Object.prototype.hasOwnProperty;OP=function(t){b9t(r,t);function r(n,o,i,s,a){var l=this.constructor,u=t.call(this,rGe(n,{name:o,index:i,operation:s,tree:a}))||this;return u.name=o,u.index=i,u.operation=s,u.tree=a,Object.setPrototypeOf(u,l.prototype),u.message=rGe(n,{name:o,index:i,operation:s,tree:a}),u}return r}(Error)});var ace={};fn(ace,{JsonPatchError:()=>ws,_areEquals:()=>PP,applyOperation:()=>bE,applyPatch:()=>WD,applyReducer:()=>_9t,deepClone:()=>v9t,getValueByPointer:()=>VG,validate:()=>nGe,validator:()=>GG});function VG(t,r){if(r=="")return t;var n={op:"_get",path:r};return bE(t,n),n.value}function bE(t,r,n,o,i,s){if(n===void 0&&(n=!1),o===void 0&&(o=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(r,0,t,r.path):GG(r,0)),r.path===""){var a={newDocument:t};if(r.op==="add")return a.newDocument=r.value,a;if(r.op==="replace")return a.newDocument=r.value,a.removed=t,a;if(r.op==="move"||r.op==="copy")return a.newDocument=VG(t,r.from),r.op==="move"&&(a.removed=t),a;if(r.op==="test"){if(a.test=PP(t,r.value),a.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a.newDocument=t,a}else{if(r.op==="remove")return a.removed=t,a.newDocument=null,a;if(r.op==="_get")return r.value=t,a;if(n)throw new ws("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,r,t);return a}}else{o||(t=Ol(t));var l=r.path||"",u=l.split("/"),c=t,f=1,d=u.length,p=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=GG;;){if(h=u[f],h&&h.indexOf("~")!=-1&&(h=FP(h)),i&&(h=="__proto__"||h=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[h]===void 0?p=u.slice(0,f).join("/"):f==d-1&&(p=r.path),p!==void 0&&m(r,0,t,p)),f++,Array.isArray(c)){if(h==="-")h=c.length;else{if(n&&!UG(h))throw new ws("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,r,t);UG(h)&&(h=~~h)}if(f>=d){if(n&&r.op==="add"&&h>c.length)throw new ws("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,r,t);var a=w9t[r.op].call(r,c,h,t);if(a.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}}else if(f>=d){var a=GD[r.op].call(r,c,h,t);if(a.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}if(c=c[h],n&&f<d&&(!c||typeof c!="object"))throw new ws("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,r,t)}}}function WD(t,r,n,o,i){if(o===void 0&&(o=!0),i===void 0&&(i=!0),n&&!Array.isArray(r))throw new ws("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(t=Ol(t));for(var s=new Array(r.length),a=0,l=r.length;a<l;a++)s[a]=bE(t,r[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function _9t(t,r,n){var o=bE(t,r);if(o.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",n,r,t);return o.newDocument}function GG(t,r,n,o){if(typeof t!="object"||t===null||Array.isArray(t))throw new ws("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,t,n);if(GD[t.op]){if(typeof t.path!="string")throw new ws("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new ws('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new ws("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new ws("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&BG(t.value))throw new ws("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=o.split("/").length;if(i!==s+1&&i!==s)throw new ws("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==o)throw new ws("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},l=nGe([a],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new ws("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,t,n)}}}else throw new ws("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,n)}function nGe(t,r,n){try{if(!Array.isArray(t))throw new ws("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)WD(Ol(r),Ol(t),n||!0);else{n=n||GG;for(var o=0;o<t.length;o++)n(t[o],o,r,void 0)}}catch(i){if(i instanceof ws)return i;throw i}}function PP(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=Array.isArray(t),o=Array.isArray(r),i,s,a;if(n&&o){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!PP(t[i],r[i]))return!1;return!0}if(n!=o)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!r.hasOwnProperty(l[i]))return!1;for(i=s;i--!==0;)if(a=l[i],!PP(t[a],r[a]))return!1;return!0}return t!==t&&r!==r}var ws,v9t,GD,w9t,WG=N(()=>{"use strict";RP();ws=OP,v9t=Ol,GD={add:function(t,r,n){return t[r]=this.value,{newDocument:n}},remove:function(t,r,n){var o=t[r];return delete t[r],{newDocument:n,removed:o}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:function(t,r,n){var o=VG(n,this.path);o&&(o=Ol(o));var i=bE(n,{op:"remove",path:this.from}).removed;return bE(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:o}},copy:function(t,r,n){var o=VG(n,this.from);return bE(n,{op:"add",path:this.path,value:Ol(o)}),{newDocument:n}},test:function(t,r,n){return{newDocument:n,test:PP(t[r],this.value)}},_get:function(t,r,n){return this.value=t[r],{newDocument:n}}},w9t={add:function(t,r,n){return UG(r)?t.splice(r,0,this.value):t[r]=this.value,{newDocument:n,index:r}},remove:function(t,r,n){var o=t.splice(r,1);return{newDocument:n,removed:o[0]}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:GD.move,copy:GD.copy,test:GD.test,_get:GD._get}});var fce={};fn(fce,{compare:()=>D9t,generate:()=>lce,observe:()=>I9t,unobserve:()=>k9t});function E9t(t){return uce.get(t)}function T9t(t,r){return t.observers.get(r)}function A9t(t,r){t.observers.delete(r.callback)}function k9t(t,r){r.unobserve()}function I9t(t,r){var n=[],o,i=E9t(t);if(!i)i=new S9t(t),uce.set(t,i);else{var s=T9t(i,r);o=s&&s.observer}if(o)return o;if(o={},i.value=Ol(t),r){o.callback=r,o.next=null;var a=function(){lce(o)},l=function(){clearTimeout(o.next),o.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return o.patches=n,o.object=t,o.unobserve=function(){lce(o),clearTimeout(o.next),A9t(i,o),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},i.observers.set(r,new C9t(r,o)),o}function lce(t,r){r===void 0&&(r=!1);var n=uce.get(t.object);cce(n.value,t.object,t.patches,"",r),t.patches.length&&WD(n.value,t.patches);var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function cce(t,r,n,o,i){if(r!==t){typeof r.toJSON=="function"&&(r=r.toJSON());for(var s=zG(r),a=zG(t),l=!1,u=!1,c=a.length-1;c>=0;c--){var f=a[c],d=t[f];if($G(r,f)&&!(r[f]===void 0&&d!==void 0&&Array.isArray(r)===!1)){var p=r[f];typeof d=="object"&&d!=null&&typeof p=="object"&&p!=null&&Array.isArray(d)===Array.isArray(p)?cce(d,p,n,o+"/"+V0(f),i):d!==p&&(l=!0,i&&n.push({op:"test",path:o+"/"+V0(f),value:Ol(d)}),n.push({op:"replace",path:o+"/"+V0(f),value:Ol(p)}))}else Array.isArray(t)===Array.isArray(r)?(i&&n.push({op:"test",path:o+"/"+V0(f),value:Ol(d)}),n.push({op:"remove",path:o+"/"+V0(f)}),u=!0):(i&&n.push({op:"test",path:o,value:t}),n.push({op:"replace",path:o,value:r}),l=!0)}if(!(!u&&s.length==a.length))for(var c=0;c<s.length;c++){var f=s[c];!$G(t,f)&&r[f]!==void 0&&n.push({op:"add",path:o+"/"+V0(f),value:Ol(r[f])})}}}function D9t(t,r,n){n===void 0&&(n=!1);var o=[];return cce(t,r,o,"",n),o}var uce,S9t,C9t,dce=N(()=>{"use strict";RP();WG();uce=new WeakMap,S9t=function(){function t(r){this.observers=new Map,this.obj=r}return t}(),C9t=function(){function t(r,n){this.callback=r,this.observer=n}return t}()});var a1o,oGe=N(()=>{"use strict";WG();dce();RP();WG();dce();RP();a1o=Object.assign({},ace,fce,{JsonPatchError:OP,deepClone:Ol,escapePathComponent:V0,unescapePathComponent:FP})});var sGe=mt((d1o,iGe)=>{"use strict";var N9t=/("(?:[^\\"]|\\.)*")|[:,]/g;iGe.exports=function(r,n){var o,i,s;return n=n||{},o=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=o===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function a(l,u,c){var f,d,p,h,m,g,y,b,x,v,w,_;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),w=JSON.stringify(l,s),w===void 0)return w;if(y=i-u.length-c,w.length<=y&&(x=w.replace(N9t,function(S,C){return C||S+" "}),x.length<=y))return x;if(s!=null&&(l=JSON.parse(w),s=void 0),typeof l=="object"&&l!==null){if(b=u+o,p=[],d=0,Array.isArray(l))for(v="[",f="]",y=l.length;d<y;d++)p.push(a(l[d],b,d===y-1?0:1)||"null");else for(v="{",f="}",g=Object.keys(l),y=g.length;d<y;d++)h=g[d],m=JSON.stringify(h)+": ",_=a(l[h],b,m.length+(d===y-1?0:1)),_!==void 0&&p.push(m+_);if(p.length>0)return[v,o+p.join(`,
`+b),f].join(`
`+u)}return w}(r,"",0)}});var LP=mt((p1o,aGe)=>{"use strict";var M9t="2.0.0",F9t=Number.MAX_SAFE_INTEGER||9007199254740991,O9t=16,R9t=250,P9t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];aGe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:O9t,MAX_SAFE_BUILD_LENGTH:R9t,MAX_SAFE_INTEGER:F9t,RELEASE_TYPES:P9t,SEMVER_SPEC_VERSION:M9t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var jP=mt((h1o,lGe)=>{"use strict";var L9t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};lGe.exports=L9t});var qD=mt((Hx,uGe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:pce,MAX_SAFE_BUILD_LENGTH:j9t,MAX_LENGTH:B9t}=LP(),$9t=jP();Hx=uGe.exports={};var z9t=Hx.re=[],U9t=Hx.safeRe=[],nr=Hx.src=[],or=Hx.t={},V9t=0,hce="[a-zA-Z0-9-]",G9t=[["\\s",1],["\\d",B9t],[hce,j9t]],W9t=t=>{for(let[r,n]of G9t)t=t.split(`${r}*`).join(`${r}{0,${n}}`).split(`${r}+`).join(`${r}{1,${n}}`);return t},gn=(t,r,n)=>{let o=W9t(r),i=V9t++;$9t(t,i,r),or[t]=i,nr[i]=r,z9t[i]=new RegExp(r,n?"g":void 0),U9t[i]=new RegExp(o,n?"g":void 0)};gn("NUMERICIDENTIFIER","0|[1-9]\\d*");gn("NUMERICIDENTIFIERLOOSE","\\d+");gn("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${hce}*`);gn("MAINVERSION",`(${nr[or.NUMERICIDENTIFIER]})\\.(${nr[or.NUMERICIDENTIFIER]})\\.(${nr[or.NUMERICIDENTIFIER]})`);gn("MAINVERSIONLOOSE",`(${nr[or.NUMERICIDENTIFIERLOOSE]})\\.(${nr[or.NUMERICIDENTIFIERLOOSE]})\\.(${nr[or.NUMERICIDENTIFIERLOOSE]})`);gn("PRERELEASEIDENTIFIER",`(?:${nr[or.NUMERICIDENTIFIER]}|${nr[or.NONNUMERICIDENTIFIER]})`);gn("PRERELEASEIDENTIFIERLOOSE",`(?:${nr[or.NUMERICIDENTIFIERLOOSE]}|${nr[or.NONNUMERICIDENTIFIER]})`);gn("PRERELEASE",`(?:-(${nr[or.PRERELEASEIDENTIFIER]}(?:\\.${nr[or.PRERELEASEIDENTIFIER]})*))`);gn("PRERELEASELOOSE",`(?:-?(${nr[or.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${nr[or.PRERELEASEIDENTIFIERLOOSE]})*))`);gn("BUILDIDENTIFIER",`${hce}+`);gn("BUILD",`(?:\\+(${nr[or.BUILDIDENTIFIER]}(?:\\.${nr[or.BUILDIDENTIFIER]})*))`);gn("FULLPLAIN",`v?${nr[or.MAINVERSION]}${nr[or.PRERELEASE]}?${nr[or.BUILD]}?`);gn("FULL",`^${nr[or.FULLPLAIN]}$`);gn("LOOSEPLAIN",`[v=\\s]*${nr[or.MAINVERSIONLOOSE]}${nr[or.PRERELEASELOOSE]}?${nr[or.BUILD]}?`);gn("LOOSE",`^${nr[or.LOOSEPLAIN]}$`);gn("GTLT","((?:<|>)?=?)");gn("XRANGEIDENTIFIERLOOSE",`${nr[or.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);gn("XRANGEIDENTIFIER",`${nr[or.NUMERICIDENTIFIER]}|x|X|\\*`);gn("XRANGEPLAIN",`[v=\\s]*(${nr[or.XRANGEIDENTIFIER]})(?:\\.(${nr[or.XRANGEIDENTIFIER]})(?:\\.(${nr[or.XRANGEIDENTIFIER]})(?:${nr[or.PRERELEASE]})?${nr[or.BUILD]}?)?)?`);gn("XRANGEPLAINLOOSE",`[v=\\s]*(${nr[or.XRANGEIDENTIFIERLOOSE]})(?:\\.(${nr[or.XRANGEIDENTIFIERLOOSE]})(?:\\.(${nr[or.XRANGEIDENTIFIERLOOSE]})(?:${nr[or.PRERELEASELOOSE]})?${nr[or.BUILD]}?)?)?`);gn("XRANGE",`^${nr[or.GTLT]}\\s*${nr[or.XRANGEPLAIN]}$`);gn("XRANGELOOSE",`^${nr[or.GTLT]}\\s*${nr[or.XRANGEPLAINLOOSE]}$`);gn("COERCEPLAIN",`(^|[^\\d])(\\d{1,${pce}})(?:\\.(\\d{1,${pce}}))?(?:\\.(\\d{1,${pce}}))?`);gn("COERCE",`${nr[or.COERCEPLAIN]}(?:$|[^\\d])`);gn("COERCEFULL",nr[or.COERCEPLAIN]+`(?:${nr[or.PRERELEASE]})?(?:${nr[or.BUILD]})?(?:$|[^\\d])`);gn("COERCERTL",nr[or.COERCE],!0);gn("COERCERTLFULL",nr[or.COERCEFULL],!0);gn("LONETILDE","(?:~>?)");gn("TILDETRIM",`(\\s*)${nr[or.LONETILDE]}\\s+`,!0);Hx.tildeTrimReplace="$1~";gn("TILDE",`^${nr[or.LONETILDE]}${nr[or.XRANGEPLAIN]}$`);gn("TILDELOOSE",`^${nr[or.LONETILDE]}${nr[or.XRANGEPLAINLOOSE]}$`);gn("LONECARET","(?:\\^)");gn("CARETTRIM",`(\\s*)${nr[or.LONECARET]}\\s+`,!0);Hx.caretTrimReplace="$1^";gn("CARET",`^${nr[or.LONECARET]}${nr[or.XRANGEPLAIN]}$`);gn("CARETLOOSE",`^${nr[or.LONECARET]}${nr[or.XRANGEPLAINLOOSE]}$`);gn("COMPARATORLOOSE",`^${nr[or.GTLT]}\\s*(${nr[or.LOOSEPLAIN]})$|^$`);gn("COMPARATOR",`^${nr[or.GTLT]}\\s*(${nr[or.FULLPLAIN]})$|^$`);gn("COMPARATORTRIM",`(\\s*)${nr[or.GTLT]}\\s*(${nr[or.LOOSEPLAIN]}|${nr[or.XRANGEPLAIN]})`,!0);Hx.comparatorTrimReplace="$1$2$3";gn("HYPHENRANGE",`^\\s*(${nr[or.XRANGEPLAIN]})\\s+-\\s+(${nr[or.XRANGEPLAIN]})\\s*$`);gn("HYPHENRANGELOOSE",`^\\s*(${nr[or.XRANGEPLAINLOOSE]})\\s+-\\s+(${nr[or.XRANGEPLAINLOOSE]})\\s*$`);gn("STAR","(<|>)?=?\\s*\\*");gn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");gn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var qG=mt((m1o,cGe)=>{"use strict";var q9t=Object.freeze({loose:!0}),H9t=Object.freeze({}),Y9t=t=>t?typeof t!="object"?q9t:t:H9t;cGe.exports=Y9t});var mce=mt((g1o,pGe)=>{"use strict";var fGe=/^[0-9]+$/,dGe=(t,r)=>{let n=fGe.test(t),o=fGe.test(r);return n&&o&&(t=+t,r=+r),t===r?0:n&&!o?-1:o&&!n?1:t<r?-1:1},X9t=(t,r)=>dGe(r,t);pGe.exports={compareIdentifiers:dGe,rcompareIdentifiers:X9t}});var mu=mt((y1o,yGe)=>{"use strict";var HG=jP(),{MAX_LENGTH:hGe,MAX_SAFE_INTEGER:YG}=LP(),{safeRe:mGe,t:gGe}=qD(),K9t=qG(),{compareIdentifiers:HD}=mce(),gce=class t{constructor(r,n){if(n=K9t(n),r instanceof t){if(r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>hGe)throw new TypeError(`version is longer than ${hGe} characters`);HG("SemVer",r,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let o=r.trim().match(n.loose?mGe[gGe.LOOSE]:mGe[gGe.FULL]);if(!o)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>YG||this.major<0)throw new TypeError("Invalid major version");if(this.minor>YG||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>YG||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<YG)return s}return i}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(HG("SemVer.compare",this.version,this.options,r),!(r instanceof t)){if(typeof r=="string"&&r===this.version)return 0;r=new t(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof t||(r=new t(r,this.options)),HD(this.major,r.major)||HD(this.minor,r.minor)||HD(this.patch,r.patch)}comparePre(r){if(r instanceof t||(r=new t(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let n=0;do{let o=this.prerelease[n],i=r.prerelease[n];if(HG("prerelease compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return HD(o,i)}while(++n)}compareBuild(r){r instanceof t||(r=new t(r,this.options));let n=0;do{let o=this.build[n],i=r.build[n];if(HG("build compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return HD(o,i)}while(++n)}inc(r,n,o){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(o)?1:0;if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];o===!1&&(s=[n]),HD(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};yGe.exports=gce});var xE=mt((b1o,xGe)=>{"use strict";var bGe=mu(),Z9t=(t,r,n=!1)=>{if(t instanceof bGe)return t;try{return new bGe(t,r)}catch(o){if(!n)return null;throw o}};xGe.exports=Z9t});var wGe=mt((x1o,vGe)=>{"use strict";var Q9t=xE(),J9t=(t,r)=>{let n=Q9t(t,r);return n?n.version:null};vGe.exports=J9t});var SGe=mt((v1o,_Ge)=>{"use strict";var eVt=xE(),tVt=(t,r)=>{let n=eVt(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null};_Ge.exports=tVt});var TGe=mt((w1o,EGe)=>{"use strict";var CGe=mu(),rVt=(t,r,n,o,i)=>{typeof n=="string"&&(i=o,o=n,n=void 0);try{return new CGe(t instanceof CGe?t.version:t,n).inc(r,o,i).version}catch{return null}};EGe.exports=rVt});var IGe=mt((_1o,kGe)=>{"use strict";var AGe=xE(),nVt=(t,r)=>{let n=AGe(t,null,!0),o=AGe(r,null,!0),i=n.compare(o);if(i===0)return null;let s=i>0,a=s?n:o,l=s?o:n,u=!!a.prerelease.length;if(!!l.prerelease.length&&!u)return!l.patch&&!l.minor?"major":a.patch?"patch":a.minor?"minor":"major";let f=u?"pre":"";return n.major!==o.major?f+"major":n.minor!==o.minor?f+"minor":n.patch!==o.patch?f+"patch":"prerelease"};kGe.exports=nVt});var NGe=mt((S1o,DGe)=>{"use strict";var oVt=mu(),iVt=(t,r)=>new oVt(t,r).major;DGe.exports=iVt});var FGe=mt((C1o,MGe)=>{"use strict";var sVt=mu(),aVt=(t,r)=>new sVt(t,r).minor;MGe.exports=aVt});var RGe=mt((E1o,OGe)=>{"use strict";var lVt=mu(),uVt=(t,r)=>new lVt(t,r).patch;OGe.exports=uVt});var LGe=mt((T1o,PGe)=>{"use strict";var cVt=xE(),fVt=(t,r)=>{let n=cVt(t,r);return n&&n.prerelease.length?n.prerelease:null};PGe.exports=fVt});var Cp=mt((A1o,BGe)=>{"use strict";var jGe=mu(),dVt=(t,r,n)=>new jGe(t,n).compare(new jGe(r,n));BGe.exports=dVt});var zGe=mt((k1o,$Ge)=>{"use strict";var pVt=Cp(),hVt=(t,r,n)=>pVt(r,t,n);$Ge.exports=hVt});var VGe=mt((I1o,UGe)=>{"use strict";var mVt=Cp(),gVt=(t,r)=>mVt(t,r,!0);UGe.exports=gVt});var XG=mt((D1o,WGe)=>{"use strict";var GGe=mu(),yVt=(t,r,n)=>{let o=new GGe(t,n),i=new GGe(r,n);return o.compare(i)||o.compareBuild(i)};WGe.exports=yVt});var HGe=mt((N1o,qGe)=>{"use strict";var bVt=XG(),xVt=(t,r)=>t.sort((n,o)=>bVt(n,o,r));qGe.exports=xVt});var XGe=mt((M1o,YGe)=>{"use strict";var vVt=XG(),wVt=(t,r)=>t.sort((n,o)=>vVt(o,n,r));YGe.exports=wVt});var BP=mt((F1o,KGe)=>{"use strict";var _Vt=Cp(),SVt=(t,r,n)=>_Vt(t,r,n)>0;KGe.exports=SVt});var KG=mt((O1o,ZGe)=>{"use strict";var CVt=Cp(),EVt=(t,r,n)=>CVt(t,r,n)<0;ZGe.exports=EVt});var yce=mt((R1o,QGe)=>{"use strict";var TVt=Cp(),AVt=(t,r,n)=>TVt(t,r,n)===0;QGe.exports=AVt});var bce=mt((P1o,JGe)=>{"use strict";var kVt=Cp(),IVt=(t,r,n)=>kVt(t,r,n)!==0;JGe.exports=IVt});var ZG=mt((L1o,eWe)=>{"use strict";var DVt=Cp(),NVt=(t,r,n)=>DVt(t,r,n)>=0;eWe.exports=NVt});var QG=mt((j1o,tWe)=>{"use strict";var MVt=Cp(),FVt=(t,r,n)=>MVt(t,r,n)<=0;tWe.exports=FVt});var xce=mt((B1o,rWe)=>{"use strict";var OVt=yce(),RVt=bce(),PVt=BP(),LVt=ZG(),jVt=KG(),BVt=QG(),$Vt=(t,r,n,o)=>{switch(r){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return OVt(t,n,o);case"!=":return RVt(t,n,o);case">":return PVt(t,n,o);case">=":return LVt(t,n,o);case"<":return jVt(t,n,o);case"<=":return BVt(t,n,o);default:throw new TypeError(`Invalid operator: ${r}`)}};rWe.exports=$Vt});var oWe=mt(($1o,nWe)=>{"use strict";var zVt=mu(),UVt=xE(),{safeRe:JG,t:eW}=qD(),VVt=(t,r)=>{if(t instanceof zVt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;r=r||{};let n=null;if(!r.rtl)n=t.match(r.includePrerelease?JG[eW.COERCEFULL]:JG[eW.COERCE]);else{let u=r.includePrerelease?JG[eW.COERCERTLFULL]:JG[eW.COERCERTL],c;for(;(c=u.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(n===null)return null;let o=n[2],i=n[3]||"0",s=n[4]||"0",a=r.includePrerelease&&n[5]?`-${n[5]}`:"",l=r.includePrerelease&&n[6]?`+${n[6]}`:"";return UVt(`${o}.${i}.${s}${a}${l}`,r)};nWe.exports=VVt});var sWe=mt((z1o,iWe)=>{"use strict";var vce=class{constructor(){this.max=1e3,this.map=new Map}get(r){let n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(r,n)}return this}};iWe.exports=vce});var Ep=mt((U1o,cWe)=>{"use strict";var wce=class t{constructor(r,n){if(n=WVt(n),r instanceof t)return r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease?r:new t(r.raw,n);if(r instanceof _ce)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(o=>this.parseRange(o.trim())).filter(o=>o.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let o=this.set[0];if(this.set=this.set.filter(i=>!lWe(i[0])),this.set.length===0)this.set=[o];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&QVt(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(r=>r.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(r){let o=((this.options.includePrerelease&&KVt)|(this.options.loose&&ZVt))+":"+r,i=aWe.get(o);if(i)return i;let s=this.options.loose,a=s?tf[ac.HYPHENRANGELOOSE]:tf[ac.HYPHENRANGE];r=r.replace(a,lGt(this.options.includePrerelease)),Fi("hyphen replace",r),r=r.replace(tf[ac.COMPARATORTRIM],HVt),Fi("comparator trim",r),r=r.replace(tf[ac.TILDETRIM],YVt),Fi("tilde trim",r),r=r.replace(tf[ac.CARETTRIM],XVt),Fi("caret trim",r);let l=r.split(" ").map(d=>JVt(d,this.options)).join(" ").split(/\s+/).map(d=>aGt(d,this.options));s&&(l=l.filter(d=>(Fi("loose invalid filter",d,this.options),!!d.match(tf[ac.COMPARATORLOOSE])))),Fi("range list",l);let u=new Map,c=l.map(d=>new _ce(d,this.options));for(let d of c){if(lWe(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return aWe.set(o,f),f}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Range is required");return this.set.some(o=>uWe(o,n)&&r.set.some(i=>uWe(i,n)&&o.every(s=>i.every(a=>s.intersects(a,n)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new qVt(r,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(uGt(this.set[n],r,this.options))return!0;return!1}};cWe.exports=wce;var GVt=sWe(),aWe=new GVt,WVt=qG(),_ce=$P(),Fi=jP(),qVt=mu(),{safeRe:tf,t:ac,comparatorTrimReplace:HVt,tildeTrimReplace:YVt,caretTrimReplace:XVt}=qD(),{FLAG_INCLUDE_PRERELEASE:KVt,FLAG_LOOSE:ZVt}=LP(),lWe=t=>t.value==="<0.0.0-0",QVt=t=>t.value==="",uWe=(t,r)=>{let n=!0,o=t.slice(),i=o.pop();for(;n&&o.length;)n=o.every(s=>i.intersects(s,r)),i=o.pop();return n},JVt=(t,r)=>(Fi("comp",t,r),t=rGt(t,r),Fi("caret",t),t=eGt(t,r),Fi("tildes",t),t=oGt(t,r),Fi("xrange",t),t=sGt(t,r),Fi("stars",t),t),lc=t=>!t||t.toLowerCase()==="x"||t==="*",eGt=(t,r)=>t.trim().split(/\s+/).map(n=>tGt(n,r)).join(" "),tGt=(t,r)=>{let n=r.loose?tf[ac.TILDELOOSE]:tf[ac.TILDE];return t.replace(n,(o,i,s,a,l)=>{Fi("tilde",t,o,i,s,a,l);let u;return lc(i)?u="":lc(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:lc(a)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:l?(Fi("replaceTilde pr",l),u=`>=${i}.${s}.${a}-${l} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,Fi("tilde return",u),u})},rGt=(t,r)=>t.trim().split(/\s+/).map(n=>nGt(n,r)).join(" "),nGt=(t,r)=>{Fi("caret",t,r);let n=r.loose?tf[ac.CARETLOOSE]:tf[ac.CARET],o=r.includePrerelease?"-0":"";return t.replace(n,(i,s,a,l,u)=>{Fi("caret",t,i,s,a,l,u);let c;return lc(s)?c="":lc(a)?c=`>=${s}.0.0${o} <${+s+1}.0.0-0`:lc(l)?s==="0"?c=`>=${s}.${a}.0${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.0${o} <${+s+1}.0.0-0`:u?(Fi("replaceCaret pr",u),s==="0"?a==="0"?c=`>=${s}.${a}.${l}-${u} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}-${u} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l}-${u} <${+s+1}.0.0-0`):(Fi("no pr"),s==="0"?a==="0"?c=`>=${s}.${a}.${l}${o} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l} <${+s+1}.0.0-0`),Fi("caret return",c),c})},oGt=(t,r)=>(Fi("replaceXRanges",t,r),t.split(/\s+/).map(n=>iGt(n,r)).join(" ")),iGt=(t,r)=>{t=t.trim();let n=r.loose?tf[ac.XRANGELOOSE]:tf[ac.XRANGE];return t.replace(n,(o,i,s,a,l,u)=>{Fi("xRange",t,o,i,s,a,l,u);let c=lc(s),f=c||lc(a),d=f||lc(l),p=d;return i==="="&&p&&(i=""),u=r.includePrerelease?"-0":"",c?i===">"||i==="<"?o="<0.0.0-0":o="*":i&&p?(f&&(a=0),l=0,i===">"?(i=">=",f?(s=+s+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",f?s=+s+1:a=+a+1),i==="<"&&(u="-0"),o=`${i+s}.${a}.${l}${u}`):f?o=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(o=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),Fi("xRange return",o),o})},sGt=(t,r)=>(Fi("replaceStars",t,r),t.trim().replace(tf[ac.STAR],"")),aGt=(t,r)=>(Fi("replaceGTE0",t,r),t.trim().replace(tf[r.includePrerelease?ac.GTE0PRE:ac.GTE0],"")),lGt=t=>(r,n,o,i,s,a,l,u,c,f,d,p)=>(lc(o)?n="":lc(i)?n=`>=${o}.0.0${t?"-0":""}`:lc(s)?n=`>=${o}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,lc(c)?u="":lc(f)?u=`<${+c+1}.0.0-0`:lc(d)?u=`<${c}.${+f+1}.0-0`:p?u=`<=${c}.${f}.${d}-${p}`:t?u=`<${c}.${f}.${+d+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),uGt=(t,r,n)=>{for(let o=0;o<t.length;o++)if(!t[o].test(r))return!1;if(r.prerelease.length&&!n.includePrerelease){for(let o=0;o<t.length;o++)if(Fi(t[o].semver),t[o].semver!==_ce.ANY&&t[o].semver.prerelease.length>0){let i=t[o].semver;if(i.major===r.major&&i.minor===r.minor&&i.patch===r.patch)return!0}return!1}return!0}});var $P=mt((V1o,gWe)=>{"use strict";var zP=Symbol("SemVer ANY"),Ece=class t{static get ANY(){return zP}constructor(r,n){if(n=fWe(n),r instanceof t){if(r.loose===!!n.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),Cce("comparator",r,n),this.options=n,this.loose=!!n.loose,this.parse(r),this.semver===zP?this.value="":this.value=this.operator+this.semver.version,Cce("comp",this)}parse(r){let n=this.options.loose?dWe[pWe.COMPARATORLOOSE]:dWe[pWe.COMPARATOR],o=r.match(n);if(!o)throw new TypeError(`Invalid comparator: ${r}`);this.operator=o[1]!==void 0?o[1]:"",this.operator==="="&&(this.operator=""),o[2]?this.semver=new hWe(o[2],this.options.loose):this.semver=zP}toString(){return this.value}test(r){if(Cce("Comparator.test",r,this.options.loose),this.semver===zP||r===zP)return!0;if(typeof r=="string")try{r=new hWe(r,this.options)}catch{return!1}return Sce(r,this.operator,this.semver,this.options)}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new mWe(r.value,n).test(this.value):r.operator===""?r.value===""?!0:new mWe(this.value,n).test(r.semver):(n=fWe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||Sce(this.semver,"<",r.semver,n)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||Sce(this.semver,">",r.semver,n)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};gWe.exports=Ece;var fWe=qG(),{safeRe:dWe,t:pWe}=qD(),Sce=xce(),Cce=jP(),hWe=mu(),mWe=Ep()});var UP=mt((G1o,yWe)=>{"use strict";var cGt=Ep(),fGt=(t,r,n)=>{try{r=new cGt(r,n)}catch{return!1}return r.test(t)};yWe.exports=fGt});var xWe=mt((W1o,bWe)=>{"use strict";var dGt=Ep(),pGt=(t,r)=>new dGt(t,r).set.map(n=>n.map(o=>o.value).join(" ").trim().split(" "));bWe.exports=pGt});var wWe=mt((q1o,vWe)=>{"use strict";var hGt=mu(),mGt=Ep(),gGt=(t,r,n)=>{let o=null,i=null,s=null;try{s=new mGt(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===-1)&&(o=a,i=new hGt(o,n))}),o};vWe.exports=gGt});var SWe=mt((H1o,_We)=>{"use strict";var yGt=mu(),bGt=Ep(),xGt=(t,r,n)=>{let o=null,i=null,s=null;try{s=new bGt(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===1)&&(o=a,i=new yGt(o,n))}),o};_We.exports=xGt});var TWe=mt((Y1o,EWe)=>{"use strict";var Tce=mu(),vGt=Ep(),CWe=BP(),wGt=(t,r)=>{t=new vGt(t,r);let n=new Tce("0.0.0");if(t.test(n)||(n=new Tce("0.0.0-0"),t.test(n)))return n;n=null;for(let o=0;o<t.set.length;++o){let i=t.set[o],s=null;i.forEach(a=>{let l=new Tce(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||CWe(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||CWe(n,s))&&(n=s)}return n&&t.test(n)?n:null};EWe.exports=wGt});var kWe=mt((X1o,AWe)=>{"use strict";var _Gt=Ep(),SGt=(t,r)=>{try{return new _Gt(t,r).range||"*"}catch{return null}};AWe.exports=SGt});var tW=mt((K1o,MWe)=>{"use strict";var CGt=mu(),NWe=$P(),{ANY:EGt}=NWe,TGt=Ep(),AGt=UP(),IWe=BP(),DWe=KG(),kGt=QG(),IGt=ZG(),DGt=(t,r,n,o)=>{t=new CGt(t,o),r=new TGt(r,o);let i,s,a,l,u;switch(n){case">":i=IWe,s=kGt,a=DWe,l=">",u=">=";break;case"<":i=DWe,s=IGt,a=IWe,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(AGt(t,r,o))return!1;for(let c=0;c<r.set.length;++c){let f=r.set[c],d=null,p=null;if(f.forEach(h=>{h.semver===EGt&&(h=new NWe(">=0.0.0")),d=d||h,p=p||h,i(h.semver,d.semver,o)?d=h:a(h.semver,p.semver,o)&&(p=h)}),d.operator===l||d.operator===u||(!p.operator||p.operator===l)&&s(t,p.semver))return!1;if(p.operator===u&&a(t,p.semver))return!1}return!0};MWe.exports=DGt});var OWe=mt((Z1o,FWe)=>{"use strict";var NGt=tW(),MGt=(t,r,n)=>NGt(t,r,">",n);FWe.exports=MGt});var PWe=mt((Q1o,RWe)=>{"use strict";var FGt=tW(),OGt=(t,r,n)=>FGt(t,r,"<",n);RWe.exports=OGt});var BWe=mt((J1o,jWe)=>{"use strict";var LWe=Ep(),RGt=(t,r,n)=>(t=new LWe(t,n),r=new LWe(r,n),t.intersects(r,n));jWe.exports=RGt});var zWe=mt((ewo,$We)=>{"use strict";var PGt=UP(),LGt=Cp();$We.exports=(t,r,n)=>{let o=[],i=null,s=null,a=t.sort((f,d)=>LGt(f,d,n));for(let f of a)PGt(f,r,n)?(s=f,i||(i=f)):(s&&o.push([i,s]),s=null,i=null);i&&o.push([i,null]);let l=[];for(let[f,d]of o)f===d?l.push(f):!d&&f===a[0]?l.push("*"):d?f===a[0]?l.push(`<=${d}`):l.push(`${f} - ${d}`):l.push(`>=${f}`);let u=l.join(" || "),c=typeof r.raw=="string"?r.raw:String(r);return u.length<c.length?u:r}});var HWe=mt((two,qWe)=>{"use strict";var UWe=Ep(),kce=$P(),{ANY:Ace}=kce,VP=UP(),Ice=Cp(),jGt=(t,r,n={})=>{if(t===r)return!0;t=new UWe(t,n),r=new UWe(r,n);let o=!1;e:for(let i of t.set){for(let s of r.set){let a=$Gt(i,s,n);if(o=o||a!==null,a)continue e}if(o)return!1}return!0},BGt=[new kce(">=0.0.0-0")],VWe=[new kce(">=0.0.0")],$Gt=(t,r,n)=>{if(t===r)return!0;if(t.length===1&&t[0].semver===Ace){if(r.length===1&&r[0].semver===Ace)return!0;n.includePrerelease?t=BGt:t=VWe}if(r.length===1&&r[0].semver===Ace){if(n.includePrerelease)return!0;r=VWe}let o=new Set,i,s;for(let h of t)h.operator===">"||h.operator===">="?i=GWe(i,h,n):h.operator==="<"||h.operator==="<="?s=WWe(s,h,n):o.add(h.semver);if(o.size>1)return null;let a;if(i&&s){if(a=Ice(i.semver,s.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let h of o){if(i&&!VP(h,String(i),n)||s&&!VP(h,String(s),n))return null;for(let m of r)if(!VP(h,String(m),n))return!1;return!0}let l,u,c,f,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let h of r){if(f=f||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",i){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator===">"||h.operator===">="){if(l=GWe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!VP(i.semver,String(h),n))return!1}if(s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(u=WWe(s,h,n),u===h&&u!==s)return!1}else if(s.operator==="<="&&!VP(s.semver,String(h),n))return!1}if(!h.operator&&(s||i)&&a!==0)return!1}return!(i&&c&&!s&&a!==0||s&&f&&!i&&a!==0||p||d)},GWe=(t,r,n)=>{if(!t)return r;let o=Ice(t.semver,r.semver,n);return o>0?t:o<0||r.operator===">"&&t.operator===">="?r:t},WWe=(t,r,n)=>{if(!t)return r;let o=Ice(t.semver,r.semver,n);return o<0?t:o>0||r.operator==="<"&&t.operator==="<="?r:t};qWe.exports=jGt});var ZWe=mt((rwo,KWe)=>{"use strict";var Dce=qD(),YWe=LP(),zGt=mu(),XWe=mce(),UGt=xE(),VGt=wGe(),GGt=SGe(),WGt=TGe(),qGt=IGe(),HGt=NGe(),YGt=FGe(),XGt=RGe(),KGt=LGe(),ZGt=Cp(),QGt=zGe(),JGt=VGe(),eWt=XG(),tWt=HGe(),rWt=XGe(),nWt=BP(),oWt=KG(),iWt=yce(),sWt=bce(),aWt=ZG(),lWt=QG(),uWt=xce(),cWt=oWe(),fWt=$P(),dWt=Ep(),pWt=UP(),hWt=xWe(),mWt=wWe(),gWt=SWe(),yWt=TWe(),bWt=kWe(),xWt=tW(),vWt=OWe(),wWt=PWe(),_Wt=BWe(),SWt=zWe(),CWt=HWe();KWe.exports={parse:UGt,valid:VGt,clean:GGt,inc:WGt,diff:qGt,major:HGt,minor:YGt,patch:XGt,prerelease:KGt,compare:ZGt,rcompare:QGt,compareLoose:JGt,compareBuild:eWt,sort:tWt,rsort:rWt,gt:nWt,lt:oWt,eq:iWt,neq:sWt,gte:aWt,lte:lWt,cmp:uWt,coerce:cWt,Comparator:fWt,Range:dWt,satisfies:pWt,toComparators:hWt,maxSatisfying:mWt,minSatisfying:gWt,minVersion:yWt,validRange:bWt,outside:xWt,gtr:vWt,ltr:wWt,intersects:_Wt,simplifyRange:SWt,subset:CWt,SemVer:zGt,re:Dce.re,src:Dce.src,tokens:Dce.t,SEMVER_SPEC_VERSION:YWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:YWe.RELEASE_TYPES,compareIdentifiers:XWe.compareIdentifiers,rcompareIdentifiers:XWe.rcompareIdentifiers}});function bd(t,r,n){return t.fields=r||[],t.fname=n,t}function Oi(t){return t==null?null:t.fname}function Aa(t){return t==null?null:t.fields}function JWe(t){return t.length===1?EWt(t[0]):TWt(t)}function pt(t){throw Error(t)}function WP(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||pt("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&pt("Access path missing closing bracket: "+t),o&&pt("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Xh(t,r,n){let o=WP(t);return t=o.length===1?o[0]:t,bd((n&&n.get||JWe)(o),[t],r||t)}function rW(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function kWt(t,r){let n=t||eqe;return{level(o){return arguments.length?(n=+o,this):n},error(){return n>=tqe&&rW(r||"error","ERROR",arguments),this},warn(){return n>=rqe&&rW(r||"warn","WARN",arguments),this},info(){return n>=nqe&&rW(r||"log","INFO",arguments),this},debug(){return n>=oqe&&rW(r||"log","DEBUG",arguments),this}}}function un(t){return t===Object(t)}function YD(...t){return t.reduce((r,n)=>{for(let o in n)if(o==="signals")r.signals=IWt(r.signals,n.signals);else{let i=o==="legend"?{layout:1}:o==="style"?!0:null;qP(r,o,n[o],i)}return r},{})}function qP(t,r,n,o){if(!QWe(r))return;let i,s;if(un(n)&&!Hr(n)){s=un(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?qP(s,i,n[i]):QWe(i)&&(s[i]=n[i])}else t[r]=n}function IWt(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}function Un(t){return t[t.length-1]}function Zh(t){return t==null||t===""?null:+t}function iW(t,r,n,o){let i=n(t[0]),s=n(Un(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function DWt(t,r){return iW(t,r,Zh,uc)}function NWt(t,r){var n=Math.sign(t[0]);return iW(t,r,sqe(n),iqe(n))}function MWt(t,r,n){return iW(t,r,oW(n),oW(1/n))}function FWt(t,r,n){return iW(t,r,aqe(n),lqe(n))}function sW(t,r,n,o,i){let s=o(t[0]),a=o(Un(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function Nce(t,r,n){return sW(t,r,n,Zh,uc)}function Mce(t,r,n){let o=Math.sign(t[0]);return sW(t,r,n,sqe(o),iqe(o))}function aW(t,r,n,o){return sW(t,r,n,oW(o),oW(1/o))}function Fce(t,r,n,o){return sW(t,r,n,aqe(o),lqe(o))}function OWt(t){return 1+~~(new Date(t).getMonth()/3)}function RWt(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Br(t){return t!=null?Hr(t)?t:[t]:[]}function PWt(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function Dn(t){return typeof t=="function"}function Oce(t,r,n){n=n||{},r=Br(r)||[];let o=[],i=[],s={},a=n.comparator||jWt;return Br(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===LWt?-1:1),i.push(l=Dn(l)?l:Xh(l,null,n)),(Aa(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:bd(a(i,o),Object.keys(s))}function Qa(t){return Dn(t)?t:()=>t}function Rce(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function an(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function Qh(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Pce(t,r){let n=t.length,o=-1,i,s,a,l,u;if(r==null){for(;++o<n;)if(s=t[o],s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=t[o],s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}else{for(;++o<n;)if(s=r(t[o],o,t),s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=r(t[o],o,t),s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}return[l,u]}function Pr(t,r){return zWt.call(t,r)}function Bw(t){let r={},n;function o(s){return Pr(r,s)&&r[s]!==nW}let i={size:0,empty:0,object:r,has:o,get(s){return o(s)?r[s]:void 0},set(s,a){return o(s)||(++i.size,r[s]===nW&&--i.empty),r[s]=a,this},delete(s){return o(s)&&(--i.size,++i.empty,r[s]=nW),this},clear(){i.size=i.empty=0,i.object=r={}},test(s){return arguments.length?(n=s,i):n},clean(){let s={},a=0;for(let l in r){let u=r[l];u!==nW&&(!n||!n(u))&&(s[l]=u,++a)}i.size=a,i.empty=0,i.object=r=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function UWt(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=Un(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function Dt(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),an(o,n)}function VWt(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function Lce(t){return typeof t=="boolean"}function YP(t){return Object.prototype.toString.call(t)==="[object Date]"}function jce(t){return t&&Dn(t[Symbol.iterator])}function q0(t){return typeof t=="number"}function GWt(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Jn(t){return typeof t=="string"}function Bce(t,r,n){t&&(t=r?Br(t).map(l=>l.replace(/\\(.)/g,"$1")):Br(t));let o=t&&t.length,i=n&&n.get||JWe,s=l=>i(r?[l]:WP(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return bd(a,t,"key")}function WWt(t,r){let n=t[0],o=Un(t),i=+r;return i?i===1?o:n+i*(o-n):n}function $ce(t){t=+t||qWt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>Pr(r,a)||Pr(n,a),get:a=>Pr(r,a)?r[a]:Pr(n,a)?s(a,n[a]):void 0,set:(a,l)=>Pr(r,a)?r[a]=l:s(a,l)}}function zce(t,r,n,o){let i=r.length,s=n.length;if(!s)return r;if(!i)return n;let a=o||new r.constructor(i+s),l=0,u=0,c=0;for(;l<i&&u<s;++c)a[c]=t(r[l],n[u])>0?n[u++]:r[l++];for(;l<i;++l,++c)a[c]=r[l];for(;u<s;++u,++c)a[c]=n[u];return a}function GP(t,r){let n="";for(;--r>=0;)n+=t;return n}function HWt(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?GP(i,a)+s:o==="center"?GP(i,~~(a/2))+s+GP(i,Math.ceil(a/2)):s+GP(i,a)}function vE(t){return t&&Un(t)-t[0]||0}function $r(t){return Hr(t)?"["+t.map($r)+"]":un(t)||Jn(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Uce(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function Vce(t,r){return r=r||YWt,t==null||t===""?null:r(t)}function Gce(t){return t==null||t===""?null:t+""}function gu(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function XWt(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}function KWt(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var EWt,TWt,AWt,uc,Kh,G0,W0,Yx,eqe,tqe,rqe,nqe,oqe,Hr,QWe,iqe,sqe,aqe,lqe,oW,LWt,HP,jWt,BWt,$Wt,zWt,nW,qWt,YWt,Ls=N(()=>{"use strict";EWt=t=>function(r){return r[t]},TWt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};AWt=Xh("id"),uc=bd(t=>t,[],"identity"),Kh=bd(()=>0,[],"zero"),G0=bd(()=>1,[],"one"),W0=bd(()=>!0,[],"true"),Yx=bd(()=>!1,[],"false");eqe=0,tqe=1,rqe=2,nqe=3,oqe=4;Hr=Array.isArray;QWe=t=>t!=="__proto__";iqe=t=>r=>t*Math.exp(r),sqe=t=>r=>Math.log(t*r),aqe=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),lqe=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,oW=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);LWt="descending";HP=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),jWt=(t,r)=>t.length===1?BWt(t[0],r[0]):$Wt(t,r,t.length),BWt=(t,r)=>function(n,o){return HP(t(n),t(o))*r},$Wt=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=HP(s(o),s(i));return a*r[l]});zWt=Object.prototype.hasOwnProperty;nW={};qWt=1e4;YWt=t=>q0(t)||YP(t)?t:Date.parse(t)});function XD(t,r,n){return t.fields=r||[],t.fname=n,t}function ZWt(t){return t.length===1?QWt(t[0]):JWt(t)}function ia(t){throw Error(t)}function eqt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||ia("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&ia("Access path missing closing bracket: "+t),o&&ia("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Wce(t,r,n){let o=eqt(t);return t=o.length===1?o[0]:t,XD((n&&n.get||ZWt)(o),[t],r||t)}function nqt(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function uqe(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nqt,o=t||oqt;return{level(i){return arguments.length?(o=+i,this):o},error(){return o>=qce&&n(r||"error","ERROR",arguments),this},warn(){return o>=iqt&&n(r||"warn","WARN",arguments),this},info(){return o>=sqt&&n(r||"log","INFO",arguments),this},debug(){return o>=aqt&&n(r||"log","DEBUG",arguments),this}}}function KP(t){return t===Object(t)}function Hce(t){return t==null||t===""?null:+t}function ZD(t){return t!=null?Tp(t)?t:[t]:[]}function xd(t){return typeof t=="function"}function ZP(t){return xd(t)?t:()=>t}function cqe(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function H0(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function QD(t,r){return lqt.call(t,r)}function Yce(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),H0(o,n)}function uqt(t){return Object.prototype.toString.call(t)==="[object Date]"}function fqe(t){return t&&xd(t[Symbol.iterator])}function cqt(t){return typeof t=="number"}function uW(t){return typeof t=="string"}function cW(t){return Tp(t)?"["+t.map(cW)+"]":KP(t)||uW(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function dqe(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function pqe(t,r){return r=r||fqt,t==null||t===""?null:r(t)}function hqe(t){return t==null||t===""?null:t+""}function $w(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var QWt,JWt,XP,KD,tqt,rqt,lW,owo,oqt,qce,iqt,sqt,aqt,Tp,lqt,fqt,QP=N(()=>{"use strict";QWt=t=>function(r){return r[t]},JWt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};XP=Wce("id"),KD=XD(t=>t,[],"identity"),tqt=XD(()=>0,[],"zero"),rqt=XD(()=>1,[],"one"),lW=XD(()=>!0,[],"true"),owo=XD(()=>!1,[],"false");oqt=0,qce=1,iqt=2,sqt=3,aqt=4;Tp=Array.isArray;lqt=Object.prototype.hasOwnProperty;fqt=t=>cqt(t)||uqt(t)?t:Date.parse(t)});function yqe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function dqt(t,r){var n=yqe(t);return function(o,i){return r(n(o),i,t)}}function gqe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function rf(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function pqt(t){return t<0?"-"+rf(-t,6):t>9999?"+"+rf(t,6):rf(t,4)}function hqt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":pqt(t.getUTCFullYear(),4)+"-"+rf(t.getUTCMonth()+1,2)+"-"+rf(t.getUTCDate(),2)+(i?"T"+rf(r,2)+":"+rf(n,2)+":"+rf(o,2)+"."+rf(i,3)+"Z":o?"T"+rf(r,2)+":"+rf(n,2)+":"+rf(o,2)+"Z":n||r?"T"+rf(r,2)+":"+rf(n,2)+"Z":"")}function Qce(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?dqt(y,p):yqe(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===JP&&--m,d.charCodeAt(m-1)===Zce&&--m;function w(){if(x)return Xce;if(v)return v=!1,mqe;var S,C=g,E;if(d.charCodeAt(C)===Kce){for(;g++<m&&d.charCodeAt(g)!==Kce||d.charCodeAt(++g)===Kce;);return(S=g)>=m?x=!0:(E=d.charCodeAt(g++))===JP?v=!0:E===Zce&&(v=!0,d.charCodeAt(g)===JP&&++g),d.slice(C+1,S-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(S=g++))===JP)v=!0;else if(E===Zce)v=!0,d.charCodeAt(g)===JP&&++g;else if(E!==n)continue;return d.slice(C,S)}return x=!0,d.slice(C,m)}for(;(b=w())!==Xce;){for(var _=[];b!==mqe&&b!==Xce;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=gqe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=gqe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?hqt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var mqe,Xce,Kce,JP,Zce,bqe=N(()=>{"use strict";mqe={},Xce={},Kce=34,JP=10,Zce=13});var xqe=N(()=>{"use strict";bqe()});function Jce(t){return t}var efe=N(()=>{"use strict"});function fW(t){if(t==null)return Jce;var r,n,o=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(l,u){u||(r=n=0);var c=2,f=l.length,d=new Array(f);for(d[0]=(r+=l[0])*o+s,d[1]=(n+=l[1])*i+a;c<f;)d[c]=l[c],++c;return d}}var dW=N(()=>{"use strict";efe()});var tfe=N(()=>{"use strict";dW()});function vqe(t,r){for(var n,o=t.length,i=o-r;i<--o;)n=t[i],t[i++]=t[o],t[o]=n}var wqe=N(()=>{"use strict"});function wE(t,r){return typeof r=="string"&&(r=t.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(n){return _qe(t,n)})}:_qe(t,r)}function _qe(t,r){var n=r.id,o=r.bbox,i=r.properties==null?{}:r.properties,s=pW(t,r);return n==null&&o==null?{type:"Feature",properties:i,geometry:s}:o==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:o,properties:i,geometry:s}}function pW(t,r){var n=fW(t.transform),o=t.arcs;function i(f,d){d.length&&d.pop();for(var p=o[f<0?~f:f],h=0,m=p.length;h<m;++h)d.push(n(p[h],h));f<0&&vqe(d,m)}function s(f){return n(f)}function a(f){for(var d=[],p=0,h=f.length;p<h;++p)i(f[p],d);return d.length<2&&d.push(d[0]),d}function l(f){for(var d=a(f);d.length<4;)d.push(d[0]);return d}function u(f){return f.map(l)}function c(f){var d=f.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:f.geometries.map(c)};case"Point":p=s(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(s);break;case"LineString":p=a(f.arcs);break;case"MultiLineString":p=f.arcs.map(a);break;case"Polygon":p=u(f.arcs);break;case"MultiPolygon":p=f.arcs.map(u);break;default:return null}return{type:d,coordinates:p}}return c(r)}var hW=N(()=>{"use strict";wqe();dW()});function rfe(t,r){var n={},o={},i={},s=[],a=-1;r.forEach(function(c,f){var d=t.arcs[c<0?~c:c],p;d.length<3&&!d[1][0]&&!d[1][1]&&(p=r[++a],r[a]=c,r[f]=p)}),r.forEach(function(c){var f=l(c),d=f[0],p=f[1],h,m;if(h=i[d])if(delete i[h.end],h.push(c),h.end=p,m=o[p]){delete o[m.start];var g=m===h?h:h.concat(m);o[g.start=h.start]=i[g.end=m.end]=g}else o[h.start]=i[h.end]=h;else if(h=o[p])if(delete o[h.start],h.unshift(c),h.start=d,m=i[d]){delete i[m.end];var y=m===h?h:m.concat(h);o[y.start=m.start]=i[y.end=h.end]=y}else o[h.start]=i[h.end]=h;else h=[c],o[h.start=d]=i[h.end=p]=h});function l(c){var f=t.arcs[c<0?~c:c],d=f[0],p;return t.transform?(p=[0,0],f.forEach(function(h){p[0]+=h[0],p[1]+=h[1]})):p=f[f.length-1],c<0?[p,d]:[d,p]}function u(c,f){for(var d in c){var p=c[d];delete f[p.start],delete p.start,delete p.end,p.forEach(function(h){n[h<0?~h:h]=1}),s.push(p)}}return u(i,o),u(o,i),r.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}var nfe=N(()=>{"use strict"});function _E(t){return pW(t,Sqe.apply(this,arguments))}function Sqe(t,r,n){var o,i,s;if(arguments.length>1)o=mqt(t,r,n);else for(i=0,o=new Array(s=t.arcs.length);i<s;++i)o[i]=i;return{type:"MultiLineString",arcs:rfe(t,o)}}function mqt(t,r,n){var o=[],i=[],s;function a(d){var p=d<0?~d:d;(i[p]||(i[p]=[])).push({i:d,g:s})}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){d.forEach(u)}function f(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(f);break;case"LineString":l(d.arcs);break;case"MultiLineString":case"Polygon":u(d.arcs);break;case"MultiPolygon":c(d.arcs);break}}return f(r),i.forEach(n==null?function(d){o.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&o.push(d[0].i)}),o}var Cqe=N(()=>{"use strict";hW();nfe()});var Eqe=N(()=>{"use strict";hW();nfe()});var Tqe=N(()=>{"use strict"});var Aqe=N(()=>{"use strict";Tqe()});var ofe=N(()=>{"use strict";efe()});var kqe=N(()=>{"use strict";tfe();ofe()});var mW=N(()=>{"use strict";tfe();hW();Cqe();Eqe();Aqe();kqe();dW();ofe()});function ife({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):n}function Iqe({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):(t.set(o,n),n)}function Dqe({_intern:t,_key:r},n){let o=r(n);return t.has(o)&&(n=t.get(n),t.delete(o)),n}function Nqe(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Y0,X0,eL=N(()=>{"use strict";Y0=class extends Map{constructor(r,n=Nqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let[o,i]of r)this.set(o,i)}get(r){return super.get(ife(this,r))}has(r){return super.has(ife(this,r))}set(r,n){return super.set(Iqe(this,r),n)}delete(r){return super.delete(Dqe(this,r))}},X0=class extends Set{constructor(r,n=Nqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let o of r)this.add(o)}has(r){return super.has(ife(this,r))}add(r){return super.add(Iqe(this,r))}delete(r){return super.delete(Dqe(this,r))}}});function Mqe(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=bqt?10:s>=xqt?5:s>=vqt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?Mqe(t,r,n*2):[l,u,c]}function sfe(t,r,n){return r=+r,t=+t,n=+n,Mqe(t,r,n)[2]}function afe(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?sfe(r,t,n):sfe(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var bqt,xqt,vqt,Fqe=N(()=>{"use strict";bqt=Math.sqrt(50),xqt=Math.sqrt(10),vqt=Math.sqrt(2)});var Oqe=N(()=>{"use strict";Fqe()});function Rqe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function SE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var tL=N(()=>{"use strict"});function K0(t){return t=SE(Math.abs(t)),t?t[1]:NaN}var rL=N(()=>{"use strict";tL()});function Pqe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var Lqe=N(()=>{"use strict"});function jqe(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var Bqe=N(()=>{"use strict"});function Xx(t){if(!(r=wqt.exec(t)))throw new Error("invalid format: "+t);var r;return new gW({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function gW(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var wqt,lfe=N(()=>{"use strict";wqt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Xx.prototype=gW.prototype;gW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function $qe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var zqe=N(()=>{"use strict"});function Uqe(t,r){var n=SE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(ufe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+SE(t,Math.max(0,r+s-1))[0]}var ufe,cfe=N(()=>{"use strict";tL()});function ffe(t,r){var n=SE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var Vqe=N(()=>{"use strict";tL()});var dfe,Gqe=N(()=>{"use strict";tL();cfe();Vqe();dfe={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Rqe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>ffe(t*100,r),r:ffe,s:Uqe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function pfe(t){return t}var Wqe=N(()=>{"use strict"});function nL(t){var r=t.grouping===void 0||t.thousands===void 0?pfe:Pqe(qqe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?pfe:jqe(qqe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Xx(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):dfe[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=g==="$"?o:/[%p]/.test(_)?a:"",E=dfe[_],T=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(k){var F=S,D=C,L,P,R;if(_==="c")D=E(k)+D,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=$qe(k)),V&&+k==0&&m!=="+"&&(V=!1),F=(V?m==="("?m:l:m==="-"||m==="("?"":m)+F,D=(_==="s"?Hqe[8+ufe/3]:"")+D+(V&&m==="("?")":""),T){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){D=(R===46?i+k.slice(L+1):k.slice(L))+D,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=F.length+k.length+D.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-D.length:1/0),U=""),h){case"<":k=F+k+D+U;break;case"=":k=F+U+k+D;break;case"^":k=U.slice(0,G=U.length>>1)+F+k+D+U.slice(G);break;default:k=U+F+k+D;break}return s(k)}return I.toString=function(){return d+""},I}function f(d,p){var h=c((d=Xx(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(K0(p)/3)))*3,g=Math.pow(10,-m),y=Hqe[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var qqe,Hqe,hfe=N(()=>{"use strict";rL();Lqe();Bqe();lfe();zqe();Gqe();cfe();Wqe();qqe=Array.prototype.map,Hqe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function mfe(t){return yW=nL(t),bW=yW.format,xW=yW.formatPrefix,yW}var yW,bW,xW,Yqe=N(()=>{"use strict";hfe();mfe({thousands:",",grouping:[3],currency:["$",""]})});function gfe(t){return Math.max(0,-K0(Math.abs(t)))}var Xqe=N(()=>{"use strict";rL()});function yfe(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(K0(r)/3)))*3-K0(Math.abs(t)))}var Kqe=N(()=>{"use strict";rL()});function bfe(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,K0(r)-K0(t))+1}var Zqe=N(()=>{"use strict";rL()});var Qqe=N(()=>{"use strict";Yqe();hfe();lfe();Xqe();Kqe();Zqe()});function ui(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>ui(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(xfe.setTime(+s),vfe.setTime(+a),t(xfe),t(vfe),Math.floor(n(xfe,vfe))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var xfe,vfe,Kx=N(()=>{"use strict";xfe=new Date,vfe=new Date});var Zx,Jqe,eHe=N(()=>{"use strict";Kx();Zx=ui(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Zx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ui(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Zx);Jqe=Zx.range});var CE,tHe,rHe=N(()=>{"use strict";Kx();CE=ui(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),tHe=CE.range});var vW,_qt,wW,Sqt,nHe=N(()=>{"use strict";Kx();vW=ui(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),_qt=vW.range,wW=ui(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),Sqt=wW.range});var _W,Cqt,SW,Eqt,oHe=N(()=>{"use strict";Kx();_W=ui(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),Cqt=_W.range,SW=ui(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),Eqt=SW.range});var Z0,Tqt,Q0,Aqt,iHe,kqt,sHe=N(()=>{"use strict";Kx();Z0=ui(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Tqt=Z0.range,Q0=ui(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),Aqt=Q0.range,iHe=ui(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),kqt=iHe.range});function EE(t){return ui(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function TE(t){return ui(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var zw,eN,aHe,lHe,Uw,uHe,cHe,fHe,Dqt,Nqt,Mqt,Fqt,Oqt,Rqt,Vw,tN,dHe,pHe,Gw,hHe,mHe,gHe,Pqt,Lqt,jqt,Bqt,$qt,zqt,yHe=N(()=>{"use strict";Kx();zw=EE(0),eN=EE(1),aHe=EE(2),lHe=EE(3),Uw=EE(4),uHe=EE(5),cHe=EE(6),fHe=zw.range,Dqt=eN.range,Nqt=aHe.range,Mqt=lHe.range,Fqt=Uw.range,Oqt=uHe.range,Rqt=cHe.range;Vw=TE(0),tN=TE(1),dHe=TE(2),pHe=TE(3),Gw=TE(4),hHe=TE(5),mHe=TE(6),gHe=Vw.range,Pqt=tN.range,Lqt=dHe.range,jqt=pHe.range,Bqt=Gw.range,$qt=hHe.range,zqt=mHe.range});var oL,Uqt,iL,Vqt,bHe=N(()=>{"use strict";Kx();oL=ui(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),Uqt=oL.range,iL=ui(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),Vqt=iL.range});var Jh,Gqt,em,Wqt,xHe=N(()=>{"use strict";Kx();Jh=ui(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Jh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ui(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});Gqt=Jh.range,em=ui(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());em.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ui(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});Wqt=em.range});var Cfe=N(()=>{"use strict";eHe();rHe();nHe();oHe();sHe();yHe();bHe();xHe()});function Afe(t){return AE.setFullYear(t),AE.setMonth(0),AE.setDate(1),AE.setHours(0,0,0,0),AE}function Hqt(t){return Z0.count(Afe(t.getFullYear())-1,t)}function vHe(t){return zw.count(Afe(t.getFullYear())-1,t)}function Efe(t){return Afe(t).getDay()}function Yqt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Q0.count(r-1,t)}function wHe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Vw.count(r-1,t)}function Tfe(t){return AE.setTime(Date.UTC(t,0,1)),AE.getUTCDay()}function rN(t,r,n){return r+t*7-(n+6)%7}function CHe(t){return Xqt[t]}function EHe(t){return Kqt[t]}var cc,om,vd,nf,tm,J0,nN,rm,nm,ey,Qx,qqt,m2o,g2o,AE,y2o,b2o,x2o,v2o,Xqt,Kqt,sL,aL,lL,CW,Zqt,_He,Qqt,Jqt,uL,cL,fL,eHt,tHt,SHe,rHt,w2o,THe=N(()=>{"use strict";QP();Cfe();cc="year",om="quarter",vd="month",nf="week",tm="date",J0="day",nN="dayofyear",rm="hours",nm="minutes",ey="seconds",Qx="milliseconds",qqt=[cc,om,vd,nf,tm,J0,nN,rm,nm,ey,Qx],m2o=qqt.reduce((t,r,n)=>(t[r]=1+n,t),{}),g2o={[cc]:"%Y ",[om]:"Q%q ",[vd]:"%b ",[tm]:"%d ",[nf]:"W%U ",[J0]:"%a ",[nN]:"%j ",[rm]:"%H:00",[nm]:"00:%M",[ey]:":%S",[Qx]:".%L",[`${cc}-${vd}`]:"%Y-%m ",[`${cc}-${vd}-${tm}`]:"%Y-%m-%d ",[`${rm}-${nm}`]:"%H:%M"},AE=new Date;y2o={[cc]:t=>t.getFullYear(),[om]:t=>Math.floor(t.getMonth()/3),[vd]:t=>t.getMonth(),[tm]:t=>t.getDate(),[rm]:t=>t.getHours(),[nm]:t=>t.getMinutes(),[ey]:t=>t.getSeconds(),[Qx]:t=>t.getMilliseconds(),[nN]:t=>Hqt(t),[nf]:t=>vHe(t),[nf+J0]:(t,r)=>rN(vHe(t),t.getDay(),Efe(r)),[J0]:(t,r)=>rN(1,t.getDay(),Efe(r))},b2o={[om]:t=>3*t,[nf]:(t,r)=>rN(t,0,Efe(r))},x2o={[cc]:t=>t.getUTCFullYear(),[om]:t=>Math.floor(t.getUTCMonth()/3),[vd]:t=>t.getUTCMonth(),[tm]:t=>t.getUTCDate(),[rm]:t=>t.getUTCHours(),[nm]:t=>t.getUTCMinutes(),[ey]:t=>t.getUTCSeconds(),[Qx]:t=>t.getUTCMilliseconds(),[nN]:t=>Yqt(t),[nf]:t=>wHe(t),[J0]:(t,r)=>rN(1,t.getUTCDay(),Tfe(r)),[nf+J0]:(t,r)=>rN(wHe(t),t.getUTCDay(),Tfe(r))},v2o={[om]:t=>3*t,[nf]:(t,r)=>rN(t,0,Tfe(r))},Xqt={[cc]:Jh,[om]:oL.every(3),[vd]:oL,[nf]:zw,[tm]:Z0,[J0]:Z0,[nN]:Z0,[rm]:_W,[nm]:vW,[ey]:CE,[Qx]:Zx},Kqt={[cc]:em,[om]:iL.every(3),[vd]:iL,[nf]:Vw,[tm]:Q0,[J0]:Q0,[nN]:Q0,[rm]:SW,[nm]:wW,[ey]:CE,[Qx]:Zx};sL=1e3,aL=sL*60,lL=aL*60,CW=lL*24,Zqt=CW*7,_He=CW*30,Qqt=CW*365,Jqt=[cc,vd,tm,rm,nm,ey,Qx],uL=Jqt.slice(0,-1),cL=uL.slice(0,-1),fL=cL.slice(0,-1),eHt=fL.slice(0,-1),tHt=[cc,nf],SHe=[cc,vd],rHt=[cc],w2o=[[uL,1,sL],[uL,5,5*sL],[uL,15,15*sL],[uL,30,30*sL],[cL,1,aL],[cL,5,5*aL],[cL,15,15*aL],[cL,30,30*aL],[fL,1,lL],[fL,3,3*lL],[fL,6,6*lL],[fL,12,12*lL],[eHt,1,CW],[tHt,1,Zqt],[SHe,1,_He],[SHe,3,3*_He],[rHt,1,Qqt]]});function kfe(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ife(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dL(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function oN(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=pL(i),f=hL(i),d=pL(s),p=hL(s),h=pL(a),m=hL(a),g=pL(l),y=hL(l),b=pL(u),x=hL(u),v={a:V,A:G,b:U,B:H,c:null,d:MHe,e:MHe,f:EHt,g:RHt,G:LHt,H:_Ht,I:SHt,j:CHt,L:LHe,m:THt,M:AHt,p:X,q:fe,Q:RHe,s:PHe,S:kHt,u:IHt,U:DHt,V:NHt,w:MHt,W:FHt,x:null,X:null,y:OHt,Y:PHt,Z:jHt,"%":OHe},w={a:$,A:M,b:z,B:q,c:null,d:FHe,e:FHe,f:UHt,g:QHt,G:eYt,H:BHt,I:$Ht,j:zHt,L:BHe,m:VHt,M:GHt,p:ee,q:ae,Q:RHe,s:PHe,S:WHt,u:qHt,U:HHt,V:YHt,w:XHt,W:KHt,x:null,X:null,y:ZHt,Y:JHt,Z:tYt,"%":OHe},_={a:I,A:k,b:F,B:D,c:L,d:DHe,e:DHe,f:bHt,g:IHe,G:kHe,H:NHe,I:NHe,j:hHt,L:yHt,m:pHt,M:mHt,p:T,q:dHt,Q:vHt,s:wHt,S:gHt,u:aHt,U:lHt,V:uHt,w:sHt,W:cHt,x:P,X:R,y:IHe,Y:kHe,Z:fHt,"%":xHt};v.x=S(n,v),v.X=S(o,v),v.c=S(r,v),w.x=S(n,w),w.X=S(o,w),w.c=S(r,w);function S(Q,le){return function(ie){var K=[],ge=-1,ne=0,ye=Q.length,xe,De,Te;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(K.push(Q.slice(ne,ge)),(De=AHe[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):De=xe==="e"?" ":"0",(Te=le[xe])&&(xe=Te(ie,De)),K.push(xe),ne=ge+1);return K.push(Q.slice(ne,ge)),K.join("")}}function C(Q,le){return function(ie){var K=dL(1900,void 0,1),ge=E(K,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ne=Ife(dL(K.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?tN.ceil(ne):tN(ne),ne=Q0.offset(ne,(K.V-1)*7),K.y=ne.getUTCFullYear(),K.m=ne.getUTCMonth(),K.d=ne.getUTCDate()+(K.w+6)%7):(ne=kfe(dL(K.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?eN.ceil(ne):eN(ne),ne=Z0.offset(ne,(K.V-1)*7),K.y=ne.getFullYear(),K.m=ne.getMonth(),K.d=ne.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),ye="Z"in K?Ife(dL(K.y,0,1)).getUTCDay():kfe(dL(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(ye+5)%7:K.w+K.U*7-(ye+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Ife(K)):kfe(K)}}function E(Q,le,ie,K){for(var ge=0,ne=le.length,ye=ie.length,xe,De;ge<ne;){if(K>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),De=_[xe in AHe?le.charAt(ge++):xe],!De||(K=De(Q,ie,K))<0)return-1}else if(xe!=ie.charCodeAt(K++))return-1}return K}function T(Q,le,ie){var K=c.exec(le.slice(ie));return K?(Q.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function I(Q,le,ie){var K=h.exec(le.slice(ie));return K?(Q.w=m.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(Q,le,ie){var K=d.exec(le.slice(ie));return K?(Q.w=p.get(K[0].toLowerCase()),ie+K[0].length):-1}function F(Q,le,ie){var K=b.exec(le.slice(ie));return K?(Q.m=x.get(K[0].toLowerCase()),ie+K[0].length):-1}function D(Q,le,ie){var K=g.exec(le.slice(ie));return K?(Q.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function fe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function M(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=S(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=C(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=S(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=C(Q+="",!0);return le.toString=function(){return Q},le}}}function lo(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function iHt(t){return t.replace(oHt,"\\$&")}function pL(t){return new RegExp("^(?:"+t.map(iHt).join("|")+")","i")}function hL(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function sHt(t,r,n){var o=Ja.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function aHt(t,r,n){var o=Ja.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function lHt(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function uHt(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function cHt(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function kHe(t,r,n){var o=Ja.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function IHe(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function fHt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function dHt(t,r,n){var o=Ja.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function pHt(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function DHe(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function hHt(t,r,n){var o=Ja.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function NHe(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function mHt(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function gHt(t,r,n){var o=Ja.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function yHt(t,r,n){var o=Ja.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function bHt(t,r,n){var o=Ja.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function xHt(t,r,n){var o=nHt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function vHt(t,r,n){var o=Ja.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function wHt(t,r,n){var o=Ja.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function MHe(t,r){return lo(t.getDate(),r,2)}function _Ht(t,r){return lo(t.getHours(),r,2)}function SHt(t,r){return lo(t.getHours()%12||12,r,2)}function CHt(t,r){return lo(1+Z0.count(Jh(t),t),r,3)}function LHe(t,r){return lo(t.getMilliseconds(),r,3)}function EHt(t,r){return LHe(t,r)+"000"}function THt(t,r){return lo(t.getMonth()+1,r,2)}function AHt(t,r){return lo(t.getMinutes(),r,2)}function kHt(t,r){return lo(t.getSeconds(),r,2)}function IHt(t){var r=t.getDay();return r===0?7:r}function DHt(t,r){return lo(zw.count(Jh(t)-1,t),r,2)}function jHe(t){var r=t.getDay();return r>=4||r===0?Uw(t):Uw.ceil(t)}function NHt(t,r){return t=jHe(t),lo(Uw.count(Jh(t),t)+(Jh(t).getDay()===4),r,2)}function MHt(t){return t.getDay()}function FHt(t,r){return lo(eN.count(Jh(t)-1,t),r,2)}function OHt(t,r){return lo(t.getFullYear()%100,r,2)}function RHt(t,r){return t=jHe(t),lo(t.getFullYear()%100,r,2)}function PHt(t,r){return lo(t.getFullYear()%1e4,r,4)}function LHt(t,r){var n=t.getDay();return t=n>=4||n===0?Uw(t):Uw.ceil(t),lo(t.getFullYear()%1e4,r,4)}function jHt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+lo(r/60|0,"0",2)+lo(r%60,"0",2)}function FHe(t,r){return lo(t.getUTCDate(),r,2)}function BHt(t,r){return lo(t.getUTCHours(),r,2)}function $Ht(t,r){return lo(t.getUTCHours()%12||12,r,2)}function zHt(t,r){return lo(1+Q0.count(em(t),t),r,3)}function BHe(t,r){return lo(t.getUTCMilliseconds(),r,3)}function UHt(t,r){return BHe(t,r)+"000"}function VHt(t,r){return lo(t.getUTCMonth()+1,r,2)}function GHt(t,r){return lo(t.getUTCMinutes(),r,2)}function WHt(t,r){return lo(t.getUTCSeconds(),r,2)}function qHt(t){var r=t.getUTCDay();return r===0?7:r}function HHt(t,r){return lo(Vw.count(em(t)-1,t),r,2)}function $He(t){var r=t.getUTCDay();return r>=4||r===0?Gw(t):Gw.ceil(t)}function YHt(t,r){return t=$He(t),lo(Gw.count(em(t),t)+(em(t).getUTCDay()===4),r,2)}function XHt(t){return t.getUTCDay()}function KHt(t,r){return lo(tN.count(em(t)-1,t),r,2)}function ZHt(t,r){return lo(t.getUTCFullYear()%100,r,2)}function QHt(t,r){return t=$He(t),lo(t.getUTCFullYear()%100,r,2)}function JHt(t,r){return lo(t.getUTCFullYear()%1e4,r,4)}function eYt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Gw(t):Gw.ceil(t),lo(t.getUTCFullYear()%1e4,r,4)}function tYt(){return"+0000"}function OHe(){return"%"}function RHe(t){return+t}function PHe(t){return Math.floor(+t/1e3)}var AHe,Ja,nHt,oHt,Dfe=N(()=>{"use strict";Cfe();AHe={"-":"",_:" ",0:"0"},Ja=/^\s*\d+/,nHt=/^%/,oHt=/[\\^$*+?|[\]().{}]/g});function Nfe(t){return iN=oN(t),EW=iN.format,TW=iN.parse,AW=iN.utcFormat,kW=iN.utcParse,iN}var iN,EW,TW,AW,kW,zHe=N(()=>{"use strict";Dfe();Nfe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var UHe=N(()=>{"use strict";zHe();Dfe()});function mL(t){let r={};return n=>r[n]||(r[n]=t(n))}function rYt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=nYt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function nYt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function qHe(t){let r=mL(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Xx(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return rYt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Xx(a??",f");let l=afe(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=yfe(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=bfe(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=gfe(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function oYt(){return Mfe=qHe({format:bW,formatPrefix:xW})}function iYt(t){return qHe(nL(t))}function VHe(t){return arguments.length?Mfe=iYt(t):Mfe}function GHe(t,r,n){n=n||{},KP(n)||ia(`Invalid time multi-format specifier: ${n}`);let o=r(ey),i=r(nm),s=r(rm),a=r(tm),l=r(nf),u=r(vd),c=r(om),f=r(cc),d=t(n[Qx]||".%L"),p=t(n[ey]||":%S"),h=t(n[nm]||"%I:%M"),m=t(n[rm]||"%I %p"),g=t(n[tm]||n[J0]||"%a %d"),y=t(n[nf]||"%b %d"),b=t(n[vd]||"%B"),x=t(n[om]||"%B"),v=t(n[cc]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function HHe(t){let r=mL(t.format),n=mL(t.utcFormat);return{timeFormat:o=>uW(o)?r(o):GHe(r,CHe,o),utcFormat:o=>uW(o)?n(o):GHe(n,EHe,o),timeParse:mL(t.parse),utcParse:mL(t.utcParse)}}function sYt(){return Ffe=HHe({format:EW,parse:TW,utcFormat:AW,utcParse:kW})}function aYt(t){return HHe(oN(t))}function IW(t){return arguments.length?Ffe=aYt(t):Ffe}function YHe(t,r){let n=arguments.length;return n&&n!==2&&ia("defaultLocale expects either zero or two arguments."),n?WHe(VHe(t),IW(r)):WHe(VHe(),IW())}var Mfe,Ffe,WHe,Ofe=N(()=>{"use strict";Oqe();Qqe();THe();QP();UHe();oYt();sYt();WHe=(t,r)=>H0({},t,r)});function fYt(t,r){return n=>({options:n||{},sanitize:pYt,load:dYt,fileAccess:!!r,file:hYt(r),http:gYt(t)})}function dYt(t,r){return je(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function pYt(t,r){return je(this,null,function*(){r=H0({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=uYt.test(t.replace(cYt,""));(t==null||typeof t!="string"||!l)&&ia("Sanitize failure, invalid URI: "+cW(t));let u=lYt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(XHe))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(XHe.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function hYt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):mYt}function mYt(){return je(this,null,function*(){ia("No file system access.")})}function gYt(t){return t?function(r,n){return je(this,null,function*(){let o=H0({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?xd(s[i])?s[i]():s.text():ia(s.status+""+s.statusText)})}:yYt}function yYt(){return je(this,null,function*(){ia("No HTTP fetch method available.")})}function SYt(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=DW.length,i=DW.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&bYt(u)&&!DW[l](u)&&(i[l]=0,++a,a===DW.length))return"string";return _Yt[i.reduce((s,a)=>s===0?a:s,0)-1]}function CYt(t,r){return r.reduce((n,o)=>(n[o]=SYt(t,o),n),{})}function ZHe(t){let r=function(n,o){let i={delimiter:t};return Pfe(n,o?H0(o,i):i)};return r.responseType="text",r}function Pfe(t,r){return r.header&&(t=r.header.map(cW).join(r.delimiter)+`
`+t),Qce(r.delimiter).parse(t+"")}function EYt(t){return typeof Buffer=="function"&&xd(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Lfe(t,r){let n=r&&r.property?Wce(r.property):KD;return KP(t)&&!EYt(t)?TYt(n(t),r):n(JSON.parse(t))}function TYt(t,r){return!Tp(t)&&fqe(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function JHe(t,r){let n,o,i,s;return t=Lfe(t,r),r&&r.feature?(n=wE,i=r.feature):r&&r.mesh?(n=_E,i=r.mesh,s=AYt[r.filter]):ia("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):ia("Invalid TopoJSON object: "+i),o&&o.features||[o]}function eYe(t,r){return arguments.length>1?(Rfe[t]=r,this):QD(Rfe,t)?Rfe[t]:null}function tYe(t){let r=eYe(t);return r&&r.responseType||"text"}function rYe(t,r,n,o){r=r||{};let i=eYe(r.type||"json");return i||ia("Unknown data format type: "+r.type),t=i(t,r),r.parse&&kYt(t,r.parse,n,o),QD(t,"columns")&&delete t.columns,t}function kYt(t,r,n,o){if(!t.length)return;let i=IW();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=CYt(t,s)),s=Object.keys(r);let p=s.map(h=>{let m=r[h],g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!KHe[m])throw Error("Illegal format pattern: "+h+":"+m);return KHe[m]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var lYt,uYt,cYt,XHe,bYt,xYt,vYt,QHe,wYt,KHe,DW,_Yt,AYt,Rfe,nYe,oYe=N(()=>{"use strict";QP();xqe();mW();Ofe();lYt=/^(data:|([A-Za-z]+:)?\/\/)/,uYt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,cYt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,XHe="file://";bYt=t=>t!=null&&t===t,xYt=t=>t==="true"||t==="false"||t===!0||t===!1,vYt=t=>!Number.isNaN(Date.parse(t)),QHe=t=>!Number.isNaN(+t)&&!(t instanceof Date),wYt=t=>QHe(t)&&Number.isInteger(+t),KHe={boolean:dqe,integer:Hce,number:Hce,date:pqe,string:hqe,unknown:KD},DW=[xYt,wYt,QHe,vYt],_Yt=["boolean","integer","number","date"];Pfe.responseType="text";Lfe.responseType="json";AYt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};JHe.responseType="json";Rfe={dsv:Pfe,csv:ZHe(","),tsv:ZHe("	"),json:Lfe,topojson:JHe};nYe=fYt(typeof fetch<"u"&&fetch,null)});function OW(t){let r=t||KD,n=[],o={};return n.add=i=>{let s=r(i);return o[s]||(o[s]=1,n.push(i)),n},n.remove=i=>{let s=r(i);if(o[s]){o[s]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function bL(t,r){return je(this,null,function*(){try{yield r(t)}catch(n){t.error(n)}})}function kE(t){return!!(t&&_r(t))}function _r(t){return t[fYe]}function dYe(t,r){return t[fYe]=r,t}function Nn(t){let r=t===Object(t)?t:{data:t};return _r(r)?r:dYe(r,IYt++)}function RW(t){return IE(t,Nn({}))}function IE(t,r){for(let n in t)r[n]=t[n];return r}function PW(t,r){return dYe(r,_r(t))}function ry(t,r){return t?r?(n,o)=>t(n,o)||_r(r(n))-_r(r(o)):(n,o)=>t(n,o)||_r(n)-_r(o):null}function Bfe(t){return t&&t.constructor===rv}function rv(){let t=[],r=[],n=[],o=[],i=[],s=null,a=!1;return{constructor:rv,insert(l){let u=ZD(l),c=u.length;for(let f=0;f<c;++f)t.push(u[f]);return this},remove(l){let u=xd(l)?o:r,c=ZD(l),f=c.length;for(let d=0;d<f;++d)u.push(c[d]);return this},modify(l,u,c){let f={field:u,value:ZP(c)};return xd(l)?(f.filter=l,i.push(f)):(f.tuple=l,n.push(f)),this},encode(l,u){return xd(l)?i.push({filter:l,field:u}):n.push({tuple:l,field:u}),this},clean(l){return s=l,this},reflow(){return a=!0,this},pulse(l,u){let c={},f={},d,p,h,m,g,y;for(d=0,p=u.length;d<p;++d)c[_r(u[d])]=1;for(d=0,p=r.length;d<p;++d)g=r[d],c[_r(g)]=-1;for(d=0,p=o.length;d<p;++d)m=o[d],u.forEach(x=>{m(x)&&(c[_r(x)]=-1)});for(d=0,p=t.length;d<p;++d)g=t[d],y=_r(g),c[y]?c[y]=1:l.add.push(Nn(t[d]));for(d=0,p=u.length;d<p;++d)g=u[d],c[_r(g)]<0&&l.rem.push(g);function b(x,v,w){w?x[v]=w(x):l.encode=v,a||(f[_r(x)]=x)}for(d=0,p=n.length;d<p;++d)h=n[d],g=h.tuple,m=h.field,y=c[_r(g)],y>0&&(b(g,m,h.value),l.modifies(m));for(d=0,p=i.length;d<p;++d)h=i[d],m=h.filter,u.forEach(x=>{m(x)&&c[_r(x)]>0&&b(x,h.field,h.value)}),l.modifies(h.field);if(a)l.mod=r.length||o.length?u.filter(x=>c[_r(x)]>0):u.slice();else for(y in f)l.mod.push(f[y]);return(s||s==null&&(r.length||o.length))&&l.clean(!0),l}}}function xL(){Object.defineProperty(this,MW,{writable:!0,value:{}})}function Fo(t,r,n,o){this.id=++DYt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,r&&(this._update=r),n&&this.parameters(n,o)}function iYe(t){return function(r){let n=this.flags;return arguments.length===0?!!(n&t):(this.flags=r?n|t:n&~t,this)}}function RYt(t,r,n,o){let i=1,s;return t instanceof Fo?s=t:t&&t.prototype instanceof Fo?s=new t:xd(t)?s=new Fo(null,t):(i=0,s=new Fo(t,r)),this.rank(s),i&&(o=n,n=r),n&&this.connect(s,s.parameters(n,o)),this.touch(s),s}function PYt(t,r){let n=t.rank,o=r.length;for(let i=0;i<o;++i)if(n<r[i].rank){this.rerank(t);return}}function aN(t,r,n){this.id=++LYt,this.value=null,n&&(this.receive=n),t&&(this._filter=t),r&&(this._apply=r)}function Ww(t,r,n){return new aN(t,r,n)}function jYt(t,r,n,o){let i=this,s=Ww(n,o),a=function(c){c.dataflow=i;try{s.receive(c)}catch(f){i.error(f)}finally{i.run()}},l;typeof t=="string"&&typeof document<"u"?l=document.querySelectorAll(t):l=ZD(t);let u=l.length;for(let c=0;c<u;++c)l[c].addEventListener(r,a);return s}function BYt(t,r){let n=this.locale();return rYe(t,r,n.timeParse,n.utcParse)}function $Yt(t,r,n){return r=this.parse(r,n),this.pulse(t,this.changeset().insert(r))}function zYt(t,r){return je(this,null,function*(){let n=this,o=0,i;try{i=yield n.loader().load(t,{context:"dataflow",response:tYe(r&&r.type)});try{i=n.parse(i,r)}catch(s){o=-2,n.warn("Data ingestion failed",t,s)}}catch(s){o=-1,n.warn("Loading failed",t,s)}return{data:i,status:o}})}function UYt(t,r,n){return je(this,null,function*(){let o=this,i=o._pending||VYt(o);i.requests+=1;let s=yield o.request(r,n);return o.pulse(t,o.changeset().remove(lW).insert(s.data||[])),i.done(),s})}function VYt(t){let r,n=new Promise(o=>r=o);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,r(t))},t._pending=n}function WYt(t,r,n,o,i){return(t instanceof Fo?HYt:qYt)(this,t,r,n,o,i),this}function qYt(t,r,n,o,i,s){let a=H0({},s,GYt),l,u;xd(n)||(n=ZP(n)),o===void 0?l=c=>t.touch(n(c)):xd(o)?(u=new Fo(null,o,i,!1),l=c=>{u.evaluate(c);let f=n(c),d=u.value;Bfe(d)?t.pulse(f,d,s):t.update(f,d,a)}):l=c=>t.update(n(c),o,a),r.apply(l)}function HYt(t,r,n,o,i,s){if(o===void 0)r.targets().add(n);else{let a=s||{},l=new Fo(null,YYt(n,o),i,!1);l.modified(a.force),l.rank=r.rank,r.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),t.connect(n,[l]))}}function YYt(t,r){return r=xd(r)?r:ZP(r),t?function(n,o){let i=r(n,o);return t.skip()||(t.skip(i!==this.value).value=i),i}:r}function XYt(t){t.rank=++this._rank}function KYt(t){let r=[t],n,o,i;for(;r.length;)if(this.rank(n=r.pop()),o=n._targets)for(i=o.length;--i>=0;)r.push(n=o[i]),n===t&&ia("Cycle detected in dataflow graph.")}function ev(t,r,n){this.dataflow=t,this.stamp=r??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function jfe(t,r){let n=[];return $w(t,r,o=>n.push(o)),n}function cYe(t,r){let n={};return t.visit(r,o=>{n[_r(o)]=1}),o=>n[_r(o)]?null:o}function NW(t,r){return t?(n,o)=>t(n,o)&&r(n,o):r}function LW(t,r,n,o){let i=this,s=0;this.dataflow=t,this.stamp=r,this.fields=null,this.encode=o||null,this.pulses=n;for(let a of n)if(a.stamp===r){if(a.fields){let l=i.fields||(i.fields={});for(let u in a.fields)l[u]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}function QYt(t,r,n){return je(this,null,function*(){let o=this,i=[];if(o._pulse)return pYe(o);if(o._pending&&(yield o._pending),r&&(yield bL(o,r)),!o._touched.length)return o.debug("Dataflow invoked, but nothing to do."),o;let s=++o._clock;o._pulse=new ev(o,s,t),o._touched.forEach(f=>o._enqueue(f,!0)),o._touched=OW(XP);let a=0,l,u,c;try{for(;o._heap.size()>0;){if(l=o._heap.pop(),l.rank!==l.qrank){o._enqueue(l,!0);continue}u=l.run(o._getPulse(l,t)),u.then?u=yield u:u.async&&(i.push(u.async),u=FW),u!==FW&&l._targets&&l._targets.forEach(f=>o._enqueue(f)),++a}}catch(f){o._heap.clear(),c=f}if(o._input={},o._pulse=null,o.debug(`Pulse ${s}: ${a} operators`),c&&(o._postrun=[],o.error(c)),o._postrun.length){let f=o._postrun.sort((d,p)=>p.priority-d.priority);o._postrun=[];for(let d=0;d<f.length;++d)yield bL(o,f[d].callback)}return n&&(yield bL(o,n)),i.length&&Promise.all(i).then(f=>o.runAsync(null,()=>{f.forEach(d=>{try{d(o)}catch(p){o.error(p)}})})),o})}function JYt(t,r,n){return je(this,null,function*(){for(;this._running;)yield this._running;let o=()=>this._running=null;return(this._running=this.evaluate(t,r,n)).then(o,o),this._running})}function eXt(t,r,n){return this._pulse?pYe(this):(this.evaluate(t,r,n),this)}function tXt(t,r,n){if(this._pulse||r)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(o){this.error(o)}}function pYe(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function rXt(t,r){let n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||r)&&(t.qrank=t.rank,this._heap.push(t))}function nXt(t,r){let n=t.source,o=this._clock;return n&&Tp(n)?new LW(this,o,n.map(i=>i.pulse),r):this._input[t.id]||oXt(this._pulse,n&&n.pulse)}function oXt(t,r){return r&&r.stamp===t.stamp?r:(t=t.fork(),r&&r!==FW&&(t.source=r.source),t)}function iXt(t,r){let n=r||$fe;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function sXt(t,r,n){let o=n||$fe;return(t.set(r)||o.force)&&this.touch(t,o),this}function aXt(t,r,n){this.touch(t,n||$fe);let o=new ev(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return o.target=t,this._input[t.id]=r.pulse(o,i),this}function lXt(t){let r=[];return{clear:()=>r=[],size:()=>r.length,peek:()=>r[0],push:n=>(r.push(n),hYe(r,0,r.length-1,t)),pop:()=>{let n=r.pop(),o;return r.length?(o=r[0],r[0]=n,uXt(r,0,t)):o=n,o}}}function hYe(t,r,n,o){let i,s,a=t[n];for(;n>r;){if(s=n-1>>1,i=t[s],o(a,i)<0){t[n]=i,n=s;continue}break}return t[n]=a}function uXt(t,r,n){let o=r,i=t.length,s=t[r],a=(r<<1)+1,l;for(;a<i;)l=a+1,l<i&&n(t[a],t[l])>=0&&(a=l),t[r]=t[a],r=a,a=(r<<1)+1;return t[r]=s,hYe(t,o,r,n)}function Hw(){this.logger(uqe()),this.logLevel(qce),this._clock=0,this._rank=0,this._locale=YHe();try{this._loader=nYe()}catch{}this._touched=OW(XP),this._input={},this._pulse=null,this._heap=lXt((t,r)=>t.qrank-r.qrank),this._postrun=[]}function yL(t){return function(){return this._log[t].apply(this,arguments)}}function et(t,r){Fo.call(this,t,null,r)}function jW(t){let r=zfe(t);return r&&r.Definition||null}function zfe(t){return t=t&&t.toLowerCase(),QD(tv,t)?tv[t]:null}var fYe,IYt,MW,DYt,NYt,MYt,FYt,OYt,LYt,GYt,FW,ty,qw,Jx,ZYt,sYe,sN,aYe,gL,lYe,uYe,$fe,tv,el=N(()=>{"use strict";QP();oYe();Ofe();fYe=Symbol("vega_id"),IYt=1;MW="_:mod:_";xL.prototype={set(t,r,n,o){let i=this,s=i[t],a=i[MW];return r!=null&&r>=0?(s[r]!==n||o)&&(s[r]=n,a[r+":"+t]=-1,a[t]=-1):(s!==n||o)&&(i[t]=n,a[t]=Tp(n)?1+n.length:-1),i},modified(t,r){let n=this[MW];if(arguments.length){if(Tp(t)){for(let o=0;o<t.length;++o)if(n[t[o]])return!0;return!1}}else{for(let o in n)if(n[o])return!0;return!1}return r!=null&&r>=0?r+1<n[t]||!!n[r+":"+t]:!!n[t]},clear(){return this[MW]={},this}};DYt=0,NYt="pulse",MYt=new xL,FYt=1,OYt=2;Fo.prototype={targets(){return this._targets||(this._targets=OW(XP))},set(t){return this.value!==t?(this.value=t,1):0},skip:iYe(FYt),modified:iYe(OYt),parameters(t,r,n){r=r!==!1;let o=this._argval=this._argval||new xL,i=this._argops=this._argops||[],s=[],a,l,u,c,f=(d,p,h)=>{h instanceof Fo?(h!==this&&(r&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:p})):o.set(d,p,h)};for(a in t)if(l=t[a],a===NYt)ZD(l).forEach(d=>{d instanceof Fo?d!==this&&(d.targets().add(this),s.push(d)):ia("Pulse parameters must be operator instances.")}),this.source=l;else if(Tp(l))for(o.set(a,-1,Array(u=l.length)),c=0;c<u;++c)f(a,c,l[c]);else f(a,-1,l);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(t){let r=this._argval||MYt,n=this._argops,o,i,s,a;if(n){let l=n.length;for(i=0;i<l;++i)o=n[i],s=o.op,a=s.modified()&&s.stamp===t,r.set(o.name,o.index,s.value,a);if(n.initonly){for(i=0;i<l;++i)o=n[i],o.op.targets().remove(this);this._argops=null,this._update=null}}return r},detach(){let t=this._argops,r,n,o,i;if(t)for(r=0,n=t.length;r<n;++r)o=t[r],i=o.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let r=this._update;if(r){let n=this.marshall(t.stamp),o=r.call(this,n,t);if(n.clear(),o!==this.value)this.value=o;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?(this.skip(!1),r=0):r=this.evaluate(t),this.pulse=r||t}};LYt=0;aN.prototype={_filter:lW,_apply:KD,targets(){return this._targets||(this._targets=OW(XP))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let r=this.value=this._apply(t),n=this._targets,o=n?n.length:0;for(let i=0;i<o;++i)n[i].receive(r);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let r=Ww(t);return this.targets().add(r),r},apply(t){let r=Ww(null,t);return this.targets().add(r),r},merge(){let t=Ww();this.targets().add(t);for(let r=0,n=arguments.length;r<n;++r)arguments[r].targets().add(t);return t},throttle(t){let r=-1;return this.filter(()=>{let n=Date.now();return n-r>t?(r=n,1):0})},debounce(t){let r=Ww();return this.targets().add(Ww(null,null,cqe(t,n=>{let o=n.dataflow;r.receive(n),o&&o.run&&o.run()}))),r},between(t,r){let n=!1;return t.targets().add(Ww(null,null,()=>n=!0)),r.targets().add(Ww(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=lW,this._targets=null}};GYt={skip:!0};FW={},ty=1,qw=2,Jx=4,ZYt=ty|qw,sYe=ty|Jx,sN=ty|qw|Jx,aYe=8,gL=16,lYe=32,uYe=64;ev.prototype={StopPropagation:FW,ADD:ty,REM:qw,MOD:Jx,ADD_REM:ZYt,ADD_MOD:sYe,ALL:sN,REFLOW:aYe,SOURCE:gL,NO_SOURCE:lYe,NO_FIELDS:uYe,fork(t){return new ev(this.dataflow).init(this,t)},clone(){let t=this.fork(sN);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(sN|gL)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new ev(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,r){let n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(r&uYe)&&(n.fields=t.fields),r&ty?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),r&qw?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),r&Jx?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),r&lYe?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){let r=t||sN;return r&ty&&this.add.length||r&qw&&this.rem.length||r&Jx&&this.mod.length},reflow(t){if(t)return this.fork(sN).reflow();let r=this.add.length,n=this.source&&this.source.length;return n&&n!==r&&(this.mod=this.source,r&&this.filter(Jx,cYe(this,ty))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let r=this.fields||(this.fields={});return Tp(t)?t.forEach(n=>r[n]=!0):r[t]=!0,this},modified(t,r){let n=this.fields;return(r||this.mod.length)&&n?arguments.length?Tp(t)?t.some(o=>n[o]):n[t]:!!n:!1},filter(t,r){let n=this;return t&ty&&(n.addF=NW(n.addF,r)),t&qw&&(n.remF=NW(n.remF,r)),t&Jx&&(n.modF=NW(n.modF,r)),t&gL&&(n.srcF=NW(n.srcF,r)),n},materialize(t){t=t||sN;let r=this;return t&ty&&r.addF&&(r.add=jfe(r.add,r.addF),r.addF=null),t&qw&&r.remF&&(r.rem=jfe(r.rem,r.remF),r.remF=null),t&Jx&&r.modF&&(r.mod=jfe(r.mod,r.modF),r.modF=null),t&gL&&r.srcF&&(r.source=r.source.filter(r.srcF),r.srcF=null),r},visit(t,r){let n=this,o=r;if(t&gL)return $w(n.source,n.srcF,o),n;t&ty&&$w(n.add,n.addF,o),t&qw&&$w(n.rem,n.remF,o),t&Jx&&$w(n.mod,n.modF,o);let i=n.source;if(t&aYe&&i){let s=n.add.length+n.mod.length;s===i.length||(s?$w(i,cYe(n,sYe),o):$w(i,n.srcF,o))}return n}};Yce(LW,ev,{fork(t){let r=new ev(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&r.ADD&&this.visit(r.ADD,n=>r.add.push(n)),t&r.REM&&this.visit(r.REM,n=>r.rem.push(n)),t&r.MOD&&this.visit(r.MOD,n=>r.mod.push(n))),r},changed(t){return this.changes&t},modified(t){let r=this,n=r.fields;return n&&r.changes&r.MOD?Tp(t)?t.some(o=>n[o]):n[t]:0},filter(){ia("MultiPulse does not support filtering.")},materialize(){ia("MultiPulse does not support materialization.")},visit(t,r){let n=this,o=n.pulses,i=o.length,s=0;if(t&n.SOURCE)for(;s<i;++s)o[s].visit(t,r);else for(;s<i;++s)o[s].stamp===n.stamp&&o[s].visit(t,r);return n}});$fe={skip:!1,force:!1};Hw.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:yL("error"),warn:yL("warn"),info:yL("info"),debug:yL("debug"),logLevel:yL("level"),cleanThreshold:1e4,add:RYt,connect:PYt,rank:XYt,rerank:KYt,pulse:aXt,touch:iXt,update:sXt,changeset:rv,ingest:$Yt,parse:BYt,preload:UYt,request:zYt,events:jYt,on:WYt,evaluate:QYt,run:eXt,runAsync:JYt,runAfter:tXt,_enqueue:rXt,_getPulse:nXt};Yce(et,Fo,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?this.skip(!1):r=this.evaluate(t),r=r||t,r.then?r=r.then(n=>this.pulse=n):r!==t.StopPropagation&&(this.pulse=r),r},evaluate(t){let r=this.marshall(t.stamp),n=this.transform(r,t);return r.clear(),n},transform(){}});tv={}});function Ap(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var vL=N(()=>{"use strict"});function ny(t){let r=t,n=t;t.length===1&&(r=(a,l)=>t(a)-l,n=cXt(t));function o(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}return u}function i(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)>0?c=f:u=f+1}return u}function s(a,l,u,c){u==null&&(u=0),c==null&&(c=a.length);let f=o(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:o,center:s,right:i}}function cXt(t){return(r,n)=>Ap(t(r),n)}var Ufe=N(()=>{"use strict";vL()});function BW(t){return t===null?NaN:+t}function*mYe(t,r){if(r===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(o=+o)>=o&&(yield o)}}var Vfe=N(()=>{"use strict"});var gYe,DE,Gfe,fXt,im,yYe=N(()=>{"use strict";vL();Ufe();Vfe();gYe=ny(Ap),DE=gYe.right,Gfe=gYe.left,fXt=ny(BW).center,im=DE});function Wfe(t,r){let n=0,o,i=0,s=0;if(r===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(o=a-i,i+=o/++n,s+=o*(a-i));else{let a=-1;for(let l of t)(l=r(l,++a,t))!=null&&(l=+l)>=l&&(o=l-i,i+=o/++n,s+=o*(l-i))}if(n>1)return s/(n-1)}var bYe=N(()=>{"use strict"});function $W(t,r){let n=Wfe(t,r);return n&&Math.sqrt(n)}var xYe=N(()=>{"use strict";bYe()});var qi,vYe=N(()=>{"use strict";qi=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(r){let n=this._partials,o=0;for(let i=0;i<this._n&&i<32;i++){let s=n[i],a=r+s,l=Math.abs(r)<Math.abs(s)?r-(a-s):s-(a-r);l&&(n[o++]=l),r=a}return n[o]=r,this._n=o+1,this}valueOf(){let r=this._partials,n=this._n,o,i,s,a=0;if(n>0){for(a=r[--n];n>0&&(o=a,i=r[--n],a=o+i,s=i-(a-o),!s););n>0&&(s<0&&r[n-1]<0||s>0&&r[n-1]>0)&&(i=s*2,o=a+i,i==o-a&&(a=o))}return a}}});function qfe(t,r){return Array.from(r,n=>t[n])}var wYe=N(()=>{"use strict"});function lN(t,r,n){var o,i=-1,s,a,l;if(r=+r,t=+t,n=+n,t===r&&n>0)return[t];if((o=r<t)&&(s=t,t=r,r=s),(l=zW(t,r,n))===0||!isFinite(l))return[];if(l>0){let u=Math.round(t/l),c=Math.round(r/l);for(u*l<t&&++u,c*l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)*l}else{l=-l;let u=Math.round(t*l),c=Math.round(r*l);for(u/l<t&&++u,c/l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)/l}return o&&a.reverse(),a}function zW(t,r,n){var o=(r-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),s=o/Math.pow(10,i);return i>=0?(s>=Hfe?10:s>=Yfe?5:s>=Xfe?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Hfe?10:s>=Yfe?5:s>=Xfe?2:1)}function fc(t,r,n){var o=Math.abs(r-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),s=o/i;return s>=Hfe?i*=10:s>=Yfe?i*=5:s>=Xfe&&(i*=2),r<t?-i:i}var Hfe,Yfe,Xfe,_Ye=N(()=>{"use strict";Hfe=Math.sqrt(50),Yfe=Math.sqrt(10),Xfe=Math.sqrt(2)});function kp(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var Kfe=N(()=>{"use strict"});function NE(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}var Zfe=N(()=>{"use strict"});function UW(t,r,n=0,o=t.length-1,i=Ap){for(;o>n;){if(o-n>600){let u=o-n+1,c=r-n+1,f=Math.log(u),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1),h=Math.max(n,Math.floor(r-c*d/u+p)),m=Math.min(o,Math.floor(r+(u-c)*d/u+p));UW(t,r,h,m,i)}let s=t[r],a=n,l=o;for(wL(t,n,r),i(t[o],s)>0&&wL(t,n,o);a<l;){for(wL(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?wL(t,n,l):(++l,wL(t,l,o)),l<=r&&(n=l+1),r<=l&&(o=l-1)}return t}function wL(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}var SYe=N(()=>{"use strict";vL()});function ME(t,r,n){if(t=Float64Array.from(mYe(t,n)),!!(o=t.length)){if((r=+r)<=0||o<2)return NE(t);if(r>=1)return kp(t);var o,i=(o-1)*r,s=Math.floor(i),a=kp(UW(t,s).subarray(0,s+1)),l=NE(t.subarray(s+1));return a+(l-a)*(i-s)}}function _L(t,r,n=BW){if(o=t.length){if((r=+r)<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var Qfe=N(()=>{"use strict";Kfe();Zfe();SYe();Vfe()});function VW(t,r){let n=0,o=0;if(r===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,o+=i);else{let i=-1;for(let s of t)(s=r(s,++i,t))!=null&&(s=+s)>=s&&(++n,o+=s)}if(n)return o/n}var CYe=N(()=>{"use strict"});function SL(t,r){return ME(t,.5,r)}var EYe=N(()=>{"use strict";Qfe()});function*dXt(t){for(let r of t)yield*PAe(r)}function uN(t){return Array.from(dXt(t))}var TYe=N(()=>{"use strict"});function sa(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var AYe=N(()=>{"use strict"});function cN(t,r){let n=0;if(r===void 0)for(let o of t)(o=+o)&&(n+=o);else{let o=-1;for(let i of t)(i=+r(i,++o,t))&&(n+=i)}return n}var kYe=N(()=>{"use strict"});var Wo=N(()=>{"use strict";yYe();vL();Ufe();xYe();vYe();Kfe();CYe();EYe();TYe();Zfe();wYe();Qfe();AYe();kYe();_Ye()});function*NYe(t,r){if(r==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)o=r(o,++n,t),o!=null&&o!==""&&(o=+o)>=o&&(yield o)}}function GW(t,r,n){let o=Float64Array.from(NYe(t,n));return o.sort(Ap),r.map(i=>_L(o,i))}function WW(t,r){return GW(t,[.25,.5,.75],r)}function qW(t,r){let n=t.length,o=$W(t,r),i=WW(t,r),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(o,s)||o||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Jfe(t){let r=t.maxbins||20,n=t.base||10,o=Math.log(n),i=t.divide||[5,2],s=t.extent[0],a=t.extent[1],l,u,c,f,d,p,h=t.span||a-s||Math.abs(s)||1;if(t.step)l=t.step;else if(t.steps){for(f=h/r,d=0,p=t.steps.length;d<p&&t.steps[d]<f;++d);l=t.steps[Math.max(0,d-1)]}else{for(u=Math.ceil(Math.log(r)/o),c=t.minstep||0,l=Math.max(c,Math.pow(n,Math.round(Math.log(h)/o)-u));Math.ceil(h/l)>r;)l*=n;for(d=0,p=i.length;d<p;++d)f=l/i[d],f>=c&&h/f<=r&&(l=f)}f=Math.log(l);let m=f>=0?0:~~(-f/o)+1,g=Math.pow(n,-m-1);return(t.nice||t.nice===void 0)&&(f=Math.floor(s/l+g)*l,s=s<f?f-l:f,a=Math.ceil(a/l)*l),{start:s,stop:a===s?s+l:a,step:l}}function pXt(t){wd=t}function ede(t,r,n,o){if(!t.length)return[void 0,void 0];let i=Float64Array.from(NYe(t,o)),s=i.length,a=r,l,u,c,f;for(c=0,f=Array(a);c<a;++c){for(l=0,u=0;u<s;++u)l+=i[~~(wd()*s)];f[c]=l/s}return f.sort(Ap),[ME(f,n/2),ME(f,1-n/2)]}function tde(t,r,n,o){o=o||(p=>p);let i=t.length,s=new Float64Array(i),a=0,l=1,u=o(t[0]),c=u,f=u+r,d;for(;l<i;++l){if(d=o(t[l]),d>=f){for(c=(u+c)/2;a<l;++a)s[a]=c;f=d+r,u=d}c=d}for(c=(u+c)/2;a<l;++a)s[a]=c;return n?hXt(s,r+r/4):s}function hXt(t,r){let n=t.length,o=0,i=1,s,a;for(;t[o]===t[i];)++i;for(;i<n;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<r){for(a=i+(o+s-i-i>>1);a<i;)t[a++]=t[i];for(;a>i;)t[a--]=t[o]}o=i,i=s}return t}function mXt(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function gXt(t,r){r==null&&(r=t,t=0);let n,o,i,s={min(a){return arguments.length?(n=a||0,i=o-n,s):n},max(a){return arguments.length?(o=a||0,i=o-n,s):o},sample(){return n+Math.floor(i*wd())},pdf(a){return a===Math.floor(a)&&a>=n&&a<o?1/i:0},cdf(a){let l=Math.floor(a);return l<n?0:l>=o?1:(l-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(t).max(r)}function EL(t,r){t=t||0,r=r??1;let n=0,o=0,i,s;if(CL===CL)n=CL,CL=NaN;else{do n=wd()*2-1,o=wd()*2-1,i=n*n+o*o;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,CL=o*s}return t+n*r}function HW(t,r,n){n=n??1;let o=(t-(r||0))/n;return Math.exp(-.5*o*o)/(n*MYe)}function TL(t,r,n){r=r||0,n=n??1;let o=(t-r)/n,i=Math.abs(o),s;if(i>37)s=0;else{let a=Math.exp(-i*i/2),l;i<7.07106781186547?(l=.0352624965998911*i+.700383064443688,l=l*i+6.37396220353165,l=l*i+33.912866078383,l=l*i+112.079291497871,l=l*i+221.213596169931,l=l*i+220.206867912376,s=a*l,l=.0883883476483184*i+1.75566716318264,l=l*i+16.064177579207,l=l*i+86.7807322029461,l=l*i+296.564248779674,l=l*i+637.333633378831,l=l*i+793.826512519948,l=l*i+440.413735824752,s=s/l):(l=i+.65,l=i+4/l,l=i+3/l,l=i+2/l,l=i+1/l,s=a/l/2.506628274631)}return o>0?1-s:s}function AL(t,r,n){return t<0||t>1?NaN:(r||0)+(n??1)*yXt*bXt(2*t-1)}function bXt(t){let r=-Math.log((1-t)*(1+t)),n;return r<6.25?(r-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*r,n=128584807152564e-32+n*r,n=11157877678025181e-33+n*r,n=-1333171662854621e-31+n*r,n=20972767875968562e-33+n*r,n=6637638134358324e-30+n*r,n=-4054566272975207e-29+n*r,n=-8151934197605472e-29+n*r,n=26335093153082323e-28+n*r,n=-12975133253453532e-27+n*r,n=-5415412054294628e-26+n*r,n=10512122733215323e-25+n*r,n=-4112633980346984e-24+n*r,n=-29070369957882005e-24+n*r,n=42347877827932404e-23+n*r,n=-13654692000834679e-22+n*r,n=-13882523362786469e-21+n*r,n=.00018673420803405714+n*r,n=-.000740702534166267+n*r,n=-.006033670871430149+n*r,n=.24015818242558962+n*r,n=1.6536545626831027+n*r):r<16?(r=Math.sqrt(r)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*r,n=-27517406297064545e-23+n*r,n=18239629214389228e-24+n*r,n=15027403968909828e-22+n*r,n=-4013867526981546e-21+n*r,n=29234449089955446e-22+n*r,n=12475304481671779e-21+n*r,n=-47318229009055734e-21+n*r,n=6828485145957318e-20+n*r,n=24031110387097894e-21+n*r,n=-.0003550375203628475+n*r,n=.0009532893797373805+n*r,n=-.0016882755560235047+n*r,n=.002491442096107851+n*r,n=-.003751208507569241+n*r,n=.005370914553590064+n*r,n=1.0052589676941592+n*r,n=3.0838856104922208+n*r):Number.isFinite(r)?(r=Math.sqrt(r)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*r,n=15076572693500548e-25+n*r,n=-3789465440126737e-24+n*r,n=761570120807834e-23+n*r,n=-1496002662714924e-23+n*r,n=2914795345090108e-23+n*r,n=-6771199775845234e-23+n*r,n=22900482228026655e-23+n*r,n=-99298272942317e-20+n*r,n=4526062597223154e-21+n*r,n=-1968177810553167e-20+n*r,n=7599527703001776e-20+n*r,n=-.00021503011930044477+n*r,n=-.00013871931833623122+n*r,n=1.0103004648645344+n*r,n=4.849906401408584+n*r):n=1/0,n*t}function YW(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>EL(n,o),pdf:s=>HW(s,n,o),cdf:s=>TL(s,n,o),icdf:s=>AL(s,n,o)};return i.mean(t).stdev(r)}function XW(t,r){let n=YW(),o=0,i={data(s){return arguments.length?(t=s,o=s?s.length:0,i.bandwidth(r)):t},bandwidth(s){return arguments.length?(r=s,!r&&t&&(r=qW(t)),i):r},sample(){return t[~~(wd()*o)]+r*n.sample()},pdf(s){let a=0,l=0;for(;l<o;++l)a+=n.pdf((s-t[l])/r);return a/r/o},cdf(s){let a=0,l=0;for(;l<o;++l)a+=n.cdf((s-t[l])/r);return a/o},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function KW(t,r){return t=t||0,r=r??1,Math.exp(t+EL()*r)}function ZW(t,r,n){if(t<=0)return 0;r=r||0,n=n??1;let o=(Math.log(t)-r)/n;return Math.exp(-.5*o*o)/(n*MYe*t)}function QW(t,r,n){return TL(Math.log(t),r,n)}function JW(t,r,n){return Math.exp(AL(t,r,n))}function rde(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>KW(n,o),pdf:s=>ZW(s,n,o),cdf:s=>QW(s,n,o),icdf:s=>JW(s,n,o)};return i.mean(t).stdev(r)}function nde(t,r){let n=0,o;function i(a){let l=[],u=0,c;for(c=0;c<n;++c)u+=l[c]=a[c]==null?1:+a[c];for(c=0;c<n;++c)l[c]/=u;return l}let s={weights(a){return arguments.length?(o=i(r=a||[]),s):r},distributions(a){return arguments.length?(a?(n=a.length,t=a):(n=0,t=[]),s.weights(r)):t},sample(){let a=wd(),l=t[n-1],u=o[0],c=0;for(;c<n-1;u+=o[++c])if(a<u){l=t[c];break}return l.sample()},pdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].pdf(a);return l},cdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].cdf(a);return l},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(r)}function eq(t,r){return r==null&&(r=t??1,t=0),t+(r-t)*wd()}function tq(t,r,n){return n==null&&(n=r??1,r=0),t>=r&&t<=n?1/(n-r):0}function rq(t,r,n){return n==null&&(n=r??1,r=0),t<r?0:t>n?1:(t-r)/(n-r)}function nq(t,r,n){return n==null&&(n=r??1,r=0),t>=0&&t<=1?r+t*(n-r):NaN}function ode(t,r){let n,o,i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(o=s??1,i):o},sample:()=>eq(n,o),pdf:s=>tq(s,n,o),cdf:s=>rq(s,n,o),icdf:s=>nq(s,n,o)};return r==null&&(r=t??1,t=0),i.min(t).max(r)}function kL(t,r,n,o){let i=o-t*t,s=Math.abs(i)<1e-24?0:(n-t*r)/i;return[r-s*t,s]}function oq(t,r,n,o){t=t.filter(h=>{let m=r(h),g=n(h);return m!=null&&(m=+m)>=m&&g!=null&&(g=+g)>=g}),o&&t.sort((h,m)=>r(h)-r(m));let i=t.length,s=new Float64Array(i),a=new Float64Array(i),l=0,u=0,c=0,f,d,p;for(p of t)s[l]=f=+r(p),a[l]=d=+n(p),++l,u+=(f-u)/l,c+=(d-c)/l;for(l=0;l<i;++l)s[l]-=u,a[l]-=c;return[s,a,u,c]}function IL(t,r,n,o){let i=-1,s,a;for(let l of t)s=r(l),a=n(l),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&o(s,a,++i)}function fN(t,r,n,o,i){let s=0,a=0;return IL(t,r,n,(l,u)=>{let c=u-i(l),f=u-o;s+=c*c,a+=f*f}),1-s/a}function iq(t,r,n){let o=0,i=0,s=0,a=0,l=0;IL(t,r,n,(f,d)=>{++l,o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=kL(o,i,s,a),c=f=>u[0]+u[1]*f;return{coef:u,predict:c,rSquared:fN(t,r,n,i,c)}}function ide(t,r,n){let o=0,i=0,s=0,a=0,l=0;IL(t,r,n,(f,d)=>{++l,f=Math.log(f),o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=kL(o,i,s,a),c=f=>u[0]+u[1]*Math.log(f);return{coef:u,predict:c,rSquared:fN(t,r,n,i,c)}}function sde(t,r,n){let[o,i,s,a]=oq(t,r,n),l=0,u=0,c=0,f=0,d=0,p,h,m;IL(t,r,n,(x,v)=>{p=o[d++],h=Math.log(v),m=p*v,l+=(v*h-l)/d,u+=(m-u)/d,c+=(m*h-c)/d,f+=(p*m-f)/d});let[g,y]=kL(u/a,l/a,c/a,f/a),b=x=>Math.exp(g+y*(x-s));return{coef:[Math.exp(g-y*s),y],predict:b,rSquared:fN(t,r,n,a,b)}}function ade(t,r,n){let o=0,i=0,s=0,a=0,l=0,u=0;IL(t,r,n,(d,p)=>{let h=Math.log(d),m=Math.log(p);++u,o+=(h-o)/u,i+=(m-i)/u,s+=(h*m-s)/u,a+=(h*h-a)/u,l+=(p-l)/u});let c=kL(o,i,s,a),f=d=>c[0]*Math.pow(d,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:f,rSquared:fN(t,r,n,l,f)}}function sq(t,r,n){let[o,i,s,a]=oq(t,r,n),l=o.length,u=0,c=0,f=0,d=0,p=0,h,m,g,y;for(h=0;h<l;)m=o[h],g=i[h++],y=m*m,u+=(y-u)/h,c+=(y*m-c)/h,f+=(y*y-f)/h,d+=(m*g-d)/h,p+=(y*g-p)/h;let b=f-u*u,x=u*b-c*c,v=(p*u-d*c)/x,w=(d*b-p*c)/x,_=-v*u,S=C=>(C=C-s,v*C*C+w*C+_+a);return{coef:[_-w*s+v*s*s+a,w-2*v*s,v],predict:S,rSquared:fN(t,r,n,a,S)}}function lde(t,r,n,o){if(o===1)return iq(t,r,n);if(o===2)return sq(t,r,n);let[i,s,a,l]=oq(t,r,n),u=i.length,c=[],f=[],d=o+1,p,h,m,g,y;for(p=0;p<d;++p){for(m=0,g=0;m<u;++m)g+=Math.pow(i[m],p)*s[m];for(c.push(g),y=new Float64Array(d),h=0;h<d;++h){for(m=0,g=0;m<u;++m)g+=Math.pow(i[m],p+h);y[h]=g}f.push(y)}f.push(c);let b=vXt(f),x=v=>{v-=a;let w=l+b[0]+b[1]*v+b[2]*v*v;for(p=3;p<d;++p)w+=b[p]*Math.pow(v,p);return w};return{coef:xXt(d,b,-a,l),predict:x,rSquared:fN(t,r,n,l,x)}}function xXt(t,r,n,o){let i=Array(t),s,a,l,u;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(l=r[s],u=1,i[s]+=l,a=1;a<=s;++a)u*=(s+1-a)/a,i[s-a]+=l*Math.pow(n,a)*u;return i[0]+=o,i}function vXt(t){let r=t.length-1,n=[],o,i,s,a,l;for(o=0;o<r;++o){for(a=o,i=o+1;i<r;++i)Math.abs(t[o][i])>Math.abs(t[o][a])&&(a=i);for(s=o;s<r+1;++s)l=t[s][o],t[s][o]=t[s][a],t[s][a]=l;for(i=o+1;i<r;++i)for(s=r;s>=o;s--)t[s][i]-=t[s][o]*t[o][i]/t[o][o]}for(i=r-1;i>=0;--i){for(l=0,s=i+1;s<r;++s)l+=t[s][i]*n[s];n[i]=(t[r][i]-l)/t[i][i]}return n}function ude(t,r,n,o){let[i,s,a,l]=oq(t,r,n,!0),u=i.length,c=Math.max(2,~~(o*u)),f=new Float64Array(u),d=new Float64Array(u),p=new Float64Array(u).fill(1);for(let h=-1;++h<=IYe;){let m=[0,c-1];for(let y=0;y<u;++y){let b=i[y],x=m[0],v=m[1],w=b-i[x]>i[v]-b?x:v,_=0,S=0,C=0,E=0,T=0,I=1/Math.abs(i[w]-b||1);for(let D=x;D<=v;++D){let L=i[D],P=s[D],R=wXt(Math.abs(b-L)*I)*p[D],V=L*R;_+=R,S+=V,C+=P*R,E+=P*V,T+=L*V}let[k,F]=kL(S/_,C/_,E/_,T/_);f[y]=k+F*b,d[y]=Math.abs(s[y]-f[y]),_Xt(i,y+1,m)}if(h===IYe)break;let g=SL(d);if(Math.abs(g)<DYe)break;for(let y=0,b,x;y<u;++y)b=d[y]/(6*g),p[y]=b>=1?DYe:(x=1-b*b)*x}return SXt(i,f,a,l)}function wXt(t){return(t=1-t*t*t)*t*t}function _Xt(t,r,n){let o=t[r],i=n[0],s=n[1]+1;if(!(s>=t.length))for(;r>i&&t[s]-o<=o-t[i];)n[0]=++i,n[1]=s,++s}function SXt(t,r,n,o){let i=t.length,s=[],a=0,l=0,u=[],c;for(;a<i;++a)c=t[a]+n,u[0]===c?u[1]+=(r[a]-u[1])/++l:(l=0,u[1]+=o,u=[c,r[a]],s.push(u));return u[1]+=o,s}function dN(t,r,n,o){n=n||25,o=Math.max(n,o||200);let i=g=>[g,t(g)],s=r[0],a=r[1],l=a-s,u=l/o,c=[i(s)],f=[];if(n===o){for(let g=1;g<o;++g)c.push(i(s+g/n*l));return c.push(i(a)),c}else{f.push(i(a));for(let g=n;--g>0;)f.push(i(s+g/n*l))}let d=c[0],p=f[f.length-1],h=1/l,m=EXt(d[1],f);for(;p;){let g=i((d[0]+p[0])/2);g[0]-d[0]>=u&&TXt(d,g,p,h,m)>CXt?f.push(g):(d=p,c.push(p),f.pop()),p=f[f.length-1]}return c}function EXt(t,r){let n=t,o=t,i=r.length;for(let s=0;s<i;++s){let a=r[s][1];a<n&&(n=a),a>o&&(o=a)}return 1/(o-n)}function TXt(t,r,n,o,i){let s=Math.atan2(i*(n[1]-t[1]),o*(n[0]-t[0])),a=Math.atan2(i*(r[1]-t[1]),o*(r[0]-t[0]));return Math.abs(s-a)}var wd,MYe,yXt,CL,IYe,DYe,CXt,pN=N(()=>{"use strict";Wo();wd=Math.random;MYe=Math.sqrt(2*Math.PI),yXt=Math.SQRT2,CL=NaN;IYe=2,DYe=1e-12;CXt=.5*Math.PI/180});function eo(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),r(s,1),t(s),s},i.round=function(s){var a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=function(s,a){return r(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,l){var u=[],c;if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=function(s){return eo(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,l){if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););})},n&&(i.count=function(s,a){return cde.setTime(+s),fde.setTime(+a),t(cde),t(fde),Math.floor(n(cde,fde))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?function(a){return o(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var cde,fde,dc=N(()=>{"use strict";cde=new Date,fde=new Date});var aq,Yw,FYe,dde=N(()=>{"use strict";dc();aq=eo(function(){},function(t,r){t.setTime(+t+r)},function(t,r){return r-t});aq.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?eo(function(r){r.setTime(Math.floor(r/t)*t)},function(r,n){r.setTime(+r+n*t)},function(r,n){return(n-r)/t}):aq};Yw=aq,FYe=aq.range});var OYe,pc,RYe,pde=N(()=>{"use strict";dc();OYe=eo(function(t){t.setTime(t-t.getMilliseconds())},function(t,r){t.setTime(+t+r*1e3)},function(t,r){return(r-t)/1e3},function(t){return t.getUTCSeconds()}),pc=OYe,RYe=OYe.range});var PYe,OE,AXt,hde=N(()=>{"use strict";dc();PYe=eo(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getMinutes()}),OE=PYe,AXt=PYe.range});var LYe,PE,kXt,mde=N(()=>{"use strict";dc();LYe=eo(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getHours()}),PE=LYe,kXt=LYe.range});var jYe,_d,IXt,yde=N(()=>{"use strict";dc();jYe=eo(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),_d=jYe,IXt=jYe.range});function LE(t){return eo(function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n*7)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5})}var Ip,hN,$Ye,zYe,Xw,UYe,VYe,GYe,DXt,NXt,MXt,FXt,OXt,RXt,bde=N(()=>{"use strict";dc();Ip=LE(0),hN=LE(1),$Ye=LE(2),zYe=LE(3),Xw=LE(4),UYe=LE(5),VYe=LE(6),GYe=Ip.range,DXt=hN.range,NXt=$Ye.range,MXt=zYe.range,FXt=Xw.range,OXt=UYe.range,RXt=VYe.range});var WYe,Kw,PXt,xde=N(()=>{"use strict";dc();WYe=eo(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,r){t.setMonth(t.getMonth()+r)},function(t,r){return r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Kw=WYe,PXt=WYe.range});var vde,Sd,LXt,wde=N(()=>{"use strict";dc();vde=eo(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r)},function(t,r){return r.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});vde.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:eo(function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n*t)})};Sd=vde,LXt=vde.range});var qYe,jE,jXt,_de=N(()=>{"use strict";dc();qYe=eo(function(t){t.setUTCSeconds(0,0)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getUTCMinutes()}),jE=qYe,jXt=qYe.range});var HYe,BE,BXt,Sde=N(()=>{"use strict";dc();HYe=eo(function(t){t.setUTCMinutes(0,0,0)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getUTCHours()}),BE=HYe,BXt=HYe.range});var YYe,Cd,$Xt,Cde=N(()=>{"use strict";dc();YYe=eo(function(t){t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r)},function(t,r){return(r-t)/864e5},function(t){return t.getUTCDate()-1}),Cd=YYe,$Xt=YYe.range});function $E(t){return eo(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n*7)},function(r,n){return(n-r)/6048e5})}var Dp,mN,XYe,KYe,Zw,ZYe,QYe,JYe,zXt,UXt,VXt,GXt,WXt,qXt,Ede=N(()=>{"use strict";dc();Dp=$E(0),mN=$E(1),XYe=$E(2),KYe=$E(3),Zw=$E(4),ZYe=$E(5),QYe=$E(6),JYe=Dp.range,zXt=mN.range,UXt=XYe.range,VXt=KYe.range,GXt=Zw.range,WXt=ZYe.range,qXt=QYe.range});var eXe,Qw,HXt,Tde=N(()=>{"use strict";dc();eXe=eo(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCMonth(t.getUTCMonth()+r)},function(t,r){return r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),Qw=eXe,HXt=eXe.range});var Ade,Ed,YXt,kde=N(()=>{"use strict";dc();Ade=eo(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)},function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ade.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:eo(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n*t)})};Ed=Ade,YXt=Ade.range});function rXe(t,r,n,o,i,s){let a=[[pc,1,1e3],[pc,5,5*1e3],[pc,15,15*1e3],[pc,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=ny(([,,y])=>y).right(a,p);if(h===a.length)return t.every(fc(c/31536e6,f/31536e6,d));if(h===0)return Yw.every(Math.max(fc(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var Ide,Dde,Nde,Mde,nXe=N(()=>{"use strict";Wo();dde();pde();hde();mde();yde();bde();xde();wde();_de();Sde();Cde();Ede();Tde();kde();[Ide,Dde]=rXe(Ed,Qw,Dp,Cd,BE,jE),[Nde,Mde]=rXe(Sd,Kw,Ip,_d,PE,OE)});var DL=N(()=>{"use strict";dde();pde();hde();mde();yde();bde();xde();wde();_de();Sde();Cde();Ede();Tde();kde();nXe()});function uq(t){let r=Br(t).slice(),n={};return r.length||pt("Missing time unit."),r.forEach(i=>{Pr(Fde,i)?n[i]=1:pt("Invalid time unit: ".concat(i,"."))}),(n[aa]||n[Rl]?1:0)+(n[hc]||n[Pl]||n[mc]?1:0)+(n[iy]?1:0)>1&&pt("Incompatible time units: ".concat(t)),r.sort((i,s)=>Fde[i]-Fde[s]),r}function Bde(t,r){let n=an({},KXt,r),o=uq(t),i=o.length,s="",a=0,l,u;for(a=0;a<i;)for(l=o.length;l>a;--l)if(u=o.slice(a,l).join("-"),n[u]!=null){s+=n[u],a=l;break}return s.trim()}function $de(t){return zE.setFullYear(t),zE.setMonth(0),zE.setDate(1),zE.setHours(0,0,0,0),zE}function zde(t){return sXe(new Date(t))}function Ude(t){return Ode(new Date(t))}function sXe(t){return _d.count($de(t.getFullYear())-1,t)}function Ode(t){return Ip.count($de(t.getFullYear())-1,t)}function Rde(t){return $de(t).getDay()}function ZXt(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(-1,r,n,o,i,s,a);return l.setFullYear(t),l}return new Date(t,r,n,o,i,s,a)}function Vde(t){return aXe(new Date(t))}function Gde(t){return Pde(new Date(t))}function aXe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Cd.count(r-1,t)}function Pde(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Dp.count(r-1,t)}function Lde(t){return zE.setTime(Date.UTC(t,0,1)),zE.getUTCDay()}function QXt(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(Date.UTC(-1,r,n,o,i,s,a));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(t,r,n,o,i,s,a))}function lXe(t,r,n,o,i){let s=r||1,a=Un(t),l=(b,x,v)=>(v=v||b,JXt(n[v],o[v],b===a&&s,x)),u=new Date,c=gu(t),f=c[tl]?l(tl):Qa(2012),d=c[Pl]?l(Pl):c[hc]?l(hc):Kh,p=c[aa]&&c[Rl]?l(Rl,1,aa+Rl):c[aa]?l(aa,1):c[Rl]?l(Rl,1):c[mc]?l(mc,1):c[iy]?l(iy,1):G0,h=c[of]?l(of):Kh,m=c[sf]?l(sf):Kh,g=c[Td]?l(Td):Kh,y=c[Np]?l(Np):Kh;return function(b){u.setTime(+b);let x=f(u);return i(x,d(u),p(u,x),h(u),m(u),g(u),y(u))}}function JXt(t,r,n,o){let i=n<=1?t:o?(s,a)=>o+n*Math.floor((t(s,a)-o)/n):(s,a)=>n*Math.floor(t(s,a)/n);return r?(s,a)=>r(i(s,a),a):i}function gN(t,r,n){return r+t*7-(n+6)%7}function Wde(t,r){return lXe(t,r||1,eKt,tKt,ZXt)}function qde(t,r){return lXe(t,r||1,rKt,nKt,QXt)}function nv(t){return oKt[t]}function ov(t){return iKt[t]}function uXe(t,r,n){return t?t.offset(r,n):void 0}function Hde(t,r,n){return uXe(nv(t),r,n)}function Yde(t,r,n){return uXe(ov(t),r,n)}function cXe(t,r,n,o){return t?t.range(r,n,o):void 0}function Xde(t,r,n,o){return cXe(nv(t),r,n,o)}function Kde(t,r,n,o){return cXe(ov(t),r,n,o)}function Zde(t){let r=t.extent,n=t.maxbins||40,o=Math.abs(vE(r))/n,i=ny(l=>l[2]).right(NL,o),s,a;return i===NL.length?(s=dXe,a=fc(r[0]/jde,r[1]/jde,n)):i?(i=NL[o/NL[i-1][2]<NL[i][2]/o?i-1:i],s=i[0],a=i[1]):(s=fXe,a=Math.max(fc(r[0],r[1],n),1)),{units:s,step:a}}var tl,hc,Pl,aa,mc,Rl,iy,of,sf,Td,Np,lq,Fde,KXt,zE,eKt,tKt,rKt,nKt,oKt,iKt,ML,FL,OL,cq,sKt,oXe,jde,fXe,RL,PL,LL,aKt,lKt,iXe,dXe,NL,yN=N(()=>{"use strict";Ls();DL();Wo();tl="year",hc="quarter",Pl="month",aa="week",mc="date",Rl="day",iy="dayofyear",of="hours",sf="minutes",Td="seconds",Np="milliseconds",lq=[tl,hc,Pl,aa,mc,Rl,iy,of,sf,Td,Np],Fde=lq.reduce((t,r,n)=>(t[r]=1+n,t),{});KXt={[tl]:"%Y ",[hc]:"Q%q ",[Pl]:"%b ",[mc]:"%d ",[aa]:"W%U ",[Rl]:"%a ",[iy]:"%j ",[of]:"%H:00",[sf]:"00:%M",[Td]:":%S",[Np]:".%L",["".concat(tl,"-").concat(Pl)]:"%Y-%m ",["".concat(tl,"-").concat(Pl,"-").concat(mc)]:"%Y-%m-%d ",["".concat(of,"-").concat(sf)]:"%H:%M"};zE=new Date;eKt={[tl]:t=>t.getFullYear(),[hc]:t=>Math.floor(t.getMonth()/3),[Pl]:t=>t.getMonth(),[mc]:t=>t.getDate(),[of]:t=>t.getHours(),[sf]:t=>t.getMinutes(),[Td]:t=>t.getSeconds(),[Np]:t=>t.getMilliseconds(),[iy]:t=>sXe(t),[aa]:t=>Ode(t),[aa+Rl]:(t,r)=>gN(Ode(t),t.getDay(),Rde(r)),[Rl]:(t,r)=>gN(1,t.getDay(),Rde(r))},tKt={[hc]:t=>3*t,[aa]:(t,r)=>gN(t,0,Rde(r))};rKt={[tl]:t=>t.getUTCFullYear(),[hc]:t=>Math.floor(t.getUTCMonth()/3),[Pl]:t=>t.getUTCMonth(),[mc]:t=>t.getUTCDate(),[of]:t=>t.getUTCHours(),[sf]:t=>t.getUTCMinutes(),[Td]:t=>t.getUTCSeconds(),[Np]:t=>t.getUTCMilliseconds(),[iy]:t=>aXe(t),[aa]:t=>Pde(t),[Rl]:(t,r)=>gN(1,t.getUTCDay(),Lde(r)),[aa+Rl]:(t,r)=>gN(Pde(t),t.getUTCDay(),Lde(r))},nKt={[hc]:t=>3*t,[aa]:(t,r)=>gN(t,0,Lde(r))};oKt={[tl]:Sd,[hc]:Kw.every(3),[Pl]:Kw,[aa]:Ip,[mc]:_d,[Rl]:_d,[iy]:_d,[of]:PE,[sf]:OE,[Td]:pc,[Np]:Yw},iKt={[tl]:Ed,[hc]:Qw.every(3),[Pl]:Qw,[aa]:Dp,[mc]:Cd,[Rl]:Cd,[iy]:Cd,[of]:BE,[sf]:jE,[Td]:pc,[Np]:Yw};ML=1e3,FL=ML*60,OL=FL*60,cq=OL*24,sKt=cq*7,oXe=cq*30,jde=cq*365,fXe=[tl,Pl,mc,of,sf,Td,Np],RL=fXe.slice(0,-1),PL=RL.slice(0,-1),LL=PL.slice(0,-1),aKt=LL.slice(0,-1),lKt=[tl,aa],iXe=[tl,Pl],dXe=[tl],NL=[[RL,1,ML],[RL,5,5*ML],[RL,15,15*ML],[RL,30,30*ML],[PL,1,FL],[PL,5,5*FL],[PL,15,15*FL],[PL,30,30*FL],[LL,1,OL],[LL,3,3*OL],[LL,6,6*OL],[LL,12,12*OL],[aKt,1,cq],[lKt,1,sKt],[iXe,1,oXe],[iXe,3,3*oXe],[dXe,1,jde]]});var Tpe={};fn(Tpe,{aggregate:()=>Jw,bin:()=>rpe,collect:()=>npe,compare:()=>vXe,countpattern:()=>ope,cross:()=>ipe,density:()=>spe,dotbin:()=>lpe,expression:()=>EXe,extent:()=>upe,facet:()=>dq,field:()=>TXe,filter:()=>fpe,flatten:()=>dpe,fold:()=>ppe,formula:()=>hpe,generate:()=>AXe,impute:()=>mpe,joinaggregate:()=>gpe,kde:()=>ype,key:()=>kXe,load:()=>IXe,lookup:()=>bpe,multiextent:()=>DXe,multivalues:()=>NXe,params:()=>MXe,pivot:()=>xpe,prefacet:()=>FXe,project:()=>vpe,proxy:()=>OXe,quantile:()=>wpe,relay:()=>RXe,sample:()=>_pe,sequence:()=>Spe,sieve:()=>PXe,subflow:()=>cpe,timeunit:()=>Cpe,tupleindex:()=>jXe,values:()=>BXe,window:()=>Epe});function uKt(t){return r=>{let n=t.length,o=1,i=String(t[0](r));for(;o<n;++o)i+="|"+t[o](r);return i}}function epe(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:uKt(t)}function mXe(t,r,n){return n||t+(r?"_"+r:"")}function fKt(t,r){return n=>an({name:t,out:n||t},cKt,r)}function gXe(t,r){return jL[t](r)}function yXe(t,r){return t.idx-r.idx}function dKt(t){let r={};t.forEach(o=>r[o.name]=o);let n=o=>{o.req&&o.req.forEach(i=>{r[i]||n(r[i]=jL[i]())})};return t.forEach(n),Object.values(r).sort(yXe)}function pKt(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function hKt(t,r){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,r)))}function mKt(t,r){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,r)))}function gKt(t){return this._out.forEach(r=>t[r.out]=r.value(this)),t}function bXe(t,r){let n=r||uc,o=dKt(t),i=t.slice().sort(yXe);function s(a){this._ops=o,this._out=i,this.cell=a,this.init()}return s.prototype.init=pKt,s.prototype.add=hKt,s.prototype.rem=mKt,s.prototype.set=gKt,s.prototype.get=n,s.fields=t.map(a=>a.out),s}function tpe(t){this._key=t?Xh(t):_r,this.reset()}function Jw(t){et.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function rpe(t){et.call(this,null,t)}function xXe(t,r,n){let o=t,i=r||[],s=n||[],a={},l=0;return{add:u=>s.push(u),remove:u=>a[o(u)]=++l,size:()=>i.length,data:(u,c)=>(l&&(i=i.filter(f=>!a[o(f)]),a={},l=0),c&&u&&i.sort(u),s.length&&(i=u?zce(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function npe(t){et.call(this,[],t)}function vXe(t){Fo.call(this,null,bKt,t)}function bKt(t){return this.value&&!t.modified()?this.value:Oce(t.fields,t.orders)}function ope(t){et.call(this,null,t)}function xKt(t,r,n){switch(r){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}function ipe(t){et.call(this,null,t)}function vKt(t,r,n,o){for(var i=[],s={},a=t.length,l=0,u,c;l<a;++l)for(s[r]=c=t[l],u=0;u<a;++u)s[n]=t[u],o(s)&&(i.push(Nn(s)),s={},s[r]=c);return i}function wXe(t,r){let n=t[hXe];Pr(pXe,n)||pt("Unknown distribution function: "+n);let o=pXe[n]();for(let i in t)i===_Kt?o.data((t.from||r()).map(t[i])):i===wKt?o[i](t[i].map(s=>wXe(s,r))):typeof o[i]===hXe&&o[i](t[i]);return o}function spe(t){et.call(this,null,t)}function CKt(t){return()=>t.materialize(t.SOURCE).source}function SXe(t,r){return t?t.map((n,o)=>r[o]||Oi(n)):null}function ape(t,r,n){let o=[],i=d=>d(u),s,a,l,u,c,f;if(r==null)o.push(t.map(n));else for(s={},a=0,l=t.length;a<l;++a)u=t[a],c=r.map(i),f=s[c],f||(s[c]=f=[],f.dims=c,o.push(f)),f.push(n(u));return o}function lpe(t){et.call(this,null,t)}function EXe(t){Fo.call(this,null,TKt,t),this.modified(!0)}function TKt(t){let r=t.expr;return this.value&&!t.modified("expr")?this.value:bd(n=>r(n,t),Aa(r),Oi(r))}function upe(t){et.call(this,[void 0,void 0],t)}function cpe(t,r){Fo.call(this,t),this.parent=r,this.count=0}function dq(t){et.call(this,{},t),this._keys=Bw();let r=this._targets=[];r.active=0,r.forEach=n=>{for(let o=0,i=r.active;o<i;++o)n(r[o],o,r)}}function TXe(t){Fo.call(this,null,AKt,t)}function AKt(t){return this.value&&!t.modified()?this.value:Hr(t.name)?Br(t.name).map(r=>Xh(r)):Xh(t.name,t.as)}function fpe(t){et.call(this,Bw(),t)}function dpe(t){et.call(this,[],t)}function ppe(t){et.call(this,[],t)}function hpe(t){et.call(this,null,t)}function AXe(t){et.call(this,[],t)}function mpe(t){et.call(this,[],t)}function IKt(t){var r=t.method||fq.value,n;if(fq[r]==null)pt("Unrecognized imputation method: "+r);else return r===fq.value?(n=t.value!==void 0?t.value:0,()=>n):fq[r]}function DKt(t){let r=t.field;return n=>n?r(n):NaN}function NKt(t,r,n,o){var i=b=>b(y),s=[],a=o?o.slice():[],l={},u={},c,f,d,p,h,m,g,y;for(a.forEach((b,x)=>l[b]=x+1),p=0,g=t.length;p<g;++p)y=t[p],m=n(y),h=l[m]||(l[m]=a.push(m)),f=(c=r?r.map(i):kKt)+"",(d=u[f])||(d=u[f]=[],s.push(d),d.values=c),d[h-1]=y;return s.domain=a,s}function gpe(t){Jw.call(this,t)}function ype(t){et.call(this,null,t)}function kXe(t){Fo.call(this,null,MKt,t)}function MKt(t){return this.value&&!t.modified()?this.value:Bce(t.fields,t.flat)}function IXe(t){et.call(this,[],t),this._pending=null}function FKt(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function Jde(t,r,n){n.forEach(Nn);let o=r.fork(r.NO_FIELDS&r.NO_SOURCE);return o.rem=t.value,t.value=o.source=o.add=n,t._pending=null,o.rem.length&&o.clean(!0),o}function bpe(t){et.call(this,{},t)}function DXe(t){Fo.call(this,null,OKt,t)}function OKt(t){if(this.value&&!t.modified())return this.value;let r=t.extents,n=r.length,o=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=r[s],a[0]<o&&(o=a[0]),a[1]>i&&(i=a[1]);return[o,i]}function NXe(t){Fo.call(this,null,RKt,t)}function RKt(t){return this.value&&!t.modified()?this.value:t.values.reduce((r,n)=>r.concat(n),[])}function MXe(t){et.call(this,null,t)}function xpe(t){Jw.call(this,t)}function PKt(t,r){let n=t.field,o=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=Aa(n).concat(Aa(o)),a=jKt(n,t.limit||0,r);return r.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:a.map(()=>i),fields:a.map(l=>LKt(l,n,o,s)),as:a.map(l=>l+""),modified:t.modified.bind(t)}}function LKt(t,r,n,o){return bd(i=>r(i)===t?n(i):NaN,o,t+"")}function jKt(t,r,n){let o={},i=[];return n.visit(n.SOURCE,s=>{let a=t(s);o[a]||(o[a]=1,i.push(a))}),i.sort(HP),r?i.slice(0,r):i}function FXe(t){dq.call(this,t)}function vpe(t){et.call(this,null,t)}function BKt(t,r,n,o){for(let i=0,s=n.length;i<s;++i)r[o[i]]=n[i](t);return r}function OXe(t){et.call(this,null,t)}function wpe(t){et.call(this,null,t)}function RXe(t){et.call(this,null,t)}function _pe(t){et.call(this,[],t),this.count=0}function Spe(t){et.call(this,null,t)}function PXe(t){et.call(this,null,t),this.modified(!0)}function Cpe(t){et.call(this,null,t)}function jXe(t){et.call(this,Bw(),t)}function BXe(t){et.call(this,null,t)}function zKt(t,r,n,o){let i=BL[t](r,n);return{init:i.init||Kh,update:function(s,a){a[o]=i.next(s)}}}function UKt(t,r,n){for(let o=r.length;n<o;++n)if(t(r[n])!=null)return n;return-1}function $Xe(t){let r=Br(t.ops),n=Br(t.fields),o=Br(t.params),i=Br(t.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[],d=!0;function p(h){Br(Aa(h)).forEach(m=>l[m]=1)}p(t.sort),r.forEach((h,m)=>{let g=n[m],y=Oi(g),b=mXe(h,y,i[m]);if(p(g),s.push(b),Pr(BL,h))a.push(zKt(h,n[m],o[m],b));else{if(g==null&&h!=="count"&&pt("Null aggregate field specified."),h==="count"){c.push(b);return}d=!1;let x=u[y];x||(x=u[y]=[],x.field=g,f.push(x)),x.push(gXe(h,b))}}),(c.length||f.length)&&(this.cell=GKt(f,c,d)),this.inputs=Object.keys(l)}function GKt(t,r,n){t=t.map(u=>bXe(u,u.field));let o={num:0,agg:null,store:!1,count:r};if(!n)for(var i=t.length,s=o.agg=Array(i),a=0;a<i;++a)s[a]=new t[a](o);if(o.store)var l=o.data=new tpe;return o.add=function(u){if(o.num+=1,!n){l&&l.add(u);for(let c=0;c<i;++c)s[c].add(s[c].get(u),u)}},o.rem=function(u){if(o.num-=1,!n){l&&l.rem(u);for(let c=0;c<i;++c)s[c].rem(s[c].get(u),u)}},o.set=function(u){let c,f;for(l&&l.values(),c=0,f=r.length;c<f;++c)u[r[c]]=o.num;if(!n)for(c=0,f=s.length;c<f;++c)s[c].set(u)},o.init=function(){o.num=0,l&&l.reset();for(let u=0;u<i;++u)s[u].init()},o}function Epe(t){et.call(this,{},t),this._mlen=0,this._mods=[]}function WKt(t,r,n,o){let i=o.sort,s=i&&!o.ignorePeers,a=o.frame||[null,0],l=t.data(n),u=l.length,c=s?ny(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:i||Qa(-1)};r.init();for(let d=0;d<u;++d)qKt(f,a,d,u),s&&HKt(f,c),r.update(f,l[d])}function qKt(t,r,n,o){t.p0=t.i0,t.p1=t.i1,t.i0=r[0]==null?0:Math.max(0,n-Math.abs(r[0])),t.i1=r[1]==null?o:Math.min(o,n+Math.abs(r[1])+1),t.index=n}function HKt(t,r){let n=t.i0,o=t.i1-1,i=t.compare,s=t.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(t.i0=r.left(s,s[n])),o<a&&!i(s[o],s[o+1])&&(t.i1=r.right(s,s[o]))}var Qde,cKt,jL,$L,Ll,yKt,pXe,wKt,hXe,_Kt,_Xe,SKt,CXe,EKt,fq,kKt,$Kt,LXe,BL,VKt,zXe,UXe=N(()=>{"use strict";Ls();el();pN();Wo();yN();Qde=()=>{},cKt={init:Qde,add:Qde,rem:Qde,idx:0},jL={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,r)=>t.sum+=+r,rem:(t,r)=>t.sum-=r},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,r)=>t.product*=r,rem:(t,r)=>t.product/=r},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,r)=>(t.mean_d=r-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,r)=>(t.mean_d=r-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,r)=>t.dev+=t.mean_d*(r-t.mean),rem:(t,r)=>t.dev-=t.mean_d*(r-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,r)=>{(r<t.min||t.min===void 0)&&(t.min=r)},rem:(t,r)=>{r<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,r)=>{(r>t.max||t.max===void 0)&&(t.max=r)},rem:(t,r)=>{r>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,r,n)=>{r<t.min&&(t.argmin=n)},rem:(t,r)=>{r<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,r,n)=>{r>t.max&&(t.argmax=n)},rem:(t,r)=>{r>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},$L=Object.keys(jL);$L.forEach(t=>{jL[t]=fKt(t,jL[t])});Ll=tpe.prototype;Ll.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ll.add=function(t){this._add.push(t)};Ll.rem=function(t){this._rem.push(t)};Ll.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,r=this._rem,n=this._key,o=t.length,i=r.length,s=Array(o-i),a={},l,u,c;for(l=0;l<i;++l)a[n(r[l])]=1;for(l=0,u=0;l<o;++l)a[n(c=t[l])]?a[n(c)]=0:s[u++]=c;return this._rem=[],this._add=s};Ll.distinct=function(t){let r=this.values(),n={},o=r.length,i=0,s;for(;--o>=0;)s=t(r[o])+"",Pr(n,s)||(n[s]=1,++i);return i};Ll.extent=function(t){if(this._get!==t||!this._ext){let r=this.values(),n=Pce(r,t);this._ext=[r[n[0]],r[n[1]]],this._get=t}return this._ext};Ll.argmin=function(t){return this.extent(t)[0]||{}};Ll.argmax=function(t){return this.extent(t)[1]||{}};Ll.min=function(t){let r=this.extent(t)[0];return r!=null?t(r):void 0};Ll.max=function(t){let r=this.extent(t)[1];return r!=null?t(r):void 0};Ll.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=WW(this.values(),t),this._get=t),this._q};Ll.q1=function(t){return this.quartile(t)[0]};Ll.q2=function(t){return this.quartile(t)[1]};Ll.q3=function(t){return this.quartile(t)[2]};Ll.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=ede(this.values(),1e3,.05,t),this._get=t),this._ci};Ll.ci0=function(t){return this.ci(t)[0]};Ll.ci1=function(t){return this.ci(t)[1]};Jw.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$L},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Dt(Jw,et,{transform(t,r){let n=this,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.modified();return n.stamp=o.stamp,n.value&&(i||r.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),o.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),r.clean()&&n._drop&&o.clean(!0).runAfter(()=>this.clean()),n.changes(o)},cross(){let t=this,r=t.value,n=t._dnames,o=n.map(()=>({})),i=n.length;function s(l){let u,c,f,d;for(u in l)for(f=l[u].tuple,c=0;c<i;++c)o[c][d=f[n[c]]]=d}s(t._prev),s(r);function a(l,u,c){let f=n[c],d=o[c++];for(let p in d){let h=l?l+"|"+p:p;u[f]=d[p],c<i?a(h,u,c):r[h]||t.cell(h,u)}}a("",{},0)},init(t){let r=this._inputs=[],n=this._outputs=[],o={};function i(y){let b=Br(Aa(y)),x=b.length,v=0,w;for(;v<x;++v)o[w=b[v]]||(o[w]=1,r.push(w))}this._dims=Br(t.groupby),this._dnames=this._dims.map(y=>{let b=Oi(y);return i(y),n.push(b),b}),this.cellkey=t.key?t.key:epe(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let s=t.fields||[null],a=t.ops||["count"],l=t.as||[],u=s.length,c={},f,d,p,h,m,g;for(u!==a.length&&pt("Unmatched number of fields and aggregate ops."),g=0;g<u;++g){if(f=s[g],d=a[g],f==null&&d!=="count"&&pt("Null aggregate field specified."),h=Oi(f),m=mXe(d,h,l[g]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[h],p||(i(f),p=c[h]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(gXe(d,m))}return this._measures=this._measures.map(y=>bXe(y,y.field)),{}},cellkey:epe(),cell(t,r){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,r),this._adds[this._alen++]=n),n},newcell(t,r){let n={key:t,num:0,agg:null,tuple:this.newtuple(r,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let o=this._measures,i=o.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new o[s](n)}return n.store&&(n.data=new tpe),n},newtuple(t,r){let n=this._dnames,o=this._dims,i=o.length,s={};for(let a=0;a<i;++a)s[n[a]]=o[a](t);return r?PW(r.tuple,s):Nn(s)},clean(){let t=this.value;for(let r in t)t[r].num===0&&delete t[r]},add(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].add(o[i].get(t),t)},rem(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].rem(o[i].get(t),t)},celltuple(t){let r=t.tuple,n=this._counts;t.store&&t.data.values();for(let o=0,i=n.length;o<i;++o)r[n[o]]=t.num;if(!this._countOnly){let o=t.agg;for(let i=0,s=o.length;i<s;++i)o[i].set(r)}return r},changes(t){let r=this._adds,n=this._mods,o=this._prev,i=this._drop,s=t.add,a=t.rem,l=t.mod,u,c,f,d;if(o)for(c in o)u=o[c],(!i||u.num)&&a.push(u.tuple);for(f=0,d=this._alen;f<d;++f)s.push(this.celltuple(r[f])),r[f]=null;for(f=0,d=this._mlen;f<d;++f)u=n[f],(u.num===0&&i?a:l).push(this.celltuple(u)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,t}});yKt=1e-14;rpe.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Dt(rpe,et,{transform(t,r){let n=t.interval!==!1,o=this._bins(t),i=o.start,s=o.step,a=t.as||["bin0","bin1"],l=a[0],u=a[1],c;return t.modified()?(r=r.reflow(!0),c=r.SOURCE):c=r.modified(Aa(t.field))?r.ADD_MOD:r.ADD,r.visit(c,n?f=>{let d=o(f);f[l]=d,f[u]=d==null?null:i+s*(1+(d-i)/s)}:f=>f[l]=o(f)),r.modifies(n?a:l)},_bins(t){if(this.value&&!t.modified())return this.value;let r=t.field,n=Jfe(t),o=n.step,i=n.start,s=i+Math.ceil((n.stop-i)/o)*o,a,l;(a=t.anchor)!=null&&(l=a-(i+o*Math.floor((a-i)/o)),i+=l,s+=l);let u=function(c){let f=Zh(r(c));return f==null?null:f<i?-1/0:f>s?1/0:(f=Math.max(i,Math.min(f,s-o)),i+o*Math.floor(yKt+(f-i)/o))};return u.start=i,u.stop=n.stop,u.step=o,this.value=bd(u,Aa(r),t.name||"bin_"+Oi(r))}});npe.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Dt(npe,et,{transform(t,r){let n=r.fork(r.ALL),o=xXe(_r,this.value,n.materialize(n.ADD).add),i=t.sort,s=r.changed()||i&&(t.modified("sort")||r.modified(i.fields));return n.visit(n.REM,o.remove),this.modified(s),this.value=n.source=o.data(ry(i),s),r.source&&r.source.root&&(this.value.root=r.source.root),n}});Dt(vXe,Fo);ope.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};Dt(ope,et,{transform(t,r){let n=d=>p=>{for(var h=xKt(l(p),t.case,s)||[],m,g=0,y=h.length;g<y;++g)a.test(m=h[g])||d(m)},o=this._parameterCheck(t,r),i=this._counts,s=this._match,a=this._stop,l=t.field,u=t.as||["text","count"],c=n(d=>i[d]=1+(i[d]||0)),f=n(d=>i[d]-=1);return o?r.visit(r.SOURCE,c):(r.visit(r.ADD,c),r.visit(r.REM,f)),this._finish(r,u)},_parameterCheck(t,r){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||r.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,r){let n=this._counts,o=this._tuples||(this._tuples={}),i=r[0],s=r[1],a=t.fork(t.NO_SOURCE|t.NO_FIELDS),l,u,c;for(l in n)u=o[l],c=n[l]||0,!u&&c?(o[l]=u=Nn({}),u[i]=l,u[s]=c,a.add.push(u)):c===0?(u&&a.rem.push(u),n[l]=null,o[l]=null):u[s]!==c&&(u[s]=c,a.mod.push(u));return a.modifies(r)}});ipe.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Dt(ipe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.as||["a","b"],i=o[0],s=o[1],a=!this.value||r.changed(r.ADD_REM)||t.modified("as")||t.modified("filter"),l=this.value;return a?(l&&(n.rem=l),l=r.materialize(r.SOURCE).source,n.add=this.value=vKt(l,i,s,t.filter||W0)):n.mod=l,n.source=this.value,n.modifies(o)}});pXe={kde:XW,mixture:nde,normal:YW,lognormal:rde,uniform:ode},wKt="distributions",hXe="function",_Kt="field";_Xe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],SKt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:_Xe},{name:"weights",type:"number",array:!0}]};spe.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:_Xe.concat(SKt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Dt(spe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=wXe(t.distribution,CKt(r)),i=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200,a=t.method||"pdf";a!=="pdf"&&a!=="cdf"&&pt("Invalid density method: "+a),!t.extent&&!o.data&&pt("Missing density extent parameter."),a=o[a];let l=t.as||["value","density"],u=t.extent||Qh(o.data()),c=dN(a,u,i,s).map(f=>{let d={};return d[l[0]]=f[0],d[l[1]]=f[1],Nn(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});CXe="bin";lpe.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:CXe}]};EKt=(t,r)=>vE(Qh(t,r))/30;Dt(lpe,et,{transform(t,r){if(this.value&&!(t.modified()||r.changed()))return r;let n=r.materialize(r.SOURCE).source,o=ape(r.source,t.groupby,uc),i=t.smooth||!1,s=t.field,a=t.step||EKt(n,s),l=ry((m,g)=>s(m)-s(g)),u=t.as||CXe,c=o.length,f=1/0,d=-1/0,p=0,h;for(;p<c;++p){let m=o[p].sort(l);h=-1;for(let g of tde(m,a,i,s))g<f&&(f=g),g>d&&(d=g),m[++h][u]=g}return this.value={start:f,stop:d,step:a},r.reflow(!0).modifies(u)}});Dt(EXe,Fo);upe.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Dt(upe,et,{transform(t,r){let n=this.value,o=t.field,i=r.changed()||r.modified(o.fields)||t.modified("field"),s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),r.visit(i?r.SOURCE:r.ADD,l=>{let u=Zh(o(l));u!=null&&(u<s&&(s=u),u>a&&(a=u))}),!Number.isFinite(s)||!Number.isFinite(a)){let l=Oi(o);l&&(l=` for field "${l}"`),r.dataflow.warn(`Infinite extent${l}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});Dt(cpe,Fo,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});Dt(dq,et,{activate(t){this._targets[this._targets.active++]=t},subflow(t,r,n,o){let i=this.value,s=Pr(i,t)&&i[t],a,l;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(l=o||(l=this._group[t])&&l.tuple,a=n.dataflow,s=new cpe(n.fork(n.NO_SOURCE),this),a.add(s).connect(r(a,t,l)),i[t]=s,this.activate(s)),s},clean(){let t=this.value,r=0;for(let n in t)if(t[n].count===0){let o=t[n].detachSubflow;o&&o(),delete t[n],++r}if(r){let n=this._targets.filter(o=>o&&o.count>0);this.initTargets(n)}},initTargets(t){let r=this._targets,n=r.length,o=t?t.length:0,i=0;for(;i<o;++i)r[i]=t[i];for(;i<n&&r[i]!=null;++i)r[i]=null;r.active=o},transform(t,r){let n=r.dataflow,o=t.key,i=t.subflow,s=this._keys,a=t.modified("key"),l=u=>this.subflow(u,i,r);return this._group=t.group||{},this.initTargets(),r.visit(r.REM,u=>{let c=_r(u),f=s.get(c);f!==void 0&&(s.delete(c),l(f).rem(u))}),r.visit(r.ADD,u=>{let c=o(u);s.set(_r(u),c),l(c).add(u)}),a||r.modified(o.fields)?r.visit(r.MOD,u=>{let c=_r(u),f=s.get(c),d=o(u);f===d?l(d).mod(u):(s.set(c,d),l(f).rem(u),l(d).add(u))}):r.changed(r.MOD)&&r.visit(r.MOD,u=>{l(s.get(_r(u))).mod(u)}),a&&r.visit(r.REFLOW,u=>{let c=_r(u),f=s.get(c),d=o(u);f!==d&&(s.set(c,d),l(f).rem(u),l(d).add(u))}),r.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),r}});Dt(TXe,Fo);fpe.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Dt(fpe,et,{transform(t,r){let n=r.dataflow,o=this.value,i=r.fork(),s=i.add,a=i.rem,l=i.mod,u=t.expr,c=!0;r.visit(r.REM,d=>{let p=_r(d);o.has(p)?o.delete(p):a.push(d)}),r.visit(r.ADD,d=>{u(d,t)?s.push(d):o.set(_r(d),1)});function f(d){let p=_r(d),h=u(d,t),m=o.get(p);h&&m?(o.delete(p),s.push(d)):!h&&!m?(o.set(p,1),a.push(d)):c&&h&&!m&&l.push(d)}return r.visit(r.MOD,f),t.modified()&&(c=!1,r.visit(r.REFLOW,f)),o.empty>n.cleanThreshold&&n.runAfter(o.clean),i}});dpe.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Dt(dpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=SXe(o,t.as||[]),s=t.index||null,a=i.length;return n.rem=this.value,r.visit(r.SOURCE,l=>{let u=o.map(m=>m(l)),c=u.reduce((m,g)=>Math.max(m,g.length),0),f=0,d,p,h;for(;f<c;++f){for(p=RW(l),d=0;d<a;++d)p[i[d]]=(h=u[d][f])==null?null:h;s&&(p[s]=f),n.add.push(p)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});ppe.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Dt(ppe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=o.map(Oi),s=t.as||["key","value"],a=s[0],l=s[1],u=o.length;return n.rem=this.value,r.visit(r.SOURCE,c=>{for(let f=0,d;f<u;++f)d=RW(c),d[a]=i[f],d[l]=o[f](c),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});hpe.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Dt(hpe,et,{transform(t,r){let n=t.expr,o=t.as,i=t.modified(),s=t.initonly?r.ADD:i?r.SOURCE:r.modified(n.fields)||r.modified(o)?r.ADD_MOD:r.ADD;return i&&(r=r.materialize().reflow(!0)),t.initonly||r.modifies(o),r.visit(s,a=>a[o]=n(a,t))}});Dt(AXe,et,{transform(t,r){let n=r.fork(r.ALL),o=t.generator,i=this.value,s=t.size-i.length,a,l,u;if(s>0){for(a=[];--s>=0;)a.push(u=Nn(o(t))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else l=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,i=i.slice(-s);return n.source=this.value=i,n}});fq={value:"value",median:SL,mean:VW,min:NE,max:kp},kKt=[];mpe.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};Dt(mpe,et,{transform(t,r){var n=r.fork(r.ALL),o=IKt(t),i=DKt(t),s=Oi(t.field),a=Oi(t.key),l=(t.groupby||[]).map(Oi),u=NKt(r.source,t.groupby,t.key,t.keyvals),c=[],f=this.value,d=u.domain.length,p,h,m,g,y,b,x,v,w,_;for(y=0,v=u.length;y<v;++y)for(p=u[y],m=p.values,h=NaN,x=0;x<d;++x)if(p[x]==null){for(g=u.domain[x],_={_impute:!0},b=0,w=m.length;b<w;++b)_[l[b]]=m[b];_[a]=g,_[s]=Number.isNaN(h)?h=o(p,i):h,c.push(Nn(_))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=c,n}});gpe.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:$L},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Dt(gpe,Jw,{transform(t,r){let n=this,o=t.modified(),i;return n.value&&(o||r.modified(n._inputs,!0))?(i=n.value=o?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),n.changes(),r.visit(r.SOURCE,s=>{an(s,i[n.cellkey(s)].tuple)}),r.reflow(o).modifies(this._outputs)},changes(){let t=this._adds,r=this._mods,n,o;for(n=0,o=this._alen;n<o;++n)this.celltuple(t[n]),t[n]=null;for(n=0,o=this._mlen;n<o;++n)this.celltuple(r[n]),r[n]=null;this._alen=this._mlen=0}});ype.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Dt(ype,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=ape(o,t.groupby,t.field),s=(t.groupby||[]).map(Oi),a=t.bandwidth,l=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[],f=t.extent,d=t.steps||t.minsteps||25,p=t.steps||t.maxsteps||200;l!=="pdf"&&l!=="cdf"&&pt("Invalid density method: "+l),t.resolve==="shared"&&(f||(f=Qh(o,t.field)),d=p=t.steps||p),i.forEach(h=>{let m=XW(h,a)[l],g=t.counts?h.length:1,y=f||Qh(h);dN(m,y,d,p).forEach(b=>{let x={};for(let v=0;v<s.length;++v)x[s[v]]=h.dims[v];x[u[0]]=b[0],x[u[1]]=b[1]*g,c.push(Nn(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});Dt(kXe,Fo);Dt(IXe,et,{transform(t,r){let n=r.dataflow;return this._pending?Jde(this,r,this._pending):FKt(t)?r.StopPropagation:t.values?Jde(this,r,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(i=>(this._pending=Br(i.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(o=>Jde(this,r,Br(o.data)))}});bpe.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Dt(bpe,et,{transform(t,r){let n=t.fields,o=t.index,i=t.values,s=t.default==null?null:t.default,a=t.modified(),l=n.length,u=a?r.SOURCE:r.ADD,c=r,f=t.as,d,p,h;return i?(p=i.length,l>1&&!f&&pt('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==l*p&&pt('The "as" parameter has too few output field names.'),f=f||i.map(Oi),d=function(m){for(var g=0,y=0,b,x;g<l;++g)if(x=o.get(n[g](m)),x==null)for(b=0;b<p;++b,++y)m[f[y]]=s;else for(b=0;b<p;++b,++y)m[f[y]]=i[b](x)}):(f||pt("Missing output field names."),d=function(m){for(var g=0,y;g<l;++g)y=o.get(n[g](m)),m[f[g]]=y??s}),a?c=r.reflow(!0):(h=n.some(m=>r.modified(m.fields)),u|=h?r.MOD:0),r.visit(u,d),c.modifies(f)}});Dt(DXe,Fo);Dt(NXe,Fo);Dt(MXe,et,{transform(t,r){return this.modified(t.modified()),this.value=t,r.fork(r.NO_SOURCE|r.NO_FIELDS)}});xpe.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:$L,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Dt(xpe,Jw,{_transform:Jw.prototype.transform,transform(t,r){return this._transform(PKt(t,r),r)}});Dt(FXe,dq,{transform(t,r){let n=t.subflow,o=t.field,i=s=>this.subflow(_r(s),n,r,s);return(t.modified("field")||o&&r.modified(Aa(o)))&&pt("PreFacet does not support field modification."),this.initTargets(),o?(r.visit(r.MOD,s=>{let a=i(s);o(s).forEach(l=>a.mod(l))}),r.visit(r.ADD,s=>{let a=i(s);o(s).forEach(l=>a.add(Nn(l)))}),r.visit(r.REM,s=>{let a=i(s);o(s).forEach(l=>a.rem(l))})):(r.visit(r.MOD,s=>i(s).mod(s)),r.visit(r.ADD,s=>i(s).add(s)),r.visit(r.REM,s=>i(s).rem(s))),r.clean()&&r.runAfter(()=>this.clean()),r}});vpe.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Dt(vpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=SXe(t.fields,t.as||[]),s=o?(l,u)=>BKt(l,u,o,i):IE,a;return this.value?a=this.value:(r=r.addAll(),a=this.value={}),r.visit(r.REM,l=>{let u=_r(l);n.rem.push(a[u]),a[u]=null}),r.visit(r.ADD,l=>{let u=s(l,Nn({}));a[_r(l)]=u,n.add.push(u)}),r.visit(r.MOD,l=>{n.mod.push(s(l,a[_r(l)]))}),n}});Dt(OXe,et,{transform(t,r){return this.value=t.value,t.modified("value")?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});wpe.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};$Kt=1e-14;Dt(wpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=t.as||["prob","value"];if(this.value&&!t.modified()&&!r.changed())return n.source=this.value,n;let i=r.materialize(r.SOURCE).source,s=ape(i,t.groupby,t.field),a=(t.groupby||[]).map(Oi),l=[],u=t.step||.01,c=t.probs||sa(u/2,1-$Kt,u),f=c.length;return s.forEach(d=>{let p=GW(d,c);for(let h=0;h<f;++h){let m={};for(let g=0;g<a.length;++g)m[a[g]]=d.dims[g];m[o[0]]=c[h],m[o[1]]=p[h],l.push(Nn(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});Dt(RXe,et,{transform(t,r){let n,o;return this.value?o=this.value:(n=r=r.addAll(),o=this.value={}),t.derive&&(n=r.fork(r.NO_SOURCE),r.visit(r.REM,i=>{let s=_r(i);n.rem.push(o[s]),o[s]=null}),r.visit(r.ADD,i=>{let s=RW(i);o[_r(i)]=s,n.add.push(s)}),r.visit(r.MOD,i=>{let s=o[_r(i)];for(let a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});_pe.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Dt(_pe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.modified("size"),i=t.size,s=this.value.reduce((f,d)=>(f[_r(d)]=1,f),{}),a=this.value,l=this.count,u=0;function c(f){let d,p;a.length<i?a.push(f):(p=~~((l+1)*wd()),p<a.length&&p>=u&&(d=a[p],s[_r(d)]&&n.rem.push(d),a[p]=f)),++l}if(r.rem.length&&(r.visit(r.REM,f=>{let d=_r(f);s[d]&&(s[d]=-1,n.rem.push(f)),--l}),a=a.filter(f=>s[_r(f)]!==-1)),(r.rem.length||o)&&a.length<i&&r.source&&(u=l=a.length,r.visit(r.SOURCE,f=>{s[_r(f)]||c(f)}),u=-1),o&&a.length>i){let f=a.length-i;for(let d=0;d<f;++d)s[_r(a[d])]=-1,n.rem.push(a[d]);a=a.slice(f)}return r.mod.length&&r.visit(r.MOD,f=>{s[_r(f)]&&n.mod.push(f)}),r.add.length&&r.visit(r.ADD,c),(r.add.length||u<0)&&(n.add=a.filter(f=>!s[_r(f)])),this.count=l,this.value=n.source=a,n}});Spe.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Dt(Spe,et,{transform(t,r){if(this.value&&!t.modified())return;let n=r.materialize().fork(r.MOD),o=t.as||"data";return n.rem=this.value?r.rem.concat(this.value):r.rem,this.value=sa(t.start,t.stop,t.step||1).map(i=>{let s={};return s[o]=i,Nn(s)}),n.add=r.add.concat(this.value),n}});Dt(PXe,et,{transform(t,r){return this.value=r.source,r.changed()?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});LXe=["unit0","unit1"];Cpe.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:lq,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:LXe}]};Dt(Cpe,et,{transform(t,r){let n=t.field,o=t.interval!==!1,i=t.timezone==="utc",s=this._floor(t,r),a=(i?ov:nv)(s.unit).offset,l=t.as||LXe,u=l[0],c=l[1],f=s.step,d=s.start||1/0,p=s.stop||-1/0,h=r.ADD;return(t.modified()||r.modified(Aa(n)))&&(r=r.reflow(!0),h=r.SOURCE,d=1/0,p=-1/0),r.visit(h,m=>{let g=n(m),y,b;g==null?(m[u]=null,o&&(m[c]=null)):(m[u]=y=b=s(g),o&&(m[c]=b=a(y,f)),y<d&&(d=y),b>p&&(p=b))}),s.start=d,s.stop=p,r.modifies(o?l:u)},_floor(t,r){let n=t.timezone==="utc",{units:o,step:i}=t.units?{units:t.units,step:t.step||1}:Zde({extent:t.extent||Qh(r.materialize(r.SOURCE).source,t.field),maxbins:t.maxbins}),s=uq(o),a=this.value||{},l=(n?qde:Wde)(s,i);return l.unit=Un(s),l.units=s,l.step=i,l.start=a.start,l.stop=a.stop,this.value=l}});Dt(jXe,et,{transform(t,r){let n=r.dataflow,o=t.field,i=this.value,s=l=>i.set(o(l),l),a=!0;return t.modified("field")||r.modified(o.fields)?(i.clear(),r.visit(r.SOURCE,s)):r.changed()?(r.visit(r.REM,l=>i.delete(o(l))),r.visit(r.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r.fork()}});Dt(BXe,et,{transform(t,r){(!this.value||t.modified("field")||t.modified("sort")||r.changed()||t.sort&&r.modified(t.sort.fields))&&(this.value=(t.sort?r.source.slice().sort(ry(t.sort)):r.source).map(t.field))}});BL={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?++t:t}}},percent_rank:function(){let t=BL.rank(),r=t.next;return{init:t.init,next:n=>(r(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:r=>{let n=r.data,o=r.compare,i=r.index;if(t<i){for(;i+1<n.length&&!o(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,r){r=+r,r>0||pt("ntile num must be greater than zero.");let n=BL.cume_dist(),o=n.next;return{init:n.init,next:i=>Math.ceil(r*o(i))}},lag:function(t,r){return r=+r||1,{next:n=>{let o=n.index-r;return o>=0?t(n.data[o]):null}}},lead:function(t,r){return r=+r||1,{next:n=>{let o=n.index+r,i=n.data;return o<i.length?t(i[o]):null}}},first_value:function(t){return{next:r=>t(r.data[r.i0])}},last_value:function(t){return{next:r=>t(r.data[r.i1-1])}},nth_value:function(t,r){return r=+r,r>0||pt("nth_value nth must be greater than zero."),{next:n=>{let o=n.i0+(r-1);return o<n.i1?t(n.data[o]):null}}},prev_value:function(t){let r;return{init:()=>r=null,next:n=>{let o=t(n.data[n.index]);return o!=null?r=o:r}}},next_value:function(t){let r,n;return{init:()=>(r=null,n=-1),next:o=>{let i=o.data;return o.index<=n?r:(n=UKt(t,i,o.index))<0?(n=i.length,r=null):r=t(i[n])}}}};VKt=Object.keys(BL);zXe=$Xe.prototype;zXe.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};zXe.update=function(t,r){let n=this.cell,o=this.windows,i=t.data,s=o&&o.length,a;if(n){for(a=t.p0;a<t.i0;++a)n.rem(i[a]);for(a=t.p1;a<t.i1;++a)n.add(i[a]);n.set(r)}for(a=0;a<s;++a)o[a].update(t,r)};Epe.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:VKt.concat($L)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Dt(Epe,et,{transform(t,r){this.stamp=r.stamp;let n=t.modified(),o=ry(t.sort),i=epe(t.groupby),s=l=>this.group(i(l)),a=this.state;(!a||n)&&(a=this.state=new $Xe(t)),n||r.modified(a.inputs)?(this.value={},r.visit(r.SOURCE,l=>s(l).add(l))):(r.visit(r.REM,l=>s(l).remove(l)),r.visit(r.ADD,l=>s(l).add(l)));for(let l=0,u=this._mlen;l<u;++l)WKt(this._mods[l],a,o,t);return this._mlen=0,this._mods=[],r.reflow(n).modifies(a.outputs)},group(t){let r=this.value[t];return r||(r=this.value[t]=xXe(_r),r.stamp=-1),r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r),r}})});function bN(t,r,n){return t.fields=r||[],t.fname=n,t}function YKt(t){return t.length===1?XKt(t[0]):KKt(t)}function yu(t){throw Error(t)}function ZKt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||yu("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&yu("Access path missing closing bracket: "+t),o&&yu("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Ape(t,r,n){let o=ZKt(t);return t=o.length===1?o[0]:t,bN((n&&n.get||YKt)(o),[t],r||t)}function iv(t){return t===Object(t)}function af(t){return t[t.length-1]}function Ipe(t){return t==null||t===""?null:+t}function xN(t){return t!=null?gc(t)?t:[t]:[]}function e_(t){return typeof t=="function"}function sv(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function Mp(t,r){return eZt.call(t,r)}function av(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),sv(o,n)}function GXe(t){return t&&e_(t[Symbol.iterator])}function vN(t){return typeof t=="string"}function WXe(t){t=+t||tZt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>Mp(r,a)||Mp(n,a),get:a=>Mp(r,a)?r[a]:Mp(n,a)?s(a,n[a]):void 0,set:(a,l)=>Mp(r,a)?r[a]=l:s(a,l)}}function pq(t){return gc(t)?"["+t.map(pq)+"]":iv(t)||vN(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function zL(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var XKt,KKt,iEo,VXe,QKt,JKt,kpe,sEo,gc,eZt,tZt,UE=N(()=>{"use strict";XKt=t=>function(r){return r[t]},KKt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};iEo=Ape("id"),VXe=bN(t=>t,[],"identity"),QKt=bN(()=>0,[],"zero"),JKt=bN(()=>1,[],"one"),kpe=bN(()=>!0,[],"true"),sEo=bN(()=>!1,[],"false"),gc=Array.isArray;eZt=Object.prototype.hasOwnProperty;tZt=1e4});function Vn(t){return function(){return t}}var UL=N(()=>{"use strict"});function HXe(t){return t>1?0:t<-1?r_:Math.acos(t)}function Npe(t){return t>=1?VL:t<=-1?-VL:Math.asin(t)}var Dpe,jl,t_,qXe,hq,sm,lv,rl,r_,VL,mq,gq=N(()=>{"use strict";Dpe=Math.abs,jl=Math.atan2,t_=Math.cos,qXe=Math.max,hq=Math.min,sm=Math.sin,lv=Math.sqrt,rl=1e-12,r_=Math.PI,VL=r_/2,mq=2*r_});function YXe(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function nZt(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return YXe;let n=10**r;return function(o){this._+=o[0];for(let i=1,s=o.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+o[i]}}function GL(){return new GE}var Mpe,Fpe,VE,rZt,GE,XXe=N(()=>{"use strict";Mpe=Math.PI,Fpe=2*Mpe,VE=1e-6,rZt=Fpe-VE;GE=class{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?YXe:nZt(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,o,i){this._append`Q${+r},${+n},${this._x1=+o},${this._y1=+i}`}bezierCurveTo(r,n,o,i,s,a){this._append`C${+r},${+n},${+o},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(r,n,o,i,s){if(r=+r,n=+n,o=+o,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=o-r,c=i-n,f=a-r,d=l-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(p>VE)if(!(Math.abs(d*u-c*f)>VE)||!s)this._append`L${this._x1=r},${this._y1=n}`;else{let h=o-a,m=i-l,g=u*u+c*c,y=h*h+m*m,b=Math.sqrt(g),x=Math.sqrt(p),v=s*Math.tan((Mpe-Math.acos((g+p-y)/(2*b*x)))/2),w=v/x,_=v/b;Math.abs(w-1)>VE&&this._append`L${r+w*f},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*h>f*m)},${this._x1=r+_*u},${this._y1=n+_*c}`}}arc(r,n,o,i,s,a){if(r=+r,n=+n,o=+o,a=!!a,o<0)throw new Error(`negative radius: ${o}`);let l=o*Math.cos(i),u=o*Math.sin(i),c=r+l,f=n+u,d=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>VE||Math.abs(this._y1-f)>VE)&&this._append`L${c},${f}`,o&&(p<0&&(p=p%Fpe+Fpe),p>rZt?this._append`A${o},${o},0,1,${d},${r-l},${n-u}A${o},${o},0,1,${d},${this._x1=c},${this._y1=f}`:p>VE&&this._append`A${o},${o},0,${+(p>=Mpe)},${d},${this._x1=r+o*Math.cos(s)},${this._y1=n+o*Math.sin(s)}`)}rect(r,n,o,i){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${o=+o}v${+i}h${-o}Z`}toString(){return this._}};GL.prototype=GE.prototype});var Ope=N(()=>{"use strict";XXe()});function n_(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{let o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);r=o}return t},()=>new GE(r)}var WL=N(()=>{"use strict";Ope()});function oZt(t){return t.innerRadius}function iZt(t){return t.outerRadius}function sZt(t){return t.startAngle}function aZt(t){return t.endAngle}function lZt(t){return t&&t.padAngle}function uZt(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<rl))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function yq(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/lv(l*l+u*u),f=c*u,d=-c*l,p=t+f,h=r+d,m=n+f,g=o+d,y=(p+m)/2,b=(h+g)/2,x=m-p,v=g-h,w=x*x+v*v,_=i-s,S=p*g-m*h,C=(v<0?-1:1)*lv(qXe(0,_*_*w-S*S)),E=(S*v-x*C)/w,T=(-S*x-v*C)/w,I=(S*v+x*C)/w,k=(-S*x+v*C)/w,F=E-y,D=T-b,L=I-y,P=k-b;return F*F+D*D>L*L+P*P&&(E=I,T=k),{cx:E,cy:T,x01:-f,y01:-d,x11:E*(i/_-1),y11:T*(i/_-1)}}function Rpe(){var t=oZt,r=iZt,n=Vn(0),o=null,i=sZt,s=aZt,a=lZt,l=null,u=n_(c);function c(){var f,d,p=+t.apply(this,arguments),h=+r.apply(this,arguments),m=i.apply(this,arguments)-VL,g=s.apply(this,arguments)-VL,y=Dpe(g-m),b=g>m;if(l||(l=f=u()),h<p&&(d=h,h=p,p=d),!(h>rl))l.moveTo(0,0);else if(y>mq-rl)l.moveTo(h*t_(m),h*sm(m)),l.arc(0,0,h,m,g,!b),p>rl&&(l.moveTo(p*t_(g),p*sm(g)),l.arc(0,0,p,g,m,b));else{var x=m,v=g,w=m,_=g,S=y,C=y,E=a.apply(this,arguments)/2,T=E>rl&&(o?+o.apply(this,arguments):lv(p*p+h*h)),I=hq(Dpe(h-p)/2,+n.apply(this,arguments)),k=I,F=I,D,L;if(T>rl){var P=Npe(T/p*sm(E)),R=Npe(T/h*sm(E));(S-=P*2)>rl?(P*=b?1:-1,w+=P,_-=P):(S=0,w=_=(m+g)/2),(C-=R*2)>rl?(R*=b?1:-1,x+=R,v-=R):(C=0,x=v=(m+g)/2)}var V=h*t_(x),G=h*sm(x),U=p*t_(_),H=p*sm(_);if(I>rl){var X=h*t_(v),fe=h*sm(v),$=p*t_(w),M=p*sm(w),z;if(y<r_)if(z=uZt(V,G,$,M,X,fe,U,H)){var q=V-z[0],ee=G-z[1],ae=X-z[0],Q=fe-z[1],le=1/sm(HXe((q*ae+ee*Q)/(lv(q*q+ee*ee)*lv(ae*ae+Q*Q)))/2),ie=lv(z[0]*z[0]+z[1]*z[1]);k=hq(I,(p-ie)/(le-1)),F=hq(I,(h-ie)/(le+1))}else k=F=0}C>rl?F>rl?(D=yq($,M,V,G,h,F,b),L=yq(X,fe,U,H,h,F,b),l.moveTo(D.cx+D.x01,D.cy+D.y01),F<I?l.arc(D.cx,D.cy,F,jl(D.y01,D.x01),jl(L.y01,L.x01),!b):(l.arc(D.cx,D.cy,F,jl(D.y01,D.x01),jl(D.y11,D.x11),!b),l.arc(0,0,h,jl(D.cy+D.y11,D.cx+D.x11),jl(L.cy+L.y11,L.cx+L.x11),!b),l.arc(L.cx,L.cy,F,jl(L.y11,L.x11),jl(L.y01,L.x01),!b))):(l.moveTo(V,G),l.arc(0,0,h,x,v,!b)):l.moveTo(V,G),!(p>rl)||!(S>rl)?l.lineTo(U,H):k>rl?(D=yq(U,H,X,fe,p,-k,b),L=yq(V,G,$,M,p,-k,b),l.lineTo(D.cx+D.x01,D.cy+D.y01),k<I?l.arc(D.cx,D.cy,k,jl(D.y01,D.x01),jl(L.y01,L.x01),!b):(l.arc(D.cx,D.cy,k,jl(D.y01,D.x01),jl(D.y11,D.x11),!b),l.arc(0,0,p,jl(D.cy+D.y11,D.cx+D.x11),jl(L.cy+L.y11,L.cx+L.x11),b),l.arc(L.cx,L.cy,k,jl(L.y11,L.x11),jl(L.y01,L.x01),!b))):l.arc(0,0,p,_,w,b)}if(l.closePath(),f)return l=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-r_/2;return[t_(d)*f,sm(d)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Vn(+f),c):t},c.outerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:Vn(+f),c):r},c.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Vn(+f),c):n},c.padRadius=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Vn(+f),c):o},c.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Vn(+f),c):i},c.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Vn(+f),c):s},c.padAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Vn(+f),c):a},c.context=function(f){return arguments.length?(l=f??null,c):l},c}var KXe=N(()=>{"use strict";UL();gq();WL()});function bq(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var vEo,Ppe=N(()=>{"use strict";vEo=Array.prototype.slice});function ZXe(t){this._context=t}function WE(t){return new ZXe(t)}var xq=N(()=>{"use strict";ZXe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function vq(t){return t[0]}function wq(t){return t[1]}var Lpe=N(()=>{"use strict"});function qL(t,r){var n=Vn(!0),o=null,i=WE,s=null,a=n_(l);t=typeof t=="function"?t:t===void 0?vq:Vn(t),r=typeof r=="function"?r:r===void 0?wq:Vn(r);function l(u){var c,f=(u=bq(u)).length,d,p=!1,h;for(o==null&&(s=i(h=a())),c=0;c<=f;++c)!(c<f&&n(d=u[c],c,u))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,c,u),+r(d,c,u));if(h)return s=null,h+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Vn(+u),l):t},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:Vn(+u),l):r},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Vn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,o!=null&&(s=i(o)),l):i},l.context=function(u){return arguments.length?(u==null?o=s=null:s=i(o=u),l):o},l}var jpe=N(()=>{"use strict";Ppe();UL();xq();WL();Lpe()});function _q(t,r,n){var o=null,i=Vn(!0),s=null,a=WE,l=null,u=n_(c);t=typeof t=="function"?t:t===void 0?vq:Vn(+t),r=typeof r=="function"?r:r===void 0?Vn(0):Vn(+r),n=typeof n=="function"?n:n===void 0?wq:Vn(+n);function c(d){var p,h,m,g=(d=bq(d)).length,y,b=!1,x,v=new Array(g),w=new Array(g);for(s==null&&(l=a(x=u())),p=0;p<=g;++p){if(!(p<g&&i(y=d[p],p,d))===b)if(b=!b)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=p-1;m>=h;--m)l.point(v[m],w[m]);l.lineEnd(),l.areaEnd()}b&&(v[p]=+t(y,p,d),w[p]=+r(y,p,d),l.point(o?+o(y,p,d):v[p],n?+n(y,p,d):w[p]))}if(x)return l=null,x+""||null}function f(){return qL().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Vn(+d),o=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Vn(+d),c):t},c.x1=function(d){return arguments.length?(o=d==null?null:typeof d=="function"?d:Vn(+d),c):o},c.y=function(d){return arguments.length?(r=typeof d=="function"?d:Vn(+d),n=null,c):r},c.y0=function(d){return arguments.length?(r=typeof d=="function"?d:Vn(+d),c):r},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Vn(+d),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(r)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(o).y(r)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Vn(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(l=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=l=null:l=a(s=d),c):s},c}var QXe=N(()=>{"use strict";Ppe();UL();xq();jpe();WL();Lpe()});var JXe,eKe=N(()=>{"use strict";gq();JXe={draw(t,r){let n=lv(r/r_);t.moveTo(n,0),t.arc(0,0,n,0,mq)}}});function Sq(t,r){let n=null,o=n_(i);t=typeof t=="function"?t:Vn(t||JXe),r=typeof r=="function"?r:Vn(r===void 0?64:+r);function i(){let s;if(n||(n=s=o()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Vn(s),i):t},i.size=function(s){return arguments.length?(r=typeof s=="function"?s:Vn(+s),i):r},i.context=function(s){return arguments.length?(n=s??null,i):n},i}var tKe=N(()=>{"use strict";UL();WL();eKe()});function Fp(){}var HL=N(()=>{"use strict"});function wN(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function YL(t){this._context=t}function Bpe(t){return new YL(t)}var XL=N(()=>{"use strict";YL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function rKe(t){this._context=t}function $pe(t){return new rKe(t)}var nKe=N(()=>{"use strict";HL();XL();rKe.prototype={areaStart:Fp,areaEnd:Fp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:wN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function oKe(t){this._context=t}function zpe(t){return new oKe(t)}var iKe=N(()=>{"use strict";XL();oKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:wN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function sKe(t,r){this._basis=new YL(t),this._beta=r}var Upe,aKe=N(()=>{"use strict";XL();sKe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};Upe=function t(r){function n(o){return r===1?new YL(o):new sKe(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function _N(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Cq(t,r){this._context=t,this._k=(1-r)/6}var Vpe,KL=N(()=>{"use strict";Cq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_N(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:_N(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Vpe=function t(r){function n(o){return new Cq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Eq(t,r){this._context=t,this._k=(1-r)/6}var Gpe,Wpe=N(()=>{"use strict";HL();KL();Eq.prototype={areaStart:Fp,areaEnd:Fp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:_N(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Gpe=function t(r){function n(o){return new Eq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Tq(t,r){this._context=t,this._k=(1-r)/6}var qpe,Hpe=N(()=>{"use strict";KL();Tq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_N(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};qpe=function t(r){function n(o){return new Tq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function ZL(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>rl){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>rl){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function lKe(t,r){this._context=t,this._alpha=r}var Ype,Aq=N(()=>{"use strict";gq();KL();lKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:ZL(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Ype=function t(r){function n(o){return r?new lKe(o,r):new Cq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function uKe(t,r){this._context=t,this._alpha=r}var Xpe,cKe=N(()=>{"use strict";Wpe();HL();Aq();uKe.prototype={areaStart:Fp,areaEnd:Fp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:ZL(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Xpe=function t(r){function n(o){return r?new uKe(o,r):new Eq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function fKe(t,r){this._context=t,this._alpha=r}var Kpe,dKe=N(()=>{"use strict";Hpe();Aq();fKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZL(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Kpe=function t(r){function n(o){return r?new fKe(o,r):new Tq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function pKe(t){this._context=t}function Zpe(t){return new pKe(t)}var hKe=N(()=>{"use strict";HL();pKe.prototype={areaStart:Fp,areaEnd:Fp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function mKe(t){return t<0?-1:1}function gKe(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(mKe(s)+mKe(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function yKe(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Qpe(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function kq(t){this._context=t}function bKe(t){this._context=new xKe(t)}function xKe(t){this._context=t}function Jpe(t){return new kq(t)}function ehe(t){return new bKe(t)}var vKe=N(()=>{"use strict";kq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qpe(this,this._t0,yKe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Qpe(this,yKe(this,n=gKe(this,t,r)),n);break;default:Qpe(this,this._t0,n=gKe(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(bKe.prototype=Object.create(kq.prototype)).point=function(t,r){kq.prototype.point.call(this,r,t)};xKe.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function _Ke(t){this._context=t}function wKe(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function the(t){return new _Ke(t)}var SKe=N(()=>{"use strict";_Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=wKe(t),i=wKe(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function Iq(t,r){this._context=t,this._t=r}function rhe(t){return new Iq(t,.5)}function nhe(t){return new Iq(t,0)}function ohe(t){return new Iq(t,1)}var CKe=N(()=>{"use strict";Iq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var EKe=N(()=>{"use strict";KXe();QXe();jpe();tKe();nKe();iKe();XL();aKe();Wpe();Hpe();KL();cKe();dKe();Aq();hKe();xq();vKe();SKe();CKe()});function lf(t,r){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=r,n}return null}var Dq,SN=N(()=>{"use strict";Dq=()=>typeof Image<"u"?Image:null});function kKe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function fZt(t,r){var n=kKe(t);return function(o,i){return r(n(o),i,t)}}function AKe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function uf(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function dZt(t){return t<0?"-"+uf(-t,6):t>9999?"+"+uf(t,6):uf(t,4)}function pZt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":dZt(t.getUTCFullYear(),4)+"-"+uf(t.getUTCMonth()+1,2)+"-"+uf(t.getUTCDate(),2)+(i?"T"+uf(r,2)+":"+uf(n,2)+":"+uf(o,2)+"."+uf(i,3)+"Z":o?"T"+uf(r,2)+":"+uf(n,2)+":"+uf(o,2)+"Z":n||r?"T"+uf(r,2)+":"+uf(n,2)+"Z":"")}function lhe(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?fZt(y,p):kKe(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===QL&&--m,d.charCodeAt(m-1)===ahe&&--m;function w(){if(x)return ihe;if(v)return v=!1,TKe;var S,C=g,E;if(d.charCodeAt(C)===she){for(;g++<m&&d.charCodeAt(g)!==she||d.charCodeAt(++g)===she;);return(S=g)>=m?x=!0:(E=d.charCodeAt(g++))===QL?v=!0:E===ahe&&(v=!0,d.charCodeAt(g)===QL&&++g),d.slice(C+1,S-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(S=g++))===QL)v=!0;else if(E===ahe)v=!0,d.charCodeAt(g)===QL&&++g;else if(E!==n)continue;return d.slice(C,S)}return x=!0,d.slice(C,m)}for(;(b=w())!==ihe;){for(var _=[];b!==TKe&&b!==ihe;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=AKe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=AKe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?pZt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var TKe,ihe,she,QL,ahe,IKe=N(()=>{"use strict";TKe={},ihe={},she=34,QL=10,ahe=13});var DKe=N(()=>{"use strict";IKe()});function sy(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var Nq=N(()=>{"use strict"});function uhe(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var NKe=N(()=>{"use strict"});function qE(t){let r,n,o;t.length!==2?(r=sy,n=(l,u)=>sy(t(l),u),o=(l,u)=>t(l)-u):(r=t===sy||t===uhe?t:hZt,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function hZt(){return 0}var che=N(()=>{"use strict";Nq();NKe()});function JL(t){return t===null?NaN:+t}var fhe=N(()=>{"use strict"});var MKe,ej,mZt,gZt,am,FKe=N(()=>{"use strict";Nq();che();fhe();MKe=qE(sy),ej=MKe.right,mZt=MKe.left,gZt=qE(JL).center,am=ej});function Mq(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=yZt?10:s>=bZt?5:s>=xZt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?Mq(t,r,n*2):[l,u,c]}function HE(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?Mq(r,t,n):Mq(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function tj(t,r,n){return r=+r,t=+t,n=+n,Mq(t,r,n)[2]}function o_(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?tj(r,t,n):tj(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var yZt,bZt,xZt,OKe=N(()=>{"use strict";yZt=Math.sqrt(50),bZt=Math.sqrt(10),xZt=Math.sqrt(2)});function dhe(t,r,n=JL){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var RKe=N(()=>{"use strict";fhe()});function Fq(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var PKe=N(()=>{"use strict"});var Op=N(()=>{"use strict";FKe();Nq();che();RKe();PKe();OKe();eL()});function LKe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function YE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var rj=N(()=>{"use strict"});function ay(t){return t=YE(Math.abs(t)),t?t[1]:NaN}var nj=N(()=>{"use strict";rj()});function jKe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var BKe=N(()=>{"use strict"});function $Ke(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var zKe=N(()=>{"use strict"});function Ad(t){if(!(r=vZt.exec(t)))throw new Error("invalid format: "+t);var r;return new Oq({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function Oq(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var vZt,phe=N(()=>{"use strict";vZt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Ad.prototype=Oq.prototype;Oq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function UKe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var VKe=N(()=>{"use strict"});function GKe(t,r){var n=YE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(hhe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+YE(t,Math.max(0,r+s-1))[0]}var hhe,mhe=N(()=>{"use strict";rj()});function ghe(t,r){var n=YE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var WKe=N(()=>{"use strict";rj()});var yhe,qKe=N(()=>{"use strict";rj();mhe();WKe();yhe={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:LKe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>ghe(t*100,r),r:ghe,s:GKe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function bhe(t){return t}var HKe=N(()=>{"use strict"});function xhe(t){var r=t.grouping===void 0||t.thousands===void 0?bhe:jKe(YKe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?bhe:$Ke(YKe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Ad(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):yhe[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=g==="$"?o:/[%p]/.test(_)?a:"",E=yhe[_],T=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(k){var F=S,D=C,L,P,R;if(_==="c")D=E(k)+D,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=UKe(k)),V&&+k==0&&m!=="+"&&(V=!1),F=(V?m==="("?m:l:m==="-"||m==="("?"":m)+F,D=(_==="s"?XKe[8+hhe/3]:"")+D+(V&&m==="("?")":""),T){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){D=(R===46?i+k.slice(L+1):k.slice(L))+D,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=F.length+k.length+D.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-D.length:1/0),U=""),h){case"<":k=F+k+D+U;break;case"=":k=F+U+k+D;break;case"^":k=U.slice(0,G=U.length>>1)+F+k+D+U.slice(G);break;default:k=U+F+k+D;break}return s(k)}return I.toString=function(){return d+""},I}function f(d,p){var h=c((d=Ad(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(ay(p)/3)))*3,g=Math.pow(10,-m),y=XKe[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var YKe,XKe,KKe=N(()=>{"use strict";nj();BKe();zKe();phe();VKe();qKe();mhe();HKe();YKe=Array.prototype.map,XKe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function vhe(t){return Rq=xhe(t),i_=Rq.format,CN=Rq.formatPrefix,Rq}var Rq,i_,CN,ZKe=N(()=>{"use strict";KKe();vhe({thousands:",",grouping:[3],currency:["$",""]})});function oj(t){return Math.max(0,-ay(Math.abs(t)))}var QKe=N(()=>{"use strict";nj()});function ij(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ay(r)/3)))*3-ay(Math.abs(t)))}var JKe=N(()=>{"use strict";nj()});function sj(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,ay(r)-ay(t))+1}var eZe=N(()=>{"use strict";nj()});var Pq=N(()=>{"use strict";ZKe();phe();QKe();JKe();eZe()});function ci(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>ci(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(whe.setTime(+s),_he.setTime(+a),t(whe),t(_he),Math.floor(n(whe,_he))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var whe,_he,uv=N(()=>{"use strict";whe=new Date,_he=new Date});var lm,tZe,She=N(()=>{"use strict";uv();lm=ci(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);lm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ci(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):lm);tZe=lm.range});var bu,rZe,Che=N(()=>{"use strict";uv();bu=ci(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),rZe=bu.range});var s_,wZt,a_,_Zt,Ehe=N(()=>{"use strict";uv();s_=ci(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),wZt=s_.range,a_=ci(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),_Zt=a_.range});var l_,SZt,u_,CZt,The=N(()=>{"use strict";uv();l_=ci(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),SZt=l_.range,u_=ci(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),CZt=u_.range});var cf,EZt,Rp,TZt,Lq,AZt,Ahe=N(()=>{"use strict";uv();cf=ci(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),EZt=cf.range,Rp=ci(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),TZt=Rp.range,Lq=ci(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),AZt=Lq.range});function ZE(t){return ci(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function QE(t){return ci(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var Pp,EN,oZe,iZe,c_,sZe,aZe,lZe,kZt,IZt,DZt,NZt,MZt,FZt,Lp,TN,uZe,cZe,f_,fZe,dZe,pZe,OZt,RZt,PZt,LZt,jZt,BZt,khe=N(()=>{"use strict";uv();Pp=ZE(0),EN=ZE(1),oZe=ZE(2),iZe=ZE(3),c_=ZE(4),sZe=ZE(5),aZe=ZE(6),lZe=Pp.range,kZt=EN.range,IZt=oZe.range,DZt=iZe.range,NZt=c_.range,MZt=sZe.range,FZt=aZe.range;Lp=QE(0),TN=QE(1),uZe=QE(2),cZe=QE(3),f_=QE(4),fZe=QE(5),dZe=QE(6),pZe=Lp.range,OZt=TN.range,RZt=uZe.range,PZt=cZe.range,LZt=f_.range,jZt=fZe.range,BZt=dZe.range});var cv,$Zt,fv,zZt,Ihe=N(()=>{"use strict";uv();cv=ci(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),$Zt=cv.range,fv=ci(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),zZt=fv.range});var yc,UZt,bc,VZt,Dhe=N(()=>{"use strict";uv();yc=ci(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());yc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ci(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});UZt=yc.range,bc=ci(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ci(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});VZt=bc.range});function mZe(t,r,n,o,i,s){let a=[[bu,1,1e3],[bu,5,5*1e3],[bu,15,15*1e3],[bu,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=qE(([,,y])=>y).right(a,p);if(h===a.length)return t.every(o_(c/31536e6,f/31536e6,d));if(h===0)return lm.every(Math.max(o_(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var Nhe,Mhe,Fhe,Ohe,gZe=N(()=>{"use strict";Op();She();Che();Ehe();The();Ahe();khe();Ihe();Dhe();[Nhe,Mhe]=mZe(bc,fv,Lp,Lq,u_,a_),[Fhe,Ohe]=mZe(yc,cv,Pp,cf,l_,s_)});var lj=N(()=>{"use strict";She();Che();Ehe();The();Ahe();khe();Ihe();Dhe();gZe()});function Lhe(t){return JE.setFullYear(t),JE.setMonth(0),JE.setDate(1),JE.setHours(0,0,0,0),JE}function YZt(t){return cf.count(Lhe(t.getFullYear())-1,t)}function yZe(t){return Pp.count(Lhe(t.getFullYear())-1,t)}function Rhe(t){return Lhe(t).getDay()}function XZt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Rp.count(r-1,t)}function bZe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Lp.count(r-1,t)}function Phe(t){return JE.setTime(Date.UTC(t,0,1)),JE.getUTCDay()}function AN(t,r,n){return r+t*7-(n+6)%7}function jhe(t){return KZt[t]}function Bhe(t){return ZZt[t]}var xc,dm,kd,ff,um,uy,kN,cm,fm,cy,dv,HZt,Bko,$ko,JE,zko,Uko,Vko,Gko,KZt,ZZt,uj,cj,fj,jq,QZt,xZe,JZt,eQt,dj,pj,hj,tQt,rQt,vZe,nQt,Wko,$he=N(()=>{"use strict";UE();lj();xc="year",dm="quarter",kd="month",ff="week",um="date",uy="day",kN="dayofyear",cm="hours",fm="minutes",cy="seconds",dv="milliseconds",HZt=[xc,dm,kd,ff,um,uy,kN,cm,fm,cy,dv],Bko=HZt.reduce((t,r,n)=>(t[r]=1+n,t),{}),$ko={[xc]:"%Y ",[dm]:"Q%q ",[kd]:"%b ",[um]:"%d ",[ff]:"W%U ",[uy]:"%a ",[kN]:"%j ",[cm]:"%H:00",[fm]:"00:%M",[cy]:":%S",[dv]:".%L",[`${xc}-${kd}`]:"%Y-%m ",[`${xc}-${kd}-${um}`]:"%Y-%m-%d ",[`${cm}-${fm}`]:"%H:%M"},JE=new Date;zko={[xc]:t=>t.getFullYear(),[dm]:t=>Math.floor(t.getMonth()/3),[kd]:t=>t.getMonth(),[um]:t=>t.getDate(),[cm]:t=>t.getHours(),[fm]:t=>t.getMinutes(),[cy]:t=>t.getSeconds(),[dv]:t=>t.getMilliseconds(),[kN]:t=>YZt(t),[ff]:t=>yZe(t),[ff+uy]:(t,r)=>AN(yZe(t),t.getDay(),Rhe(r)),[uy]:(t,r)=>AN(1,t.getDay(),Rhe(r))},Uko={[dm]:t=>3*t,[ff]:(t,r)=>AN(t,0,Rhe(r))},Vko={[xc]:t=>t.getUTCFullYear(),[dm]:t=>Math.floor(t.getUTCMonth()/3),[kd]:t=>t.getUTCMonth(),[um]:t=>t.getUTCDate(),[cm]:t=>t.getUTCHours(),[fm]:t=>t.getUTCMinutes(),[cy]:t=>t.getUTCSeconds(),[dv]:t=>t.getUTCMilliseconds(),[kN]:t=>XZt(t),[ff]:t=>bZe(t),[uy]:(t,r)=>AN(1,t.getUTCDay(),Phe(r)),[ff+uy]:(t,r)=>AN(bZe(t),t.getUTCDay(),Phe(r))},Gko={[dm]:t=>3*t,[ff]:(t,r)=>AN(t,0,Phe(r))},KZt={[xc]:yc,[dm]:cv.every(3),[kd]:cv,[ff]:Pp,[um]:cf,[uy]:cf,[kN]:cf,[cm]:l_,[fm]:s_,[cy]:bu,[dv]:lm},ZZt={[xc]:bc,[dm]:fv.every(3),[kd]:fv,[ff]:Lp,[um]:Rp,[uy]:Rp,[kN]:Rp,[cm]:u_,[fm]:a_,[cy]:bu,[dv]:lm};uj=1e3,cj=uj*60,fj=cj*60,jq=fj*24,QZt=jq*7,xZe=jq*30,JZt=jq*365,eQt=[xc,kd,um,cm,fm,cy,dv],dj=eQt.slice(0,-1),pj=dj.slice(0,-1),hj=pj.slice(0,-1),tQt=hj.slice(0,-1),rQt=[xc,ff],vZe=[xc,kd],nQt=[xc],Wko=[[dj,1,uj],[dj,5,5*uj],[dj,15,15*uj],[dj,30,30*uj],[pj,1,cj],[pj,5,5*cj],[pj,15,15*cj],[pj,30,30*cj],[hj,1,fj],[hj,3,3*fj],[hj,6,6*fj],[hj,12,12*fj],[tQt,1,jq],[rQt,1,QZt],[vZe,1,xZe],[vZe,3,3*xZe],[nQt,1,JZt]]});function zhe(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Uhe(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mj(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function Bq(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=gj(i),f=yj(i),d=gj(s),p=yj(s),h=gj(a),m=yj(a),g=gj(l),y=yj(l),b=gj(u),x=yj(u),v={a:V,A:G,b:U,B:H,c:null,d:TZe,e:TZe,f:TQt,g:PQt,G:jQt,H:SQt,I:CQt,j:EQt,L:NZe,m:AQt,M:kQt,p:X,q:fe,Q:IZe,s:DZe,S:IQt,u:DQt,U:NQt,V:MQt,w:FQt,W:OQt,x:null,X:null,y:RQt,Y:LQt,Z:BQt,"%":kZe},w={a:$,A:M,b:z,B:q,c:null,d:AZe,e:AZe,f:VQt,g:JQt,G:tJt,H:$Qt,I:zQt,j:UQt,L:FZe,m:GQt,M:WQt,p:ee,q:ae,Q:IZe,s:DZe,S:qQt,u:HQt,U:YQt,V:XQt,w:KQt,W:ZQt,x:null,X:null,y:QQt,Y:eJt,Z:rJt,"%":kZe},_={a:I,A:k,b:F,B:D,c:L,d:CZe,e:CZe,f:xQt,g:SZe,G:_Ze,H:EZe,I:EZe,j:mQt,L:bQt,m:hQt,M:gQt,p:T,q:pQt,Q:wQt,s:_Qt,S:yQt,u:lQt,U:uQt,V:cQt,w:aQt,W:fQt,x:P,X:R,y:SZe,Y:_Ze,Z:dQt,"%":vQt};v.x=S(n,v),v.X=S(o,v),v.c=S(r,v),w.x=S(n,w),w.X=S(o,w),w.c=S(r,w);function S(Q,le){return function(ie){var K=[],ge=-1,ne=0,ye=Q.length,xe,De,Te;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(K.push(Q.slice(ne,ge)),(De=wZe[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):De=xe==="e"?" ":"0",(Te=le[xe])&&(xe=Te(ie,De)),K.push(xe),ne=ge+1);return K.push(Q.slice(ne,ge)),K.join("")}}function C(Q,le){return function(ie){var K=mj(1900,void 0,1),ge=E(K,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ne=Uhe(mj(K.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?TN.ceil(ne):TN(ne),ne=Rp.offset(ne,(K.V-1)*7),K.y=ne.getUTCFullYear(),K.m=ne.getUTCMonth(),K.d=ne.getUTCDate()+(K.w+6)%7):(ne=zhe(mj(K.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?EN.ceil(ne):EN(ne),ne=cf.offset(ne,(K.V-1)*7),K.y=ne.getFullYear(),K.m=ne.getMonth(),K.d=ne.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),ye="Z"in K?Uhe(mj(K.y,0,1)).getUTCDay():zhe(mj(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(ye+5)%7:K.w+K.U*7-(ye+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Uhe(K)):zhe(K)}}function E(Q,le,ie,K){for(var ge=0,ne=le.length,ye=ie.length,xe,De;ge<ne;){if(K>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),De=_[xe in wZe?le.charAt(ge++):xe],!De||(K=De(Q,ie,K))<0)return-1}else if(xe!=ie.charCodeAt(K++))return-1}return K}function T(Q,le,ie){var K=c.exec(le.slice(ie));return K?(Q.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function I(Q,le,ie){var K=h.exec(le.slice(ie));return K?(Q.w=m.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(Q,le,ie){var K=d.exec(le.slice(ie));return K?(Q.w=p.get(K[0].toLowerCase()),ie+K[0].length):-1}function F(Q,le,ie){var K=b.exec(le.slice(ie));return K?(Q.m=x.get(K[0].toLowerCase()),ie+K[0].length):-1}function D(Q,le,ie){var K=g.exec(le.slice(ie));return K?(Q.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function fe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function M(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=S(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=C(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=S(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=C(Q+="",!0);return le.toString=function(){return Q},le}}}function uo(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function sQt(t){return t.replace(iQt,"\\$&")}function gj(t){return new RegExp("^(?:"+t.map(sQt).join("|")+")","i")}function yj(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function aQt(t,r,n){var o=nl.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function lQt(t,r,n){var o=nl.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function uQt(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function cQt(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function fQt(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function _Ze(t,r,n){var o=nl.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function SZe(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function dQt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function pQt(t,r,n){var o=nl.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function hQt(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function CZe(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function mQt(t,r,n){var o=nl.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function EZe(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function gQt(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function yQt(t,r,n){var o=nl.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function bQt(t,r,n){var o=nl.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function xQt(t,r,n){var o=nl.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function vQt(t,r,n){var o=oQt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function wQt(t,r,n){var o=nl.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function _Qt(t,r,n){var o=nl.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function TZe(t,r){return uo(t.getDate(),r,2)}function SQt(t,r){return uo(t.getHours(),r,2)}function CQt(t,r){return uo(t.getHours()%12||12,r,2)}function EQt(t,r){return uo(1+cf.count(yc(t),t),r,3)}function NZe(t,r){return uo(t.getMilliseconds(),r,3)}function TQt(t,r){return NZe(t,r)+"000"}function AQt(t,r){return uo(t.getMonth()+1,r,2)}function kQt(t,r){return uo(t.getMinutes(),r,2)}function IQt(t,r){return uo(t.getSeconds(),r,2)}function DQt(t){var r=t.getDay();return r===0?7:r}function NQt(t,r){return uo(Pp.count(yc(t)-1,t),r,2)}function MZe(t){var r=t.getDay();return r>=4||r===0?c_(t):c_.ceil(t)}function MQt(t,r){return t=MZe(t),uo(c_.count(yc(t),t)+(yc(t).getDay()===4),r,2)}function FQt(t){return t.getDay()}function OQt(t,r){return uo(EN.count(yc(t)-1,t),r,2)}function RQt(t,r){return uo(t.getFullYear()%100,r,2)}function PQt(t,r){return t=MZe(t),uo(t.getFullYear()%100,r,2)}function LQt(t,r){return uo(t.getFullYear()%1e4,r,4)}function jQt(t,r){var n=t.getDay();return t=n>=4||n===0?c_(t):c_.ceil(t),uo(t.getFullYear()%1e4,r,4)}function BQt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+uo(r/60|0,"0",2)+uo(r%60,"0",2)}function AZe(t,r){return uo(t.getUTCDate(),r,2)}function $Qt(t,r){return uo(t.getUTCHours(),r,2)}function zQt(t,r){return uo(t.getUTCHours()%12||12,r,2)}function UQt(t,r){return uo(1+Rp.count(bc(t),t),r,3)}function FZe(t,r){return uo(t.getUTCMilliseconds(),r,3)}function VQt(t,r){return FZe(t,r)+"000"}function GQt(t,r){return uo(t.getUTCMonth()+1,r,2)}function WQt(t,r){return uo(t.getUTCMinutes(),r,2)}function qQt(t,r){return uo(t.getUTCSeconds(),r,2)}function HQt(t){var r=t.getUTCDay();return r===0?7:r}function YQt(t,r){return uo(Lp.count(bc(t)-1,t),r,2)}function OZe(t){var r=t.getUTCDay();return r>=4||r===0?f_(t):f_.ceil(t)}function XQt(t,r){return t=OZe(t),uo(f_.count(bc(t),t)+(bc(t).getUTCDay()===4),r,2)}function KQt(t){return t.getUTCDay()}function ZQt(t,r){return uo(TN.count(bc(t)-1,t),r,2)}function QQt(t,r){return uo(t.getUTCFullYear()%100,r,2)}function JQt(t,r){return t=OZe(t),uo(t.getUTCFullYear()%100,r,2)}function eJt(t,r){return uo(t.getUTCFullYear()%1e4,r,4)}function tJt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?f_(t):f_.ceil(t),uo(t.getUTCFullYear()%1e4,r,4)}function rJt(){return"+0000"}function kZe(){return"%"}function IZe(t){return+t}function DZe(t){return Math.floor(+t/1e3)}var wZe,nl,oQt,iQt,RZe=N(()=>{"use strict";lj();wZe={"-":"",_:" ",0:"0"},nl=/^\s*\d+/,oQt=/^%/,iQt=/[\\^$*+?|[\]().{}]/g});function Vhe(t){return IN=Bq(t),DN=IN.format,$q=IN.parse,NN=IN.utcFormat,zq=IN.utcParse,IN}var IN,DN,$q,NN,zq,PZe=N(()=>{"use strict";RZe();Vhe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var Uq=N(()=>{"use strict";PZe()});function bj(t){let r={};return n=>r[n]||(r[n]=t(n))}function nJt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=oJt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function oJt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function iJt(t){let r=bj(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Ad(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return nJt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Ad(a??",f");let l=o_(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=ij(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=sj(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=oj(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function aJt(){return sJt=iJt({format:i_,formatPrefix:CN})}function LZe(t,r,n){n=n||{},iv(n)||yu(`Invalid time multi-format specifier: ${n}`);let o=r(cy),i=r(fm),s=r(cm),a=r(um),l=r(ff),u=r(kd),c=r(dm),f=r(xc),d=t(n[dv]||".%L"),p=t(n[cy]||":%S"),h=t(n[fm]||"%I:%M"),m=t(n[cm]||"%I %p"),g=t(n[um]||n[uy]||"%a %d"),y=t(n[ff]||"%b %d"),b=t(n[kd]||"%B"),x=t(n[dm]||"%B"),v=t(n[xc]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function lJt(t){let r=bj(t.format),n=bj(t.utcFormat);return{timeFormat:o=>vN(o)?r(o):LZe(r,jhe,o),utcFormat:o=>vN(o)?n(o):LZe(n,Bhe,o),timeParse:bj(t.parse),utcParse:bj(t.utcParse)}}function cJt(){return uJt=lJt({format:DN,parse:$q,utcFormat:NN,utcParse:zq})}var sJt,uJt,jZe=N(()=>{"use strict";Op();Pq();$he();UE();Uq();aJt();cJt()});function hJt(t,r){return n=>({options:n||{},sanitize:gJt,load:mJt,fileAccess:!!r,file:yJt(r),http:xJt(t)})}function mJt(t,r){return je(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function gJt(t,r){return je(this,null,function*(){r=sv({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=dJt.test(t.replace(pJt,""));(t==null||typeof t!="string"||!l)&&yu("Sanitize failure, invalid URI: "+pq(t));let u=fJt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(BZe))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(BZe.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function yJt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):bJt}function bJt(){return je(this,null,function*(){yu("No file system access.")})}function xJt(t){return t?function(r,n){return je(this,null,function*(){let o=sv({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?e_(s[i])?s[i]():s.text():yu(s.status+""+s.statusText)})}:vJt}function vJt(){return je(this,null,function*(){yu("No HTTP fetch method available.")})}function $Ze(t){let r=function(n,o){let i={delimiter:t};return Ghe(n,o?sv(o,i):i)};return r.responseType="text",r}function Ghe(t,r){return r.header&&(t=r.header.map(pq).join(r.delimiter)+`
`+t),lhe(r.delimiter).parse(t+"")}function wJt(t){return typeof Buffer=="function"&&e_(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Whe(t,r){let n=r&&r.property?Ape(r.property):VXe;return iv(t)&&!wJt(t)?_Jt(n(t),r):n(JSON.parse(t))}function _Jt(t,r){return!gc(t)&&GXe(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function zZe(t,r){let n,o,i,s;return t=Whe(t,r),r&&r.feature?(n=wE,i=r.feature):r&&r.mesh?(n=_E,i=r.mesh,s=SJt[r.filter]):yu("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):yu("Invalid TopoJSON object: "+i),o&&o.features||[o]}var fJt,dJt,pJt,BZe,SJt,pIo,qhe,UZe=N(()=>{"use strict";UE();DKe();mW();jZe();fJt=/^(data:|([A-Za-z]+:)?\/\/)/,dJt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,pJt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,BZe="file://";Ghe.responseType="text";Whe.responseType="json";SJt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};zZe.responseType="json";pIo={dsv:Ghe,csv:$Ze(","),tsv:$Ze("	"),json:Whe,topojson:zZe},qhe=hJt(typeof fetch<"u"&&fetch,null)});function la(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function fy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var Id=N(()=>{"use strict"});function eT(){var t=new Y0,r=[],n=[],o=Hhe;function i(s){let a=t.get(s);if(a===void 0){if(o!==Hhe)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Y0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return eT(r,n).unknown(o)},la.apply(i,arguments),i}var Hhe,VZe=N(()=>{"use strict";Op();Id();Hhe=Symbol("implicit")});function pv(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function d_(t,r){var n=Object.create(t.prototype);for(var o in r)n[o]=r[o];return n}var Vq=N(()=>{"use strict"});function hy(){}function WZe(){return this.rgb().formatHex()}function NJt(){return ZZe(this).formatHsl()}function qZe(){return this.rgb().formatRgb()}function df(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=CJt.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?HZe(r):n===3?new ka(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Gq(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Gq(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=EJt.exec(t))?new ka(r[1],r[2],r[3],1):(r=TJt.exec(t))?new ka(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=AJt.exec(t))?Gq(r[1],r[2],r[3],r[4]):(r=kJt.exec(t))?Gq(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=IJt.exec(t))?KZe(r[1],r[2]/100,r[3]/100,1):(r=DJt.exec(t))?KZe(r[1],r[2]/100,r[3]/100,r[4]):GZe.hasOwnProperty(t)?HZe(GZe[t]):t==="transparent"?new ka(NaN,NaN,NaN,0):null}function HZe(t){return new ka(t>>16&255,t>>8&255,t&255,1)}function Gq(t,r,n,o){return o<=0&&(t=r=n=NaN),new ka(t,r,n,o)}function vj(t){return t instanceof hy||(t=df(t)),t?(t=t.rgb(),new ka(t.r,t.g,t.b,t.opacity)):new ka}function ua(t,r,n,o){return arguments.length===1?vj(t):new ka(t,r,n,o??1)}function ka(t,r,n,o){this.r=+t,this.g=+r,this.b=+n,this.opacity=+o}function YZe(){return"#"+Yhe(this.r)+Yhe(this.g)+Yhe(this.b)}function XZe(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Yhe(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function KZe(t,r,n,o){return o<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new dy(t,r,n,o)}function ZZe(t){if(t instanceof dy)return new dy(t.h,t.s,t.l,t.opacity);if(t instanceof hy||(t=df(t)),!t)return new dy;if(t instanceof dy)return t;t=t.rgb();var r=t.r/255,n=t.g/255,o=t.b/255,i=Math.min(r,n,o),s=Math.max(r,n,o),a=NaN,l=s-i,u=(s+i)/2;return l?(r===s?a=(n-o)/l+(n<o)*6:n===s?a=(o-r)/l+2:a=(r-n)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new dy(a,l,u,t.opacity)}function Dd(t,r,n,o){return arguments.length===1?ZZe(t):new dy(t,r,n,o??1)}function dy(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}function Xhe(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}var p_,tT,MN,xj,py,CJt,EJt,TJt,AJt,kJt,IJt,DJt,GZe,Wq=N(()=>{"use strict";Vq();p_=.7,tT=1/p_,MN="\\s*([+-]?\\d+)\\s*",xj="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",py="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CJt=/^#([0-9a-f]{3,8})$/,EJt=new RegExp("^rgb\\("+[MN,MN,MN]+"\\)$"),TJt=new RegExp("^rgb\\("+[py,py,py]+"\\)$"),AJt=new RegExp("^rgba\\("+[MN,MN,MN,xj]+"\\)$"),kJt=new RegExp("^rgba\\("+[py,py,py,xj]+"\\)$"),IJt=new RegExp("^hsl\\("+[xj,py,py]+"\\)$"),DJt=new RegExp("^hsla\\("+[xj,py,py,xj]+"\\)$"),GZe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pv(hy,df,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:WZe,formatHex:WZe,formatHsl:NJt,formatRgb:qZe,toString:qZe});pv(ka,ua,d_(hy,{brighter:function(t){return t=t==null?tT:Math.pow(tT,t),new ka(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?p_:Math.pow(p_,t),new ka(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YZe,formatHex:YZe,formatRgb:XZe,toString:XZe}));pv(dy,Dd,d_(hy,{brighter:function(t){return t=t==null?tT:Math.pow(tT,t),new dy(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?p_:Math.pow(p_,t),new dy(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*r,i=2*n-o;return new ka(Xhe(t>=240?t-240:t+120,i,o),Xhe(t,i,o),Xhe(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}))});var qq,Hq,Khe=N(()=>{"use strict";qq=Math.PI/180,Hq=180/Math.PI});function nQe(t){if(t instanceof my)return new my(t.l,t.a,t.b,t.opacity);if(t instanceof hv)return oQe(t);t instanceof ka||(t=vj(t));var r=eme(t.r),n=eme(t.g),o=eme(t.b),i=Zhe((.2225045*r+.7168786*n+.0606169*o)/JZe),s,a;return r===n&&n===o?s=a=i:(s=Zhe((.4360747*r+.3850649*n+.1430804*o)/QZe),a=Zhe((.0139322*r+.0971045*n+.7141733*o)/eQe)),new my(116*i-16,500*(s-i),200*(i-a),t.opacity)}function pf(t,r,n,o){return arguments.length===1?nQe(t):new my(t,r,n,o??1)}function my(t,r,n,o){this.l=+t,this.a=+r,this.b=+n,this.opacity=+o}function Zhe(t){return t>MJt?Math.pow(t,1/3):t/rQe+tQe}function Qhe(t){return t>FN?t*t*t:rQe*(t-tQe)}function Jhe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function eme(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function FJt(t){if(t instanceof hv)return new hv(t.h,t.c,t.l,t.opacity);if(t instanceof my||(t=nQe(t)),t.a===0&&t.b===0)return new hv(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var r=Math.atan2(t.b,t.a)*Hq;return new hv(r<0?r+360:r,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Nd(t,r,n,o){return arguments.length===1?FJt(t):new hv(t,r,n,o??1)}function hv(t,r,n,o){this.h=+t,this.c=+r,this.l=+n,this.opacity=+o}function oQe(t){if(isNaN(t.h))return new my(t.l,0,0,t.opacity);var r=t.h*qq;return new my(t.l,Math.cos(r)*t.c,Math.sin(r)*t.c,t.opacity)}var Yq,QZe,JZe,eQe,tQe,FN,rQe,MJt,iQe=N(()=>{"use strict";Vq();Wq();Khe();Yq=18,QZe=.96422,JZe=1,eQe=.82521,tQe=4/29,FN=6/29,rQe=3*FN*FN,MJt=FN*FN*FN;pv(my,pf,d_(hy,{brighter:function(t){return new my(this.l+Yq*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new my(this.l-Yq*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return r=QZe*Qhe(r),t=JZe*Qhe(t),n=eQe*Qhe(n),new ka(Jhe(3.1338561*r-1.6168667*t-.4906146*n),Jhe(-.9787684*r+1.9161415*t+.033454*n),Jhe(.0719453*r-.2289914*t+1.4052427*n),this.opacity)}}));pv(hv,Nd,d_(hy,{brighter:function(t){return new hv(this.h,this.c,this.l+Yq*(t??1),this.opacity)},darker:function(t){return new hv(this.h,this.c,this.l-Yq*(t??1),this.opacity)},rgb:function(){return oQe(this).rgb()}}))});function OJt(t){if(t instanceof rT)return new rT(t.h,t.s,t.l,t.opacity);t instanceof ka||(t=vj(t));var r=t.r/255,n=t.g/255,o=t.b/255,i=(lQe*o+sQe*r-aQe*n)/(lQe+sQe-aQe),s=o-i,a=(wj*(n-i)-rme*s)/Xq,l=Math.sqrt(a*a+s*s)/(wj*i*(1-i)),u=l?Math.atan2(a,s)*Hq-120:NaN;return new rT(u<0?u+360:u,l,i,t.opacity)}function jp(t,r,n,o){return arguments.length===1?OJt(t):new rT(t,r,n,o??1)}function rT(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}var uQe,tme,rme,Xq,wj,sQe,aQe,lQe,cQe=N(()=>{"use strict";Vq();Wq();Khe();uQe=-.14861,tme=1.78277,rme=-.29227,Xq=-.90649,wj=1.97294,sQe=wj*Xq,aQe=wj*tme,lQe=tme*rme-Xq*uQe;pv(rT,jp,d_(hy,{brighter:function(t){return t=t==null?tT:Math.pow(tT,t),new rT(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?p_:Math.pow(p_,t),new rT(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*qq,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),o=Math.cos(t),i=Math.sin(t);return new ka(255*(r+n*(uQe*o+tme*i)),255*(r+n*(rme*o+Xq*i)),255*(r+n*(wj*o)),this.opacity)}}))});var js=N(()=>{"use strict";Wq();iQe();cQe()});function nme(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function Kq(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return nme((n-o/r)*r,a,i,s,l)}}var Zq=N(()=>{"use strict"});function Qq(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return nme((n-o/r)*r,i,s,a,l)}}var ome=N(()=>{"use strict";Zq()});var ON,ime=N(()=>{"use strict";ON=t=>()=>t});function fQe(t,r){return function(n){return t+n*r}}function RJt(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function h_(t,r){var n=r-t;return n?fQe(t,n>180||n<-180?n-360*Math.round(n/360):n):ON(isNaN(t)?r:t)}function dQe(t){return(t=+t)==1?Hi:function(r,n){return n-r?RJt(r,n,t):ON(isNaN(r)?n:r)}}function Hi(t,r){var n=r-t;return n?fQe(t,n):ON(isNaN(t)?r:t)}var nT=N(()=>{"use strict";ime()});function pQe(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=ua(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var _j,hQe,mQe,sme=N(()=>{"use strict";js();Zq();ome();nT();_j=function t(r){var n=dQe(r);function o(i,s){var a=n((i=ua(i)).r,(s=ua(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Hi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);hQe=pQe(Kq),mQe=pQe(Qq)});function RN(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function Jq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var eH=N(()=>{"use strict"});function gQe(t,r){return(Jq(r)?RN:ame)(t,r)}function ame(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=hf(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var lme=N(()=>{"use strict";Sj();eH()});function tH(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var ume=N(()=>{"use strict"});function xu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Cj=N(()=>{"use strict"});function rH(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=hf(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var cme=N(()=>{"use strict";Sj()});function PJt(t){return function(){return t}}function LJt(t){return function(r){return t(r)+""}}function nH(t,r){var n=dme.lastIndex=fme.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=dme.exec(t))&&(i=fme.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:xu(o,i)})),n=fme.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?LJt(u[0].x):PJt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var dme,fme,pme=N(()=>{"use strict";Cj();dme=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fme=new RegExp(dme.source,"g")});function hf(t,r){var n=typeof r,o;return r==null||n==="boolean"?ON(r):(n==="number"?xu:n==="string"?(o=df(r))?(r=o,_j):nH:r instanceof df?_j:r instanceof Date?tH:Jq(r)?RN:Array.isArray(r)?ame:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?rH:xu)(t,r)}var Sj=N(()=>{"use strict";js();sme();lme();ume();Cj();cme();pme();ime();eH()});function yQe(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var bQe=N(()=>{"use strict"});function xQe(t,r){var n=h_(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var vQe=N(()=>{"use strict";nT()});function m_(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var wQe=N(()=>{"use strict"});function hme(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*_Qe,skewX:Math.atan(u)*_Qe,scaleX:a,scaleY:l}}var _Qe,oH,SQe=N(()=>{"use strict";_Qe=180/Math.PI,oH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function CQe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?oH:hme(r.a,r.b,r.c,r.d,r.e,r.f)}function EQe(t){return t==null?oH:(iH||(iH=document.createElementNS("http://www.w3.org/2000/svg","g")),iH.setAttribute("transform",t),(t=iH.transform.baseVal.consolidate())?(t=t.matrix,hme(t.a,t.b,t.c,t.d,t.e,t.f)):oH)}var iH,TQe=N(()=>{"use strict";SQe()});function AQe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:xu(c,d)},{i:g-2,x:xu(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:xu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:xu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:xu(c,d)},{i:g-2,x:xu(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var kQe,IQe,DQe=N(()=>{"use strict";Cj();TQe();kQe=AQe(CQe,"px, ","px)","deg)"),IQe=AQe(EQe,", ",")",")")});function NQe(t){return((t=Math.exp(t))+1/t)/2}function BJt(t){return((t=Math.exp(t))-1/t)/2}function $Jt(t){return((t=Math.exp(2*t))-1)/(t+1)}var jJt,MQe,FQe=N(()=>{"use strict";jJt=1e-12;MQe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<jJt)b=Math.log(p/c)/r,y=function(C){return[l+C*h,u+C*m,c*Math.exp(r*C*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);b=(S-_)/r,y=function(C){var E=C*b,T=NQe(_),I=c/(n*x)*(T*$Jt(r*E+_)-BJt(_));return[l+I*h,u+I*m,c*T/NQe(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function OQe(t){return function(r,n){var o=t((r=Dd(r)).h,(n=Dd(n)).h),i=Hi(r.s,n.s),s=Hi(r.l,n.l),a=Hi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var RQe,PQe,LQe=N(()=>{"use strict";js();nT();RQe=OQe(h_),PQe=OQe(Hi)});function mme(t,r){var n=Hi((t=pf(t)).l,(r=pf(r)).l),o=Hi(t.a,r.a),i=Hi(t.b,r.b),s=Hi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var jQe=N(()=>{"use strict";js();nT()});function BQe(t){return function(r,n){var o=t((r=Nd(r)).h,(n=Nd(n)).h),i=Hi(r.c,n.c),s=Hi(r.l,n.l),a=Hi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var $Qe,zQe,UQe=N(()=>{"use strict";js();nT();$Qe=BQe(h_),zQe=BQe(Hi)});function VQe(t){return function r(n){n=+n;function o(i,s){var a=t((i=jp(i)).h,(s=jp(s)).h),l=Hi(i.s,s.s),u=Hi(i.l,s.l),c=Hi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var GQe,WQe,qQe=N(()=>{"use strict";js();nT();GQe=VQe(h_),WQe=VQe(Hi)});function oT(t,r){r===void 0&&(r=t,t=hf);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var HQe=N(()=>{"use strict";Sj()});function YQe(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var XQe=N(()=>{"use strict"});var gme={};fn(gme,{interpolate:()=>hf,interpolateArray:()=>gQe,interpolateBasis:()=>Kq,interpolateBasisClosed:()=>Qq,interpolateCubehelix:()=>GQe,interpolateCubehelixLong:()=>WQe,interpolateDate:()=>tH,interpolateDiscrete:()=>yQe,interpolateHcl:()=>$Qe,interpolateHclLong:()=>zQe,interpolateHsl:()=>RQe,interpolateHslLong:()=>PQe,interpolateHue:()=>xQe,interpolateLab:()=>mme,interpolateNumber:()=>xu,interpolateNumberArray:()=>RN,interpolateObject:()=>rH,interpolateRgb:()=>_j,interpolateRgbBasis:()=>hQe,interpolateRgbBasisClosed:()=>mQe,interpolateRound:()=>m_,interpolateString:()=>nH,interpolateTransformCss:()=>kQe,interpolateTransformSvg:()=>IQe,interpolateZoom:()=>MQe,piecewise:()=>oT,quantize:()=>YQe});var Ej=N(()=>{"use strict";Sj();lme();Zq();ome();ume();bQe();vQe();Cj();eH();cme();wQe();pme();DQe();FQe();sme();LQe();jQe();UQe();qQe();HQe();XQe()});function yme(t){return function(){return t}}var KQe=N(()=>{"use strict"});function PN(t){return+t}var bme=N(()=>{"use strict"});function Bl(t){return t}function xme(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:yme(isNaN(r)?NaN:.5)}function zJt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function UJt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=xme(i,o),s=n(a,s)):(o=xme(o,i),s=n(s,a)),function(l){return s(o(l))}}function VJt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=xme(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=am(t,l,1,o)-1;return s[u](i[u](l))}}function gy(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iT(){var t=ZQe,r=ZQe,n=hf,o,i,s,a=Bl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Bl&&(a=zJt(t[0],t[p-1])),l=p>2?VJt:UJt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),xu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,PN),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=m_,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Bl,f()):a!==Bl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function Tj(){return iT()(Bl,Bl)}var ZQe,g_=N(()=>{"use strict";Op();Ej();KQe();bme();ZQe=[0,1]});function LN(t,r,n,o){var i=o_(t,r,n),s;switch(o=Ad(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=ij(i,a))&&(o.precision=s),CN(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=sj(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=oj(i))&&(o.precision=s-(o.type==="%")*2);break}}return i_(o)}var vme=N(()=>{"use strict";Op();Pq()});function Md(t){var r=t.domain;return t.ticks=function(n){var o=r();return HE(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return LN(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=tj(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function Aj(){var t=Tj();return t.copy=function(){return gy(t,Aj())},la.apply(t,arguments),Md(t)}var y_=N(()=>{"use strict";Op();g_();Id();vme()});function kj(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,PN),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return kj(t).unknown(r)},t=arguments.length?Array.from(t,PN):[0,1],Md(n)}var QQe=N(()=>{"use strict";y_();bme()});function Ij(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var wme=N(()=>{"use strict"});function JQe(t){return Math.log(t)}function eJe(t){return Math.exp(t)}function GJt(t){return-Math.log(-t)}function WJt(t){return-Math.exp(-t)}function qJt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function HJt(t){return t===10?qJt:t===Math.E?Math.exp:r=>Math.pow(t,r)}function YJt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function tJe(t){return(r,n)=>-t(-r,n)}function Dj(t){let r=t(JQe,eJe),n=r.domain,o=10,i,s;function a(){return i=YJt(o),s=HJt(o),n()[0]<0?(i=tJe(i),s=tJe(s),t(GJt,WJt)):t(JQe,eJe),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),h=i(f),m,g,y=l==null?10:+l,b=[];if(!(o%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(m=1;m<o;++m)if(g=p<0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=h;++p)for(m=o-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=HE(c,f,y))}else b=HE(p,h,Math.min(h-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=Ad(u)).precision==null&&(u.trim=!0),u=i_(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(Ij(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function Nj(){let t=Dj(iT()).domain([1,10]);return t.copy=()=>gy(t,Nj()).base(t.base()),la.apply(t,arguments),t}var sH=N(()=>{"use strict";Op();Pq();wme();g_();Id()});function rJe(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function nJe(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function Mj(t){var r=1,n=t(rJe(r),nJe(r));return n.constant=function(o){return arguments.length?t(rJe(r=+o),nJe(r)):r},Md(n)}function Fj(){var t=Mj(iT());return t.copy=function(){return gy(t,Fj()).constant(t.constant())},la.apply(t,arguments)}var aH=N(()=>{"use strict";y_();g_();Id()});function oJe(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function XJt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function KJt(t){return t<0?-t*t:t*t}function Oj(t){var r=t(Bl,Bl),n=1;function o(){return n===1?t(Bl,Bl):n===.5?t(XJt,KJt):t(oJe(n),oJe(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},Md(r)}function jN(){var t=Oj(iT());return t.copy=function(){return gy(t,jN()).exponent(t.exponent())},la.apply(t,arguments),t}function _me(){return jN.apply(null,arguments).exponent(.5)}var lH=N(()=>{"use strict";y_();g_();Id()});function Rj(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=dhe(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[am(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(sy),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return Rj().domain(t).range(r).unknown(o)},la.apply(s,arguments)}var iJe=N(()=>{"use strict";Op();Id()});function Pj(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[am(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return Pj().domain([t,r]).range(i).unknown(s)},la.apply(Md(a),arguments)}var sJe=N(()=>{"use strict";Op();y_();Id()});function Lj(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[am(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Lj().domain(t).range(r).unknown(n)},la.apply(i,arguments)}var aJe=N(()=>{"use strict";Op();Id()});function ZJt(t){return new Date(t)}function QJt(t){return t instanceof Date?+t:+new Date(+t)}function uH(t,r,n,o,i,s,a,l,u,c){var f=Tj(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(S){return(u(S)<S?h:l(S)<S?m:a(S)<S?g:s(S)<S?y:o(S)<S?i(S)<S?b:x:n(S)<S?v:w)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,QJt)):p().map(ZJt)},f.ticks=function(S){var C=p();return t(C[0],C[C.length-1],S??10)},f.tickFormat=function(S,C){return C==null?_:c(C)},f.nice=function(S){var C=p();return(!S||typeof S.range!="function")&&(S=r(C[0],C[C.length-1],S??10)),S?p(Ij(C,S)):f},f.copy=function(){return gy(f,uH(t,r,n,o,i,s,a,l,u,c))},f}function cH(){return la.apply(uH(Fhe,Ohe,yc,cv,Pp,cf,l_,s_,bu,DN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Sme=N(()=>{"use strict";lj();Uq();g_();Id();wme()});function fH(){return la.apply(uH(Nhe,Mhe,bc,fv,Lp,Rp,u_,a_,bu,NN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var lJe=N(()=>{"use strict";lj();Uq();Sme();Id()});function dH(){var t=0,r=1,n,o,i,s,a=Bl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(hf),c.rangeRound=f(m_),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function mv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function BN(){var t=Md(dH()(Bl));return t.copy=function(){return mv(t,BN())},fy.apply(t,arguments)}function pH(){var t=Dj(dH()).domain([1,10]);return t.copy=function(){return mv(t,pH()).base(t.base())},fy.apply(t,arguments)}function hH(){var t=Mj(dH());return t.copy=function(){return mv(t,hH()).constant(t.constant())},fy.apply(t,arguments)}function jj(){var t=Oj(dH());return t.copy=function(){return mv(t,jj()).exponent(t.exponent())},fy.apply(t,arguments)}function Cme(){return jj.apply(null,arguments).exponent(.5)}var Eme=N(()=>{"use strict";Ej();g_();Id();y_();sH();aH();lH()});function mH(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Bl,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=oT(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(hf),h.rangeRound=m(m_),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function Bj(){var t=Md(mH()(Bl));return t.copy=function(){return mv(t,Bj())},fy.apply(t,arguments)}function gH(){var t=Dj(mH()).domain([.1,1,10]);return t.copy=function(){return mv(t,gH()).base(t.base())},fy.apply(t,arguments)}function yH(){var t=Mj(mH());return t.copy=function(){return mv(t,yH()).constant(t.constant())},fy.apply(t,arguments)}function $j(){var t=Oj(mH());return t.copy=function(){return mv(t,$j()).exponent(t.exponent())},fy.apply(t,arguments)}function Tme(){return $j.apply(null,arguments).exponent(.5)}var uJe=N(()=>{"use strict";Ej();g_();Id();y_();sH();Eme();aH();lH()});var Ame=N(()=>{"use strict";QQe();y_();sH();aH();VZe();lH();iJe();sJe();aJe();Sme();lJe();Eme();uJe();vme()});function ca(t){for(var r=t.length/6|0,n=new Array(r),o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}var pm=N(()=>{"use strict"});var zj,cJe=N(()=>{"use strict";pm();zj=ca("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")});var Uj,fJe=N(()=>{"use strict";pm();Uj=ca("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")});var Vj,dJe=N(()=>{"use strict";pm();Vj=ca("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")});var Gj,pJe=N(()=>{"use strict";pm();Gj=ca("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0")});var Wj,hJe=N(()=>{"use strict";pm();Wj=ca("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")});var qj,mJe=N(()=>{"use strict";pm();qj=ca("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")});var Hj,gJe=N(()=>{"use strict";pm();Hj=ca("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")});var Yj,yJe=N(()=>{"use strict";pm();Yj=ca("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")});var Xj,bJe=N(()=>{"use strict";pm();Xj=ca("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")});var Kj,xJe=N(()=>{"use strict";pm();Kj=ca("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")});function kme(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function bH(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return kme((n-o/r)*r,a,i,s,l)}}var xH=N(()=>{"use strict"});function vH(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return kme((n-o/r)*r,i,s,a,l)}}var Ime=N(()=>{"use strict";xH()});var $N,Dme=N(()=>{"use strict";$N=t=>()=>t});function vJe(t,r){return function(n){return t+n*r}}function eer(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function b_(t,r){var n=r-t;return n?vJe(t,n>180||n<-180?n-360*Math.round(n/360):n):$N(isNaN(t)?r:t)}function wJe(t){return(t=+t)==1?Yi:function(r,n){return n-r?eer(r,n,t):$N(isNaN(r)?n:r)}}function Yi(t,r){var n=r-t;return n?vJe(t,n):$N(isNaN(t)?r:t)}var sT=N(()=>{"use strict";Dme()});function _Je(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=ua(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var Zj,SJe,CJe,Nme=N(()=>{"use strict";js();xH();Ime();sT();Zj=function t(r){var n=wJe(r);function o(i,s){var a=n((i=ua(i)).r,(s=ua(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Yi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);SJe=_Je(bH),CJe=_Je(vH)});function zN(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function wH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var _H=N(()=>{"use strict"});function EJe(t,r){return(wH(r)?zN:Mme)(t,r)}function Mme(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=vu(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var Fme=N(()=>{"use strict";Qj();_H()});function SH(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var Ome=N(()=>{"use strict"});function wu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Jj=N(()=>{"use strict"});function CH(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=vu(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var Rme=N(()=>{"use strict";Qj()});function ter(t){return function(){return t}}function rer(t){return function(r){return t(r)+""}}function EH(t,r){var n=Lme.lastIndex=Pme.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=Lme.exec(t))&&(i=Pme.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:wu(o,i)})),n=Pme.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?rer(u[0].x):ter(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var Lme,Pme,jme=N(()=>{"use strict";Jj();Lme=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pme=new RegExp(Lme.source,"g")});function vu(t,r){var n=typeof r,o;return r==null||n==="boolean"?$N(r):(n==="number"?wu:n==="string"?(o=df(r))?(r=o,Zj):EH:r instanceof df?Zj:r instanceof Date?SH:wH(r)?zN:Array.isArray(r)?Mme:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?CH:wu)(t,r)}var Qj=N(()=>{"use strict";js();Nme();Fme();Ome();Jj();Rme();jme();Dme();_H()});function TJe(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var AJe=N(()=>{"use strict"});function kJe(t,r){var n=b_(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var IJe=N(()=>{"use strict";sT()});function yy(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var DJe=N(()=>{"use strict"});function Bme(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*NJe,skewX:Math.atan(u)*NJe,scaleX:a,scaleY:l}}var NJe,TH,MJe=N(()=>{"use strict";NJe=180/Math.PI,TH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function FJe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?TH:Bme(r.a,r.b,r.c,r.d,r.e,r.f)}function OJe(t){return t==null?TH:(AH||(AH=document.createElementNS("http://www.w3.org/2000/svg","g")),AH.setAttribute("transform",t),(t=AH.transform.baseVal.consolidate())?(t=t.matrix,Bme(t.a,t.b,t.c,t.d,t.e,t.f)):TH)}var AH,RJe=N(()=>{"use strict";MJe()});function PJe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:wu(c,d)},{i:g-2,x:wu(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:wu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:wu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:wu(c,d)},{i:g-2,x:wu(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var LJe,jJe,BJe=N(()=>{"use strict";Jj();RJe();LJe=PJe(FJe,"px, ","px)","deg)"),jJe=PJe(OJe,", ",")",")")});function $Je(t){return((t=Math.exp(t))+1/t)/2}function oer(t){return((t=Math.exp(t))-1/t)/2}function ier(t){return((t=Math.exp(2*t))-1)/(t+1)}var ner,zJe,UJe=N(()=>{"use strict";ner=1e-12;zJe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<ner)b=Math.log(p/c)/r,y=function(C){return[l+C*h,u+C*m,c*Math.exp(r*C*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);b=(S-_)/r,y=function(C){var E=C*b,T=$Je(_),I=c/(n*x)*(T*ier(r*E+_)-oer(_));return[l+I*h,u+I*m,c*T/$Je(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function VJe(t){return function(r,n){var o=t((r=Dd(r)).h,(n=Dd(n)).h),i=Yi(r.s,n.s),s=Yi(r.l,n.l),a=Yi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var GJe,WJe,qJe=N(()=>{"use strict";js();sT();GJe=VJe(b_),WJe=VJe(Yi)});function $me(t,r){var n=Yi((t=pf(t)).l,(r=pf(r)).l),o=Yi(t.a,r.a),i=Yi(t.b,r.b),s=Yi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var HJe=N(()=>{"use strict";js();sT()});function YJe(t){return function(r,n){var o=t((r=Nd(r)).h,(n=Nd(n)).h),i=Yi(r.c,n.c),s=Yi(r.l,n.l),a=Yi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var XJe,KJe,ZJe=N(()=>{"use strict";js();sT();XJe=YJe(b_),KJe=YJe(Yi)});function QJe(t){return function r(n){n=+n;function o(i,s){var a=t((i=jp(i)).h,(s=jp(s)).h),l=Yi(i.s,s.s),u=Yi(i.l,s.l),c=Yi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var JJe,eet,tet=N(()=>{"use strict";js();sT();JJe=QJe(b_),eet=QJe(Yi)});function aT(t,r){r===void 0&&(r=t,t=vu);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var ret=N(()=>{"use strict";Qj()});function net(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var oet=N(()=>{"use strict"});var zme={};fn(zme,{interpolate:()=>vu,interpolateArray:()=>EJe,interpolateBasis:()=>bH,interpolateBasisClosed:()=>vH,interpolateCubehelix:()=>JJe,interpolateCubehelixLong:()=>eet,interpolateDate:()=>SH,interpolateDiscrete:()=>TJe,interpolateHcl:()=>XJe,interpolateHclLong:()=>KJe,interpolateHsl:()=>GJe,interpolateHslLong:()=>WJe,interpolateHue:()=>kJe,interpolateLab:()=>$me,interpolateNumber:()=>wu,interpolateNumberArray:()=>zN,interpolateObject:()=>CH,interpolateRgb:()=>Zj,interpolateRgbBasis:()=>SJe,interpolateRgbBasisClosed:()=>CJe,interpolateRound:()=>yy,interpolateString:()=>EH,interpolateTransformCss:()=>LJe,interpolateTransformSvg:()=>jJe,interpolateZoom:()=>zJe,piecewise:()=>aT,quantize:()=>net});var lT=N(()=>{"use strict";Qj();Fme();xH();Ime();Ome();AJe();IJe();Jj();_H();Rme();DJe();jme();BJe();UJe();Nme();qJe();HJe();ZJe();tet();ret();oet()});var Ume=N(()=>{"use strict";cJe();fJe();dJe();pJe();hJe();mJe();gJe();yJe();bJe();xJe()});function aer(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function per(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function her(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function Kme(){let t=eT().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=aer(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=Fq(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,ej(h,g)-1),x=g===y?b:ej(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return Kme().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function cet(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return cet(r())},t}function mer(){return cet(Kme().paddingInner(1))}function yer(t){return ger.call(t,Ipe)}function fet(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(am(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=yer(o),n):t.slice()},n.range=function(o){return arguments.length?(r=ber.call(o),n):r.slice()},n.tickFormat=function(o,i){return LN(t[0],af(t),o??10,i)},n.copy=function(){return fet().domain(n.domain()).range(n.range())},n}function ver(t){return t[xer]=!0,t}function wer(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?per(s):s.invertExtent?her(s):void 0),s.type=t,ver(s)};return o.metadata=zL(xN(n)),o}function vi(t,r,n){return arguments.length>1?(IH.set(t,wer(t,r,n)),this):_er(t)?IH.get(t):void 0}function _er(t){return IH.has(t)}function DH(t,r){let n=IH.get(t);return n&&n.metadata[r]}function Zme(t){return DH(t,n4)}function Ser(t){return DH(t,o4)}function Cer(t){return DH(t,x_)}function Eer(t){return DH(t,Xme)}function Ter(t,r,n){return oT(Aer(r||"rgb",n),t)}function Aer(t,r){let n=gme[ker(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function ker(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function det(t){if(gc(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function pet(t,r){for(let n in t)Ner(n,r(t[n]))}function Ner(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(iet[t]=r,this):iet[t]}function Ler(t,r,n){let o=t.range(),i=o[0],s=af(o),a=Rer;if(i>s&&(o=s,s=i,i=o,a=Per),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],af(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function het(t,r){return t.bins?Ler(t,t.bins,r):t.ticks?t.ticks(r):t.domain()}function jer(t,r,n,o,i,s){let a=r.type,l=Oer;if(a===e4||i===e4)l=t.timeFormat(o);else if(a===t4||i===t4)l=t.utcFormat(o);else if(Cer(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=met(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function met(t,r,n){let o=het(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function Ber(t,r){return t.bins?Uer(t.bins):t.type===x_?met(t,r,!0):Vme[t.type]?zer(t[Vme[t.type]]()):het(t,r)}function $er(t,r,n){let o=r[get[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function zer(t){let r=[-1/0].concat(t);return r.max=1/0,r}function Uer(t){let r=t.slice(0,-1);return r.max=af(t),r}function Ger(t,r,n,o,i,s,a){let l=get[r.type]&&s!==e4&&s!==t4?$er(t,r,i):jer(t,r,n,i,s,a);return o===Mer&&Ver(r)?Wer(l):o===Fer?qer(l):Her(l)}function Yer(t,r,n,o){let i=o||r.type;return vN(n)&&Eer(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===e4?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===t4?t.utcFormat("%A, %d %B %Y, %X UTC"):Ger(t,r,5,null,n,o,!0)}function Qme(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=Yer(t,r,n.format,n.formatType);if(Ser(r.type)){let s=Ber(r).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(Zme(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${l}`}else{let s=r.domain();return`values from ${i(s[0])} to ${i(af(s))}`}}var ler,Gme,x_,Wme,qme,Hme,e4,t4,UN,r4,kH,Yme,uet,uer,cer,fer,der,ol,n4,o4,hm,Xme,ger,ber,IH,xer,Ier,Der,iet,Mer,Fer,Oer,Rer,Per,Vme,get,Ver,Wer,set,qer,Her,aet,yet=N(()=>{"use strict";UE();Op();Ame();Ame();Ej();Ume();$he();ler="identity",Gme="linear",x_="log",Wme="pow",qme="sqrt",Hme="symlog",e4="time",t4="utc",UN="sequential",r4="diverging",kH="quantile",Yme="quantize",uet="threshold",uer="ordinal",cer="point",fer="band",der="bin-ordinal",ol="continuous",n4="discrete",o4="discretizing",hm="interpolating",Xme="temporal";ger=Array.prototype.map;ber=Array.prototype.slice;IH=new Map,xer=Symbol("vega_scale");vi(ler,kj);vi(Gme,Aj,ol);vi(x_,Nj,[ol,x_]);vi(Wme,jN,ol);vi(qme,_me,ol);vi(Hme,Fj,ol);vi(e4,cH,[ol,Xme]);vi(t4,fH,[ol,Xme]);vi(UN,BN,[ol,hm]);vi(`${UN}-${Gme}`,BN,[ol,hm]);vi(`${UN}-${x_}`,pH,[ol,hm,x_]);vi(`${UN}-${Wme}`,jj,[ol,hm]);vi(`${UN}-${qme}`,Cme,[ol,hm]);vi(`${UN}-${Hme}`,hH,[ol,hm]);vi(`${r4}-${Gme}`,Bj,[ol,hm]);vi(`${r4}-${x_}`,gH,[ol,hm,x_]);vi(`${r4}-${Wme}`,$j,[ol,hm]);vi(`${r4}-${qme}`,Tme,[ol,hm]);vi(`${r4}-${Hme}`,yH,[ol,hm]);vi(kH,Rj,[o4,kH]);vi(Yme,Pj,o4);vi(uet,Lj,o4);vi(der,fet,[n4,o4]);vi(uer,eT,n4);vi(fer,Kme,n4);vi(cer,mer,n4);Ier={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Der={accent:Uj,category10:zj,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Vj,observable10:Gj,paired:Wj,pastel1:qj,pastel2:Hj,set1:Yj,set2:Xj,set3:Kj,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};iet={};pet(Der,det);pet(Ier,t=>Ter(det(t)));Mer="symbol",Fer="discrete",Oer=t=>gc(t)?t.map(r=>String(r)):String(t),Rer=(t,r)=>t[1]-r[1],Per=(t,r)=>r[1]-t[1];Vme={[kH]:"quantiles",[Yme]:"thresholds",[uet]:"domain"},get={[kH]:"quantiles",[Yme]:"domain"};Ver=t=>Vme[t.type]||t.bins;Wer=t=>(r,n,o)=>{let i=set(o[n+1],set(o.max,1/0)),s=aet(r,t),a=aet(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},set=(t,r)=>t??r,qer=t=>(r,n)=>n?t(r):null,Her=t=>r=>t(r),aet=(t,r)=>Number.isFinite(t)?r(t):null});function vge(t){return t&&t.gradient}function zet(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?$H:"";return i||(i=t.id="gradient_"+Xer++,o==="radial"?(t.x1=by(t.x1,.5),t.y1=by(t.y1,.5),t.r1=by(t.r1,0),t.x2=by(t.x2,.5),t.y2=by(t.y2,.5),t.r2=by(t.r2,.5),s=$H):(t.x1=by(t.x1,0),t.y1=by(t.y1,0),t.x2=by(t.x2,1),t.y2=by(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function by(t,r){return t??r}function Uet(t,r,n){var o=Mp(bet,t)&&bet[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function Vet(t){let r=[];return(t.match(Zer)||[]).forEach(o=>{let i=o[0],s=i.toLowerCase(),a=Ker[s],l=ttr(s,a,o.slice(1).trim()),u=l.length;if(u<a||u&&u%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(r.push([i,...l.slice(0,a)]),u!==a){s==="m"&&(i=i==="M"?"L":"l");for(let c=a;c<u;c+=a)r.push([i,...l.slice(c,c+a)])}}),r}function ttr(t,r,n){let o=[];for(let i=0;r&&i<n.length;)for(let s=0;s<r;++s){let a=t==="a"&&(s===3||s===4)?etr:Qer,l=n.slice(i).match(a);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");i+=l[0].length,o.push(+l[0]);let u=n.slice(i).match(Jer);u!==null&&(i+=u[0].length)}return o}function ntr(t,r,n,o,i,s,a,l,u){let c=Get.call(arguments);if(Jme[c])return Jme[c];let f=a*E_,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let h=p*(l-t)*.5+d*(u-r)*.5,m=p*(u-r)*.5-d*(l-t)*.5,g=h*h/(n*n)+m*m/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,S=y*t+b*r,C=x*t+v*r,T=1/((S-w)*(S-w)+(C-_)*(C-_))-.25;T<0&&(T=0);let I=Math.sqrt(T);s==i&&(I=-I);let k=.5*(w+S)-I*(C-_),F=.5*(_+C)+I*(S-w),D=Math.atan2(_-F,w-k),P=Math.atan2(C-F,S-k)-D;P<0&&s===1?P+=xy:P>0&&s===0&&(P-=xy);let R=Math.ceil(Math.abs(P/(uT+.001))),V=[];for(let G=0;G<R;++G){let U=D+G*P/R,H=D+(G+1)*P/R;V[G]=[k,F,U,H,n,o,d,p]}return Jme[c]=V}function otr(t){let r=Get.call(t);if(ege[r])return ege[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,h=c*l,m=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+m-w*g,S=o+g+w*m,C=n+y,E=o+b,T=C+w*b,I=E-w*y;return ege[r]=[f*_+d*S,p*_+h*S,f*T+d*I,p*T+h*I,f*C+d*E,p*C+h*E]}function itr(t,r,n){let o=Bp[0]=t[0];if(o==="a"||o==="A")Bp[1]=r*t[1],Bp[2]=n*t[2],Bp[3]=t[3],Bp[4]=t[4],Bp[5]=t[5],Bp[6]=r*t[6],Bp[7]=n*t[7];else if(o==="h"||o==="H")Bp[1]=r*t[1];else if(o==="v"||o==="V")Bp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)Bp[i]=(i%2==1?r:n)*t[i];return Bp}function sge(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,h,m,g,y=0,b=0;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var x=0,v=r.length;x<v;++x){switch(a=r[x],(i!==1||s!==1)&&(a=itr(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"c":p=u+a[5],h=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,h+o),u=p,c=h;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],h=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,h+o),f=u+a[1],d=c+a[2],u=p,c=h;break;case"S":p=a[3],h=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"q":p=u+a[3],h=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"Q":p=a[3],h=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"t":p=u+a[1],h=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-m,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),m=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h,f=u+a[1],d=c+a[2];break;case"T":p=a[1],h=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"a":xet(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":xet(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":u=y,c=b,t.closePath();break}l=a}}function xet(t,r,n,o){let i=ntr(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=otr(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function str(t){return Mp(wet,t)?wet[t]:atr(t)}function atr(t){if(!Mp(tge,t)){let r=Vet(t);tge[t]={draw:function(n,o){sge(n,r,0,0,Math.sqrt(o)/2)}}}return tge[t]}function ltr(t){return t.x}function utr(t){return t.y}function ctr(t){return t.width}function ftr(t){return t.height}function gv(t){return typeof t=="function"?t:()=>+t}function NH(t,r,n){return Math.max(r,Math.min(t,n))}function dtr(){var t=ltr,r=utr,n=ctr,o=ftr,i=gv(0),s=i,a=i,l=i,u=null;function c(f,d,p){var h,m=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=NH(+i.call(this,f),0,x),w=NH(+s.call(this,f),0,x),_=NH(+a.call(this,f),0,x),S=NH(+l.call(this,f),0,x);if(u||(u=h=GL()),v<=0&&w<=0&&_<=0&&S<=0)u.rect(m,g,y,b);else{var C=m+y,E=g+b;u.moveTo(m+v,g),u.lineTo(C-w,g),u.bezierCurveTo(C-v_*w,g,C,g+v_*w,C,g+w),u.lineTo(C,E-S),u.bezierCurveTo(C,E-v_*S,C-v_*S,E,C-S,E),u.lineTo(m+_,E),u.bezierCurveTo(m+v_*_,E,m,E-v_*_,m,E-_),u.lineTo(m,g+v),u.bezierCurveTo(m,g+v_*v,m+v_*v,g,m+v,g),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(f){return arguments.length?(t=gv(f),c):t},c.y=function(f){return arguments.length?(r=gv(f),c):r},c.width=function(f){return arguments.length?(n=gv(f),c):n},c.height=function(f){return arguments.length?(o=gv(f),c):o},c.cornerRadius=function(f,d,p,h){return arguments.length?(i=gv(f),s=d!=null?gv(d):i,l=p!=null?gv(p):i,a=h!=null?gv(h):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function ptr(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,h){let m=h/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.hypot(g,y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*m,p-y*m),i.arc(d,p,m,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,m,0,xy);i.closePath()}else s=1;a=d,l=p,u=m}function f(d){var p,h=d.length,m,g=!1,y;for(i==null&&(i=y=GL()),p=0;p<=h;++p)!(p<h&&o(m=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(m,p,d),+r(m,p,d),+n(m,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function g4(t,r){return t??r}function wge(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function jtr(t,r){return Ntr.context(t)(r)}function Btr(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?Ftr:Mtr).curve(Uet(o,n.orient,n.tension)).context(t)(r)}function $tr(t,r){let n=r[0],o=n.interpolate||"linear";return Otr.curve(Uet(o,n.orient,n.tension)).context(t)(r)}function HN(t,r,n,o){return Rtr.context(t)(r,n,o)}function ztr(t,r){return(r.mark.shape||r.shape).context(t)(r)}function Utr(t,r){return Ptr.context(t)(r)}function Vtr(t,r){return Ltr.context(t)(r)}function _ge(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+Gtr++),a=i.clipping[s]||(i.clipping[s]={id:s});return e_(o)?a.path=o(null):wge(n)?a.path=HN(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function mf(t){this.clear(),t&&this.union(t)}function rY(t){this.mark=t,this.bounds=this.bounds||new mf}function Sge(t){rY.call(this,t),this.items=this.items||[]}function _et(t){t._pending+=1}function i4(t){t._pending-=1}function bv(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?Wtr(r,o):0))}return t}function Wtr(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function oY(t,r){return nY=t,r?(dT=r*E_,lge=cge=Math.cos(dT),OH=Math.sin(dT),uge=-OH):(lge=cge=1,dT=OH=uge=0),Htr}function Tet(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function Aet(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>rtr?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(ket(u,t,r,n,o)),0<c&&c<1&&i(ket(c,t,r,n,o))}function ket(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function Wet(t){return function(r,n){if(!C_)return!0;t(C_,r),fge.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=fge;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(C_.isPointInPath(u,l))return!0;return!1}}function qet(t,r){return r.contains(t.x||0,t.y||0)}function Het(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(fge.set(n,o,n+i,o+s))}function Ytr(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return a4(r,n,o,i,s)}function a4(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-c,m=-(s-r)),y===1&&(h=c,m=l-r),y===2&&(h=-f,m=-(a-n)),y===3&&(h=f,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>p)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function GN(t,r){t.globalCompositeOperation=r.blend||"source-over"}function mm(t,r){return t??r}function Iet(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function Xtr(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+mm(r.x1,.5)*o,n.y1+mm(r.y1,.5)*i,Math.max(o,i)*mm(r.r1,0),n.x1+mm(r.x2,.5)*o,n.y1+mm(r.y2,.5)*i,Math.max(o,i)*mm(r.r2,.5));else{let a=mm(r.x1,0),l=mm(r.y1,0),u=mm(r.x2,1),c=mm(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=lf(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=Iet(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return Iet(s,r.stops)}function Yet(t,r,n){return vge(n)?Xtr(t,n,r.bounds):n}function zH(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=Yet(t,r,r.fill),!0):!1}function WN(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=Yet(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||Ktr),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function Ztr(t,r){return t.zindex-r.zindex||t.index-r.index}function Xet(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(Ztr)}function vy(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=Xet(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function dge(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=Xet(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function Cge(t){return function(r,n,o){vy(n,i=>{(!o||o.intersects(i.bounds))&&Ket(t,r,i,i)})}}function Qtr(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&Ket(t,r,n.items[0],n.items)}}function Ket(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(GN(r,n),n.fill&&zH(r,n,i)&&r.fill(),n.stroke&&WN(r,n,i)&&r.stroke()))}function iY(t){return t=t||kpe,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,dge(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function x4(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Ege(t){return iY(x4(t))}function hT(t,r){return"translate("+t+","+r+")"}function Tge(t){return"rotate("+t+")"}function Jtr(t,r){return"scale("+t+","+r+")"}function Zet(t){return hT(t.x||0,t.y||0)}function err(t){return hT(t.x||0,t.y||0)+(t.angle?" "+Tge(t.angle):"")}function trr(t){return hT(t.x||0,t.y||0)+(t.angle?" "+Tge(t.angle):"")+(t.scaleX||t.scaleY?" "+Jtr(t.scaleX||1,t.scaleY||1):"")}function Age(t,r,n){function o(a,l){a("transform",err(l)),a("d",r(null,l))}function i(a,l){return r(oY(a,l.angle),l),bv(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=E_),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:Cge(s),pick:Ege(s),isect:n||Wet(s)}}function nrr(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function orr(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function irr(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function kge(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(oY(u),f),bv(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=x4(s);function l(u,c,f,d,p,h){var m=c.items,g=c.bounds;return!m||!m.length||g&&!g.contains(p,h)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,m,f,d)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:Qtr(s),pick:l,isect:qet,tip:n}}function arr(t,r){var n=r.clip;t.save(),e_(n)?(t.beginPath(),n(t),t.clip()):Qet(t,r.group)}function Qet(t,r){t.beginPath(),wge(r)?HN(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function Jet(t){let r=mm(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function lrr(t,r){t("transform",Zet(r))}function ett(t,r){let n=Jet(r);t("d",HN(null,r,n,n))}function urr(t,r){t("class","background"),t("aria-hidden",!0),ett(t,r)}function crr(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?ett(t,r):t("d","")}function frr(t,r,n){let o=r.clip?_ge(n,r,r):null;t("clip-path",o)}function drr(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),bv(t,r),t.translate(r.x||0,r.y||0)}function d4(t,r,n,o){let i=Jet(r);t.beginPath(),HN(t,r,(n||0)+i,(o||0)+i)}function grr(t,r,n,o){vy(r,i=>{let s=i.x||0,a=i.y||0,l=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(d4(t,i,s,a),GN(t,i),i.fill&&zH(t,i,u)&&t.fill(),i.stroke&&!l&&WN(t,i,u)&&t.stroke()),t.save(),t.translate(s,a),i.clip&&Qet(t,i),n&&n.translate(-s,-a),vy(i,c=>{(c.marktype==="group"||o==null||o.includes(c.marktype))&&this.draw(t,c,n,o)}),n&&n.translate(s,a),t.restore(),l&&i.stroke&&u&&(d4(t,i,s,a),GN(t,i),WN(t,i,u)&&t.stroke())})}function yrr(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return dge(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let h=f+(u.width||0),m=d+(u.height||0),g=u.clip;if(g&&(i<f||i>h||s<d||s>m))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&wge(u)&&!mrr(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&hrr(t,u,a,l)?(t.restore(),u):(c=dge(u,x=>brr(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&prr(t,u,a,l)&&(c=u),t.restore(),c||null)})}function brr(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function Ige(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function Dge(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function Nge(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function sY(t,r){return t==="center"?r/2:t==="right"?r:0}function aY(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function vrr(t,r,n){let o=Ige(r,n),i=Dge(r,o),s=Nge(r,o),a=(r.x||0)-sY(r.align,i),l=(r.y||0)-aY(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,p4["xmlns:xlink"],"xlink:href"),t("transform",hT(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function wrr(t,r){let n=r.image,o=Dge(r,n),i=Nge(r,n),s=(r.x||0)-sY(r.align,o),a=(r.y||0)-aY(r.baseline,i);return t.set(s,a,s+o,a+i)}function _rr(t,r,n){vy(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=Ige(o,this),s=Dge(o,i),a=Nge(o,i);if(s===0||a===0)return;let l=(o.x||0)-sY(o.align,s),u=(o.y||0)-aY(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(GN(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function Err(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",trr(r)),t("d",r.path)}function PH(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*E_,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=Vet(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),sge(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):sge(t,u,o,i,s,a)}function Trr(t,r){return PH(oY(t,r.angle),r)?t.set(0,0,0,0):bv(t,r,!0)}function krr(t,r){t("d",HN(null,r))}function Irr(t,r){var n,o;return bv(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function Det(t,r){t.beginPath(),HN(t,r)}function Nrr(t,r){t("transform",Zet(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function Mrr(t,r){var n,o;return bv(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function ttt(t,r,n){var o,i,s,a;return r.stroke&&WN(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function Frr(t,r,n){vy(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&ttt(t,o,i)&&(GN(t,o),t.stroke())}})}function Orr(t,r,n,o){return t.isPointInStroke?ttt(t,r,1)&&t.isPointInStroke(n,o):!1}function rtt(t){mT.width=t&&C_?Mge:UH}function UH(t,r){return ntt(T_(t,r),xv(t))}function ntt(t,r){return~~(.8*t.length*r)}function Mge(t,r){return xv(t)<=0||!(r=T_(t,r))?0:ott(r,Oge(t))}function ott(t,r){let n=`(${r}) ${t}`,o=Net.get(n);return o===void 0&&(C_.font=r,o=C_.measureText(t).width,Net.set(n,o)),o}function xv(t){return t.fontSize!=null?+t.fontSize||0:11}function gT(t){return t.lineHeight!=null?t.lineHeight:xv(t)+2}function jrr(t){return gc(t)?t.length>1?t:t[0]:t}function v4(t){return jrr(t.lineBreak&&t.text&&!gc(t.text)?t.text.split(t.lineBreak):t.text)}function Fge(t){let r=v4(t);return(gc(r)?r.length-1:0)*gT(t)}function T_(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?$rr(t,n):n}function Brr(t){if(mT.width===Mge){let r=Oge(t);return n=>ott(n,r)}else if(mT.width===UH){let r=xv(t);return n=>ntt(n,r)}else return r=>mT.width(t,r)}function $rr(t,r){var n=+t.limit,o=Brr(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function lY(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Oge(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+xv(t)+"px "+lY(t,r)}function Rge(t){var r=t.baseline,n=xv(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*gT(t):r==="line-bottom"?.29*n-.5*gT(t):0)}function uY(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-uT,r+=o*Math.cos(i),n+=o*Math.sin(i)),u4.x1=r,u4.y1=n,u4}function Urr(t,r){var n=r.dx||0,o=(r.dy||0)+Rge(r),i=uY(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",zrr[r.align]||"start"),l?(u=hT(s,a)+" "+Tge(l),(n||o)&&(u+=" "+hT(n,o))):u=hT(s+n,a+o),t("transform",u)}function Pge(t,r,n){var o=mT.height(r),i=r.align,s=uY(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+Rge(r)-Math.round(.8*o),f=v4(r),d;if(gc(f)?(o+=gT(r)*(f.length-1),d=f.reduce((p,h)=>Math.max(p,mT.width(r,h)),0)):d=mT.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*E_,a,l);else if(n===2)return t.rotatedPoints(r.angle*E_,a,l);return t}function Vrr(t,r,n){vy(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=Oge(o),t.textAlign=o.align||"left",s=uY(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*E_),a=l=0),a+=o.dx||0,l+=(o.dy||0)+Rge(o),f=v4(o),GN(t,o),gc(f))for(c=gT(o),u=0;u<f.length;++u)d=T_(o,f[u]),o.fill&&zH(t,o,i)&&t.fillText(d,a,l),o.stroke&&WN(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=T_(o,f),o.fill&&zH(t,o,i)&&t.fillText(d,a,l),o.stroke&&WN(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function Grr(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=uY(r),l=a.x1,u=a.y1,c=Pge(u4,r,1),f=-r.angle*E_,d=Math.cos(f),p=Math.sin(f),h=d*i-p*s+(l-d*l+p*u),m=p*i+d*s+(u-p*l-d*u);return c.contains(h,m)}function Wrr(t,r){let n=Pge(u4,t,2);return a4(r,n[0],n[1],n[2],n[3])||a4(r,n[0],n[1],n[4],n[5])||a4(r,n[4],n[5],n[6],n[7])||a4(r,n[2],n[3],n[6],n[7])}function pT(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function itt(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function il(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=pT(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function gm(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function stt(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function att(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function Yrr(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=A_[i.marktype]).tip){for(a=att(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function Xrr(t,r,n,o){t.element().setAttribute("title",o||"")}function Met(t,r){onr(r).forEach(n=>inr(t,n))}function inr(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function l4(t,r,n){r.forEach(o=>t.fire(o,n))}function Fet(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?l4(this,t,o):((!i||!i.exit)&&l4(this,n,o),this._active=s,l4(this,r,o),l4(this,t,o))}}function Oet(t){return function(r){l4(this,t,r),this._active=null}}function snr(){return typeof window<"u"&&window.devicePixelRatio||1}function anr(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?snr():i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function unr(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function ytt(t,r){let n=r.aria===!1;if(t(htt,n||void 0),n||r.description==null)for(let o in Pet)t(Pet[o],void 0);else{let o=r.mark.marktype;t(Lge,r.description),t(jge,r.ariaRole||(o==="group"?mtt:$ge)),t(Bge,r.ariaRoleDescription||`${o} mark`)}}function btt(t){return t.aria===!1?{[htt]:!0}:cnr[t.role]?null:Ret[t.role]?dnr(t,Ret[t.role]):fnr(t)}function fnr(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return gtt(n?mtt:$ge,`${r} mark container`,t.description)}function dnr(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return gtt(r.role||$ge,r.desc,n.description||o(n))}catch{return null}}function Let(t){return xN(t.text).join(" ")}function pnr(t){let r=t.datum,n=t.orient,o=r.title?xtt(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${Zme(l)?"discrete":l} scale with ${Qme(a,s,t)}`}function hnr(t){let r=t.datum,n=r.title?xtt(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return gnr(o)+(n?` titled '${n}'`:"")+` for ${mnr(s)} with ${Qme(u,l,t)}`}function xtt(t){try{return xN(af(t.items).items[0].text).join(" ")}catch{return null}}function mnr(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+af(t)}function gnr(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function wtt(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${ynr(c)}"`),l),l={open(u){s(u),r="<"+u;for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];for(let p of f)for(let h in p)a(h,p[h]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=vtt(u),l),toString:()=>t};return l}function _tt(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes;for(let o of n)o.nodeType===3?t.text(o.nodeValue):_tt(t,o)}return t.close()}function Bet(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function xnr(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=il(t,n++,"pattern",Ia);S_(a,{id:$H+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=il(a,0,"rect",Ia),S_(a,{width:1,height:1,fill:`url(${Ctt()}#${r.id})`}),t=il(t,n++,"radialGradient",Ia),S_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=il(t,n++,"linearGradient",Ia),S_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=il(t,o,"stop",Ia),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return gm(t,o),n}function vnr(t,r,n){let o;return t=il(t,n,"clipPath",Ia),t.setAttribute("id",r.id),r.path?(o=il(t,0,"path",Ia),o.setAttribute("d",r.path)):(o=il(t,0,"rect",Ia),S_(o,{x:0,y:0,width:r.width,height:r.height})),gm(t,1),n+1}function wnr(t,r,n,o){r=r.lastChild.previousSibling;let i,s=0;vy(n,a=>{i=t.mark(r,a,i,o),++s}),gm(r,1+s)}function $et(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=pT(a,o,Ia),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=pT(a,"path",Ia);s.appendChild(l),l.__data__=t;let u=pT(a,"g",Ia);s.appendChild(u),u.__data__=t;let c=pT(a,"path",Ia);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||_nr(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function _nr(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function f4(t,r,n){r!==_u[t]&&(n?Cnr(yv,t,r,n):vc(yv,t,r),_u[t]=r)}function BH(t,r,n){n!==_u[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),_u[r]=n)}function S_(t,r){for(let n in r)vc(t,n,r[n])}function vc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function Cnr(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function Ctt(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Enr(t,r,n,o,i){let s;if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),o==="text"&&(t["font-family"]=lY(r),t["font-size"]=xv(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let a in ZH){let l=r[a],u=ZH[a];l==="transparent"&&(u==="fill"||u==="stroke")||l!=null&&(vge(l)&&(l=zet(l,i.gradient,"")),t[u]=l)}for(let a in QH){let l=r[a];l!=null&&(s=s||[],s.push(`${QH[a]}: ${l};`))}return s&&(t.style=s.join(" ")),t}function Ett(t){let r=t.clip;if(e_(r))r(oY(ige.clear()));else if(r)ige.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(ige)}var Xer,$H,bet,Ker,Zer,Qer,Jer,etr,E_,rtr,uT,xy,VN,Jme,ege,Get,Bp,vet,wet,tge,v_,y4,b4,htr,mtr,gtr,ytr,btr,xtr,vtr,wtr,_tr,Str,Ctr,Etr,Ttr,Atr,ktr,Itr,tY,Dtr,Ntr,Mtr,Ftr,Otr,Rtr,Ptr,Ltr,Gtr,age,qtr,nY,MH,FH,dT,lge,OH,uge,cge,__,RH,Cet,Eet,cT,fT,rge,nge,Htr,C_,fge,Ktr,rrr,srr,prr,hrr,mrr,xrr,p4,Srr,Crr,Arr,Drr,Rrr,Prr,Lrr,Net,mT,zrr,u4,qrr,Hrr,A_,VH,qN,Krr,Zrr,Qrr,ltt,LH,utt,pge,Jrr,GH,jH,ctt,hge,enr,ftt,WH,dtt,qH,tnr,rnr,ptt,HH,YH,XH,nnr,mge,c4,gge,KH,onr,h4,lnr,yge,oge,htt,Lge,jge,Bge,mtt,$ge,gtt,cnr,Ret,Pet,vtt,ynr,bnr,ZH,QH,Stt,s4,jet,Ia,JH,yv,_u,Snr,bge,w_,eY,xge,Tnr,Anr,knr,Inr,Dnr,m4,ige,Ttt=N(()=>{"use strict";UE();EKe();Ope();SN();UZe();yet();Xer=0,$H="p_";bet={basis:{curve:Bpe},"basis-closed":{curve:$pe},"basis-open":{curve:zpe},bundle:{curve:Upe,tension:"beta",value:.85},cardinal:{curve:Vpe,tension:"tension",value:0},"cardinal-open":{curve:qpe,tension:"tension",value:0},"cardinal-closed":{curve:Gpe,tension:"tension",value:0},"catmull-rom":{curve:Ype,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Xpe,tension:"alpha",value:.5},"catmull-rom-open":{curve:Kpe,tension:"alpha",value:.5},linear:{curve:WE},"linear-closed":{curve:Zpe},monotone:{horizontal:ehe,vertical:Jpe},natural:{curve:the},step:{curve:rhe},"step-after":{curve:ohe},"step-before":{curve:nhe}};Ker={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Zer=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Qer=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Jer=/^((\s+,?\s*)|(,\s*))/,etr=/^[01]/;E_=Math.PI/180,rtr=1e-14,uT=Math.PI/2,xy=Math.PI*2,VN=Math.sqrt(3)/2,Jme={},ege={},Get=[].join;Bp=["l",0,0,0,0,0,0,0];vet=.5773502691896257,wet={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,xy)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=VN*n,i=o-n*vet,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=VN*n,i=o-n*vet;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=VN*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=VN*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=VN*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=VN*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};tge={};v_=.448084975506;y4=t=>t.x||0,b4=t=>t.y||0,htr=t=>t.width||0,mtr=t=>t.height||0,gtr=t=>(t.x||0)+(t.width||0),ytr=t=>(t.y||0)+(t.height||0),btr=t=>t.startAngle||0,xtr=t=>t.endAngle||0,vtr=t=>t.padAngle||0,wtr=t=>t.innerRadius||0,_tr=t=>t.outerRadius||0,Str=t=>t.cornerRadius||0,Ctr=t=>g4(t.cornerRadiusTopLeft,t.cornerRadius)||0,Etr=t=>g4(t.cornerRadiusTopRight,t.cornerRadius)||0,Ttr=t=>g4(t.cornerRadiusBottomRight,t.cornerRadius)||0,Atr=t=>g4(t.cornerRadiusBottomLeft,t.cornerRadius)||0,ktr=t=>g4(t.size,64),Itr=t=>t.size||1,tY=t=>t.defined!==!1,Dtr=t=>str(t.shape||"circle"),Ntr=Rpe().startAngle(btr).endAngle(xtr).padAngle(vtr).innerRadius(wtr).outerRadius(_tr).cornerRadius(Str),Mtr=_q().x(y4).y1(b4).y0(ytr).defined(tY),Ftr=_q().y(b4).x1(y4).x0(gtr).defined(tY),Otr=qL().x(y4).y(b4).defined(tY),Rtr=dtr().x(y4).y(b4).width(htr).height(mtr).cornerRadius(Ctr,Etr,Ttr,Atr),Ptr=Sq().type(Dtr).size(ktr),Ltr=ptr().x(y4).y(b4).defined(tY).size(Itr);Gtr=1;mf.prototype={clone(){return new mf(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};av(Sge,rY);age=class{constructor(r){this._pending=0,this._loader=r||qhe()}pending(){return this._pending}sanitizeURL(r){let n=this;return _et(n),n._loader.sanitize(r,{context:"href"}).then(o=>(i4(n),o)).catch(()=>(i4(n),null))}loadImage(r){let n=this,o=Dq();return _et(n),n._loader.sanitize(r,{context:"image"}).then(i=>{let s=i.href;if(!s||!o)throw{url:s};let a=new o,l=Mp(i,"crossOrigin")?i.crossOrigin:"anonymous";return l!=null&&(a.crossOrigin=l),a.onload=()=>i4(n),a.onerror=()=>i4(n),a.src=s,a}).catch(i=>(i4(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){let r=this;return new Promise(n=>{function o(i){r.pending()?setTimeout(()=>{o(!0)},10):n(i)}o(!1)})}};qtr=xy-1e-8,__=(t,r)=>nY.add(t,r),RH=(t,r)=>__(MH=t,FH=r),Cet=t=>__(t,nY.y1),Eet=t=>__(nY.x1,t),cT=(t,r)=>lge*t+uge*r,fT=(t,r)=>OH*t+cge*r,rge=(t,r)=>__(cT(t,r),fT(t,r)),nge=(t,r)=>RH(cT(t,r),fT(t,r));Htr={beginPath(){},closePath(){},moveTo:nge,lineTo:nge,rect(t,r,n,o){dT?(rge(t+n,r),rge(t+n,r+o),rge(t,r+o),nge(t,r)):(__(t+n,r+o),RH(t,r))},quadraticCurveTo(t,r,n,o){let i=cT(t,r),s=fT(t,r),a=cT(n,o),l=fT(n,o);Tet(MH,i,a,Cet),Tet(FH,s,l,Eet),RH(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=cT(t,r),l=fT(t,r),u=cT(n,o),c=fT(n,o),f=cT(i,s),d=fT(i,s);Aet(MH,a,u,f,Cet),Aet(FH,l,c,d,Eet),RH(f,d)},arc(t,r,n,o,i,s){if(o+=dT,i+=dT,MH=n*Math.cos(i)+t,FH=n*Math.sin(i)+r,Math.abs(i-o)>qtr)__(t-n,r-n),__(t+n,r+n);else{let a=c=>__(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%xy,o<0&&(o+=xy),i=i%xy,i<0&&(i+=xy),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=xy,l=o-o%uT,u=0;u<4&&l>i;++u,l-=uT)a(l);else for(l=o-o%uT+uT,u=0;u<4&&l<i;++u,l=l+uT)a(l)}}};C_=(C_=lf(1,1))?C_.getContext("2d"):null,fge=new mf;Ktr=[];rrr=Age("arc",jtr);srr=kge("area",Btr,nrr);prr=x4(d4),hrr=x4(d4,!1),mrr=x4(d4,!0);xrr={type:"group",tag:"g",nested:!1,attr:lrr,bound:drr,draw:grr,pick:yrr,isect:Het,content:frr,background:urr,foreground:crr},p4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};Srr={type:"image",tag:"image",nested:!1,attr:vrr,bound:wrr,draw:_rr,pick:iY(),isect:kpe,get:Ige,xOffset:sY,yOffset:aY},Crr=kge("line",$tr,orr);Arr={type:"path",tag:"path",nested:!1,attr:Err,bound:Trr,draw:Cge(PH),pick:Ege(PH),isect:Wet(PH)};Drr={type:"rect",tag:"path",nested:!1,attr:krr,bound:Irr,draw:Cge(Det),pick:Ege(Det),isect:Het};Rrr={type:"rule",tag:"line",nested:!1,attr:Nrr,bound:Mrr,draw:Frr,pick:iY(Orr),isect:Ytr},Prr=Age("shape",ztr),Lrr=Age("symbol",Utr,qet),Net=WXe(),mT={height:xv,measureWidth:Mge,estimateWidth:UH,width:UH,canvas:rtt};rtt(!0);zrr={left:"start",center:"middle",right:"end"},u4=new mf;qrr={type:"text",tag:"text",nested:!1,attr:Urr,bound:Pge,draw:Vrr,pick:iY(Grr),isect:Wrr},Hrr=kge("trail",Vtr,irr),A_={arc:rrr,area:srr,group:xrr,image:Srr,line:Crr,path:Arr,rect:Drr,rule:Rrr,shape:Prr,symbol:Lrr,text:qrr,trail:Hrr};VH=class{constructor(r,n){this._active=null,this._handlers={},this._loader=r||qhe(),this._tooltip=n||Xrr}initialize(r,n,o){return this._el=r,this._obj=o||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(r){return arguments.length?(this._origin=r||[0,0],this):this._origin.slice()}scene(r){return arguments.length?(this._scene=r,this):this._scene}on(){}off(){}_handlerIndex(r,n,o){for(let i=r?r.length:0;--i>=0;)if(r[i].type===n&&(!o||r[i].handler===o))return i;return-1}handlers(r){let n=this._handlers,o=[];if(r)o.push(...n[this.eventName(r)]);else for(let i in n)o.push(...n[i]);return o}eventName(r){let n=r.indexOf(".");return n<0?r:r.slice(0,n)}handleHref(r,n,o){this._loader.sanitize(o,{context:"href"}).then(i=>{let s=new MouseEvent(r.type,r),a=pT(null,"a");for(let l in i)a.setAttribute(l,i[l]);a.dispatchEvent(s)}).catch(()=>{})}handleTooltip(r,n,o){if(n&&n.tooltip!=null){n=Yrr(n,r,this.canvas(),this._origin);let i=o&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,r,n,i)}}getItemBoundingClientRect(r){let n=this.canvas();if(!n)return;let o=n.getBoundingClientRect(),i=this._origin,s=r.bounds,a=s.width(),l=s.height(),u=s.x1+i[0]+o.left,c=s.y1+i[1]+o.top;for(;r.mark&&(r=r.mark.group);)u+=r.x||0,c+=r.y||0;return{x:u,y:c,width:a,height:l,left:u,top:c,right:u+a,bottom:c+l}}};qN=class{constructor(r){this._el=null,this._bgcolor=null,this._loader=new age(r)}initialize(r,n,o,i,s){return this._el=r,this.resize(n,o,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(r){return arguments.length===0?this._bgcolor:(this._bgcolor=r,this)}resize(r,n,o,i){return this._width=r,this._height=n,this._origin=o||[0,0],this._scale=i||1,this}dirty(){}render(r,n){let o=this;return o._call=function(){o._render(r,n)},o._call(),o._call=null,o}_render(){}renderAsync(r,n){let o=this.render(r,n);return this._ready?this._ready.then(()=>o):Promise.resolve(o)}_load(r,n){var o=this,i=o._loader[r](n);if(!o._ready){let s=o._call;o._ready=o._loader.ready().then(a=>{a&&s(),o._ready=null})}return i}sanitizeURL(r){return this._load("sanitizeURL",r)}loadImage(r){return this._load("loadImage",r)}},Krr="keydown",Zrr="keypress",Qrr="keyup",ltt="dragenter",LH="dragleave",utt="dragover",pge="pointerdown",Jrr="pointerup",GH="pointermove",jH="pointerout",ctt="pointerover",hge="mousedown",enr="mouseup",ftt="mousemove",WH="mouseout",dtt="mouseover",qH="click",tnr="dblclick",rnr="wheel",ptt="mousewheel",HH="touchstart",YH="touchmove",XH="touchend",nnr=[Krr,Zrr,Qrr,ltt,LH,utt,pge,Jrr,GH,jH,ctt,hge,enr,ftt,WH,dtt,qH,tnr,rnr,ptt,HH,YH,XH],mge=GH,c4=WH,gge=qH,KH=class extends VH{constructor(r,n){super(r,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=nnr,this.pointermove=Fet([GH,ftt],[ctt,dtt],[jH,WH]),this.dragover=Fet([utt],[ltt],[LH]),this.pointerout=Oet([jH,WH]),this.dragleave=Oet([LH])}initialize(r,n,o){return this._canvas=r&&itt(r,"canvas"),[qH,hge,pge,GH,jH,LH].forEach(i=>Met(this,i)),super.initialize(r,n,o)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(r){this.fire(ptt,r)}pointerdown(r){this._down=this._active,this.fire(pge,r)}mousedown(r){this._down=this._active,this.fire(hge,r)}click(r){this._down===this._active&&(this.fire(qH,r),this._down=null)}touchstart(r){this._touch=this.pickEvent(r.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(HH,r,!0)}touchmove(r){this.fire(YH,r,!0)}touchend(r){this.fire(XH,r,!0),this._touch=null}fire(r,n,o){let i=o?this._touch:this._active,s=this._handlers[r];if(n.vegaType=r,r===gge&&i&&i.href?this.handleHref(n,i,i.href):(r===mge||r===c4)&&this.handleTooltip(n,i,r!==c4),s)for(let a=0,l=s.length;a<l;++a)s[a].handler.call(this._obj,n,i)}on(r,n){let o=this.eventName(r),i=this._handlers;return this._handlerIndex(i[o],r,n)<0&&(Met(this,r),(i[o]||(i[o]=[])).push({type:r,handler:n})),this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&i.splice(s,1),this}pickEvent(r){let n=att(r,this._canvas),o=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-o[0],n[1]-o[1])}pick(r,n,o,i,s){let a=this.context();return A_[r.marktype].pick.call(this,a,r,n,o,i,s)}},onr=t=>t===HH||t===YH||t===XH?[HH,YH,XH]:[t];h4=class extends qN{constructor(r){super(r),this._options={},this._redraw=!1,this._dirty=new mf,this._tempb=new mf}initialize(r,n,o,i,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:lf(1,1,this._options.type),r&&this._canvas&&(gm(r,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(r,n,o,i,s)}resize(r,n,o,i){if(super.resize(r,n,o,i),this._canvas)anr(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let s=this._options.externalContext;s||yu("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(r){let n=this._tempb.clear().union(r.bounds),o=r.mark.group;for(;o;)n.translate(o.x||0,o.y||0),o=o.mark.group;this._dirty.union(n)}_render(r,n){let o=this.context(),i=this._origin,s=this._width,a=this._height,l=this._dirty,u=lnr(i,s,a);o.save();let c=this._redraw||l.empty()?(this._redraw=!1,u.expand(1)):unr(o,u.intersect(l),i);return this.clear(-i[0],-i[1],s,a),this.draw(o,r,c,n),o.restore(),l.clear(),this}draw(r,n,o,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;let s=A_[n.marktype];n.clip&&arr(r,n),s.draw.call(this,r,n,o,i),n.clip&&r.restore()}clear(r,n,o,i){let s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(r,n,o,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(r,n,o,i))}},lnr=(t,r,n)=>new mf().set(0,0,r,n).translate(-t[0],-t[1]);yge=class extends VH{constructor(r,n){super(r,n);let o=this;o._hrefHandler=oge(o,(i,s)=>{s&&s.href&&o.handleHref(i,s,s.href)}),o._tooltipHandler=oge(o,(i,s)=>{o.handleTooltip(i,s,i.type!==c4)})}initialize(r,n,o){let i=this._svg;return i&&(i.removeEventListener(gge,this._hrefHandler),i.removeEventListener(mge,this._tooltipHandler),i.removeEventListener(c4,this._tooltipHandler)),this._svg=i=r&&itt(r,"svg"),i&&(i.addEventListener(gge,this._hrefHandler),i.addEventListener(mge,this._tooltipHandler),i.addEventListener(c4,this._tooltipHandler)),super.initialize(r,n,o)}canvas(){return this._svg}on(r,n){let o=this.eventName(r),i=this._handlers;if(this._handlerIndex(i[o],r,n)<0){let a={type:r,handler:n,listener:oge(this,n)};(i[o]||(i[o]=[])).push(a),this._svg&&this._svg.addEventListener(o,a.listener)}return this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&(this._svg&&this._svg.removeEventListener(o,i[s].listener),i.splice(s,1)),this}},oge=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)},htt="aria-hidden",Lge="aria-label",jge="role",Bge="aria-roledescription",mtt="graphics-object",$ge="graphics-symbol",gtt=(t,r,n)=>({[jge]:t,[Bge]:r,[Lge]:n||void 0}),cnr=zL(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ret={axis:{desc:"axis",caption:pnr},legend:{desc:"legend",caption:hnr},"title-text":{desc:"title",caption:t=>`Title text '${Let(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Let(t)}'`}},Pet={ariaRole:jge,ariaRoleDescription:Bge,description:Lge};vtt=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ynr=t=>vtt(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");bnr=t=>_tt(wtt(),t)+"";ZH={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},QH={blend:"mix-blend-mode"},Stt={fill:"none","stroke-miterlimit":10},s4=0,jet="http://www.w3.org/2000/xmlns/",Ia=p4.xmlns,JH=class extends qN{constructor(r){super(r),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(r,n,o,i,s){return this._defs={},this._clearDefs(),r&&(this._svg=il(r,0,"svg",Ia),this._svg.setAttributeNS(jet,"xmlns",Ia),this._svg.setAttributeNS(jet,"xmlns:xlink",p4["xmlns:xlink"]),this._svg.setAttribute("version",p4.version),this._svg.setAttribute("class","marks"),gm(r,1),this._root=il(this._svg,s4,"g",Ia),S_(this._root,Stt),gm(this._svg,s4+1)),this.background(this._bgcolor),super.initialize(r,n,o,i,s)}background(r){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",r),super.background(...arguments)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svg&&(S_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let r=this._svg,n=this._bgcolor;if(!r)return null;let o;n&&(r.removeAttribute("style"),o=il(r,s4,"rect",Ia),S_(o,{width:this._width,height:this._height,fill:n}));let i=bnr(r);return n&&(r.removeChild(o),this._svg.style.setProperty("background-color",n)),i}_render(r,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,r,void 0,n),gm(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(r){r.dirty!==this._dirtyID&&(r.dirty=this._dirtyID,this._dirty.push(r))}isDirty(r){return this._dirtyAll||!r._svg||!r._svg.ownerSVGElement||r.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let r=this._dirty;if(!r.length||!this._dirtyID)return!0;let n=++this._dirtyID,o,i,s,a,l,u,c;for(l=0,u=r.length;l<u;++l)if(o=r[l],i=o.mark,i.marktype!==s&&(s=i.marktype,a=A_[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Bet(o,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(o.exit){a.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(a,c._svg,c)):o._svg&&(c=o._svg.parentNode,c&&c.removeChild(o._svg)),o._svg=null;continue}o=a.nested?i.items[0]:o,o._update!==n&&(!o._svg||!o._svg.ownerSVGElement?(this._dirtyAll=!1,Bet(o,n)):this._update(a,o._svg,o),o._update=n)}return!this._dirtyAll}mark(r,n,o,i){if(!this.isDirty(n))return n._svg;let s=this._svg,a=n.marktype,l=A_[a],u=n.interactive===!1?"none":null,c=l.tag==="g",f=$et(n,r,o,"g",s);if(a!=="group"&&i!=null&&!i.includes(a))return gm(f,0),n._svg;f.setAttribute("class",stt(n));let d=btt(n);for(let g in d)vc(f,g,d[g]);c||vc(f,"pointer-events",u),vc(f,"clip-path",n.clip?_ge(this,n,n.group):null);let p=null,h=0,m=g=>{let y=this.isDirty(g),b=$et(g,f,p,l.tag,s);y&&(this._update(l,b,g),c&&wnr(this,b,g,i)),p=b,++h};return l.nested?n.items.length&&m(n.items[0]):vy(n,m),gm(f,h),f}_update(r,n,o){yv=n,_u=n.__values__,ytt(f4,o),r.attr(f4,o,this);let i=Snr[r.type];i&&i.call(this,r,n,o),yv&&this.style(yv,o)}style(r,n){if(n!=null){for(let o in ZH){let i=o==="font"?lY(n):n[o];if(i===_u[o])continue;let s=ZH[o];i==null?r.removeAttribute(s):(vge(i)&&(i=zet(i,this._defs.gradient,Ctt())),r.setAttribute(s,i+"")),_u[o]=i}for(let o in QH)BH(r,QH[o],n[o])}}defs(){let r=this._svg,n=this._defs,o=n.el,i=0;for(let s in n.gradient)o||(n.el=o=il(r,s4+1,"defs",Ia)),i=xnr(o,n.gradient[s],i);for(let s in n.clipping)o||(n.el=o=il(r,s4+1,"defs",Ia)),i=vnr(o,n.clipping[s],i);o&&(i===0?(r.removeChild(o),n.el=null):gm(o,i))}_clearDefs(){let r=this._defs;r.gradient={},r.clipping={}}};yv=null,_u=null,Snr={group(t,r,n){let o=yv=r.childNodes[2];_u=o.__values__,t.foreground(f4,n,this),_u=r.__values__,yv=r.childNodes[1],t.content(f4,n,this);let i=yv=r.childNodes[0];t.background(f4,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==_u.events&&(vc(o,"pointer-events",s),vc(i,"pointer-events",s),_u.events=s),n.strokeForeground&&n.stroke){let a=n.fill;vc(o,"display",null),this.style(i,n),vc(i,"stroke",null),a&&(n.fill=null),_u=o.__values__,this.style(o,n),a&&(n.fill=a),yv=null}else vc(o,"display","none")},image(t,r,n){n.smooth===!1?(BH(r,"image-rendering","optimizeSpeed"),BH(r,"image-rendering","pixelated")):BH(r,"image-rendering",null)},text(t,r,n){let o=v4(n),i,s,a,l;gc(o)?(s=o.map(u=>T_(n,u)),i=s.join(`
`),i!==_u.text&&(gm(r,0),a=r.ownerDocument,l=gT(n),s.forEach((u,c)=>{let f=pT(a,"tspan",Ia);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),_u.text=i)):(s=T_(n,o),s!==_u.text&&(r.textContent=s,_u.text=s)),vc(r,"font-family",lY(n)),vc(r,"font-size",xv(n)+"px"),vc(r,"font-style",n.fontStyle),vc(r,"font-variant",n.fontVariant),vc(r,"font-weight",n.fontWeight)}};bge=class extends qN{constructor(r){super(r),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(r){let n=wtt();n.open("svg",sv({},p4,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let o=this._bgcolor;return o&&o!=="transparent"&&o!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:o}).close(),n.open("g",Stt,{transform:"translate("+this._origin+")"}),this.mark(n,r),n.close(),this.defs(n),this._text=n.close()+"",this}mark(r,n){let o=A_[n.marktype],i=o.tag,s=[ytt,o.attr];r.open("g",{class:stt(n),"clip-path":n.clip?_ge(this,n,n.group):null},btt(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});let a=l=>{let u=this.href(l);if(u&&r.open("a",u),r.open(i,this.attr(n,l,s,i!=="g"?i:null)),i==="text"){let c=v4(l);if(gc(c)){let f={x:0,dy:gT(l)};for(let d=0;d<c.length;++d)r.open("tspan",d?f:null).text(T_(l,c[d])).close()}else r.text(T_(l,c))}else if(i==="g"){let c=l.strokeForeground,f=l.fill,d=l.stroke;c&&d&&(l.stroke=null),r.open("path",this.attr(n,l,o.background,"bgrect")).close(),r.open("g",this.attr(n,l,o.content)),vy(l,p=>this.mark(r,p)),r.close(),c&&d?(f&&(l.fill=null),l.stroke=d,r.open("path",this.attr(n,l,o.foreground,"bgrect")).close(),f&&(l.fill=f)):r.open("path",this.attr(n,l,o.foreground,"bgfore")).close()}r.close(),u&&r.close()};return o.nested?n.items&&n.items.length&&a(n.items[0]):vy(n,a),r.close()}href(r){let n=r.href,o;if(n){if(o=this._hrefs&&this._hrefs[n])return o;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(r,n,o,i){let s={},a=(l,u,c,f)=>{s[f||l]=u};return Array.isArray(o)?o.forEach(l=>l(a,n,this)):o(a,n,this),i&&Enr(s,n,r,i,this._defs),s}defs(r){let n=this._defs.gradient,o=this._defs.clipping;if(Object.keys(n).length+Object.keys(o).length!==0){r.open("defs");for(let s in n){let a=n[s],l=a.stops;a.gradient==="radial"?(r.open("pattern",{id:$H+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),r.close(),r.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):r.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let u=0;u<l.length;++u)r.open("stop",{offset:l[u].offset,"stop-color":l[u].color}).close();r.close()}for(let s in o){let a=o[s];r.open("clipPath",{id:s}),a.path?r.open("path",{d:a.path}).close():r.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),r.close()}r.close()}}};w_={svgMarkTypes:["text"],svgOnTop:!0,debug:!1},eY=class extends qN{constructor(r){super(r),this._svgRenderer=new JH(r),this._canvasRenderer=new h4(r)}initialize(r,n,o,i,s){this._root_el=il(r,0,"div");let a=il(this._root_el,0,"div"),l=il(this._root_el,1,"div");return this._root_el.style.position="relative",w_.debug||(a.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=w_.svgOnTop?l:a,this._canvasEl=w_.svgOnTop?a:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,o,i,s),this._svgRenderer.initialize(this._svgEl,n,o,i,s),super.initialize(r,n,o,i,s)}dirty(r){return w_.svgMarkTypes.includes(r.mark.marktype)?this._svgRenderer.dirty(r):this._canvasRenderer.dirty(r),this}_render(r,n){let i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!w_.svgMarkTypes.includes(s));this._svgRenderer.render(r,w_.svgMarkTypes),this._canvasRenderer.render(r,i)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svgRenderer.resize(r,n,o,i),this._canvasRenderer.resize(r,n,o,i),this}background(r){return w_.svgOnTop?this._canvasRenderer.background(r):this._svgRenderer.background(r),this}},xge=class extends KH{constructor(r,n){super(r,n)}initialize(r,n,o){let i=il(il(r,0,"div"),w_.svgOnTop?0:1,"div");return super.initialize(i,n,o)}},Tnr="canvas",Anr="hybrid",knr="png",Inr="svg",Dnr="none",m4={};m4[Tnr]=m4[knr]={renderer:h4,headless:h4,handler:KH};m4[Inr]={renderer:JH,headless:bge,handler:yge};m4[Anr]={renderer:eY,headless:eY,handler:xge};m4[Dnr]={};ige=new mf});var Kge={};fn(Kge,{bound:()=>Wtt,identifier:()=>Xge,mark:()=>qtt,overlap:()=>Htt,render:()=>Xtt,viewlayout:()=>Ztt});function Wtt(t){et.call(this,null,t)}function fY(t,r,n){return r(t.bounds.clear(),t,n)}function Xge(t){et.call(this,0,t)}function Unr(t){return t._signals[Att]||(t._signals[Att]=t.add(0))}function qtt(t){et.call(this,null,t)}function Vnr(t){let r=t.groups,n=t.parent;return r&&r.size===1?r.get(Object.keys(r.object)[0]):r&&n?r.lookup(n):null}function Htt(t){et.call(this,null,t)}function Xtt(t){et.call(this,null,t)}function XN(t,r,n){return t[r]===n?0:(t[r]=n,1)}function qnr(t){var r=t.items[0].orient;return r===ym||r===bm}function Hnr(t){let r=+t.grid;return[t.ticks?r++:-1,t.labels?r++:-1,r+ +t.domain]}function Ynr(t,r,n,o){var i=r.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,l=i.orient,u=Hnr(s),c=i.range,f=i.offset,d=i.position,p=i.minExtent,h=i.maxExtent,m=s.title&&i.items[u[2]].items[0],g=i.titlePadding,y=i.bounds,b=m&&Fge(m),x=0,v=0,w,_;switch(Su.clear().union(y),y.clear(),(w=u[0])>-1&&y.union(i.items[w].bounds),(w=u[1])>-1&&y.union(i.items[w].bounds),l){case KN:x=d||0,v=-f,_=Math.max(p,Math.min(h,-y.y1)),y.add(0,-_).add(c,0),m&&dY(t,m,_,g,b,0,-1,y);break;case ym:x=-f,v=d||0,_=Math.max(p,Math.min(h,-y.x1)),y.add(-_,0).add(0,c),m&&dY(t,m,_,g,b,1,-1,y);break;case bm:x=n+f,v=d||0,_=Math.max(p,Math.min(h,y.x2)),y.add(0,0).add(_,c),m&&dY(t,m,_,g,b,1,1,y);break;case D_:x=d||0,v=o+f,_=Math.max(p,Math.min(h,y.y2)),y.add(0,0).add(c,_),m&&dY(t,m,_,g,0,0,1,y);break;default:x=i.x,v=i.y}return bv(y.translate(x,v),i),XN(i,"x",x+a)|XN(i,"y",v+a)&&(i.bounds=Su,t.dirty(i),i.bounds=y,t.dirty(i)),i.mark.bounds.clear().union(y)}function dY(t,r,n,o,i,s,a,l){let u=r.bounds;if(r.auto){let c=a*(n+i+o),f=0,d=0;t.dirty(r),s?f=(r.x||0)-(r.x=c):d=(r.y||0)-(r.y=c),r.mark.bounds.clear().union(u.translate(-f,-d)),t.dirty(r)}l.union(u)}function Xnr(t){var r=t.items,n=r.length,o=0,i,s;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<n;++o)if(i=r[o],s=i.items,i.marktype===hY)switch(i.role){case Gge:case qge:case Wge:break;case Ptt:a.rowheaders.push(...s);break;case Ltt:a.rowfooters.push(...s);break;case Btt:a.colheaders.push(...s);break;case $tt:a.colfooters.push(...s);break;case jtt:a.rowtitle=s[0];break;case ztt:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function Knr(t){return new mf().set(0,0,t.width||0,t.height||0)}function Znr(t){let r=t.bounds.clone();return r.empty()?r.set(0,0,0,0):r.translate(-(t.x||0),-(t.y||0))}function Xi(t,r,n){let o=iv(t)?t[r]:t;return o??(n!==void 0?n:0)}function Ott(t){return t<0?Math.ceil(-t):0}function Ktt(t,r,n){var o=!n.nodirty,i=n.bounds===Yge?Knr:Znr,s=Su.set(0,0,0,0),a=Xi(n.align,k_),l=Xi(n.align,I_),u=Xi(n.padding,k_),c=Xi(n.padding,I_),f=n.columns||r.length,d=f<=0?1:Math.ceil(r.length/f),p=r.length,h=Array(p),m=Array(f),g=0,y=Array(p),b=Array(d),x=0,v=Array(p),w=Array(p),_=Array(p),S,C,E,T,I,k,F,D,L,P,R;for(C=0;C<f;++C)m[C]=0;for(C=0;C<d;++C)b[C]=0;for(C=0;C<p;++C)k=r[C],I=_[C]=i(k),k.x=k.x||0,v[C]=0,k.y=k.y||0,w[C]=0,E=C%f,T=~~(C/f),g=Math.max(g,F=Math.ceil(I.x2)),x=Math.max(x,D=Math.ceil(I.y2)),m[E]=Math.max(m[E],F),b[T]=Math.max(b[T],D),h[C]=u+Ott(I.x1),y[C]=c+Ott(I.y1),o&&t.dirty(r[C]);for(C=0;C<p;++C)C%f===0&&(h[C]=0),C<f&&(y[C]=0);if(a===Uge)for(E=1;E<f;++E){for(R=0,C=E;C<p;C+=f)R<h[C]&&(R=h[C]);for(C=E;C<p;C+=f)h[C]=R+m[E-1]}else if(a===cY){for(R=0,C=0;C<p;++C)C%f&&R<h[C]&&(R=h[C]);for(C=0;C<p;++C)C%f&&(h[C]=R+g)}else for(a=!1,E=1;E<f;++E)for(C=E;C<p;C+=f)h[C]+=m[E-1];if(l===Uge)for(T=1;T<d;++T){for(R=0,C=T*f,S=C+f;C<S;++C)R<y[C]&&(R=y[C]);for(C=T*f;C<S;++C)y[C]=R+b[T-1]}else if(l===cY){for(R=0,C=f;C<p;++C)R<y[C]&&(R=y[C]);for(C=f;C<p;++C)y[C]=R+x}else for(l=!1,T=1;T<d;++T)for(C=T*f,S=C+f;C<S;++C)y[C]+=b[T-1];for(L=0,C=0;C<p;++C)L=h[C]+(C%f?L:0),v[C]+=L-r[C].x;for(E=0;E<f;++E)for(P=0,C=E;C<p;C+=f)P+=y[C],w[C]+=P-r[C].y;if(a&&Xi(n.center,k_)&&d>1)for(C=0;C<p;++C)I=a===cY?g:m[C%f],L=I-_[C].x2-r[C].x-v[C],L>0&&(v[C]+=L/2);if(l&&Xi(n.center,I_)&&f!==1)for(C=0;C<p;++C)I=l===cY?x:b[~~(C/f)],P=I-_[C].y2-r[C].y-w[C],P>0&&(w[C]+=P/2);for(C=0;C<p;++C)s.union(_[C].translate(v[C],w[C]));switch(L=Xi(n.anchor,Rnr),P=Xi(n.anchor,Pnr),Xi(n.anchor,k_)){case wc:L-=s.width();break;case zge:L-=s.width()/2}switch(Xi(n.anchor,I_)){case wc:P-=s.height();break;case zge:P-=s.height()/2}for(L=Math.round(L),P=Math.round(P),s.clear(),C=0;C<p;++C)r[C].mark.bounds.clear();for(C=0;C<p;++C)k=r[C],k.x+=v[C]+=L,k.y+=w[C]+=P,s.union(k.mark.bounds.union(k.bounds.translate(v[C],w[C]))),o&&t.dirty(k);return s}function Qnr(t,r,n){var o=Xnr(r),i=o.marks,s=n.bounds===Yge?Jnr:eor,a=n.offset,l=n.columns||i.length,u=l<=0?1:Math.ceil(i.length/l),c=u*l,f,d,p,h,m,g,y;let b=Ktt(t,i,n);b.empty()&&b.set(0,0,0,0),o.rowheaders&&(g=Xi(n.headerBand,I_,null),f=pY(t,o.rowheaders,i,l,u,-Xi(a,"rowHeader"),Mtt,0,s,"x1",0,l,1,g)),o.colheaders&&(g=Xi(n.headerBand,k_,null),d=pY(t,o.colheaders,i,l,l,-Xi(a,"columnHeader"),Mtt,1,s,"y1",0,1,l,g)),o.rowfooters&&(g=Xi(n.footerBand,I_,null),p=pY(t,o.rowfooters,i,l,u,Xi(a,"rowFooter"),Ftt,0,s,"x2",l-1,l,1,g)),o.colfooters&&(g=Xi(n.footerBand,k_,null),h=pY(t,o.colfooters,i,l,l,Xi(a,"columnFooter"),Ftt,1,s,"y2",c-l,1,l,g)),o.rowtitle&&(m=Xi(n.titleAnchor,I_),y=Xi(a,"rowTitle"),y=m===wc?p+y:f-y,g=Xi(n.titleBand,I_,.5),Rtt(t,o.rowtitle,y,0,b,g)),o.coltitle&&(m=Xi(n.titleAnchor,k_),y=Xi(a,"columnTitle"),y=m===wc?h+y:d-y,g=Xi(n.titleBand,k_,.5),Rtt(t,o.coltitle,y,1,b,g))}function Jnr(t,r){return r==="x1"?t.x||0:r==="y1"?t.y||0:r==="x2"?(t.x||0)+(t.width||0):r==="y2"?(t.y||0)+(t.height||0):void 0}function eor(t,r){return t.bounds[r]}function pY(t,r,n,o,i,s,a,l,u,c,f,d,p,h){var m=n.length,g=0,y=0,b,x,v,w,_,S,C,E,T;if(!m)return g;for(b=f;b<m;b+=d)n[b]&&(g=a(g,u(n[b],c)));if(!r.length)return g;for(r.length>i&&(t.warn("Grid headers exceed limit: "+i),r=r.slice(0,i)),g+=s,x=0,w=r.length;x<w;++x)t.dirty(r[x]),r[x].mark.bounds.clear();for(b=f,x=0,w=r.length;x<w;++x,b+=d){for(S=r[x],_=S.mark.bounds,v=b;v>=0&&(C=n[v])==null;v-=p);l?(E=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),T=g):(E=g,T=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),_.union(S.bounds.translate(E-(S.x||0),T-(S.y||0))),S.x=E,S.y=T,t.dirty(S),y=a(y,_[c])}return y}function Rtt(t,r,n,o,i,s){if(r){t.dirty(r);var a=n,l=n;o?a=Math.round(i.x1+s*i.width()):l=Math.round(i.y1+s*i.height()),r.bounds.translate(a-(r.x||0),l-(r.y||0)),r.mark.bounds.clear().union(r.bounds),r.x=a,r.y=l,t.dirty(r)}}function tor(t,r){let n=t[r]||{};return(o,i)=>n[o]!=null?n[o]:t[o]!=null?t[o]:i}function ror(t,r){let n=-1/0;return t.forEach(o=>{o.offset!=null&&(n=Math.max(n,o.offset))}),n>-1/0?n:r}function nor(t,r,n,o,i,s,a){let l=tor(n,r),u=ror(t,l("offset",0)),c=l("anchor",Vge),f=c===wc?1:c===zge?.5:0,d={align:Uge,bounds:l("bounds",Yge),columns:l("direction")==="vertical"?1:t.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(r){case ym:d.anchor={x:Math.floor(o.x1)-u,column:wc,y:f*(a||o.height()+2*o.y1),row:c};break;case bm:d.anchor={x:Math.ceil(o.x2)+u,y:f*(a||o.height()+2*o.y1),row:c};break;case KN:d.anchor={y:Math.floor(i.y1)-u,row:wc,x:f*(s||i.width()+2*i.x1),column:c};break;case D_:d.anchor={y:Math.ceil(i.y2)+u,x:f*(s||i.width()+2*i.x1),column:c};break;case Nnr:d.anchor={x:u,y:u};break;case Mnr:d.anchor={x:s-u,y:u,column:wc};break;case Fnr:d.anchor={x:u,y:a-u,row:wc};break;case Onr:d.anchor={x:s-u,y:a-u,column:wc,row:wc};break}return d}function oor(t,r){var n=r.items[0],o=n.datum,i=n.orient,s=n.bounds,a=n.x,l=n.y,u,c;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),sor(t,n,n.items[0].items[0]),s=ior(n,s),u=2*n.padding,c=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),c=Math.ceil(s.height()+c)),o.type===$nr&&aor(n.items[0].items[0].items[0].items),i!==Hge&&(n.x=a=0,n.y=l=0),n.width=u,n.height=c,bv(s.set(a,l,a+u,l+c),n),n.mark.bounds.clear().union(s),n}function ior(t,r){return t.items.forEach(n=>r.union(n.bounds)),r.x1=t.padding,r.y1=t.padding,r}function sor(t,r,n){var o=r.padding,i=o-n.x,s=o-n.y;if(!r.datum.title)(i||s)&&w4(t,n,i,s);else{var a=r.items[1].items[0],l=a.anchor,u=r.titlePadding||0,c=o-a.x,f=o-a.y;switch(a.orient){case ym:i+=Math.ceil(a.bounds.width())+u;break;case bm:case D_:break;default:s+=a.bounds.height()+u}switch((i||s)&&w4(t,n,i,s),a.orient){case ym:f+=YN(r,n,a,l,1,1);break;case bm:c+=YN(r,n,a,wc,0,0)+u,f+=YN(r,n,a,l,1,1);break;case D_:c+=YN(r,n,a,l,0,0),f+=YN(r,n,a,wc,-1,0,1)+u;break;default:c+=YN(r,n,a,l,0,0)}(c||f)&&w4(t,a,c,f),(c=Math.round(a.bounds.x1-o))<0&&(w4(t,n,-c,0),w4(t,a,-c,0))}}function YN(t,r,n,o,i,s,a){let l=t.datum.type!=="symbol",u=n.datum.vgrad,c=l&&(s||!u)&&!a?r.items[0]:r,f=c.bounds[i?"y2":"x2"]-t.padding,d=u&&s?f:0,p=u&&s?0:f,h=i<=0?0:Fge(n);return Math.round(o===Vge?d:o===wc?p-h:.5*(f-h))}function w4(t,r,n,o){r.x+=n,r.y+=o,r.bounds.translate(n,o),r.mark.bounds.translate(n,o),t.dirty(r)}function aor(t){let r=t.reduce((n,o)=>(n[o.column]=Math.max(o.bounds.x2-o.x,n[o.column]||0),n),{});t.forEach(n=>{n.width=r[n.column],n.height=n.bounds.y2-n.y})}function lor(t,r,n,o,i){var s=r.items[0],a=s.frame,l=s.orient,u=s.anchor,c=s.offset,f=s.padding,d=s.items[0].items[0],p=s.items[1]&&s.items[1].items[0],h=l===ym||l===bm?o:n,m=0,g=0,y=0,b=0,x=0,v;if(a!==hY?l===ym?(m=i.y2,h=i.y1):l===bm?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):l===ym&&(m=o,h=0),v=u===Vge?m:u===wc?h:(m+h)/2,p&&p.text){switch(l){case KN:case D_:x=d.bounds.height()+f;break;case ym:b=d.bounds.width()+f;break;case bm:b=-d.bounds.width()-f;break}Su.clear().union(p.bounds),Su.translate(b-(p.x||0),x-(p.y||0)),XN(p,"x",b)|XN(p,"y",x)&&(t.dirty(p),p.bounds.clear().union(Su),p.mark.bounds.clear().union(Su),t.dirty(p)),Su.clear().union(p.bounds)}else Su.clear();switch(Su.union(d.bounds),l){case KN:g=v,y=i.y1-Su.height()-c;break;case ym:g=i.x1-Su.width()-c,y=v;break;case bm:g=i.x2+Su.width()+c,y=v;break;case D_:g=v,y=i.y2+c;break;default:g=s.x,y=s.y}return XN(s,"x",g)|XN(s,"y",y)&&(Su.translate(g,y),t.dirty(s),s.bounds.clear().union(Su),r.bounds.clear().union(Su),t.dirty(s)),s.bounds}function Ztt(t){et.call(this,null,t)}function uor(t){return t&&t.mark.role!=="legend-entry"}function cor(t,r,n){var o=r.items,i=Math.max(0,r.width||0),s=Math.max(0,r.height||0),a=new mf().set(0,0,i,s),l=a.clone(),u=a.clone(),c=[],f,d,p,h,m,g;for(m=0,g=o.length;m<g;++m)switch(d=o[m],d.role){case Gge:h=qnr(d)?l:u,h.union(Ynr(t,d,i,s));break;case Wge:f=d;break;case qge:c.push(oor(t,d));break;case Lnr:case jnr:case Ptt:case Ltt:case jtt:case Btt:case $tt:case ztt:l.union(d.bounds),u.union(d.bounds);break;default:a.union(d.bounds)}if(c.length){let y={};c.forEach(b=>{p=b.orient||bm,p!==Hge&&(y[p]||(y[p]=[])).push(b)});for(let b in y){let x=y[b];Ktt(t,x,nor(x,b,n.legends,l,u,i,s))}c.forEach(b=>{let x=b.bounds;if(x.equals(b._bounds)||(b.bounds=b._bounds,t.dirty(b),b.bounds=x,t.dirty(b)),n.autosize&&(n.autosize.type===Utt||n.autosize.type===Vtt||n.autosize.type===Gtt))switch(b.orient){case ym:case bm:a.add(x.x1,0).add(x.x2,0);break;case KN:case D_:a.add(0,x.y1).add(0,x.y2)}else a.union(x)})}a.union(l).union(u),f&&a.union(lor(t,f,i,s,a)),r.clip&&a.set(0,0,r.width||0,r.height||0),dor(t,r,a,n)}function dor(t,r,n,o){let i=o.autosize||{},s=i.type;if(t._autosize<1||!s)return;let a=t._width,l=t._height,u=Math.max(0,r.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,r.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-f));if(i.contains===Bnr){let m=t.padding();a-=m.left+m.right,l-=m.top+m.bottom}s===Hge?(c=0,d=0,u=a,f=l):s===Utt?(u=Math.max(0,a-c-p),f=Math.max(0,l-d-h)):s===Vtt?(u=Math.max(0,a-c-p),l=f+d+h):s===Gtt?(a=u+c+p,f=Math.max(0,l-d-h)):s===znr&&(a=u+c+p,l=f+d+h),t._resizeView(a,l,u,f,[c,d],i.resize)}var KN,ym,bm,D_,Nnr,Mnr,Fnr,Onr,Vge,zge,wc,Rnr,Pnr,hY,Gge,Wge,Lnr,jnr,qge,Ptt,Ltt,jtt,Btt,$tt,ztt,Bnr,$nr,Utt,Vtt,Gtt,znr,Hge,cY,Uge,Yge,k_,I_,Att,ktt,Ytt,Itt,Gnr,Wnr,Dtt,Ntt,Su,Mtt,Ftt,Qtt=N(()=>{"use strict";el();Ttt();UE();KN="top",ym="left",bm="right",D_="bottom",Nnr="top-left",Mnr="top-right",Fnr="bottom-left",Onr="bottom-right",Vge="start",zge="middle",wc="end",Rnr="x",Pnr="y",hY="group",Gge="axis",Wge="title",Lnr="frame",jnr="scope",qge="legend",Ptt="row-header",Ltt="row-footer",jtt="row-title",Btt="column-header",$tt="column-footer",ztt="column-title",Bnr="padding",$nr="symbol",Utt="fit",Vtt="fit-x",Gtt="fit-y",znr="pad",Hge="none",cY="all",Uge="each",Yge="flush",k_="column",I_="row";av(Wtt,et,{transform(t,r){let n=r.dataflow,o=t.mark,i=o.marktype,s=A_[i],a=s.bound,l=o.bounds,u;if(s.nested)o.items.length&&n.dirty(o.items[0]),l=fY(o,a),o.items.forEach(c=>{c.bounds.clear().union(l)});else if(i===hY||t.modified())switch(r.visit(r.MOD,c=>n.dirty(c)),l.clear(),o.items.forEach(c=>l.union(fY(c,a))),o.role){case Gge:case qge:case Wge:r.reflow()}else u=r.changed(r.REM),r.visit(r.ADD,c=>{l.union(fY(c,a))}),r.visit(r.MOD,c=>{u=u||l.alignsWith(c.bounds),n.dirty(c),l.union(fY(c,a))}),u&&(l.clear(),o.items.forEach(c=>l.union(c.bounds)));return Ett(o),r.modifies("bounds")}});Att=":vega_identifier:";Xge.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};av(Xge,et,{transform(t,r){let n=Unr(r.dataflow),o=t.as,i=n.value;return r.visit(r.ADD,s=>s[o]=s[o]||++i),n.set(this.value=i),r}});av(qtt,et,{transform(t,r){let n=this.value;n||(n=r.dataflow.scenegraph().mark(t.markdef,Vnr(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);let o=n.marktype===hY?Sge:rY;return r.visit(r.ADD,i=>o.call(i,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,r.reflow()),n.items=r.source,r}});ktt={parity:t=>t.filter((r,n)=>n%2?r.opacity=0:1),greedy:(t,r)=>{let n;return t.filter((o,i)=>!i||!Ytt(n.bounds,o.bounds,r)?(n=o,1):o.opacity=0)}},Ytt=(t,r,n)=>n>Math.max(r.x1-t.x2,t.x1-r.x2,r.y1-t.y2,t.y1-r.y2),Itt=(t,r)=>{for(var n=1,o=t.length,i=t[0].bounds,s;n<o;i=s,++n)if(Ytt(i,s=t[n].bounds,r))return!0},Gnr=t=>{let r=t.bounds;return r.width()>1&&r.height()>1},Wnr=(t,r,n)=>{var o=t.range(),i=new mf;return r===KN||r===D_?i.set(o[0],-1/0,o[1],1/0):i.set(-1/0,o[0],1/0,o[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Dtt=t=>(t.forEach(r=>r.opacity=1),t),Ntt=(t,r)=>t.reflow(r.modified()).modifies("opacity");av(Htt,et,{transform(t,r){let n=ktt[t.method]||ktt.parity,o=t.separation||0,i=r.materialize(r.SOURCE).source,s,a;if(!i||!i.length)return;if(!t.method)return t.modified("method")&&(Dtt(i),r=Ntt(r,t)),r;if(i=i.filter(Gnr),!i.length)return;if(t.sort&&(i=i.slice().sort(t.sort)),s=Dtt(i),r=Ntt(r,t),s.length>=3&&Itt(s,o)){do s=n(s,o);while(s.length>=3&&Itt(s,o));s.length<3&&!af(i).opacity&&(s.length>1&&(af(s).opacity=0),af(i).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(a=Wnr(t.boundScale,t.boundOrient,+t.boundTolerance),i.forEach(u=>{a(u)||(u.opacity=0)}));let l=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&l.union(u.bounds)}),r}});av(Xtt,et,{transform(t,r){let n=r.dataflow;if(r.visit(r.ALL,o=>n.dirty(o)),r.fields&&r.fields.zindex){let o=r.source&&r.source[0];o&&(o.mark.zdirty=!0)}}});Su=new mf;Mtt=(t,r)=>Math.floor(Math.min(t,r)),Ftt=(t,r)=>Math.ceil(Math.max(t,r));av(Ztt,et,{transform(t,r){let n=r.dataflow;return t.mark.items.forEach(o=>{t.layout&&Qnr(n,o,t.layout),cor(n,o,t)}),uor(t.mark.group)?r.reflow():r}})});function fa(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function wy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var Fd=N(()=>{"use strict"});function QN(){var t=new Map,r=[],n=[],o=ZN;function i(s){var a=s+"",l=t.get(a);if(!l){if(o!==ZN)return o;t.set(a,l=r.push(s))}return n[(l-1)%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Map;for(let a of s){let l=a+"";t.has(l)||t.set(l,r.push(a))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return QN(r,n).unknown(o)},fa.apply(i,arguments),i}var ZN,Jtt=N(()=>{"use strict";Fd();ZN=Symbol("implicit")});function Zge(t){return function(){return t}}var ert=N(()=>{"use strict"});function JN(t){return+t}var Qge=N(()=>{"use strict"});function $l(t){return t}function Jge(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:Zge(isNaN(r)?NaN:.5)}function por(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function hor(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=Jge(i,o),s=n(a,s)):(o=Jge(o,i),s=n(s,a)),function(l){return s(o(l))}}function mor(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=Jge(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=im(t,l,1,o)-1;return s[u](i[u](l))}}function _y(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yT(){var t=trt,r=trt,n=vu,o,i,s,a=$l,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==$l&&(a=por(t[0],t[p-1])),l=p>2?mor:hor,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),wu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,JN),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=yy,f()},d.clamp=function(p){return arguments.length?(a=p?!0:$l,f()):a!==$l},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function _4(){return yT()($l,$l)}var trt,N_=N(()=>{"use strict";Wo();lT();ert();Qge();trt=[0,1]});function bT(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var mY=N(()=>{"use strict"});function Sy(t){return t=bT(Math.abs(t)),t?t[1]:NaN}var S4=N(()=>{"use strict";mY()});function rrt(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var nrt=N(()=>{"use strict"});function ort(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var irt=N(()=>{"use strict"});function Od(t){return new e0e(t)}function e0e(t){if(!(r=gor.exec(t)))throw new Error("invalid format: "+t);var r;this.fill=r[1]||" ",this.align=r[2]||">",this.sign=r[3]||"-",this.symbol=r[4]||"",this.zero=!!r[5],this.width=r[6]&&+r[6],this.comma=!!r[7],this.precision=r[8]&&+r[8].slice(1),this.trim=!!r[9],this.type=r[10]||""}var gor,t0e=N(()=>{"use strict";gor=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Od.prototype=e0e.prototype;e0e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function srt(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(o>0){if(!+t[n])break e;o=0}break}return o>0?t.slice(0,o)+t.slice(i+1):t}var art=N(()=>{"use strict"});function lrt(t,r){var n=bT(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(r0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+bT(t,Math.max(0,r+s-1))[0]}var r0e,n0e=N(()=>{"use strict";mY()});function o0e(t,r){var n=bT(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var urt=N(()=>{"use strict";mY()});var i0e,crt=N(()=>{"use strict";n0e();urt();i0e={"%":function(t,r){return(t*100).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return o0e(t*100,r)},r:o0e,s:lrt,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}});function s0e(t){return t}var frt=N(()=>{"use strict"});function gY(t){var r=t.grouping&&t.thousands?rrt(t.grouping,t.thousands):s0e,n=t.currency,o=t.decimal,i=t.numerals?ort(t.numerals):s0e,s=t.percent||"%";function a(u){u=Od(u);var c=u.fill,f=u.align,d=u.sign,p=u.symbol,h=u.zero,m=u.width,g=u.comma,y=u.precision,b=u.trim,x=u.type;x==="n"?(g=!0,x="g"):i0e[x]||(y==null&&(y=12),b=!0,x="g"),(h||c==="0"&&f==="=")&&(h=!0,c="0",f="=");var v=p==="$"?n[0]:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w=p==="$"?n[1]:/[%p]/.test(x)?s:"",_=i0e[x],S=/[defgprs%]/.test(x);y=y==null?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function C(E){var T=v,I=w,k,F,D;if(x==="c")I=_(E)+I,E="";else{E=+E;var L=E<0;if(E=_(Math.abs(E),y),b&&(E=srt(E)),L&&+E==0&&(L=!1),T=(L?d==="("?d:"-":d==="-"||d==="("?"":d)+T,I=(x==="s"?drt[8+r0e/3]:"")+I+(L&&d==="("?")":""),S){for(k=-1,F=E.length;++k<F;)if(D=E.charCodeAt(k),48>D||D>57){I=(D===46?o+E.slice(k+1):E.slice(k))+I,E=E.slice(0,k);break}}}g&&!h&&(E=r(E,1/0));var P=T.length+E.length+I.length,R=P<m?new Array(m-P+1).join(c):"";switch(g&&h&&(E=r(R+E,R.length?m-I.length:1/0),R=""),f){case"<":E=T+E+I+R;break;case"=":E=T+R+E+I;break;case"^":E=R.slice(0,P=R.length>>1)+T+E+I+R.slice(P);break;default:E=R+T+E+I;break}return i(E)}return C.toString=function(){return u+""},C}function l(u,c){var f=a((u=Od(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(Sy(c)/3)))*3,p=Math.pow(10,-d),h=drt[8+d/3];return function(m){return f(p*m)+h}}return{format:a,formatPrefix:l}}var drt,a0e=N(()=>{"use strict";S4();nrt();irt();t0e();art();crt();n0e();frt();drt=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function bY(t){return yY=gY(t),xm=yY.format,xT=yY.formatPrefix,yY}var yY,xm,xT,prt=N(()=>{"use strict";a0e();bY({decimal:".",thousands:",",grouping:[3],currency:["$",""]})});function eM(t){return Math.max(0,-Sy(Math.abs(t)))}var hrt=N(()=>{"use strict";S4()});function tM(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sy(r)/3)))*3-Sy(Math.abs(t)))}var mrt=N(()=>{"use strict";S4()});function rM(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Sy(r)-Sy(t))+1}var grt=N(()=>{"use strict";S4()});var l0e={};fn(l0e,{format:()=>xm,formatDefaultLocale:()=>bY,formatLocale:()=>gY,formatPrefix:()=>xT,formatSpecifier:()=>Od,precisionFixed:()=>eM,precisionPrefix:()=>tM,precisionRound:()=>rM});var vT=N(()=>{"use strict";prt();a0e();t0e();hrt();mrt();grt()});function nM(t,r,n,o){var i=fc(t,r,n),s;switch(o=Od(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=tM(i,a))&&(o.precision=s),xT(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=rM(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=eM(i))&&(o.precision=s-(o.type==="%")*2);break}}return xm(o)}var u0e=N(()=>{"use strict";Wo();vT()});function Rd(t){var r=t.domain;return t.ticks=function(n){var o=r();return lN(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return nM(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=zW(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function C4(){var t=_4();return t.copy=function(){return _y(t,C4())},fa.apply(t,arguments),Rd(t)}var M_=N(()=>{"use strict";Wo();N_();Fd();u0e()});function E4(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,JN),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return E4(t).unknown(r)},t=arguments.length?Array.from(t,JN):[0,1],Rd(n)}var yrt=N(()=>{"use strict";M_();Qge()});function T4(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var c0e=N(()=>{"use strict"});function brt(t){return Math.log(t)}function xrt(t){return Math.exp(t)}function yor(t){return-Math.log(-t)}function bor(t){return-Math.exp(-t)}function xor(t){return isFinite(t)?+("1e"+t):t<0?0:t}function vor(t){return t===10?xor:t===Math.E?Math.exp:function(r){return Math.pow(t,r)}}function wor(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(r){return Math.log(r)/t})}function vrt(t){return function(r){return-t(-r)}}function A4(t){var r=t(brt,xrt),n=r.domain,o=10,i,s;function a(){return i=wor(o),s=vor(o),n()[0]<0?(i=vrt(i),s=vrt(s),t(yor,bor)):t(brt,xrt),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=function(l){var u=n(),c=u[0],f=u[u.length-1],d;(d=f<c)&&(p=c,c=f,f=p);var p=i(c),h=i(f),m,g,y,b=l==null?10:+l,x=[];if(!(o%1)&&h-p<b){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(g=1,m=s(p);g<o;++g)if(y=m*g,!(y<c)){if(y>f)break;x.push(y)}}else for(;p<=h;++p)for(g=o-1,m=s(p);g>=1;--g)if(y=m*g,!(y<c)){if(y>f)break;x.push(y)}x.length*2<b&&(x=lN(c,f,b))}else x=lN(p,h,Math.min(h-p,b)).map(s);return d?x.reverse():x},r.tickFormat=function(l,u){if(u==null&&(u=o===10?".0e":","),typeof u!="function"&&(u=xm(u)),l===1/0)return u;l==null&&(l=10);var c=Math.max(1,o*l/r.ticks().length);return function(f){var d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=function(){return n(T4(n(),{floor:function(l){return s(Math.floor(i(l)))},ceil:function(l){return s(Math.ceil(i(l)))}}))},r}function k4(){var t=A4(yT()).domain([1,10]);return t.copy=function(){return _y(t,k4()).base(t.base())},fa.apply(t,arguments),t}var xY=N(()=>{"use strict";Wo();vT();c0e();N_();Fd()});function wrt(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function _rt(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function I4(t){var r=1,n=t(wrt(r),_rt(r));return n.constant=function(o){return arguments.length?t(wrt(r=+o),_rt(r)):r},Rd(n)}function D4(){var t=I4(yT());return t.copy=function(){return _y(t,D4()).constant(t.constant())},fa.apply(t,arguments)}var vY=N(()=>{"use strict";M_();N_();Fd()});function Srt(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function _or(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Sor(t){return t<0?-t*t:t*t}function N4(t){var r=t($l,$l),n=1;function o(){return n===1?t($l,$l):n===.5?t(_or,Sor):t(Srt(n),Srt(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},Rd(r)}function oM(){var t=N4(yT());return t.copy=function(){return _y(t,oM()).exponent(t.exponent())},fa.apply(t,arguments),t}function f0e(){return oM.apply(null,arguments).exponent(.5)}var wY=N(()=>{"use strict";M_();N_();Fd()});function M4(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=_L(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[im(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Ap),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return M4().domain(t).range(r).unknown(o)},fa.apply(s,arguments)}var Crt=N(()=>{"use strict";Wo();Fd()});function F4(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[im(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return F4().domain([t,r]).range(i).unknown(s)},fa.apply(Rd(a),arguments)}var Ert=N(()=>{"use strict";Wo();M_();Fd()});function O4(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[im(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return O4().domain(t).range(r).unknown(n)},fa.apply(i,arguments)}var Trt=N(()=>{"use strict";Wo();Fd()});function d0e(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function p0e(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function R4(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function iM(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=P4(i),f=L4(i),d=P4(s),p=L4(s),h=P4(a),m=L4(a),g=P4(l),y=L4(l),b=P4(u),x=L4(u),v={a:V,A:G,b:U,B:H,c:null,d:Mrt,e:Mrt,f:qor,g:rir,G:oir,H:Vor,I:Gor,j:Wor,L:Lrt,m:Hor,M:Yor,p:X,q:fe,Q:Rrt,s:Prt,S:Xor,u:Kor,U:Zor,V:Qor,w:Jor,W:eir,x:null,X:null,y:tir,Y:nir,Z:iir,"%":Ort},w={a:$,A:M,b:z,B:q,c:null,d:Frt,e:Frt,f:uir,g:xir,G:wir,H:sir,I:air,j:lir,L:Brt,m:cir,M:fir,p:ee,q:ae,Q:Rrt,s:Prt,S:dir,u:pir,U:hir,V:mir,w:gir,W:yir,x:null,X:null,y:bir,Y:vir,Z:_ir,"%":Ort},_={a:I,A:k,b:F,B:D,c:L,d:Drt,e:Drt,f:Bor,g:Irt,G:krt,H:Nrt,I:Nrt,j:Ror,L:jor,m:Oor,M:Por,p:T,q:For,Q:zor,s:Uor,S:Lor,u:kor,U:Ior,V:Dor,w:Aor,W:Nor,x:P,X:R,y:Irt,Y:krt,Z:Mor,"%":$or};v.x=S(n,v),v.X=S(o,v),v.c=S(r,v),w.x=S(n,w),w.X=S(o,w),w.c=S(r,w);function S(Q,le){return function(ie){var K=[],ge=-1,ne=0,ye=Q.length,xe,De,Te;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(K.push(Q.slice(ne,ge)),(De=Art[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):De=xe==="e"?" ":"0",(Te=le[xe])&&(xe=Te(ie,De)),K.push(xe),ne=ge+1);return K.push(Q.slice(ne,ge)),K.join("")}}function C(Q,le){return function(ie){var K=R4(1900,void 0,1),ge=E(K,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ne=p0e(R4(K.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?mN.ceil(ne):mN(ne),ne=Cd.offset(ne,(K.V-1)*7),K.y=ne.getUTCFullYear(),K.m=ne.getUTCMonth(),K.d=ne.getUTCDate()+(K.w+6)%7):(ne=d0e(R4(K.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?hN.ceil(ne):hN(ne),ne=_d.offset(ne,(K.V-1)*7),K.y=ne.getFullYear(),K.m=ne.getMonth(),K.d=ne.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),ye="Z"in K?p0e(R4(K.y,0,1)).getUTCDay():d0e(R4(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(ye+5)%7:K.w+K.U*7-(ye+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,p0e(K)):d0e(K)}}function E(Q,le,ie,K){for(var ge=0,ne=le.length,ye=ie.length,xe,De;ge<ne;){if(K>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),De=_[xe in Art?le.charAt(ge++):xe],!De||(K=De(Q,ie,K))<0)return-1}else if(xe!=ie.charCodeAt(K++))return-1}return K}function T(Q,le,ie){var K=c.exec(le.slice(ie));return K?(Q.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function I(Q,le,ie){var K=h.exec(le.slice(ie));return K?(Q.w=m.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(Q,le,ie){var K=d.exec(le.slice(ie));return K?(Q.w=p.get(K[0].toLowerCase()),ie+K[0].length):-1}function F(Q,le,ie){var K=b.exec(le.slice(ie));return K?(Q.m=x.get(K[0].toLowerCase()),ie+K[0].length):-1}function D(Q,le,ie){var K=g.exec(le.slice(ie));return K?(Q.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function fe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function M(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=S(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=C(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=S(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=C(Q+="",!0);return le.toString=function(){return Q},le}}}function co(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function Tor(t){return t.replace(Eor,"\\$&")}function P4(t){return new RegExp("^(?:"+t.map(Tor).join("|")+")","i")}function L4(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function Aor(t,r,n){var o=sl.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function kor(t,r,n){var o=sl.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function Ior(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function Dor(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function Nor(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function krt(t,r,n){var o=sl.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function Irt(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function Mor(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function For(t,r,n){var o=sl.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function Oor(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function Drt(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function Ror(t,r,n){var o=sl.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function Nrt(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function Por(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function Lor(t,r,n){var o=sl.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function jor(t,r,n){var o=sl.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function Bor(t,r,n){var o=sl.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function $or(t,r,n){var o=Cor.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function zor(t,r,n){var o=sl.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function Uor(t,r,n){var o=sl.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function Mrt(t,r){return co(t.getDate(),r,2)}function Vor(t,r){return co(t.getHours(),r,2)}function Gor(t,r){return co(t.getHours()%12||12,r,2)}function Wor(t,r){return co(1+_d.count(Sd(t),t),r,3)}function Lrt(t,r){return co(t.getMilliseconds(),r,3)}function qor(t,r){return Lrt(t,r)+"000"}function Hor(t,r){return co(t.getMonth()+1,r,2)}function Yor(t,r){return co(t.getMinutes(),r,2)}function Xor(t,r){return co(t.getSeconds(),r,2)}function Kor(t){var r=t.getDay();return r===0?7:r}function Zor(t,r){return co(Ip.count(Sd(t)-1,t),r,2)}function jrt(t){var r=t.getDay();return r>=4||r===0?Xw(t):Xw.ceil(t)}function Qor(t,r){return t=jrt(t),co(Xw.count(Sd(t),t)+(Sd(t).getDay()===4),r,2)}function Jor(t){return t.getDay()}function eir(t,r){return co(hN.count(Sd(t)-1,t),r,2)}function tir(t,r){return co(t.getFullYear()%100,r,2)}function rir(t,r){return t=jrt(t),co(t.getFullYear()%100,r,2)}function nir(t,r){return co(t.getFullYear()%1e4,r,4)}function oir(t,r){var n=t.getDay();return t=n>=4||n===0?Xw(t):Xw.ceil(t),co(t.getFullYear()%1e4,r,4)}function iir(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+co(r/60|0,"0",2)+co(r%60,"0",2)}function Frt(t,r){return co(t.getUTCDate(),r,2)}function sir(t,r){return co(t.getUTCHours(),r,2)}function air(t,r){return co(t.getUTCHours()%12||12,r,2)}function lir(t,r){return co(1+Cd.count(Ed(t),t),r,3)}function Brt(t,r){return co(t.getUTCMilliseconds(),r,3)}function uir(t,r){return Brt(t,r)+"000"}function cir(t,r){return co(t.getUTCMonth()+1,r,2)}function fir(t,r){return co(t.getUTCMinutes(),r,2)}function dir(t,r){return co(t.getUTCSeconds(),r,2)}function pir(t){var r=t.getUTCDay();return r===0?7:r}function hir(t,r){return co(Dp.count(Ed(t)-1,t),r,2)}function $rt(t){var r=t.getUTCDay();return r>=4||r===0?Zw(t):Zw.ceil(t)}function mir(t,r){return t=$rt(t),co(Zw.count(Ed(t),t)+(Ed(t).getUTCDay()===4),r,2)}function gir(t){return t.getUTCDay()}function yir(t,r){return co(mN.count(Ed(t)-1,t),r,2)}function bir(t,r){return co(t.getUTCFullYear()%100,r,2)}function xir(t,r){return t=$rt(t),co(t.getUTCFullYear()%100,r,2)}function vir(t,r){return co(t.getUTCFullYear()%1e4,r,4)}function wir(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Zw(t):Zw.ceil(t),co(t.getUTCFullYear()%1e4,r,4)}function _ir(){return"+0000"}function Ort(){return"%"}function Rrt(t){return+t}function Prt(t){return Math.floor(+t/1e3)}var Art,sl,Cor,Eor,h0e=N(()=>{"use strict";DL();Art={"-":"",_:" ",0:"0"},sl=/^\s*\d+/,Cor=/^%/,Eor=/[\\^$*+?|[\]().{}]/g});function m0e(t){return sM=iM(t),F_=sM.format,_Y=sM.parse,O_=sM.utcFormat,SY=sM.utcParse,sM}var sM,F_,_Y,O_,SY,zrt=N(()=>{"use strict";h0e();m0e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var aM=N(()=>{"use strict";zrt();h0e()});function Sir(t){return new Date(t)}function Cir(t){return t instanceof Date?+t:+new Date(+t)}function CY(t,r,n,o,i,s,a,l,u,c){var f=_4(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(S){return(u(S)<S?h:l(S)<S?m:a(S)<S?g:s(S)<S?y:o(S)<S?i(S)<S?b:x:n(S)<S?v:w)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,Cir)):p().map(Sir)},f.ticks=function(S){var C=p();return t(C[0],C[C.length-1],S??10)},f.tickFormat=function(S,C){return C==null?_:c(C)},f.nice=function(S){var C=p();return(!S||typeof S.range!="function")&&(S=r(C[0],C[C.length-1],S??10)),S?p(T4(C,S)):f},f.copy=function(){return _y(f,CY(t,r,n,o,i,s,a,l,u,c))},f}function EY(){return fa.apply(CY(Nde,Mde,Sd,Kw,Ip,_d,PE,OE,pc,F_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var g0e=N(()=>{"use strict";DL();aM();N_();Fd();c0e()});function TY(){return fa.apply(CY(Ide,Dde,Ed,Qw,Dp,Cd,BE,jE,pc,O_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var Urt=N(()=>{"use strict";DL();aM();g0e();Fd()});function AY(){var t=0,r=1,n,o,i,s,a=$l,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(vu),c.rangeRound=f(yy),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function vv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function lM(){var t=Rd(AY()($l));return t.copy=function(){return vv(t,lM())},wy.apply(t,arguments)}function kY(){var t=A4(AY()).domain([1,10]);return t.copy=function(){return vv(t,kY()).base(t.base())},wy.apply(t,arguments)}function IY(){var t=I4(AY());return t.copy=function(){return vv(t,IY()).constant(t.constant())},wy.apply(t,arguments)}function j4(){var t=N4(AY());return t.copy=function(){return vv(t,j4()).exponent(t.exponent())},wy.apply(t,arguments)}function y0e(){return j4.apply(null,arguments).exponent(.5)}var b0e=N(()=>{"use strict";lT();N_();Fd();M_();xY();vY();wY()});function DY(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=$l,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=aT(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(vu),h.rangeRound=m(yy),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function B4(){var t=Rd(DY()($l));return t.copy=function(){return vv(t,B4())},wy.apply(t,arguments)}function NY(){var t=A4(DY()).domain([.1,1,10]);return t.copy=function(){return vv(t,NY()).base(t.base())},wy.apply(t,arguments)}function MY(){var t=I4(DY());return t.copy=function(){return vv(t,MY()).constant(t.constant())},wy.apply(t,arguments)}function $4(){var t=N4(DY());return t.copy=function(){return vv(t,$4()).exponent(t.exponent())},wy.apply(t,arguments)}function x0e(){return $4.apply(null,arguments).exponent(.5)}var Vrt=N(()=>{"use strict";lT();N_();Fd();M_();xY();b0e();vY();wY()});var v0e=N(()=>{"use strict";yrt();M_();xY();vY();Jtt();wY();Crt();Ert();Trt();g0e();Urt();b0e();Vrt();u0e()});function z4(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function Tir(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function Air(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function C0e(){let t=QN().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=z4(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=sa(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,DE(h,g)-1),x=g===y?b:DE(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return C0e().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function Hrt(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Hrt(r())},t}function kir(){return Hrt(C0e().paddingInner(1))}function Dir(t){return Iir.call(t,Zh)}function Yrt(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(im(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=Dir(o),n):t.slice()},n.range=function(o){return arguments.length?(r=Nir.call(o),n):r.slice()},n.tickFormat=function(o,i){return nM(t[0],Un(t),o??10,i)},n.copy=function(){return Yrt().domain(n.domain()).range(n.range())},n}function Mir(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?Tir(s):s.invertExtent?Air(s):void 0),s.type=t,s};return o.metadata=gu(Br(n)),o}function Gn(t,r,n){return arguments.length>1?(FY[t]=Mir(t,r,n),this):E0e(t)?FY[t]:void 0}function E0e(t){return Pr(FY,t)}function CT(t,r){let n=FY[t];return n&&n.metadata[r]}function H4(t){return CT(t,Da)}function L_(t){return CT(t,W4)}function LY(t){return CT(t,q4)}function T0e(t){return CT(t,Cy)}function Fir(t){return CT(t,S0e)}function A0e(t){return CT(t,$p)}function k0e(t){return CT(t,wT)}function jY(t,r){let n=r[0],o=Un(r)-n;return function(i){return t(n+i*o)}}function fM(t,r,n){return aT(Y4(r||"rgb",n),t)}function BY(t,r){let n=new Array(r),o=r+1;for(let i=0;i<r;)n[i]=t(++i/o);return n}function $Y(t,r,n){let o=n-r,i,s,a;return!o||!Number.isFinite(o)?Qa(.5):(i=(s=t.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=Gn(s)().domain([r,n]).range([0,1]),Oir.forEach(l=>t[l]?a[l](t[l]()):0),a)}function Y4(t,r){let n=zme[Rir(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function Rir(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Xrt(t){let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function Krt(t,r){for(let n in t)X4(n,r(t[n]))}function X4(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(Grt[t]=r,this):Grt[t]}function zY(t,r,n){let o;return q0(r)&&(t.bins&&(r=Math.max(r,t.bins.length)),n!=null&&(r=Math.min(r,Math.floor(vE(t.domain())/n||1)))),un(r)&&(o=r.step,r=r.interval),Jn(r)&&(r=t.type===R_?nv(r):t.type==P_?ov(r):pt("Only time and utc scales accept interval strings."),o&&(r=r.every(o))),r}function I0e(t,r,n){let o=t.range(),i=o[0],s=Un(o),a=$ir;if(i>s&&(o=s,s=i,i=o,a=zir),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],Un(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function UY(t,r){return t.bins?I0e(t,t.bins):t.ticks?t.ticks(r):t.domain()}function D0e(t,r,n,o,i,s){let a=r.type,l=Bir;if(a===R_||i===R_)l=t.timeFormat(o);else if(a===P_||i===P_)l=t.utcFormat(o);else if(T0e(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=Qrt(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function Qrt(t,r,n){let o=UY(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function N0e(t,r){return t.bins?Gir(t.bins):t.type===Cy?Qrt(t,r,!0):w0e[t.type]?Vir(t[w0e[t.type]]()):UY(t,r)}function Uir(t,r,n){let o=r[Jrt[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function Vir(t){let r=[-1/0].concat(t);return r.max=1/0,r}function Gir(t){let r=t.slice(0,-1);return r.max=Un(t),r}function M0e(t,r,n,o,i,s,a){let l=Jrt[r.type]&&s!==R_&&s!==P_?Uir(t,r,i):D0e(t,r,n,i,s,a);return o===K4&&Wir(r)?qir(l):o===jir?Hir(l):Yir(l)}function ent(t){let r=t.domain(),n=r.length-1,o=+r[0],i=+Un(r),s=i-o;if(t.type===G4){let a=n?s/n:.1;o-=a,i+=a,s=i-o}return a=>(a-o)/s}function Xir(t,r,n,o){let i=o||r.type;return Jn(n)&&Fir(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===R_?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===P_?t.utcFormat("%A, %d %B %Y, %X UTC"):M0e(t,r,5,null,n,o,!0)}function F0e(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=Xir(t,r,n.format,n.formatType);if(LY(r.type)){let s=N0e(r).slice(1).map(i),a=s.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(s.join(", "))}else if(L_(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(l)}else{let s=r.domain();return"values from ".concat(i(s[0])," to ").concat(i(Un(s)))}}var Eir,_T,Cy,uM,cM,U4,R_,P_,vm,ST,wT,V4,G4,OY,RY,_0e,PY,Da,W4,q4,$p,S0e,Iir,Nir,FY,Oir,Pir,Lir,Grt,K4,jir,Zrt,Bir,$ir,zir,w0e,Jrt,Wir,qir,Wrt,Hir,Yir,qrt,dM=N(()=>{"use strict";Ls();Wo();v0e();v0e();lT();lT();yN();Eir="identity",_T="linear",Cy="log",uM="pow",cM="sqrt",U4="symlog",R_="time",P_="utc",vm="sequential",ST="diverging",wT="quantile",V4="quantize",G4="threshold",OY="ordinal",RY="point",_0e="band",PY="bin-ordinal",Da="continuous",W4="discrete",q4="discretizing",$p="interpolating",S0e="temporal";Iir=Array.prototype.map;Nir=Array.prototype.slice;FY={};Gn(Eir,E4);Gn(_T,C4,Da);Gn(Cy,k4,[Da,Cy]);Gn(uM,oM,Da);Gn(cM,f0e,Da);Gn(U4,D4,Da);Gn(R_,EY,[Da,S0e]);Gn(P_,TY,[Da,S0e]);Gn(vm,lM,[Da,$p]);Gn("".concat(vm,"-").concat(_T),lM,[Da,$p]);Gn("".concat(vm,"-").concat(Cy),kY,[Da,$p,Cy]);Gn("".concat(vm,"-").concat(uM),j4,[Da,$p]);Gn("".concat(vm,"-").concat(cM),y0e,[Da,$p]);Gn("".concat(vm,"-").concat(U4),IY,[Da,$p]);Gn("".concat(ST,"-").concat(_T),B4,[Da,$p]);Gn("".concat(ST,"-").concat(Cy),NY,[Da,$p,Cy]);Gn("".concat(ST,"-").concat(uM),$4,[Da,$p]);Gn("".concat(ST,"-").concat(cM),x0e,[Da,$p]);Gn("".concat(ST,"-").concat(U4),MY,[Da,$p]);Gn(wT,M4,[q4,wT]);Gn(V4,F4,q4);Gn(G4,O4,q4);Gn(PY,Yrt,[W4,q4]);Gn(OY,QN,W4);Gn(_0e,C0e,W4);Gn(RY,kir,W4);Oir=["clamp","base","constant","exponent"];Pir={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Lir={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};Grt={};Krt(Lir,Xrt);Krt(Pir,t=>fM(Xrt(t)));K4="symbol",jir="discrete",Zrt="gradient",Bir=t=>Hr(t)?t.map(r=>String(r)):String(t),$ir=(t,r)=>t[1]-r[1],zir=(t,r)=>r[1]-t[1];w0e={[wT]:"quantiles",[V4]:"thresholds",[G4]:"domain"},Jrt={[wT]:"quantiles",[V4]:"domain"};Wir=t=>w0e[t.type]||t.bins;qir=t=>(r,n,o)=>{let i=Wrt(o[n+1],Wrt(o.max,1/0)),s=qrt(r,t),a=qrt(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},Wrt=(t,r)=>t??r,Hir=t=>(r,n)=>n?t(r):null,Yir=t=>r=>t(r),qrt=(t,r)=>Number.isFinite(t)?r(t):null});var j0e={};fn(j0e,{axisticks:()=>ont,datajoin:()=>int,encode:()=>snt,legendentries:()=>ant,linkpath:()=>R0e,pie:()=>P0e,scale:()=>dnt,sortitems:()=>hnt,stack:()=>L0e});function ont(t){et.call(this,null,t)}function int(t){et.call(this,null,t)}function Kir(){return Nn({})}function Zir(t){let r=Bw().test(n=>n.exit);return r.lookup=n=>r.get(t(n)),r}function snt(t){et.call(this,null,t)}function ant(t){et.call(this,[],t)}function R0e(t){et.call(this,{},t)}function P0e(t){et.call(this,null,t)}function dsr(t){let r=t.type;return!t.bins&&(r===_T||r===uM||r===cM)}function fnt(t){return H4(t)&&t!==vm}function dnt(t){et.call(this,null,t),this.modified(!0)}function hsr(t){var r=t.type,n="",o;return r===vm?vm+"-"+_T:(msr(t)&&(o=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=o===2?vm+"-":o===3?ST+"-":""),(n+r||_T).toLowerCase())}function msr(t){let r=t.type;return H4(r)&&r!==R_&&r!==P_&&(t.scheme||t.range&&t.range.length&&t.range.every(Jn))}function gsr(t,r,n){let o=ysr(t,r.domainRaw,n);if(o>-1)return o;var i=r.domain,s=t.type,a=r.zero||r.zero===void 0&&dsr(t),l,u;if(!i)return 0;if(fnt(s)&&r.padding&&i[0]!==Un(i)&&(i=bsr(s,i,r.range,r.padding,r.exponent,r.constant)),(a||r.domainMin!=null||r.domainMax!=null||r.domainMid!=null)&&(l=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[l]<0&&(i[l]=0)),r.domainMin!=null&&(i[0]=r.domainMin),r.domainMax!=null&&(i[l]=r.domainMax),r.domainMid!=null)){u=r.domainMid;let c=u>i[l]?l+1:u<i[0]?0:l;c!==l&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(c,0,u)}return t.domain(pnt(s,i,n)),s===OY&&t.unknown(r.domainImplicit?ZN:void 0),r.nice&&t.nice&&t.nice(r.nice!==!0&&zY(t,r.nice)||null),i.length}function ysr(t,r,n){return r?(t.domain(pnt(t.type,r,n)),r.length):-1}function bsr(t,r,n,o,i,s){var a=Math.abs(Un(n)-n[0]),l=a/(a-2*o),u=t===Cy?Mce(r,null,l):t===cM?aW(r,null,l,.5):t===uM?aW(r,null,l,i||1):t===U4?Fce(r,null,l,s||1):Nce(r,null,l);return r=r.slice(),r[0]=u[0],r[r.length-1]=u[1],r}function pnt(t,r,n){if(T0e(t)){var o=Math.abs(r.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));o!==r.length&&n.warn("Log scale domain includes zero: "+$r(r))}return r}function xsr(t,r,n){let o=r.bins;if(o&&!Hr(o)){let i=t.domain(),s=i[0],a=Un(i),l=o.step,u=o.start==null?s:o.start,c=o.stop==null?a:o.stop;l||pt("Scale bins parameter missing step property."),u<s&&(u=l*Math.ceil(s/l)),c>a&&(c=l*Math.floor(a/l)),o=sa(u,c+l/2,l)}return o?t.bins=o:t.bins&&delete t.bins,t.type===PY&&(o?!r.domain&&!r.domainRaw&&(t.domain(o),n=o.length):t.bins=t.domain()),n}function vsr(t,r,n){var o=t.type,i=r.round||!1,s=r.range;if(r.rangeStep!=null)s=wsr(o,r,n);else if(r.scheme&&(s=_sr(o,r,n),Dn(s))){if(t.interpolator)return t.interpolator(s);pt("Scale type ".concat(o," does not support interpolating color schemes."))}if(s&&A0e(o))return t.interpolator(fM(O0e(s,r.reverse),r.interpolate,r.interpolateGamma));s&&r.interpolate&&t.interpolate?t.interpolate(Y4(r.interpolate,r.interpolateGamma)):Dn(t.round)?t.round(i):Dn(t.rangeRound)&&t.interpolate(i?yy:vu),s&&t.range(O0e(s,r.reverse))}function wsr(t,r,n){t!==_0e&&t!==RY&&pt("Only band and point scales support rangeStep.");var o=(r.paddingOuter!=null?r.paddingOuter:r.padding)||0,i=t===RY?1:(r.paddingInner!=null?r.paddingInner:r.padding)||0;return[0,r.rangeStep*z4(n,i,o)]}function _sr(t,r,n){var o=r.schemeExtent,i,s;return Hr(r.scheme)?s=fM(r.scheme,r.interpolate,r.interpolateGamma):(i=r.scheme.toLowerCase(),s=X4(i),s||pt("Unrecognized scheme name: ".concat(r.scheme))),n=t===G4?n+1:t===PY?n-1:t===wT||t===V4?+r.schemeCount||fsr:n,A0e(t)?rnt(s,o,r.reverse):Dn(s)?BY(rnt(s,o),n):t===OY?s:s.slice(0,n)}function rnt(t,r,n){return Dn(t)&&(r||n)?jY(t,O0e(r||[0,1],n)):t}function O0e(t,r){return r?t.slice().reverse():t}function hnt(t){et.call(this,null,t)}function L0e(t){et.call(this,null,t)}function Ssr(t,r,n,o,i){for(var s=(r-t.sum)/2,a=t.length,l=0,u;l<a;++l)u=t[l],u[o]=s,u[i]=s+=Math.abs(n(u))}function Csr(t,r,n,o,i){for(var s=1/t.sum,a=0,l=t.length,u=0,c=0,f;u<l;++u)f=t[u],f[o]=a,f[i]=a=s*(c+=Math.abs(n(f)))}function Esr(t,r,n,o,i){for(var s=0,a=0,l=t.length,u=0,c,f;u<l;++u)f=t[u],c=+n(f),c<0?(f[o]=a,f[i]=a+=c):(f[o]=s,f[i]=s+=c)}function Tsr(t,r,n,o){var i=[],s=g=>g(f),a,l,u,c,f,d,p,h,m;if(r==null)i.push(t.slice());else for(a={},l=0,u=t.length;l<u;++l)f=t[l],d=r.map(s),p=a[d],p||(a[d]=p=[],i.push(p)),p.push(f);for(d=0,m=0,c=i.length;d<c;++d){for(p=i[d],l=0,h=0,u=p.length;l<u;++l)h+=Math.abs(o(p[l]));p.sum=h,h>m&&(m=h),n&&p.sort(n)}return i.max=m,i}var Qir,Jir,esr,tsr,lnt,rsr,unt,nsr,cnt,osr,isr,ssr,asr,lsr,usr,csr,tnt,fsr,psr,nnt,mnt,gnt,ynt,bnt=N(()=>{"use strict";el();dM();Ls();Wo();lT();Dt(ont,et,{transform(t,r){if(this.value&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.scale,a=t.count==null?t.values?t.values.length:10:t.count,l=zY(s,a,t.minstep),u=t.format||D0e(n,s,l,t.formatSpecifier,t.formatType,!!t.values),c=t.values?I0e(s,t.values,l):UY(s,l);return i&&(o.rem=i),i=c.map((f,d)=>Nn({index:d/(c.length-1||1),value:f,label:u(f)})),t.extra&&i.length&&i.push(Nn({index:-1,extra:{value:i[0].value},label:""})),o.source=i,o.add=i,this.value=i,o}});Dt(int,et,{transform(t,r){var n=r.dataflow,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.item||Kir,s=t.key||_r,a=this.value;return Hr(o.encode)&&(o.encode=null),a&&(t.modified("key")||r.modified(s))&&pt("DataJoin does not support modified key function or fields."),a||(r=r.addAll(),this.value=a=Zir(s)),r.visit(r.ADD,l=>{let u=s(l),c=a.get(u);c?c.exit?(a.empty--,o.add.push(c)):o.mod.push(c):(c=i(l),a.set(u,c),o.add.push(c)),c.datum=l,c.exit=!1}),r.visit(r.MOD,l=>{let u=s(l),c=a.get(u);c&&(c.datum=l,o.mod.push(c))}),r.visit(r.REM,l=>{let u=s(l),c=a.get(u);l===c.datum&&!c.exit&&(o.rem.push(c),c.exit=!0,++a.empty)}),r.changed(r.ADD_MOD)&&o.modifies("datum"),(r.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),o}});Dt(snt,et,{transform(t,r){var n=r.fork(r.ADD_REM),o=t.mod||!1,i=t.encoders,s=r.encode;if(Hr(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return r.StopPropagation;var a=s==="enter",l=i.update||Yx,u=i.enter||Yx,c=i.exit||Yx,f=(s&&!a?i[s]:l)||Yx;if(r.changed(r.ADD)&&(r.visit(r.ADD,d=>{u(d,t),l(d,t)}),n.modifies(u.output),n.modifies(l.output),f!==Yx&&f!==l&&(r.visit(r.ADD,d=>{f(d,t)}),n.modifies(f.output))),r.changed(r.REM)&&c!==Yx&&(r.visit(r.REM,d=>{c(d,t)}),n.modifies(c.output)),a||f!==Yx){let d=r.MOD|(t.modified()?r.REFLOW:0);a?(r.visit(d,p=>{let h=u(p,t)||o;(f(p,t)||h)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):r.visit(d,p=>{(f(p,t)||o)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:r.StopPropagation}});Dt(ant,et,{transform(t,r){if(this.value!=null&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.type||K4,a=t.scale,l=+t.limit,u=zY(a,t.count==null?5:t.count,t.minstep),c=!!t.values||s===K4,f=t.format||M0e(n,a,u,s,t.formatSpecifier,t.formatType,c),d=t.values||N0e(a,u),p,h,m,g,y;return i&&(o.rem=i),s===K4?(l&&d.length>l?(r.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,l-1),y=!0):i=d,Dn(m=t.size)?(!t.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((b,x)=>Math.max(b,m(x,t)),0)):m=Qa(g=m||8),i=i.map((b,x)=>Nn({index:x,label:f(b,x,i),value:b,offset:g,size:m(b,t)})),y&&(y=d[i.length],i.push(Nn({index:i.length,label:"\u2026".concat(d.length-i.length," entries"),value:y,offset:g,size:m(y,t)})))):s===Zrt?(p=a.domain(),h=$Y(a,p[0],Un(p)),d.length<3&&!t.values&&p[0]!==Un(p)&&(d=[p[0],Un(p)]),i=d.map((b,x)=>Nn({index:x,label:f(b,x,d),value:b,perc:h(b)}))):(m=d.length-1,h=ent(a),i=d.map((b,x)=>Nn({index:x,label:f(b,x,d),value:b,perc:x?h(b):0,perc2:x===m?1:h(d[x+1])}))),o.source=i,o.add=i,this.value=i,o}});Qir=t=>t.source.x,Jir=t=>t.source.y,esr=t=>t.target.x,tsr=t=>t.target.y;R0e.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Dt(R0e,et,{transform(t,r){var n=t.sourceX||Qir,o=t.sourceY||Jir,i=t.targetX||esr,s=t.targetY||tsr,a=t.as||"path",l=t.orient||"vertical",u=t.shape||"line",c=tnt.get(u+"-"+l)||tnt.get(u);return c||pt("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),r.visit(r.SOURCE,f=>{f[a]=c(n(f),o(f),i(f),s(f))}),r.reflow(t.modified()).modifies(a)}});lnt=(t,r,n,o)=>"M"+t+","+r+"L"+n+","+o,rsr=(t,r,n,o)=>lnt(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),unt=(t,r,n,o)=>{var i=n-t,s=o-r,a=Math.sqrt(i*i+s*s)/2,l=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+r+"A"+a+","+a+" "+l+" 0 1 "+n+","+o},nsr=(t,r,n,o)=>unt(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),cnt=(t,r,n,o)=>{let i=n-t,s=o-r,a=.2*(i+s),l=.2*(s-i);return"M"+t+","+r+"C"+(t+a)+","+(r+l)+" "+(n+l)+","+(o-a)+" "+n+","+o},osr=(t,r,n,o)=>cnt(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),isr=(t,r,n,o)=>"M"+t+","+r+"V"+o+"H"+n,ssr=(t,r,n,o)=>"M"+t+","+r+"H"+n+"V"+o,asr=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+r*i+","+r*s+"A"+r+","+r+" 0 0,"+(u?1:0)+" "+r*a+","+r*l+"L"+o*a+","+o*l},lsr=(t,r,n,o)=>{let i=(t+n)/2;return"M"+t+","+r+"C"+i+","+r+" "+i+","+o+" "+n+","+o},usr=(t,r,n,o)=>{let i=(r+o)/2;return"M"+t+","+r+"C"+t+","+i+" "+n+","+i+" "+n+","+o},csr=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=(r+o)/2;return"M"+r*i+","+r*s+"C"+u*i+","+u*s+" "+u*a+","+u*l+" "+o*a+","+o*l},tnt=Bw({line:lnt,"line-radial":rsr,arc:unt,"arc-radial":nsr,curve:cnt,"curve-radial":osr,"orthogonal-horizontal":isr,"orthogonal-vertical":ssr,"orthogonal-radial":asr,"diagonal-horizontal":lsr,"diagonal-vertical":usr,"diagonal-radial":csr});P0e.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Dt(P0e,et,{transform(t,r){var n=t.as||["startAngle","endAngle"],o=n[0],i=n[1],s=t.field||G0,a=t.startAngle||0,l=t.endAngle!=null?t.endAngle:2*Math.PI,u=r.source,c=u.map(s),f=c.length,d=a,p=(l-a)/cN(c),h=sa(f),m,g,y;for(t.sort&&h.sort((b,x)=>c[b]-c[x]),m=0;m<f;++m)y=c[h[m]],g=u[h[m]],g[o]=d,g[i]=d+=y*p;return this.value=c,r.reflow(t.modified()).modifies(n)}});fsr=5;psr=gu(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);Dt(dnt,et,{transform(t,r){var n=r.dataflow,o=this.value,i=hsr(t);(!o||i!==o.type)&&(this.value=o=Gn(i)());for(i in t)if(!psr[i]){if(i==="padding"&&fnt(o.type))continue;Dn(o[i])?o[i](t[i]):n.warn("Unsupported scale property: "+i)}return vsr(o,t,xsr(o,t,gsr(o,t,n))),r.fork(r.NO_SOURCE|r.NO_FIELDS)}});Dt(hnt,et,{transform(t,r){let n=t.modified("sort")||r.changed(r.ADD)||r.modified(t.sort.fields)||r.modified("datum");return n&&r.source.sort(ry(t.sort)),this.modified(n),r}});nnt="zero",mnt="center",gnt="normalize",ynt=["y0","y1"];L0e.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:nnt,values:[nnt,mnt,gnt]},{name:"as",type:"string",array:!0,length:2,default:ynt}]};Dt(L0e,et,{transform(t,r){var n=t.as||ynt,o=n[0],i=n[1],s=ry(t.sort),a=t.field||G0,l=t.offset===mnt?Ssr:t.offset===gnt?Csr:Esr,u,c,f,d;for(u=Tsr(r.source,t.groupby,s,a),c=0,f=u.length,d=u.max;c<f;++c)l(u[c],d,a,o,i);return r.reflow(t.modified()).modifies(n)}})});function qY(t){return t>1?0:t<-1?Qr:Math.acos(t)}function Ri(t){return t>1?qo:t<-1?-qo:Math.asin(t)}var Jt,ET,Qr,qo,pM,Bs,Ho,Xr,Kr,zp,_s,Qt,Z4,VY,GY,TT,WY,Xt,Cu,Yo,hM,An=N(()=>{"use strict";Jt=1e-6,ET=1e-12,Qr=Math.PI,qo=Qr/2,pM=Qr/4,Bs=Qr*2,Ho=180/Qr,Xr=Qr/180,Kr=Math.abs,zp=Math.atan,_s=Math.atan2,Qt=Math.cos,Z4=Math.ceil,VY=Math.exp,GY=Math.hypot,TT=Math.log,WY=Math.pow,Xt=Math.sin,Cu=Math.sign||function(t){return t>0?1:t<0?-1:0},Yo=Math.sqrt,hM=Math.tan});function Pi(){}var j_=N(()=>{"use strict"});function HY(t,r){t&&vnt.hasOwnProperty(t.type)&&vnt[t.type](t,r)}function B0e(t,r,n){var o=-1,i=t.length-n,s;for(r.lineStart();++o<i;)s=t[o],r.point(s[0],s[1],s[2]);r.lineEnd()}function wnt(t,r){var n=-1,o=t.length;for(r.polygonStart();++n<o;)B0e(t[n],r,1);r.polygonEnd()}function gf(t,r){t&&xnt.hasOwnProperty(t.type)?xnt[t.type](t,r):HY(t,r)}var xnt,vnt,mM=N(()=>{"use strict";xnt={Feature:function(t,r){HY(t.geometry,r)},FeatureCollection:function(t,r){for(var n=t.features,o=-1,i=n.length;++o<i;)HY(n[o].geometry,r)}},vnt={Sphere:function(t,r){r.sphere()},Point:function(t,r){t=t.coordinates,r.point(t[0],t[1],t[2])},MultiPoint:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],r.point(t[0],t[1],t[2])},LineString:function(t,r){B0e(t.coordinates,r,0)},MultiLineString:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)B0e(n[o],r,0)},Polygon:function(t,r){wnt(t.coordinates,r)},MultiPolygon:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)wnt(n[o],r)},GeometryCollection:function(t,r){for(var n=t.geometries,o=-1,i=n.length;++o<i;)HY(n[o],r)}}});function Asr(){wm.point=Isr}function ksr(){Cnt(_nt,Snt)}function Isr(t,r){wm.point=Cnt,_nt=t,Snt=r,t*=Xr,r*=Xr,$0e=t,z0e=Qt(r=r/2+pM),U0e=Xt(r)}function Cnt(t,r){t*=Xr,r*=Xr,r=r/2+pM;var n=t-$0e,o=n>=0?1:-1,i=o*n,s=Qt(r),a=Xt(r),l=U0e*a,u=z0e*s+l*Qt(i),c=l*o*Xt(i);Q4.add(_s(c,u)),$0e=t,z0e=s,U0e=a}function V0e(t){return YY=new qi,gf(t,wm),YY*2}var Q4,YY,_nt,Snt,$0e,z0e,U0e,wm,G0e=N(()=>{"use strict";Wo();An();j_();mM();Q4=new qi,YY=new qi,wm={point:Pi,lineStart:Pi,lineEnd:Pi,polygonStart:function(){Q4=new qi,wm.lineStart=Asr,wm.lineEnd=ksr},polygonEnd:function(){var t=+Q4;YY.add(t<0?Bs+t:t),this.lineStart=this.lineEnd=this.point=Pi},sphere:function(){YY.add(Bs)}}});function AT(t){return[_s(t[1],t[0]),Ri(t[2])]}function Up(t){var r=t[0],n=t[1],o=Qt(n);return[o*Qt(r),o*Xt(r),Xt(n)]}function J4(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function wv(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}function XY(t,r){t[0]+=r[0],t[1]+=r[1],t[2]+=r[2]}function e5(t,r){return[t[0]*r,t[1]*r,t[2]*r]}function kT(t){var r=Yo(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=r,t[1]/=r,t[2]/=r}var gM=N(()=>{"use strict";An()});function W0e(t,r){B_.push(Sv=[ls=t,Ss=t]),r<yf&&(yf=r),r>Ld&&(Ld=r)}function Dnt(t,r){var n=Up([t*Xr,r*Xr]);if(yM){var o=wv(yM,n),i=[o[1],-o[0],0],s=wv(i,o);kT(s),s=AT(s);var a=t-IT,l=a>0?1:-1,u=s[0]*Ho*l,c,f=Kr(a)>180;f^(l*IT<u&&u<l*t)?(c=s[1]*Ho,c>Ld&&(Ld=c)):(u=(u+360)%360-180,f^(l*IT<u&&u<l*t)?(c=-s[1]*Ho,c<yf&&(yf=c)):(r<yf&&(yf=r),r>Ld&&(Ld=r))),f?t<IT?Pd(ls,t)>Pd(ls,Ss)&&(Ss=t):Pd(t,Ss)>Pd(ls,Ss)&&(ls=t):Ss>=ls?(t<ls&&(ls=t),t>Ss&&(Ss=t)):t>IT?Pd(ls,t)>Pd(ls,Ss)&&(Ss=t):Pd(t,Ss)>Pd(ls,Ss)&&(ls=t)}else B_.push(Sv=[ls=t,Ss=t]);r<yf&&(yf=r),r>Ld&&(Ld=r),yM=n,IT=t}function Ent(){_v.point=Dnt}function Tnt(){Sv[0]=ls,Sv[1]=Ss,_v.point=W0e,yM=null}function Nnt(t,r){if(yM){var n=t-IT;t5.add(Kr(n)>180?n+(n>0?360:-360):n)}else knt=t,Int=r;wm.point(t,r),Dnt(t,r)}function Dsr(){wm.lineStart()}function Nsr(){Nnt(knt,Int),wm.lineEnd(),Kr(t5)>Jt&&(ls=-(Ss=180)),Sv[0]=ls,Sv[1]=Ss,yM=null}function Pd(t,r){return(r-=t)<0?r+360:r}function Msr(t,r){return t[0]-r[0]}function Ant(t,r){return t[0]<=t[1]?t[0]<=r&&r<=t[1]:r<t[0]||t[1]<r}function q0e(t){var r,n,o,i,s,a,l;if(Ld=Ss=-(ls=yf=1/0),B_=[],gf(t,_v),n=B_.length){for(B_.sort(Msr),r=1,o=B_[0],s=[o];r<n;++r)i=B_[r],Ant(o,i[0])||Ant(o,i[1])?(Pd(o[0],i[1])>Pd(o[0],o[1])&&(o[1]=i[1]),Pd(i[0],o[1])>Pd(o[0],o[1])&&(o[0]=i[0])):s.push(o=i);for(a=-1/0,n=s.length-1,r=0,o=s[n];r<=n;o=i,++r)i=s[r],(l=Pd(o[1],i[0]))>a&&(a=l,ls=i[0],Ss=o[1])}return B_=Sv=null,ls===1/0||yf===1/0?[[NaN,NaN],[NaN,NaN]]:[[ls,yf],[Ss,Ld]]}var ls,yf,Ss,Ld,IT,knt,Int,yM,t5,B_,Sv,_v,Mnt=N(()=>{"use strict";Wo();G0e();gM();An();mM();_v={point:W0e,lineStart:Ent,lineEnd:Tnt,polygonStart:function(){_v.point=Nnt,_v.lineStart=Dsr,_v.lineEnd=Nsr,t5=new qi,wm.polygonStart()},polygonEnd:function(){wm.polygonEnd(),_v.point=W0e,_v.lineStart=Ent,_v.lineEnd=Tnt,Q4<0?(ls=-(Ss=180),yf=-(Ld=90)):t5>Jt?Ld=90:t5<-Jt&&(yf=-90),Sv[0]=ls,Sv[1]=Ss},sphere:function(){ls=-(Ss=180),yf=-(Ld=90)}}});function K0e(t,r){t*=Xr,r*=Xr;var n=Qt(r);n5(n*Qt(t),n*Xt(t),Xt(r))}function n5(t,r,n){++r5,ZY+=(t-ZY)/r5,QY+=(r-QY)/r5,JY+=(n-JY)/r5}function Fnt(){_m.point=Fsr}function Fsr(t,r){t*=Xr,r*=Xr;var n=Qt(r);_c=n*Qt(t),Sc=n*Xt(t),Cc=Xt(r),_m.point=Osr,n5(_c,Sc,Cc)}function Osr(t,r){t*=Xr,r*=Xr;var n=Qt(r),o=n*Qt(t),i=n*Xt(t),s=Xt(r),a=_s(Yo((a=Sc*s-Cc*i)*a+(a=Cc*o-_c*s)*a+(a=_c*i-Sc*o)*a),_c*o+Sc*i+Cc*s);KY+=a,eX+=a*(_c+(_c=o)),tX+=a*(Sc+(Sc=i)),rX+=a*(Cc+(Cc=s)),n5(_c,Sc,Cc)}function Ont(){_m.point=K0e}function Rsr(){_m.point=Lsr}function Psr(){Lnt(Rnt,Pnt),_m.point=K0e}function Lsr(t,r){Rnt=t,Pnt=r,t*=Xr,r*=Xr,_m.point=Lnt;var n=Qt(r);_c=n*Qt(t),Sc=n*Xt(t),Cc=Xt(r),n5(_c,Sc,Cc)}function Lnt(t,r){t*=Xr,r*=Xr;var n=Qt(r),o=n*Qt(t),i=n*Xt(t),s=Xt(r),a=Sc*s-Cc*i,l=Cc*o-_c*s,u=_c*i-Sc*o,c=GY(a,l,u),f=Ri(c),d=c&&-f/c;H0e.add(d*a),Y0e.add(d*l),X0e.add(d*u),KY+=f,eX+=f*(_c+(_c=o)),tX+=f*(Sc+(Sc=i)),rX+=f*(Cc+(Cc=s)),n5(_c,Sc,Cc)}function Z0e(t){r5=KY=ZY=QY=JY=eX=tX=rX=0,H0e=new qi,Y0e=new qi,X0e=new qi,gf(t,_m);var r=+H0e,n=+Y0e,o=+X0e,i=GY(r,n,o);return i<ET&&(r=eX,n=tX,o=rX,KY<Jt&&(r=ZY,n=QY,o=JY),i=GY(r,n,o),i<ET)?[NaN,NaN]:[_s(n,r)*Ho,Ri(o/i)*Ho]}var r5,KY,ZY,QY,JY,eX,tX,rX,H0e,Y0e,X0e,Rnt,Pnt,_c,Sc,Cc,_m,jnt=N(()=>{"use strict";Wo();An();j_();mM();_m={sphere:Pi,point:K0e,lineStart:Fnt,lineEnd:Ont,polygonStart:function(){_m.lineStart=Rsr,_m.lineEnd=Psr},polygonEnd:function(){_m.lineStart=Fnt,_m.lineEnd=Ont}}});function o5(t,r){function n(o,i){return o=t(o,i),r(o[0],o[1])}return t.invert&&r.invert&&(n.invert=function(o,i){return o=r.invert(o,i),o&&t.invert(o[0],o[1])}),n}var Q0e=N(()=>{"use strict"});function J0e(t,r){return[Kr(t)>Qr?t+Math.round(-t/Bs)*Bs:t,r]}function eye(t,r,n){return(t%=Bs)?r||n?o5($nt(t),znt(r,n)):$nt(t):r||n?znt(r,n):J0e}function Bnt(t){return function(r,n){return r+=t,[r>Qr?r-Bs:r<-Qr?r+Bs:r,n]}}function $nt(t){var r=Bnt(t);return r.invert=Bnt(-t),r}function znt(t,r){var n=Qt(t),o=Xt(t),i=Qt(r),s=Xt(r);function a(l,u){var c=Qt(u),f=Qt(l)*c,d=Xt(l)*c,p=Xt(u),h=p*n+f*o;return[_s(d*i-h*s,f*n-p*o),Ri(h*i+d*s)]}return a.invert=function(l,u){var c=Qt(u),f=Qt(l)*c,d=Xt(l)*c,p=Xt(u),h=p*i-d*s;return[_s(d*i+p*s,f*n+h*o),Ri(h*n-f*o)]},a}function Unt(t){t=eye(t[0]*Xr,t[1]*Xr,t.length>2?t[2]*Xr:0);function r(n){return n=t(n[0]*Xr,n[1]*Xr),n[0]*=Ho,n[1]*=Ho,n}return r.invert=function(n){return n=t.invert(n[0]*Xr,n[1]*Xr),n[0]*=Ho,n[1]*=Ho,n},r}var tye=N(()=>{"use strict";Q0e();An();J0e.invert=J0e});function Gnt(t,r,n,o,i,s){if(n){var a=Qt(r),l=Xt(r),u=o*n;i==null?(i=r+o*Bs,s=r-u/2):(i=Vnt(a,i),s=Vnt(a,s),(o>0?i<s:i>s)&&(i+=o*Bs));for(var c,f=i;o>0?f>s:f<s;f-=u)c=AT([a,-l*Qt(f),-l*Xt(f)]),t.point(c[0],c[1])}}function Vnt(t,r){r=Up(r),r[0]-=t,kT(r);var n=qY(-r[1]);return((-r[2]<0?-n:n)+Bs-Jt)%Bs}var Wnt=N(()=>{"use strict";gM();An()});function nX(){var t=[],r;return{point:function(n,o,i){r.push([n,o,i])},lineStart:function(){t.push(r=[])},lineEnd:Pi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],r=null,n}}}var rye=N(()=>{"use strict";j_()});function bM(t,r){return Kr(t[0]-r[0])<Jt&&Kr(t[1]-r[1])<Jt}var nye=N(()=>{"use strict";An()});function oX(t,r,n,o){this.x=t,this.z=r,this.o=n,this.e=o,this.v=!1,this.n=this.p=null}function iX(t,r,n,o,i){var s=[],a=[],l,u;if(t.forEach(function(m){if(!((g=m.length-1)<=0)){var g,y=m[0],b=m[g],x;if(bM(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),l=0;l<g;++l)i.point((y=m[l])[0],y[1]);i.lineEnd();return}b[0]+=2*Jt}s.push(x=new oX(y,m,null,!0)),a.push(x.o=new oX(y,null,x,!1)),s.push(x=new oX(b,m,null,!1)),a.push(x.o=new oX(b,null,x,!0))}}),!!s.length){for(a.sort(r),qnt(s),qnt(a),l=0,u=a.length;l<u;++l)a[l].e=n=!n;for(var c=s[0],f,d;;){for(var p=c,h=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(l=0,u=f.length;l<u;++l)i.point((d=f[l])[0],d[1]);else o(p.x,p.n.x,1,i);p=p.n}else{if(h)for(f=p.p.z,l=f.length-1;l>=0;--l)i.point((d=f[l])[0],d[1]);else o(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,h=!h}while(!p.v);i.lineEnd()}}}function qnt(t){if(r=t.length){for(var r,n=0,o=t[0],i;++n<r;)o.n=i=t[n],i.p=o,o=i;o.n=i=t[0],i.p=o}}var oye=N(()=>{"use strict";nye();An()});function iye(t){return Kr(t[0])<=Qr?t[0]:Cu(t[0])*((Kr(t[0])+Qr)%Bs-Qr)}function Hnt(t,r){var n=iye(r),o=r[1],i=Xt(o),s=[Xt(n),-Qt(n),0],a=0,l=0,u=new qi;i===1?o=qo+Jt:i===-1&&(o=-qo-Jt);for(var c=0,f=t.length;c<f;++c)if(p=(d=t[c]).length)for(var d,p,h=d[p-1],m=iye(h),g=h[1]/2+pM,y=Xt(g),b=Qt(g),x=0;x<p;++x,m=w,y=S,b=C,h=v){var v=d[x],w=iye(v),_=v[1]/2+pM,S=Xt(_),C=Qt(_),E=w-m,T=E>=0?1:-1,I=T*E,k=I>Qr,F=y*S;if(u.add(_s(F*T*Xt(I),b*C+F*Qt(I))),a+=k?E+T*Bs:E,k^m>=n^w>=n){var D=wv(Up(h),Up(v));kT(D);var L=wv(s,D);kT(L);var P=(k^E>=0?-1:1)*Ri(L[2]);(o>P||o===P&&(D[0]||D[1]))&&(l+=k^E>=0?1:-1)}}return(a<-Jt||a<Jt&&u<-ET)^l&1}var Ynt=N(()=>{"use strict";Wo();gM();An()});function sX(t,r,n,o){return function(i){var s=r(i),a=nX(),l=r(a),u=!1,c,f,d,p={point:h,lineStart:g,lineEnd:y,polygonStart:function(){p.point=b,p.lineStart=x,p.lineEnd=v,f=[],c=[]},polygonEnd:function(){p.point=h,p.lineStart=g,p.lineEnd=y,f=uN(f);var w=Hnt(c,o);f.length?(u||(i.polygonStart(),u=!0),iX(f,Bsr,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),f=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,_){t(w,_)&&i.point(w,_)}function m(w,_){s.point(w,_)}function g(){p.point=m,s.lineStart()}function y(){p.point=h,s.lineEnd()}function b(w,_){d.push([w,_]),l.point(w,_)}function x(){l.lineStart(),d=[]}function v(){b(d[0][0],d[0][1]),l.lineEnd();var w=l.clean(),_=a.result(),S,C=_.length,E,T,I;if(d.pop(),c.push(d),d=null,!!C){if(w&1){if(T=_[0],(E=T.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<E;++S)i.point((I=T[S])[0],I[1]);i.lineEnd()}return}C>1&&w&2&&_.push(_.pop().concat(_.shift())),f.push(_.filter(jsr))}}return p}}function jsr(t){return t.length>1}function Bsr(t,r){return((t=t.x)[0]<0?t[1]-qo-Jt:qo-t[1])-((r=r.x)[0]<0?r[1]-qo-Jt:qo-r[1])}var sye=N(()=>{"use strict";rye();oye();An();Ynt();Wo()});function $sr(t){var r=NaN,n=NaN,o=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var l=s>0?Qr:-Qr,u=Kr(s-r);Kr(u-Qr)<Jt?(t.point(r,n=(n+a)/2>0?qo:-qo),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(s,n),i=0):o!==l&&u>=Qr&&(Kr(r-o)<Jt&&(r-=o*Jt),Kr(s-l)<Jt&&(s-=l*Jt),n=zsr(r,n,s,a),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(r=s,n=a),o=l},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-i}}}function zsr(t,r,n,o){var i,s,a=Xt(t-n);return Kr(a)>Jt?zp((Xt(r)*(s=Qt(o))*Xt(n)-Xt(o)*(i=Qt(r))*Xt(t))/(i*s*a)):(r+o)/2}function Usr(t,r,n,o){var i;if(t==null)i=n*qo,o.point(-Qr,i),o.point(0,i),o.point(Qr,i),o.point(Qr,0),o.point(Qr,-i),o.point(0,-i),o.point(-Qr,-i),o.point(-Qr,0),o.point(-Qr,i);else if(Kr(t[0]-r[0])>Jt){var s=t[0]<r[0]?Qr:-Qr;i=n*s/2,o.point(-s,i),o.point(0,i),o.point(s,i)}else o.point(r[0],r[1])}var aye,Xnt=N(()=>{"use strict";sye();An();aye=sX(function(){return!0},$sr,Usr,[-Qr,-qo])});function Knt(t){var r=Qt(t),n=6*Xr,o=r>0,i=Kr(r)>Jt;function s(f,d,p,h){Gnt(h,t,n,p,f,d)}function a(f,d){return Qt(f)*Qt(d)>r}function l(f){var d,p,h,m,g;return{lineStart:function(){m=h=!1,g=1},point:function(y,b){var x=[y,b],v,w=a(y,b),_=o?w?0:c(y,b):w?c(y+(y<0?Qr:-Qr),b):0;if(!d&&(m=h=w)&&f.lineStart(),w!==h&&(v=u(d,x),(!v||bM(d,v)||bM(x,v))&&(x[2]=1)),w!==h)g=0,w?(f.lineStart(),v=u(x,d),f.point(v[0],v[1])):(v=u(d,x),f.point(v[0],v[1],2),f.lineEnd()),d=v;else if(i&&d&&o^w){var S;!(_&p)&&(S=u(x,d,!0))&&(g=0,o?(f.lineStart(),f.point(S[0][0],S[0][1]),f.point(S[1][0],S[1][1]),f.lineEnd()):(f.point(S[1][0],S[1][1]),f.lineEnd(),f.lineStart(),f.point(S[0][0],S[0][1],3)))}w&&(!d||!bM(d,x))&&f.point(x[0],x[1]),d=x,h=w,p=_},lineEnd:function(){h&&f.lineEnd(),d=null},clean:function(){return g|(m&&h)<<1}}}function u(f,d,p){var h=Up(f),m=Up(d),g=[1,0,0],y=wv(h,m),b=J4(y,y),x=y[0],v=b-x*x;if(!v)return!p&&f;var w=r*b/v,_=-r*x/v,S=wv(g,y),C=e5(g,w),E=e5(y,_);XY(C,E);var T=S,I=J4(C,T),k=J4(T,T),F=I*I-k*(J4(C,C)-1);if(!(F<0)){var D=Yo(F),L=e5(T,(-I-D)/k);if(XY(L,C),L=AT(L),!p)return L;var P=f[0],R=d[0],V=f[1],G=d[1],U;R<P&&(U=P,P=R,R=U);var H=R-P,X=Kr(H-Qr)<Jt,fe=X||H<Jt;if(!X&&G<V&&(U=V,V=G,G=U),fe?X?V+G>0^L[1]<(Kr(L[0]-P)<Jt?V:G):V<=L[1]&&L[1]<=G:H>Qr^(P<=L[0]&&L[0]<=R)){var $=e5(T,(-I+D)/k);return XY($,C),[L,AT($)]}}}function c(f,d){var p=o?t:Qr-t,h=0;return f<-p?h|=1:f>p&&(h|=2),d<-p?h|=4:d>p&&(h|=8),h}return sX(a,l,s,o?[0,-t]:[-Qr,t-Qr])}var Znt=N(()=>{"use strict";gM();Wnt();An();nye();sye()});function Qnt(t,r,n,o,i,s){var a=t[0],l=t[1],u=r[0],c=r[1],f=0,d=1,p=u-a,h=c-l,m;if(m=n-a,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>f&&(f=m)}if(m=i-a,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<d&&(d=m)}if(m=o-l,!(!h&&m>0)){if(m/=h,h<0){if(m<f)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>f&&(f=m)}if(m=s-l,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>f&&(f=m)}else if(h>0){if(m<f)return;m<d&&(d=m)}return f>0&&(t[0]=a+f*p,t[1]=l+f*h),d<1&&(r[0]=a+d*p,r[1]=l+d*h),!0}}}}}var Jnt=N(()=>{"use strict"});function s5(t,r,n,o){function i(c,f){return t<=c&&c<=n&&r<=f&&f<=o}function s(c,f,d,p){var h=0,m=0;if(c==null||(h=a(c,d))!==(m=a(f,d))||u(c,f)<0^d>0)do p.point(h===0||h===3?t:n,h>1?o:r);while((h=(h+d+4)%4)!==m);else p.point(f[0],f[1])}function a(c,f){return Kr(c[0]-t)<Jt?f>0?0:3:Kr(c[0]-n)<Jt?f>0?2:1:Kr(c[1]-r)<Jt?f>0?1:0:f>0?3:2}function l(c,f){return u(c.x,f.x)}function u(c,f){var d=a(c,1),p=a(f,1);return d!==p?d-p:d===0?f[1]-c[1]:d===1?c[0]-f[0]:d===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,d=nX(),p,h,m,g,y,b,x,v,w,_,S,C={point:E,lineStart:F,lineEnd:D,polygonStart:I,polygonEnd:k};function E(P,R){i(P,R)&&f.point(P,R)}function T(){for(var P=0,R=0,V=h.length;R<V;++R)for(var G=h[R],U=1,H=G.length,X=G[0],fe,$,M=X[0],z=X[1];U<H;++U)fe=M,$=z,X=G[U],M=X[0],z=X[1],$<=o?z>o&&(M-fe)*(o-$)>(z-$)*(t-fe)&&++P:z<=o&&(M-fe)*(o-$)<(z-$)*(t-fe)&&--P;return P}function I(){f=d,p=[],h=[],S=!0}function k(){var P=T(),R=S&&P,V=(p=uN(p)).length;(R||V)&&(c.polygonStart(),R&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),V&&iX(p,l,P,s,c),c.polygonEnd()),f=c,p=h=m=null}function F(){C.point=L,h&&h.push(m=[]),_=!0,w=!1,x=v=NaN}function D(){p&&(L(g,y),b&&w&&d.rejoin(),p.push(d.result())),C.point=E,w&&f.lineEnd()}function L(P,R){var V=i(P,R);if(h&&m.push([P,R]),_)g=P,y=R,b=V,_=!1,V&&(f.lineStart(),f.point(P,R));else if(V&&w)f.point(P,R);else{var G=[x=Math.max(aX,Math.min(i5,x)),v=Math.max(aX,Math.min(i5,v))],U=[P=Math.max(aX,Math.min(i5,P)),R=Math.max(aX,Math.min(i5,R))];Qnt(G,U,t,r,n,o)?(w||(f.lineStart(),f.point(G[0],G[1])),f.point(U[0],U[1]),V||f.lineEnd(),S=!1):V&&(f.lineStart(),f.point(P,R),S=!1)}x=P,v=R,w=V}return C}}var i5,aX,lye=N(()=>{"use strict";An();rye();Jnt();oye();Wo();i5=1e9,aX=-i5});function eot(t,r,n){var o=sa(t,r-Jt,n).concat(r);return function(i){return o.map(function(s){return[i,s]})}}function tot(t,r,n){var o=sa(t,r-Jt,n).concat(r);return function(i){return o.map(function(s){return[s,i]})}}function lX(){var t,r,n,o,i,s,a,l,u=10,c=u,f=90,d=360,p,h,m,g,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return sa(Z4(o/f)*f,n,f).map(m).concat(sa(Z4(l/d)*d,a,d).map(g)).concat(sa(Z4(r/u)*u,t,u).filter(function(v){return Kr(v%f)>Jt}).map(p)).concat(sa(Z4(s/c)*c,i,c).filter(function(v){return Kr(v%d)>Jt}).map(h))}return b.lines=function(){return x().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[m(o).concat(g(a).slice(1),m(n).reverse().slice(1),g(l).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(o=+v[0][0],n=+v[1][0],l=+v[0][1],a=+v[1][1],o>n&&(v=o,o=n,n=v),l>a&&(v=l,l=a,a=v),b.precision(y)):[[o,l],[n,a]]},b.extentMinor=function(v){return arguments.length?(r=+v[0][0],t=+v[1][0],s=+v[0][1],i=+v[1][1],r>t&&(v=r,r=t,t=v),s>i&&(v=s,s=i,i=v),b.precision(y)):[[r,s],[t,i]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(f=+v[0],d=+v[1],b):[f,d]},b.stepMinor=function(v){return arguments.length?(u=+v[0],c=+v[1],b):[u,c]},b.precision=function(v){return arguments.length?(y=+v,p=eot(s,i,90),h=tot(r,t,y),m=eot(l,a,90),g=tot(o,n,y),b):y},b.extentMajor([[-180,-90+Jt],[180,90-Jt]]).extentMinor([[-180,-80-Jt],[180,80+Jt]])}var rot=N(()=>{"use strict";Wo();An()});var $_,uX=N(()=>{"use strict";$_=t=>t});function Vsr(){z_.point=Gsr}function Gsr(t,r){z_.point=iot,not=fye=t,oot=dye=r}function iot(t,r){cye.add(dye*t-fye*r),fye=t,dye=r}function Wsr(){iot(not,oot)}var uye,cye,not,oot,fye,dye,z_,pye,sot=N(()=>{"use strict";Wo();An();j_();uye=new qi,cye=new qi,z_={point:Pi,lineStart:Pi,lineEnd:Pi,polygonStart:function(){z_.lineStart=Vsr,z_.lineEnd=Wsr},polygonEnd:function(){z_.lineStart=z_.lineEnd=z_.point=Pi,uye.add(Kr(cye)),cye=new qi},result:function(){var t=uye/2;return uye=new qi,t}};pye=z_});function Hsr(t,r){t<xM&&(xM=t),t>a5&&(a5=t),r<cX&&(cX=r),r>fX&&(fX=r)}var xM,cX,a5,fX,qsr,vM,hye=N(()=>{"use strict";j_();xM=1/0,cX=xM,a5=-xM,fX=a5,qsr={point:Hsr,lineStart:Pi,lineEnd:Pi,polygonStart:Pi,polygonEnd:Pi,result:function(){var t=[[xM,cX],[a5,fX]];return a5=fX=-(cX=xM=1/0),t}};vM=qsr});function DT(t,r){mye+=t,gye+=r,++l5}function aot(){Sm.point=Ysr}function Ysr(t,r){Sm.point=Xsr,DT(Ey=t,Ty=r)}function Xsr(t,r){var n=t-Ey,o=r-Ty,i=Yo(n*n+o*o);dX+=i*(Ey+t)/2,pX+=i*(Ty+r)/2,wM+=i,DT(Ey=t,Ty=r)}function lot(){Sm.point=DT}function Ksr(){Sm.point=Qsr}function Zsr(){fot(uot,cot)}function Qsr(t,r){Sm.point=fot,DT(uot=Ey=t,cot=Ty=r)}function fot(t,r){var n=t-Ey,o=r-Ty,i=Yo(n*n+o*o);dX+=i*(Ey+t)/2,pX+=i*(Ty+r)/2,wM+=i,i=Ty*t-Ey*r,yye+=i*(Ey+t),bye+=i*(Ty+r),u5+=i*3,DT(Ey=t,Ty=r)}var mye,gye,l5,dX,pX,wM,yye,bye,u5,uot,cot,Ey,Ty,Sm,xye,dot=N(()=>{"use strict";An();mye=0,gye=0,l5=0,dX=0,pX=0,wM=0,yye=0,bye=0,u5=0,Sm={point:DT,lineStart:aot,lineEnd:lot,polygonStart:function(){Sm.lineStart=Ksr,Sm.lineEnd=Zsr},polygonEnd:function(){Sm.point=DT,Sm.lineStart=aot,Sm.lineEnd=lot},result:function(){var t=u5?[yye/u5,bye/u5]:wM?[dX/wM,pX/wM]:l5?[mye/l5,gye/l5]:[NaN,NaN];return mye=gye=l5=dX=pX=wM=yye=bye=u5=0,t}};xye=Sm});function hX(t){this._context=t}var pot=N(()=>{"use strict";An();j_();hX.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._context.moveTo(t,r),this._point=1;break}case 1:{this._context.lineTo(t,r);break}default:{this._context.moveTo(t+this._radius,r),this._context.arc(t,r,this._radius,0,Bs);break}}},result:Pi}});function Jsr(t,r){mX.point=got,hot=c5=t,mot=f5=r}function got(t,r){c5-=t,f5-=r,wye.add(Yo(c5*c5+f5*f5)),c5=t,f5=r}var wye,vye,hot,mot,c5,f5,mX,_ye,yot=N(()=>{"use strict";Wo();An();j_();wye=new qi,mX={point:Pi,lineStart:function(){mX.point=Jsr},lineEnd:function(){vye&&got(hot,mot),mX.point=Pi},polygonStart:function(){vye=!0},polygonEnd:function(){vye=null},result:function(){var t=+wye;return wye=new qi,t}};_ye=mX});function gX(){this._string=[]}function bot(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var xot=N(()=>{"use strict";gX.prototype={_radius:4.5,_circle:bot(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._string.push("M",t,",",r),this._point=1;break}case 1:{this._string.push("L",t,",",r);break}default:{this._circle==null&&(this._circle=bot(this._radius)),this._string.push("M",t,",",r,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}}});function yX(t,r){var n=4.5,o,i;function s(a){return a&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),gf(a,o(i))),i.result()}return s.area=function(a){return gf(a,o(pye)),pye.result()},s.measure=function(a){return gf(a,o(_ye)),_ye.result()},s.bounds=function(a){return gf(a,o(vM)),vM.result()},s.centroid=function(a){return gf(a,o(xye)),xye.result()},s.projection=function(a){return arguments.length?(o=a==null?(t=null,$_):(t=a).stream,s):t},s.context=function(a){return arguments.length?(i=a==null?(r=null,new gX):new hX(r=a),typeof n!="function"&&i.pointRadius(n),s):r},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(i.pointRadius(+a),+a),s):n},s.projection(t).context(r)}var vot=N(()=>{"use strict";uX();mM();sot();hye();dot();pot();yot();xot()});function NT(t){return function(r){var n=new Sye;for(var o in t)n[o]=t[o];return n.stream=r,n}}function Sye(){}var bX=N(()=>{"use strict";Sye.prototype={constructor:Sye,point:function(t,r){this.stream.point(t,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}});function Cye(t,r,n){var o=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),o!=null&&t.clipExtent(null),gf(n,t.stream(vM)),r(vM.result()),o!=null&&t.clipExtent(o),t}function MT(t,r,n){return Cye(t,function(o){var i=r[1][0]-r[0][0],s=r[1][1]-r[0][1],a=Math.min(i/(o[1][0]-o[0][0]),s/(o[1][1]-o[0][1])),l=+r[0][0]+(i-a*(o[1][0]+o[0][0]))/2,u=+r[0][1]+(s-a*(o[1][1]+o[0][1]))/2;t.scale(150*a).translate([l,u])},n)}function _M(t,r,n){return MT(t,[[0,0],r],n)}function SM(t,r,n){return Cye(t,function(o){var i=+r,s=i/(o[1][0]-o[0][0]),a=(i-s*(o[1][0]+o[0][0]))/2,l=-s*o[0][1];t.scale(150*s).translate([a,l])},n)}function CM(t,r,n){return Cye(t,function(o){var i=+r,s=i/(o[1][1]-o[0][1]),a=-s*o[0][0],l=(i-s*(o[1][1]+o[0][1]))/2;t.scale(150*s).translate([a,l])},n)}var xX=N(()=>{"use strict";mM();hye()});function Eye(t,r){return+r?rar(t,r):tar(t)}function tar(t){return NT({point:function(r,n){r=t(r,n),this.stream.point(r[0],r[1])}})}function rar(t,r){function n(o,i,s,a,l,u,c,f,d,p,h,m,g,y){var b=c-o,x=f-i,v=b*b+x*x;if(v>4*r&&g--){var w=a+p,_=l+h,S=u+m,C=Yo(w*w+_*_+S*S),E=Ri(S/=C),T=Kr(Kr(S)-1)<Jt||Kr(s-d)<Jt?(s+d)/2:_s(_,w),I=t(T,E),k=I[0],F=I[1],D=k-o,L=F-i,P=x*D-b*L;(P*P/v>r||Kr((b*D+x*L)/v-.5)>.3||a*p+l*h+u*m<ear)&&(n(o,i,s,a,l,u,k,F,T,w/=C,_/=C,S,g,y),y.point(k,F),n(k,F,T,w,_,S,c,f,d,p,h,m,g,y))}}return function(o){var i,s,a,l,u,c,f,d,p,h,m,g,y={point:b,lineStart:x,lineEnd:w,polygonStart:function(){o.polygonStart(),y.lineStart=_},polygonEnd:function(){o.polygonEnd(),y.lineStart=x}};function b(E,T){E=t(E,T),o.point(E[0],E[1])}function x(){d=NaN,y.point=v,o.lineStart()}function v(E,T){var I=Up([E,T]),k=t(E,T);n(d,p,f,h,m,g,d=k[0],p=k[1],f=E,h=I[0],m=I[1],g=I[2],wot,o),o.point(d,p)}function w(){y.point=b,o.lineEnd()}function _(){x(),y.point=S,y.lineEnd=C}function S(E,T){v(i=E,T),s=d,a=p,l=h,u=m,c=g,y.point=v}function C(){n(d,p,f,h,m,g,s,a,i,l,u,c,wot,o),y.lineEnd=w,w()}return y}}var wot,ear,_ot=N(()=>{"use strict";gM();An();bX();wot=16,ear=Qt(30*Xr)});function oar(t){return NT({point:function(r,n){var o=t(r,n);return this.stream.point(o[0],o[1])}})}function iar(t,r,n,o,i){function s(a,l){return a*=o,l*=i,[r+t*a,n-t*l]}return s.invert=function(a,l){return[(a-r)/t*o,(n-l)/t*i]},s}function Sot(t,r,n,o,i,s){if(!s)return iar(t,r,n,o,i);var a=Qt(s),l=Xt(s),u=a*t,c=l*t,f=a/t,d=l/t,p=(l*n-a*r)/t,h=(l*r+a*n)/t;function m(g,y){return g*=o,y*=i,[u*g-c*y+r,n-c*g-u*y]}return m.invert=function(g,y){return[o*(f*g-d*y+p),i*(h-d*g-f*y)]},m}function Cs(t){return vX(function(){return t})()}function vX(t){var r,n=150,o=480,i=250,s=0,a=0,l=0,u=0,c=0,f,d=0,p=1,h=1,m=null,g=aye,y=null,b,x,v,w=$_,_=.5,S,C,E,T,I;function k(P){return E(P[0]*Xr,P[1]*Xr)}function F(P){return P=E.invert(P[0],P[1]),P&&[P[0]*Ho,P[1]*Ho]}k.stream=function(P){return T&&I===P?T:T=nar(oar(f)(g(S(w(I=P)))))},k.preclip=function(P){return arguments.length?(g=P,m=void 0,L()):g},k.postclip=function(P){return arguments.length?(w=P,y=b=x=v=null,L()):w},k.clipAngle=function(P){return arguments.length?(g=+P?Knt(m=P*Xr):(m=null,aye),L()):m*Ho},k.clipExtent=function(P){return arguments.length?(w=P==null?(y=b=x=v=null,$_):s5(y=+P[0][0],b=+P[0][1],x=+P[1][0],v=+P[1][1]),L()):y==null?null:[[y,b],[x,v]]},k.scale=function(P){return arguments.length?(n=+P,D()):n},k.translate=function(P){return arguments.length?(o=+P[0],i=+P[1],D()):[o,i]},k.center=function(P){return arguments.length?(s=P[0]%360*Xr,a=P[1]%360*Xr,D()):[s*Ho,a*Ho]},k.rotate=function(P){return arguments.length?(l=P[0]%360*Xr,u=P[1]%360*Xr,c=P.length>2?P[2]%360*Xr:0,D()):[l*Ho,u*Ho,c*Ho]},k.angle=function(P){return arguments.length?(d=P%360*Xr,D()):d*Ho},k.reflectX=function(P){return arguments.length?(p=P?-1:1,D()):p<0},k.reflectY=function(P){return arguments.length?(h=P?-1:1,D()):h<0},k.precision=function(P){return arguments.length?(S=Eye(C,_=P*P),L()):Yo(_)},k.fitExtent=function(P,R){return MT(k,P,R)},k.fitSize=function(P,R){return _M(k,P,R)},k.fitWidth=function(P,R){return SM(k,P,R)},k.fitHeight=function(P,R){return CM(k,P,R)};function D(){var P=Sot(n,0,0,p,h,d).apply(null,r(s,a)),R=Sot(n,o-P[0],i-P[1],p,h,d);return f=eye(l,u,c),C=o5(r,R),E=o5(f,C),S=Eye(C,_),L()}function L(){return T=I=null,k}return function(){return r=t.apply(this,arguments),k.invert=r.invert&&F,D()}}var nar,Vp=N(()=>{"use strict";Xnt();Znt();lye();Q0e();uX();An();tye();bX();xX();_ot();nar=NT({point:function(t,r){this.stream.point(t*Xr,r*Xr)}})});function EM(t){var r=0,n=Qr/3,o=vX(t),i=o(r,n);return i.parallels=function(s){return arguments.length?o(r=s[0]*Xr,n=s[1]*Xr):[r*Ho,n*Ho]},i}var wX=N(()=>{"use strict";An();Vp()});function Cot(t){var r=Qt(t);function n(o,i){return[o*r,Xt(i)/r]}return n.invert=function(o,i){return[o/r,Ri(i*r)]},n}var Eot=N(()=>{"use strict";An()});function Tot(t,r){var n=Xt(t),o=(n+Xt(r))/2;if(Kr(o)<Jt)return Cot(t);var i=1+n*(2*o-n),s=Yo(i)/o;function a(l,u){var c=Yo(i-2*o*Xt(u))/o;return[c*Xt(l*=o),s-c*Qt(l)]}return a.invert=function(l,u){var c=s-u,f=_s(l,Kr(c))*Cu(c);return c*o<0&&(f-=Qr*Cu(l)*Cu(c)),[f/o,Ri((i-(l*l+c*c)*o*o)/(2*o))]},a}function U_(){return EM(Tot).scale(155.424).center([0,33.6442])}var _X=N(()=>{"use strict";An();wX();Eot()});function d5(){return U_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var Tye=N(()=>{"use strict";_X()});function sar(t){var r=t.length;return{point:function(n,o){for(var i=-1;++i<r;)t[i].point(n,o)},sphere:function(){for(var n=-1;++n<r;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<r;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<r;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<r;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<r;)t[n].polygonEnd()}}}function Aye(){var t,r,n=d5(),o,i=U_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=U_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,c={point:function(p,h){u=[p,h]}};function f(p){var h=p[0],m=p[1];return u=null,o.point(h,m),u||(s.point(h,m),u)||(l.point(h,m),u)}f.invert=function(p){var h=n.scale(),m=n.translate(),g=(p[0]-m[0])/h,y=(p[1]-m[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(p)},f.stream=function(p){return t&&r===p?t:t=sar([n.stream(r=p),i.stream(p),a.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),a.precision(p),d()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),a.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var h=n.scale(),m=+p[0],g=+p[1];return o=n.translate(p).clipExtent([[m-.455*h,g-.238*h],[m+.455*h,g+.238*h]]).stream(c),s=i.translate([m-.307*h,g+.201*h]).clipExtent([[m-.425*h+Jt,g+.12*h+Jt],[m-.214*h-Jt,g+.234*h-Jt]]).stream(c),l=a.translate([m-.205*h,g+.212*h]).clipExtent([[m-.214*h+Jt,g+.166*h+Jt],[m-.115*h-Jt,g+.234*h-Jt]]).stream(c),d()},f.fitExtent=function(p,h){return MT(f,p,h)},f.fitSize=function(p,h){return _M(f,p,h)},f.fitWidth=function(p,h){return SM(f,p,h)},f.fitHeight=function(p,h){return CM(f,p,h)};function d(){return t=r=null,f}return f.scale(1070)}var Aot=N(()=>{"use strict";An();Tye();_X();xX()});function SX(t){return function(r,n){var o=Qt(r),i=Qt(n),s=t(o*i);return s===1/0?[2,0]:[s*i*Xt(r),s*Xt(n)]}}function Ay(t){return function(r,n){var o=Yo(r*r+n*n),i=t(o),s=Xt(i),a=Qt(i);return[_s(r*s,o*a),Ri(o&&n*s/o)]}}var TM=N(()=>{"use strict";An()});function Iye(){return Cs(kye).scale(124.75).clipAngle(180-.001)}var kye,kot=N(()=>{"use strict";An();TM();Vp();kye=SX(function(t){return Yo(2/(1+t))});kye.invert=Ay(function(t){return 2*Ri(t/2)})});function Nye(){return Cs(Dye).scale(79.4188).clipAngle(180-.001)}var Dye,Iot=N(()=>{"use strict";An();TM();Vp();Dye=SX(function(t){return(t=qY(t))&&t/Xt(t)});Dye.invert=Ay(function(t){return t})});function AM(t,r){return[t,TT(hM((qo+r)/2))]}function Mye(){return Fye(AM).scale(961/Bs)}function Fye(t){var r=Cs(t),n=r.center,o=r.scale,i=r.translate,s=r.clipExtent,a=null,l,u,c;r.scale=function(d){return arguments.length?(o(d),f()):o()},r.translate=function(d){return arguments.length?(i(d),f()):i()},r.center=function(d){return arguments.length?(n(d),f()):n()},r.clipExtent=function(d){return arguments.length?(d==null?a=l=u=c=null:(a=+d[0][0],l=+d[0][1],u=+d[1][0],c=+d[1][1]),f()):a==null?null:[[a,l],[u,c]]};function f(){var d=Qr*o(),p=r(Unt(r.rotate()).invert([0,0]));return s(a==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:t===AM?[[Math.max(p[0]-d,a),l],[Math.min(p[0]+d,u),c]]:[[a,Math.max(p[1]-d,l)],[u,Math.min(p[1]+d,c)]])}return f()}var CX=N(()=>{"use strict";An();tye();Vp();AM.invert=function(t,r){return[t,2*zp(VY(r))-qo]}});function EX(t){return hM((qo+t)/2)}function Dot(t,r){var n=Qt(t),o=t===r?Xt(t):TT(n/Qt(r))/TT(EX(r)/EX(t)),i=n*WY(EX(t),o)/o;if(!o)return AM;function s(a,l){i>0?l<-qo+Jt&&(l=-qo+Jt):l>qo-Jt&&(l=qo-Jt);var u=i/WY(EX(l),o);return[u*Xt(o*a),i-u*Qt(o*a)]}return s.invert=function(a,l){var u=i-l,c=Cu(o)*Yo(a*a+u*u),f=_s(a,Kr(u))*Cu(u);return u*o<0&&(f-=Qr*Cu(a)*Cu(u)),[f/o,2*zp(WY(i/c,1/o))-qo]},s}function Oye(){return EM(Dot).scale(109.5).parallels([30,30])}var Not=N(()=>{"use strict";An();wX();CX()});function kM(t,r){return[t,r]}function Rye(){return Cs(kM).scale(152.63)}var Pye=N(()=>{"use strict";Vp();kM.invert=kM});function Mot(t,r){var n=Qt(t),o=t===r?Xt(t):(n-Qt(r))/(r-t),i=n/o+t;if(Kr(o)<Jt)return kM;function s(a,l){var u=i-l,c=o*a;return[u*Xt(c),i-u*Qt(c)]}return s.invert=function(a,l){var u=i-l,c=_s(a,Kr(u))*Cu(u);return u*o<0&&(c-=Qr*Cu(a)*Cu(u)),[c/o,i-Cu(o)*Yo(a*a+u*u)]},s}function Lye(){return EM(Mot).scale(131.154).center([0,13.9389])}var Fot=N(()=>{"use strict";An();wX();Pye()});function jye(t,r){var n=Ri(TX*Xt(r)),o=n*n,i=o*o*o;return[t*Qt(n)/(TX*(p5+3*h5*o+i*(7*m5+9*g5*o))),n*(p5+h5*o+i*(m5+g5*o))]}function Bye(){return Cs(jye).scale(177.158)}var p5,h5,m5,g5,TX,aar,Oot=N(()=>{"use strict";Vp();An();p5=1.340264,h5=-.081106,m5=893e-6,g5=.003796,TX=Yo(3)/2,aar=12;jye.invert=function(t,r){for(var n=r,o=n*n,i=o*o*o,s=0,a,l,u;s<aar&&(l=n*(p5+h5*o+i*(m5+g5*o))-r,u=p5+3*h5*o+i*(7*m5+9*g5*o),n-=a=l/u,o=n*n,i=o*o*o,!(Kr(a)<ET));++s);return[TX*t*(p5+3*h5*o+i*(7*m5+9*g5*o))/Qt(n),Ri(Xt(n)/TX)]}});function $ye(t,r){var n=Qt(r),o=Qt(t)*n;return[n*Xt(t)/o,Xt(r)/o]}function zye(){return Cs($ye).scale(144.049).clipAngle(60)}var Rot=N(()=>{"use strict";An();TM();Vp();$ye.invert=Ay(zp)});function Uye(){var t=1,r=0,n=0,o=1,i=1,s=0,a,l,u=null,c,f,d,p=1,h=1,m=NT({point:function(w,_){var S=v([w,_]);this.stream.point(S[0],S[1])}}),g=$_,y,b;function x(){return p=t*o,h=t*i,y=b=null,v}function v(w){var _=w[0]*p,S=w[1]*h;if(s){var C=S*a-_*l;_=_*a+S*l,S=C}return[_+r,S+n]}return v.invert=function(w){var _=w[0]-r,S=w[1]-n;if(s){var C=S*a+_*l;_=_*a-S*l,S=C}return[_/p,S/h]},v.stream=function(w){return y&&b===w?y:y=m(g(b=w))},v.postclip=function(w){return arguments.length?(g=w,u=c=f=d=null,x()):g},v.clipExtent=function(w){return arguments.length?(g=w==null?(u=c=f=d=null,$_):s5(u=+w[0][0],c=+w[0][1],f=+w[1][0],d=+w[1][1]),x()):u==null?null:[[u,c],[f,d]]},v.scale=function(w){return arguments.length?(t=+w,x()):t},v.translate=function(w){return arguments.length?(r=+w[0],n=+w[1],x()):[r,n]},v.angle=function(w){return arguments.length?(s=w%360*Xr,l=Xt(s),a=Qt(s),x()):s*Ho},v.reflectX=function(w){return arguments.length?(o=w?-1:1,x()):o<0},v.reflectY=function(w){return arguments.length?(i=w?-1:1,x()):i<0},v.fitExtent=function(w,_){return MT(v,w,_)},v.fitSize=function(w,_){return _M(v,w,_)},v.fitWidth=function(w,_){return SM(v,w,_)},v.fitHeight=function(w,_){return CM(v,w,_)},v}var Pot=N(()=>{"use strict";lye();uX();bX();xX();An()});function Vye(t,r){var n=r*r,o=n*n;return[t*(.8707-.131979*n+o*(-.013791+o*(.003971*n-.001529*o))),r*(1.007226+n*(.015085+o*(-.044475+.028874*n-.005916*o)))]}function Gye(){return Cs(Vye).scale(175.295)}var Lot=N(()=>{"use strict";Vp();An();Vye.invert=function(t,r){var n=r,o=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-r)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Kr(i)>Jt&&--o>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]}});function Wye(t,r){return[Qt(r)*Xt(t),Xt(r)]}function qye(){return Cs(Wye).scale(249.5).clipAngle(90+Jt)}var jot=N(()=>{"use strict";An();TM();Vp();Wye.invert=Ay(Ri)});function Hye(t,r){var n=Qt(r),o=1+Qt(t)*n;return[n*Xt(t)/o,Xt(r)/o]}function Yye(){return Cs(Hye).scale(250).clipAngle(142)}var Bot=N(()=>{"use strict";An();TM();Vp();Hye.invert=Ay(function(t){return 2*zp(t)})});function Xye(t,r){return[TT(hM((qo+r)/2)),-t]}function Kye(){var t=Fye(Xye),r=t.center,n=t.rotate;return t.center=function(o){return arguments.length?r([-o[1],o[0]]):(o=r(),[o[1],-o[0]])},t.rotate=function(o){return arguments.length?n([o[0],o[1],o.length>2?o[2]+90:90]):(o=n(),[o[0],o[1],o[2]-90])},n([0,0,90]).scale(159.155)}var $ot=N(()=>{"use strict";An();CX();Xye.invert=function(t,r){return[-r,2*zp(VY(t))-qo]}});var y5=N(()=>{"use strict";G0e();Mnt();jnt();rot();vot();Tye();Aot();kot();Iot();Not();_X();Fot();Oot();Pye();Rot();Pot();Vp();CX();Lot();jot();Bot();$ot()});function Qye(t){return t>1?AX:t<-1?-AX:Math.asin(t)}function Vot(t){return t>0?Math.sqrt(t):0}var zot,kX,b5,Uot,V_,AX,E5o,Zye,T5o,A5o,k5o,I5o,Got=N(()=>{"use strict";zot=Math.abs,kX=Math.cos,b5=Math.sin,Uot=1e-6,V_=Math.PI,AX=V_/2,E5o=V_/4,Zye=Vot(2),T5o=Vot(V_),A5o=V_*2,k5o=180/V_,I5o=V_/180});function lar(t,r){var n=t*b5(r),o=30,i;do r-=i=(r+b5(r)-n)/(1+kX(r));while(zot(i)>Uot&&--o>0);return r/2}function uar(t,r,n){function o(i,s){return[t*i*kX(s=lar(n,s)),r*b5(s)]}return o.invert=function(i,s){return s=Qye(s/r),[i/(t*kX(s)),Qye((2*s+b5(2*s))/n)]},o}function Jye(){return Cs(Wot).scale(169.529)}var Wot,qot=N(()=>{"use strict";y5();Got();Wot=uar(Zye/AX,Zye,V_)});var Hot=N(()=>{"use strict";qot()});function far(t,r){return function n(){let o=r();return o.type=t,o.path=yX().projection(o),o.copy=o.copy||function(){let i=n();return DX.forEach(s=>{o[s]&&i[s](o[s]())}),i.path.pointRadius(o.path.pointRadius()),i},o}}function x5(t,r){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(IX[t]=far(t,r),this):IX[t]||null}function ebe(t){return t&&t.path||car}var car,DX,IX,tbe=N(()=>{"use strict";y5();Hot();car=yX(),DX=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];IX={albers:d5,albersusa:Aye,azimuthalequalarea:Iye,azimuthalequidistant:Nye,conicconformal:Oye,conicequalarea:U_,conicequidistant:Lye,equalEarth:Bye,equirectangular:Rye,gnomonic:zye,identity:Uye,mercator:Mye,mollweide:Jye,naturalEarth1:Gye,orthographic:qye,stereographic:Yye,transversemercator:Kye};for(let t in IX)x5(t,IX[t])});var hbe={};fn(hbe,{contour:()=>sbe,geojson:()=>lbe,geopath:()=>ube,geopoint:()=>cbe,geoshape:()=>fbe,graticule:()=>dbe,heatmap:()=>pbe,isocontour:()=>obe,kde2d:()=>ibe,projection:()=>rit});function dar(){}function Kot(){var t=1,r=1,n=l;function o(u,c){return c.map(f=>i(u,f))}function i(u,c){var f=[],d=[];return s(u,c,p=>{n(p,u,c),par(p)>0?f.push([p]):d.push(p)}),d.forEach(p=>{for(var h=0,m=f.length,g;h<m;++h)if(har((g=f[h])[0],p)!==-1){g.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:f}}function s(u,c,f){var d=new Array,p=new Array,h,m,g,y,b,x;for(h=m=-1,y=u[0]>=c,Cv[y<<1].forEach(v);++h<t-1;)g=y,y=u[h+1]>=c,Cv[g|y<<1].forEach(v);for(Cv[y<<0].forEach(v);++m<r-1;){for(h=-1,y=u[m*t+t]>=c,b=u[m*t]>=c,Cv[y<<1|b<<2].forEach(v);++h<t-1;)g=y,y=u[m*t+t+h+1]>=c,x=b,b=u[m*t+h+1]>=c,Cv[g|y<<1|b<<2|x<<3].forEach(v);Cv[y|b<<3].forEach(v)}for(h=-1,b=u[m*t]>=c,Cv[b<<2].forEach(v);++h<t-1;)x=b,b=u[m*t+h+1]>=c,Cv[b<<2|x<<3].forEach(v);Cv[b<<3].forEach(v);function v(w){var _=[w[0][0]+h,w[0][1]+m],S=[w[1][0]+h,w[1][1]+m],C=a(_),E=a(S),T,I;(T=p[C])?(I=d[E])?(delete p[T.end],delete d[I.start],T===I?(T.ring.push(S),f(T.ring)):d[T.start]=p[I.end]={start:T.start,end:I.end,ring:T.ring.concat(I.ring)}):(delete p[T.end],T.ring.push(S),p[T.end=E]=T):(T=d[E])?(I=p[C])?(delete d[T.start],delete p[I.end],T===I?(T.ring.push(S),f(T.ring)):d[I.start]=p[T.end]={start:I.start,end:T.end,ring:I.ring.concat(T.ring)}):(delete d[T.start],T.ring.unshift(_),d[T.start=C]=T):d[C]=p[E]={start:C,end:E,ring:[_,S]}}}function a(u){return u[0]*2+u[1]*(t+1)*4}function l(u,c,f){u.forEach(d=>{var p=d[0],h=d[1],m=p|0,g=h|0,y,b=c[g*t+m];p>0&&p<t&&m===p&&(y=c[g*t+m-1],d[0]=p+(f-y)/(b-y)-.5),h>0&&h<r&&g===h&&(y=c[(g-1)*t+m],d[1]=h+(f-y)/(b-y)-.5)})}return o.contour=i,o.size=function(u){if(!arguments.length)return[t,r];var c=Math.floor(u[0]),f=Math.floor(u[1]);return c>=0&&f>=0||pt("invalid size"),t=c,r=f,o},o.smooth=function(u){return arguments.length?(n=u?l:dar,o):n===l},o}function par(t){for(var r=0,n=t.length,o=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++r<n;)o+=t[r-1][1]*t[r][0]-t[r-1][0]*t[r][1];return o}function har(t,r){for(var n=-1,o=r.length,i;++n<o;)if(i=mar(t,r[n]))return i;return 0}function mar(t,r){for(var n=r[0],o=r[1],i=-1,s=0,a=t.length,l=a-1;s<a;l=s++){var u=t[s],c=u[0],f=u[1],d=t[l],p=d[0],h=d[1];if(gar(u,d,r))return 0;f>o!=h>o&&n<(p-c)*(o-f)/(h-f)+c&&(i=-i)}return i}function gar(t,r,n){var o;return yar(t,r,n)&&bar(t[o=+(t[0]===r[0])],n[o],r[o])}function yar(t,r,n){return(r[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(r[1]-t[1])}function bar(t,r,n){return t<=r&&r<=n||n<=r&&r<=t}function Zot(t,r,n){return function(o){var i=Qh(o),s=n?Math.min(i[0],0):i[0],a=i[1],l=a-s,u=r?fc(s,a,t):l/(t+1);return sa(s+u,a,u)}}function obe(t){et.call(this,null,t)}function xar(t,r,n){let o=Zot(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?o:o(t.map(i=>kp(r(i).values)))}function war(t,r,n,o){let i=o.scale||r.scale,s=o.translate||r.translate;if(Dn(i)&&(i=i(n,o)),Dn(s)&&(s=s(n,o)),(i===1||i==null)&&!s)return;let a=(q0(i)?i:i[0])||1,l=(q0(i)?i:i[1])||1,u=s&&s[0]||0,c=s&&s[1]||0;t.forEach(Qot(r,a,l,u,c))}function Qot(t,r,n,o,i){let s=t.x1||0,a=t.y1||0,l=r*n<0;function u(d){d.forEach(c)}function c(d){l&&d.reverse(),d.forEach(f)}function f(d){d[0]=(d[0]-s)*r+o,d[1]=(d[1]-a)*n+i}return function(d){return d.coordinates.forEach(u),d}}function Yot(t,r,n){let o=t>=0?t:qW(r,n);return Math.round((Math.sqrt(4*o*o+1)-1)/2)}function rbe(t){return Dn(t)?t:Qa(+t)}function Jot(){var t=u=>u[0],r=u=>u[1],n=G0,o=[-1,-1],i=960,s=500,a=2;function l(u,c){let f=Yot(o[0],u,t)>>a,d=Yot(o[1],u,r)>>a,p=f?f+2:0,h=d?d+2:0,m=2*p+(i>>a),g=2*h+(s>>a),y=new Float32Array(m*g),b=new Float32Array(m*g),x=y;u.forEach(w=>{let _=p+(+t(w)>>a),S=h+(+r(w)>>a);_>=0&&_<m&&S>=0&&S<g&&(y[_+S*m]+=+n(w))}),f>0&&d>0?(IM(m,g,y,b,f),DM(m,g,b,y,d),IM(m,g,y,b,f),DM(m,g,b,y,d),IM(m,g,y,b,f),DM(m,g,b,y,d)):f>0?(IM(m,g,y,b,f),IM(m,g,b,y,f),IM(m,g,y,b,f),x=b):d>0&&(DM(m,g,y,b,d),DM(m,g,b,y,d),DM(m,g,y,b,d),x=b);let v=c?Math.pow(2,-2*a):1/cN(x);for(let w=0,_=m*g;w<_;++w)x[w]*=v;return{values:x,scale:1<<a,width:m,height:g,x1:p,y1:h,x2:p+(i>>a),y2:h+(s>>a)}}return l.x=function(u){return arguments.length?(t=rbe(u),l):t},l.y=function(u){return arguments.length?(r=rbe(u),l):r},l.weight=function(u){return arguments.length?(n=rbe(u),l):n},l.size=function(u){if(!arguments.length)return[i,s];var c=+u[0],f=+u[1];return c>=0&&f>=0||pt("invalid size"),i=c,s=f,l},l.cellSize=function(u){return arguments.length?((u=+u)>=1||pt("invalid cell size"),a=Math.floor(Math.log(u)/Math.LN2),l):1<<a},l.bandwidth=function(u){return arguments.length?(u=Br(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&pt("invalid bandwidth"),o=u,l):o},l}function IM(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<r;++a)for(let l=0,u=0;l<t+i;++l)l<t&&(u+=n[l+a*t]),l>=i&&(l>=s&&(u-=n[l-s+a*t]),o[l-i+a*t]=u/Math.min(l+1,t-1+s-l,s))}function DM(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<t;++a)for(let l=0,u=0;l<r+i;++l)l<r&&(u+=n[a+l*t]),l>=i&&(l>=s&&(u-=n[a+(l-s)*t]),o[a+(l-i)*t]=u/Math.min(l+1,r-1+s-l,s))}function ibe(t){et.call(this,null,t)}function eit(t,r){return _ar.forEach(n=>r[n]!=null?t[n](r[n]):0),t}function Sar(t,r){var n=[],o=f=>f(l),i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function sbe(t){et.call(this,null,t)}function lbe(t){et.call(this,null,t)}function ube(t){et.call(this,null,t)}function Ear(t,r){let n=t.pointRadius();return t.context(null),r!=null&&t.pointRadius(r),n}function cbe(t){et.call(this,null,t)}function fbe(t){et.call(this,null,t)}function Tar(t,r,n){let o=n==null?i=>t(r(i)):i=>{var s=t.pointRadius(),a=t.pointRadius(n)(r(i));return t.pointRadius(s),a};return o.context=i=>(t.context(i),o),o}function dbe(t){et.call(this,[],t),this.generator=lX()}function pbe(t){et.call(this,null,t)}function Aar(t,r){let n;return Dn(t)?(n=o=>ua(t(o,r)),n.dep=tit(t)):n=Qa(ua(t||"#888")),n}function kar(t,r){let n;return Dn(t)?(n=o=>t(o,r),n.dep=tit(t)):t?n=Qa(t):(n=o=>o.$value/o.$max||0,n.dep=!0),n}function tit(t){if(!Dn(t))return!1;let r=gu(Aa(t));return r.$x||r.$y||r.$value||r.$max}function Iar(t,r,n,o){let i=t.width,s=t.height,a=t.x1||0,l=t.y1||0,u=t.x2||i,c=t.y2||s,f=t.values,d=f?y=>f[y]:Kh,p=lf(u-a,c-l),h=p.getContext("2d"),m=h.getImageData(0,0,u-a,c-l),g=m.data;for(let y=l,b=0;y<c;++y){r.$y=y-l;for(let x=a,v=y*i;x<u;++x,b+=4){r.$x=x-a,r.$value=d(x+v);let w=n(r);g[b+0]=w.r,g[b+1]=w.g,g[b+2]=w.b,g[b+3]=~~(255*o(r))}}return h.putImageData(m,0,0),p}function rit(t){et.call(this,null,t),this.modified(!0)}function Dar(t,r){let n=Mar(r.fit);r.extent?t.fitExtent(r.extent,n):r.size&&t.fitSize(r.size,n)}function Nar(t){let r=x5((t||"mercator").toLowerCase());return r||pt("Unrecognized projection type: "+t),r()}function Xot(t,r,n){Dn(t[r])&&t[r](n)}function Mar(t){return t=Br(t),t.length===1?t[0]:{type:abe,features:t.reduce((r,n)=>r.concat(Far(n)),[])}}function Far(t){return t.type===abe?t.features:Br(t).filter(r=>r!=null).map(r=>r.type===nbe?r:{type:nbe,geometry:r})}var Cv,_ar,nbe,abe,Car,nit=N(()=>{"use strict";el();Ls();Wo();pN();tbe();y5();js();SN();Cv=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];obe.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Dt(obe,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=t.field||uc,s=Kot().smooth(t.smooth!==!1),a=t.thresholds||xar(o,i,t),l=t.as===null?null:t.as||"contour",u=[];return o.forEach(c=>{let f=i(c),d=s.size([f.width,f.height])(f.values,Hr(a)?a:a(f.values));war(d,f,c,t),d.forEach(p=>{u.push(IE(c,Nn(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});ibe.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};_ar=["x","y","weight","size","cellSize","bandwidth"];Dt(ibe,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=Sar(o,t.groupby),s=(t.groupby||[]).map(Oi),a=eit(Jot(),t),l=t.as||"grid",u=[];function c(f,d){for(let p=0;p<s.length;++p)f[s[p]]=d[p];return f}return u=i.map(f=>Nn(c({[l]:a(f,t.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});sbe.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Dt(sbe,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=Kot().smooth(t.smooth!==!1),i=t.values,s=t.thresholds||Zot(t.count||10,t.nice,!!i),a=t.size,l,u;return i||(i=r.materialize(r.SOURCE).source,l=eit(Jot(),t)(i,!0),u=Qot(l,l.scale||1,l.scale||1,0,0),a=[l.width,l.height],i=l.values),s=Hr(s)?s:s(i),i=o.size(a)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Nn),n}});nbe="Feature",abe="FeatureCollection",Car="MultiPoint";lbe.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Dt(lbe,et,{transform(t,r){var n=this._features,o=this._points,i=t.fields,s=i&&i[0],a=i&&i[1],l=t.geojson||!i&&uc,u=r.ADD,c;c=t.modified()||r.changed(r.REM)||r.modified(Aa(l))||s&&r.modified(Aa(s))||a&&r.modified(Aa(a)),(!this.value||c)&&(u=r.SOURCE,this._features=n=[],this._points=o=[]),l&&r.visit(u,f=>n.push(l(f))),s&&a&&(r.visit(u,f=>{var d=s(f),p=a(f);d!=null&&p!=null&&(d=+d)===d&&(p=+p)===p&&o.push([d,p])}),n=n.concat({type:nbe,geometry:{type:Car,coordinates:o}})),this.value={type:abe,features:n}}});ube.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Dt(ube,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.field||uc,s=t.as||"path",a=n.SOURCE;!o||t.modified()?(this.value=o=ebe(t.projection),n.materialize().reflow()):a=i===uc||r.modified(i.fields)?n.ADD_MOD:n.ADD;let l=Ear(o,t.pointRadius);return n.visit(a,u=>u[s]=o(i(u))),o.pointRadius(l),n.modifies(s)}});cbe.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Dt(cbe,et,{transform(t,r){var n=t.projection,o=t.fields[0],i=t.fields[1],s=t.as||["x","y"],a=s[0],l=s[1],u;function c(f){let d=n([o(f),i(f)]);d?(f[a]=d[0],f[l]=d[1]):(f[a]=void 0,f[l]=void 0)}return t.modified()?r=r.materialize().reflow(!0).visit(r.SOURCE,c):(u=r.modified(o.fields)||r.modified(i.fields),r.visit(u?r.ADD_MOD:r.ADD,c)),r.modifies(s)}});fbe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Dt(fbe,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.as||"shape",s=n.ADD;return(!o||t.modified())&&(this.value=o=Tar(ebe(t.projection),t.field||Xh("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=o),n.modifies(i)}});dbe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Dt(dbe,et,{transform(t,r){var n=this.value,o=this.generator,i;if(!n.length||t.modified())for(let s in t)Dn(o[s])&&o[s](t[s]);return i=o(),n.length?r.mod.push(PW(n[0],i)):r.add.push(Nn(i)),n[0]=i,r}});pbe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Dt(pbe,et,{transform(t,r){if(!r.changed()&&!t.modified())return r.StopPropagation;var n=r.materialize(r.SOURCE).source,o=t.resolve==="shared",i=t.field||uc,s=kar(t.opacity,t),a=Aar(t.color,t),l=t.as||"image",u={$x:0,$y:0,$value:0,$max:o?kp(n.map(c=>kp(i(c).values))):0};return n.forEach(c=>{let f=i(c),d=an({},c,u);o||(d.$max=kp(f.values||[])),c[l]=Iar(f,d,a.dep?a:Qa(a(d)),s.dep?s:Qa(s(d)))}),r.reflow(!0).modifies(l)}});Dt(rit,et,{transform(t,r){let n=this.value;return!n||t.modified("type")?(this.value=n=Nar(t.type),DX.forEach(o=>{t[o]!=null&&Xot(n,o,t[o])})):DX.forEach(o=>{t.modified(o)&&Xot(n,o,t[o])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&Dar(n,t),r.fork(r.NO_SOURCE|r.NO_FIELDS)}})});function mbe(t,r){var n,o=1;t==null&&(t=0),r==null&&(r=0);function i(){var s,a=n.length,l,u=0,c=0;for(s=0;s<a;++s)l=n[s],u+=l.x,c+=l.y;for(u=(u/a-t)*o,c=(c/a-r)*o,s=0;s<a;++s)l=n[s],l.x-=u,l.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(r=+s,i):r},i.strength=function(s){return arguments.length?(o=+s,i):o},i}var oit=N(()=>{"use strict"});function iit(t){let r=+this._x.call(null,t),n=+this._y.call(null,t);return sit(this.cover(r,n),r,n,t)}function sit(t,r,n,o){if(isNaN(r)||isNaN(n))return t;var i,s=t._root,a={data:o},l=t._x0,u=t._y0,c=t._x1,f=t._y1,d,p,h,m,g,y,b,x;if(!s)return t._root=a,t;for(;s.length;)if((g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p,i=s,!(s=s[b=y<<1|g]))return i[b]=a,t;if(h=+t._x.call(null,s.data),m=+t._y.call(null,s.data),r===h&&n===m)return a.next=s,i?i[b]=a:t._root=a,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p;while((b=y<<1|g)===(x=(m>=p)<<1|h>=d));return i[x]=s,i[b]=a,t}function ait(t){var r,n,o=t.length,i,s,a=new Array(o),l=new Array(o),u=1/0,c=1/0,f=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,r=t[n]))||isNaN(s=+this._y.call(null,r))||(a[n]=i,l[n]=s,i<u&&(u=i),i>f&&(f=i),s<c&&(c=s),s>d&&(d=s));if(u>f||c>d)return this;for(this.cover(u,c).cover(f,d),n=0;n<o;++n)sit(this,a[n],l[n],t[n]);return this}var lit=N(()=>{"use strict"});function uit(t,r){if(isNaN(t=+t)||isNaN(r=+r))return this;var n=this._x0,o=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(o=Math.floor(r))+1;else{for(var a=i-n||1,l=this._root,u,c;n>t||t>=i||o>r||r>=s;)switch(c=(r<o)<<1|t<n,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:i=n+a,s=o+a;break;case 1:n=i-a,s=o+a;break;case 2:i=n+a,o=s-a;break;case 3:n=i-a,o=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=o,this._x1=i,this._y1=s,this}var cit=N(()=>{"use strict"});function fit(){var t=[];return this.visit(function(r){if(!r.length)do t.push(r.data);while(r=r.next)}),t}var dit=N(()=>{"use strict"});function pit(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}var hit=N(()=>{"use strict"});function al(t,r,n,o,i){this.node=t,this.x0=r,this.y0=n,this.x1=o,this.y1=i}var NX=N(()=>{"use strict"});function mit(t,r,n){var o,i=this._x0,s=this._y0,a,l,u,c,f=this._x1,d=this._y1,p=[],h=this._root,m,g;for(h&&p.push(new al(h,i,s,f,d)),n==null?n=1/0:(i=t-n,s=r-n,f=t+n,d=r+n,n*=n);m=p.pop();)if(!(!(h=m.node)||(a=m.x0)>f||(l=m.y0)>d||(u=m.x1)<i||(c=m.y1)<s))if(h.length){var y=(a+u)/2,b=(l+c)/2;p.push(new al(h[3],y,b,u,c),new al(h[2],a,b,y,c),new al(h[1],y,l,u,b),new al(h[0],a,l,y,b)),(g=(r>=b)<<1|t>=y)&&(m=p[p.length-1],p[p.length-1]=p[p.length-1-g],p[p.length-1-g]=m)}else{var x=t-+this._x.call(null,h.data),v=r-+this._y.call(null,h.data),w=x*x+v*v;if(w<n){var _=Math.sqrt(n=w);i=t-_,s=r-_,f=t+_,d=r+_,o=h.data}}return o}var git=N(()=>{"use strict";NX()});function yit(t){if(isNaN(f=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var r,n=this._root,o,i,s,a=this._x0,l=this._y0,u=this._x1,c=this._y1,f,d,p,h,m,g,y,b;if(!n)return this;if(n.length)for(;;){if((m=f>=(p=(a+u)/2))?a=p:u=p,(g=d>=(h=(l+c)/2))?l=h:c=h,r=n,!(n=n[y=g<<1|m]))return this;if(!n.length)break;(r[y+1&3]||r[y+2&3]||r[y+3&3])&&(o=r,b=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):r?(s?r[y]=s:delete r[y],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(o?o[b]=n:this._root=n),this):(this._root=s,this)}function bit(t){for(var r=0,n=t.length;r<n;++r)this.remove(t[r]);return this}var xit=N(()=>{"use strict"});function vit(){return this._root}var wit=N(()=>{"use strict"});function _it(){var t=0;return this.visit(function(r){if(!r.length)do++t;while(r=r.next)}),t}var Sit=N(()=>{"use strict"});function Cit(t){var r=[],n,o=this._root,i,s,a,l,u;for(o&&r.push(new al(o,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!t(o=n.node,s=n.x0,a=n.y0,l=n.x1,u=n.y1)&&o.length){var c=(s+l)/2,f=(a+u)/2;(i=o[3])&&r.push(new al(i,c,f,l,u)),(i=o[2])&&r.push(new al(i,s,f,c,u)),(i=o[1])&&r.push(new al(i,c,a,l,f)),(i=o[0])&&r.push(new al(i,s,a,c,f))}return this}var Eit=N(()=>{"use strict";NX()});function Tit(t){var r=[],n=[],o;for(this._root&&r.push(new al(this._root,this._x0,this._y0,this._x1,this._y1));o=r.pop();){var i=o.node;if(i.length){var s,a=o.x0,l=o.y0,u=o.x1,c=o.y1,f=(a+u)/2,d=(l+c)/2;(s=i[0])&&r.push(new al(s,a,l,f,d)),(s=i[1])&&r.push(new al(s,f,l,u,d)),(s=i[2])&&r.push(new al(s,a,d,f,c)),(s=i[3])&&r.push(new al(s,f,d,u,c))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}var Ait=N(()=>{"use strict";NX()});function kit(t){return t[0]}function Iit(t){return arguments.length?(this._x=t,this):this._x}var Dit=N(()=>{"use strict"});function Nit(t){return t[1]}function Mit(t){return arguments.length?(this._y=t,this):this._y}var Fit=N(()=>{"use strict"});function FT(t,r,n){var o=new gbe(r??kit,n??Nit,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function gbe(t,r,n,o,i,s){this._x=t,this._y=r,this._x0=n,this._y0=o,this._x1=i,this._y1=s,this._root=void 0}function Oit(t){for(var r={data:t.data},n=r;t=t.next;)n=n.next={data:t.data};return r}var Ec,Rit=N(()=>{"use strict";lit();cit();dit();hit();git();xit();wit();Sit();Eit();Ait();Dit();Fit();Ec=FT.prototype=gbe.prototype;Ec.copy=function(){var t=new gbe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,o;if(!r)return t;if(!r.length)return t._root=Oit(r),t;for(n=[{source:r,target:t._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(o=r.source[i])&&(o.length?n.push({source:o,target:r.target[i]=new Array(4)}):r.target[i]=Oit(o));return t};Ec.add=iit;Ec.addAll=ait;Ec.cover=uit;Ec.data=fit;Ec.extent=pit;Ec.find=mit;Ec.remove=yit;Ec.removeAll=bit;Ec.root=vit;Ec.size=_it;Ec.visit=Cit;Ec.visitAfter=Tit;Ec.x=Iit;Ec.y=Mit});var ybe=N(()=>{"use strict";Rit()});function da(t){return function(){return t}}var NM=N(()=>{"use strict"});function Cm(t){return(t()-.5)*1e-6}var MX=N(()=>{"use strict"});function Oar(t){return t.x+t.vx}function Rar(t){return t.y+t.vy}function bbe(t){var r,n,o,i=1,s=1;typeof t!="function"&&(t=da(t==null?1:+t));function a(){for(var c,f=r.length,d,p,h,m,g,y,b=0;b<s;++b)for(d=FT(r,Oar,Rar).visitAfter(l),c=0;c<f;++c)p=r[c],g=n[p.index],y=g*g,h=p.x+p.vx,m=p.y+p.vy,d.visit(x);function x(v,w,_,S,C){var E=v.data,T=v.r,I=g+T;if(E){if(E.index>p.index){var k=h-E.x-E.vx,F=m-E.y-E.vy,D=k*k+F*F;D<I*I&&(k===0&&(k=Cm(o),D+=k*k),F===0&&(F=Cm(o),D+=F*F),D=(I-(D=Math.sqrt(D)))/D*i,p.vx+=(k*=D)*(I=(T*=T)/(y+T)),p.vy+=(F*=D)*I,E.vx-=k*(I=1-I),E.vy-=F*I)}return}return w>h+I||S<h-I||_>m+I||C<m-I}}function l(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(r){var c,f=r.length,d;for(n=new Array(f),c=0;c<f;++c)d=r[c],n[d.index]=+t(d,c,r)}}return a.initialize=function(c,f){r=c,o=f,u()},a.iterations=function(c){return arguments.length?(s=+c,a):s},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:da(+c),u(),a):t},a}var Pit=N(()=>{"use strict";ybe();NM();MX()});function Par(t){return t.index}function Lit(t,r){var n=t.get(r);if(!n)throw new Error("node not found: "+r);return n}function xbe(t){var r=Par,n=d,o,i=da(30),s,a,l,u,c,f=1;t==null&&(t=[]);function d(y){return 1/Math.min(l[y.source.index],l[y.target.index])}function p(y){for(var b=0,x=t.length;b<f;++b)for(var v=0,w,_,S,C,E,T,I;v<x;++v)w=t[v],_=w.source,S=w.target,C=S.x+S.vx-_.x-_.vx||Cm(c),E=S.y+S.vy-_.y-_.vy||Cm(c),T=Math.sqrt(C*C+E*E),T=(T-s[v])/T*y*o[v],C*=T,E*=T,S.vx-=C*(I=u[v]),S.vy-=E*I,_.vx+=C*(I=1-I),_.vy+=E*I}function h(){if(a){var y,b=a.length,x=t.length,v=new Map(a.map((_,S)=>[r(_,S,a),_])),w;for(y=0,l=new Array(b);y<x;++y)w=t[y],w.index=y,typeof w.source!="object"&&(w.source=Lit(v,w.source)),typeof w.target!="object"&&(w.target=Lit(v,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(y=0,u=new Array(x);y<x;++y)w=t[y],u[y]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);o=new Array(x),m(),s=new Array(x),g()}}function m(){if(a)for(var y=0,b=t.length;y<b;++y)o[y]=+n(t[y],y,t)}function g(){if(a)for(var y=0,b=t.length;y<b;++y)s[y]=+i(t[y],y,t)}return p.initialize=function(y,b){a=y,c=b,h()},p.links=function(y){return arguments.length?(t=y,h(),p):t},p.id=function(y){return arguments.length?(r=y,p):r},p.iterations=function(y){return arguments.length?(f=+y,p):f},p.strength=function(y){return arguments.length?(n=typeof y=="function"?y:da(+y),m(),p):n},p.distance=function(y){return arguments.length?(i=typeof y=="function"?y:da(+y),g(),p):i},p}var jit=N(()=>{"use strict";NM();MX()});function $it(){for(var t=0,r=arguments.length,n={},o;t<r;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new FX(n)}function FX(t){this._=t}function jar(t,r){return t.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}function Bar(t,r){for(var n=0,o=t.length,i;n<o;++n)if((i=t[n]).name===r)return i.value}function Bit(t,r,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===r){t[o]=Lar,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:r,value:n}),t}var Lar,vbe,zit=N(()=>{"use strict";Lar={value:()=>{}};FX.prototype=$it.prototype={constructor:FX,on:function(t,r){var n=this._,o=jar(t+"",n),i,s=-1,a=o.length;if(arguments.length<2){for(;++s<a;)if((i=(t=o[s]).type)&&(i=Bar(n[i],t.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++s<a;)if(i=(t=o[s]).type)n[i]=Bit(n[i],t.name,r);else if(r==null)for(i in n)n[i]=Bit(n[i],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new FX(t)},call:function(t,r){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,s;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],o=0,i=s.length;o<i;++o)s[o].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(r,n)}};vbe=$it});var Uit=N(()=>{"use strict";zit()});function E5(){return OT||(Wit($ar),OT=S5.now()+PX)}function $ar(){OT=0}function C5(){this._call=this._time=this._next=null}function LX(t,r,n){var o=new C5;return o.restart(t,r,n),o}function qit(){E5(),++MM;for(var t=OX,r;t;)(r=OT-t._time)>=0&&t._call.call(null,r),t=t._next;--MM}function Vit(){OT=(RX=S5.now())+PX,MM=w5=0;try{qit()}finally{MM=0,Uar(),OT=0}}function zar(){var t=S5.now(),r=t-RX;r>Git&&(PX-=r,RX=t)}function Uar(){for(var t,r=OX,n,o=1/0;r;)r._call?(o>r._time&&(o=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:OX=n);_5=t,wbe(o)}function wbe(t){if(!MM){w5&&(w5=clearTimeout(w5));var r=t-OT;r>24?(t<1/0&&(w5=setTimeout(Vit,t-S5.now()-PX)),v5&&(v5=clearInterval(v5))):(v5||(RX=S5.now(),v5=setInterval(zar,Git)),MM=1,Wit(Vit))}}var MM,w5,v5,Git,OX,_5,RX,OT,PX,S5,Wit,_be=N(()=>{"use strict";MM=0,w5=0,v5=0,Git=1e3,RX=0,OT=0,PX=0,S5=typeof performance=="object"&&performance.now?performance:Date,Wit=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};C5.prototype=LX.prototype={constructor:C5,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?E5():+n)+(r==null?0:+r),!this._next&&_5!==this&&(_5?_5._next=this:OX=this,_5=this),this._call=t,this._time=n,wbe()},stop:function(){this._call&&(this._call=null,this._time=1/0,wbe())}}});function Sbe(t,r,n){var o=new C5,i=r;return r==null?(o.restart(t,r,n),o):(o._restart=o.restart,o.restart=function(s,a,l){a=+a,l=l==null?E5():+l,o._restart(function u(c){c+=i,o._restart(u,i+=a,l),s(c)},a,l)},o.restart(t,r,n),o)}var Hit=N(()=>{"use strict";_be()});var Cbe=N(()=>{"use strict";_be();Hit()});function Yit(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var Xit=N(()=>{"use strict"});function Kit(t){return t.x}function Zit(t){return t.y}function Ebe(t){var r,n=1,o=.001,i=1-Math.pow(o,1/300),s=0,a=.6,l=new Map,u=LX(d),c=vbe("tick","end"),f=Yit();t==null&&(t=[]);function d(){p(),c.call("tick",r),n<o&&(u.stop(),c.call("end",r))}function p(g){var y,b=t.length,x;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*i,l.forEach(function(w){w(n)}),y=0;y<b;++y)x=t[y],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return r}function h(){for(var g=0,y=t.length,b;g<y;++g){if(b=t[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var x=Var*Math.sqrt(.5+g),v=g*Gar;b.x=x*Math.cos(v),b.y=x*Math.sin(v)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function m(g){return g.initialize&&g.initialize(t,f),g}return h(),r={tick:p,restart:function(){return u.restart(d),r},stop:function(){return u.stop(),r},nodes:function(g){return arguments.length?(t=g,h(),l.forEach(m),r):t},alpha:function(g){return arguments.length?(n=+g,r):n},alphaMin:function(g){return arguments.length?(o=+g,r):o},alphaDecay:function(g){return arguments.length?(i=+g,r):+i},alphaTarget:function(g){return arguments.length?(s=+g,r):s},velocityDecay:function(g){return arguments.length?(a=1-g,r):1-a},randomSource:function(g){return arguments.length?(f=g,l.forEach(m),r):f},force:function(g,y){return arguments.length>1?(y==null?l.delete(g):l.set(g,m(y)),r):l.get(g)},find:function(g,y,b){var x=0,v=t.length,w,_,S,C,E;for(b==null?b=1/0:b*=b,x=0;x<v;++x)C=t[x],w=g-C.x,_=y-C.y,S=w*w+_*_,S<b&&(E=C,b=S);return E},on:function(g,y){return arguments.length>1?(c.on(g,y),r):c.on(g)}}}var Var,Gar,Tbe=N(()=>{"use strict";Uit();Cbe();Xit();Var=10,Gar=Math.PI*(3-Math.sqrt(5))});function Abe(){var t,r,n,o,i=da(-30),s,a=1,l=1/0,u=.81;function c(h){var m,g=t.length,y=FT(t,Kit,Zit).visitAfter(d);for(o=h,m=0;m<g;++m)r=t[m],y.visit(p)}function f(){if(t){var h,m=t.length,g;for(s=new Array(m),h=0;h<m;++h)g=t[h],s[g.index]=+i(g,h,t)}}function d(h){var m=0,g,y,b=0,x,v,w;if(h.length){for(x=v=w=0;w<4;++w)(g=h[w])&&(y=Math.abs(g.value))&&(m+=g.value,b+=y,x+=y*g.x,v+=y*g.y);h.x=x/b,h.y=v/b}else{g=h,g.x=g.data.x,g.y=g.data.y;do m+=s[g.data.index];while(g=g.next)}h.value=m}function p(h,m,g,y){if(!h.value)return!0;var b=h.x-r.x,x=h.y-r.y,v=y-m,w=b*b+x*x;if(v*v/u<w)return w<l&&(b===0&&(b=Cm(n),w+=b*b),x===0&&(x=Cm(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)),r.vx+=b*h.value*o/w,r.vy+=x*h.value*o/w),!0;if(h.length||w>=l)return;(h.data!==r||h.next)&&(b===0&&(b=Cm(n),w+=b*b),x===0&&(x=Cm(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)));do h.data!==r&&(v=s[h.data.index]*o/w,r.vx+=b*v,r.vy+=x*v);while(h=h.next)}return c.initialize=function(h,m){t=h,n=m,f()},c.strength=function(h){return arguments.length?(i=typeof h=="function"?h:da(+h),f(),c):i},c.distanceMin=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.distanceMax=function(h){return arguments.length?(l=h*h,c):Math.sqrt(l)},c.theta=function(h){return arguments.length?(u=h*h,c):Math.sqrt(u)},c}var Qit=N(()=>{"use strict";ybe();NM();MX();Tbe()});function kbe(t){var r=da(.1),n,o,i;typeof t!="function"&&(t=da(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(i[u]-f.x)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:da(+l),a(),s):r},s.x=function(l){return arguments.length?(t=typeof l=="function"?l:da(+l),a(),s):t},s}var Jit=N(()=>{"use strict";NM()});function Ibe(t){var r=da(.1),n,o,i;typeof t!="function"&&(t=da(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(i[u]-f.y)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:da(+l),a(),s):r},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:da(+l),a(),s):t},s}var est=N(()=>{"use strict";NM()});var tst=N(()=>{"use strict";oit();Pit();jit();Qit();Tbe();Jit();est()});var Mbe={};fn(Mbe,{force:()=>Nbe});function Nbe(t){et.call(this,null,t)}function qar(t,r){return()=>t.touch(r).run()}function Har(t,r){let n=Ebe(t),o=n.stop,i=n.restart,s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,o()),ost(n,r,!0).on("end",()=>s=!0)}function ost(t,r,n,o){var i=Br(r.forces),s,a,l,u;for(s=0,a=Dbe.length;s<a;++s)l=Dbe[s],l!==T5&&r.modified(l)&&t[l](r[l]);for(s=0,a=i.length;s<a;++s)u=T5+s,l=n||r.modified(T5,s)?Xar(i[s]):o&&Yar(i[s],o)?t.force(u):null,l&&t.force(u,l);for(a=t.numForces||0;s<a;++s)t.force(T5+s,null);return t.numForces=i.length,t}function Yar(t,r){var n,o;for(n in t)if(Dn(o=t[n])&&r.modified(Aa(o)))return 1;return 0}function Xar(t){var r,n;Pr(rst,t.force)||pt("Unrecognized force: "+t.force),r=rst[t.force]();for(n in t)Dn(r[n])&&Kar(r[n],t[n],t);return r}function Kar(t,r,n){t(Dn(r)?o=>r(o,n):r)}var rst,T5,Dbe,War,nst,ist=N(()=>{"use strict";el();Ls();tst();rst={center:mbe,collide:bbe,nbody:Abe,link:xbe,x:kbe,y:Ibe},T5="forces",Dbe=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],War=["static","iterations"],nst=["x","y","vx","vy"];Nbe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:nst}]};Dt(Nbe,et,{transform(t,r){var n=this.value,o=r.changed(r.ADD_REM),i=t.modified(Dbe),s=t.iterations||300;if(n?(o&&(r.modifies("index"),n.nodes(r.source)),(i||r.changed(r.MOD))&&ost(n,t,0,r)):(this.value=n=Har(r.source,t),n.on("tick",qar(r.dataflow,this)),t.static||(o=!0,n.tick()),r.modifies("index")),i||o||t.modified(War)||r.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!o)return r.StopPropagation}return this.finish(t,r)},finish(t,r){let n=r.dataflow;for(let l=this._argops,u=0,c=l.length,f;u<c;++u)if(f=l[u],!(f.name!==T5||f.op._argval.force!=="link")){for(var o=f.op._argops,i=0,s=o.length,a;i<s;++i)if(o[i].name==="links"&&(a=o[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return r.reflow(t.modified()).modifies(nst)}})});function Zar(t,r){return t.parent===r.parent?1:2}function Qar(t){return t.reduce(Jar,0)/t.length}function Jar(t,r){return t+r.x}function elr(t){return 1+t.reduce(tlr,0)}function tlr(t,r){return Math.max(t,r.y)}function rlr(t){for(var r;r=t.children;)t=r[0];return t}function nlr(t){for(var r;r=t.children;)t=r[r.length-1];return t}function Fbe(){var t=Zar,r=1,n=1,o=!1;function i(s){var a,l=0;s.eachAfter(function(p){var h=p.children;h?(p.x=Qar(h),p.y=elr(h)):(p.x=a?l+=t(p,a):0,p.y=0,a=p)});var u=rlr(s),c=nlr(s),f=u.x-t(u,c)/2,d=c.x+t(c,u)/2;return s.eachAfter(o?function(p){p.x=(p.x-s.x)*r,p.y=(s.y-p.y)*n}:function(p){p.x=(p.x-f)/(d-f)*r,p.y=(1-(s.y?p.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(o=!1,r=+s[0],n=+s[1],i):o?null:[r,n]},i.nodeSize=function(s){return arguments.length?(o=!0,r=+s[0],n=+s[1],i):o?[r,n]:null},i}var sst=N(()=>{"use strict"});function olr(t){var r=0,n=t.children,o=n&&n.length;if(!o)r=1;else for(;--o>=0;)r+=n[o].value;t.value=r}function ast(){return this.eachAfter(olr)}var lst=N(()=>{"use strict"});function ust(t,r){let n=-1;for(let o of this)t.call(r,o,++n,this);return this}var cst=N(()=>{"use strict"});function fst(t,r){for(var n=this,o=[n],i,s,a=-1;n=o.pop();)if(t.call(r,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)o.push(i[s]);return this}var dst=N(()=>{"use strict"});function pst(t,r){for(var n=this,o=[n],i=[],s,a,l,u=-1;n=o.pop();)if(i.push(n),s=n.children)for(a=0,l=s.length;a<l;++a)o.push(s[a]);for(;n=i.pop();)t.call(r,n,++u,this);return this}var hst=N(()=>{"use strict"});function mst(t,r){let n=-1;for(let o of this)if(t.call(r,o,++n,this))return o}var gst=N(()=>{"use strict"});function yst(t){return this.eachAfter(function(r){for(var n=+t(r.data)||0,o=r.children,i=o&&o.length;--i>=0;)n+=o[i].value;r.value=n})}var bst=N(()=>{"use strict"});function xst(t){return this.eachBefore(function(r){r.children&&r.children.sort(t)})}var vst=N(()=>{"use strict"});function wst(t){for(var r=this,n=ilr(r,t),o=[r];r!==n;)r=r.parent,o.push(r);for(var i=o.length;t!==n;)o.splice(i,0,t),t=t.parent;return o}function ilr(t,r){if(t===r)return t;var n=t.ancestors(),o=r.ancestors(),i=null;for(t=n.pop(),r=o.pop();t===r;)i=t,t=n.pop(),r=o.pop();return i}var _st=N(()=>{"use strict"});function Sst(){for(var t=this,r=[t];t=t.parent;)r.push(t);return r}var Cst=N(()=>{"use strict"});function Est(){return Array.from(this)}var Tst=N(()=>{"use strict"});function Ast(){var t=[];return this.eachBefore(function(r){r.children||t.push(r)}),t}var kst=N(()=>{"use strict"});function Ist(){var t=this,r=[];return t.each(function(n){n!==t&&r.push({source:n.parent,target:n})}),r}var Dst=N(()=>{"use strict"});function*Nst(){var t=this,r,n=[t],o,i,s;do for(r=n.reverse(),n=[];t=r.pop();)if(yield t,o=t.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);while(n.length)}var Mst=N(()=>{"use strict"});function FM(t,r){t instanceof Map?(t=[void 0,t],r===void 0&&(r=llr)):r===void 0&&(r=alr);for(var n=new G_(t),o,i=[n],s,a,l,u;o=i.pop();)if((a=r(o.data))&&(u=(a=Array.from(a)).length))for(o.children=a,l=u-1;l>=0;--l)i.push(s=a[l]=new G_(a[l])),s.parent=o,s.depth=o.depth+1;return n.eachBefore(Obe)}function slr(){return FM(this).eachBefore(ulr)}function alr(t){return t.children}function llr(t){return Array.isArray(t)?t[1]:null}function ulr(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Obe(t){var r=0;do t.height=r;while((t=t.parent)&&t.height<++r)}function G_(t){this.data=t,this.depth=this.height=0,this.parent=null}var jX=N(()=>{"use strict";lst();cst();dst();hst();gst();bst();vst();_st();Cst();Tst();kst();Dst();Mst();G_.prototype=FM.prototype={constructor:G_,count:ast,each:ust,eachAfter:pst,eachBefore:fst,find:mst,sum:yst,sort:xst,path:wst,ancestors:Sst,descendants:Est,leaves:Ast,links:Ist,copy:slr,[Symbol.iterator]:Nst}});function Fst(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ost(t){for(var r=t.length,n,o;r;)o=Math.random()*r--|0,n=t[r],t[r]=t[o],t[o]=n;return t}var Rbe=N(()=>{"use strict"});function Rst(t){for(var r=0,n=(t=Ost(Array.from(t))).length,o=[],i,s;r<n;)i=t[r],s&&Pst(s,i)?++r:(s=flr(o=clr(o,i)),r=0);return s}function clr(t,r){var n,o;if(Pbe(r,t))return[r];for(n=0;n<t.length;++n)if(BX(r,t[n])&&Pbe(A5(t[n],r),t))return[t[n],r];for(n=0;n<t.length-1;++n)for(o=n+1;o<t.length;++o)if(BX(A5(t[n],t[o]),r)&&BX(A5(t[n],r),t[o])&&BX(A5(t[o],r),t[n])&&Pbe(Lst(t[n],t[o],r),t))return[t[n],t[o],r];throw new Error}function BX(t,r){var n=t.r-r.r,o=r.x-t.x,i=r.y-t.y;return n<0||n*n<o*o+i*i}function Pst(t,r){var n=t.r-r.r+Math.max(t.r,r.r,1)*1e-9,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function Pbe(t,r){for(var n=0;n<r.length;++n)if(!Pst(t,r[n]))return!1;return!0}function flr(t){switch(t.length){case 1:return dlr(t[0]);case 2:return A5(t[0],t[1]);case 3:return Lst(t[0],t[1],t[2])}}function dlr(t){return{x:t.x,y:t.y,r:t.r}}function A5(t,r){var n=t.x,o=t.y,i=t.r,s=r.x,a=r.y,l=r.r,u=s-n,c=a-o,f=l-i,d=Math.sqrt(u*u+c*c);return{x:(n+s+u/d*f)/2,y:(o+a+c/d*f)/2,r:(d+i+l)/2}}function Lst(t,r,n){var o=t.x,i=t.y,s=t.r,a=r.x,l=r.y,u=r.r,c=n.x,f=n.y,d=n.r,p=o-a,h=o-c,m=i-l,g=i-f,y=u-s,b=d-s,x=o*o+i*i-s*s,v=x-a*a-l*l+u*u,w=x-c*c-f*f+d*d,_=h*m-p*g,S=(m*w-g*v)/(_*2)-o,C=(g*y-m*b)/_,E=(h*v-p*w)/(_*2)-i,T=(p*b-h*y)/_,I=C*C+T*T-1,k=2*(s+S*C+E*T),F=S*S+E*E-s*s,D=-(I?(k+Math.sqrt(k*k-4*I*F))/(2*I):F/k);return{x:o+S+C*D,y:i+E+T*D,r:D}}var jst=N(()=>{"use strict";Rbe()});function Bst(t,r,n){var o=t.x-r.x,i,s,a=t.y-r.y,l,u,c=o*o+a*a;c?(s=r.r+n.r,s*=s,u=t.r+n.r,u*=u,s>u?(i=(c+u-s)/(2*c),l=Math.sqrt(Math.max(0,u/c-i*i)),n.x=t.x-i*o-l*a,n.y=t.y-i*a+l*o):(i=(c+s-u)/(2*c),l=Math.sqrt(Math.max(0,s/c-i*i)),n.x=r.x+i*o-l*a,n.y=r.y+i*a+l*o)):(n.x=r.x+n.r,n.y=r.y)}function $st(t,r){var n=t.r+r.r-1e-6,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function zst(t){var r=t._,n=t.next._,o=r.r+n.r,i=(r.x*n.r+n.x*r.r)/o,s=(r.y*n.r+n.y*r.r)/o;return i*i+s*s}function $X(t){this._=t,this.next=null,this.previous=null}function Ust(t){if(!(i=(t=Fst(t)).length))return 0;var r,n,o,i,s,a,l,u,c,f,d;if(r=t[0],r.x=0,r.y=0,!(i>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(i>2))return r.r+n.r;Bst(n,r,o=t[2]),r=new $X(r),n=new $X(n),o=new $X(o),r.next=o.previous=n,n.next=r.previous=o,o.next=n.previous=r;e:for(l=3;l<i;++l){Bst(r._,n._,o=t[l]),o=new $X(o),u=n.next,c=r.previous,f=n._.r,d=r._.r;do if(f<=d){if($st(u._,o._)){n=u,r.next=n,n.previous=r,--l;continue e}f+=u._.r,u=u.next}else{if($st(c._,o._)){r=c,r.next=n,n.previous=r,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(o.previous=r,o.next=n,r.next=n.previous=n=o,s=zst(r);(o=o.next)!==n;)(a=zst(o))<s&&(r=o,s=a);n=r.next}for(r=[n._],o=n;(o=o.next)!==n;)r.push(o._);for(o=Rst(r),l=0;l<i;++l)r=t[l],r.x-=o.x,r.y-=o.y;return o.r}var Vst=N(()=>{"use strict";Rbe();jst()});function Gst(t){return t==null?null:OM(t)}function OM(t){if(typeof t!="function")throw new Error;return t}var zX=N(()=>{"use strict"});function Ev(){return 0}function W_(t){return function(){return t}}var Lbe=N(()=>{"use strict"});function plr(t){return Math.sqrt(t.value)}function Bbe(){var t=null,r=1,n=1,o=Ev;function i(s){return s.x=r/2,s.y=n/2,t?s.eachBefore(Wst(t)).eachAfter(jbe(o,.5)).eachBefore(qst(1)):s.eachBefore(Wst(plr)).eachAfter(jbe(Ev,1)).eachAfter(jbe(o,s.r/Math.min(r,n))).eachBefore(qst(Math.min(r,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=Gst(s),i):t},i.size=function(s){return arguments.length?(r=+s[0],n=+s[1],i):[r,n]},i.padding=function(s){return arguments.length?(o=typeof s=="function"?s:W_(+s),i):o},i}function Wst(t){return function(r){r.children||(r.r=Math.max(0,+t(r)||0))}}function jbe(t,r){return function(n){if(o=n.children){var o,i,s=o.length,a=t(n)*r||0,l;if(a)for(i=0;i<s;++i)o[i].r+=a;if(l=Ust(o),a)for(i=0;i<s;++i)o[i].r-=a;n.r=l+a}}}function qst(t){return function(r){var n=r.parent;r.r*=t,n&&(r.x=n.x+t*r.x,r.y=n.y+t*r.y)}}var Hst=N(()=>{"use strict";Vst();zX();Lbe()});function UX(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}var $be=N(()=>{"use strict"});function Em(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(o-r)/t.value;++l<u;)a=s[l],a.y0=n,a.y1=i,a.x0=r,a.x1=r+=a.value*c}var RM=N(()=>{"use strict"});function zbe(){var t=1,r=1,n=0,o=!1;function i(a){var l=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=r/l,a.eachBefore(s(r,l)),o&&a.eachBefore(UX),a}function s(a,l){return function(u){u.children&&Em(u,u.x0,a*(u.depth+1)/l,u.x1,a*(u.depth+2)/l);var c=u.x0,f=u.y0,d=u.x1-n,p=u.y1-n;d<c&&(c=d=(c+d)/2),p<f&&(f=p=(f+p)/2),u.x0=c,u.y0=f,u.x1=d,u.y1=p}}return i.round=function(a){return arguments.length?(o=!!a,i):o},i.size=function(a){return arguments.length?(t=+a[0],r=+a[1],i):[t,r]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var Yst=N(()=>{"use strict";$be();RM()});function mlr(t){return t.id}function glr(t){return t.parentId}function VX(){var t=mlr,r=glr;function n(o){var i=Array.from(o),s=i.length,a,l,u,c,f,d,p,h=new Map;for(l=0;l<s;++l)a=i[l],f=i[l]=new G_(a),(d=t(a,l,o))!=null&&(d+="")&&(p=f.id=d,h.set(p,h.has(p)?Xst:f)),(d=r(a,l,o))!=null&&(d+="")&&(f.parent=d);for(l=0;l<s;++l)if(f=i[l],d=f.parent){if(c=h.get(d),!c)throw new Error("missing: "+d);if(c===Xst)throw new Error("ambiguous: "+d);c.children?c.children.push(f):c.children=[f],f.parent=c}else{if(u)throw new Error("multiple roots");u=f}if(!u)throw new Error("no root");if(u.parent=hlr,u.eachBefore(function(m){m.depth=m.parent.depth+1,--s}).eachBefore(Obe),u.parent=null,s>0)throw new Error("cycle");return u}return n.id=function(o){return arguments.length?(t=OM(o),n):t},n.parentId=function(o){return arguments.length?(r=OM(o),n):r},n}var hlr,Xst,Kst=N(()=>{"use strict";zX();jX();hlr={depth:-1},Xst={}});function ylr(t,r){return t.parent===r.parent?1:2}function Ube(t){var r=t.children;return r?r[0]:t.t}function Vbe(t){var r=t.children;return r?r[r.length-1]:t.t}function blr(t,r,n){var o=n/(r.i-t.i);r.c-=o,r.s+=n,t.c+=o,r.z+=n,r.m+=n}function xlr(t){for(var r=0,n=0,o=t.children,i=o.length,s;--i>=0;)s=o[i],s.z+=r,s.m+=r,r+=s.s+(n+=s.c)}function vlr(t,r,n){return t.a.parent===r.parent?t.a:n}function GX(t,r){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function wlr(t){for(var r=new GX(t,0),n,o=[r],i,s,a,l;n=o.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),a=l-1;a>=0;--a)o.push(i=n.children[a]=new GX(s[a],a)),i.parent=n;return(r.parent=new GX(null,0)).children=[r],r}function Gbe(){var t=ylr,r=1,n=1,o=null;function i(c){var f=wlr(c);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(a),o)c.eachBefore(u);else{var d=c,p=c,h=c;c.eachBefore(function(x){x.x<d.x&&(d=x),x.x>p.x&&(p=x),x.depth>h.depth&&(h=x)});var m=d===p?1:t(d,p)/2,g=m-d.x,y=r/(p.x+m+g),b=n/(h.depth||1);c.eachBefore(function(x){x.x=(x.x+g)*y,x.y=x.depth*b})}return c}function s(c){var f=c.children,d=c.parent.children,p=c.i?d[c.i-1]:null;if(f){xlr(c);var h=(f[0].z+f[f.length-1].z)/2;p?(c.z=p.z+t(c._,p._),c.m=c.z-h):c.z=h}else p&&(c.z=p.z+t(c._,p._));c.parent.A=l(c,p,c.parent.A||d[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,f,d){if(f){for(var p=c,h=c,m=f,g=p.parent.children[0],y=p.m,b=h.m,x=m.m,v=g.m,w;m=Vbe(m),p=Ube(p),m&&p;)g=Ube(g),h=Vbe(h),h.a=c,w=m.z+x-p.z-y+t(m._,p._),w>0&&(blr(vlr(m,c,d),c,w),y+=w,b+=w),x+=m.m,y+=p.m,v+=g.m,b+=h.m;m&&!Vbe(h)&&(h.t=m,h.m+=x-b),p&&!Ube(g)&&(g.t=p,g.m+=y-v,d=c)}return d}function u(c){c.x*=r,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(o=!1,r=+c[0],n=+c[1],i):o?null:[r,n]},i.nodeSize=function(c){return arguments.length?(o=!0,r=+c[0],n=+c[1],i):o?[r,n]:null},i}var Zst=N(()=>{"use strict";jX();GX.prototype=Object.create(G_.prototype)});function Tv(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(i-n)/t.value;++l<u;)a=s[l],a.x0=r,a.x1=o,a.y0=n,a.y1=n+=a.value*c}var k5=N(()=>{"use strict"});function qbe(t,r,n,o,i,s){for(var a=[],l=r.children,u,c,f=0,d=0,p=l.length,h,m,g=r.value,y,b,x,v,w,_,S;f<p;){h=i-n,m=s-o;do y=l[d++].value;while(!y&&d<p);for(b=x=y,_=Math.max(m/h,h/m)/(g*t),S=y*y*_,w=Math.max(x/S,S/b);d<p;++d){if(y+=c=l[d].value,c<b&&(b=c),c>x&&(x=c),S=y*y*_,v=Math.max(x/S,S/b),v>w){y-=c;break}w=v}a.push(u={value:y,dice:h<m,children:l.slice(f,d)}),u.dice?Em(u,n,o,i,g?o+=m*y/g:s):Tv(u,n,o,g?n+=h*y/g:i,s),g-=y,f=d}return a}var Wbe,I5,WX=N(()=>{"use strict";RM();k5();Wbe=(1+Math.sqrt(5))/2;I5=function t(r){function n(o,i,s,a,l){qbe(r,o,i,s,a,l)}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(Wbe)});function Hbe(){var t=I5,r=!1,n=1,o=1,i=[0],s=Ev,a=Ev,l=Ev,u=Ev,c=Ev;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=o,p.eachBefore(d),i=[0],r&&p.eachBefore(UX),p}function d(p){var h=i[p.depth],m=p.x0+h,g=p.y0+h,y=p.x1-h,b=p.y1-h;y<m&&(m=y=(m+y)/2),b<g&&(g=b=(g+b)/2),p.x0=m,p.y0=g,p.x1=y,p.y1=b,p.children&&(h=i[p.depth+1]=s(p)/2,m+=c(p)-h,g+=a(p)-h,y-=l(p)-h,b-=u(p)-h,y<m&&(m=y=(m+y)/2),b<g&&(g=b=(g+b)/2),t(p,m,g,y,b))}return f.round=function(p){return arguments.length?(r=!!p,f):r},f.size=function(p){return arguments.length?(n=+p[0],o=+p[1],f):[n,o]},f.tile=function(p){return arguments.length?(t=OM(p),f):t},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(s=typeof p=="function"?p:W_(+p),f):s},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:W_(+p),f):a},f.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:W_(+p),f):l},f.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:W_(+p),f):u},f.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:W_(+p),f):c},f}var Qst=N(()=>{"use strict";$be();WX();zX();Lbe()});function Ybe(t,r,n,o,i){var s=t.children,a,l=s.length,u,c=new Array(l+1);for(c[0]=u=a=0;a<l;++a)c[a+1]=u+=s[a].value;f(0,l,t.value,r,n,o,i);function f(d,p,h,m,g,y,b){if(d>=p-1){var x=s[d];x.x0=m,x.y0=g,x.x1=y,x.y1=b;return}for(var v=c[d],w=h/2+v,_=d+1,S=p-1;_<S;){var C=_+S>>>1;c[C]<w?_=C+1:S=C}w-c[_-1]<c[_]-w&&d+1<_&&--_;var E=c[_]-v,T=h-E;if(y-m>b-g){var I=h?(m*T+y*E)/h:y;f(d,_,E,m,g,I,b),f(_,p,T,I,g,y,b)}else{var k=h?(g*T+b*E)/h:b;f(d,_,E,m,g,y,k),f(_,p,T,m,k,y,b)}}}var Jst=N(()=>{"use strict"});function Xbe(t,r,n,o,i){(t.depth&1?Tv:Em)(t,r,n,o,i)}var eat=N(()=>{"use strict";RM();k5()});var Kbe,tat=N(()=>{"use strict";RM();k5();WX();Kbe=function t(r){function n(o,i,s,a,l){if((u=o._squarify)&&u.ratio===r)for(var u,c,f,d,p=-1,h,m=u.length,g=o.value;++p<m;){for(c=u[p],f=c.children,d=c.value=0,h=f.length;d<h;++d)c.value+=f[d].value;c.dice?Em(c,i,s,a,g?s+=(l-s)*c.value/g:l):Tv(c,i,s,g?i+=(a-i)*c.value/g:a,l),g-=c.value}else o._squarify=u=qbe(r,o,i,s,a,l),u.ratio=r}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(Wbe)});var rat=N(()=>{"use strict";sst();jX();Hst();Yst();Kst();Zst();Qst();Jst();RM();k5();eat();WX();tat()});var uxe={};fn(uxe,{nest:()=>rxe,pack:()=>nxe,partition:()=>oxe,stratify:()=>ixe,tree:()=>sxe,treelinks:()=>axe,treemap:()=>lxe});function Zbe(t,r,n){let o={};return t.each(i=>{let s=i.data;n(s)&&(o[r(s)]=i)}),t.lookup=o,t}function rxe(t){et.call(this,null,t)}function Slr(){let t=[],r={entries:i=>o(n(i,0),0),key:i=>(t.push(i),r)};function n(i,s){if(s>=t.length)return i;let a=i.length,l=t[s++],u={},c={},f=-1,d,p,h;for(;++f<a;)d=l(p=i[f])+"",(h=u[d])?h.push(p):u[d]=[p];for(d in u)c[d]=n(u[d],s);return c}function o(i,s){if(++s>t.length)return i;let a=[];for(let l in i)a.push({key:l,values:o(i[l],s)});return a}return r}function Av(t){et.call(this,null,t)}function Elr(t,r,n){for(let o,i=0,s=r.length;i<s;++i)o=r[i],o in n&&t[o](n[o])}function Tlr(t,r,n){let o=t.data,i=r.length-1;for(let s=0;s<i;++s)o[n[s]]=t[r[s]];o[n[i]]=t.children?t.children.length:0}function nxe(t){Av.call(this,t)}function oxe(t){Av.call(this,t)}function ixe(t){et.call(this,null,t)}function sxe(t){Av.call(this,t)}function axe(t){et.call(this,[],t)}function lxe(t){Av.call(this,t)}var _lr,Clr,Qbe,Jbe,nat,exe,oat,txe,iat=N(()=>{"use strict";el();Ls();rat();rxe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};_lr=t=>t.values;Dt(rxe,et,{transform(t,r){r.source||pt("Nest transform requires an upstream data source.");var n=t.generate,o=t.modified(),i=r.clone(),s=this.value;return(!s||o||r.changed())&&(s&&s.each(a=>{a.children&&kE(a.data)&&i.rem.push(a.data)}),this.value=s=FM({values:Br(t.keys).reduce((a,l)=>(a.key(l),a),Slr()).entries(i.source)},_lr),n&&s.each(a=>{a.children&&(a=Nn(a.data),i.add.push(a),i.source.push(a))}),Zbe(s,_r,_r)),i.source.root=s,i}});Clr=(t,r)=>t.parent===r.parent?1:2;Dt(Av,et,{transform(t,r){(!r.source||!r.source.root)&&pt(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(t.method),o=this.fields,i=r.source.root,s=t.as||o;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(ry(t.sort,a=>a.data)),Elr(n,this.params,t),n.separation&&n.separation(t.separation!==!1?Clr:G0);try{this.value=n(i)}catch(a){pt(a)}return i.each(a=>Tlr(a,o,s)),r.reflow(t.modified()).modifies(s).modifies("leaf")}});Qbe=["x","y","r","depth","children"];nxe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Qbe.length,default:Qbe}]};Dt(nxe,Av,{layout:Bbe,params:["radius","size","padding"],fields:Qbe});Jbe=["x0","y0","x1","y1","depth","children"];oxe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Jbe.length,default:Jbe}]};Dt(oxe,Av,{layout:zbe,params:["size","round","padding"],fields:Jbe});ixe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Dt(ixe,et,{transform(t,r){r.source||pt("Stratify transform requires an upstream data source.");let n=this.value,o=t.modified(),i=r.fork(r.ALL).materialize(r.SOURCE),s=!n||o||r.changed(r.ADD_REM)||r.modified(t.key.fields)||r.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Zbe(VX().id(t.key).parentId(t.parentKey)(i.source),t.key,W0):Zbe(VX()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});nat={tidy:Gbe,cluster:Fbe},exe=["x","y","depth","children"];sxe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:exe.length,default:exe}]};Dt(sxe,Av,{layout(t){let r=t||"tidy";if(Pr(nat,r))return nat[r]();pt("Unrecognized Tree layout method: "+r)},params:["size","nodeSize"],fields:exe});axe.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Dt(axe,et,{transform(t,r){let n=this.value,o=r.source&&r.source.root,i=r.fork(r.NO_SOURCE),s={};return o||pt("TreeLinks transform requires a tree data source."),r.changed(r.ADD_REM)?(i.rem=n,r.visit(r.SOURCE,a=>s[_r(a)]=1),o.each(a=>{let l=a.data,u=a.parent&&a.parent.data;u&&s[_r(l)]&&s[_r(u)]&&i.add.push(Nn({source:u,target:l}))}),this.value=i.add):r.changed(r.MOD)&&(r.visit(r.MOD,a=>s[_r(a)]=1),n.forEach(a=>{(s[_r(a.source)]||s[_r(a.target)])&&i.mod.push(a)})),i}});oat={binary:Ybe,dice:Em,slice:Tv,slicedice:Xbe,squarify:I5,resquarify:Kbe},txe=["x0","y0","x1","y1","depth","children"];lxe.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:txe.length,default:txe}]};Dt(lxe,Av,{layout(){let t=Hbe();return t.ratio=r=>{let n=t.tile();n.ratio&&t.tile(n.ratio(r))},t.method=r=>{Pr(oat,r)?t.tile(oat[r]):pt("Unrecognized Treemap layout method: "+r)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:txe})});function dxe(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function sat(){return new dxe}var cxe,fxe,RT,Alr,Gp,aat=N(()=>{"use strict";cxe=Math.PI,fxe=2*cxe,RT=1e-6,Alr=fxe-RT;dxe.prototype=sat.prototype={constructor:dxe,moveTo:function(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function(t,r,n,o){this._+="Q"+ +t+","+ +r+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(t,r,n,o,i,s){this._+="C"+ +t+","+ +r+","+ +n+","+ +o+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,r,n,o,i){t=+t,r=+r,n=+n,o=+o,i=+i;var s=this._x1,a=this._y1,l=n-t,u=o-r,c=s-t,f=a-r,d=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=r);else if(d>RT)if(!(Math.abs(f*l-u*c)>RT)||!i)this._+="L"+(this._x1=t)+","+(this._y1=r);else{var p=n-s,h=o-a,m=l*l+u*u,g=p*p+h*h,y=Math.sqrt(m),b=Math.sqrt(d),x=i*Math.tan((cxe-Math.acos((m+d-g)/(2*y*b)))/2),v=x/b,w=x/y;Math.abs(v-1)>RT&&(this._+="L"+(t+v*c)+","+(r+v*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>c*h)+","+(this._x1=t+w*l)+","+(this._y1=r+w*u)}},arc:function(t,r,n,o,i,s){t=+t,r=+r,n=+n,s=!!s;var a=n*Math.cos(o),l=n*Math.sin(o),u=t+a,c=r+l,f=1^s,d=s?o-i:i-o;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+c:(Math.abs(this._x1-u)>RT||Math.abs(this._y1-c)>RT)&&(this._+="L"+u+","+c),n&&(d<0&&(d=d%fxe+fxe),d>Alr?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(r-l)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c):d>RT&&(this._+="A"+n+","+n+",0,"+ +(d>=cxe)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=r+n*Math.sin(i))))},rect:function(t,r,n,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};Gp=sat});var PM=N(()=>{"use strict";aat()});function Wn(t){return function(){return t}}var D5=N(()=>{"use strict"});function uat(t){return t>1?0:t<-1?H_:Math.acos(t)}function hxe(t){return t>=1?N5:t<=-1?-N5:Math.asin(t)}var pxe,zl,q_,lat,qX,Tm,PT,ll,H_,N5,HX,YX=N(()=>{"use strict";pxe=Math.abs,zl=Math.atan2,q_=Math.cos,lat=Math.max,qX=Math.min,Tm=Math.sin,PT=Math.sqrt,ll=1e-12,H_=Math.PI,N5=H_/2,HX=2*H_});function klr(t){return t.innerRadius}function Ilr(t){return t.outerRadius}function Dlr(t){return t.startAngle}function Nlr(t){return t.endAngle}function Mlr(t){return t&&t.padAngle}function Flr(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<ll))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function XX(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/PT(l*l+u*u),f=c*u,d=-c*l,p=t+f,h=r+d,m=n+f,g=o+d,y=(p+m)/2,b=(h+g)/2,x=m-p,v=g-h,w=x*x+v*v,_=i-s,S=p*g-m*h,C=(v<0?-1:1)*PT(lat(0,_*_*w-S*S)),E=(S*v-x*C)/w,T=(-S*x-v*C)/w,I=(S*v+x*C)/w,k=(-S*x+v*C)/w,F=E-y,D=T-b,L=I-y,P=k-b;return F*F+D*D>L*L+P*P&&(E=I,T=k),{cx:E,cy:T,x01:-f,y01:-d,x11:E*(i/_-1),y11:T*(i/_-1)}}function mxe(){var t=klr,r=Ilr,n=Wn(0),o=null,i=Dlr,s=Nlr,a=Mlr,l=null;function u(){var c,f,d=+t.apply(this,arguments),p=+r.apply(this,arguments),h=i.apply(this,arguments)-N5,m=s.apply(this,arguments)-N5,g=pxe(m-h),y=m>h;if(l||(l=c=Gp()),p<d&&(f=p,p=d,d=f),!(p>ll))l.moveTo(0,0);else if(g>HX-ll)l.moveTo(p*q_(h),p*Tm(h)),l.arc(0,0,p,h,m,!y),d>ll&&(l.moveTo(d*q_(m),d*Tm(m)),l.arc(0,0,d,m,h,y));else{var b=h,x=m,v=h,w=m,_=g,S=g,C=a.apply(this,arguments)/2,E=C>ll&&(o?+o.apply(this,arguments):PT(d*d+p*p)),T=qX(pxe(p-d)/2,+n.apply(this,arguments)),I=T,k=T,F,D;if(E>ll){var L=hxe(E/d*Tm(C)),P=hxe(E/p*Tm(C));(_-=L*2)>ll?(L*=y?1:-1,v+=L,w-=L):(_=0,v=w=(h+m)/2),(S-=P*2)>ll?(P*=y?1:-1,b+=P,x-=P):(S=0,b=x=(h+m)/2)}var R=p*q_(b),V=p*Tm(b),G=d*q_(w),U=d*Tm(w);if(T>ll){var H=p*q_(x),X=p*Tm(x),fe=d*q_(v),$=d*Tm(v),M;if(g<H_&&(M=Flr(R,V,fe,$,H,X,G,U))){var z=R-M[0],q=V-M[1],ee=H-M[0],ae=X-M[1],Q=1/Tm(uat((z*ee+q*ae)/(PT(z*z+q*q)*PT(ee*ee+ae*ae)))/2),le=PT(M[0]*M[0]+M[1]*M[1]);I=qX(T,(d-le)/(Q-1)),k=qX(T,(p-le)/(Q+1))}}S>ll?k>ll?(F=XX(fe,$,R,V,p,k,y),D=XX(H,X,G,U,p,k,y),l.moveTo(F.cx+F.x01,F.cy+F.y01),k<T?l.arc(F.cx,F.cy,k,zl(F.y01,F.x01),zl(D.y01,D.x01),!y):(l.arc(F.cx,F.cy,k,zl(F.y01,F.x01),zl(F.y11,F.x11),!y),l.arc(0,0,p,zl(F.cy+F.y11,F.cx+F.x11),zl(D.cy+D.y11,D.cx+D.x11),!y),l.arc(D.cx,D.cy,k,zl(D.y11,D.x11),zl(D.y01,D.x01),!y))):(l.moveTo(R,V),l.arc(0,0,p,b,x,!y)):l.moveTo(R,V),!(d>ll)||!(_>ll)?l.lineTo(G,U):I>ll?(F=XX(G,U,H,X,d,-I,y),D=XX(R,V,fe,$,d,-I,y),l.lineTo(F.cx+F.x01,F.cy+F.y01),I<T?l.arc(F.cx,F.cy,I,zl(F.y01,F.x01),zl(D.y01,D.x01),!y):(l.arc(F.cx,F.cy,I,zl(F.y01,F.x01),zl(F.y11,F.x11),!y),l.arc(0,0,d,zl(F.cy+F.y11,F.cx+F.x11),zl(D.cy+D.y11,D.cx+D.x11),y),l.arc(D.cx,D.cy,I,zl(D.y11,D.x11),zl(D.y01,D.x01),!y))):l.arc(0,0,d,w,v,y)}if(l.closePath(),c)return l=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-H_/2;return[q_(f)*c,Tm(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Wn(+c),u):t},u.outerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:Wn(+c),u):r},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Wn(+c),u):n},u.padRadius=function(c){return arguments.length?(o=c==null?null:typeof c=="function"?c:Wn(+c),u):o},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Wn(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Wn(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Wn(+c),u):a},u.context=function(c){return arguments.length?(l=c??null,u):l},u}var cat=N(()=>{"use strict";PM();D5();YX()});function KX(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var J6o,gxe=N(()=>{"use strict";J6o=Array.prototype.slice});function fat(t){this._context=t}function LT(t){return new fat(t)}var ZX=N(()=>{"use strict";fat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function QX(t){return t[0]}function JX(t){return t[1]}var yxe=N(()=>{"use strict"});function M5(t,r){var n=Wn(!0),o=null,i=LT,s=null;t=typeof t=="function"?t:t===void 0?QX:Wn(t),r=typeof r=="function"?r:r===void 0?JX:Wn(r);function a(l){var u,c=(l=KX(l)).length,f,d=!1,p;for(o==null&&(s=i(p=Gp())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(f,u,l),+r(f,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Wn(+l),a):t},a.y=function(l){return arguments.length?(r=typeof l=="function"?l:Wn(+l),a):r},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Wn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,o!=null&&(s=i(o)),a):i},a.context=function(l){return arguments.length?(l==null?o=s=null:s=i(o=l),a):o},a}var bxe=N(()=>{"use strict";PM();gxe();D5();ZX();yxe()});function eK(t,r,n){var o=null,i=Wn(!0),s=null,a=LT,l=null;t=typeof t=="function"?t:t===void 0?QX:Wn(+t),r=typeof r=="function"?r:r===void 0?Wn(0):Wn(+r),n=typeof n=="function"?n:n===void 0?JX:Wn(+n);function u(f){var d,p,h,m=(f=KX(f)).length,g,y=!1,b,x=new Array(m),v=new Array(m);for(s==null&&(l=a(b=Gp())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)p=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=d-1;h>=p;--h)l.point(x[h],v[h]);l.lineEnd(),l.areaEnd()}y&&(x[d]=+t(g,d,f),v[d]=+r(g,d,f),l.point(o?+o(g,d,f):x[d],n?+n(g,d,f):v[d]))}if(b)return l=null,b+""||null}function c(){return M5().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Wn(+f),o=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Wn(+f),u):t},u.x1=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Wn(+f),u):o},u.y=function(f){return arguments.length?(r=typeof f=="function"?f:Wn(+f),n=null,u):r},u.y0=function(f){return arguments.length?(r=typeof f=="function"?f:Wn(+f),u):r},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Wn(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(r)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(o).y(r)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Wn(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}var dat=N(()=>{"use strict";PM();gxe();D5();ZX();bxe();yxe()});var pat,hat=N(()=>{"use strict";YX();pat={draw:function(t,r){var n=Math.sqrt(r/H_);t.moveTo(n,0),t.arc(0,0,n,0,HX)}}});function xxe(t,r){var n=null;t=typeof t=="function"?t:Wn(t||pat),r=typeof r=="function"?r:Wn(r===void 0?64:+r);function o(){var i;if(n||(n=i=Gp()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(i){return arguments.length?(t=typeof i=="function"?i:Wn(i),o):t},o.size=function(i){return arguments.length?(r=typeof i=="function"?i:Wn(+i),o):r},o.context=function(i){return arguments.length?(n=i??null,o):n},o}var mat=N(()=>{"use strict";PM();hat();D5()});function Wp(){}var F5=N(()=>{"use strict"});function LM(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function O5(t){this._context=t}function vxe(t){return new O5(t)}var R5=N(()=>{"use strict";O5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:LM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:LM(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function gat(t){this._context=t}function wxe(t){return new gat(t)}var yat=N(()=>{"use strict";F5();R5();gat.prototype={areaStart:Wp,areaEnd:Wp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:LM(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function bat(t){this._context=t}function _xe(t){return new bat(t)}var xat=N(()=>{"use strict";R5();bat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:LM(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function vat(t,r){this._basis=new O5(t),this._beta=r}var Sxe,wat=N(()=>{"use strict";R5();vat.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};Sxe=function t(r){function n(o){return r===1?new O5(o):new vat(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function jM(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function tK(t,r){this._context=t,this._k=(1-r)/6}var Cxe,P5=N(()=>{"use strict";tK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:jM(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Cxe=function t(r){function n(o){return new tK(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function rK(t,r){this._context=t,this._k=(1-r)/6}var Exe,Txe=N(()=>{"use strict";F5();P5();rK.prototype={areaStart:Wp,areaEnd:Wp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:jM(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Exe=function t(r){function n(o){return new rK(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function nK(t,r){this._context=t,this._k=(1-r)/6}var Axe,kxe=N(()=>{"use strict";P5();nK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jM(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Axe=function t(r){function n(o){return new nK(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function L5(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>ll){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>ll){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function _at(t,r){this._context=t,this._alpha=r}var Ixe,oK=N(()=>{"use strict";YX();P5();_at.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:L5(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Ixe=function t(r){function n(o){return r?new _at(o,r):new tK(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function Sat(t,r){this._context=t,this._alpha=r}var Dxe,Cat=N(()=>{"use strict";Txe();F5();oK();Sat.prototype={areaStart:Wp,areaEnd:Wp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:L5(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Dxe=function t(r){function n(o){return r?new Sat(o,r):new rK(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function Eat(t,r){this._context=t,this._alpha=r}var Nxe,Tat=N(()=>{"use strict";kxe();oK();Eat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:L5(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Nxe=function t(r){function n(o){return r?new Eat(o,r):new nK(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function Aat(t){this._context=t}function Mxe(t){return new Aat(t)}var kat=N(()=>{"use strict";F5();Aat.prototype={areaStart:Wp,areaEnd:Wp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function Iat(t){return t<0?-1:1}function Dat(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(Iat(s)+Iat(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function Nat(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Fxe(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function iK(t){this._context=t}function Mat(t){this._context=new Fat(t)}function Fat(t){this._context=t}function Oxe(t){return new iK(t)}function Rxe(t){return new Mat(t)}var Oat=N(()=>{"use strict";iK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fxe(this,this._t0,Nat(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Fxe(this,Nat(this,n=Dat(this,t,r)),n);break;default:Fxe(this,this._t0,n=Dat(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(Mat.prototype=Object.create(iK.prototype)).point=function(t,r){iK.prototype.point.call(this,r,t)};Fat.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function Pat(t){this._context=t}function Rat(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function Pxe(t){return new Pat(t)}var Lat=N(()=>{"use strict";Pat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=Rat(t),i=Rat(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function sK(t,r){this._context=t,this._t=r}function Lxe(t){return new sK(t,.5)}function jxe(t){return new sK(t,0)}function Bxe(t){return new sK(t,1)}var jat=N(()=>{"use strict";sK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var Bat=N(()=>{"use strict";cat();dat();bxe();mat();yat();xat();R5();wat();Txe();kxe();P5();Cat();Tat();oK();kat();ZX();Oat();Lat();jat()});function Uat(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function Olr(t,r){var n=Uat(t);return function(o,i){return r(n(o),i,t)}}function zat(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function bf(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function Rlr(t){return t<0?"-"+bf(-t,6):t>9999?"+"+bf(t,6):bf(t,4)}function Plr(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Rlr(t.getUTCFullYear(),4)+"-"+bf(t.getUTCMonth()+1,2)+"-"+bf(t.getUTCDate(),2)+(i?"T"+bf(r,2)+":"+bf(n,2)+":"+bf(o,2)+"."+bf(i,3)+"Z":o?"T"+bf(r,2)+":"+bf(n,2)+":"+bf(o,2)+"Z":n||r?"T"+bf(r,2)+":"+bf(n,2)+"Z":"")}function Vxe(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?Olr(y,p):Uat(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===j5&&--m,d.charCodeAt(m-1)===Uxe&&--m;function w(){if(x)return $xe;if(v)return v=!1,$at;var S,C=g,E;if(d.charCodeAt(C)===zxe){for(;g++<m&&d.charCodeAt(g)!==zxe||d.charCodeAt(++g)===zxe;);return(S=g)>=m?x=!0:(E=d.charCodeAt(g++))===j5?v=!0:E===Uxe&&(v=!0,d.charCodeAt(g)===j5&&++g),d.slice(C+1,S-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(S=g++))===j5)v=!0;else if(E===Uxe)v=!0,d.charCodeAt(g)===j5&&++g;else if(E!==n)continue;return d.slice(C,S)}return x=!0,d.slice(C,m)}for(;(b=w())!==$xe;){for(var _=[];b!==$at&&b!==$xe;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=zat(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=zat(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?Plr(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var $at,$xe,zxe,j5,Uxe,Vat=N(()=>{"use strict";$at={},$xe={},zxe=34,j5=10,Uxe=13});var Gat=N(()=>{"use strict";Vat()});function Wat(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jT(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var B5=N(()=>{"use strict"});function ky(t){return t=jT(Math.abs(t)),t?t[1]:NaN}var $5=N(()=>{"use strict";B5()});function qat(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var Hat=N(()=>{"use strict"});function Yat(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var Xat=N(()=>{"use strict"});function kv(t){if(!(r=Llr.exec(t)))throw new Error("invalid format: "+t);var r;return new aK({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function aK(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var Llr,Gxe=N(()=>{"use strict";Llr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;kv.prototype=aK.prototype;aK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function Kat(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var Zat=N(()=>{"use strict"});function Qat(t,r){var n=jT(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(Wxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+jT(t,Math.max(0,r+s-1))[0]}var Wxe,qxe=N(()=>{"use strict";B5()});function Hxe(t,r){var n=jT(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var Jat=N(()=>{"use strict";B5()});var Yxe,elt=N(()=>{"use strict";B5();qxe();Jat();Yxe={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Wat,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>Hxe(t*100,r),r:Hxe,s:Qat,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function Xxe(t){return t}var tlt=N(()=>{"use strict"});function z5(t){var r=t.grouping===void 0||t.thousands===void 0?Xxe:qat(rlt.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Xxe:Yat(rlt.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=kv(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):Yxe[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=g==="$"?o:/[%p]/.test(_)?a:"",E=Yxe[_],T=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(k){var F=S,D=C,L,P,R;if(_==="c")D=E(k)+D,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=Kat(k)),V&&+k==0&&m!=="+"&&(V=!1),F=(V?m==="("?m:l:m==="-"||m==="("?"":m)+F,D=(_==="s"?nlt[8+Wxe/3]:"")+D+(V&&m==="("?")":""),T){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){D=(R===46?i+k.slice(L+1):k.slice(L))+D,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=F.length+k.length+D.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-D.length:1/0),U=""),h){case"<":k=F+k+D+U;break;case"=":k=F+U+k+D;break;case"^":k=U.slice(0,G=U.length>>1)+F+k+D+U.slice(G);break;default:k=U+F+k+D;break}return s(k)}return I.toString=function(){return d+""},I}function f(d,p){var h=c((d=kv(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(ky(p)/3)))*3,g=Math.pow(10,-m),y=nlt[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var rlt,nlt,Kxe=N(()=>{"use strict";$5();Hat();Xat();Gxe();Zat();elt();qxe();tlt();rlt=Array.prototype.map,nlt=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function Zxe(t){return lK=z5(t),uK=lK.format,cK=lK.formatPrefix,lK}var lK,uK,cK,olt=N(()=>{"use strict";Kxe();Zxe({thousands:",",grouping:[3],currency:["$",""]})});function Qxe(t){return Math.max(0,-ky(Math.abs(t)))}var ilt=N(()=>{"use strict";$5()});function Jxe(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ky(r)/3)))*3-ky(Math.abs(t)))}var slt=N(()=>{"use strict";$5()});function eve(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,ky(r)-ky(t))+1}var alt=N(()=>{"use strict";$5()});var llt=N(()=>{"use strict";olt();Kxe();Gxe();ilt();slt();alt()});function U5(t){let r={};return n=>r[n]||(r[n]=t(n))}function jlr(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=Blr(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function Blr(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function clt(t){let r=U5(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=kv(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return jlr(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=kv(a??",f");let l=fc(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=Jxe(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=eve(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=Qxe(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function flt(){return tve=clt({format:uK,formatPrefix:cK})}function dlt(t){return clt(z5(t))}function V5(t){return arguments.length?tve=dlt(t):tve}function ult(t,r,n){n=n||{},un(n)||pt("Invalid time multi-format specifier: ".concat(n));let o=r(Td),i=r(sf),s=r(of),a=r(mc),l=r(aa),u=r(Pl),c=r(hc),f=r(tl),d=t(n[Np]||".%L"),p=t(n[Td]||":%S"),h=t(n[sf]||"%I:%M"),m=t(n[of]||"%I %p"),g=t(n[mc]||n[Rl]||"%a %d"),y=t(n[aa]||"%b %d"),b=t(n[Pl]||"%B"),x=t(n[hc]||"%B"),v=t(n[tl]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function plt(t){let r=U5(t.format),n=U5(t.utcFormat);return{timeFormat:o=>Jn(o)?r(o):ult(r,nv,o),utcFormat:o=>Jn(o)?n(o):ult(n,ov,o),timeParse:U5(t.parse),utcParse:U5(t.utcParse)}}function hlt(){return rve=plt({format:F_,parse:_Y,utcFormat:O_,utcParse:SY})}function mlt(t){return plt(iM(t))}function BT(t){return arguments.length?rve=mlt(t):rve}function fK(t,r){let n=t?dlt(t):V5(),o=r?mlt(r):BT();return nve(n,o)}function ove(t,r){let n=arguments.length;return n&&n!==2&&pt("defaultLocale expects either zero or two arguments."),n?nve(V5(t),BT(r)):nve(V5(),BT())}function glt(){return flt(),hlt(),ove()}var tve,rve,nve,dK=N(()=>{"use strict";Wo();llt();yN();Ls();aM();flt();hlt();nve=(t,r)=>an({},t,r)});function Vlr(t,r){return n=>({options:n||{},sanitize:Wlr,load:Glr,fileAccess:!!r,file:qlr(r),http:Ylr(t)})}function Glr(t,r){return je(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function Wlr(t,r){return je(this,null,function*(){r=an({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=zlr.test(t.replace(Ulr,""));(t==null||typeof t!="string"||!l)&&pt("Sanitize failure, invalid URI: "+$r(t));let u=$lr.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(ylt))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(ylt.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function qlr(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):Hlr}function Hlr(){return je(this,null,function*(){pt("No file system access.")})}function Ylr(t){return t?function(r,n){return je(this,null,function*(){let o=an({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Dn(s[i])?s[i]():s.text():pt(s.status+""+s.statusText)})}:Xlr}function Xlr(){return je(this,null,function*(){pt("No HTTP fetch method available.")})}function vlt(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=pK.length,i=pK.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&Klr(u)&&!pK[l](u)&&(i[l]=0,++a,a===pK.length))return"string";return eur[i.reduce((s,a)=>s===0?a:s,0)-1]}function wlt(t,r){return r.reduce((n,o)=>(n[o]=vlt(t,o),n),{})}function blt(t){let r=function(n,o){let i={delimiter:t};return sve(n,o?an(o,i):i)};return r.responseType="text",r}function sve(t,r){return r.header&&(t=r.header.map($r).join(r.delimiter)+`
`+t),Vxe(r.delimiter).parse(t+"")}function tur(t){return typeof Buffer=="function"&&Dn(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function ave(t,r){let n=r&&r.property?Xh(r.property):uc;return un(t)&&!tur(t)?rur(n(t),r):n(JSON.parse(t))}function rur(t,r){return!Hr(t)&&jce(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function _lt(t,r){let n,o,i,s;return t=ave(t,r),r&&r.feature?(n=wE,i=r.feature):r&&r.mesh?(n=_E,i=r.mesh,s=nur[r.filter]):pt("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):pt("Invalid TopoJSON object: "+i),o&&o.features||[o]}function lve(t,r){return arguments.length>1?(hK[t]=r,this):Pr(hK,t)?hK[t]:null}function our(t){let r=lve(t);return r&&r.responseType||"text"}function iur(t,r,n,o){r=r||{};let i=lve(r.type||"json");return i||pt("Unknown data format type: "+r.type),t=i(t,r),r.parse&&sur(t,r.parse,n,o),Pr(t,"columns")&&delete t.columns,t}function sur(t,r,n,o){if(!t.length)return;let i=BT();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=wlt(t,s)),s=Object.keys(r);let p=s.map(h=>{let m=r[h],g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!ive[m])throw Error("Illegal format pattern: "+h+":"+m);return ive[m]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var $lr,zlr,Ulr,ylt,Klr,Zlr,Qlr,xlt,Jlr,ive,pK,eur,nur,hK,mK,uve=N(()=>{"use strict";Ls();Gat();mW();dK();$lr=/^(data:|([A-Za-z]+:)?\/\/)/,zlr=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ulr=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ylt="file://";Klr=t=>t!=null&&t===t,Zlr=t=>t==="true"||t==="false"||t===!0||t===!1,Qlr=t=>!Number.isNaN(Date.parse(t)),xlt=t=>!Number.isNaN(+t)&&!(t instanceof Date),Jlr=t=>xlt(t)&&Number.isInteger(+t),ive={boolean:Uce,integer:Zh,number:Zh,date:Vce,string:Gce,unknown:uc},pK=[Zlr,Jlr,xlt,Qlr],eur=["boolean","integer","number","date"];sve.responseType="text";ave.responseType="json";nur={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};_lt.responseType="json";hK={dsv:sve,csv:blt(","),tsv:blt("	"),json:ave,topojson:_lt};mK=Vlr(typeof fetch<"u"&&fetch,null)});function aur(){Hlt=0}function kve(t){return t&&t.gradient}function Ylt(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?SK:"";return i||(i=t.id="gradient_"+Hlt++,o==="radial"?(t.x1=Iy(t.x1,.5),t.y1=Iy(t.y1,.5),t.r1=Iy(t.r1,0),t.x2=Iy(t.x2,.5),t.y2=Iy(t.y2,.5),t.r2=Iy(t.r2,.5),s=SK):(t.x1=Iy(t.x1,0),t.y1=Iy(t.y1,0),t.x2=Iy(t.x2,1),t.y2=Iy(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function Iy(t,r){return t??r}function Ive(t,r){var n=[],o;return o={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:r?r[0]:1,y2:r?r[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),o}}}function Dve(t,r,n){var o=Pr(Slt,t)&&Slt[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function WT(t){let r=[],n,o,i,s,a,l,u,c,f,d,p=t.slice().replace(G5[0],"###$1").split(G5[1]).slice(1);for(u=0,f=p.length;u<f;++u){for(n=p[u],o=n.slice(1).trim().replace(G5[2],"$1###$2").replace(G5[3],"$1###$2").split(G5[4]),a=n.charAt(0),i=[a],c=0,d=o.length;c<d;++c)(s=+o[c])===s&&i.push(s);if(l=lur[a.toLowerCase()],i.length-1>l){let h=i.length;for(c=1,r.push([a].concat(i.slice(c,c+=l))),a=a==="M"?"L":a==="m"?"l":a;c<h;c+=l)r.push([a].concat(i.slice(c,c+l)))}else r.push(i)}return r}function cur(t,r,n,o,i,s,a,l,u){let c=Xlt.call(arguments);if(cve[c])return cve[c];let f=a*J_,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let h=p*(l-t)*.5+d*(u-r)*.5,m=p*(u-r)*.5-d*(l-t)*.5,g=h*h/(n*n)+m*m/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,S=y*t+b*r,C=x*t+v*r,T=1/((S-w)*(S-w)+(C-_)*(C-_))-.25;T<0&&(T=0);let I=Math.sqrt(T);s==i&&(I=-I);let k=.5*(w+S)-I*(C-_),F=.5*(_+C)+I*(S-w),D=Math.atan2(_-F,w-k),P=Math.atan2(C-F,S-k)-D;P<0&&s===1?P+=Dy:P>0&&s===0&&(P-=Dy);let R=Math.ceil(Math.abs(P/($T+.001))),V=[];for(let G=0;G<R;++G){let U=D+G*P/R,H=D+(G+1)*P/R;V[G]=[k,F,U,H,n,o,d,p]}return cve[c]=V}function fur(t){let r=Xlt.call(t);if(fve[r])return fve[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,h=c*l,m=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+m-w*g,S=o+g+w*m,C=n+y,E=o+b,T=C+w*b,I=E-w*y;return fve[r]=[f*_+d*S,p*_+h*S,f*T+d*I,p*T+h*I,f*C+d*E,p*C+h*E]}function dur(t,r,n){let o=qp[0]=t[0];if(o==="a"||o==="A")qp[1]=r*t[1],qp[2]=n*t[2],qp[3]=t[3],qp[4]=t[4],qp[5]=t[5],qp[6]=r*t[6],qp[7]=n*t[7];else if(o==="h"||o==="H")qp[1]=r*t[1];else if(o==="v"||o==="V")qp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)qp[i]=(i%2==1?r:n)*t[i];return qp}function zM(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,h,m,g;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var y=0,b=r.length;y<b;++y){switch(a=r[y],(i!==1||s!==1)&&(a=dur(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],t.moveTo(u+n,c+o);break;case"c":p=u+a[5],h=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,h+o),u=p,c=h;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],h=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,h+o),f=u+a[1],d=c+a[2],u=p,c=h;break;case"S":p=a[3],h=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"q":p=u+a[3],h=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"Q":p=a[3],h=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"t":p=u+a[1],h=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-m,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),m=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h,f=u+a[1],d=c+a[2];break;case"T":p=a[1],h=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"a":Clt(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":Clt(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":t.closePath();break}l=a}}function Clt(t,r,n,o){let i=cur(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=fur(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function Klt(t){return Pr(Tlt,t)?Tlt[t]:pur(t)}function pur(t){if(!Pr(dve,t)){let r=WT(t);dve[t]={draw:function(n,o){zM(n,r,0,0,Math.sqrt(o)/2)}}}return dve[t]}function hur(t){return t.x}function mur(t){return t.y}function gur(t){return t.width}function yur(t){return t.height}function Iv(t){return typeof t=="function"?t:()=>+t}function gK(t,r,n){return Math.max(r,Math.min(t,n))}function Zlt(){var t=hur,r=mur,n=gur,o=yur,i=Iv(0),s=i,a=i,l=i,u=null;function c(f,d,p){var h,m=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=gK(+i.call(this,f),0,x),w=gK(+s.call(this,f),0,x),_=gK(+a.call(this,f),0,x),S=gK(+l.call(this,f),0,x);if(u||(u=h=Gp()),v<=0&&w<=0&&_<=0&&S<=0)u.rect(m,g,y,b);else{var C=m+y,E=g+b;u.moveTo(m+v,g),u.lineTo(C-w,g),u.bezierCurveTo(C-Y_*w,g,C,g+Y_*w,C,g+w),u.lineTo(C,E-S),u.bezierCurveTo(C,E-Y_*S,C-Y_*S,E,C-S,E),u.lineTo(m+_,E),u.bezierCurveTo(m+Y_*_,E,m,E-Y_*_,m,E-_),u.lineTo(m,g+v),u.bezierCurveTo(m,g+Y_*v,m+Y_*v,g,m+v,g),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(f){return arguments.length?(t=Iv(f),c):t},c.y=function(f){return arguments.length?(r=Iv(f),c):r},c.width=function(f){return arguments.length?(n=Iv(f),c):n},c.height=function(f){return arguments.length?(o=Iv(f),c):o},c.cornerRadius=function(f,d,p,h){return arguments.length?(i=Iv(f),s=d!=null?Iv(d):i,l=p!=null?Iv(p):i,a=h!=null?Iv(h):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function Qlt(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,h){let m=h/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.sqrt(g*g+y*y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*m,p-y*m),i.arc(d,p,m,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,m,0,Dy);i.closePath()}else s=1;a=d,l=p,u=m}function f(d){var p,h=d.length,m,g=!1,y;for(i==null&&(i=y=Gp()),p=0;p<=h;++p)!(p<h&&o(m=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(m,p,d),+r(m,p,d),+n(m,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function J5(t,r){return t??r}function Nve(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Uur(t,r){return Rur.context(t)(r)}function Vur(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?Lur:Pur).curve(Dve(o,n.orient,n.tension)).context(t)(r)}function Gur(t,r){let n=r[0],o=n.interpolate||"linear";return jur.curve(Dve(o,n.orient,n.tension)).context(t)(r)}function WM(t,r,n,o){return Bur.context(t)(r,n,o)}function Wur(t,r){return(r.mark.shape||r.shape).context(t)(r)}function qur(t,r){return $ur.context(t)(r)}function Hur(t,r){return zur.context(t)(r)}function eut(){Jlt=1}function Mve(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+Jlt++),a=i.clipping[s]||(i.clipping[s]={id:s});return Dn(o)?a.path=o(null):Nve(n)?a.path=WM(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Tu(t){this.clear(),t&&this.union(t)}function Fve(t){this.mark=t,this.bounds=this.bounds||new Tu}function Ove(t){Fve.call(this,t),this.items=this.items||[]}function Rve(t){this._pending=0,this._loader=t||mK()}function Alt(t){t._pending+=1}function W5(t){t._pending-=1}function qT(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?Yur(r,o):0))}return t}function Yur(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function rB(t,r){return OK=t,r?(VT=r*J_,bve=vve=Math.cos(VT),xK=Math.sin(VT),xve=-xK):(bve=vve=1,VT=xK=xve=0),Kur}function Dlt(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function Nlt(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>uur?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(Mlt(u,t,r,n,o)),0<c&&c<1&&i(Mlt(c,t,r,n,o))}function Mlt(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function Pve(t){return function(r,n){if(!Q_)return!0;t(Q_,r),wve.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=wve;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(Q_.isPointInPath(u,l))return!0;return!1}}function Lve(t,r){return r.contains(t.x||0,t.y||0)}function tut(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(wve.set(n,o,n+i,o+s))}function rut(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return $M(r,n,o,i,s)}function $M(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-c,m=-(s-r)),y===1&&(h=c,m=l-r),y===2&&(h=-f,m=-(a-n)),y===3&&(h=f,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>p)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function UM(t,r){t.globalCompositeOperation=r.blend||"source-over"}function Am(t,r){return t??r}function Flt(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function Zur(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+Am(r.x1,.5)*o,n.y1+Am(r.y1,.5)*i,Math.max(o,i)*Am(r.r1,0),n.x1+Am(r.x2,.5)*o,n.y1+Am(r.y2,.5)*i,Math.max(o,i)*Am(r.r2,.5));else{let a=Am(r.x1,0),l=Am(r.y1,0),u=Am(r.x2,1),c=Am(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=lf(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=Flt(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return Flt(s,r.stops)}function nut(t,r,n){return kve(n)?Zur(t,n,r.bounds):n}function CK(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=nut(t,r,r.fill),!0):!1}function VM(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=nut(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||Qur),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function Jur(t,r){return t.zindex-r.zindex||t.index-r.index}function jve(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(Jur)}function Dm(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=jve(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function EK(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=jve(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function Bve(t){return function(r,n,o){Dm(n,i=>{(!o||o.intersects(i.bounds))&&out(t,r,i,i)})}}function ecr(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&out(t,r,n.items[0],n.items)}}function out(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(UM(r,n),n.fill&&CK(r,n,i)&&r.fill(),n.stroke&&VM(r,n,i)&&r.stroke()))}function RK(t){return t=t||W0,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,EK(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function nB(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function $ve(t){return RK(nB(t))}function GT(t,r){return"translate("+t+","+r+")"}function zve(t){return"rotate("+t+")"}function tcr(t,r){return"scale("+t+","+r+")"}function iut(t){return GT(t.x||0,t.y||0)}function rcr(t){return GT(t.x||0,t.y||0)+(t.angle?" "+zve(t.angle):"")}function ncr(t){return GT(t.x||0,t.y||0)+(t.angle?" "+zve(t.angle):"")+(t.scaleX||t.scaleY?" "+tcr(t.scaleX||1,t.scaleY||1):"")}function Uve(t,r,n){function o(a,l){a("transform",rcr(l)),a("d",r(null,l))}function i(a,l){return r(rB(a,l.angle),l),qT(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=J_),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:Bve(s),pick:$ve(s),isect:n||Pve(s)}}function icr(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function scr(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function acr(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function Vve(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(rB(u),f),qT(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=nB(s);function l(u,c,f,d,p,h){var m=c.items,g=c.bounds;return!m||!m.length||g&&!g.contains(p,h)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,m,f,d)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:ecr(s),pick:l,isect:Lve,tip:n}}function ucr(t,r){var n=r.clip;t.save(),Dn(n)?(t.beginPath(),n(t),t.clip()):sut(t,r.group)}function sut(t,r){t.beginPath(),Nve(r)?WM(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function aut(t){let r=Am(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function ccr(t,r){t("transform",iut(r))}function lut(t,r){let n=aut(r);t("d",WM(null,r,n,n))}function fcr(t,r){t("class","background"),t("aria-hidden",!0),lut(t,r)}function dcr(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?lut(t,r):t("d","")}function pcr(t,r,n){let o=r.clip?Mve(n,r,r):null;t("clip-path",o)}function hcr(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),qT(t,r),t.translate(r.x||0,r.y||0)}function K5(t,r,n,o){let i=aut(r);t.beginPath(),WM(t,r,(n||0)+i,(o||0)+i)}function bcr(t,r,n){Dm(r,o=>{let i=o.x||0,s=o.y||0,a=o.strokeForeground,l=o.opacity==null?1:o.opacity;(o.stroke||o.fill)&&l&&(K5(t,o,i,s),UM(t,o),o.fill&&CK(t,o,l)&&t.fill(),o.stroke&&!a&&VM(t,o,l)&&t.stroke()),t.save(),t.translate(i,s),o.clip&&sut(t,o),n&&n.translate(-i,-s),Dm(o,u=>{this.draw(t,u,n)}),n&&n.translate(i,s),t.restore(),a&&o.stroke&&l&&(K5(t,o,i,s),UM(t,o),VM(t,o,l)&&t.stroke())})}function xcr(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return EK(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let h=f+(u.width||0),m=d+(u.height||0),g=u.clip;if(g&&(i<f||i>h||s<d||s>m))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&Nve(u)&&!ycr(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&gcr(t,u,a,l)?(t.restore(),u):(c=EK(u,x=>vcr(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&mcr(t,u,a,l)&&(c=u),t.restore(),c||null)})}function vcr(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function Gve(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function Wve(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function qve(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function PK(t,r){return t==="center"?r/2:t==="right"?r:0}function LK(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function _cr(t,r,n){let o=Gve(r,n),i=Wve(r,o),s=qve(r,o),a=(r.x||0)-PK(r.align,i),l=(r.y||0)-LK(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,Z5["xmlns:xlink"],"xlink:href"),t("transform",GT(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function Scr(t,r){let n=r.image,o=Wve(r,n),i=qve(r,n),s=(r.x||0)-PK(r.align,o),a=(r.y||0)-LK(r.baseline,i);return t.set(s,a,s+o,a+i)}function Ccr(t,r,n){Dm(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=Gve(o,this),s=Wve(o,i),a=qve(o,i);if(s===0||a===0)return;let l=(o.x||0)-PK(o.align,s),u=(o.y||0)-LK(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(UM(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function Acr(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",ncr(r)),t("d",r.path)}function wK(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*J_,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=WT(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),zM(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):zM(t,u,o,i,s,a)}function kcr(t,r){return wK(rB(t,r.angle),r)?t.set(0,0,0,0):qT(t,r,!0)}function Dcr(t,r){t("d",WM(null,r))}function Ncr(t,r){var n,o;return qT(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function Olt(t,r){t.beginPath(),WM(t,r)}function Fcr(t,r){t("transform",iut(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function Ocr(t,r){var n,o;return qT(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function uut(t,r,n){var o,i,s,a;return r.stroke&&VM(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function Rcr(t,r,n){Dm(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&uut(t,o,i)&&(UM(t,o),t.stroke())}})}function Pcr(t,r,n,o){return t.isPointInStroke?uut(t,r,1)&&t.isPointInStroke(n,o):!1}function cut(t){Im.width=t&&Q_?Hve:_ve}function _ve(t,r){return fut(t2(t,r),Ny(t))}function fut(t,r){return~~(.8*t.length*r)}function Hve(t,r){return Ny(t)<=0||!(r=t2(t,r))?0:dut(r,jK(t))}function dut(t,r){let n=`(${r}) ${t}`,o=Rlt.get(n);return o===void 0&&(Q_.font=r,o=Q_.measureText(t).width,Rlt.set(n,o)),o}function Ny(t){return t.fontSize!=null?+t.fontSize||0:11}function e2(t){return t.lineHeight!=null?t.lineHeight:Ny(t)+2}function $cr(t){return Hr(t)?t.length>1?t:t[0]:t}function oB(t){return $cr(t.lineBreak&&t.text&&!Hr(t.text)?t.text.split(t.lineBreak):t.text)}function zcr(t){let r=oB(t);return(Hr(r)?r.length-1:0)*e2(t)}function t2(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?Vcr(t,n):n}function Ucr(t){if(Im.width===Hve){let r=jK(t);return n=>dut(n,r)}else{let r=Ny(t);return n=>fut(n,r)}}function Vcr(t,r){var n=+t.limit,o=Ucr(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function iB(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function jK(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Ny(t)+"px "+iB(t,r)}function Yve(t){var r=t.baseline,n=Ny(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*e2(t):r==="line-bottom"?.29*n-.5*e2(t):0)}function BK(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-$T,r+=o*Math.cos(i),n+=o*Math.sin(i)),H5.x1=r,H5.y1=n,H5}function Wcr(t,r){var n=r.dx||0,o=(r.dy||0)+Yve(r),i=BK(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",Gcr[r.align]||"start"),l?(u=GT(s,a)+" "+zve(l),(n||o)&&(u+=" "+GT(n,o))):u=GT(s+n,a+o),t("transform",u)}function Xve(t,r,n){var o=Im.height(r),i=r.align,s=BK(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+Yve(r)-Math.round(.8*o),f=oB(r),d;if(Hr(f)?(o+=e2(r)*(f.length-1),d=f.reduce((p,h)=>Math.max(p,Im.width(r,h)),0)):d=Im.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*J_,a,l);else if(n===2)return t.rotatedPoints(r.angle*J_,a,l);return t}function qcr(t,r,n){Dm(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=jK(o),t.textAlign=o.align||"left",s=BK(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*J_),a=l=0),a+=o.dx||0,l+=(o.dy||0)+Yve(o),f=oB(o),UM(t,o),Hr(f))for(c=e2(o),u=0;u<f.length;++u)d=t2(o,f[u]),o.fill&&CK(t,o,i)&&t.fillText(d,a,l),o.stroke&&VM(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=t2(o,f),o.fill&&CK(t,o,i)&&t.fillText(d,a,l),o.stroke&&VM(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function Hcr(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=BK(r),l=a.x1,u=a.y1,c=Xve(H5,r,1),f=-r.angle*J_,d=Math.cos(f),p=Math.sin(f),h=d*i-p*s+(l-d*l+p*u),m=p*i+d*s+(u-p*l-d*u);return c.contains(h,m)}function Ycr(t,r){let n=Xve(H5,t,2);return $M(r,n[0],n[1],n[2],n[3])||$M(r,n[0],n[1],n[4],n[5])||$M(r,n[4],n[5],n[6],n[7])||$M(r,n[2],n[3],n[6],n[7])}function Sve(t,r,n){var o=jd[t.mark.marktype],i=r||o.bound;return o.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Tu),t,n)}function put(t,r,n){var o=jd[t.marktype],i=o.bound,s=t.items,a=s&&s.length,l,u,c,f;if(o.nested)return a?c=s[0]:(Plt.mark=t,c=Plt),f=Sve(c,i,n),r=r&&r.union(f)||f,r;if(r=r||t.bounds&&t.bounds.clear()||new Tu,a)for(l=0,u=s.length;l<u;++l)r.union(Sve(s[l],i,n));return t.bounds=r}function hut(t,r){return JSON.stringify(t,Zcr,r)}function mut(t){let r=typeof t=="string"?JSON.parse(t):t;return gut(r)}function gut(t){var r=t.marktype,n=t.items,o,i,s;if(n)for(i=0,s=n.length;i<s;++i)o=r?"mark":"group",n[i][o]=t,n[i].zindex&&(n[i][o].zdirty=!0),(r||o)==="group"&&gut(n[i]);return r&&put(t),t}function $K(t){arguments.length?this.root=mut(t):(this.root=yut({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ove(this.root)])}function yut(t,r){let n={bounds:new Tu,clip:!!t.clip,group:r,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function K_(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function Kve(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function xf(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=K_(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function km(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function but(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function sB(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function Qcr(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=jd[i.marktype]).tip){for(a=sB(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function r2(t,r){this._active=null,this._handlers={},this._loader=t||mK(),this._tooltip=r||Jcr}function Jcr(t,r,n,o){t.element().setAttribute("title",o||"")}function My(t){this._el=null,this._bgcolor=null,this._loader=new Rve(t)}function qM(t,r){r2.call(this,t,r),this._down=null,this._touch=null,this._first=!0,this._events={}}function Llt(t,r){afr(r).forEach(n=>lfr(t,n))}function lfr(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function jlt(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?this.fire(t,o):((!i||!i.exit)&&this.fire(n,o),this._active=s,this.fire(r,o),this.fire(t,o))}}function Blt(t){return function(r){this.fire(t,r),this._active=null}}function ufr(){return typeof window<"u"&&window.devicePixelRatio||1}function ffr(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?cfr:i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function NK(t){My.call(this,t),this._options={},this._redraw=!1,this._dirty=new Tu,this._tempb=new Tu}function pfr(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function Zve(t,r){r2.call(this,t,r);let n=this;n._hrefHandler=Ave(n,(o,i)=>{i&&i.href&&n.handleHref(o,i,i.href)}),n._tooltipHandler=Ave(n,(o,i)=>{n.handleTooltip(o,i,o.type!==Q5)})}function Tut(t,r){let n=r.aria===!1;if(t(Sut,n||void 0),n||r.description==null)for(let o in Ult)t(Ult[o],void 0);else{let o=r.mark.marktype;t(Qve,r.description),t(Jve,r.ariaRole||(o==="group"?Cut:t1e)),t(e1e,r.ariaRoleDescription||`${o} mark`)}}function Aut(t){return t.aria===!1?{[Sut]:!0}:hfr[t.role]?null:zlt[t.role]?gfr(t,zlt[t.role]):mfr(t)}function mfr(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return Eut(n?Cut:t1e,`${r} mark container`,t.description)}function gfr(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return Eut(r.role||t1e,r.desc,n.description||o(n))}catch{return null}}function Vlt(t){return Br(t.text).join(" ")}function yfr(t){let r=t.datum,n=t.orient,o=r.title?kut(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${L_(l)?"discrete":l} scale with ${F0e(a,s,t)}`}function bfr(t){let r=t.datum,n=r.title?kut(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return vfr(o)+(n?` titled '${n}'`:"")+` for ${xfr(s)} with ${F0e(u,l,t)}`}function kut(t){try{return Br(Un(t.items).items[0].text).join(" ")}catch{return null}}function xfr(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Un(t)}function vfr(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function r1e(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${wfr(c)}"`),l),l={open(u,...c){s(u),r="<"+u;for(let f of c)for(let d in f)a(d,f[d]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=Iut(u),l),toString:()=>t};return l}function Nut(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes,o=n.length;for(let i=0;i<o;i++){let s=n[i];s.nodeType===3?t.text(s.nodeValue):Nut(t,s)}}return t.close()}function n1e(t){My.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Wlt(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function _fr(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=xf(t,n++,"pattern",Na);Z_(a,{id:SK+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=xf(a,0,"rect",Na),Z_(a,{width:1,height:1,fill:`url(${Fut()}#${r.id})`}),t=xf(t,n++,"radialGradient",Na),Z_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=xf(t,n++,"linearGradient",Na),Z_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=xf(t,o,"stop",Na),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return km(t,o),n}function Sfr(t,r,n){let o;return t=xf(t,n,"clipPath",Na),t.setAttribute("id",r.id),r.path?(o=xf(t,0,"path",Na),o.setAttribute("d",r.path)):(o=xf(t,0,"rect",Na),Z_(o,{x:0,y:0,width:r.width,height:r.height})),km(t,1),n+1}function Cfr(t,r,n){r=r.lastChild.previousSibling;let o,i=0;Dm(n,s=>{o=t.mark(r,s,o),++i}),km(r,1+i)}function qlt(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=K_(a,o,Na),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=K_(a,"path",Na);s.appendChild(l),l.__data__=t;let u=K_(a,"g",Na);s.appendChild(u),u.__data__=t;let c=K_(a,"path",Na);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Efr(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function Efr(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function X5(t,r,n){r!==Eu[t]&&(n?Afr(Dv,t,r,n):Tc(Dv,t,r),Eu[t]=r)}function gve(t,r,n){n!==Eu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),Eu[r]=n)}function Z_(t,r){for(let n in r)Tc(t,n,r[n])}function Tc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function Afr(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function Fut(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function o1e(t){My.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function kfr(t,r,n,o,i){if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),o==="text"&&(t["font-family"]=iB(r),t["font-size"]=Ny(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let s in MK){let a=r[s],l=MK[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(kve(a)&&(a=Ylt(a,i.gradient,"")),t[l]=a)}return t}function aB(t,r){return t=String(t||"").toLowerCase(),arguments.length>1?(GM[t]=r,this):GM[t]}function i1e(t,r,n){let o=[],i=new Tu().union(r),s=t.marktype;return s?jut(t,i,n,o):s==="group"?But(t,i,n,o):pt("Intersect scene must be mark node or group item.")}function jut(t,r,n,o){if(Ifr(t,r,n)){let i=t.items,s=t.marktype,a=i.length,l=0;if(s==="group")for(;l<a;++l)But(i[l],r,n,o);else for(let u=jd[s].isect;l<a;++l){let c=i[l];$ut(c,r,u)&&o.push(c)}}return o}function Ifr(t,r,n){return t.bounds&&r.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function But(t,r,n,o){n&&n(t.mark)&&$ut(t,r,jd.group.isect)&&o.push(t);let i=t.items,s=i&&i.length;if(s){let a=t.x||0,l=t.y||0;r.translate(-a,-l);for(let u=0;u<s;++u)jut(i[u],r,n,o);r.translate(a,l)}return o}function $ut(t,r,n){let o=t.bounds;return r.encloses(o)||r.intersects(o)&&n(t,r)}function Dfr(t){let r=t.clip;if(Dn(r))r(rB(yve.clear()));else if(r)yve.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(yve)}function s1e(t,r,n){return t===r?!0:n==="path"?zut(t,r):t instanceof Date&&r instanceof Date?+t==+r:q0(t)&&q0(r)?Math.abs(t-r)<=Nfr:!t||!r||!un(t)&&!un(r)?t==r:Mfr(t,r)}function zut(t,r){return s1e(WT(t),WT(r))}function Mfr(t,r){var n=Object.keys(t),o=Object.keys(r),i,s;if(n.length!==o.length)return!1;for(n.sort(),o.sort(),s=n.length-1;s>=0;s--)if(n[s]!=o[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!s1e(t[i],r[i],i))return!1;return typeof t==typeof r}function Ffr(){eut(),aur()}var Hlt,SK,Slt,lur,G5,J_,uur,$T,Dy,BM,cve,fve,Xlt,qp,Elt,Tlt,dve,Y_,eB,tB,bur,xur,vur,wur,_ur,Sur,Cur,Eur,Tur,Aur,kur,Iur,Dur,Nur,Mur,Fur,FK,Our,Rur,Pur,Lur,jur,Bur,$ur,zur,Jlt,Xur,OK,yK,bK,VT,bve,xK,xve,vve,X_,vK,klt,Ilt,zT,UT,pve,hve,Kur,Q_,wve,Qur,ocr,lcr,mcr,gcr,ycr,wcr,Z5,Ecr,Tcr,Icr,Mcr,Lcr,jcr,Bcr,Rlt,Im,Gcr,H5,Xcr,Kcr,jd,Plt,Zcr,efr,tfr,rfr,xut,_K,vut,Cve,nfr,TK,Y5,wut,AK,ofr,ifr,_ut,kK,IK,DK,sfr,Eve,Q5,Tve,afr,cfr,$lt,dfr,Ave,Sut,Qve,Jve,e1e,Cut,t1e,Eut,hfr,zlt,Ult,Iut,wfr,Dut,MK,Mut,q5,Glt,Na,mve,Dv,Eu,Tfr,Out,Rut,Put,Lut,Nv,GM,yve,Nfr,lB=N(()=>{"use strict";Ls();Bat();PM();SN();uve();dM();Hlt=0;SK="p_";Slt={basis:{curve:vxe},"basis-closed":{curve:wxe},"basis-open":{curve:_xe},bundle:{curve:Sxe,tension:"beta",value:.85},cardinal:{curve:Cxe,tension:"tension",value:0},"cardinal-open":{curve:Axe,tension:"tension",value:0},"cardinal-closed":{curve:Exe,tension:"tension",value:0},"catmull-rom":{curve:Ixe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Dxe,tension:"alpha",value:.5},"catmull-rom-open":{curve:Nxe,tension:"alpha",value:.5},linear:{curve:LT},"linear-closed":{curve:Mxe},monotone:{horizontal:Rxe,vertical:Oxe},natural:{curve:Pxe},step:{curve:Lxe},"step-after":{curve:Bxe},"step-before":{curve:jxe}};lur={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},G5=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];J_=Math.PI/180,uur=1e-14,$T=Math.PI/2,Dy=Math.PI*2,BM=Math.sqrt(3)/2,cve={},fve={},Xlt=[].join;qp=["l",0,0,0,0,0,0,0];Elt=.5773502691896257,Tlt={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,Dy)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=BM*n,i=o-n*Elt,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=BM*n,i=o-n*Elt;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=BM*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=BM*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=BM*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=BM*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};dve={};Y_=.448084975506;eB=t=>t.x||0,tB=t=>t.y||0,bur=t=>t.width||0,xur=t=>t.height||0,vur=t=>(t.x||0)+(t.width||0),wur=t=>(t.y||0)+(t.height||0),_ur=t=>t.startAngle||0,Sur=t=>t.endAngle||0,Cur=t=>t.padAngle||0,Eur=t=>t.innerRadius||0,Tur=t=>t.outerRadius||0,Aur=t=>t.cornerRadius||0,kur=t=>J5(t.cornerRadiusTopLeft,t.cornerRadius)||0,Iur=t=>J5(t.cornerRadiusTopRight,t.cornerRadius)||0,Dur=t=>J5(t.cornerRadiusBottomRight,t.cornerRadius)||0,Nur=t=>J5(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Mur=t=>J5(t.size,64),Fur=t=>t.size||1,FK=t=>t.defined!==!1,Our=t=>Klt(t.shape||"circle"),Rur=mxe().startAngle(_ur).endAngle(Sur).padAngle(Cur).innerRadius(Eur).outerRadius(Tur).cornerRadius(Aur),Pur=eK().x(eB).y1(tB).y0(wur).defined(FK),Lur=eK().y(tB).x1(eB).x0(vur).defined(FK),jur=M5().x(eB).y(tB).defined(FK),Bur=Zlt().x(eB).y(tB).width(bur).height(xur).cornerRadius(kur,Iur,Dur,Nur),$ur=xxe().type(Our).size(Mur),zur=Qlt().x(eB).y(tB).defined(FK).size(Fur);Jlt=1;Tu.prototype={clone(){return new Tu(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};Dt(Ove,Fve);Rve.prototype={pending(){return this._pending},sanitizeURL(t){let r=this;return Alt(r),r._loader.sanitize(t,{context:"href"}).then(n=>(W5(r),n)).catch(()=>(W5(r),null))},loadImage(t){let r=this,n=Dq();return Alt(r),r._loader.sanitize(t,{context:"image"}).then(o=>{let i=o.href;if(!i||!n)throw{url:i};let s=new n,a=Pr(o,"crossOrigin")?o.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>W5(r),s.onerror=()=>W5(r),s.src=i,s}).catch(o=>(W5(r),{complete:!1,width:0,height:0,src:o&&o.url||""}))},ready(){let t=this;return new Promise(r=>{function n(o){t.pending()?setTimeout(()=>{n(!0)},10):r(o)}n(!1)})}};Xur=Dy-1e-8,X_=(t,r)=>OK.add(t,r),vK=(t,r)=>X_(yK=t,bK=r),klt=t=>X_(t,OK.y1),Ilt=t=>X_(OK.x1,t),zT=(t,r)=>bve*t+xve*r,UT=(t,r)=>xK*t+vve*r,pve=(t,r)=>X_(zT(t,r),UT(t,r)),hve=(t,r)=>vK(zT(t,r),UT(t,r));Kur={beginPath(){},closePath(){},moveTo:hve,lineTo:hve,rect(t,r,n,o){VT?(pve(t+n,r),pve(t+n,r+o),pve(t,r+o),hve(t,r)):(X_(t+n,r+o),vK(t,r))},quadraticCurveTo(t,r,n,o){let i=zT(t,r),s=UT(t,r),a=zT(n,o),l=UT(n,o);Dlt(yK,i,a,klt),Dlt(bK,s,l,Ilt),vK(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=zT(t,r),l=UT(t,r),u=zT(n,o),c=UT(n,o),f=zT(i,s),d=UT(i,s);Nlt(yK,a,u,f,klt),Nlt(bK,l,c,d,Ilt),vK(f,d)},arc(t,r,n,o,i,s){if(o+=VT,i+=VT,yK=n*Math.cos(i)+t,bK=n*Math.sin(i)+r,Math.abs(i-o)>Xur)X_(t-n,r-n),X_(t+n,r+n);else{let a=c=>X_(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%Dy,o<0&&(o+=Dy),i=i%Dy,i<0&&(i+=Dy),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=Dy,l=o-o%$T,u=0;u<4&&l>i;++u,l-=$T)a(l);else for(l=o-o%$T+$T,u=0;u<4&&l<i;++u,l=l+$T)a(l)}}};Q_=(Q_=lf(1,1))?Q_.getContext("2d"):null,wve=new Tu;Qur=[];ocr=Uve("arc",Uur);lcr=Vve("area",Vur,icr);mcr=nB(K5),gcr=nB(K5,!1),ycr=nB(K5,!0);wcr={type:"group",tag:"g",nested:!1,attr:ccr,bound:hcr,draw:bcr,pick:xcr,isect:tut,content:pcr,background:fcr,foreground:dcr},Z5={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};Ecr={type:"image",tag:"image",nested:!1,attr:_cr,bound:Scr,draw:Ccr,pick:RK(),isect:W0,get:Gve,xOffset:PK,yOffset:LK},Tcr=Vve("line",Gur,scr);Icr={type:"path",tag:"path",nested:!1,attr:Acr,bound:kcr,draw:Bve(wK),pick:$ve(wK),isect:Pve(wK)};Mcr={type:"rect",tag:"path",nested:!1,attr:Dcr,bound:Ncr,draw:Bve(Olt),pick:$ve(Olt),isect:tut};Lcr={type:"rule",tag:"line",nested:!1,attr:Fcr,bound:Ocr,draw:Rcr,pick:RK(Pcr),isect:rut},jcr=Uve("shape",Wur),Bcr=Uve("symbol",qur,Lve),Rlt=$ce(),Im={height:Ny,measureWidth:Hve,estimateWidth:_ve,width:_ve,canvas:cut};cut(!0);Gcr={left:"start",center:"middle",right:"end"},H5=new Tu;Xcr={type:"text",tag:"text",nested:!1,attr:Wcr,bound:Xve,draw:qcr,pick:RK(Hcr),isect:Ycr},Kcr=Vve("trail",Hur,acr),jd={arc:ocr,area:lcr,group:wcr,image:Ecr,line:Tcr,path:Icr,rect:Mcr,rule:Lcr,shape:jcr,symbol:Bcr,text:Xcr,trail:Kcr};Plt={mark:null};Zcr=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];$K.prototype={toJSON(t){return hut(this.root,t||0)},mark(t,r,n){r=r||this.root.items[0];let o=yut(t,r);return r.items[n]=o,o.zindex&&(o.group.zdirty=!0),o}};r2.prototype={initialize(t,r,n){return this._el=t,this._obj=n||null,this.origin(r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,r,n){for(let o=t?t.length:0;--o>=0;)if(t[o].type===r&&(!n||t[o].handler===n))return o;return-1},handlers(t){let r=this._handlers,n=[];if(t)n.push(...r[this.eventName(t)]);else for(let o in r)n.push(...r[o]);return n},eventName(t){let r=t.indexOf(".");return r<0?t:t.slice(0,r)},handleHref(t,r,n){this._loader.sanitize(n,{context:"href"}).then(o=>{let i=new MouseEvent(t.type,t),s=K_(null,"a");for(let a in o)s.setAttribute(a,o[a]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(t,r,n){if(r&&r.tooltip!=null){r=Qcr(r,t,this.canvas(),this._origin);let o=n&&r&&r.tooltip||null;this._tooltip.call(this._obj,this,t,r,o)}},getItemBoundingClientRect(t){let r=this.canvas();if(!r)return;let n=r.getBoundingClientRect(),o=this._origin,i=t.bounds,s=i.width(),a=i.height(),l=i.x1+o[0]+n.left,u=i.y1+o[1]+n.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};My.prototype={initialize(t,r,n,o,i){return this._el=t,this.resize(r,n,o,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,r,n,o){return this._width=t,this._height=r,this._origin=n||[0,0],this._scale=o||1,this},dirty(){},render(t){let r=this;return r._call=function(){r._render(t)},r._call(),r._call=null,r},_render(){},renderAsync(t){let r=this.render(t);return this._ready?this._ready.then(()=>r):Promise.resolve(r)},_load(t,r){var n=this,o=n._loader[t](r);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return o},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};efr="keydown",tfr="keypress",rfr="keyup",xut="dragenter",_K="dragleave",vut="dragover",Cve="mousedown",nfr="mouseup",TK="mousemove",Y5="mouseout",wut="mouseover",AK="click",ofr="dblclick",ifr="wheel",_ut="mousewheel",kK="touchstart",IK="touchmove",DK="touchend",sfr=[efr,tfr,rfr,xut,_K,vut,Cve,nfr,TK,Y5,wut,AK,ofr,ifr,_ut,kK,IK,DK],Eve=TK,Q5=Y5,Tve=AK;afr=t=>t===kK||t===IK||t===DK?[kK,IK,DK]:[t];Dt(qM,r2,{initialize(t,r,n){return this._canvas=t&&Kve(t,"canvas"),[AK,Cve,TK,Y5,_K].forEach(o=>Llt(this,o)),r2.prototype.initialize.call(this,t,r,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:sfr,DOMMouseScroll(t){this.fire(_ut,t)},mousemove:jlt(TK,wut,Y5),dragover:jlt(vut,xut,_K),mouseout:Blt(Y5),dragleave:Blt(_K),mousedown(t){this._down=this._active,this.fire(Cve,t)},click(t){this._down===this._active&&(this.fire(AK,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(kK,t,!0)},touchmove(t){this.fire(IK,t,!0)},touchend(t){this.fire(DK,t,!0),this._touch=null},fire(t,r,n){let o=n?this._touch:this._active,i=this._handlers[t];if(r.vegaType=t,t===Tve&&o&&o.href?this.handleHref(r,o,o.href):(t===Eve||t===Q5)&&this.handleTooltip(r,o,t!==Q5),i)for(let s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,r,o)},on(t,r){let n=this.eventName(t),o=this._handlers;return this._handlerIndex(o[n],t,r)<0&&(Llt(this,t),(o[n]||(o[n]=[])).push({type:t,handler:r})),this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&o.splice(i,1),this},pickEvent(t){let r=sB(t,this._canvas),n=this._origin;return this.pick(this._scene,r[0],r[1],r[0]-n[0],r[1]-n[1])},pick(t,r,n,o,i){let s=this.context();return jd[t.marktype].pick.call(this,s,t,r,n,o,i)}});cfr=ufr();$lt=My.prototype,dfr=(t,r,n)=>new Tu().set(0,0,r,n).translate(-t[0],-t[1]);Dt(NK,My,{initialize(t,r,n,o,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:lf(1,1,this._options.type),t&&this._canvas&&(km(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),$lt.initialize.call(this,t,r,n,o,i)},resize(t,r,n,o){if($lt.resize.call(this,t,r,n,o),this._canvas)ffr(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||pt("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){let r=this._tempb.clear().union(t.bounds),n=t.mark.group;for(;n;)r.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(r)},_render(t){let r=this.context(),n=this._origin,o=this._width,i=this._height,s=this._dirty,a=dfr(n,o,i);r.save();let l=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):pfr(r,a.intersect(s),n);return this.clear(-n[0],-n[1],o,i),this.draw(r,t,l),r.restore(),s.clear(),this},draw(t,r,n){let o=jd[r.marktype];r.clip&&ucr(t,r),o.draw.call(this,t,r,n),r.clip&&t.restore()},clear(t,r,n,o){let i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(t,r,n,o),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,r,n,o))}});Ave=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)};Dt(Zve,r2,{initialize(t,r,n){let o=this._svg;return o&&(o.removeEventListener(Tve,this._hrefHandler),o.removeEventListener(Eve,this._tooltipHandler),o.removeEventListener(Q5,this._tooltipHandler)),this._svg=o=t&&Kve(t,"svg"),o&&(o.addEventListener(Tve,this._hrefHandler),o.addEventListener(Eve,this._tooltipHandler),o.addEventListener(Q5,this._tooltipHandler)),r2.prototype.initialize.call(this,t,r,n)},canvas(){return this._svg},on(t,r){let n=this.eventName(t),o=this._handlers;if(this._handlerIndex(o[n],t,r)<0){let s={type:t,handler:r,listener:Ave(this,r)};(o[n]||(o[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&(this._svg&&this._svg.removeEventListener(n,o[i].listener),o.splice(i,1)),this}});Sut="aria-hidden",Qve="aria-label",Jve="role",e1e="aria-roledescription",Cut="graphics-object",t1e="graphics-symbol",Eut=(t,r,n)=>({[Jve]:t,[e1e]:r,[Qve]:n||void 0}),hfr=gu(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),zlt={axis:{desc:"axis",caption:yfr},legend:{desc:"legend",caption:bfr},"title-text":{desc:"title",caption:t=>`Title text '${Vlt(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Vlt(t)}'`}},Ult={ariaRole:Jve,ariaRoleDescription:e1e,description:Qve};Iut=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wfr=t=>Iut(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");Dut=t=>Nut(r1e(),t)+"";MK={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Mut={fill:"none","stroke-miterlimit":10},q5=0,Glt="http://www.w3.org/2000/xmlns/",Na=Z5.xmlns;mve=My.prototype;Dt(n1e,My,{initialize(t,r,n,o,i){return this._defs={},this._clearDefs(),t&&(this._svg=xf(t,0,"svg",Na),this._svg.setAttributeNS(Glt,"xmlns",Na),this._svg.setAttributeNS(Glt,"xmlns:xlink",Z5["xmlns:xlink"]),this._svg.setAttribute("version",Z5.version),this._svg.setAttribute("class","marks"),km(t,1),this._root=xf(this._svg,q5,"g",Na),Z_(this._root,Mut),km(this._svg,q5+1)),this.background(this._bgcolor),mve.initialize.call(this,t,r,n,o,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),mve.background.apply(this,arguments)},resize(t,r,n,o){return mve.resize.call(this,t,r,n,o),this._svg&&(Z_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let t=this._svg,r=this._bgcolor;if(!t)return null;let n;r&&(t.removeAttribute("style"),n=xf(t,q5,"rect",Na),Z_(n,{width:this._width,height:this._height,fill:r}));let o=Dut(t);return r&&(t.removeChild(n),this._svg.style.setProperty("background-color",r)),o},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),km(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let t=this._dirty;if(!t.length||!this._dirtyID)return!0;let r=++this._dirtyID,n,o,i,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(n=t[a],o=n.mark,o.marktype!==i&&(i=o.marktype,s=jd[i]),o.zdirty&&o.dirty!==r&&(this._dirtyAll=!1,Wlt(n,r),o.items.forEach(c=>{c.dirty=r})),!o.zdirty){if(n.exit){s.nested&&o.items.length?(u=o.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?o.items[0]:n,n._update!==r&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Wlt(n,r)):this._update(s,n._svg,n),n._update=r)}return!this._dirtyAll},mark(t,r,n){if(!this.isDirty(r))return r._svg;let o=this._svg,i=jd[r.marktype],s=r.interactive===!1?"none":null,a=i.tag==="g",l=null,u=0,c=qlt(r,t,n,"g",o);c.setAttribute("class",but(r));let f=Aut(r);for(let p in f)Tc(c,p,f[p]);a||Tc(c,"pointer-events",s),Tc(c,"clip-path",r.clip?Mve(this,r,r.group):null);let d=p=>{let h=this.isDirty(p),m=qlt(p,c,l,i.tag,o);h&&(this._update(i,m,p),a&&Cfr(this,m,p)),l=m,++u};return i.nested?r.items.length&&d(r.items[0]):Dm(r,d),km(c,u),c},_update(t,r,n){Dv=r,Eu=r.__values__,Tut(X5,n),t.attr(X5,n,this);let o=Tfr[t.type];o&&o.call(this,t,r,n),Dv&&this.style(Dv,n)},style(t,r){if(r!=null)for(let n in MK){let o=n==="font"?iB(r):r[n];if(o===Eu[n])continue;let i=MK[n];o==null?t.removeAttribute(i):(kve(o)&&(o=Ylt(o,this._defs.gradient,Fut())),t.setAttribute(i,o+"")),Eu[n]=o}},defs(){let t=this._svg,r=this._defs,n=r.el,o=0;for(let i in r.gradient)n||(r.el=n=xf(t,q5+1,"defs",Na)),o=_fr(n,r.gradient[i],o);for(let i in r.clipping)n||(r.el=n=xf(t,q5+1,"defs",Na)),o=Sfr(n,r.clipping[i],o);n&&(o===0?(t.removeChild(n),r.el=null):km(n,o))},_clearDefs(){let t=this._defs;t.gradient={},t.clipping={}}});Dv=null,Eu=null,Tfr={group(t,r,n){let o=Dv=r.childNodes[2];Eu=o.__values__,t.foreground(X5,n,this),Eu=r.__values__,Dv=r.childNodes[1],t.content(X5,n,this);let i=Dv=r.childNodes[0];t.background(X5,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==Eu.events&&(Tc(o,"pointer-events",s),Tc(i,"pointer-events",s),Eu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;Tc(o,"display",null),this.style(i,n),Tc(i,"stroke",null),a&&(n.fill=null),Eu=o.__values__,this.style(o,n),a&&(n.fill=a),Dv=null}else Tc(o,"display","none")},image(t,r,n){n.smooth===!1?(gve(r,"image-rendering","optimizeSpeed"),gve(r,"image-rendering","pixelated")):gve(r,"image-rendering",null)},text(t,r,n){let o=oB(n),i,s,a,l;Hr(o)?(s=o.map(u=>t2(n,u)),i=s.join(`
`),i!==Eu.text&&(km(r,0),a=r.ownerDocument,l=e2(n),s.forEach((u,c)=>{let f=K_(a,"tspan",Na);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),Eu.text=i)):(s=t2(n,o),s!==Eu.text&&(r.textContent=s,Eu.text=s)),Tc(r,"font-family",iB(n)),Tc(r,"font-size",Ny(n)+"px"),Tc(r,"font-style",n.fontStyle),Tc(r,"font-variant",n.fontVariant),Tc(r,"font-weight",n.fontWeight)}};Dt(o1e,My,{svg(){return this._text},_render(t){let r=r1e();r.open("svg",an({},Z5,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&r.open("rect",{width:this._width,height:this._height,fill:n}).close(),r.open("g",Mut,{transform:"translate("+this._origin+")"}),this.mark(r,t),r.close(),this.defs(r),this._text=r.close()+"",this},mark(t,r){let n=jd[r.marktype],o=n.tag,i=[Tut,n.attr];t.open("g",{class:but(r),"clip-path":r.clip?Mve(this,r,r.group):null},Aut(r),{"pointer-events":o!=="g"&&r.interactive===!1?"none":null});let s=a=>{let l=this.href(a);if(l&&t.open("a",l),t.open(o,this.attr(r,a,i,o!=="g"?o:null)),o==="text"){let u=oB(a);if(Hr(u)){let c={x:0,dy:e2(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(t2(a,u[f])).close()}else t.text(t2(a,u))}else if(o==="g"){let u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(r,a,n.background,"bgrect")).close(),t.open("g",this.attr(r,a,n.content)),Dm(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(r,a,n.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(r,a,n.foreground,"bgfore")).close()}t.close(),l&&t.close()};return n.nested?r.items&&r.items.length&&s(r.items[0]):Dm(r,s),t.close()},href(t){let r=t.href,n;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then(o=>{o["xlink:href"]=o.href,o.href=null,(this._hrefs||(this._hrefs={}))[r]=o})}return null},attr(t,r,n,o){let i={},s=(a,l,u,c)=>{i[c||a]=l};return Array.isArray(n)?n.forEach(a=>a(s,r,this)):n(s,r,this),o&&kfr(i,r,t,o,this._defs),i},defs(t){let r=this._defs.gradient,n=this._defs.clipping;if(Object.keys(r).length+Object.keys(n).length!==0){t.open("defs");for(let i in r){let s=r[i],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:SK+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),t.close(),t.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(let i in n){let s=n[i];t.open("clipPath",{id:i}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});Out="canvas",Rut="png",Put="svg",Lut="none",Nv={Canvas:Out,PNG:Rut,SVG:Put,None:Lut},GM={};GM[Out]=GM[Rut]={renderer:NK,headless:NK,handler:qM};GM[Put]={renderer:n1e,headless:o1e,handler:Zve};GM[Lut]={};yve=new Tu;Nfr=1e-9});var m1e={};fn(m1e,{label:()=>h1e});function Lfr(t,r){let n=t.bitmap();return(r||[]).forEach(o=>n.set(t(o.boundary[0]),t(o.boundary[3]))),[n,void 0]}function jfr(t,r,n,o){let i=t.width,s=t.height,a=n||o,l=lf(i,s).getContext("2d");r.forEach(y=>Vut(l,y,a));let u=new Uint32Array(l.getImageData(0,0,i,s).data.buffer),c=t.bitmap(),f=a&&t.bitmap(),d,p,h,m,g;for(p=0;p<s;++p)for(d=0;d<i;++d)g=u[p*i+d]&Ofr,g&&(h=t(d),m=t(p),o||c.set(h,m),a&&g^Rfr&&f.set(h,m));return[c,f]}function Vut(t,r,n){if(!r.length)return;let o=r[0].mark.marktype;o==="group"?r.forEach(i=>{i.items.forEach(s=>Vut(t,s.items,n))}):jd[o].draw(t,{items:n?r.map(Bfr):r})}function Bfr(t){let r=IE(t,{});return r.stroke&&(r.strokeOpacity=1),r.fill&&(r.fillOpacity=Pfr,r.stroke="#000",r.strokeOpacity=1,r.strokeWidth=2),r}function $fr(t,r){let n=new Uint32Array(~~((t*r+uB)/uB));function o(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{let l=a*t+s;return n[l>>>Mv]&1<<(l&Ac)},set:(s,a)=>{let l=a*t+s;o(l>>>Mv,1<<(l&Ac))},clear:(s,a)=>{let l=a*t+s;i(l>>>Mv,~(1<<(l&Ac)))},getRange:(s,a,l,u)=>{let c=u,f,d,p,h;for(;c>=a;--c)if(f=c*t+s,d=c*t+l,p=f>>>Mv,h=d>>>Mv,p===h){if(n[p]&n2[f&Ac]&Nm[(d&Ac)+1])return!0}else{if(n[p]&n2[f&Ac]||n[h]&Nm[(d&Ac)+1])return!0;for(let m=p+1;m<h;++m)if(n[m])return!0}return!1},setRange:(s,a,l,u)=>{let c,f,d,p,h;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>Mv,p=f>>>Mv,d===p)o(d,n2[c&Ac]&Nm[(f&Ac)+1]);else for(o(d,n2[c&Ac]),o(p,Nm[(f&Ac)+1]),h=d+1;h<p;++h)o(h,4294967295)},clearRange:(s,a,l,u)=>{let c,f,d,p,h;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>Mv,p=f>>>Mv,d===p)i(d,Nm[c&Ac]|n2[(f&Ac)+1]);else for(i(d,Nm[c&Ac]),i(p,n2[(f&Ac)+1]),h=d+1;h<p;++h)i(h,0)},outOfBounds:(s,a,l,u)=>s<0||a<0||u>=r||l>=t}}function zfr(t,r,n){let o=Math.max(1,Math.sqrt(t*r/1e6)),i=~~((t+2*n+o)/o),s=~~((r+2*n+o)/o),a=l=>~~((l+n)/o);return a.invert=l=>l*o-n,a.bitmap=()=>$fr(i,s),a.ratio=o,a.padding=n,a.width=t,a.height=r,a}function Ufr(t,r,n,o){let i=t.width,s=t.height;return function(a){let l=a.datum.datum.items[o].items,u=l.length,c=a.datum.fontSize,f=Im.width(a.datum,a.datum.text),d=0,p,h,m,g,y,b,x;for(let v=0;v<u;++v)p=l[v].x,m=l[v].y,h=l[v].x2===void 0?p:l[v].x2,g=l[v].y2===void 0?m:l[v].y2,y=(p+h)/2,b=(m+g)/2,x=Math.abs(h-p+g-m),x>=d&&(d=x,a.x=y,a.y=b);return y=f/2,b=c/2,p=a.x-y,h=a.x+y,m=a.y-b,g=a.y+b,a.align="center",p<0&&h<=i?a.align="left":0<=p&&i<h&&(a.align="right"),a.baseline="middle",m<0&&g<=s?a.baseline="top":0<=m&&s<g&&(a.baseline="bottom"),!0}}function zK(t,r,n,o,i,s){let a=n/2;return t-a<0||t+a>i||r-(a=o/2)<0||r+a>s}function o2(t,r,n,o,i,s,a,l){let u=i*s/(o*2),c=t(r-u),f=t(r+u),d=t(n-(s=s/2)),p=t(n+s);return a.outOfBounds(c,d,f,p)||a.getRange(c,d,f,p)||l&&l.getRange(c,d,f,p)}function Vfr(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1];function u(c,f,d,p,h){let m=t.invert(c),g=t.invert(f),y=d,b=s,x;if(!zK(m,g,p,h,i,s)&&!o2(t,m,g,h,p,y,a,l)&&!o2(t,m,g,h,p,h,a,null)){for(;b-y>=1;)x=(y+b)/2,o2(t,m,g,h,p,x,a,l)?b=x:y=x;if(y>d)return[m,g,y,!0]}}return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,h=Im.width(c.datum,c.datum.text),m=n?p:0,g=!1,y=!1,b=0,x,v,w,_,S,C,E,T,I,k,F,D,L,P,R,V,G;for(let U=0;U<d;++U){for(x=f[U].x,w=f[U].y,v=f[U].x2===void 0?x:f[U].x2,_=f[U].y2===void 0?w:f[U].y2,x>v&&(G=x,x=v,v=G),w>_&&(G=w,w=_,_=G),I=t(x),F=t(v),k=~~((I+F)/2),D=t(w),P=t(_),L=~~((D+P)/2),E=k;E>=I;--E)for(T=L;T>=D;--T)V=u(E,T,m,h,p),V&&([c.x,c.y,m,g]=V);for(E=k;E<=F;++E)for(T=L;T<=P;++T)V=u(E,T,m,h,p),V&&([c.x,c.y,m,g]=V);!g&&!n&&(R=Math.abs(v-x+_-w),S=(x+v)/2,C=(w+_)/2,R>=b&&!zK(S,C,h,p,i,s)&&!o2(t,S,C,p,h,p,a,null)&&(b=R,c.x=S,c.y=C,y=!0))}return g||y?(S=h/2,C=p/2,a.setRange(t(c.x-S),t(c.y-C),t(c.x+S),t(c.y+C)),c.align="center",c.baseline="middle",!0):!1}}function qfr(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=t.bitmap();return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,h=Im.width(c.datum,c.datum.text),m=[],g=n?p:0,y=!1,b=!1,x=0,v,w,_,S,C,E,T,I,k,F,D,L;for(let P=0;P<d;++P){for(v=f[P].x,_=f[P].y,w=f[P].x2===void 0?v:f[P].x2,S=f[P].y2===void 0?_:f[P].y2,m.push([t((v+w)/2),t((_+S)/2)]);m.length;)if([T,I]=m.pop(),!(a.get(T,I)||l.get(T,I)||u.get(T,I))){u.set(T,I);for(let R=0;R<4;++R)C=T+Gfr[R],E=I+Wfr[R],u.outOfBounds(C,E,C,E)||m.push([C,E]);if(C=t.invert(T),E=t.invert(I),k=g,F=s,!zK(C,E,h,p,i,s)&&!o2(t,C,E,p,h,k,a,l)&&!o2(t,C,E,p,h,p,a,null)){for(;F-k>=1;)D=(k+F)/2,o2(t,C,E,p,h,D,a,l)?F=D:k=D;k>g&&(c.x=C,c.y=E,g=k,y=!0)}}!y&&!n&&(L=Math.abs(w-v+S-_),C=(v+w)/2,E=(_+S)/2,L>=x&&!zK(C,E,h,p,i,s)&&!o2(t,C,E,p,h,p,a,null)&&(x=L,c.x=C,c.y=E,b=!0))}return y||b?(C=h/2,E=p/2,a.setRange(t(c.x-C),t(c.y-E),t(c.x+C),t(c.y+E)),c.align="center",c.baseline="middle",!0):!1}}function Xfr(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=o.length;return function(c){let f=c.boundary,d=c.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let p=0,h,m,g,y,b,x,v,w,_,S,C,E,T,I,k;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,m=(n[F]>>>2&3)-1,g=h===0&&m===0||o[F]<0,y=h&&m?Math.SQRT1_2:1,b=o[F]<0?-1:1,x=f[1+h]+o[F]*h*y,C=f[4+m]+b*d*m/2+o[F]*m*y,w=C-d/2,_=C+d/2,E=t(x),I=t(w),k=t(_),!p)if(Uut(E,E,I,k,a,l,x,x,w,_,f,g))p=Im.width(c.datum,c.datum.text);else continue;if(S=x+b*p*h/2,x=S-p/2,v=S+p/2,E=t(x),T=t(v),Uut(E,T,I,k,a,l,x,v,w,_,f,g))return c.x=h?h*b<0?v:x:S,c.y=m?m*b<0?_:w:C,c.align=Hfr[h*b+1],c.baseline=Yfr[m*b+1],a.setRange(E,I,T,k),!0}return!1}}function Uut(t,r,n,o,i,s,a,l,u,c,f,d){return!(i.outOfBounds(t,n,r,o)||(d&&s?s.getRange(t,n,r,o)||!Kfr(a,u,l,c,f):i.getRange(t,n,r,o)))}function Kfr(t,r,n,o,i){return i[0]<=t&&n<=i[2]&&i[3]<=r&&o<=i[5]}function Jfr(t,r,n,o,i,s,a,l,u,c,f){if(!t.length)return t;let d=Math.max(o.length,i.length),p=edr(o,d),h=tdr(i,d),m=rdr(t[0].datum),g=m==="group"&&t[0].datum.items[u].marktype,y=g==="area",b=ndr(m,g,l,u),x=zfr(r[0],r[1],c),v=y&&f==="naive",w=t.map(C=>({datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(C)})),_;if(!v){n&&w.sort((E,T)=>n(E.datum,T.datum));let C=!1;for(let E=0;E<h.length&&!C;++E)C=h[E]===5||p[E]<0;m&&(a||y)&&(s=[t.map(E=>E.datum)].concat(s)),_=s.length?jfr(x,s,C,y):Lfr(x,a&&w)}let S=y?Qfr[f](x,_,a,u):Xfr(x,_,h,p);return w.forEach(C=>C.opacity=+S(C)),w}function edr(t,r){let n=new Float64Array(r),o=t.length;for(let i=0;i<o;++i)n[i]=t[i]||0;for(let i=o;i<r;++i)n[i]=n[o-1];return n}function tdr(t,r){let n=new Int8Array(r),o=t.length;for(let i=0;i<o;++i)n[i]|=Zfr[t[i]];for(let i=o;i<r;++i)n[i]=n[o-1];return n}function rdr(t){return t&&t.mark&&t.mark.marktype}function ndr(t,r,n,o){let i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>i(s.datum):r==="line"?s=>{let a=s.datum.items[o].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{let a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}function h1e(t){et.call(this,null,t)}var Ofr,Rfr,Pfr,Mv,Ac,uB,n2,Nm,Gfr,Wfr,Hfr,Yfr,a1e,l1e,u1e,c1e,f1e,d1e,Zfr,Qfr,p1e,Gut,Wut=N(()=>{"use strict";SN();el();lB();Ls();Ofr=4278190080,Rfr=268435456,Pfr=.0625;Mv=5,Ac=31,uB=32,n2=new Uint32Array(uB+1),Nm=new Uint32Array(uB+1);Nm[0]=0;n2[0]=~Nm[0];for(let t=1;t<=uB;++t)Nm[t]=Nm[t-1]<<1|1,n2[t]=~Nm[t];Gfr=[-1,-1,1,1],Wfr=[-1,1,-1,1];Hfr=["right","center","left"],Yfr=["bottom","middle","top"];a1e=0,l1e=4,u1e=8,c1e=0,f1e=1,d1e=2,Zfr={"top-left":a1e+c1e,top:a1e+f1e,"top-right":a1e+d1e,left:l1e+c1e,middle:l1e+f1e,right:l1e+d1e,"bottom-left":u1e+c1e,bottom:u1e+f1e,"bottom-right":u1e+d1e},Qfr={naive:Ufr,"reduced-search":Vfr,floodfill:qfr};p1e=["x","y","opacity","align","baseline"],Gut=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];h1e.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Gut},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:p1e.length,default:p1e}]};Dt(h1e,et,{transform(t,r){function n(s){let a=t[s];return Dn(a)&&r.modified(a.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&pt("Size parameter should be specified as a [width, height] array.");let i=t.as||p1e;return Jfr(r.materialize(r.SOURCE).source,t.size,t.sort,Br(t.offset||1),Br(t.anchor||Gut),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(s=>{let a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),r.reflow(o).modifies(i)}})});var x1e={};fn(x1e,{loess:()=>y1e,regression:()=>b1e});function qut(t,r){var n=[],o=function(f){return f(l)},i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function y1e(t){et.call(this,null,t)}function b1e(t){et.call(this,null,t)}var g1e,odr,Hut=N(()=>{"use strict";pN();el();Ls();y1e.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Dt(y1e,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=qut(o,t.groupby),s=(t.groupby||[]).map(Oi),a=s.length,l=t.as||[Oi(t.x),Oi(t.y)],u=[];i.forEach(c=>{ude(c,t.x,t.y,t.bandwidth||.3).forEach(f=>{let d={};for(let p=0;p<a;++p)d[s[p]]=c.dims[p];d[l[0]]=f[0],d[l[1]]=f[1],u.push(Nn(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});g1e={linear:iq,log:ide,exp:sde,pow:ade,quad:sq,poly:lde},odr=(t,r)=>t==="poly"?r:t==="quad"?2:1;b1e.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(g1e)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Dt(b1e,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=qut(o,t.groupby),s=(t.groupby||[]).map(Oi),a=t.method||"linear",l=t.order||3,u=odr(a,l),c=t.as||[Oi(t.x),Oi(t.y)],f=g1e[a],d=[],p=t.extent;Pr(g1e,a)||pt("Invalid regression method: "+a),p!=null&&a==="log"&&p[0]<=0&&(r.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(h=>{if(h.length<=u){r.dataflow.warn("Skipping regression with more parameters than data points.");return}let g=f(h,t.x,t.y,l);if(t.params){d.push(Nn({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}let y=p||Qh(h,t.x),b=x=>{let v={};for(let w=0;w<s.length;++w)v[s[w]]=h.dims[w];v[c[0]]=x[0],v[c[1]]=x[1],d.push(Nn(v))};a==="linear"?y.forEach(x=>b([x,g.predict(x)])):dN(g.predict,y,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}})});function idr(t,r){let n=t/(Math.abs(t)+Math.abs(r));return(r>0?3-n:1+n)/4}function v1e(t,r,n,o){let i=t-n,s=r-o;return i*i+s*s}function w1e(t,r,n,o,i,s){let a=(o-r)*(i-t),l=(n-t)*(s-r);return Math.abs(a-l)>=33306690738754716e-32*Math.abs(a+l)?a-l:0}function VK(t,r,n,o,i,s){return(w1e(i,s,t,r,n,o)||w1e(t,r,n,o,i,s)||w1e(n,o,i,s,t,r))<0}function sdr(t,r,n,o,i,s,a,l){let u=t-a,c=r-l,f=n-a,d=o-l,p=i-a,h=s-l,m=u*u+c*c,g=f*f+d*d,y=p*p+h*h;return u*(d*y-g*h)-c*(f*y-g*p)+m*(f*h-d*p)<0}function adr(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),h=(c*f-l*d)*p,m=(a*d-u*f)*p;return h*h+m*m}function ldr(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),h=t+(c*f-l*d)*p,m=r+(a*d-u*f)*p;return{x:h,y:m}}function HM(t,r,n,o){if(o-n<=20)for(let i=n+1;i<=o;i++){let s=t[i],a=r[s],l=i-1;for(;l>=n&&r[t[l]]>a;)t[l+1]=t[l--];t[l+1]=s}else{let i=n+o>>1,s=n+1,a=o;cB(t,i,s),r[t[n]]>r[t[o]]&&cB(t,n,o),r[t[s]]>r[t[o]]&&cB(t,s,o),r[t[n]]>r[t[s]]&&cB(t,n,s);let l=t[s],u=r[l];for(;;){do s++;while(r[t[s]]<u);do a--;while(r[t[a]]>u);if(a<s)break;cB(t,s,a)}t[n+1]=t[a],t[a]=l,o-s+1>=a-n?(HM(t,r,s,o),HM(t,r,n,a-1)):(HM(t,r,n,a-1),HM(t,r,s,o))}}function cB(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function udr(t){return t[0]}function cdr(t){return t[1]}var Yut,UK,fB,Xut=N(()=>{"use strict";Yut=Math.pow(2,-52),UK=new Uint32Array(512),fB=class t{static from(r,n=udr,o=cdr){let i=r.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){let l=r[a];s[2*a]=n(l),s[2*a+1]=o(l)}return new t(s)}constructor(r){let n=r.length>>1;if(n>0&&typeof r[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=r;let o=Math.max(2*n-5,0);this._triangles=new Uint32Array(o*3),this._halfedges=new Int32Array(o*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:r,_hullPrev:n,_hullNext:o,_hullTri:i,_hullHash:s}=this,a=r.length>>1,l=1/0,u=1/0,c=-1/0,f=-1/0;for(let I=0;I<a;I++){let k=r[2*I],F=r[2*I+1];k<l&&(l=k),F<u&&(u=F),k>c&&(c=k),F>f&&(f=F),this._ids[I]=I}let d=(l+c)/2,p=(u+f)/2,h=1/0,m,g,y;for(let I=0;I<a;I++){let k=v1e(d,p,r[2*I],r[2*I+1]);k<h&&(m=I,h=k)}let b=r[2*m],x=r[2*m+1];h=1/0;for(let I=0;I<a;I++){if(I===m)continue;let k=v1e(b,x,r[2*I],r[2*I+1]);k<h&&k>0&&(g=I,h=k)}let v=r[2*g],w=r[2*g+1],_=1/0;for(let I=0;I<a;I++){if(I===m||I===g)continue;let k=adr(b,x,v,w,r[2*I],r[2*I+1]);k<_&&(y=I,_=k)}let S=r[2*y],C=r[2*y+1];if(_===1/0){for(let F=0;F<a;F++)this._dists[F]=r[2*F]-r[0]||r[2*F+1]-r[1];HM(this._ids,this._dists,0,a-1);let I=new Uint32Array(a),k=0;for(let F=0,D=-1/0;F<a;F++){let L=this._ids[F];this._dists[L]>D&&(I[k++]=L,D=this._dists[L])}this.hull=I.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(VK(b,x,v,w,S,C)){let I=g,k=v,F=w;g=y,v=S,w=C,y=I,S=k,C=F}let E=ldr(b,x,v,w,S,C);this._cx=E.x,this._cy=E.y;for(let I=0;I<a;I++)this._dists[I]=v1e(r[2*I],r[2*I+1],E.x,E.y);HM(this._ids,this._dists,0,a-1),this._hullStart=m;let T=3;o[m]=n[y]=g,o[g]=n[m]=y,o[y]=n[g]=m,i[m]=0,i[g]=1,i[y]=2,s.fill(-1),s[this._hashKey(b,x)]=m,s[this._hashKey(v,w)]=g,s[this._hashKey(S,C)]=y,this.trianglesLen=0,this._addTriangle(m,g,y,-1,-1,-1);for(let I=0,k,F;I<this._ids.length;I++){let D=this._ids[I],L=r[2*D],P=r[2*D+1];if(I>0&&Math.abs(L-k)<=Yut&&Math.abs(P-F)<=Yut||(k=L,F=P,D===m||D===g||D===y))continue;let R=0;for(let X=0,fe=this._hashKey(L,P);X<this._hashSize&&(R=s[(fe+X)%this._hashSize],!(R!==-1&&R!==o[R]));X++);R=n[R];let V=R,G;for(;G=o[V],!VK(L,P,r[2*V],r[2*V+1],r[2*G],r[2*G+1]);)if(V=G,V===R){V=-1;break}if(V===-1)continue;let U=this._addTriangle(V,D,o[V],-1,-1,i[V]);i[D]=this._legalize(U+2),i[V]=U,T++;let H=o[V];for(;G=o[H],VK(L,P,r[2*H],r[2*H+1],r[2*G],r[2*G+1]);)U=this._addTriangle(H,D,G,i[D],-1,i[H]),i[D]=this._legalize(U+2),o[H]=H,T--,H=G;if(V===R)for(;G=n[V],VK(L,P,r[2*G],r[2*G+1],r[2*V],r[2*V+1]);)U=this._addTriangle(G,D,V,-1,i[V],i[G]),this._legalize(U+2),i[G]=U,o[V]=V,T--,V=G;this._hullStart=n[D]=V,o[V]=n[H]=D,o[D]=H,s[this._hashKey(L,P)]=D,s[this._hashKey(r[2*V],r[2*V+1])]=V}this.hull=new Uint32Array(T);for(let I=0,k=this._hullStart;I<T;I++)this.hull[I]=k,k=o[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(r,n){return Math.floor(idr(r-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(r){let{_triangles:n,_halfedges:o,coords:i}=this,s=0,a=0;for(;;){let l=o[r],u=r-r%3;if(a=u+(r+2)%3,l===-1){if(s===0)break;r=UK[--s];continue}let c=l-l%3,f=u+(r+1)%3,d=c+(l+2)%3,p=n[a],h=n[r],m=n[f],g=n[d];if(sdr(i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*g],i[2*g+1])){n[r]=g,n[l]=p;let b=o[d];if(b===-1){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=r;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(r,b),this._link(l,o[a]),this._link(a,d);let x=c+(l+1)%3;s<UK.length&&(UK[s++]=x)}else{if(s===0)break;r=UK[--s]}}return a}_link(r,n){this._halfedges[r]=n,n!==-1&&(this._halfedges[n]=r)}_addTriangle(r,n,o,i,s,a){let l=this.trianglesLen;return this._triangles[l]=r,this._triangles[l+1]=n,this._triangles[l+2]=o,this._link(l,i),this._link(l+1,s),this._link(l+2,a),this.trianglesLen+=3,l}}});var Mm,_1e=N(()=>{"use strict";Mm=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(r,n){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(r,n){this._+=`L${this._x1=+r},${this._y1=+n}`}arc(r,n,o){r=+r,n=+n,o=+o;let i=r+o,s=n;if(o<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),o&&(this._+=`A${o},${o},0,1,1,${r-o},${n}A${o},${o},0,1,1,${this._x1=i},${this._y1=s}`)}rect(r,n,o,i){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${+o}v${+i}h${-o}Z`}value(){return this._||null}}});var HT,S1e=N(()=>{"use strict";HT=class{constructor(){this._=[]}moveTo(r,n){this._.push([r,n])}closePath(){this._.push(this._[0].slice())}lineTo(r,n){this._.push([r,n])}value(){return this._.length?this._:null}}});var GK,Kut=N(()=>{"use strict";_1e();S1e();GK=class{constructor(r,[n,o,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=r,this._circumcenters=new Float64Array(r.points.length*2),this.vectors=new Float64Array(r.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=o,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:r,hull:n,triangles:o},vectors:i}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let h=0,m=0,g=o.length,y,b;h<g;h+=3,m+=2){let x=o[h]*2,v=o[h+1]*2,w=o[h+2]*2,_=r[x],S=r[x+1],C=r[v],E=r[v+1],T=r[w],I=r[w+1],k=C-_,F=E-S,D=T-_,L=I-S,P=k*k+F*F,R=D*D+L*L,V=(k*L-F*D)*2;if(!V)y=(_+T)/2-1e8*L,b=(S+I)/2+1e8*D;else if(Math.abs(V)<1e-8)y=(_+T)/2,b=(S+I)/2;else{let G=1/V;y=_+(L*P-F*R)*G,b=S+(k*R-D*P)*G}s[m]=y,s[m+1]=b}let a=n[n.length-1],l,u=a*4,c,f=r[2*a],d,p=r[2*a+1];i.fill(0);for(let h=0;h<n.length;++h)a=n[h],l=u,c=f,d=p,u=a*4,f=r[2*a],p=r[2*a+1],i[l+2]=i[u]=d-p,i[l+3]=i[u+1]=f-c}render(r){let n=r==null?r=new Mm:void 0,{delaunay:{halfedges:o,inedges:i,hull:s},circumcenters:a,vectors:l}=this;if(s.length<=1)return null;for(let f=0,d=o.length;f<d;++f){let p=o[f];if(p<f)continue;let h=Math.floor(f/3)*2,m=Math.floor(p/3)*2,g=a[h],y=a[h+1],b=a[m],x=a[m+1];this._renderSegment(g,y,b,x,r)}let u,c=s[s.length-1];for(let f=0;f<s.length;++f){u=c,c=s[f];let d=Math.floor(i[c]/3)*2,p=a[d],h=a[d+1],m=u*4,g=this._project(p,h,l[m+2],l[m+3]);g&&this._renderSegment(p,h,g[0],g[1],r)}return n&&n.value()}renderBounds(r){let n=r==null?r=new Mm:void 0;return r.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(r,n){let o=n==null?n=new Mm:void 0,i=this._clip(r);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),o&&o.value()}*cellPolygons(){let{delaunay:{points:r}}=this;for(let n=0,o=r.length/2;n<o;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(r){let n=new HT;return this.renderCell(r,n),n.value()}_renderSegment(r,n,o,i,s){let a,l=this._regioncode(r,n),u=this._regioncode(o,i);l===0&&u===0?(s.moveTo(r,n),s.lineTo(o,i)):(a=this._clipSegment(r,n,o,i,l,u))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(r,n,o){return n=+n,n!==n||(o=+o,o!==o)?!1:this.delaunay._step(r,n,o)===r}*neighbors(r){let n=this._clip(r);if(n)for(let o of this.delaunay.neighbors(r)){let i=this._clip(o);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let l=0,u=i.length;l<u;l+=2)if(n[s]==i[l]&&n[s+1]==i[l+1]&&n[(s+2)%a]==i[(l+u-2)%u]&&n[(s+3)%a]==i[(l+u-1)%u]){yield o;break e}}}}_cell(r){let{circumcenters:n,delaunay:{inedges:o,halfedges:i,triangles:s}}=this,a=o[r];if(a===-1)return null;let l=[],u=a;do{let c=Math.floor(u/3);if(l.push(n[c*2],n[c*2+1]),u=u%3===2?u-2:u+1,s[u]!==r)break;u=i[u]}while(u!==a&&u!==-1);return l}_clip(r){if(r===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(r);if(n===null)return null;let{vectors:o}=this,i=r*4;return o[i]||o[i+1]?this._clipInfinite(r,n,o[i],o[i+1],o[i+2],o[i+3]):this._clipFinite(r,n)}_clipFinite(r,n){let o=n.length,i=null,s,a,l=n[o-2],u=n[o-1],c,f=this._regioncode(l,u),d,p;for(let h=0;h<o;h+=2)if(s=l,a=u,l=n[h],u=n[h+1],c=f,f=this._regioncode(l,u),c===0&&f===0)d=p,p=0,i?i.push(l,u):i=[l,u];else{let m,g,y,b,x;if(c===0){if((m=this._clipSegment(s,a,l,u,c,f))===null)continue;[g,y,b,x]=m}else{if((m=this._clipSegment(l,u,s,a,f,c))===null)continue;[b,x,g,y]=m,d=p,p=this._edgecode(g,y),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(g,y):i=[g,y]}d=p,p=this._edgecode(b,x),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(b,x):i=[b,x]}if(i)d=p,p=this._edgecode(i[0],i[1]),d&&p&&this._edge(r,d,p,i,i.length);else if(this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(r,n,o,i,s,a){for(;;){if(s===0&&a===0)return[r,n,o,i];if(s&a)return null;let l,u,c=s||a;c&8?(l=r+(o-r)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=r+(o-r)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-r)/(o-r),l=this.xmax):(u=n+(i-n)*(this.xmin-r)/(o-r),l=this.xmin),s?(r=l,n=u,s=this._regioncode(r,n)):(o=l,i=u,a=this._regioncode(o,i))}}_clipInfinite(r,n,o,i,s,a){let l=Array.from(n),u;if((u=this._project(l[0],l[1],o,i))&&l.unshift(u[0],u[1]),(u=this._project(l[l.length-2],l[l.length-1],s,a))&&l.push(u[0],u[1]),l=this._clipFinite(r,l))for(let c=0,f=l.length,d,p=this._edgecode(l[f-2],l[f-1]);c<f;c+=2)d=p,p=this._edgecode(l[c],l[c+1]),d&&p&&(c=this._edge(r,d,p,l,c),f=l.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(r,n,o,i,s){for(;n!==o;){let a,l;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,l=this.ymin;break}(i[s]!==a||i[s+1]!==l)&&this.contains(r,a,l)&&(i.splice(s,0,a,l),s+=2)}if(i.length>4)for(let a=0;a<i.length;a+=2){let l=(a+2)%i.length,u=(a+4)%i.length;(i[a]===i[l]&&i[l]===i[u]||i[a+1]===i[l+1]&&i[l+1]===i[u+1])&&(i.splice(l,2),a-=2)}return s}_project(r,n,o,i){let s=1/0,a,l,u;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(u=this.ymin,l=r+(s=a)*o)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(u=this.ymax,l=r+(s=a)*o)}if(o>0){if(r>=this.xmax)return null;(a=(this.xmax-r)/o)<s&&(l=this.xmax,u=n+(s=a)*i)}else if(o<0){if(r<=this.xmin)return null;(a=(this.xmin-r)/o)<s&&(l=this.xmin,u=n+(s=a)*i)}return[l,u]}_edgecode(r,n){return(r===this.xmin?1:r===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(r,n){return(r<this.xmin?1:r>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}});function ddr(t){return t[0]}function pdr(t){return t[1]}function hdr(t){let{triangles:r,coords:n}=t;for(let o=0;o<r.length;o+=3){let i=2*r[o],s=2*r[o+1],a=2*r[o+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function mdr(t,r,n){return[t+Math.sin(t+r)*n,r+Math.cos(t-r)*n]}function gdr(t,r,n,o){let i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){let l=t[a];s[a*2]=r.call(o,l,a,t),s[a*2+1]=n.call(o,l,a,t)}return s}function*ydr(t,r,n,o){let i=0;for(let s of t)yield r.call(o,s,i,t),yield n.call(o,s,i,t),++i}var fdr,YM,dB,Zut=N(()=>{"use strict";Xut();_1e();S1e();Kut();fdr=2*Math.PI,YM=Math.pow;dB=class t{static from(r,n=ddr,o=pdr,i){return new t("length"in r?gdr(r,n,o,i):Float64Array.from(ydr(r,n,o,i)))}constructor(r){this._delaunator=new fB(r),this.inedges=new Int32Array(r.length/2),this._hullIndex=new Int32Array(r.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let r=this._delaunator,n=this.points;if(r.hull&&r.hull.length>2&&hdr(r)){this.collinear=Int32Array.from({length:n.length/2},(p,h)=>h).sort((p,h)=>n[2*p]-n[2*h]||n[2*p+1]-n[2*h+1]);let u=this.collinear[0],c=this.collinear[this.collinear.length-1],f=[n[2*u],n[2*u+1],n[2*c],n[2*c+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,h=n.length/2;p<h;++p){let m=mdr(n[2*p],n[2*p+1],d);n[2*p]=m[0],n[2*p+1]=m[1]}this._delaunator=new fB(n)}else delete this.collinear;let o=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let u=0,c=o.length;u<c;++u){let f=s[u%3===2?u-2:u+1];(o[u]===-1||a[f]===-1)&&(a[f]=u)}for(let u=0,c=i.length;u<c;++u)l[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],a[i[0]]=1,i.length===2&&(a[i[1]]=0))}voronoi(r){return new GK(this,r)}*neighbors(r){let{inedges:n,hull:o,_hullIndex:i,halfedges:s,triangles:a,collinear:l}=this;if(l){let d=l.indexOf(r);d>0&&(yield l[d-1]),d<l.length-1&&(yield l[d+1]);return}let u=n[r];if(u===-1)return;let c=u,f=-1;do{if(yield f=a[c],c=c%3===2?c-2:c+1,a[c]!==r)return;if(c=s[c],c===-1){let d=o[(i[r]+1)%o.length];d!==f&&(yield d);return}}while(c!==u)}find(r,n,o=0){if(r=+r,r!==r||(n=+n,n!==n))return-1;let i=o,s;for(;(s=this._step(o,r,n))>=0&&s!==o&&s!==i;)o=s;return s}_step(r,n,o){let{inedges:i,hull:s,_hullIndex:a,halfedges:l,triangles:u,points:c}=this;if(i[r]===-1||!c.length)return(r+1)%(c.length>>1);let f=r,d=YM(n-c[r*2],2)+YM(o-c[r*2+1],2),p=i[r],h=p;do{let m=u[h],g=YM(n-c[m*2],2)+YM(o-c[m*2+1],2);if(g<d&&(d=g,f=m),h=h%3===2?h-2:h+1,u[h]!==r)break;if(h=l[h],h===-1){if(h=s[(a[r]+1)%s.length],h!==m&&YM(n-c[h*2],2)+YM(o-c[h*2+1],2)<d)return h;break}}while(h!==p);return f}render(r){let n=r==null?r=new Mm:void 0,{points:o,halfedges:i,triangles:s}=this;for(let a=0,l=i.length;a<l;++a){let u=i[a];if(u<a)continue;let c=s[a]*2,f=s[u]*2;r.moveTo(o[c],o[c+1]),r.lineTo(o[f],o[f+1])}return this.renderHull(r),n&&n.value()}renderPoints(r,n=2){let o=r==null?r=new Mm:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){let l=i[s],u=i[s+1];r.moveTo(l+n,u),r.arc(l,u,n,0,fdr)}return o&&o.value()}renderHull(r){let n=r==null?r=new Mm:void 0,{hull:o,points:i}=this,s=o[0]*2,a=o.length;r.moveTo(i[s],i[s+1]);for(let l=1;l<a;++l){let u=2*o[l];r.lineTo(i[u],i[u+1])}return r.closePath(),n&&n.value()}hullPolygon(){let r=new HT;return this.renderHull(r),r.value()}renderTriangle(r,n){let o=n==null?n=new Mm:void 0,{points:i,triangles:s}=this,a=s[r*=3]*2,l=s[r+1]*2,u=s[r+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.lineTo(i[u],i[u+1]),n.closePath(),o&&o.value()}*trianglePolygons(){let{triangles:r}=this;for(let n=0,o=r.length/3;n<o;++n)yield this.trianglePolygon(n)}trianglePolygon(r){let n=new HT;return this.renderTriangle(r,n),n.value()}}});var Qut=N(()=>{"use strict";Zut()});var E1e={};fn(E1e,{voronoi:()=>C1e});function C1e(t){et.call(this,null,t)}function xdr(t){let r=t[0][0],n=t[0][1],o=t.length-1;for(;t[o][0]===r&&t[o][1]===n;--o);return"M"+t.slice(0,o+1).join("L")+"Z"}var bdr,Jut=N(()=>{"use strict";el();Ls();Qut();C1e.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};bdr=[-1e5,-1e5,1e5,1e5];Dt(C1e,et,{transform(t,r){let n=t.as||"path",o=r.source;if(!o||!o.length)return r;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:bdr;let s=this.value=dB.from(o,t.x,t.y).voronoi(i);for(let a=0,l=o.length;a<l;++a){let u=s.cellPolygon(a);o[a][n]=u?xdr(u):null}return r.reflow(t.modified()).modifies(n)}})});function XM(t,r,n){return t.fields=r||[],t.fname=n,t}function vdr(t){return t.length===1?wdr(t[0]):_dr(t)}function YT(t){throw Error(t)}function Sdr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||YT("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&YT("Access path missing closing bracket: "+t),o&&YT("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Cdr(t,r,n){let o=Sdr(t);return t=o.length===1?o[0]:t,XM((n&&n.get||vdr)(o),[t],r||t)}function A1e(t){return t[t.length-1]}function ect(t){return t==null||t===""?null:+t}function k1e(t){return t!=null?T1e(t)?t:[t]:[]}function WK(t){return typeof t=="function"}function qK(t){return WK(t)?t:()=>t}function tct(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function rct(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function nct(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),tct(o,n)}function I1e(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var wdr,_dr,KUo,ZUo,Edr,Tdr,QUo,JUo,T1e,HK=N(()=>{"use strict";wdr=t=>function(r){return r[t]},_dr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};KUo=Cdr("id"),ZUo=XM(t=>t,[],"identity"),Edr=XM(()=>0,[],"zero"),Tdr=XM(()=>1,[],"one"),QUo=XM(()=>!0,[],"true"),JUo=XM(()=>!1,[],"false"),T1e=Array.isArray});function Fy(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var YK=N(()=>{"use strict"});function D1e(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var oct=N(()=>{"use strict"});function XT(t){let r,n,o;t.length!==2?(r=Fy,n=(l,u)=>Fy(t(l),u),o=(l,u)=>t(l)-u):(r=t===Fy||t===D1e?t:Adr,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function Adr(){return 0}var N1e=N(()=>{"use strict";YK();oct()});function pB(t){return t===null?NaN:+t}var M1e=N(()=>{"use strict"});var ict,hB,kdr,Idr,Fm,sct=N(()=>{"use strict";YK();N1e();M1e();ict=XT(Fy),hB=ict.right,kdr=ict.left,Idr=XT(pB).center,Fm=hB});function XK(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=Ddr?10:s>=Ndr?5:s>=Mdr?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?XK(t,r,n*2):[l,u,c]}function KT(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?XK(r,t,n):XK(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function mB(t,r,n){return r=+r,t=+t,n=+n,XK(t,r,n)[2]}function KM(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?mB(r,t,n):mB(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var Ddr,Ndr,Mdr,act=N(()=>{"use strict";Ddr=Math.sqrt(50),Ndr=Math.sqrt(10),Mdr=Math.sqrt(2)});function F1e(t,r,n=pB){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var lct=N(()=>{"use strict";M1e()});function KK(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var uct=N(()=>{"use strict"});var Om=N(()=>{"use strict";sct();YK();N1e();lct();uct();act();eL()});function pa(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Oy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var Bd=N(()=>{"use strict"});function ZT(){var t=new Y0,r=[],n=[],o=O1e;function i(s){let a=t.get(s);if(a===void 0){if(o!==O1e)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Y0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return ZT(r,n).unknown(o)},pa.apply(i,arguments),i}var O1e,cct=N(()=>{"use strict";Om();Bd();O1e=Symbol("implicit")});function R1e(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function ZK(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return R1e((n-o/r)*r,a,i,s,l)}}var QK=N(()=>{"use strict"});function JK(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return R1e((n-o/r)*r,i,s,a,l)}}var P1e=N(()=>{"use strict";QK()});var ZM,L1e=N(()=>{"use strict";ZM=t=>()=>t});function fct(t,r){return function(n){return t+n*r}}function Fdr(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function i2(t,r){var n=r-t;return n?fct(t,n>180||n<-180?n-360*Math.round(n/360):n):ZM(isNaN(t)?r:t)}function dct(t){return(t=+t)==1?Ki:function(r,n){return n-r?Fdr(r,n,t):ZM(isNaN(r)?n:r)}}function Ki(t,r){var n=r-t;return n?fct(t,n):ZM(isNaN(t)?r:t)}var QT=N(()=>{"use strict";L1e()});function pct(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=ua(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var gB,hct,mct,j1e=N(()=>{"use strict";js();QK();P1e();QT();gB=function t(r){var n=dct(r);function o(i,s){var a=n((i=ua(i)).r,(s=ua(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Ki(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);hct=pct(ZK),mct=pct(JK)});function QM(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function eZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var tZ=N(()=>{"use strict"});function gct(t,r){return(eZ(r)?QM:B1e)(t,r)}function B1e(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=vf(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var $1e=N(()=>{"use strict";yB();tZ()});function rZ(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var z1e=N(()=>{"use strict"});function Au(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var bB=N(()=>{"use strict"});function nZ(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=vf(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var U1e=N(()=>{"use strict";yB()});function Odr(t){return function(){return t}}function Rdr(t){return function(r){return t(r)+""}}function oZ(t,r){var n=G1e.lastIndex=V1e.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=G1e.exec(t))&&(i=V1e.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Au(o,i)})),n=V1e.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?Rdr(u[0].x):Odr(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var G1e,V1e,W1e=N(()=>{"use strict";bB();G1e=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,V1e=new RegExp(G1e.source,"g")});function vf(t,r){var n=typeof r,o;return r==null||n==="boolean"?ZM(r):(n==="number"?Au:n==="string"?(o=df(r))?(r=o,gB):oZ:r instanceof df?gB:r instanceof Date?rZ:eZ(r)?QM:Array.isArray(r)?B1e:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?nZ:Au)(t,r)}var yB=N(()=>{"use strict";js();j1e();$1e();z1e();bB();U1e();W1e();L1e();tZ()});function yct(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var bct=N(()=>{"use strict"});function xct(t,r){var n=i2(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var vct=N(()=>{"use strict";QT()});function s2(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var wct=N(()=>{"use strict"});function q1e(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*_ct,skewX:Math.atan(u)*_ct,scaleX:a,scaleY:l}}var _ct,iZ,Sct=N(()=>{"use strict";_ct=180/Math.PI,iZ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function Cct(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?iZ:q1e(r.a,r.b,r.c,r.d,r.e,r.f)}function Ect(t){return t==null?iZ:(sZ||(sZ=document.createElementNS("http://www.w3.org/2000/svg","g")),sZ.setAttribute("transform",t),(t=sZ.transform.baseVal.consolidate())?(t=t.matrix,q1e(t.a,t.b,t.c,t.d,t.e,t.f)):iZ)}var sZ,Tct=N(()=>{"use strict";Sct()});function Act(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:Au(c,d)},{i:g-2,x:Au(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:Au(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:Au(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:Au(c,d)},{i:g-2,x:Au(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var kct,Ict,Dct=N(()=>{"use strict";bB();Tct();kct=Act(Cct,"px, ","px)","deg)"),Ict=Act(Ect,", ",")",")")});function Nct(t){return((t=Math.exp(t))+1/t)/2}function Ldr(t){return((t=Math.exp(t))-1/t)/2}function jdr(t){return((t=Math.exp(2*t))-1)/(t+1)}var Pdr,Mct,Fct=N(()=>{"use strict";Pdr=1e-12;Mct=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<Pdr)b=Math.log(p/c)/r,y=function(C){return[l+C*h,u+C*m,c*Math.exp(r*C*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);b=(S-_)/r,y=function(C){var E=C*b,T=Nct(_),I=c/(n*x)*(T*jdr(r*E+_)-Ldr(_));return[l+I*h,u+I*m,c*T/Nct(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function Oct(t){return function(r,n){var o=t((r=Dd(r)).h,(n=Dd(n)).h),i=Ki(r.s,n.s),s=Ki(r.l,n.l),a=Ki(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var Rct,Pct,Lct=N(()=>{"use strict";js();QT();Rct=Oct(i2),Pct=Oct(Ki)});function H1e(t,r){var n=Ki((t=pf(t)).l,(r=pf(r)).l),o=Ki(t.a,r.a),i=Ki(t.b,r.b),s=Ki(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var jct=N(()=>{"use strict";js();QT()});function Bct(t){return function(r,n){var o=t((r=Nd(r)).h,(n=Nd(n)).h),i=Ki(r.c,n.c),s=Ki(r.l,n.l),a=Ki(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var $ct,zct,Uct=N(()=>{"use strict";js();QT();$ct=Bct(i2),zct=Bct(Ki)});function Vct(t){return function r(n){n=+n;function o(i,s){var a=t((i=jp(i)).h,(s=jp(s)).h),l=Ki(i.s,s.s),u=Ki(i.l,s.l),c=Ki(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var Gct,Wct,qct=N(()=>{"use strict";js();QT();Gct=Vct(i2),Wct=Vct(Ki)});function JT(t,r){r===void 0&&(r=t,t=vf);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var Hct=N(()=>{"use strict";yB()});function Yct(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var Xct=N(()=>{"use strict"});var Y1e={};fn(Y1e,{interpolate:()=>vf,interpolateArray:()=>gct,interpolateBasis:()=>ZK,interpolateBasisClosed:()=>JK,interpolateCubehelix:()=>Gct,interpolateCubehelixLong:()=>Wct,interpolateDate:()=>rZ,interpolateDiscrete:()=>yct,interpolateHcl:()=>$ct,interpolateHclLong:()=>zct,interpolateHsl:()=>Rct,interpolateHslLong:()=>Pct,interpolateHue:()=>xct,interpolateLab:()=>H1e,interpolateNumber:()=>Au,interpolateNumberArray:()=>QM,interpolateObject:()=>nZ,interpolateRgb:()=>gB,interpolateRgbBasis:()=>hct,interpolateRgbBasisClosed:()=>mct,interpolateRound:()=>s2,interpolateString:()=>oZ,interpolateTransformCss:()=>kct,interpolateTransformSvg:()=>Ict,interpolateZoom:()=>Mct,piecewise:()=>JT,quantize:()=>Yct});var xB=N(()=>{"use strict";yB();$1e();QK();P1e();z1e();bct();vct();bB();tZ();U1e();wct();W1e();Dct();Fct();j1e();Lct();jct();Uct();qct();Hct();Xct()});function X1e(t){return function(){return t}}var Kct=N(()=>{"use strict"});function JM(t){return+t}var K1e=N(()=>{"use strict"});function Ul(t){return t}function Z1e(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:X1e(isNaN(r)?NaN:.5)}function Bdr(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function $dr(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=Z1e(i,o),s=n(a,s)):(o=Z1e(o,i),s=n(s,a)),function(l){return s(o(l))}}function zdr(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=Z1e(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=Fm(t,l,1,o)-1;return s[u](i[u](l))}}function Ry(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function eA(){var t=Zct,r=Zct,n=vf,o,i,s,a=Ul,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Ul&&(a=Bdr(t[0],t[p-1])),l=p>2?zdr:$dr,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),Au)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,JM),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=s2,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Ul,f()):a!==Ul},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function vB(){return eA()(Ul,Ul)}var Zct,a2=N(()=>{"use strict";Om();xB();Kct();K1e();Zct=[0,1]});function eF(t,r,n,o){var i=KM(t,r,n),s;switch(o=Od(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=tM(i,a))&&(o.precision=s),xT(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=rM(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=eM(i))&&(o.precision=s-(o.type==="%")*2);break}}return xm(o)}var Q1e=N(()=>{"use strict";Om();vT()});function $d(t){var r=t.domain;return t.ticks=function(n){var o=r();return KT(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return eF(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=mB(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function wB(){var t=vB();return t.copy=function(){return Ry(t,wB())},pa.apply(t,arguments),$d(t)}var l2=N(()=>{"use strict";Om();a2();Bd();Q1e()});function _B(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,JM),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return _B(t).unknown(r)},t=arguments.length?Array.from(t,JM):[0,1],$d(n)}var Qct=N(()=>{"use strict";l2();K1e()});function SB(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var J1e=N(()=>{"use strict"});function Jct(t){return Math.log(t)}function eft(t){return Math.exp(t)}function Udr(t){return-Math.log(-t)}function Vdr(t){return-Math.exp(-t)}function Gdr(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wdr(t){return t===10?Gdr:t===Math.E?Math.exp:r=>Math.pow(t,r)}function qdr(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function tft(t){return(r,n)=>-t(-r,n)}function CB(t){let r=t(Jct,eft),n=r.domain,o=10,i,s;function a(){return i=qdr(o),s=Wdr(o),n()[0]<0?(i=tft(i),s=tft(s),t(Udr,Vdr)):t(Jct,eft),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),h=i(f),m,g,y=l==null?10:+l,b=[];if(!(o%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(m=1;m<o;++m)if(g=p<0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=h;++p)for(m=o-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=KT(c,f,y))}else b=KT(p,h,Math.min(h-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=Od(u)).precision==null&&(u.trim=!0),u=xm(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(SB(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function EB(){let t=CB(eA()).domain([1,10]);return t.copy=()=>Ry(t,EB()).base(t.base()),pa.apply(t,arguments),t}var aZ=N(()=>{"use strict";Om();vT();J1e();a2();Bd()});function rft(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function nft(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function TB(t){var r=1,n=t(rft(r),nft(r));return n.constant=function(o){return arguments.length?t(rft(r=+o),nft(r)):r},$d(n)}function AB(){var t=TB(eA());return t.copy=function(){return Ry(t,AB()).constant(t.constant())},pa.apply(t,arguments)}var lZ=N(()=>{"use strict";l2();a2();Bd()});function oft(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function Hdr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ydr(t){return t<0?-t*t:t*t}function kB(t){var r=t(Ul,Ul),n=1;function o(){return n===1?t(Ul,Ul):n===.5?t(Hdr,Ydr):t(oft(n),oft(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},$d(r)}function tF(){var t=kB(eA());return t.copy=function(){return Ry(t,tF()).exponent(t.exponent())},pa.apply(t,arguments),t}function ewe(){return tF.apply(null,arguments).exponent(.5)}var uZ=N(()=>{"use strict";l2();a2();Bd()});function IB(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=F1e(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[Fm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Fy),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return IB().domain(t).range(r).unknown(o)},pa.apply(s,arguments)}var ift=N(()=>{"use strict";Om();Bd()});function DB(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Fm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return DB().domain([t,r]).range(i).unknown(s)},pa.apply($d(a),arguments)}var sft=N(()=>{"use strict";Om();l2();Bd()});function NB(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[Fm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return NB().domain(t).range(r).unknown(n)},pa.apply(i,arguments)}var aft=N(()=>{"use strict";Om();Bd()});function fi(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>fi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(twe.setTime(+s),rwe.setTime(+a),t(twe),t(rwe),Math.floor(n(twe,rwe))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var twe,rwe,Fv=N(()=>{"use strict";twe=new Date,rwe=new Date});var Rm,lft,nwe=N(()=>{"use strict";Fv();Rm=fi(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Rm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?fi(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Rm);lft=Rm.range});var ku,uft,owe=N(()=>{"use strict";Fv();ku=fi(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),uft=ku.range});var u2,Xdr,c2,Kdr,iwe=N(()=>{"use strict";Fv();u2=fi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),Xdr=u2.range,c2=fi(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),Kdr=c2.range});var f2,Zdr,d2,Qdr,swe=N(()=>{"use strict";Fv();f2=fi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),Zdr=f2.range,d2=fi(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),Qdr=d2.range});var Pm,Jdr,Ov,epr,cZ,tpr,awe=N(()=>{"use strict";Fv();Pm=fi(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Jdr=Pm.range,Ov=fi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),epr=Ov.range,cZ=fi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),tpr=cZ.range});function nA(t){return fi(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function oA(t){return fi(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var Ly,fft,dft,pft,hft,mft,gft,yft,rpr,npr,opr,ipr,spr,apr,jy,bft,xft,vft,wft,_ft,Sft,Cft,lpr,upr,cpr,fpr,dpr,ppr,lwe=N(()=>{"use strict";Fv();Ly=nA(0),fft=nA(1),dft=nA(2),pft=nA(3),hft=nA(4),mft=nA(5),gft=nA(6),yft=Ly.range,rpr=fft.range,npr=dft.range,opr=pft.range,ipr=hft.range,spr=mft.range,apr=gft.range;jy=oA(0),bft=oA(1),xft=oA(2),vft=oA(3),wft=oA(4),_ft=oA(5),Sft=oA(6),Cft=jy.range,lpr=bft.range,upr=xft.range,cpr=vft.range,fpr=wft.range,dpr=_ft.range,ppr=Sft.range});var Rv,hpr,Pv,mpr,uwe=N(()=>{"use strict";Fv();Rv=fi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),hpr=Rv.range,Pv=fi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),mpr=Pv.range});var Lv,gpr,jv,ypr,cwe=N(()=>{"use strict";Fv();Lv=fi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Lv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:fi(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});gpr=Lv.range,jv=fi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());jv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:fi(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});ypr=jv.range});function Tft(t,r,n,o,i,s){let a=[[ku,1,1e3],[ku,5,5*1e3],[ku,15,15*1e3],[ku,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=XT(([,,y])=>y).right(a,p);if(h===a.length)return t.every(KM(c/31536e6,f/31536e6,d));if(h===0)return Rm.every(Math.max(KM(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var fwe,dwe,pwe,hwe,Aft=N(()=>{"use strict";Om();nwe();owe();iwe();swe();awe();lwe();uwe();cwe();[fwe,dwe]=Tft(jv,Pv,jy,cZ,d2,c2),[pwe,hwe]=Tft(Lv,Rv,Ly,Pm,f2,u2)});var fZ=N(()=>{"use strict";nwe();owe();iwe();swe();awe();lwe();uwe();cwe();Aft()});function xpr(t){return new Date(t)}function vpr(t){return t instanceof Date?+t:+new Date(+t)}function dZ(t,r,n,o,i,s,a,l,u,c){var f=vB(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(S){return(u(S)<S?h:l(S)<S?m:a(S)<S?g:s(S)<S?y:o(S)<S?i(S)<S?b:x:n(S)<S?v:w)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,vpr)):p().map(xpr)},f.ticks=function(S){var C=p();return t(C[0],C[C.length-1],S??10)},f.tickFormat=function(S,C){return C==null?_:c(C)},f.nice=function(S){var C=p();return(!S||typeof S.range!="function")&&(S=r(C[0],C[C.length-1],S??10)),S?p(SB(C,S)):f},f.copy=function(){return Ry(f,dZ(t,r,n,o,i,s,a,l,u,c))},f}function pZ(){return pa.apply(dZ(pwe,hwe,Lv,Rv,Ly,Pm,f2,u2,ku,F_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var mwe=N(()=>{"use strict";fZ();aM();a2();Bd();J1e()});function hZ(){return pa.apply(dZ(fwe,dwe,jv,Pv,jy,Ov,d2,c2,ku,O_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var kft=N(()=>{"use strict";fZ();aM();mwe();Bd()});function mZ(){var t=0,r=1,n,o,i,s,a=Ul,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(vf),c.rangeRound=f(s2),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function Bv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function rF(){var t=$d(mZ()(Ul));return t.copy=function(){return Bv(t,rF())},Oy.apply(t,arguments)}function gZ(){var t=CB(mZ()).domain([1,10]);return t.copy=function(){return Bv(t,gZ()).base(t.base())},Oy.apply(t,arguments)}function yZ(){var t=TB(mZ());return t.copy=function(){return Bv(t,yZ()).constant(t.constant())},Oy.apply(t,arguments)}function FB(){var t=kB(mZ());return t.copy=function(){return Bv(t,FB()).exponent(t.exponent())},Oy.apply(t,arguments)}function gwe(){return FB.apply(null,arguments).exponent(.5)}var ywe=N(()=>{"use strict";xB();a2();Bd();l2();aZ();lZ();uZ()});function bZ(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Ul,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=JT(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(vf),h.rangeRound=m(s2),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function OB(){var t=$d(bZ()(Ul));return t.copy=function(){return Bv(t,OB())},Oy.apply(t,arguments)}function xZ(){var t=CB(bZ()).domain([.1,1,10]);return t.copy=function(){return Bv(t,xZ()).base(t.base())},Oy.apply(t,arguments)}function vZ(){var t=TB(bZ());return t.copy=function(){return Bv(t,vZ()).constant(t.constant())},Oy.apply(t,arguments)}function RB(){var t=kB(bZ());return t.copy=function(){return Bv(t,RB()).exponent(t.exponent())},Oy.apply(t,arguments)}function bwe(){return RB.apply(null,arguments).exponent(.5)}var Ift=N(()=>{"use strict";xB();a2();Bd();l2();aZ();ywe();lZ();uZ()});var xwe=N(()=>{"use strict";Qct();l2();aZ();lZ();cct();uZ();ift();sft();aft();mwe();kft();ywe();Ift();Q1e()});function _we(t){return iA.setFullYear(t),iA.setMonth(0),iA.setDate(1),iA.setHours(0,0,0,0),iA}function Cpr(t){return Pm.count(_we(t.getFullYear())-1,t)}function Dft(t){return Ly.count(_we(t.getFullYear())-1,t)}function vwe(t){return _we(t).getDay()}function Epr(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Ov.count(r-1,t)}function Nft(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return jy.count(r-1,t)}function wwe(t){return iA.setTime(Date.UTC(t,0,1)),iA.getUTCDay()}function nF(t,r,n){return r+t*7-(n+6)%7}var Hp,y2,By,Lm,p2,h2,oF,m2,g2,sA,aA,Spr,yWo,bWo,iA,xWo,vWo,wWo,_Wo,SWo,CWo,PB,LB,jB,wZ,Tpr,Mft,Apr,kpr,BB,$B,zB,Ipr,Dpr,Fft,Npr,EWo,Oft=N(()=>{"use strict";HK();fZ();Hp="year",y2="quarter",By="month",Lm="week",p2="date",h2="day",oF="dayofyear",m2="hours",g2="minutes",sA="seconds",aA="milliseconds",Spr=[Hp,y2,By,Lm,p2,h2,oF,m2,g2,sA,aA],yWo=Spr.reduce((t,r,n)=>(t[r]=1+n,t),{}),bWo={[Hp]:"%Y ",[y2]:"Q%q ",[By]:"%b ",[p2]:"%d ",[Lm]:"W%U ",[h2]:"%a ",[oF]:"%j ",[m2]:"%H:00",[g2]:"00:%M",[sA]:":%S",[aA]:".%L",[`${Hp}-${By}`]:"%Y-%m ",[`${Hp}-${By}-${p2}`]:"%Y-%m-%d ",[`${m2}-${g2}`]:"%H:%M"},iA=new Date;xWo={[Hp]:t=>t.getFullYear(),[y2]:t=>Math.floor(t.getMonth()/3),[By]:t=>t.getMonth(),[p2]:t=>t.getDate(),[m2]:t=>t.getHours(),[g2]:t=>t.getMinutes(),[sA]:t=>t.getSeconds(),[aA]:t=>t.getMilliseconds(),[oF]:t=>Cpr(t),[Lm]:t=>Dft(t),[Lm+h2]:(t,r)=>nF(Dft(t),t.getDay(),vwe(r)),[h2]:(t,r)=>nF(1,t.getDay(),vwe(r))},vWo={[y2]:t=>3*t,[Lm]:(t,r)=>nF(t,0,vwe(r))},wWo={[Hp]:t=>t.getUTCFullYear(),[y2]:t=>Math.floor(t.getUTCMonth()/3),[By]:t=>t.getUTCMonth(),[p2]:t=>t.getUTCDate(),[m2]:t=>t.getUTCHours(),[g2]:t=>t.getUTCMinutes(),[sA]:t=>t.getUTCSeconds(),[aA]:t=>t.getUTCMilliseconds(),[oF]:t=>Epr(t),[Lm]:t=>Nft(t),[h2]:(t,r)=>nF(1,t.getUTCDay(),wwe(r)),[Lm+h2]:(t,r)=>nF(Nft(t),t.getUTCDay(),wwe(r))},_Wo={[y2]:t=>3*t,[Lm]:(t,r)=>nF(t,0,wwe(r))},SWo={[Hp]:Lv,[y2]:Rv.every(3),[By]:Rv,[Lm]:Ly,[p2]:Pm,[h2]:Pm,[oF]:Pm,[m2]:f2,[g2]:u2,[sA]:ku,[aA]:Rm},CWo={[Hp]:jv,[y2]:Pv.every(3),[By]:Pv,[Lm]:jy,[p2]:Ov,[h2]:Ov,[oF]:Ov,[m2]:d2,[g2]:c2,[sA]:ku,[aA]:Rm},PB=1e3,LB=PB*60,jB=LB*60,wZ=jB*24,Tpr=wZ*7,Mft=wZ*30,Apr=wZ*365,kpr=[Hp,By,p2,m2,g2,sA,aA],BB=kpr.slice(0,-1),$B=BB.slice(0,-1),zB=$B.slice(0,-1),Ipr=zB.slice(0,-1),Dpr=[Hp,Lm],Fft=[Hp,By],Npr=[Hp],EWo=[[BB,1,PB],[BB,5,5*PB],[BB,15,15*PB],[BB,30,30*PB],[$B,1,LB],[$B,5,5*LB],[$B,15,15*LB],[$B,30,30*LB],[zB,1,jB],[zB,3,3*jB],[zB,6,6*jB],[zB,12,12*jB],[Ipr,1,wZ],[Dpr,1,Tpr],[Fft,1,Mft],[Fft,3,3*Mft],[Npr,1,Apr]]});function Mpr(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function $pr(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function zpr(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function Iwe(){let t=ZT().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=Mpr(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=KK(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,hB(h,g)-1),x=g===y?b:hB(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return Iwe().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function jft(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return jft(r())},t}function Upr(){return jft(Iwe().paddingInner(1))}function Gpr(t){return Vpr.call(t,ect)}function Bft(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(Fm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=Gpr(o),n):t.slice()},n.range=function(o){return arguments.length?(r=Wpr.call(o),n):r.slice()},n.tickFormat=function(o,i){return eF(t[0],A1e(t),o??10,i)},n.copy=function(){return Bft().domain(n.domain()).range(n.range())},n}function Hpr(t){return t[qpr]=!0,t}function Ypr(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?$pr(s):s.invertExtent?zpr(s):void 0),s.type=t,Hpr(s)};return o.metadata=I1e(k1e(n)),o}function Xo(t,r,n){return arguments.length>1?(Swe.set(t,Ypr(t,r,n)),this):Xpr(t)?Swe.get(t):void 0}function Xpr(t){return Swe.has(t)}function Kpr(t,r,n){return JT(Zpr(r||"rgb",n),t)}function Zpr(t,r){let n=Y1e[Qpr(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function Qpr(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function $ft(t){if(T1e(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function zft(t,r){for(let n in t)thr(n,r(t[n]))}function thr(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(Rft[t]=r,this):Rft[t]}var Fpr,Cwe,iF,Ewe,Twe,Awe,Opr,Rpr,sF,UB,_Z,kwe,Pft,Ppr,Lpr,jpr,Bpr,ul,SZ,CZ,jm,Lft,Vpr,Wpr,Swe,qpr,Jpr,ehr,Rft,LWo,jWo,Uft=N(()=>{"use strict";HK();Om();xwe();xwe();xB();Ume();Oft();Fpr="identity",Cwe="linear",iF="log",Ewe="pow",Twe="sqrt",Awe="symlog",Opr="time",Rpr="utc",sF="sequential",UB="diverging",_Z="quantile",kwe="quantize",Pft="threshold",Ppr="ordinal",Lpr="point",jpr="band",Bpr="bin-ordinal",ul="continuous",SZ="discrete",CZ="discretizing",jm="interpolating",Lft="temporal";Vpr=Array.prototype.map;Wpr=Array.prototype.slice;Swe=new Map,qpr=Symbol("vega_scale");Xo(Fpr,_B);Xo(Cwe,wB,ul);Xo(iF,EB,[ul,iF]);Xo(Ewe,tF,ul);Xo(Twe,ewe,ul);Xo(Awe,AB,ul);Xo(Opr,pZ,[ul,Lft]);Xo(Rpr,hZ,[ul,Lft]);Xo(sF,rF,[ul,jm]);Xo(`${sF}-${Cwe}`,rF,[ul,jm]);Xo(`${sF}-${iF}`,gZ,[ul,jm,iF]);Xo(`${sF}-${Ewe}`,FB,[ul,jm]);Xo(`${sF}-${Twe}`,gwe,[ul,jm]);Xo(`${sF}-${Awe}`,yZ,[ul,jm]);Xo(`${UB}-${Cwe}`,OB,[ul,jm]);Xo(`${UB}-${iF}`,xZ,[ul,jm,iF]);Xo(`${UB}-${Ewe}`,RB,[ul,jm]);Xo(`${UB}-${Twe}`,bwe,[ul,jm]);Xo(`${UB}-${Awe}`,vZ,[ul,jm]);Xo(_Z,IB,[CZ,_Z]);Xo(kwe,DB,CZ);Xo(Pft,NB,CZ);Xo(Bpr,Bft,[SZ,CZ]);Xo(Ppr,ZT,SZ);Xo(jpr,Iwe,SZ);Xo(Lpr,Upr,SZ);Jpr={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ehr={accent:Uj,category10:zj,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Vj,observable10:Gj,paired:Wj,pastel1:qj,pastel2:Hj,set1:Yj,set2:Xj,set3:Kj,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};Rft={};zft(ehr,$ft);zft(Jpr,t=>Kpr($ft(t)));LWo={[_Z]:"quantiles",[kwe]:"thresholds",[Pft]:"domain"},jWo={[_Z]:"quantiles",[kwe]:"domain"}});var Vft,$Wo,zWo,Gft=N(()=>{"use strict";Vft=Math.random,$Wo=Math.sqrt(2*Math.PI),zWo=.5*Math.PI/180});var Mwe={};fn(Mwe,{wordcloud:()=>Nwe});function rhr(){var t=[256,256],r,n,o,i,s,a,l,u=Wft,c=[],f=Math.random,d={};d.layout=function(){for(var m=p(lf()),g=lhr((t[0]>>5)*t[1]),y=null,b=c.length,x=-1,v=[],w=c.map(S=>({text:r(S),font:n(S),style:i(S),weight:s(S),rotate:a(S),size:~~(o(S)+1e-14),padding:l(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,C)=>C.size-S.size);++x<b;){var _=w[x];_.x=t[0]*(f()+.5)>>1,_.y=t[1]*(f()+.5)>>1,nhr(m,_,w,x),_.hasText&&h(g,_,y)&&(v.push(_),y?ihr(y,_):y=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=t[0]>>1,_.y-=t[1]>>1)}return v};function p(m){m.width=m.height=1;var g=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(VB<<5)/g,m.height=EZ/g;var y=m.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(m,g,y){for(var b=g.x,x=g.y,v=Math.sqrt(t[0]*t[0]+t[1]*t[1]),w=u(t),_=f()<.5?1:-1,S=-_,C,E,T;(C=w(S+=_))&&(E=~~C[0],T=~~C[1],!(Math.min(Math.abs(E),Math.abs(T))>=v));)if(g.x=b+E,g.y=x+T,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!y||!ohr(g,m,t[0]))&&(!y||shr(g,y))){for(var I=g.sprite,k=g.width>>5,F=t[0]>>5,D=g.x-(k<<4),L=D&127,P=32-L,R=g.y1-g.y0,V=(g.y+g.y0)*F+(D>>5),G,U=0;U<R;U++){G=0;for(var H=0;H<=k;H++)m[V+H]|=G<<P|(H<k?(G=I[U*k+H])>>>L:0);V+=F}return g.sprite=null,!0}return!1}return d.words=function(m){return arguments.length?(c=m,d):c},d.size=function(m){return arguments.length?(t=[+m[0],+m[1]],d):t},d.font=function(m){return arguments.length?(n=lA(m),d):n},d.fontStyle=function(m){return arguments.length?(i=lA(m),d):i},d.fontWeight=function(m){return arguments.length?(s=lA(m),d):s},d.rotate=function(m){return arguments.length?(a=lA(m),d):a},d.text=function(m){return arguments.length?(r=lA(m),d):r},d.spiral=function(m){return arguments.length?(u=uhr[m]||m,d):u},d.fontSize=function(m){return arguments.length?(o=lA(m),d):o},d.padding=function(m){return arguments.length?(l=lA(m),d):l},d.random=function(m){return arguments.length?(f=m,d):f},d}function nhr(t,r,n,o){if(!r.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(VB<<5)/s,EZ/s);var a=0,l=0,u=0,c=n.length,f,d,p,h,m;for(--o;++o<c;){if(r=n[o],i.save(),i.font=r.style+" "+r.weight+" "+~~((r.size+1)/s)+"px "+r.font,f=i.measureText(r.text+"m").width*s,p=r.size<<1,r.rotate){var g=Math.sin(r.rotate*Dwe),y=Math.cos(r.rotate*Dwe),b=f*y,x=f*g,v=p*y,w=p*g;f=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,p=~~Math.max(Math.abs(x+v),Math.abs(x-v))}else f=f+31>>5<<5;if(p>u&&(u=p),a+f>=VB<<5&&(a=0,l+=u,u=0),l+p>=EZ)break;i.translate((a+(f>>1))/s,(l+(p>>1))/s),r.rotate&&i.rotate(r.rotate*Dwe),i.fillText(r.text,0,0),r.padding&&(i.lineWidth=2*r.padding,i.strokeText(r.text,0,0)),i.restore(),r.width=f,r.height=p,r.xoff=a,r.yoff=l,r.x1=f>>1,r.y1=p>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,a+=f}for(var _=i.getImageData(0,0,(VB<<5)/s,EZ/s).data,S=[];--o>=0;)if(r=n[o],!!r.hasText){for(f=r.width,d=f>>5,p=r.y1-r.y0,h=0;h<p*d;h++)S[h]=0;if(a=r.xoff,a==null)return;l=r.yoff;var C=0,E=-1;for(m=0;m<p;m++){for(h=0;h<f;h++){var T=d*m+(h>>5),I=_[(l+m)*(VB<<5)+(a+h)<<2]?1<<31-h%32:0;S[T]|=I,C|=I}C?E=m:(r.y0++,p--,m--,l++)}r.y1=r.y0+E,r.sprite=S.slice(0,(r.y1-r.y0)*d)}}}function ohr(t,r,n){n>>=5;for(var o=t.sprite,i=t.width>>5,s=t.x-(i<<4),a=s&127,l=32-a,u=t.y1-t.y0,c=(t.y+t.y0)*n+(s>>5),f,d=0;d<u;d++){f=0;for(var p=0;p<=i;p++)if((f<<l|(p<i?(f=o[d*i+p])>>>a:0))&r[c+p])return!0;c+=n}return!1}function ihr(t,r){var n=t[0],o=t[1];r.x+r.x0<n.x&&(n.x=r.x+r.x0),r.y+r.y0<n.y&&(n.y=r.y+r.y0),r.x+r.x1>o.x&&(o.x=r.x+r.x1),r.y+r.y1>o.y&&(o.y=r.y+r.y1)}function shr(t,r){return t.x+t.x1>r[0].x&&t.x+t.x0<r[1].x&&t.y+t.y1>r[0].y&&t.y+t.y0<r[1].y}function Wft(t){var r=t[0]/t[1];return function(n){return[r*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function ahr(t){var r=4,n=r*t[0]/t[1],o=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:o+=n;break;case 1:i+=r;break;case 2:o-=n;break;default:i-=r;break}return[o,i]}}function lhr(t){for(var r=[],n=-1;++n<t;)r[n]=0;return r}function lA(t){return typeof t=="function"?t:function(){return t}}function Nwe(t){et.call(this,rhr(),t)}var Dwe,VB,EZ,uhr,qft,chr,Hft=N(()=>{"use strict";SN();el();HK();Uft();Gft();Dwe=Math.PI/180,VB=64,EZ=2048;uhr={archimedean:Wft,rectangular:ahr},qft=["x","y","font","fontSize","fontStyle","fontWeight","angle"],chr=["text","font","rotate","fontSize","fontStyle","fontWeight"];Nwe.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:qft}]};nct(Nwe,et,{transform(t,r){t.size&&!(t.size[0]&&t.size[1])&&YT("Wordcloud size dimensions must be non-zero.");function n(m){let g=t[m];return WK(g)&&r.modified(g.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||chr.some(n)))return;let i=r.materialize(r.SOURCE).source,s=this.value,a=t.as||qft,l=t.fontSize||14,u;if(WK(l)?u=t.fontSizeRange:l=qK(l),u){let m=l,g=Xo("sqrt")().domain(rct(i,m)).range(u);l=y=>g(m(y))}i.forEach(m=>{m[a[0]]=NaN,m[a[1]]=NaN,m[a[3]]=0});let c=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(l).random(Vft).layout(),f=s.size(),d=f[0]>>1,p=f[1]>>1,h=c.length;for(let m=0,g,y;m<h;++m)g=c[m],y=g.datum,y[a[0]]=g.x+d,y[a[1]]=g.y+p,y[a[2]]=g.font,y[a[3]]=g.size,y[a[4]]=g.style,y[a[5]]=g.weight,y[a[6]]=g.rotate;return r.reflow(o).modifies(a)}})});var Rwe={};fn(Rwe,{crossfilter:()=>Fwe,resolvefilter:()=>Owe});function phr(){let t=8,r=[],n=GB(0),o=TZ(0,t),i=TZ(0,t);return{data:()=>r,seen:()=>n=hhr(n,r.length),add(s){for(let a=0,l=r.length,u=s.length,c;a<u;++a)c=s[a],c._index=l++,r.push(c)},remove(s,a){let l=r.length,u=Array(l-s),c=r,f,d,p;for(d=0;!a[d]&&d<l;++d)u[d]=r[d],c[d]=d;for(p=d;d<l;++d)f=r[d],a[d]?c[d]=-1:(c[d]=p,o[p]=o[d],i[p]=i[d],u[p]=f,f._index=p++),o[d]=0;return r=u,c},size:()=>r.length,curr:()=>o,prev:()=>i,reset:s=>i[s]=o[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,a){o[s]|=a},clear(s,a){o[s]&=~a},resize(s,a){let l=o.length;(s>l||a>t)&&(t=Math.max(a,t),o=TZ(s,t,o),i=TZ(s,t))}}}function hhr(t,r,n){return t.length>=r?t:(n=n||new t.constructor(r),n.set(t),n)}function TZ(t,r,n){let o=(r<257?fhr:r<65537?dhr:GB)(t);return n&&o.set(n),o}function Yft(t,r,n){let o=1<<r;return{one:o,zero:~o,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(i,s){let a=this,l=a.bisect(a.range,i.value),u=i.index,c=l[0],f=l[1],d=u.length,p;for(p=0;p<c;++p)s[u[p]]|=o;for(p=f;p<d;++p)s[u[p]]|=o;return a}}}function Xft(){let t=GB(0),r=[],n=0;function o(l,u,c){if(!u.length)return[];let f=n,d=u.length,p=GB(d),h=Array(d),m,g,y;for(y=0;y<d;++y)h[y]=l(u[y]),p[y]=y;if(h=mhr(h,p),f)m=r,g=t,r=Array(f+d),t=GB(f+d),ghr(c,m,g,f,h,p,d,r,t);else{if(c>0)for(y=0;y<d;++y)p[y]+=c;r=h,t=p}return n=f+d,{index:p,value:h}}function i(l,u){let c=n,f,d,p;for(d=0;!u[t[d]]&&d<c;++d);for(p=d;d<c;++d)u[f=t[d]]||(t[p]=f,r[p]=r[d],++p);n=c-l}function s(l){for(let u=0,c=n;u<c;++u)t[u]=l[t[u]]}function a(l,u){let c;return u?c=u.length:(u=r,c=n),[Gfe(u,l[0],0,c),DE(u,l[1],0,c)]}return{insert:o,remove:i,bisect:a,reindex:s,index:()=>t,size:()=>n}}function mhr(t,r){return t.sort.call(r,(n,o)=>{let i=t[n],s=t[o];return i<s?-1:i>s?1:0}),qfe(t,r)}function ghr(t,r,n,o,i,s,a,l,u){let c=0,f=0,d;for(d=0;c<o&&f<a;++d)r[c]<i[f]?(l[d]=r[c],u[d]=n[c++]):(l[d]=i[f],u[d]=s[f++]+t);for(;c<o;++c,++d)l[d]=r[c],u[d]=n[c];for(;f<a;++f,++d)l[d]=i[f],u[d]=s[f]+t}function Fwe(t){et.call(this,phr(),t),this._indices=null,this._dims=null}function Owe(t){et.call(this,null,t)}var fhr,dhr,GB,Kft=N(()=>{"use strict";Wo();el();Ls();fhr=t=>new Uint8Array(t),dhr=t=>new Uint16Array(t),GB=t=>new Uint32Array(t);Fwe.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Dt(Fwe,et,{transform(t,r){if(this._dims){var n=t.modified("fields")||t.fields.some(o=>r.modified(o.fields));return n?this.reinit(t,r):this.eval(t,r)}else return this.init(t,r)},init(t,r){let n=t.fields,o=t.query,i=this._indices={},s=this._dims=[],a=o.length,l=0,u,c;for(;l<a;++l)u=n[l].fname,c=i[u]||(i[u]=Xft()),s.push(Yft(c,l,o[l]));return this.eval(t,r)},reinit(t,r){let n=r.materialize().fork(),o=t.fields,i=t.query,s=this._indices,a=this._dims,l=this.value,u=l.curr(),c=l.prev(),f=l.all(),d=n.rem=n.add,p=n.mod,h=i.length,m={},g,y,b,x,v,w,_,S,C;if(c.set(u),r.rem.length&&(v=this.remove(t,r,n)),r.add.length&&l.add(r.add),r.mod.length)for(w={},x=r.mod,_=0,S=x.length;_<S;++_)w[x[_]._index]=1;for(_=0;_<h;++_)C=o[_],(!a[_]||t.modified("fields",_)||r.modified(C.fields))&&(b=C.fname,(g=m[b])||(s[b]=y=Xft(),m[b]=g=y.insert(C,r.source,0)),a[_]=Yft(y,_,i[_]).onAdd(g,u));for(_=0,S=l.data().length;_<S;++_)v[_]||(c[_]!==u[_]?d.push(_):w[_]&&u[_]!==f&&p.push(_));return l.mask=(1<<h)-1,n},eval(t,r){let n=r.materialize().fork(),o=this._dims.length,i=0;return r.rem.length&&(this.remove(t,r,n),i|=(1<<o)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,r,n)),r.add.length&&(this.insert(t,r,n),i|=(1<<o)-1),r.mod.length&&(this.modify(r,n),i|=(1<<o)-1),this.value.mask=i,n},insert(t,r,n){let o=r.add,i=this.value,s=this._dims,a=this._indices,l=t.fields,u={},c=n.add,f=i.size()+o.length,d=s.length,p=i.size(),h,m,g;i.resize(f,d),i.add(o);let y=i.curr(),b=i.prev(),x=i.all();for(h=0;h<d;++h)m=l[h].fname,g=u[m]||(u[m]=a[m].insert(l[h],o,p)),s[h].onAdd(g,y);for(;p<f;++p)b[p]=x,y[p]!==x&&c.push(p)},modify(t,r){let n=r.mod,o=this.value,i=o.curr(),s=o.all(),a=t.mod,l,u,c;for(l=0,u=a.length;l<u;++l)c=a[l]._index,i[c]!==s&&n.push(c)},remove(t,r,n){let o=this._indices,i=this.value,s=i.curr(),a=i.prev(),l=i.all(),u={},c=n.rem,f=r.rem,d,p,h,m;for(d=0,p=f.length;d<p;++d)h=f[d]._index,u[h]=1,a[h]=m=s[h],s[h]=l,m!==l&&c.push(h);for(h in o)o[h].remove(p,u);return this.reindex(r,p,u),u},reindex(t,r,n){let o=this._indices,i=this.value;t.runAfter(()=>{let s=i.remove(r,n);for(let a in o)o[a].reindex(s)})},update(t,r,n){let o=this._dims,i=t.query,s=r.stamp,a=o.length,l=0,u,c;for(n.filters=0,c=0;c<a;++c)t.modified("query",c)&&(u=c,++l);if(l===1)l=o[u].one,this.incrementOne(o[u],i[u],n.add,n.rem);else for(c=0,l=0;c<a;++c)t.modified("query",c)&&(l|=o[c].one,this.incrementAll(o[c],i[c],s,n.add),n.rem=n.add);return l},incrementAll(t,r,n,o){let i=this.value,s=i.seen(),a=i.curr(),l=i.prev(),u=t.index(),c=t.bisect(t.range),f=t.bisect(r),d=f[0],p=f[1],h=c[0],m=c[1],g=t.one,y,b,x;if(d<h)for(y=d,b=Math.min(h,p);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(d>h)for(y=h,b=Math.min(d,m);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;if(p>m)for(y=Math.max(d,m),b=p;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(p<m)for(y=Math.max(h,p),b=m;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;t.range=r.slice()},incrementOne(t,r,n,o){let i=this.value,s=i.curr(),a=t.index(),l=t.bisect(t.range),u=t.bisect(r),c=u[0],f=u[1],d=l[0],p=l[1],h=t.one,m,g,y;if(c<d)for(m=c,g=Math.min(d,f);m<g;++m)y=a[m],s[y]^=h,n.push(y);else if(c>d)for(m=d,g=Math.min(c,p);m<g;++m)y=a[m],s[y]^=h,o.push(y);if(f>p)for(m=Math.max(c,p),g=f;m<g;++m)y=a[m],s[y]^=h,n.push(y);else if(f<p)for(m=Math.max(d,f),g=p;m<g;++m)y=a[m],s[y]^=h,o.push(y);t.range=r.slice()}});Owe.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Dt(Owe,et,{transform(t,r){let n=~(t.ignore||0),o=t.filter,i=o.mask;if(!(i&n))return r.StopPropagation;let s=r.fork(r.ALL),a=o.data(),l=o.curr(),u=o.prev(),c=f=>l[f]&n?null:a[f];return s.filter(s.MOD,c),i&i-1?(s.filter(s.ADD,f=>{let d=l[f]&n;return!d&&d^u[f]&n?a[f]:null}),s.filter(s.REM,f=>{let d=l[f]&n;return d&&!(d^(d^u[f]&n))?a[f]:null})):(s.filter(s.ADD,c),s.filter(s.REM,f=>(l[f]&n)===i?a[f]:null)),s.filter(s.SOURCE,f=>c(f._index))}})});function aF(t,r,n){return t.fields=r||[],t.fname=n,t}function yhr(t){return t.length===1?bhr(t[0]):xhr(t)}function cl(t){throw Error(t)}function vhr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||cl("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&cl("Access path missing closing bracket: "+t),o&&cl("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Pwe(t,r,n){let o=vhr(t);return t=o.length===1?o[0]:t,aF((n&&n.get||yhr)(o),[t],r||t)}function WB(t){return t===Object(t)}function $v(t){return t[t.length-1]}function DZ(t){return t==null||t===""?null:+t}function NZ(t,r,n,o){let i=n(t[0]),s=n($v(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function tdt(t,r){return NZ(t,r,DZ,IZ)}function rdt(t,r){var n=Math.sign(t[0]);return NZ(t,r,Qft(n),Zft(n))}function ndt(t,r,n){return NZ(t,r,kZ(n),kZ(1/n))}function odt(t,r,n){return NZ(t,r,Jft(n),edt(n))}function MZ(t,r,n,o,i){let s=o(t[0]),a=o($v(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function idt(t,r,n){return MZ(t,r,n,DZ,IZ)}function sdt(t,r,n){let o=Math.sign(t[0]);return MZ(t,r,n,Qft(o),Zft(o))}function adt(t,r,n,o){return MZ(t,r,n,kZ(o),kZ(1/o))}function ldt(t,r,n,o){return MZ(t,r,n,Jft(o),edt(o))}function udt(t){return 1+~~(new Date(t).getMonth()/3)}function cdt(t){return 1+~~(new Date(t).getUTCMonth()/3)}function jwe(t){return t!=null?$y(t)?t:[t]:[]}function fdt(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function lF(t){return typeof t=="function"}function FZ(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function ddt(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function zy(t,r){return whr.call(t,r)}function pdt(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=$v(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function hdt(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function mdt(t){return typeof t=="boolean"}function Bwe(t){return Object.prototype.toString.call(t)==="[object Date]"}function $we(t){return typeof t=="number"}function gdt(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function b2(t){return typeof t=="string"}function ydt(t,r){let n=t[0],o=$v(t),i=+r;return i?i===1?o:n+i*(o-n):n}function AZ(t,r){let n="";for(;--r>=0;)n+=t;return n}function bdt(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?AZ(i,a)+s:o==="center"?AZ(i,~~(a/2))+s+AZ(i,Math.ceil(a/2)):s+AZ(i,a)}function xdt(t){return t&&$v(t)-t[0]||0}function uF(t){return $y(t)?"["+t.map(uF)+"]":WB(t)||b2(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function vdt(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function wdt(t,r){return r=r||_hr,t==null||t===""?null:r(t)}function _dt(t){return t==null||t===""?null:t+""}function zwe(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function Sdt(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}var bhr,xhr,ZWo,IZ,QWo,JWo,Lwe,eqo,$y,Zft,Qft,Jft,edt,kZ,whr,_hr,Uwe=N(()=>{"use strict";bhr=t=>function(r){return r[t]},xhr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};ZWo=Pwe("id"),IZ=aF(t=>t,[],"identity"),QWo=aF(()=>0,[],"zero"),JWo=aF(()=>1,[],"one"),Lwe=aF(()=>!0,[],"true"),eqo=aF(()=>!1,[],"false"),$y=Array.isArray;Zft=t=>r=>t*Math.exp(r),Qft=t=>r=>Math.log(t*r),Jft=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),edt=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,kZ=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);whr=Object.prototype.hasOwnProperty;_hr=t=>$we(t)||Bwe(t)?t:Date.parse(t)});function Bm(t){this.type=t}function Fhr(t){switch(t.type){case Thr:return t.elements;case Ahr:case Ihr:return[t.left,t.right];case Ywe:return[t.callee].concat(t.arguments);case khr:return[t.test,t.consequent,t.alternate];case Dhr:return[t.object,t.property];case Nhr:return t.properties;case Chr:return[t.key,t.value];case Mhr:return[t.argument];case Ehr:case fA:case Shr:default:return[]}}function jZ(t,r){if(!t)throw new Error("ASSERT: "+r)}function zv(t){return t>=48&&t<=57}function Xwe(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function HB(t){return"01234567".indexOf(t)>=0}function Jhr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function XB(t){return t===10||t===13||t===8232||t===8233}function QB(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Zhr.test(String.fromCharCode(t))}function RZ(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Qhr.test(String.fromCharCode(t))}function Fdt(){for(;ct<Iu;){let t=mr.charCodeAt(ct);if(Jhr(t)||XB(t))++ct;else break}}function Hwe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ct<Iu&&Xwe(mr[ct])?(o=mr[ct++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):fo({},fl,Vl);return String.fromCharCode(i)}function tmr(){var t,r,n,o;for(t=mr[ct],r=0,t==="}"&&fo({},fl,Vl);ct<Iu&&(t=mr[ct++],!!Xwe(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&fo({},fl,Vl),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function Odt(){var t,r;for(t=mr.charCodeAt(ct++),r=String.fromCharCode(t),t===92&&(mr.charCodeAt(ct)!==117&&fo({},fl,Vl),++ct,t=Hwe("u"),(!t||t==="\\"||!QB(t.charCodeAt(0)))&&fo({},fl,Vl),r=t);ct<Iu&&(t=mr.charCodeAt(ct),!!RZ(t));)++ct,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),mr.charCodeAt(ct)!==117&&fo({},fl,Vl),++ct,t=Hwe("u"),(!t||t==="\\"||!RZ(t.charCodeAt(0)))&&fo({},fl,Vl),r+=t);return r}function rmr(){var t,r;for(t=ct++;ct<Iu;){if(r=mr.charCodeAt(ct),r===92)return ct=t,Odt();if(RZ(r))++ct;else break}return mr.slice(t,ct)}function nmr(){var t,r,n;return t=ct,r=mr.charCodeAt(ct)===92?Odt():rmr(),r.length===1?n=uA:emr.hasOwnProperty(r)?n=x2:r==="null"?n=LZ:r==="true"||r==="false"?n=PZ:n=uA,{type:n,value:r,start:t,end:ct}}function Gwe(){var t=ct,r=mr.charCodeAt(ct),n,o=mr[ct],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ct,{type:wf,value:String.fromCharCode(r),start:t,end:ct};default:if(n=mr.charCodeAt(ct+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ct+=2,{type:wf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ct};case 33:case 61:return ct+=2,mr.charCodeAt(ct)===61&&++ct,{type:wf,value:mr.slice(t,ct),start:t,end:ct}}}if(a=mr.substr(ct,4),a===">>>=")return ct+=4,{type:wf,value:a,start:t,end:ct};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ct+=3,{type:wf,value:s,start:t,end:ct};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ct+=2,{type:wf,value:i,start:t,end:ct};if(i==="//"&&fo({},fl,Vl),"<>=!+-*%&|^/".indexOf(o)>=0)return++ct,{type:wf,value:o,start:t,end:ct};fo({},fl,Vl)}function omr(t){let r="";for(;ct<Iu&&Xwe(mr[ct]);)r+=mr[ct++];return r.length===0&&fo({},fl,Vl),QB(mr.charCodeAt(ct))&&fo({},fl,Vl),{type:dA,value:parseInt("0x"+r,16),start:t,end:ct}}function imr(t){let r="0"+mr[ct++];for(;ct<Iu&&HB(mr[ct]);)r+=mr[ct++];return(QB(mr.charCodeAt(ct))||zv(mr.charCodeAt(ct)))&&fo({},fl,Vl),{type:dA,value:parseInt(r,8),octal:!0,start:t,end:ct}}function Cdt(){var t,r,n;if(n=mr[ct],jZ(zv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ct,t="",n!=="."){if(t=mr[ct++],n=mr[ct],t==="0"){if(n==="x"||n==="X")return++ct,omr(r);if(HB(n))return imr(r);n&&zv(n.charCodeAt(0))&&fo({},fl,Vl)}for(;zv(mr.charCodeAt(ct));)t+=mr[ct++];n=mr[ct]}if(n==="."){for(t+=mr[ct++];zv(mr.charCodeAt(ct));)t+=mr[ct++];n=mr[ct]}if(n==="e"||n==="E")if(t+=mr[ct++],n=mr[ct],(n==="+"||n==="-")&&(t+=mr[ct++]),zv(mr.charCodeAt(ct)))for(;zv(mr.charCodeAt(ct));)t+=mr[ct++];else fo({},fl,Vl);return QB(mr.charCodeAt(ct))&&fo({},fl,Vl),{type:dA,value:parseFloat(t),start:r,end:ct}}function smr(){var t="",r,n,o,i,s=!1;for(r=mr[ct],jZ(r==="'"||r==='"',"String literal must starts with a quote"),n=ct,++ct;ct<Iu;)if(o=mr[ct++],o===r){r="";break}else if(o==="\\")if(o=mr[ct++],!o||!XB(o.charCodeAt(0)))switch(o){case"u":case"x":mr[ct]==="{"?(++ct,t+=tmr()):t+=Hwe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:HB(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ct<Iu&&HB(mr[ct])&&(s=!0,i=i*8+"01234567".indexOf(mr[ct++]),"0123".indexOf(o)>=0&&ct<Iu&&HB(mr[ct])&&(i=i*8+"01234567".indexOf(mr[ct++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&mr[ct]===`
`&&++ct;else{if(XB(o.charCodeAt(0)))break;t+=o}return r!==""&&fo({},fl,Vl),{type:ZB,value:t,octal:s,start:n,end:ct}}function amr(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";fo({},qwe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{fo({},qwe)}try{return new RegExp(t,r)}catch{return null}}function lmr(){var t,r,n,o,i;for(t=mr[ct],jZ(t==="/","Regular expression literal must start with a slash"),r=mr[ct++],n=!1,o=!1;ct<Iu;)if(t=mr[ct++],r+=t,t==="\\")t=mr[ct++],XB(t.charCodeAt(0))&&fo({},Vwe),r+=t;else if(XB(t.charCodeAt(0)))fo({},Vwe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||fo({},Vwe),i=r.substr(1,r.length-2),{value:i,literal:r}}function umr(){var t,r,n;for(r="",n="";ct<Iu&&(t=mr[ct],!!RZ(t.charCodeAt(0)));)++ct,t==="\\"&&ct<Iu?fo({},fl,Vl):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&fo({},qwe,n),{value:n,literal:r}}function cmr(){var t,r,n,o;return Oo=null,Fdt(),t=ct,r=lmr(),n=umr(),o=amr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ct}}function fmr(t){return t.type===uA||t.type===x2||t.type===PZ||t.type===LZ}function Rdt(){if(Fdt(),ct>=Iu)return{type:KB,start:ct,end:ct};let t=mr.charCodeAt(ct);return QB(t)?nmr():t===40||t===41||t===59?Gwe():t===39||t===34?smr():t===46?zv(mr.charCodeAt(ct+1))?Cdt():Gwe():zv(t)?Cdt():Gwe()}function _f(){let t=Oo;return ct=t.end,Oo=Rdt(),ct=t.end,t}function Pdt(){let t=ct;Oo=Rdt(),ct=t}function dmr(t){let r=new Bm(Rhr);return r.elements=t,r}function Edt(t,r,n){let o=new Bm(t==="||"||t==="&&"?$hr:Phr);return o.operator=t,o.left=r,o.right=n,o}function pmr(t,r){let n=new Bm(Lhr);return n.callee=t,n.arguments=r,n}function hmr(t,r,n){let o=new Bm(jhr);return o.test=t,o.consequent=r,o.alternate=n,o}function Kwe(t){let r=new Bm(Ndt);return r.name=t,r}function qB(t){let r=new Bm(Bhr);return r.value=t.value,r.raw=mr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function Tdt(t,r,n){let o=new Bm(zhr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function mmr(t){let r=new Bm(Uhr);return r.properties=t,r}function Adt(t,r,n){let o=new Bm(Vhr);return o.key=r,o.value=n,o.kind=t,o}function gmr(t,r){let n=new Bm(Ghr);return n.operator=t,n.argument=r,n.prefix=!0,n}function fo(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(jZ(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ct,n.description=i,n}function BZ(t){t.type===KB&&fo(t,Xhr),t.type===dA&&fo(t,Whr),t.type===ZB&&fo(t,qhr),t.type===uA&&fo(t,Hhr),t.type===x2&&fo(t,Yhr),fo(t,fl,t.value)}function Du(t){let r=_f();(r.type!==wf||r.value!==t)&&BZ(r)}function Li(t){return Oo.type===wf&&Oo.value===t}function Wwe(t){return Oo.type===x2&&Oo.value===t}function ymr(){let t=[];for(ct=Oo.start,Du("[");!Li("]");)Li(",")?(_f(),t.push(null)):(t.push(cA()),Li("]")||Du(","));return _f(),dmr(t)}function kdt(){ct=Oo.start;let t=_f();return t.type===ZB||t.type===dA?(t.octal&&fo(t,Mdt),qB(t)):Kwe(t.value)}function bmr(){var t,r,n,o;if(ct=Oo.start,t=Oo,t.type===uA)return n=kdt(),Du(":"),o=cA(),Adt("init",n,o);if(t.type===KB||t.type===wf)BZ(t);else return r=kdt(),Du(":"),o=cA(),Adt("init",r,o)}function xmr(){var t=[],r,n,o,i={},s=String;for(ct=Oo.start,Du("{");!Li("}");)r=bmr(),r.key.type===Ndt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?fo({},Khr):i[o]=!0,t.push(r),Li("}")||Du(",");return Du("}"),mmr(t)}function vmr(){Du("(");let t=Zwe();return Du(")"),t}function _mr(){var t,r,n;if(Li("("))return vmr();if(Li("["))return ymr();if(Li("{"))return xmr();if(t=Oo.type,ct=Oo.start,t===uA||wmr[Oo.value])n=Kwe(_f().value);else if(t===ZB||t===dA)Oo.octal&&fo(Oo,Mdt),n=qB(_f());else{if(t===x2)throw new Error(YB);t===PZ?(r=_f(),r.value=r.value==="true",n=qB(r)):t===LZ?(r=_f(),r.value=null,n=qB(r)):Li("/")||Li("/=")?(n=qB(cmr()),Pdt()):BZ(_f())}return n}function Smr(){let t=[];if(Du("("),!Li(")"))for(;ct<Iu&&(t.push(cA()),!Li(")"));)Du(",");return Du(")"),t}function Cmr(){ct=Oo.start;let t=_f();return fmr(t)||BZ(t),Kwe(t.value)}function Emr(){return Du("."),Cmr()}function Tmr(){Du("[");let t=Zwe();return Du("]"),t}function Amr(){var t,r,n;for(t=_mr();;)if(Li("."))n=Emr(),t=Tdt(".",t,n);else if(Li("("))r=Smr(),t=pmr(t,r);else if(Li("["))n=Tmr(),t=Tdt("[",t,n);else break;return t}function Idt(){let t=Amr();if(Oo.type===wf&&(Li("++")||Li("--")))throw new Error(YB);return t}function OZ(){var t,r;if(Oo.type!==wf&&Oo.type!==x2)r=Idt();else{if(Li("++")||Li("--"))throw new Error(YB);if(Li("+")||Li("-")||Li("~")||Li("!"))t=_f(),r=OZ(),r=gmr(t.value,r);else{if(Wwe("delete")||Wwe("void")||Wwe("typeof"))throw new Error(YB);r=Idt()}}return r}function Ddt(t){let r=0;if(t.type!==wf&&t.type!==x2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function kmr(){var t,r,n,o,i,s,a,l,u,c;if(t=Oo,u=OZ(),o=Oo,i=Ddt(o),i===0)return u;for(o.prec=i,_f(),r=[t,Oo],a=OZ(),s=[u,o,a];(i=Ddt(Oo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=Edt(l,u,a),s.push(n);o=_f(),o.prec=i,s.push(o),r.push(Oo),n=OZ(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=Edt(s[c-1].value,s[c-2],n),c-=2;return n}function cA(){var t,r,n;return t=kmr(),Li("?")&&(_f(),r=cA(),Du(":"),n=cA(),t=hmr(t,r,n)),t}function Zwe(){let t=cA();if(Li(","))throw new Error(YB);return t}function Ldt(t){mr=t,ct=0,Iu=mr.length,Oo=null,Pdt();let r=Zwe();if(Oo.type!==KB)throw new Error("Unexpect token after expression.");return r}function Jwe(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&cl("Missing arguments to clamp function."),a.length>3&&cl("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&cl("Missing arguments to if function."),a.length>3&&cl("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function Imr(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function jdt(t){t=t||{};let r=t.allowed?zwe(t.allowed):{},n=t.forbidden?zwe(t.forbidden):{},o=t.constants||Qwe,i=(t.functions||Jwe)(d),s=t.globalvar,a=t.fieldvar,l=lF(s)?s:m=>`${s}["${m}"]`,u={},c={},f=0;function d(m){if(b2(m))return m;let g=p[m.type];return g==null&&cl("Unsupported type: "+m.type),g(m)}let p={Literal:m=>m.raw,Identifier:m=>{let g=m.name;return f>0?g:zy(n,g)?cl("Illegal identifier: "+g):zy(o,g)?o[g]:zy(r,g)?g:(u[g]=1,l(g))},MemberExpression:m=>{let g=!m.computed,y=d(m.object);g&&(f+=1);let b=d(m.property);return y===a&&(c[Imr(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&cl("Illegal callee type: "+m.callee.type);let g=m.callee.name,y=m.arguments,b=zy(i,g)&&i[g];return b||cl("Unrecognized function: "+g),lF(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{f+=1;let g=d(m.key);return f-=1,g+":"+d(m.value)}};function h(m){let g={code:d(m),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return h.functions=i,h.constants=o,h}var Shr,fA,Chr,Ehr,Thr,Ahr,Ywe,khr,Ihr,Dhr,Nhr,Mhr,Uy,mr,ct,Iu,Oo,PZ,KB,uA,x2,LZ,dA,wf,ZB,Ohr,Rhr,Phr,Lhr,jhr,Ndt,Bhr,$hr,zhr,Uhr,Vhr,Ghr,fl,Whr,qhr,Hhr,Yhr,Xhr,qwe,Vwe,Mdt,Khr,Vl,YB,Zhr,Qhr,emr,wmr,Qwe,Bdt=N(()=>{"use strict";Uwe();Shr="RawCode",fA="Literal",Chr="Property",Ehr="Identifier",Thr="ArrayExpression",Ahr="BinaryExpression",Ywe="CallExpression",khr="ConditionalExpression",Ihr="LogicalExpression",Dhr="MemberExpression",Nhr="ObjectExpression",Mhr="UnaryExpression";Bm.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=Fhr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};PZ=1,KB=2,uA=3,x2=4,LZ=5,dA=6,wf=7,ZB=8,Ohr=9;Uy={};Uy[PZ]="Boolean";Uy[KB]="<end>";Uy[uA]="Identifier";Uy[x2]="Keyword";Uy[LZ]="Null";Uy[dA]="Numeric";Uy[wf]="Punctuator";Uy[ZB]="String";Uy[Ohr]="RegularExpression";Rhr="ArrayExpression",Phr="BinaryExpression",Lhr="CallExpression",jhr="ConditionalExpression",Ndt="Identifier",Bhr="Literal",$hr="LogicalExpression",zhr="MemberExpression",Uhr="ObjectExpression",Vhr="Property",Ghr="UnaryExpression",fl="Unexpected token %0",Whr="Unexpected number",qhr="Unexpected string",Hhr="Unexpected identifier",Yhr="Unexpected reserved word",Xhr="Unexpected end of input",qwe="Invalid regular expression",Vwe="Invalid regular expression: missing /",Mdt="Octal literals are not allowed in strict mode.",Khr="Duplicate data property in object literal not allowed in strict mode",Vl="ILLEGAL",YB="Disabled.",Zhr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Qhr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");emr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};wmr={if:1};Qwe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function JB(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var $dt=N(()=>{"use strict"});function e_e(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var zdt=N(()=>{"use strict"});function $Z(t){let r,n,o;t.length!==2?(r=JB,n=(l,u)=>JB(t(l),u),o=(l,u)=>t(l)-u):(r=t===JB||t===e_e?t:Dmr,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function Dmr(){return 0}var Udt=N(()=>{"use strict";$dt();zdt()});function zZ(t,...r){t=new X0(t),r=r.map(Nmr);e:for(let n of t)for(let o of r)if(!o.has(n)){t.delete(n);continue e}return t}function Nmr(t){return t instanceof X0?t:new X0(t)}var Vdt=N(()=>{"use strict";eL()});function UZ(...t){let r=new X0;for(let n of t)for(let o of n)r.add(o);return r}var Gdt=N(()=>{"use strict";eL()});var Wdt=N(()=>{"use strict";Udt();Vdt();Gdt()});function fF(t,r,n){return t.fields=r||[],t.fname=n,t}function Mmr(t){return t.length===1?Fmr(t[0]):Omr(t)}function cF(t){throw Error(t)}function Rmr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||cF("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&cF("Access path missing closing bracket: "+t),o&&cF("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function VZ(t,r,n){let o=Rmr(t);return t=o.length===1?o[0]:t,fF((n&&n.get||Mmr)(o),[t],r||t)}function qdt(t){return t[t.length-1]}function v2(t){return t==null||t===""?null:+t}function t_e(t){return t!=null?GZ(t)?t:[t]:[]}function Hdt(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function WZ(t,r){return Pmr.call(t,r)}function e$(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function qZ(t){return Object.prototype.toString.call(t)==="[object Date]"}var Fmr,Omr,yqo,bqo,xqo,vqo,wqo,_qo,GZ,Pmr,r_e=N(()=>{"use strict";Fmr=t=>function(r){return r[t]},Omr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};yqo=VZ("id"),bqo=fF(t=>t,[],"identity"),xqo=fF(()=>0,[],"zero"),vqo=fF(()=>1,[],"one"),wqo=fF(()=>!0,[],"true"),_qo=fF(()=>!1,[],"false"),GZ=Array.isArray;Pmr=Object.prototype.hasOwnProperty});function Ymr(t){this.type=t}function Xmr(t){switch(t.type){case $mr:return t.elements;case zmr:case Gmr:return[t.left,t.right];case Umr:return[t.callee].concat(t.arguments);case Vmr:return[t.test,t.consequent,t.alternate];case Wmr:return[t.object,t.property];case qmr:return t.properties;case jmr:return[t.key,t.value];case Hmr:return[t.argument];case Bmr:case n_e:case Lmr:default:return[]}}var Lmr,n_e,jmr,Bmr,$mr,zmr,Umr,Vmr,Gmr,Wmr,qmr,Hmr,Vy,Kmr,Zmr,Qmr,Jmr,egr,tgr,rgr,ngr,ogr,kqo,Iqo,Ydt=N(()=>{"use strict";r_e();Lmr="RawCode",n_e="Literal",jmr="Property",Bmr="Identifier",$mr="ArrayExpression",zmr="BinaryExpression",Umr="CallExpression",Vmr="ConditionalExpression",Gmr="LogicalExpression",Wmr="MemberExpression",qmr="ObjectExpression",Hmr="UnaryExpression";Ymr.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=Xmr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};Kmr=1,Zmr=2,Qmr=3,Jmr=4,egr=5,tgr=6,rgr=7,ngr=8,ogr=9;Vy={};Vy[Kmr]="Boolean";Vy[Zmr]="<end>";Vy[Qmr]="Identifier";Vy[Jmr]="Keyword";Vy[egr]="Null";Vy[tgr]="Numeric";Vy[rgr]="Punctuator";Vy[ngr]="String";Vy[ogr]="RegularExpression";kqo=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Iqo=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")});function Jdt(t){return(!t.getter||!t.getter[Xdt])&&(t.getter=VZ(t.field),t.getter[Xdt]=!0),t.getter}function Qdt(t,r){for(var n=r.fields,o=r.values,i=n.length,s=0,a,l;s<i;++s)if(l=n[s],a=Jdt(l)(t),qZ(a)&&(a=v2(a)),qZ(o[s])&&(o[s]=v2(o[s])),GZ(o[s])&&qZ(o[s][0])&&(o[s]=o[s].map(v2)),l.type===lgr){if(GZ(o[s])?o[s].indexOf(a)<0:a!==o[s])return!1}else if(l.type===ugr){if(!e$(a,o[s]))return!1}else if(l.type===dgr){if(!e$(a,o[s],!0,!1))return!1}else if(l.type===cgr){if(!e$(a,o[s],!1,!1))return!1}else if(l.type===fgr&&!e$(a,o[s],!1,!0))return!1;return!0}function ept(t,r,n){for(var o=this.context.data[t],i=o?o.values.value:[],s=o?o[HZ]&&o[HZ].value:void 0,a=n===i_e,l=i.length,u=0,c,f,d,p,h;u<l;++u)if(c=i[u],s&&a){if(f=f||{},d=f[p=c.unit]||0,d===-1)continue;if(h=Qdt(r,c),f[p]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(p).count)return!1}else if(h=Qdt(r,c),a^h)return h;return l&&a}function rpt(t,r,n){let o=this.context.data[t],i=o?o.values.value:[],s=o?o[HZ]&&o[HZ].value:void 0,a=n===i_e,l=t$(r),u=pgr(i,l);if(u===i.length||t$(i[u])!==l)return!1;if(s&&a){if(s.size===1)return!0;if(hgr(i,l)-u<s.size)return!1}return!0}function npt(t,r){return t.map(n=>Hdt(r.fields?{values:r.fields.map(o=>Jdt(o)(n.datum))}:{[Gy]:t$(n.datum)},r))}function opt(t,r,n,o){for(var i=this.context.data[t],s=i?i.values.value:[],a={},l={},u={},c,f,d,p,h,m,g,y,b,x,v=s.length,w=0,_,S;w<v;++w)if(c=s[w],p=c.unit,f=c.fields,d=c.values,f&&d){for(_=0,S=f.length;_<S;++_)h=f[_],g=a[h.field]||(a[h.field]={}),y=g[p]||(g[p]=[]),u[h.field]=b=h.type.charAt(0),x=o_e[`${b}_union`],g[p]=x(y,t_e(d[_]));n&&(y=l[p]||(l[p]=[]),y.push(t_e(d).reduce((C,E,T)=>(C[f[T].field]=E,C),{})))}else h=Gy,m=t$(c),g=a[h]||(a[h]={}),y=g[p]||(g[p]=[]),y.push(m),n&&(y=l[p]||(l[p]=[]),y.push({[Gy]:m}));if(r=r||Kdt,a[Gy]?a[Gy]=o_e[`${Gy}_${r}`](...Object.values(a[Gy])):Object.keys(a).forEach(C=>{a[C]=Object.keys(a[C]).map(E=>a[C][E]).reduce((E,T)=>E===void 0?T:o_e[`${u[C]}_${r}`](E,T))}),s=Object.keys(l),n&&s.length){let C=o?sgr:igr;a[C]=r===Kdt?{[Zdt]:s.reduce((E,T)=>(E.push(...l[T]),E),[])}:{[agr]:s.map(E=>({[Zdt]:l[E]}))}}return a}function YZ(t,r,n,o){r[0].type!==n_e&&cF("First argument to selection functions must be a string literal.");let i=r[0].value,s=r.length>=2&&qdt(r).value,a="unit",l=ggr+a,u=mgr+i;s===i_e&&!WZ(o,l)&&(o[l]=n.getData(i).indataRef(n,a)),WZ(o,u)||(o[u]=n.getData(i).tuplesRef())}var Xdt,i_e,Kdt,igr,sgr,Zdt,agr,Gy,t$,lgr,ugr,cgr,fgr,dgr,HZ,tpt,pgr,hgr,o_e,mgr,ggr,ipt=N(()=>{"use strict";Wdt();r_e();Ydt();Xdt=Symbol("vega_selection_getter");i_e="intersect",Kdt="union",igr="vlMulti",sgr="vlPoint",Zdt="or",agr="and",Gy="_vgsid_",t$=VZ(Gy),lgr="E",ugr="R",cgr="R-E",fgr="R-LE",dgr="R-RE",HZ="index:unit";tpt=$Z(t$),pgr=tpt.left,hgr=tpt.right;o_e={[`${Gy}_union`]:UZ,[`${Gy}_intersect`]:zZ,E_union:function(t,r){if(!t.length)return r;for(var n=0,o=r.length;n<o;++n)t.indexOf(r[n])<0&&t.push(r[n]);return t},E_intersect:function(t,r){return t.length?t.filter(n=>r.indexOf(n)>=0):r},R_union:function(t,r){var n=v2(r[0]),o=v2(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<o&&(t[1]=o),t):[n,o]},R_intersect:function(t,r){var n=v2(r[0]),o=v2(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?o<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>o&&(t[1]=o),t):[n,o]}},mgr=":",ggr="@"});function upt(t){let r=this.context.data[t];return r?r.values.value:[]}function ygr(t,r,n){let o=this.context.data[t]["index:"+r],i=o?o.value.get(n):void 0;return i&&i.count}function bgr(t,r){let n=this.context.dataflow,o=this.context.data[t],i=o.input;return n.pulse(i,n.changeset().remove(Lwe).insert(r)),1}function xgr(t,r,n){if(t){let o=this.context.dataflow,i=t.mark.source;o.pulse(i,o.changeset().encode(t,r))}return n!==void 0?n:t}function KZ(t,r,n){return!Number.isInteger(t)||!Number.isInteger(r)?"":(XZ.setYear(2e3),XZ.setMonth(t),XZ.setDate(r),cpt.call(this,XZ,n))}function Cgr(t){return KZ.call(this,t,1,"%B")}function Egr(t){return KZ.call(this,t,1,"%b")}function Tgr(t){return KZ.call(this,0,2+t,"%A")}function Agr(t){return KZ.call(this,0,2+t,"%a")}function c_e(t,r,n,o){r[0].type!==fA&&cl("First argument to data functions must be a string literal.");let i=r[0].value,s=kgr+i;if(!zy(s,o))try{o[s]=n.getData(i).tuplesRef()}catch{}}function Dgr(t,r,n,o){r[0].type!==fA&&cl("First argument to indata must be a string literal."),r[1].type!==fA&&cl("Second argument to indata must be a string literal.");let i=r[0].value,s=r[1].value,a=Igr+s;zy(a,o)||(o[a]=n.getData(i).indataRef(n,s))}function Sf(t,r,n,o){if(r[0].type===fA)spt(n,o,r[0].value);else for(t in n.scales)spt(n,o,t)}function spt(t,r,n){let o=a_e+n;if(!zy(r,o))try{r[o]=t.scaleRef(n)}catch{}}function Uv(t,r){let n;return lF(t)?t:b2(t)?(n=r.scales[t])&&n.value:void 0}function Ngr(t,r,n){r.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Sf,n._range=Sf,n._scale=Sf;let o=i=>"_["+(i.type===fA?uF(a_e+i.value):uF(a_e)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${o(i[0])})`,_range:i=>`${o(i[0])}.range()`,_scale:i=>`${o(i[0])}(${t(i[1])})`}}function f_e(t,r){return function(n,o,i){if(n){let s=Uv(n,(i||this).context);return s&&s.path[t](o)}else return r(o)}}function Rgr(t){let r=this.context.group,n=!1;if(r)for(;t;){if(t===r){n=!0;break}t=t.mark.group}return n}function d_e(t,r,n){try{t[r].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(o){t.warn(o)}return n[n.length-1]}function Pgr(){return d_e(this.context.dataflow,"warn",arguments)}function Lgr(){return d_e(this.context.dataflow,"info",arguments)}function jgr(){return d_e(this.context.dataflow,"debug",arguments)}function s_e(t){let r=t/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}function l_e(t){let r=ua(t),n=s_e(r.r),o=s_e(r.g),i=s_e(r.b);return .2126*n+.7152*o+.0722*i}function Bgr(t,r){let n=l_e(t),o=l_e(r),i=Math.max(n,o),s=Math.min(n,o);return(i+.05)/(s+.05)}function $gr(){let t=[].slice.call(arguments);return t.unshift({}),FZ(...t)}function dpt(t,r){return t===r||t!==t&&r!==r?!0:$y(t)?$y(r)&&t.length===r.length?zgr(t,r):!1:WB(t)&&WB(r)?ppt(t,r):!1}function zgr(t,r){for(let n=0,o=t.length;n<o;++n)if(!dpt(t[n],r[n]))return!1;return!0}function ppt(t,r){for(let n in t)if(!dpt(t[n],r[n]))return!1;return!0}function apt(t){return r=>ppt(t,r)}function Ugr(t,r,n,o,i,s){let a=this.context.dataflow,l=this.context.data[t],u=l.input,c=a.stamp(),f=l.changes,d,p;if(a._trigger===!1||!(u.value.length||r||o))return 0;if((!f||f.stamp<c)&&(l.changes=f=a.changeset(),f.stamp=c,a.runAfter(()=>{l.modified=!0,a.pulse(u,f).run()},!0,1)),n&&(d=n===!0?Lwe:$y(n)||kE(n)?n:apt(n),f.remove(d)),r&&f.insert(r),o&&(d=apt(o),u.value.some(d)?f.remove(d):f.insert(o)),i)for(p in s)f.modify(i,p,s[p]);return 1}function Vgr(t){let r=t.touches,n=r[0].clientX-r[1].clientX,o=r[0].clientY-r[1].clientY;return Math.sqrt(n*n+o*o)}function Ggr(t){let r=t.touches;return Math.atan2(r[0].clientY-r[1].clientY,r[0].clientX-r[1].clientX)}function Wgr(t,r){let n=lpt[r]||(lpt[r]=Pwe(r));return $y(t)?t.map(n):n(t)}function p_e(t){return $y(t)||ArrayBuffer.isView(t)?t:null}function h_e(t){return p_e(t)||(b2(t)?t:null)}function qgr(t,...r){return p_e(t).join(...r)}function Hgr(t,...r){return h_e(t).indexOf(...r)}function Ygr(t,...r){return h_e(t).lastIndexOf(...r)}function Xgr(t,...r){return h_e(t).slice(...r)}function Kgr(t,r,n){return lF(n)&&cl("Function argument passed to replace."),String(t).replace(r,n)}function Zgr(t){return p_e(t).slice().reverse()}function Qgr(t,r,n){return z4(t||0,r||0,n||0)}function Jgr(t,r){let n=Uv(t,(r||this).context);return n&&n.bandwidth?n.bandwidth():0}function e0r(t,r){let n=Uv(t,(r||this).context);return n?n.copy():void 0}function t0r(t,r){let n=Uv(t,(r||this).context);return n?n.domain():[]}function r0r(t,r,n){let o=Uv(t,(n||this).context);return o?$y(r)?(o.invertRange||o.invert)(r):(o.invert||o.invertExtent)(r):void 0}function n0r(t,r){let n=Uv(t,(r||this).context);return n&&n.range?n.range():[]}function o0r(t,r,n){let o=Uv(t,(n||this).context);return o?o(r):void 0}function i0r(t,r,n,o,i){t=Uv(t,(i||this).context);let s=Ive(r,n),a=t.domain(),l=a[0],u=$v(a),c=IZ;return u-l?c=$Y(t,l,u):t=(t.interpolator?Gn("sequential")().interpolator(t.interpolator()):Gn("linear")().interpolate(t.interpolate()).range(t.range())).domain([l=0,u=1]),t.ticks&&(a=t.ticks(+o||15),l!==a[0]&&a.unshift(l),u!==$v(a)&&a.push(u)),a.forEach(f=>s.stop(c(f),t(f))),s}function s0r(t,r,n){let o=Uv(t,(n||this).context);return function(i){return o?o.path.context(i)(r):""}}function a0r(t){let r=null;return function(n){return n?zM(n,r=r||WT(t)):t}}function mpt(t,r){let n=upt.call(r,t);return n.root&&n.root.lookup||{}}function l0r(t,r,n){let o=mpt(t,this),i=o[r],s=o[n];return i&&s?i.path(s).map(hpt):void 0}function u0r(t,r){let n=mpt(t,this)[r];return n?n.ancestors().map(hpt):void 0}function c0r(){let t=gpt();return t?t.screen:{}}function f0r(){let t=gpt();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function d0r(){let t=this.context.dataflow,r=t.container&&t.container();return r?[r.clientWidth,r.clientHeight]:[void 0,void 0]}function p0r(t,r,n){if(!t)return[];let[o,i]=t,s=new Tu().set(o[0],o[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return i1e(a,s,h0r(r))}function h0r(t){let r=null;if(t){let n=jwe(t.marktype),o=jwe(t.markname);r=i=>(!n.length||n.some(s=>i.marktype===s))&&(!o.length||o.some(s=>i.name===s))}return r}function y0r(t){let r=Jwe(t);m0r.forEach(n=>r[n]=g0r+n);for(let n in dF)r[n]=ypt+n;return FZ(r,Ngr(t,dF,m_e)),r}function $s(t,r,n){return arguments.length===1?dF[t]:(dF[t]=r,n&&(m_e[t]=n),u_e&&(u_e.functions[t]=ypt+t),this)}function $m(t,r){let n={},o;try{t=b2(t)?t:uF(t)+"",o=Ldt(t)}catch{cl("Expression parse error: "+t)}o.visit(s=>{if(s.type!==Ywe)return;let a=s.callee.name,l=bpt.visitors[a];l&&l(a,s.arguments,r,n)});let i=u_e(o);return i.globals.forEach(s=>{let a=fpt+s;!zy(n,a)&&r.getSignal(s)&&(n[a]=r.signalRef(s))}),{$expr:FZ({code:i.code},r.options.ast?{ast:o}:null),$fields:i.fields,$params:n}}var r$,vgr,cpt,wgr,_gr,Sgr,XZ,kgr,Igr,a_e,fpt,Mgr,Fgr,Ogr,lpt,hpt,gpt,dF,m0r,g0r,ypt,m_e,bpt,u_e,ZZ=N(()=>{"use strict";Uwe();Bdt();y5();js();el();dM();lB();ipt();pN();yN();Wo();r$=t=>function(r,n){return this.context.dataflow.locale()[t](n)(r)},vgr=r$("format"),cpt=r$("timeFormat"),wgr=r$("utcFormat"),_gr=r$("timeParse"),Sgr=r$("utcParse"),XZ=new Date(2e3,0,1);kgr=":",Igr="@",a_e="%",fpt="$";Mgr=f_e("area",V0e),Fgr=f_e("bounds",q0e),Ogr=f_e("centroid",Z0e);lpt={};hpt=t=>t.data;gpt=()=>typeof window<"u"&&window||null;dF={random(){return wd()},cumulativeNormal:TL,cumulativeLogNormal:QW,cumulativeUniform:rq,densityNormal:HW,densityLogNormal:ZW,densityUniform:tq,quantileNormal:AL,quantileLogNormal:JW,quantileUniform:nq,sampleNormal:EL,sampleLogNormal:KW,sampleUniform:eq,isArray:$y,isBoolean:mdt,isDate:Bwe,isDefined(t){return t!==void 0},isNumber:$we,isObject:WB,isRegExp:gdt,isString:b2,isTuple:kE,isValid(t){return t!=null&&t===t},toBoolean:vdt,toDate:wdt,toNumber:DZ,toString:_dt,indexof:Hgr,join:qgr,lastindexof:Ygr,replace:Kgr,reverse:Zgr,slice:Xgr,flush:pdt,lerp:ydt,merge:$gr,pad:bdt,peek:$v,pluck:Wgr,span:xdt,inrange:hdt,truncate:Sdt,rgb:ua,lab:pf,hcl:Nd,hsl:Dd,luminance:l_e,contrast:Bgr,sequence:sa,format:vgr,utcFormat:wgr,utcParse:Sgr,utcOffset:Yde,utcSequence:Kde,timeFormat:cpt,timeParse:_gr,timeOffset:Hde,timeSequence:Xde,timeUnitSpecifier:Bde,monthFormat:Cgr,monthAbbrevFormat:Egr,dayFormat:Tgr,dayAbbrevFormat:Agr,quarter:udt,utcquarter:cdt,week:Ude,utcweek:Gde,dayofyear:zde,utcdayofyear:Vde,warn:Pgr,info:Lgr,debug:jgr,extent:ddt,inScope:Rgr,intersect:p0r,clampRange:fdt,pinchDistance:Vgr,pinchAngle:Ggr,screen:c0r,containerSize:d0r,windowSize:f0r,bandspace:Qgr,setdata:bgr,pathShape:a0r,panLinear:tdt,panLog:rdt,panPow:ndt,panSymlog:odt,zoomLinear:idt,zoomLog:sdt,zoomPow:adt,zoomSymlog:ldt,encode:xgr,modify:Ugr},m0r=["view","item","group","xy","x","y"],g0r="event.vega.",ypt="this.",m_e={},bpt={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${uF(fpt+t)}]`,functions:y0r,constants:Qwe,visitors:m_e},u_e=jdt(bpt);$s("bandwidth",Jgr,Sf);$s("copy",e0r,Sf);$s("domain",t0r,Sf);$s("range",n0r,Sf);$s("invert",r0r,Sf);$s("scale",o0r,Sf);$s("gradient",i0r,Sf);$s("geoArea",Mgr,Sf);$s("geoBounds",Fgr,Sf);$s("geoCentroid",Ogr,Sf);$s("geoShape",s0r,Sf);$s("indata",ygr,Dgr);$s("data",upt,c_e);$s("treePath",l0r,c_e);$s("treeAncestors",u0r,c_e);$s("vlSelectionTest",ept,YZ);$s("vlSelectionIdTest",rpt,YZ);$s("vlSelectionResolve",opt,YZ);$s("vlSelectionTuples",npt)});function zm(t,r,n){return t.fields=r||[],t.fname=n,t}function b0r(t){return t==null?null:t.fields}function xpt(t){return t.length===1?x0r(t[0]):v0r(t)}function w2(t){throw Error(t)}function vpt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||w2("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&w2("Access path missing closing bracket: "+t),o&&w2("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function QZ(t,r,n){let o=vpt(t);return t=o.length===1?o[0]:t,zm((n&&n.get||xpt)(o),[t],r||t)}function eQ(t){return t===Object(t)}function pF(t){return t!=null?JZ(t)?t:[t]:[]}function w0r(t){return typeof t=="function"}function _pt(t,r,n){n=n||{},r=pF(r)||[];let o=[],i=[],s={},a=n.comparator||S0r;return pF(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===_0r?-1:1),i.push(l=w0r(l)?l:QZ(l,null,n)),(b0r(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:zm(a(i,o),Object.keys(s))}function Cpt(t,r){return T0r.call(t,r)}function A0r(t){return typeof t=="string"}function Ept(t,r,n){t&&(t=r?pF(t).map(l=>l.replace(/\\(.)/g,"$1")):pF(t));let o=t&&t.length,i=n&&n.get||xpt,s=l=>i(r?[l]:vpt(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return zm(a,t,"key")}function tQ(t){return JZ(t)?"["+t.map(tQ)+"]":eQ(t)||A0r(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function g_e(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var x0r,v0r,Hqo,Yqo,Xqo,Kqo,wpt,Zqo,JZ,_0r,Spt,S0r,C0r,E0r,T0r,Tpt=N(()=>{"use strict";x0r=t=>function(r){return r[t]},v0r=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};Hqo=QZ("id"),Yqo=zm(t=>t,[],"identity"),Xqo=zm(()=>0,[],"zero"),Kqo=zm(()=>1,[],"one"),wpt=zm(()=>!0,[],"true"),Zqo=zm(()=>!1,[],"false"),JZ=Array.isArray;_0r="descending";Spt=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),S0r=(t,r)=>t.length===1?C0r(t[0],r[0]):E0r(t,r,t.length),C0r=(t,r)=>function(n,o){return Spt(t(n),t(o))*r},E0r=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=Spt(s(o),s(i));return a*r[l]}),T0r=Object.prototype.hasOwnProperty});function k0r(t){let r=this,n=t.operators||[];return t.background&&(r.background=t.background),t.eventConfig&&(r.eventConfig=t.eventConfig),t.locale&&(r.locale=t.locale),n.forEach(o=>r.parseOperator(o)),n.forEach(o=>r.parseOperatorParameters(o)),(t.streams||[]).forEach(o=>r.parseStream(o)),(t.updates||[]).forEach(o=>r.parseUpdate(o)),r.resolve()}function D0r(t,r){let n="";return I0r[r]||(t.x2&&(t.x?(Apt[r]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(Apt[r]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function y_e(t){return(t+"").toLowerCase()}function N0r(t){return y_e(t)==="operator"}function M0r(t){return y_e(t)==="collect"}function n$(t,r,n){n.endsWith(";")||(n="return("+n+");");let o=Function(...r.concat(n));return t&&t.functions?o.bind(t.functions):o}function F0r(t,r,n,o){return`((u = ${t}) < (v = ${r}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${o}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${o} : `}function R0r(t){let r=this;N0r(t.type)||!t.type?r.operator(t,t.update?r.operatorExpression(t.update):null):r.transform(t,t.type)}function P0r(t){let r=this;if(t.params){let n=r.get(t.id);n||w2("Invalid operator id: "+t.id),r.dataflow.connect(n,n.parameters(r.parseParameters(t.params),t.react,t.initonly))}}function L0r(t,r){r=r||{};let n=this;for(let o in t){let i=t[o];r[o]=JZ(i)?i.map(s=>kpt(s,n,r)):kpt(i,n,r)}return r}function kpt(t,r,n){if(!t||!eQ(t))return t;for(let o=0,i=Ipt.length,s;o<i;++o)if(s=Ipt[o],Cpt(t,s.key))return s.parse(t,r,n);return t}function j0r(t,r){return r.get(t.$ref)||w2("Operator not defined: "+t.$ref)}function B0r(t,r,n){t.$params&&r.parseParameters(t.$params,n);let o="e:"+t.$expr.code;return r.fn[o]||(r.fn[o]=zm(r.parameterExpression(t.$expr),t.$fields))}function $0r(t,r){let n="k:"+t.$key+"_"+!!t.$flat;return r.fn[n]||(r.fn[n]=Ept(t.$key,t.$flat,r.expr.codegen))}function z0r(t,r){if(!t.$field)return null;let n="f:"+t.$field+"_"+t.$name;return r.fn[n]||(r.fn[n]=QZ(t.$field,t.$name,r.expr.codegen))}function U0r(t,r){let n="c:"+t.$compare+"_"+t.$order,o=pF(t.$compare).map(i=>i&&i.$tupleid?_r:i);return r.fn[n]||(r.fn[n]=_pt(o,t.$order,r.expr.codegen))}function V0r(t,r){let n=t.$encode,o={};for(let i in n){let s=n[i];o[i]=zm(r.encodeExpression(s.$expr),s.$fields),o[i].output=s.$output}return o}function G0r(t,r){return r}function W0r(t,r){let n=t.$subflow;return function(o,i,s){let a=r.fork().parse(n),l=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(s),l.detachSubflow=()=>r.detach(a),l}}function q0r(){return _r}function H0r(t){var r=this,n=t.filter!=null?r.eventExpression(t.filter):void 0,o=t.stream!=null?r.get(t.stream):void 0,i;t.source?o=r.events(t.source,t.type,n):t.merge&&(i=t.merge.map(s=>r.get(s)),o=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(s=>r.get(s)),o=o.between(i[0],i[1])),t.filter&&(o=o.filter(n)),t.throttle!=null&&(o=o.throttle(+t.throttle)),t.debounce!=null&&(o=o.debounce(+t.debounce)),o==null&&w2("Invalid stream definition: "+JSON.stringify(t)),t.consume&&o.consume(!0),r.stream(t,o)}function Y0r(t){var r=this,n=eQ(n=t.source)?n.$ref:n,o=r.get(n),i=null,s=t.update,a=void 0;o||w2("Source not defined: "+t.source),i=t.target&&t.target.$expr?r.eventExpression(t.target.$expr):r.get(t.target),s&&s.$expr&&(s.$params&&(a=r.parseParameters(s.$params)),s=r.handlerExpression(s.$expr)),r.update(t,o,i,s,a)}function K0r(t){var r=this,n={};if(t.signals){var o=n.signals={};Object.keys(r.signals).forEach(s=>{let a=r.signals[s];t.signals(s,a)&&(o[s]=a.value)})}if(t.data){var i=n.data={};Object.keys(r.data).forEach(s=>{let a=r.data[s];t.data(s,a)&&(i[s]=a.input.value)})}return r.subcontext&&t.recurse!==!1&&(n.subcontext=r.subcontext.map(s=>s.getState(t))),n}function Z0r(t){var r=this,n=r.dataflow,o=t.data,i=t.signals;Object.keys(i||{}).forEach(s=>{n.update(r.signals[s],i[s],X0r)}),Object.keys(o||{}).forEach(s=>{n.pulse(r.data[s].input,n.changeset().remove(wpt).insert(o[s]))}),(t.subcontext||[]).forEach((s,a)=>{let l=r.subcontext[a];l&&l.setState(s)})}function rQ(t,r,n,o){return new Npt(t,r,n,o)}function Npt(t,r,n,o){this.dataflow=t,this.transforms=r,this.events=t.events.bind(t),this.expr=o||O0r,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Dpt(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}var I0r,Apt,O0r,Ipt,X0r,b_e=N(()=>{"use strict";Tpt();el();I0r=g_e(["rule"]),Apt=g_e(["group","image","rect"]);O0r={operator:(t,r)=>n$(t,["_"],r.code),parameter:(t,r)=>n$(t,["datum","_"],r.code),event:(t,r)=>n$(t,["event"],r.code),handler:(t,r)=>{let n=`var datum=event.item&&event.item.datum;return ${r.code};`;return n$(t,["_","event"],n)},encode:(t,r)=>{let{marktype:n,channels:o}=r,i="var o=item,datum=o.datum,m=0,$;";for(let s in o){let a="o["+tQ(s)+"]";i+=`$=${o[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=D0r(o,n),i+="return m;",n$(t,["item","_"],i)},codegen:{get(t){let r=`[${t.map(tQ).join("][")}]`,n=Function("_",`return _${r};`);return n.path=r,n},comparator(t,r){let n,o=(s,a)=>{let l=r[a],u,c;return s.path?(u=`a${s.path}`,c=`b${s.path}`):((n=n||{})["f"+a]=s,u=`this.f${a}(a)`,c=`this.f${a}(b)`),F0r(u,c,-l,l)},i=Function("a","b","var u, v; return "+t.map(o).join("")+"0;");return n?i.bind(n):i}}};Ipt=[{key:"$ref",parse:j0r},{key:"$key",parse:$0r},{key:"$expr",parse:B0r},{key:"$field",parse:z0r},{key:"$encode",parse:V0r},{key:"$compare",parse:U0r},{key:"$context",parse:G0r},{key:"$subflow",parse:W0r},{key:"$tupleid",parse:q0r}];X0r={skip:!0};Npt.prototype=Dpt.prototype={fork(){let t=new Dpt(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);let r=Object.keys(t.nodes);for(let n of r)t.nodes[n]._targets=null;for(let n of r)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,r){return this.nodes[t]=r},add(t,r){let n=this,o=n.dataflow,i=t.value;if(n.set(t.id,r),M0r(t.type)&&i&&(i.$ingest?o.ingest(r,i.$ingest,i.$format):i.$request?o.preload(r,i.$request,i.$format):o.pulse(r,o.changeset().insert(i))),t.root&&(n.root=r),t.parent){let s=n.get(t.parent.$ref);s?(o.connect(s,[r]),r.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),o.connect(s,[r]),r.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=r),t.scale&&(n.scales[t.scale]=r),t.data)for(let s in t.data){let a=n.data[s]||(n.data[s]={});t.data[s].forEach(l=>a[l]=r)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,r){this.add(t,this.dataflow.add(t.value,r))},transform(t,r){this.add(t,this.dataflow.add(this.transforms[y_e(r)]))},stream(t,r){this.set(t.id,r)},update(t,r,n,o,i){this.dataflow.on(r,n,o,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:k0r,parseOperator:R0r,parseOperatorParameters:P0r,parseParameters:L0r,parseStream:H0r,parseUpdate:Y0r,getState:K0r,setState:Z0r}});function Q0r(t){let r=t.container();r&&(r.setAttribute("role","graphics-document"),r.setAttribute("aria-roleDescription","visualization"),$pt(r,t.description()))}function $pt(t,r){t&&(r==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",r))}function J0r(t){t.add(null,r=>(t._background=r.bg,t._resize=1,r.bg),{bg:t._signals.background})}function eyr(t){let r=t._signals.cursor||(t._signals.cursor=t.add({user:x_e,item:null}));t.on(t.events("view","mousemove"),r,(n,o)=>{let i=r.value,s=i?Jn(i)?i:i.user:x_e,a=o.item&&o.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),t.add(null,function(n){let o=n.cursor,i=this.value;return Jn(o)||(i=o.item,o=o.user),w_e(t,o&&o!==x_e?o:i||o),i},{cursor:r})}function w_e(t,r){let n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return r==null?n.style.removeProperty("cursor"):n.style.cursor=r}function iQ(t,r){var n=t._runtime.data;return Pr(n,r)||pt("Unrecognized data set: "+r),n[r]}function tyr(t,r){return arguments.length<2?iQ(this,t).values.value:aQ.call(this,t,rv().remove(W0).insert(r))}function aQ(t,r){Bfe(r)||pt("Second argument to changes must be a changeset.");let n=iQ(this,t);return n.modified=!0,this.pulse(n.input,r)}function ryr(t,r){return aQ.call(this,t,rv().insert(r))}function nyr(t,r){return aQ.call(this,t,rv().remove(r))}function zpt(t){var r=t.padding();return Math.max(0,t._viewWidth+r.left+r.right)}function Upt(t){var r=t.padding();return Math.max(0,t._viewHeight+r.top+r.bottom)}function lQ(t){var r=t.padding(),n=t._origin;return[r.left+n[0],r.top+n[1]]}function oyr(t){var r=lQ(t),n=zpt(t),o=Upt(t);t._renderer.background(t.background()),t._renderer.resize(n,o,r),t._handler.origin(r),t._resizeListeners.forEach(i=>{try{i(n,o)}catch(s){t.error(s)}})}function iyr(t,r,n){var o=t._renderer,i=o&&o.canvas(),s,a,l;return i&&(l=lQ(t),a=r.changedTouches?r.changedTouches[0]:r,s=sB(a,i),s[0]-=l[0],s[1]-=l[1]),r.dataflow=t,r.item=n,r.vega=syr(t,n,s),r}function syr(t,r,n){let o=r?r.mark.marktype==="group"?r:r.mark.group:null;function i(a){var l=o,u;if(a){for(u=r;u;u=u.mark.group)if(u.mark.name===a){l=u;break}}return l&&l.mark&&l.mark.interactive?l:{}}function s(a){if(!a)return n;Jn(a)&&(a=i(a));let l=n.slice();for(;a;)l[0]-=a.x||0,l[1]-=a.y||0,a=a.mark&&a.mark.group;return l}return{view:Qa(t),item:Qa(r||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}function cyr(t){let r=an({defaults:{}},t),n=(o,i)=>{i.forEach(s=>{Hr(o[s])&&(o[s]=gu(o[s]))})};return n(r.defaults,["prevent","allow"]),n(r,["view","window","selector"]),r}function Vpt(t,r,n,o){t._eventListeners.push({type:n,sources:Br(r),handler:o})}function fyr(t,r){var n=t._eventConfig.defaults,o=n.prevent,i=n.allow;return o===!1||i===!0?!1:o===!0||i===!1?!0:o?o[r]:i?!i[r]:t.preventDefault()}function nQ(t,r,n){let o=t._eventConfig&&t._eventConfig[r];return o===!1||un(o)&&!o[n]?(t.warn(`Blocked ${r} ${n} event listener.`),!1):!0}function dyr(t,r,n){var o=this,i=new aN(n),s=function(c,f){o.runAsync(null,()=>{t===Mpt&&fyr(o,r)&&c.preventDefault(),i.receive(iyr(o,c,f))})},a;if(t===ayr)nQ(o,"timer",r)&&o.timer(s,r);else if(t===Mpt)nQ(o,"view",r)&&o.addEventListener(r,s,uyr);else if(t===lyr?nQ(o,"window",r)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&nQ(o,"selector",r)&&(a=document.querySelectorAll(t)),!a)o.warn("Can not resolve event source: "+t);else{for(var l=0,u=a.length;l<u;++l)a[l].addEventListener(r,s);Vpt(o,a,r,s)}return i}function Fpt(t){return t.item}function Opt(t){return t.item.mark.source}function Rpt(t){return function(r,n){return n.vega.view().changeset().encode(n.item,t)}}function pyr(t,r){return t=[t||"hover"],r=[r||"update",t[0]],this.on(this.events("view","mouseover",Fpt),Opt,Rpt(t)),this.on(this.events("view","mouseout",Fpt),Opt,Rpt(r)),this}function hyr(){var t=this._tooltip,r=this._timers,n=this._eventListeners,o,i,s;for(o=r.length;--o>=0;)r[o].stop();for(o=n.length;--o>=0;)for(s=n[o],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function zd(t,r,n){let o=document.createElement(t);for(let i in r)o.setAttribute(i,r[i]);return n!=null&&(o.textContent=n),o}function byr(t,r,n){if(!r)return;let o=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=t.signal(o.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(o.signal,a)})}},o.debounce&&(i.update=Rce(o.debounce,i.update))),(o.input==null&&o.element?xyr:wyr)(i,r,o,t),i.active||(t.on(t._signals[o.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(o.signal))}),i.active=!0),i}function xyr(t,r,n,o){let i=n.event||"input",s=()=>t.update(r.value);o.signal(n.signal,r.value),r.addEventListener(i,s),Vpt(o,r,i,s),t.set=a=>{r.value=a,r.dispatchEvent(vyr(i))}}function vyr(t){return typeof Event<"u"?new Event(t):{type:t}}function wyr(t,r,n,o){let i=o.signal(n.signal),s=zd("div",{class:myr}),a=n.input==="radio"?s:s.appendChild(zd("label"));a.appendChild(zd("span",{class:gyr},n.name||n.signal)),r.appendChild(s);let l=_yr;switch(n.input){case"checkbox":l=Syr;break;case"select":l=Cyr;break;case"radio":l=Eyr;break;case"range":l=Tyr;break}l(t,a,n,i)}function _yr(t,r,n,o){let i=zd("input");for(let s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=o,r.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=s=>i.value=s}function Syr(t,r,n,o){let i={type:"checkbox",name:n.signal};o&&(i.checked=!0);let s=zd("input",i);r.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=a=>s.checked=!!a||null}function Cyr(t,r,n,o){let i=zd("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,l)=>{let u={value:a};sQ(a,o)&&(u.selected=!0),i.appendChild(zd("option",u,(s[l]||a)+""))}),r.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=a=>{for(let l=0,u=n.options.length;l<u;++l)if(sQ(n.options[l],a)){i.selectedIndex=l;return}}}function Eyr(t,r,n,o){let i=zd("span",{class:yyr}),s=n.labels||[];r.appendChild(i),t.elements=n.options.map((a,l)=>{let u={type:"radio",name:n.signal,value:a};sQ(a,o)&&(u.checked=!0);let c=zd("input",u);c.addEventListener("change",()=>t.update(a));let f=zd("label",{},(s[l]||a)+"");return f.prepend(c),i.appendChild(f),c}),t.set=a=>{let l=t.elements,u=l.length;for(let c=0;c<u;++c)sQ(l[c].value,a)&&(l[c].checked=!0)}}function Tyr(t,r,n,o){o=o!==void 0?o:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+o)||100,s=n.min||Math.min(0,i,+o)||0,a=n.step||fc(s,i,100),l=zd("input",{type:"range",name:n.signal,min:s,max:i,step:a});l.value=o;let u=zd("span",{},+o);r.appendChild(l),r.appendChild(u);let c=()=>{u.textContent=l.value,t.update(+l.value)};l.addEventListener("input",c),l.addEventListener("change",c),t.elements=[l],t.set=f=>{l.value=f,u.textContent=f}}function sQ(t,r){return t===r||t+""==r+""}function Gpt(t,r,n,o,i,s){return r=r||new o(t.loader()),r.initialize(n,zpt(t),Upt(t),lQ(t),i,s).background(t.background())}function __e(t,r){return r?function(){try{r.apply(this,arguments)}catch(n){t.error(n)}}:null}function Ayr(t,r,n,o){let i=new o(t.loader(),__e(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,lQ(t),t);return r&&r.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function kyr(t,r){let n=this,o=n._renderType,i=n._eventConfig.bind,s=aB(o);t=n._el=t?v_e(n,t,!0):null,Q0r(n),s||n.error("Unrecognized renderer type: "+o);let a=s.handler||qM,l=t?s.renderer:s.headless;return n._renderer=l?Gpt(n,n._renderer,t,l):null,n._handler=Ayr(n,n._handler,t,a),n._redraw=!0,t&&i!=="none"&&(r=r?n._elBind=v_e(n,r,!0):t.appendChild(zd("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=v_e(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{byr(n,u.element||r,u)})),n}function v_e(t,r,n){if(typeof r=="string")if(typeof document<"u"){if(r=document.querySelector(r),!r)return t.error("Signal bind element not found: "+r),null}else return t.error("DOM document instance not found."),null;if(r&&n)try{r.innerHTML=""}catch(o){r=null,t.error(o)}return r}function Ppt(t){return un(t)?{top:o$(t.top),bottom:o$(t.bottom),left:o$(t.left),right:o$(t.right)}:Iyr(o$(t))}function S_e(t,r,n,o){return je(this,null,function*(){let i=aB(r),s=i&&i.headless;return s||pt("Unrecognized renderer type: "+r),yield t.runAsync(),Gpt(t,null,null,s,n,o).renderAsync(t._scenegraph.root)})}function Dyr(t,r){return je(this,null,function*(){t!==Nv.Canvas&&t!==Nv.SVG&&t!==Nv.PNG&&pt("Unrecognized image type: "+t);let n=yield S_e(this,t,r);return t===Nv.SVG?Nyr(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function Nyr(t,r){let n=new Blob([t],{type:r});return window.URL.createObjectURL(n)}function Myr(t,r){return je(this,null,function*(){return(yield S_e(this,Nv.Canvas,t,r)).canvas()})}function Fyr(t){return je(this,null,function*(){return(yield S_e(this,Nv.SVG,t)).svg()})}function Oyr(t,r,n){return rQ(t,tv,dF,n).parse(r)}function Ryr(t){var r=this._runtime.scales;return Pr(r,t)||pt("Unrecognized scale or projection: "+t),r[t].value}function Hpt(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===C_e?o.left+o.right:0)}function Ypt(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===C_e?o.top+o.bottom:0)}function Pyr(t){var r=t._signals,n=r[Wpt],o=r[qpt],i=r[C_e];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,l=>{t._width=l.size,t._viewWidth=Hpt(t,l.size),s()},{size:n}),t._resizeHeight=t.add(null,l=>{t._height=l.size,t._viewHeight=Ypt(t,l.size),s()},{size:o});let a=t.add(null,s,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=o.rank+1,a.rank=i.rank+1}function Lyr(t,r,n,o,i,s){this.runAfter(a=>{let l=0;a._autosize=0,a.width()!==n&&(l=1,a.signal(Wpt,n,Lpt),a._resizeWidth.skip(!0)),a.height()!==o&&(l=1,a.signal(qpt,o,Lpt),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==r&&(a._resize=1,a._viewHeight=r),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),l&&a.run("enter"),s&&a.runAfter(u=>u.resize())},!1,1)}function jyr(t){return this._runtime.getState(t||{data:Byr,signals:$yr,recurse:!0})}function Byr(t,r){return r.modified&&Hr(r.input.value)&&t.indexOf("_:vega:_")}function $yr(t,r){return!(t==="parent"||r instanceof tv.proxy)}function zyr(t){return this.runAsync(null,r=>{r._trigger=!1,r._runtime.setState(t)},r=>{r._trigger=!0}),this}function Uyr(t,r){function n(o){t({timestamp:Date.now(),elapsed:o})}this._timers.push(Sbe(n,r))}function Vyr(t,r,n,o){let i=t.element();i&&i.setAttribute("title",Gyr(o))}function Gyr(t){return t==null?"":Hr(t)?Xpt(t):un(t)&&!YP(t)?Wyr(t):t+""}function Wyr(t){return Object.keys(t).map(r=>{let n=t[r];return r+": "+(Hr(n)?Xpt(n):Kpt(n))}).join(`
`)}function Xpt(t){return"["+t.map(Kpt).join(", ")+"]"}function Kpt(t){return Hr(t)?"[\u2026]":un(t)&&!YP(t)?"{\u2026}":t}function E_e(t,r){let n=this;if(r=r||{},Hw.call(n),r.loader&&n.loader(r.loader),r.logger&&n.logger(r.logger),r.logLevel!=null&&n.logLevel(r.logLevel),r.locale||t.locale){let s=an({},t.locale,r.locale);n.locale(fK(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=r.renderer||Nv.Canvas,n._scenegraph=new $K;let o=n._scenegraph.root;n._renderer=null,n._tooltip=r.tooltip||Vyr,n._redraw=!0,n._handler=new qM().scene(o),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=cyr(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=Oyr(n,t,r.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:an({},s)})),i.root&&i.root.set(o),o.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(o.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Hpt(n,n._width),n._viewHeight=Ypt(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Pyr(n),J0r(n),eyr(n),n.description(t.description),r.hover&&n.hover(),r.container&&n.initialize(r.container,r.bind)}function oQ(t,r){return Pr(t._signals,r)?t._signals[r]:pt("Unrecognized signal name: "+$r(r))}function Zpt(t,r){let n=(t._targets||[]).filter(o=>o._update&&o._update.handler===r);return n.length?n[0]:null}function jpt(t,r,n,o){let i=Zpt(n,o);return i||(i=__e(t,()=>o(r,n.value)),i.handler=o,t.on(n,null,i)),t}function Bpt(t,r,n){let o=Zpt(r,n);return o&&r._targets.remove(o),t}var x_e,Mpt,ayr,lyr,uyr,myr,gyr,yyr,o$,Iyr,Wpt,qpt,C_e,Lpt,Qpt=N(()=>{"use strict";Ls();el();lB();Wo();ZZ();b_e();Cbe();dK();x_e="default";Mpt="view",ayr="timer",lyr="window",uyr={trap:!1};myr="vega-bind",gyr="vega-bind-name",yyr="vega-bind-radio";o$=t=>+t||0,Iyr=t=>({top:t,bottom:t,left:t,right:t});Wpt="width",qpt="height",C_e="padding",Lpt={skip:!0};Dt(E_e,Hw,{evaluate(t,r,n){return je(this,null,function*(){if(yield Hw.prototype.evaluate.call(this,t,r),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,oyr(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(o){this.error(o)}return n&&bL(this,n),this})},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let r=t!=null?t+"":null;return r!==this._desc&&$pt(this._el,this._desc=r),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,r,n){let o=oQ(this,t);return arguments.length===1?o.value:this.update(o,r,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",Ppt(t)):Ppt(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(aB(t)||pt("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Hw.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(oQ(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Lyr,addEventListener(t,r,n){let o=r;return n&&n.trap===!1||(o=__e(this,r),o.raw=r),this._handler.on(t,o),this},removeEventListener(t,r){for(var n=this._handler.handlers(t),o=n.length,i,s;--o>=0;)if(s=n[o].type,i=n[o].handler,t===s&&(r===i||r===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(t){let r=this._resizeListeners;return r.indexOf(t)<0&&r.push(t),this},removeResizeListener(t){var r=this._resizeListeners,n=r.indexOf(t);return n>=0&&r.splice(n,1),this},addSignalListener(t,r){return jpt(this,t,oQ(this,t),r)},removeSignalListener(t,r){return Bpt(this,oQ(this,t),r)},addDataListener(t,r){return jpt(this,t,iQ(this,t).values,r)},removeDataListener(t,r){return Bpt(this,iQ(this,t).values,r)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let r=w_e(this,null);this._globalCursor=!!t,r&&w_e(this,r)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:Uyr,events:dyr,finalize:hyr,hover:pyr,data:tyr,change:aQ,insert:ryr,remove:nyr,scale:Ryr,initialize:kyr,toImageURL:Dyr,toCanvas:Myr,toSVG:Fyr,getState:jyr,setState:zyr})});function oht(t,r,n){return rht=r||qyr,nht=n||Zyr,iht(t.trim()).map(T_e)}function Qyr(t){return nht[t]}function i$(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function iht(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=i$(t,i,tht,uQ+Jpt,cQ+eht),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function T_e(t){return t[0]==="["?Jyr(t):ebr(t)}function Jyr(t){let r=t.length,n=1,o;if(n=i$(t,n,cQ,uQ,cQ),n===r)throw"Empty between selector: "+t;if(o=iht(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==Xyr)throw"Expected '>' after between selector: "+t;o=o.map(T_e);let i=T_e(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function ebr(t){let r={source:rht},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===eht){if(l=t.lastIndexOf(Jpt),l>=0){try{o=tbr(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===Yyr&&(i=++l),u=i$(t,l,Hyr),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=i$(t,l,uQ),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=i$(t,l,cQ),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==uQ)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||Kyr.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):Qyr(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function tbr(t){let r=t.split(tht);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var qyr,uQ,cQ,Jpt,eht,Hyr,tht,Yyr,Xyr,Kyr,Zyr,rht,nht,sht=N(()=>{"use strict";qyr="view",uQ="[",cQ="]",Jpt="{",eht="}",Hyr=":",tht=",",Yyr="@",Xyr=">",Kyr=/[[\]{}]/,Zyr={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});function rbr(t){return un(t)?t:{type:t||"pad"}}function obr(t){return un(t)?t.signal?t:{top:s$(t.top),bottom:s$(t.bottom),left:s$(t.left),right:s$(t.right)}:nbr(s$(t))}function aht(t,r,n,o){return n!=null?(un(n)&&!Hr(n)||Hr(n)&&n.length&&un(n[0])?t.update[r]=n:t[o||"enter"][r]={value:n},1):0}function Gl(t,r,n){for(let o in r)aht(t,o,r[o]);for(let o in n)aht(t,o,n[o],"update")}function xF(t,r,n){for(let o in r)n&&Pr(n,o)||(t[o]=an(t[o]||{},r[o]));return t}function mF(t,r){return r&&(r.enter&&r.enter[t]||r.update&&r.update[t])}function vbr(t,r,n,o,i){let s={},a={},l,u,c,f;u="lineBreak",r==="text"&&i[u]!=null&&!mF(u,t)&&A_e(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===j_e?i.group:n===L_e?an({},i.mark,i[r]):null;for(u in f)c=mF(u,t)||(u==="fill"||u==="stroke")&&(mF("fill",t)||mF("stroke",t)),c||A_e(s,u,f[u]);Br(o).forEach(d=>{let p=i.style&&i.style[d];for(let h in p)mF(h,t)||A_e(s,h,p[h])}),t=an({},t);for(u in s)f=s[u],f.signal?(l=l||{})[u]=f:a[u]=f;return t.enter=an(a,t.enter),l&&(t.update=an(l,t.update)),t}function A_e(t,r,n){t[r]=n&&n.signal?{signal:n.signal}:{value:n}}function bQ(t){if(t.gradient!=null)return _br(t);let r=t.signal?`(${t.signal})`:t.color?wbr(t.color):t.field!=null?kht(t.field):t.value!==void 0?$r(t.value):void 0;return t.scale!=null&&(r=Sbr(t,r)),r===void 0&&(r=null),t.exponent!=null&&(r=`pow(${r},${dQ(t.exponent)})`),t.mult!=null&&(r+=`*${dQ(t.mult)}`),t.offset!=null&&(r+=`+${dQ(t.offset)}`),t.round&&(r=`round(${r})`),r}function wbr(t){return t.c?fQ("hcl",t.h,t.c,t.l):t.h||t.s?fQ("hsl",t.h,t.s,t.l):t.l||t.a?fQ("lab",t.l,t.a,t.b):t.r||t.g||t.b?fQ("rgb",t.r,t.g,t.b):null}function _br(t){let r=[t.start,t.stop,t.count].map(n=>n==null?null:$r(n));for(;r.length&&Un(r)==null;)r.pop();return r.unshift(Aht(t.gradient)),`gradient(${r.join(",")})`}function dQ(t){return un(t)?"("+bQ(t)+")":t}function kht(t){return Iht(un(t)?t:{datum:t})}function Iht(t){let r,n,o;if(t.signal)r="datum",o=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),r="item";n-- >0;)r+=".mark.group";t.parent?(o=t.parent,r+=".datum"):o=t.group}else t.datum?(r="datum",o=t.datum):pt("Invalid field reference: "+$r(t));return t.signal||(o=Jn(o)?WP(o).map($r).join("]["):Iht(o)),r+"["+o+"]"}function Sbr(t,r){let n=Aht(t.scale);return t.range!=null?r=`lerp(_range(${n}), ${+t.range})`:(r!==void 0&&(r=`_scale(${n}, ${r})`),t.band&&(r=(r?r+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+dQ(t.band)),t.extra&&(r=`(datum.extra ? _scale(${n}, datum.extra.value) : ${r})`)),r==null&&(r="0")),r}function Cbr(t){let r="";return t.forEach(n=>{let o=bQ(n);r+=n.test?`(${n.test})?${o}:`:o}),Un(r)===":"&&(r+="null"),r}function Dht(t,r,n,o,i,s){let a={};s=s||{},s.encoders={$encode:a},t=vbr(t,r,n,o,i.config);for(let l in t)a[l]=Ebr(t[l],r,s,i);return s}function Ebr(t,r,n,o){let i={},s={};for(let a in t)t[a]!=null&&(i[a]=Abr(Tbr(t[a]),o,n,s));return{$expr:{marktype:r,channels:i},$fields:Object.keys(s),$output:Object.keys(t)}}function Tbr(t){return Hr(t)?Cbr(t):bQ(t)}function Abr(t,r,n,o){let i=$m(t,r);return i.$fields.forEach(s=>o[s]=1),an(n,i.$params),i.$expr}function lht(t,r){pt(t+' for "outer" push: '+$r(r))}function Nht(t,r){let n=t.name;if(t.push===kbr)r.signals[n]||lht("No prior signal definition",n),Ibr.forEach(o=>{t[o]!==void 0&&lht("Invalid property ",o)});else{let o=r.addSignal(n,t.value);t.react===!1&&(o.react=!1),t.bind&&r.addBinding(n,t.bind)}}function D_e(t,r,n,o){this.id=-1,this.type=t,this.value=r,this.params=n,o&&(this.parent=o)}function xQ(t,r,n,o){return new D_e(t,r,n,o)}function yQ(t,r){return xQ("operator",t,r)}function Nr(t){let r={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(r),r}function u$(t,r){return r?{$field:t,$name:r}:{$field:t}}function uht(t,r){return{$compare:t,$order:r}}function Dbr(t,r){let n={$key:t};return r&&(n.$flat=!0),n}function Fbr(t){return un(t)?(t.order===Mbr?"-":"+")+vQ(t.op,t.field):""}function vQ(t,r){return(t&&t.signal?"$"+t.signal:t||"")+(t&&r?"_":"")+(r&&r.signal?"$"+r.signal:r||"")}function Ma(t){return t&&t.signal}function Obr(t){return t&&t.expr}function pQ(t){if(Ma(t))return!0;if(un(t)){for(let r in t)if(pQ(t[r]))return!0}return!1}function Um(t,r){return t??r}function hA(t){return t&&t.signal||t}function c$(t,r){return(t.merge?Pbr:t.stream?Lbr:t.type?jbr:pt("Invalid stream specification: "+$r(t)))(t,r)}function Rbr(t){return t===$_e?M_e:t||M_e}function Pbr(t,r){let n=t.merge.map(i=>c$(i,r)),o=z_e({merge:n},t,r);return r.addStream(o).id}function Lbr(t,r){let n=c$(t.stream,r),o=z_e({stream:n},t,r);return r.addStream(o).id}function jbr(t,r){let n;t.type===cht?(n=r.event(cht,t.throttle),t={between:t.between,filter:t.filter}):n=r.event(Rbr(t.source),t.type);let o=z_e({stream:n},t,r);return Object.keys(o).length===1?n:r.addStream(o).id}function z_e(t,r,n){let o=r.between;return o&&(o.length!==2&&pt('Stream "between" parameter must have 2 entries: '+$r(r)),t.between=[c$(o[0],n),c$(o[1],n)]),o=r.filter?[].concat(r.filter):[],(r.marktype||r.markname||r.markrole)&&o.push(Bbr(r.marktype,r.markname,r.markrole)),r.source===$_e&&o.push("inScope(event.item)"),o.length&&(t.filter=$m("("+o.join(")&&(")+")",n).$expr),(o=r.throttle)!=null&&(t.throttle=+o),(o=r.debounce)!=null&&(t.debounce=+o),r.consume&&(t.consume=!0),t}function Bbr(t,r,n){let o="event.item";return o+(t&&t!=="*"?"&&"+o+".mark.marktype==='"+t+"'":"")+(n?"&&"+o+".mark.role==='"+n+"'":"")+(r?"&&"+o+".mark.name==='"+r+"'":"")}function zbr(t,r,n){let o=t.encode,i={target:n},s=t.events,a=t.update,l=[];s||pt("Signal update missing events specification."),Jn(s)&&(s=oht(s,r.isSubscope()?$_e:M_e)),s=Br(s).filter(u=>u.signal||u.scale?(l.push(u),0):1),l.length>1&&(l=[Vbr(l)]),s.length&&l.push(s.length>1?{merge:s}:s[0]),o!=null&&(a&&pt("Signal encode and update are mutually exclusive."),a="encode(item(),"+$r(o)+")"),i.update=Jn(a)?$m(a,r):a.expr!=null?$m(a.expr,r):a.value!=null?a.value:a.signal!=null?{$expr:$br,$params:{$value:r.signalRef(a.signal)}}:pt("Invalid signal update specification."),t.force&&(i.options={force:!0}),l.forEach(u=>r.addUpdate(an(Ubr(u,r),i)))}function Ubr(t,r){return{source:t.signal?r.signalRef(t.signal):t.scale?r.scaleRef(t.scale):c$(t,r)}}function Vbr(t){return{signal:"["+t.map(r=>r.scale?'scale("'+r.scale+'")':r.signal)+"]"}}function Gbr(t,r){let n=r.getSignal(t.name),o=t.update;t.init&&(o?pt("Signals can not include both init and update expressions."):(o=t.init,n.initonly=!0)),o&&(o=$m(o,r),n.update=o.$expr,n.params=o.$params),t.on&&t.on.forEach(i=>zbr(i,r,n.id))}function fxr(t,r){let n=t.type||"linear";E0e(n)||pt("Unrecognized scale type: "+$r(n)),r.addScale(t.name,{type:n,domain:void 0})}function dxr(t,r){let n=r.getScale(t.name).params,o;n.domain=Bht(t.domain,t,r),t.range!=null&&(n.range=zht(t,r,n)),t.interpolate!=null&&_xr(t.interpolate,n),t.nice!=null&&(n.nice=wxr(t.nice)),t.bins!=null&&(n.bins=vxr(t.bins,r));for(o in t)Pr(n,o)||o==="name"||(n[o]=Yp(t[o],r))}function Yp(t,r){return un(t)?t.signal?r.signalRef(t.signal):pt("Unsupported object: "+$r(t)):t}function hQ(t,r){return t.signal?r.signalRef(t.signal):t.map(n=>Yp(n,r))}function wQ(t){pt("Can not find data set: "+$r(t))}function Bht(t,r,n){if(!t){(r.domainMin!=null||r.domainMax!=null)&&pt("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(Hr(t)?pxr:t.fields?mxr:hxr)(t,r,n)}function pxr(t,r,n){return t.map(o=>Yp(o,n))}function hxr(t,r,n){let o=n.getData(t.data);return o||wQ(t.data),L_(r.type)?o.valuesRef(n,t.field,$ht(t.sort,!1)):k0e(r.type)?o.domainRef(n,t.field):o.extentRef(n,t.field)}function mxr(t,r,n){let o=t.data,i=t.fields.reduce((s,a)=>(a=Jn(a)?{data:o,field:a}:Hr(a)||a.signal?gxr(a,n):a,s.push(a),s),[]);return(L_(r.type)?yxr:k0e(r.type)?bxr:xxr)(t,n,i)}function gxr(t,r){let n="_:vega:_"+cxr++,o=Gm({});if(Hr(t))o.value={$ingest:t};else if(t.signal){let i="setdata("+$r(n)+","+t.signal+")";o.params.input=r.signalRef(i)}return r.addDataPipeline(n,[o,gA({})]),{data:n,field:"data"}}function yxr(t,r,n){let o=$ht(t.sort,!0),i,s,a=n.map(c=>{let f=r.getData(c.data);return f||wQ(c.data),f.countsRef(r,c.field,o)}),l={groupby:N_e,pulse:a};o&&(i=o.op||"count",s=o.field?vQ(i,o.field):"count",l.ops=[jht[i]],l.fields=[r.fieldRef(s)],l.as=[s]),i=r.add(Mht(l));let u=r.add(Gm({pulse:Nr(i)}));return s=r.add(uxr({field:N_e,sort:r.sortRef(o),pulse:Nr(u)})),Nr(s)}function $ht(t,r){return t&&(!t.field&&!t.op?un(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?pt("No field provided for sort aggregate op: "+t.op):r&&t.field&&t.op&&!jht[t.op]&&pt("Multiple domain scales can not be sorted using "+t.op)),t}function bxr(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||wQ(i.data),s.domainRef(r,i.field)});return Nr(r.add(txr({values:o})))}function xxr(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||wQ(i.data),s.extentRef(r,i.field)});return Nr(r.add(exr({extents:o})))}function vxr(t,r){return t.signal||Hr(t)?hQ(t,r):r.objectProperty(t)}function wxr(t){return un(t)?{interval:Yp(t.interval),step:Yp(t.step)}:Yp(t)}function _xr(t,r){r.interpolate=Yp(t.type||t),t.gamma!=null&&(r.interpolateGamma=Yp(t.gamma))}function zht(t,r,n){let o=r.config.range,i=t.range;if(i.signal)return r.signalRef(i.signal);if(Jn(i)){if(o&&Pr(o,i))return t=an({},t,{range:o[i]}),zht(t,r,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=L_(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:pt("Unrecognized scale range value: "+$r(i))}else if(i.scheme){n.scheme=Hr(i.scheme)?hQ(i.scheme,r):Yp(i.scheme,r),i.extent&&(n.schemeExtent=hQ(i.extent,r)),i.count&&(n.schemeCount=Yp(i.count,r));return}else if(i.step){n.rangeStep=Yp(i.step,r);return}else{if(L_(t.type)&&!Hr(i))return Bht(i,t,r);Hr(i)||pt("Unsupported range type: "+$r(i))}return i.map(s=>(Hr(s)?hQ:Yp)(s,r))}function Sxr(t,r){let n=r.config.projection||{},o={};for(let i in t)i!=="name"&&(o[i]=F_e(t[i],i,r));for(let i in n)o[i]==null&&(o[i]=F_e(n[i],i,r));r.addProjection(t.name,o)}function F_e(t,r,n){return Hr(t)?t.map(o=>F_e(o,r,n)):un(t)?t.signal?n.signalRef(t.signal):r==="fit"?t:pt("Unsupported parameter object: "+$r(t)):t}function f$(t){return t.type=_Q,t.interactive=t.interactive||!1,t}function Cf(t,r){let n=(o,i)=>Um(t[o],Um(r[o],i));return n.isVertical=o=>Cxr===Um(t.direction,r.direction||(o?r.symbolDirection:r.gradientDirection)),n.gradientLength=()=>Um(t.gradientLength,r.gradientLength||r.gradientWidth),n.gradientThickness=()=>Um(t.gradientThickness,r.gradientThickness||r.gradientHeight),n.entryColumns=()=>Um(t.columns,Um(r.columns,+n.isVertical(!0))),n}function Ght(t,r){let n=r&&(r.update&&r.update[t]||r.enter&&r.enter[t]);return n&&n.signal?n:n?n.value:null}function Bxr(t,r,n){let o=r.config.style[n];return o&&o[t]}function SQ(t,r,n){return`item.anchor === '${Exr}' ? ${t} : item.anchor === '${Axr}' ? ${r} : ${n}`}function $xr(t){let r=t("tickBand"),n=t("tickOffset"),o,i;return r?r.signal?(o={signal:`(${r.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${r.signal}) === 'extent'`},un(n)||(n={signal:`(${r.signal}) === 'extent' ? 0 : ${n}`})):r==="extent"?(o=1,i=!0,n=0):(o=.5,i=!1):(o=t("bandPosition"),i=t("tickExtra")),{extra:i,band:o,offset:n}}function Wht(t,r){return r?t?un(t)?Object.assign({},t,{offset:Wht(t.offset,r)}):{value:t,offset:r}:r:t}function Ud(t,r){return r?(t.name=r.name,t.style=r.style||t.style,t.interactive=!!r.interactive,t.encode=xF(t.encode,r,p$)):t.interactive=!1,t}function zxr(t,r,n,o){let i=Cf(t,n),s=i.isVertical(),a=i.gradientThickness(),l=i.gradientLength(),u,c,f,d,p;s?(c=[0,1],f=[0,0],d=a,p=l):(c=[0,0],f=[1,0],d=l,p=a);let h={enter:u={opacity:qn,x:qn,y:qn,width:dl(d),height:dl(p)},update:an({},u,{opacity:Kp,fill:{gradient:r,start:c,stop:f}}),exit:{opacity:qn}};return Gl(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ud({type:Vht,role:hbr,encode:h},o)}function Uxr(t,r,n,o,i){let s=Cf(t,n),a=s.isVertical(),l=s.gradientThickness(),u=s.gradientLength(),c,f,d,p,h="";a?(c="y",d="y2",f="x",p="width",h="1-"):(c="x",d="x2",f="y",p="height");let m={opacity:qn,fill:{scale:r,field:Xp}};m[c]={signal:h+"datum."+bF,mult:u},m[f]=qn,m[d]={signal:h+"datum."+Ixr,mult:u},m[p]=dl(l);let g={enter:m,update:an({},m,{opacity:Kp}),exit:{opacity:qn}};return Gl(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Ud({type:Vht,role:dbr,key:Xp,from:i,encode:g},o)}function pht(t,r,n,o){let i=Cf(t,r),s=i.isVertical(),a=dl(i.gradientThickness()),l=i.gradientLength(),u=i("labelOverlap"),c,f,d,p,h="",m={enter:c={opacity:qn},update:f={opacity:Kp,text:{field:U_e}},exit:{opacity:qn}};return Gl(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Um(t.labelLimit,r.gradientLabelLimit)}),s?(c.align={value:"left"},c.baseline=f.baseline={signal:Gxr},d="y",p="x",h="1-"):(c.align=f.align={signal:Vxr},c.baseline={value:"top"},d="x",p="y"),c[d]=f[d]={signal:h+"datum."+bF,mult:l},c[p]=f[p]=a,a.offset=Um(t.labelOffset,r.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+O_e}:void 0,Ud({type:yA,role:Tht,style:d$,key:Xp,from:o,encode:m,overlap:u},n)}function Wxr(t,r,n,o,i){let s=Cf(t,r),a=n.entries,l=!!(a&&a.interactive),u=a?a.name:void 0,c=s("clipHeight"),f=s("symbolOffset"),d={data:"value"},p=`(${i}) ? datum.${kxr} : datum.${P_e}`,h=c?dl(c):{field:P_e},m=`datum.${O_e}`,g=`max(1, ${i})`,y,b,x,v,w;h.mult=.5,y={enter:b={opacity:qn,x:{signal:p,mult:.5,offset:f},y:h},update:x={opacity:Kp,x:b.x,y:b.y},exit:{opacity:qn}};let _=null,S=null;t.fill||(_=r.symbolBaseFillColor,S=r.symbolBaseStrokeColor),Gl(y,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),G_e.forEach(I=>{t[I]&&(x[I]=b[I]={scale:t[I],field:Xp})});let C=Ud({type:jxr,role:mbr,key:Xp,from:d,clip:c?!0:void 0,encode:y},n.symbols),E=dl(f);E.offset=s("labelOffset"),y={enter:b={opacity:qn,x:{signal:p,offset:E},y:h},update:x={opacity:Kp,text:{field:U_e},x:b.x,y:b.y},exit:{opacity:qn}},Gl(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});let T=Ud({type:yA,role:Tht,style:d$,key:Xp,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!c},width:qn,height:c?dl(c):qn,opacity:qn},exit:{opacity:qn},update:x={opacity:Kp,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,x.row.signal=`${m}%${v}`,x.column.signal=`floor(${m} / ${v})`,w={field:["row",m]}):(x.row.signal=`floor(${m} / ${g})`,x.column.signal=`${m} % ${g}`,w={field:m}),x.column.signal=`(${i})?${x.column.signal}:${m}`,o={facet:{data:o,name:"value",groupby:O_e}},f$({role:B_e,from:o,encode:xF(y,a,p$),marks:[C,T],name:u,interactive:l,sort:w})}function qxr(t,r){let n=Cf(t,r);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}function evr(t,r,n,o){let i=Cf(t,r),s={enter:{opacity:qn},update:{opacity:Kp,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:qn}};return Gl(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Zxr},angle:{signal:Qxr},align:{signal:Kxr},baseline:{signal:Jxr},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ud({type:yA,role:gbr,style:V_e,from:o,encode:s},n)}function tvr(t,r){let n;return un(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+hht(t.path)+")":t.sphere&&(n="geoShape("+hht(t.sphere)+', {type: "Sphere"})')),n?r.signalRef(n):!!t}function hht(t){return un(t)&&t.signal?t.signal:$r(t)}function qht(t){let r=t.role||"";return!r.indexOf("axis")||!r.indexOf("legend")||!r.indexOf("title")?r:t.type===_Q?B_e:r||L_e}function rvr(t){return{marktype:t.type,name:t.name||void 0,role:t.role||qht(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function nvr(t,r){return t&&t.signal?r.signalRef(t.signal):t!==!1}function X_e(t,r){let n=jW(t.type);n||pt("Unrecognized transform type: "+$r(t.type));let o=xQ(n.type.toLowerCase(),null,Hht(n,t,r));return t.signal&&r.addSignal(t.signal,r.proxy(o)),o.metadata=n.metadata||{},o}function Hht(t,r,n){let o={},i=t.params.length;for(let s=0;s<i;++s){let a=t.params[s];o[a.name]=ovr(a,r,n)}return o}function ovr(t,r,n){let o=t.type,i=r[t.name];if(o==="index")return ivr(t,r,n);if(i===void 0){t.required&&pt("Missing required "+$r(r.type)+" parameter: "+$r(t.name));return}else{if(o==="param")return svr(t,r,n);if(o==="projection")return n.projectionRef(r[t.name])}return t.array&&!Ma(i)?i.map(s=>mht(t,s,n)):mht(t,i,n)}function mht(t,r,n){let o=t.type;if(Ma(r))return yht(o)?pt("Expression references can not be signals."):k_e(o)?n.fieldRef(r):bht(o)?n.compareRef(r):n.signalRef(r.signal);{let i=t.expr||k_e(o);return i&&avr(r)?n.exprRef(r.expr,r.as):i&&lvr(r)?u$(r.field,r.as):yht(o)?$m(r,n):uvr(o)?Nr(n.getData(r).values):k_e(o)?u$(r):bht(o)?n.compareRef(r):r}}function ivr(t,r,n){return Jn(r.from)||pt('Lookup "from" parameter must be a string literal.'),n.getData(r.from).lookupRef(n,r.key)}function svr(t,r,n){let o=r[t.name];return t.array?(Hr(o)||pt("Expected an array of sub-parameters. Instead: "+$r(o)),o.map(i=>ght(t,i,n))):ght(t,o,n)}function ght(t,r,n){let o=t.params.length,i;for(let a=0;a<o;++a){i=t.params[a];for(let l in i.key)if(i.key[l]!==r[l]){i=null;break}if(i)break}i||pt("Unsupported parameter: "+$r(r));let s=an(Hht(i,r,n),i.key);return Nr(n.add(nxr(s)))}function cvr(t,r,n){let o,i,s,a,l;return t?(o=t.facet)&&(r||pt("Only group marks can be faceted."),o.field!=null?a=l=gQ(o,n):(t.data?l=Nr(n.getData(t.data).aggregate):(s=X_e(an({type:"aggregate",groupby:Br(o.groupby)},o.aggregate),n),s.params.key=n.keyRef(o.groupby),s.params.pulse=gQ(o,n),a=l=Nr(n.add(s))),i=n.keyRef(o.groupby,!0))):a=Nr(n.add(Gm(null,[{}]))),a||(a=gQ(t,n)),{key:i,pulse:a,parent:l}}function gQ(t,r){return t.$ref?t:t.data&&t.data.$ref?t.data:Nr(r.getData(t.data).output)}function mA(t,r,n,o,i){this.scope=t,this.input=r,this.output=n,this.values=o,this.aggregate=i,this.index={}}function Yht(t){return Jn(t)?t:null}function xht(t,r,n){let o=vQ(n.op,n.field),i;if(r.ops){for(let s=0,a=r.as.length;s<a;++s)if(r.as[s]===o)return}else r.ops=["count"],r.fields=[null],r.as=["count"];n.op&&(r.ops.push((i=n.op.signal)?t.signalRef(i):n.op),r.fields.push(t.fieldRef(n.field)),r.as.push(o))}function a$(t,r,n,o,i,s,a){let l=r[n]||(r[n]={}),u=Fbr(s),c=Yht(i),f,d;if(c!=null&&(t=r.scope,c=c+(u?"|"+u:""),f=l[c]),!f){let p=s?{field:N_e,pulse:r.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:Nr(r.output)};u&&(p.sort=t.sortRef(s)),d=t.add(xQ(o,void 0,p)),a&&(r.index[i]=d),f=Nr(d),c!=null&&(l[c]=f)}return f}function fvr(t,r,n){let o=t.from.facet,i=o.name,s=gQ(o,r),a;o.name||pt("Facet must have a name: "+$r(o)),o.data||pt("Facet must reference a data set: "+$r(o)),o.field?a=r.add(Rht({field:r.fieldRef(o.field),pulse:s})):o.groupby?a=r.add(Ybr({key:r.keyRef(o.groupby),group:Nr(r.proxy(n.parent)),pulse:s})):pt("Facet must specify groupby or field: "+$r(o));let l=r.fork(),u=l.add(Gm()),c=l.add(gA({pulse:Nr(u)}));l.addData(i,new mA(l,u,u,c)),l.addSignal("parent",null),a.params.subflow={$subflow:l.parse(t).toRuntime()}}function dvr(t,r,n){let o=r.add(Rht({pulse:n.pulse})),i=r.fork();i.add(gA()),i.addSignal("parent",null),o.params.subflow={$subflow:i.parse(t).toRuntime()}}function Xht(t,r,n){let o=t.remove,i=t.insert,s=t.toggle,a=t.modify,l=t.values,u=r.add(yQ()),c="if("+t.trigger+',modify("'+n+'",'+[i,o,s,a,l].map(d=>d??"null").join(",")+"),0)",f=$m(c,r);u.update=f.$expr,u.params=f.$params}function EQ(t,r){let n=qht(t),o=t.type===_Q,i=t.from&&t.from.facet,s=t.overlap,a=t.layout||n===B_e||n===j_e,l,u,c,f,d,p,h,m=n===L_e||a||i,g=cvr(t.from,o,r);u=r.add(qbr({key:g.key||(t.key?u$(t.key):void 0),pulse:g.pulse,clean:!o}));let y=Nr(u);u=c=r.add(Gm({pulse:y})),u=r.add(Jbr({markdef:rvr(t),interactive:nvr(t.interactive,r),clip:tvr(t.clip,r),context:{$context:!0},groups:r.lookup(),parent:r.signals.parent?r.signalRef("parent"):null,index:r.markpath(),pulse:Nr(u)}));let b=Nr(u);u=f=r.add(Oht(Dht(t.encode,t.type,n,t.style,r,{mod:!1,pulse:b}))),u.params.parent=r.encode(),t.transform&&t.transform.forEach(S=>{let C=X_e(S,r),E=C.metadata;(E.generates||E.changes)&&pt("Mark transforms should not generate new data."),E.nomod||(f.params.mod=!0),C.params.pulse=Nr(u),r.add(u=C)}),t.sort&&(u=r.add(lxr({sort:r.compareRef(t.sort),pulse:Nr(u)})));let x=Nr(u);(i||a)&&(a=r.add(Lht({layout:r.objectProperty(t.layout),legends:r.legends,mark:b,pulse:x})),p=Nr(a));let v=r.add(Fht({mark:b,pulse:p||x}));h=Nr(v),o&&(m&&(l=r.operators,l.pop(),a&&l.pop()),r.pushState(x,p||h,y),i?fvr(t,r,g):m?dvr(t,r,g):r.parse(t),r.popState(),m&&(a&&l.push(a),l.push(v))),s&&(h=pvr(s,h,r));let w=r.add(Pht({pulse:h})),_=r.add(gA({pulse:Nr(w)},void 0,r.parent()));t.name!=null&&(d=t.name,r.addData(d,new mA(r,c,w,_)),t.on&&t.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&pt("Marks only support modify triggers."),Xht(S,r,d)}))}function pvr(t,r,n){let o=t.method,i=t.bound,s=t.separation,a={separation:Ma(s)?n.signalRef(s.signal):s,method:Ma(o)?n.signalRef(o.signal):o,pulse:r};if(t.order&&(a.sort=n.compareRef({field:t.order})),i){let l=i.tolerance;a.boundTolerance=Ma(l)?n.signalRef(l.signal):+l,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Nr(n.add(rxr(a)))}function hvr(t,r){let n=r.config.legend,o=t.encode||{},i=Cf(t,n),s=o.legend||{},a=s.name||void 0,l=s.interactive,u=s.style,c={},f=0,d,p,h;G_e.forEach(v=>t[v]?(c[v]=t[v],f=f||t[v]):0),f||pt("Missing valid scale for legend.");let m=mvr(t,r.scaleType(f)),g={title:t.title!=null,scales:c,type:m,vgrad:m!=="symbol"&&i.isVertical()},y=Nr(r.add(Gm(null,[g]))),b={enter:{x:{value:0},y:{value:0}}},x=Nr(r.add(Zbr(p={type:m,scale:r.scaleRef(f),count:r.objectProperty(i("tickCount")),limit:r.property(i("symbolLimit")),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)})));return m===mQ?(h=[zxr(t,f,n,o.gradient),pht(t,n,o.labels,x)],p.count=p.count||r.signalRef(`max(2,2*floor((${hA(i.gradientLength())})/100))`)):m===R_e?h=[Uxr(t,f,n,o.gradient,x),pht(t,n,o.labels,x)]:(d=qxr(t,n),h=[Wxr(t,n,o,x,hA(d.columns))],p.size=bvr(t,r,h[0].marks)),h=[f$({role:pbr,from:y,encode:b,marks:h,layout:d,interactive:l})],g.title&&h.push(evr(t,n,o.title,y)),EQ(f$({role:fbr,from:y,encode:xF(yvr(i,t,n),s,p$),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:l,style:u}),r)}function mvr(t,r){let n=t.type||dht;return!t.type&&gvr(t)===1&&(t.fill||t.stroke)&&(n=H4(r)?mQ:LY(r)?R_e:dht),n!==mQ?n:LY(r)?R_e:mQ}function gvr(t){return G_e.reduce((r,n)=>r+(t[n]?1:0),0)}function yvr(t,r,n){let o={enter:{},update:{}};return Gl(o,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:r.format,formatType:r.formatType}),o}function bvr(t,r,n){let o=hA(vht("size",t,n)),i=hA(vht("strokeWidth",t,n)),s=hA(xvr(n[1].encode,r,d$));return $m(`max(ceil(sqrt(${o})+${i}),${s})`,r)}function vht(t,r,n){return r[t]?`scale("${r[t]}",datum)`:Ght(t,n[0].encode)}function xvr(t,r,n){return Ght("fontSize",t)||Bxr("fontSize",r,n)}function wvr(t,r){t=Jn(t)?{text:t}:t;let n=Cf(t,r.config.title),o=t.encode||{},i=o.group||{},s=i.name||void 0,a=i.interactive,l=i.style,u=[],c={},f=Nr(r.add(Gm(null,[c])));return u.push(Cvr(t,n,_vr(t),f)),t.subtitle&&u.push(Evr(t,n,o.subtitle,f)),EQ(f$({role:ybr,from:f,encode:Svr(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:l}),r)}function _vr(t){let r=t.encode;return r&&r.title||an({name:t.name,interactive:t.interactive,style:t.style},r)}function Svr(t,r){let n={enter:{},update:{}};return Gl(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:q_e},angle:{signal:vvr},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),xF(n,r,p$)}function Cvr(t,r,n,o){let i={value:0},s=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Gl(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("color"),font:r("font"),fontSize:r("fontSize"),fontStyle:r("fontStyle"),fontWeight:r("fontWeight"),lineHeight:r("lineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),Ud({type:yA,role:bbr,style:Dxr,from:o,encode:a},n)}function Evr(t,r,n,o){let i={value:0},s=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Gl(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("subtitleColor"),font:r("subtitleFont"),fontSize:r("subtitleFontSize"),fontStyle:r("subtitleFontStyle"),fontWeight:r("subtitleFontWeight"),lineHeight:r("subtitleLineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),Ud({type:yA,role:xbr,style:Nxr,from:o,encode:a},n)}function Tvr(t,r){let n=[];t.transform&&t.transform.forEach(o=>{n.push(X_e(o,r))}),t.on&&t.on.forEach(o=>{Xht(o,r,t.name)}),r.addDataPipeline(t.name,Avr(t,r,n))}function Avr(t,r,n){let o=[],i=null,s=!1,a=!1,l,u,c,f,d;for(t.values?Ma(t.values)||pQ(t.format)?(o.push(wht(r,t)),o.push(i=pA())):o.push(i=pA({$ingest:t.values,$format:t.format})):t.url?pQ(t.url)||pQ(t.format)?(o.push(wht(r,t)),o.push(i=pA())):o.push(i=pA({$request:t.url,$format:t.format})):t.source&&(i=l=Br(t.source).map(p=>Nr(r.getData(p).output)),o.push(null)),u=0,c=n.length;u<c;++u)f=n[u],d=f.metadata,!i&&!d.source&&o.push(i=pA()),o.push(f),d.generates&&(a=!0),d.modifies&&!a&&(s=!0),d.source?i=f:d.changes&&(i=null);return l&&(c=l.length-1,o[0]=sxr({derive:s,pulse:c?l:l[0]}),(s||c)&&o.splice(1,0,pA())),i||o.push(pA()),o.push(gA({})),o}function pA(t){let r=Gm({},t);return r.metadata={source:!0},r}function wht(t,r){return Qbr({url:r.url?t.property(r.url):void 0,async:r.async?t.property(r.async):void 0,values:r.values?t.property(r.values):void 0,format:t.objectProperty(r.format)})}function hF(t,r,n,o){let i;if(r&&Pr(r,t))return r[t];if(Pr(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return o[V_e][i]}else if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return o[d$][i]}return null}function Sht(t){let r={};for(let n of t)if(n)for(let o in n)r[o]=1;return Object.keys(r)}function Pvr(t,r){var n=r.config,o=n.style,i=n.axis,s=r.scaleType(t.scale)==="band"&&n.axisBand,a=t.orient,l,u,c;if(Ma(a)){let d=Sht([n.axisX,n.axisY]),p=Sht([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(c of d)l[c]=pl(a,hF(c,n.axisX,i,o),hF(c,n.axisY,i,o));u={};for(c of p)u[c]=Ovr(a.signal,hF(c,n.axisTop,i,o),hF(c,n.axisBottom,i,o),hF(c,n.axisLeft,i,o),hF(c,n.axisRight,i,o))}else l=a===Wm||a===_2?n.axisX:n.axisY,u=n["axis"+a[0].toUpperCase()+a.slice(1)];return l||u||s?an({},i,l,u,s):i}function Lvr(t,r,n,o){let i=Cf(t,r),s=t.orient,a,l,u={enter:a={opacity:qn},update:l={opacity:Kp},exit:{opacity:qn}};Gl(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let c=Cht(t,0),f=Cht(t,1);return a.x=l.x=pl(s,c,qn),a.x2=l.x2=pl(s,f),a.y=l.y=Vm(s,c,qn),a.y2=l.y2=Vm(s,f),Ud({type:W_e,role:sbr,from:o,encode:u},n)}function Cht(t,r){return{scale:t.scale,range:r}}function jvr(t,r,n,o,i){let s=Cf(t,r),a=t.orient,l=t.gridScale,u=TQ(a,1,-1),c=Bvr(t.offset,u),f,d,p,h={enter:f={opacity:qn},update:p={opacity:Kp},exit:d={opacity:qn}};Gl(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});let m={scale:t.scale,field:Xp,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=pl(a,{signal:"height"},{signal:"width"}),y=l?{scale:l,range:0,mult:u,offset:c}:{value:0,offset:c},b=l?{scale:l,range:1,mult:u,offset:c}:an(g,{mult:u,offset:c});return f.x=p.x=pl(a,m,y),f.y=p.y=Vm(a,m,y),f.x2=p.x2=Vm(a,b),f.y2=p.y2=pl(a,b),d.x=pl(a,m),d.y=Vm(a,m),Ud({type:W_e,role:abr,key:Xp,from:o,encode:h},n)}function Bvr(t,r){if(r!==1)if(!un(t))t=Ma(r)?{signal:`(${r.signal}) * (${t||0})`}:r*(t||0);else{let n=t=an({},t);for(;n.mult!=null;)if(un(n.mult))n=n.mult=an({},n.mult);else return n.mult=Ma(r)?{signal:`(${n.mult}) * (${r.signal})`}:n.mult*r,t;n.mult=r}return t}function $vr(t,r,n,o,i,s){let a=Cf(t,r),l=t.orient,u=TQ(l,-1,1),c,f,d,p={enter:c={opacity:qn},update:d={opacity:Kp},exit:f={opacity:qn}};Gl(p,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let h=dl(i);h.mult=u;let m={scale:t.scale,field:Xp,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return d.y=c.y=pl(l,qn,m),d.y2=c.y2=pl(l,h),f.x=pl(l,m),d.x=c.x=Vm(l,qn,m),d.x2=c.x2=Vm(l,h),f.y=Vm(l,m),Ud({type:W_e,role:ubr,key:Xp,from:o,encode:p},n)}function I_e(t,r,n,o,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+r+","+n+","+o+","+i+")"}}function zvr(t,r,n,o,i,s){let a=Cf(t,r),l=t.orient,u=t.scale,c=TQ(l,-1,1),f=hA(a("labelFlush")),d=hA(a("labelFlushOffset")),p=a("labelAlign"),h=a("labelBaseline"),m=f===0||!!f,g,y=dl(i);y.mult=c,y.offset=dl(a("labelPadding")||0),y.offset.mult=c;let b={scale:u,field:Xp,band:.5,offset:Wht(s.offset,a("labelOffset"))},x=pl(l,m?I_e(u,f,'"left"','"right"','"center"'):{value:"center"},kvr(l,"left","right")),v=pl(l,Zht(l,"bottom","top"),m?I_e(u,f,'"top"','"bottom"','"middle"'):{value:"middle"}),w=I_e(u,f,`-(${d})`,d,0);m=m&&d;let _={opacity:qn,x:pl(l,b,y),y:Vm(l,b,y)},S={enter:_,update:g={opacity:Kp,text:{field:U_e},x:_.x,y:_.y,align:x,baseline:v},exit:{opacity:qn,x:_.x,y:_.y}};Gl(S,{dx:!p&&m?pl(l,w):null,dy:!h&&m?Vm(l,w):null}),Gl(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:p,baseline:h});let C=a("labelBound"),E=a("labelOverlap");return E=E||C?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:C?{scale:u,orient:l,tolerance:C}:null}:void 0,g.align!==x&&(g.align=yF(g.align,x)),g.baseline!==v&&(g.baseline=yF(g.baseline,v)),Ud({type:yA,role:lbr,style:d$,key:Xp,from:o,encode:S,overlap:E},n)}function Uvr(t,r,n,o){let i=Cf(t,r),s=t.orient,a=TQ(s,-1,1),l,u,c={enter:l={opacity:qn,anchor:dl(i("titleAnchor",null)),align:{signal:q_e}},update:u=an({},l,{opacity:Kp,text:dl(t.title)}),exit:{opacity:qn}},f={signal:`lerp(range("${t.scale}"), ${SQ(0,1,.5)})`};return u.x=pl(s,f),u.y=Vm(s,f),l.angle=pl(s,qn,Rvr(a,90)),l.baseline=pl(s,Zht(s,_2,Wm),{value:_2}),u.angle=l.angle,u.baseline=l.baseline,Gl(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Vvr(i,s,c,n),c.update.align=yF(c.update.align,l.align),c.update.angle=yF(c.update.angle,l.angle),c.update.baseline=yF(c.update.baseline,l.baseline),Ud({type:yA,role:cbr,style:V_e,from:o,encode:c},n)}function Vvr(t,r,n,o){let i=(l,u)=>l!=null?(n.update[u]=yF(dl(l),n.update[u]),!1):!mF(u,o),s=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===s?dl(a):pl(r,dl(a),dl(s))}function Gvr(t,r){let n=Pvr(t,r),o=t.encode||{},i=o.axis||{},s=i.name||void 0,a=i.interactive,l=i.style,u=Cf(t,n),c=$xr(u),f={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:t.title!=null},d=Nr(r.add(Gm({},[f]))),p=Nr(r.add(Wbr({scale:r.scaleRef(t.scale),extra:r.property(c.extra),count:r.objectProperty(t.tickCount),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)}))),h=[],m;return f.grid&&h.push(jvr(t,n,o.grid,p,c)),f.ticks&&(m=u("tickSize"),h.push($vr(t,n,o.ticks,p,m,c))),f.labels&&(m=f.ticks?m:0,h.push(zvr(t,n,o.labels,p,m,c))),f.domain&&h.push(Lvr(t,n,o.domain,d)),f.title&&h.push(Uvr(t,n,o.title,d)),EQ(f$({role:ibr,from:d,encode:xF(Wvr(u,t),i,p$),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:a,style:l}),r)}function Wvr(t,r){let n={enter:{},update:{}};return Gl(n,{orient:t("orient"),offset:t("offset")||0,position:Um(r.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${r.scale}")))`},translate:t("translate"),format:r.format,formatType:r.formatType}),n}function Jht(t,r,n){let o=Br(t.signals),i=Br(t.scales);return n||o.forEach(s=>Nht(s,r)),Br(t.projections).forEach(s=>Sxr(s,r)),i.forEach(s=>fxr(s,r)),Br(t.data).forEach(s=>Tvr(s,r)),i.forEach(s=>dxr(s,r)),(n||o).forEach(s=>Gbr(s,r)),Br(t.axes).forEach(s=>Gvr(s,r)),Br(t.marks).forEach(s=>EQ(s,r)),Br(t.legends).forEach(s=>hvr(s,r)),t.title&&wvr(t.title,r),r.parseLambdas(),r}function Hvr(t,r){let n=r.config,o=Nr(r.root=r.add(yQ())),i=Yvr(t,n);i.forEach(c=>Nht(c,r)),r.description=t.description||n.description,r.eventConfig=n.events,r.legends=r.objectProperty(n.legend&&n.legend.layout),r.locale=n.locale;let s=r.add(Gm()),a=r.add(Oht(Dht(qvr(t.encode),_Q,j_e,t.style,r,{pulse:Nr(s)}))),l=r.add(Lht({layout:r.objectProperty(t.layout),legends:r.legends,autosize:r.signalRef("autosize"),mark:o,pulse:Nr(a)}));r.operators.pop(),r.pushState(Nr(a),Nr(l),null),Jht(t,r,i),r.operators.push(l);let u=r.add(Fht({mark:o,pulse:Nr(l)}));return u=r.add(Pht({pulse:Nr(u)})),u=r.add(gA({pulse:Nr(u)})),r.addData("root",new mA(r,s,s,u)),r}function l$(t,r){return r&&r.signal?{name:t,update:r.signal}:{name:t,value:r}}function Yvr(t,r){let n=a=>Um(t[a],r[a]),o=[l$("background",n("background")),l$("autosize",rbr(n("autosize"))),l$("padding",obr(n("padding"))),l$("width",n("width")||0),l$("height",n("height")||0)],i=o.reduce((a,l)=>(a[l.name]=l,a),{}),s={};return Br(t.signals).forEach(a=>{Pr(i,a.name)?a=an(i[a.name],a):o.push(a),s[a.name]=a}),Br(r.signals).forEach(a=>{!Pr(s,a.name)&&!Pr(i,a.name)&&o.push(a)}),o}function emt(t,r){this.config=t||{},this.options=r||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Eht(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function Z_e(t){return(Hr(t)?Xvr:Kvr)(t)}function Xvr(t){let r=t.length,n="[";for(let o=0;o<r;++o){let i=t[o];n+=(o>0?",":"")+(un(i)?i.signal||Z_e(i):$r(i))}return n+"]"}function Kvr(t){let r="{",n=0,o,i;for(o in t)i=t[o],r+=(++n>1?",":"")+$r(o)+":"+(un(i)?i.signal||Z_e(i):$r(i));return r+"}"}function Zvr(){let t="sans-serif",o="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:o},area:{fill:o},image:null,line:{stroke:o,strokeWidth:2},path:{stroke:o},rect:{fill:o},rule:{stroke:i},shape:{stroke:o},symbol:{fill:o,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:o,size:2},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function tmt(t,r,n){return un(t)||pt("Input Vega specification must be an object."),r=YD(Zvr(),r,t.config),Hvr(t,new emt(r,n)).toRuntime()}var s$,nbr,dl,L_e,j_e,B_e,ibr,sbr,abr,lbr,ubr,cbr,fbr,dbr,pbr,hbr,Tht,mbr,gbr,ybr,bbr,xbr,Aht,fQ,kbr,Ibr,N_e,Nbr,Mbr,$_e,M_e,cht,$br,Ko,Mht,Wbr,Fht,Gm,fht,qbr,Oht,Hbr,Ybr,Xbr,Kbr,Zbr,Qbr,Jbr,exr,txr,rxr,nxr,Rht,oxr,ixr,sxr,Pht,axr,gA,lxr,Lht,uxr,cxr,jht,Wm,vF,wF,_2,Uht,Cxr,Exr,Txr,Axr,O_e,U_e,kxr,bF,Ixr,Xp,d$,V_e,Dxr,Nxr,dht,mQ,R_e,P_e,Mxr,Fxr,Oxr,Rxr,Pxr,Lxr,G_e,p$,qn,Kp,_Q,Vht,W_e,jxr,yA,q_e,Vxr,Gxr,H_e,Y_e,CQ,Hxr,Yxr,Xxr,Kxr,Zxr,Qxr,Jxr,avr,lvr,uvr,yht,k_e,bht,vvr,Kht,TQ,pl,Vm,Zht,kvr,Ivr,Dvr,Nvr,Mvr,Fvr,Qht,_ht,K_e,Ovr,gF,Rvr,yF,qvr,rmt=N(()=>{"use strict";Ls();ZZ();sht();dM();el();s$=t=>+t||0,nbr=t=>({top:t,bottom:t,left:t,right:t});dl=t=>un(t)&&!Hr(t)?an({},t):{value:t};L_e="mark",j_e="frame",B_e="scope",ibr="axis",sbr="axis-domain",abr="axis-grid",lbr="axis-label",ubr="axis-tick",cbr="axis-title",fbr="legend",dbr="legend-band",pbr="legend-entry",hbr="legend-gradient",Tht="legend-label",mbr="legend-symbol",gbr="legend-title",ybr="title",bbr="title-text",xbr="title-subtitle";Aht=t=>Jn(t)?$r(t):t.signal?`(${t.signal})`:kht(t);fQ=(t,r,n,o)=>`(${t}(${[r,n,o].map(bQ).join(",")})+'')`;kbr="outer",Ibr=["value","update","init","react","bind"];N_e=u$("key");Nbr="ascending",Mbr="descending";$_e="scope",M_e="view";cht="timer";$br={code:"_.$value",ast:{type:"Identifier",value:"value"}};Ko=t=>(r,n,o)=>xQ(t,n,r||void 0,o),Mht=Ko("aggregate"),Wbr=Ko("axisticks"),Fht=Ko("bound"),Gm=Ko("collect"),fht=Ko("compare"),qbr=Ko("datajoin"),Oht=Ko("encode"),Hbr=Ko("expression"),Ybr=Ko("facet"),Xbr=Ko("field"),Kbr=Ko("key"),Zbr=Ko("legendentries"),Qbr=Ko("load"),Jbr=Ko("mark"),exr=Ko("multiextent"),txr=Ko("multivalues"),rxr=Ko("overlap"),nxr=Ko("params"),Rht=Ko("prefacet"),oxr=Ko("projection"),ixr=Ko("proxy"),sxr=Ko("relay"),Pht=Ko("render"),axr=Ko("scale"),gA=Ko("sieve"),lxr=Ko("sortitems"),Lht=Ko("viewlayout"),uxr=Ko("values"),cxr=0,jht={min:"min",max:"max",count:"sum"};Wm="top",vF="left",wF="right",_2="bottom",Uht="center",Cxr="vertical",Exr="start",Txr="middle",Axr="end",O_e="index",U_e="label",kxr="offset",bF="perc",Ixr="perc2",Xp="value",d$="guide-label",V_e="guide-title",Dxr="group-title",Nxr="group-subtitle",dht="symbol",mQ="gradient",R_e="discrete",P_e="size",Mxr="shape",Fxr="fill",Oxr="stroke",Rxr="strokeWidth",Pxr="strokeDash",Lxr="opacity",G_e=[P_e,Mxr,Fxr,Oxr,Rxr,Pxr,Lxr],p$={name:1,style:1,interactive:1},qn={value:0},Kp={value:1},_Q="group",Vht="rect",W_e="rule",jxr="symbol",yA="text";q_e=SQ($r(vF),$r(wF),$r(Uht));Vxr=`datum.${bF}<=0?"${vF}":datum.${bF}>=1?"${wF}":"${Uht}"`,Gxr=`datum.${bF}<=0?"${_2}":datum.${bF}>=1?"${Wm}":"${Txr}"`;H_e='item.orient === "left"',Y_e='item.orient === "right"',CQ=`(${H_e} || ${Y_e})`,Hxr=`datum.vgrad && ${CQ}`,Yxr=SQ('"top"','"bottom"','"middle"'),Xxr=SQ('"right"','"left"','"center"'),Kxr=`datum.vgrad && ${Y_e} ? (${Xxr}) : (${CQ} && !(datum.vgrad && ${H_e})) ? "left" : ${q_e}`,Zxr=`item._anchor || (${CQ} ? "middle" : "start")`,Qxr=`${Hxr} ? (${H_e} ? -90 : 90) : 0`,Jxr=`${CQ} ? (datum.vgrad ? (${Y_e} ? "bottom" : "top") : ${Yxr}) : "top"`;avr=t=>t&&t.expr,lvr=t=>t&&t.field,uvr=t=>t==="data",yht=t=>t==="expr",k_e=t=>t==="field",bht=t=>t==="compare";mA.fromEntries=function(t,r){let n=r.length,o=r[n-1],i=r[n-2],s=r[0],a=null,l=1;for(s&&s.type==="load"&&(s=r[1]),t.add(r[0]);l<n;++l)r[l].params.pulse=Nr(r[l-1]),t.add(r[l]),r[l].type==="aggregate"&&(a=r[l]);return new mA(t,s,i,o,a)};mA.prototype={countsRef(t,r,n){let o=this,i=o.counts||(o.counts={}),s=Yht(r),a,l,u;return s!=null&&(t=o.scope,a=i[s]),a?n&&n.field&&xht(t,a.agg.params,n):(u={groupby:t.fieldRef(r,"key"),pulse:Nr(o.output)},n&&n.field&&xht(t,u,n),l=t.add(Mht(u)),a=t.add(Gm({pulse:Nr(l)})),a={agg:l,ref:Nr(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Nr(this.values)},extentRef(t,r){return a$(t,this,"extent","extent",r,!1)},domainRef(t,r){return a$(t,this,"domain","values",r,!1)},valuesRef(t,r,n){return a$(t,this,"vals","values",r,n||!0)},lookupRef(t,r){return a$(t,this,"lookup","tupleindex",r,!1)},indataRef(t,r){return a$(t,this,"indata","tupleindex",r,!0,!0)}};vvr=`item.orient==="${vF}"?-90:item.orient==="${wF}"?90:0`;Kht=t=>t===_2||t===Wm,TQ=(t,r,n)=>Ma(t)?Nvr(t.signal,r,n):t===vF||t===Wm?r:n,pl=(t,r,n)=>Ma(t)?Ivr(t.signal,r,n):Kht(t)?r:n,Vm=(t,r,n)=>Ma(t)?Dvr(t.signal,r,n):Kht(t)?n:r,Zht=(t,r,n)=>Ma(t)?Mvr(t.signal,r,n):t===Wm?{value:r}:{value:n},kvr=(t,r,n)=>Ma(t)?Fvr(t.signal,r,n):t===wF?{value:r}:{value:n},Ivr=(t,r,n)=>Qht(`${t} === '${Wm}' || ${t} === '${_2}'`,r,n),Dvr=(t,r,n)=>Qht(`${t} !== '${Wm}' && ${t} !== '${_2}'`,r,n),Nvr=(t,r,n)=>K_e(`${t} === '${vF}' || ${t} === '${Wm}'`,r,n),Mvr=(t,r,n)=>K_e(`${t} === '${Wm}'`,r,n),Fvr=(t,r,n)=>K_e(`${t} === '${wF}'`,r,n),Qht=(t,r,n)=>(r=r!=null?dl(r):r,n=n!=null?dl(n):n,_ht(r)&&_ht(n)?(r=r?r.signal||$r(r.value):null,n=n?n.signal||$r(n.value):null,{signal:`${t} ? (${r}) : (${n})`}):[an({test:t},r)].concat(n||[])),_ht=t=>t==null||Object.keys(t).length===1,K_e=(t,r,n)=>({signal:`${t} ? (${gF(r)}) : (${gF(n)})`}),Ovr=(t,r,n,o,i)=>({signal:(o!=null?`${t} === '${vF}' ? (${gF(o)}) : `:"")+(n!=null?`${t} === '${_2}' ? (${gF(n)}) : `:"")+(i!=null?`${t} === '${wF}' ? (${gF(i)}) : `:"")+(r!=null?`${t} === '${Wm}' ? (${gF(r)}) : `:"")+"(null)"}),gF=t=>Ma(t)?t.signal:t==null?null:$r(t),Rvr=(t,r)=>r===0?0:Ma(t)?{signal:`(${t.signal}) * ${r}`}:{value:t*r},yF=(t,r)=>{let n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+r.signal}:t};qvr=t=>xF({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);emt.prototype=Eht.prototype={parse(t){return Jht(t,this)},fork(){return new Eht(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(r=>{r.$ref=t.id}),t.refs=null),t},proxy(t){let r=t instanceof D_e?Nr(t):t;return this.add(ixr({value:r}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,r;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(o,i,s){let a,l;o&&(a=o.data||(o.data={}),l=a[i]||(a[i]=[]),l.push(s))}for(t in this.data){r=this.data[t],n(r.input,t,"input"),n(r.output,t,"output"),n(r.values,t,"values");for(let o in r.index)n(r.index[o],t,"index:"+o)}return this},pushState(t,r,n){this._encode.push(Nr(this.add(gA({pulse:t})))),this._parent.push(r),this._lookup.push(n?Nr(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,r){if(Jn(t))return u$(t,r);t.signal||pt("Unsupported field reference: "+$r(t));let n=t.signal,o=this.field[n];if(!o){let i={name:this.signalRef(n)};r&&(i.as=r),this.field[n]=o=Nr(this.add(Xbr(i)))}return o},compareRef(t){let r=!1,n=s=>Ma(s)?(r=!0,this.signalRef(s.signal)):Obr(s)?(r=!0,this.exprRef(s.expr)):s,o=Br(t.field).map(n),i=Br(t.order).map(n);return r?Nr(this.add(fht({fields:o,orders:i}))):uht(o,i)},keyRef(t,r){let n=!1,o=s=>Ma(s)?(n=!0,Nr(i[s.signal])):s,i=this.signals;return t=Br(t).map(o),n?Nr(this.add(Kbr({fields:t,flat:r}))):Dbr(t,r)},sortRef(t){if(!t)return t;let r=vQ(t.op,t.field),n=t.order||Nbr;return n.signal?Nr(this.add(fht({fields:r,orders:this.signalRef(n.signal)}))):uht(r,n)},event(t,r){let n=t+":"+r;if(!this.events[n]){let o=this.id();this.streams.push({id:o,source:t,type:r}),this.events[n]=o}return this.events[n]},hasOwnSignal(t){return Pr(this.signals,t)},addSignal(t,r){this.hasOwnSignal(t)&&pt("Duplicate signal name: "+$r(t));let n=r instanceof D_e?r:this.add(yQ(r));return this.signals[t]=n},getSignal(t){return this.signals[t]||pt("Unrecognized signal name: "+$r(t)),this.signals[t]},signalRef(t){return this.signals[t]?Nr(this.signals[t]):(Pr(this.lambdas,t)||(this.lambdas[t]=this.add(yQ(null))),Nr(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let r=0,n=t.length;r<n;++r){let o=t[r],i=$m(o,this),s=this.lambdas[o];s.params=i.$params,s.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!un(t)?t:this.signalRef(t.signal||Z_e(t))},exprRef(t,r){let n={expr:$m(t,this)};return r&&(n.expr.$name=r),Nr(this.add(Hbr(n)))},addBinding(t,r){this.bindings||pt("Nested signals do not support binding: "+$r(t)),this.bindings.push(an({signal:t},r))},addScaleProj(t,r){Pr(this.scales,t)&&pt("Duplicate scale or projection name: "+$r(t)),this.scales[t]=this.add(r)},addScale(t,r){this.addScaleProj(t,axr(r))},addProjection(t,r){this.addScaleProj(t,oxr(r))},getScale(t){return this.scales[t]||pt("Unrecognized scale name: "+$r(t)),this.scales[t]},scaleRef(t){return Nr(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,r){return Pr(this.data,t)&&pt("Duplicate data set name: "+$r(t)),this.data[t]=r},getData(t){return this.data[t]||pt("Undefined data set name: "+$r(t)),this.data[t]},addDataPipeline(t,r){return Pr(this.data,t)&&pt("Duplicate data set name: "+$r(t)),this.addData(t,mA.fromEntries(this,r))}}});function qm(t){this.type=t}function c1r(t){switch(t.type){case r1r:return t.elements;case n1r:case s1r:return[t.left,t.right];case o1r:return[t.callee].concat(t.arguments);case i1r:return[t.test,t.consequent,t.alternate];case a1r:return[t.object,t.property];case l1r:return t.properties;case e1r:return[t.key,t.value];case u1r:return[t.argument];case t1r:case Jvr:case Qvr:default:return[]}}function NQ(t,r){if(!t)throw new Error("ASSERT: "+r)}function Vv(t){return t>=48&&t<=57}function n2e(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function m$(t){return"01234567".indexOf(t)>=0}function D1r(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function y$(t){return t===10||t===13||t===8232||t===8233}function v$(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&k1r.test(String.fromCharCode(t))}function kQ(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&I1r.test(String.fromCharCode(t))}function dmt(){for(;ft<Nu;){let t=gr.charCodeAt(ft);if(D1r(t)||y$(t))++ft;else break}}function r2e(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ft<Nu&&n2e(gr[ft])?(o=gr[ft++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):po({},hl,Wl);return String.fromCharCode(i)}function M1r(){var t,r,n,o;for(t=gr[ft],r=0,t==="}"&&po({},hl,Wl);ft<Nu&&(t=gr[ft++],!!n2e(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&po({},hl,Wl),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function pmt(){var t,r;for(t=gr.charCodeAt(ft++),r=String.fromCharCode(t),t===92&&(gr.charCodeAt(ft)!==117&&po({},hl,Wl),++ft,t=r2e("u"),(!t||t==="\\"||!v$(t.charCodeAt(0)))&&po({},hl,Wl),r=t);ft<Nu&&(t=gr.charCodeAt(ft),!!kQ(t));)++ft,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),gr.charCodeAt(ft)!==117&&po({},hl,Wl),++ft,t=r2e("u"),(!t||t==="\\"||!kQ(t.charCodeAt(0)))&&po({},hl,Wl),r+=t);return r}function F1r(){var t,r;for(t=ft++;ft<Nu;){if(r=gr.charCodeAt(ft),r===92)return ft=t,pmt();if(kQ(r))++ft;else break}return gr.slice(t,ft)}function O1r(){var t,r,n;return t=ft,r=gr.charCodeAt(ft)===92?pmt():F1r(),r.length===1?n=bA:N1r.hasOwnProperty(r)?n=S2:r==="null"?n=DQ:r==="true"||r==="false"?n=IQ:n=bA,{type:n,value:r,start:t,end:ft}}function J_e(){var t=ft,r=gr.charCodeAt(ft),n,o=gr[ft],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ft,{type:Ef,value:String.fromCharCode(r),start:t,end:ft};default:if(n=gr.charCodeAt(ft+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ft+=2,{type:Ef,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ft};case 33:case 61:return ft+=2,gr.charCodeAt(ft)===61&&++ft,{type:Ef,value:gr.slice(t,ft),start:t,end:ft}}}if(a=gr.substr(ft,4),a===">>>=")return ft+=4,{type:Ef,value:a,start:t,end:ft};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ft+=3,{type:Ef,value:s,start:t,end:ft};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ft+=2,{type:Ef,value:i,start:t,end:ft};if(i==="//"&&po({},hl,Wl),"<>=!+-*%&|^/".indexOf(o)>=0)return++ft,{type:Ef,value:o,start:t,end:ft};po({},hl,Wl)}function R1r(t){let r="";for(;ft<Nu&&n2e(gr[ft]);)r+=gr[ft++];return r.length===0&&po({},hl,Wl),v$(gr.charCodeAt(ft))&&po({},hl,Wl),{type:vA,value:parseInt("0x"+r,16),start:t,end:ft}}function P1r(t){let r="0"+gr[ft++];for(;ft<Nu&&m$(gr[ft]);)r+=gr[ft++];return(v$(gr.charCodeAt(ft))||Vv(gr.charCodeAt(ft)))&&po({},hl,Wl),{type:vA,value:parseInt(r,8),octal:!0,start:t,end:ft}}function nmt(){var t,r,n;if(n=gr[ft],NQ(Vv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ft,t="",n!=="."){if(t=gr[ft++],n=gr[ft],t==="0"){if(n==="x"||n==="X")return++ft,R1r(r);if(m$(n))return P1r(r);n&&Vv(n.charCodeAt(0))&&po({},hl,Wl)}for(;Vv(gr.charCodeAt(ft));)t+=gr[ft++];n=gr[ft]}if(n==="."){for(t+=gr[ft++];Vv(gr.charCodeAt(ft));)t+=gr[ft++];n=gr[ft]}if(n==="e"||n==="E")if(t+=gr[ft++],n=gr[ft],(n==="+"||n==="-")&&(t+=gr[ft++]),Vv(gr.charCodeAt(ft)))for(;Vv(gr.charCodeAt(ft));)t+=gr[ft++];else po({},hl,Wl);return v$(gr.charCodeAt(ft))&&po({},hl,Wl),{type:vA,value:parseFloat(t),start:r,end:ft}}function L1r(){var t="",r,n,o,i,s=!1;for(r=gr[ft],NQ(r==="'"||r==='"',"String literal must starts with a quote"),n=ft,++ft;ft<Nu;)if(o=gr[ft++],o===r){r="";break}else if(o==="\\")if(o=gr[ft++],!o||!y$(o.charCodeAt(0)))switch(o){case"u":case"x":gr[ft]==="{"?(++ft,t+=M1r()):t+=r2e(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:m$(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ft<Nu&&m$(gr[ft])&&(s=!0,i=i*8+"01234567".indexOf(gr[ft++]),"0123".indexOf(o)>=0&&ft<Nu&&m$(gr[ft])&&(i=i*8+"01234567".indexOf(gr[ft++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&gr[ft]===`
`&&++ft;else{if(y$(o.charCodeAt(0)))break;t+=o}return r!==""&&po({},hl,Wl),{type:x$,value:t,octal:s,start:n,end:ft}}function j1r(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";po({},t2e)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{po({},t2e)}try{return new RegExp(t,r)}catch{return null}}function B1r(){var t,r,n,o,i;for(t=gr[ft],NQ(t==="/","Regular expression literal must start with a slash"),r=gr[ft++],n=!1,o=!1;ft<Nu;)if(t=gr[ft++],r+=t,t==="\\")t=gr[ft++],y$(t.charCodeAt(0))&&po({},Q_e),r+=t;else if(y$(t.charCodeAt(0)))po({},Q_e);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||po({},Q_e),i=r.substr(1,r.length-2),{value:i,literal:r}}function $1r(){var t,r,n;for(r="",n="";ft<Nu&&(t=gr[ft],!!kQ(t.charCodeAt(0)));)++ft,t==="\\"&&ft<Nu?po({},hl,Wl):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&po({},t2e,n),{value:n,literal:r}}function z1r(){var t,r,n,o;return Ro=null,dmt(),t=ft,r=B1r(),n=$1r(),o=j1r(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ft}}function U1r(t){return t.type===bA||t.type===S2||t.type===IQ||t.type===DQ}function hmt(){if(dmt(),ft>=Nu)return{type:b$,start:ft,end:ft};let t=gr.charCodeAt(ft);return v$(t)?O1r():t===40||t===41||t===59?J_e():t===39||t===34?L1r():t===46?Vv(gr.charCodeAt(ft+1))?nmt():J_e():Vv(t)?nmt():J_e()}function Tf(){let t=Ro;return ft=t.end,Ro=hmt(),ft=t.end,t}function mmt(){let t=ft;Ro=hmt(),ft=t}function V1r(t){let r=new qm(d1r);return r.elements=t,r}function omt(t,r,n){let o=new qm(t==="||"||t==="&&"?y1r:p1r);return o.operator=t,o.left=r,o.right=n,o}function G1r(t,r){let n=new qm(h1r);return n.callee=t,n.arguments=r,n}function W1r(t,r,n){let o=new qm(m1r);return o.test=t,o.consequent=r,o.alternate=n,o}function o2e(t){let r=new qm(cmt);return r.name=t,r}function h$(t){let r=new qm(g1r);return r.value=t.value,r.raw=gr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function imt(t,r,n){let o=new qm(b1r);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function q1r(t){let r=new qm(x1r);return r.properties=t,r}function smt(t,r,n){let o=new qm(v1r);return o.key=r,o.value=n,o.kind=t,o}function H1r(t,r){let n=new qm(w1r);return n.operator=t,n.argument=r,n.prefix=!0,n}function po(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(NQ(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ft,n.description=i,n}function MQ(t){t.type===b$&&po(t,T1r),t.type===vA&&po(t,_1r),t.type===x$&&po(t,S1r),t.type===bA&&po(t,C1r),t.type===S2&&po(t,E1r),po(t,hl,t.value)}function Mu(t){let r=Tf();(r.type!==Ef||r.value!==t)&&MQ(r)}function ji(t){return Ro.type===Ef&&Ro.value===t}function e2e(t){return Ro.type===S2&&Ro.value===t}function Y1r(){let t=[];for(ft=Ro.start,Mu("[");!ji("]");)ji(",")?(Tf(),t.push(null)):(t.push(xA()),ji("]")||Mu(","));return Tf(),V1r(t)}function amt(){ft=Ro.start;let t=Tf();return t.type===x$||t.type===vA?(t.octal&&po(t,fmt),h$(t)):o2e(t.value)}function X1r(){var t,r,n,o;if(ft=Ro.start,t=Ro,t.type===bA)return n=amt(),Mu(":"),o=xA(),smt("init",n,o);if(t.type===b$||t.type===Ef)MQ(t);else return r=amt(),Mu(":"),o=xA(),smt("init",r,o)}function K1r(){var t=[],r,n,o,i={},s=String;for(ft=Ro.start,Mu("{");!ji("}");)r=X1r(),r.key.type===cmt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?po({},A1r):i[o]=!0,t.push(r),ji("}")||Mu(",");return Mu("}"),q1r(t)}function Z1r(){Mu("(");let t=i2e();return Mu(")"),t}function J1r(){var t,r,n;if(ji("("))return Z1r();if(ji("["))return Y1r();if(ji("{"))return K1r();if(t=Ro.type,ft=Ro.start,t===bA||Q1r[Ro.value])n=o2e(Tf().value);else if(t===x$||t===vA)Ro.octal&&po(Ro,fmt),n=h$(Tf());else{if(t===S2)throw new Error(g$);t===IQ?(r=Tf(),r.value=r.value==="true",n=h$(r)):t===DQ?(r=Tf(),r.value=null,n=h$(r)):ji("/")||ji("/=")?(n=h$(z1r()),mmt()):MQ(Tf())}return n}function ewr(){let t=[];if(Mu("("),!ji(")"))for(;ft<Nu&&(t.push(xA()),!ji(")"));)Mu(",");return Mu(")"),t}function twr(){ft=Ro.start;let t=Tf();return U1r(t)||MQ(t),o2e(t.value)}function rwr(){return Mu("."),twr()}function nwr(){Mu("[");let t=i2e();return Mu("]"),t}function owr(){var t,r,n;for(t=J1r();;)if(ji("."))n=rwr(),t=imt(".",t,n);else if(ji("("))r=ewr(),t=G1r(t,r);else if(ji("["))n=nwr(),t=imt("[",t,n);else break;return t}function lmt(){let t=owr();if(Ro.type===Ef&&(ji("++")||ji("--")))throw new Error(g$);return t}function AQ(){var t,r;if(Ro.type!==Ef&&Ro.type!==S2)r=lmt();else{if(ji("++")||ji("--"))throw new Error(g$);if(ji("+")||ji("-")||ji("~")||ji("!"))t=Tf(),r=AQ(),r=H1r(t.value,r);else{if(e2e("delete")||e2e("void")||e2e("typeof"))throw new Error(g$);r=lmt()}}return r}function umt(t){let r=0;if(t.type!==Ef&&t.type!==S2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function iwr(){var t,r,n,o,i,s,a,l,u,c;if(t=Ro,u=AQ(),o=Ro,i=umt(o),i===0)return u;for(o.prec=i,Tf(),r=[t,Ro],a=AQ(),s=[u,o,a];(i=umt(Ro))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=omt(l,u,a),s.push(n);o=Tf(),o.prec=i,s.push(o),r.push(Ro),n=AQ(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=omt(s[c-1].value,s[c-2],n),c-=2;return n}function xA(){var t,r,n;return t=iwr(),ji("?")&&(Tf(),r=xA(),Mu(":"),n=xA(),t=W1r(t,r,n)),t}function i2e(){let t=xA();if(ji(","))throw new Error(g$);return t}function gmt(t){gr=t,ft=0,Nu=gr.length,Ro=null,mmt();let r=i2e();if(Ro.type!==b$)throw new Error("Unexpect token after expression.");return r}function awr(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&pt("Missing arguments to clamp function."),a.length>3&&pt("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&pt("Missing arguments to if function."),a.length>3&&pt("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function lwr(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function ymt(t){t=t||{};let r=t.allowed?gu(t.allowed):{},n=t.forbidden?gu(t.forbidden):{},o=t.constants||swr,i=(t.functions||awr)(d),s=t.globalvar,a=t.fieldvar,l=Dn(s)?s:m=>"".concat(s,'["').concat(m,'"]'),u={},c={},f=0;function d(m){if(Jn(m))return m;let g=p[m.type];return g==null&&pt("Unsupported type: "+m.type),g(m)}let p={Literal:m=>m.raw,Identifier:m=>{let g=m.name;return f>0?g:Pr(n,g)?pt("Illegal identifier: "+g):Pr(o,g)?o[g]:Pr(r,g)?g:(u[g]=1,l(g))},MemberExpression:m=>{let g=!m.computed,y=d(m.object);g&&(f+=1);let b=d(m.property);return y===a&&(c[lwr(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&pt("Illegal callee type: "+m.callee.type);let g=m.callee.name,y=m.arguments,b=Pr(i,g)&&i[g];return b||pt("Unrecognized function: "+g),Dn(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{f+=1;let g=d(m.key);return f-=1,g+":"+d(m.value)}};function h(m){let g={code:d(m),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return h.functions=i,h.constants=o,h}var Qvr,Jvr,e1r,t1r,r1r,n1r,o1r,i1r,s1r,a1r,l1r,u1r,Wy,gr,ft,Nu,Ro,IQ,b$,bA,S2,DQ,vA,Ef,x$,f1r,d1r,p1r,h1r,m1r,cmt,g1r,y1r,b1r,x1r,v1r,w1r,hl,_1r,S1r,C1r,E1r,T1r,t2e,Q_e,fmt,A1r,Wl,g$,k1r,I1r,N1r,Q1r,swr,bmt=N(()=>{"use strict";Ls();Qvr="RawCode",Jvr="Literal",e1r="Property",t1r="Identifier",r1r="ArrayExpression",n1r="BinaryExpression",o1r="CallExpression",i1r="ConditionalExpression",s1r="LogicalExpression",a1r="MemberExpression",l1r="ObjectExpression",u1r="UnaryExpression";qm.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=c1r(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};IQ=1,b$=2,bA=3,S2=4,DQ=5,vA=6,Ef=7,x$=8,f1r=9;Wy={};Wy[IQ]="Boolean";Wy[b$]="<end>";Wy[bA]="Identifier";Wy[S2]="Keyword";Wy[DQ]="Null";Wy[vA]="Numeric";Wy[Ef]="Punctuator";Wy[x$]="String";Wy[f1r]="RegularExpression";d1r="ArrayExpression",p1r="BinaryExpression",h1r="CallExpression",m1r="ConditionalExpression",cmt="Identifier",g1r="Literal",y1r="LogicalExpression",b1r="MemberExpression",x1r="ObjectExpression",v1r="Property",w1r="UnaryExpression",hl="Unexpected token %0",_1r="Unexpected number",S1r="Unexpected string",C1r="Unexpected identifier",E1r="Unexpected reserved word",T1r="Unexpected end of input",t2e="Invalid regular expression",Q_e="Invalid regular expression: missing /",fmt="Octal literals are not allowed in strict mode.",A1r="Duplicate data property in object literal not allowed in strict mode",Wl="ILLEGAL",g$="Disabled.",k1r=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),I1r=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");N1r={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};Q1r={if:1};swr={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function Af(t,r,n){return _mt=r||uwr,Smt=n||hwr,Cmt(t.trim()).map(s2e)}function mwr(t){return Smt[t]}function w$(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function Cmt(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=w$(t,i,wmt,FQ+xmt,OQ+vmt),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function s2e(t){return t[0]==="["?gwr(t):ywr(t)}function gwr(t){let r=t.length,n=1,o;if(n=w$(t,n,OQ,FQ,OQ),n===r)throw"Empty between selector: "+t;if(o=Cmt(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==dwr)throw"Expected '>' after between selector: "+t;o=o.map(s2e);let i=s2e(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function ywr(t){let r={source:_mt},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===vmt){if(l=t.lastIndexOf(xmt),l>=0){try{o=bwr(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===fwr&&(i=++l),u=w$(t,l,cwr),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=w$(t,l,FQ),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=w$(t,l,OQ),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==FQ)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||pwr.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):mwr(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function bwr(t){let r=t.split(wmt);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var uwr,FQ,OQ,xmt,vmt,cwr,wmt,fwr,dwr,pwr,hwr,_mt,Smt,C2=N(()=>{"use strict";uwr="view",FQ="[",OQ="]",xmt="{",vmt="}",cwr=":",wmt=",",fwr="@",dwr=">",pwr=/[[\]{}]/,hwr={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});var a2e={};fn(a2e,{Bounds:()=>Tu,CanvasHandler:()=>qM,CanvasRenderer:()=>NK,DATE:()=>mc,DAY:()=>Rl,DAYOFYEAR:()=>iy,Dataflow:()=>Hw,Debug:()=>oqe,Error:()=>tqe,EventStream:()=>aN,Gradient:()=>Ive,GroupItem:()=>Ove,HOURS:()=>of,Handler:()=>r2,Info:()=>nqe,Item:()=>Fve,MILLISECONDS:()=>Np,MINUTES:()=>sf,MONTH:()=>Pl,Marks:()=>jd,MultiPulse:()=>LW,None:()=>eqe,Operator:()=>Fo,Parameters:()=>xL,Pulse:()=>ev,QUARTER:()=>hc,RenderType:()=>Nv,Renderer:()=>My,ResourceLoader:()=>Rve,SECONDS:()=>Td,SVGHandler:()=>Zve,SVGRenderer:()=>n1e,SVGStringRenderer:()=>o1e,Scenegraph:()=>$K,TIME_UNITS:()=>lq,Transform:()=>et,View:()=>E_e,WEEK:()=>aa,Warn:()=>rqe,YEAR:()=>tl,accessor:()=>bd,accessorFields:()=>Aa,accessorName:()=>Oi,array:()=>Br,ascending:()=>HP,bandwidthNRD:()=>qW,bin:()=>Jfe,bootstrapCI:()=>ede,boundClip:()=>Dfr,boundContext:()=>rB,boundItem:()=>Sve,boundMark:()=>put,boundStroke:()=>qT,changeset:()=>rv,clampRange:()=>PWt,codegenExpression:()=>ymt,compare:()=>Oce,constant:()=>Qa,cumulativeLogNormal:()=>QW,cumulativeNormal:()=>TL,cumulativeUniform:()=>rq,dayofyear:()=>zde,debounce:()=>Rce,defaultLocale:()=>ove,definition:()=>jW,densityLogNormal:()=>ZW,densityNormal:()=>HW,densityUniform:()=>tq,domChild:()=>xf,domClear:()=>km,domCreate:()=>K_,domFind:()=>Kve,dotbin:()=>tde,error:()=>pt,expressionFunction:()=>$s,extend:()=>an,extent:()=>Qh,extentIndex:()=>Pce,falsy:()=>Yx,fastmap:()=>Bw,field:()=>Xh,flush:()=>UWt,font:()=>jK,fontFamily:()=>iB,fontSize:()=>Ny,format:()=>hK,formatLocale:()=>V5,formats:()=>lve,hasOwnProperty:()=>Pr,id:()=>AWt,identity:()=>uc,inferType:()=>vlt,inferTypes:()=>wlt,ingest:()=>Nn,inherits:()=>Dt,inrange:()=>VWt,interpolate:()=>Y4,interpolateColors:()=>fM,interpolateRange:()=>jY,intersect:()=>i1e,intersectBoxLine:()=>$M,intersectPath:()=>Pve,intersectPoint:()=>Lve,intersectRule:()=>rut,isArray:()=>Hr,isBoolean:()=>Lce,isDate:()=>YP,isFunction:()=>Dn,isIterable:()=>jce,isNumber:()=>q0,isObject:()=>un,isRegExp:()=>GWt,isString:()=>Jn,isTuple:()=>kE,key:()=>Bce,lerp:()=>WWt,lineHeight:()=>e2,loader:()=>mK,locale:()=>fK,logger:()=>kWt,lruCache:()=>$ce,markup:()=>r1e,merge:()=>zce,mergeConfig:()=>YD,multiLineOffset:()=>zcr,one:()=>G0,pad:()=>HWt,panLinear:()=>DWt,panLog:()=>NWt,panPow:()=>MWt,panSymlog:()=>FWt,parse:()=>tmt,parseExpression:()=>gmt,parseSelector:()=>Af,pathCurves:()=>Dve,pathEqual:()=>zut,pathParse:()=>WT,pathRectangle:()=>Zlt,pathRender:()=>zM,pathSymbols:()=>Klt,pathTrail:()=>Qlt,peek:()=>Un,point:()=>sB,projection:()=>x5,quantileLogNormal:()=>JW,quantileNormal:()=>AL,quantileUniform:()=>nq,quantiles:()=>GW,quantizeInterpolator:()=>BY,quarter:()=>OWt,quartiles:()=>WW,random:()=>wd,randomInteger:()=>gXt,randomKDE:()=>XW,randomLCG:()=>mXt,randomLogNormal:()=>rde,randomMixture:()=>nde,randomNormal:()=>YW,randomUniform:()=>ode,read:()=>iur,regressionExp:()=>sde,regressionLinear:()=>iq,regressionLoess:()=>ude,regressionLog:()=>ide,regressionPoly:()=>lde,regressionPow:()=>ade,regressionQuad:()=>sq,renderModule:()=>aB,repeat:()=>GP,resetDefaultLocale:()=>glt,resetSVGClipId:()=>eut,resetSVGDefIds:()=>Ffr,responseType:()=>our,runtimeContext:()=>rQ,sampleCurve:()=>dN,sampleLogNormal:()=>KW,sampleNormal:()=>EL,sampleUniform:()=>eq,scale:()=>Gn,sceneEqual:()=>s1e,sceneFromJSON:()=>mut,scenePickVisit:()=>EK,sceneToJSON:()=>hut,sceneVisit:()=>Dm,sceneZOrder:()=>jve,scheme:()=>X4,serializeXML:()=>Dut,setRandom:()=>pXt,span:()=>vE,splitAccessPath:()=>WP,stringValue:()=>$r,textMetrics:()=>Im,timeBin:()=>Zde,timeFloor:()=>Wde,timeFormatLocale:()=>BT,timeInterval:()=>nv,timeOffset:()=>Hde,timeSequence:()=>Xde,timeUnitSpecifier:()=>Bde,timeUnits:()=>uq,toBoolean:()=>Uce,toDate:()=>Vce,toNumber:()=>Zh,toSet:()=>gu,toString:()=>Gce,transform:()=>zfe,transforms:()=>tv,truncate:()=>XWt,truthy:()=>W0,tupleid:()=>_r,typeParsers:()=>ive,utcFloor:()=>qde,utcInterval:()=>ov,utcOffset:()=>Yde,utcSequence:()=>Kde,utcdayofyear:()=>Vde,utcquarter:()=>RWt,utcweek:()=>Gde,version:()=>Pwr,visitArray:()=>KWt,week:()=>Ude,writeConfig:()=>qP,zero:()=>Kh,zoomLinear:()=>Nce,zoomLog:()=>Mce,zoomPow:()=>aW,zoomSymlog:()=>Fce});var xwr,vwr,wwr,_wr,Swr,Cwr,Ewr,Twr,Awr,kwr,Iwr,Dwr,Nwr,Mwr,Fwr,Owr,Rwr,Pwr,l2e=N(()=>{"use strict";Ls();Ls();el();el();UXe();Qtt();bnt();nit();ist();iat();Wut();Hut();Jut();Hft();Kft();pN();yN();uve();lB();dM();tbe();Qpt();dK();ZZ();rmt();b_e();bmt();C2();xwr="vega",vwr="5.20.0",wwr="The Vega visualization grammar.",_wr=["vega","visualization","interaction","dataflow","library","data","d3"],Swr="BSD-3-Clause",Cwr="UW Interactive Data Lab (http://idl.cs.washington.edu)",Ewr="build/vega-node.js",Twr="build/vega.module.js",Awr="build/vega.min.js",kwr="build/vega.min.js",Iwr="index.d.ts",Dwr="vega/vega",Nwr={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},Mwr={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.20.0","vega-util":"~1.16.1","vega-view":"~5.10.0","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},Fwr={"vega-schema":"*"},Owr="f262105e75449760b0f35fda70e6b576a31d68a4",Rwr={name:xwr,version:vwr,description:wwr,keywords:_wr,license:Swr,author:Cwr,main:Ewr,module:Twr,unpkg:Awr,jsdelivr:kwr,types:Iwr,repository:Dwr,scripts:Nwr,dependencies:Mwr,devDependencies:Fwr,gitHead:Owr};an(tv,Tpe,Kge,j0e,hbe,Mbe,m1e,uxe,x1e,E1e,Mwe,Rwe);Pwr=Rwr.version});var Tmt,Emt=N(()=>{Tmt={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"4.13.1",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{changelog:"conventional-changelog -p angular -r 2",build:"yarn build:only","build:only":"yarn tsc:src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"find build ! -name 'vega-lite-schema.json' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",test:"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup 'yarn tsc:src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'yarn tsc:site -w' 'rollup -c site/rollup.config.js -w'","watch:test":"jest --watch"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2",ajv:"^6.12.2",chai:"^4.2.0",cheerio:"^1.0.0-rc.3",codecov:"^3.7.0",concurrently:"^5.2.0","conventional-changelog-cli":"^2.0.34",d3:"^5.16.0",eslint:"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3",jest:"^26.0.1","jest-puppeteer":"^4.4.0",mkdirp:"^1.0.4",prettier:"^2.0.5",puppeteer:"^3.1.0",rollup:"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7",terser:"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1",typescript:"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},dependencies:{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0",yargs:"~15.3.1"},peerDependencies:{vega:"^5.12.1"},jest:{preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],coverageDirectory:"./coverage/",collectCoverage:!1}}});function Hm(t,r,n){return t.fields=r||[],t.fname=n,t}var _F=N(()=>{"use strict"});function u2e(t){return t.length===1?jwr(t[0]):Bwr(t)}var jwr,Bwr,c2e=N(()=>{"use strict";jwr=t=>function(r){return r[t]},Bwr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}}});function _$(t){throw Error(t)}var f2e=N(()=>{"use strict"});function Ym(t){var r=[],n=null,o=0,i=t.length,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<i;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===n)c(),n=null,o=-1;else{if(n)continue;a===o&&u==='"'||a===o&&u==="'"?(a=l+1,n=u):u==="."&&!o?l>a?c():a=l+1:u==="["?(l>a&&c(),o=a=l+1):u==="]"&&(o||_$("Access path missing open bracket: "+t),o>0&&c(),o=0,a=l+1)}return o&&_$("Access path missing closing bracket: "+t),n&&_$("Access path missing closing quote: "+t),l>a&&(l++,c()),r}var RQ=N(()=>{"use strict";f2e()});function PQ(t,r,n){let o=Ym(t);return t=o.length===1?o[0]:t,Hm((n&&n.get||u2e)(o),[t],r||t)}var LQ=N(()=>{"use strict";_F();c2e();RQ()});var S$,$wr,jQ,zwr,Uwr,Vwr,Gwr,d2e=N(()=>{"use strict";_F();LQ();S$=[],$wr=PQ("id"),jQ=Hm(function(t){return t},S$,"identity"),zwr=Hm(function(){return 0},S$,"zero"),Uwr=Hm(function(){return 1},S$,"one"),Vwr=Hm(function(){return!0},S$,"true"),Gwr=Hm(function(){return!1},S$,"false")});function BQ(t,r,n){var o=[r].concat([].slice.call(n));console[t].apply(console,o)}function p2e(t,r){var n=t||Amt;return{level:function(o){return arguments.length?(n=+o,this):n},error:function(){return n>=kmt&&BQ(r||"error","ERROR",arguments),this},warn:function(){return n>=$Q&&BQ(r||"warn","WARN",arguments),this},info:function(){return n>=Imt&&BQ(r||"log","INFO",arguments),this},debug:function(){return n>=Dmt&&BQ(r||"log","DEBUG",arguments),this}}}var Amt,kmt,$Q,Imt,Dmt,Nmt=N(()=>{"use strict";Amt=0,kmt=1,$Q=2,Imt=3,Dmt=4});var Bt,C$=N(()=>{"use strict";Bt=Array.isArray});function wo(t){return t===Object(t)}var zQ=N(()=>{"use strict"});function E$(...t){return t.reduce((r,n)=>{for(var o in n)if(o==="signals")r.signals=Wwr(r.signals,n.signals);else{var i=o==="legend"?{layout:1}:o==="style"?!0:null;T$(r,o,n[o],i)}return r},{})}function T$(t,r,n,o){if(Mmt(r)){var i,s;if(wo(n)&&!Bt(n)){s=wo(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?T$(s,i,n[i]):Mmt(i)&&(s[i]=n[i])}else t[r]=n}}function Wwr(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}var Mmt,Fmt=N(()=>{"use strict";C$();zQ();Mmt=t=>t!=="__proto__"});var SF=N(()=>{"use strict"});var h2e=N(()=>{"use strict"});var Omt=N(()=>{"use strict";d2e();SF();h2e()});var Rmt=N(()=>{"use strict"});function Mn(t){return t!=null?Bt(t)?t:[t]:[]}var VQ=N(()=>{"use strict";C$()});var Pmt=N(()=>{"use strict"});function A$(t){return typeof t=="function"}var GQ=N(()=>{"use strict"});var Lmt=N(()=>{"use strict";_F();VQ();LQ();GQ()});var jmt=N(()=>{"use strict";GQ()});var Bmt=N(()=>{"use strict"});var $mt=N(()=>{"use strict"});var zmt=N(()=>{"use strict"});var Umt=N(()=>{"use strict"});function Vd(t,r){return Ywr.call(t,r)}var Ywr,WQ=N(()=>{"use strict";Ywr=Object.prototype.hasOwnProperty});var Vmt=N(()=>{"use strict";WQ()});var Gmt=N(()=>{"use strict";SF()});var Wmt=N(()=>{"use strict"});var qmt=N(()=>{"use strict"});function qy(t){return typeof t=="boolean"}var Hmt=N(()=>{"use strict"});var m2e=N(()=>{"use strict"});function _o(t){return typeof t=="number"}var g2e=N(()=>{"use strict"});var Ymt=N(()=>{"use strict"});function pr(t){return typeof t=="string"}var y2e=N(()=>{"use strict"});var Xmt=N(()=>{"use strict";_F();VQ();c2e();RQ()});var Kmt=N(()=>{"use strict";SF()});var Zmt=N(()=>{"use strict";WQ()});var Qmt=N(()=>{"use strict"});var b2e=N(()=>{"use strict"});var Jmt=N(()=>{"use strict";b2e()});var egt=N(()=>{"use strict";SF()});function Jr(t){return Bt(t)?"["+t.map(Jr)+"]":wo(t)||pr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var tgt=N(()=>{"use strict";C$();zQ();y2e()});var rgt=N(()=>{"use strict"});var ngt=N(()=>{"use strict";m2e();g2e()});var ogt=N(()=>{"use strict"});function Xm(t){for(var r={},n=0,o=t.length;n<o;++n)r[t[n]]=!0;return r}var igt=N(()=>{"use strict"});var sgt=N(()=>{"use strict"});var agt=N(()=>{"use strict"});var ir=N(()=>{"use strict";_F();d2e();Nmt();Fmt();Omt();Rmt();VQ();Pmt();Lmt();jmt();Bmt();f2e();$mt();zmt();Umt();Vmt();LQ();Gmt();WQ();Wmt();qmt();C$();Hmt();m2e();GQ();g2e();zQ();Ymt();y2e();Xmt();Kmt();Zmt();Qmt();Jmt();SF();b2e();egt();RQ();tgt();rgt();ngt();h2e();ogt();igt();sgt();agt()});function Pt(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}var So=N(()=>{"use strict";});var lgt=N(()=>{"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var r=isNaN(arguments[0])?1:Number(arguments[0]);return r?Array.prototype.reduce.call(this,function(n,o){return Array.isArray(o)?n.push.apply(n,t.call(o,r-1)):n.push(o),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})});var ugt=mt((BKo,qQ)=>{"use strict";var Zwr=function(){"use strict";function t(f,d){return d!=null&&f instanceof d}var r;try{r=Map}catch{r=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function i(f,d,p,h,m){typeof d=="object"&&(p=d.depth,h=d.prototype,m=d.includeNonEnumerable,d=d.circular);var g=[],y=[],b=typeof Buffer<"u";typeof d>"u"&&(d=!0),typeof p>"u"&&(p=1/0);function x(v,w){if(v===null)return null;if(w===0)return v;var _,S;if(typeof v!="object")return v;if(t(v,r))_=new r;else if(t(v,n))_=new n;else if(t(v,o))_=new o(function(P,R){v.then(function(V){P(x(V,w-1))},function(V){R(x(V,w-1))})});else if(i.__isArray(v))_=[];else if(i.__isRegExp(v))_=new RegExp(v.source,c(v)),v.lastIndex&&(_.lastIndex=v.lastIndex);else if(i.__isDate(v))_=new Date(v.getTime());else{if(b&&Buffer.isBuffer(v))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(v.length):_=new Buffer(v.length),v.copy(_),_;t(v,Error)?_=Object.create(v):typeof h>"u"?(S=Object.getPrototypeOf(v),_=Object.create(S)):(_=Object.create(h),S=h)}if(d){var C=g.indexOf(v);if(C!=-1)return y[C];g.push(v),y.push(_)}t(v,r)&&v.forEach(function(P,R){var V=x(R,w-1),G=x(P,w-1);_.set(V,G)}),t(v,n)&&v.forEach(function(P){var R=x(P,w-1);_.add(R)});for(var E in v){var T;S&&(T=Object.getOwnPropertyDescriptor(S,E)),!(T&&T.set==null)&&(_[E]=x(v[E],w-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(v),E=0;E<I.length;E++){var k=I[E],F=Object.getOwnPropertyDescriptor(v,k);F&&!F.enumerable&&!m||(_[k]=x(v[k],w-1),F.enumerable||Object.defineProperty(_,k,{enumerable:!1}))}if(m)for(var D=Object.getOwnPropertyNames(v),E=0;E<D.length;E++){var L=D[E],F=Object.getOwnPropertyDescriptor(v,L);F&&F.enumerable||(_[L]=x(v[L],w-1),Object.defineProperty(_,L,{enumerable:!1}))}return _}return x(f,p)}i.clonePrototype=function(d){if(d===null)return null;var p=function(){};return p.prototype=d,new p};function s(f){return Object.prototype.toString.call(f)}i.__objToStr=s;function a(f){return typeof f=="object"&&s(f)==="[object Date]"}i.__isDate=a;function l(f){return typeof f=="object"&&s(f)==="[object Array]"}i.__isArray=l;function u(f){return typeof f=="object"&&s(f)==="[object RegExp]"}i.__isRegExp=u;function c(f){var d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),d}return i.__getRegExpFlags=c,i}();typeof qQ=="object"&&qQ.exports&&(qQ.exports=Zwr)});var fgt=mt(($Ko,cgt)=>{"use strict";cgt.exports=function t(r,n){if(r===n)return!0;if(r&&n&&typeof r=="object"&&typeof n=="object"){if(r.constructor!==n.constructor)return!1;var o,i,s;if(Array.isArray(r)){if(o=r.length,o!=n.length)return!1;for(i=o;i--!==0;)if(!t(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if(s=Object.keys(r),o=s.length,o!==Object.keys(n).length)return!1;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=o;i--!==0;){var a=s[i];if(!t(r[a],n[a]))return!1}return!0}return r!==r&&n!==n}});var x2e=mt((zKo,dgt)=>{"use strict";dgt.exports=function(t,r){r||(r={}),typeof r=="function"&&(r={cmp:r});var n=typeof r.cycles=="boolean"?r.cycles:!1,o=r.cmp&&function(s){return function(a){return function(l,u){var c={key:l,value:a[l]},f={key:u,value:a[u]};return s(c,f)}}}(r.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=s(a[l])||"null";return u+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(a)-1,f=Object.keys(a).sort(o&&o(a));for(u="",l=0;l<f.length;l++){var d=f[l],p=s(a[d]);p&&(u&&(u+=","),u+=JSON.stringify(d)+":"+p)}return i.splice(c,1),"{"+u+"}"}}(t)}});function HQ(t){return!!t.or}function YQ(t){return!!t.and}function XQ(t){return!!t.not}function k$(t,r){if(XQ(t))k$(t.not,r);else if(YQ(t))for(let n of t.and)k$(n,r);else if(HQ(t))for(let n of t.or)k$(n,r);else r(t)}function I$(t,r){return XQ(t)?{not:I$(t.not,r)}:YQ(t)?{and:t.and.map(n=>I$(n,r))}:HQ(t)?{or:t.or.map(n=>I$(n,r))}:r(t)}var KQ=N(()=>{"use strict"});function E2(t,r){let n={};for(let o of r)Vd(t,o)&&(n[o]=t[o]);return n}function kf(t,r){let n=Object.assign({},t);for(let o of r)delete n[o];return n}function Tr(t){if(_o(t))return t;let r=pr(t)?t:(0,ZQ.default)(t);if(r.length<250)return r;let n=0;for(let o=0;o<r.length;o++){let i=r.charCodeAt(o);n=(n<<5)-n+i,n=n&n}return n}function v2e(t){return t===!1||t===null}function qt(t,r){return t.indexOf(r)>-1}function T2(t,r){let n=0;for(let[o,i]of t.entries())if(r(i,o,n++))return!0;return!1}function w2e(t,r){let n=0;for(let[o,i]of t.entries())if(!r(i,o,n++))return!1;return!0}function ggt(t,...r){for(let n of r)Qwr(t,n??{});return t}function Qwr(t,r){for(let n of nt(r))T$(t,n,r[n],!0)}function Gd(t,r){let n=[],o={},i;for(let s of t)i=r(s),!(i in o)&&(o[i]=1,n.push(s));return n}function ygt(t,r){if(t.size!==r.size)return!1;for(let n of t)if(!r.has(n))return!1;return!0}function _2e(t,r){for(let n of t)if(r.has(n))return!0;return!1}function pgt(t){let r=new Set;for(let n of t){let i=Ym(n).map((a,l)=>l===0?a:`[${a}]`),s=i.map((a,l)=>i.slice(0,l+1).join(""));for(let a of s)r.add(a)}return r}function S2e(t,r){return t===void 0||r===void 0?!0:_2e(pgt(t),pgt(r))}function bn(t){return nt(t).length===0}function D$(t){let r=[];for(let n in t)Vd(t,n)&&r.push({key:n,value:t[n]});return r}function N$(t){return t===!0||t===!1}function kn(t){let r=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+r}function wA(t,r){return XQ(t)?"!("+wA(t.not,r)+")":YQ(t)?"("+t.and.map(n=>wA(n,r)).join(") && (")+")":HQ(t)?"("+t.or.map(n=>wA(n,r)).join(") || (")+")":r(t)}function QQ(t,r){if(r.length===0)return!0;let n=r.shift();return n in t&&QQ(t[n],r)&&delete t[n],bn(t)}function _A(t){return t.charAt(0).toUpperCase()+t.substr(1)}function JQ(t,r="datum"){let n=Ym(t),o=[];for(let i=1;i<=n.length;i++){let s=`[${n.slice(0,i).map(Jr).join("][")}]`;o.push(`${r}${s}`)}return o.join(" && ")}function bgt(t,r="datum"){return`${r}[${Jr(Ym(t).join("."))}]`}function Jwr(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function If(t){return`${Ym(t).map(Jwr).join("\\.")}`}function Hy(t,r,n){return t.replace(new RegExp(r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eJ(t){return`${Ym(t).join(".")}`}function CF(t){return t?Ym(t).length:0}function Fn(...t){for(let r of t)if(r!==void 0)return r}function C2e(t){let r=++e_r;return t?String(t)+r:r}function xgt(t){return t_r(t)?t:`__${t}`}function t_r(t){return t.indexOf("__")===0}function SA(t){if(t!==void 0)return(t%360+360)%360}function tJ(t){return _o(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var hgt,mgt,ZQ,Gv,sr,di,nt,Zp,e_r,bt=N(()=>{"use strict";lgt();hgt=Pc(ugt()),mgt=Pc(fgt()),ZQ=Pc(x2e());ir();KQ();Gv=mgt.default,sr=hgt.default;Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>(0,ZQ.default)(t)).join(",")})`};di=ZQ.default;nt=Object.keys,Zp=Object.values;e_r=42});function EF(t){return t&&t.condition}function A2e(t){return!!wgt[t]}var E2e,nJ,vgt,T2e,wgt,HKo,M$=N(()=>{"use strict";bt();E2e={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};nJ=["domain","grid","labels","ticks","title"],vgt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},T2e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},wgt=Object.assign(Object.assign({},T2e),{style:1,labelExpr:1,encoding:1});HKo=nt(wgt)});function Df(t){return qt(["line","area","trail"],t)}function I2e(t){return qt(["rect","bar","image","arc"],t)}function ql(t){return t.type}function Fgt(t){return ql(t)?t.type:t}var kc,k2e,CA,EA,_gt,TA,TF,Sgt,AF,oJ,F$,Cgt,O$,R$,iJ,D2e,ZKo,r_r,n_r,Egt,o_r,N2e,Tgt,Agt,kgt,Igt,Dgt,Ngt,Mgt,ha=N(()=>{"use strict";ir();bt();kc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},k2e=kc.arc,CA=kc.area,EA=kc.bar,_gt=kc.image,TA=kc.line,TF=kc.point,Sgt=kc.rect,AF=kc.rule,oJ=kc.text,F$=kc.tick,Cgt=kc.trail,O$=kc.circle,R$=kc.square,iJ=kc.geoshape;D2e=nt(kc);ZKo=Xm(D2e),r_r=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],n_r=["fill","fillOpacity"],Egt=[...r_r,...n_r],o_r={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},N2e=nt(o_r),Tgt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},Agt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},kgt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Igt=5,Dgt={binSpacing:1,continuousBandSize:Igt,timeUnitBandPosition:.5},Ngt={binSpacing:0,continuousBandSize:Igt,timeUnitBandPosition:.5},Mgt={thickness:1}});function Fa(t){return"mark"in t}var A2=N(()=>{"use strict"});var Yy,P$=N(()=>{"use strict";ha();A2();Yy=class{constructor(r,n){this.name=r,this.run=n}hasMatchingType(r){return Fa(r)?Fgt(r.mark)===this.name:!1}}});function Qp(t){return!!t&&!!t.argmin}function Km(t){return!!t&&!!t.argmax}function kF(t){return pr(t)&&!!Ogt[t]}function sJ(t){return pr(t)&&qt(s_r,t)}function Pgt(t){return pr(t)&&qt(["min","max"],t)}var Ogt,Rgt,oZo,s_r,Lgt,a_r,jgt,Wv=N(()=>{"use strict";ir();bt();Ogt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Rgt={count:1,min:1,max:1};oZo=nt(Ogt);s_r=["count","valid","missing","distinct"];Lgt=["count","sum","distinct","valid","missing"],a_r=["mean","average","median","q1","q3","min","max"],jgt=Xm(a_r)});function M2e(t){return t in Bgt}function $gt(t){switch(t){case Dc:return"y";case Fu:return"y2";case Nc:return"x";case Hl:return"x2"}}function zgt(t){return t in F2e}function Hv(t){return t===Es||t===Ou||t===Ru}function Wgt(t){return!!Ggt[t]}function cJ(t){return!!lJ[t]}function fJ(t){return Kd(t)!==t}function Kd(t){switch(t){case Ff:return to;case Wd:return pi;case Fu:return Dc;case Hl:return Nc;case Qm:return Ic;case Zm:return Of}return t}function Jp(t){if(M2e(t))switch(t){case Ic:return"startAngle";case Qm:return"endAngle";case Of:return"outerRadius";case Zm:return"innerRadius"}return t}function gl(t){switch(t){case to:return Ff;case pi:return Wd;case Dc:return Fu;case Nc:return Hl;case Ic:return Qm;case Of:return Zm}}function Yl(t){switch(t){case to:case Ff:return"width";case pi:case Wd:return"height"}}function Hgt(t){switch(t){case to:return"xOffset";case pi:return"yOffset";case Ff:return"x2Offset";case Wd:return"y2Offset";case Ic:return"thetaOffset";case Of:return"radiusOffset";case Qm:return"theta2Offset";case Zm:return"radius2Offset"}}function yl(t){return t in Xy}function k2(t){return t==="width"?to:pi}function Qgt(t){return!!dJ[t]}function Jgt(t){switch(t){case Es:case Ou:case Ru:case Rf:case us:case Mc:case Yd:case Xd:return!0;case qd:case Hd:case Jm:return!1}}function Pu(t){return!!e0t[t]}function t0t(t,r){return c_r(t)[r]}function c_r(t){switch(t){case Es:case Ou:case Ru:case FF:case IA:case DF:case qv:case NF:case kA:case Mc:case qd:case Hd:case Yd:case IF:case Nf:case Mf:return R2e;case to:case pi:case Dc:case Nc:return u_r;case Ff:case Wd:case Fu:case Hl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Rf:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Xd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case us:return{point:"always",geoshape:"always"};case AA:return{text:"always"};case Jm:return{point:"always",square:"always",text:"always"};case MF:return{image:"always"};case Ic:return{text:"always",arc:"always"};case Of:return{text:"always",arc:"always"};case Qm:case Zm:return{arc:"always"}}}function OF(t){switch(t){case to:case pi:case Ic:case Of:case Rf:case Jm:case Yd:case Mc:case qd:case Hd:case Ff:case Wd:case Qm:case Zm:return;case IF:case Nf:case Mf:case us:case Xd:case AA:case qv:case NF:case MF:case FF:return"discrete";case Es:case Ou:case Ru:return"flexible";case Dc:case Nc:case Fu:case Hl:case IA:case DF:case kA:return}}var Nf,Mf,IF,to,pi,Ff,Wd,Of,Zm,Ic,Qm,Dc,Nc,Fu,Hl,Es,Ou,Ru,us,Rf,Jm,Mc,qd,Hd,Yd,Xd,AA,kA,IA,DF,qv,NF,MF,FF,l_r,Bgt,F2e,Ugt,aJ,Vgt,ml,lJ,uJ,lZo,uZo,cZo,O2e,fZo,dZo,pZo,Ggt,hZo,mZo,qgt,gZo,yZo,bZo,xZo,vZo,wZo,_Zo,SZo,CZo,EZo,TZo,AZo,kZo,dJ,Ygt,Xy,Ts,pJ,Xgt,IZo,DZo,NZo,MZo,FZo,OZo,RZo,PZo,Kgt,Zgt,e0t,I2,R2e,LZo,u_r,Ir=N(()=>{"use strict";So();bt();Nf="row",Mf="column",IF="facet",to="x",pi="y",Ff="x2",Wd="y2",Of="radius",Zm="radius2",Ic="theta",Qm="theta2",Dc="latitude",Nc="longitude",Fu="latitude2",Hl="longitude2",Es="color",Ou="fill",Ru="stroke",us="shape",Rf="size",Jm="angle",Mc="opacity",qd="fillOpacity",Hd="strokeOpacity",Yd="strokeWidth",Xd="strokeDash",AA="text",kA="order",IA="detail",DF="key",qv="tooltip",NF="href",MF="url",FF="description",l_r={x:1,y:1,x2:1,y2:1},Bgt={theta:1,theta2:1,radius:1,radius2:1};F2e={longitude:1,longitude2:1,latitude:1,latitude2:1};Ugt=nt(F2e),aJ=Object.assign(Object.assign(Object.assign(Object.assign({},l_r),Bgt),F2e),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});Vgt={row:1,column:1,facet:1},ml=nt(Vgt),lJ=Object.assign(Object.assign({},aJ),Vgt),uJ=nt(lJ),{order:lZo,detail:uZo,tooltip:cZo}=lJ,O2e=Pt(lJ,["order","detail","tooltip"]),{row:fZo,column:dZo,facet:pZo}=O2e,Ggt=Pt(O2e,["row","column","facet"]),hZo=nt(O2e),mZo=nt(Ggt);qgt=[Ff,Wd,Fu,Hl,Qm,Zm];gZo=nt(aJ),{x:yZo,y:bZo,x2:xZo,y2:vZo,latitude:wZo,longitude:_Zo,latitude2:SZo,longitude2:CZo,theta:EZo,theta2:TZo,radius:AZo,radius2:kZo}=aJ,dJ=Pt(aJ,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Ygt=nt(dJ),Xy={x:1,y:1},Ts=nt(Xy);pJ={theta:1,radius:1},Xgt=nt(pJ);({text:IZo,tooltip:DZo,href:NZo,url:MZo,description:FZo,detail:OZo,key:RZo,order:PZo}=dJ),Kgt=Pt(dJ,["text","tooltip","href","url","description","detail","key","order"]),Zgt=nt(Kgt);e0t=Object.assign(Object.assign(Object.assign({},Xy),pJ),Kgt),I2=nt(e0t);R2e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:LZo}=R2e,u_r=Pt(R2e,["geoshape"])});function hJ(t){return qy(t)&&(t=PF(t,void 0)),"bin"+nt(t).map(r=>RF(t[r])?kn(`_${r}_${Object.entries(t[r])}`):kn(`_${r}_${t[r]}`)).join("")}function Sn(t){return t===!0||D2(t)&&!t.binned}function Zi(t){return t==="binned"||D2(t)&&t.binned===!0}function D2(t){return wo(t)}function RF(t){return t?.selection}function P2e(t){switch(t){case Nf:case Mf:case Rf:case Es:case Ou:case Ru:case Yd:case Mc:case qd:case Hd:case us:return 6;case Xd:return 4;default:return 10}}var Xl=N(()=>{"use strict";ir();Ir();Mr();bt()});var it={};fn(it,{CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>Q_r,CONCAT_CANNOT_SHARE_AXIS:()=>A_r,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>m2r,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>g2r,FACETED_INDEPENDENT_SAME_SOURCE:()=>y2r,FIT_NON_SINGLE:()=>p_r,INVALID_CHANNEL_FOR_AXIS:()=>b2r,LEGEND_BINDINGS_PROJECT_LENGTH:()=>S_r,LINE_WITH_VARYING_SIZE:()=>G_r,MORE_THAN_ONE_SORT:()=>h2r,NO_FIELDS_NEEDS_AS:()=>N_r,RANGE_STEP_DEPRECATED:()=>J_r,REPLACE_ANGLE_WITH_THETA:()=>R_r,SCALE_BINDINGS_CONTINUOUS:()=>__r,cannotApplySizeToNonOrientedMark:()=>o2r,cannotProjectAggregate:()=>b_r,cannotProjectOnChannelWithoutField:()=>y_r,cannotStackNonLinearScale:()=>v2r,cannotStackRangedMark:()=>x2r,cannotUseScalePropertyWithNonColor:()=>e2r,channelRequiredForBinned:()=>I2r,columnsNotSupportByRowCol:()=>T_r,containerSizeNonSingle:()=>h_r,containerSizeNotCompatibleWithAutosize:()=>m_r,customFormatTypeNotAllowed:()=>M_r,differentParse:()=>I_r,discreteChannelCannotEncode:()=>X_r,domainRequiredForThresholdScale:()=>D2r,domainSortDropped:()=>p2r,droppedDay:()=>S2r,droppingColor:()=>z_r,droppingFit:()=>g_r,emptyFieldDef:()=>U_r,encodingOverridden:()=>F_r,errorBand1DNotSupport:()=>k2r,errorBarCenterAndExtentAreNotNeeded:()=>C2r,errorBarCenterIsNotNeeded:()=>A2r,errorBarCenterIsUsedWithWrongExtent:()=>E2r,errorBarContinuousAxisHasCustomizedAggregate:()=>T2r,facetChannelDropped:()=>Y_r,facetChannelShouldBeDiscrete:()=>H_r,incompatibleChannel:()=>W_r,independentScaleMeansIndependentGuide:()=>d2r,invalidAggregate:()=>B_r,invalidEncodingChannel:()=>q_r,invalidFieldType:()=>L_r,invalidFieldTypeForCountAggregate:()=>j_r,invalidSpec:()=>d_r,invalidTimeUnit:()=>_2r,invalidTransformIgnored:()=>D_r,latLongDeprecated:()=>V_r,lineWithRange:()=>K_r,mergeConflictingDomainProperty:()=>f2r,mergeConflictingProperty:()=>c2r,missingFieldType:()=>$_r,nearestNotSupportForContinuous:()=>x_r,noSameUnitLookup:()=>C_r,noSuchRepeatedValue:()=>E_r,orientOverridden:()=>Z_r,primitiveChannelDef:()=>P_r,projectionOverridden:()=>O_r,scalePropertyNotWorkWithScaleType:()=>a2r,scaleTypeNotWorkWithChannel:()=>i2r,scaleTypeNotWorkWithFieldDef:()=>s2r,scaleTypeNotWorkWithMark:()=>l2r,selectionNotFound:()=>w_r,selectionNotSupported:()=>v_r,stackNonSummativeAggregate:()=>w2r,stepDropped:()=>u2r,unaggregateDomainHasNoEffectForRawField:()=>t2r,unaggregateDomainWithNonSharedDomainOp:()=>r2r,unaggregatedDomainWithLogScale:()=>n2r,unrecognizedParse:()=>k_r});function d_r(t){return`Invalid specification ${JSON.stringify(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function h_r(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function m_r(t){let r=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${r} "container" only works well with autosize "fit" or "fit-${n}".`}function g_r(t){return t?`Dropping "fit-${t}" because spec has discrete ${Yl(t)}.`:'Dropping "fit" because spec has discrete size.'}function y_r(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function b_r(t,r){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${r}").`}function x_r(t){return`The "nearest" transform is not supported for ${t} marks.`}function v_r(t){return`Selection not supported for ${t} yet.`}function w_r(t){return`Cannot find a selection named "${t}".`}function C_r(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}function E_r(t){return`Unknown repeated value "${t}".`}function T_r(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}function k_r(t){return`Unrecognized parse "${t}".`}function I_r(t,r,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${r}.`}function D_r(t){return`Ignoring an invalid transform: ${di(t)}.`}function M_r(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function F_r(t){return`Layer's shared ${t.join(",")} channel ${t.length===1?"is":"are"} overriden.`}function O_r(t){let{parentProjection:r,projection:n}=t;return`Layer's shared projection ${di(r)} is overridden by a child projection ${di(n)}.`}function P_r(t,r,n){return`Channel ${t} is a ${r}. Converted to {value: ${di(n)}}.`}function L_r(t){return`Invalid field type "${t}".`}function j_r(t,r){return`Invalid field type "${t}" for aggregate: "${r}", using "quantitative" instead.`}function B_r(t){return`Invalid aggregation operator "${t}".`}function $_r(t,r){return`Missing type for channel "${t}", using "${r}" instead.`}function z_r(t,r){let{fill:n,stroke:o}=r;return`Dropping color ${t} as the plot also has ${n&&o?"fill and stroke":n?"fill":"stroke"}.`}function U_r(t,r){return`Dropping ${di(t)} from channel "${r}" since it does not contain any data field, datum, value, or signal.`}function V_r(t,r,n){return`${t}-encoding with type ${r} is deprecated. Replacing with ${n}-encoding.`}function W_r(t,r,n){return`${t} dropped as it is incompatible with "${r}"${n?` when ${n}`:""}.`}function q_r(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function H_r(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function Y_r(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function X_r(t,r){return`Using discrete channel "${t}" to encode "${r}" field can be misleading as it does not encode ${r==="ordinal"?"order":"magnitude"}.`}function K_r(t,r){return`Line mark is for continuous lines and thus cannot be used with ${t&&r?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Z_r(t,r){return`Specified orient "${t}" overridden with "${r}".`}function e2r(t){return`Cannot use the scale property "${t}" with non-color channel.`}function t2r(t){return`Using unaggregated domain with raw field has no effect (${di(t)}).`}function r2r(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function n2r(t){return`Unaggregated domain is currently unsupported for log scale (${di(t)}).`}function o2r(t){return`Cannot apply size to non-oriented mark "${t}".`}function i2r(t,r,n){return`Channel "${t}" does not work with "${r}" scale. We are using "${n}" scale instead.`}function s2r(t,r){return`FieldDef does not work with "${t}" scale. We are using "${r}" scale instead.`}function a2r(t,r,n){return`${n}-scale's "${r}" is dropped as it does not work with ${t} scale.`}function l2r(t,r){return`Scale type "${r}" does not work with mark "${t}".`}function u2r(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function c2r(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${di(n)} and ${di(o)}). Using ${di(n)}.`}function f2r(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${di(n)} and ${di(o)}). Using the union of the two domains.`}function d2r(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function p2r(t){return`Dropping sort property ${di(t)} as unioned domains only support boolean or op "count", "min", and "max".`}function x2r(t){return`Cannot stack "${t}" if there is already "${t}2".`}function v2r(t){return`Cannot stack non-linear scale (${t}).`}function w2r(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function _2r(t,r){return`Invalid ${t}: ${di(r)}.`}function S2r(t){return`Dropping day from datetime ${di(t)} as day cannot be combined with other units.`}function C2r(t,r){return`${r?"extent ":""}${r&&t?"and ":""}${t?"center ":""}${r&&t?"are ":"is "}not needed when data are aggregated.`}function E2r(t,r,n){return`${t} is not usually used with ${r} for ${n}.`}function T2r(t,r){return`Continuous axis should not have customized aggregation function ${t}; ${r} already agregates the axis.`}function A2r(t,r){return`Center is not needed to be specified in ${r} when extent is ${t}.`}function k2r(t){return`1D error band does not support ${t}.`}function I2r(t){return`Channel ${t} is required for "binned" bin.`}function D2r(t){return`Domain for ${t} is required for threshold scale.`}var p_r,__r,S_r,A_r,N_r,R_r,G_r,Q_r,J_r,h2r,m2r,g2r,y2r,b2r,r0t=N(()=>{"use strict";Ir();bt();p_r='Autosize "fit" only works for single views and layered views.';__r="Scale bindings are currently only supported for scales with unbinned, continuous domains.",S_r="Legend bindings are only supported for selections over an individual field or encoding channel.";A_r="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";N_r='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';R_r="Arc marks uses theta channel rather than angle, replacing angle with theta.";G_r="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";Q_r="Custom domain scale cannot be unioned with default field-based domain.",J_r=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;h2r="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",m2r="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",g2r="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",y2r="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",b2r="Invalid channel for axis."});function o0t(t){return LF=t,LF}function i0t(){return LF=n0t,LF}function st(...t){LF.warn(...t)}function s0t(...t){LF.debug(...t)}var n0t,LF,cn=N(()=>{"use strict";ir();r0t();n0t=p2e($Q),LF=n0t});function Ky(t){if(t&&wo(t)){for(let r of mJ)if(r in t)return!0}return!1}function F2r(t){if(tJ(t)&&(t=+t),_o(t))return t>4&&st(it.invalidTimeUnit("quarter",t)),t-1;throw new Error(it.invalidTimeUnit("quarter",t))}function O2r(t){if(tJ(t)&&(t=+t),_o(t))return t-1;{let r=t.toLowerCase(),n=a0t.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=N2r.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("month",t))}}function R2r(t){if(tJ(t)&&(t=+t),_o(t))return t%7;{let r=t.toLowerCase(),n=l0t.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=M2r.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("day",t))}}function L2e(t,r){let n=[];if(r&&t.day!==void 0&&nt(t).length>1&&(st(it.droppedDay(t)),t=sr(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){let o=r?O2r(t.month):t.month;n.push(o)}else if(t.quarter!==void 0){let o=r?F2r(t.quarter):t.quarter;n.push(_o(o)?o*3:o+"*3")}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){let o=r?R2r(t.day):t.day;n.push(_o(o)?o+1:o+"+1")}else n.push(1);for(let o of["hours","minutes","seconds","milliseconds"]){let i=t[o];n.push(typeof i>"u"?0:i)}return n}function N2(t){let n=L2e(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function u0t(t){let n=L2e(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function c0t(t){let r=L2e(t,!0);return t.utc?+new Date(Date.UTC(...r)):+new Date(...r)}var a0t,N2r,l0t,M2r,jF=N(()=>{"use strict";ir();cn();Zy();bt();a0t=["january","february","march","april","may","june","july","august","september","october","november","december"],N2r=a0t.map(t=>t.substr(0,3)),l0t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],M2r=l0t.map(t=>t.substr(0,3))});function d0t(t){return!!f0t[t]}function B2e(t){return t.startsWith("utc")}function P2r(t){return t.substr(3)}function L$(t){let r=[];for(let n of mJ)p0t(t,n)&&r.push(n);return r}function p0t(t,r){let n=t.indexOf(r);return!(n<0||n>0&&r==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&r==="day"&&t.charAt(n+3)==="o"||n>0&&r==="year"&&t.charAt(n-1)==="f")}function h0t(t,r,{end:n}={end:!1}){let o=JQ(r),i=B2e(t)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${o})-1)`:`${i}${u}(${o})`}let a,l={};for(let u of mJ)p0t(t,u)&&(l[u]=s(u),a=u);return n&&(l[a]+="+1"),u0t(l)}function $2e(t){if(!t)return;let r=L$(t);return`timeUnitSpecifier(${(0,j2e.default)(r)}, ${(0,j2e.default)(L2r)})`}function m0t(t,r,n){if(!t)return;let o=$2e(t);return`${n||B2e(t)?"utc":"time"}Format(${r}, ${o})`}function cs(t){if(!t)return;let r;return pr(t)?r={unit:t}:wo(t)&&(r=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),B2e(r.unit)&&(r.utc=!0,r.unit=P2r(r.unit)),r}function g0t(t){let r=cs(t),{utc:n}=r,o=Pt(r,["utc"]);return o.unit?(n?"utc":"")+nt(o).map(i=>kn(`${i==="unit"?"":`_${i}_`}${o[i]}`)).join(""):(n?"utc":"")+"timeunit"+nt(o).map(i=>kn(`_${i}_${o[i]}`)).join("")}var j2e,f0t,mJ,L2r,Zy=N(()=>{"use strict";So();j2e=Pc(x2e());ir();jF();bt();f0t={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},mJ=nt(f0t);L2r={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "}});function rr(t){return t&&!!t.signal}function Lu(t){return!!t.step}function y0t(t){return Bt(t)?!1:"fields"in t&&!("data"in t)}function b0t(t){return Bt(t)?!1:"fields"in t&&"data"in t}function Yv(t){return Bt(t)?!1:"field"in t&&"data"in t}var j2r,x0t,v0t,gJ,ho=N(()=>{"use strict";ir();bt();j2r={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},x0t=nt(j2r),v0t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},gJ=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"]});function w0t(t){return t?.selection}function yJ(t){return t&&!!t.field&&t.equal!==void 0}function _0t(t){return t&&!!t.field&&t.lt!==void 0}function S0t(t){return t&&!!t.field&&t.lte!==void 0}function C0t(t){return t&&!!t.field&&t.gt!==void 0}function E0t(t){return t&&!!t.field&&t.gte!==void 0}function bJ(t){if(t&&t.field){if(Bt(t.range)&&t.range.length===2)return!0;if(rr(t.range))return!0}return!1}function xJ(t){return t&&!!t.field&&(Bt(t.oneOf)||Bt(t.in))}function B2r(t){return t&&!!t.field&&t.valid!==void 0}function z2e(t){return xJ(t)||yJ(t)||bJ(t)||_0t(t)||C0t(t)||S0t(t)||E0t(t)}function Qy(t,r){return B$(t,{timeUnit:r,wrapTime:!0})}function $2r(t,r){return t.map(n=>Qy(n,r))}function vJ(t,r=!0){var n;let{field:o}=t,i=(n=cs(t.timeUnit))===null||n===void 0?void 0:n.unit,s=i?"time("+h0t(i,o)+")":vt(t,{expr:"datum"});if(yJ(t))return s+"==="+Qy(t.equal,i);if(_0t(t)){let a=t.lt;return`${s}<${Qy(a,i)}`}else if(C0t(t)){let a=t.gt;return`${s}>${Qy(a,i)}`}else if(S0t(t)){let a=t.lte;return`${s}<=${Qy(a,i)}`}else if(E0t(t)){let a=t.gte;return`${s}>=${Qy(a,i)}`}else{if(xJ(t))return`indexof([${$2r(t.oneOf,i).join(",")}], ${s}) !== -1`;if(B2r(t))return j$(s,t.valid);if(bJ(t)){let{range:a}=t,l=rr(a)?{signal:`${a.signal}[0]`}:a[0],u=rr(a)?{signal:`${a.signal}[1]`}:a[1];if(l!==null&&u!==null&&r)return"inrange("+s+", ["+Qy(l,i)+", "+Qy(u,i)+"])";let c=[];return l!==null&&c.push(`${s} >= ${Qy(l,i)}`),u!==null&&c.push(`${s} <= ${Qy(u,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(t)}`)}function j$(t,r=!0){return r?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function T0t(t){var r;return z2e(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(r=cs(t.timeUnit))===null||r===void 0?void 0:r.unit}):t}var DA=N(()=>{"use strict";ir();Mr();Zy();ho()});function k0t(t){if(t)switch(t=t.toLowerCase(),t){case"q":case eh:return"quantitative";case"t":case Jy:return"temporal";case"o":case $$:return"ordinal";case"n":case z$:return"nominal";case eg:return"geojson"}}var BF,eh,$$,Jy,z$,eg,A0t,Zd=N(()=>{"use strict";bt();BF={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},eh=BF.quantitative,$$=BF.ordinal,Jy=BF.temporal,z$=BF.nominal,eg=BF.geojson,A0t=nt(BF)});function I0t(t,r){let n=U2e[t],o=U2e[r];return n===o||n==="ordinal-position"&&o==="time"||o==="ordinal-position"&&n==="time"}function V2e(t){return U2r[t]}function N0t(t){return t in W2r}function Qi(t){return t in Z2r}function ma(t){return t in X2r}function Pf(t){return t in V2r}function $F(t){return t in H2r}function F0t(t){return!pr(t)&&!!t.name}function G2e(t){return t?.selection}function O0t(t){return t&&t.unionWith}function wJ(t,r){switch(r){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!qt(["point","band","identity"],t);case"bins":return!qt(["point","band","identity","ordinal"],t);case"round":return Pf(t)||t==="band"||t==="point";case"padding":return Pf(t)||qt(["point","band"],t);case"paddingOuter":case"align":return qt(["point","band"],t);case"paddingInner":return t==="band";case"domainMid":case"clamp":return Pf(t);case"nice":return Pf(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return ma(t)&&!qt(["log","time","utc","threshold","quantile"],t)}}function _J(t,r){switch(r){case"interpolate":case"scheme":case"domainMid":return Hv(t)?void 0:it.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function q2e(t,r){return qt([$$,z$],r)?t===void 0||Qi(t):r===Jy?qt([Bi.TIME,Bi.UTC,void 0],t):r===eh?qt([Bi.LOG,Bi.POW,Bi.SQRT,Bi.SYMLOG,Bi.QUANTILE,Bi.QUANTIZE,Bi.THRESHOLD,Bi.LINEAR,void 0],t):!0}function H2e(t,r){if(!Pu(t))return!1;switch(t){case to:case pi:case Ic:case Of:return Pf(r)||qt(["band","point"],r);case Rf:case Yd:case Mc:case qd:case Hd:case Jm:return Pf(r)||$F(r)||qt(["band","point","ordinal"],r);case Es:case Ou:case Ru:return r!=="band";case Xd:return r==="ordinal"||$F(r);case us:return r==="ordinal"}}function J2r(){var t;let r={};for(let n of uJ)for(let o of A0t)for(let i of z2r){let s=eSr(n,o);H2e(n,i)&&q2e(i,o)&&(r[s]=(t=r[s])!==null&&t!==void 0?t:[],r[s].push(i))}return r}function eSr(t,r){return t+"_"+r}var Bi,U2e,z2r,U2r,D0t,V2r,G2r,W2r,q2r,H2r,Y2r,X2r,K2r,Z2r,M0t,W2e,gQo,yQo,bQo,xQo,vQo,Q2r,R0t,wQo,wi=N(()=>{"use strict";So();ir();Ir();Ir();cn();Zd();bt();Bi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},U2e={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},z2r=nt(U2e);U2r={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};D0t=["linear","log","pow","sqrt","symlog","time","utc"],V2r=Xm(D0t),G2r=["linear","log","pow","sqrt","symlog"],W2r=Xm(G2r);q2r=["quantile","quantize","threshold"],H2r=Xm(q2r),Y2r=D0t.concat(["quantile","quantize","threshold","sequential","identity"]),X2r=Xm(Y2r),K2r=["ordinal","bin-ordinal","point","band"],Z2r=Xm(K2r);M0t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};W2e={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},gQo=nt(W2e),{type:yQo,domain:bQo,range:xQo,scheme:vQo}=W2e,Q2r=Pt(W2e,["type","domain","range","scheme"]),R0t=nt(Q2r),wQo=J2r()});function UF(t){let{channel:r,channelDef:n,markDef:o,scale:i,config:s}=t,a=X2e(t);return At(n)&&!sJ(n.aggregate)&&i&&Pf(i.get("type"))&&i.get("zero")===!1?Y2e({fieldDef:n,channel:r,markDef:o,ref:a,config:s}):a}function Y2e({fieldDef:t,channel:r,markDef:n,ref:o,config:i}){return Df(n.type)||ln("invalid",n,i)===null?o:[tSr(t,r),o]}function tSr(t,r){let n=U$(t,!0),i=Kd(r)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function U$(t,r=!0){return j$(pr(t)?t:vt(t,{expr:"datum"}),!r)}function P0t(t){let{datum:r}=t;return Ky(r)?N2(r):`${JSON.stringify(r)}`}function eb(t,r,n,o){let i={};if(r&&(i.scale=r),Lf(t)){let{datum:s}=t;Ky(s)?i.signal=N2(s):rr(s)?i.signal=s.signal:i.value=s}else i.field=vt(t,n);if(o){let{offset:s,band:a}=o;s&&(i.offset=s),a&&(i.band=a)}return i}function zF({scaleName:t,fieldOrDatumDef:r,fieldOrDatumDef2:n,offset:o,startSuffix:i,band:s=.5}){let a=0<s&&s<1?"datum":void 0,l=vt(r,{expr:a,suffix:i}),u=n!==void 0?vt(n,{expr:a}):vt(r,{suffix:"end",expr:a}),c={};if(s===0||s===1){c.scale=t;let f=s===0?l:u;c.field=f}else{let f=`${s} * ${l} + ${1-s} * ${u}`;c.signal=`scale("${t}", ${f})`}return o&&(c.offset=o),c}function X2e({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c,band:f}){var d;if(r){if(Or(r)){if(ga(r)){f=f??F2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:l,config:i,isMidPoint:!0});let{bin:h,timeUnit:m,type:g}=r;if(Sn(h)||f&&m&&g===Jy)return l&&l.impute?eb(r,s,{binSuffix:"mid"},{offset:u}):f?zF({scaleName:s,fieldOrDatumDef:r,band:f,offset:u}):eb(r,s,tb(r,t)?{binSuffix:"range"}:{},{offset:u});if(Zi(h)){if(At(n))return zF({scaleName:s,fieldOrDatumDef:r,fieldOrDatumDef2:n,band:f,offset:u});{let y=t===to?Ff:Wd;st(it.channelRequiredForBinned(y))}}}let p=a?.get("type");return eb(r,s,Qi(p)?{binSuffix:"range"}:{},{offset:u,band:p==="band"?(d=f??r.band)!==null&&d!==void 0?d:.5:void 0})}else if(ju(r)){let p=r.value,h=u?{offset:u}:{};return Object.assign(Object.assign({},NA(t,p)),h)}}return A$(c)&&(c=c()),c&&Object.assign(Object.assign({},c),u?{offset:u}:{})}function NA(t,r){return qt(["x","x2"],t)&&r==="width"?{field:{group:"width"}}:qt(["y","y2"],t)&&r==="height"?{field:{group:"height"}}:mo(r)}var M2=N(()=>{"use strict";ir();Wv();Xl();Ir();Mr();jF();cn();ha();DA();wi();Zd();bt();ho();Po()});function nb(t){return t&&t!=="number"&&t!=="time"}function j0t(t,r,n){return`${t}(${r}${n?`, ${JSON.stringify(n)}`:""})`}function VF({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s}){var a,l;if(nb(n))return V$({fieldOrDatumDef:t,format:r,formatType:n,expr:o,config:s});let u=B0t(t,o,i);if(qF(t)){let c=oSr(u,At(t)?(a=cs(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0,r,s.timeFormat,WF(t)&&((l=t.scale)===null||l===void 0?void 0:l.type)===Bi.UTC);return c?{signal:c}:void 0}if(r=$0t(rb(t),r,s),At(t)&&Sn(t.bin)){let c=vt(t,{expr:o,binSuffix:"end"});return{signal:GF(u,c,r,n,s)}}else return r||rb(t)==="quantitative"?{signal:`${z0t(u,r)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function B0t(t,r,n){return At(t)?n?`${vt(t,{expr:r,suffix:"end"})}-${vt(t,{expr:r,suffix:"start"})}`:vt(t,{expr:r}):P0t(t)}function V$({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s,field:a}){if(a=a??B0t(t,o,i),At(t)&&Sn(t.bin)){let l=vt(t,{expr:o,binSuffix:"end"});return{signal:GF(a,l,r,n,s)}}return{signal:j0t(n,a,r)}}function CJ(t,r,n,o,i,s){var a;if(!nb(o)){if(qF(t)){let l=At(t)?(a=cs(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return nSr(n,l,i,s)}return $0t(r,n,i)}}function EJ(t,r,n){if(t&&(rr(t)||t==="number"||t==="time"))return t;if(qF(r)&&n!=="time"&&n!=="utc")return"time"}function $0t(t,r,n){if(pr(r))return r;if(t===eh)return n.numberFormat}function nSr(t,r,n,o){return t||(r?{signal:$2e(r)}:o?void 0:n.timeFormat)}function z0t(t,r){return`format(${t}, "${r||""}")`}function L0t(t,r,n,o){var i;return nb(n)?j0t(n,t,r):z0t(t,(i=pr(r)?r:void 0)!==null&&i!==void 0?i:o.numberFormat)}function GF(t,r,n,o,i){let s=L0t(t,n,o,i),a=L0t(r,n,o,i);return`${j$(t,!1)} ? "null" : ${s} + "${rSr}" + ${a}`}function oSr(t,r,n,o,i){return!r||n?(n=pr(n)?n:o,`${i?"utc":"time"}Format(${t}, '${n}')`):m0t(r,t,i)}var rSr,ob=N(()=>{"use strict";ir();Xl();Mr();DA();wi();Zy();Zd();ho();M2();rSr=" \u2013 "});function K2e(t){return t in iSr}function TJ(t){return!!t&&!!t.encoding}function bl(t){return!!t&&(t.op==="count"||!!t.field)}function AJ(t){return!!t&&Bt(t)}var O2,iSr,tg=N(()=>{"use strict";ir();O2="min",iSr={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1}});function ib(t){return"row"in t||"column"in t}function kJ(t){return!!t&&"header"in t}function Xv(t){return"facet"in t}var Kv=N(()=>{"use strict"});function U0t(t){return t.selection}function V0t(t){return t&&!pr(t)&&"repeat"in t}function Z2e(t){let{field:r,timeUnit:n,bin:o,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),o?{bin:o}:{}),i?{aggregate:i}:{}),{field:r})}function Q2e(t){return ga(t)&&"sort"in t}function F2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:i,config:s,isMidPoint:a}){if(Or(r)&&r.band!==void 0)return r.band;if(At(r)){let{timeUnit:l,bin:u}=r;if(l&&!n)return a?sb("timeUnitBandPosition",o,s):I2e(o.type)?sb("timeUnitBand",o,s):0;if(Sn(u))return I2e(o.type)&&!a?1:.5}if(i?.fieldChannel===t&&a)return .5}function HF(t,r,n,o,i,s){return Sn(r.bin)||r.timeUnit&&ga(r)&&r.type==="temporal"?!!F2({channel:t,fieldDef:r,fieldDef2:n,stack:o,markDef:i,config:s}):!1}function YF(t){return!!t&&"condition"in t}function XF(t){let r=t&&t.condition;return!!r&&!Bt(r)&&At(r)}function DJ(t){let r=t&&t.condition;return!!r&&!Bt(r)&&Or(r)}function G0t(t){let r=t&&t.condition;return!!r&&(Bt(r)||ju(r))}function At(t){return!!t&&(!!t.field||t.aggregate==="count")}function rb(t){return t&&t.type}function Lf(t){return!!t&&"datum"in t}function jf(t){return ga(t)&&H0t(t)||NJ(t)}function NJ(t){return Lf(t)&&_o(t.datum)}function Or(t){return At(t)||Lf(t)}function ga(t){return!!t&&("field"in t&&"type"in t||t.aggregate==="count")}function ju(t){return t&&"value"in t&&"value"in t}function WF(t){return!!t&&("scale"in t||"sort"in t)}function MJ(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function W0t(t){return!!t&&"legend"in t}function q0t(t){return!!t&&("format"in t||"formatType"in t)}function sSr(t){return"op"in t}function vt(t,r={}){var n,o,i;let s=t.field,a=r.prefix,l=r.suffix,u="";if(aSr(t))s=xgt("count");else{let c;if(!r.nofn)if(sSr(t))c=t.op;else{let{bin:f,aggregate:d,timeUnit:p}=t;Sn(f)?(c=hJ(f),l=((n=r.binSuffix)!==null&&n!==void 0?n:"")+((o=r.suffix)!==null&&o!==void 0?o:"")):d?Km(d)?(u=`["${s}"]`,s=`argmax_${d.argmax}`):Qp(d)?(u=`["${s}"]`,s=`argmin_${d.argmin}`):c=String(d):p&&(c=g0t(p),l=(!qt(["range","mid"],r.binSuffix)&&r.binSuffix||"")+((i=r.suffix)!==null&&i!==void 0?i:""))}c&&(s=s?`${c}_${s}`:c)}return l&&(s=`${s}_${l}`),a&&(s=`${a}_${s}`),r.forAs?eJ(s):r.expr?bgt(s,r.expr)+u:If(s)+u}function J2e(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return At(t)&&!!t.bin;case"temporal":return!1}throw new Error(it.invalidFieldType(t.type))}function H0t(t){return!J2e(t)}function aSr(t){return t.aggregate==="count"}function lSr(t,r){var n;let{field:o,bin:i,timeUnit:s,aggregate:a}=t;if(a==="count")return r.countTitle;if(Sn(i))return`${o} (binned)`;if(s){let l=(n=cs(s))===null||n===void 0?void 0:n.unit;if(l)return`${o} (${L$(l).join("-")})`}else if(a)return Km(a)?`${o} for max ${a.argmax}`:Qp(a)?`${o} for min ${a.argmin}`:`${_A(a)} of ${o}`;return o}function uSr(t){let{aggregate:r,bin:n,timeUnit:o,field:i}=t;if(Km(r))return`${i} for argmax(${r.argmax})`;if(Qp(r))return`${i} for argmin(${r.argmin})`;let s=cs(o),a=r||s?.unit||s?.maxbins&&"timeunit"||Sn(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}function eSe(t){X0t=t}function K0t(){eSe(Y0t)}function th(t,r,{allowDisabling:n,includeDefault:o=!0}){var i,s;let l=((i=FJ(t))!==null&&i!==void 0?i:{}).title;if(!At(t))return l;let u=t,c=o?tSe(u,r):void 0;return n?Fn(l,u.title,c):(s=l??u.title)!==null&&s!==void 0?s:c}function FJ(t){if(MJ(t)&&t.axis)return t.axis;if(W0t(t)&&t.legend)return t.legend;if(kJ(t)&&t.header)return t.header}function tSe(t,r){return X0t(t,r)}function KF(t){var r;if(q0t(t)){let{format:n,formatType:o}=t;return{format:n,formatType:o}}else{let n=(r=FJ(t))!==null&&r!==void 0?r:{},{format:o,formatType:i}=n;return{format:o,formatType:i}}}function cSr(t,r){if(t.timeUnit)return"temporal";if(Sn(t.bin))return"quantitative";switch(OF(r)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function Kl(t){if(At(t))return t;if(XF(t))return t.condition}function Io(t){if(Or(t))return t;if(DJ(t))return t.condition}function G$(t,r,n){if(pr(t)||_o(t)||qy(t)){let o=pr(t)?"string":_o(t)?"number":"boolean";return st(it.primitiveChannelDef(r,o,t)),{value:t}}return Or(t)?IJ(t,r,n):DJ(t)?Object.assign(Object.assign({},t),{condition:IJ(t.condition,r,n)}):t}function IJ(t,r,n){if(q0t(t)){let{format:o,formatType:i}=t,s=Pt(t,["format","formatType"]);if(nb(i)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),IJ(s,r,n)}else{let o=MJ(t)?"axis":W0t(t)?"legend":kJ(t)?"header":null;if(o&&t[o]){let i=t[o],{format:s,formatType:a}=i,l=Pt(i,["format","formatType"]);if(nb(a)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),IJ(Object.assign(Object.assign({},t),{[o]:l}),r,n)}}return At(t)?rSe(t,r):fSr(t)}function fSr(t){let r=t.type;if(r)return t;let{datum:n}=t;return r=_o(n)?"quantitative":pr(n)?"nominal":Ky(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:r})}function rSe(t,r){let{aggregate:n,timeUnit:o,bin:i,field:s}=t,a=Object.assign({},t);if(n&&!kF(n)&&!Km(n)&&!Qp(n)&&(st(it.invalidAggregate(n)),delete a.aggregate),o&&(a.timeUnit=cs(o)),s&&(a.field=`${s}`),Sn(i)&&(a.bin=PF(i,r)),Zi(i)&&!yl(r)&&st(`Channel ${r} should not be used with "binned" bin.`),ga(a)){let{type:l}=a,u=k0t(l);l!==u&&(a.type=u),l!=="quantitative"&&sJ(n)&&(st(it.invalidFieldTypeForCountAggregate(l,n)),a.type="quantitative")}else if(!fJ(r)){let l=cSr(a,r);st(it.missingFieldType(r,l)),a.type=l}if(ga(a)){let{compatible:l,warning:u}=dSr(a,r);l||st(u)}if(Q2e(a)&&pr(a.sort)){let{sort:l}=a;if(K2e(l))return Object.assign(Object.assign({},a),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&K2e(u))return Object.assign(Object.assign({},a),{sort:{encoding:u,order:"descending"}})}if(kJ(a)){let{header:l}=a,{orient:u}=l,c=Pt(l,["orient"]);if(u)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}return a}function PF(t,r){return qy(t)?{maxbins:P2e(r)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:P2e(r)}):t}function dSr(t,r){let n=t.type;if(n==="geojson"&&r!=="shape")return{compatible:!1,warning:`Channel ${r} should not be used with a geojson data.`};switch(r){case Nf:case Mf:case IF:return H0t(t)?{compatible:!1,warning:it.facetChannelShouldBeDiscrete(r)}:MA;case to:case pi:case Es:case Ou:case Ru:case AA:case IA:case DF:case qv:case NF:case MF:case Jm:case Ic:case Of:case FF:return MA;case Nc:case Hl:case Dc:case Fu:return n!==eh?{compatible:!1,warning:`Channel ${r} should be used with a quantitative field only, not ${t.type} field.`}:MA;case Mc:case qd:case Hd:case Yd:case Rf:case Qm:case Zm:case Ff:case Wd:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${r} should not be used with an unsorted discrete field.`}:MA;case Xd:return qt(["ordinal","nominal"],t.type)?MA:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case us:return qt(["ordinal","nominal","geojson"],t.type)?MA:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case kA:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:MA}}function qF(t){let{formatType:r}=KF(t);return r==="time"||!r&&pSr(t)}function pSr(t){return t&&(t.type==="temporal"||At(t)&&!!t.timeUnit)}function B$(t,{timeUnit:r,type:n,wrapTime:o,undefinedIfExprNotRequired:i}){var s;let a=r&&((s=cs(r))===null||s===void 0?void 0:s.unit),l=a||n==="temporal",u;return rr(t)?u=t.signal:Ky(t)?(l=!0,u=N2(t)):(pr(t)||_o(t))&&l&&(u=`datetime(${JSON.stringify(t)})`,d0t(a)&&(_o(t)&&t<1e4||pr(t)&&isNaN(Date.parse(t)))&&(u=N2({[a]:t}))),u?o&&l?`time(${u})`:u:i?void 0:JSON.stringify(t)}function OJ(t,r){let{type:n}=t;return r.map(o=>{let i=B$(o,{timeUnit:At(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:o})}function tb(t,r){return Sn(t.bin)?Pu(r)&&qt(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}var Y0t,X0t,MA,Mr=N(()=>{"use strict";So();ir();Wv();Xl();Ir();Po();ob();jF();cn();ha();tg();Kv();Zy();Zd();bt();ho();Y0t=(t,r)=>{switch(r.fieldTitle){case"plain":return t.field;case"functional":return uSr(t);default:return lSr(t,r)}},X0t=Y0t;MA={compatible:!0}});function RJ(t){let{anchor:r,frame:n,offset:o,orient:i,color:s,subtitleColor:a,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:f,subtitleLineHeight:d,subtitlePadding:p}=t,h=Pt(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},h),s?{fill:s}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},r?{anchor:r}:{}),n?{frame:n}:{}),o?{offset:o}:{}),i?{orient:i}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),f?{subtitleFontWeight:f}:{}),d?{subtitleLineHeight:d}:{}),p?{subtitlePadding:p}:{}),b=E2(m,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMark:g,subtitle:y}}function rg(t){return pr(t)||Bt(t)&&pr(t[0])}var W$=N(()=>{"use strict";So();ir();bt()});function mo(t){return rr(t)?t:t!==void 0?{value:t}:void 0}function nSe(t){return rr(t)?t.signal:Jr(t.value)}function R2(t){return rr(t)?t.signal:t==null?null:Jr(t)}function Z0t(t,r,n){for(let o of n){let i=sb(o,r.markDef,r.config);i!==void 0&&(t[o]=mo(i))}return t}function oSe(t){var r;return[].concat(t.type,(r=t.style)!==null&&r!==void 0?r:[])}function ln(t,r,n,o={}){let{vgChannel:i,ignoreVgConfig:s}=o;return i&&r[i]!==void 0?r[i]:r[t]!==void 0?r[t]:s&&(!i||i===t)?void 0:sb(t,r,n,o)}function sb(t,r,n,{vgChannel:o}={}){return Fn(o?q$(t,r,n.style):void 0,q$(t,r,n.style),o?n[r.type][o]:void 0,n[r.type][t],o?n.mark[o]:n.mark[t])}function q$(t,r,n){return iSe(t,oSe(r),n)}function iSe(t,r,n){r=Mn(r);let o;for(let i of r){let s=n[i];s&&s[t]!==void 0&&(o=s[t])}return o}function PJ(t,r){return Mn(t).reduce((n,o)=>{var i;return n.field.push(vt(o,r)),n.order.push((i=o.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function sSe(t,r){let n=[...t];return r.forEach(o=>{for(let i of n)if(Gv(i,o))return;n.push(o)}),n}function aSe(t,r){return Gv(t,r)||!r?t:t?[...Mn(t),...Mn(r)].join(", "):r}function LJ(t,r){let n=t.value,o=r.value;if(n==null||o===null)return{explicit:t.explicit,value:null};if((rg(n)||rr(n))&&(rg(o)||rr(o)))return{explicit:t.explicit,value:aSe(n,o)};if(rg(n)||rr(n))return{explicit:t.explicit,value:n};if(rg(o)||rr(o))return{explicit:t.explicit,value:o};if(!rg(n)&&!rr(n)&&!rg(o)&&!rr(o))return{explicit:t.explicit,value:sSe(n,o)};throw new Error("It should never reach here")}var Po=N(()=>{"use strict";ir();Mr();W$();bt();ho()});function ab(t,r){let n=t&&t[r];return n?Bt(n)?T2(n,o=>!!o.field):At(n)||XF(n):!1}function ZF(t){return T2(uJ,r=>{if(ab(t,r)){let n=t[r];if(Bt(n))return T2(n,o=>!!o.aggregate);{let o=Kl(n);return o&&!!o.aggregate}}return!1})}function QF(t,r){let n=[],o=[],i=[],s=[],a={};return H$(t,(l,u)=>{if(At(l)){let{field:c,aggregate:f,bin:d,timeUnit:p}=l,h=Pt(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let m=FJ(l),g=m&&m.title,y=vt(l,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},g?[]:{title:th(l,r,{allowDisabling:!0})}),h),{field:y});if(f){let x;if(Km(f)?(x="argmax",y=vt({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${y}.${c}`):Qp(f)?(x="argmin",y=vt({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${y}.${c}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(x=f),x){let v={op:x,as:y};c&&(v.field=c),s.push(v)}}else if(n.push(y),ga(l)&&Sn(d)){if(o.push({bin:d,field:c,as:y}),n.push(vt(l,{binSuffix:"end"})),tb(l,u)&&n.push(vt(l,{binSuffix:"range"})),yl(u)){let x={field:y+"_end"};a[u+"2"]=x}b.bin="binned",fJ(u)||(b.type=eh)}else if(p){i.push({timeUnit:p,field:c,as:y});let x=ga(l)&&l.type!==Jy&&"time";x&&(u===AA||u===qv?b.formatType=x:Qgt(u)?b.legend=Object.assign({formatType:x},b.legend):yl(u)&&(b.axis=Object.assign({formatType:x},b.axis)))}a[u]=b}else n.push(c),a[u]=t[u]}else a[u]=t[u]}),{bins:o,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function mSr(t,r,n){let o=t0t(r,n);if(o){if(o==="binned"){let i=t[r===Ff?to:pi];return!!(At(i)&&At(t[r])&&Zi(i.bin))}}else return!1;return!0}function Q0t(t,r,n){let o=r.type;return nt(t).reduce((i,s)=>{if(!cJ(s))return st(it.invalidEncodingChannel(s)),i;let a=t[s];if(s==="angle"&&o==="arc"&&!t.theta&&(st(it.REPLACE_ANGLE_WITH_THETA),s=Ic),!mSr(t,s,o))return st(it.incompatibleChannel(s,o)),i;if(s===Rf&&o==="line"){let l=Kl(t[s]);if(l?.aggregate)return st(it.LINE_WITH_VARYING_SIZE),i}if(s===Es&&(r.filled?"fill"in t:"stroke"in t))return st(it.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if(s===IA||s===kA&&!Bt(a)&&!ju(a)||s===qv&&Bt(a))a&&(i[s]=Mn(a).reduce((l,u)=>(At(u)?l.push(rSe(u,s)):st(it.emptyFieldDef(u,s)),l),[]));else{if(s===qv&&a===null)i[s]=null;else if(!At(a)&&!Lf(a)&&!ju(a)&&!YF(a)&&!rr(a))return st(it.emptyFieldDef(a,s)),i;i[s]=G$(a,s,n)}return i},{})}function J0t(t){let r=[];for(let n of nt(t))if(ab(t,n)){let o=t[n],i=Mn(o);for(let s of i)At(s)?r.push(s):XF(s)&&r.push(s.condition)}return r}function H$(t,r,n){if(t)for(let o of nt(t)){let i=t[o];if(Bt(i))for(let s of i)r.call(n,s,o);else r.call(n,i,o)}}function jJ(t,r,n,o){return t?nt(t).reduce((i,s)=>{let a=t[s];return Bt(a)?a.reduce((l,u)=>r.call(o,l,u,s),i):r.call(o,i,a,s)},n):n}function BJ(t,r){return nt(r).reduce((n,o)=>{switch(o){case to:case pi:case NF:case FF:case MF:case Ff:case Wd:case Ic:case Qm:case Of:case Zm:case Dc:case Nc:case Fu:case Hl:case AA:case us:case Jm:case qv:return n;case kA:if(t==="line"||t==="trail")return n;case IA:case DF:{let i=r[o];if(Bt(i)||At(i))for(let s of Mn(i))s.aggregate||n.push(vt(s,{}));return n}case Rf:if(t==="trail")return n;case Es:case Ou:case Ru:case Mc:case qd:case Hd:case Xd:case Yd:{let i=Kl(r[o]);return i&&!i.aggregate&&n.push(vt(i,{})),n}}},[])}var Fc=N(()=>{"use strict";So();ir();Wv();Xl();Ir();Mr();cn();Zd();bt();ho()});function eyt(t){let{tooltip:r}=t,n=Pt(t,["tooltip"]);if(!r)return{filteredEncoding:t};let o,i;if(Bt(r)){for(let s of r)s.aggregate?(o||(o=[]),o.push(s)):(i||(i=[]),i.push(s));o&&(n.tooltip=o)}else r.aggregate?n.tooltip=r:i=r;return Bt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Y$(t,r,n,o=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...t.map(({fieldPrefix:s,titlePrefix:a})=>{let l=o?` of ${r.field}`:"";return{field:s+r.field,type:r.type,title:rr(a)?{signal:a+`"${escape(l)}"`}:a+l}}),...J0t(n)]}}function lSe(t){let{axis:r,title:n,field:o}=t;return r&&r.title!==void 0?void 0:Fn(n,o)}function JF(t,r,n,o,i){let{scale:s,axis:a}=n;return({partName:l,mark:u,positionPrefix:c,endPositionPrefix:f=void 0,aria:d,extraEncoding:p={}})=>{let h=lSe(n);return uSe(t,l,i,d,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[r]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},h!==void 0?{title:h}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},pr(f)?{[r+"2"]:{field:f+"_"+n.field}}:{}),o),p)})}}function uSe(t,r,n,o,i){let{clip:s,color:a,opacity:l}=t,u=t.type;return t[r]||t[r]===void 0&&n[r]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[r]),s?{clip:s}:{}),a?{color:a}:{}),l?{opacity:l}:{}),ql(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${r}`}),qy(t[r])?{}:t[r]),o===!1?{aria:o}:{})})]:[]}function zJ(t,r,n){let{encoding:o}=t,i=r==="vertical"?"y":"x",s=o[i],a=o[i+"2"],l=o[i+"Error"],u=o[i+"Error2"];return{continuousAxisChannelDef:$J(s,n),continuousAxisChannelDef2:$J(a,n),continuousAxisChannelDefError:$J(l,n),continuousAxisChannelDefError2:$J(u,n),continuousAxis:i}}function $J(t,r){if(t&&t.aggregate){let{aggregate:n}=t,o=Pt(t,["aggregate"]);return n!==r&&st(it.errorBarContinuousAxisHasCustomizedAggregate(n,r)),o}else return t}function UJ(t,r){let{mark:n,encoding:o}=t,{x:i,y:s}=o;if(jf(i)){if(jf(s)){let a=At(i)&&i.aggregate,l=At(s)&&s.aggregate;if(!a&&l===r)return"vertical";if(!l&&a===r)return"horizontal";if(a===r&&l===r)throw new Error("Both x and y cannot have aggregate");return ql(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(jf(s))return"vertical";throw new Error("Need a valid continuous axis for "+r+"s")}}var VJ=N(()=>{"use strict";So();ir();Mr();Fc();cn();ha();bt();ho()});function nyt(t){return _o(t)?"tukey":t}function cSe(t,{config:r}){var n,o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=Pt(t,["mark","encoding","selection","projection"]),c=ql(i)?i:{type:i};a&&st(it.selectionNotSupported("boxplot"));let f=(n=c.extent)!==null&&n!==void 0?n:r.boxplot.extent,d=ln("size",c,r),p=nyt(f),{transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:v,boxOrient:w,customTooltipWithoutAggregatedField:_}=ySr(t,f,r),{color:S,size:C}=x,E=Pt(x,["color","size"]),T=U=>JF(c,g,m,U,r.boxplot),I=T(E),k=T(x),F=T(Object.assign(Object.assign({},E),C?{size:C}:{})),D=Y$([{fieldPrefix:p==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:p==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),L={type:"tick",color:"black",opacity:1,orient:v,invalid:null},P=p==="min-max"?D:Y$([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),R=[...I({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:P}),...I({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:P}),...I({partName:"ticks",mark:L,positionPrefix:"lower_whisker",aria:!1,extraEncoding:P}),...I({partName:"ticks",mark:L,positionPrefix:"upper_whisker",aria:!1,extraEncoding:P})],V=[...p!=="tukey"?R:[],...k({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:D}),...F({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},wo(r.boxplot.median)&&r.boxplot.median.color?{color:r.boxplot.median.color}:{}),d?{size:d}:{}),{orient:v,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:D})],G;if(p!=="min-max"){let U=`datum["lower_box_${m.field}"]`,H=`datum["upper_box_${m.field}"]`,X=`(${H} - ${U})`,fe=`${U} - ${f} * ${X}`,$=`${H} + ${f} * ${X}`,M=`datum["${m.field}"]`,z={joinaggregate:oyt(m.field),groupby:y},q;p==="tukey"&&(q={transform:[{filter:`(${fe} <= ${M}) && (${M} <= ${$})`},{aggregate:[{op:"min",field:m.field,as:"lower_whisker_"+m.field},{op:"max",field:m.field,as:"upper_whisker_"+m.field},{op:"min",field:"lower_box_"+m.field,as:"lower_box_"+m.field},{op:"max",field:"upper_box_"+m.field,as:"upper_box_"+m.field},...b],groupby:y}],layer:R});let{tooltip:ee}=E,ae=Pt(E,["tooltip"]),{scale:Q,axis:le}=m,ie=lSe(m),K=uSe(c,"outliers",r.boxplot,!0,{transform:[{filter:`(${M} < ${fe}) || (${M} > ${$})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},ie!==void 0?{title:ie}:{}),Q!==void 0?{scale:Q}:{}),le!==void 0?{axis:le}:{})},ae),_?{tooltip:_}:{})})[0];K&&q?G={transform:[z],layer:[K,q]}:K?(G=K,G.transform.unshift(z)):q&&(G=q,G.transform.unshift(z))}return G?Object.assign(Object.assign({},u),{layer:[G,{transform:h,layer:V}]}):Object.assign(Object.assign({},u),{transform:((o=u.transform)!==null&&o!==void 0?o:[]).concat(h),layer:V})}function oyt(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function ySr(t,r,n){let o=UJ(t,X$),{continuousAxisChannelDef:i,continuousAxis:s}=zJ(t,o,X$),a=i.field,l=nyt(r),u=[...oyt(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${r}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${r}, datum["min_${a}"])`,as:"lower_whisker_"+a}],f=t.encoding,d=s,p=f[d],h=Pt(f,[typeof d=="symbol"?d:d+""]),{customTooltipWithoutAggregatedField:m,filteredEncoding:g}=eyt(h),{bins:y,timeUnits:b,aggregate:x,groupby:v,encoding:w}=QF(g,n),_=o==="vertical"?"horizontal":"vertical",S=o;return{transform:[...y,...b,{aggregate:[...x,...u],groupby:v},...c],groupby:v,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:S,customTooltipWithoutAggregatedField:m}}var X$,tyt,ryt,fSe=N(()=>{"use strict";So();ir();Po();Fc();cn();ha();P$();VJ();X$="boxplot",tyt=["box","median","outliers","rule","ticks"],ryt=new Yy(X$,cSe)});function dSe(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:l,outerSpec:u,tooltipEncoding:c}=pSe(t,GJ,r),f=JF(l,i,o,s,r.errorbar),d={type:"tick",orient:a},p=[...f({partName:"ticks",mark:d,positionPrefix:"lower",aria:!1,extraEncoding:c}),...f({partName:"ticks",mark:d,positionPrefix:"upper",aria:!1,extraEncoding:c}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function bSr(t,r){let{encoding:n}=t;if(xSr(n))return{orient:UJ(t,r),inputType:"raw"};let o=vSr(n),i=wSr(n),s=n.x,a=n.y;if(o){if(i)throw new Error(`${r} cannot be both type aggregated-upper-lower and aggregated-error`);let l=n.x2,u=n.y2;if(Or(l)&&Or(u))throw new Error(`${r} cannot have both x2 and y2`);if(Or(l)){if(jf(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${r}`)}else if(Or(u)){if(jf(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${r}`)}throw new Error("No ranged axis")}else{let l=n.xError,u=n.xError2,c=n.yError,f=n.yError2;if(Or(u)&&!Or(l))throw new Error(`${r} cannot have xError2 without xError`);if(Or(f)&&!Or(c))throw new Error(`${r} cannot have yError2 without yError`);if(Or(l)&&Or(c))throw new Error(`${r} cannot have both xError and yError with both are quantiative`);if(Or(l)){if(jf(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Or(c)){if(jf(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function xSr(t){return(Or(t.x)||Or(t.y))&&!Or(t.x2)&&!Or(t.y2)&&!Or(t.xError)&&!Or(t.xError2)&&!Or(t.yError)&&!Or(t.yError2)}function vSr(t){return Or(t.x2)||Or(t.y2)}function wSr(t){return Or(t.xError)||Or(t.xError2)||Or(t.yError)||Or(t.yError2)}function pSe(t,r,n){var o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=Pt(t,["mark","encoding","selection","projection"]),c=ql(i)?i:{type:i};a&&st(it.selectionNotSupported(r));let{orient:f,inputType:d}=bSr(t,r),{continuousAxisChannelDef:p,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=zJ(t,f,r),{errorBarSpecificAggregate:b,postAggregateCalculates:x,tooltipSummary:v,tooltipTitleWithFieldName:w}=_Sr(c,p,h,m,g,d,r,n),_=s,S=y,C=_[S],E=y==="x"?"x2":"y2",T=_[E],I=y==="x"?"xError":"yError",k=_[I],F=y==="x"?"xError2":"yError2",D=_[F],L=Pt(_,[typeof S=="symbol"?S:S+"",typeof E=="symbol"?E:E+"",typeof I=="symbol"?I:I+"",typeof F=="symbol"?F:F+""]),{bins:P,timeUnits:R,aggregate:V,groupby:G,encoding:U}=QF(L,n),H=[...V,...b],X=d!=="raw"?[]:G,fe=Y$(v,p,U,w);return{transform:[...(o=u.transform)!==null&&o!==void 0?o:[],...P,...R,...H.length===0?[]:[{aggregate:H,groupby:X}],...x],groupby:X,continuousAxisChannelDef:p,continuousAxis:y,encodingWithoutContinuousAxis:U,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:fe}}function _Sr(t,r,n,o,i,s,a,l){let u=[],c=[],f=r.field,d,p=!1;if(s==="raw"){let h=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":l.errorbar.center,m=t.extent?t.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&st(it.errorBarCenterIsUsedWithWrongExtent(h,m,a)),m==="stderr"||m==="stdev")u=[{op:m,field:f,as:"extent_"+f},{op:h,field:f,as:"center_"+f}],c=[{calculate:`datum["center_${f}"] + datum["extent_${f}"]`,as:"upper_"+f},{calculate:`datum["center_${f}"] - datum["extent_${f}"]`,as:"lower_"+f}],d=[{fieldPrefix:"center_",titlePrefix:_A(h)},{fieldPrefix:"upper_",titlePrefix:iyt(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:iyt(h,m,"-")}],p=!0;else{t.center&&t.extent&&st(it.errorBarCenterIsNotNeeded(t.extent,a));let g,y,b;m==="ci"?(g="mean",y="ci0",b="ci1"):(g="median",y="q1",b="q3"),u=[{op:y,field:f,as:"lower_"+f},{op:b,field:f,as:"upper_"+f},{op:g,field:f,as:"center_"+f}],d=[{fieldPrefix:"upper_",titlePrefix:th({field:f,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:th({field:f,aggregate:y,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:th({field:f,aggregate:g,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&st(it.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?(d=[],c=[{calculate:`datum["${n.field}"]`,as:"upper_"+f},{calculate:`datum["${f}"]`,as:"lower_"+f}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:`datum["${f}"] + datum["${o.field}"]`,as:"upper_"+f}],i?c.push({calculate:`datum["${f}"] + datum["${i.field}"]`,as:"lower_"+f}):c.push({calculate:`datum["${f}"] - datum["${o.field}"]`,as:"lower_"+f}));for(let h of c)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Hy(Hy(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:u,tooltipSummary:d,tooltipTitleWithFieldName:p}}function iyt(t,r,n){return _A(t)+" "+n+" "+r}var GJ,syt,ayt,WJ=N(()=>{"use strict";So();Mr();Fc();cn();ha();bt();P$();VJ();GJ="errorbar",syt=["ticks","rule"],ayt=new Yy(GJ,dSe)});function hSe(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:l,tooltipEncoding:u}=pSe(t,qJ,r),c=a,f=JF(c,i,o,s,r.errorband),d=t.encoding.x!==void 0&&t.encoding.y!==void 0,p={type:d?"area":"rect"},h={type:d?"line":"rule"},m=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return d?(p=Object.assign(Object.assign(Object.assign({},p),m),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),m)):c.interpolate?st(it.errorBand1DNotSupport("interpolate")):c.tension&&st(it.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},l),{transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...f({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:u}),...f({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}var qJ,lyt,uyt,mSe=N(()=>{"use strict";cn();P$();VJ();WJ();qJ="errorband",lyt=["band","borders"],uyt=new Yy(qJ,hSe)});function gSe(t,r,n){let o=new Yy(t,r);cyt[t]={normalizer:o,parts:n}}function fyt(){return nt(cyt)}var cyt,dyt=N(()=>{"use strict";bt();P$();fSe();mSe();WJ();cyt={};gSe(X$,cSe,tyt);gSe(GJ,dSe,syt);gSe(qJ,hSe,lyt)});var pyt,hyt=N(()=>{"use strict";pyt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"]});var HJ,myt,gyt,ySe,fei,K$=N(()=>{"use strict";bt();HJ=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],myt={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},gyt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},ySe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},fei=nt(ySe)});function Z$(t){return!!t&&(t==="legend"||!!t.legend)}function YJ(t){return Z$(t)&&wo(t)}var Zv,yyt,eO=N(()=>{"use strict";ir();Zv="_vgsid_",yyt={single:{on:"click",fields:[Zv],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Zv],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}}});function bSe(t){return P2(t)||tO(t)||Q$(t)}function Q$(t){return"concat"in t}function P2(t){return"vconcat"in t}function tO(t){return"hconcat"in t}var XJ=N(()=>{"use strict"});function Bf(t){return wo(t)&&t.step!==void 0}function xSe(t){return t.view||t.width||t.height}function byt(t,r,n){var o,i;let s=n[r],a={},{spacing:l,columns:u}=s;l!==void 0&&(a.spacing=l),u!==void 0&&(Xv(t)&&!ib(t.facet)||Q$(t))&&(a.columns=u),P2(t)&&(a.columns=1);for(let c of CSr)if(t[c]!==void 0)if(c==="spacing"){let f=t[c];a[c]=_o(f)?f:{row:(o=f.row)!==null&&o!==void 0?o:l,column:(i=f.column)!==null&&i!==void 0?i:l}}else a[c]=t[c];return a}var vSe,SSr,CSr,FA=N(()=>{"use strict";ir();bt();XJ();Kv();vSe=20,SSr={align:1,bounds:1,center:1,columns:1,spacing:1},CSr=nt(SSr)});function J$(t,r){var n;return(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"continuousWidth":"continuousHeight"]}function OA(t,r){let n=RA(t,r);return Bf(n)?n.step:KJ}function RA(t,r){var n;let o=(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"discreteWidth":"discreteHeight"];return Fn(o,{step:t.step})}function ASr(t={}){return{signals:[{name:"color",value:wo(t)?Object.assign(Object.assign({},vyt),t):vyt}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function kSr(t){return{signals:[{name:"fontSize",value:wo(t)?Object.assign(Object.assign({},xyt),t):xyt}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function ISr(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function ZJ(t={}){let{color:r,font:n,fontSize:o}=t,i=Pt(t,["color","font","fontSize"]);return E$({},TSr,n?ISr(n):{},r?ASr(r):{},o?kSr(o):{},i||{})}function wyt(t){t=sr(t);for(let r of NSr)delete t[r];if(t.axis)for(let r in t.axis)EF(t.axis[r])&&delete t.axis[r];if(t.legend)for(let r of pyt)delete t.legend[r];if(t.mark){for(let r of N2e)delete t.mark[r];t.mark.tooltip&&wo(t.mark.tooltip)&&delete t.mark.tooltip}for(let r of DSr){for(let o of N2e)delete t[r][o];let n=MSr[r];if(n)for(let o of n)delete t[r][o];OSr(t,r)}for(let r of fyt())delete t[r];FSr(t);for(let r in t)wo(t[r])&&bn(t[r])&&delete t[r];return bn(t)?void 0:t}function FSr(t){let{titleMarkConfig:r,subtitleMarkConfig:n,subtitle:o}=RJ(t.title);bn(r)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),r)),bn(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),bn(o)?delete t.title:t.title=o}function OSr(t,r,n,o){let i=o?t[r][o]:t[r];r==="view"&&(n="cell");let s=Object.assign(Object.assign({},i),t.style[n??r]);bn(s)||(t.style[n??r]=s),o||delete t[r]}var KJ,ESr,TSr,Qv,xyt,vyt,DSr,NSr,MSr,L2=N(()=>{"use strict";So();ir();M$();dyt();hyt();K$();ha();ha();wi();eO();FA();W$();bt();KJ=20,ESr={continuousWidth:200,continuousHeight:200,step:KJ},TSr={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:ESr,mark:Agt,arc:{},area:{},bar:Dgt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Ngt,rule:{color:"black"},square:{},text:{color:"black"},tick:Mgt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:M0t,projection:{},legend:gyt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:yyt,style:{},title:{},facet:{spacing:vSe},concat:{spacing:vSe}},Qv=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],xyt={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},vyt={blue:Qv[0],orange:Qv[1],red:Qv[2],teal:Qv[3],green:Qv[4],yellow:Qv[5],purple:Qv[6],pink:Qv[7],brown:Qv[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};DSr=["view",...D2e],NSr=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],MSr=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Tgt)});function Jv(t){return"layer"in t}var wSe=N(()=>{"use strict"});function _Se(t){return"repeat"in t}function _yt(t){return!Bt(t.repeat)&&t.repeat.layer}var QJ=N(()=>{"use strict";ir()});var rO=N(()=>{"use strict";XJ();Kv();wSe();QJ();A2()});var nO,SSe=N(()=>{"use strict";So();cn();XJ();Kv();wSe();QJ();A2();nO=class{map(r,n){return Xv(r)?this.mapFacet(r,n):_Se(r)?this.mapRepeat(r,n):tO(r)?this.mapHConcat(r,n):P2(r)?this.mapVConcat(r,n):Q$(r)?this.mapConcat(r,n):this.mapLayerOrUnit(r,n)}mapLayerOrUnit(r,n){if(Jv(r))return this.mapLayer(r,n);if(Fa(r))return this.mapUnit(r,n);throw new Error(it.invalidSpec(r))}mapLayer(r,n){return Object.assign(Object.assign({},r),{layer:r.layer.map(o=>this.mapLayerOrUnit(o,n))})}mapHConcat(r,n){return Object.assign(Object.assign({},r),{hconcat:r.hconcat.map(o=>this.map(o,n))})}mapVConcat(r,n){return Object.assign(Object.assign({},r),{vconcat:r.vconcat.map(o=>this.map(o,n))})}mapConcat(r,n){let{concat:o}=r,i=Pt(r,["concat"]);return Object.assign(Object.assign({},i),{concat:o.map(s=>this.map(s,n))})}mapFacet(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}mapRepeat(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}}});function PSr(t){return t in RSr}function Syt(t,r){var n,o;let i=r==="x"?"y":"radius",s=t[r],a=t[i];if(At(s)&&At(a))if(rb(s)==="quantitative"&&rb(a)==="quantitative"){if(s.stack)return r;if(a.stack)return i;let l=At(s)&&!!s.aggregate,u=At(a)&&!!a.aggregate;if(l!==u)return l?r:i;{let c=(n=s.scale)===null||n===void 0?void 0:n.type,f=(o=a.scale)===null||o===void 0?void 0:o.type;if(c&&c!=="linear")return i;if(f&&f!=="linear")return r}}else{if(rb(s)==="quantitative")return r;if(rb(a)==="quantitative")return i}else{if(rb(s)==="quantitative")return r;if(rb(a)==="quantitative")return i}}function BSr(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function JJ(t,r,n={}){let o=ql(t)?t.type:t;if(!LSr.has(o))return null;let i=Syt(r,"x")||Syt(r,"theta");if(!i)return null;let s=r[i],a=At(s)?vt(s,{}):void 0,l=BSr(i),u=r[l],c=At(u)?vt(u,{}):void 0;c===a&&(c=void 0,u=void 0,l=void 0);let f=Ygt.reduce((p,h)=>{if(h!=="tooltip"&&ab(r,h)){let m=r[h];for(let g of Mn(m)){let y=Kl(g);if(y.aggregate)continue;let b=vt(y,{});(!b||b!==c)&&p.push({channel:h,fieldDef:y})}}return p},[]),d;if(s.stack!==void 0?qy(s.stack)?d=s.stack?"zero":null:d=s.stack:f.length>0&&jSr.has(o)&&(d="zero"),!d||!PSr(d)||ZF(r)&&f.length===0)return null;if(s.scale&&s.scale.type&&s.scale.type!==Bi.LINEAR){if(n.disallowNonLinearStack)return null;st(it.cannotStackNonLinearScale(s.scale.type))}return Or(r[gl(i)])?(s.stack!==void 0&&st(it.cannotStackRangedMark(i)),null):(At(s)&&s.aggregate&&!qt(Lgt,s.aggregate)&&st(it.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:u?l:void 0,groupbyField:c,fieldChannel:i,impute:s.impute===null?!1:Df(o),stackBy:f,offset:d})}var RSr,LSr,jSr,CSe=N(()=>{"use strict";ir();Wv();Ir();Mr();Fc();cn();ha();wi();bt();RSr={zero:1,center:1,normalize:1};LSr=new Set([k2e,EA,CA,AF,TF,O$,R$,TA,oJ,F$]),jSr=new Set([EA,CA,k2e])});function $Sr(t){let{point:r,line:n}=t,o=Pt(t,["point","line"]);return nt(o).length>1?o:o.type}function zSr(t){for(let r of["line","area","rule","trail"])t[r]&&(t=Object.assign(Object.assign({},t),{[r]:kf(t[r],["point","line"])}));return t}function ESe(t,r={},n){return t.point==="transparent"?{opacity:0}:t.point?wo(t.point)?t.point:{}:t.point!==void 0?null:r.point||n.shape?wo(r.point)?r.point:{}:void 0}function Cyt(t,r={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:r.line?r.line===!0?{}:r.line:void 0}var eee,Eyt=N(()=>{"use strict";So();ir();ha();A2();CSe();bt();eee=class{constructor(){this.name="path-overlay"}hasMatchingType(r,n){if(Fa(r)){let{mark:o,encoding:i}=r,s=ql(o)?o:{type:o};switch(s.type){case"line":case"rule":case"trail":return!!ESe(s,n[s.type],i);case"area":return!!ESe(s,n[s.type],i)||!!Cyt(s,n[s.type])}}return!1}run(r,n,o){let{config:i}=n,{selection:s,projection:a,encoding:l,mark:u}=r,c=Pt(r,["selection","projection","encoding","mark"]),f=ql(u)?u:{type:u},d=ESe(f,i[f.type],l),p=f.type==="area"&&Cyt(f,i[f.type]),h=[Object.assign(Object.assign({},s?{selection:s}:{}),{mark:$Sr(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:kf(l,["shape"])})],m=JJ(f,l),g=l;if(m){let{fieldChannel:y,offset:b}=m;g=Object.assign(Object.assign({},l),{[y]:Object.assign(Object.assign({},l[y]),b?{stack:b}:{})})}return p&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},E2(f,["clip","interpolate","tension","tooltip"])),p),encoding:g})),d&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},E2(f,["clip","tooltip"])),d),encoding:g})),o(Object.assign(Object.assign({},c),{layer:h}),Object.assign(Object.assign({},n),{config:zSr(i)}))}}});var tee,Tyt=N(()=>{"use strict";So();Ir();Mr();cn();A2();bt();tee=class{constructor(){this.name="RangeStep"}hasMatchingType(r){var n;if(Fa(r)&&r.encoding)for(let o of Ts){let i=r.encoding[o];if(i&&Or(i)&&!((n=i?.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(r){var n;let o={},i=Object.assign({},r.encoding);for(let s of Ts){let a=Yl(s),l=i[s];if(l&&Or(l)&&!((n=l?.scale)===null||n===void 0)&&n.rangeStep){let{scale:u}=l,c=Pt(l,["scale"]),f=u,{rangeStep:d}=f,p=Pt(f,["rangeStep"]);o[a]={step:u.rangeStep},st(it.RANGE_STEP_DEPRECATED),i=Object.assign(Object.assign({},i),{[s]:Object.assign(Object.assign({},c),bn(p)?{}:{scale:p})})}}return Object.assign(Object.assign(Object.assign({},o),r),{encoding:i})}}});function Iyt(t,r){return r?ib(t)?Nyt(t,r):Dyt(t,r):t}function ree(t,r){return r?Nyt(t,r):t}function TSe(t,r,n){let o=r[t];if(V0t(o)){if(o.repeat in n)return Object.assign(Object.assign({},r),{[t]:n[o.repeat]});st(it.noSuchRepeatedValue(o.repeat));return}return r}function Dyt(t,r){if(t=TSe("field",t,r),t!==void 0){if(t===null)return null;if(Q2e(t)&&bl(t.sort)){let n=TSe("field",t.sort,r);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function Ayt(t,r){if(At(t))return Dyt(t,r);{let n=TSe("datum",t,r);return n!==t&&!n.type&&(n.type="nominal"),n}}function kyt(t,r){if(Or(t)){let n=Ayt(t,r);if(n)return n;if(YF(t))return{condition:t.condition}}else{if(DJ(t)){let n=Ayt(t.condition,r);if(n)return Object.assign(Object.assign({},t),{condition:n});{let{condition:o}=t;return Pt(t,["condition"])}}return t}}function Nyt(t,r){let n={};for(let o in t)if(Vd(t,o)){let i=t[o];if(Bt(i))n[o]=i.map(s=>kyt(s,r)).filter(s=>s);else{let s=kyt(i,r);s!==void 0&&(n[o]=s)}}return n}var Myt=N(()=>{"use strict";So();ir();Mr();cn();tg();Kv()});var nee,Fyt=N(()=>{"use strict";Xl();Ir();Mr();cn();A2();nee=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(r){if(Fa(r)){let{encoding:n,mark:o}=r;if(o==="line")for(let i of qgt){let s=Kd(i),a=n[s];if(n[i]&&(At(a)&&!Zi(a.bin)||Lf(a)))return!0}}return!1}run(r,n,o){let{encoding:i}=r;return st(it.lineWithRange(!!i.x2,!!i.y2)),o(Object.assign(Object.assign({},r),{mark:"rule"}),n)}}});function Oyt(t){let{parentEncoding:r,encoding:n}=t;if(r&&n){let i=nt(r).reduce((s,a)=>(n[a]&&s.push(a),s),[]);i.length>0&&st(it.encodingOverridden(i))}let o=Object.assign(Object.assign({},r??{}),n??{});return bn(o)?void 0:o}function Ryt(t){let{parentProjection:r,projection:n}=t;return r&&n&&st(it.projectionOverridden({parentProjection:r,projection:n})),n??r}var oee,Pyt=N(()=>{"use strict";So();ir();Ir();fSe();mSe();WJ();Fc();cn();Kv();SSe();QJ();A2();bt();Eyt();Tyt();Myt();Fyt();oee=class extends nO{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[ryt,ayt,uyt,new eee,new nee,new tee]}map(r,n){if(Fa(r)){let o=ab(r.encoding,Nf),i=ab(r.encoding,Mf),s=ab(r.encoding,IF);if(o||i||s)return this.mapFacetedUnit(r,n)}return super.map(r,n)}mapUnit(r,n){let{parentEncoding:o,parentProjection:i}=n,s=Object.assign(Object.assign({},r),{encoding:ree(r.encoding,n.repeater)});if(o||i)return this.mapUnitWithParentEncodingOrProjection(s,n);let a=this.mapLayerOrUnit.bind(this);for(let l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(r,n){return _yt(r)?this.mapLayerRepeat(r,n):this.mapNonLayerRepeat(r,n)}mapLayerRepeat(r,n){let{repeat:o,spec:i}=r,s=Pt(r,["repeat","spec"]),{row:a,column:l,layer:u}=o,{repeater:c={},repeaterPrefix:f=""}=n;return a||l?this.mapRepeat(Object.assign(Object.assign({},r),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),l?{column:l}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},s),{layer:u.map(d=>{let p=Object.assign(Object.assign({},c),{layer:d}),h=(i.name||"")+f+`child__layer_${kn(d)}`,m=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(r,n){var o;let{repeat:i,spec:s,data:a}=r,l=Pt(r,["repeat","spec","data"]);!Bt(i)&&r.columns&&(r=kf(r,["columns"]),st(it.columnsNotSupportByRowCol("repeat")));let u=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!Bt(i)&&i.row||[c?c.row:null],p=!Bt(i)&&i.column||[c?c.column:null],h=Bt(i)&&i||[c?c.repeat:null];for(let g of h)for(let y of d)for(let b of p){let x={repeat:g,row:y,column:b,layer:c.layer},v=(s.name||"")+f+"child__"+(Bt(i)?`${kn(g)}`:(i.row?`row_${kn(y)}`:"")+(i.column?`column_${kn(b)}`:"")),w=this.map(s,Object.assign(Object.assign({},n),{repeater:x,repeaterPrefix:v}));w.name=v,u.push(kf(w,["data"]))}let m=Bt(i)?r.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(o=s.data)!==null&&o!==void 0?o:a,align:"all"},l),{columns:m,concat:u})}mapFacet(r,n){let{facet:o}=r;return ib(o)&&r.columns&&(r=kf(r,["columns"]),st(it.columnsNotSupportByRowCol("facet"))),super.mapFacet(r,n)}mapUnitWithParentEncodingOrProjection(r,n){let{encoding:o,projection:i}=r,{parentEncoding:s,parentProjection:a,config:l}=n,u=Ryt({parentProjection:a,projection:i}),c=Oyt({parentEncoding:s,encoding:ree(o,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},r),u?{projection:u}:{}),c?{encoding:c}:{}),{config:l})}mapFacetedUnit(r,n){let o=r.encoding,{row:i,column:s,facet:a}=o,l=Pt(o,["row","column","facet"]),{mark:u,width:c,projection:f,height:d,view:p,selection:h,encoding:m}=r,g=Pt(r,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:y,layout:b}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),x=ree(l,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),b),{facet:y,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{width:c}:{}),d?{height:d}:{}),p?{view:p}:{}),f?{projection:f}:{}),{mark:u,encoding:x}),h?{selection:h}:{})}),n)}getFacetMappingAndLayout(r,n){var o;let{row:i,column:s,facet:a}=r;if(i||s){a&&st(it.facetChannelDropped([...i?[Nf]:[],...s?[Mf]:[]]));let l={},u={};for(let c of[Nf,Mf]){let f=r[c];if(f){let{align:d,center:p,spacing:h,columns:m}=f,g=Pt(f,["align","center","spacing","columns"]);l[c]=g;for(let y of["align","center","spacing"])f[y]!==void 0&&(u[y]=(o=u[y])!==null&&o!==void 0?o:{},u[y][c]=f[y])}}return{facetMapping:l,layout:u}}else{let{align:l,center:u,spacing:c,columns:f}=a,d=Pt(a,["align","center","spacing","columns"]);return{facetMapping:Iyt(d,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},l?{align:l}:{}),u?{center:u}:{}),c?{spacing:c}:{}),f?{columns:f}:{})}}}mapLayer(r,n){var{parentEncoding:o,parentProjection:i}=n,s=Pt(n,["parentEncoding","parentProjection"]);let{encoding:a,projection:l}=r,u=Pt(r,["encoding","projection"]),c=Object.assign(Object.assign({},s),{parentEncoding:Oyt({parentEncoding:o,encoding:a}),parentProjection:Ryt({parentProjection:i,projection:l})});return super.mapLayer(u,c)}}});function iee(t,r){r===void 0&&(r=ZJ(t.config));let n=VSr(t,r),{width:o,height:i}=t,s=GSr(n,{width:o,height:i,autosize:t.autosize},r);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}function VSr(t,r={}){return USr.map(t,{config:r})}function Lyt(t){return pr(t)?{type:t}:t??{}}function GSr(t,r,n){let{width:o,height:i}=r,s=Fa(t)||Jv(t),a={};s?o=="container"&&i=="container"?(a.type="fit",a.contains="padding"):o=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(o=="container"&&(st(it.containerSizeNonSingle("width")),o=void 0),i=="container"&&(st(it.containerSizeNonSingle("height")),i=void 0));let l=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?Lyt(n.autosize):{}),Lyt(t.autosize));if(l.type==="fit"&&!s&&(st(it.FIT_NON_SINGLE),l.type="pad"),o=="container"&&!(l.type=="fit"||l.type=="fit-x")&&st(it.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(l.type=="fit"||l.type=="fit-y")&&st(it.containerSizeNotCompatibleWithAutosize("height")),!Gv(l,{type:"pad"}))return l}var USr,ASe=N(()=>{"use strict";ir();L2();cn();rO();bt();Pyt();USr=new oee});function jyt(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function Byt(t){return t?`fit-${k2(t)}`:"fit"}function kSe(t){return WSr.reduce((r,n)=>(t&&t[n]!==void 0&&(r[n]=t[n]),r),{})}var WSr,$yt=N(()=>{"use strict";Ir();WSr=["background","padding"]});function e1(t){return{explicit:!0,value:t}}function $u(t){return{explicit:!1,value:t}}function see(t){return(r,n,o,i)=>{let s=t(r.value,n.value);return s>0?r:s<0?n:oO(r,n,o,i)}}function oO(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingProperty(n,o,t.value,r.value)),t}function $f(t,r,n,o,i=oO){return t===void 0||t.value===void 0?r:t.explicit&&!r.explicit?t:r.explicit&&!t.explicit?r:Gv(t.value,r.value)?t:i(t,r,n,o)}var Bu,Oc=N(()=>{"use strict";cn();bt();Bu=class t{constructor(r={},n={}){this.explicit=r,this.implicit=n}clone(){return new t(sr(this.explicit),sr(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(r){return Fn(this.explicit[r],this.implicit[r])}getWithExplicit(r){return this.explicit[r]!==void 0?{explicit:!0,value:this.explicit[r]}:this.implicit[r]!==void 0?{explicit:!1,value:this.implicit[r]}:{explicit:!1,value:void 0}}setWithExplicit(r,n){n.value!==void 0&&this.set(r,n.value,n.explicit)}set(r,n,o){return delete this[o?"implicit":"explicit"][r],this[o?"explicit":"implicit"][r]=n,this}copyKeyFromSplit(r,n){n.explicit[r]!==void 0?this.set(r,n.explicit[r],!0):n.implicit[r]!==void 0&&this.set(r,n.implicit[r],!1)}copyKeyFromObject(r,n){n[r]!==void 0&&this.set(r,n[r],!0)}copyAll(r){for(let n of nt(r.combine())){let o=r.getWithExplicit(n);this.setWithExplicit(n,o)}}}});var aee,zyt=N(()=>{"use strict";Oc();aee=class extends Bu{constructor(r={},n={},o=!1){super(r,n),this.explicit=r,this.implicit=n,this.parseNothing=o}clone(){let r=super.clone();return r.parseNothing=this.parseNothing,r}}});function j2(t){return"url"in t}function iO(t){return"values"in t}function lee(t){return"name"in t&&!j2(t)&&!iO(t)&&!lb(t)}function lb(t){return t&&(ISe(t)||DSe(t)||e6(t))}function ISe(t){return"sequence"in t}function DSe(t){return"sphere"in t}function e6(t){return"graticule"in t}var zs,sO,ub=N(()=>{"use strict";zs="main",sO="raw"});function NSe(t){return"filter"in t}function Uyt(t){return t?.stop!==void 0}function Vyt(t){return"lookup"in t}function Gyt(t){return"data"in t}function Wyt(t){return"selection"in t}function qyt(t){return"pivot"in t}function Hyt(t){return"density"in t}function Yyt(t){return"quantile"in t}function Xyt(t){return"regression"in t}function Kyt(t){return"loess"in t}function Zyt(t){return"sample"in t}function Qyt(t){return"window"in t}function Jyt(t){return"joinaggregate"in t}function ebt(t){return"flatten"in t}function tbt(t){return"calculate"in t}function rbt(t){return"bin"in t}function nbt(t){return"impute"in t}function obt(t){return"timeUnit"in t}function ibt(t){return"aggregate"in t}function sbt(t){return"stack"in t}function abt(t){return"fold"in t}function lbt(t){return t.map(r=>NSe(r)?{filter:I$(r.filter,T0t)}:r)}var t6=N(()=>{"use strict";KQ();DA()});function rh(t,r,n,o){let i=YF(r)&&r.condition,s=o(r);if(i){let l=Mn(i).map(u=>{let c=o(u),f=U0t(u)?uee(t,u.selection):jA(t,u.test);return Object.assign({test:f},c)});return{[n]:[...l,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}var PA=N(()=>{"use strict";ir();Mr();cee();LA()});function B2(t,r="text"){let n=t.encoding[r];return rh(t,n,r,o=>aO(o,t.config))}function aO(t,r,n="datum"){if(t){if(ju(t))return mo(t.value);if(Or(t)){let{format:o,formatType:i}=KF(t);return VF({fieldOrDatumDef:t,format:o,formatType:i,expr:n,config:r})}}}var lO=N(()=>{"use strict";Mr();Po();ob();PA()});function uO(t,r={}){let{encoding:n,markDef:o,config:i,stack:s}=t,a=n.tooltip;if(Bt(a))return{tooltip:MSe({tooltip:a},s,i,r)};{let l=r.reactiveGeom?"datum.datum":"datum";return rh(t,a,"tooltip",u=>{let c=aO(u,i,l);if(c)return c;if(u===null)return;let f=ln("tooltip",o,i);if(f===!0&&(f={content:"encoding"}),pr(f))return{value:f};if(wo(f))return f.content==="encoding"?MSe(n,s,i,r):{signal:l}})}}function FSe(t,r,n,{reactiveGeom:o}={}){let i={},s=o?"datum.datum":"datum",a=[];function l(c,f){let d=Kd(f),p=ga(c)?c:Object.assign(Object.assign({},c),{type:t[d].type}),h=Mn(th(p,n,{allowDisabling:!1})).join(", "),m;if(yl(f)){let g=f==="x"?"x2":"y2",y=Kl(t[g]);if(Zi(p.bin)&&y){let b=vt(p,{expr:s}),x=vt(y,{expr:s}),{format:v,formatType:w}=KF(p);m=GF(b,x,v,w,n),i[g]=!0}else if(r&&r.fieldChannel===f&&r.offset==="normalize"){let{format:b,formatType:x}=KF(p);m=VF({fieldOrDatumDef:p,format:b,formatType:x,expr:s,config:n,normalizeStack:!0}).signal}}m=m??aO(p,n,s).signal,a.push({channel:f,key:h,value:m})}H$(t,(c,f)=>{At(c)?l(c,f):XF(c)&&l(c.condition,f)});let u={};for(let{channel:c,key:f,value:d}of a)!i[c]&&!u[f]&&(u[Jr(f)]=d);return u}function MSe(t,r,n,{reactiveGeom:o}={}){let i=FSe(t,r,n,{reactiveGeom:o}),s=D$(i).map(({key:a,value:l})=>`${a}: ${l}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}var r6=N(()=>{"use strict";ir();Xl();Ir();Mr();Fc();bt();Po();ob();PA();lO()});function OSe(t){let{markDef:r,config:n}=t,o=ln("aria",r,n);return o===!1?{}:Object.assign(Object.assign(Object.assign({},o?{aria:o}:{}),qSr(t)),HSr(t))}function qSr(t){let{mark:r,markDef:n,config:o}=t;if(o.aria===!1)return{};let i=ln("ariaRoleDescription",n,o);return i!=null?{ariaRoleDescription:{value:i}}:r in v0t?{}:{ariaRoleDescription:{value:r}}}function HSr(t){let{encoding:r,markDef:n,config:o,stack:i}=t,s=r.description;if(s)return rh(t,s,"description",u=>aO(u,t.config));let a=ln("description",n,o);if(a!=null)return{description:mo(a)};if(o.aria===!1)return{};let l=FSe(r,i,o);if(!bn(l))return{description:{signal:D$(l).map(({key:u,value:c})=>`${u} + ": " + (${c})`).join(' + "; " + ')}}}var RSe=N(()=>{"use strict";bt();Po();ho();PA();lO();r6()});function Zo(t,r,n={}){let{markDef:o,encoding:i,config:s}=r,{vgChannel:a}=n,{defaultRef:l,defaultValue:u}=n;l===void 0&&(u=u??ln(t,o,s,{vgChannel:a,ignoreVgConfig:!0}),u!==void 0&&(l=mo(u)));let c=i[t];return rh(r,c,a??t,f=>X2e({channel:t,channelDef:f,markDef:o,config:s,scaleName:r.scaleName(t),scale:r.getScaleComponent(t),stack:null,defaultRef:l}))}var cO=N(()=>{"use strict";Po();PA();M2()});function fO(t,r={filled:void 0}){var n,o,i,s;let{markDef:a,encoding:l,config:u}=t,{type:c}=a,f=(n=r.filled)!==null&&n!==void 0?n:ln("filled",a,u),d=qt(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,p=(i=(o=ln(f===!0?"color":void 0,a,u,{vgChannel:"fill"}))!==null&&o!==void 0?o:u.mark[f===!0&&"color"])!==null&&i!==void 0?i:d,h=(s=ln(f===!1?"color":void 0,a,u,{vgChannel:"stroke"}))!==null&&s!==void 0?s:u.mark[f===!1&&"color"],m=f?"fill":"stroke",g=Object.assign(Object.assign({},p?{fill:mo(p)}:{}),h?{stroke:mo(h)}:{});return a.color&&(f?a.fill:a.stroke)&&st(it.droppingColor("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Zo("color",t,{vgChannel:m,defaultValue:f?p:h})),Zo("fill",t,{defaultValue:l.fill?p:void 0})),Zo("stroke",t,{defaultValue:l.stroke?h:void 0}))}var fee=N(()=>{"use strict";cn();bt();Po();cO()});function $2(t,r){let n=Hgt(t),o=r[n];if(o)return o}var dee=N(()=>{"use strict";Ir()});function Ji(t,r,{defaultPos:n,vgChannel:o,isMidPoint:i}){let{encoding:s,markDef:a,config:l,stack:u}=r,c=s[t],f=s[gl(t)],d=r.scaleName(t),p=r.getScaleComponent(t),h=$2(t,a),m=n6({model:r,defaultPos:n,channel:t,scaleName:d,scale:p}),g=!c&&yl(t)&&(s.latitude||s.longitude)?{field:r.getName(t)}:YSr({channel:t,channelDef:c,channel2Def:f,markDef:a,config:l,isMidPoint:i,scaleName:d,scale:p,stack:u,offset:h,defaultRef:m});return g?{[o||t]:g}:void 0}function YSr(t){let{channel:r,channelDef:n,isMidPoint:o,scaleName:i,stack:s,offset:a,markDef:l,config:u}=t;if(Or(n)&&s&&r===s.fieldChannel){if(At(n)){let c=F2({channel:r,fieldDef:n,isMidPoint:o,markDef:l,stack:s,config:u});if(c!==void 0)return zF({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:a})}return eb(n,i,{suffix:"end"},{offset:a})}return UF(t)}function n6({model:t,defaultPos:r,channel:n,scaleName:o,scale:i}){let{markDef:s,config:a}=t;return()=>{let l=Kd(n),u=Jp(n),c=ln(n,s,a,{vgChannel:u});if(c!==void 0)return NA(n,c);switch(r){case"zeroOrMin":case"zeroOrMax":if(o){let f=i.get("type");if(!qt([Bi.LOG,Bi.TIME,Bi.UTC],f)){if(i.domainDefinitelyIncludesZero())return{scale:o,value:0}}}if(r==="zeroOrMin")return l==="y"?{field:{group:"height"}}:{value:0};switch(l){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let f=t[Yl(n)];return Object.assign(Object.assign({},f),{mult:.5})}}}}var o6=N(()=>{"use strict";Ir();Mr();wi();bt();Po();dee();M2()});function pee(t,r,n,o="middle"){if(t==="radius"||t==="theta")return Jp(t);let s=ln(t==="x"?"align":"baseline",r,n);return t==="x"?XSr[s||(o==="top"?"left":"center")]:KSr[s||o]}var XSr,KSr,PSe=N(()=>{"use strict";Ir();Po();XSr={left:"x",center:"xc",right:"x2"},KSr={top:"y",middle:"yc",bottom:"y2"}});function z2(t,r,{defaultPos:n,defaultPos2:o,range:i}){return i?i6(t,r,{defaultPos:n,defaultPos2:o}):Ji(t,r,{defaultPos:n})}function i6(t,r,{defaultPos:n,defaultPos2:o}){let{markDef:i,config:s}=r,a=gl(t),l=Yl(t),u=ZSr(r,o,a),c=u[l]?pee(t,i,s):Jp(t);return Object.assign(Object.assign({},Ji(t,r,{defaultPos:n,vgChannel:c})),u)}function ZSr(t,r,n){let{encoding:o,mark:i,markDef:s,stack:a,config:l}=t,u=Kd(n),c=Yl(n),f=Jp(n),d=o[u],p=t.scaleName(u),h=t.getScaleComponent(u),m=n in o||n in s?$2(n,t.markDef):$2(u,t.markDef);if(!d&&(n==="x2"||n==="y2")&&(o.latitude||o.longitude))return{[f]:{field:t.getName(n)}};let g=QSr({channel:n,channelDef:d,channel2Def:o[n],markDef:s,config:l,scaleName:p,scale:h,stack:a,offset:m,defaultRef:void 0});return g!==void 0?{[f]:g}:hee(n,s)||hee(n,{[n]:q$(n,s,l.style),[c]:q$(c,s,l.style)})||hee(n,l[i])||hee(n,l.mark)||{[f]:n6({model:t,defaultPos:r,channel:n,scaleName:p,scale:h})()}}function QSr({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c}){return Or(r)&&l&&t.charAt(0)===l.fieldChannel.charAt(0)?eb(r,s,{suffix:"start"},{offset:u}):UF({channel:t,channelDef:n,scaleName:s,scale:a,stack:l,markDef:o,config:i,offset:u,defaultRef:c})}function hee(t,r){let n=Yl(t),o=Jp(t);if(r[o]!==void 0)return{[o]:NA(t,r[o])};if(r[t]!==void 0)return{[o]:NA(t,r[t])};if(r[n])return{[n]:NA(t,r[n])}}var mee=N(()=>{"use strict";Ir();Mr();Po();dee();PSe();o6();M2()});function zf(t,r,n){var o,i,s,a;let{config:l,encoding:u,markDef:c,stack:f}=t,d=gl(r),p=Yl(r),h=u[r],m=u[d],g=t.getScaleComponent(r),y=g?g.get("type"):void 0,b=t.scaleName(r),x=c.orient,v=(i=(o=u[p])!==null&&o!==void 0?o:u.size)!==null&&i!==void 0?i:ln("size",c,l,{vgChannel:p}),w=n==="bar"&&(r==="x"?x==="vertical":x==="horizontal");if(At(h)&&(Sn(h.bin)||Zi(h.bin)||h.timeUnit&&!m)&&!v&&!Qi(y)){let _=F2({channel:r,fieldDef:h,stack:f,markDef:c,config:l}),S=(s=t.component.axes[r])===null||s===void 0?void 0:s[0],C=(a=S?.get("translate"))!==null&&a!==void 0?a:.5;return cbt({fieldDef:h,fieldDef2:m,channel:r,markDef:c,scaleName:b,band:_,axisTranslate:C,spacing:yl(r)?ln("binSpacing",c,l):void 0,reverse:g.get("reverse"),config:l})}else return(Or(h)&&Qi(y)||w)&&!m?eCr(n,h,r,t):i6(r,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function JSr(t,r,n,o,i,s){if(o){let u=o.get("type");if(u==="point"||u==="band"){if(i[t].discreteBandSize!==void 0)return{value:i[t].discreteBandSize};if(u===Bi.POINT){let c=o.get("range");return Lu(c)&&_o(c.step)?{value:c.step-2}:{value:KJ-2}}else return{scale:n,band:s}}else return{value:i[t].continuousBandSize}}let a=OA(i.view,r),l=Fn(i[t].discreteBandSize,a-2);return l!==void 0?{value:l}:void 0}function eCr(t,r,n,o){var i;let{markDef:s,encoding:a,config:l,stack:u}=o,c=s.orient,f=o.scaleName(n),d=o.getScaleComponent(n),p=Yl(n),h=gl(n),m=c==="horizontal"&&n==="y"||c==="vertical"&&n==="x",g=ln(m?"size":p,s,l,{vgChannel:p}),y;(a.size||g!==void 0)&&(m?y=Zo("size",o,{vgChannel:p,defaultValue:g}):st(it.cannotApplySizeToNonOrientedMark(s.type)));let b=(i=Or(r)?F2({channel:n,fieldDef:r,markDef:s,stack:u,config:l}):void 0)!==null&&i!==void 0?i:1;y=y||{[p]:JSr(t,p,f,d,l,b)};let x=d?.get("type")!=="band"||!("band"in y[p]),v=pee(n,s,l,x?"middle":"top"),w=$2(n,s),_=UF({channel:n,channelDef:r,markDef:s,config:l,scaleName:f,scale:d,stack:u,offset:w,defaultRef:n6({model:o,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:x?.5:(1-b)/2});if(p)return Object.assign({[v]:_},y);{let S=Jp(h),C=y[p],E=w?Object.assign(Object.assign({},C),{offset:w}):C;return{[v]:_,[S]:Bt(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:E})]:Object.assign(Object.assign({},_),{offset:E})}}}function s6(t,r,n,o,i){if(M2e(t))return 0;let s=t==="x"||t==="y2"?-r/2:r/2;if(rr(n)){let a=R2(i);return{signal:`${n.signal} ? ${o-s}${a?"-"+a:""} : ${o+s}${a?"+"+a:""}`}}else{if(rr(i)){let a=o+(n?-s:s);return{signal:`${a||""}${n?" - ":a?" + ":""}${i.signal}`}}return i=i||0,o+(n?-i-s:+i+s)}}function cbt({fieldDef:t,fieldDef2:r,channel:n,band:o,scaleName:i,markDef:s,spacing:a=0,axisTranslate:l,reverse:u,config:c}){let f=gl(n),d=Jp(n),p=Jp(f),h=$2(n,s);if(Sn(t.bin)||t.timeUnit)return{[p]:ubt({channel:n,fieldDef:t,scaleName:i,markDef:s,band:(1-o)/2,offset:s6(f,a,u,l,h),config:c}),[d]:ubt({channel:n,fieldDef:t,scaleName:i,markDef:s,band:1-(1-o)/2,offset:s6(n,a,u,l,h),config:c})};if(Zi(t.bin)){let m=eb(t,i,{},{offset:s6(f,a,u,l,h)});if(At(r))return{[p]:m,[d]:eb(r,i,{},{offset:s6(n,a,u,l,h)})};if(D2(t.bin)&&t.bin.step)return{[p]:m,[d]:{signal:`scale("${i}", ${vt(t,{expr:"datum"})} + ${t.bin.step})`,offset:s6(n,a,u,l,h)}}}st(it.channelRequiredForBinned(f))}function ubt({channel:t,fieldDef:r,scaleName:n,markDef:o,band:i,offset:s,config:a}){let l=zF({scaleName:n,fieldOrDatumDef:r,band:i,offset:s});return Y2e({fieldDef:r,channel:t,markDef:o,ref:l,config:a})}var LSe=N(()=>{"use strict";ir();Xl();Ir();Mr();L2();cn();wi();bt();ho();Po();cO();dee();PSe();o6();mee();M2()});function es(t,r){let{fill:n=void 0,stroke:o=void 0}=r.color==="include"?fO(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rCr(t.markDef,r)),fbt(t,"fill",n)),fbt(t,"stroke",o)),Zo("opacity",t)),Zo("fillOpacity",t)),Zo("strokeOpacity",t)),Zo("strokeWidth",t)),Zo("strokeDash",t)),uO(t)),B2(t,"href")),OSe(t))}function fbt(t,r,n){let{config:o,mark:i,markDef:s}=t;if(ln("invalid",s,o)==="hide"&&n&&!Df(i)){let l=nCr(t,{invalid:!0,channels:I2});if(l)return{[r]:[{test:l,value:null},...Mn(n)]}}return n?{[r]:n}:{}}function rCr(t,r){return x0t.reduce((n,o)=>(!tCr.has(o)&&t[o]!==void 0&&r[o]!=="ignore"&&(n[o]=mo(t[o])),n),{})}function nCr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&ma(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>U$(a,r)).join(` ${s} `)}}var tCr,dbt=N(()=>{"use strict";ir();Ir();ha();wi();bt();ho();Po();RSe();fee();cO();lO();r6();M2();fee();PA();cO();o6();mee();LSe();lO();r6();tCr=new Set(["aria"])});function dO(t){let{config:r,markDef:n}=t;if(ln("invalid",n,r)){let i=oCr(t,{channels:Ts});if(i)return{defined:{signal:i}}}return{}}function oCr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&ma(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>U$(a,r)).join(` ${s} `)}}function gee(t,r){if(r!==void 0)return{[t]:mo(r)}}var pbt=N(()=>{"use strict";Ir();wi();bt();Po();M2()});var Rc=N(()=>{"use strict";dbt();fee();PA();pbt();cO();o6();mee();LSe();lO();r6();RSe()});var jSe,iCr,yee,BSe=N(()=>{"use strict";cn();ha();Rc();jSe="voronoi",iCr={has:t=>t.type!=="interval"&&t.nearest,parse:(t,r)=>{if(r.events)for(let n of r.events)n.markname=t.getName(jSe)},marks:(t,r,n)=>{let{x:o,y:i}=r.project.hasChannel,s=t.mark;if(Df(s))return st(it.nearestNotSupportForContinuous(s)),n;let a={name:t.getName(jSe),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},uO(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:o||!i?"datum.datum.x || 0":"0"},y:{expr:i||!o?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},l=0,u=!1;return n.forEach((c,f)=>{var d;let p=(d=c.name)!==null&&d!==void 0?d:"";p===t.component.mark[0].name?l=f:p.indexOf(jSe)>=0&&(u=!0)}),u||n.splice(l+1,0,a),n}},yee=iCr});var Dr,fs,ro=N(()=>{"use strict";bt();Dr=class{constructor(r,n){this.debugName=n,this._children=[],this._parent=null,r&&(this.parent=r)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(r){this._parent=r,r&&r.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(r,n){if(this._children.indexOf(r)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,r):this._children.push(r)}removeChild(r){let n=this._children.indexOf(r);return this._children.splice(n,1),n}remove(){let r=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,r++)}insertAsParentOf(r){let n=r.parent;n.removeChild(this),this.parent=n,r.parent=this}swapWithParent(){let r=this._parent,n=r.parent;for(let o of this._children)o.parent=r;this._children=[],r.removeChild(this),r.parent.removeChild(r),this.parent=n,r.parent=this}},fs=class extends Dr{constructor(r,n,o,i){super(r,n),this.type=o,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){let r=new this.constructor;return r.debugName="clone_"+this.debugName,r._source=this._source,r._name="clone_"+this._name,r.type=this.type,r.refCounts=this.refCounts,r.refCounts[r._name]=0,r}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${C2e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(r){this._source=r}}});var oh,a6=N(()=>{"use strict";So();Ir();Mr();Zy();bt();ds();ro();oh=class t extends Dr{constructor(r,n){super(r),this.formula=n}clone(){return new t(null,sr(this.formula))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{let{field:l,timeUnit:u}=s,c=no(n)?n.encoding[gl(a)]:void 0,f=no(n)&&HF(a,s,c,n.stack,n.markDef,n.config);if(u){let d=vt(s,{forAs:!0});i[Tr({as:d,field:l,timeUnit:u})]=Object.assign({as:d,field:l,timeUnit:u},f?{band:!0}:{})}return i},{});return bn(o)?null:new t(r,o)}static makeFromTransform(r,n){let o=Object.assign({},n),{timeUnit:i}=o,s=Pt(o,["timeUnit"]),a=cs(i),l=Object.assign(Object.assign({},s),{timeUnit:a});return new t(r,{[Tr(l)]:l})}merge(r){this.formula=Object.assign({},this.formula);for(let n in r.formula)(!this.formula[n]||r.formula[n].band)&&(this.formula[n]=r.formula[n]);for(let n of r.children)r.removeChild(n),n.parent=this;r.remove()}producedFields(){return new Set(Zp(this.formula).map(r=>r.as))}dependentFields(){return new Set(Zp(this.formula).map(r=>r.field))}hash(){return`TimeUnit ${Tr(this.formula)}`}assemble(){let r=[];for(let n of Zp(this.formula)){let{field:o,as:i,timeUnit:s}=n,a=cs(s),{unit:l,utc:u}=a,c=Pt(a,["unit","utc"]);r.push(Object.assign(Object.assign(Object.assign(Object.assign({field:If(o),type:"timeunit"},l?{units:L$(l)}:{}),u?{timezone:"utc"}:{}),c),{as:[i,`${i}_end`]}))}return r}}});var t1,$Se,sCr,hbt,pO=N(()=>{"use strict";So();ir();Ir();cn();wi();bt();a6();t1="_tuple_fields",$Se=class{constructor(...r){this.items=r,this.hasChannel={},this.hasField={}}},sCr={has:()=>!0,parse:(t,r,n)=>{var o,i,s;let a=r.name,l=(o=r.project)!==null&&o!==void 0?o:r.project=new $Se,u={},c={},f=new Set,d=(p,h)=>{let m=h==="visual"?p.channel:p.field,g=kn(`${a}_${m}`);for(let y=1;f.has(g);y++)g=kn(`${a}_${m}_${y}`);return f.add(g),{[h]:g}};if(!n.fields&&!n.encodings){let p=t.config.selection[n.type];if(n.init)for(let h of Mn(n.init))for(let m of nt(h))Wgt(m)?(n.encodings||(n.encodings=[])).push(m):n.type==="interval"?(st('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=p.encodings):(n.fields||(n.fields=[])).push(m);else n.encodings=p.encodings,n.fields=p.fields}for(let p of(i=n.fields)!==null&&i!==void 0?i:[]){let h={type:"E",field:p};h.signals=Object.assign({},d(h,"data")),l.items.push(h),l.hasField[p]=h}for(let p of(s=n.encodings)!==null&&s!==void 0?s:[]){let h=t.fieldDef(p);if(h){let m=h.field;if(h.aggregate){st(it.cannotProjectAggregate(p,h.aggregate));continue}else if(!m){st(it.cannotProjectOnChannelWithoutField(p));continue}if(h.timeUnit){m=t.vgField(p);let g={timeUnit:h.timeUnit,as:m,field:h.field};c[Tr(g)]=g}if(!u[m]){let g="E";if(r.type==="interval"){let b=t.getScaleComponent(p).get("type");ma(b)&&(g="R")}else h.bin&&(g="R-RE");let y={field:m,channel:p,type:g};y.signals=Object.assign(Object.assign({},d(y,"data")),d(y,"visual")),l.items.push(u[m]=y),l.hasField[m]=l.hasChannel[p]=u[m]}}else st(it.cannotProjectOnChannelWithoutField(p))}if(n.init){let p=h=>l.items.map(m=>h[m.channel]!==void 0?h[m.channel]:h[m.field]);if(n.type==="interval")r.init=p(n.init);else{let h=Mn(n.init);r.init=h.map(p)}}bn(c)||(l.timeUnit=new oh(null,c))},signals:(t,r,n)=>{let o=r.name+t1;return n.filter(s=>s.name===o).length>0?n:n.concat({name:o,value:r.project.items.map(s=>{let{signals:a,hasLegend:l}=s,u=Pt(s,["signals","hasLegend"]);return u.field=If(u.field),u})})}},hbt=sCr});var aCr,bee,zSe=N(()=>{"use strict";ir();Uf();bt();BA();BSe();pO();eO();aCr={has:t=>t.type==="single"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!Z$(t.bind),parse:(t,r,n,o)=>{o.on||delete r.events,o.clear||delete r.clear},topLevelSignals:(t,r,n)=>{let o=r.name,i=r.project,s=r.bind,a=r.init&&r.init[0],l=yee.has(r)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,c)=>{var f,d;let p=kn(`${o}_${u.field}`);n.filter(m=>m.name===p).length||n.unshift(Object.assign(Object.assign({name:p},a?{init:U2(a[c])}:{value:null}),{on:r.events?[{events:r.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${Jr(u.field)}] : null`}]:[],bind:(d=(f=s[u.field])!==null&&f!==void 0?f:s[u.channel])!==null&&d!==void 0?d:s}))}),n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.filter(c=>c.name===o+xl)[0],a=o+t1,l=i.items.map(c=>kn(`${o}_${c.field}`)),u=l.map(c=>`${c} !== null`).join(" && ");return l.length&&(s.update=`${u} ? {fields: ${a}, values: [${l.join(", ")}]} : null`),delete s.value,delete s.on,n}},bee=aCr});var hO,lCr,xee,vee=N(()=>{"use strict";Uf();hO="_toggle",lCr={has:t=>t.type==="multi"&&!!t.toggle,signals:(t,r,n)=>n.concat({name:r.name+hO,value:!1,on:[{events:r.events,update:r.toggle}]}),modifyExpr:(t,r)=>{let n=r.name+xl,o=r.name+hO;return`${o} ? null : ${n}, `+(r.resolve==="global"?`${o} ? null : true, `:`${o} ? null : {unit: ${Vf(t)}}, `)+`${o} ? ${n} : null`}},xee=lCr});var uCr,mbt,gbt=N(()=>{"use strict";C2();ir();Uf();bt();zSe();vee();uCr={has:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,r,n)=>{n.clear&&(r.clear=pr(n.clear)?Af(n.clear,"scope"):n.clear)},topLevelSignals:(t,r,n)=>{if(bee.has(r))for(let o of r.project.items){let i=n.findIndex(s=>s.name===kn(`${r.name}_${o.field}`));i!==-1&&n[i].on.push({events:r.clear,update:"null"})}return n},signals:(t,r,n)=>{function o(i,s){i!==-1&&n[i].on&&n[i].on.push({events:r.clear,update:s})}if(r.type==="interval")for(let i of r.project.items){let s=n.findIndex(a=>a.name===i.signals.visual);if(o(s,"[0, 0]"),s===-1){let a=n.findIndex(l=>l.name===i.signals.data);o(a,"null")}}else{let i=n.findIndex(s=>s.name===r.name+xl);o(i,"null"),xee.has(r)&&(i=n.findIndex(s=>s.name===r.name+hO),o(i,"false"))}return n}},mbt=uCr});function l6(t,r){return`domain(${Jr(t.scaleName(r))})`}function USe(t){var r;return t.parent&&sh(t.parent)&&((r=!t.parent.parent)!==null&&r!==void 0?r:USe(t.parent.parent))}var cCr,ih,u6=N(()=>{"use strict";ir();Uf();Ir();cn();wi();ds();cCr={has:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,r)=>{let n=r.scales=[];for(let o of r.project.items){let i=o.channel;if(!Pu(i))continue;let s=t.getScaleComponent(i),a=s?s.get("type"):void 0;if(!s||!ma(a)){st(it.SCALE_BINDINGS_CONTINUOUS);continue}let l={selection:r.name,field:o.field};s.set("selectionExtent",l,!0),n.push(o)}},topLevelSignals:(t,r,n)=>{let o=r.scales.filter(a=>n.filter(l=>l.name===a.signals.data).length===0);if(!t.parent||USe(t)||o.length===0)return n;let i=n.filter(a=>a.name===r.name)[0],s=i.update;if(s.indexOf(wee)>=0)i.update=`{${o.map(a=>`${Jr(a.field)}: ${a.signals.data}`).join(", ")}}`;else{for(let a of o){let l=`${Jr(a.field)}: ${a.signals.data}`;s.indexOf(l)<0&&(s=`${s.substring(0,s.length-1)}, ${l}}`)}i.update=s}return n.concat(o.map(a=>({name:a.signals.data})))},signals:(t,r,n)=>{if(t.parent&&!USe(t))for(let o of r.scales){let i=n.filter(s=>s.name===o.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},ih=cCr});function xbt(t,r,n){var o;let i=(o=t.fieldDef(r))===null||o===void 0?void 0:o.field;cb(t,s=>{var a,l;let u=(a=s.project.hasField[i])!==null&&a!==void 0?a:s.project.hasChannel[r];if(u&&ybt.has(s)){let c=(l=n.get("selections"))!==null&&l!==void 0?l:[];c.push(s.name),n.set("selections",c,!1),u.hasLegend=!0}})}var ybt,bbt,VSe=N(()=>{"use strict";C2();ir();Uf();cn();eO();bt();pO();vee();ybt={has:t=>{let r=t.resolve==="global"&&t.bind&&Z$(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==Zv;return r&&!n&&st(it.LEGEND_BINDINGS_PROJECT_LENGTH),r&&n},parse:(t,r,n,o)=>{var i;if(o.on||delete r.events,o.clear||delete r.clear,o.on||o.clear){let l='event.item && indexof(event.item.mark.role, "legend") < 0';for(let u of r.events)u.filter=Mn((i=u.filter)!==null&&i!==void 0?i:[]),u.filter.indexOf(l)<0&&u.filter.push(l)}let s=YJ(r.bind)?r.bind.legend:"click",a=pr(s)?Af(s,"view"):Mn(s);r.bind={legend:{merge:a}}},topLevelSignals:(t,r,n)=>{let o=r.name,i=YJ(r.bind)&&r.bind.legend,s=a=>l=>{let u=sr(l);return u.markname=a,u};for(let a of r.project.items){if(!a.hasLegend)continue;let l=`${kn(a.field)}_legend`,u=`${o}_${l}`;if(n.filter(f=>f.name===u).length===0){let f=i.merge.map(s(`${l}_symbols`)).concat(i.merge.map(s(`${l}_labels`))).concat(i.merge.map(s(`${l}_entries`)));n.unshift(Object.assign(Object.assign({name:u},r.init?{}:{value:null}),{on:[{events:f,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.find(p=>p.name===o+xl),a=o+t1,l=i.items.filter(p=>p.hasLegend).map(p=>kn(`${o}_${kn(p.field)}_legend`)),c=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${a}, values: [${l.join(", ")}]} : null`;r.events&&l.length>0?s.on.push({events:l.map(p=>({signal:p})),update:c}):l.length>0&&(s.update=c,delete s.value,delete s.on);let f=n.find(p=>p.name===o+hO),d=YJ(r.bind)&&r.bind.legend;return f&&(r.events?f.on.push(Object.assign(Object.assign({},f.on[0]),{events:d})):f.on[0].events=d),n}},bbt=ybt});function vbt(t,r,n,o,i){var s;let a=r.name,l=a+wbt,u=a+_bt,c=n.channel,f=ih.has(r),d=i.filter(w=>w.name===n.signals[f?"data":"visual"])[0],p=t.getSizeSignalRef(o).signal,h=t.getScaleComponent(c),m=h.get("type"),g=f&&c===to?"-":"",y=`${l}.extent_${c}`,b=`${g}${u}.${c} / `+(f?`${p}`:`span(${y})`),v=`${f?m==="log"?"panLog":m==="pow"?"panPow":"panLinear":"panLinear"}(${y}, ${b}`+(f&&m==="pow"?`, ${(s=h.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";d.on.push({events:{signal:u},update:f?v:`clampRange(${v}, 0, ${p})`})}var wbt,_bt,fCr,Sbt,Cbt=N(()=>{"use strict";C2();Ir();_ee();u6();wbt="_translate_anchor",_bt="_translate_delta",fCr={has:t=>t.type==="interval"&&t.translate,signals:(t,r,n)=>{let o=r.name,i=ih.has(r),s=o+wbt,{x:a,y:l}=r.project.hasChannel,u=Af(r.translate,"scope");return i||(u=u.map(c=>(c.between[0].markname=o+$A,c))),n.push({name:s,value:{},on:[{events:u.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?", extent_x: "+(i?l6(t,to):`slice(${a.signals.visual})`):"")+(l!==void 0?", extent_y: "+(i?l6(t,pi):`slice(${l.signals.visual})`):"")+"}"}]},{name:o+_bt,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&vbt(t,r,a,"width",n),l!==void 0&&vbt(t,r,l,"height",n),n}},Sbt=fCr});function Ebt(t,r,n,o,i){var s;let a=r.name,l=n.channel,u=ih.has(r),c=i.filter(x=>x.name===n.signals[u?"data":"visual"])[0],f=t.getSizeSignalRef(o).signal,d=t.getScaleComponent(l),p=d.get("type"),h=u?l6(t,l):c.name,m=a+Abt,g=`${a}${Tbt}.${l}`,b=`${u?p==="log"?"zoomLog":p==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${g}, ${m}`+(u&&p==="pow"?`, ${(s=d.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";c.on.push({events:{signal:m},update:u?b:`clampRange(${b}, 0, ${f})`})}var Tbt,Abt,dCr,kbt,Ibt=N(()=>{"use strict";C2();ir();Ir();_ee();u6();Tbt="_zoom_anchor",Abt="_zoom_delta",dCr={has:t=>t.type==="interval"&&t.zoom,signals:(t,r,n)=>{let o=r.name,i=ih.has(r),s=o+Abt,{x:a,y:l}=r.project.hasChannel,u=Jr(t.scaleName(to)),c=Jr(t.scaleName(pi)),f=Af(r.zoom,"scope");return i||(f=f.map(d=>(d.markname=o+$A,d))),n.push({name:o+Tbt,on:[{events:f,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(d=>!!d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&Ebt(t,r,a,"width",n),l!==void 0&&Ebt(t,r,l,"height",n),n}},kbt=dCr});function mO(t,r){for(let n of pCr)n.has(t)&&r(n)}var pCr,GSe=N(()=>{"use strict";gbt();zSe();BSe();pO();u6();VSe();vee();Cbt();Ibt();pCr=[hbt,xee,ih,bbt,Sbt,kbt,bee,yee,mbt]});function U2(t,r=!0,n=jQ){if(Bt(t)){let o=t.map(i=>U2(i,r,n));return r?`[${o.join(", ")}]`:o}else if(Ky(t))return n(r?N2(t):c0t(t));return r?n(JSON.stringify(t)):t}function Dbt(t,r){return cb(t,(n,o)=>{let i=n.name,s=o.modifyExpr(t,n);r.push(...o.signals(t,n)),mO(n,a=>{a.signals&&(r=a.signals(t,n,r)),a.modifyExpr&&(s=a.modifyExpr(t,n,s))}),r.push({name:i+Pbt,on:[{events:{signal:n.name+xl},update:`modify(${Jr(n.name+ng)}, ${s})`}]})}),qSe(r)}function Nbt(t,r){if(t.component.selection&&nt(t.component.selection).length){let n=Jr(t.getName("cell"));r.unshift({name:"facet",value:{},on:[{events:Af("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return qSe(r)}function Mbt(t,r){let n=!1;return cb(t,(o,i)=>{let s=o.name,a=Jr(s+ng);if(r.filter(u=>u.name===s).length===0){let u=o.resolve==="global"?"union":o.resolve,c=o.type==="multi"?", true)":")";r.push({name:o.name,update:`${wee}(${a}, ${Jr(u)}${c}`})}n=!0,i.topLevelSignals&&(r=i.topLevelSignals(t,o,r)),mO(o,u=>{u.topLevelSignals&&(r=u.topLevelSignals(t,o,r))})}),n&&r.filter(i=>i.name==="unit").length===0&&r.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),qSe(r)}function Fbt(t,r){let n=[...r];return cb(t,o=>{let i={name:o.name+ng};if(o.init){let a=o.project.items.map(u=>{let{signals:c}=u;return Pt(u,["signals"])}),l=o.init.map(u=>U2(u,!1));i.values=o.type==="interval"?[{unit:Vf(t,{escape:!1}),fields:a,values:l}]:l.map(u=>({unit:Vf(t,{escape:!1}),fields:a,values:u}))}n.filter(a=>a.name===o.name+ng).length||n.push(i)}),n}function WSe(t,r){return cb(t,(n,o)=>{r=o.marks?o.marks(t,n,r):r,mO(n,i=>{i.marks&&(r=i.marks(t,n,r))})}),r}function Obt(t,r){for(let n of t.children)no(n)&&(r=WSe(n,r));return r}function Rbt(t,r){let n=r.selection,o=t.getSelectionComponent(n,kn(n));return{signal:See(o,r)}}function qSe(t){return t.map(r=>(r.on&&!r.on.length&&delete r.on,r))}var BA=N(()=>{"use strict";So();C2();ir();Uf();jF();bt();ds();GSe();LA()});function mCr(t,r,n,o){let i=n.channel,s=n.signals.visual,a=n.signals.data,l=ih.has(r),u=Jr(t.scaleName(i)),c=t.getScaleComponent(i),f=c?c.get("type"):void 0,d=g=>`scale(${u}, ${g})`,p=t.getSizeSignalRef(i===to?"width":"height").signal,h=`${i}(unit)`,m=jbt(r,(g,y)=>[...g,{events:y.between[0],update:`[${h}, ${h}]`},{events:y,update:`[${s}[0], clamp(${h}, 0, ${p})]`}]);return m.push({events:{signal:r.name+HSe},update:ma(f)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),l?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},o?{init:U2(o,!0,d)}:{value:[]}),{on:m}),Object.assign(Object.assign({name:a},o?{init:U2(o)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]})]}function jbt(t,r){return t.events.reduce((n,o)=>o.between?r(n,o):(st(`${o} is not an ordered event stream for interval selections.`),n),[])}var $A,HSe,hCr,Lbt,_ee=N(()=>{"use strict";So();ir();Uf();Ir();cn();wi();bt();BA();pO();u6();$A="_brush",HSe="_scale_trigger",hCr={signals:(t,r)=>{let n=r.name,o=n+t1,i=ih.has(r),s=[],a=[],l=[];if(r.translate&&!i){let f=`!event.item || event.item.mark.name !== ${Jr(n+$A)}`;jbt(r,(d,p)=>{var h;let m=Mn((h=p.between[0].filter)!==null&&h!==void 0?h:p.between[0].filter=[]);return m.indexOf(f)<0&&m.push(f),d})}r.project.items.forEach((f,d)=>{let p=f.channel;if(p!==to&&p!==pi){st("Interval selections only support x and y encoding channels.");return}let h=r.init?r.init[d]:null,m=mCr(t,r,f,h),g=f.signals.data,y=f.signals.visual,b=Jr(t.scaleName(p)),x=t.getScaleComponent(p).get("type"),v=ma(x)?"+":"";s.push(...m),a.push(g),l.push({scaleName:t.scaleName(p),expr:`(!isArray(${g}) || (${v}invert(${b}, ${y})[0] === ${v}${g}[0] && ${v}invert(${b}, ${y})[1] === ${v}${g}[1]))`})}),i||s.push({name:n+HSe,value:{},on:[{events:l.map(f=>({scale:f.scaleName})),update:l.map(f=>f.expr).join(" && ")+` ? ${n+HSe} : {}`}]});let u=r.init,c=`unit: ${Vf(t)}, fields: ${o}, values`;return s.concat(Object.assign(Object.assign({name:n+xl},u?{init:`{${c}: ${U2(u)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+` ? {${c}: [${a}]} : null`}]}))},modifyExpr:(t,r)=>r.name+xl+", "+(r.resolve==="global"?"true":`{unit: ${Vf(t)}}`),marks:(t,r,n)=>{let o=r.name,{x:i,y:s}=r.project.hasChannel,a=i&&i.signals.visual,l=s&&s.signals.visual,u=`data(${Jr(r.name+ng)})`;if(ih.has(r))return n;let c={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${l}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(r.resolve==="global")for(let y of nt(c))c[y]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${Vf(t)}`},c[y]),{value:0}];let f=r.mark,{fill:d,fillOpacity:p,cursor:h}=f,m=Pt(f,["fill","fillOpacity","cursor"]),g=nt(m).reduce((y,b)=>(y[b]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${l}[0] !== ${l}[1]`].filter(x=>x).join(" && "),value:m[b]},{value:null}],y),{});return[{name:o+$A+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:p}},update:c}},...n,{name:o+$A,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),g)}}]}},Lbt=hCr});function YSe(t,r){let n=r.name,o=n+t1,i=r.project,s="(item().isVoronoi ? datum.datum : datum)",a=i.items.map(c=>{let f=t.fieldDef(c.channel);return f&&f.bin?`[${s}[${Jr(t.vgField(c.channel,{}))}], ${s}[${Jr(t.vgField(c.channel,{binSuffix:"end"}))}]]`:`${s}[${Jr(c.field)}]`}).join(", "),l=`unit: ${Vf(t)}, fields: ${o}, values`,u=r.events;return[{name:n+xl,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${l}: [${a}]} : null`,force:!0}]:[]}]}var gCr,Bbt,XSe=N(()=>{"use strict";ir();Uf();pO();gCr={signals:YSe,modifyExpr:(t,r)=>r.name+xl+", "+(r.resolve==="global"?"null":`{unit: ${Vf(t)}}`)},Bbt=gCr});var yCr,$bt,zbt=N(()=>{"use strict";Uf();XSe();yCr={signals:YSe,modifyExpr:(t,r)=>r.name+xl+", "+(r.resolve==="global"?"true":`{unit: ${Vf(t)}}`)},$bt=yCr});function cb(t,r){let n=t.component.selection;if(n){for(let o of Zp(n))if(r(o,bCr[o.type])===!0)break}}function xCr(t){let r=t.parent;for(;r&&!vl(r);)r=r.parent;return r}function Vf(t,{escape:r}={escape:!0}){let n=r?Jr(t.name):t.name,o=xCr(t);if(o){let{facet:i}=o;for(let s of ml)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Jr(o.vgField(s))}])`)}return n}function c6(t){let r=!1;return cb(t,n=>{r=r||n.project.items.some(o=>o.field===Zv)}),r}var ng,xl,Pbt,wee,bCr,Uf=N(()=>{"use strict";ir();Ir();eO();bt();ds();_ee();XSe();zbt();ng="_store",xl="_tuple",Pbt="_modify",wee="vlSelectionResolve",bCr={single:$bt,multi:Bbt,interval:Lbt}});function Gf(t){this.type=t}function vCr(t){switch(t.type){case qbt:return t.elements;case Hbt:case Kbt:return[t.left,t.right];case Ybt:return[t.callee].concat(t.arguments);case Xbt:return[t.test,t.consequent,t.alternate];case Zbt:return[t.object,t.property];case Qbt:return t.properties;case Gbt:return[t.key,t.value];case Jbt:return[t.argument];case Wbt:case Vbt:case Ubt:default:return[]}}var Ubt,Vbt,Gbt,Wbt,qbt,Hbt,Ybt,Xbt,Kbt,Zbt,Qbt,Jbt,KSe=N(()=>{"use strict";Ubt="RawCode",Vbt="Literal",Gbt="Property",Wbt="Identifier",qbt="ArrayExpression",Hbt="BinaryExpression",Ybt="CallExpression",Xbt="ConditionalExpression",Kbt="LogicalExpression",Zbt="MemberExpression",Qbt="ObjectExpression",Jbt="UnaryExpression";Gf.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=vCr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1}});function kee(t,r){if(!t)throw new Error("ASSERT: "+r)}function r1(t){return t>=48&&t<=57}function rCe(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function d6(t){return"01234567".indexOf(t)>=0}function $Cr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function h6(t){return t===10||t===13||t===8232||t===8233}function y6(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&jCr.test(String.fromCharCode(t))}function Eee(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&BCr.test(String.fromCharCode(t))}function uxt(){for(var t;dt<Uu&&(t=yr.charCodeAt(dt),$Cr(t)||h6(t));)++dt}function tCe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)dt<Uu&&rCe(yr[dt])?(o=yr[dt++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):Co({},Zl,zu);return String.fromCharCode(i)}function UCr(){var t,r,n,o;for(t=yr[dt],r=0,t==="}"&&Co({},Zl,zu);dt<Uu&&(t=yr[dt++],!!rCe(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&Co({},Zl,zu),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function cxt(){var t,r;for(t=yr.charCodeAt(dt++),r=String.fromCharCode(t),t===92&&(yr.charCodeAt(dt)!==117&&Co({},Zl,zu),++dt,t=tCe("u"),(!t||t==="\\"||!y6(t.charCodeAt(0)))&&Co({},Zl,zu),r=t);dt<Uu&&(t=yr.charCodeAt(dt),!!Eee(t));)++dt,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),yr.charCodeAt(dt)!==117&&Co({},Zl,zu),++dt,t=tCe("u"),(!t||t==="\\"||!Eee(t.charCodeAt(0)))&&Co({},Zl,zu),r+=t);return r}function VCr(){var t,r;for(t=dt++;dt<Uu;){if(r=yr.charCodeAt(dt),r===92)return dt=t,cxt();if(Eee(r))++dt;else break}return yr.slice(t,dt)}function GCr(){var t,r,n;return t=dt,r=yr.charCodeAt(dt)===92?cxt():VCr(),r.length===1?n=zA:zCr.hasOwnProperty(r)?n=V2:r==="null"?n=Aee:r==="true"||r==="false"?n=Tee:n=zA,{type:n,value:r,start:t,end:dt}}function QSe(){var t=dt,r=yr.charCodeAt(dt),n,o=yr[dt],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++dt,{type:Wf,value:String.fromCharCode(r),start:t,end:dt};default:if(n=yr.charCodeAt(dt+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return dt+=2,{type:Wf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:dt};case 33:case 61:return dt+=2,yr.charCodeAt(dt)===61&&++dt,{type:Wf,value:yr.slice(t,dt),start:t,end:dt}}}if(a=yr.substr(dt,4),a===">>>=")return dt+=4,{type:Wf,value:a,start:t,end:dt};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return dt+=3,{type:Wf,value:s,start:t,end:dt};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return dt+=2,{type:Wf,value:i,start:t,end:dt};if("<>=!+-*%&|^/".indexOf(o)>=0)return++dt,{type:Wf,value:o,start:t,end:dt};Co({},Zl,zu)}function WCr(t){for(var r="";dt<Uu&&rCe(yr[dt]);)r+=yr[dt++];return r.length===0&&Co({},Zl,zu),y6(yr.charCodeAt(dt))&&Co({},Zl,zu),{type:VA,value:parseInt("0x"+r,16),start:t,end:dt}}function qCr(t){for(var r="0"+yr[dt++];dt<Uu&&d6(yr[dt]);)r+=yr[dt++];return(y6(yr.charCodeAt(dt))||r1(yr.charCodeAt(dt)))&&Co({},Zl,zu),{type:VA,value:parseInt(r,8),octal:!0,start:t,end:dt}}function ext(){var t,r,n;if(n=yr[dt],kee(r1(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=dt,t="",n!=="."){if(t=yr[dt++],n=yr[dt],t==="0"){if(n==="x"||n==="X")return++dt,WCr(r);if(d6(n))return qCr(r);n&&r1(n.charCodeAt(0))&&Co({},Zl,zu)}for(;r1(yr.charCodeAt(dt));)t+=yr[dt++];n=yr[dt]}if(n==="."){for(t+=yr[dt++];r1(yr.charCodeAt(dt));)t+=yr[dt++];n=yr[dt]}if(n==="e"||n==="E")if(t+=yr[dt++],n=yr[dt],(n==="+"||n==="-")&&(t+=yr[dt++]),r1(yr.charCodeAt(dt)))for(;r1(yr.charCodeAt(dt));)t+=yr[dt++];else Co({},Zl,zu);return y6(yr.charCodeAt(dt))&&Co({},Zl,zu),{type:VA,value:parseFloat(t),start:r,end:dt}}function HCr(){var t="",r,n,o,i,s=!1;for(r=yr[dt],kee(r==="'"||r==='"',"String literal must starts with a quote"),n=dt,++dt;dt<Uu;)if(o=yr[dt++],o===r){r="";break}else if(o==="\\")if(o=yr[dt++],!o||!h6(o.charCodeAt(0)))switch(o){case"u":case"x":yr[dt]==="{"?(++dt,t+=UCr()):t+=tCe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:d6(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),dt<Uu&&d6(yr[dt])&&(s=!0,i=i*8+"01234567".indexOf(yr[dt++]),"0123".indexOf(o)>=0&&dt<Uu&&d6(yr[dt])&&(i=i*8+"01234567".indexOf(yr[dt++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&yr[dt]===`
`&&++dt;else{if(h6(o.charCodeAt(0)))break;t+=o}return r!==""&&Co({},Zl,zu),{type:g6,value:t,octal:s,start:n,end:dt}}function YCr(t,r){var n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(o,i){if(parseInt(i,16)<=1114111)return"x";Co({},eCe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Co({},eCe)}try{return new RegExp(t,r)}catch{return null}}function XCr(){var t,r,n,o,i;for(t=yr[dt],kee(t==="/","Regular expression literal must start with a slash"),r=yr[dt++],n=!1,o=!1;dt<Uu;)if(t=yr[dt++],r+=t,t==="\\")t=yr[dt++],h6(t.charCodeAt(0))&&Co({},ZSe),r+=t;else if(h6(t.charCodeAt(0)))Co({},ZSe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||Co({},ZSe),i=r.substr(1,r.length-2),{value:i,literal:r}}function KCr(){var t,r,n;for(r="",n="";dt<Uu&&(t=yr[dt],!!Eee(t.charCodeAt(0)));)++dt,t==="\\"&&dt<Uu?Co({},Zl,zu):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&Co({},eCe,n),{value:n,literal:r}}function ZCr(){var t,r,n,o;return Lo=null,uxt(),t=dt,r=XCr(),n=KCr(),o=YCr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:dt}}function QCr(t){return t.type===zA||t.type===V2||t.type===Tee||t.type===Aee}function fxt(){var t;return uxt(),dt>=Uu?{type:m6,start:dt,end:dt}:(t=yr.charCodeAt(dt),y6(t)?GCr():t===40||t===41||t===59?QSe():t===39||t===34?HCr():t===46?r1(yr.charCodeAt(dt+1))?ext():QSe():r1(t)?ext():QSe())}function qf(){var t;return t=Lo,dt=t.end,Lo=fxt(),dt=t.end,t}function dxt(){var t;t=dt,Lo=fxt(),dt=t}function JCr(t){var r=new Gf(_Cr);return r.elements=t,r}function txt(t,r,n){var o=new Gf(t==="||"||t==="&&"?ACr:SCr);return o.operator=t,o.left=r,o.right=n,o}function eEr(t,r){var n=new Gf(CCr);return n.callee=t,n.arguments=r,n}function tEr(t,r,n){var o=new Gf(ECr);return o.test=t,o.consequent=r,o.alternate=n,o}function nCe(t){var r=new Gf(axt);return r.name=t,r}function f6(t){var r=new Gf(TCr);return r.value=t.value,r.raw=yr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function rxt(t,r,n){var o=new Gf(kCr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function rEr(t){var r=new Gf(ICr);return r.properties=t,r}function nxt(t,r,n){var o=new Gf(DCr);return o.key=r,o.value=n,o.kind=t,o}function nEr(t,r){var n=new Gf(NCr);return n.operator=t,n.argument=r,n.prefix=!0,n}function Co(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,function(s,a){return kee(a<o.length,"Message reference must be in range"),o[a]});throw n=new Error(i),n.index=dt,n.description=i,n}function Iee(t){t.type===m6&&Co(t,PCr),t.type===VA&&Co(t,MCr),t.type===g6&&Co(t,FCr),t.type===zA&&Co(t,OCr),t.type===V2&&Co(t,RCr),Co(t,Zl,t.value)}function Vu(t){var r=qf();(r.type!==Wf||r.value!==t)&&Iee(r)}function $i(t){return Lo.type===Wf&&Lo.value===t}function JSe(t){return Lo.type===V2&&Lo.value===t}function oEr(){var t=[];for(dt=Lo.start,Vu("[");!$i("]");)$i(",")?(qf(),t.push(null)):(t.push(UA()),$i("]")||Vu(","));return qf(),JCr(t)}function oxt(){var t;return dt=Lo.start,t=qf(),t.type===g6||t.type===VA?(t.octal&&Co(t,lxt),f6(t)):nCe(t.value)}function iEr(){var t,r,n,o;if(dt=Lo.start,t=Lo,t.type===zA)return n=oxt(),Vu(":"),o=UA(),nxt("init",n,o);if(t.type===m6||t.type===Wf)Iee(t);else return r=oxt(),Vu(":"),o=UA(),nxt("init",r,o)}function sEr(){var t=[],r,n,o,i={},s=String;for(dt=Lo.start,Vu("{");!$i("}");)r=iEr(),r.key.type===axt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?Co({},LCr):i[o]=!0,t.push(r),$i("}")||Vu(",");return Vu("}"),rEr(t)}function aEr(){var t;return Vu("("),t=oCe(),Vu(")"),t}function uEr(){var t,r,n;if($i("("))return aEr();if($i("["))return oEr();if($i("{"))return sEr();if(t=Lo.type,dt=Lo.start,t===zA||lEr[Lo.value])n=nCe(qf().value);else if(t===g6||t===VA)Lo.octal&&Co(Lo,lxt),n=f6(qf());else{if(t===V2)throw new Error(p6);t===Tee?(r=qf(),r.value=r.value==="true",n=f6(r)):t===Aee?(r=qf(),r.value=null,n=f6(r)):$i("/")||$i("/=")?(n=f6(ZCr()),dxt()):Iee(qf())}return n}function cEr(){var t=[];if(Vu("("),!$i(")"))for(;dt<Uu&&(t.push(UA()),!$i(")"));)Vu(",");return Vu(")"),t}function fEr(){var t;return dt=Lo.start,t=qf(),QCr(t)||Iee(t),nCe(t.value)}function dEr(){return Vu("."),fEr()}function pEr(){var t;return Vu("["),t=oCe(),Vu("]"),t}function hEr(){var t,r,n;for(t=uEr();;)if($i("."))n=dEr(),t=rxt(".",t,n);else if($i("("))r=cEr(),t=eEr(t,r);else if($i("["))n=pEr(),t=rxt("[",t,n);else break;return t}function ixt(){var t=hEr();if(Lo.type===Wf&&($i("++")||$i("--")))throw new Error(p6);return t}function Cee(){var t,r;if(Lo.type!==Wf&&Lo.type!==V2)r=ixt();else{if($i("++")||$i("--"))throw new Error(p6);if($i("+")||$i("-")||$i("~")||$i("!"))t=qf(),r=Cee(),r=nEr(t.value,r);else{if(JSe("delete")||JSe("void")||JSe("typeof"))throw new Error(p6);r=ixt()}}return r}function sxt(t){var r=0;if(t.type!==Wf&&t.type!==V2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function mEr(){var t,r,n,o,i,s,a,l,u,c;if(t=Lo,u=Cee(),o=Lo,i=sxt(o),i===0)return u;for(o.prec=i,qf(),r=[t,Lo],a=Cee(),s=[u,o,a];(i=sxt(Lo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=txt(l,u,a),s.push(n);o=qf(),o.prec=i,s.push(o),r.push(Lo),n=Cee(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=txt(s[c-1].value,s[c-2],n),c-=2;return n}function UA(){var t,r,n;return t=mEr(),$i("?")&&(qf(),r=UA(),Vu(":"),n=UA(),t=tEr(t,r,n)),t}function oCe(){var t=UA();if($i(","))throw new Error(p6);return t}function iCe(t){yr=t,dt=0,Uu=yr.length,Lo=null,dxt();var r=oCe();if(Lo.type!==m6)throw new Error("Unexpect token after expression.");return r}var fb,yr,dt,Uu,Lo,Tee,m6,zA,V2,Aee,VA,Wf,g6,wCr,_Cr,SCr,CCr,ECr,axt,TCr,ACr,kCr,ICr,DCr,NCr,Zl,MCr,FCr,OCr,RCr,PCr,eCe,ZSe,lxt,LCr,zu,p6,jCr,BCr,zCr,lEr,pxt=N(()=>{"use strict";KSe();Tee=1,m6=2,zA=3,V2=4,Aee=5,VA=6,Wf=7,g6=8,wCr=9;fb={};fb[Tee]="Boolean";fb[m6]="<end>";fb[zA]="Identifier";fb[V2]="Keyword";fb[Aee]="Null";fb[VA]="Numeric";fb[Wf]="Punctuator";fb[g6]="String";fb[wCr]="RegularExpression";_Cr="ArrayExpression",SCr="BinaryExpression",CCr="CallExpression",ECr="ConditionalExpression",axt="Identifier",TCr="Literal",ACr="LogicalExpression",kCr="MemberExpression",ICr="ObjectExpression",DCr="Property",NCr="UnaryExpression",Zl="Unexpected token %0",MCr="Unexpected number",FCr="Unexpected string",OCr="Unexpected identifier",RCr="Unexpected reserved word",PCr="Unexpected end of input",eCe="Invalid regular expression",ZSe="Invalid regular expression: missing /",lxt="Octal literals are not allowed in strict mode.",LCr="Duplicate data property in object literal not allowed in strict mode",zu="ILLEGAL",p6="Disabled.",jCr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),BCr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");zCr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};lEr={if:1}});var sCe=N(()=>{"use strict"});function gO(t,r,n){return t.fields=r||[],t.fname=n,t}function gEr(t){return t.length===1?yEr(t[0]):bEr(t)}function b6(t){throw Error(t)}function xEr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||b6("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&b6("Access path missing closing bracket: "+t),o&&b6("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function vEr(t,r,n){let o=xEr(t);return t=o.length===1?o[0]:t,gO((n&&n.get||gEr)(o),[t],r||t)}var yEr,bEr,psi,hsi,msi,gsi,ysi,bsi,xsi,aCe=N(()=>{"use strict";yEr=t=>function(r){return r[t]},bEr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};psi=vEr("id"),hsi=gO(t=>t,[],"identity"),msi=gO(()=>0,[],"zero"),gsi=gO(()=>1,[],"one"),ysi=gO(()=>!0,[],"true"),bsi=gO(()=>!1,[],"false"),xsi=Array.isArray});var lCe=N(()=>{"use strict";aCe()});var hxt=N(()=>{"use strict";sCe();lCe();aCe()});var mxt=N(()=>{"use strict";KSe();pxt();hxt();lCe();sCe()});function uCe(t){let r=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(r.push(...uCe(t.object)),r.push(...uCe(t.property))),r)}function gxt(t){return t.object.type==="MemberExpression"?gxt(t.object):t.object.name==="datum"}function Dee(t){let r=iCe(t),n=new Set;return r.visit(o=>{o.type==="MemberExpression"&&gxt(o)&&n.add(uCe(o).slice(1).join("."))}),n}var cCe=N(()=>{"use strict";mxt()});var db,x6=N(()=>{"use strict";bt();cee();ro();cCe();db=class t extends Dr{constructor(r,n,o){super(r),this.model=n,this.filter=o,this.expr=jA(this.model,this.filter,this),this._dependentFields=Dee(this.expr)}clone(){return new t(null,this.model,sr(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}});function yxt(t,r){var n;let o={},i=t.config.selection;for(let s of nt(r??{})){let a=sr(r[s]),l=i[a.type],{fields:u,encodings:c}=l,f=Pt(l,["fields","encodings"]);for(let h in f)h==="encodings"&&a.fields||h==="fields"&&a.encodings||(h==="mark"&&(a[h]=Object.assign(Object.assign({},f[h]),a[h])),(a[h]===void 0||a[h]===!0)&&(a[h]=(n=f[h])!==null&&n!==void 0?n:a[h]));let d=kn(s),p=o[d]=Object.assign(Object.assign({},a),{name:d,events:pr(a.on)?Af(a.on,"scope"):sr(a.on)});mO(p,h=>{h.has(p)&&h.parse&&h.parse(t,p,a,r[s])})}return o}function uee(t,r,n,o="datum"){let i=[];function s(l){let u=kn(l),c=t.getSelectionComponent(u,l),f=Jr(u+ng);if(c.project.timeUnit){let d=n??t.component.data.raw,p=c.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}return c.empty!=="none"&&i.push(f),`vlSelectionTest(${f}, ${o}`+(c.resolve==="global"?")":`, ${Jr(c.resolve)})`)}let a=wA(r,s);return(i.length?"!("+i.map(l=>`length(data(${l}))`).join(" || ")+") || ":"")+`(${a})`}function See(t,r){let n=r.encoding,o=r.field;if(!n&&!o)o=t.project.items[0].field,t.project.items.length>1&&st(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Jr(o)}.`);else if(n&&!o){let i=t.project.items.filter(s=>s.channel===n);!i.length||i.length>1?(o=t.project.items[0].field,st((i.length?"Multiple ":"No ")+`matching ${Jr(n)} encoding found for selection ${Jr(r.selection)}. Using "field": ${Jr(o)}.`)):o=i[0].field}return`${t.name}[${Jr(o)}]`}function bxt(t,r){cb(t,n=>{let o=n.name,i=t.getName(`lookup_${o}`);t.component.data.outputNodes[i]=n.materialized=new fs(new db(r,t,{selection:o}),i,"lookup",t.component.data.outputNodeRefCounts)})}var LA=N(()=>{"use strict";So();C2();ir();Uf();cn();bt();ro();x6();GSe()});function jA(t,r,n){return wA(r,o=>pr(o)?o:w0t(o)?uee(t,o.selection,n):vJ(o))}var cee=N(()=>{"use strict";ir();DA();bt();LA()});function SEr(t,r){if(t)return Bt(t)&&!rg(t)?t.map(n=>tSe(n,r)).join(", "):t}function fCe(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function yO(t,r,n,o={header:!1}){var i,s;let a=t.combine(),{disable:l,orient:u,scale:c,labelExpr:f,title:d,zindex:p}=a,h=Pt(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!l){for(let m in h){let g=vgt[m],y=h[m];if(g&&g!==r&&g!=="both")delete h[m];else if(EF(y)){let{condition:b}=y,x=Pt(y,["condition"]),v=Mn(b),w=E2e[m];if(w){let{vgProp:_,part:S}=w,C=[...v.map(E=>{let{test:T}=E,I=Pt(E,["test"]);return Object.assign({test:jA(null,T)},I)}),x];fCe(h,S,_,C),delete h[m]}else if(w===null){let _={signal:v.map(S=>{let{test:C}=S,E=Pt(S,["test"]);return`${jA(null,C)} ? ${nSe(E)} : `}).join("")+nSe(x)};h[m]=_}}else if(rr(y)){let b=E2e[m];if(b){let{vgProp:x,part:v}=b;fCe(h,v,x,y),delete h[m]}}}if(r==="grid"){if(!h.grid)return;if(h.encode){let{grid:m}=h.encode;h.encode=Object.assign({},m?{grid:m}:{}),bn(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:c,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Fn(p,0)})}else{if(!o.header&&t.mainExtracted)return;if(f!==void 0){let g=f;!((s=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&rr(h.encode.labels.update.text)&&(g=Hy(f,"datum.label",h.encode.labels.update.text.signal)),fCe(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(let g of nJ)t.hasAxisPart(g)||delete h.encode[g];bn(h.encode)&&delete h.encode}let m=SEr(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:u,grid:!1},m?{title:m}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:Fn(p,0)})}}}function Nee(t){let{axes:r}=t.component,n=[];for(let o of Ts)if(r[o]){for(let i of r[o])if(!i.get("disable")&&!i.get("gridScale")){let s=o==="x"?"height":"width",a=t.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function xxt(t,r){let{x:n=[],y:o=[]}=t;return[...n.map(i=>yO(i,"grid",r)),...o.map(i=>yO(i,"grid",r)),...n.map(i=>yO(i,"main",r)),...o.map(i=>yO(i,"main",r))].filter(i=>i)}var v6=N(()=>{"use strict";So();ir();M$();Ir();Mr();W$();bt();ho();Po();cee()});var dCe,pCe,vxt,wxt,_xt=N(()=>{"use strict";bt();dCe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},pCe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},vxt=nt(dCe),wxt=nt(pCe)});function Sxt(t,r,n,o){return Object.assign.apply(null,[{},...t.map(i=>{if(i==="axisOrient"){let s=n==="x"?"bottom":"left",a=r[n==="x"?"axisBottom":"axisLeft"]||{},l=r[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...nt(a),...nt(l)]),c={};for(let f of u.values())c[f]={signal:`${o.signal} === "${s}" ? ${R2(a[f])} : ${R2(l[f])}`};return c}return r[i]})])}function Cxt(t,r,n,o){let i=r==="band"?["axisDiscrete","axisBand"]:r==="point"?["axisDiscrete","axisPoint"]:N0t(r)?["axisQuantitative"]:r==="time"||r==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",a=rr(n)?"axisOrient":"axis"+_A(n),l=[...i,...i.map(c=>s+c.substr(4))],u=["axis",a,s];return{vlOnlyAxisConfig:Sxt(l,o,t,n),vgAxisConfig:Sxt(u,o,t,n),axisConfigStyle:CEr([...u,...l],o)}}function CEr(t,r){var n;let o=[{}];for(let i of t){let s=(n=r[i])===null||n===void 0?void 0:n.style;if(s){s=Mn(s);for(let a of s)o.push(r.style[a])}}return Object.assign.apply(null,o)}function w6(t,r,n,o={}){var i;let s=iSe(t,n,r.style);if(s!==void 0)return{configFrom:"style",configValue:s};for(let a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=o[a])===null||i===void 0?void 0:i[t])!==void 0)return{configFrom:a,configValue:o[a][t]};return{}}var hCe=N(()=>{"use strict";ir();wi();bt();ho();Po()});function EEr(t,r){return!Qi(t)&&At(r)&&!Sn(r?.bin)}function TEr(t,r){let n=r==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function Ext(t,r,n,o,i){let s=r?.labelAngle;if(s!==void 0)return rr(s)?s:SA(s);{let{configValue:a}=w6("labelAngle",t.config,r?.style,i);return a!==void 0?SA(a):n===to&&qt([z$,$$],o.type)?270:void 0}}function mCe(t){return`(((${t.signal} % 360) + 360) % 360)`}function yCe(t,r,n,o){if(t!==void 0)if(n==="x"){if(rr(t)){let i=mCe(t),s=rr(r)?`(${r.signal} === "top")`:r==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(rr(r)){let i=t<=45||315<=t?"===":"!==";return{signal:`${r.signal} ${i} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(r==="top")?"bottom":"top"}else{if(rr(t)){let i=mCe(t),s=rr(r)?`(${r.signal} === "left")`:r==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${o?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return o?"middle":null;if(rr(r)){let i=45<=t&&t<=135?"===":"!==";return{signal:`${r.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(r==="left")?"top":"bottom"}}function bCe(t,r,n){if(t===void 0)return;let o=n==="x",i=o?0:90,s=o?"bottom":"left";if(rr(t)){let a=mCe(t),l=rr(r)?`(${r.signal} === "${s}")`:r===s;return{signal:`(${i?"("+a+" + 90)":a} % 180 === 0) ? ${o?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${l} ? "left" : "right"`}}if((t+i)%180===0)return o?null:"center";if(rr(r)){let a=i<t&&t<180+i?"===":"!==";return{signal:`${`${r.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<t&&t<180+i)==(r===s)?"left":"right"}function AEr(t,r){if(r==="x"&&qt(["quantitative","temporal"],t))return!0}function kEr(t,r){if(t!=="nominal")return r==="log"?"greedy":!0}function Txt(t){return t==="x"?"bottom":"left"}function IEr({fieldOrDatumDef:t,scaleType:r,size:n,values:o}){var i;if(!o&&!Qi(r)&&r!=="log"){if(At(t)){if(Sn(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&qt(["month","hours","day","quarter"],(i=cs(t.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function xCe(t,r){let n=r==="x"?"x2":"y2",o=t.fieldDef(r),i=t.fieldDef(n),s=o?o.title:void 0,a=i?i.title:void 0;if(s&&a)return aSe(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function DEr(t,r){let n=t.values;if(Bt(n))return OJ(r,n);if(rr(n))return n}function NEr(t,r){return t==="rect"&&J2e(r)?1:0}var gCe,vCe=N(()=>{"use strict";ir();Xl();Ir();Mr();wi();Zy();Zd();bt();ho();Po();ob();hCe();gCe={scale:({model:t,channel:r})=>t.scaleName(r),format:({fieldOrDatumDef:t,config:r,axis:n})=>{let{format:o,formatType:i}=n;return CJ(t,t.type,o,i,r,!0)},formatType:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return EJ(o,r,n)},grid:({fieldOrDatumDef:t,axis:r,scaleType:n})=>{var o;return At(t)&&Zi(t.bin)?!1:(o=r.grid)!==null&&o!==void 0?o:EEr(n,t)},gridScale:({model:t,channel:r})=>TEr(t,r),labelAlign:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelAlign||bCe(r,n,o),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelBaseline||yCe(r,n,o),labelFlush:({axis:t,fieldOrDatumDef:r,channel:n})=>{var o;return(o=t.labelFlush)!==null&&o!==void 0?o:AEr(r.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{var o;return(o=t.labelOverlap)!==null&&o!==void 0?o:kEr(r.type,n)},orient:({orient:t})=>t,tickCount:({channel:t,model:r,axis:n,fieldOrDatumDef:o,scaleType:i})=>{var s;let a=t==="x"?"width":t==="y"?"height":void 0,l=a?r.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:IEr({fieldOrDatumDef:o,scaleType:i,size:l,values:n.values})},title:({axis:t,model:r,channel:n})=>{if(t.title!==void 0)return t.title;let o=xCe(r,n);if(o!==void 0)return o;let i=r.typedFieldDef(n),s=n==="x"?"x2":"y2",a=r.fieldDef(s);return sSe(i?[Z2e(i)]:[],At(a)?[Z2e(a)]:[])},values:({axis:t,fieldOrDatumDef:r})=>DEr(t,r),zindex:({axis:t,fieldOrDatumDef:r,mark:n})=>{var o;return(o=t.zindex)!==null&&o!==void 0?o:NEr(n,r)}}});function pb(t,r,n){return vt(t,Object.assign({prefix:r,suffix:"sort_index"},n??{}))}var GA,WA=N(()=>{"use strict";Mr();DA();tg();bt();ro();cCe();GA=class t extends Dr{constructor(r,n){super(r),this.transform=n,this._dependentFields=Dee(this.transform.calculate)}clone(){return new t(null,sr(this.transform))}static parseAllForSortIndex(r,n){return n.forEachFieldDef((o,i)=>{if(WF(o)&&AJ(o.sort)){let{field:s,timeUnit:a}=o,l=o.sort,u=l.map((c,f)=>`${vJ({field:s,timeUnit:a,equal:c})} ? ${f} : `).join("")+l.length;r=new t(r,{calculate:u,as:pb(o,i,{forAs:!0})})}}),r}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Tr(this.transform)}`}}});function bO(t,r){return qt(["top","bottom"],r)?"column":qt(["left","right"],r)||t==="row"?"row":"column"}function n1(t,r,n,o){let i=o==="row"?n.headerRow:o==="column"?n.headerColumn:n.headerFacet;return Fn((r?.header||{})[t],i[t],n.header[t])}function _6(t,r,n,o){let i={};for(let s of t){let a=n1(s,r,n,o);a!==void 0&&(i[s]=a)}return i}var Mee=N(()=>{"use strict";bt()});var xO,vO,S6=N(()=>{"use strict";xO=["row","column"],vO=["header","footer"]});function Axt(t,r){let n=t.component.layoutHeaders[r].title,o=t.config?t.config:void 0,i=t.component.layoutHeaders[r].facetFieldDef?t.component.layoutHeaders[r].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:l}=_6(["titleAnchor","titleAngle","titleOrient"],i,o,r),u=bO(r,l),c=SA(a);return{name:`${r}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},r==="row"?{orient:"left"}:{}),{style:"guide-title"}),Ixt(c,u)),kxt(u,c,s)),Mxt(o,i,r,vxt,dCe))}}function kxt(t,r,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let o=bCe(r,t==="row"?"left":"top",t==="row"?"y":"x");return o?{align:o}:{}}function Ixt(t,r){let n=yCe(t,r==="row"?"left":"top",r==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Dxt(t,r){let n=t.component.layoutHeaders[r],o=[];for(let i of vO)if(n[i])for(let s of n[i]){let a=FEr(t,r,i,n,s);a!=null&&o.push(a)}return o}function MEr(t,r){var n;let{sort:o}=t;return bl(o)?{field:vt(o,{expr:"datum"}),order:(n=o.order)!==null&&n!==void 0?n:"ascending"}:Bt(o)?{field:pb(t,r,{expr:"datum"}),order:"ascending"}:{field:vt(t,{expr:"datum"}),order:o??"ascending"}}function Fee(t,r,n){let{format:o,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:l,labelExpr:u}=_6(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,r),c=VF({fieldOrDatumDef:t,format:o,formatType:i,expr:"parent",config:n}).signal,f=bO(r,l);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?Hy(Hy(u,"datum.label",c),"datum.value",vt(t,{expr:"parent"})):c}},r==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Ixt(s,f)),kxt(f,s,a)),Mxt(n,t,r,wxt,pCe))}function FEr(t,r,n,o,i){if(i){let s=null,{facetFieldDef:a}=o,l=t.config?t.config:void 0;if(a&&i.labels){let{labelOrient:d}=_6(["labelOrient"],a,l,r);(r==="row"&&!qt(["top","bottom"],d)||r==="column"&&!qt(["left","right"],d))&&(s=Fee(a,r,l))}let u=vl(t)&&!ib(t.facet),c=i.axes,f=c?.length>0;if(s||f){let d=r==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${r}_${n}`),type:"group",role:`${r}-${n}`},o.facetFieldDef?{from:{data:t.getName(r+"_domain")},sort:MEr(a,r)}:{}),f&&u?{from:{data:t.getName(`facet_domain_${r}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{}),f?{axes:c}:{})}}return null}function REr(t,r){return OEr[r][t]}function Nxt(t,r){let n={};for(let o of ml){let i=t[o];if(i?.facetFieldDef){let{titleAnchor:s,titleOrient:a}=_6(["titleAnchor","titleOrient"],i.facetFieldDef,r,o),l=bO(o,a),u=REr(s,l);u!==void 0&&(n[l]=u)}}return bn(n)?void 0:n}function Mxt(t,r,n,o,i){let s={};for(let a of o){if(!i[a])continue;let l=n1(a,r,t,n);l!==void 0&&(s[i[a]]=l)}return s}var OEr,wCe=N(()=>{"use strict";ir();Ir();Mr();_xt();tg();Kv();bt();vCe();WA();ob();ds();Mee();S6();OEr={column:{start:0,end:1},row:{start:1,end:0}}});function wO(t){return[...Oee(t,"width"),...Oee(t,"height"),...Oee(t,"childWidth"),...Oee(t,"childHeight")]}function Oee(t,r){let n=r==="width"?"x":"y",o=t.component.layoutSize.get(r);if(!o||o==="merged")return[];let i=t.getSizeSignalRef(r).signal;if(o==="step"){let s=t.getScaleComponent(n);if(s){let a=s.get("type"),l=s.get("range");if(Qi(a)&&Lu(l)){let u=t.scaleName(n);return vl(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[Fxt(u,l)]:[Fxt(u,l),{name:i,update:_Ce(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(o=="container"){let s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",l=J$(t.config.view,s?"width":"height"),u=`isFinite(${a}) ? ${a} : ${l}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:o}]}function Fxt(t,r){return{name:t+"_step",value:r.step}}function _Ce(t,r,n){let o=r.get("type"),i=r.get("padding"),s=Fn(r.get("paddingOuter"),i),a=r.get("paddingInner");return a=o==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${a}, ${s}) * ${t}_step`}var C6=N(()=>{"use strict";L2();wi();bt();ho();ds()});function Ree(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}var SCe=N(()=>{"use strict"});function Pee(t,r){return nt(t).reduce((n,o)=>{let i=t[o];return Object.assign(Object.assign({},n),rh(r,i,o,s=>rr(s)?s:{value:s.value}))},{})}var CCe=N(()=>{"use strict";bt();ho();Rc()});function Oxt(t,r){if(sh(r)||vl(r))return"shared";if(SO(r))return yl(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function _O(t,r){let n=t.scale[r],o=yl(r)?"axis":"legend";return n==="independent"?(t[o][r]==="shared"&&st(it.independentScaleMeansIndependentGuide(r)),"independent"):t[o][r]||"shared"}var E6=N(()=>{"use strict";Ir();cn();ds()});var PEr,ECe,Lee,Rxt=N(()=>{"use strict";K$();bt();Oc();PEr=Object.assign(Object.assign({},ySe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),ECe=nt(PEr),Lee=class extends Bu{}});function LEr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i,legendType:s}){var a,l,u,c,f;if(s!=="symbol")return;let{markDef:d,encoding:p,config:h,mark:m}=n,g=d.filled&&m!=="trail",y=Object.assign(Object.assign({},Z0t({},n,Egt)),fO(n,{filled:g})),b=(a=Pxt(p.opacity))!==null&&a!==void 0?a:d.opacity;if(y.fill){if(o==="fill"||g&&o===Es)delete y.fill;else if(y.fill.field)i.get("symbolFillColor")?delete y.fill:(y.fill=mo((l=h.legend.symbolBaseFillColor)!==null&&l!==void 0?l:"black"),y.fillOpacity=mo(b??1));else if(Bt(y.fill)){let x=(f=(c=jee((u=p.fill)!==null&&u!==void 0?u:p.color))!==null&&c!==void 0?c:d.fill)!==null&&f!==void 0?f:g&&d.color;x&&(y.fill=mo(x))}}if(y.stroke){if(o==="stroke"||!g&&o===Es)delete y.stroke;else if(y.stroke.field)delete y.stroke;else if(Bt(y.stroke)){let x=Fn(jee(p.stroke||p.color),d.stroke,g?d.color:void 0);x&&(y.stroke={value:x})}}if(o!==Mc){let x=At(r)&&jxt(n,i,r);x?y.opacity=[Object.assign({test:x},mo(b??1)),mo(h.legend.unselectedOpacity)]:b&&(y.opacity=mo(b))}return y=Object.assign(Object.assign({},y),t),bn(y)?void 0:y}function jEr(t,{model:r,legendType:n}){if(n!=="gradient")return;let o={},i=Pxt(r.encoding.opacity)||r.markDef.opacity;return i&&(o.opacity=mo(i)),o=Object.assign(Object.assign({},o),t),bn(o)?void 0:o}function BEr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i}){let s=n.legend(o)||{},a=n.config,l=At(r)?jxt(n,i,r):void 0,u=l?[{test:l,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:f}=s,d=nb(f)?V$({fieldOrDatumDef:r,field:"datum.value",format:c,formatType:f,config:a}):void 0,p=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),d?{text:d}:{}),t);return bn(p)?void 0:p}function $Er(t,{legendCmpt:r}){let n=r.get("selections");return n?.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function Pxt(t){return Lxt(t,(r,n)=>Math.max(r,n.value))}function jee(t){return Lxt(t,(r,n)=>Fn(r,n.value))}function Lxt(t,r){if(G0t(t))return Mn(t.condition).reduce(r,t.value);if(ju(t))return t.value}function jxt(t,r,n){let o=r.get("selections");if(!o?.length)return;let i=Jr(n.field);return o.map(s=>`(!length(data(${Jr(kn(s)+ng)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}var TCe,ACe=N(()=>{"use strict";ir();Ir();Mr();ha();bt();Po();ob();Rc();Uf();TCe={symbols:LEr,gradient:jEr,labels:BEr,entries:$Er}});function zEr(t,r){let n=t.values;if(Bt(n))return OJ(r,n);if(rr(n))return n}function UEr(t,r,n,o){var i;if(r!=="shape"){let s=(i=jee(n))!==null&&i!==void 0?i:o;if(s)return s}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function $xt(t){let{legend:r}=t;return Fn(r.type,VEr(t))}function VEr({channel:t,timeUnit:r,scaleType:n}){if(Hv(t)){if(qt(["quarter","month","day"],r))return"symbol";if(Pf(n))return"gradient"}return"symbol"}function zxt({legendConfig:t,legendType:r,orient:n,legend:o}){var i,s;return(s=(i=o.direction)!==null&&i!==void 0?i:t[r?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:GEr(n,r)}function GEr(t,r){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return r==="gradient"?"horizontal":void 0}}function WEr({legendConfig:t,model:r,direction:n,orient:o,scaleType:i}){let{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:l,gradientVerticalMinLength:u}=t;if(Pf(i))return n==="horizontal"?o==="top"||o==="bottom"?Bxt(r,"width",a,s):a:Bxt(r,"height",u,l)}function Bxt(t,r,n,o){return{signal:`clamp(${t.getSizeSignalRef(r).signal}, ${n}, ${o})`}}function qEr(t){if(qt(["quantile","threshold","log"],t))return"greedy"}var kCe,Uxt=N(()=>{"use strict";ir();Ir();Mr();wi();bt();ho();ob();ACe();kCe={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:r,config:n})=>{let{format:o,formatType:i}=r;return CJ(t,t.type,o,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return EJ(o,r,n)},gradientLength:t=>{var r,n;let{legend:o,legendConfig:i}=t;return(n=(r=o.gradientLength)!==null&&r!==void 0?r:i.gradientLength)!==null&&n!==void 0?n:WEr(t)},labelOverlap:({legend:t,legendConfig:r,scaleType:n})=>{var o,i;return(i=(o=t.labelOverlap)!==null&&o!==void 0?o:r.labelOverlap)!==null&&i!==void 0?i:qEr(n)},symbolType:({legend:t,markDef:r,channel:n,encoding:o})=>{var i;return(i=t.symbolType)!==null&&i!==void 0?i:UEr(r.type,n,o.shape,r.shape)},title:({fieldOrDatumDef:t,config:r})=>th(t,r,{allowDisabling:!0}),type:({legendType:t,scaleType:r,channel:n})=>{if(Hv(n)&&Pf(r)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:r})=>zEr(r,t)}});function ICe(t){let r=no(t)?HEr(t):ZEr(t);return t.component.legends=r,r}function HEr(t){let{encoding:r}=t,n={};for(let o of[Es,...HJ]){let i=Io(r[o]);!i||!t.getScaleComponent(o)||o===us&&At(i)&&i.type===eg||(n[o]=KEr(t,o))}return n}function YEr(t,r){let n=t.scaleName(r);if(t.mark==="trail"){if(r==="color")return{stroke:n};if(r==="size")return{strokeWidth:n}}return r==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[r]:n}}function XEr(t,r,n,o){switch(r){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(r==="title"&&t===o?.title)return!0}return t===(n||{})[r]}function KEr(t,r){var n,o,i;let s=t.legend(r),{markDef:a,encoding:l,config:u}=t,c=u.legend,f=new Lee({},YEr(t,r));xbt(t,r,f);let d=s!==void 0?!s:c.disable;if(f.set("disable",d,s!==void 0),d)return f;s=s||{};let p=t.getScaleComponent(r).get("type"),h=Io(l[r]),m=At(h)?(n=cs(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=s.orient||u.legend.orient||"right",y=$xt({legend:s,channel:r,timeUnit:m,scaleType:p}),b=zxt({legend:s,legendType:y,orient:g,legendConfig:c}),x={legend:s,channel:r,model:t,markDef:a,encoding:l,fieldOrDatumDef:h,legendConfig:c,config:u,scaleType:p,orient:g,legendType:y,direction:b};for(let C of ECe){let E=C in kCe?kCe[C](x):s[C];if(E!==void 0){let T=XEr(E,C,s,t.fieldDef(r));(T||u.legend[C]===void 0)&&f.set(C,E,T)}}let v=(o=s?.encoding)!==null&&o!==void 0?o:{},w=f.get("selections"),_={},S={fieldOrDatumDef:h,model:t,channel:r,legendCmpt:f,legendType:y};for(let C of["labels","legend","title","symbols","gradient","entries"]){let E=Pee((i=v[C])!==null&&i!==void 0?i:{},t),T=C in TCe?TCe[C](E,S):E;T!==void 0&&!bn(T)&&(_[C]=Object.assign(Object.assign(Object.assign({},w?.length&&At(h)?{name:`${kn(h.field)}_legend_${C}`}:{}),w?.length?{interactive:!!w}:{}),{update:T}))}return bn(_)||f.set("encode",_,!!s?.encoding),f}function ZEr(t){let{legends:r,resolve:n}=t.component;for(let o of t.children){ICe(o);for(let i of nt(o.component.legends))n.legend[i]=_O(t.component.resolve,i),n.legend[i]==="shared"&&(r[i]=DCe(r[i],o.component.legends[i]),r[i]||(n.legend[i]="independent",delete r[i]))}for(let o of nt(r))for(let i of t.children)i.component.legends[o]&&n.legend[o]==="shared"&&delete i.component.legends[o];return r}function DCe(t,r){var n,o,i,s;if(!t)return r.clone();let a=t.getWithExplicit("orient"),l=r.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;let u=!1;for(let c of ECe){let f=$f(t.getWithExplicit(c),r.getWithExplicit(c),c,"legend",(d,p)=>{switch(c){case"symbolType":return QEr(d,p);case"title":return LJ(d,p);case"type":return u=!0,$u("symbol")}return oO(d,p,c,"legend")});t.setWithExplicit(c,f)}return u&&(!((o=(n=t.implicit)===null||n===void 0?void 0:n.encode)===null||o===void 0)&&o.gradient&&QQ(t.implicit,["encode","gradient"]),!((s=(i=t.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&QQ(t.explicit,["encode","gradient"])),t}function QEr(t,r){return r.value==="circle"?r:t}var NCe=N(()=>{"use strict";Ir();Mr();K$();Zy();Zd();bt();Po();CCe();ds();E6();VSe();Oc();Rxt();ACe();Uxt()});function Vxt(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function Bee(t){let r=t.component.legends,n={};for(let i of nt(r)){let s=t.getScaleComponent(i),a=di(s.get("domains"));if(n[a])for(let l of n[a])DCe(l,r[i])||n[a].push(r[i]);else n[a]=[r[i].clone()]}return Zp(n).flat().map(i=>JEr(i,t.config)).filter(i=>i!==void 0)}function JEr(t,r){var n,o,i;let s=t.combine(),{disable:a,labelExpr:l,selections:u}=s,c=Pt(s,["disable","labelExpr","selections"]);if(!a){if(r.aria===!1&&c.aria==null&&(c.aria=!1),!((n=c.encode)===null||n===void 0)&&n.symbols){let f=c.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!c.stroke&&(f.stroke={value:"transparent"});for(let d of HJ)c[d]&&delete f[d]}if(c.title||delete c.title,l!==void 0){let f=l;!((i=(o=c.encode)===null||o===void 0?void 0:o.labels)===null||i===void 0)&&i.update&&rr(c.encode.labels.update.text)&&(f=Hy(l,"datum.label",c.encode.labels.update.text.signal)),Vxt(c,"labels","text",{signal:f})}for(let f in c){let d=c[f];if(rr(d)){let p=myt[f];if(p){let{vgProp:h,part:m}=p;Vxt(c,m,h,d),delete c[f]}}}return c}}var MCe=N(()=>{"use strict";So();K$();bt();ho();NCe()});function Gxt(t){return sh(t)||SO(t)?eTr(t):Wxt(t)}function eTr(t){return t.children.reduce((r,n)=>r.concat(n.assembleProjections()),Wxt(t))}function Wxt(t){let r=t.component.projection;if(!r||r.merged)return[];let n=r.combine(),{name:o}=n;if(r.data){let i={signal:`[${r.size.map(a=>a.signal).join(", ")}]`},s=r.data.reduce((a,l)=>{let u=rr(l)?l.signal:`data('${t.lookupDataSource(l)}')`;return qt(a,u)||a.push(u),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:o,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:o},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var qxt=N(()=>{"use strict";bt();ho();ds()});var Hxt,Yxt=N(()=>{"use strict";Hxt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"]});var T6,Xxt=N(()=>{"use strict";Oc();T6=class extends Bu{constructor(r,n,o,i){super(Object.assign({},n),{name:r}),this.specifiedProjection=n,this.size=o,this.data=i,this.merged=!1}get isFit(){return!!this.data}}});function FCe(t){t.component.projection=no(t)?tTr(t):oTr(t)}function tTr(t){var r;if(t.hasProjection){let n=t.specifiedProjection,o=!(n&&(n.scale!=null||n.translate!=null)),i=o?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=o?rTr(t):void 0;return new T6(t.projectionName(!0),Object.assign(Object.assign({},(r=t.config.projection)!==null&&r!==void 0?r:{}),n??{}),i,s)}}function rTr(t){let r=[],{encoding:n}=t;for(let o of[[Nc,Dc],[Hl,Fu]])(Io(n[o[0]])||Io(n[o[1]]))&&r.push({signal:t.getName(`geojson_${r.length}`)});return t.channelHasField(us)&&t.typedFieldDef(us).type===eg&&r.push({signal:t.getName(`geojson_${r.length}`)}),r.length===0&&r.push(t.requestDataName(zs)),r}function nTr(t,r){let n=w2e(Hxt,i=>!!(!Vd(t.explicit,i)&&!Vd(r.explicit,i)||Vd(t.explicit,i)&&Vd(r.explicit,i)&&di(t.get(i))===di(r.get(i))));if(di(t.size)===di(r.size)){if(n)return t;if(di(t.explicit)===di({}))return r;if(di(r.explicit)===di({}))return t}return null}function oTr(t){if(t.children.length===0)return;let r;for(let o of t.children)FCe(o);let n=w2e(t.children,o=>{let i=o.component.projection;if(i)if(r){let s=nTr(r,i);return s&&(r=s),!!s}else return r=i,!0;else return!0});if(r&&n){let o=t.projectionName(!0),i=new T6(o,r.specifiedProjection,r.size,sr(r.data));for(let s of t.children){let a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),o),a.merged=!0)}return i}}var Kxt=N(()=>{"use strict";ir();Ir();Mr();ub();Yxt();Zd();bt();ds();Xxt()});function iTr(t,r,n,o){var i,s;if(tb(r,n)){let a=no(t)?(s=(i=t.axis(n))!==null&&i!==void 0?i:t.legend(n))!==null&&s!==void 0?s:{}:{},l=vt(r,{expr:"datum"}),u=vt(r,{expr:"datum",binSuffix:"end"});return{formulaAs:vt(r,{binSuffix:"range",forAs:!0}),formula:GF(l,u,a.format,a.formatType,o)}}return{}}function Qxt(t,r){return`${hJ(t)}_${r}`}function sTr(t,r){return{signal:t.getName(`${r}_bins`),extentSignal:t.getName(`${r}_extent`)}}function CO(t,r,n){var o;let i=(o=PF(n,void 0))!==null&&o!==void 0?o:{},s=Qxt(i,r);return t.getName(`${s}_bins`)}function aTr(t){return"as"in t}function Zxt(t,r,n){let o,i;aTr(t)?o=pr(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:o=[vt(t,{forAs:!0}),vt(t,{binSuffix:"end",forAs:!0})];let s=Object.assign({},PF(r,void 0)),a=Qxt(s,t.field),{signal:l,extentSignal:u}=sTr(n,a);if(RF(s.extent)){let f=s.extent,d=f.selection;i=See(n.getSelectionComponent(kn(d),d),f),delete s.extent}let c=Object.assign(Object.assign(Object.assign({bin:s,field:t.field,as:[o]},l?{signal:l}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:a,binComponent:c}}var og,qA=N(()=>{"use strict";So();ir();Xl();Mr();bt();ob();ds();LA();ro();og=class t extends Dr{constructor(r,n){super(r),this.bins=n}clone(){return new t(null,sr(this.bins))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{if(ga(s)&&Sn(s.bin)){let{key:l,binComponent:u}=Zxt(s,s.bin,n);i[l]=Object.assign(Object.assign(Object.assign({},u),i[l]),iTr(n,s,a,n.config))}return i},{});return bn(o)?null:new t(r,o)}static makeFromTransform(r,n,o){let{key:i,binComponent:s}=Zxt(n,n.bin,o);return new t(r,{[i]:s})}merge(r,n){for(let o of nt(r.bins))o in this.bins?(n(r.bins[o].signal,this.bins[o].signal),this.bins[o].as=Gd([...this.bins[o].as,...r.bins[o].as],Tr)):this.bins[o]=r.bins[o];for(let o of r.children)r.removeChild(o),o.parent=this;r.remove()}producedFields(){return new Set(Zp(this.bins).map(r=>r.as).flat(2))}dependentFields(){return new Set(Zp(this.bins).map(r=>r.field))}hash(){return`Bin ${Tr(this.bins)}`}assemble(){return Zp(this.bins).flatMap(r=>{let n=[],[o,...i]=r.as,s=r.bin,{extent:a}=s,l=Pt(s,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:If(r.field),as:o,signal:r.signal},RF(a)?{extent:null}:{extent:a}),r.span?{span:{signal:`span(${r.span})`}}:{}),l);!a&&r.extentSignal&&(n.push({type:"extent",field:If(r.field),signal:r.extentSignal}),u.extent={signal:r.extentSignal}),n.push(u);for(let c of i)for(let f=0;f<2;f++)n.push({type:"formula",expr:vt({field:o[f]},{expr:"datum"}),as:c[f]});return r.formula&&n.push({type:"formula",expr:r.formula,as:r.formulaAs}),n})}}});var Qd,EO=N(()=>{"use strict";ub();bt();ro();Qd=class extends Dr{constructor(r){super(null),r=r??{name:"source"};let n;if(lb(r)||(n=r.format?Object.assign({},kf(r.format,["parse"])):{}),iO(r))this._data={values:r.values};else if(j2(r)){if(this._data={url:r.url},!n.type){let o=/(?:\.([^.]+))?$/.exec(r.url)[1];qt(["json","csv","tsv","dsv","topojson"],o)||(o="json"),n.type=o}}else DSe(r)?this._data={values:[{type:"Sphere"}]}:(lee(r)||lb(r))&&(this._data={});this._generator=lb(r),r.name&&(this._name=r.name),n&&!bn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(r){this._name=r}set parent(r){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}});function $ee(t){for(let r of t){for(let n of r.children)if(n.parent!==r)return console.error("Dataflow graph is inconsistent.",r,n),!1;if(!$ee(r.children))return!1}return!0}var Jxt=N(()=>{"use strict";bt();ro();EO()});var G2,zee=N(()=>{"use strict";bt();ro();G2=class t extends Dr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Tr(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}});var W2,Uee=N(()=>{"use strict";bt();ro();W2=class t extends Dr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){var r;return new Set([(r=this.params.as)!==null&&r!==void 0?r:"data"])}hash(){return`Hash ${Tr(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}});function A6(t){return t instanceof Qd||t instanceof G2||t instanceof W2}var Vee,Jd,TO,OCe=N(()=>{"use strict";EO();zee();Uee();Vee=class{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}},Jd=class extends Vee{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:r,mutatedFlag:n}){r&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(r){if(A6(r))return!1;let n=r.parent,{continueFlag:o}=this.run(r);return o&&this.optimizeNextFromLeaves(n),this.mutatedFlag}},TO=class extends Vee{}});function lTr(t,r,n,o){let i=no(o)?o.encoding[gl(r)]:void 0;if(ga(n)&&no(o)&&HF(r,n,i,o.stack,o.markDef,o.config))t.add(vt(n,{})),t.add(vt(n,{suffix:"end"})),n.bin&&tb(n,r)&&t.add(vt(n,{binSuffix:"range"}));else if(zgt(r)){let s=$gt(r);t.add(o.getName(s))}else t.add(vt(n));return t}function uTr(t,r){var n;for(let o of nt(r)){let i=r[o];for(let s of nt(i))o in t?t[o][s]=new Set([...(n=t[o][s])!==null&&n!==void 0?n:[],...i[s]]):t[o]={[s]:i[s]}}}var ah,Gee=N(()=>{"use strict";Wv();Ir();Mr();cn();bt();ds();ro();ah=class t extends Dr{constructor(r,n,o){super(r),this.dimensions=n,this.measures=o}clone(){return new t(null,new Set(this.dimensions),sr(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(r,n){let o=!1;n.forEachFieldDef(a=>{a.aggregate&&(o=!0)});let i={},s=new Set;return!o||(n.forEachFieldDef((a,l)=>{var u,c,f,d;let{aggregate:p,field:h}=a;if(p)if(p==="count")i["*"]=(u=i["*"])!==null&&u!==void 0?u:{},i["*"].count=new Set([vt(a,{forAs:!0})]);else{if(Qp(p)||Km(p)){let m=Qp(p)?"argmin":"argmax",g=p[m];i[g]=(c=i[g])!==null&&c!==void 0?c:{},i[g][m]=new Set([vt({op:m,field:g},{forAs:!0})])}else i[h]=(f=i[h])!==null&&f!==void 0?f:{},i[h][p]=new Set([vt(a,{forAs:!0})]);Pu(l)&&n.scaleDomain(l)==="unaggregated"&&(i[h]=(d=i[h])!==null&&d!==void 0?d:{},i[h].min=new Set([vt({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([vt({field:h,aggregate:"max"},{forAs:!0})]))}else lTr(s,l,a,n)}),s.size+nt(i).length===0)?null:new t(r,s,i)}static makeFromTransform(r,n){var o,i,s;let a=new Set,l={};for(let u of n.aggregate){let{op:c,field:f,as:d}=u;c&&(c==="count"?(l["*"]=(o=l["*"])!==null&&o!==void 0?o:{},l["*"].count=new Set([d||vt(u,{forAs:!0})])):(l[f]=(i=l[f])!==null&&i!==void 0?i:{},l[f][c]=new Set([d||vt(u,{forAs:!0})])))}for(let u of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(u);return a.size+nt(l).length===0?null:new t(r,a,l)}merge(r){return ygt(this.dimensions,r.dimensions)?(uTr(this.measures,r.measures),!0):(s0t("different dimensions, cannot merge"),!1)}addDimensions(r){r.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...nt(this.measures)])}producedFields(){let r=new Set;for(let n of nt(this.measures))for(let o of nt(this.measures[n])){let i=this.measures[n][o];i.size===0?r.add(`${o}_${n}`):i.forEach(r.add,r)}return r}hash(){return`Aggregate ${Tr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let r=[],n=[],o=[];for(let s of nt(this.measures))for(let a of nt(this.measures[s]))for(let l of this.measures[s][a])o.push(l),r.push(a),n.push(s==="*"?null:If(s));return{type:"aggregate",groupby:[...this.dimensions].map(If),ops:r,fields:n,as:o}}}});var ig,Wee=N(()=>{"use strict";ir();Xl();Ir();Mr();cn();wi();tg();bt();ho();S6();kO();WA();ro();ig=class extends Dr{constructor(r,n,o,i){super(r),this.model=n,this.name=o,this.data=i;for(let s of ml){let a=n.facet[s];if(a){let{bin:l,sort:u}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[vt(a),...Sn(l)?[vt(a,{binSuffix:"end"})]:[]]},bl(u)?{sortField:u}:Bt(u)?{sortIndexField:pb(a,s)}:{})}}this.childModel=n.child}hash(){let r="Facet";for(let n of ml)this[n]&&(r+=` ${n.charAt(0)}:${Tr(this[n])}`);return r}get fields(){var r;let n=[];for(let o of ml)!((r=this[o])===null||r===void 0)&&r.fields&&n.push(...this[o].fields);return n}dependentFields(){let r=new Set(this.fields);for(let n of ml)this[n]&&(this[n].sortField&&r.add(this[n].sortField.field),this[n].sortIndexField&&r.add(this[n].sortIndexField));return r}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let r={};for(let n of Ts){let o=this.childModel.component.scales[n];if(o&&!o.merged){let i=o.get("type"),s=o.get("range");if(Qi(i)&&Lu(s)){let a=q2(this.childModel,n),l=AO(a);l?r[n]=l:st(`Unknown field for ${n}. Cannot calculate view size.`)}}}return r}assembleRowColumnHeaderData(r,n,o){let i={row:"y",column:"x"}[r],s=[],a=[],l=[];o&&o[i]&&(n?(s.push(`distinct_${o[i]}`),a.push("max")):(s.push(o[i]),a.push("distinct")),l.push(`distinct_${o[i]}`));let{sortField:u,sortIndexField:c}=this[r];if(u){let{op:f=O2,field:d}=u;s.push(d),a.push(f),l.push(vt(u,{forAs:!0}))}else c&&(s.push(c),a.push("max"),l.push(c));return{name:this[r].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[r].fields},s.length?{fields:s,ops:a,as:l}:{})]}}assembleFacetHeaderData(r){var n,o;let{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],l={};for(let f of xO){for(let d of vO){let p=(n=s[f]&&s[f][d])!==null&&n!==void 0?n:[];for(let h of p)if(((o=h.axes)===null||o===void 0?void 0:o.length)>0){l[f]=!0;break}}if(l[f]){let d=`length(data("${this.facet.name}"))`,p=f==="row"?i?{signal:`ceil(${d} / ${i})`}:1:i?{signal:`min(${d}, ${i})`}:{signal:d};a.push({name:`${this.facet.name}_${f}`,transform:[{type:"sequence",start:0,stop:p}]})}}let{row:u,column:c}=l;return(u||c)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,r)),a}assemble(){var r,n;let o=[],i=null,s=this.getChildIndependentFieldsWithStep(),{column:a,row:l,facet:u}=this;if(a&&l&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;let c=[].concat((r=s.x)!==null&&r!==void 0?r:[],(n=s.y)!==null&&n!==void 0?n:[]),f=c.map(()=>"distinct");o.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:c,ops:f}]})}for(let c of[Mf,Nf])this[c]&&o.push(this.assembleRowColumnHeaderData(c,i,s));if(u){let c=this.assembleFacetHeaderData(s);c&&o.push(...c)}return o}}});function evt(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.slice(1,-1):t}function cTr(t,r){let n=JQ(t);if(r==="number")return`toNumber(${n})`;if(r==="boolean")return`toBoolean(${n})`;if(r==="string")return`toString(${n})`;if(r==="date")return`toDate(${n})`;if(r==="flatten")return n;if(r.indexOf("date:")===0){let o=evt(r.slice(5,r.length));return`timeParse(${n},'${o}')`}else if(r.indexOf("utc:")===0){let o=evt(r.slice(4,r.length));return`utcParse(${n},'${o}')`}else return st(it.unrecognizedParse(r)),null}function tvt(t){let r={};return k$(t.filter,n=>{var o;if(z2e(n)){let i=null;yJ(n)?i=n.equal:bJ(n)?i=n.range[0]:xJ(n)&&(i=((o=n.oneOf)!==null&&o!==void 0?o:n.in)[0]),i&&(Ky(i)?r[n.field]="date":_o(i)?r[n.field]="number":pr(i)&&(r[n.field]="string")),n.timeUnit&&(r[n.field]="date")}}),r}function rvt(t){let r={};function n(o){qF(o)?r[o.field]="date":o.type==="quantitative"&&Pgt(o.aggregate)?r[o.field]="number":CF(o.field)>1?o.field in r||(r[o.field]="flatten"):WF(o)&&bl(o.sort)&&CF(o.sort.field)>1&&(o.sort.field in r||(r[o.sort.field]="flatten"))}if((no(t)||vl(t))&&t.forEachFieldDef((o,i)=>{if(ga(o))n(o);else{let s=Kd(i),a=t.fieldDef(s);n(Object.assign(Object.assign({},o),{type:a.type}))}}),no(t)){let{mark:o,markDef:i,encoding:s}=t;if(Df(o)&&!t.encoding.order){let a=i.orient==="horizontal"?"y":"x",l=s[a];At(l)&&l.type==="quantitative"&&!(l.field in r)&&(r[l.field]="number")}}return r}function nvt(t){let r={};if(no(t)&&t.component.selection)for(let n of nt(t.component.selection)){let o=t.component.selection[n];for(let i of o.project.items)!i.channel&&CF(i.field)>1&&(r[i.field]="flatten")}return r}var wl,qee=N(()=>{"use strict";ir();Wv();Ir();Mr();ub();jF();cn();KQ();ha();DA();tg();bt();ds();Oc();ro();wl=class t extends Dr{constructor(r,n){super(r),this._parse=n}clone(){return new t(null,sr(this._parse))}hash(){return`Parse ${Tr(this._parse)}`}static makeExplicit(r,n,o){let i={},s=n.data;return!lb(s)&&s&&s.format&&s.format.parse&&(i=s.format.parse),this.makeWithAncestors(r,i,{},o)}static makeWithAncestors(r,n,o,i){for(let l of nt(o)){let u=i.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===o[l]||u.value==="derived"||o[l]==="flatten"?delete o[l]:st(it.differentParse(l,o[l],u.value)))}for(let l of nt(n)){let u=i.get(l);u!==void 0&&(u===n[l]?delete n[l]:st(it.differentParse(l,n[l],u)))}let s=new Bu(n,o);i.copyAll(s);let a={};for(let l of nt(s.combine())){let u=s.get(l);u!==null&&(a[l]=u)}return nt(a).length===0||i.parseNothing?null:new t(r,a)}get parse(){return this._parse}merge(r){this._parse=Object.assign(Object.assign({},this._parse),r.parse),r.remove()}assembleFormatParse(){let r={};for(let n of nt(this._parse)){let o=this._parse[n];CF(n)===1&&(r[n]=o)}return r}producedFields(){return new Set(nt(this._parse))}dependentFields(){return new Set(nt(this._parse))}assembleTransforms(r=!1){return nt(this._parse).filter(n=>r?CF(n)>1:!0).map(n=>{let o=cTr(n,this._parse[n]);return o?{type:"formula",expr:o,as:eJ(n)}:null}).filter(n=>n!==null)}}});var sg,Hee=N(()=>{"use strict";eO();ro();sg=class t extends Dr{clone(){return new t(null)}constructor(r){super(r)}dependentFields(){return new Set}producedFields(){return new Set([Zv])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Zv}}}});var ag,k6=N(()=>{"use strict";Mr();bt();bt();ro();ag=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}addDimensions(r){this.transform.groupby=Gd(this.transform.groupby.concat(r),n=>n)}dependentFields(){let r=new Set;return this.transform.groupby&&this.transform.groupby.forEach(r.add,r),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`JoinAggregateTransform ${Tr(this.transform)}`}assemble(){let r=[],n=[],o=[];for(let s of this.transform.joinaggregate)n.push(s.op),o.push(this.getDefaultName(s)),r.push(s.field===void 0?null:s.field);let i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:o,ops:n,fields:r},i!==void 0?{groupby:i}:{})}}});function fTr(t){return t.stack.stackBy.reduce((r,n)=>{let o=n.fieldDef,i=vt(o);return i&&r.push(i),r},[])}function dTr(t){return Bt(t)&&t.every(r=>pr(r))&&t.length>1}var hb,Yee=N(()=>{"use strict";ir();Mr();bt();Po();ro();hb=class t extends Dr{constructor(r,n){super(r),this._stack=n}clone(){return new t(null,sr(this._stack))}static makeFromTransform(r,n){let{stack:o,groupby:i,as:s,offset:a="zero"}=n,l=[],u=[];if(n.sort!==void 0)for(let d of n.sort)l.push(d.field),u.push(Fn(d.order,"ascending"));let c={field:l,order:u},f;return dTr(s)?f=s:pr(s)?f=[s,s+"_end"]:f=[n.stack+"_start",n.stack+"_end"],new t(r,{stackField:o,groupby:i,offset:a,sort:c,facetby:[],as:f})}static makeFromEncoding(r,n){let o=n.stack,{encoding:i}=n;if(!o)return null;let{groupbyChannel:s,fieldChannel:a,offset:l,impute:u}=o,c;if(s){let h=i[s];c=Kl(h)}let f=fTr(n),d=n.encoding.order,p;return Bt(d)||At(d)?p=PJ(d):p=f.reduce((h,m)=>(h.field.push(m),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new t(r,{dimensionFieldDef:c,stackField:n.vgField(a),facetby:[],stackby:f,sort:p,offset:l,impute:u,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(r){this._stack.facetby.push(...r)}dependentFields(){let r=new Set;return r.add(this._stack.stackField),this.getGroupbyFields().forEach(r.add,r),this._stack.facetby.forEach(r.add,r),this._stack.sort.field.forEach(r.add,r),r}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Tr(this._stack)}`}getGroupbyFields(){let{dimensionFieldDef:r,impute:n,groupby:o}=this._stack;return r?r.bin?n?[vt(r,{binSuffix:"mid"})]:[vt(r,{}),vt(r,{binSuffix:"end"})]:[vt(r)]:o??[]}assemble(){let r=[],{facetby:n,dimensionFieldDef:o,stackField:i,stackby:s,sort:a,offset:l,impute:u,as:c}=this._stack;if(u&&o){let{band:f=.5,bin:d}=o;d&&r.push({type:"formula",expr:`${f}*`+vt(o,{expr:"datum"})+`+${1-f}*`+vt(o,{expr:"datum",binSuffix:"end"}),as:vt(o,{binSuffix:"mid",forAs:!0})}),r.push({type:"impute",field:i,groupby:[...s,...n],key:vt(o,{binSuffix:"mid"}),method:"value",value:0})}return r.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:l}),r}}});var o1,Xee=N(()=>{"use strict";Wv();Mr();bt();bt();ro();o1=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}addDimensions(r){this.transform.groupby=Gd(this.transform.groupby.concat(r),n=>n)}dependentFields(){var r,n;let o=new Set;return((r=this.transform.groupby)!==null&&r!==void 0?r:[]).forEach(o.add,o),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>o.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(o.add,o),o}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`WindowTransform ${Tr(this.transform)}`}assemble(){var r;let n=[],o=[],i=[],s=[];for(let p of this.transform.window)o.push(p.op),i.push(this.getDefaultName(p)),s.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);let a=this.transform.frame,l=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&o.every(p=>kF(p)))return Object.assign({type:"joinaggregate",as:i,ops:o,fields:n},l!==void 0?{groupby:l}:{});let u=[],c=[];if(this.transform.sort!==void 0)for(let p of this.transform.sort)u.push(p.field),c.push((r=p.order)!==null&&r!==void 0?r:"ascending");let f={field:u,order:c},d=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:o,fields:n,sort:f},d!==void 0?{ignorePeers:d}:{}),l!==void 0?{groupby:l}:{}),a!==void 0?{frame:a}:{})}}});function pTr(t){function r(n){if(!(n instanceof ig)){let o=n.clone();if(o instanceof fs){let i=I6+o.getSource();o.setSource(i),t.model.component.data.outputNodes[i]=o}else(o instanceof ah||o instanceof hb||o instanceof o1||o instanceof ag)&&o.addDimensions(t.fields);for(let i of n.children.flatMap(r))i.parent=o;return[o]}return n.children.flatMap(r)}return r}function tte(t){if(t instanceof ig)if(t.numChildren()===1&&!(t.children[0]instanceof fs)){let r=t.children[0];(r instanceof ah||r instanceof hb||r instanceof o1||r instanceof ag)&&r.addDimensions(t.fields),r.swapWithParent(),tte(t)}else{let r=t.model.component.data.main;ovt(r);let n=pTr(t),o=t.children.map(n).flat();for(let i of o)i.parent=r}else t.children.map(tte)}function ovt(t){if(t instanceof fs&&t.type===zs&&t.numChildren()===1){let r=t.children[0];r instanceof ig||(r.swapWithParent(),ovt(t))}}var Kee,Zee,Qee,Jee,ete,rte,nte,ote,ite,ste,ate,ivt=N(()=>{"use strict";ub();bt();Uf();Gee();qA();ro();Wee();x6();qee();Hee();k6();lte();OCe();Yee();a6();Xee();Kee=class extends Jd{run(r){let n=r.parent;if(r instanceof wl){if(A6(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof wl)this.setMutated(),n.merge(r);else{if(S2e(n.producedFields(),r.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),r.swapWithParent()}}return this.setContinue(),this.flags}},Zee=class extends TO{mergeNodes(r,n){let o=n.shift();for(let i of n)r.removeChild(i),i.parent=o,i.remove()}run(r){let n=r.children.map(i=>i.hash()),o={};for(let i=0;i<n.length;i++)o[n[i]]===void 0?o[n[i]]=[r.children[i]]:o[n[i]].push(r.children[i]);for(let i of nt(o))o[i].length>1&&(this.setMutated(),this.mergeNodes(r,o[i]));for(let i of r.children)this.run(i);return this.mutatedFlag}},Qee=class extends Jd{run(r){return r instanceof fs||r.numChildren()>0||r instanceof ig?this.flags:(this.setMutated(),r.remove(),this.flags)}},Jee=class extends Jd{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(r){if(this.setContinue(),r instanceof oh){let n=r.producedFields();_2e(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=r}return this.flags}reset(){this.fields.clear()}},ete=class extends Jd{run(r){this.setContinue();let o=r.parent.children.filter(s=>s instanceof oh),i=o.pop();for(let s of o)this.setMutated(),i.merge(s);return this.flags}};rte=class extends TO{constructor(){super()}run(r){r instanceof fs&&!r.isRequired()&&(this.setMutated(),r.remove());for(let n of r.children)this.run(n);return this.mutatedFlag}},nte=class extends TO{constructor(r){super(),this.requiresSelectionId=r&&c6(r)}run(r){r instanceof sg&&(this.requiresSelectionId&&(A6(r.parent)||r.parent instanceof ah||r.parent instanceof wl)||(this.setMutated(),r.remove()));for(let n of r.children)this.run(n);return this.mutatedFlag}},ote=class extends Jd{run(r){let n=r.parent,o=[...n.children],i=n.children.filter(s=>s instanceof wl);if(n.numChildren()>1&&i.length>=1){let s={},a=new Set;for(let l of i){let u=l.parse;for(let c of nt(u))c in s?s[c]!==u[c]&&a.add(c):s[c]=u[c]}for(let l of a)delete s[l];if(!bn(s)){this.setMutated();let l=new wl(n,s);for(let u of o){if(u instanceof wl)for(let c of nt(s))delete u.parse[c];n.removeChild(u),u.parent=l,u instanceof wl&&nt(u.parse).length===0&&u.remove()}}}return this.setContinue(),this.flags}},ite=class extends Jd{run(r){let n=r.parent,o=n.children.filter(s=>s instanceof ah),i={};for(let s of o){let a=Tr(s.groupBy);a in i||(i[a]=[]),i[a].push(s)}for(let s of nt(i)){let a=i[s];if(a.length>1){let l=a.pop();for(let u of a)l.merge(u)&&(n.removeChild(u),u.parent=l,u.remove(),this.setMutated())}}return this.setContinue(),this.flags}},ste=class extends Jd{constructor(r){super(),this.model=r}run(r){let n=r.parent,o=!(A6(n)||n instanceof db||n instanceof wl||n instanceof sg),i=[],s=[];for(let a of n.children)a instanceof og&&(o&&!S2e(n.producedFields(),a.dependentFields())?i.push(a):s.push(a));if(i.length>0){let a=i.pop();for(let l of i)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof og?n.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){let a=s.pop();for(let l of s)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}},ate=class extends Jd{run(r){let n=r.parent,o=[...n.children];if(!T2(o,l=>l instanceof fs)||n.numChildren()<=1)return this.setContinue(),this.flags;let s=[],a;for(let l of o)if(l instanceof fs){let u=l;for(;u.numChildren()===1;){let c=u.children[0];if(c instanceof fs)u=c;else break}s.push(...u.children),a?(n.removeChild(l),l.parent=a.parent,a.parent.removeChild(a),a.parent=u,this.setMutated()):a=u}else s.push(l);if(s.length){this.setMutated();for(let l of s)l.parent.removeChild(l),l.parent=a}return this.setContinue(),this.flags}}});function H2(t){let r=[];function n(o){if(o.numChildren()===0)r.push(o);else for(let i of o.children)n(i)}for(let o of t)n(o);return r}function mTr(t){return t}function lg(t,r){return r.map(o=>{if(t instanceof Jd){let i=t.optimizeNextFromLeaves(o);return t.reset(),i}else return t.run(o)}).some(mTr)}function svt(t,r){let n=t.sources,o=new Set;return o.add(lg(new rte,n)),o.add(lg(new nte(r),n)),n=n.filter(i=>i.numChildren()>0),o.add(lg(new Qee,H2(n))),n=n.filter(i=>i.numChildren()>0),o.add(lg(new Kee,H2(n))),o.add(lg(new ste(r),H2(n))),o.add(lg(new Jee,H2(n))),o.add(lg(new ote,H2(n))),o.add(lg(new ite,H2(n))),o.add(lg(new ete,H2(n))),o.add(lg(new Zee,n)),o.add(lg(new ate,H2(n))),t.sources=n,o.has(!0)}function avt(t,r){$ee(t.sources);let n=0,o=0;for(let i=0;i<ute&&svt(t,r);i++)n++;t.sources.map(tte);for(let i=0;i<ute&&svt(t,r);i++)o++;$ee(t.sources),Math.max(n,o)===ute&&st(`Maximum optimization runs(${ute}) reached.`)}var I6,ute,lte=N(()=>{"use strict";cn();Jxt();OCe();ivt();I6="scale_",ute=5});var Gu,cte=N(()=>{"use strict";Gu=class t{constructor(r){Object.defineProperty(this,"signal",{enumerable:!0,get:r})}static fromName(r,n){return new t(()=>r(n))}}});function jCe(t){no(t)?gTr(t):yTr(t)}function gTr(t){let r=t.component.scales;for(let n of nt(r)){let o=xTr(t,n);if(r[n].setWithExplicit("domains",o),wTr(t,n),t.component.data.isFaceted){let s=t;for(;!vl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(let l of o.value)Yv(l)&&(l.data=I6+l.data.replace(I6,""))}}}function yTr(t){for(let n of t.children)jCe(n);let r=t.component.scales;for(let n of nt(r)){let o,i=null;for(let s of t.children){let a=s.component.scales[n];if(a){o===void 0?o=a.getWithExplicit("domains"):o=$f(o,a.getWithExplicit("domains"),"domains","scale",LCe);let l=a.get("selectionExtent");i&&l&&i.selection!==l.selection&&st("The same selection must be used to override scale domains in a layered view."),i=l}}r[n].setWithExplicit("domains",o),i&&r[n].set("selectionExtent",i,!0)}}function bTr(t,r,n,o){if(t==="unaggregated"){let{valid:i,reason:s}=lvt(r,n);if(!i){st(s);return}}else if(t===void 0&&o.useUnaggregatedDomain){let{valid:i}=lvt(r,n);if(i)return"unaggregated"}return t}function xTr(t,r){let n=t.getScaleComponent(r).get("type"),{encoding:o}=t,i=bTr(t.scaleDomain(r),t.typedFieldDef(r),n,t.config.scale);return i!==t.scaleDomain(r)&&(t.specifiedScales[r]=Object.assign(Object.assign({},t.specifiedScales[r]),{domain:i})),r==="x"&&Io(o.x2)?Io(o.x)?$f(Y2(n,i,t,"x"),Y2(n,i,t,"x2"),"domain","scale",LCe):Y2(n,i,t,"x2"):r==="y"&&Io(o.y2)?Io(o.y)?$f(Y2(n,i,t,"y"),Y2(n,i,t,"y2"),"domain","scale",LCe):Y2(n,i,t,"y2"):Y2(n,i,t,r)}function vTr(t,r,n){return t.map(o=>({signal:`{data: ${B$(o,{timeUnit:n,type:r})}}`}))}function RCe(t,r,n){var o;let i=(o=cs(n))===null||o===void 0?void 0:o.unit;return r==="temporal"||i?vTr(t,r,i):[t]}function Y2(t,r,n,o){let{encoding:i}=n,s=Io(i[o]),{type:a}=s,l=s.timeUnit;if(O0t(r)){let d=Y2(t,void 0,n,o),p=RCe(r.unionWith,a,l);return e1([...d.value,...p])}else{if(rr(r))return e1([r]);if(r&&r!=="unaggregated"&&!G2e(r))return e1(RCe(r,a,l))}let u=n.stack;if(u&&o===u.fieldChannel){if(u.offset==="normalize")return $u([[0,1]]);let d=n.requestDataName(zs);return $u([{data:d,field:n.vgField(o,{suffix:"start"})},{data:d,field:n.vgField(o,{suffix:"end"})}])}let c=Pu(o)&&At(s)?_Tr(n,o,t):void 0;if(Lf(s)){let d=RCe([s.datum],a,l);return $u(d)}let f=s;if(r==="unaggregated"){let d=n.requestDataName(zs),{field:p}=s;return $u([{data:d,field:vt({field:p,aggregate:"min"})},{data:d,field:vt({field:p,aggregate:"max"})}])}else if(Sn(f.bin)){if(Qi(t))return t==="bin-ordinal"?$u([]):$u([{data:N$(c)?n.requestDataName(zs):n.requestDataName(sO),field:n.vgField(o,tb(f,o)?{binSuffix:"range"}:{}),sort:c===!0||!wo(c)?{field:n.vgField(o,{}),op:"min"}:c}]);{let{bin:d}=f;if(Sn(d)){let p=CO(n,f.field,d);return $u([new Gu(()=>{let h=n.getSignalName(p);return`[${h}.start, ${h}.stop]`})])}else return $u([{data:n.requestDataName(zs),field:n.vgField(o,{})}])}}else if(f.timeUnit&&qt(["time","utc"],t)&&HF(o,f,no(n)?n.encoding[gl(o)]:void 0,n.stack,n.markDef,n.config)){let d=n.requestDataName(zs);return $u([{data:d,field:n.vgField(o)},{data:d,field:n.vgField(o,{suffix:"end"})}])}else return c?$u([{data:N$(c)?n.requestDataName(zs):n.requestDataName(sO),field:n.vgField(o),sort:c}]):$u([{data:n.requestDataName(zs),field:n.vgField(o)}])}function PCe(t,r){let{op:n,field:o,order:i}=t;return Object.assign(Object.assign({op:n??(r?"sum":O2)},o?{field:If(o)}:{}),i?{order:i}:{})}function wTr(t,r){var n;let o=t.component.scales[r],i=t.specifiedScales[r].domain,s=(n=t.fieldDef(r))===null||n===void 0?void 0:n.bin,a=G2e(i)&&i,l=D2(s)&&RF(s.extent)&&s.extent;(a||l)&&o.set("selectionExtent",a??l,!0)}function _Tr(t,r,n){if(!Qi(n))return;let o=t.fieldDef(r),i=o.sort;if(AJ(i))return{op:"min",field:pb(o,r),order:"ascending"};let{stack:s}=t,a=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(l=>l.fieldDef.field)]:void 0;if(bl(i)){let l=s&&!qt(a,i.field);return PCe(i,l)}else if(TJ(i)){let{encoding:l,order:u}=i,c=t.fieldDef(l),{aggregate:f,field:d}=c,p=s&&!qt(a,d);if(Qp(f)||Km(f))return PCe({field:vt(c),order:u},p);if(kF(f)||!f)return PCe({op:f,field:d,order:u},p)}else{if(i==="descending")return{op:"min",field:t.vgField(r),order:"descending"};if(qt(["ascending",void 0],i))return!0}}function lvt(t,r){let{aggregate:n,type:o}=t;return n?pr(n)&&!jgt[n]?{valid:!1,reason:it.unaggregateDomainWithNonSharedDomainOp(n)}:o==="quantitative"&&r==="log"?{valid:!1,reason:it.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:it.unaggregateDomainHasNoEffectForRawField(t)}}function LCe(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingDomainProperty(n,o,t.value,r.value)),{explicit:t.explicit,value:[...t.value,...r.value]}}function STr(t){let r=Gd(t.map(a=>{if(Yv(a)){let{sort:l}=a;return Pt(a,["sort"])}return a}),Tr),n=Gd(t.map(a=>{if(Yv(a)){let l=a.sort;return l!==void 0&&!N$(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(a=>a!==void 0),Tr);if(r.length===0)return;if(r.length===1){let a=t[0];if(Yv(a)&&n.length>0){let l=n[0];if(n.length>1)st(it.MORE_THAN_ONE_SORT),l=!0;else if(wo(l)&&"field"in l){let u=l.field;a.field===u&&(l=l.order?{order:l.order}:!0)}return Object.assign(Object.assign({},a),{sort:l})}return a}let o=Gd(n.map(a=>N$(a)||!("op"in a)||a.op in Rgt?a:(st(it.domainSortDropped(a)),!0)),Tr),i;o.length===1?i=o[0]:o.length>1&&(st(it.MORE_THAN_ONE_SORT),i=!0);let s=Gd(t.map(a=>Yv(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:r.map(l=>l.field)},i?{sort:i}:{}):Object.assign({fields:r},i?{sort:i}:{})}function AO(t){if(Yv(t)&&pr(t.field))return t.field;if(y0t(t)){let r;for(let n of t.fields)if(Yv(n)&&pr(n.field)){if(!r)r=n.field;else if(r!==n.field)return st(it.FACETED_INDEPENDENT_DIFFERENT_SOURCES),r}return st(it.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),r}else if(b0t(t)){st(it.FACETED_INDEPENDENT_SAME_SOURCE);let r=t.fields[0];return pr(r)?r:void 0}}function q2(t,r){let o=t.component.scales[r].get("domains").map(i=>(Yv(i)&&(i.data=t.lookupDataSource(i.data)),i));return STr(o)}var kO=N(()=>{"use strict";So();ir();Wv();Xl();Ir();Mr();ub();cn();wi();tg();Zy();bt();ho();qA();WA();lte();ds();cte();Oc()});function BCe(t){return sh(t)||SO(t)?t.children.reduce((r,n)=>r.concat(BCe(n)),uvt(t)):uvt(t)}function uvt(t){return nt(t.component.scales).reduce((r,n)=>{let o=t.component.scales[n];if(o.merged)return r;let i=o.combine(),{name:s,type:a,selectionExtent:l,domains:u,range:c,reverse:f}=i,d=Pt(i,["name","type","selectionExtent","domains","range","reverse"]),p=CTr(i.range,s,n),h;l&&(h=Rbt(t,l));let m=q2(t,n);return r.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},m?{domain:m}:{}),h?{domainRaw:h}:{}),{range:p}),f!==void 0?{reverse:f}:{}),d)),r},[])}function CTr(t,r,n){return yl(n)&&Lu(t)?{step:{signal:r+"_step"}}:t}var cvt=N(()=>{"use strict";So();Ir();bt();ho();ds();BA();kO()});var D6,fvt=N(()=>{"use strict";ir();bt();Oc();D6=class extends Bu{constructor(r,n){super({},{name:r}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:T2(this.get("domains"),r=>Bt(r)&&r.length===2&&r[0]<=0&&r[1]>=0)}}});function mvt(t){return t==="x"?"width":t==="y"?"height":void 0}function gvt(t){let r=t.component.scales;for(let n of I2){let o=r[n];if(!o)continue;let i=TTr(n,t);o.setWithExplicit("range",i)}}function dvt(t,r){let n=t.fieldDef(r);if(n&&n.bin&&Sn(n.bin)){let o=CO(t,n.field,n.bin),i=mvt(r),s=t.getName(i);return new Gu(()=>{let a=t.getSignalName(o),l=`(${a}.stop - ${a}.start) / ${a}.step`;return`${t.getSignalName(s)} / (${l})`})}}function TTr(t,r){let n=r.specifiedScales[t],{size:o}=r,s=r.getScaleComponent(t).get("type");for(let a of ETr)if(n[a]!==void 0){let l=wJ(s,a),u=_J(t,a);if(!l)st(it.scalePropertyNotWorkWithScaleType(s,a,t));else if(u)st(u);else switch(a){case"range":return Bt(n.range)&&yl(t)?e1(n.range.map(c=>{if(c==="width"||c==="height"){let f=r.getName(c),d=r.getSignalName.bind(r);return Gu.fromName(d,f)}return c})):e1(n.range);case"scheme":return e1(ATr(n[a]))}}if(t===to||t===pi){let a=t===to?"width":"height",l=o[a];if(Bf(l)){if(Qi(s))return e1({step:l.step});st(it.stepDropped(a))}}return $u(kTr(t,r))}function ATr(t){return F0t(t)?Object.assign({scheme:t.name},kf(t,["name"])):{scheme:t}}function kTr(t,r){let{size:n,config:o,mark:i,encoding:s}=r,a=r.getSignalName.bind(r),{type:l}=Io(s[t]),c=r.getScaleComponent(t).get("type"),{domain:f,domainMid:d}=r.specifiedScales[t];switch(t){case to:case pi:{if(qt(["point","band"],c)){if(t===to&&!n.width){let m=RA(o.view,"width");if(Bf(m))return m}else if(t===pi&&!n.height){let m=RA(o.view,"height");if(Bf(m))return m}}let p=mvt(t),h=r.getName(p);return t===pi&&ma(c)?[Gu.fromName(a,h),0]:[0,Gu.fromName(a,h)]}case Rf:{let p=r.component.scales[t].get("zero"),h=yvt(i,p,o),m=NTr(i,n,r,o);return $F(c)?DTr(h,m,ITr(c,o,f,t)):[h,m]}case Ic:return[0,Math.PI*2];case Jm:return[0,360];case Of:return[0,new Gu(()=>{let p=r.getSignalName("width"),h=r.getSignalName("height");return`min(${p},${h})/2`})];case Yd:return[o.scale.minStrokeWidth,o.scale.maxStrokeWidth];case Xd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case us:return"symbol";case Es:case Ou:case Ru:return c==="ordinal"?l==="nominal"?"category":"ordinal":d!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Mc:case qd:case Hd:return[o.scale.minOpacity,o.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${t}`)}function ITr(t,r,n,o){switch(t){case"quantile":return r.scale.quantileCount;case"quantize":return r.scale.quantizeCount;case"threshold":return n!==void 0&&Bt(n)?n.length+1:(st(it.domainRequiredForThresholdScale(o)),3)}}function DTr(t,r,n){let o=()=>{let i=R2(r),s=R2(t),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return rr(r)?new Gu(o):{signal:o()}}function yvt(t,r,n){if(r)return rr(r)?{signal:`${r.signal} ? 0 : ${yvt(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(it.incompatibleChannel("size",t))}function NTr(t,r,n,o){let i={x:dvt(n,"x"),y:dvt(n,"y")};switch(t){case"bar":case"tick":{if(o.scale.maxBandSize!==void 0)return o.scale.maxBandSize;let s=hvt(r,i,o.view);return _o(s)?s-1:new Gu(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return o.scale.maxStrokeWidth;case"text":return o.scale.maxFontSize;case"point":case"square":case"circle":{if(o.scale.maxSize)return o.scale.maxSize;let s=hvt(r,i,o.view);return _o(s)?Math.pow(pvt*s,2):new Gu(()=>`pow(${pvt} * ${s.signal}, 2)`)}}throw new Error(it.incompatibleChannel("size",t))}function hvt(t,r,n){let o=Bf(t.width)?t.width.step:OA(n,"width"),i=Bf(t.height)?t.height.step:OA(n,"height");return r.x||r.y?new Gu(()=>`min(${[r.x?r.x.signal:o,r.y?r.y.signal:i].join(", ")})`):Math.min(o,i)}var ETr,pvt,bvt=N(()=>{"use strict";ir();Xl();Ir();Mr();L2();cn();wi();FA();bt();ho();qA();cte();Oc();Po();ETr=["range","scheme"];pvt=.95});function $Ce(t,r){no(t)?MTr(t,r):vvt(t,r)}function MTr(t,r){let n=t.component.scales,{config:o,encoding:i,markDef:s,specifiedScales:a}=t;for(let l of nt(n)){let u=a[l],c=n[l],f=t.getScaleComponent(l),d=Io(i[l]),p=u[r],h=f.get("type"),m=f.get("padding"),g=f.get("paddingInner"),y=wJ(h,r),b=_J(l,r);if(p!==void 0&&(y?b&&st(b):st(it.scalePropertyNotWorkWithScaleType(h,r,l))),y&&b===void 0)if(p!==void 0)c.copyKeyFromObject(r,u);else{let x=r in xvt?xvt[r]({model:t,channel:l,fieldOrDatumDef:d,scaleType:h,scalePadding:m,scalePaddingInner:g,domain:u.domain,markDef:s,config:o}):o.scale[r];x!==void 0&&c.set(r,x,!1)}}}function zCe(t){no(t)?gvt(t):vvt(t,"range")}function vvt(t,r){let n=t.component.scales;for(let o of t.children)r==="range"?zCe(o):$Ce(o,r);for(let o of nt(n)){let i;for(let s of t.children){let a=s.component.scales[o];if(a){let l=a.getWithExplicit(r);i=$f(i,l,r,"scale",see((u,c)=>{switch(r){case"range":return u.step&&c.step?u.step-c.step:0}return 0}))}}n[o].setWithExplicit(r,i)}}function FTr(t,r){let n=r.bin;if(Sn(n)){let o=CO(t,r.field,n);return new Gu(()=>t.getSignalName(o))}else if(Zi(n)&&D2(n)&&n.step!==void 0)return{step:n.step}}function OTr(t,r){if(qt([Es,Ou,Ru],t)&&r!=="nominal")return"hcl"}function RTr(t,r,n){var o;if(!(!((o=Kl(n))===null||o===void 0)&&o.bin||qt([Bi.TIME,Bi.UTC],t)))return r in Xy?!0:void 0}function PTr(t,r,n,o,i,s){if(t in Xy){if(Pf(r)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:l}=i;if(a==="bar"&&!(At(o)&&(o.bin||o.timeUnit))&&(l==="vertical"&&t==="x"||l==="horizontal"&&t==="y"))return s.continuousBandSize}if(r===Bi.POINT)return n.pointPadding}}function LTr(t,r,n,o){if(t===void 0&&r in Xy){let{bandPaddingInner:i,barBandPaddingInner:s,rectBandPaddingInner:a}=o;return Fn(i,n==="bar"?s:a)}}function jTr(t,r,n,o,i,s){if(t===void 0&&r in Xy&&n===Bi.BAND){let{bandPaddingOuter:a}=s;return Fn(a,rr(i)?{signal:`${i.signal}/2`}:i/2)}}function BTr(t,r,n,o){if(n==="x"&&o.xReverse!==void 0)return ma(t)&&r==="descending"?rr(o.xReverse)?{signal:`!${o.xReverse.signal}`}:!o.xReverse:o.xReverse;if(ma(t)&&r==="descending")return!0}function $Tr(t,r,n,o,i){if(!!n&&n!=="unaggregated"&&ma(i)){if(Bt(n)){let a=n[0],l=n[n.length-1];if(a<=0&&l>=0)return!0}return!1}if(t==="size"&&r.type==="quantitative"&&!$F(i))return!0;if(!(At(r)&&r.bin)&&qt([...Ts,...Xgt],t)){let{orient:a,type:l}=o;return!(qt(["bar","area","line","trail"],l)&&(a==="horizontal"&&t==="y"||a==="vertical"&&t==="x"))}return!1}var xvt,wvt=N(()=>{"use strict";ir();Xl();Ir();Mr();cn();wi();bt();bt();ho();qA();ds();cte();Oc();bvt();xvt={bins:({model:t,fieldOrDatumDef:r})=>At(r)?FTr(t,r):void 0,interpolate:({channel:t,fieldOrDatumDef:r})=>OTr(t,r.type),nice:({scaleType:t,channel:r,fieldOrDatumDef:n})=>RTr(t,r,n),padding:({channel:t,scaleType:r,fieldOrDatumDef:n,markDef:o,config:i})=>PTr(t,r,i.scale,n,o,i.bar),paddingInner:({scalePadding:t,channel:r,markDef:n,config:o})=>LTr(t,r,n.type,o.scale),paddingOuter:({scalePadding:t,channel:r,scaleType:n,markDef:o,scalePaddingInner:i,config:s})=>jTr(t,r,n,o.type,i,s.scale),reverse:({fieldOrDatumDef:t,scaleType:r,channel:n,config:o})=>{let i=At(t)?t.sort:void 0;return BTr(r,i,n,o.scale)},zero:({channel:t,fieldOrDatumDef:r,domain:n,markDef:o,scaleType:i})=>$Tr(t,r,n,o,i)}});function _vt(t,r,n,o){let i=zTr(r,n,o),{type:s}=t;return Pu(r)?s!==void 0?H2e(r,s)?At(n)&&!q2e(s,n.type)?(st(it.scaleTypeNotWorkWithFieldDef(s,i)),i):s:(st(it.scaleTypeNotWorkWithChannel(r,s,i)),i):i:null}function zTr(t,r,n){var o;switch(r.type){case"nominal":case"ordinal":if(Hv(t)||OF(t)==="discrete")return t==="shape"&&r.type==="ordinal"&&st(it.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in Xy){if(qt(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&t in pJ)return"band";return r.band!==void 0||MJ(r)&&(!((o=r.axis)===null||o===void 0)&&o.tickBand)?"band":"point";case"temporal":return Hv(t)?"time":OF(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"temporal")),"ordinal"):At(r)&&r.timeUnit&&cs(r.timeUnit).utc?"utc":"time";case"quantitative":return Hv(t)?At(r)&&Sn(r.bin)?"bin-ordinal":"linear":OF(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(it.invalidFieldType(r.type))}var Svt=N(()=>{"use strict";Xl();Ir();Mr();cn();wi();Zy();bt();Ir()});function Cvt(t,{ignoreRange:r}={}){Evt(t),jCe(t);for(let n of R0t)$Ce(t,n);r||zCe(t)}function Evt(t){no(t)?t.component.scales=UTr(t):t.component.scales=GTr(t)}function UTr(t){let{encoding:r,mark:n}=t;return I2.reduce((o,i)=>{let s=Io(r[i]);if(s&&n===iJ&&i===us&&s.type===eg)return o;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a=a??{};let l=_vt(a,i,s,n);o[i]=new D6(t.scaleName(i+"",!0),{value:l,explicit:a.type===l})}return o},{})}function GTr(t){var r;let n=t.component.scales={},o={},i=t.component.resolve;for(let s of t.children){Evt(s);for(let a of nt(s.component.scales))if(i.scale[a]=(r=i.scale[a])!==null&&r!==void 0?r:Oxt(a,t),i.scale[a]==="shared"){let l=o[a],u=s.component.scales[a].getWithExplicit("type");l?I0t(l.value,u.value)?o[a]=$f(l,u,"type","scale",VTr):(i.scale[a]="independent",delete o[a]):o[a]=u}}for(let s of nt(o)){let a=t.scaleName(s,!0),l=o[s];n[s]=new D6(a,l);for(let u of t.children){let c=u.component.scales[s];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return n}var VTr,Tvt=N(()=>{"use strict";Ir();Mr();ha();wi();Zd();bt();ds();E6();Oc();fvt();kO();wvt();Svt();VTr=see((t,r)=>V2e(t)-V2e(r))});function no(t){return t?.type==="unit"}function vl(t){return t?.type==="facet"}function SO(t){return t?.type==="concat"}function sh(t){return t?.type==="layer"}var N6,HA,IO,ds=N(()=>{"use strict";So();Ir();Mr();Fc();cn();wi();rO();FA();W$();t6();bt();ho();v6();Po();wCe();S6();C6();SCe();MCe();NCe();qxt();Kxt();cvt();kO();Tvt();Oc();N6=class{constructor(){this.nameMap={}}rename(r,n){this.nameMap[r]=n}has(r){return this.nameMap[r]!==void 0}get(r){for(;this.nameMap[r]&&r!==this.nameMap[r];)r=this.nameMap[r];return r}};HA=class{constructor(r,n,o,i,s,a,l){var u,c;this.type=n,this.parent=o,this.config=s,this.view=l,this.children=[],this.correctDataNames=f=>(f.from&&f.from.data&&(f.from.data=this.lookupDataSource(f.from.data)),f.from&&f.from.facet&&f.from.facet.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f),this.parent=o,this.config=s,this.name=(u=r.name)!==null&&u!==void 0?u:i,this.title=rg(r.title)?{text:r.title}:r.title,this.scaleNameMap=o?o.scaleNameMap:new N6,this.projectionNameMap=o?o.projectionNameMap:new N6,this.signalNameMap=o?o.signalNameMap:new N6,this.data=r.data,this.description=r.description,this.transforms=lbt((c=r.transform)!==null&&c!==void 0?c:[]),this.layout=n==="layer"||n==="unit"?{}:byt(r,n,s),this.component={data:{sources:o?o.component.data.sources:[],outputNodes:o?o.component.data.outputNodes:{},outputNodeRefCounts:o?o.component.data.outputNodeRefCounts:{},isFaceted:Xv(r)||o&&o.component.data.isFaceted&&r.data===void 0},layoutSize:new Bu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?sr(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Cvt(this)}parseProjection(){FCe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){ICe(this)}assembleGroupStyle(){var r,n;if(this.type==="unit"||this.type==="layer")return(n=(r=this.view)===null||r===void 0?void 0:r.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(r){let{style:n}=r,o=Pt(r,["style"]),i={};for(let s of nt(o)){let a=o[s];a!==void 0&&(i[s]=mo(a))}return i}assembleGroupEncodeEntry(r){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!r&&(this.description&&(n.description=mo(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):bn(n)?void 0:n}assembleLayout(){if(!this.layout)return;let r=this.layout,{spacing:n}=r,o=Pt(r,["spacing"]),{component:i,config:s}=this,a=Nxt(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),o),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:r}=this.component,n=[];for(let o of ml)r[o].title&&n.push(Axt(this,o));for(let o of xO)n=n.concat(Dxt(this,o));return n}assembleAxes(){return xxt(this.component.axes,this.config)}assembleLegends(){return Bee(this)}assembleProjections(){return Gxt(this)}assembleTitle(){var r,n,o;let i=(r=this.title)!==null&&r!==void 0?r:{},{encoding:s}=i,a=Pt(i,["encoding"]),l=Object.assign(Object.assign(Object.assign({},RJ(this.config.title).nonMark),a),s?{encode:{update:s}}:{});if(l.text)return qt(["unit","layer"],this.type)?qt(["middle",void 0],l.anchor)&&(l.frame=(n=l.frame)!==null&&n!==void 0?n:"group"):l.anchor=(o=l.anchor)!==null&&o!==void 0?o:"start",bn(l)?void 0:l}assembleGroup(r=[]){let n={};r=r.concat(this.assembleSignals()),r.length>0&&(n.signals=r);let o=this.assembleLayout();o&&(n.layout=o),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||vl(this.parent)?BCe(this):[];i.length>0&&(n.scales=i);let s=this.assembleAxes();s.length>0&&(n.axes=s);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(r){return kn((this.name?this.name+"_":"")+r)}requestDataName(r){var n;let o=this.getName(r),i=this.component.data.outputNodeRefCounts;return i[o]=((n=i[o])!==null&&n!==void 0?n:0)+1,o}getSizeSignalRef(r){if(vl(this.parent)){let n=Ree(r),o=k2(n),i=this.component.scales[o];if(i&&!i.merged){let s=i.get("type"),a=i.get("range");if(Qi(s)&&Lu(a)){let l=i.get("name"),u=q2(this,o),c=AO(u);if(c){let f=vt({aggregate:"distinct",field:c},{expr:"datum"});return{signal:_Ce(l,i,f)}}else return st(`Unknown field for ${o}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(r))}}lookupDataSource(r){let n=this.component.data.outputNodes[r];return n?n.getSource():r}getSignalName(r){return this.signalNameMap.get(r)}renameSignal(r,n){this.signalNameMap.rename(r,n)}renameScale(r,n){this.scaleNameMap.rename(r,n)}renameProjection(r,n){this.projectionNameMap.rename(r,n)}scaleName(r,n){if(n)return this.getName(r);if(cJ(r)&&Pu(r)&&this.component.scales[r]||this.scaleNameMap.has(this.getName(r)))return this.scaleNameMap.get(this.getName(r))}projectionName(r){if(r)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(r){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[r];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(r):void 0}getSelectionComponent(r,n){let o=this.component.selection[r];if(!o&&this.parent&&(o=this.parent.getSelectionComponent(r,n)),!o)throw new Error(it.selectionNotFound(n));return o}hasAxisOrientSignalRef(){var r,n;return((r=this.component.axes.x)===null||r===void 0?void 0:r.some(o=>o.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(o=>o.hasOrientSignalRef()))}},IO=class extends HA{vgField(r,n={}){let o=this.fieldDef(r);if(o)return vt(o,n)}reduceFieldDef(r,n){return jJ(this.getMapping(),(o,i,s)=>{let a=Kl(i);return a?r(o,a,s):o},n)}forEachFieldDef(r,n){H$(this.getMapping(),(o,i)=>{let s=Kl(o);s&&r(s,i)},n)}}});var DO,UCe=N(()=>{"use strict";So();bt();ro();DO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(s=a[1])!==null&&s!==void 0?s:"density"]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.density,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{density:n}=r,o=Pt(r,["density"]);return Object.assign({type:"kde",field:n},o)}}});var NO,VCe=N(()=>{"use strict";Ir();Mr();ha();wi();bt();Po();ro();NO=class t extends Dr{constructor(r,n){super(r),this.filter=n}clone(){return new t(null,Object.assign({},this.filter))}static make(r,n){let{config:o,mark:i,markDef:s}=n;if(ln("invalid",s,o)!=="filter")return null;let l=n.reduceFieldDef((u,c,f)=>{let d=Pu(f)&&n.getScaleComponent(f);if(d){let p=d.get("type");ma(p)&&c.aggregate!=="count"&&!Df(i)&&(u[c.field]=c)}return u},{});return nt(l).length?new t(r,l):null}dependentFields(){return new Set(nt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Tr(this.filter)}`}assemble(){let r=nt(this.filter).reduce((n,o)=>{let i=this.filter[o],s=vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return r.length>0?{type:"filter",expr:r.join(" && ")}:null}}});var MO,GCe=N(()=>{"use strict";bt();ro();MO=class t extends Dr{constructor(r,n){super(r),this.transform=n,this.transform=sr(n);let{flatten:o,as:i=[]}=this.transform;this.transform.as=o.map((s,a)=>{var l;return(l=i[a])!==null&&l!==void 0?l:s})}clone(){return new t(this.parent,sr(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Tr(this.transform)}`}assemble(){let{flatten:r,as:n}=this.transform;return{type:"flatten",fields:r,as:n}}}});var FO,WCe=N(()=>{"use strict";bt();ro();FO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,sr(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Tr(this.transform)}`}assemble(){let{fold:r,as:n}=this.transform;return{type:"fold",fields:r,as:n}}}});var OO,qCe=N(()=>{"use strict";ir();Ir();Mr();Zd();bt();ro();OO=class t extends Dr{constructor(r,n,o,i){super(r),this.fields=n,this.geojson=o,this.signal=i}clone(){return new t(null,sr(this.fields),this.geojson,this.signal)}static parseAll(r,n){if(n.component.projection&&!n.component.projection.isFit)return r;let o=0;for(let i of[[Nc,Dc],[Hl,Fu]]){let s=i.map(a=>{let l=Io(n.encoding[a]);return At(l)?l.field:Lf(l)?{expr:`${l.datum}`}:ju(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(r=new t(r,s,null,n.getName(`geojson_${o++}`)))}if(n.channelHasField(us)){let i=n.typedFieldDef(us);i.type===eg&&(r=new t(r,null,i.field,n.getName(`geojson_${o++}`)))}return r}dependentFields(){var r;let n=((r=this.fields)!==null&&r!==void 0?r:[]).filter(pr);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Tr(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}});var RO,HCe=N(()=>{"use strict";ir();Ir();Mr();bt();ro();RO=class t extends Dr{constructor(r,n,o,i){super(r),this.projection=n,this.fields=o,this.as=i}clone(){return new t(null,this.projection,sr(this.fields),sr(this.as))}static parseAll(r,n){if(!n.projectionName())return r;for(let o of[[Nc,Dc],[Hl,Fu]]){let i=o.map(a=>{let l=Io(n.encoding[a]);return At(l)?l.field:Lf(l)?{expr:`${l.datum}`}:ju(l)?{expr:`${l.value}`}:void 0}),s=o[0]===Hl?"2":"";(i[0]||i[1])&&(r=new t(r,n.projectionName(),i,[n.getName("x"+s),n.getName("y"+s)]))}return r}dependentFields(){return new Set(this.fields.filter(pr))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Tr(this.fields)} ${Tr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}});var YA,YCe=N(()=>{"use strict";Mr();Fc();t6();bt();ro();YA=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.impute,this.transform.key,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(r){let{start:n=0,stop:o,step:i}=r;return{signal:`sequence(${[n,o,...i?[i]:[]].join(",")})`}}static makeFromTransform(r,n){return new t(r,n)}static makeFromEncoding(r,n){let o=n.encoding,i=o.x,s=o.y;if(At(i)&&At(s)){let a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;let l=i.impute?s:s.impute?i:void 0,{method:u,value:c,frame:f,keyvals:d}=a.impute,p=BJ(n.mark,o);return new t(r,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:l.field},u?{method:u}:{}),c!==void 0?{value:c}:{}),f?{frame:f}:{}),d!==void 0?{keyvals:d}:{}),p.length?{groupby:p}:{}))}return null}hash(){return`Impute ${Tr(this.transform)}`}assemble(){let{impute:r,key:n,keyvals:o,method:i,groupby:s,value:a,frame:l=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:r,key:n},o?{keyvals:Uyt(o)?this.processSequence(o):o}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let c=Object.assign({type:"window",as:[`imputed_${r}_value`],ops:[i],fields:[r],frame:l,ignorePeers:!1},s?{groupby:s}:{}),f={type:"formula",expr:`datum.${r} === null ? datum.imputed_${r}_value : datum.${r}`,as:r};return[u,c,f]}else return[u]}}});var PO,XCe=N(()=>{"use strict";So();bt();ro();PO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.loess,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{loess:n,on:o}=r,i=Pt(r,["loess","on"]);return Object.assign({type:"loess",x:o,y:n},i)}}});var LO,KCe=N(()=>{"use strict";ir();cn();t6();bt();ro();jO();EO();LO=class t extends Dr{constructor(r,n,o){super(r),this.transform=n,this.secondary=o}clone(){return new t(null,sr(this.transform),this.secondary)}static make(r,n,o,i){let s=n.component.data.sources,{from:a}=o,l=null;if(Gyt(a)){let u=ZCe(a.data,s);u||(u=new Qd(a.data),s.push(u));let c=n.getName(`lookup_${i}`);l=new fs(u,c,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=l}else if(Wyt(a)){let u=a.selection;if(o=Object.assign({as:u},o),l=n.getSelectionComponent(kn(u),u).materialized,!l)throw new Error(it.noSameUnitLookup(u))}return new t(r,o,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Mn(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Tr({transform:this.transform,secondary:this.secondary})}`}assemble(){let r;if(this.transform.from.fields)r=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Mn(this.transform.as)}:{});else{let n=this.transform.as;pr(n)||(st(it.NO_FIELDS_NEEDS_AS),n="_lookup"),r={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},r),this.transform.default?{default:this.transform.default}:{})}}});var BO,QCe=N(()=>{"use strict";So();bt();ro();BO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.quantile,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{quantile:n}=r,o=Pt(r,["quantile"]);return Object.assign({type:"quantile",field:n},o)}}});var $O,JCe=N(()=>{"use strict";So();bt();ro();$O=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.regression,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{regression:n,on:o}=r,i=Pt(r,["regression","on"]);return Object.assign({type:"regression",x:o,y:n},i)}}});var zO,eEe=N(()=>{"use strict";bt();ro();zO=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}addDimensions(r){var n;this.transform.groupby=Gd(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(r),o=>o)}producedFields(){}dependentFields(){var r;return new Set([this.transform.pivot,this.transform.value,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}hash(){return`PivotTransform ${Tr(this.transform)}`}assemble(){let{pivot:r,value:n,groupby:o,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:r,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),o!==void 0?{groupby:o}:{})}}});var UO,tEe=N(()=>{"use strict";bt();ro();UO=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Tr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}});function Avt(t){let r=0;function n(o,i){var s;if(o instanceof Qd&&!o.isGenerator&&!j2(o.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),o instanceof wl&&(o.parent instanceof Qd&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:o.assembleFormatParse()}),i.transform.push(...o.assembleTransforms(!0))):i.transform.push(...o.assembleTransforms())),o instanceof ig){i.name||(i.name=`data_${r++}`),!i.source||i.transform.length>0?(t.push(i),o.data=i.name):o.data=i.source;for(let a of o.assemble())t.push(a);return}switch((o instanceof G2||o instanceof W2||o instanceof NO||o instanceof db||o instanceof GA||o instanceof RO||o instanceof OO||o instanceof ah||o instanceof LO||o instanceof o1||o instanceof ag||o instanceof FO||o instanceof MO||o instanceof DO||o instanceof PO||o instanceof BO||o instanceof $O||o instanceof sg||o instanceof UO||o instanceof zO)&&i.transform.push(o.assemble()),(o instanceof og||o instanceof oh||o instanceof YA||o instanceof hb)&&i.transform.push(...o.assemble()),o instanceof fs&&(i.source&&i.transform.length===0?o.setSource(i.source):o.parent instanceof fs?o.setSource(i.name):(i.name||(i.name=`data_${r++}`),o.setSource(i.name),o.numChildren()===1&&(t.push(i),i={name:null,source:i.name,transform:[]}))),o.numChildren()){case 0:o instanceof fs&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(o.children[0],i);break;default:{i.name||(i.name=`data_${r++}`);let a=i.name;!i.source||i.transform.length>0?t.push(i):a=i.source;for(let l of o.children)n(l,{name:null,source:a,transform:[]});break}}}return n}function kvt(t){let r=[],n=Avt(r);for(let o of t.children)n(o,{source:t.name,name:null,transform:[]});return r}function Ivt(t,r){var n,o;let i=[],s=Avt(i),a=0;for(let u of t.sources){u.hasName()||(u.dataName=`source_${a++}`);let c=u.assemble();s(u,c)}for(let u of i)u.transform.length===0&&delete u.transform;let l=0;for(let[u,c]of i.entries())((n=c.transform)!==null&&n!==void 0?n:[]).length===0&&!c.source&&i.splice(l++,0,i.splice(u,1)[0]);for(let u of i)for(let c of(o=u.transform)!==null&&o!==void 0?o:[])c.type==="lookup"&&(c.from=t.outputNodes[c.from].getSource());for(let u of i)u.name in r&&(u.values=r[u.name]);return i}var rEe=N(()=>{"use strict";ub();Gee();qA();WA();ro();UCe();Wee();x6();VCe();GCe();WCe();qee();qCe();HCe();zee();Hee();YCe();k6();XCe();KCe();QCe();JCe();eEe();tEe();Uee();EO();Yee();a6();Xee()});function WTr(t){return t==="top"||t==="left"||rr(t)?"header":"footer"}function Nvt(t){for(let r of ml)qTr(t,r);Dvt(t,"x"),Dvt(t,"y")}function qTr(t,r){var n;let{facet:o,config:i,child:s,component:a}=t;if(t.channelHasField(r)){let l=o[r],u=n1("title",null,i,r),c=th(l,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});s.component.layoutHeaders[r].title&&(c=Bt(c)?c.join(", "):c,c+=" / "+s.component.layoutHeaders[r].title,s.component.layoutHeaders[r].title=null);let f=n1("labelOrient",l,i,r),d=(n=l.header)!==null&&n!==void 0?n:{},p=Fn(d.labels,i.header.labels,!0),h=qt(["bottom","right"],f)?"footer":"header";a.layoutHeaders[r]={title:c,facetFieldDef:l,[h]:r==="facet"?[]:[Mvt(t,r,p)]}}}function Mvt(t,r,n){let o=r==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(o)?t.child.getSizeSignalRef(o):void 0,axes:[]}}function Dvt(t,r){var n;let{child:o}=t;if(o.component.axes[r]){let{layoutHeaders:i,resolve:s}=t.component;if(s.axis[r]=_O(s,r),s.axis[r]==="shared"){let a=r==="x"?"column":"row",l=i[a];for(let u of o.component.axes[r]){let c=WTr(u.get("orient"));l[c]=(n=l[c])!==null&&n!==void 0?n:[Mvt(t,a,!1)];let f=yO(u,"main",t.config,{header:!0});f&&l[c][0].axes.push(f),u.mainExtracted=!0}}}}var Fvt=N(()=>{"use strict";ir();Ir();Mr();bt();ho();v6();E6();Mee()});function Ovt(t){dte(t),fte(t,"width"),fte(t,"height")}function Rvt(t){dte(t);let r=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";fte(t,r),fte(t,n)}function dte(t){for(let r of t.children)r.parseLayoutSize()}function fte(t,r){let n=Ree(r),o=k2(n),i=t.component.resolve,s=t.component.layoutSize,a;for(let l of t.children){let u=l.component.layoutSize.getWithExplicit(n),c=i.scale[o];if(c==="independent"&&u.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==u.value){a=void 0;break}a=$f(a,u,n,"")}else a=u}if(a){for(let l of t.children)t.renameSignal(l.getName(n),t.getName(r)),l.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(r,a)}else s.setWithExplicit(r,{explicit:!1,value:void 0})}function Pvt(t){let{size:r,component:n}=t;for(let o of Ts){let i=Yl(o);if(r[i]){let s=r[i];n.layoutSize.set(i,Bf(s)?"step":s,!0)}else{let s=HTr(t,i);n.layoutSize.set(i,s,!1)}}}function HTr(t,r){let n=r==="width"?"x":"y",o=t.config,i=t.getScaleComponent(n);if(i){let s=i.get("type"),a=i.get("range");if(Qi(s)){let l=RA(o.view,r);return Lu(a)||Bf(l)?"step":l}else return J$(o.view,r)}else{if(t.hasProjection||t.mark==="arc")return J$(o.view,r);{let s=RA(o.view,r);return Bf(s)?s.step:s}}}var M6=N(()=>{"use strict";Ir();L2();wi();FA();ho();Oc();SCe()});function pte(t,r,n){return vt(r,Object.assign({suffix:`by_${vt(t)}`},n??{}))}var hte,nEe=N(()=>{"use strict";ir();Xl();Ir();Mr();Fc();cn();wi();tg();Kv();bt();ho();mte();rEe();WA();jO();wCe();Mee();S6();Fvt();M6();ds();kO();BA();hte=class t extends IO{constructor(r,n,o,i){super(r,"facet",n,o,i,r.resolve),this.child=VO(r.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(r.facet,i)}initFacet(r,n){return ib(r)?jJ(r,(o,i,s)=>qt([Nf,Mf],s)?i.field===void 0?(st(it.emptyFieldDef(i,s)),o):(o[s]=G$(i,s,n),o):(st(it.incompatibleChannel(s,"facet")),o),{}):{facet:G$(r,"facet",n)}}channelHasField(r){return!!this.facet[r]}fieldDef(r){return this.facet[r]}parseData(){this.component.data=X2(this),this.child.parseData()}parseLayoutSize(){dte(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Nvt(this)}assembleSelectionTopLevelSignals(r){return this.child.assembleSelectionTopLevelSignals(r)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(r){return this.child.assembleSelectionData(r)}getHeaderLayoutMixins(){var r,n,o;let i={};for(let s of ml)for(let a of vO){let l=this.component.layoutHeaders[s],u=l[a],{facetFieldDef:c}=l;if(c){let f=n1("titleOrient",c,this.config,s);if(qt(["right","bottom"],f)){let d=bO(s,f);i.titleAnchor=(r=i.titleAnchor)!==null&&r!==void 0?r:{},i.titleAnchor[d]="end"}}if(u?.[0]){let f=s==="row"?"height":"width",d=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(f)&&(i[d]=(n=i[d])!==null&&n!==void 0?n:{},i[d][s]=.5),l.title&&(i.offset=(o=i.offset)!==null&&o!==void 0?o:{},i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){let{column:r,row:n}=this.facet,o=r?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!r&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),o?{columns:o}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof t))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(r){return this.parent&&this.parent instanceof t?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vt(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(r)):super.assembleGroup(r)}getCardinalityAggregateForChild(){let r=[],n=[],o=[];if(this.child instanceof t){if(this.child.channelHasField("column")){let i=vt(this.child.facet.column);r.push(i),n.push("distinct"),o.push(`distinct_${i}`)}}else for(let i of Ts){let s=this.child.component.scales[i];if(s&&!s.merged){let a=s.get("type"),l=s.get("range");if(Qi(a)&&Lu(l)){let u=q2(this.child,i),c=AO(u);c?(r.push(c),n.push("distinct"),o.push(`distinct_${c}`)):st(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:r,ops:n,as:o}}assembleFacet(){let{name:r,data:n}=this.component.data.facetRoot,{row:o,column:i}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(let f of ml){let d=this.facet[f];if(d){u.push(vt(d));let{bin:p,sort:h}=d;if(Sn(p)&&u.push(vt(d,{binSuffix:"end"})),bl(h)){let{field:m,op:g=O2}=h,y=pte(d,h);o&&i?(s.push(y),a.push("max"),l.push(y)):(s.push(m),a.push(g),l.push(y))}else if(Bt(h)){let m=pb(d,f);s.push(m),a.push("max"),l.push(m)}}}let c=!!o&&!!i;return Object.assign({name:r,data:n,groupby:u},c||s.length>0?{aggregate:Object.assign(Object.assign({},c?{cross:c}:{}),s.length?{fields:s,ops:a,as:l}:{})}:{})}facetSortFields(r){let{facet:n}=this,o=n[r];return o?bl(o.sort)?[pte(o,o.sort,{expr:"datum"})]:Bt(o.sort)?[pb(o,r,{expr:"datum"})]:[vt(o,{expr:"datum"})]:[]}facetSortOrder(r){let{facet:n}=this,o=n[r];if(o){let{sort:i}=o;return[(bl(i)?i.order:!Bt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:r,config:n}=this;if(r.facet)return Fee(r.facet,"facet",n);let o={row:["top","bottom"],column:["left","right"]};for(let i of xO)if(r[i]){let s=n1("labelOrient",r[i],n,i);if(qt(o[i],s))return Fee(r[i],i,n)}}assembleMarks(){let{child:r}=this,n=this.component.data.facetRoot,o=kvt(n),i=r.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||r.assembleTitle(),a=r.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:ml.map(u=>this.facetSortFields(u)).flat(),order:ml.map(u=>this.facetSortOrder(u)).flat()}}),o.length>0?{data:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup(Nbt(this,[])))]}getMapping(){return this.facet}}});function Lvt(t,r){let{row:n,column:o}=r;if(n&&o){let i=null;for(let s of[n,o])if(bl(s.sort)){let{field:a,op:l=O2}=s.sort;t=i=new ag(t,{joinaggregate:[{op:l,field:a,as:pte(s,s.sort,{forAs:!0})}],groupby:[vt(s)]})}return i}return null}var jvt=N(()=>{"use strict";Mr();tg();nEe();k6()});function ZCe(t,r){var n,o,i,s,a,l,u,c,f,d;for(let p of r){let h=p.data;if(!(t.name&&p.hasName()&&t.name!==p.dataName)&&!(!((n=t.format)===null||n===void 0)&&n.mesh&&(!((o=h.format)===null||o===void 0)&&o.feature))&&!((!((i=t.format)===null||i===void 0)&&i.feature||!((s=h.format)===null||s===void 0)&&s.feature)&&((a=t.format)===null||a===void 0?void 0:a.feature)!==((l=h.format)===null||l===void 0?void 0:l.feature))&&!((!((u=t.format)===null||u===void 0)&&u.mesh||!((c=h.format)===null||c===void 0)&&c.mesh)&&((f=t.format)===null||f===void 0?void 0:f.mesh)!==((d=h.format)===null||d===void 0?void 0:d.mesh))){if(iO(t)&&iO(h)){if(Gv(t.values,h.values))return p}else if(j2(t)&&j2(h)){if(t.url===h.url)return p}else if(lee(t)&&t.name===p.dataName)return p}}return null}function YTr(t,r){if(t.data||!t.parent){if(t.data===null){let o=new Qd({values:[]});return r.push(o),o}let n=ZCe(t.data,r);if(n)return lb(t.data)||(n.data.format=ggt({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{let o=new Qd(t.data);return r.push(o),o}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function XTr(t,r,n){var o,i;let s=0;for(let a of r.transforms){let l,u;if(tbt(a))u=t=new GA(t,a),l="derived";else if(NSe(a)){let c=tvt(a);u=t=(o=wl.makeWithAncestors(t,{},c,n))!==null&&o!==void 0?o:t,t=new db(t,r,a.filter)}else if(rbt(a))u=t=og.makeFromTransform(t,a,r),l="number";else if(obt(a))l="date",n.getWithExplicit(a.field).value===void 0&&(t=new wl(t,{[a.field]:l}),n.set(a.field,l,!1)),u=t=oh.makeFromTransform(t,a);else if(ibt(a))u=t=ah.makeFromTransform(t,a),l="number",c6(r)&&(t=new sg(t));else if(Vyt(a))u=t=LO.make(t,r,a,s++),l="derived";else if(Qyt(a))u=t=new o1(t,a),l="number";else if(Jyt(a))u=t=new ag(t,a),l="number";else if(sbt(a))u=t=hb.makeFromTransform(t,a),l="derived";else if(abt(a))u=t=new FO(t,a),l="derived";else if(ebt(a))u=t=new MO(t,a),l="derived";else if(qyt(a))u=t=new zO(t,a),l="derived";else if(Zyt(a))t=new UO(t,a);else if(nbt(a))u=t=YA.makeFromTransform(t,a),l="derived";else if(Hyt(a))u=t=new DO(t,a),l="derived";else if(Yyt(a))u=t=new BO(t,a),l="derived";else if(Xyt(a))u=t=new $O(t,a),l="derived";else if(Kyt(a))u=t=new PO(t,a),l="derived";else{st(it.invalidTransformIgnored(a));continue}if(u&&l!==void 0)for(let c of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(c,l,!1)}return t}function X2(t){var r,n,o,i,s,a,l,u,c,f;let d=YTr(t,t.component.data.sources),{outputNodes:p,outputNodeRefCounts:h}=t.component.data,m=t.parent?t.parent.component.data.ancestorParse.clone():new aee,g=t.data;lb(g)?(ISe(g)?d=new W2(d,g.sequence):e6(g)&&(d=new G2(d,g.graticule)),m.parseNothing=!0):((r=g?.format)===null||r===void 0?void 0:r.parse)===null&&(m.parseNothing=!0),d=(n=wl.makeExplicit(d,t,m))!==null&&n!==void 0?n:d,d=new sg(d);let y=t.parent&&sh(t.parent);(no(t)||vl(t))&&y&&(d=(o=og.makeFromEncoding(d,t))!==null&&o!==void 0?o:d),t.transforms.length>0&&(d=XTr(d,t,m));let b=nvt(t),x=rvt(t);d=(i=wl.makeWithAncestors(d,{},Object.assign(Object.assign({},b),x),m))!==null&&i!==void 0?i:d,no(t)&&(d=OO.parseAll(d,t),d=RO.parseAll(d,t)),(no(t)||vl(t))&&(y||(d=(s=og.makeFromEncoding(d,t))!==null&&s!==void 0?s:d),d=(a=oh.makeFromEncoding(d,t))!==null&&a!==void 0?a:d,d=GA.parseAllForSortIndex(d,t));let v=t.getName(sO),w=new fs(d,v,sO,h);if(p[v]=w,d=w,no(t)){let E=ah.makeFromEncoding(d,t);E&&(d=E,c6(t)&&(d=new sg(d))),d=(l=YA.makeFromEncoding(d,t))!==null&&l!==void 0?l:d,d=(u=hb.makeFromEncoding(d,t))!==null&&u!==void 0?u:d}no(t)&&(d=(c=NO.make(d,t))!==null&&c!==void 0?c:d);let _=t.getName(zs),S=new fs(d,_,zs,h);p[_]=S,d=S,no(t)&&bxt(t,S);let C=null;if(vl(t)){let E=t.getName("facet");d=(f=Lvt(d,t.facet))!==null&&f!==void 0?f:d,C=new ig(d,t,E,S.getSource()),p[E]=C}return Object.assign(Object.assign({},t.component.data),{outputNodes:p,outputNodeRefCounts:h,raw:w,main:S,facetRoot:C,ancestorParse:m})}var jO=N(()=>{"use strict";zyt();ub();cn();t6();bt();ds();Uf();LA();Gee();qA();WA();ro();UCe();Wee();x6();VCe();GCe();WCe();qee();qCe();HCe();zee();Hee();YCe();k6();jvt();XCe();KCe();eEe();QCe();JCe();tEe();Uee();EO();Yee();a6();Xee()});var gte,Bvt=N(()=>{"use strict";cn();rO();bt();mte();jO();C6();M6();ds();gte=class extends HA{constructor(r,n,o,i){var s,a,l,u;super(r,"concat",n,o,i,r.resolve),(((a=(s=r.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((u=(l=r.resolve)===null||l===void 0?void 0:l.axis)===null||u===void 0?void 0:u.y)==="shared")&&st(it.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(r).map((c,f)=>VO(c,this,this.getName("concat_"+f),void 0,i))}parseData(){this.component.data=X2(this);for(let r of this.children)r.parseData()}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){for(let r of this.children)r.parseAxesAndHeaders()}getChildren(r){return P2(r)?r.vconcat:tO(r)?r.hconcat:r.concat}parseLayoutSize(){Rvt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.forEach(r=>r.assembleSignals()),[]}assembleLayoutSignals(){let r=wO(this);for(let n of this.children)r.push(...n.assembleLayoutSignals());return r}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleMarks(){return this.children.map(r=>{let n=r.assembleTitle(),o=r.assembleGroupStyle(),i=r.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:r.getName("group")},n?{title:n}:{}),o?{style:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup())})}assembleDefaultLayout(){let r=this.layout.columns;return Object.assign(Object.assign({},r!=null?{columns:r}:{}),{bounds:"full",align:"each"})}}});function KTr(t){return t===!1||t===null}var ZTr,oEe,yte,$vt=N(()=>{"use strict";M$();bt();Oc();ho();ZTr=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},T2e),{labelExpr:1,encode:1}),oEe=nt(ZTr),yte=class t extends Bu{constructor(r={},n={},o=!1){super(),this.explicit=r,this.implicit=n,this.mainExtracted=o}clone(){return new t(sr(this.explicit),sr(this.implicit),this.mainExtracted)}hasAxisPart(r){return r==="axis"?!0:r==="grid"||r==="title"?!!this.get(r):!KTr(this.get(r))}hasOrientSignalRef(){return rr(this.explicit.orient)}}});function zvt(t,r,n){var o;let{encoding:i,config:s}=t,a=(o=Io(i[r]))!==null&&o!==void 0?o:Io(i[gl(r)]),l=t.axis(r)||{},{format:u,formatType:c}=l;return nb(c)?Object.assign({text:V$({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:s})},n):n}var Uvt=N(()=>{"use strict";Ir();Mr();ob()});function Vvt(t){return Ts.reduce((r,n)=>(t.component.scales[n]&&(r[n]=[oAr(n,t)]),r),{})}function Gvt(t){var r;let{axes:n,resolve:o}=t.component,i={top:0,bottom:0,right:0,left:0};for(let s of t.children){s.parseAxesAndHeaders();for(let a of nt(s.component.axes))o.axis[a]=_O(t.component.resolve,a),o.axis[a]==="shared"&&(n[a]=eAr(n[a],s.component.axes[a]),n[a]||(o.axis[a]="independent",delete n[a]))}for(let s of Ts){for(let a of t.children)if(a.component.axes[s]){if(o.axis[s]==="independent"){n[s]=((r=n[s])!==null&&r!==void 0?r:[]).concat(a.component.axes[s]);for(let l of a.component.axes[s]){let{value:u,explicit:c}=l.getWithExplicit("orient");if(!rr(u)){if(i[u]>0&&!c){let f=JTr[u];i[u]>i[f]&&l.set("orient",f,!1)}i[u]++}}}delete a.component.axes[s]}if(o.axis[s]==="independent"&&n[s]&&n[s].length>1)for(let a of n[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function eAr(t,r){if(t){if(t.length!==r.length)return;let n=t.length;for(let o=0;o<n;o++){let i=t[o],s=r[o];if(!!i!=!!s)return;if(i&&s){let a=i.getWithExplicit("orient"),l=s.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;t[o]=tAr(i,s)}}}else return r.map(n=>n.clone());return t}function tAr(t,r){for(let n of oEe){let o=$f(t.getWithExplicit(n),r.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return LJ(i,s);case"gridScale":return{explicit:i.explicit,value:Fn(i.value,s.value)}}return oO(i,s,n,"axis")});t.setWithExplicit(n,o)}return t}function rAr(t,r,n,o,i){if(r==="disable")return n!==void 0;switch(n=n||{},r){case"titleAngle":case"labelAngle":return t===(rr(n.labelAngle)?n.labelAngle:SA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===xCe(o,i))return!0}return t===n[r]}function oAr(t,r){var n,o,i;let s=r.axis(t),a=new yte,l=Io(r.encoding[t]),{mark:u,config:c}=r,f=s?.orient||((n=c[t==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((o=c.axis)===null||o===void 0?void 0:o.orient)||Txt(t),d=r.getScaleComponent(t).get("type"),p=Cxt(t,d,f,r.config),h=s!==void 0?!s:w6("disable",c,s?.style,p).configValue;if(a.set("disable",h,s!==void 0),h)return a;s=s||{};let m=Ext(r,s,t,l,p),g={fieldOrDatumDef:l,axis:s,channel:t,model:r,scaleType:d,orient:f,labelAngle:m,mark:u,config:c};for(let x of oEe){let v=x in gCe?gCe[x](g):A2e(x)?s[x]:void 0,w=v!==void 0,_=rAr(v,x,s,r,t);if(w&&_)a.set(x,v,_);else{let{configValue:S=void 0,configFrom:C=void 0}=A2e(x)&&x!=="values"?w6(x,r.config,s.style,p):{},E=S!==void 0;w&&!E?a.set(x,v,_):(C!=="vgAxisConfig"||nAr.has(x)&&E||EF(S)||rr(S))&&a.set(x,S,!1)}}let y=(i=s.encoding)!==null&&i!==void 0?i:{},b=nJ.reduce((x,v)=>{var w;if(!a.hasAxisPart(v))return x;let _=Pee((w=y[v])!==null&&w!==void 0?w:{},r),S=v==="labels"?zvt(r,t,_):_;return S!==void 0&&!bn(S)&&(x[v]={update:S}),x},{});return bn(b)||a.set("encode",b,!!s.encoding||s.labelAngle!==void 0),a}var JTr,nAr,iEe=N(()=>{"use strict";M$();Ir();Mr();bt();ho();Po();CCe();E6();Oc();$vt();hCe();Uvt();vCe();JTr={bottom:"top",top:"bottom",left:"right",right:"left"};nAr=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"])});function Wvt({encoding:t,size:r}){for(let n of Ts){let o=Yl(n);Bf(r[o])&&jf(t[n])&&(delete r[o],st(it.stepDropped(o)))}return r}var qvt=N(()=>{"use strict";Ir();Mr();cn();FA()});function Hvt(t,r,n,{graticule:o}){let i=ql(t)?Object.assign({},t):{type:t},s=ln("orient",i,n);if(i.orient=lAr(i.type,r,s),s!==void 0&&s!==i.orient&&st(it.orientOverridden(i.orient,s)),i.type==="bar"&&i.orient){let c=ln("cornerRadiusEnd",i,n);if(c!==void 0){let f=i.orient==="horizontal"&&r.x2||i.orient==="vertical"&&r.y2?["cornerRadius"]:kgt[i.orient];for(let d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return ln("opacity",i,n)===void 0&&(i.opacity=sAr(i.type,r)),i.filled===void 0&&(i.filled=o?!1:aAr(i,n)),ln("cursor",i,n)===void 0&&(i.cursor=iAr(i,r,n)),i}function iAr(t,r,n){return r.href||t.href||ln("href",t,n)?"pointer":t.cursor}function sAr(t,r){if(qt([TF,F$,O$,R$],t)&&!ZF(r))return .7}function aAr(t,r){let n=sb("filled",t,r),o=t.type;return Fn(n,o!==TF&&o!==TA&&o!==AF)}function lAr(t,r,n){switch(t){case TF:case O$:case R$:case oJ:case Sgt:case _gt:return}let{x:o,y:i,x2:s,y2:a}=r;switch(t){case EA:if(At(o)&&(Zi(o.bin)||At(i)&&i.aggregate&&!o.aggregate))return"vertical";if(At(i)&&(Zi(i.bin)||At(o)&&o.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s&&(At(o)&&o.type===eh&&!Sn(o.bin)||NJ(o)))return"horizontal";if(!a&&(At(i)&&i.type===eh&&!Sn(i.bin)||NJ(i)))return"vertical"}case AF:if(s&&!(At(o)&&Zi(o.bin))&&a&&!(At(i)&&Zi(i.bin)))return;case CA:if(a)return At(i)&&Zi(i.bin)?"horizontal":"vertical";if(s)return At(o)&&Zi(o.bin)?"vertical":"horizontal";if(t===AF){if(o&&!i)return"vertical";if(i&&!o)return"horizontal"}case TA:case F$:{let l=jf(o),u=jf(i);if(l&&!u)return t!=="tick"?"horizontal":"vertical";if(!l&&u)return t!=="tick"?"vertical":"horizontal";if(l&&u){let c=o,f=i,d=c.type===Jy,p=f.type===Jy;return d&&!p?t!=="tick"?"vertical":"horizontal":!d&&p?t!=="tick"?"horizontal":"vertical":!c.aggregate&&f.aggregate?t!=="tick"?"vertical":"horizontal":c.aggregate&&!f.aggregate?t!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}var Yvt=N(()=>{"use strict";Xl();Mr();Fc();cn();ha();Zd();bt();Po()});var Xvt,Kvt=N(()=>{"use strict";Rc();Xvt={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ji("x",t,{defaultPos:"mid"})),Ji("y",t,{defaultPos:"mid"})),zf(t,"radius","arc")),zf(t,"theta","arc"))}});var Zvt,Qvt=N(()=>{"use strict";Rc();Zvt={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),z2("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),z2("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),dO(t))}});var Jvt,e1t=N(()=>{"use strict";Rc();Jvt={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),zf(t,"x","bar")),zf(t,"y","bar"))}});var t1t,r1t=N(()=>{"use strict";Mr();Zd();Rc();t1t={vgMark:"shape",encodeEntry:t=>Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{let{encoding:r}=t,n=r.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&At(n)&&n.type===eg?{field:vt(n,{expr:"datum"})}:{})]}}});var n1t,o1t=N(()=>{"use strict";Rc();n1t={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),zf(t,"x","image")),zf(t,"y","image")),B2(t,"url"))}});var i1t,s1t,a1t=N(()=>{"use strict";Rc();i1t={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ji("x",t,{defaultPos:"mid"})),Ji("y",t,{defaultPos:"mid"})),Zo("size",t,{vgChannel:"strokeWidth"})),dO(t))},s1t={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ji("x",t,{defaultPos:"mid"})),Ji("y",t,{defaultPos:"mid"})),Zo("size",t)),dO(t))}});function sEe(t,r){let{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ji("x",t,{defaultPos:"mid"})),Ji("y",t,{defaultPos:"mid"})),Zo("size",t)),Zo("angle",t)),uAr(t,n,r))}function uAr(t,r,n){return n?{shape:{value:n}}:Zo("shape",t)}var l1t,u1t,c1t,f1t=N(()=>{"use strict";Rc();l1t={vgMark:"symbol",encodeEntry:t=>sEe(t)},u1t={vgMark:"symbol",encodeEntry:t=>sEe(t,"circle")},c1t={vgMark:"symbol",encodeEntry:t=>sEe(t,"square")}});var d1t,p1t=N(()=>{"use strict";Rc();d1t={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),zf(t,"x","rect")),zf(t,"y","rect"))}});var h1t,m1t=N(()=>{"use strict";Rc();h1t={vgMark:"rule",encodeEntry:t=>{let{markDef:r}=t,n=r.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),z2("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),z2("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Zo("size",t,{vgChannel:"strokeWidth"}))}}});function cAr(t,r,n){if(ln("align",t,n)===void 0)return"center"}function fAr(t,r,n){if(ln("baseline",t,n)===void 0)return"middle"}var g1t,y1t=N(()=>{"use strict";Po();Rc();g1t={vgMark:"text",encodeEntry:t=>{let{config:r,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Ji("x",t,{defaultPos:"mid"})),Ji("y",t,{defaultPos:"mid"})),B2(t)),Zo("size",t,{vgChannel:"fontSize"})),Zo("angle",t)),gee("align",cAr(t.markDef,n,r))),gee("baseline",fAr(t.markDef,n,r))),Ji("radius",t,{defaultPos:null,isMidPoint:!0})),Ji("theta",t,{defaultPos:null,isMidPoint:!0}))}}});function dAr(t){var r;let{config:n,markDef:o}=t,{orient:i}=o,s=i==="horizontal"?"width":"height",a=t.getScaleComponent(i==="horizontal"?"x":"y"),l=(r=ln("size",o,n,{vgChannel:s}))!==null&&r!==void 0?r:n.tick.bandSize;if(l!==void 0)return l;{let u=a?a.get("range"):void 0;return u&&Lu(u)&&_o(u.step)?u.step*3/4:OA(n.view,s)*3/4}}var b1t,x1t=N(()=>{"use strict";ir();L2();ho();Po();Rc();b1t={vgMark:"rect",encodeEntry:t=>{let{config:r,markDef:n}=t,o=n.orient,i=o==="horizontal"?"width":"height",s=o==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},es(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ji("x",t,{defaultPos:"mid",vgChannel:"xc"})),Ji("y",t,{defaultPos:"mid",vgChannel:"yc"})),Zo("size",t,{defaultValue:dAr(t),vgChannel:i})),{[s]:mo(ln("thickness",n,r))})}}});function _1t(t){return qt([TA,CA,Cgt],t.mark)?pAr(t):qt([EA],t.mark)?hAr(t):xte(t)}function pAr(t){let r=BJ(t.mark,t.encoding),n=xte(t,{fromPrefix:r.length>0?v1t:""});return r.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:v1t+t.requestDataName(zs),data:t.requestDataName(zs),groupby:r}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}function hAr(t){let r=gJ.some(n=>ln(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&r){let[n]=xte(t,{fromPrefix:w1t}),o=t.scaleName(t.stack.fieldChannel),i=(d={})=>t.vgField(t.stack.fieldChannel,d),s=(d,p)=>{let h=[i({prefix:"min",suffix:"start",expr:p}),i({prefix:"max",suffix:"start",expr:p}),i({prefix:"min",suffix:"end",expr:p}),i({prefix:"max",suffix:"end",expr:p})];return`${d}(${h.map(m=>`scale('${o}',${m})`).join(",")})`},a,l;t.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},E2(n.encode.update,["y","yc","y2","height",...gJ])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),l={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},kf(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},E2(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),l={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},kf(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let d of gJ){let p=sb(d,t.markDef,t.config);n.encode.update[d]?(a[d]=n.encode.update[d],delete n.encode.update[d]):p&&(a[d]=mo(p)),p&&(n.encode.update[d]={value:0})}let u=t.fieldDef(t.stack.groupbyChannel),c=vt(u)?[vt(u)]:[];return(u?.bin||u?.timeUnit)&&c.push(vt(u,{binSuffix:"end"})),a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,p)=>{if(n.encode.update[p])return Object.assign(Object.assign({},d),{[p]:n.encode.update[p]});{let h=sb(p,t.markDef,t.config);return h!==void 0?Object.assign(Object.assign({},d),{[p]:mo(h)}):d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(zs),name:w1t+t.requestDataName(zs),groupby:c,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:l},marks:[n]}]}]}else return xte(t)}function mAr(t){let{encoding:r,stack:n,mark:o,markDef:i,config:s}=t,a=r.order;if(!(!Bt(a)&&ju(a)&&v2e(a.value)||!a&&v2e(ln("order",i,s)))){if((Bt(a)||At(a))&&!n)return PJ(a,{expr:"datum"});if(Df(o)){let l=i.orient==="horizontal"?"y":"x",u=r[l];if(At(u)){let c=u.sort;if(Bt(c))return{field:vt(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(bl(c))return{field:vt({aggregate:ZF(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(TJ(c)){let f=t.fieldDef(c.encoding);return{field:vt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:vt(u,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function xte(t,r={fromPrefix:""}){let{mark:n,markDef:o,config:i}=t,s=Fn(o.clip,gAr(t),yAr(t)),a=oSe(o),l=t.encoding.key,u=mAr(t),c=bAr(t),f=ln("aria",o,i),d=bte[n].postEncodingTransform?bte[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:bte[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:r.fromPrefix+t.requestDataName(zs)},encode:{update:bte[n].encodeEntry(t)}}),d?{transform:d}:{})]}function gAr(t){let r=t.getScaleComponent("x"),n=t.getScaleComponent("y");return r&&r.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function yAr(t){let r=t.component.projection;return r&&!r.isFit?!0:void 0}function bAr(t){if(!t.component.selection)return null;let r=nt(t.component.selection).length,n=r,o=t.parent;for(;o&&n===0;)n=nt(o.component.selection).length,o=o.parent;return n?{interactive:r>0}:null}var bte,v1t,w1t,S1t=N(()=>{"use strict";ir();Mr();ub();Fc();ha();tg();bt();ho();Po();Kvt();Qvt();e1t();r1t();o1t();a1t();f1t();p1t();m1t();y1t();x1t();bte={arc:Xvt,area:Zvt,bar:Jvt,circle:u1t,geoshape:t1t,image:n1t,line:i1t,point:l1t,rect:d1t,rule:h1t,square:c1t,text:g1t,tick:b1t,trail:s1t};v1t="faceted_path_";w1t="stack_group_"});var GO,aEe=N(()=>{"use strict";Ir();Mr();ub();Fc();Fc();ha();FA();CSe();v6();iEe();jO();C6();qvt();M6();Yvt();S1t();ds();BA();LA();GO=class extends IO{constructor(r,n,o,i={},s){var a,l;super(r,"unit",n,o,s,void 0,xSe(r)?r.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];let u=ql(r.mark)?r.mark.type:r.mark;this.markDef=Hvt(r.mark,(a=r.encoding)!==null&&a!==void 0?a:{},s,{graticule:r.data&&e6(r.data)});let c=this.encoding=Q0t((l=r.encoding)!==null&&l!==void 0?l:{},this.markDef,s);this.size=Wvt({encoding:c,size:xSe(r)?Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{}):i}),this.stack=JJ(u,c),this.specifiedScales=this.initScales(u,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegend(c),this.specifiedProjection=r.projection,this.selection=r.selection}get hasProjection(){let{encoding:r}=this,n=this.mark===iJ,o=r&&Ugt.some(i=>Or(r[i]));return n||o}scaleDomain(r){let n=this.specifiedScales[r];return n?n.domain:void 0}axis(r){return this.specifiedAxes[r]}legend(r){return this.specifiedLegends[r]}initScales(r,n){return I2.reduce((o,i)=>{var s;let a=Io(n[i]);return a&&(o[i]=(s=a.scale)!==null&&s!==void 0?s:{}),o},{})}initAxes(r){return Ts.reduce((n,o)=>{let i=r[o];if(Or(i)||o===to&&Or(r.x2)||o===pi&&Or(r.y2)){let s=Or(i)?i.axis:void 0;n[o]=s&&Object.assign({},s)}return n},{})}initLegend(r){return Zgt.reduce((n,o)=>{let i=Io(r[o]);if(i&&Jgt(o)){let s=i.legend;n[o]=s&&Object.assign({},s)}return n},{})}parseData(){this.component.data=X2(this)}parseLayoutSize(){Pvt(this)}parseSelections(){this.component.selection=yxt(this,this.selection)}parseMarkGroup(){this.component.mark=_1t(this)}parseAxesAndHeaders(){this.component.axes=Vvt(this)}assembleSelectionTopLevelSignals(r){return Mbt(this,r)}assembleSignals(){return[...Nee(this),...Dbt(this,[])]}assembleSelectionData(r){return Fbt(this,r)}assembleLayout(){return null}assembleLayoutSignals(){return wO(this)}assembleMarks(){var r;let n=(r=this.component.mark)!==null&&r!==void 0?r:[];return(!this.parent||!sh(this.parent))&&(n=WSe(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(r){return ab(this.encoding,r)}fieldDef(r){let n=this.encoding[r];return Kl(n)}typedFieldDef(r){let n=this.fieldDef(r);return ga(n)?n:null}}});var vte,C1t=N(()=>{"use strict";cn();rO();bt();v6();iEe();jO();C6();M6();MCe();ds();BA();aEe();vte=class t extends HA{constructor(r,n,o,i,s){super(r,"layer",n,o,s,r.resolve,r.view);let a=Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{});this.children=r.layer.map((l,u)=>{if(Jv(l))return new t(l,this,this.getName("layer_"+u),a,s);if(Fa(l))return new GO(l,this,this.getName("layer_"+u),a,s);throw new Error(it.invalidSpec(l))})}parseData(){this.component.data=X2(this);for(let r of this.children)r.parseData()}parseLayoutSize(){Ovt(this)}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){Gvt(this)}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleSignals()),Nee(this))}assembleLayoutSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleLayoutSignals()),wO(this))}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleTitle(){let r=super.assembleTitle();if(r)return r;for(let n of this.children)if(r=n.assembleTitle(),r)return r}assembleLayout(){return null}assembleMarks(){return Obt(this,this.children.flatMap(r=>r.assembleMarks()))}assembleLegends(){return this.children.reduce((r,n)=>r.concat(n.assembleLegends()),Bee(this))}}});function VO(t,r,n,o,i){if(Xv(t))return new hte(t,r,n,i);if(Jv(t))return new vte(t,r,n,o,i);if(Fa(t))return new GO(t,r,n,o,i);if(bSe(t))return new gte(t,r,n,i);throw new Error(it.invalidSpec(t))}var mte=N(()=>{"use strict";cn();rO();Bvt();nEe();C1t();aEe()});function E1t(t,r={}){r.logger&&o0t(r.logger),r.fieldTitle&&eSe(r.fieldTitle);try{let n=ZJ(E$(r.config,t.config)),o=iee(t,n),i=VO(o,null,"",void 0,n);return i.parse(),avt(i.component.data,i),{spec:vAr(i,xAr(t,o.autosize,n,i),t.datasets,t.usermeta),normalized:o}}finally{r.logger&&i0t(),r.fieldTitle&&K0t()}}function xAr(t,r,n,o){let i=o.component.layoutSize.get("width"),s=o.component.layoutSize.get("height");if(r===void 0?(r={type:"pad"},o.hasAxisOrientSignalRef()&&(r.resize=!0)):pr(r)&&(r={type:r}),i&&s&&jyt(r.type)){if(i==="step"&&s==="step")st(it.droppingFit()),r.type="pad";else if(i==="step"||s==="step"){let a=i==="step"?"width":"height";st(it.droppingFit(k2(a)));let l=a==="width"?"height":"width";r.type=Byt(l)}}return Object.assign(Object.assign(Object.assign({},nt(r).length===1&&r.type?r.type==="pad"?{}:{autosize:r.type}:{autosize:r}),kSe(n)),kSe(t))}function vAr(t,r,n={},o){let i=t.config?wyt(t.config):void 0,s=[].concat(t.assembleSelectionData([]),Ivt(t.component.data,n)),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0),f=t.assembleLayoutSignals();return f=f.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(r[d.name]=+d.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),r),l?{title:l}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:s}),a.length>0?{projections:a}:{}),t.assembleGroup([...f,...t.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),o?{usermeta:o}:{})}var T1t=N(()=>{"use strict";ir();Ir();Mr();L2();cn();ASe();$yt();bt();mte();rEe();lte()});function A1t(t,r){return wAr.map(t,{config:r})}var lEe,wAr,k1t=N(()=>{"use strict";Fc();SSe();lEe=class extends nO{mapUnit(r,{config:n}){if(r.encoding){let{encoding:o,transform:i}=r,{bins:s,timeUnits:a,aggregate:l,groupby:u,encoding:c}=QF(o,n),f=[...i||[],...s,...a,...l.length===0?[]:[{aggregate:l,groupby:u}]];return Object.assign(Object.assign(Object.assign({},r),f.length>0?{transform:f}:{}),{encoding:c})}else return r}},wAr=new lEe});var uEe={};fn(uEe,{compile:()=>E1t,extractTransforms:()=>A1t,normalize:()=>iee,version:()=>_Ar});var _Ar,I1t=N(()=>{"use strict";Emt();ASe();T1t();k1t();_Ar=Tmt.version});function SAr(t){let[r,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:r,version:n}}var cEe,D1t=N(()=>{"use strict";cEe=SAr});var yEe={};fn(yEe,{carbong10:()=>wkr,carbong100:()=>Skr,carbong90:()=>_kr,carbonwhite:()=>vkr,dark:()=>VAr,excel:()=>GAr,fivethirtyeight:()=>HAr,ggplot2:()=>YAr,googlecharts:()=>skr,latimes:()=>QAr,powerbi:()=>gkr,quartz:()=>JAr,urbaninstitute:()=>ikr,version:()=>Ckr,vox:()=>ekr});function Ete({theme:t,background:r}){let n=["white","g10"].includes(t)?"light":"dark",o=Cte.gridBg[t],i=Cte.textPrimary[t],s=Cte.textSecondary[t],a=n==="dark"?bkr:xkr,l=n==="dark"?"#d4bbff":"#6929c4";return{background:r,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:o,stroke:o},group:{fill:o},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:hEe,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:ykr,labelFontWeight:mEe,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Cte.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:hEe,fill:s,fontWeight:mEe},"guide-title":{font:hEe,fill:s,fontWeight:mEe}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var CAr,EAr,TAr,AAr,kAr,IAr,DAr,NAr,MAr,FAr,OAr,RAr,PAr,LAr,jAr,BAr,$Ar,zAr,UAr,WO,N1t,VAr,XA,GAr,KA,fEe,WAr,qAr,M1t,F1t,HAr,ZA,YAr,XAr,KAr,O1t,R1t,ZAr,QA,dEe,P1t,L1t,F6,QAr,JA,wte,JAr,ek,ekr,lh,j1t,tkr,_te,pEe,rkr,nkr,okr,O6,ikr,tk,B1t,Ste,skr,gEe,$1t,z1t,U1t,R6,V1t,G1t,P6,W1t,akr,ug,lkr,ukr,ckr,fkr,dkr,pkr,hkr,H1t,Y1t,q1t,mkr,gkr,hEe,ykr,mEe,Cte,bkr,xkr,vkr,wkr,_kr,Skr,Ckr,X1t=N(()=>{"use strict";CAr="vega-themes",EAr="2.15.0",TAr="Themes for stylized Vega and Vega-Lite visualizations.",AAr=["vega","vega-lite","themes","style"],kAr="BSD-3-Clause",IAr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},DAr=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],NAr="build/vega-themes.js",MAr="build/vega-themes.module.js",FAr="build/vega-themes.min.js",OAr="build/vega-themes.min.js",RAr="build/vega-themes.module.d.ts",PAr={type:"git",url:"https://github.com/vega/vega-themes.git"},LAr=["src","build"],jAr={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},BAr={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},$Ar={vega:"*","vega-lite":"*"},zAr={},UAr={name:CAr,version:EAr,description:TAr,keywords:AAr,license:kAr,author:IAr,contributors:DAr,main:NAr,module:MAr,unpkg:FAr,jsdelivr:OAr,types:RAr,repository:PAr,files:LAr,scripts:jAr,devDependencies:BAr,peerDependencies:$Ar,dependencies:zAr},WO="#fff",N1t="#888",VAr={background:"#333",view:{stroke:N1t},title:{color:WO,subtitleColor:WO},style:{"guide-label":{fill:WO},"guide-title":{fill:WO}},axis:{domainColor:WO,gridColor:N1t,tickColor:WO}},XA="#4572a7",GAr={background:"#fff",arc:{fill:XA},area:{fill:XA},line:{stroke:XA,strokeWidth:2},path:{stroke:XA},rect:{fill:XA},shape:{stroke:XA},symbol:{fill:XA,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},KA="#30a2da",fEe="#cbcbcb",WAr="#999",qAr="#333",M1t="#f0f0f0",F1t="#333",HAr={arc:{fill:KA},area:{fill:KA},axis:{domainColor:fEe,grid:!0,gridColor:fEe,gridWidth:1,labelColor:WAr,labelFontSize:10,titleColor:qAr,tickColor:fEe,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:M1t,group:{fill:M1t},legend:{labelColor:F1t,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:F1t,titleFontSize:14,titlePadding:10},line:{stroke:KA,strokeWidth:2},path:{stroke:KA,strokeWidth:.5},rect:{fill:KA},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:KA},bar:{binSpacing:2,fill:KA,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ZA="#000",YAr={group:{fill:"#e5e5e5"},arc:{fill:ZA},area:{fill:ZA},line:{stroke:ZA},path:{stroke:ZA},rect:{fill:ZA},shape:{stroke:ZA},symbol:{fill:ZA,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},XAr=22,KAr="normal",O1t="Benton Gothic, sans-serif",R1t=11.5,ZAr="normal",QA="#82c6df",dEe="Benton Gothic Bold, sans-serif",P1t="normal",L1t=13,F6={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},QAr={background:"#ffffff",title:{anchor:"start",color:"#000000",font:dEe,fontSize:XAr,fontWeight:KAr},arc:{fill:QA},area:{fill:QA},line:{stroke:QA,strokeWidth:2},path:{stroke:QA},rect:{fill:QA},shape:{stroke:QA},symbol:{fill:QA,size:30},axis:{labelFont:O1t,labelFontSize:R1t,labelFontWeight:ZAr,titleFont:dEe,titleFontSize:L1t,titleFontWeight:P1t},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:O1t,labelFontSize:R1t,symbolType:"square",titleFont:dEe,titleFontSize:L1t,titleFontWeight:P1t},range:{category:F6["category-6"],diverging:F6["fireandice-6"],heatmap:F6["fire-7"],ordinal:F6["fire-7"],ramp:F6["fire-7"]}},JA="#ab5787",wte="#979797",JAr={background:"#f9f9f9",arc:{fill:JA},area:{fill:JA},line:{stroke:JA},path:{stroke:JA},rect:{fill:JA},shape:{stroke:JA},symbol:{fill:JA,size:30},axis:{domainColor:wte,domainWidth:.5,gridWidth:.2,labelColor:wte,tickColor:wte,tickWidth:.2,titleColor:wte},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ek="#3e5c69",ekr={background:"#fff",arc:{fill:ek},area:{fill:ek},line:{stroke:ek},path:{stroke:ek},rect:{fill:ek},shape:{stroke:ek},symbol:{fill:ek},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},lh="#1696d2",j1t="#000000",tkr="#FFFFFF",_te="Lato",pEe="Lato",rkr="Lato",nkr="#DEDDDD",okr=18,O6={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},ikr={background:tkr,title:{anchor:"start",fontSize:okr,font:_te},axisX:{domain:!0,domainColor:j1t,domainWidth:1,grid:!1,labelFontSize:12,labelFont:pEe,labelAngle:0,tickColor:j1t,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:_te},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:nkr,gridWidth:1,labelFontSize:12,labelFont:pEe,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:_te,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:pEe,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:_te,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:O6["six-groups-cat-1"],diverging:O6["diverging-colors"],heatmap:O6["diverging-colors"],ordinal:O6["six-groups-seq"],ramp:O6["shades-blue"]},area:{fill:lh},rect:{fill:lh},line:{color:lh,stroke:lh,strokeWidth:5},trail:{color:lh,stroke:lh,strokeWidth:0,size:1},path:{stroke:lh,strokeWidth:.5},point:{filled:!0},text:{font:rkr,color:lh,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:lh,stroke:null}},arc:{fill:lh},shape:{stroke:lh},symbol:{fill:lh,size:30}},tk="#3366CC",B1t="#ccc",Ste="Arial, sans-serif",skr={arc:{fill:tk},area:{fill:tk},path:{stroke:tk},rect:{fill:tk},shape:{stroke:tk},symbol:{stroke:tk},circle:{fill:tk},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Ste,fontSize:12},"guide-title":{font:Ste,fontSize:12},"group-title":{font:Ste,fontSize:12}},title:{font:Ste,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:B1t,tickColor:B1t,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},gEe=t=>t*(1/3+1),$1t=gEe(9),z1t=gEe(10),U1t=gEe(12),R6="Segoe UI",V1t="wf_standard-font, helvetica, arial, sans-serif",G1t="#252423",P6="#605E5C",W1t="transparent",akr="#C8C6C4",ug="#118DFF",lkr="#12239E",ukr="#E66C37",ckr="#6B007B",fkr="#E044A7",dkr="#744EC2",pkr="#D9B300",hkr="#D64550",H1t=ug,Y1t="#DEEFFF",q1t=[Y1t,H1t],mkr=[Y1t,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",H1t],gkr={view:{stroke:W1t},background:W1t,font:R6,header:{titleFont:V1t,titleFontSize:U1t,titleColor:G1t,labelFont:R6,labelFontSize:z1t,labelColor:P6},axis:{ticks:!1,grid:!1,domain:!1,labelColor:P6,labelFontSize:$1t,titleFont:V1t,titleColor:G1t,titleFontSize:U1t,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:akr,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ug},line:{stroke:ug,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:R6,fontSize:$1t,fill:P6},arc:{fill:ug},area:{fill:ug,line:!0,opacity:.6},path:{stroke:ug},rect:{fill:ug},point:{fill:ug,filled:!0,size:75},shape:{stroke:ug},symbol:{fill:ug,strokeWidth:1.5,size:50},legend:{titleFont:R6,titleFontWeight:"bold",titleColor:P6,labelFont:R6,labelFontSize:z1t,labelColor:P6,symbolType:"circle",symbolSize:75},range:{category:[ug,lkr,ukr,ckr,fkr,dkr,pkr,hkr],diverging:q1t,heatmap:q1t,ordinal:mkr}},hEe='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ykr='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',mEe=400,Cte={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},bkr=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],xkr=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];vkr=Ete({theme:"white",background:"#ffffff"}),wkr=Ete({theme:"g10",background:"#f4f4f4"}),_kr=Ete({theme:"g90",background:"#262626"}),Skr=Ete({theme:"g100",background:"#161616"}),Ckr=UAr.version});function Hkr(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Ykr(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return Wkr.toString().replace(Z1t,t)}function Xkr(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}function Kkr(t,r,n){if(Hr(t))return`[${t.map(o=>r(Jn(o)?o:K1t(o,n))).join(", ")}]`;if(un(t)){let o="",i=t,{title:s,image:a}=i,l=Xkr(i,["title","image"]);s&&(o+=`<h2>${r(s)}</h2>`),a&&(o+=`<img src="${r(a)}">`);let u=Object.keys(l);if(u.length>0){o+="<table>";for(let c of u){let f=l[c];f!==void 0&&(un(f)&&(f=K1t(f,n)),o+=`<tr><td class="key">${r(c)}:</td><td class="value">${r(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return r(t)}function Zkr(t){let r=[];return function(n,o){if(typeof o!="object"||o===null)return o;let i=r.indexOf(this)+1;return r.length=i,r.length>t?"[Object]":r.indexOf(o)>=0?"[Circular]":(r.push(o),o)}}function K1t(t,r){return JSON.stringify(t,Zkr(r))}function Qkr(t,r,n,o){let i=t.clientX+n;i+r.width>window.innerWidth&&(i=+t.clientX-n-r.width);let s=t.clientY+o;return s+r.height>window.innerHeight&&(s=+t.clientY-o-r.height),{x:i,y:s}}var Ekr,Tkr,Akr,kkr,Ikr,Dkr,Nkr,Mkr,Fkr,Okr,Rkr,Pkr,Lkr,jkr,Bkr,$kr,zkr,Ukr,Vkr,Gkr,Wkr,Z1t,qkr,Tte,ibi,Q1t=N(()=>{"use strict";Ls();Ekr="vega-tooltip",Tkr="0.25.1",Akr="A tooltip plugin for Vega-Lite and Vega visualizations.",kkr=["vega-lite","vega","tooltip"],Ikr={type:"git",url:"https://github.com/vega/vega-tooltip.git"},Dkr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Nkr=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],Mkr="BSD-3-Clause",Fkr={url:"https://github.com/vega/vega-tooltip/issues"},Okr="https://github.com/vega/vega-tooltip#readme",Rkr="build/vega-tooltip.js",Pkr="build/vega-tooltip.module.js",Lkr="build/vega-tooltip.min.js",jkr="build/vega-tooltip.min.js",Bkr="build/vega-tooltip.module.d.ts",$kr=["src","build","types"],zkr={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"beemo jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"beemo create-config && yarn copy:data",prettierbase:"beemo prettier '*.{css,scss,html}'",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check"},Ukr={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@wessberg/rollup-plugin-ts":"^1.3.8","browser-sync":"^2.26.14",concurrently:"^6.0.0","gh-pages":"^3.1.0","node-sass":"^5.0.0",path:"^0.12.7",rollup:"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"~4.2.2","vega-datasets":"^2.2.0","vega-lite-dev-config":"^0.16.1","vega-typings":"^0.19.2"},Vkr={"vega-util":"^1.16.0"},Gkr={name:Ekr,version:Tkr,description:Akr,keywords:kkr,repository:Ikr,author:Dkr,collaborators:Nkr,license:Mkr,bugs:Fkr,homepage:Okr,main:Rkr,module:Pkr,unpkg:Lkr,jsdelivr:jkr,types:Bkr,files:$kr,scripts:zkr,devDependencies:Ukr,dependencies:Vkr},Wkr=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,Z1t="vg-tooltip-element",qkr={offsetX:10,offsetY:10,id:Z1t,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Hkr,maxDepth:2};Tte=class{constructor(r){this.options=Object.assign(Object.assign({},qkr),r);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let o=document.createElement("style");o.setAttribute("id",this.options.styleId),o.innerHTML=Ykr(n);let i=document.head;i.childNodes.length>0?i.insertBefore(o,i.childNodes[0]):i.appendChild(o)}}tooltipHandler(r,n,o,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=Kkr(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:a,y:l}=Qkr(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${l}px; left: ${a}px`)}},ibi=Gkr.version});var rk={};fn(rk,{DEFAULT_ACTIONS:()=>owt,default:()=>fIr,guessMode:()=>iwt,vega:()=>i1,vegaLite:()=>qO});function Ite(t,r,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{c(o.next(f))}catch(d){a(d)}}function u(f){try{c(o.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(l,u)}c((o=o.apply(t,r||[])).next())})}function Jkr(t,r,n){let o=t.open(r),i=1e4,s=250,{origin:a}=new URL(r),l=~~(i/s);function u(f){f.source===o&&(l=0,t.removeEventListener("message",u,!1))}t.addEventListener("message",u,!1);function c(){l<=0||(o.postMessage(n,a),setTimeout(c,s),l-=1)}setTimeout(c,s)}function nwt(t,...r){for(let n of r)tIr(t,n);return t}function tIr(t,r){for(let n of Object.keys(r))qP(t,n,r[n],!0)}function sIr(t){return typeof t=="function"}function J1t(t,r,n,o){let i=`<html><head>${r}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+s),a.document.title=`${L6[o]} JSON Source`}function iwt(t,r){var n;if(t.$schema){let o=cEe(t.$schema);r&&r!==o.library&&console.warn(`The given visualization spec is written in ${L6[o.library]}, but mode argument sets ${(n=L6[r])!==null&&n!==void 0?n:r}.`);let i=o.library;return(0,xEe.satisfies)(Dte[i],`^${o.version.slice(1)}`)||console.warn(`The input spec uses ${L6[i]} ${o.version}, but the current version of ${L6[i]} is v${Dte[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":r??"vega"}function aIr(t){return!!(t&&"load"in t)}function ewt(t){return aIr(t)?t:i1.loader(t)}function twt(t){var r;return(r=t.usermeta&&t.usermeta.embedOptions)!==null&&r!==void 0?r:{}}function lIr(t,r,n={}){var o,i,s;return Ite(this,void 0,void 0,function*(){let a,l;Jn(r)?(l=ewt(n.loader),a=JSON.parse(yield l.load(r))):a=r;let u=twt(a).loader;(!l||u)&&(l=ewt((o=n.loader)!==null&&o!==void 0?o:u));let c=yield rwt(twt(a),l),f=yield rwt(n,l),d=Object.assign(Object.assign({},nwt(f,c)),{config:YD((i=f.config)!==null&&i!==void 0?i:{},(s=c.config)!==null&&s!==void 0?s:{})});return yield cIr(t,a,d,l)})}function rwt(t,r){var n;return Ite(this,void 0,void 0,function*(){let o=Jn(t.config)?JSON.parse(yield r.load(t.config)):(n=t.config)!==null&&n!==void 0?n:{},i=Jn(t.patch)?JSON.parse(yield r.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),o?{config:o}:{})})}function uIr(t){var r;let n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(r=document.head)!==null&&r!==void 0?r:document.body}}function cIr(t,r,n={},o){var i,s,a,l,u,c;return Ite(this,void 0,void 0,function*(){let f=n.theme?YD(yEe[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,d=Lce(n.actions)?n.actions:nwt({},owt,(s=n.actions)!==null&&s!==void 0?s:{}),p=Object.assign(Object.assign({},rIr),n.i18n),h=(a=n.renderer)!==null&&a!==void 0?a:"canvas",m=(l=n.logLevel)!==null&&l!==void 0?l:i1.Warn,g=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization",y=typeof t=="string"?document.querySelector(t):t;if(!y)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){let k="vega-embed-style",{root:F,rootContainer:D}=uIr(y);if(!F.getElementById(k)){let L=document.createElement("style");L.id=k,L.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?eIr.toString():n.defaultStyle,D.appendChild(L)}}let b=iwt(r,n.mode),x=nIr[b](r,f);if(b==="vega-lite"&&x.$schema){let k=cEe(x.$schema);(0,xEe.satisfies)(Dte.vega,`^${k.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${k.version}, but current version is v${Dte.vega}.`)}y.classList.add("vega-embed"),d&&y.classList.add("has-actions"),y.innerHTML="";let v=y;if(d){let k=document.createElement("div");k.classList.add(iIr),y.appendChild(k),v=k}let w=n.patch;w&&(w instanceof Function?x=w(x):x=WD(x,w,!0,!1).newDocument),n.formatLocale&&i1.formatLocale(n.formatLocale),n.timeFormatLocale&&i1.timeFormatLocale(n.timeFormatLocale);let{ast:_}=n,S=i1.parse(x,b==="vega-lite"?{}:f,{ast:_}),C=new(n.viewClass||i1.View)(S,Object.assign({loader:o,logLevel:m,renderer:h},_?{expr:i1.expressionInterpreter}:{}));if(n.tooltip!==!1){let k;sIr(n.tooltip)?k=n.tooltip:k=new Tte(n.tooltip===!0?{}:n.tooltip).call,C.tooltip(k)}let{hover:E}=n;if(E===void 0&&(E=b==="vega"),E){let{hoverSet:k,updateSet:F}=typeof E=="boolean"?{}:E;C.hover(k,F)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(v,n.bind).runAsync();let T;if(d!==!1){let k=y;if(n.defaultStyle!==!1){let D=document.createElement("details");D.title=p.CLICK_TO_VIEW_ACTIONS,y.append(D),k=D;let L=document.createElement("summary");L.innerHTML=oIr,D.append(L),T=P=>{D.contains(P.target)||D.removeAttribute("open")},document.addEventListener("click",T)}let F=document.createElement("div");if(k.append(F),F.classList.add("vega-actions"),d===!0||d.export!==!1){for(let D of["svg","png"])if(d===!0||d.export===!0||d.export[D]){let L=p[`${D.toUpperCase()}_ACTION`],P=document.createElement("a");P.text=L,P.href="#",P.target="_blank",P.download=`${g}.${D}`,P.addEventListener("mousedown",function(R){return Ite(this,void 0,void 0,function*(){R.preventDefault();let V=yield C.toImageURL(D,n.scaleFactor);this.href=V})}),F.append(P)}}if(d===!0||d.source!==!1){let D=document.createElement("a");D.text=p.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(L){var P,R;J1t((0,kte.default)(r),(P=n.sourceHeader)!==null&&P!==void 0?P:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"",b),L.preventDefault()}),F.append(D)}if(b==="vega-lite"&&(d===!0||d.compiled!==!1)){let D=document.createElement("a");D.text=p.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(L){var P,R;J1t((0,kte.default)(x),(P=n.sourceHeader)!==null&&P!==void 0?P:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"","vega"),L.preventDefault()}),F.append(D)}if(d===!0||d.editor!==!1){let D=(c=n.editorUrl)!==null&&c!==void 0?c:"https://vega.github.io/editor/",L=document.createElement("a");L.text=p.EDITOR_ACTION,L.href="#",L.addEventListener("click",function(P){Jkr(window,D,{config:f,mode:b,renderer:h,spec:(0,kte.default)(r)}),P.preventDefault()}),F.append(L)}}function I(){T&&document.removeEventListener("click",T),C.finalize()}return{view:C,spec:r,vgSpec:x,finalize:I}})}var kte,xEe,eIr,bEe,i1,qO,Ate,owt,rIr,L6,Dte,nIr,oIr,iIr,fIr,nk=N(()=>{"use strict";oGe();kte=Pc(sGe()),xEe=Pc(ZWe());l2e();l2e();I1t();D1t();X1t();Q1t();eIr=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(t,r){return this.substr(!r||r<0?0:+r,t.length)===t});i1=a2e,qO=uEe,Ate=typeof window<"u"?window:void 0;qO===void 0&&(!((bEe=Ate?.vl)===null||bEe===void 0)&&bEe.compile)&&(qO=Ate.vl);owt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},rIr={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},L6={vega:"Vega","vega-lite":"Vega-Lite"},Dte={vega:i1.version,"vega-lite":qO?qO.version:"not available"},nIr={vega:t=>t,"vega-lite":(t,r)=>qO.compile(t,{config:r}).spec},oIr=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,iIr="chart-wrapper";fIr=lIr});var Nte=mt((fbi,awt)=>{"use strict";var swt=Object.getOwnPropertySymbols,dIr=Object.prototype.hasOwnProperty,pIr=Object.prototype.propertyIsEnumerable;function hIr(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function mIr(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}awt.exports=mIr()?Object.assign:function(t,r){for(var n,o=hIr(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)dIr.call(n,a)&&(o[a]=n[a]);if(swt){i=swt(n);for(var l=0;l<i.length;l++)pIr.call(n,i[l])&&(o[i[l]]=n[i[l]])}}return o}});var dwt=mt(wEe=>{"use strict";Object.defineProperty(wEe,"__esModule",{value:!0});wEe.StyleSheet=fwt;var gIr=Nte(),yIr=bIr(gIr);function bIr(t){return t&&t.__esModule?t:{default:t}}function xIr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function vEe(t){return t[t.length-1]}function lwt(t){if(t.sheet)return t.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===t)return document.styleSheets[r]}var ok=typeof window<"u",cwt=!1,vIr=!1,wIr=function(){if(ok){var t=document.createElement("div");return t.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",t.getElementsByTagName("i").length===1}}();function uwt(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function fwt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.speedy,n=r===void 0?!cwt&&!vIr:r,o=t.maxLength,i=o===void 0?ok&&wIr?4e3:65e3:o;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,yIr.default)(fwt.prototype,{getSheet:function(){return lwt(vEe(this.tags))},inject:function(){var r=this;if(this.injected)throw new Error("already injected stylesheet!");ok?this.tags[0]=uwt():this.sheet={cssRules:[],insertRule:function(o){r.sheet.cssRules.push({cssText:o})}},this.injected=!0},speedy:function(r){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+r+") earlier in your app, or call flush() before speedy("+r+")");this.isSpeedy=!!r},_insert:function(r){try{var n=this.getSheet();n.insertRule(r,r.indexOf("@import")!==-1?0:n.cssRules.length)}catch{cwt&&console.warn("whoops, illegal rule inserted",r)}},insert:function(r){if(ok)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(r);else if(r.indexOf("@import")!==-1){var n=vEe(this.tags);n.insertBefore(document.createTextNode(r),n.firstChild)}else vEe(this.tags).appendChild(document.createTextNode(r));else this.sheet.insertRule(r,r.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,ok&&this.ctr%this.maxLength===0&&this.tags.push(uwt()),this.ctr-1},delete:function(r){return this.replace(r,"")},flush:function(){ok?(this.tags.forEach(function(r){return r.parentNode.removeChild(r)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!ok)return this.sheet.cssRules;var r=[];return this.tags.forEach(function(n){return r.splice.apply(r,[r.length,0].concat(xIr(Array.from(lwt(n).cssRules))))}),r}})});var hwt=mt((pbi,pwt)=>{"use strict";var _Ir=/-(.)/g;function SIr(t){return t.replace(_Ir,function(r,n){return n.toUpperCase()})}pwt.exports=SIr});var gwt=mt((hbi,mwt)=>{"use strict";var CIr=hwt(),EIr=/^-ms-/;function TIr(t){return CIr(t.replace(EIr,"ms-"))}mwt.exports=TIr});var ywt=mt(_Ee=>{"use strict";Object.defineProperty(_Ee,"__esModule",{value:!0});var Mte={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function AIr(t,r){return t+r.charAt(0).toUpperCase()+r.substring(1)}var kIr=["Webkit","ms","Moz","O"];Object.keys(Mte).forEach(function(t){kIr.forEach(function(r){Mte[AIr(r,t)]=Mte[t]})});var IIr={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},DIr={isUnitlessNumber:Mte,shorthandPropertyExpansions:IIr};_Ee.default=DIr});var xwt=mt((gbi,bwt)=>{"use strict";function Fte(t){return function(){return t}}var ik=function(){};ik.thatReturns=Fte;ik.thatReturnsFalse=Fte(!1);ik.thatReturnsTrue=Fte(!0);ik.thatReturnsNull=Fte(null);ik.thatReturnsThis=function(){return this};ik.thatReturnsArgument=function(t){return t};bwt.exports=ik});var SEe=mt((ybi,vwt)=>{"use strict";var NIr=xwt(),MIr=NIr;vwt.exports=MIr});var Swt=mt(CEe=>{"use strict";Object.defineProperty(CEe,"__esModule",{value:!0});var FIr=ywt(),OIr=_wt(FIr),RIr=SEe(),bbi=_wt(RIr);function _wt(t){return t&&t.__esModule?t:{default:t}}var wwt=OIr.default.isUnitlessNumber;function PIr(t,r,n){var o=r==null||typeof r=="boolean"||r==="";if(o)return"";var i=isNaN(r);if(i||r===0||wwt.hasOwnProperty(t)&&wwt[t])return""+r;if(typeof r=="string"){if(0&&n&&r!=="0"){var s,a,l;if(a)var u}r=r.trim()}return r+"px"}CEe.default=PIr});var Ewt=mt((vbi,Cwt)=>{"use strict";var LIr=/([A-Z])/g;function jIr(t){return t.replace(LIr,"-$1").toLowerCase()}Cwt.exports=jIr});var Awt=mt((wbi,Twt)=>{"use strict";var BIr=Ewt(),$Ir=/^ms-/;function zIr(t){return BIr(t).replace($Ir,"-ms-")}Twt.exports=zIr});var Iwt=mt((_bi,kwt)=>{"use strict";function UIr(t){var r={};return function(n){return r.hasOwnProperty(n)||(r[n]=t.call(this,n)),r[n]}}kwt.exports=UIr});var EEe=mt(B6=>{"use strict";Object.defineProperty(B6,"__esModule",{value:!0});B6.processStyleName=void 0;B6.createMarkupForStyles=QIr;var VIr=gwt(),Sbi=j6(VIr),GIr=Swt(),WIr=j6(GIr),qIr=Awt(),HIr=j6(qIr),YIr=Iwt(),XIr=j6(YIr),KIr=SEe(),Cbi=j6(KIr);function j6(t){return t&&t.__esModule?t:{default:t}}var ZIr=B6.processStyleName=(0,XIr.default)(HIr.default);function QIr(t,r){var n="";for(var o in t){var i=o.indexOf("--")===0;if(t.hasOwnProperty(o)&&o!=="label"){var s=t[o];s!=null&&(i?n+=o+":"+s+";":(n+=ZIr(o)+":",n+=(0,WIr.default)(o,s,r)+";"))}}return n||null}});var Nwt=mt(AEe=>{"use strict";Object.defineProperty(AEe,"__esModule",{value:!0});var Dwt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};AEe.default=TEe;function JIr(t){return t==null||t===!1||(typeof t>"u"?"undefined":Dwt(t))==="object"&&Object.keys(t).length===0}function eDr(t){if(JIr(t))return null;if((typeof t>"u"?"undefined":Dwt(t))!=="object")return t;for(var r={},n=Object.keys(t),o=!1,i=0;i<n.length;i++){var s=t[n[i]],a=TEe(s);(a===null||a!==s)&&(o=!0),a!==null&&(r[n[i]]=a)}return Object.keys(r).length===0?null:o?r:t}function tDr(t){var r=!1,n=[];return t.forEach(function(o){var i=TEe(o);(i===null||i!==o)&&(r=!0),i!==null&&n.push(i)}),n.length==0?null:r?n:t}function TEe(t){return Array.isArray(t)?tDr(t):eDr(t)}});var Owt=mt((Ote,Fwt)=>{"use strict";Object.defineProperty(Ote,"__esModule",{value:!0});var Kt=["Webkit"],Mwt=["Moz"],Us=["ms"],cg=["Webkit","Moz"],mb=["Webkit","ms"],$6=["Webkit","Moz","ms"];Ote.default={plugins:[],prefixMap:{appearance:cg,userSelect:$6,textEmphasisPosition:Kt,textEmphasis:Kt,textEmphasisStyle:Kt,textEmphasisColor:Kt,boxDecorationBreak:Kt,clipPath:Kt,maskImage:Kt,maskMode:Kt,maskRepeat:Kt,maskPosition:Kt,maskClip:Kt,maskOrigin:Kt,maskSize:Kt,maskComposite:Kt,mask:Kt,maskBorderSource:Kt,maskBorderMode:Kt,maskBorderSlice:Kt,maskBorderWidth:Kt,maskBorderOutset:Kt,maskBorderRepeat:Kt,maskBorder:Kt,maskType:Kt,textDecorationStyle:Kt,textDecorationSkip:Kt,textDecorationLine:Kt,textDecorationColor:Kt,filter:Kt,fontFeatureSettings:Kt,breakAfter:$6,breakBefore:$6,breakInside:$6,columnCount:cg,columnFill:cg,columnGap:cg,columnRule:cg,columnRuleColor:cg,columnRuleStyle:cg,columnRuleWidth:cg,columns:cg,columnSpan:cg,columnWidth:cg,writingMode:mb,flex:Kt,flexBasis:Kt,flexDirection:Kt,flexGrow:Kt,flexFlow:Kt,flexShrink:Kt,flexWrap:Kt,alignContent:Kt,alignItems:Kt,alignSelf:Kt,justifyContent:Kt,order:Kt,transform:Kt,transformOrigin:Kt,transformOriginX:Kt,transformOriginY:Kt,backfaceVisibility:Kt,perspective:Kt,perspectiveOrigin:Kt,transformStyle:Kt,transformOriginZ:Kt,animation:Kt,animationDelay:Kt,animationDirection:Kt,animationFillMode:Kt,animationDuration:Kt,animationIterationCount:Kt,animationName:Kt,animationPlayState:Kt,animationTimingFunction:Kt,backdropFilter:Kt,fontKerning:Kt,scrollSnapType:mb,scrollSnapPointsX:mb,scrollSnapPointsY:mb,scrollSnapDestination:mb,scrollSnapCoordinate:mb,shapeImageThreshold:Kt,shapeImageMargin:Kt,shapeImageOutside:Kt,hyphens:$6,flowInto:mb,flowFrom:mb,regionFragment:mb,textAlignLast:Mwt,tabSize:Mwt,wrapFlow:Us,wrapThrough:Us,wrapMargin:Us,gridTemplateColumns:Us,gridTemplateRows:Us,gridTemplateAreas:Us,gridTemplate:Us,gridAutoColumns:Us,gridAutoRows:Us,gridAutoFlow:Us,grid:Us,gridRowStart:Us,gridColumnStart:Us,gridRowEnd:Us,gridRow:Us,gridColumn:Us,gridColumnEnd:Us,gridColumnGap:Us,gridRowGap:Us,gridArea:Us,gridGap:Us,textSizeAdjust:mb,borderImage:Kt,borderImageOutset:Kt,borderImageRepeat:Kt,borderImageSlice:Kt,borderImageSource:Kt,borderImageWidth:Kt,transitionDelay:Kt,transitionDuration:Kt,transitionProperty:Kt,transitionTimingFunction:Kt}};Fwt.exports=Ote.default});var kEe=mt((Rte,Rwt)=>{"use strict";Object.defineProperty(Rte,"__esModule",{value:!0});Rte.default=rDr;function rDr(t){return t.charAt(0).toUpperCase()+t.slice(1)}Rwt.exports=Rte.default});var Lwt=mt((Pte,Pwt)=>{"use strict";Object.defineProperty(Pte,"__esModule",{value:!0});Pte.default=sDr;var nDr=kEe(),oDr=iDr(nDr);function iDr(t){return t&&t.__esModule?t:{default:t}}function sDr(t,r,n){if(t.hasOwnProperty(r))for(var o=t[r],i=0,s=o.length;i<s;++i)n[o[i]+(0,oDr.default)(r)]=n[r]}Pwt.exports=Pte.default});var Bwt=mt((Lte,jwt)=>{"use strict";Object.defineProperty(Lte,"__esModule",{value:!0});Lte.default=aDr;function aDr(t,r,n,o,i){for(var s=0,a=t.length;s<a;++s){var l=t[s](r,n,o,i);if(l)return l}}jwt.exports=Lte.default});var zwt=mt((jte,$wt)=>{"use strict";Object.defineProperty(jte,"__esModule",{value:!0});jte.default=cDr;var lDr=["-webkit-","-moz-",""],uDr={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function cDr(t,r){if(t==="cursor"&&uDr.hasOwnProperty(r))return lDr.map(function(n){return n+r})}$wt.exports=jte.default});var HO=mt((Bte,Uwt)=>{"use strict";Object.defineProperty(Bte,"__esModule",{value:!0});Bte.default=dDr;var fDr=/-webkit-|-moz-|-ms-/;function dDr(t){return typeof t=="string"&&fDr.test(t)}Uwt.exports=Bte.default});var Gwt=mt(($te,Vwt)=>{"use strict";Object.defineProperty($te,"__esModule",{value:!0});$te.default=yDr;var pDr=HO(),hDr=mDr(pDr);function mDr(t){return t&&t.__esModule?t:{default:t}}var gDr=["-webkit-",""];function yDr(t,r){if(typeof r=="string"&&!(0,hDr.default)(r)&&r.indexOf("cross-fade(")>-1)return gDr.map(function(n){return r.replace(/cross-fade\(/g,n+"cross-fade(")})}Vwt.exports=$te.default});var qwt=mt((zte,Wwt)=>{"use strict";Object.defineProperty(zte,"__esModule",{value:!0});zte.default=_Dr;var bDr=HO(),xDr=vDr(bDr);function vDr(t){return t&&t.__esModule?t:{default:t}}var wDr=["-webkit-",""];function _Dr(t,r){if(typeof r=="string"&&!(0,xDr.default)(r)&&r.indexOf("filter(")>-1)return wDr.map(function(n){return r.replace(/filter\(/g,n+"filter(")})}Wwt.exports=zte.default});var Xwt=mt((Ute,Ywt)=>{"use strict";Object.defineProperty(Ute,"__esModule",{value:!0});Ute.default=SDr;var Hwt={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function SDr(t,r){if(t==="display"&&Hwt.hasOwnProperty(r))return Hwt[r]}Ywt.exports=Ute.default});var Qwt=mt((Vte,Zwt)=>{"use strict";Object.defineProperty(Vte,"__esModule",{value:!0});Vte.default=EDr;var CDr={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},Kwt={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function EDr(t,r,n){t==="flexDirection"&&typeof r=="string"&&(r.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",r.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),Kwt.hasOwnProperty(t)&&(n[Kwt[t]]=CDr[r]||r)}Zwt.exports=Vte.default});var e_t=mt((Gte,Jwt)=>{"use strict";Object.defineProperty(Gte,"__esModule",{value:!0});Gte.default=NDr;var TDr=HO(),ADr=kDr(TDr);function kDr(t){return t&&t.__esModule?t:{default:t}}var IDr=["-webkit-","-moz-",""],DDr=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function NDr(t,r){if(typeof r=="string"&&!(0,ADr.default)(r)&&DDr.test(r))return IDr.map(function(n){return n+r})}Jwt.exports=Gte.default});var r_t=mt((Wte,t_t)=>{"use strict";Object.defineProperty(Wte,"__esModule",{value:!0});Wte.default=PDr;var MDr=HO(),FDr=ODr(MDr);function ODr(t){return t&&t.__esModule?t:{default:t}}var RDr=["-webkit-",""];function PDr(t,r){if(typeof r=="string"&&!(0,FDr.default)(r)&&r.indexOf("image-set(")>-1)return RDr.map(function(n){return r.replace(/image-set\(/g,n+"image-set(")})}t_t.exports=Wte.default});var o_t=mt((qte,n_t)=>{"use strict";Object.defineProperty(qte,"__esModule",{value:!0});qte.default=LDr;function LDr(t,r){if(t==="position"&&r==="sticky")return["-webkit-sticky","sticky"]}n_t.exports=qte.default});var s_t=mt((Hte,i_t)=>{"use strict";Object.defineProperty(Hte,"__esModule",{value:!0});Hte.default=zDr;var jDr=["-webkit-","-moz-",""],BDr={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},$Dr={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function zDr(t,r){if(BDr.hasOwnProperty(t)&&$Dr.hasOwnProperty(r))return jDr.map(function(n){return n+r})}i_t.exports=Hte.default});var a_t={};fn(a_t,{default:()=>qDr});function GDr(t){return"-"+t.toLowerCase()}function WDr(t){if(IEe.hasOwnProperty(t))return IEe[t];var r=t.replace(UDr,GDr);return IEe[t]=VDr.test(r)?"-"+r:r}var UDr,VDr,IEe,qDr,l_t=N(()=>{"use strict";UDr=/[A-Z]/g,VDr=/^ms-/,IEe={};qDr=WDr});var c_t=mt((Yte,u_t)=>{"use strict";Object.defineProperty(Yte,"__esModule",{value:!0});Yte.default=KDr;var HDr=(l_t(),Tl(a_t)),YDr=XDr(HDr);function XDr(t){return t&&t.__esModule?t:{default:t}}function KDr(t){return(0,YDr.default)(t)}u_t.exports=Yte.default});var p_t=mt((Xte,d_t)=>{"use strict";Object.defineProperty(Xte,"__esModule",{value:!0});Xte.default=iNr;var ZDr=c_t(),QDr=DEe(ZDr),JDr=HO(),eNr=DEe(JDr),tNr=kEe(),f_t=DEe(tNr);function DEe(t){return t&&t.__esModule?t:{default:t}}var rNr={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},nNr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function oNr(t,r){if((0,eNr.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=n.length;o<i;++o){var s=n[o],a=[s];for(var l in r){var u=(0,QDr.default)(l);if(s.indexOf(u)>-1&&u!=="order")for(var c=r[l],f=0,d=c.length;f<d;++f)a.unshift(s.replace(u,nNr[c[f]]+u))}n[o]=a.join(",")}return n.join(",")}function iNr(t,r,n,o){if(typeof r=="string"&&rNr.hasOwnProperty(t)){var i=oNr(r,o),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-moz-|-ms-/.test(l)}).join(",");if(t.indexOf("Webkit")>-1)return s;var a=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-webkit-|-ms-/.test(l)}).join(",");return t.indexOf("Moz")>-1?a:(n["Webkit"+(0,f_t.default)(t)]=s,n["Moz"+(0,f_t.default)(t)]=a,i)}}d_t.exports=Xte.default});var m_t=mt(NEe=>{"use strict";Object.defineProperty(NEe,"__esModule",{value:!0});NEe.default=FNr;var sNr=Owt(),aNr=ep(sNr),lNr=Lwt(),uNr=ep(lNr),cNr=Bwt(),fNr=ep(cNr),dNr=zwt(),pNr=ep(dNr),hNr=Gwt(),mNr=ep(hNr),gNr=qwt(),yNr=ep(gNr),bNr=Xwt(),xNr=ep(bNr),vNr=Qwt(),wNr=ep(vNr),_Nr=e_t(),SNr=ep(_Nr),CNr=r_t(),ENr=ep(CNr),TNr=o_t(),ANr=ep(TNr),kNr=s_t(),INr=ep(kNr),DNr=p_t(),NNr=ep(DNr);function ep(t){return t&&t.__esModule?t:{default:t}}var MNr=[mNr.default,pNr.default,yNr.default,wNr.default,SNr.default,ENr.default,ANr.default,INr.default,NNr.default,xNr.default],h_t=aNr.default.prefixMap;function FNr(t){for(var r in t){var n=t[r],o=(0,fNr.default)(MNr,r,n,t,h_t);o&&(t[r]=o),(0,uNr.default)(h_t,r,t)}return t}});var b_t=mt(YO=>{"use strict";Object.defineProperty(YO,"__esModule",{value:!0});var MEe=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};YO.PluginSet=y_t;YO.fallbacks=BNr;YO.contentWrap=zNr;YO.prefixes=UNr;var ONr=Nte(),FEe=g_t(ONr),RNr=EEe(),PNr=m_t(),LNr=g_t(PNr);function g_t(t){return t&&t.__esModule?t:{default:t}}var jNr=function(t){return t==="development"||!t}("production");function y_t(t){this.fns=t||[]}(0,FEe.default)(y_t.prototype,{add:function(){for(var r=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach(function(s){r.fns.indexOf(s)>=0?jNr&&console.warn("adding the same plugin again, ignoring"):r.fns=[s].concat(r.fns)})},remove:function(r){this.fns=this.fns.filter(function(n){return n!==r})},clear:function(){this.fns=[]},transform:function(r){return this.fns.reduce(function(n,o){return o(n)},r)}});function BNr(t){var r=Object.keys(t.style).map(function(i){return Array.isArray(t.style[i])}).indexOf(!0)>=0;if(r){var n=t.style,o=Object.keys(n).reduce(function(i,s){return i[s]=Array.isArray(n[s])?n[s].join("; "+(0,RNr.processStyleName)(s)+": "):n[s],i},{});return(0,FEe.default)({},t,{style:o})}return t}var $Nr=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function zNr(t){if(t.style.content){var r=t.style.content;return $Nr.indexOf(r)>=0||/^(attr|calc|counters?|url)\(/.test(r)||r.charAt(0)===r.charAt(r.length-1)&&(r.charAt(0)==='"'||r.charAt(0)==="'")?t:MEe({},t,{style:MEe({},t.style,{content:'"'+r+'"'})})}return t}function UNr(t){return(0,FEe.default)({},t,{style:(0,LNr.default)(MEe({},t.style))})}});var v_t=mt(OEe=>{"use strict";Object.defineProperty(OEe,"__esModule",{value:!0});OEe.default=VNr;function VNr(t,r){for(var n=1540483477,o=24,i=r^t.length,s=t.length,a=0;s>=4;){var l=GNr(t,a);l=sk(l,n),l^=l>>>o,l=sk(l,n),i=sk(i,n),i^=l,a+=4,s-=4}switch(s){case 3:i^=x_t(t,a),i^=t.charCodeAt(a+2)<<16,i=sk(i,n);break;case 2:i^=x_t(t,a),i=sk(i,n);break;case 1:i^=t.charCodeAt(a),i=sk(i,n);break}return i^=i>>>13,i=sk(i,n),i^=i>>>15,i>>>0}function GNr(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)+(t.charCodeAt(r++)<<16)+(t.charCodeAt(r)<<24)}function x_t(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)}function sk(t,r){t=t|0,r=r|0;var n=t&65535,o=t>>>16,i=n*r+((o*r&65535)<<16)|0;return i}});var XO=mt(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.compose=Lt.merge=Lt.$=Lt.style=Lt.presets=Lt.keyframes=Lt.fontFace=Lt.insertGlobal=Lt.insertRule=Lt.plugins=Lt.styleSheet=void 0;Lt.speedy=QNr;Lt.simulations=eMr;Lt.simulate=tMr;Lt.cssLabels=rMr;Lt.isLikeRule=$Ee;Lt.idFor=zEe;Lt.css=_l;Lt.rehydrate=gMr;Lt.flush=yMr;Lt.select=UEe;Lt.parent=xMr;Lt.media=vMr;Lt.pseudo=rn;Lt.active=wMr;Lt.any=_Mr;Lt.checked=SMr;Lt.disabled=CMr;Lt.empty=EMr;Lt.enabled=TMr;Lt._default=AMr;Lt.first=kMr;Lt.firstChild=IMr;Lt.firstOfType=DMr;Lt.fullscreen=NMr;Lt.focus=MMr;Lt.hover=FMr;Lt.indeterminate=OMr;Lt.inRange=RMr;Lt.invalid=PMr;Lt.lastChild=LMr;Lt.lastOfType=jMr;Lt.left=BMr;Lt.link=$Mr;Lt.onlyChild=zMr;Lt.onlyOfType=UMr;Lt.optional=VMr;Lt.outOfRange=GMr;Lt.readOnly=WMr;Lt.readWrite=qMr;Lt.required=HMr;Lt.right=YMr;Lt.root=XMr;Lt.scope=KMr;Lt.target=ZMr;Lt.valid=QMr;Lt.visited=JMr;Lt.dir=eFr;Lt.lang=tFr;Lt.not=rFr;Lt.nthChild=nFr;Lt.nthLastChild=oFr;Lt.nthLastOfType=iFr;Lt.nthOfType=sFr;Lt.after=aFr;Lt.before=lFr;Lt.firstLetter=uFr;Lt.firstLine=cFr;Lt.selection=fFr;Lt.backdrop=dFr;Lt.placeholder=pFr;Lt.cssFor=hFr;Lt.attribsFor=mFr;var WNr=Nte(),qNr=jEe(WNr),HNr=dwt(),LEe=EEe(),YNr=Nwt(),K2=jEe(YNr),s1=b_t(),XNr=v_t(),KNr=jEe(XNr);function jEe(t){return t&&t.__esModule?t:{default:t}}function ZNr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function U6(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var tp=Lt.styleSheet=new HNr.StyleSheet;tp.inject();function QNr(t){return tp.speedy(t)}var V6=Lt.plugins=tp.plugins=new s1.PluginSet([s1.prefixes,s1.contentWrap,s1.fallbacks]);V6.media=new s1.PluginSet;V6.fontFace=new s1.PluginSet;V6.keyframes=new s1.PluginSet([s1.prefixes,s1.fallbacks]);var G6=!1,JNr=!1,rre=typeof window<"u",BEe=G6,w_t=!1,__t=!1;function eMr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;BEe=!!t}function tMr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,K2.default)(r),r?BEe?r.reduce(function(o,i){return o["data-simulate-"+Qte(i)]="",o},{}):(w_t||(console.warn("can't simulate without once calling simulations(true)"),w_t=!0),!G6&&!JNr&&!__t&&(console.warn("don't use simulation outside dev"),__t=!0),{}):{}}var W6=G6;function rMr(t){W6=!!t}function Qte(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,r)}function q6(t){var r=JSON.stringify(t),n=(0,KNr.default)(r).toString(36);return t.label&&t.label.length>0&&G6?Qte(t.label.join("."),"-")+"-"+n:n}function $Ee(t){var r=Object.keys(t).filter(function(n){return n!=="toString"});return r.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(r[0])}function zEe(t){var r=Object.keys(t).filter(function(i){return i!=="toString"});if(r.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,o=n.exec(r[0]);if(!o)throw new Error("not a rule");return o[1]}var nMr=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function REe(t){if(t.indexOf(",")===-1)return[t];for(var r=[],n=[],o=0,i;i=nMr.exec(t);)switch(i[0]){case"(":o++;break;case")":o--;break;case",":if(o)break;r.push(i.index)}for(i=r.length;i--;)n.unshift(t.slice(r[i]+1)),t=t.slice(0,r[i]);return n.unshift(t),n}function S_t(t,r){if(!t)return r.replace(/\&/g,"");if(!r)return".css-"+t+",[data-css-"+t+"]";var n=REe(r).map(function(o){return o.indexOf("&")>=0?[o.replace(/\&/mg,".css-"+t),o.replace(/\&/mg,"[data-css-"+t+"]")].join(","):".css-"+t+o+",[data-css-"+t+"]"+o}).join(",");return BEe&&/^\&\:/.exec(r)&&!/\s/.exec(r)&&(n+=",.css-"+t+"[data-simulate-"+Qte(r)+"],[data-css-"+t+"][data-simulate-"+Qte(r)+"]"),n}function PEe(t){var r=t.selector,n=t.style,o=V6.transform({selector:r,style:n});return o.selector+"{"+(0,LEe.createMarkupForStyles)(o.style)+"}"}function Jte(t){var r=void 0,n=void 0,o=void 0,i=void 0;return Object.keys(t).forEach(function(s){s.indexOf("&")>=0?(n=n||{},n[s]=t[s]):s.indexOf("@media")===0?(o=o||{},o[s]=Jte(t[s])):s.indexOf("@supports")===0?(i=i||{},i[s]=Jte(t[s])):s==="label"?t.label.length>0&&(r=r||{},r.label=W6?t.label.join("."):""):(r=r||{},r[s]=t[s])}),{plain:r,selects:n,medias:o,supports:i}}function ere(t,r){var n=[],o=r.plain,i=r.selects,s=r.medias,a=r.supports;return o&&n.push(PEe({style:o,selector:S_t(t)})),i&&Object.keys(i).forEach(function(l){return n.push(PEe({style:i[l],selector:S_t(t,l)}))}),s&&Object.keys(s).forEach(function(l){return n.push(l+"{"+ere(t,s[l]).join("")+"}")}),a&&Object.keys(a).forEach(function(l){return n.push(l+"{"+ere(t,a[l]).join("")+"}")}),n}var fg=tp.inserted={};function oMr(t){if(!fg[t.id]){fg[t.id]=!0;var r=Jte(t.style),n=ere(t.id,r);fg[t.id]=rre?!0:n,n.forEach(function(o){return tp.insert(o)})}}var z6=tp.registered={};function nre(t){z6[t.id]||(z6[t.id]=t)}function iMr(t){if($Ee(t)){var r=z6[zEe(t)];if(r==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return r}return t}var Zte={};function sMr(t){if(nre(t),oMr(t),Zte[t.id])return Zte[t.id];var r=U6({},"data-css-"+t.id,W6&&t.label||"");return Object.defineProperty(r,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),Zte[t.id]=r,r}function aMr(t){for(var r=[":",".","[",">"," "],n=!1,o=t.charAt(0),i=0;i<r.length;i++)if(o===r[i]){n=!0;break}return n||t.indexOf("&")>=0}function C_t(t,r){var n=REe(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),o=REe(r).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return o.reduce(function(i,s){return i.concat(n.map(function(a){return s.replace(/\&/g,a)}))},[]).join(",")}function lMr(t,r){return t?"@media "+t.substring(6)+" and "+r.substring(6):r}function uMr(t){return t.indexOf("@media")===0}function cMr(t){return t.indexOf("@supports")===0}function fMr(t,r){return t?"@supports "+t.substring(9)+" and "+r.substring(9):r}function k_t(t){for(var r=[],n=0;n<t.length;n++)Array.isArray(t[n])?r=r.concat(k_t(t[n])):r=r.concat(t[n]);return r}var E_t={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function ak(t,r){var n=r.selector,o=n===void 0?"":n,i=r.mq,s=i===void 0?"":i,a=r.supp,l=a===void 0?"":a,u=r.src,c=u===void 0?{}:u;Array.isArray(c)||(c=[c]),c=k_t(c),c.forEach(function(f){if($Ee(f)){var d=iMr(f);if(d.type!=="css")throw new Error("cannot merge this rule");f=d.style}f=(0,K2.default)(f),f&&f.composes&&ak(t,{selector:o,mq:s,supp:l,src:f.composes}),Object.keys(f||{}).forEach(function(p){if(aMr(p))E_t[p]&&E_t[p].forEach(function(m){return ak(t,{selector:C_t(o,m),mq:s,supp:l,src:f[p]})}),ak(t,{selector:C_t(o,p),mq:s,supp:l,src:f[p]});else if(uMr(p))ak(t,{selector:o,mq:lMr(s,p),supp:l,src:f[p]});else if(cMr(p))ak(t,{selector:o,mq:s,supp:fMr(l,p),src:f[p]});else if(p!=="composes"){var h=t;l&&(h[l]=h[l]||{},h=h[l]),s&&(h[s]=h[s]||{},h=h[s]),o&&(h[o]=h[o]||{},h=h[o]),p==="label"?W6&&(t.label=t.label.concat(f.label)):h[p]=f[p]}})})}function T_t(t){var r={label:[]};ak(r,{src:t});var n={id:q6(r),style:r,label:W6?r.label.join("."):"",type:"css"};return sMr(n)}var tre={};Object.defineProperty(tre,"toString",{enumerable:!1,value:function(){return"css-nil"}});var Kte=typeof WeakMap<"u"?[tre,new WeakMap,new WeakMap,new WeakMap]:[tre],A_t=!1;function dMr(t){return function(r){if(Kte[r.length]){for(var n=Kte[r.length],o=0;o<r.length-1;)n.has(r[o])||n.set(r[o],new WeakMap),n=n.get(r[o]),o++;if(n.has(r[r.length-1])){var i=n.get(r[o]);if(z6[i.toString().substring(4)])return i}}var s=t(r);if(Kte[r.length]){for(var a=0,l=Kte[r.length];a<r.length-1;)l=l.get(r[a]),a++;try{l.set(r[a],s)}catch{if(G6&&!A_t){var u;A_t=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(ZNr(r))),console.warn("this should NOT happen, please file a bug on the github repo.")}}}return s}}var pMr=typeof WeakMap<"u"?dMr(T_t):T_t;function _l(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r[0]&&r[0].length&&r[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return r=(0,K2.default)(r),r?pMr(r):tre}_l.insert=function(t){var r={id:q6(t),css:t,type:"raw"};nre(r),fg[r.id]||(tp.insert(r.css),fg[r.id]=rre?!0:[r.css])};var Dbi=Lt.insertRule=_l.insert;_l.global=function(t,r){if(r=(0,K2.default)(r),r)return _l.insert(PEe({selector:t,style:r}))};var Nbi=Lt.insertGlobal=_l.global;function hMr(t){if(!fg[t.id]){var r=Object.keys(t.keyframes).map(function(o){var i=V6.keyframes.transform({id:t.id,name:o,style:t.keyframes[o]});return i.name+"{"+(0,LEe.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(o){return"@"+o+"keyframes "+(t.name+"_"+t.id)+"{"+r+"}"});n.forEach(function(o){return tp.insert(o)}),fg[t.id]=rre?!0:n}}_l.keyframes=function(t,r){r||(r=t,t="animation"),r=(0,K2.default)(r)||{};var n={id:q6({name:t,kfs:r}),type:"keyframes",name:t,keyframes:r};return nre(n),hMr(n),t+"_"+n.id};_l.fontFace=function(t){t=(0,K2.default)(t);var r={id:q6(t),type:"font-face",font:t};return nre(r),mMr(r),t.fontFamily};var Mbi=Lt.fontFace=_l.fontFace,Fbi=Lt.keyframes=_l.keyframes;function mMr(t){if(!fg[t.id]){var r="@font-face{"+(0,LEe.createMarkupForStyles)(t.font)+"}";tp.insert(r),fg[t.id]=rre?!0:[r]}}function gMr(t){(0,qNr.default)(fg,t.reduce(function(r,n){return r[n]=!0,r},{}))}function yMr(){fg=tp.inserted={},z6=tp.registered={},Zte={},tp.flush(),tp.inject()}var Obi=Lt.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"},bMr=Lt.style=_l;function UEe(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t?_l(U6({},t,n)):bMr(n)}var Rbi=Lt.$=UEe;function xMr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _l(U6({},t+" &",n))}var Pbi=Lt.merge=_l,Lbi=Lt.compose=_l;function vMr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _l(U6({},"@media "+t,n))}function rn(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _l(U6({},t,n))}function wMr(t){return rn(":active",t)}function _Mr(t){return rn(":any",t)}function SMr(t){return rn(":checked",t)}function CMr(t){return rn(":disabled",t)}function EMr(t){return rn(":empty",t)}function TMr(t){return rn(":enabled",t)}function AMr(t){return rn(":default",t)}function kMr(t){return rn(":first",t)}function IMr(t){return rn(":first-child",t)}function DMr(t){return rn(":first-of-type",t)}function NMr(t){return rn(":fullscreen",t)}function MMr(t){return rn(":focus",t)}function FMr(t){return rn(":hover",t)}function OMr(t){return rn(":indeterminate",t)}function RMr(t){return rn(":in-range",t)}function PMr(t){return rn(":invalid",t)}function LMr(t){return rn(":last-child",t)}function jMr(t){return rn(":last-of-type",t)}function BMr(t){return rn(":left",t)}function $Mr(t){return rn(":link",t)}function zMr(t){return rn(":only-child",t)}function UMr(t){return rn(":only-of-type",t)}function VMr(t){return rn(":optional",t)}function GMr(t){return rn(":out-of-range",t)}function WMr(t){return rn(":read-only",t)}function qMr(t){return rn(":read-write",t)}function HMr(t){return rn(":required",t)}function YMr(t){return rn(":right",t)}function XMr(t){return rn(":root",t)}function KMr(t){return rn(":scope",t)}function ZMr(t){return rn(":target",t)}function QMr(t){return rn(":valid",t)}function JMr(t){return rn(":visited",t)}function eFr(t,r){return rn(":dir("+t+")",r)}function tFr(t,r){return rn(":lang("+t+")",r)}function rFr(t,r){var n=t.split(",").map(function(o){return o.trim()}).map(function(o){return":not("+o+")"});return n.length===1?rn(":not("+t+")",r):UEe(n.join(""),r)}function nFr(t,r){return rn(":nth-child("+t+")",r)}function oFr(t,r){return rn(":nth-last-child("+t+")",r)}function iFr(t,r){return rn(":nth-last-of-type("+t+")",r)}function sFr(t,r){return rn(":nth-of-type("+t+")",r)}function aFr(t){return rn("::after",t)}function lFr(t){return rn("::before",t)}function uFr(t){return rn("::first-letter",t)}function cFr(t){return rn("::first-line",t)}function fFr(t){return rn("::selection",t)}function dFr(t){return rn("::backdrop",t)}function pFr(t){return _l({"::placeholder":t})}function hFr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,K2.default)(r),r?r.map(function(o){var i={label:[]};return ak(i,{src:o}),ere(q6(i),Jte(i)).join("")}).join(""):""}function mFr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r=(0,K2.default)(r);var o=r?r.map(function(i){zEe(i);var s=Object.keys(i)[0],a=i[s];return s+'="'+(a||"")+'"'}).join(" "):"";return o}});var VEe=mt(ore=>{"use strict";Object.defineProperty(ore,"__esModule",{value:!0});function gFr(t){return t.name!=null}ore.isSurfaceInfo=gFr;function yFr(t){return t.drawArea instanceof HTMLElement}ore.isSurface=yFr});var cre={};fn(cre,{Component:()=>H6,cloneElement:()=>M_t,createElement:()=>ire,default:()=>DFr,h:()=>ire,options:()=>Hf,render:()=>U_t,rerender:()=>HEe});function bFr(){}function ire(t,r){var n=I_t,o,i,s,a;for(a=arguments.length;a-- >2;)KO.push(arguments[a]);for(r&&r.children!=null&&(KO.length||KO.push(r.children),delete r.children);KO.length;)if((i=KO.pop())&&i.pop!==void 0)for(a=i.length;a--;)KO.push(i[a]);else typeof i=="boolean"&&(i=null),(s=typeof t!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&o?n[n.length-1]+=i:n===I_t?n=[i]:n.push(i),o=s;var l=new bFr;return l.nodeName=t,l.children=n,l.attributes=r??void 0,l.key=r?.key,Hf.vnode!==void 0&&Hf.vnode(l),l}function Q2(t,r){for(var n in r)t[n]=r[n];return t}function M_t(t,r){return ire(t.nodeName,Q2(Q2({},t.attributes),r),arguments.length>2?[].slice.call(arguments,2):t.children)}function F_t(t){!t._dirty&&(t._dirty=!0)&&GEe.push(t)==1&&(Hf.debounceRendering||xFr)(HEe)}function HEe(){var t,r=GEe;for(GEe=[];t=r.pop();)t._dirty&&lre(t)}function wFr(t,r,n){return typeof r=="string"||typeof r=="number"?t.splitText!==void 0:typeof r.nodeName=="string"?!t._componentConstructor&&O_t(t,r.nodeName):n||t._componentConstructor===r.nodeName}function O_t(t,r){return t.normalizedNodeName===r||t.nodeName.toLowerCase()===r.toLowerCase()}function R_t(t){var r=Q2({},t.attributes);r.children=t.children;var n=t.nodeName.defaultProps;if(n!==void 0)for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}function _Fr(t,r){var n=r?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function YEe(t){var r=t.parentNode;r&&r.removeChild(t)}function D_t(t,r,n,o,i){if(r==="className"&&(r="class"),r!=="key")if(r==="ref")n&&n(null),o&&o(t);else if(r==="class"&&!i)t.className=o||"";else if(r==="style"){if((!o||typeof o=="string"||typeof n=="string")&&(t.style.cssText=o||""),o&&typeof o=="object"){if(typeof n!="string")for(var s in n)s in o||(t.style[s]="");for(var s in o)t.style[s]=typeof o[s]=="number"&&vFr.test(s)===!1?o[s]+"px":o[s]}}else if(r==="dangerouslySetInnerHTML")o&&(t.innerHTML=o.__html||"");else if(r[0]=="o"&&r[1]=="n"){var a=r!==(r=r.replace(/Capture$/,""));r=r.toLowerCase().substring(2),o?n||t.addEventListener(r,N_t,a):t.removeEventListener(r,N_t,a),(t._listeners||(t._listeners={}))[r]=o}else if(r!=="list"&&r!=="type"&&!i&&r in t)SFr(t,r,o??""),(o==null||o===!1)&&t.removeAttribute(r);else{var l=i&&r!==(r=r.replace(/^xlink:?/,""));o==null||o===!1?l?t.removeAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase()):t.removeAttribute(r):typeof o!="function"&&(l?t.setAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase(),o):t.setAttribute(r,o))}}function SFr(t,r,n){try{t[r]=n}catch{}}function N_t(t){return this._listeners[t.type](Hf.event&&Hf.event(t)||t)}function L_t(){for(var t;t=P_t.pop();)Hf.afterMount&&Hf.afterMount(t),t.componentDidMount&&t.componentDidMount()}function j_t(t,r,n,o,i,s){WEe++||(Z2=i!=null&&i.ownerSVGElement!==void 0,sre=t!=null&&!("__preactattr_"in t));var a=B_t(t,r,n,o,s);return i&&a.parentNode!==i&&i.appendChild(a),--WEe||(sre=!1,s||L_t()),a}function B_t(t,r,n,o,i){var s=t,a=Z2;if((r==null||typeof r=="boolean")&&(r=""),typeof r=="string"||typeof r=="number")return t&&t.splitText!==void 0&&t.parentNode&&(!t._component||i)?t.nodeValue!=r&&(t.nodeValue=r):(s=document.createTextNode(r),t&&(t.parentNode&&t.parentNode.replaceChild(s,t),lk(t,!0))),s.__preactattr_=!0,s;var l=r.nodeName;if(typeof l=="function")return kFr(t,r,n,o);if(Z2=l==="svg"?!0:l==="foreignObject"?!1:Z2,l=String(l),(!t||!O_t(t,l))&&(s=_Fr(l,Z2),t)){for(;t.firstChild;)s.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(s,t),lk(t,!0)}var u=s.firstChild,c=s.__preactattr_,f=r.children;if(c==null){c=s.__preactattr_={};for(var d=s.attributes,p=d.length;p--;)c[d[p].name]=d[p].value}return!sre&&f&&f.length===1&&typeof f[0]=="string"&&u!=null&&u.splitText!==void 0&&u.nextSibling==null?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||u!=null)&&CFr(s,f,n,o,sre||c.dangerouslySetInnerHTML!=null),EFr(s,r.attributes,c),Z2=a,s}function CFr(t,r,n,o,i){var s=t.childNodes,a=[],l={},u=0,c=0,f=s.length,d=0,p=r?r.length:0,h,m,g,y,b;if(f!==0)for(var x=0;x<f;x++){var v=s[x],w=v.__preactattr_,_=p&&w?v._component?v._component.__key:w.key:null;_!=null?(u++,l[_]=v):(w||(v.splitText!==void 0?!i||v.nodeValue.trim():i))&&(a[d++]=v)}if(p!==0)for(var x=0;x<p;x++){y=r[x],b=null;var _=y.key;if(_!=null)u&&l[_]!==void 0&&(b=l[_],l[_]=void 0,u--);else if(!b&&c<d){for(h=c;h<d;h++)if(a[h]!==void 0&&wFr(m=a[h],y,i)){b=m,a[h]=void 0,h===d-1&&d--,h===c&&c++;break}}b=B_t(b,y,n,o),g=s[x],b&&b!==t&&b!==g&&(g==null?t.appendChild(b):b===g.nextSibling?YEe(g):t.insertBefore(b,g))}if(u)for(var x in l)l[x]!==void 0&&lk(l[x],!1);for(;c<=d;)(b=a[d--])!==void 0&&lk(b,!1)}function lk(t,r){var n=t._component;n?ure(n):(t.__preactattr_!=null&&t.__preactattr_.ref&&t.__preactattr_.ref(null),(r===!1||t.__preactattr_==null)&&YEe(t),$_t(t))}function $_t(t){for(t=t.lastChild;t;){var r=t.previousSibling;lk(t,!0),t=r}}function EFr(t,r,n){var o;for(o in n)!(r&&r[o]!=null)&&n[o]!=null&&D_t(t,o,n[o],n[o]=void 0,Z2);for(o in r)o!=="children"&&o!=="innerHTML"&&(!(o in n)||r[o]!==(o==="value"||o==="checked"?t[o]:n[o]))&&D_t(t,o,n[o],n[o]=r[o],Z2)}function TFr(t){var r=t.constructor.name;(qEe[r]||(qEe[r]=[])).push(t)}function z_t(t,r,n){var o=qEe[t.name],i;if(t.prototype&&t.prototype.render?(i=new t(r,n),H6.call(i,r,n)):(i=new H6(r,n),i.constructor=t,i.render=AFr),o){for(var s=o.length;s--;)if(o[s].constructor===t){i.nextBase=o[s].nextBase,o.splice(s,1);break}}return i}function AFr(t,r,n){return this.constructor(t,n)}function are(t,r,n,o,i){t._disable||(t._disable=!0,(t.__ref=r.ref)&&delete r.ref,(t.__key=r.key)&&delete r.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(r,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=r,t._disable=!1,n!==0&&(n===1||Hf.syncComponentUpdates!==!1||!t.base?lre(t,1,i):F_t(t)),t.__ref&&t.__ref(t))}function lre(t,r,n,o){if(!t._disable){var i=t.props,s=t.state,a=t.context,l=t.prevProps||i,u=t.prevState||s,c=t.prevContext||a,f=t.base,d=t.nextBase,p=f||d,h=t._component,m=!1,g,y,b;if(f&&(t.props=l,t.state=u,t.context=c,r!==2&&t.shouldComponentUpdate&&t.shouldComponentUpdate(i,s,a)===!1?m=!0:t.componentWillUpdate&&t.componentWillUpdate(i,s,a),t.props=i,t.state=s,t.context=a),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!m){g=t.render(i,s,a),t.getChildContext&&(a=Q2(Q2({},a),t.getChildContext()));var x=g&&g.nodeName,v,w;if(typeof x=="function"){var _=R_t(g);y=h,y&&y.constructor===x&&_.key==y.__key?are(y,_,1,a,!1):(v=y,t._component=y=z_t(x,_,a),y.nextBase=y.nextBase||d,y._parentComponent=t,are(y,_,0,a,!1),lre(y,1,n,!0)),w=y.base}else b=p,v=h,v&&(b=t._component=null),(p||r===1)&&(b&&(b._component=null),w=j_t(b,g,a,n||!f,p&&p.parentNode,!0));if(p&&w!==p&&y!==h){var S=p.parentNode;S&&w!==S&&(S.replaceChild(w,p),v||(p._component=null,lk(p,!1)))}if(v&&ure(v),t.base=w,w&&!o){for(var C=t,E=t;E=E._parentComponent;)(C=E).base=w;w._component=C,w._componentConstructor=C.constructor}}if(!f||n?P_t.unshift(t):m||(t.componentDidUpdate&&t.componentDidUpdate(l,u,c),Hf.afterUpdate&&Hf.afterUpdate(t)),t._renderCallbacks!=null)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);!WEe&&!o&&L_t()}}function kFr(t,r,n,o){for(var i=t&&t._component,s=i,a=t,l=i&&t._componentConstructor===r.nodeName,u=l,c=R_t(r);i&&!u&&(i=i._parentComponent);)u=i.constructor===r.nodeName;return i&&u&&(!o||i._component)?(are(i,c,3,n,o),t=i.base):(s&&!l&&(ure(s),t=a=null),i=z_t(r.nodeName,c,n),t&&!i.nextBase&&(i.nextBase=t,a=null),are(i,c,1,n,o),t=i.base,a&&t!==a&&(a._component=null,lk(a,!1))),t}function ure(t){Hf.beforeUnmount&&Hf.beforeUnmount(t);var r=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?ure(n):r&&(r.__preactattr_&&r.__preactattr_.ref&&r.__preactattr_.ref(null),t.nextBase=r,YEe(r),TFr(t),$_t(r)),t.__ref&&t.__ref(null)}function H6(t,r){this._dirty=!0,this.context=r,this.props=t,this.state=this.state||{}}function U_t(t,r,n){return j_t(n,t,{},!1,r,!1)}var Hf,KO,I_t,xFr,vFr,GEe,P_t,WEe,Z2,sre,qEe,IFr,DFr,fre=N(()=>{"use strict";Hf={},KO=[],I_t=[];xFr=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;vFr=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,GEe=[];P_t=[],WEe=0,Z2=!1,sre=!1;qEe={};Q2(H6.prototype,{setState:function(r,n){var o=this.state;this.prevState||(this.prevState=Q2({},o)),Q2(o,typeof r=="function"?r(o,this.props):r),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),F_t(this)},forceUpdate:function(r){r&&(this._renderCallbacks=this._renderCallbacks||[]).push(r),lre(this,2)},render:function(){}});IFr={h:ire,createElement:ire,cloneElement:M_t,Component:H6,render:U_t,rerender:HEe,options:Hf},DFr=IFr});var V_t=mt(KEe=>{"use strict";Object.defineProperty(KEe,"__esModule",{value:!0});var dre=(fre(),Tl(cre)),XEe=XO(),NFr=(()=>{class t extends dre.Component{componentDidMount(){let{name:n,tab:o}=this.props;this.props.registerSurface(n,o,this)}componentDidUpdate(){return!1}render(){let{name:n,visible:o,styles:i}=this.props,s=Object.assign({},t.defaultStyles,i),{width:a,height:l}=s,{maxHeight:u,maxWidth:c}=s;u=l===t.defaultStyles.height?u:l,c=a===t.defaultStyles.width?c:a;let f=XEe.css({display:o?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:a,maxHeight:u,maxWidth:c,overflow:"auto"}),d=XEe.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),p=XEe.css({boxSizing:"border-box"});return dre.h("div",{className:`${f} tf-surface`,ref:h=>this.container=h,"data-visible":o},dre.h("div",{className:`${d} tf-label`,ref:h=>this.label=h},n),dre.h("div",{className:`${p} tf-draw-area`,ref:h=>this.drawArea=h}))}}return t.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t})();KEe.SurfaceComponent=NFr});var W_t=mt(JEe=>{"use strict";Object.defineProperty(JEe,"__esModule",{value:!0});var Y6=(fre(),Tl(cre)),G_t=XO(),ZEe=class extends Y6.Component{render(){let{tabNames:r,activeTab:n,handleClick:o}=this.props,i=r.length>0?r.map(a=>Y6.h(QEe,{key:a,id:a,handleClick:o,isActive:a===n},a)):null,s=G_t.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return Y6.h("div",{className:`${s} visor-tabs`},i)}};JEe.Tabs=ZEe;var QEe=class extends Y6.Component{render(){let{children:r,isActive:n,handleClick:o,id:i}=this.props,s=G_t.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return Y6.h("a",{className:`${s} tf-tab`,"data-isactive":n,onClick:()=>o(i)},r)}}});var q_t=mt(tTe=>{"use strict";Object.defineProperty(tTe,"__esModule",{value:!0});var dg=(fre(),Tl(cre)),uk=XO(),MFr=V_t(),FFr=W_t(),eTe=class t extends dg.Component{static render(r,n,o){return dg.render(dg.h(t,Object.assign({},o)),r,n)}constructor(r){super(r),this.surfaces=new Map;let n=r.startOpen==null?!0:r.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(r,n){let o=this.surfaceId(r,n),i;if(this.surfaces.has(o))i=this.surfaces.get(o);else throw Error(`Surface not found with id: ${o}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(r,n){return r+n}setTabs(r){let n=r.map(s=>s.tab),o=this.state.tabs,i;for(let s of n)o.has(s)||(o.add(s),i=s);i!=null&&this.setState({tabs:o,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(r,n,o){let i=this.surfaceId(r,n);this.surfaces.set(i,o)}keyHandler(r){r.keyCode===192&&(r.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(r){this.setState({activeTab:r})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(r){this.setTabs(r.surfaceList)}render(){let{isOpen:r,isFullscreen:n,activeTab:o}=this.state,{surfaceList:i}=this.props,s=Array.from(this.getTabs().values()),u=n?"90vw":"550px",c=uk.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),f=uk.css({right:"0"}),d=uk.css({right:`calc(-${u} - 10px)`}),p=r?f:d,h=uk.css({});return dg.h("div",{className:`${c} ${p} visor`,"data-isopen":r,"data-isfullscreen":n},dg.h(OFr,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),dg.h(FFr.Tabs,{tabNames:s,activeTab:o,handleClick:this.setActiveTab.bind(this)}),dg.h("div",{className:`${h} visor-surfaces`},i.map(m=>dg.h(MFr.SurfaceComponent,{key:m.name+m.tab,name:m.name,tab:m.tab,styles:m.styles,registerSurface:this.registerSurface.bind(this),visible:o===m.tab}))))}};tTe.VisorComponent=eTe;function OFr(t){let{isFullScreen:r,fullScreenHandler:n,closeHandler:o}=t,i=uk.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=uk.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),a=uk.css({marginLeft:"auto"});return dg.h("div",{className:`${i} visor-controls`},dg.h("button",{className:`${s}`,onClick:n},r?"Minimize":"Maximize"),dg.h("button",{className:`${s} ${a}`,onClick:o},"Hide"))}});var nTe=mt(mre=>{"use strict";Object.defineProperty(mre,"__esModule",{value:!0});var RFr=q_t(),pre,PFr="Visor",rTe="tfjs-visor-container";function LFr(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(rTe)&&pre!=null)return pre;let t=document.getElementById(rTe);t==null&&(t=document.createElement("div"),t.id=rTe,document.body.appendChild(t));let r;function n(s,a){let l=null;return r=RFr.VisorComponent.render(s,r,{ref:u=>l=u,surfaceList:Array.from(a.values())}),l}let o=new Map,i=n(t,o);return pre=new hre(i,t,o,n),pre}mre.visor=LFr;var hre=class{constructor(r,n,o,i){this.visorComponent=r,this.el=n,this.surfaceList=o,this.renderVisor=i}surface(r){let{name:n}=r,o=r.tab==null?PFr:r.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");let i=Object.assign({},r,{tab:o}),s=`${n}-${o}`;return this.surfaceList.has(s)||this.surfaceList.set(s,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,o)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(r){if(!this.visorComponent.state.tabs.has(r))throw new Error(`Tab '${r}' does not exist`);this.visorComponent.setState({activeTab:r})}};mre.Visor=hre});var uh=mt(ck=>{"use strict";var jFr=ck&&ck.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(ck,"__esModule",{value:!0});var H_t=VEe(),BFr=nTe();function $Fr(t){if(t instanceof HTMLElement)return t;if(H_t.isSurface(t))return t.drawArea;if(H_t.isSurfaceInfo(t))return BFr.visor().surface({name:t.name,tab:t.tab,styles:t.styles}).drawArea;throw new Error("Not a drawable")}ck.getDrawArea=$Fr;function zFr(t,r){let n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(r);if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(t[s]!==r[s])return!1}return!0}ck.shallowEquals=zFr;function UFr(){return jFr(this,void 0,void 0,function*(){yield new Promise(t=>requestAnimationFrame(t))})}ck.nextFrame=UFr});var a1=mt(X6=>{"use strict";Object.defineProperty(X6,"__esModule",{value:!0});var Y_t=XO(),VFr=uh(),GFr={prepend:!1};function WFr(t,r,n={}){let o=VFr.getDrawArea(t),i=Y_t.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=Y_t.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),a=Object.assign({},GFr,n),l=o.querySelector(`div[data-name=${r}]`);if(!l){if(l=document.createElement("div"),l.setAttribute("class",`${i}`),l.dataset.name=r,a.title){let u=document.createElement("div");u.setAttribute("class",`subsurface-title ${s}`),u.innerText=a.title,l.appendChild(u)}a.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l}X6.subSurface=WFr;function qFr(t){let n=0,o=t;for(;o&&o.clientWidth===0;)o=o.parentElement,n=50;return o.clientWidth-n}X6.getDefaultWidth=qFr;function HFr(t){return t.clientHeight===0?200:t.clientHeight}X6.getDefaultHeight=HFr});var K_t=mt(fk=>{"use strict";var YFr=fk&&fk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},XFr=fk&&fk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fk,"__esModule",{value:!0});var KFr=XFr((nk(),Tl(rk))),X_t=a1(),gre=uh();function ZFr(t,r,n={}){return YFr(this,void 0,void 0,function*(){let o=gre.getDrawArea(t),i=r,s=Object.assign({},QFr,n);if(oTe.has(o)){let y=oTe.get(o);if(gre.shallowEquals(s,y.lastOptions)){yield gre.nextFrame();let b=y.view,x=b.changeset().remove(()=>!0).insert(i);yield b.change("values",x).runAsync();return}}let{xLabel:a,yLabel:l,xType:u,yType:c}=s,f=null;a!=null&&(f={title:a});let d=null;l!=null&&(d={title:l});let p={actions:!1,mode:"vega-lite",defaultStyle:!1},h;s.color!=null?Array.isArray(s.color)?h={field:"index",type:"nominal",scale:{range:s.color}}:h={value:s.color}:h={value:"#4C78A0"};let m={width:s.width||X_t.getDefaultWidth(o),height:s.height||X_t.getDefaultHeight(o),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:s.fontSize,titleFontSize:s.fontSize},text:{fontSize:s.fontSize},legend:{labelFontSize:s.fontSize,titleFontSize:s.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:u,axis:f},y:{field:"value",type:c,axis:d},color:h}};yield gre.nextFrame();let g=yield KFr.default(o,m,p);oTe.set(o,{view:g.view,lastOptions:s})})}fk.barchart=ZFr;var QFr={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},oTe=new Map});var Q_t=mt(dk=>{"use strict";var JFr=dk&&dk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},eOr=dk&&dk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dk,"__esModule",{value:!0});var tOr=eOr((nk(),Tl(rk))),Z_t=a1(),rOr=uh();function nOr(t,r,n={}){return JFr(this,void 0,void 0,function*(){let o=Object.assign({},oOr,n),i=rOr.getDrawArea(t),s=[],a=r.values,l=r.tickLabels||[],u=l.length===0,c=!0;for(let h=0;h<a.length;h++){let m=u?`Class ${h}`:l[h];u&&l.push(m);for(let g=0;g<a[h].length;g++){let y=u?`Class ${g}`:l[g],b=a[h][g];h===g&&!o.shadeDiagonal?s.push({label:m,prediction:y,count:b,noFill:!0}):(s.push({label:m,prediction:y,count:b,scaleCount:b}),b!==0&&(c=!1))}}if(!o.shadeDiagonal&&c)for(let h of s)h.noFill===!0&&(h.noFill=!1,h.scaleCount=h.count);let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||Z_t.getDefaultWidth(i),height:o.height||Z_t.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:s},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:l}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:l}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};o.shadeDiagonal===!1&&d.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&d.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});let p=typeof o.colorMap=="string"?{scheme:o.colorMap}:o.colorMap;d.layer[0].encoding.color.scale.range=p,yield tOr.default(i,d,f)})}dk.confusionMatrix=nOr;var oOr={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}});var K6=mt(ZO=>{"use strict";Object.defineProperty(ZO,"__esModule",{value:!0});function J_t(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}ZO.assert=J_t;function iOr(t,r,n=""){J_t(e2t(t,r),n+` Shapes ${t} and ${r} must match`)}ZO.assertShapesMatch=iOr;function e2t(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}ZO.arraysEqual=e2t;ZO.DECIMAL_PLACES_TO_CHECK=4});var o2t=mt(l1=>{"use strict";var n2t=l1&&l1.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},sOr=l1&&l1.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r},aOr=l1&&l1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l1,"__esModule",{value:!0});var Z6=sOr((re(),Tl(Mo))),lOr=aOr((nk(),Tl(rk))),t2t=a1(),Q6=K6(),uOr=uh();function cOr(t,r,n={}){return n2t(this,void 0,void 0,function*(){let o=Object.assign({},dOr,n),i=uOr.getDrawArea(t),s=r.values;o.rowMajor&&(s=yield fOr(r.values));let{xTickLabels:a,yTickLabels:l}=r;a!=null&&r2t(s,a,0),l!=null&&r2t(s,l,1);let u="@tfidx@",c=[];if(s instanceof Z6.Tensor){Q6.assert(s.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let g=yield s.data(),[y,b]=s.shape;for(let x=0;x<y;x++){let v=a?`${a[x]}${u}${x}`:x;for(let w=0;w<b;w++){let _=l?`${l[w]}${u}${w}`:w,S=x*b+w,C=g[S];c.push({x:v,y:_,value:C})}}}else{let g=s;for(let y=0;y<g.length;y++){let b=a?`${a[y]}${u}${y}`:y;for(let x=0;x<g[y].length;x++){let v=l?`${l[x]}${u}${x}`:x,w=g[y][x];c.push({x:b,y:v,value:w})}}}let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||t2t.getDefaultWidth(i),height:o.height||t2t.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:c},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},p=`${u}\\d+$`,h=new RegExp(p);a&&(d.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),l&&(d.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),(a||l)&&(f.tooltip={sanitize:g=>String(g).replace(h,"")});let m;switch(o.colorMap){case"blues":m=["#f7fbff","#4292c6"];break;case"greyscale":m=["#000000","#ffffff"];break;case"viridis":default:m="viridis";break}if(m!=="viridis"){let g=d.encoding.fill;g.scale={range:m}}if(o.domain){let g=d.encoding.fill;g.scale!=null?g.scale=Object.assign({},g.scale,{domain:o.domain}):g.scale={domain:o.domain}}yield lOr.default(i,d,f)})}l1.heatmap=cOr;function fOr(t){return n2t(this,void 0,void 0,function*(){let r,n;t instanceof Z6.Tensor?(r=t.shape,n=t.transpose()):(r=[t.length,t[0].length],n=Z6.tidy(()=>Z6.tensor2d(t).transpose())),Q6.assert(n.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let o=yield n.array();n.dispose();let i=[o.length,o[0].length];return Q6.assert(r[0]===i[1]&&r[1]===i[0],`Unexpected transposed shape. Original ${r} : Transposed ${i}`),o})}function r2t(t,r,n){let o=t instanceof Z6.Tensor?t.shape:[t.length,t[0].length];n===0?Q6.assert(o[0]===r.length,`Length of xTickLabels (${r.length}) must match number of rows (${o[0]})`):n===1&&Q6.assert(o[1]===r.length,`Length of yTickLabels (${r.length}) must match number of columns (${o[1]})`)}var dOr={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}});var J6=mt(u1=>{"use strict";var yre=u1&&u1.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(u1,"__esModule",{value:!0});var pk=(re(),Tl(Mo)),J2=K6();function pOr(t){if(!Array.isArray(t))throw new Error("input must be an array");if(t.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};let r=t.length,n=-1/0,o=1/0,i=0,s=0,a=0;for(let u=0;u<r;u++){let c=t[u];c>n&&(n=c),c<o&&(o=c),c===0&&(i+=1),isNaN(c)?s+=1:isFinite(c)||(a+=1)}let l={numVals:r,numZeros:i,numNans:s,max:n,min:o,numInfs:a};return l.max===-1/0&&(l.max=NaN),l.min===1/0&&(l.min=NaN),l}u1.arrayStats=pOr;function hOr(t){return yre(this,void 0,void 0,function*(){let[r,n,o]=pk.tidy(()=>{let i=pk.scalar(0,t.dtype),s=t.min(),a=t.max(),l=t.equal(i).sum();return[s,a,l]});return Promise.all([t.data(),r.data(),n.data(),o.data()]).then(([i,s,a,l])=>{let u=i.length,c=0,f=0;for(let m=0;m<u;m++){let g=i[m];isNaN(g)?c+=1:isFinite(g)||(f+=1)}let d=s[0],p=a[0];return c===u&&(d=NaN,p=NaN),{numVals:u,numZeros:l[0],numNans:c,min:d,max:p,numInfs:f}})})}u1.tensorStats=hOr;function mOr(t,r,n,o){return yre(this,void 0,void 0,function*(){J2.assert(t.rank===1,"labels must be a 1D tensor"),J2.assert(r.rank===1,"predictions must be a 1D tensor"),J2.assert(t.size===r.size,"labels and predictions must be the same length"),o!=null&&J2.assert(o.size===r.size,"labels and predictions must be the same length");let i=t.cast("int32"),s=r.cast("int32");n==null&&(n=pk.tidy(()=>pk.maximum(i.max(),s.max()).cast("int32").dataSync()[0]+1));let a=Promise.resolve(null);return o!=null&&(a=o.data()),Promise.all([i.data(),s.data(),a]).then(([l,u,c])=>{let f=Array(n).fill(0);for(let d=0;d<n;d++)f[d]=Array(n).fill(0);for(let d=0;d<l.length;d++){let p=l[d],h=u[d];c!=null?f[p][h]+=c[d]:f[p][h]+=1}return f})})}u1.confusionMatrix=mOr;function gOr(t,r){return yre(this,void 0,void 0,function*(){J2.assertShapesMatch(t.shape,r.shape,"Error computing accuracy.");let n=t.equal(r),o=n.mean(),i=(yield o.data())[0];return pk.dispose([n,o]),i})}u1.accuracy=gOr;function yOr(t,r,n){return yre(this,void 0,void 0,function*(){return J2.assert(t.rank===1,"labels must be a 1D tensor"),J2.assert(r.rank===1,"predictions must be a 1D tensor"),J2.assert(t.size===r.size,"labels and predictions must be the same length"),n==null&&(n=pk.tidy(()=>pk.maximum(t.max(),r.max()).dataSync()[0]+1)),Promise.all([t.data(),r.data()]).then(([o,i])=>{let s=Array(n).fill(0),a=Array(n).fill(0);for(let u=0;u<o.length;u++){let c=o[u],f=i[u];s[c]+=1,c===f&&(a[c]+=1)}let l=[];for(let u=0;u<s.length;u++)l.push({count:s[u],accuracy:s[u]===0?0:a[u]/s[u]});return l})})}u1.perClassAccuracy=yOr});var bre,ez,xre=N(()=>{"use strict";bre="http://www.w3.org/1999/xhtml",ez={svg:"http://www.w3.org/2000/svg",xhtml:bre,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}});function QO(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ez.hasOwnProperty(r)?{space:ez[r],local:t}:t}var vre=N(()=>{"use strict";xre()});function bOr(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===bre&&r.documentElement.namespaceURI===bre?r.createElement(t):r.createElementNS(n,t)}}function xOr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eS(t){var r=QO(t);return(r.local?xOr:bOr)(r)}var tz=N(()=>{"use strict";vre();xre()});function vOr(){}function JO(t){return t==null?vOr:function(){return this.querySelector(t)}}var wre=N(()=>{"use strict"});function i2t(t){typeof t!="function"&&(t=JO(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=new Array(a),u,c,f=0;f<a;++f)(u=s[f])&&(c=t.call(u,u.__data__,f,s))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new zi(o,this._parents)}var s2t=N(()=>{"use strict";ch();wre()});function wOr(){return[]}function _re(t){return t==null?wOr:function(){return this.querySelectorAll(t)}}var iTe=N(()=>{"use strict"});function a2t(t){typeof t!="function"&&(t=_re(t));for(var r=this._groups,n=r.length,o=[],i=[],s=0;s<n;++s)for(var a=r[s],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(o.push(t.call(u,u.__data__,c,a)),i.push(u));return new zi(o,i)}var l2t=N(()=>{"use strict";ch();iTe()});var c2t,eR,u2t,Sre,sTe=N(()=>{"use strict";c2t=function(t){return function(){return this.matches(t)}};typeof document<"u"&&(eR=document.documentElement,eR.matches||(u2t=eR.webkitMatchesSelector||eR.msMatchesSelector||eR.mozMatchesSelector||eR.oMatchesSelector,c2t=function(t){return function(){return u2t.call(this,t)}}));Sre=c2t});function f2t(t){typeof t!="function"&&(t=Sre(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=[],u,c=0;c<a;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&l.push(u);return new zi(o,this._parents)}var d2t=N(()=>{"use strict";ch();sTe()});function Cre(t){return new Array(t.length)}var aTe=N(()=>{"use strict"});function p2t(){return new zi(this._enter||this._groups.map(Cre),this._parents)}function rz(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}var lTe=N(()=>{"use strict";aTe();ch();rz.prototype={constructor:rz,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}});function h2t(t){return function(){return t}}var m2t=N(()=>{"use strict"});function _Or(t,r,n,o,i,s){for(var a=0,l,u=r.length,c=s.length;a<c;++a)(l=r[a])?(l.__data__=s[a],o[a]=l):n[a]=new rz(t,s[a]);for(;a<u;++a)(l=r[a])&&(i[a]=l)}function SOr(t,r,n,o,i,s,a){var l,u,c={},f=r.length,d=s.length,p=new Array(f),h;for(l=0;l<f;++l)(u=r[l])&&(p[l]=h=g2t+a.call(u,u.__data__,l,r),h in c?i[l]=u:c[h]=u);for(l=0;l<d;++l)h=g2t+a.call(t,s[l],l,s),(u=c[h])?(o[l]=u,u.__data__=s[l],c[h]=null):n[l]=new rz(t,s[l]);for(l=0;l<f;++l)(u=r[l])&&c[p[l]]===u&&(i[l]=u)}function y2t(t,r){if(!t)return h=new Array(this.size()),c=-1,this.each(function(S){h[++c]=S}),h;var n=r?SOr:_Or,o=this._parents,i=this._groups;typeof t!="function"&&(t=h2t(t));for(var s=i.length,a=new Array(s),l=new Array(s),u=new Array(s),c=0;c<s;++c){var f=o[c],d=i[c],p=d.length,h=t.call(f,f&&f.__data__,c,o),m=h.length,g=l[c]=new Array(m),y=a[c]=new Array(m),b=u[c]=new Array(p);n(f,d,g,y,b,h,r);for(var x=0,v=0,w,_;x<m;++x)if(w=g[x]){for(x>=v&&(v=x+1);!(_=y[v])&&++v<m;);w._next=_||null}}return a=new zi(a,o),a._enter=l,a._exit=u,a}var g2t,b2t=N(()=>{"use strict";ch();lTe();m2t();g2t="$"});function x2t(){return new zi(this._exit||this._groups.map(Cre),this._parents)}var v2t=N(()=>{"use strict";aTe();ch()});function w2t(t){for(var r=this._groups,n=t._groups,o=r.length,i=n.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var u=r[l],c=n[l],f=u.length,d=a[l]=new Array(f),p,h=0;h<f;++h)(p=u[h]||c[h])&&(d[h]=p);for(;l<o;++l)a[l]=r[l];return new zi(a,this._parents)}var _2t=N(()=>{"use strict";ch()});function S2t(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var o=t[r],i=o.length-1,s=o[i],a;--i>=0;)(a=o[i])&&(s&&s!==a.nextSibling&&s.parentNode.insertBefore(a,s),s=a);return this}var C2t=N(()=>{"use strict"});function E2t(t){t||(t=COr);function r(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s){for(var a=n[s],l=a.length,u=i[s]=new Array(l),c,f=0;f<l;++f)(c=a[f])&&(u[f]=c);u.sort(r)}return new zi(i,this._parents).order()}function COr(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var T2t=N(()=>{"use strict";ch()});function A2t(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}var k2t=N(()=>{"use strict"});function I2t(){var t=new Array(this.size()),r=-1;return this.each(function(){t[++r]=this}),t}var D2t=N(()=>{"use strict"});function N2t(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,s=o.length;i<s;++i){var a=o[i];if(a)return a}return null}var M2t=N(()=>{"use strict"});function F2t(){var t=0;return this.each(function(){++t}),t}var O2t=N(()=>{"use strict"});function R2t(){return!this.node()}var P2t=N(()=>{"use strict"});function L2t(t){for(var r=this._groups,n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length,l;s<a;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}var j2t=N(()=>{"use strict"});function EOr(t){return function(){this.removeAttribute(t)}}function TOr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AOr(t,r){return function(){this.setAttribute(t,r)}}function kOr(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function IOr(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function DOr(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function B2t(t,r){var n=QO(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((r==null?n.local?TOr:EOr:typeof r=="function"?n.local?DOr:IOr:n.local?kOr:AOr)(n,r))}var $2t=N(()=>{"use strict";vre()});function tR(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}var Ere=N(()=>{"use strict"});function NOr(t){return function(){this.style.removeProperty(t)}}function MOr(t,r,n){return function(){this.style.setProperty(t,r,n)}}function FOr(t,r,n){return function(){var o=r.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function z2t(t,r,n){return arguments.length>1?this.each((r==null?NOr:typeof r=="function"?FOr:MOr)(t,r,n??"")):uTe(this.node(),t)}function uTe(t,r){return t.style.getPropertyValue(r)||tR(t).getComputedStyle(t,null).getPropertyValue(r)}var cTe=N(()=>{"use strict";Ere()});function OOr(t){return function(){delete this[t]}}function ROr(t,r){return function(){this[t]=r}}function POr(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function U2t(t,r){return arguments.length>1?this.each((r==null?OOr:typeof r=="function"?POr:ROr)(t,r)):this.node()[t]}var V2t=N(()=>{"use strict"});function G2t(t){return t.trim().split(/^|\s+/)}function fTe(t){return t.classList||new W2t(t)}function W2t(t){this._node=t,this._names=G2t(t.getAttribute("class")||"")}function q2t(t,r){for(var n=fTe(t),o=-1,i=r.length;++o<i;)n.add(r[o])}function H2t(t,r){for(var n=fTe(t),o=-1,i=r.length;++o<i;)n.remove(r[o])}function LOr(t){return function(){q2t(this,t)}}function jOr(t){return function(){H2t(this,t)}}function BOr(t,r){return function(){(r.apply(this,arguments)?q2t:H2t)(this,t)}}function Y2t(t,r){var n=G2t(t+"");if(arguments.length<2){for(var o=fTe(this.node()),i=-1,s=n.length;++i<s;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof r=="function"?BOr:r?LOr:jOr)(n,r))}var X2t=N(()=>{"use strict";W2t.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}});function $Or(){this.textContent=""}function zOr(t){return function(){this.textContent=t}}function UOr(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function K2t(t){return arguments.length?this.each(t==null?$Or:(typeof t=="function"?UOr:zOr)(t)):this.node().textContent}var Z2t=N(()=>{"use strict"});function VOr(){this.innerHTML=""}function GOr(t){return function(){this.innerHTML=t}}function WOr(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Q2t(t){return arguments.length?this.each(t==null?VOr:(typeof t=="function"?WOr:GOr)(t)):this.node().innerHTML}var J2t=N(()=>{"use strict"});function qOr(){this.nextSibling&&this.parentNode.appendChild(this)}function eSt(){return this.each(qOr)}var tSt=N(()=>{"use strict"});function HOr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rSt(){return this.each(HOr)}var nSt=N(()=>{"use strict"});function oSt(t){var r=typeof t=="function"?t:eS(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}var iSt=N(()=>{"use strict";tz()});function YOr(){return null}function sSt(t,r){var n=typeof t=="function"?t:eS(t),o=r==null?YOr:typeof r=="function"?r:JO(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}var aSt=N(()=>{"use strict";tz();wre()});function XOr(){var t=this.parentNode;t&&t.removeChild(this)}function lSt(){return this.each(XOr)}var uSt=N(()=>{"use strict"});function KOr(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function ZOr(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function cSt(t){return this.select(t?ZOr:KOr)}var fSt=N(()=>{"use strict"});function dSt(t){return arguments.length?this.property("__data__",t):this.node().__data__}var pSt=N(()=>{"use strict"});function QOr(t,r,n){return t=gSt(t,r,n),function(o){var i=o.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,o)}}function gSt(t,r,n){return function(o){var i=pg;pg=o;try{t.call(this,this.__data__,r,n)}finally{pg=i}}}function JOr(t){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");return o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),{type:r,name:n}})}function eRr(t){return function(){var r=this.__on;if(r){for(var n=0,o=-1,i=r.length,s;n<i;++n)s=r[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):r[++o]=s;++o?r.length=o:delete this.__on}}}function tRr(t,r,n){var o=mSt.hasOwnProperty(t.type)?QOr:gSt;return function(i,s,a){var l=this.__on,u,c=o(r,s,a);if(l){for(var f=0,d=l.length;f<d;++f)if((u=l[f]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),u.value=r;return}}this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:r,listener:c,capture:n},l?l.push(u):this.__on=[u]}}function ySt(t,r,n){var o=JOr(t+""),i,s=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(i=0,f=l[u];i<s;++i)if((a=o[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=r?tRr:eRr,n==null&&(n=!1),i=0;i<s;++i)this.each(l(o[i],r,n));return this}function bSt(t,r,n,o){var i=pg;t.sourceEvent=pg,pg=t;try{return r.apply(n,o)}finally{pg=i}}var mSt,pg,hSt,Tre=N(()=>{"use strict";mSt={},pg=null;typeof document<"u"&&(hSt=document.documentElement,"onmouseenter"in hSt||(mSt={mouseenter:"mouseover",mouseleave:"mouseout"}))});function xSt(t,r,n){var o=tR(t),i=o.CustomEvent;typeof i=="function"?i=new i(r,n):(i=o.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),t.dispatchEvent(i)}function rRr(t,r){return function(){return xSt(this,t,r)}}function nRr(t,r){return function(){return xSt(this,t,r.apply(this,arguments))}}function vSt(t,r){return this.each((typeof r=="function"?nRr:rRr)(t,r))}var wSt=N(()=>{"use strict";Ere()});function zi(t,r){this._groups=t,this._parents=r}function _St(){return new zi([[document.documentElement]],nz)}var nz,SSt,ch=N(()=>{"use strict";s2t();l2t();d2t();b2t();lTe();v2t();_2t();C2t();T2t();k2t();D2t();M2t();O2t();P2t();j2t();$2t();cTe();V2t();X2t();Z2t();J2t();tSt();nSt();iSt();aSt();uSt();fSt();pSt();Tre();wSt();nz=[null];zi.prototype=_St.prototype={constructor:zi,select:i2t,selectAll:a2t,filter:f2t,data:y2t,enter:p2t,exit:x2t,merge:w2t,order:S2t,sort:E2t,call:A2t,nodes:I2t,node:N2t,size:F2t,empty:R2t,each:L2t,attr:B2t,style:z2t,property:U2t,classed:Y2t,text:K2t,html:Q2t,raise:eSt,lower:rSt,append:oSt,insert:sSt,remove:lSt,clone:cSt,datum:dSt,on:ySt,dispatch:vSt};SSt=_St});function Are(t){return typeof t=="string"?new zi([[document.querySelector(t)]],[document.documentElement]):new zi([[t]],nz)}var dTe=N(()=>{"use strict";ch()});function CSt(t){return Are(eS(t).call(document.documentElement))}var ESt=N(()=>{"use strict";tz();dTe()});function kre(){return new pTe}function pTe(){this._="@"+(++oRr).toString(36)}var oRr,TSt=N(()=>{"use strict";oRr=0;pTe.prototype=kre.prototype={constructor:pTe,get:function(t){for(var r=this._;!(r in t);)if(!(t=t.parentNode))return;return t[r]},set:function(t,r){return t[this._]=r},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}});function rR(){for(var t=pg,r;r=t.sourceEvent;)t=r;return t}var Ire=N(()=>{"use strict";Tre()});function tS(t,r){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=r.clientX,o.y=r.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}var i=t.getBoundingClientRect();return[r.clientX-i.left-t.clientLeft,r.clientY-i.top-t.clientTop]}var oz=N(()=>{"use strict"});function ASt(t){var r=rR();return r.changedTouches&&(r=r.changedTouches[0]),tS(t,r)}var kSt=N(()=>{"use strict";Ire();oz()});function ISt(t){return typeof t=="string"?new zi([document.querySelectorAll(t)],[document.documentElement]):new zi([t??[]],nz)}var DSt=N(()=>{"use strict";ch()});function NSt(t,r,n){arguments.length<3&&(n=r,r=rR().changedTouches);for(var o=0,i=r?r.length:0,s;o<i;++o)if((s=r[o]).identifier===n)return tS(t,s);return null}var MSt=N(()=>{"use strict";Ire();oz()});function FSt(t,r){r==null&&(r=rR().touches);for(var n=0,o=r?r.length:0,i=new Array(o);n<o;++n)i[n]=tS(t,r[n]);return i}var OSt=N(()=>{"use strict";Ire();oz()});var RSt={};fn(RSt,{clientPoint:()=>tS,create:()=>CSt,creator:()=>eS,customEvent:()=>bSt,event:()=>pg,local:()=>kre,matcher:()=>Sre,mouse:()=>ASt,namespace:()=>QO,namespaces:()=>ez,select:()=>Are,selectAll:()=>ISt,selection:()=>SSt,selector:()=>JO,selectorAll:()=>_re,style:()=>uTe,touch:()=>NSt,touches:()=>FSt,window:()=>tR});var PSt=N(()=>{"use strict";ESt();tz();TSt();sTe();kSt();vre();xre();oz();dTe();DSt();ch();wre();iTe();cTe();MSt();OSt();Ere();Tre()});var iz=mt(mTe=>{"use strict";Object.defineProperty(mTe,"__esModule",{value:!0});var iRr=(vT(),Tl(l0e)),LSt=(PSt(),Tl(RSt)),hTe=XO(),sRr=uh();function aRr(t,r,n={}){if(r&&r.headers==null)throw new Error('Data to render must have a "headers" property');if(r&&r.values==null)throw new Error('Data to render must have a "values" property');let o=sRr.getDrawArea(t),i=Object.assign({},lRr,n),s=LSt.select(o).select("table.tf-table"),a=hTe.css({fontSize:i.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(s.size()===0&&(s=LSt.select(o).append("table"),s.attr("class",` ${a} tf-table`),s.append("thead").append("tr"),s.append("tbody")),s.size()!==1)throw new Error("Error inserting table");let l=hTe.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),u=s.select("thead").select("tr").selectAll("th").data(r.headers),c=u.enter().append("th").attr("class",`${l}`);u.merge(c).html(y=>y),u.exit().remove();let f=iRr.format(",.4~f"),d=s.select("tbody").selectAll("tr").data(r.values),p=d.enter().append("tr"),h=hTe.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),m=d.merge(p).selectAll("td").data(y=>y),g=m.enter().append("td").attr("class",`${h}`);m.merge(g).html(y=>typeof y=="number"?f(y):y),m.exit().remove(),d.exit().remove()}mTe.table=aRr;var lRr={fontSize:14}});var Nre=mt(hk=>{"use strict";var uRr=hk&&hk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},cRr=hk&&hk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hk,"__esModule",{value:!0});var jSt=(vT(),Tl(l0e)),fRr=cRr((nk(),Tl(rk))),Dre=a1(),dRr=J6(),pRr=iz(),hRr={maxBins:12,fontSize:11};function mRr(t,r,n={}){return uRr(this,void 0,void 0,function*(){let o=yRr(r),i=Object.assign({},hRr,n),s={actions:!1,mode:"vega-lite",defaultStyle:!1},a=Dre.subSurface(t,"histogram");if(n.stats!==!1){let c=Dre.subSurface(t,"stats",{prepend:!0}),f;n.stats?f=n.stats:f=dRr.arrayStats(o.map(d=>d.value)),gRr(f,c,{fontSize:i.fontSize})}if(o.length===0)return;let l=[];for(let c=0;c<o.length;c++){let f=o[c].value;f!=null&&isFinite(f)&&l.push(o[c])}let u={width:i.width||Dre.getDefaultWidth(a),height:i.height||Dre.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:l},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return fRr.default(a,u,s)})}hk.histogram=mRr;function gRr(t,r,n){let o=jSt.format(",.4~f"),i=jSt.format(".4~p"),s=[],a=[];if(t.numVals!=null&&(s.push("Num Vals"),a.push(o(t.numVals))),t.min!=null&&(s.push("Min"),a.push(o(t.min))),t.max!=null&&(s.push("Max"),a.push(o(t.max))),t.numZeros!=null){s.push("# Zeros");let l="";t.numVals&&(l=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),a.push(`${o(t.numZeros)} ${l}`)}if(t.numNans!=null){s.push("# NaNs");let l="";t.numVals&&(l=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),a.push(`${o(t.numNans)} ${l}`)}if(t.numInfs!=null){s.push("# Infinity");let l="";t.numVals&&(l=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),a.push(`${o(t.numInfs)} ${l}`)}pRr.table(r,{headers:s,values:[a]},n)}function yRr(t){if(t.length==null)throw new Error("input data must be an array");if(t.length===0)return[];if(typeof t[0]=="object"){if(t[0].value==null)throw new Error("input data must have a value field");return t}else{let r=Array(t.length);for(let n=0;n<t.length;n++)r[n]={value:t[n]};return r}}});var gTe=mt(mk=>{"use strict";var bRr=mk&&mk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},xRr=mk&&mk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mk,"__esModule",{value:!0});var vRr=xRr((nk(),Tl(rk))),BSt=a1(),$St=K6(),wRr=uh();function _Rr(t,r,n={}){return bRr(this,void 0,void 0,function*(){let o=Array.isArray(r.values[0])?r.values:[r.values],i=o[0].length,s=r.series?r.series:o.map((g,y)=>`Series ${y+1}`);$St.assert(s.length===o.length,"Must have an equal number of series labels as there are data series"),n.seriesColors!=null&&$St.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=[];for(let g=0;g<i;g++){let y={x:g};s.forEach((b,x)=>{let v=o[x][g].y;y[b]=v,y[`${b}-name`]=b}),a.push(y)}let l=Object.assign({},SRr,n),u=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},c={x:{field:"x",type:l.xType,title:l.xLabel},tooltip:[{field:"x",type:"quantitative"},...s.map(g=>({field:g,type:"quantitative"}))]},f=s.map(g=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:g,type:l.yType,title:l.yLabel,scale:u()},color:{field:`${g}-name`,type:"nominal",legend:{values:s,title:null},scale:{range:l.seriesColors}}}})),d={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},p=wRr.getDrawArea(t),h={width:l.width||BSt.getDefaultWidth(p),height:l.height||BSt.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:a},encoding:c,layer:[...f,d]},m={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield vRr.default(p,h,m),Promise.resolve()})}mk.linechart=_Rr;var SRr={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var USt=mt(gk=>{"use strict";var CRr=gk&&gk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},ERr=gk&&gk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gk,"__esModule",{value:!0});var TRr=ERr((nk(),Tl(rk))),zSt=a1(),ARr=K6(),kRr=uh();function IRr(t,r,n={}){return CRr(this,void 0,void 0,function*(){let o=r.values,i=r.series==null?[]:r.series;o=Array.isArray(o[0])?o:[o];let s=[];o.forEach((p,h)=>{let m=i[h]!=null?i[h]:`Series ${h+1}`,g=p.map(y=>Object.assign({},y,{series:m}));s.push(...g)}),n.seriesColors!=null&&ARr.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=kRr.getDrawArea(t),l=Object.assign({},DRr,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},c=()=>{if(l.zoomToFit)return{zero:!1};if(l.xAxisDomain!=null)return{domain:l.xAxisDomain}},f=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},d={width:l.width||zSt.getDefaultWidth(a),height:l.height||zSt.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:s},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:l.xType,title:l.xLabel,scale:c()},y:{field:"y",type:l.yType,title:l.yLabel,scale:f()},color:{field:"series",type:"nominal",scale:{range:l.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield TRr.default(a,d,u),Promise.resolve()})}gk.scatterplot=IRr;var DRr={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var YSt=mt(nR=>{"use strict";var WSt=nR&&nR.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(nR,"__esModule",{value:!0});var NRr=gTe(),yTe=uh(),qSt=a1();function HSt(t,r,n,o={}){return WSt(this,void 0,void 0,function*(){let i=yTe.getDrawArea(t),s={};for(let c of n)if(/val_/.test(c)){let f=c.replace("val_","");VSt(s,f);let d=GSt(r,c,n.indexOf(c));s[f].series.push(c),s[f].values.push(d)}else{let f=GSt(r,c,n.indexOf(c));VSt(s,c),s[c].series.push(c),s[c].values.push(f)}let a=Object.keys(s),l=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},o),u=[];for(let c of a){let f=qSt.subSurface(i,c),d=s[c].series,p=s[c].values;d.every(m=>!!m.match("acc"))&&(l.zoomToFitAccuracy?l.zoomToFit=!0:(l.yAxisDomain=[0,1],delete l.zoomToFit));let h=NRr.linechart(f,{values:p,series:d},l);u.push(h)}yield Promise.all(u)})}nR.history=HSt;function VSt(t,r){t[r]==null&&(t[r]={series:[],values:[]})}function GSt(t,r,n){if(Array.isArray(t)){let o=Array.isArray(t[0])?t[n]:t,i=[];for(let s=0;s<o.length;s++){let a=o[s];i.push({x:s,y:a[r]})}return i}else return t.history[r].map((o,i)=>({x:i,y:o}))}function MRr(t,r,n={}){let o={},i=n.callbacks||["onEpochEnd","onBatchEnd"],s=yTe.getDrawArea(t),a=Object.assign({},n);delete a.callbacks;function l(c){return(f,d)=>WSt(this,void 0,void 0,function*(){/batch/i.test(c)?a.xLabel="Batch":/epoch/i.test(c)&&(a.xLabel="Epoch");let p=[],h=[];for(let g of r)if(d[g]!=null){h.push(g);let y=FRr(o,c,g);y.push({[g]:d[g]}),p.push(y)}let m=qSt.subSurface(s,c,{title:c});HSt(m,p,h,a),yield yTe.nextFrame()})}let u={};return i.forEach(c=>{u[c]=l(c)}),u}nR.fitCallbacks=MRr;function FRr(t,r,n){return t[r]==null&&(t[r]={}),t[r][n]==null&&(t[r][n]=[]),t[r][n]}});var ZSt=mt(oR=>{"use strict";var Mre=oR&&oR.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(oR,"__esModule",{value:!0});var ORr=Nre(),XSt=uh(),KSt=iz(),bTe=a1(),RRr=J6();function PRr(t,r){return Mre(this,void 0,void 0,function*(){let n=XSt.getDrawArea(t),o=jRr(r),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=o.layers.map(a=>[a.name,a.outputShape,a.parameters,a.trainable]);KSt.table(n,{headers:i,values:s})})}oR.modelSummary=PRr;function LRr(t,r){return Mre(this,void 0,void 0,function*(){let n=XSt.getDrawArea(t),o=yield $Rr(r),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],s=bTe.subSurface(n,"layer-weights-info"),a=o.map(f=>[f.name,f.shape,f.stats.min,f.stats.max,f.weight.size,f.stats.numZeros,f.stats.numNans,f.stats.numInfs]);KSt.table(s,{headers:i,values:a});let l=bTe.subSurface(n,"select-layer"),u=bTe.subSurface(n,"param-distribution"),c=f=>Mre(this,void 0,void 0,function*(){let p=yield o.filter(h=>h.name===f)[0].weight.data();ORr.histogram(u,p,{height:150,width:460,stats:!1})});zRr(o.map(f=>f.name),l,c)})}oR.layer=LRr;function jRr(t){return{layers:t.layers.map(BRr)}}function BRr(t){let r;return Array.isArray(t.outputShape[0])?r=`[${t.outputShape.map(o=>xTe(o)).join(", ")}]`:r=xTe(t.outputShape),{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:r}}function $Rr(t){return Mre(this,void 0,void 0,function*(){let r=t.getWeights(),n=t.weights,o=r.map(RRr.tensorStats),i=yield Promise.all(o),s=r.map(a=>a.shape);return r.map((a,l)=>({name:n[l].name,stats:i[l],shape:xTe(s[l]),weight:a}))})}function xTe(t){let r=t.slice();return r.length===0?"Scalar":(r[0]===null&&(r[0]="batch"),`[${r.join(",")}]`)}function zRr(t,r,n){let s=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${t.map(u=>`<option value=${u}>${u}</option>`)}
    </select>
  `}</div>`;r.innerHTML=s;let a=r.querySelector("button"),l=r.querySelector("select");a.addEventListener("click",()=>{n(l.selectedOptions[0].label)})}});var QSt=mt(sz=>{"use strict";var URr=sz&&sz.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(sz,"__esModule",{value:!0});var VRr=uh(),GRr=iz();function WRr(t,r,n){return URr(this,void 0,void 0,function*(){let o=VRr.getDrawArea(t),i=["Class","Accuracy","# Samples"],s=[];for(let a=0;a<r.length;a++){let l=n?n[a]:a.toString(),u=r[a];s.push([l,u.accuracy,u.count])}return GRr.table(o,{headers:i,values:s})})}sz.perClassAccuracy=WRr});var JSt=mt(az=>{"use strict";var qRr=az&&az.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(az,"__esModule",{value:!0});var HRr=Nre(),YRr=uh(),XRr=J6();function KRr(t,r){return qRr(this,void 0,void 0,function*(){let n=YRr.getDrawArea(t),o=yield XRr.tensorStats(r),i=yield r.data();HRr.histogram(n,i,{height:150,stats:o})})}az.valuesDistribution=KRr});var eCt=mt(vTe=>{"use strict";Object.defineProperty(vTe,"__esModule",{value:!0});var ZRr="1.5.1";vTe.version=ZRr});var nCt=mt(c1=>{"use strict";function QRr(t){for(var r in t)c1.hasOwnProperty(r)||(c1[r]=t[r])}Object.defineProperty(c1,"__esModule",{value:!0});re();Zse();var JRr=K_t(),e3r=Q_t(),t3r=o2t(),r3r=Nre(),n3r=gTe(),o3r=USt(),i3r=iz(),tCt=YSt(),rCt=ZSt(),s3r=QSt(),a3r=JSt(),wTe=J6(),l3r=eCt();c1.version_vis=l3r.version;var u3r={barchart:JRr.barchart,table:i3r.table,histogram:r3r.histogram,linechart:n3r.linechart,scatterplot:o3r.scatterplot,confusionMatrix:e3r.confusionMatrix,heatmap:t3r.heatmap};c1.render=u3r;var c3r={accuracy:wTe.accuracy,perClassAccuracy:wTe.perClassAccuracy,confusionMatrix:wTe.confusionMatrix};c1.metrics=c3r;var f3r={history:tCt.history,fitCallbacks:tCt.fitCallbacks,perClassAccuracy:s3r.perClassAccuracy,valuesDistribution:a3r.valuesDistribution,layer:rCt.layer,modelSummary:rCt.modelSummary};c1.show=f3r;var d3r=nTe();c1.visor=d3r.visor;QRr(VEe())});var aCt=mt((lz,STe)=>{"use strict";(function(r,n){typeof lz=="object"&&typeof STe=="object"?STe.exports=n():typeof define=="function"&&define.amd?define("Matter",[],n):typeof lz=="object"?lz.Matter=n():r.Matter=n()})(lz,function(){return function(t){var r={};function n(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=r,n.d=function(o,i,s){n.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:s})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,i){if(i&1&&(o=n(o)),i&8||i&4&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),i&2&&typeof o!="string")for(var a in o)n.d(s,a,(function(l){return o[l]}).bind(null,a));return s},n.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(i,"a",i),i},n.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},n.p="",n(n.s=20)}([function(t,r){var n={};t.exports=n,function(){n._baseDelta=1e3/60,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(i,s){var a,l,u;typeof s=="boolean"?(a=2,u=s):(a=1,u=!0);for(var c=a;c<arguments.length;c++){var f=arguments[c];if(f)for(var d in f)u&&f[d]&&f[d].constructor===Object&&(!i[d]||i[d].constructor===Object)?(i[d]=i[d]||{},n.extend(i[d],u,f[d])):i[d]=f[d]}return i},n.clone=function(i,s){return n.extend({},s,i)},n.keys=function(i){if(Object.keys)return Object.keys(i);var s=[];for(var a in i)s.push(a);return s},n.values=function(i){var s=[];if(Object.keys){for(var a=Object.keys(i),l=0;l<a.length;l++)s.push(i[a[l]]);return s}for(var u in i)s.push(i[u]);return s},n.get=function(i,s,a,l){s=s.split(".").slice(a,l);for(var u=0;u<s.length;u+=1)i=i[s[u]];return i},n.set=function(i,s,a,l,u){var c=s.split(".").slice(l,u);return n.get(i,s,0,-1)[c[c.length-1]]=a,a},n.shuffle=function(i){for(var s=i.length-1;s>0;s--){var a=Math.floor(n.random()*(s+1)),l=i[s];i[s]=i[a],i[a]=l}return i},n.choose=function(i){return i[Math.floor(n.random()*i.length)]},n.isElement=function(i){return typeof HTMLElement<"u"?i instanceof HTMLElement:!!(i&&i.nodeType&&i.nodeName)},n.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"},n.isFunction=function(i){return typeof i=="function"},n.isPlainObject=function(i){return typeof i=="object"&&i.constructor===Object},n.isString=function(i){return toString.call(i)==="[object String]"},n.clamp=function(i,s,a){return i<s?s:i>a?a:i},n.sign=function(i){return i<0?-1:1},n.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(i,s){return i=typeof i<"u"?i:0,s=typeof s<"u"?s:1,i+o()*(s-i)};var o=function(){return n._seed=(n._seed*9301+49297)%233280,n._seed/233280};n.colorToNumber=function(i){return i=i.replace("#",""),i.length==3&&(i=i.charAt(0)+i.charAt(0)+i.charAt(1)+i.charAt(1)+i.charAt(2)+i.charAt(2)),parseInt(i,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var i=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[i]||(n.warn(i),n._warnedOnce[i]=!0)},n.deprecated=function(i,s,a){i[s]=n.chain(function(){n.warnOnce("\u{1F505} deprecated \u{1F505}",a)},i[s])},n.nextId=function(){return n._nextId++},n.indexOf=function(i,s){if(i.indexOf)return i.indexOf(s);for(var a=0;a<i.length;a++)if(i[a]===s)return a;return-1},n.map=function(i,s){if(i.map)return i.map(s);for(var a=[],l=0;l<i.length;l+=1)a.push(s(i[l]));return a},n.topologicalSort=function(i){var s=[],a=[],l=[];for(var u in i)!a[u]&&!l[u]&&n._topologicalSort(u,a,l,i,s);return s},n._topologicalSort=function(i,s,a,l,u){var c=l[i]||[];a[i]=!0;for(var f=0;f<c.length;f+=1){var d=c[f];a[d]||s[d]||n._topologicalSort(d,s,a,l,u)}a[i]=!1,s[i]=!0,u.push(i)},n.chain=function(){for(var i=[],s=0;s<arguments.length;s+=1){var a=arguments[s];a._chained?i.push.apply(i,a._chained):i.push(a)}var l=function(){for(var u,c=new Array(arguments.length),f=0,d=arguments.length;f<d;f++)c[f]=arguments[f];for(f=0;f<i.length;f+=1){var p=i[f].apply(u,c);typeof p<"u"&&(u=p)}return u};return l._chained=i,l},n.chainPathBefore=function(i,s,a){return n.set(i,s,n.chain(a,n.get(i,s)))},n.chainPathAfter=function(i,s,a){return n.set(i,s,n.chain(n.get(i,s),a))},n.setDecomp=function(i){n._decomp=i},n.getDecomp=function(){var i=n._decomp;try{!i&&typeof window<"u"&&(i=window.decomp),!i&&typeof global<"u"&&(i=global.decomp)}catch{i=null}return i}}()},function(t,r){var n={};t.exports=n,function(){n.create=function(o){var i={min:{x:0,y:0},max:{x:0,y:0}};return o&&n.update(i,o),i},n.update=function(o,i,s){o.min.x=1/0,o.max.x=-1/0,o.min.y=1/0,o.max.y=-1/0;for(var a=0;a<i.length;a++){var l=i[a];l.x>o.max.x&&(o.max.x=l.x),l.x<o.min.x&&(o.min.x=l.x),l.y>o.max.y&&(o.max.y=l.y),l.y<o.min.y&&(o.min.y=l.y)}s&&(s.x>0?o.max.x+=s.x:o.min.x+=s.x,s.y>0?o.max.y+=s.y:o.min.y+=s.y)},n.contains=function(o,i){return i.x>=o.min.x&&i.x<=o.max.x&&i.y>=o.min.y&&i.y<=o.max.y},n.overlaps=function(o,i){return o.min.x<=i.max.x&&o.max.x>=i.min.x&&o.max.y>=i.min.y&&o.min.y<=i.max.y},n.translate=function(o,i){o.min.x+=i.x,o.max.x+=i.x,o.min.y+=i.y,o.max.y+=i.y},n.shift=function(o,i){var s=o.max.x-o.min.x,a=o.max.y-o.min.y;o.min.x=i.x,o.max.x=i.x+s,o.min.y=i.y,o.max.y=i.y+a}}()},function(t,r){var n={};t.exports=n,function(){n.create=function(o,i){return{x:o||0,y:i||0}},n.clone=function(o){return{x:o.x,y:o.y}},n.magnitude=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},n.magnitudeSquared=function(o){return o.x*o.x+o.y*o.y},n.rotate=function(o,i,s){var a=Math.cos(i),l=Math.sin(i);s||(s={});var u=o.x*a-o.y*l;return s.y=o.x*l+o.y*a,s.x=u,s},n.rotateAbout=function(o,i,s,a){var l=Math.cos(i),u=Math.sin(i);a||(a={});var c=s.x+((o.x-s.x)*l-(o.y-s.y)*u);return a.y=s.y+((o.x-s.x)*u+(o.y-s.y)*l),a.x=c,a},n.normalise=function(o){var i=n.magnitude(o);return i===0?{x:0,y:0}:{x:o.x/i,y:o.y/i}},n.dot=function(o,i){return o.x*i.x+o.y*i.y},n.cross=function(o,i){return o.x*i.y-o.y*i.x},n.cross3=function(o,i,s){return(i.x-o.x)*(s.y-o.y)-(i.y-o.y)*(s.x-o.x)},n.add=function(o,i,s){return s||(s={}),s.x=o.x+i.x,s.y=o.y+i.y,s},n.sub=function(o,i,s){return s||(s={}),s.x=o.x-i.x,s.y=o.y-i.y,s},n.mult=function(o,i){return{x:o.x*i,y:o.y*i}},n.div=function(o,i){return{x:o.x/i,y:o.y/i}},n.perp=function(o,i){return i=i===!0?-1:1,{x:i*-o.y,y:i*o.x}},n.neg=function(o){return{x:-o.x,y:-o.y}},n.angle=function(o,i){return Math.atan2(i.y-o.y,i.x-o.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}()},function(t,r,n){var o={};t.exports=o;var i=n(2),s=n(0);(function(){o.create=function(a,l){for(var u=[],c=0;c<a.length;c++){var f=a[c],d={x:f.x,y:f.y,index:c,body:l,isInternal:!1};u.push(d)}return u},o.fromPath=function(a,l){var u=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,c=[];return a.replace(u,function(f,d,p){c.push({x:parseFloat(d),y:parseFloat(p)})}),o.create(c,l)},o.centre=function(a){for(var l=o.area(a,!0),u={x:0,y:0},c,f,d,p=0;p<a.length;p++)d=(p+1)%a.length,c=i.cross(a[p],a[d]),f=i.mult(i.add(a[p],a[d]),c),u=i.add(u,f);return i.div(u,6*l)},o.mean=function(a){for(var l={x:0,y:0},u=0;u<a.length;u++)l.x+=a[u].x,l.y+=a[u].y;return i.div(l,a.length)},o.area=function(a,l){for(var u=0,c=a.length-1,f=0;f<a.length;f++)u+=(a[c].x-a[f].x)*(a[c].y+a[f].y),c=f;return l?u/2:Math.abs(u)/2},o.inertia=function(a,l){for(var u=0,c=0,f=a,d,p,h=0;h<f.length;h++)p=(h+1)%f.length,d=Math.abs(i.cross(f[p],f[h])),u+=d*(i.dot(f[p],f[p])+i.dot(f[p],f[h])+i.dot(f[h],f[h])),c+=d;return l/6*(u/c)},o.translate=function(a,l,u){u=typeof u<"u"?u:1;var c=a.length,f=l.x*u,d=l.y*u,p;for(p=0;p<c;p++)a[p].x+=f,a[p].y+=d;return a},o.rotate=function(a,l,u){if(l!==0){var c=Math.cos(l),f=Math.sin(l),d=u.x,p=u.y,h=a.length,m,g,y,b;for(b=0;b<h;b++)m=a[b],g=m.x-d,y=m.y-p,m.x=d+(g*c-y*f),m.y=p+(g*f+y*c);return a}},o.contains=function(a,l){for(var u=l.x,c=l.y,f=a.length,d=a[f-1],p,h=0;h<f;h++){if(p=a[h],(u-d.x)*(p.y-d.y)+(c-d.y)*(d.x-p.x)>0)return!1;d=p}return!0},o.scale=function(a,l,u,c){if(l===1&&u===1)return a;c=c||o.centre(a);for(var f,d,p=0;p<a.length;p++)f=a[p],d=i.sub(f,c),a[p].x=c.x+d.x*l,a[p].y=c.y+d.y*u;return a},o.chamfer=function(a,l,u,c,f){typeof l=="number"?l=[l]:l=l||[8],u=typeof u<"u"?u:-1,c=c||2,f=f||14;for(var d=[],p=0;p<a.length;p++){var h=a[p-1>=0?p-1:a.length-1],m=a[p],g=a[(p+1)%a.length],y=l[p<l.length?p:l.length-1];if(y===0){d.push(m);continue}var b=i.normalise({x:m.y-h.y,y:h.x-m.x}),x=i.normalise({x:g.y-m.y,y:m.x-g.x}),v=Math.sqrt(2*Math.pow(y,2)),w=i.mult(s.clone(b),y),_=i.normalise(i.mult(i.add(b,x),.5)),S=i.sub(m,i.mult(_,v)),C=u;u===-1&&(C=Math.pow(y,.32)*1.75),C=s.clamp(C,c,f),C%2===1&&(C+=1);for(var E=Math.acos(i.dot(b,x)),T=E/C,I=0;I<C;I++)d.push(i.add(i.rotate(w,T*I),S))}return d},o.clockwiseSort=function(a){var l=o.mean(a);return a.sort(function(u,c){return i.angle(l,u)-i.angle(l,c)}),a},o.isConvex=function(a){var l=0,u=a.length,c,f,d,p;if(u<3)return null;for(c=0;c<u;c++)if(f=(c+1)%u,d=(c+2)%u,p=(a[f].x-a[c].x)*(a[d].y-a[f].y),p-=(a[f].y-a[c].y)*(a[d].x-a[f].x),p<0?l|=1:p>0&&(l|=2),l===3)return!1;return l!==0?!0:null},o.hull=function(a){var l=[],u=[],c,f;for(a=a.slice(0),a.sort(function(d,p){var h=d.x-p.x;return h!==0?h:d.y-p.y}),f=0;f<a.length;f+=1){for(c=a[f];u.length>=2&&i.cross3(u[u.length-2],u[u.length-1],c)<=0;)u.pop();u.push(c)}for(f=a.length-1;f>=0;f-=1){for(c=a[f];l.length>=2&&i.cross3(l[l.length-2],l[l.length-1],c)<=0;)l.pop();l.push(c)}return l.pop(),u.pop(),l.concat(u)}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(2),a=n(7),l=n(0),u=n(1),c=n(11);(function(){o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=1e3/60,o.create=function(d){var p={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},h=l.extend(p,d);return f(h,d),h},o.nextGroup=function(d){return d?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var f=function(d,p){p=p||{},o.set(d,{bounds:d.bounds||u.create(d.vertices),positionPrev:d.positionPrev||s.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d}),i.rotate(d.vertices,d.angle,d.position),c.rotate(d.axes,d.angle),u.update(d.bounds,d.vertices,d.velocity),o.set(d,{axes:p.axes||d.axes,area:p.area||d.area,mass:p.mass||d.mass,inertia:p.inertia||d.inertia});var h=d.isStatic?"#14151f":l.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=d.isStatic?"#555":"#ccc",g=d.isStatic&&d.render.fillStyle===null?1:0;d.render.fillStyle=d.render.fillStyle||h,d.render.strokeStyle=d.render.strokeStyle||m,d.render.lineWidth=d.render.lineWidth||g,d.render.sprite.xOffset+=-(d.bounds.min.x-d.position.x)/(d.bounds.max.x-d.bounds.min.x),d.render.sprite.yOffset+=-(d.bounds.min.y-d.position.y)/(d.bounds.max.y-d.bounds.min.y)};o.set=function(d,p,h){var m;typeof p=="string"&&(m=p,p={},p[m]=h);for(m in p)if(Object.prototype.hasOwnProperty.call(p,m))switch(h=p[m],m){case"isStatic":o.setStatic(d,h);break;case"isSleeping":a.set(d,h);break;case"mass":o.setMass(d,h);break;case"density":o.setDensity(d,h);break;case"inertia":o.setInertia(d,h);break;case"vertices":o.setVertices(d,h);break;case"position":o.setPosition(d,h);break;case"angle":o.setAngle(d,h);break;case"velocity":o.setVelocity(d,h);break;case"angularVelocity":o.setAngularVelocity(d,h);break;case"speed":o.setSpeed(d,h);break;case"angularSpeed":o.setAngularSpeed(d,h);break;case"parts":o.setParts(d,h);break;case"centre":o.setCentre(d,h);break;default:d[m]=h}},o.setStatic=function(d,p){for(var h=0;h<d.parts.length;h++){var m=d.parts[h];m.isStatic=p,p?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},o.setMass=function(d,p){var h=d.inertia/(d.mass/6);d.inertia=h*(p/6),d.inverseInertia=1/d.inertia,d.mass=p,d.inverseMass=1/d.mass,d.density=d.mass/d.area},o.setDensity=function(d,p){o.setMass(d,p*d.area),d.density=p},o.setInertia=function(d,p){d.inertia=p,d.inverseInertia=1/d.inertia},o.setVertices=function(d,p){p[0].body===d?d.vertices=p:d.vertices=i.create(p,d),d.axes=c.fromVertices(d.vertices),d.area=i.area(d.vertices),o.setMass(d,d.density*d.area);var h=i.centre(d.vertices);i.translate(d.vertices,h,-1),o.setInertia(d,o._inertiaScale*i.inertia(d.vertices,d.mass)),i.translate(d.vertices,d.position),u.update(d.bounds,d.vertices,d.velocity)},o.setParts=function(d,p,h){var m;for(p=p.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,m=0;m<p.length;m++){var g=p[m];g!==d&&(g.parent=d,d.parts.push(g))}if(d.parts.length!==1){if(h=typeof h<"u"?h:!0,h){var y=[];for(m=0;m<p.length;m++)y=y.concat(p[m].vertices);i.clockwiseSort(y);var b=i.hull(y),x=i.centre(b);o.setVertices(d,b),i.translate(d.vertices,x)}var v=o._totalProperties(d);d.area=v.area,d.parent=d,d.position.x=v.centre.x,d.position.y=v.centre.y,d.positionPrev.x=v.centre.x,d.positionPrev.y=v.centre.y,o.setMass(d,v.mass),o.setInertia(d,v.inertia),o.setPosition(d,v.centre)}},o.setCentre=function(d,p,h){h?(d.positionPrev.x+=p.x,d.positionPrev.y+=p.y,d.position.x+=p.x,d.position.y+=p.y):(d.positionPrev.x=p.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=p.y-(d.position.y-d.positionPrev.y),d.position.x=p.x,d.position.y=p.y)},o.setPosition=function(d,p,h){var m=s.sub(p,d.position);h?(d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.velocity.x=m.x,d.velocity.y=m.y,d.speed=s.magnitude(m)):(d.positionPrev.x+=m.x,d.positionPrev.y+=m.y);for(var g=0;g<d.parts.length;g++){var y=d.parts[g];y.position.x+=m.x,y.position.y+=m.y,i.translate(y.vertices,m),u.update(y.bounds,y.vertices,d.velocity)}},o.setAngle=function(d,p,h){var m=p-d.angle;h?(d.anglePrev=d.angle,d.angularVelocity=m,d.angularSpeed=Math.abs(m)):d.anglePrev+=m;for(var g=0;g<d.parts.length;g++){var y=d.parts[g];y.angle+=m,i.rotate(y.vertices,m,d.position),c.rotate(y.axes,m),u.update(y.bounds,y.vertices,d.velocity),g>0&&s.rotateAbout(y.position,m,d.position,y.position)}},o.setVelocity=function(d,p){var h=d.deltaTime/o._baseDelta;d.positionPrev.x=d.position.x-p.x*h,d.positionPrev.y=d.position.y-p.y*h,d.velocity.x=(d.position.x-d.positionPrev.x)/h,d.velocity.y=(d.position.y-d.positionPrev.y)/h,d.speed=s.magnitude(d.velocity)},o.getVelocity=function(d){var p=o._baseDelta/d.deltaTime;return{x:(d.position.x-d.positionPrev.x)*p,y:(d.position.y-d.positionPrev.y)*p}},o.getSpeed=function(d){return s.magnitude(o.getVelocity(d))},o.setSpeed=function(d,p){o.setVelocity(d,s.mult(s.normalise(o.getVelocity(d)),p))},o.setAngularVelocity=function(d,p){var h=d.deltaTime/o._baseDelta;d.anglePrev=d.angle-p*h,d.angularVelocity=(d.angle-d.anglePrev)/h,d.angularSpeed=Math.abs(d.angularVelocity)},o.getAngularVelocity=function(d){return(d.angle-d.anglePrev)*o._baseDelta/d.deltaTime},o.getAngularSpeed=function(d){return Math.abs(o.getAngularVelocity(d))},o.setAngularSpeed=function(d,p){o.setAngularVelocity(d,l.sign(o.getAngularVelocity(d))*p)},o.translate=function(d,p,h){o.setPosition(d,s.add(d.position,p),h)},o.rotate=function(d,p,h,m){if(!h)o.setAngle(d,d.angle+p,m);else{var g=Math.cos(p),y=Math.sin(p),b=d.position.x-h.x,x=d.position.y-h.y;o.setPosition(d,{x:h.x+(b*g-x*y),y:h.y+(b*y+x*g)},m),o.setAngle(d,d.angle+p,m)}},o.scale=function(d,p,h,m){var g=0,y=0;m=m||d.position;for(var b=0;b<d.parts.length;b++){var x=d.parts[b];i.scale(x.vertices,p,h,m),x.axes=c.fromVertices(x.vertices),x.area=i.area(x.vertices),o.setMass(x,d.density*x.area),i.translate(x.vertices,{x:-x.position.x,y:-x.position.y}),o.setInertia(x,o._inertiaScale*i.inertia(x.vertices,x.mass)),i.translate(x.vertices,{x:x.position.x,y:x.position.y}),b>0&&(g+=x.area,y+=x.inertia),x.position.x=m.x+(x.position.x-m.x)*p,x.position.y=m.y+(x.position.y-m.y)*h,u.update(x.bounds,x.vertices,d.velocity)}d.parts.length>1&&(d.area=g,d.isStatic||(o.setMass(d,d.density*g),o.setInertia(d,y))),d.circleRadius&&(p===h?d.circleRadius*=p:d.circleRadius=null)},o.update=function(d,p){p=(typeof p<"u"?p:1e3/60)*d.timeScale;var h=p*p,m=o._timeCorrection?p/(d.deltaTime||p):1,g=1-d.frictionAir*(p/l._baseDelta),y=(d.position.x-d.positionPrev.x)*m,b=(d.position.y-d.positionPrev.y)*m;d.velocity.x=y*g+d.force.x/d.mass*h,d.velocity.y=b*g+d.force.y/d.mass*h,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.deltaTime=p,d.angularVelocity=(d.angle-d.anglePrev)*g*m+d.torque/d.inertia*h,d.anglePrev=d.angle,d.angle+=d.angularVelocity;for(var x=0;x<d.parts.length;x++){var v=d.parts[x];i.translate(v.vertices,d.velocity),x>0&&(v.position.x+=d.velocity.x,v.position.y+=d.velocity.y),d.angularVelocity!==0&&(i.rotate(v.vertices,d.angularVelocity,d.position),c.rotate(v.axes,d.angularVelocity),x>0&&s.rotateAbout(v.position,d.angularVelocity,d.position,v.position)),u.update(v.bounds,v.vertices,d.velocity)}},o.updateVelocities=function(d){var p=o._baseDelta/d.deltaTime,h=d.velocity;h.x=(d.position.x-d.positionPrev.x)*p,h.y=(d.position.y-d.positionPrev.y)*p,d.speed=Math.sqrt(h.x*h.x+h.y*h.y),d.angularVelocity=(d.angle-d.anglePrev)*p,d.angularSpeed=Math.abs(d.angularVelocity)},o.applyForce=function(d,p,h){var m={x:p.x-d.position.x,y:p.y-d.position.y};d.force.x+=h.x,d.force.y+=h.y,d.torque+=m.x*h.y-m.y*h.x},o._totalProperties=function(d){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},h=d.parts.length===1?0:1;h<d.parts.length;h++){var m=d.parts[h],g=m.mass!==1/0?m.mass:1;p.mass+=g,p.area+=m.area,p.inertia+=m.inertia,p.centre=s.add(p.centre,s.mult(m.position,g))}return p.centre=s.div(p.centre,p.mass),p}})()},function(t,r,n){var o={};t.exports=o;var i=n(0);(function(){o.on=function(s,a,l){for(var u=a.split(" "),c,f=0;f<u.length;f++)c=u[f],s.events=s.events||{},s.events[c]=s.events[c]||[],s.events[c].push(l);return l},o.off=function(s,a,l){if(!a){s.events={};return}typeof a=="function"&&(l=a,a=i.keys(s.events).join(" "));for(var u=a.split(" "),c=0;c<u.length;c++){var f=s.events[u[c]],d=[];if(l&&f)for(var p=0;p<f.length;p++)f[p]!==l&&d.push(f[p]);s.events[u[c]]=d}},o.trigger=function(s,a,l){var u,c,f,d,p=s.events;if(p&&i.keys(p).length>0){l||(l={}),u=a.split(" ");for(var h=0;h<u.length;h++)if(c=u[h],f=p[c],f){d=i.clone(l,!1),d.name=c,d.source=s;for(var m=0;m<f.length;m++)f[m].apply(s,[d])}}}})()},function(t,r,n){var o={};t.exports=o;var i=n(5),s=n(0),a=n(1),l=n(4);(function(){o.create=function(u){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},u)},o.setModified=function(u,c,f,d){if(u.isModified=c,c&&u.cache&&(u.cache.allBodies=null,u.cache.allConstraints=null,u.cache.allComposites=null),f&&u.parent&&o.setModified(u.parent,c,f,d),d)for(var p=0;p<u.composites.length;p++){var h=u.composites[p];o.setModified(h,c,f,d)}},o.add=function(u,c){var f=[].concat(c);i.trigger(u,"beforeAdd",{object:c});for(var d=0;d<f.length;d++){var p=f[d];switch(p.type){case"body":if(p.parent!==p){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(u,p);break;case"constraint":o.addConstraint(u,p);break;case"composite":o.addComposite(u,p);break;case"mouseConstraint":o.addConstraint(u,p.constraint);break}}return i.trigger(u,"afterAdd",{object:c}),u},o.remove=function(u,c,f){var d=[].concat(c);i.trigger(u,"beforeRemove",{object:c});for(var p=0;p<d.length;p++){var h=d[p];switch(h.type){case"body":o.removeBody(u,h,f);break;case"constraint":o.removeConstraint(u,h,f);break;case"composite":o.removeComposite(u,h,f);break;case"mouseConstraint":o.removeConstraint(u,h.constraint);break}}return i.trigger(u,"afterRemove",{object:c}),u},o.addComposite=function(u,c){return u.composites.push(c),c.parent=u,o.setModified(u,!0,!0,!1),u},o.removeComposite=function(u,c,f){var d=s.indexOf(u.composites,c);if(d!==-1&&o.removeCompositeAt(u,d),f)for(var p=0;p<u.composites.length;p++)o.removeComposite(u.composites[p],c,!0);return u},o.removeCompositeAt=function(u,c){return u.composites.splice(c,1),o.setModified(u,!0,!0,!1),u},o.addBody=function(u,c){return u.bodies.push(c),o.setModified(u,!0,!0,!1),u},o.removeBody=function(u,c,f){var d=s.indexOf(u.bodies,c);if(d!==-1&&o.removeBodyAt(u,d),f)for(var p=0;p<u.composites.length;p++)o.removeBody(u.composites[p],c,!0);return u},o.removeBodyAt=function(u,c){return u.bodies.splice(c,1),o.setModified(u,!0,!0,!1),u},o.addConstraint=function(u,c){return u.constraints.push(c),o.setModified(u,!0,!0,!1),u},o.removeConstraint=function(u,c,f){var d=s.indexOf(u.constraints,c);if(d!==-1&&o.removeConstraintAt(u,d),f)for(var p=0;p<u.composites.length;p++)o.removeConstraint(u.composites[p],c,!0);return u},o.removeConstraintAt=function(u,c){return u.constraints.splice(c,1),o.setModified(u,!0,!0,!1),u},o.clear=function(u,c,f){if(f)for(var d=0;d<u.composites.length;d++)o.clear(u.composites[d],c,!0);return c?u.bodies=u.bodies.filter(function(p){return p.isStatic}):u.bodies.length=0,u.constraints.length=0,u.composites.length=0,o.setModified(u,!0,!0,!1),u},o.allBodies=function(u){if(u.cache&&u.cache.allBodies)return u.cache.allBodies;for(var c=[].concat(u.bodies),f=0;f<u.composites.length;f++)c=c.concat(o.allBodies(u.composites[f]));return u.cache&&(u.cache.allBodies=c),c},o.allConstraints=function(u){if(u.cache&&u.cache.allConstraints)return u.cache.allConstraints;for(var c=[].concat(u.constraints),f=0;f<u.composites.length;f++)c=c.concat(o.allConstraints(u.composites[f]));return u.cache&&(u.cache.allConstraints=c),c},o.allComposites=function(u){if(u.cache&&u.cache.allComposites)return u.cache.allComposites;for(var c=[].concat(u.composites),f=0;f<u.composites.length;f++)c=c.concat(o.allComposites(u.composites[f]));return u.cache&&(u.cache.allComposites=c),c},o.get=function(u,c,f){var d,p;switch(f){case"body":d=o.allBodies(u);break;case"constraint":d=o.allConstraints(u);break;case"composite":d=o.allComposites(u).concat(u);break}return d?(p=d.filter(function(h){return h.id.toString()===c.toString()}),p.length===0?null:p[0]):null},o.move=function(u,c,f){return o.remove(u,c),o.add(f,c),u},o.rebase=function(u){for(var c=o.allBodies(u).concat(o.allConstraints(u)).concat(o.allComposites(u)),f=0;f<c.length;f++)c[f].id=s.nextId();return u},o.translate=function(u,c,f){for(var d=f?o.allBodies(u):u.bodies,p=0;p<d.length;p++)l.translate(d[p],c);return u},o.rotate=function(u,c,f,d){for(var p=Math.cos(c),h=Math.sin(c),m=d?o.allBodies(u):u.bodies,g=0;g<m.length;g++){var y=m[g],b=y.position.x-f.x,x=y.position.y-f.y;l.setPosition(y,{x:f.x+(b*p-x*h),y:f.y+(b*h+x*p)}),l.rotate(y,c)}return u},o.scale=function(u,c,f,d,p){for(var h=p?o.allBodies(u):u.bodies,m=0;m<h.length;m++){var g=h[m],y=g.position.x-d.x,b=g.position.y-d.y;l.setPosition(g,{x:d.x+y*c,y:d.y+b*f}),l.scale(g,c,f)}return u},o.bounds=function(u){for(var c=o.allBodies(u),f=[],d=0;d<c.length;d+=1){var p=c[d];f.push(p.bounds.min,p.bounds.max)}return a.create(f)}})()},function(t,r,n){var o={};t.exports=o;var i=n(4),s=n(5),a=n(0);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(l,u){for(var c=u/a._baseDelta,f=o._motionSleepThreshold,d=0;d<l.length;d++){var p=l[d],h=i.getSpeed(p),m=i.getAngularSpeed(p),g=h*h+m*m;if(p.force.x!==0||p.force.y!==0){o.set(p,!1);continue}var y=Math.min(p.motion,g),b=Math.max(p.motion,g);p.motion=o._minBias*y+(1-o._minBias)*b,p.sleepThreshold>0&&p.motion<f?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/c&&o.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},o.afterCollisions=function(l){for(var u=o._motionSleepThreshold,c=0;c<l.length;c++){var f=l[c];if(f.isActive){var d=f.collision,p=d.bodyA.parent,h=d.bodyB.parent;if(!(p.isSleeping&&h.isSleeping||p.isStatic||h.isStatic)&&(p.isSleeping||h.isSleeping)){var m=p.isSleeping&&!p.isStatic?p:h,g=m===p?h:p;!m.isStatic&&g.motion>u&&o.set(m,!1)}}}},o.set=function(l,u){var c=l.isSleeping;u?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,c||s.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,c&&s.trigger(l,"sleepEnd"))}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(9);(function(){var a=[],l={overlap:0,axis:null},u={overlap:0,axis:null};o.create=function(c,f){return{pair:null,collided:!1,bodyA:c,bodyB:f,parentA:c.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},o.collides=function(c,f,d){if(o._overlapAxes(l,c.vertices,f.vertices,c.axes),l.overlap<=0||(o._overlapAxes(u,f.vertices,c.vertices,f.axes),u.overlap<=0))return null;var p=d&&d.table[s.id(c,f)],h;p?h=p.collision:(h=o.create(c,f),h.collided=!0,h.bodyA=c.id<f.id?c:f,h.bodyB=c.id<f.id?f:c,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent),c=h.bodyA,f=h.bodyB;var m;l.overlap<u.overlap?m=l:m=u;var g=h.normal,y=h.supports,b=m.axis,x=b.x,v=b.y;x*(f.position.x-c.position.x)+v*(f.position.y-c.position.y)<0?(g.x=x,g.y=v):(g.x=-x,g.y=-v),h.tangent.x=-g.y,h.tangent.y=g.x,h.depth=m.overlap,h.penetration.x=g.x*h.depth,h.penetration.y=g.y*h.depth;var w=o._findSupports(c,f,g,1),_=0;if(i.contains(c.vertices,w[0])&&(y[_++]=w[0]),i.contains(c.vertices,w[1])&&(y[_++]=w[1]),_<2){var S=o._findSupports(f,c,g,-1);i.contains(f.vertices,S[0])&&(y[_++]=S[0]),_<2&&i.contains(f.vertices,S[1])&&(y[_++]=S[1])}return _===0&&(y[_++]=w[0]),y.length=_,h},o._overlapAxes=function(c,f,d,p){var h=f.length,m=d.length,g=f[0].x,y=f[0].y,b=d[0].x,x=d[0].y,v=p.length,w=Number.MAX_VALUE,_=0,S,C,E,T,I,k;for(I=0;I<v;I++){var F=p[I],D=F.x,L=F.y,P=g*D+y*L,R=b*D+x*L,V=P,G=R;for(k=1;k<h;k+=1)T=f[k].x*D+f[k].y*L,T>V?V=T:T<P&&(P=T);for(k=1;k<m;k+=1)T=d[k].x*D+d[k].y*L,T>G?G=T:T<R&&(R=T);if(C=V-R,E=G-P,S=C<E?C:E,S<w&&(w=S,_=I,S<=0))break}c.axis=p[_],c.overlap=w},o._projectToAxis=function(c,f,d){for(var p=f[0].x*d.x+f[0].y*d.y,h=p,m=1;m<f.length;m+=1){var g=f[m].x*d.x+f[m].y*d.y;g>h?h=g:g<p&&(p=g)}c.min=p,c.max=h},o._findSupports=function(c,f,d,p){var h=f.vertices,m=h.length,g=c.position.x,y=c.position.y,b=d.x*p,x=d.y*p,v=Number.MAX_VALUE,w,_,S,C,E;for(E=0;E<m;E+=1)_=h[E],C=b*(g-_.x)+x*(y-_.y),C<v&&(v=C,w=_);return S=h[(m+w.index-1)%m],v=b*(g-S.x)+x*(y-S.y),_=h[(w.index+1)%m],b*(g-_.x)+x*(y-_.y)<v?(a[0]=w,a[1]=_,a):(a[0]=w,a[1]=S,a)}})()},function(t,r,n){var o={};t.exports=o;var i=n(16);(function(){o.create=function(s,a){var l=s.bodyA,u=s.bodyB,c={id:o.id(l,u),bodyA:l,bodyB:u,collision:s,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:l.isSensor||u.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(c,s,a),c},o.update=function(s,a,l){var u=s.contacts,c=a.supports,f=s.activeContacts,d=a.parentA,p=a.parentB,h=d.vertices.length;s.isActive=!0,s.timeUpdated=l,s.collision=a,s.separation=a.depth,s.inverseMass=d.inverseMass+p.inverseMass,s.friction=d.friction<p.friction?d.friction:p.friction,s.frictionStatic=d.frictionStatic>p.frictionStatic?d.frictionStatic:p.frictionStatic,s.restitution=d.restitution>p.restitution?d.restitution:p.restitution,s.slop=d.slop>p.slop?d.slop:p.slop,a.pair=s,f.length=0;for(var m=0;m<c.length;m++){var g=c[m],y=g.body===d?g.index:h+g.index,b=u[y];b?f.push(b):f.push(u[y]=i.create(g))}},o.setActive=function(s,a,l){a?(s.isActive=!0,s.timeUpdated=l):(s.isActive=!1,s.activeContacts.length=0)},o.id=function(s,a){return s.id<a.id?"A"+s.id+"B"+a.id:"A"+a.id+"B"+s.id}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(2),a=n(7),l=n(1),u=n(11),c=n(0);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(f){var d=f;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var p=d.bodyA?s.add(d.bodyA.position,d.pointA):d.pointA,h=d.bodyB?s.add(d.bodyB.position,d.pointB):d.pointB,m=s.magnitude(s.sub(p,h));d.length=typeof d.length<"u"?d.length:m,d.id=d.id||c.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return d.length===0&&d.stiffness>.1?(g.type="pin",g.anchors=!1):d.stiffness<.9&&(g.type="spring"),d.render=c.extend(g,d.render),d},o.preSolveAll=function(f){for(var d=0;d<f.length;d+=1){var p=f[d],h=p.constraintImpulse;p.isStatic||h.x===0&&h.y===0&&h.angle===0||(p.position.x+=h.x,p.position.y+=h.y,p.angle+=h.angle)}},o.solveAll=function(f,d){for(var p=c.clamp(d/c._baseDelta,0,1),h=0;h<f.length;h+=1){var m=f[h],g=!m.bodyA||m.bodyA&&m.bodyA.isStatic,y=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(g||y)&&o.solve(f[h],p)}for(h=0;h<f.length;h+=1)m=f[h],g=!m.bodyA||m.bodyA&&m.bodyA.isStatic,y=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!g&&!y&&o.solve(f[h],p)},o.solve=function(f,d){var p=f.bodyA,h=f.bodyB,m=f.pointA,g=f.pointB;if(!(!p&&!h)){p&&!p.isStatic&&(s.rotate(m,p.angle-f.angleA,m),f.angleA=p.angle),h&&!h.isStatic&&(s.rotate(g,h.angle-f.angleB,g),f.angleB=h.angle);var y=m,b=g;if(p&&(y=s.add(p.position,m)),h&&(b=s.add(h.position,g)),!(!y||!b)){var x=s.sub(y,b),v=s.magnitude(x);v<o._minLength&&(v=o._minLength);var w=(v-f.length)/v,_=f.stiffness>=1||f.length===0,S=_?f.stiffness*d:f.stiffness*d*d,C=f.damping*d,E=s.mult(x,w*S),T=(p?p.inverseMass:0)+(h?h.inverseMass:0),I=(p?p.inverseInertia:0)+(h?h.inverseInertia:0),k=T+I,F,D,L,P,R;if(C>0){var V=s.create();L=s.div(x,v),R=s.sub(h&&s.sub(h.position,h.positionPrev)||V,p&&s.sub(p.position,p.positionPrev)||V),P=s.dot(L,R)}p&&!p.isStatic&&(D=p.inverseMass/T,p.constraintImpulse.x-=E.x*D,p.constraintImpulse.y-=E.y*D,p.position.x-=E.x*D,p.position.y-=E.y*D,C>0&&(p.positionPrev.x-=C*L.x*P*D,p.positionPrev.y-=C*L.y*P*D),F=s.cross(m,E)/k*o._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle-=F,p.angle-=F),h&&!h.isStatic&&(D=h.inverseMass/T,h.constraintImpulse.x+=E.x*D,h.constraintImpulse.y+=E.y*D,h.position.x+=E.x*D,h.position.y+=E.y*D,C>0&&(h.positionPrev.x+=C*L.x*P*D,h.positionPrev.y+=C*L.y*P*D),F=s.cross(g,E)/k*o._torqueDampen*h.inverseInertia*(1-f.angularStiffness),h.constraintImpulse.angle+=F,h.angle+=F)}}},o.postSolveAll=function(f){for(var d=0;d<f.length;d++){var p=f[d],h=p.constraintImpulse;if(!(p.isStatic||h.x===0&&h.y===0&&h.angle===0)){a.set(p,!1);for(var m=0;m<p.parts.length;m++){var g=p.parts[m];i.translate(g.vertices,h),m>0&&(g.position.x+=h.x,g.position.y+=h.y),h.angle!==0&&(i.rotate(g.vertices,h.angle,p.position),u.rotate(g.axes,h.angle),m>0&&s.rotateAbout(g.position,h.angle,p.position,g.position)),l.update(g.bounds,g.vertices,p.velocity)}h.angle*=o._warming,h.x*=o._warming,h.y*=o._warming}}},o.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},o.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}}})()},function(t,r,n){var o={};t.exports=o;var i=n(2),s=n(0);(function(){o.fromVertices=function(a){for(var l={},u=0;u<a.length;u++){var c=(u+1)%a.length,f=i.normalise({x:a[c].y-a[u].y,y:a[u].x-a[c].x}),d=f.y===0?1/0:f.x/f.y;d=d.toFixed(3).toString(),l[d]=f}return s.values(l)},o.rotate=function(a,l){if(l!==0)for(var u=Math.cos(l),c=Math.sin(l),f=0;f<a.length;f++){var d=a[f],p;p=d.x*u-d.y*c,d.y=d.x*c+d.y*u,d.x=p}}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(0),a=n(4),l=n(1),u=n(2);(function(){o.rectangle=function(c,f,d,p,h){h=h||{};var m={label:"Rectangle Body",position:{x:c,y:f},vertices:i.fromPath("L 0 0 L "+d+" 0 L "+d+" "+p+" L 0 "+p)};if(h.chamfer){var g=h.chamfer;m.vertices=i.chamfer(m.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete h.chamfer}return a.create(s.extend({},m,h))},o.trapezoid=function(c,f,d,p,h,m){m=m||{},h*=.5;var g=(1-h*2)*d,y=d*h,b=y+g,x=b+y,v;h<.5?v="L 0 0 L "+y+" "+-p+" L "+b+" "+-p+" L "+x+" 0":v="L 0 0 L "+b+" "+-p+" L "+x+" 0";var w={label:"Trapezoid Body",position:{x:c,y:f},vertices:i.fromPath(v)};if(m.chamfer){var _=m.chamfer;w.vertices=i.chamfer(w.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete m.chamfer}return a.create(s.extend({},w,m))},o.circle=function(c,f,d,p,h){p=p||{};var m={label:"Circle Body",circleRadius:d};h=h||25;var g=Math.ceil(Math.max(10,Math.min(h,d)));return g%2===1&&(g+=1),o.polygon(c,f,g,d,s.extend({},m,p))},o.polygon=function(c,f,d,p,h){if(h=h||{},d<3)return o.circle(c,f,p,h);for(var m=2*Math.PI/d,g="",y=m*.5,b=0;b<d;b+=1){var x=y+b*m,v=Math.cos(x)*p,w=Math.sin(x)*p;g+="L "+v.toFixed(3)+" "+w.toFixed(3)+" "}var _={label:"Polygon Body",position:{x:c,y:f},vertices:i.fromPath(g)};if(h.chamfer){var S=h.chamfer;_.vertices=i.chamfer(_.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete h.chamfer}return a.create(s.extend({},_,h))},o.fromVertices=function(c,f,d,p,h,m,g,y){var b=s.getDecomp(),x,v,w,_,S,C,E,T,I,k,F;for(x=!!(b&&b.quickDecomp),p=p||{},w=[],h=typeof h<"u"?h:!1,m=typeof m<"u"?m:.01,g=typeof g<"u"?g:10,y=typeof y<"u"?y:.01,s.isArray(d[0])||(d=[d]),k=0;k<d.length;k+=1)if(C=d[k],_=i.isConvex(C),S=!_,S&&!x&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),_||!x)_?C=i.clockwiseSort(C):C=i.hull(C),w.push({position:{x:c,y:f},vertices:C});else{var D=C.map(function(M){return[M.x,M.y]});b.makeCCW(D),m!==!1&&b.removeCollinearPoints(D,m),y!==!1&&b.removeDuplicatePoints&&b.removeDuplicatePoints(D,y);var L=b.quickDecomp(D);for(E=0;E<L.length;E++){var P=L[E],R=P.map(function(M){return{x:M[0],y:M[1]}});g>0&&i.area(R)<g||w.push({position:i.centre(R),vertices:R})}}for(E=0;E<w.length;E++)w[E]=a.create(s.extend(w[E],p));if(h){var V=5;for(E=0;E<w.length;E++){var G=w[E];for(T=E+1;T<w.length;T++){var U=w[T];if(l.overlaps(G.bounds,U.bounds)){var H=G.vertices,X=U.vertices;for(I=0;I<G.vertices.length;I++)for(F=0;F<U.vertices.length;F++){var fe=u.magnitudeSquared(u.sub(H[(I+1)%H.length],X[F])),$=u.magnitudeSquared(u.sub(H[I],X[(F+1)%X.length]));fe<V&&$<V&&(H[I].isInternal=!0,X[F].isInternal=!0)}}}}}return w.length>1?(v=a.create(s.extend({parts:w.slice(0)},p)),a.setPosition(v,{x:c,y:f}),v):w[0]}})()},function(t,r,n){var o={};t.exports=o;var i=n(0),s=n(8);(function(){o.create=function(a){var l={bodies:[],pairs:null};return i.extend(l,a)},o.setBodies=function(a,l){a.bodies=l.slice(0)},o.clear=function(a){a.bodies=[]},o.collisions=function(a){var l=[],u=a.pairs,c=a.bodies,f=c.length,d=o.canCollide,p=s.collides,h,m;for(c.sort(o._compareBoundsX),h=0;h<f;h++){var g=c[h],y=g.bounds,b=g.bounds.max.x,x=g.bounds.max.y,v=g.bounds.min.y,w=g.isStatic||g.isSleeping,_=g.parts.length,S=_===1;for(m=h+1;m<f;m++){var C=c[m],E=C.bounds;if(E.min.x>b)break;if(!(x<E.min.y||v>E.max.y)&&!(w&&(C.isStatic||C.isSleeping))&&d(g.collisionFilter,C.collisionFilter)){var T=C.parts.length;if(S&&T===1){var I=p(g,C,u);I&&l.push(I)}else for(var k=_>1?1:0,F=T>1?1:0,D=k;D<_;D++)for(var L=g.parts[D],y=L.bounds,P=F;P<T;P++){var R=C.parts[P],E=R.bounds;if(!(y.min.x>E.max.x||y.max.x<E.min.x||y.max.y<E.min.y||y.min.y>E.max.y)){var I=p(L,R,u);I&&l.push(I)}}}}}return l},o.canCollide=function(a,l){return a.group===l.group&&a.group!==0?a.group>0:(a.mask&l.category)!==0&&(l.mask&a.category)!==0},o._compareBoundsX=function(a,l){return a.bounds.min.x-l.bounds.min.x}})()},function(t,r,n){var o={};t.exports=o;var i=n(0);(function(){o.create=function(s){var a={};return s||i.log("Mouse.create: element was undefined, defaulting to document.body","warn"),a.element=s||document.body,a.absolute={x:0,y:0},a.position={x:0,y:0},a.mousedownPosition={x:0,y:0},a.mouseupPosition={x:0,y:0},a.offset={x:0,y:0},a.scale={x:1,y:1},a.wheelDelta=0,a.button=-1,a.pixelRatio=parseInt(a.element.getAttribute("data-pixel-ratio"),10)||1,a.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},a.mousemove=function(l){var u=o._getRelativeMousePosition(l,a.element,a.pixelRatio),c=l.changedTouches;c&&(a.button=0,l.preventDefault()),a.absolute.x=u.x,a.absolute.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mousemove=l},a.mousedown=function(l){var u=o._getRelativeMousePosition(l,a.element,a.pixelRatio),c=l.changedTouches;c?(a.button=0,l.preventDefault()):a.button=l.button,a.absolute.x=u.x,a.absolute.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mousedownPosition.x=a.position.x,a.mousedownPosition.y=a.position.y,a.sourceEvents.mousedown=l},a.mouseup=function(l){var u=o._getRelativeMousePosition(l,a.element,a.pixelRatio),c=l.changedTouches;c&&l.preventDefault(),a.button=-1,a.absolute.x=u.x,a.absolute.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mouseupPosition.x=a.position.x,a.mouseupPosition.y=a.position.y,a.sourceEvents.mouseup=l},a.mousewheel=function(l){a.wheelDelta=Math.max(-1,Math.min(1,l.wheelDelta||-l.detail)),l.preventDefault()},o.setElement(a,a.element),a},o.setElement=function(s,a){s.element=a,a.addEventListener("mousemove",s.mousemove),a.addEventListener("mousedown",s.mousedown),a.addEventListener("mouseup",s.mouseup),a.addEventListener("mousewheel",s.mousewheel),a.addEventListener("DOMMouseScroll",s.mousewheel),a.addEventListener("touchmove",s.mousemove),a.addEventListener("touchstart",s.mousedown),a.addEventListener("touchend",s.mouseup)},o.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},o.setOffset=function(s,a){s.offset.x=a.x,s.offset.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},o.setScale=function(s,a){s.scale.x=a.x,s.scale.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},o._getRelativeMousePosition=function(s,a,l){var u=a.getBoundingClientRect(),c=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:c.scrollLeft,d=window.pageYOffset!==void 0?window.pageYOffset:c.scrollTop,p=s.changedTouches,h,m;return p?(h=p[0].pageX-u.left-f,m=p[0].pageY-u.top-d):(h=s.pageX-u.left-f,m=s.pageY-u.top-d),{x:h/(a.clientWidth/(a.width||a.clientWidth)*l),y:m/(a.clientHeight/(a.height||a.clientHeight)*l)}}})()},function(t,r,n){var o={};t.exports=o;var i=n(0);(function(){o._registry={},o.register=function(s){if(o.isPlugin(s)||i.warn("Plugin.register:",o.toString(s),"does not implement all required fields."),s.name in o._registry){var a=o._registry[s.name],l=o.versionParse(s.version).number,u=o.versionParse(a.version).number;l>u?(i.warn("Plugin.register:",o.toString(a),"was upgraded to",o.toString(s)),o._registry[s.name]=s):l<u?i.warn("Plugin.register:",o.toString(a),"can not be downgraded to",o.toString(s)):s!==a&&i.warn("Plugin.register:",o.toString(s),"is already registered to different plugin object")}else o._registry[s.name]=s;return s},o.resolve=function(s){return o._registry[o.dependencyParse(s).name]},o.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},o.isPlugin=function(s){return s&&s.name&&s.version&&s.install},o.isUsed=function(s,a){return s.used.indexOf(a)>-1},o.isFor=function(s,a){var l=s.for&&o.dependencyParse(s.for);return!s.for||a.name===l.name&&o.versionSatisfies(a.version,l.range)},o.use=function(s,a){if(s.uses=(s.uses||[]).concat(a||[]),s.uses.length===0){i.warn("Plugin.use:",o.toString(s),"does not specify any dependencies to install.");return}for(var l=o.dependencies(s),u=i.topologicalSort(l),c=[],f=0;f<u.length;f+=1)if(u[f]!==s.name){var d=o.resolve(u[f]);if(!d){c.push("\u274C "+u[f]);continue}o.isUsed(s,d.name)||(o.isFor(d,s)||(i.warn("Plugin.use:",o.toString(d),"is for",d.for,"but installed on",o.toString(s)+"."),d._warned=!0),d.install?d.install(s):(i.warn("Plugin.use:",o.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(c.push("\u{1F536} "+o.toString(d)),delete d._warned):c.push("\u2705 "+o.toString(d)),s.used.push(d.name))}c.length>0&&i.info(c.join("  "))},o.dependencies=function(s,a){var l=o.dependencyParse(s),u=l.name;if(a=a||{},!(u in a)){s=o.resolve(s)||s,a[u]=i.map(s.uses||[],function(f){o.isPlugin(f)&&o.register(f);var d=o.dependencyParse(f),p=o.resolve(f);return p&&!o.versionSatisfies(p.version,d.range)?(i.warn("Plugin.dependencies:",o.toString(p),"does not satisfy",o.toString(d),"used by",o.toString(l)+"."),p._warned=!0,s._warned=!0):p||(i.warn("Plugin.dependencies:",o.toString(f),"used by",o.toString(l),"could not be resolved."),s._warned=!0),d.name});for(var c=0;c<a[u].length;c+=1)o.dependencies(a[u][c],a);return a}},o.dependencyParse=function(s){if(i.isString(s)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return a.test(s)||i.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},o.versionParse=function(s){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(s)||i.warn("Plugin.versionParse:",s,"is not a valid version or range.");var l=a.exec(s),u=Number(l[4]),c=Number(l[5]),f=Number(l[6]);return{isRange:!!(l[1]||l[2]),version:l[3],range:s,operator:l[1]||l[2]||"",major:u,minor:c,patch:f,parts:[u,c,f],prerelease:l[7],number:u*1e8+c*1e4+f}},o.versionSatisfies=function(s,a){a=a||"*";var l=o.versionParse(a),u=o.versionParse(s);if(l.isRange){if(l.operator==="*"||s==="*")return!0;if(l.operator===">")return u.number>l.number;if(l.operator===">=")return u.number>=l.number;if(l.operator==="~")return u.major===l.major&&u.minor===l.minor&&u.patch>=l.patch;if(l.operator==="^")return l.major>0?u.major===l.major&&u.number>=l.number:l.minor>0?u.minor===l.minor&&u.patch>=l.patch:u.patch===l.patch}return s===a||s==="*"}})()},function(t,r){var n={};t.exports=n,function(){n.create=function(o){return{vertex:o,normalImpulse:0,tangentImpulse:0}}}()},function(t,r,n){var o={};t.exports=o;var i=n(7),s=n(18),a=n(13),l=n(19),u=n(5),c=n(6),f=n(10),d=n(0),p=n(4);(function(){o.create=function(h){h=h||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=d.extend(m,h);return g.world=h.world||c.create({label:"World"}),g.pairs=h.pairs||l.create(),g.detector=h.detector||a.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},o.update=function(h,m){var g=d.now(),y=h.world,b=h.detector,x=h.pairs,v=h.timing,w=v.timestamp,_;m=typeof m<"u"?m:d._baseDelta,m*=v.timeScale,v.timestamp+=m,v.lastDelta=m;var S={timestamp:v.timestamp,delta:m};u.trigger(h,"beforeUpdate",S);var C=c.allBodies(y),E=c.allConstraints(y);for(y.isModified&&(a.setBodies(b,C),c.setModified(y,!1,!1,!0)),h.enableSleeping&&i.update(C,m),o._bodiesApplyGravity(C,h.gravity),m>0&&o._bodiesUpdate(C,m),f.preSolveAll(C),_=0;_<h.constraintIterations;_++)f.solveAll(E,m);f.postSolveAll(C),b.pairs=h.pairs;var T=a.collisions(b);l.update(x,T,w),h.enableSleeping&&i.afterCollisions(x.list),x.collisionStart.length>0&&u.trigger(h,"collisionStart",{pairs:x.collisionStart});var I=d.clamp(20/h.positionIterations,0,1);for(s.preSolvePosition(x.list),_=0;_<h.positionIterations;_++)s.solvePosition(x.list,m,I);for(s.postSolvePosition(C),f.preSolveAll(C),_=0;_<h.constraintIterations;_++)f.solveAll(E,m);for(f.postSolveAll(C),s.preSolveVelocity(x.list),_=0;_<h.velocityIterations;_++)s.solveVelocity(x.list,m);return o._bodiesUpdateVelocities(C),x.collisionActive.length>0&&u.trigger(h,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&u.trigger(h,"collisionEnd",{pairs:x.collisionEnd}),o._bodiesClearForces(C),u.trigger(h,"afterUpdate",S),h.timing.lastElapsed=d.now()-g,h},o.merge=function(h,m){if(d.extend(h,m),m.world){h.world=m.world,o.clear(h);for(var g=c.allBodies(h.world),y=0;y<g.length;y++){var b=g[y];i.set(b,!1),b.id=d.nextId()}}},o.clear=function(h){l.clear(h.pairs),a.clear(h.detector)},o._bodiesClearForces=function(h){for(var m=h.length,g=0;g<m;g++){var y=h[g];y.force.x=0,y.force.y=0,y.torque=0}},o._bodiesApplyGravity=function(h,m){var g=typeof m.scale<"u"?m.scale:.001,y=h.length;if(!(m.x===0&&m.y===0||g===0))for(var b=0;b<y;b++){var x=h[b];x.isStatic||x.isSleeping||(x.force.y+=x.mass*m.y*g,x.force.x+=x.mass*m.x*g)}},o._bodiesUpdate=function(h,m){for(var g=h.length,y=0;y<g;y++){var b=h[y];b.isStatic||b.isSleeping||p.update(b,m)}},o._bodiesUpdateVelocities=function(h){for(var m=h.length,g=0;g<m;g++)p.updateVelocities(h[g])}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(0),a=n(1);(function(){o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(l){var u,c,f,d=l.length;for(u=0;u<d;u++)c=l[u],c.isActive&&(f=c.activeContacts.length,c.collision.parentA.totalContacts+=f,c.collision.parentB.totalContacts+=f)},o.solvePosition=function(l,u,c){var f,d,p,h,m,g,y,b,x=o._positionDampen*(c||1),v=s.clamp(u/s._baseDelta,0,1),w=l.length;for(f=0;f<w;f++)d=l[f],!(!d.isActive||d.isSensor)&&(p=d.collision,h=p.parentA,m=p.parentB,g=p.normal,d.separation=g.x*(m.positionImpulse.x+p.penetration.x-h.positionImpulse.x)+g.y*(m.positionImpulse.y+p.penetration.y-h.positionImpulse.y));for(f=0;f<w;f++)d=l[f],!(!d.isActive||d.isSensor)&&(p=d.collision,h=p.parentA,m=p.parentB,g=p.normal,b=d.separation-d.slop*v,(h.isStatic||m.isStatic)&&(b*=2),h.isStatic||h.isSleeping||(y=x/h.totalContacts,h.positionImpulse.x+=g.x*b*y,h.positionImpulse.y+=g.y*b*y),m.isStatic||m.isSleeping||(y=x/m.totalContacts,m.positionImpulse.x-=g.x*b*y,m.positionImpulse.y-=g.y*b*y))},o.postSolvePosition=function(l){for(var u=o._positionWarming,c=l.length,f=i.translate,d=a.update,p=0;p<c;p++){var h=l[p],m=h.positionImpulse,g=m.x,y=m.y,b=h.velocity;if(h.totalContacts=0,g!==0||y!==0){for(var x=0;x<h.parts.length;x++){var v=h.parts[x];f(v.vertices,m),d(v.bounds,v.vertices,b),v.position.x+=g,v.position.y+=y}h.positionPrev.x+=g,h.positionPrev.y+=y,g*b.x+y*b.y<0?(m.x=0,m.y=0):(m.x*=u,m.y*=u)}}},o.preSolveVelocity=function(l){var u=l.length,c,f;for(c=0;c<u;c++){var d=l[c];if(!(!d.isActive||d.isSensor)){var p=d.activeContacts,h=p.length,m=d.collision,g=m.parentA,y=m.parentB,b=m.normal,x=m.tangent;for(f=0;f<h;f++){var v=p[f],w=v.vertex,_=v.normalImpulse,S=v.tangentImpulse;if(_!==0||S!==0){var C=b.x*_+x.x*S,E=b.y*_+x.y*S;g.isStatic||g.isSleeping||(g.positionPrev.x+=C*g.inverseMass,g.positionPrev.y+=E*g.inverseMass,g.anglePrev+=g.inverseInertia*((w.x-g.position.x)*E-(w.y-g.position.y)*C)),y.isStatic||y.isSleeping||(y.positionPrev.x-=C*y.inverseMass,y.positionPrev.y-=E*y.inverseMass,y.anglePrev-=y.inverseInertia*((w.x-y.position.x)*E-(w.y-y.position.y)*C))}}}}},o.solveVelocity=function(l,u){var c=u/s._baseDelta,f=c*c,d=f*c,p=-o._restingThresh*c,h=o._restingThreshTangent,m=o._frictionNormalMultiplier*c,g=o._frictionMaxStatic,y=l.length,b,x,v,w;for(v=0;v<y;v++){var _=l[v];if(!(!_.isActive||_.isSensor)){var S=_.collision,C=S.parentA,E=S.parentB,T=C.velocity,I=E.velocity,k=S.normal.x,F=S.normal.y,D=S.tangent.x,L=S.tangent.y,P=_.activeContacts,R=P.length,V=1/R,G=C.inverseMass+E.inverseMass,U=_.friction*_.frictionStatic*m;for(T.x=C.position.x-C.positionPrev.x,T.y=C.position.y-C.positionPrev.y,I.x=E.position.x-E.positionPrev.x,I.y=E.position.y-E.positionPrev.y,C.angularVelocity=C.angle-C.anglePrev,E.angularVelocity=E.angle-E.anglePrev,w=0;w<R;w++){var H=P[w],X=H.vertex,fe=X.x-C.position.x,$=X.y-C.position.y,M=X.x-E.position.x,z=X.y-E.position.y,q=T.x-$*C.angularVelocity,ee=T.y+fe*C.angularVelocity,ae=I.x-z*E.angularVelocity,Q=I.y+M*E.angularVelocity,le=q-ae,ie=ee-Q,K=k*le+F*ie,ge=D*le+L*ie,ne=_.separation+K,ye=Math.min(ne,1);ye=ne<0?0:ye;var xe=ye*U;ge<-xe||ge>xe?(x=ge>0?ge:-ge,b=_.friction*(ge>0?1:-1)*d,b<-x?b=-x:b>x&&(b=x)):(b=ge,x=g);var De=fe*F-$*k,Te=M*F-z*k,Fe=V/(G+C.inverseInertia*De*De+E.inverseInertia*Te*Te),$e=(1+_.restitution)*K*Fe;if(b*=Fe,K<p)H.normalImpulse=0;else{var at=H.normalImpulse;H.normalImpulse+=$e,H.normalImpulse>0&&(H.normalImpulse=0),$e=H.normalImpulse-at}if(ge<-h||ge>h)H.tangentImpulse=0;else{var We=H.tangentImpulse;H.tangentImpulse+=b,H.tangentImpulse<-x&&(H.tangentImpulse=-x),H.tangentImpulse>x&&(H.tangentImpulse=x),b=H.tangentImpulse-We}var jt=k*$e+D*b,_t=F*$e+L*b;C.isStatic||C.isSleeping||(C.positionPrev.x+=jt*C.inverseMass,C.positionPrev.y+=_t*C.inverseMass,C.anglePrev+=(fe*_t-$*jt)*C.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=jt*E.inverseMass,E.positionPrev.y-=_t*E.inverseMass,E.anglePrev-=(M*_t-z*jt)*E.inverseInertia)}}}}})()},function(t,r,n){var o={};t.exports=o;var i=n(9),s=n(0);(function(){o.create=function(a){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},o.update=function(a,l,u){var c=a.list,f=c.length,d=a.table,p=l.length,h=a.collisionStart,m=a.collisionEnd,g=a.collisionActive,y,b,x,v;for(h.length=0,m.length=0,g.length=0,v=0;v<f;v++)c[v].confirmedActive=!1;for(v=0;v<p;v++)y=l[v],x=y.pair,x?(x.isActive?g.push(x):h.push(x),i.update(x,y,u),x.confirmedActive=!0):(x=i.create(y,u),d[x.id]=x,h.push(x),c.push(x));var w=[];for(f=c.length,v=0;v<f;v++)x=c[v],x.confirmedActive||(i.setActive(x,!1,u),m.push(x),!x.collision.bodyA.isSleeping&&!x.collision.bodyB.isSleeping&&w.push(v));for(v=0;v<w.length;v++)b=w[v]-v,x=c[b],c.splice(b,1),delete d[x.id]},o.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(t,r,n){var o=t.exports=n(21);o.Axes=n(11),o.Bodies=n(12),o.Body=n(4),o.Bounds=n(1),o.Collision=n(8),o.Common=n(0),o.Composite=n(6),o.Composites=n(22),o.Constraint=n(10),o.Contact=n(16),o.Detector=n(13),o.Engine=n(17),o.Events=n(5),o.Grid=n(23),o.Mouse=n(14),o.MouseConstraint=n(24),o.Pair=n(9),o.Pairs=n(19),o.Plugin=n(15),o.Query=n(25),o.Render=n(26),o.Resolver=n(18),o.Runner=n(27),o.SAT=n(28),o.Sleeping=n(7),o.Svg=n(29),o.Vector=n(2),o.Vertices=n(3),o.World=n(30),o.Engine.run=o.Runner.run,o.Common.deprecated(o.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(t,r,n){var o={};t.exports=o;var i=n(15),s=n(0);(function(){o.name="matter-js",o.version="0.19.0",o.uses=[],o.used=[],o.use=function(){i.use(o,Array.prototype.slice.call(arguments))},o.before=function(a,l){return a=a.replace(/^Matter./,""),s.chainPathBefore(o,a,l)},o.after=function(a,l){return a=a.replace(/^Matter./,""),s.chainPathAfter(o,a,l)}})()},function(t,r,n){var o={};t.exports=o;var i=n(6),s=n(10),a=n(0),l=n(4),u=n(12),c=a.deprecated;(function(){o.stack=function(f,d,p,h,m,g,y){for(var b=i.create({label:"Stack"}),x=f,v=d,w,_=0,S=0;S<h;S++){for(var C=0,E=0;E<p;E++){var T=y(x,v,E,S,w,_);if(T){var I=T.bounds.max.y-T.bounds.min.y,k=T.bounds.max.x-T.bounds.min.x;I>C&&(C=I),l.translate(T,{x:k*.5,y:I*.5}),x=T.bounds.max.x+m,i.addBody(b,T),w=T,_+=1}else x+=m}v+=C+g,x=f}return b},o.chain=function(f,d,p,h,m,g){for(var y=f.bodies,b=1;b<y.length;b++){var x=y[b-1],v=y[b],w=x.bounds.max.y-x.bounds.min.y,_=x.bounds.max.x-x.bounds.min.x,S=v.bounds.max.y-v.bounds.min.y,C=v.bounds.max.x-v.bounds.min.x,E={bodyA:x,pointA:{x:_*d,y:w*p},bodyB:v,pointB:{x:C*h,y:S*m}},T=a.extend(E,g);i.addConstraint(f,s.create(T))}return f.label+=" Chain",f},o.mesh=function(f,d,p,h,m){var g=f.bodies,y,b,x,v,w;for(y=0;y<p;y++){for(b=1;b<d;b++)x=g[b-1+y*d],v=g[b+y*d],i.addConstraint(f,s.create(a.extend({bodyA:x,bodyB:v},m)));if(y>0)for(b=0;b<d;b++)x=g[b+(y-1)*d],v=g[b+y*d],i.addConstraint(f,s.create(a.extend({bodyA:x,bodyB:v},m))),h&&b>0&&(w=g[b-1+(y-1)*d],i.addConstraint(f,s.create(a.extend({bodyA:w,bodyB:v},m)))),h&&b<d-1&&(w=g[b+1+(y-1)*d],i.addConstraint(f,s.create(a.extend({bodyA:w,bodyB:v},m))))}return f.label+=" Mesh",f},o.pyramid=function(f,d,p,h,m,g,y){return o.stack(f,d,p,h,m,g,function(b,x,v,w,_,S){var C=Math.min(h,Math.ceil(p/2)),E=_?_.bounds.max.x-_.bounds.min.x:0;if(!(w>C)){w=C-w;var T=w,I=p-1-w;if(!(v<T||v>I)){S===1&&l.translate(_,{x:(v+(p%2===1?1:-1))*E,y:0});var k=_?v*E:0;return y(f+k+v*m,x,v,w,_,S)}}})},o.newtonsCradle=function(f,d,p,h,m){for(var g=i.create({label:"Newtons Cradle"}),y=0;y<p;y++){var b=1.9,x=u.circle(f+y*(h*b),d+m,h,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),v=s.create({pointA:{x:f+y*(h*b),y:d},bodyB:x});i.addBody(g,x),i.addConstraint(g,v)}return g},c(o,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),o.car=function(f,d,p,h,m){var g=l.nextGroup(!0),y=20,b=-p*.5+y,x=p*.5-y,v=0,w=i.create({label:"Car"}),_=u.rectangle(f,d,p,h,{collisionFilter:{group:g},chamfer:{radius:h*.5},density:2e-4}),S=u.circle(f+b,d+v,m,{collisionFilter:{group:g},friction:.8}),C=u.circle(f+x,d+v,m,{collisionFilter:{group:g},friction:.8}),E=s.create({bodyB:_,pointB:{x:b,y:v},bodyA:S,stiffness:1,length:0}),T=s.create({bodyB:_,pointB:{x,y:v},bodyA:C,stiffness:1,length:0});return i.addBody(w,_),i.addBody(w,S),i.addBody(w,C),i.addConstraint(w,E),i.addConstraint(w,T),w},c(o,"car","Composites.car \u27A4 moved to car example"),o.softBody=function(f,d,p,h,m,g,y,b,x,v){x=a.extend({inertia:1/0},x),v=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},v);var w=o.stack(f,d,p,h,m,g,function(_,S){return u.circle(_,S,b,x)});return o.mesh(w,p,h,y,v),w.label="Soft Body",w},c(o,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(t,r,n){var o={};t.exports=o;var i=n(9),s=n(0),a=s.deprecated;(function(){o.create=function(l){var u={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(u,l)},o.update=function(l,u,c,f){var d,p,h,m=c.world,g=l.buckets,y,b,x=!1;for(d=0;d<u.length;d++){var v=u[d];if(!(v.isSleeping&&!f)&&!(m.bounds&&(v.bounds.max.x<m.bounds.min.x||v.bounds.min.x>m.bounds.max.x||v.bounds.max.y<m.bounds.min.y||v.bounds.min.y>m.bounds.max.y))){var w=o._getRegion(l,v);if(!v.region||w.id!==v.region.id||f){(!v.region||f)&&(v.region=w);var _=o._regionUnion(w,v.region);for(p=_.startCol;p<=_.endCol;p++)for(h=_.startRow;h<=_.endRow;h++){b=o._getBucketId(p,h),y=g[b];var S=p>=w.startCol&&p<=w.endCol&&h>=w.startRow&&h<=w.endRow,C=p>=v.region.startCol&&p<=v.region.endCol&&h>=v.region.startRow&&h<=v.region.endRow;!S&&C&&C&&y&&o._bucketRemoveBody(l,y,v),(v.region===w||S&&!C||f)&&(y||(y=o._createBucket(g,b)),o._bucketAddBody(l,y,v))}v.region=w,x=!0}}}x&&(l.pairsList=o._createActivePairsList(l))},a(o,"update","Grid.update \u27A4 replaced by Matter.Detector"),o.clear=function(l){l.buckets={},l.pairs={},l.pairsList=[]},a(o,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),o._regionUnion=function(l,u){var c=Math.min(l.startCol,u.startCol),f=Math.max(l.endCol,u.endCol),d=Math.min(l.startRow,u.startRow),p=Math.max(l.endRow,u.endRow);return o._createRegion(c,f,d,p)},o._getRegion=function(l,u){var c=u.bounds,f=Math.floor(c.min.x/l.bucketWidth),d=Math.floor(c.max.x/l.bucketWidth),p=Math.floor(c.min.y/l.bucketHeight),h=Math.floor(c.max.y/l.bucketHeight);return o._createRegion(f,d,p,h)},o._createRegion=function(l,u,c,f){return{id:l+","+u+","+c+","+f,startCol:l,endCol:u,startRow:c,endRow:f}},o._getBucketId=function(l,u){return"C"+l+"R"+u},o._createBucket=function(l,u){var c=l[u]=[];return c},o._bucketAddBody=function(l,u,c){var f=l.pairs,d=i.id,p=u.length,h;for(h=0;h<p;h++){var m=u[h];if(!(c.id===m.id||c.isStatic&&m.isStatic)){var g=d(c,m),y=f[g];y?y[2]+=1:f[g]=[c,m,1]}}u.push(c)},o._bucketRemoveBody=function(l,u,c){var f=l.pairs,d=i.id,p;u.splice(s.indexOf(u,c),1);var h=u.length;for(p=0;p<h;p++){var m=f[d(c,u[p])];m&&(m[2]-=1)}},o._createActivePairsList=function(l){var u,c=l.pairs,f=s.keys(c),d=f.length,p=[],h;for(h=0;h<d;h++)u=c[f[h]],u[2]>0?p.push(u):delete c[f[h]];return p}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(7),a=n(14),l=n(5),u=n(13),c=n(10),f=n(6),d=n(0),p=n(1);(function(){o.create=function(h,m){var g=(h?h.mouse:null)||(m?m.mouse:null);g||(h&&h.render&&h.render.canvas?g=a.create(h.render.canvas):m&&m.element?g=a.create(m.element):(g=a.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=c.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),b={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},x=d.extend(b,m);return l.on(h,"beforeUpdate",function(){var v=f.allBodies(h.world);o.update(x,v),o._triggerEvents(x)}),x},o.update=function(h,m){var g=h.mouse,y=h.constraint,b=h.body;if(g.button===0){if(y.bodyB)s.set(y.bodyB,!1),y.pointA=g.position;else for(var x=0;x<m.length;x++)if(b=m[x],p.contains(b.bounds,g.position)&&u.canCollide(b.collisionFilter,h.collisionFilter))for(var v=b.parts.length>1?1:0;v<b.parts.length;v++){var w=b.parts[v];if(i.contains(w.vertices,g.position)){y.pointA=g.position,y.bodyB=h.body=b,y.pointB={x:g.position.x-b.position.x,y:g.position.y-b.position.y},y.angleB=b.angle,s.set(b,!1),l.trigger(h,"startdrag",{mouse:g,body:b});break}}}else y.bodyB=h.body=null,y.pointB=null,b&&l.trigger(h,"enddrag",{mouse:g,body:b})},o._triggerEvents=function(h){var m=h.mouse,g=m.sourceEvents;g.mousemove&&l.trigger(h,"mousemove",{mouse:m}),g.mousedown&&l.trigger(h,"mousedown",{mouse:m}),g.mouseup&&l.trigger(h,"mouseup",{mouse:m}),a.clearSourceEvents(m)}})()},function(t,r,n){var o={};t.exports=o;var i=n(2),s=n(8),a=n(1),l=n(12),u=n(3);(function(){o.collides=function(c,f){for(var d=[],p=f.length,h=c.bounds,m=s.collides,g=a.overlaps,y=0;y<p;y++){var b=f[y],x=b.parts.length,v=x===1?0:1;if(g(b.bounds,h))for(var w=v;w<x;w++){var _=b.parts[w];if(g(_.bounds,h)){var S=m(_,c);if(S){d.push(S);break}}}}return d},o.ray=function(c,f,d,p){p=p||1e-100;for(var h=i.angle(f,d),m=i.magnitude(i.sub(f,d)),g=(d.x+f.x)*.5,y=(d.y+f.y)*.5,b=l.rectangle(g,y,m,p,{angle:h}),x=o.collides(b,c),v=0;v<x.length;v+=1){var w=x[v];w.body=w.bodyB=w.bodyA}return x},o.region=function(c,f,d){for(var p=[],h=0;h<c.length;h++){var m=c[h],g=a.overlaps(m.bounds,f);(g&&!d||!g&&d)&&p.push(m)}return p},o.point=function(c,f){for(var d=[],p=0;p<c.length;p++){var h=c[p];if(a.contains(h.bounds,f))for(var m=h.parts.length===1?0:1;m<h.parts.length;m++){var g=h.parts[m];if(a.contains(g.bounds,f)&&u.contains(g.vertices,f)){d.push(h);break}}}return d}})()},function(t,r,n){var o={};t.exports=o;var i=n(4),s=n(0),a=n(6),l=n(1),u=n(5),c=n(2),f=n(14);(function(){var d,p;typeof window<"u"&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(s.now())},1e3/60)},p=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o._goodFps=30,o._goodDelta=1e3/60,o.create=function(v){var w={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},_=s.extend(w,v);return _.canvas&&(_.canvas.width=_.options.width||_.canvas.width,_.canvas.height=_.options.height||_.canvas.height),_.mouse=v.mouse,_.engine=v.engine,_.canvas=_.canvas||g(_.options.width,_.options.height),_.context=_.canvas.getContext("2d"),_.textures={},_.bounds=_.bounds||{min:{x:0,y:0},max:{x:_.canvas.width,y:_.canvas.height}},_.controller=o,_.options.showBroadphase=!1,_.options.pixelRatio!==1&&o.setPixelRatio(_,_.options.pixelRatio),s.isElement(_.element)&&_.element.appendChild(_.canvas),_},o.run=function(v){(function w(_){v.frameRequestId=d(w),h(v,_),o.world(v,_),(v.options.showStats||v.options.showDebug)&&o.stats(v,v.context,_),(v.options.showPerformance||v.options.showDebug)&&o.performance(v,v.context,_)})()},o.stop=function(v){p(v.frameRequestId)},o.setPixelRatio=function(v,w){var _=v.options,S=v.canvas;w==="auto"&&(w=y(S)),_.pixelRatio=w,S.setAttribute("data-pixel-ratio",w),S.width=_.width*w,S.height=_.height*w,S.style.width=_.width+"px",S.style.height=_.height+"px"},o.lookAt=function(v,w,_,S){S=typeof S<"u"?S:!0,w=s.isArray(w)?w:[w],_=_||{x:0,y:0};for(var C={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},E=0;E<w.length;E+=1){var T=w[E],I=T.bounds?T.bounds.min:T.min||T.position||T,k=T.bounds?T.bounds.max:T.max||T.position||T;I&&k&&(I.x<C.min.x&&(C.min.x=I.x),k.x>C.max.x&&(C.max.x=k.x),I.y<C.min.y&&(C.min.y=I.y),k.y>C.max.y&&(C.max.y=k.y))}var F=C.max.x-C.min.x+2*_.x,D=C.max.y-C.min.y+2*_.y,L=v.canvas.height,P=v.canvas.width,R=P/L,V=F/D,G=1,U=1;V>R?U=V/R:G=R/V,v.options.hasBounds=!0,v.bounds.min.x=C.min.x,v.bounds.max.x=C.min.x+F*G,v.bounds.min.y=C.min.y,v.bounds.max.y=C.min.y+D*U,S&&(v.bounds.min.x+=F*.5-F*G*.5,v.bounds.max.x+=F*.5-F*G*.5,v.bounds.min.y+=D*.5-D*U*.5,v.bounds.max.y+=D*.5-D*U*.5),v.bounds.min.x-=_.x,v.bounds.max.x-=_.x,v.bounds.min.y-=_.y,v.bounds.max.y-=_.y,v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),f.setOffset(v.mouse,v.bounds.min))},o.startViewTransform=function(v){var w=v.bounds.max.x-v.bounds.min.x,_=v.bounds.max.y-v.bounds.min.y,S=w/v.options.width,C=_/v.options.height;v.context.setTransform(v.options.pixelRatio/S,0,0,v.options.pixelRatio/C,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},o.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},o.world=function(v,w){var _=s.now(),S=v.engine,C=S.world,E=v.canvas,T=v.context,I=v.options,k=v.timing,F=a.allBodies(C),D=a.allConstraints(C),L=I.wireframes?I.wireframeBackground:I.background,P=[],R=[],V,G={timestamp:S.timing.timestamp};if(u.trigger(v,"beforeRender",G),v.currentBackground!==L&&x(v,L),T.globalCompositeOperation="source-in",T.fillStyle="transparent",T.fillRect(0,0,E.width,E.height),T.globalCompositeOperation="source-over",I.hasBounds){for(V=0;V<F.length;V++){var U=F[V];l.overlaps(U.bounds,v.bounds)&&P.push(U)}for(V=0;V<D.length;V++){var H=D[V],X=H.bodyA,fe=H.bodyB,$=H.pointA,M=H.pointB;X&&($=c.add(X.position,H.pointA)),fe&&(M=c.add(fe.position,H.pointB)),!(!$||!M)&&(l.contains(v.bounds,$)||l.contains(v.bounds,M))&&R.push(H)}o.startViewTransform(v),v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),f.setOffset(v.mouse,v.bounds.min))}else R=D,P=F,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!I.wireframes||S.enableSleeping&&I.showSleeping?o.bodies(v,P,T):(I.showConvexHulls&&o.bodyConvexHulls(v,P,T),o.bodyWireframes(v,P,T)),I.showBounds&&o.bodyBounds(v,P,T),(I.showAxes||I.showAngleIndicator)&&o.bodyAxes(v,P,T),I.showPositions&&o.bodyPositions(v,P,T),I.showVelocity&&o.bodyVelocity(v,P,T),I.showIds&&o.bodyIds(v,P,T),I.showSeparations&&o.separations(v,S.pairs.list,T),I.showCollisions&&o.collisions(v,S.pairs.list,T),I.showVertexNumbers&&o.vertexNumbers(v,P,T),I.showMousePosition&&o.mousePosition(v,v.mouse,T),o.constraints(R,T),I.hasBounds&&o.endViewTransform(v),u.trigger(v,"afterRender",G),k.lastElapsed=s.now()-_},o.stats=function(v,w,_){for(var S=v.engine,C=S.world,E=a.allBodies(C),T=0,I=55,k=44,F=0,D=0,L=0;L<E.length;L+=1)T+=E[L].parts.length;var P={Part:T,Body:E.length,Cons:a.allConstraints(C).length,Comp:a.allComposites(C).length,Pair:S.pairs.list.length};w.fillStyle="#0e0f19",w.fillRect(F,D,I*5.5,k),w.font="12px Arial",w.textBaseline="top",w.textAlign="right";for(var R in P){var V=P[R];w.fillStyle="#aaa",w.fillText(R,F+I,D+8),w.fillStyle="#eee",w.fillText(V,F+I,D+26),F+=I}},o.performance=function(v,w){var _=v.engine,S=v.timing,C=S.deltaHistory,E=S.elapsedHistory,T=S.timestampElapsedHistory,I=S.engineDeltaHistory,k=S.engineElapsedHistory,F=_.timing.lastDelta,D=m(C),L=m(E),P=m(I),R=m(k),V=m(T),G=V/D||0,U=1e3/D||0,H=4,X=12,fe=60,$=34,M=10,z=69;w.fillStyle="#0e0f19",w.fillRect(0,50,X*4+fe*5+22,$),o.status(w,M,z,fe,H,C.length,Math.round(U)+" fps",U/o._goodFps,function(q){return C[q]/D-1}),o.status(w,M+X+fe,z,fe,H,I.length,F.toFixed(2)+" dt",o._goodDelta/F,function(q){return I[q]/P-1}),o.status(w,M+(X+fe)*2,z,fe,H,k.length,R.toFixed(2)+" ut",1-R/o._goodFps,function(q){return k[q]/R-1}),o.status(w,M+(X+fe)*3,z,fe,H,E.length,L.toFixed(2)+" rt",1-L/o._goodFps,function(q){return E[q]/L-1}),o.status(w,M+(X+fe)*4,z,fe,H,T.length,G.toFixed(2)+" x",G*G*G,function(q){return(T[q]/C[q]/G||0)-1})},o.status=function(v,w,_,S,C,E,T,I,k){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(w,_+7,S,1),v.beginPath(),v.moveTo(w,_+7-C*s.clamp(.4*k(0),-2,2));for(var F=0;F<S;F+=1)v.lineTo(w+F,_+7-(F<E?C*s.clamp(.4*k(F),-2,2):0));v.stroke(),v.fillStyle="hsl("+s.clamp(25+95*I,0,120)+",100%,60%)",v.fillRect(w,_-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(T,w+S,_-5)},o.constraints=function(v,w){for(var _=w,S=0;S<v.length;S++){var C=v[S];if(!(!C.render.visible||!C.pointA||!C.pointB)){var E=C.bodyA,T=C.bodyB,I,k;if(E?I=c.add(E.position,C.pointA):I=C.pointA,C.render.type==="pin")_.beginPath(),_.arc(I.x,I.y,3,0,2*Math.PI),_.closePath();else{if(T?k=c.add(T.position,C.pointB):k=C.pointB,_.beginPath(),_.moveTo(I.x,I.y),C.render.type==="spring")for(var F=c.sub(k,I),D=c.perp(c.normalise(F)),L=Math.ceil(s.clamp(C.length/5,12,20)),P,R=1;R<L;R+=1)P=R%2===0?1:-1,_.lineTo(I.x+F.x*(R/L)+D.x*P*4,I.y+F.y*(R/L)+D.y*P*4);_.lineTo(k.x,k.y)}C.render.lineWidth&&(_.lineWidth=C.render.lineWidth,_.strokeStyle=C.render.strokeStyle,_.stroke()),C.render.anchors&&(_.fillStyle=C.render.strokeStyle,_.beginPath(),_.arc(I.x,I.y,3,0,2*Math.PI),_.arc(k.x,k.y,3,0,2*Math.PI),_.closePath(),_.fill())}}},o.bodies=function(v,w,_){var S=_,C=v.engine,E=v.options,T=E.showInternalEdges||!E.wireframes,I,k,F,D;for(F=0;F<w.length;F++)if(I=w[F],!!I.render.visible){for(D=I.parts.length>1?1:0;D<I.parts.length;D++)if(k=I.parts[D],!!k.render.visible){if(E.showSleeping&&I.isSleeping?S.globalAlpha=.5*k.render.opacity:k.render.opacity!==1&&(S.globalAlpha=k.render.opacity),k.render.sprite&&k.render.sprite.texture&&!E.wireframes){var L=k.render.sprite,P=b(v,L.texture);S.translate(k.position.x,k.position.y),S.rotate(k.angle),S.drawImage(P,P.width*-L.xOffset*L.xScale,P.height*-L.yOffset*L.yScale,P.width*L.xScale,P.height*L.yScale),S.rotate(-k.angle),S.translate(-k.position.x,-k.position.y)}else{if(k.circleRadius)S.beginPath(),S.arc(k.position.x,k.position.y,k.circleRadius,0,2*Math.PI);else{S.beginPath(),S.moveTo(k.vertices[0].x,k.vertices[0].y);for(var R=1;R<k.vertices.length;R++)!k.vertices[R-1].isInternal||T?S.lineTo(k.vertices[R].x,k.vertices[R].y):S.moveTo(k.vertices[R].x,k.vertices[R].y),k.vertices[R].isInternal&&!T&&S.moveTo(k.vertices[(R+1)%k.vertices.length].x,k.vertices[(R+1)%k.vertices.length].y);S.lineTo(k.vertices[0].x,k.vertices[0].y),S.closePath()}E.wireframes?(S.lineWidth=1,S.strokeStyle="#bbb",S.stroke()):(S.fillStyle=k.render.fillStyle,k.render.lineWidth&&(S.lineWidth=k.render.lineWidth,S.strokeStyle=k.render.strokeStyle,S.stroke()),S.fill())}S.globalAlpha=1}}},o.bodyWireframes=function(v,w,_){var S=_,C=v.options.showInternalEdges,E,T,I,k,F;for(S.beginPath(),I=0;I<w.length;I++)if(E=w[I],!!E.render.visible)for(F=E.parts.length>1?1:0;F<E.parts.length;F++){for(T=E.parts[F],S.moveTo(T.vertices[0].x,T.vertices[0].y),k=1;k<T.vertices.length;k++)!T.vertices[k-1].isInternal||C?S.lineTo(T.vertices[k].x,T.vertices[k].y):S.moveTo(T.vertices[k].x,T.vertices[k].y),T.vertices[k].isInternal&&!C&&S.moveTo(T.vertices[(k+1)%T.vertices.length].x,T.vertices[(k+1)%T.vertices.length].y);S.lineTo(T.vertices[0].x,T.vertices[0].y)}S.lineWidth=1,S.strokeStyle="#bbb",S.stroke()},o.bodyConvexHulls=function(v,w,_){var S=_,C,E,T,I,k;for(S.beginPath(),T=0;T<w.length;T++)if(C=w[T],!(!C.render.visible||C.parts.length===1)){for(S.moveTo(C.vertices[0].x,C.vertices[0].y),I=1;I<C.vertices.length;I++)S.lineTo(C.vertices[I].x,C.vertices[I].y);S.lineTo(C.vertices[0].x,C.vertices[0].y)}S.lineWidth=1,S.strokeStyle="rgba(255,255,255,0.2)",S.stroke()},o.vertexNumbers=function(v,w,_){var S=_,C,E,T;for(C=0;C<w.length;C++){var I=w[C].parts;for(T=I.length>1?1:0;T<I.length;T++){var k=I[T];for(E=0;E<k.vertices.length;E++)S.fillStyle="rgba(255,255,255,0.2)",S.fillText(C+"_"+E,k.position.x+(k.vertices[E].x-k.position.x)*.8,k.position.y+(k.vertices[E].y-k.position.y)*.8)}}},o.mousePosition=function(v,w,_){var S=_;S.fillStyle="rgba(255,255,255,0.8)",S.fillText(w.position.x+"  "+w.position.y,w.position.x+5,w.position.y-5)},o.bodyBounds=function(v,w,_){var S=_,C=v.engine,E=v.options;S.beginPath();for(var T=0;T<w.length;T++){var I=w[T];if(I.render.visible)for(var k=w[T].parts,F=k.length>1?1:0;F<k.length;F++){var D=k[F];S.rect(D.bounds.min.x,D.bounds.min.y,D.bounds.max.x-D.bounds.min.x,D.bounds.max.y-D.bounds.min.y)}}E.wireframes?S.strokeStyle="rgba(255,255,255,0.08)":S.strokeStyle="rgba(0,0,0,0.1)",S.lineWidth=1,S.stroke()},o.bodyAxes=function(v,w,_){var S=_,C=v.engine,E=v.options,T,I,k,F;for(S.beginPath(),I=0;I<w.length;I++){var D=w[I],L=D.parts;if(D.render.visible)if(E.showAxes)for(k=L.length>1?1:0;k<L.length;k++)for(T=L[k],F=0;F<T.axes.length;F++){var P=T.axes[F];S.moveTo(T.position.x,T.position.y),S.lineTo(T.position.x+P.x*20,T.position.y+P.y*20)}else for(k=L.length>1?1:0;k<L.length;k++)for(T=L[k],F=0;F<T.axes.length;F++)S.moveTo(T.position.x,T.position.y),S.lineTo((T.vertices[0].x+T.vertices[T.vertices.length-1].x)/2,(T.vertices[0].y+T.vertices[T.vertices.length-1].y)/2)}E.wireframes?(S.strokeStyle="indianred",S.lineWidth=1):(S.strokeStyle="rgba(255, 255, 255, 0.4)",S.globalCompositeOperation="overlay",S.lineWidth=2),S.stroke(),S.globalCompositeOperation="source-over"},o.bodyPositions=function(v,w,_){var S=_,C=v.engine,E=v.options,T,I,k,F;for(S.beginPath(),k=0;k<w.length;k++)if(T=w[k],!!T.render.visible)for(F=0;F<T.parts.length;F++)I=T.parts[F],S.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),S.closePath();for(E.wireframes?S.fillStyle="indianred":S.fillStyle="rgba(0,0,0,0.5)",S.fill(),S.beginPath(),k=0;k<w.length;k++)T=w[k],T.render.visible&&(S.arc(T.positionPrev.x,T.positionPrev.y,2,0,2*Math.PI,!1),S.closePath());S.fillStyle="rgba(255,165,0,0.8)",S.fill()},o.bodyVelocity=function(v,w,_){var S=_;S.beginPath();for(var C=0;C<w.length;C++){var E=w[C];if(E.render.visible){var T=i.getVelocity(E);S.moveTo(E.position.x,E.position.y),S.lineTo(E.position.x+T.x,E.position.y+T.y)}}S.lineWidth=3,S.strokeStyle="cornflowerblue",S.stroke()},o.bodyIds=function(v,w,_){var S=_,C,E;for(C=0;C<w.length;C++)if(w[C].render.visible){var T=w[C].parts;for(E=T.length>1?1:0;E<T.length;E++){var I=T[E];S.font="12px Arial",S.fillStyle="rgba(255,255,255,0.5)",S.fillText(I.id,I.position.x+10,I.position.y-10)}}},o.collisions=function(v,w,_){var S=_,C=v.options,E,T,I,k,F,D,L;for(S.beginPath(),D=0;D<w.length;D++)if(E=w[D],!!E.isActive)for(T=E.collision,L=0;L<E.activeContacts.length;L++){var P=E.activeContacts[L],R=P.vertex;S.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(C.wireframes?S.fillStyle="rgba(255,255,255,0.7)":S.fillStyle="orange",S.fill(),S.beginPath(),D=0;D<w.length;D++)if(E=w[D],!!E.isActive&&(T=E.collision,E.activeContacts.length>0)){var V=E.activeContacts[0].vertex.x,G=E.activeContacts[0].vertex.y;E.activeContacts.length===2&&(V=(E.activeContacts[0].vertex.x+E.activeContacts[1].vertex.x)/2,G=(E.activeContacts[0].vertex.y+E.activeContacts[1].vertex.y)/2),T.bodyB===T.supports[0].body||T.bodyA.isStatic===!0?S.moveTo(V-T.normal.x*8,G-T.normal.y*8):S.moveTo(V+T.normal.x*8,G+T.normal.y*8),S.lineTo(V,G)}C.wireframes?S.strokeStyle="rgba(255,165,0,0.7)":S.strokeStyle="orange",S.lineWidth=1,S.stroke()},o.separations=function(v,w,_){var S=_,C=v.options,E,T,I,k,F,D,L;for(S.beginPath(),D=0;D<w.length;D++)if(E=w[D],!!E.isActive){T=E.collision,k=T.bodyA,F=T.bodyB;var P=1;!F.isStatic&&!k.isStatic&&(P=.5),F.isStatic&&(P=0),S.moveTo(F.position.x,F.position.y),S.lineTo(F.position.x-T.penetration.x*P,F.position.y-T.penetration.y*P),P=1,!F.isStatic&&!k.isStatic&&(P=.5),k.isStatic&&(P=0),S.moveTo(k.position.x,k.position.y),S.lineTo(k.position.x+T.penetration.x*P,k.position.y+T.penetration.y*P)}C.wireframes?S.strokeStyle="rgba(255,165,0,0.5)":S.strokeStyle="orange",S.stroke()},o.inspector=function(v,w){var _=v.engine,S=v.selected,C=v.render,E=C.options,T;if(E.hasBounds){var I=C.bounds.max.x-C.bounds.min.x,k=C.bounds.max.y-C.bounds.min.y,F=I/C.options.width,D=k/C.options.height;w.scale(1/F,1/D),w.translate(-C.bounds.min.x,-C.bounds.min.y)}for(var L=0;L<S.length;L++){var P=S[L].data;switch(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.9)",w.setLineDash([1,2]),P.type){case"body":T=P.bounds,w.beginPath(),w.rect(Math.floor(T.min.x-3),Math.floor(T.min.y-3),Math.floor(T.max.x-T.min.x+6),Math.floor(T.max.y-T.min.y+6)),w.closePath(),w.stroke();break;case"constraint":var R=P.pointA;P.bodyA&&(R=P.pointB),w.beginPath(),w.arc(R.x,R.y,10,0,2*Math.PI),w.closePath(),w.stroke();break}w.setLineDash([]),w.translate(-.5,-.5)}v.selectStart!==null&&(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.6)",w.fillStyle="rgba(255,165,0,0.1)",T=v.selectBounds,w.beginPath(),w.rect(Math.floor(T.min.x),Math.floor(T.min.y),Math.floor(T.max.x-T.min.x),Math.floor(T.max.y-T.min.y)),w.closePath(),w.stroke(),w.fill(),w.translate(-.5,-.5)),E.hasBounds&&w.setTransform(1,0,0,1,0,0)};var h=function(v,w){var _=v.engine,S=v.timing,C=S.historySize,E=_.timing.timestamp;S.delta=w-S.lastTime||o._goodDelta,S.lastTime=w,S.timestampElapsed=E-S.lastTimestamp||0,S.lastTimestamp=E,S.deltaHistory.unshift(S.delta),S.deltaHistory.length=Math.min(S.deltaHistory.length,C),S.engineDeltaHistory.unshift(_.timing.lastDelta),S.engineDeltaHistory.length=Math.min(S.engineDeltaHistory.length,C),S.timestampElapsedHistory.unshift(S.timestampElapsed),S.timestampElapsedHistory.length=Math.min(S.timestampElapsedHistory.length,C),S.engineElapsedHistory.unshift(_.timing.lastElapsed),S.engineElapsedHistory.length=Math.min(S.engineElapsedHistory.length,C),S.elapsedHistory.unshift(S.lastElapsed),S.elapsedHistory.length=Math.min(S.elapsedHistory.length,C)},m=function(v){for(var w=0,_=0;_<v.length;_+=1)w+=v[_];return w/v.length||0},g=function(v,w){var _=document.createElement("canvas");return _.width=v,_.height=w,_.oncontextmenu=function(){return!1},_.onselectstart=function(){return!1},_},y=function(v){var w=v.getContext("2d"),_=window.devicePixelRatio||1,S=w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1;return _/S},b=function(v,w){var _=v.textures[w];return _||(_=v.textures[w]=new Image,_.src=w,_)},x=function(v,w){var _=w;/(jpg|gif|png)$/.test(w)&&(_="url("+w+")"),v.canvas.style.background=_,v.canvas.style.backgroundSize="contain",v.currentBackground=w}})()},function(t,r,n){var o={};t.exports=o;var i=n(5),s=n(17),a=n(0);(function(){var l,u;if(typeof window<"u"&&(l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!l){var c;l=function(f){c=setTimeout(function(){f(a.now())},1e3/60)},u=function(){clearTimeout(c)}}o.create=function(f){var d={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},p=a.extend(d,f);return p.delta=p.delta||1e3/p.fps,p.deltaMin=p.deltaMin||1e3/p.fps,p.deltaMax=p.deltaMax||1e3/(p.fps*.5),p.fps=1e3/p.delta,p},o.run=function(f,d){return typeof f.positionIterations<"u"&&(d=f,f=o.create()),function p(h){f.frameRequestId=l(p),h&&f.enabled&&o.tick(f,d,h)}(),f},o.tick=function(f,d,p){var h=d.timing,m;f.isFixed?m=f.delta:(m=p-f.timePrev||f.delta,f.timePrev=p,f.deltaHistory.push(m),f.deltaHistory=f.deltaHistory.slice(-f.deltaSampleSize),m=Math.min.apply(null,f.deltaHistory),m=m<f.deltaMin?f.deltaMin:m,m=m>f.deltaMax?f.deltaMax:m,f.delta=m);var g={timestamp:h.timestamp};i.trigger(f,"beforeTick",g),f.frameCounter+=1,p-f.counterTimestamp>=1e3&&(f.fps=f.frameCounter*((p-f.counterTimestamp)/1e3),f.counterTimestamp=p,f.frameCounter=0),i.trigger(f,"tick",g),i.trigger(f,"beforeUpdate",g),s.update(d,m),i.trigger(f,"afterUpdate",g),i.trigger(f,"afterTick",g)},o.stop=function(f){u(f.frameRequestId)},o.start=function(f,d){o.run(f,d)}})()},function(t,r,n){var o={};t.exports=o;var i=n(8),s=n(0),a=s.deprecated;(function(){o.collides=function(l,u){return i.collides(l,u)},a(o,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(t,r,n){var o={};t.exports=o;var i=n(1),s=n(0);(function(){o.pathToVertices=function(a,l){typeof window<"u"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,c,f,d,p,h,m,g,y,b,x=[],v,w,_=0,S=0,C=0;l=l||15;var E=function(I,k,F){var D=F%2===1&&F>1;if(!y||I!=y.x||k!=y.y){y&&D?(v=y.x,w=y.y):(v=0,w=0);var L={x:v+I,y:w+k};(D||!y)&&(y=L),x.push(L),S=v+I,C=w+k}},T=function(I){var k=I.pathSegTypeAsLetter.toUpperCase();if(k!=="Z"){switch(k){case"M":case"L":case"T":case"C":case"S":case"Q":S=I.x,C=I.y;break;case"H":S=I.x;break;case"V":C=I.y;break}E(S,C,I.pathSegType)}};for(o._svgPathToAbsolute(a),f=a.getTotalLength(),h=[],u=0;u<a.pathSegList.numberOfItems;u+=1)h.push(a.pathSegList.getItem(u));for(m=h.concat();_<f;){if(b=a.getPathSegAtLength(_),p=h[b],p!=g){for(;m.length&&m[0]!=p;)T(m.shift());g=p}switch(p.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=a.getPointAtLength(_),E(d.x,d.y,0);break}_+=l}for(u=0,c=m.length;u<c;++u)T(m[u]);return x},o._svgPathToAbsolute=function(a){for(var l,u,c,f,d,p,h=a.pathSegList,m=0,g=0,y=h.numberOfItems,b=0;b<y;++b){var x=h.getItem(b),v=x.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in x&&(m=x.x),"y"in x&&(g=x.y);else switch("x1"in x&&(c=m+x.x1),"x2"in x&&(d=m+x.x2),"y1"in x&&(f=g+x.y1),"y2"in x&&(p=g+x.y2),"x"in x&&(m+=x.x),"y"in x&&(g+=x.y),v){case"m":h.replaceItem(a.createSVGPathSegMovetoAbs(m,g),b);break;case"l":h.replaceItem(a.createSVGPathSegLinetoAbs(m,g),b);break;case"h":h.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(m),b);break;case"v":h.replaceItem(a.createSVGPathSegLinetoVerticalAbs(g),b);break;case"c":h.replaceItem(a.createSVGPathSegCurvetoCubicAbs(m,g,c,f,d,p),b);break;case"s":h.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(m,g,d,p),b);break;case"q":h.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(m,g,c,f),b);break;case"t":h.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(m,g),b);break;case"a":h.replaceItem(a.createSVGPathSegArcAbs(m,g,x.r1,x.r2,x.angle,x.largeArcFlag,x.sweepFlag),b);break;case"z":case"Z":m=l,g=u;break}(v=="M"||v=="m")&&(l=m,u=g)}}})()},function(t,r,n){var o={};t.exports=o;var i=n(6),s=n(0);(function(){o.create=i.create,o.add=i.add,o.remove=i.remove,o.clear=i.clear,o.addComposite=i.addComposite,o.addBody=i.addBody,o.addConstraint=i.addConstraint})()}])})});var _ne=class{};var Lk=class t{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?typeof r=="string"?this.lazyInit=()=>{this.headers=new Map,r.split(`
`).forEach(n=>{let o=n.indexOf(":");if(o>0){let i=n.slice(0,o),s=i.toLowerCase(),a=n.slice(o+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&r instanceof Headers?(this.headers=new Map,r.forEach((n,o)=>{this.setHeaderEntries(o,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(r).forEach(([n,o])=>{this.setHeaderEntries(n,o)})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();let n=this.headers.get(r.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,n){return this.clone({name:r,value:n,op:"a"})}set(r,n){return this.clone({name:r,value:n,op:"s"})}delete(r,n){return this.clone({name:r,value:n,op:"d"})}maybeSetNormalizedName(r,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,r)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(n=>{this.headers.set(n,r.headers.get(n)),this.normalizedNames.set(n,r.normalizedNames.get(n))})}clone(r){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([r]),n}applyUpdate(r){let n=r.name.toLowerCase();switch(r.op){case"a":case"s":let o=r.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(r.name,n);let i=(r.op==="a"?this.headers.get(n):void 0)||[];i.push(...o),this.headers.set(n,i);break;case"d":let s=r.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(l=>s.indexOf(l)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(r,n){let o=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=r.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(r,i)}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>r(this.normalizedNames.get(n),this.headers.get(n)))}};var Sne=class{encodeKey(r){return Tke(r)}encodeValue(r){return Tke(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}};function DEt(t,r){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[a,l]=s==-1?[r.decodeKey(i),""]:[r.decodeKey(i.slice(0,s)),r.decodeValue(i.slice(s+1))],u=n.get(a)||[];u.push(l),n.set(a,u)}),n}var NEt=/%(\d[a-f0-9])/gi,MEt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tke(t){return encodeURIComponent(t).replace(NEt,(r,n)=>MEt[n]??r)}function Pz(t){return`${t}`}var E1=class t{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new Sne,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=DEt(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(n=>{let o=r.fromObject[n],i=Array.isArray(o)?o.map(Pz):[Pz(o)];this.map.set(n,i)})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();let n=this.map.get(r);return n?n[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,n){return this.clone({param:r,value:n,op:"a"})}appendAll(r){let n=[];return Object.keys(r).forEach(o=>{let i=r[o];Array.isArray(i)?i.forEach(s=>{n.push({param:o,value:s,op:"a"})}):n.push({param:o,value:i,op:"a"})}),this.clone(n)}set(r,n){return this.clone({param:r,value:n,op:"s"})}delete(r,n){return this.clone({param:r,value:n,op:"d"})}toString(){return this.init(),this.keys().map(r=>{let n=this.encoder.encodeKey(r);return this.map.get(r).map(o=>n+"="+this.encoder.encodeValue(o)).join("&")}).filter(r=>r!=="").join("&")}clone(r){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(r),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":let n=(r.op==="a"?this.map.get(r.param):void 0)||[];n.push(Pz(r.value)),this.map.set(r.param,n);break;case"d":if(r.value!==void 0){let o=this.map.get(r.param)||[],i=o.indexOf(Pz(r.value));i!==-1&&o.splice(i,1),o.length>0?this.map.set(r.param,o):this.map.delete(r.param)}else{this.map.delete(r.param);break}}}),this.cloneFrom=this.updates=null)}};var Cne=class{constructor(){this.map=new Map}set(r,n){return this.map.set(r,n),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}};function FEt(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ake(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function kke(t){return typeof Blob<"u"&&t instanceof Blob}function Ike(t){return typeof FormData<"u"&&t instanceof FormData}function OEt(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var OR=class t{constructor(r,n,o,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase();let s;if(FEt(this.method)||i?(this.body=o!==void 0?o:null,s=i):s=o,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Lk,this.context??=new Cne,!this.params)this.params=new E1,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let l=n.indexOf("?"),u=l===-1?"?":l<n.length-1?"&":"";this.urlWithParams=n+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ake(this.body)||kke(this.body)||Ike(this.body)||OEt(this.body)?this.body:this.body instanceof E1?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ike(this.body)?null:kke(this.body)?this.body.type||null:Ake(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof E1?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(r={}){let n=r.method||this.method,o=r.url||this.url,i=r.responseType||this.responseType,s=r.transferCache??this.transferCache,a=r.body!==void 0?r.body:this.body,l=r.withCredentials??this.withCredentials,u=r.reportProgress??this.reportProgress,c=r.headers||this.headers,f=r.params||this.params,d=r.context??this.context;return r.setHeaders!==void 0&&(c=Object.keys(r.setHeaders).reduce((p,h)=>p.set(h,r.setHeaders[h]),c)),r.setParams&&(f=Object.keys(r.setParams).reduce((p,h)=>p.set(h,r.setParams[h]),f)),new t(n,o,a,{params:f,headers:c,context:d,reportProgress:u,responseType:i,withCredentials:l,transferCache:s})}},Dke=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Dke||{}),Ene=class{constructor(r,n=200,o="OK"){this.headers=r.headers||new Lk,this.status=r.status!==void 0?r.status:n,this.statusText=r.statusText||o,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}};var Tne=class t extends Ene{constructor(r={}){super(r),this.type=Dke.Response,this.body=r.body!==void 0?r.body:null}clone(r={}){return new t({body:r.body!==void 0?r.body:this.body,headers:r.headers||this.headers,status:r.status!==void 0?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}};function wne(t,r){return{body:r,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Nke=(()=>{let r=class r{constructor(o){this.handler=o}request(o,i,s={}){let a;if(o instanceof OR)a=o;else{let c;s.headers instanceof Lk?c=s.headers:c=new Lk(s.headers);let f;s.params&&(s.params instanceof E1?f=s.params:f=new E1({fromObject:s.params})),a=new OR(o,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let l=kr(a).pipe(v1(c=>this.handler.handle(c)));if(o instanceof OR||s.observe==="events")return l;let u=l.pipe(Ds(c=>c instanceof Tne));switch(s.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return u.pipe(dn(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(dn(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(dn(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(dn(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(o,i={}){return this.request("DELETE",o,i)}get(o,i={}){return this.request("GET",o,i)}head(o,i={}){return this.request("HEAD",o,i)}jsonp(o,i){return this.request("JSONP",o,{params:new E1().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,i={}){return this.request("OPTIONS",o,i)}patch(o,i,s={}){return this.request("PATCH",o,wne(s,i))}post(o,i,s={}){return this.request("POST",o,wne(s,i))}put(o,i,s={}){return this.request("PUT",o,wne(s,i))}};r.\u0275fac=function(i){return new(i||r)(Et(_ne))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();var Ine=class extends gke{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dne=class t extends Ine{static makeCurrent(){mke(new t)}onAndCancel(r,n,o){return r.addEventListener(n,o),()=>{r.removeEventListener(n,o)}}dispatchEvent(r,n){r.dispatchEvent(n)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,n){return n=n||this.getDefaultDocument(),n.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,n){return n==="window"?window:n==="document"?r:n==="body"?r.body:null}getBaseHref(r){let n=LEt();return n==null?null:jEt(n)}resetBaseElement(){RR=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return vke(document.cookie,r)}},RR=null;function LEt(){return RR=RR||document.querySelector("base"),RR?RR.getAttribute("href"):null}function jEt(t){return new URL(t,document.baseURI).pathname}var BEt=(()=>{let r=class r{build(){return new XMLHttpRequest}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),Nne=new En(""),Rke=(()=>{let r=class r{constructor(o,i){this._zone=i,this._eventNameToPlugin=new Map,o.forEach(s=>{s.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,i,s){return this._findPluginFor(i).addEventListener(o,i,s)}getZone(){return this._zone}_findPluginFor(o){let i=this._eventNameToPlugin.get(o);if(i)return i;if(i=this._plugins.find(a=>a.supports(o)),!i)throw new ns(5101,!1);return this._eventNameToPlugin.set(o,i),i}};r.\u0275fac=function(i){return new(i||r)(Et(Nne),Et(Cn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),Lz=class{constructor(r){this._doc=r}},Ane="ng-app-id",Pke=(()=>{let r=class r{constructor(o,i,s,a={}){this.doc=o,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vne(a),this.resetHostNodes()}addStyles(o){for(let i of o)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(o){for(let i of o)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(i=>i.remove()),o.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let i of this.getAllStyles())this.addStyleToHost(o,i)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let i of this.hostNodes)this.addStyleToHost(i,o)}onStyleRemoved(o){let i=this.styleRef;i.get(o)?.elements?.forEach(s=>s.remove()),i.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${Ane}="${this.appId}"]`);if(o?.length){let i=new Map;return o.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(o,i){let s=this.styleRef;if(s.has(o)){let a=s.get(o);return a.usage+=i,a.usage}return s.set(o,{usage:i,elements:[]}),i}getStyleElement(o,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===o)return s.delete(i),a.removeAttribute(Ane),a;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(Ane,this.appId),o.appendChild(l),l}}addStyleToHost(o,i){let s=this.getStyleElement(o,i),a=this.styleRef,l=a.get(i)?.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(Iz),Et(IR,8),Et(sS))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),kne={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fne=/%COMP%/g,Lke="%COMP%",$Et=`_nghost-${Lke}`,zEt=`_ngcontent-${Lke}`,UEt=!0,VEt=new En("",{providedIn:"root",factory:()=>UEt});function GEt(t){return zEt.replace(Fne,t)}function WEt(t){return $Et.replace(Fne,t)}function jke(t,r){return r.map(n=>n.replace(Fne,t))}var jz=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f=null){this.eventManager=o,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=u,this.ngZone=c,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=vne(u),this.defaultRenderer=new PR(o,l,c,this.platformIsServer)}createRenderer(o,i){if(!o||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===TR.ShadowDom&&(i=Is(Gt({},i),{encapsulation:TR.Emulated}));let s=this.getOrCreateRenderer(o,i);return s instanceof Bz?s.applyToHost(o):s instanceof LR&&s.applyStyles(),s}getOrCreateRenderer(o,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let l=this.doc,u=this.ngZone,c=this.eventManager,f=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case TR.Emulated:a=new Bz(c,f,i,this.appId,d,l,u,p);break;case TR.ShadowDom:return new Mne(c,f,o,i,l,u,this.nonce,p);default:a=new LR(c,f,i,d,l,u,p);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};r.\u0275fac=function(i){return new(i||r)(Et(Rke),Et(Pke),Et(Iz),Et(VEt),Et(yn),Et(sS),Et(Cn),Et(IR))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),PR=class{constructor(r,n,o,i){this.eventManager=r,this.doc=n,this.ngZone=o,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(r,n){return n?this.doc.createElementNS(kne[n]||n,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,n){(Mke(r)?r.content:r).appendChild(n)}insertBefore(r,n,o){r&&(Mke(r)?r.content:r).insertBefore(n,o)}removeChild(r,n){r&&r.removeChild(n)}selectRootElement(r,n){let o=typeof r=="string"?this.doc.querySelector(r):r;if(!o)throw new ns(-5104,!1);return n||(o.textContent=""),o}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,n,o,i){if(i){n=i+":"+n;let s=kne[i];s?r.setAttributeNS(s,n,o):r.setAttribute(n,o)}else r.setAttribute(n,o)}removeAttribute(r,n,o){if(o){let i=kne[o];i?r.removeAttributeNS(i,n):r.removeAttribute(`${o}:${n}`)}else r.removeAttribute(n)}addClass(r,n){r.classList.add(n)}removeClass(r,n){r.classList.remove(n)}setStyle(r,n,o,i){i&(DR.DashCase|DR.Important)?r.style.setProperty(n,o,i&DR.Important?"important":""):r.style[n]=o}removeStyle(r,n,o){o&DR.DashCase?r.style.removeProperty(n):r.style[n]=""}setProperty(r,n,o){r!=null&&(r[n]=o)}setValue(r,n){r.nodeValue=n}listen(r,n,o){if(typeof r=="string"&&(r=xne().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${n}`);return this.eventManager.addEventListener(r,n,this.decoratePreventDefault(o))}decoratePreventDefault(r){return n=>{if(n==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(n)):r(n))===!1&&n.preventDefault()}}};function Mke(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Mne=class extends PR{constructor(r,n,o,i,s,a,l,u){super(r,s,a,u),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=jke(i.id,i.styles);for(let f of c){let d=document.createElement("style");l&&d.setAttribute("nonce",l),d.textContent=f,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,n){return super.appendChild(this.nodeOrShadowRoot(r),n)}insertBefore(r,n,o){return super.insertBefore(this.nodeOrShadowRoot(r),n,o)}removeChild(r,n){return super.removeChild(this.nodeOrShadowRoot(r),n)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},LR=class extends PR{constructor(r,n,o,i,s,a,l,u){super(r,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?jke(u,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bz=class extends LR{constructor(r,n,o,i,s,a,l,u){let c=i+"-"+o.id;super(r,n,o,s,a,l,u,c),this.contentAttr=GEt(c),this.hostAttr=WEt(c)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,n){let o=super.createElement(r,n);return super.setAttribute(o,this.contentAttr,""),o}},qEt=(()=>{let r=class r extends Lz{constructor(o){super(o)}supports(o){return!0}addEventListener(o,i,s){return o.addEventListener(i,s,!1),()=>this.removeEventListener(o,i,s)}removeEventListener(o,i,s){return o.removeEventListener(i,s)}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),Fke=["alt","control","meta","shift"],HEt={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YEt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},XEt=(()=>{let r=class r extends Lz{constructor(o){super(o)}supports(o){return r.parseEventName(o)!=null}addEventListener(o,i,s){let a=r.parseEventName(i),l=r.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xne().onAndCancel(o,a.domEventName,l))}static parseEventName(o){let i=o.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=r._normalizeKey(i.pop()),l="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),l="code."),Fke.forEach(f=>{let d=i.indexOf(f);d>-1&&(i.splice(d,1),l+=f+".")}),l+=a,i.length!=0||a.length===0)return null;let c={};return c.domEventName=s,c.fullKey=l,c}static matchEventFullKeyCode(o,i){let s=HEt[o.key]||o.key,a="";return i.indexOf("code.")>-1&&(s=o.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Fke.forEach(l=>{if(l!==s){let u=YEt[l];u(o)&&(a+=l+".")}}),a+=s,a===i)}static eventCallback(o,i,s){return a=>{r.matchEventFullKeyCode(a,o)&&s.runGuarded(()=>i(a))}}static _normalizeKey(o){return o==="esc"?"escape":o}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();function Bke(t,r){return dke(Gt({rootComponent:t},KEt(r)))}function KEt(t){return{appProviders:[...tTt,...t?.providers??[]],platformProviders:eTt}}function ZEt(){Dne.makeCurrent()}function QEt(){return new iS}function JEt(){return qAe(document),document}var eTt=[{provide:sS,useValue:_ke},{provide:HAe,useValue:ZEt,multi:!0},{provide:yn,useFactory:JEt,deps:[]}];var tTt=[{provide:WAe,useValue:"root"},{provide:iS,useFactory:QEt,deps:[]},{provide:Nne,useClass:qEt,multi:!0,deps:[yn,Cn,sS]},{provide:Nne,useClass:XEt,multi:!0,deps:[yn]},jz,Pke,Rke,{provide:Nz,useExisting:jz},{provide:Eke,useClass:BEt,deps:[]},[]];var $ke=(()=>{let r=class r{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var One=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:function(i){let s=null;return i?s=new(i||r):s=Et(rTt),s},providedIn:"root"});let t=r;return t})(),rTt=(()=>{let r=class r extends One{constructor(o){super(),this._doc=o}sanitize(o,i){if(i==null)return null;switch(o){case Zf.NONE:return i;case Zf.HTML:return Nk(i,"HTML")?Dk(i):eke(this._doc,String(i)).toString();case Zf.STYLE:return Nk(i,"Style")?Dk(i):i;case Zf.SCRIPT:if(Nk(i,"Script"))return Dk(i);throw new ns(5200,!1);case Zf.URL:return Nk(i,"URL")?Dk(i):JAe(String(i));case Zf.RESOURCE_URL:if(Nk(i,"ResourceURL"))return Dk(i);throw new ns(5201,!1);default:throw new ns(5202,!1)}}bypassSecurityTrustHtml(o){return YAe(o)}bypassSecurityTrustStyle(o){return XAe(o)}bypassSecurityTrustScript(o){return KAe(o)}bypassSecurityTrustUrl(o){return ZAe(o)}bypassSecurityTrustResourceUrl(o){return QAe(o)}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var vn="primary",JR=Symbol("RouteTitle"),Bne=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n[0]:n}return null}getAll(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vk(t){return new Bne(t)}function nTt(t,r,n){let o=n.path.split("/");if(o.length>t.length||n.pathMatch==="full"&&(r.hasChildren()||o.length<t.length))return null;let i={};for(let s=0;s<o.length;s++){let a=o[s],l=t[s];if(a[0]===":")i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:t.slice(0,o.length),posParams:i}}function oTt(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!wg(t[n],r[n]))return!1;return!0}function wg(t,r){let n=t?$ne(t):void 0,o=r?$ne(r):void 0;if(!n||!o||n.length!=o.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Qke(t[i],r[i]))return!1;return!0}function $ne(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Qke(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;let n=[...t].sort(),o=[...r].sort();return n.every((i,s)=>o[s]===i)}else return t===r}function Jke(t){return t.length>0?t[t.length-1]:null}function I1(t){return sne(t)?t:cke(t)?Wu(Promise.resolve(t)):kr(t)}var iTt={exact:tIe,subset:rIe},eIe={exact:sTt,subset:aTt,ignored:()=>!0};function Uke(t,r,n){return iTt[n.paths](t.root,r.root,n.matrixParams)&&eIe[n.queryParams](t.queryParams,r.queryParams)&&!(n.fragment==="exact"&&t.fragment!==r.fragment)}function sTt(t,r){return wg(t,r)}function tIe(t,r,n){if(!pS(t.segments,r.segments)||!Uz(t.segments,r.segments,n)||t.numberOfChildren!==r.numberOfChildren)return!1;for(let o in r.children)if(!t.children[o]||!tIe(t.children[o],r.children[o],n))return!1;return!0}function aTt(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(n=>Qke(t[n],r[n]))}function rIe(t,r,n){return nIe(t,r,r.segments,n)}function nIe(t,r,n,o){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!pS(i,n)||r.hasChildren()||!Uz(i,n,o))}else if(t.segments.length===n.length){if(!pS(t.segments,n)||!Uz(t.segments,n,o))return!1;for(let i in r.children)if(!t.children[i]||!rIe(t.children[i],r.children[i],o))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!pS(t.segments,i)||!Uz(t.segments,i,o)||!t.children[vn]?!1:nIe(t.children[vn],r,s,o)}}function Uz(t,r,n){return r.every((o,i)=>eIe[n](t[i].parameters,o.parameters))}var T1=class{constructor(r=new To([],{}),n={},o=null){this.root=r,this.queryParams=n,this.fragment=o}get queryParamMap(){return this._queryParamMap??=Vk(this.queryParams),this._queryParamMap}toString(){return cTt.serialize(this)}},To=class{constructor(r,n){this.segments=r,this.children=n,this.parent=null,Object.values(n).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vz(this)}},dS=class{constructor(r,n){this.path=r,this.parameters=n}get parameterMap(){return this._parameterMap??=Vk(this.parameters),this._parameterMap}toString(){return iIe(this)}};function lTt(t,r){return pS(t,r)&&t.every((n,o)=>wg(n.parameters,r[o].parameters))}function pS(t,r){return t.length!==r.length?!1:t.every((n,o)=>n.path===r[o].path)}function uTt(t,r){let n=[];return Object.entries(t.children).forEach(([o,i])=>{o===vn&&(n=n.concat(r(i,o)))}),Object.entries(t.children).forEach(([o,i])=>{o!==vn&&(n=n.concat(r(i,o)))}),n}var e3=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>new Gk,providedIn:"root"});let t=r;return t})(),Gk=class{parse(r){let n=new Une(r);return new T1(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(r){let n=`/${jR(r.root,!0)}`,o=pTt(r.queryParams),i=typeof r.fragment=="string"?`#${fTt(r.fragment)}`:"";return`${n}${o}${i}`}},cTt=new Gk;function Vz(t){return t.segments.map(r=>iIe(r)).join("/")}function jR(t,r){if(!t.hasChildren())return Vz(t);if(r){let n=t.children[vn]?jR(t.children[vn],!1):"",o=[];return Object.entries(t.children).forEach(([i,s])=>{i!==vn&&o.push(`${i}:${jR(s,!1)}`)}),o.length>0?`${n}(${o.join("//")})`:n}else{let n=uTt(t,(o,i)=>i===vn?[jR(t.children[vn],!1)]:[`${i}:${jR(o,!1)}`]);return Object.keys(t.children).length===1&&t.children[vn]!=null?`${Vz(t)}/${n[0]}`:`${Vz(t)}/(${n.join("//")})`}}function oIe(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $z(t){return oIe(t).replace(/%3B/gi,";")}function fTt(t){return encodeURI(t)}function zne(t){return oIe(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gz(t){return decodeURIComponent(t)}function Vke(t){return Gz(t.replace(/\+/g,"%20"))}function iIe(t){return`${zne(t.path)}${dTt(t.parameters)}`}function dTt(t){return Object.entries(t).map(([r,n])=>`;${zne(r)}=${zne(n)}`).join("")}function pTt(t){let r=Object.entries(t).map(([n,o])=>Array.isArray(o)?o.map(i=>`${$z(n)}=${$z(i)}`).join("&"):`${$z(n)}=${$z(o)}`).filter(n=>n);return r.length?`?${r.join("&")}`:""}var hTt=/^[^\/()?;#]+/;function Rne(t){let r=t.match(hTt);return r?r[0]:""}var mTt=/^[^\/()?;=#]+/;function gTt(t){let r=t.match(mTt);return r?r[0]:""}var yTt=/^[^=?&#]+/;function bTt(t){let r=t.match(yTt);return r?r[0]:""}var xTt=/^[^&#]+/;function vTt(t){let r=t.match(xTt);return r?r[0]:""}var Une=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new To([],{}):new To([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(r.length>0||Object.keys(n).length>0)&&(o[vn]=new To(r,n)),o}parseSegment(){let r=Rne(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new ns(4009,!1);return this.capture(r),new dS(Gz(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let n=gTt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let i=Rne(this.remaining);i&&(o=i,this.capture(o))}r[Gz(n)]=Gz(o)}parseQueryParam(r){let n=bTt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let a=vTt(this.remaining);a&&(o=a,this.capture(o))}let i=Vke(n),s=Vke(o);if(r.hasOwnProperty(i)){let a=r[i];Array.isArray(a)||(a=[a],r[i]=a),a.push(s)}else r[i]=s}parseParens(r){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Rne(this.remaining),i=this.remaining[o.length];if(i!=="/"&&i!==")"&&i!==";")throw new ns(4010,!1);let s;o.indexOf(":")>-1?(s=o.slice(0,o.indexOf(":")),this.capture(s),this.capture(":")):r&&(s=vn);let a=this.parseChildren();n[s]=Object.keys(a).length===1?a[vn]:new To([],a),this.consumeOptional("//")}return n}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new ns(4011,!1)}};function sIe(t){return t.segments.length>0?new To([],{[vn]:t}):t}function aIe(t){let r={};for(let[o,i]of Object.entries(t.children)){let s=aIe(i);if(o===vn&&s.segments.length===0&&s.hasChildren())for(let[a,l]of Object.entries(s.children))r[a]=l;else(s.segments.length>0||s.hasChildren())&&(r[o]=s)}let n=new To(t.segments,r);return wTt(n)}function wTt(t){if(t.numberOfChildren===1&&t.children[vn]){let r=t.children[vn];return new To(t.segments.concat(r.segments),r.children)}return t}function GR(t){return t instanceof T1}function _Tt(t,r,n=null,o=null){let i=lIe(t);return uIe(i,r,n,o)}function lIe(t){let r;function n(s){let a={};for(let u of s.children){let c=n(u);a[u.outlet]=c}let l=new To(s.url,a);return s===t&&(r=l),l}let o=n(t.root),i=sIe(o);return r??i}function uIe(t,r,n,o){let i=t;for(;i.parent;)i=i.parent;if(r.length===0)return Pne(i,i,i,n,o);let s=STt(r);if(s.toRoot())return Pne(i,i,new To([],{}),n,o);let a=CTt(s,i,t),l=a.processChildren?zR(a.segmentGroup,a.index,s.commands):fIe(a.segmentGroup,a.index,s.commands);return Pne(i,a.segmentGroup,l,n,o)}function Wz(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function WR(t){return typeof t=="object"&&t!=null&&t.outlets}function Pne(t,r,n,o,i){let s={};o&&Object.entries(o).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let a;t===r?a=n:a=cIe(t,r,n);let l=sIe(aIe(a));return new T1(l,s,i)}function cIe(t,r,n){let o={};return Object.entries(t.children).forEach(([i,s])=>{s===r?o[i]=n:o[i]=cIe(s,r,n)}),new To(t.segments,o)}var qz=class{constructor(r,n,o){if(this.isAbsolute=r,this.numberOfDoubleDots=n,this.commands=o,r&&o.length>0&&Wz(o[0]))throw new ns(4003,!1);let i=o.find(WR);if(i&&i!==Jke(o))throw new ns(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function STt(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new qz(!0,0,t);let r=0,n=!1,o=t.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([u,c])=>{l[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?n=!0:l===".."?r++:l!=""&&i.push(l))}),i):[...i,s]},[]);return new qz(n,r,o)}var $k=class{constructor(r,n,o){this.segmentGroup=r,this.processChildren=n,this.index=o}};function CTt(t,r,n){if(t.isAbsolute)return new $k(r,!0,0);if(!n)return new $k(r,!1,NaN);if(n.parent===null)return new $k(n,!0,0);let o=Wz(t.commands[0])?0:1,i=n.segments.length-1+o;return ETt(n,i,t.numberOfDoubleDots)}function ETt(t,r,n){let o=t,i=r,s=n;for(;s>i;){if(s-=i,o=o.parent,!o)throw new ns(4005,!1);i=o.segments.length}return new $k(o,!1,i-s)}function TTt(t){return WR(t[0])?t[0].outlets:{[vn]:t}}function fIe(t,r,n){if(t??=new To([],{}),t.segments.length===0&&t.hasChildren())return zR(t,r,n);let o=ATt(t,r,n),i=n.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){let s=new To(t.segments.slice(0,o.pathIndex),{});return s.children[vn]=new To(t.segments.slice(o.pathIndex),t.children),zR(s,0,i)}else return o.match&&i.length===0?new To(t.segments,{}):o.match&&!t.hasChildren()?Vne(t,r,n):o.match?zR(t,0,i):Vne(t,r,n)}function zR(t,r,n){if(n.length===0)return new To(t.segments,{});{let o=TTt(n),i={};if(Object.keys(o).some(s=>s!==vn)&&t.children[vn]&&t.numberOfChildren===1&&t.children[vn].segments.length===0){let s=zR(t.children[vn],r,n);return new To(t.segments,s.children)}return Object.entries(o).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=fIe(t.children[s],r,a))}),Object.entries(t.children).forEach(([s,a])=>{o[s]===void 0&&(i[s]=a)}),new To(t.segments,i)}}function ATt(t,r,n){let o=0,i=r,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(o>=n.length)return s;let a=t.segments[i],l=n[o];if(WR(l))break;let u=`${l}`,c=o<n.length-1?n[o+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!Wke(u,c,a))return s;o+=2}else{if(!Wke(u,{},a))return s;o++}i++}return{match:!0,pathIndex:i,commandIndex:o}}function Vne(t,r,n){let o=t.segments.slice(0,r),i=0;for(;i<n.length;){let s=n[i];if(WR(s)){let u=kTt(s.outlets);return new To(o,u)}if(i===0&&Wz(n[0])){let u=t.segments[r];o.push(new dS(u.path,Gke(n[0]))),i++;continue}let a=WR(s)?s.outlets[vn]:`${s}`,l=i<n.length-1?n[i+1]:null;a&&l&&Wz(l)?(o.push(new dS(a,Gke(l))),i+=2):(o.push(new dS(a,{})),i++)}return new To(o,{})}function kTt(t){let r={};return Object.entries(t).forEach(([n,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[n]=Vne(new To([],{}),0,o))}),r}function Gke(t){let r={};return Object.entries(t).forEach(([n,o])=>r[n]=`${o}`),r}function Wke(t,r,n){return t==n.path&&wg(r,n.parameters)}var UR="imperative",Va=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Va||{}),rp=class{constructor(r,n){this.id=r,this.url=n}},Wk=class extends rp{constructor(r,n,o="imperative",i=null){super(r,n),this.type=Va.NavigationStart,this.navigationTrigger=o,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_h=class extends rp{constructor(r,n,o){super(r,n),this.urlAfterRedirects=o,this.type=Va.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},sd=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(sd||{}),Hz=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Hz||{}),_b=class extends rp{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=Va.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},A1=class extends rp{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=Va.NavigationSkipped}},qR=class extends rp{constructor(r,n,o,i){super(r,n),this.error=o,this.target=i,this.type=Va.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yz=class extends rp{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Va.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gne=class extends rp{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Va.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wne=class extends rp{constructor(r,n,o,i,s){super(r,n),this.urlAfterRedirects=o,this.state=i,this.shouldActivate=s,this.type=Va.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qne=class extends rp{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Va.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hne=class extends rp{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Va.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yne=class{constructor(r){this.route=r,this.type=Va.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xne=class{constructor(r){this.route=r,this.type=Va.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kne=class{constructor(r){this.snapshot=r,this.type=Va.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zne=class{constructor(r){this.snapshot=r,this.type=Va.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qne=class{constructor(r){this.snapshot=r,this.type=Va.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jne=class{constructor(r){this.snapshot=r,this.type=Va.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xz=class{constructor(r,n,o){this.routerEvent=r,this.position=n,this.anchor=o,this.type=Va.Scroll}toString(){let r=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${r}')`}},HR=class{},qk=class{constructor(r,n){this.url=r,this.navigationBehaviorOptions=n}};var eoe=class{constructor(r){this.injector=r,this.outlet=null,this.route=null,this.children=new t3(this.injector),this.attachRef=null}},t3=(()=>{let r=class r{constructor(o){this.parentInjector=o,this.contexts=new Map}onChildOutletCreated(o,i){let s=this.getOrCreateContext(o);s.outlet=i,this.contexts.set(o,s)}onChildOutletDestroyed(o){let i=this.getContext(o);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let i=this.getContext(o);return i||(i=new eoe(this.parentInjector),this.contexts.set(o,i)),i}getContext(o){return this.contexts.get(o)||null}};r.\u0275fac=function(i){return new(i||r)(Et(vb))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Kz=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let n=this.pathFromRoot(r);return n.length>1?n[n.length-2]:null}children(r){let n=toe(r,this._root);return n?n.children.map(o=>o.value):[]}firstChild(r){let n=toe(r,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(r){let n=roe(r,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return roe(r,this._root).map(n=>n.value)}};function toe(t,r){if(t===r.value)return r;for(let n of r.children){let o=toe(t,n);if(o)return o}return null}function roe(t,r){if(t===r.value)return[r];for(let n of r.children){let o=roe(t,n);if(o.length)return o.unshift(r),o}return[]}var id=class{constructor(r,n){this.value=r,this.children=n}toString(){return`TreeNode(${this.value})`}};function Bk(t){let r={};return t&&t.children.forEach(n=>r[n.value.outlet]=n),r}var Zz=class extends Kz{constructor(r,n){super(r),this.snapshot=n,foe(this,r)}toString(){return this.snapshot.toString()}};function dIe(t){let r=ITt(t),n=new Hs([new dS("",{})]),o=new Hs({}),i=new Hs({}),s=new Hs({}),a=new Hs(""),l=new k1(n,o,s,a,i,vn,t,r.root);return l.snapshot=r.root,new Zz(new id(l,[]),r)}function ITt(t){let r={},n={},o={},i="",s=new zk([],r,o,i,n,vn,t,null,{});return new Jz("",new id(s,[]))}var k1=class{constructor(r,n,o,i,s,a,l,u){this.urlSubject=r,this.paramsSubject=n,this.queryParamsSubject=o,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(dn(c=>c[JR]))??kr(void 0),this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(dn(r=>Vk(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(dn(r=>Vk(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qz(t,r,n="emptyOnly"){let o,{routeConfig:i}=t;return r!==null&&(n==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?o={params:Gt(Gt({},r.params),t.params),data:Gt(Gt({},r.data),t.data),resolve:Gt(Gt(Gt(Gt({},t.data),r.data),i?.data),t._resolvedData)}:o={params:Gt({},t.params),data:Gt({},t.data),resolve:Gt(Gt({},t.data),t._resolvedData??{})},i&&hIe(i)&&(o.resolve[JR]=i.title),o}var zk=class{get title(){return this.data?.[JR]}constructor(r,n,o,i,s,a,l,u,c){this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vk(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vk(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(o=>o.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${n}')`}},Jz=class extends Kz{constructor(r,n){super(n),this.url=r,foe(this,n)}toString(){return pIe(this._root)}};function foe(t,r){r.value._routerState=t,r.children.forEach(n=>foe(t,n))}function pIe(t){let r=t.children.length>0?` { ${t.children.map(pIe).join(", ")} } `:"";return`${t.value}${r}`}function Lne(t){if(t.snapshot){let r=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wg(r.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),r.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wg(r.params,n.params)||t.paramsSubject.next(n.params),oTt(r.url,n.url)||t.urlSubject.next(n.url),wg(r.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function noe(t,r){let n=wg(t.params,r.params)&&lTt(t.url,r.url),o=!t.parent!=!r.parent;return n&&!o&&(!t.parent||noe(t.parent,r.parent))}function hIe(t){return typeof t.title=="string"||t.title===null}var doe=(()=>{let r=class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=vn,this.activateEvents=new Ys,this.deactivateEvents=new Ys,this.attachEvents=new Ys,this.detachEvents=new Ys,this.parentContexts=Zt(t3),this.location=Zt(Fk),this.changeDetector=Zt(nd),this.inputBinder=Zt(i8,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:i,previousValue:s}=o.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ns(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ns(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ns(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,i){this.activated=o,this._activatedRoute=i,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,i){if(this.isActivated)throw new ns(4013,!1);this._activatedRoute=o;let s=this.location,l=o.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new ooe(o,u,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=Ba({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[S1]});let t=r;return t})(),ooe=class t{__ngOutletInjector(r){return new t(this.route,this.childContexts,r)}constructor(r,n,o){this.route=r,this.childContexts=n,this.parent=o}get(r,n){return r===k1?this.route:r===t3?this.childContexts:this.parent.get(r,n)}},i8=new En(""),qke=(()=>{let r=class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){let{activatedRoute:i}=o,s=kk([i.queryParams,i.params,i.data]).pipe(Kf(([a,l,u],c)=>(u=Gt(Gt(Gt({},a),l),u),c===0?kr(u):Promise.resolve(u)))).subscribe(a=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(o);return}let l=hke(i.component);if(!l){this.unsubscribeFromRouteData(o);return}for(let{templateName:u}of l.inputs)o.activatedComponentRef.setInput(u,a[u])});this.outletDataSubscriptions.set(o,s)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();function DTt(t,r,n){let o=YR(t,r._root,n?n._root:void 0);return new Zz(o,r)}function YR(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){let o=n.value;o._futureSnapshot=r.value;let i=NTt(t,r,n);return new id(o,i)}else{if(t.shouldAttach(r.value)){let s=t.retrieve(r.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=r.value,a.children=r.children.map(l=>YR(t,l)),a}}let o=MTt(r.value),i=r.children.map(s=>YR(t,s));return new id(o,i)}}function NTt(t,r,n){return r.children.map(o=>{for(let i of n.children)if(t.shouldReuseRoute(o.value,i.value.snapshot))return YR(t,o,i);return YR(t,o)})}function MTt(t){return new k1(new Hs(t.url),new Hs(t.params),new Hs(t.queryParams),new Hs(t.fragment),new Hs(t.data),t.outlet,t.component,t)}var XR=class{constructor(r,n){this.redirectTo=r,this.navigationBehaviorOptions=n}},mIe="ngNavigationCancelingError";function e8(t,r){let{redirectTo:n,navigationBehaviorOptions:o}=GR(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=gIe(!1,sd.Redirect);return i.url=n,i.navigationBehaviorOptions=o,i}function gIe(t,r){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[mIe]=!0,n.cancellationCode=r,n}function FTt(t){return yIe(t)&&GR(t.url)}function yIe(t){return!!t&&t[mIe]}var OTt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=os({type:r,selectors:[["ng-component"]],standalone:!0,features:[is],decls:1,vars:0,template:function(i,s){i&1&&$a(0,"router-outlet")},dependencies:[doe],encapsulation:2});let t=r;return t})();function RTt(t,r){return t.providers&&!t._injector&&(t._injector=hne(t.providers,r,`Route: ${t.path}`)),t._injector??r}function poe(t){let r=t.children&&t.children.map(poe),n=r?Is(Gt({},t),{children:r}):Gt({},t);return!n.component&&!n.loadComponent&&(r||n.loadChildren)&&n.outlet&&n.outlet!==vn&&(n.component=OTt),n}function wh(t){return t.outlet||vn}function PTt(t,r){let n=t.filter(o=>wh(o)===r);return n.push(...t.filter(o=>wh(o)!==r)),n}function r3(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let r=t.parent;r;r=r.parent){let n=r.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var LTt=(t,r,n,o)=>dn(i=>(new ioe(r,i.targetRouterState,i.currentRouterState,n,o).activate(t),i)),ioe=class{constructor(r,n,o,i,s){this.routeReuseStrategy=r,this.futureState=n,this.currState=o,this.forwardEvent=i,this.inputBindingEnabled=s}activate(r){let n=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,o,r),Lne(this.futureState.root),this.activateChildRoutes(n,o,r)}deactivateChildRoutes(r,n,o){let i=Bk(n);r.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],o),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,o)})}deactivateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(i===s)if(i.component){let a=o.getContext(i.outlet);a&&this.deactivateChildRoutes(r,n,a.children)}else this.deactivateChildRoutes(r,n,o);else s&&this.deactivateRouteAndItsChildren(n,o)}deactivateRouteAndItsChildren(r,n){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,n):this.deactivateRouteAndOutlet(r,n)}detachAndStoreRouteSubtree(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=Bk(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(o&&o.outlet){let a=o.outlet.detach(),l=o.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:a,route:r,contexts:l})}}deactivateRouteAndOutlet(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=Bk(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(r,n,o){let i=Bk(n);r.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],o),this.forwardEvent(new Jne(s.value.snapshot))}),r.children.length&&this.forwardEvent(new Zne(r.value.snapshot))}activateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(Lne(i),i===s)if(i.component){let a=o.getOrCreateContext(i.outlet);this.activateChildRoutes(r,n,a.children)}else this.activateChildRoutes(r,n,o);else if(i.component){let a=o.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Lne(l.route.value),this.activateChildRoutes(r,null,a.children)}else{let l=r3(i.snapshot);a.attachRef=null,a.route=i,a.injector=l??a.injector,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(r,null,a.children)}}else this.activateChildRoutes(r,null,o)}},t8=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},Uk=class{constructor(r,n){this.component=r,this.route=n}};function jTt(t,r,n){let o=t._root,i=r?r._root:null;return BR(o,i,n,[o.value])}function BTt(t){let r=t.routeConfig?t.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:t,guards:r}}function Yk(t,r){let n=Symbol(),o=r.get(t,n);return o===n?typeof t=="function"&&!GAe(t)?t:r.get(t):o}function BR(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Bk(r);return t.children.forEach(a=>{$Tt(a,s[a.value.outlet],n,o.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,l])=>VR(l,n.getContext(a),i)),i}function $Tt(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,a=r?r.value:null,l=n?n.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=zTt(a,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new t8(o)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?BR(t,r,l?l.children:null,o,i):BR(t,r,n,o,i),u&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Uk(l.outlet.component,a))}else a&&VR(r,l,i),i.canActivateChecks.push(new t8(o)),s.component?BR(t,null,l?l.children:null,o,i):BR(t,null,n,o,i);return i}function zTt(t,r,n){if(typeof n=="function")return n(t,r);switch(n){case"pathParamsChange":return!pS(t.url,r.url);case"pathParamsOrQueryParamsChange":return!pS(t.url,r.url)||!wg(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!noe(t,r)||!wg(t.queryParams,r.queryParams);case"paramsChange":default:return!noe(t,r)}}function VR(t,r,n){let o=Bk(t),i=t.value;Object.entries(o).forEach(([s,a])=>{i.component?r?VR(a,r.children.getContext(s),n):VR(a,null,n):VR(a,r,n)}),i.component?r&&r.outlet&&r.outlet.isActivated?n.canDeactivateChecks.push(new Uk(r.outlet.component,i)):n.canDeactivateChecks.push(new Uk(null,i)):n.canDeactivateChecks.push(new Uk(null,i))}function n3(t){return typeof t=="function"}function UTt(t){return typeof t=="boolean"}function VTt(t){return t&&n3(t.canLoad)}function GTt(t){return t&&n3(t.canActivate)}function WTt(t){return t&&n3(t.canActivateChild)}function qTt(t){return t&&n3(t.canDeactivate)}function HTt(t){return t&&n3(t.canMatch)}function bIe(t){return t instanceof jAe||t?.name==="EmptyError"}var zz=Symbol("INITIAL_VALUE");function Hk(){return Kf(t=>kk(t.map(r=>r.pipe(Lc(1),_1(zz)))).pipe(dn(r=>{for(let n of r)if(n!==!0){if(n===zz)return zz;if(n===!1||YTt(n))return n}return!0}),Ds(r=>r!==zz),Lc(1)))}function YTt(t){return GR(t)||t instanceof XR}function XTt(t,r){return Xf(n=>{let{targetSnapshot:o,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return a.length===0&&s.length===0?kr(Is(Gt({},n),{guardsResult:!0})):KTt(a,o,i,t).pipe(Xf(l=>l&&UTt(l)?ZTt(o,s,t,r):kr(l)),dn(l=>Is(Gt({},n),{guardsResult:l})))})}function KTt(t,r,n,o){return Wu(t).pipe(Xf(i=>rAt(i.component,i.route,n,r,o)),w1(i=>i!==!0,!0))}function ZTt(t,r,n,o){return Wu(r).pipe(v1(i=>Cz(JTt(i.route.parent,o),QTt(i.route,o),tAt(t,i.path,n),eAt(t,i.route,n))),w1(i=>i!==!0,!0))}function QTt(t,r){return t!==null&&r&&r(new Qne(t)),kr(!0)}function JTt(t,r){return t!==null&&r&&r(new Kne(t)),kr(!0)}function eAt(t,r,n){let o=r.routeConfig?r.routeConfig.canActivate:null;if(!o||o.length===0)return kr(!0);let i=o.map(s=>ane(()=>{let a=r3(r)??n,l=Yk(s,a),u=GTt(l)?l.canActivate(r,t):xg(a,()=>l(r,t));return I1(u).pipe(w1())}));return kr(i).pipe(Hk())}function tAt(t,r,n){let o=r[r.length-1],s=r.slice(0,r.length-1).reverse().map(a=>BTt(a)).filter(a=>a!==null).map(a=>ane(()=>{let l=a.guards.map(u=>{let c=r3(a.node)??n,f=Yk(u,c),d=WTt(f)?f.canActivateChild(o,t):xg(c,()=>f(o,t));return I1(d).pipe(w1())});return kr(l).pipe(Hk())}));return kr(s).pipe(Hk())}function rAt(t,r,n,o,i){let s=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!s||s.length===0)return kr(!0);let a=s.map(l=>{let u=r3(r)??i,c=Yk(l,u),f=qTt(c)?c.canDeactivate(t,r,n,o):xg(u,()=>c(t,r,n,o));return I1(f).pipe(w1())});return kr(a).pipe(Hk())}function nAt(t,r,n,o){let i=r.canLoad;if(i===void 0||i.length===0)return kr(!0);let s=i.map(a=>{let l=Yk(a,t),u=VTt(l)?l.canLoad(r,n):xg(t,()=>l(r,n));return I1(u)});return kr(s).pipe(Hk(),xIe(o))}function xIe(t){return LAe(gi(r=>{if(typeof r!="boolean")throw e8(t,r)}),dn(r=>r===!0))}function oAt(t,r,n,o){let i=r.canMatch;if(!i||i.length===0)return kr(!0);let s=i.map(a=>{let l=Yk(a,t),u=HTt(l)?l.canMatch(r,n):xg(t,()=>l(r,n));return I1(u)});return kr(s).pipe(Hk(),xIe(o))}var KR=class{constructor(r){this.segmentGroup=r||null}},ZR=class extends Error{constructor(r){super(),this.urlTree=r}};function jk(t){return nS(new KR(t))}function iAt(t){return nS(new ns(4e3,!1))}function sAt(t){return nS(gIe(!1,sd.GuardRejected))}var soe=class{constructor(r,n){this.urlSerializer=r,this.urlTree=n}lineralizeSegments(r,n){let o=[],i=n.root;for(;;){if(o=o.concat(i.segments),i.numberOfChildren===0)return kr(o);if(i.numberOfChildren>1||!i.children[vn])return iAt(`${r.redirectTo}`);i=i.children[vn]}}applyRedirectCommands(r,n,o,i,s){if(typeof n!="string"){let l=n,{queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,params:h,data:m,title:g}=i,y=xg(s,()=>l({params:h,data:m,queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,title:g}));if(y instanceof T1)throw new ZR(y);n=y}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),r,o);if(n[0]==="/")throw new ZR(a);return a}applyRedirectCreateUrlTree(r,n,o,i){let s=this.createSegmentGroup(r,n.root,o,i);return new T1(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(r,n){let o={};return Object.entries(r).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);o[i]=n[l]}else o[i]=s}),o}createSegmentGroup(r,n,o,i){let s=this.createSegments(r,n.segments,o,i),a={};return Object.entries(n.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(r,u,o,i)}),new To(s,a)}createSegments(r,n,o,i){return n.map(s=>s.path[0]===":"?this.findPosParam(r,s,i):this.findOrReturn(s,o))}findPosParam(r,n,o){let i=o[n.path.substring(1)];if(!i)throw new ns(4001,!1);return i}findOrReturn(r,n){let o=0;for(let i of n){if(i.path===r.path)return n.splice(o),i;o++}return r}},aoe={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aAt(t,r,n,o,i){let s=hoe(t,r,n);return s.matched?(o=RTt(r,o),oAt(o,r,n,i).pipe(dn(a=>a===!0?s:Gt({},aoe)))):kr(s)}function hoe(t,r,n){if(r.path==="**")return lAt(n);if(r.path==="")return r.pathMatch==="full"&&(t.hasChildren()||n.length>0)?Gt({},aoe):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(r.matcher||nTt)(n,t,r);if(!i)return Gt({},aoe);let s={};Object.entries(i.posParams??{}).forEach(([l,u])=>{s[l]=u.path});let a=i.consumed.length>0?Gt(Gt({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function lAt(t){return{matched:!0,parameters:t.length>0?Jke(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Hke(t,r,n,o){return n.length>0&&fAt(t,n,o)?{segmentGroup:new To(r,cAt(o,new To(n,t.children))),slicedSegments:[]}:n.length===0&&dAt(t,n,o)?{segmentGroup:new To(t.segments,uAt(t,n,o,t.children)),slicedSegments:n}:{segmentGroup:new To(t.segments,t.children),slicedSegments:n}}function uAt(t,r,n,o){let i={};for(let s of n)if(s8(t,r,s)&&!o[wh(s)]){let a=new To([],{});i[wh(s)]=a}return Gt(Gt({},o),i)}function cAt(t,r){let n={};n[vn]=r;for(let o of t)if(o.path===""&&wh(o)!==vn){let i=new To([],{});n[wh(o)]=i}return n}function fAt(t,r,n){return n.some(o=>s8(t,r,o)&&wh(o)!==vn)}function dAt(t,r,n){return n.some(o=>s8(t,r,o))}function s8(t,r,n){return(t.hasChildren()||r.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pAt(t,r,n,o){return wh(t)!==o&&(o===vn||!s8(r,n,t))?!1:hoe(r,t,n).matched}function hAt(t,r,n){return r.length===0&&!t.children[n]}var loe=class{};function mAt(t,r,n,o,i,s,a="emptyOnly"){return new uoe(t,r,n,o,i,a,s).recognize()}var gAt=31,uoe=class{constructor(r,n,o,i,s,a,l){this.injector=r,this.configLoader=n,this.rootComponentType=o,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new soe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new ns(4002,`'${r.segmentGroup}'`)}recognize(){let r=Hke(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(dn(({children:n,rootSnapshot:o})=>{let i=new id(o,n),s=new Jz("",i),a=_Tt(o,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(r){let n=new zk([],Object.freeze({}),Object.freeze(Gt({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),vn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,r,vn,n).pipe(dn(o=>({children:o,rootSnapshot:n})),x1(o=>{if(o instanceof ZR)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof KR?this.noMatchError(o):o}))}processSegmentGroup(r,n,o,i,s){return o.segments.length===0&&o.hasChildren()?this.processChildren(r,n,o,s):this.processSegment(r,n,o,o.segments,i,!0,s).pipe(dn(a=>a instanceof id?[a]:[]))}processChildren(r,n,o,i){let s=[];for(let a of Object.keys(o.children))a==="primary"?s.unshift(a):s.push(a);return Wu(s).pipe(v1(a=>{let l=o.children[a],u=PTt(n,a);return this.processSegmentGroup(r,u,l,a,i)}),zAe((a,l)=>(a.push(...l),a)),une(null),$Ae(),Xf(a=>{if(a===null)return jk(o);let l=vIe(a);return yAt(l),kr(l)}))}processSegment(r,n,o,i,s,a,l){return Wu(n).pipe(v1(u=>this.processSegmentAgainstRoute(u._injector??r,n,u,o,i,s,a,l).pipe(x1(c=>{if(c instanceof KR)return kr(null);throw c}))),w1(u=>!!u),x1(u=>{if(bIe(u))return hAt(o,i,s)?kr(new loe):jk(o);throw u}))}processSegmentAgainstRoute(r,n,o,i,s,a,l,u){return pAt(o,i,s,a)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(r,i,o,s,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(r,i,n,o,s,a,u):jk(i):jk(i)}expandSegmentAgainstRouteUsingRedirect(r,n,o,i,s,a,l){let{matched:u,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:p}=hoe(n,i,s);if(!u)return jk(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gAt&&(this.allowRedirects=!1));let h=new zk(s,c,Object.freeze(Gt({},this.urlTree.queryParams)),this.urlTree.fragment,Yke(i),wh(i),i.component??i._loadedComponent??null,i,Xke(i)),m=Qz(h,l,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let g=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,d,h,r);return this.applyRedirects.lineralizeSegments(i,g).pipe(Xf(y=>this.processSegment(r,o,n,y.concat(p),a,!1,l)))}matchSegmentAgainstRoute(r,n,o,i,s,a){let l=aAt(n,o,i,r,this.urlSerializer);return o.path==="**"&&(n.children={}),l.pipe(Kf(u=>u.matched?(r=o._injector??r,this.getChildConfig(r,o,i).pipe(Kf(({routes:c})=>{let f=o._loadedInjector??r,{parameters:d,consumedSegments:p,remainingSegments:h}=u,m=new zk(p,d,Object.freeze(Gt({},this.urlTree.queryParams)),this.urlTree.fragment,Yke(o),wh(o),o.component??o._loadedComponent??null,o,Xke(o)),g=Qz(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:y,slicedSegments:b}=Hke(n,p,h,c);if(b.length===0&&y.hasChildren())return this.processChildren(f,c,y,m).pipe(dn(v=>new id(m,v)));if(c.length===0&&b.length===0)return kr(new id(m,[]));let x=wh(o)===s;return this.processSegment(f,c,y,b,x?vn:s,!0,m).pipe(dn(v=>new id(m,v instanceof id?[v]:[])))}))):jk(n)))}getChildConfig(r,n,o){return n.children?kr({routes:n.children,injector:r}):n.loadChildren?n._loadedRoutes!==void 0?kr({routes:n._loadedRoutes,injector:n._loadedInjector}):nAt(r,n,o,this.urlSerializer).pipe(Xf(i=>i?this.configLoader.loadChildren(r,n).pipe(gi(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):sAt(n))):kr({routes:[],injector:r})}};function yAt(t){t.sort((r,n)=>r.value.outlet===vn?-1:n.value.outlet===vn?1:r.value.outlet.localeCompare(n.value.outlet))}function bAt(t){let r=t.value.routeConfig;return r&&r.path===""}function vIe(t){let r=[],n=new Set;for(let o of t){if(!bAt(o)){r.push(o);continue}let i=r.find(s=>o.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...o.children),n.add(i)):r.push(o)}for(let o of n){let i=vIe(o.children);r.push(new id(o.value,i))}return r.filter(o=>!n.has(o))}function Yke(t){return t.data||{}}function Xke(t){return t.resolve||{}}function xAt(t,r,n,o,i,s){return Xf(a=>mAt(t,r,n,o,a.extractedUrl,i,s).pipe(dn(({state:l,tree:u})=>Is(Gt({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function vAt(t,r){return Xf(n=>{let{targetSnapshot:o,guards:{canActivateChecks:i}}=n;if(!i.length)return kr(n);let s=new Set(i.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let c of wIe(u))a.add(c);let l=0;return Wu(a).pipe(v1(u=>s.has(u)?wAt(u,o,t,r):(u.data=Qz(u,u.parent,t).resolve,kr(void 0))),gi(()=>l++),cne(1),Xf(u=>l===a.size?kr(n):b1))})}function wIe(t){let r=t.children.map(n=>wIe(n)).flat();return[t,...r]}function wAt(t,r,n,o){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!hIe(i)&&(s[JR]=i.title),_At(s,t,r,o).pipe(dn(a=>(t._resolvedData=a,t.data=Qz(t,t.parent,n).resolve,null)))}function _At(t,r,n,o){let i=$ne(t);if(i.length===0)return kr({});let s={};return Wu(i).pipe(Xf(a=>SAt(t[a],r,n,o).pipe(w1(),gi(l=>{if(l instanceof XR)throw e8(new Gk,l);s[a]=l}))),cne(1),CR(s),x1(a=>bIe(a)?b1:nS(a)))}function SAt(t,r,n,o){let i=r3(r)??o,s=Yk(t,i),a=s.resolve?s.resolve(r,n):xg(i,()=>s(r,n));return I1(a)}function jne(t){return Kf(r=>{let n=t(r);return n?Wu(n).pipe(dn(()=>r)):kr(r)})}var _Ie=(()=>{let r=class r{buildTitle(o){let i,s=o.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===vn);return i}getResolvedTitleForRoute(o){return o.data[JR]}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(CAt),providedIn:"root"});let t=r;return t})(),CAt=(()=>{let r=class r extends _Ie{constructor(o){super(),this.title=o}updateTitle(o){let i=this.buildTitle(o);i!==void 0&&this.title.setTitle(i)}};r.\u0275fac=function(i){return new(i||r)(Et($ke))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),o3=new En("",{providedIn:"root",factory:()=>({})}),QR=new En(""),moe=(()=>{let r=class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Zt(Oz)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return kr(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let i=I1(o.loadComponent()).pipe(dn(SIe),gi(a=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=a}),oS(()=>{this.componentLoaders.delete(o)})),s=new ine(i,()=>new Xn).pipe(one());return this.componentLoaders.set(o,s),s}loadChildren(o,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return kr({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=EAt(i,this.compiler,o,this.onLoadEndListener).pipe(oS(()=>{this.childrenLoaders.delete(i)})),l=new ine(a,()=>new Xn).pipe(one());return this.childrenLoaders.set(i,l),l}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function EAt(t,r,n,o){return I1(t.loadChildren()).pipe(dn(SIe),Xf(i=>i instanceof ske||Array.isArray(i)?kr(i):Wu(r.compileModuleAsync(i))),dn(i=>{o&&o(t);let s,a,l=!1;return Array.isArray(i)?(a=i,l=!0):(s=i.create(n).injector,a=s.get(QR,[],{optional:!0,self:!0}).flat()),{routes:a.map(poe),injector:s}}))}function TAt(t){return t&&typeof t=="object"&&"default"in t}function SIe(t){return TAt(t)?t.default:t}var goe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(AAt),providedIn:"root"});let t=r;return t})(),AAt=(()=>{let r=class r{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,i){return o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),CIe=new En(""),EIe=new En("");function kAt(t,r,n){let o=t.get(EIe),i=t.get(yn);return t.get(Cn).runOutsideAngular(()=>{if(!i.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,a=new Promise(c=>{s=c}),l=i.startViewTransition(()=>(s(),IAt(t))),{onViewTransitionCreated:u}=o;return u&&xg(t,()=>u({transition:l,from:r,to:n})),a})}function IAt(t){return new Promise(r=>{xh(r,{injector:t})})}var DAt=new En(""),yoe=(()=>{let r=class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xn,this.transitionAbortSubject=new Xn,this.configLoader=Zt(moe),this.environmentInjector=Zt(vb),this.urlSerializer=Zt(e3),this.rootContexts=Zt(t3),this.location=Zt(uS),this.inputBindingEnabled=Zt(i8,{optional:!0})!==null,this.titleStrategy=Zt(_Ie),this.options=Zt(o3,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Zt(goe),this.createViewTransition=Zt(CIe,{optional:!0}),this.navigationErrorHandler=Zt(DAt,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>kr(void 0),this.rootComponentType=null;let o=s=>this.events.next(new Yne(s)),i=s=>this.events.next(new Xne(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let i=++this.navigationId;this.transitions?.next(Is(Gt(Gt({},this.transitions.value),o),{id:i}))}setupNavigations(o,i,s){return this.transitions=new Hs({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:UR,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ds(a=>a.id!==0),dn(a=>Is(Gt({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Kf(a=>{let l=!1,u=!1;return kr(a).pipe(Kf(c=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",sd.SupersededByNewNavigation),b1;this.currentTransition=a,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Is(Gt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!f&&d!=="reload"){let p="";return this.events.next(new A1(c.id,this.urlSerializer.serialize(c.rawUrl),p,Hz.IgnoredSameUrlNavigation)),c.resolve(!1),b1}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return kr(c).pipe(Kf(p=>{let h=this.transitions?.getValue();return this.events.next(new Wk(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),h!==this.transitions?.getValue()?b1:Promise.resolve(p)}),xAt(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),gi(p=>{a.targetSnapshot=p.targetSnapshot,a.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Is(Gt({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let h=new Yz(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:h,source:m,restoredState:g,extras:y}=c,b=new Wk(p,this.urlSerializer.serialize(h),m,g);this.events.next(b);let x=dIe(this.rootComponentType).snapshot;return this.currentTransition=a=Is(Gt({},c),{targetSnapshot:x,urlAfterRedirects:h,extras:Is(Gt({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,kr(a)}else{let p="";return this.events.next(new A1(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Hz.IgnoredByUrlHandlingStrategy)),c.resolve(!1),b1}}),gi(c=>{let f=new Gne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),dn(c=>(this.currentTransition=a=Is(Gt({},c),{guards:jTt(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),a)),XTt(this.environmentInjector,c=>this.events.next(c)),gi(c=>{if(a.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw e8(this.urlSerializer,c.guardsResult);let f=new Wne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),Ds(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",sd.GuardRejected),!1)),jne(c=>{if(c.guards.canActivateChecks.length)return kr(c).pipe(gi(f=>{let d=new qne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}),Kf(f=>{let d=!1;return kr(f).pipe(vAt(this.paramsInheritanceStrategy,this.environmentInjector),gi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(f,"",sd.NoDataFromResolver)}}))}),gi(f=>{let d=new Hne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}))}),jne(c=>{let f=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(gi(h=>{d.component=h}),dn(()=>{})));for(let h of d.children)p.push(...f(h));return p};return kk(f(c.targetSnapshot.root)).pipe(une(null),Lc(1))}),jne(()=>this.afterPreactivation()),Kf(()=>{let{currentSnapshot:c,targetSnapshot:f}=a,d=this.createViewTransition?.(this.environmentInjector,c.root,f.root);return d?Wu(d).pipe(dn(()=>a)):kr(a)}),dn(c=>{let f=DTt(o.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=a=Is(Gt({},c),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,a}),gi(()=>{this.events.next(new HR)}),LTt(this.rootContexts,o.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Lc(1),gi({next:c=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _h(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{l=!0}}),Ns(this.transitionAbortSubject.pipe(gi(c=>{throw c}))),oS(()=>{!l&&!u&&this.cancelNavigationTransition(a,"",sd.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),x1(c=>{if(u=!0,yIe(c))this.events.next(new _b(a.id,this.urlSerializer.serialize(a.extractedUrl),c.message,c.cancellationCode)),FTt(c)?this.events.next(new qk(c.url,c.navigationBehaviorOptions)):a.resolve(!1);else{let f=new qR(a.id,this.urlSerializer.serialize(a.extractedUrl),c,a.targetSnapshot??void 0);try{let d=xg(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(d instanceof XR){let{message:p,cancellationCode:h}=e8(this.urlSerializer,d);this.events.next(new _b(a.id,this.urlSerializer.serialize(a.extractedUrl),p,h)),this.events.next(new qk(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(f);let p=o.errorHandler(c);a.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(d)}}return b1}))}))}cancelNavigationTransition(o,i,s){let a=new _b(o.id,this.urlSerializer.serialize(o.extractedUrl),i,s);this.events.next(a),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function NAt(t){return t!==UR}var MAt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(FAt),providedIn:"root"});let t=r;return t})(),coe=class{shouldDetach(r){return!1}store(r,n){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,n){return r.routeConfig===n.routeConfig}},FAt=(()=>{let r=class r extends coe{};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=kR(r)))(s||r)}})(),r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),TIe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(OAt),providedIn:"root"});let t=r;return t})(),OAt=(()=>{let r=class r extends TIe{constructor(){super(...arguments),this.location=Zt(uS),this.urlSerializer=Zt(e3),this.options=Zt(o3,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Zt(goe),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new T1,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=dIe(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(i=>{i.type==="popstate"&&o(i.url,i.state)})}handleRouterEvent(o,i){if(o instanceof Wk)this.stateMemento=this.createStateMemento();else if(o instanceof A1)this.rawUrlTree=i.initialUrl;else if(o instanceof Yz){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else o instanceof HR?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):o instanceof _b&&(o.code===sd.GuardRejected||o.code===sd.NoDataFromResolver)?this.restoreHistory(i):o instanceof qR?this.restoreHistory(i,!0):o instanceof _h&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,i){let s=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,l=Gt(Gt({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",l)}else{let a=Gt(Gt({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(o,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===o.finalUrl&&a===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,i){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:i}:{navigationId:o}}};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=kR(r)))(s||r)}})(),r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),$R=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}($R||{});function AIe(t,r){t.events.pipe(Ds(n=>n instanceof _h||n instanceof _b||n instanceof qR||n instanceof A1),dn(n=>n instanceof _h||n instanceof A1?$R.COMPLETE:(n instanceof _b?n.code===sd.Redirect||n.code===sd.SupersededByNewNavigation:!1)?$R.REDIRECTING:$R.FAILED),Ds(n=>n!==$R.REDIRECTING),Lc(1)).subscribe(()=>{r()})}function RAt(t){throw t}var PAt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LAt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_g=(()=>{let r=class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Zt(Fz),this.stateManager=Zt(TIe),this.options=Zt(o3,{optional:!0})||{},this.pendingTasks=Zt(ake),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Zt(yoe),this.urlSerializer=Zt(e3),this.location=Zt(uS),this.urlHandlingStrategy=Zt(goe),this._events=new Xn,this.errorHandler=this.options.errorHandler||RAt,this.navigated=!1,this.routeReuseStrategy=Zt(MAt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Zt(QR,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Zt(i8,{optional:!0}),this.eventsSubscription=new bb,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof _b&&i.code!==sd.Redirect&&i.code!==sd.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof _h)this.navigated=!0;else if(i instanceof qk){let l=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=Gt({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||NAt(s.source)},l);this.scheduleNavigation(u,UR,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}BAt(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),UR,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",i)},0)})}navigateToSyncWithBrowser(o,i,s){let a={replaceUrl:!0},l=s?.navigationId?s:null;if(s){let c=Gt({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(a.state=c)}let u=this.parseUrl(o);this.scheduleNavigation(u,i,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(poe),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,i={}){let{relativeTo:s,queryParams:a,fragment:l,queryParamsHandling:u,preserveFragment:c}=i,f=c?this.currentUrlTree.fragment:l,d=null;switch(u){case"merge":d=Gt(Gt({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let h=s?s.snapshot:this.routerState.snapshot.root;p=lIe(h)}catch{(typeof o[0]!="string"||o[0][0]!=="/")&&(o=[]),p=this.currentUrlTree.root}return uIe(p,o,d,f??null)}navigateByUrl(o,i={skipLocationChange:!1}){let s=GR(o)?o:this.parseUrl(o),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,UR,null,i)}navigate(o,i={skipLocationChange:!1}){return jAt(o),this.navigateByUrl(this.createUrlTree(o,i),i)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,i){let s;if(i===!0?s=Gt({},PAt):i===!1?s=Gt({},LAt):s=i,GR(o))return Uke(this.currentUrlTree,o,s);let a=this.parseUrl(o);return Uke(this.currentUrlTree,a,s)}removeEmptyProps(o){return Object.entries(o).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(o,i,s,a,l){if(this.disposed)return Promise.resolve(!1);let u,c,f;l?(u=l.resolve,c=l.reject,f=l.promise):f=new Promise((p,h)=>{u=p,c=h});let d=this.pendingTasks.add();return AIe(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:a,resolve:u,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function jAt(t){for(let r=0;r<t.length;r++)if(t[r]==null)throw new ns(4008,!1)}function BAt(t){return!(t instanceof HR)&&!(t instanceof qk)}var r8=(()=>{let r=class r{constructor(o,i,s,a,l,u){this.router=o,this.route=i,this.tabIndexAttribute=s,this.renderer=a,this.el=l,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Xn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=o.events.subscribe(f=>{f instanceof _h&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(o){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",o)}ngOnChanges(o){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(o){o!=null?(this.commands=Array.isArray(o)?o:[o],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(o,i,s,a,l){let u=this.urlTree;if(u===null||this.isAnchorElement&&(o!==0||i||s||a||l||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let o=this.urlTree;this.href=o!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(o)):null;let i=this.href===null?null:tke(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(o,i){let s=this.renderer,a=this.el.nativeElement;i!==null?s.setAttribute(a,o,i):s.removeAttribute(a,o)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};r.\u0275fac=function(i){return new(i||r)(vr(_g),vr(k1),Ik("tabindex"),vr(pne),vr(No),vr(MR))},r.\u0275dir=Ba({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&$c("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),i&2&&ed("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",nu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",nu],replaceUrl:[2,"replaceUrl","replaceUrl",nu],routerLink:"routerLink"},standalone:!0,features:[Qf,S1]});let t=r;return t})(),kIe=(()=>{let r=class r{get isActive(){return this._isActive}constructor(o,i,s,a,l){this.router=o,this.element=i,this.renderer=s,this.cdr=a,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ys,this.routerEventsSubscription=o.events.subscribe(u=>{u instanceof _h&&this.update()})}ngAfterContentInit(){kr(this.links.changes,kr(null)).pipe(wR()).subscribe(o=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let o=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Wu(o).pipe(wR()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(o){let i=Array.isArray(o)?o:o.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(o){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let o=this.hasActiveLinks();this.classes.forEach(i=>{o?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),o&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==o&&(this._isActive=o,this.cdr.markForCheck(),this.isActiveChange.emit(o))})}isLinkActive(o){let i=$At(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let a=s.urlTree;return a?o.isActive(a,i):!1}}hasActiveLinks(){let o=this.isLinkActive(this.router);return this.link&&o(this.link)||this.links.some(o)}};r.\u0275fac=function(i){return new(i||r)(vr(_g),vr(No),vr(pne),vr(nd),vr(r8,8))},r.\u0275dir=Ba({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,a){if(i&1&&C1(a,r8,5),i&2){let l;za(l=Ua())&&(s.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[S1]});let t=r;return t})();function $At(t){return!!t.paths}var n8=class{};var zAt=(()=>{let r=class r{constructor(o,i,s,a,l){this.router=o,this.injector=s,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ds(o=>o instanceof _h),v1(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,i){let s=[];for(let a of i){a.providers&&!a._injector&&(a._injector=hne(a.providers,o,`Route: ${a.path}`));let l=a._injector??o,u=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&s.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&s.push(this.processRoutes(u,a.children??a._loadedRoutes))}return Wu(s).pipe(wR())}preloadConfig(o,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(o,i):s=kr(null);let a=s.pipe(Xf(l=>l===null?kr(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??o,l.routes))));if(i.loadComponent&&!i._loadedComponent){let l=this.loader.loadComponent(i);return Wu([a,l]).pipe(wR())}else return a})}};r.\u0275fac=function(i){return new(i||r)(Et(_g),Et(Oz),Et(vb),Et(n8),Et(moe))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),IIe=new En(""),UAt=(()=>{let r=class r{constructor(o,i,s,a,l={}){this.urlSerializer=o,this.transitions=i,this.viewportScroller=s,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=Zt(vb),l.scrollPositionRestoration||="disabled",l.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof Wk?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof _h?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof A1&&o.code===Hz.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof Xz&&(o.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(o.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,i){this.zone.runOutsideAngular(()=>je(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),xh(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Xz(o,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};r.\u0275fac=function(i){Mk()},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();function DIe(t,...r){return AR([{provide:QR,multi:!0,useValue:t},[],{provide:k1,useFactory:NIe,deps:[_g]},{provide:bne,multi:!0,useFactory:MIe},r.map(n=>n.\u0275providers)])}function NIe(t){return t.routerState.root}function i3(t,r){return{\u0275kind:t,\u0275providers:r}}function MIe(){let t=Zt(jc);return r=>{let n=t.get(Rk);if(r!==n.components[0])return;let o=t.get(_g),i=t.get(FIe);t.get(boe)===1&&o.initialNavigation(),t.get(OIe,null,fne.Optional)?.setUpPreloading(),t.get(IIe,null,fne.Optional)?.init(),o.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FIe=new En("",{factory:()=>new Xn}),boe=new En("",{providedIn:"root",factory:()=>1});function VAt(){return i3(2,[{provide:boe,useValue:0},{provide:yne,multi:!0,deps:[jc],useFactory:r=>{let n=r.get(yke,Promise.resolve());return()=>n.then(()=>new Promise(o=>{let i=r.get(_g),s=r.get(FIe);AIe(i,()=>{o(!0)}),r.get(yoe).afterPreactivation=()=>(o(!0),s.closed?kr(void 0):s),i.initialNavigation()}))}}])}function GAt(){return i3(3,[{provide:yne,multi:!0,useFactory:()=>{let r=Zt(_g);return()=>{r.setUpLocationChangeListener()}}},{provide:boe,useValue:2}])}var OIe=new En("");function WAt(t){return i3(0,[{provide:OIe,useExisting:zAt},{provide:n8,useExisting:t}])}function qAt(){return i3(8,[qke,{provide:i8,useExisting:qke}])}function HAt(t){let r=[{provide:CIe,useValue:kAt},{provide:EIe,useValue:Gt({skipNextTransition:!!t?.skipInitialTransition},t)}];return i3(9,r)}var Kke=new En("ROUTER_FORROOT_GUARD"),YAt=[uS,{provide:e3,useClass:Gk},_g,t3,{provide:k1,useFactory:NIe,deps:[_g]},moe,[]],RIe=(()=>{let r=class r{constructor(o){}static forRoot(o,i){return{ngModule:r,providers:[YAt,[],{provide:QR,multi:!0,useValue:o},{provide:Kke,useFactory:QAt,deps:[[_g,new Az,new dne]]},{provide:o3,useValue:i||{}},i?.useHash?KAt():ZAt(),XAt(),i?.preloadingStrategy?WAt(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?JAt(i):[],i?.bindToComponentInputs?qAt().\u0275providers:[],i?.enableViewTransitions?HAt().\u0275providers:[],ekt()]}}static forChild(o){return{ngModule:r,providers:[{provide:QR,multi:!0,useValue:o}]}}};r.\u0275fac=function(i){return new(i||r)(Et(Kke,8))},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})();function XAt(){return{provide:IIe,useFactory:()=>{let t=Zt(Cke),r=Zt(Cn),n=Zt(o3),o=Zt(yoe),i=Zt(e3);return n.scrollOffset&&t.setOffset(n.scrollOffset),new UAt(i,o,t,r,n)}}}function KAt(){return{provide:MR,useClass:xke}}function ZAt(){return{provide:MR,useClass:bke}}function QAt(t){return"guarded"}function JAt(t){return[t.initialNavigation==="disabled"?GAt().\u0275providers:[],t.initialNavigation==="enabledBlocking"?VAt().\u0275providers:[]]}var Zke=new En("");function ekt(){return[{provide:Zke,useFactory:MIe},{provide:bne,multi:!0,useExisting:Zke}]}re();Ee();pn();fr();KI();var E7={kernelName:Cb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,up(rt(n,"float32"),-1))}}};Ee();pn();Kn();ea();Uo();Rh();ys();io();var f3e={kernelName:Tg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=qr(rt(n,"float32")),i=Zn(wt(Ot(1),o));return Zr(Tt(t,i))}}}};Ee();pn();Kn();Rh();ys();io();var d3e={kernelName:Ag,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Zn(wt(qr(rt(n,"float32")),1));return Tt(t,o)}}}};Ee();ko();Yt();Ai();var p3e={kernelName:np,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=t,u=oo(n.shape,i);return u.length>0&&(l=It(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=oo(o.shape,i);return u.length>0&&(l=It(l,u)),Se(l,o.shape)}}}};Ee();var h3e={kernelName:Eb,saveAllInputs:!0,gradFunc:(t,r)=>{let n={};return r.forEach((o,i)=>{n[i]=()=>t.clone()}),n}};Ee();zo();var m3e={kernelName:Tb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>ar(n)}}};Ee();zo();var g3e={kernelName:Ab,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>ar(n)}}};Ee();pn();Kn();Uo();Rh();ys();io();var y3e={kernelName:kg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Zn(wt(Ot(1),qr(rt(n,"float32")))))}}};Ee();$o();pn();Kn();Uo();Rh();ys();var b3e={kernelName:Ig,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Zn(Ke(Ot(1),qr(rt(n,"float32"))));return Tt(t,o)}}}};Ee();$o();ko();Kn();fr();ea();Yt();ys();Ai();var x3e={kernelName:Mg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Ke(qr(n),qr(o)),u=we(t,Tt(o,l)),c=oo(n.shape,i);return c.length>0&&(u=It(u,c)),Se(u,n.shape)},b:()=>{let l=Ke(qr(n),qr(o)),u=Zr(we(t,Tt(n,l))),c=oo(o.shape,i);return c.length>0&&(u=It(u,c)),Se(u,o.shape)}}}};Ee();$o();pn();Kn();ys();var v3e={kernelName:Dg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Ke(qr(rt(n,"float32")),1))}}};Ee();pn();Kn();ys();io();Uo();var w3e={kernelName:Ng,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,wt(Ot(1),qr(rt(n,"float32"))))}}};Ee();ze();Ee();Le();Ze();Fs();Ne();Yt();function d3t(t,r,n,o,i,s){let a=J(t,"dy","avgPool3dGrad"),l=J(r,"input","avgPool3dGrad"),u=a,c=l,f=!1;l.rank===4&&(f=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),pe(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),pe(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),go("avgPool3dGrad",i,s);let d={dy:u,input:c},p={filterSize:n,strides:o,pad:i,dimRoundingMode:s},h=ue.runKernel(vS,d,p);return f?Se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var _3e=se({avgPool3dGrad_:d3t});var S3e={kernelName:Ib,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>_3e(t,o,i,s,a,l)}}};Ee();ze();Ee();Le();Ze();Ne();Yt();function p3t(t,r,n,o,i){let s=J(t,"dy","avgPoolGrad"),a=J(r,"input","avgPoolGrad");pe(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let l=a,u=s,c=!1;a.rank===3&&(c=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pe(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),pe(l.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${l.rank}.`);let f={dy:u,input:l},d={filterSize:n,strides:o,pad:i},p=ue.runKernel(xS,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var C3e=se({avgPoolGrad_:p3t});var E3e={kernelName:kb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a}=n;return{x:()=>C3e(t,o,i,s,a)}}};Ee();Mh();var T3e={kernelName:Db,inputsToSave:["a","b"],gradFunc:(t,r,n)=>{let[o,i]=r,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>Vr(t,i,!1,!0),b:()=>Vr(o,t,!0,!1)}:!s&&a?{a:()=>Vr(t,i,!1,!1),b:()=>Vr(t,o,!0,!1)}:s&&!a?{a:()=>Vr(i,t,!1,!0),b:()=>Vr(o,t,!1,!1)}:{a:()=>Vr(i,t,!0,!0),b:()=>Vr(t,o,!0,!0)}}};Ee();L3();var A3e={kernelName:Nb,gradFunc:(t,r,n)=>{let{blockShape:o,crops:i}=n;return{x:()=>dw(t,o,i)}}};Ee();Ai();var k3e={kernelName:koe,gradFunc:(t,r,n)=>{let o=n,i=o.inputShape,s=o.shape,a=Array.from(s);for(let u=i.length-1;u>=0;u--)if(i[u]===s[u])a[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);let l=[];for(let u=0;u<a.length;u++)a[u]>1&&l.push(u);return{x:()=>It(t,l,!0)}}};Ee();var I3e={kernelName:Ch,gradFunc:t=>({x:()=>t.clone()})};Ee();zo();var D3e={kernelName:Fg,gradFunc:t=>({x:()=>ar(t)})};Ee();jC();sw();BC();dd();zo();var N3e={kernelName:Og,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>yo(Ha(au(o,i),Hc(o,s)),t,ar(t))}}};Ee();var M3e={kernelName:Mb,inputsToSave:["x"],gradFunc:E7.gradFunc};Ee();qC();Ze();var F3e={kernelName:Fb,saveAllInputs:!0,gradFunc:(t,r,n)=>{let o=r.map(u=>u.shape),{axis:i}=n,s=gs(i,r[0].shape)[0],a=o.map(u=>u[s]);return xs(t,a,s).map(u=>()=>u)}};Ee();t7();X8();Fs();Ze();var O3e={kernelName:Ob,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{dilations:s,strides:a,pad:l,dataFormat:u}=n;return pe(ud(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>TI(o.shape,t,i,a,l,u),filter:()=>tD(o,t,i.shape,a,l,u)}}};Ee();RC();t7();var R3e={kernelName:Rb,inputsToSave:["dy","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u}=n;return{dy:()=>Zu(t,i,s,a,l,1,u),filter:()=>tD(t,o,i.shape,s,a,l,u)}}};Ee();ze();Ee();Ze();Ne();Yt();function h3t(t,r,n,o,i){let s=t;t.rank===4&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=r;a.rank===4&&(a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),pe(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),pe(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),pe(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),pe(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),pe(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);let l={x:s,dy:a},u={strides:o,pad:i,filterShape:n};return ue.runKernel(ES,l,u)}var P3e=se({conv3DBackpropFilter_:h3t});_ie();Fs();Ze();var L3e={kernelName:Pb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s}=n;pe(ud(o),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let[a,l]=r;return{x:()=>Z8(a.shape,t,l,i,s),filter:()=>P3e(a,t,l.shape,i,s)}}};Ee();pn();fr();ea();ose();var j3e={kernelName:Rg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(Zr(GI(rt(n,"float32"))),t)}}};Ee();pn();fr();ise();var B3e={kernelName:Pg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(WI(rt(n,"float32")),t)}}};Ee();Oh();tU();Nx();var $3e={kernelName:Lb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{let l=Nie([i],o.rank),u=II(t,i,s,!a);return l!=null&&(u=Gr(u,l)),u}}}};Ee();Fs();mse();gse();Ze();var z3e={kernelName:jb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s,dimRoundingMode:a}=n,l=o??[1,1];pe(ud(l),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${l}'`);let[u,c]=r;return pe(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),pe(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),pe(u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),pe(va(i,l),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${l}'.`),go("depthwiseConv2d",s,a),{x:()=>n7(u.shape,t,c,i,s,l,a),filter:()=>r7(u,t,c.shape,i,s,l,a)}}};ze();Ee();var U3e={kernelName:Bb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,s={x:o,filter:i,dy:t},a={x:o,filter:i,dy:t};return{x:()=>ue.runKernel(eI,s,n),filter:()=>ue.runKernel(tI,a,n)}}};ze();Ee();var V3e={kernelName:jg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r,o={dy:t,y:n};return{x:()=>ue.runKernel(RS,o)}}};Ee();T0();fr();ea();ys();var G3e={kernelName:Bg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(xi(Zr(qr(n))),2/Math.sqrt(Math.PI));return{x:()=>we(t,o)}}};Ee();fr();var W3e={kernelName:$g,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,n)}}};Ee();Yt();var q3e={kernelName:$b,inputsToSave:["input"],gradFunc:(t,r)=>{let[n]=r;return{input:()=>Se(t,n.shape)}}};Ee();T0();fr();var H3e={kernelName:zg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,xi(n))}}};Ee();zo();var Y3e={kernelName:Ug,gradFunc:t=>({x:()=>ar(t)})};Ee();ko();pn();Kn();fr();ea();Yt();ys();Ai();var X3e={kernelName:Vg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Tt(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);u.length>0&&(l=Se(It(l,u),o.shape));let c=qr(o);return Zr(Tt(l,rt(c,"float32")))}}}};Ee();$o();ko();fr();Yt();tse();Uo();io();Ai();FI();var K3e={kernelName:zb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,r,n)=>{let{varianceEpsilon:o}=n,[i,s,a,l]=r,u=l??Ot(1),c=oo(s.shape,i.shape),f=[];if(s.rank===1){for(let w=0;w<i.shape.length-1;++w)f.push(i.shape[w]);f.push(1)}let d=wt(i,s),p=we(t,u),h=zI(Ke(a,Ot(o))),m=we(we(we(h,h),h),Ot(-.5));return{x:()=>s.rank===1?Se(we(we(t,wa(Se(h,[1,1,1,s.shape[0]]),f)),u),i.shape):Se(we(we(t,h),u),i.shape),mean:()=>{let w=we(we(h,Ot(-1)),p);return s.rank===1&&(w=It(w,c)),Se(w,s.shape)},variance:()=>{let w=we(we(m,d),p);return s.rank===1&&(w=It(w,c)),Se(w,s.shape)},scale:()=>{let w=we(d,h),_=we(t,w);return s.rank===1&&(_=It(_,c)),Se(_,s.shape)},offset:()=>{let w=t;return s.rank===1&&(w=It(w,c)),Se(w,s.shape)}}}};Ee();Oh();Yt();yw();Nx();ZU();Ze();var J3e={kernelName:Ub,inputsToSave:["x","indices"],gradFunc:(t,r,n)=>{let[o,i]=r,{axis:s,batchDims:a}=n,l=gs(s,o.shape)[0],u=(c,f,d)=>()=>{let p=c.shape,h=f.size,m=p.slice(0,l),g=m.length,y=p.slice(s,p.length).slice(1),b=y.length,x=Z3e(0,g),v=Z3e(g+1,g+1+b),w=Q3e([m,[h],y]),_=Se(d,w),S=Se(f,[h]),C=Q3e([[g],x,v]),E=Gr(_,C),T=JI(E,S,c.shape[l]),I=T3(C);return T=Gr(T,I),T};if(a===1){let c=o.shape[0],f=o.split(c,0);return{x:()=>ss(f.map((h,m)=>u(h,i.slice(m,1),t.slice(m,1))())).reshape(o.shape),indices:()=>i}}else return{x:u(o,i,t),indices:()=>i}}};function Z3e(t,r){let n=[];for(let o=t;o<r;++o)n.push(o);return n}function Q3e(t){let r=[];for(let n=0;n<t.length;++n)for(let o=0;o<t[n].length;++o)r.push(t[n][o]);return r}Ee();zo();var ePe={kernelName:Gg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>ar(n),b:()=>ar(o)}}};Ee();pn();var tPe={kernelName:Eh,gradFunc:t=>({x:()=>rt(t,"float32")})};Ee();zo();var rPe={kernelName:Wg,gradFunc:t=>({x:()=>ar(t)})};Ee();zo();var nPe={kernelName:qg,gradFunc:t=>({x:()=>ar(t)})};Ee();zo();var oPe={kernelName:Hg,gradFunc:t=>({x:()=>ar(t)})};Ee();I0();fr();dd();var iPe={kernelName:Vb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{alpha:i}=n,s=ni(o,0);return{x:()=>yo(s,t,we(t,i))}}};Ee();$o();Kn();var sPe={kernelName:Xg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Ke(n,1))}}};Ee();pn();Kn();var aPe={kernelName:Yg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,rt(n,"float32"))}}};Ee();T0();fr();io();Ai();var lPe={kernelName:Ioe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n;return{logits:()=>{let a=xi(o);return wt(t,we(It(t,i,!0),a))}}}};Ee();ze();Ee();Ne();function m3t(t,r,n,o=5,i=1,s=1,a=.5){let l={x:t,y:r,dy:n},u={depthRadius:o,bias:i,alpha:s,beta:a};return ue.runKernel(VS,l,u)}var uPe=se({localResponseNormalizationBackprop_:m3t});var cPe={kernelName:Gb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{depthRadius:s,bias:a,alpha:l,beta:u}=n;return{x:()=>uPe(o,i,t,s,a,l,u)}}};Ee();Ze();Oh();pn();E3();fr();Yt();function T7(t,r,n,o){return r.rank<n.rank&&(r=Se(r,lp(r.shape,o))),t.rank<n.rank&&(t=Se(t,lp(t.shape,o))),{x:()=>we(t,rt(Il(n,r),t.dtype))}}var Hse={kernelName:Wb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{reductionIndices:i}=o,s=r[0],a=r[1],l=gs(i,s.shape),u=T7(t,a,s,l);return{x:()=>u.x()}}};Ee();pn();jC();D3();fr();var fPe={kernelName:Kg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(au(n,o),"float32")),b:()=>we(t,rt(Ex(n,o),"float32"))}}};Ee();ze();Ee();Le();Ze();Fs();Ne();Yt();function g3t(t,r,n,o,i,s,a){let l=J(t,"dy","maxPool3dGrad"),u=J(r,"input","maxPool3dGrad"),c=J(n,"output","maxPool3dGrad"),f=l,d=u,p=c,h=!1;u.rank===4&&(h=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=Se(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),pe(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),pe(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),pe(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),go("maxPool3dGrad",s,a);let m={dy:f,input:d,output:p},g={filterSize:o,strides:i,pad:s,dimRoundingMode:a},y=ue.runKernel(WS,m,g);return h?Se(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var dPe=se({maxPool3dGrad_:g3t});var pPe={kernelName:Hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=n;return{x:()=>dPe(t,o,i,s,a,l,u)}}};Ee();ze();Ee();Le();Ze();Fs();Ne();function y3t(t,r,n,o,i,s,a){let l=J(t,"dy","maxPoolGrad"),u=J(r,"input","maxPoolGrad"),c=J(n,"output","maxPoolGrad");pe(u.rank===l.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${l.rank})`),pe(l.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),pe(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),go("maxPoolGrad",s,a);let f={dy:l,input:u,output:c},d={filterSize:o,strides:i,pad:s,dimRoundingMode:a};return ue.runKernel(GS,f,d)}var hPe=se({maxPoolGrad_:y3t});var mPe={kernelName:qb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l}=n;return{x:()=>hPe(t,o,i,s,a,l)}}};Ee();Oh();Kn();fr();$C();Yt();Ze();var gPe={kernelName:Yb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=gs(i,o.shape),l=Die(o.shape,s)[1],u=on(l);return{x:()=>{let f=o.shape.slice();s.forEach(h=>{f[h]=1});let d=Se(t,f);return Tt(we(d,Wi(o.shape,"float32")),u)}}}};Ee();Ze();var yPe={kernelName:Xb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{axis:i}=o,[s,a]=r,l=gs(i,s.shape),u=T7(t,a,s,l);return{x:()=>u.x()}}};Ee();pn();I0();sw();fr();var bPe={kernelName:Zg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(Hc(n,o),"float32")),b:()=>we(t,rt(ni(n,o),"float32"))}}};Ee();Ku();var xPe={kernelName:Kb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>zr(t,s,o.shape)}}};Ee();ko();Kn();cU();fr();ea();Yt();Ai();var vPe={kernelName:Qg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=oo(n.shape,i);return l.length>0?Se(It(t,l),n.shape):t},b:()=>{let l=we(t,Zr(A0(Tt(n,o)))),u=oo(o.shape,i);return u.length>0?Se(It(l,u),o.shape):l}}}};Ee();ko();pn();fr();Yt();Ai();var wPe={kernelName:Jg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=we(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);return u.length>0?Se(It(l,u),o.shape):l}}}};Ee();ea();var _Pe={kernelName:Zb,gradFunc:t=>({x:()=>Zr(t)})};Ee();LI();var SPe={kernelName:Jb,inputsToSave:["indices"],gradFunc:(t,r)=>{let n=r[0];return{indices:()=>xo(n.shape,"float32")}}};Ee();zo();var CPe={kernelName:Qb,gradFunc:t=>({x:()=>ar(t)})};Ee();eD();var EPe={kernelName:ex,saveAllInputs:!0,gradFunc:(t,r,n)=>{let{axis:o}=n;return Ya(t,o).map(s=>()=>s)}};Ee();Ku();var Yse={kernelName:tx,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>zr(t,s,o.shape)}}};Ee();ko();pn();I0();OI();fr();nw();Yt();Uo();io();Ai();dd();zo();var TPe={kernelName:e0,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,r)=>{let[n,o,i]=r,s=n,a=o,l=jr(s.shape,a.shape);return{a:()=>{let f=rt(a,"float32"),d=we(t,we(f,qa(s,wt(f,Ot(1))))),p=oo(s.shape,l);return p.length>0&&(d=It(d,p)),Se(d,s.shape)},b:()=>{let f=ni(s,0),d=yo(f,Js(s),ar(s)),p=we(t,we(i,d)),h=oo(a.shape,l);return h.length>0&&(p=It(p,h)),Se(p,a.shape)}}}};Ee();ko();I0();fr();Yt();Ai();dd();zo();var APe={kernelName:rx,inputsToSave:["x","alpha"],gradFunc:(t,r)=>{let[n,o]=r,i=ni(n,0);return{x:()=>yo(i,t,we(t,o)),alpha:()=>{let s=yo(i,ar(t),we(t,n)),a=oo(o.shape,t.shape);return a.length>0&&(s=It(s,a)),Se(s,o.shape)}}}};qse();Ee();eU();fr();Yt();Nx();function b3t(t,r,n){let o=t.shape.slice();o[n]=1;let i=Se(r,o),s=PC(t,n,!0,!1),a=PC(t,n,!0,!0),l=we(s,a);return we(i,l)}function x3t(t,r,n){let o=t.shape.length,i=o-n.length,s=ce.getAxesPermutation(n,o),a=t;s!=null&&(a=Gr(t,s));let l=a.shape.slice(),c=l.splice(o-n.length,n.length).reduce((p,h)=>p*h,1);l.push(c);let f=a.reshape(l),d=b3t(f,r,i);if(d=d.reshape(a.shape),s!=null){let p=ce.getUndoAxesPermutation(s);d=Gr(d,p)}return d}var kPe={kernelName:nx,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=[];return i==null?s=o.shape.map((a,l)=>l):typeof i=="number"?s=[i]:s=i,{x:()=>x3t(o,t,s)}}};Ee();ko();pn();Kn();fr();ea();Yt();ys();Ai();var IPe={kernelName:Lg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Tt(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);u.length>0&&(l=Se(It(l,u),o.shape));let c=qr(o);return Zr(Tt(l,rt(c,"float32")))}}}};Ee();Kn();ea();ys();var DPe={kernelName:t0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Zr(qr(n)))}}};Ee();pn();sw();fr();KI();var NPe={kernelName:n0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(Hc(n,6),up(n));return{x:()=>we(t,rt(o,"float32"))}}};Ee();pn();fr();KI();var MPe={kernelName:r0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,rt(up(n),"float32"))}}};Ee();Yt();var FPe={kernelName:ox,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Se(t,n.shape)}}};ze();Ee();var OPe={kernelName:sx,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(nC,i,n)}}};ze();Ee();var RPe={kernelName:ix,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(rC,i,n)}}};Ee();kx();Ze();var PPe={kernelName:ax,gradFunc:(t,r,n)=>{let{dims:o}=n,i=gs(o,t.shape);return{x:()=>bs(t,i)}}};Ee();zo();var LPe={kernelName:o0,gradFunc:t=>({x:()=>ar(t)})};Ee();Kn();fr();ea();nw();var jPe={kernelName:i0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Zr(Tt(t,we(qa(n,1.5),2)))}}};Ee();pn();M3();fr();zo();var BPe={kernelName:lx,inputsToSave:["condition"],gradFunc:(t,r)=>{let[n]=r;return{condition:()=>rt(ar(n),"float32"),t:()=>we(t,rt(n,t.dtype)),e:()=>we(t,rt(uw(n),t.dtype))}}};Ee();pn();T0();I0();fr();Uo();Vse();dd();var $Pe={kernelName:s0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=ni(n,Ot(0)),i=Ot(zse),s=Ot(Use),a=we(t,s),l=we(we(t,i),xi(rt(n,"float32")));return yo(o,a,l)}}}};Ee();fr();Uo();io();var zPe={kernelName:c0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(n,wt(Ot(1),n)))}}};Ee();zo();var UPe={kernelName:u0,gradFunc:t=>({x:()=>ar(t)})};Ee();pn();J8();fr();var VPe={kernelName:a0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(tw(rt(n,"float32")),t)}}};Ee();pn();Sie();fr();var GPe={kernelName:l0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(kI(rt(n,"float32")),t)}}};Ee();fw();S7();var WPe={kernelName:ux,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{begin:i,size:s}=n,a=o.shape,[l,u]=Lse(o,i,s),c=[];for(let f=0;f<t.rank;f++)c.push([l[f],a[f]-l[f]-u[f]]);return{x:()=>lu(t,c)}}};Ee();fr();io();Ai();var qPe={kernelName:px,outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{dim:i}=n,s=!0,a=we(t,o);return{logits:()=>wt(a,we(It(a,[i],s),o))}}};Ee();fr();_I();var HPe={kernelName:f0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,kl(n))}}};Ee();_3();var Xse={kernelName:fx,gradFunc:(t,r,n)=>{let{blockShape:o,paddings:i}=n;return{x:()=>ew(t,o,i)}}};Ee();fd();var Kse={kernelName:dx,gradFunc:(t,r,n)=>{let{axis:o}=n;return{x:()=>On(t,o)}}};Ee();pn();Kn();fr();Rh();var YPe={kernelName:d0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,we(Zn(rt(n,"float32")),2))}}};Ee();pn();fr();var XPe={kernelName:dC,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(rt(n,"float32"),2))}}};Ee();fr();Uo();io();var KPe={kernelName:p0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Ot(2);return{a:()=>we(t,we(i,wt(n,o))),b:()=>we(t,we(i,wt(o,n)))}}};Ee();zo();var ZPe={kernelName:y0,gradFunc:t=>({x:()=>ar(t)})};Ee();ko();ea();Yt();Ai();var QPe={kernelName:h0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=t,u=oo(n.shape,i);return u.length>0&&(l=It(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=oo(o.shape,i);return u.length>0&&(l=It(l,u)),Se(Zr(l),o.shape)}}}};Ee();fr();$C();Yt();Ze();var JPe={kernelName:cx,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,i=o.shape.slice(),{axis:s}=n;gs(s,o.shape).forEach(c=>{i[c]=1});let l=Se(t,i),u=we(l,Wi(o.shape,"float32"));return{x:()=>u}}};Ee();J8();Kn();ys();var eLe={kernelName:m0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,qr(tw(n)))}}};Ee();fr();Uo();ys();io();var tLe={kernelName:g0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(wt(Ot(1),qr(n)),t)}}};Ee();$o();Ku();zo();var rLe={kernelName:Th,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{reps:i}=n;return{x:()=>{let a=ar(o);if(o.rank===1)for(let l=0;l<i[0];++l)a=Ke(a,zr(t,[l*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)a=Ke(a,zr(t,[l*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)a=Ke(a,zr(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else if(o.rank===4)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)for(let f=0;f<i[3];++f)a=Ke(a,zr(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2],f*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${o.rank} tensors yet.`);return a}}}};Ee();Oh();Nx();var nLe={kernelName:Ah,gradFunc:(t,r,n)=>{let o=n,{perm:i}=o,s=T3(i);return{x:()=>Gr(t,s)}}};Ee();yw();var oLe={kernelName:hx,gradFunc:(t,r,n)=>{let o=n,{axis:i}=o;return{value:()=>ss(t,i)}}};Ee();MI();k3();jC();BC();O3();$C();Uo();dd();zo();var iLe={kernelName:mx,inputsToSave:["segmentIds"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>v3t(t,n)}}};function v3t(t,r){let n=Ju(r,ar(r)),o=k0(t,n),i=au(r,Ot(0,"int32")),s=o.rank-i.rank;for(let l=0;l<s;++l)i=ki(i,l+1);i=Ha(i,Wi(o.shape,"bool"));let a=ar(o);return yo(i,o,a)}Ee();zo();var sLe={kernelName:gx,gradFunc:t=>({x:()=>ar(t)})};c3();var w3t=[E7,f3e,d3e,p3e,h3e,m3e,g3e,y3e,b3e,x3e,v3e,w3e,S3e,E3e,T3e,A3e,k3e,I3e,D3e,N3e,M3e,F3e,R3e,O3e,L3e,j3e,B3e,$3e,z3e,U3e,IPe,V3e,G3e,W3e,q3e,H3e,X3e,Y3e,K3e,J3e,ePe,tPe,rPe,nPe,oPe,iPe,sPe,aPe,lPe,cPe,Hse,Hse,fPe,pPe,mPe,gPe,yPe,bPe,xPe,vPe,wPe,_Pe,SPe,CPe,EPe,Yse,Yse,TPe,APe,kPe,DPe,NPe,MPe,FPe,OPe,RPe,PPe,LPe,jPe,BPe,$Pe,zPe,UPe,VPe,GPe,WPe,qPe,HPe,Xse,Xse,Kse,Kse,YPe,KPe,XPe,ZPe,QPe,JPe,eLe,tLe,rLe,nLe,oLe,iLe,sLe];for(let t of w3t)Doe(t);Zse();re();re();re();var md=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},uu=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},Ie=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},wr=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},A7=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}};var Z3=class{constructor(r){this.maxEntries=r||100,this.cache=new Map}get(r){let n;return this.cache.has(r)&&(n=this.cache.get(r),this.cache.delete(r),this.cache.set(r,n)),n}put(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxEntries){let o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(r,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(r){if(r<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${r}.`);if(this.maxEntries>r)for(let n=0;n<this.maxEntries-r;n++){let o=this.cache.keys().next().value;this.cache.delete(o)}this.maxEntries=r}};re();function pp(t,r){if(Array.isArray(t)){let n=[];for(let o=0;o<r;o++)n=n.concat(t);return n}else{let n=new Array(r);return n.fill(t),n}}function gd(t,r){if(!t)throw new A7(r)}function Jse(t,r){let n=0;for(let o of t)o===r&&n++;return n}function ta(t){return t.length===1?t[0]:t}function Rn(t){return Array.isArray(t)?t:[t]}function hp(t){let n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Fx(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(r,n)=>n.toUpperCase())}var dp={};function iD(t){if(t==null)return null;let r={};return r.className=t.getClassName(),r.config=t.getConfig(),r}function Qse(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(r=>Qse(r));else{let r=Object.keys(t);for(let n of r){let o=t[n];o!=null&&typeof o=="object"&&(!Array.isArray(o)&&o.type==="ndarray"&&typeof o.value=="number"?t[n]=o.value:Qse(o))}}}function O0(t,r={},n={},o="object",i=!1){if(typeof t=="string"){let s=t,a;if(s in n)a=n[s];else if(s in dp)a=dp[s];else if(a=r[s],a==null)throw new Ie(`Unknown ${o}: ${t}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{let s=t;if(s.className==null||s.config==null)throw new Ie(`${o}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);let a=s.className,l,u;if(a in n?[l,u]=n[a]:a in dp?[l,u]=dp.className:a in r&&([l,u]=r[a]),l==null)throw new Ie(`Unknown ${o}: ${a}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){let c={};for(let h of Object.keys(dp))c[h]=dp[h];for(let h of Object.keys(n))c[h]=n[h];let f=s.config;f.customObjects=c;let d=Object.assign({},dp);for(let h of Object.keys(n))dp[h]=n[h];Qse(s.config);let p=u(l,s.config,n,i);return dp=Object.assign({},d),p}else{let c=Object.assign({},dp);for(let d of Object.keys(n))dp[d]=n[d];let f=new l(s.config);return dp=Object.assign({},c),f}}}function S3t(t,r){return t<r?-1:t>r?1:0}function Q3(t,r){return-1*S3t(t,r)}function mp(t){if(t==null)return t;let r=[];for(let n of t)r.indexOf(n)===-1&&r.push(n);return r}function P4e(t){if(t==null)throw new Ie(`Invalid value in obj: ${JSON.stringify(t)}`);for(let r in t)if(t.hasOwnProperty(r))return!1;return!0}function R0(t,r,n){if(n!=null&&t.indexOf(n)<0)throw new Ie(`${n} is not a valid ${r}.  Valid values are ${t} or null/undefined.`)}function k7(t,r,n=0,o=1/0){return gd(n>=0),gd(o>=n),Array.isArray(t)&&t.length>=n&&t.length<=o&&t.every(i=>typeof i===r)}function Di(t,r){Array.isArray(t)?(Y.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((n,o)=>Di(n,`element ${o+1} of ${r}`))):Y.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got ${L4e(t)}.`)}function L4e(t){return t===null?"null":Array.isArray(t)?"["+t.map(r=>L4e(r)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function j4e(t,r,n){let o=n!=null?n():Y.now(),i;return(...a)=>{let l=n!=null?n():Y.now();return l-o<r||(o=l,i=t(...a)),i}}function I7(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}re();var C3t=0;function N7(){return C3t++}var D7={};function Aw(t=""){return t in D7||(D7[t]=0),D7[t]+=1,t+D7[t].toString()}re();var B4e=["channelsFirst","channelsLast"],$4e=["nearest","bilinear"],z4e=["valid","same","causal"],U4e=["max","avg"],V4e=["sum","mul","concat","ave"];var sD=new Map;function Vo(t){R0(B4e,"DataFormat",t)}function W4e(t){R0($4e,"InterpolationFormat",t)}function cu(t){R0(z4e,"PaddingMode",t)}function eae(t){R0(U4e,"PoolMode",t)}var J3=[],G4e="/";function $h(t,r){J3.push(t);try{let n=r();return J3.pop(),n}catch(n){throw J3.pop(),n}}function E3t(){return J3.length===0?"":J3.join(G4e)+G4e}function M7(t){if(!q4e(t))throw new Error("Not a valid tensor name: '"+t+"'");return E3t()+t}function F7(t){if(!q4e(t))throw new Error("Not a valid tensor name: '"+t+"'");sD.has(t)||sD.set(t,0);let r=sD.get(t);if(sD.set(t,sD.get(t)+1),r>0){let n=`${t}_${r}`;return sD.set(n,1),n}else return t}var T3t=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function q4e(t){return!!t.match(T3t)}re();re();re();function H4e(t){return t===parseInt(t.toString(),10)}function gp(t,r,n){r==null&&(r=0),n==null&&(n=t.length);let o=1;for(let i=r;i<n;++i)o*=t[i];return o}function JC(t){if(t.length===0)return Number.NaN;let r=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o<r&&(r=o)}return r}function zh(t){if(t.length===0)return Number.NaN;let r=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o>r&&(r=o)}return r}function fu(t,r){if(r<t)throw new Ie(`end (${r}) < begin (${t}) is forbidden.`);let n=[];for(let o=t;o<r;++o)n.push(o);return n}re();var tae;function as(){return tae==null&&(tae=b3().epsilon()),tae}function du(){return"channelsLast"}function Nl(t,r){return rt(t,r)}function Rx(t,r=-1){let n=t.shape.slice();return r<0&&(r=n.length+r+1),n.splice(r,0,1),Se(t,n)}function Y4e(t,r){return Pe(()=>{if(t.shape.length!==2)throw new Ie(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let n=Rx(t,1);return R7(n,[1,r,1])})}function X4e(t){let r=[gp(t.shape)];return Se(t,r)}function K4e(t){if(t.rank<=1)throw new Ie(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let r=[t.shape[0],gp(t.shape,1)];return Se(t,r)}function Ox(t,r,n){return Pe(()=>{switch(t.rank){case 1:return qI(t,r,n);case 2:return z3(t,[r,0],[n,t.shape[1]]);case 3:return HI(t,[r,0,0],[n,t.shape[1],t.shape[2]]);case 4:return WC(t,[r,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return zr(t,[r,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return zr(t,[r,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Ie(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function rae(t,r,n){return Pe(()=>{switch(t.rank){case 1:return qI(t,r,n);case 2:return z3(t,[0,r],[t.shape[0],n]);case 3:return HI(t,[0,0,r],[t.shape[0],t.shape[1],n]);case 4:return WC(t,[0,0,0,r],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function eP(t,r,n,o){return Pe(()=>{switch(t.rank){case 1:return qI(t,r,n);case 2:switch(o){case 1:return Ox(t,r,n);case 2:return rae(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 3:switch(o){case 1:return Ox(t,r,n);case 2:return HI(t,[0,r,0],[t.shape[0],n,t.shape[2]]);case 3:return rae(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 4:switch(o){case 1:return Ox(t,r,n);case 2:return WC(t,[0,r,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return WC(t,[0,0,r,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return rae(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function aD(t,r=-1){let n;return r<0&&(n=t[0].rank,n!==0?r=n:r=0),r===t[0].rank&&(r=-1),On(t,r)}function oae(t,r){switch(t.rank){case 1:return W8([t,r]);case 2:return q8([t,r],0);case 3:return H8([t,r],0);case 4:return Y8([t,r],0);default:throw new Ie(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function R7(t,r){if(Array.isArray(r)||(r=[r]),t.rank!==r.length)throw new Ie(`The length of input n (${r.length}) does not match the number of dimensions in input x (${t.rank})`);return wa(t,r)}function lD(t,r=0,n=1,o,i){return GC(t,r,n,o,i)}function yp(t,r,n,o){if(t.rank<2||r.rank<2)throw new wr(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${r.shape}`);if(r.rank>=3){let i=t.shape.slice(-1)[0],s=r.shape.slice(-2)[0];if(i!==s)throw new wr(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${r.shape}`)}if(t.rank===2&&r.rank===2)return xw.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?nae(t.rank,o,du()):null,activation:n});{let i=t.shape.slice(),s=i.pop();t=Se(t,[-1,s]);let a=r.shape.slice(),l=a.pop(),u=a.pop(),c=[...a,l],f=Array.from({length:r.rank},(m,g)=>g===0?r.rank-2:g<=r.rank-2?g-1:g);r=Se(Gr(r,f),[u,-1]);let d=[...i,...c];return Se(xw.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?nae(t.rank,o,du()):null,activation:n}),d)}}function P7(t,r,n){return Pe(()=>(Array.isArray(r)?r=oi(r,"int32"):r=rt(r,"int32"),k0(t,r,n)))}function eE(t){return we(t,t)}function nae(t,r,n){let o=r.shape;if(r.rank!==1&&r.rank!==t)throw new Ie(`Unexpected bias dimensions: ${r.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1,1]):Se(r,[1,o[3],o[0],o[1],o[2]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===4){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1]):Se(r,[1,o[2],o[0],o[1]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===3){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1]):Se(r,[1,o[1],o[0]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,o[0]]):Se(r,[1].concat(o))}else if(t<3)return r;throw new Ie(`Unsupported input rank by biasAdd: ${r.rank}`)}function pu(t,r,n){return Pe(()=>(n==null&&(n=du()),Vo(n),Ke(t,nae(t.rank,r,n))))}function Z4e(t,r=1){if(r!==1)throw new wr(`Support for alpha values other than 1 (${r}) is not implemented yet.`);return E0(t)}function Q4e(t){return Pe(()=>Tt(t,Ke(Ao(t),1)))}function L7(t,r,n,o){return Pe(()=>pse(t,r,n,o))}function J4e(t){return Pe(()=>{let r=Ke(.5,we(.2,t));return Zs(r,0,1)})}function kw(t,r,n=!1){return n?t():r()}var e5e=["fanIn","fanOut","fanAvg"],t5e=["normal","uniform","truncatedNormal"];function A3t(t){R0(e5e,"FanMode",t)}function k3t(t){R0(t5e,"Distribution",t)}var hu=class extends tt.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},o5e=(()=>{class t extends hu{apply(n,o){return xo(n,o)}}return t.className="Zeros",t})();tt.registerClass(o5e);var j7=(()=>{class t extends hu{apply(n,o){return Wi(n,o)}}return t.className="Ones",t})();tt.registerClass(j7);var i5e=(()=>{class t extends hu{constructor(n){if(super(),typeof n!="object")throw new Ie(`Expected argument of type ConstantConfig but got ${n}`);if(n.value===void 0)throw new Ie(`config must have value set but got ${n}`);this.value=n.value}apply(n,o){return Pe(()=>we(Ot(this.value),Wi(n,o)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();tt.registerClass(i5e);var s5e=(()=>{class t extends hu{constructor(n){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=n.minval||this.DEFAULT_MINVAL,this.maxval=n.maxval||this.DEFAULT_MAXVAL,this.seed=n.seed}apply(n,o){return Yc(n,this.minval,this.maxval,o,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();tt.registerClass(s5e);var a5e=(()=>{class t extends hu{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new wr(`randomNormal does not support dType ${o}.`);return lD(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();tt.registerClass(a5e);var l5e=(()=>{class t extends hu{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new wr(`truncatedNormal does not support dType ${o}.`);return QI(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();tt.registerClass(l5e);var u5e=(()=>{class t extends hu{constructor(n){super(),this.gain=n.gain!=null?n.gain:1}apply(n,o){return Pe(()=>{if(n.length!==2||n[0]!==n[1])throw new Ie("Identity matrix initializer can only be used for 2D square matrices.");return we(this.gain,LC(n[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();tt.registerClass(u5e);function I3t(t,r="channelsLast"){let n,o;if(Vo(r),t.length===2)n=t[0],o=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(r==="channelsFirst"){let i=gp(t,2);n=t[1]*i,o=t[0]*i}else if(r==="channelsLast"){let i=gp(t,0,t.length-2);n=t[t.length-2]*i,o=t[t.length-1]*i}}else{let i=gp(t);n=Math.sqrt(i),o=Math.sqrt(i)}return[n,o]}var Kc=(()=>{class t extends hu{constructor(n){if(super(),n.scale<0)throw new Ie(`scale must be a positive float. Got: ${n.scale}`);this.scale=n.scale==null?1:n.scale,this.mode=n.mode==null?"fanIn":n.mode,A3t(this.mode),this.distribution=n.distribution==null?"normal":n.distribution,k3t(this.distribution),this.seed=n.seed}apply(n,o){let i=I3t(n),s=i[0],a=i[1],l=this.scale;if(this.mode==="fanIn"?l/=Math.max(1,s):this.mode==="fanOut"?l/=Math.max(1,a):l/=Math.max(1,(s+a)/2),this.distribution==="normal"){let u=Math.sqrt(l);if(o=o||"float32",o!=="float32"&&o!=="int32")throw new wr(`${this.getClassName()} does not support dType ${o}.`);return QI(n,0,u,o,this.seed)}else{let u=Math.sqrt(3*l);return Yc(n,-u,u,o,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();tt.registerClass(Kc);var iae=(()=>{class t extends Kc{constructor(n){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Kc.className}}return t.className="GlorotUniform",t})();tt.registerClass(iae);var sae=(()=>{class t extends Kc{constructor(n){super({scale:1,mode:"fanAvg",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Kc.className}}return t.className="GlorotNormal",t})();tt.registerClass(sae);var aae=(()=>{class t extends Kc{constructor(n){super({scale:2,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Kc.className}}return t.className="HeNormal",t})();tt.registerClass(aae);var lae=(()=>{class t extends Kc{constructor(n){super({scale:2,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Kc.className}}return t.className="HeUniform",t})();tt.registerClass(lae);var uae=(()=>{class t extends Kc{constructor(n){super({scale:1,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Kc.className}}return t.className="LeCunNormal",t})();tt.registerClass(uae);var cae=(()=>{class t extends Kc{constructor(n){super({scale:1,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Kc.className}}return t.className="LeCunUniform",t})();tt.registerClass(cae);var c5e=(()=>{class t extends hu{constructor(n){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=n.gain==null?this.DEFAULT_GAIN:n.gain,this.seed=n.seed}apply(n,o){return Pe(()=>{if(n.length<2)throw new wr("Shape must be at least 2D.");if(o!=="int32"&&o!=="float32"&&o!==void 0)throw new TypeError(`Unsupported data type ${o}.`);o=o;let i=Y.sizeFromShape(n.slice(0,-1)),s=n[n.length-1],a=i*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);let l=[Math.max(s,i),Math.min(s,i)],u=lD(l,0,1,o,this.seed),c=_se.qr(u,!1),f=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(s,i)*Math.min(s,i)],[Math.min(s,i)+1]);return f=we(f,p.sign()),i<s&&(f=f.transpose()),we(Ot(this.gain),f.reshape(n))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();tt.registerClass(c5e);var r5e={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function n5e(t,r={}){return O0(t,tt.SerializationMap.getMap().classNameMap,r,"initializer")}function vo(t){return iD(t)}function Qn(t){if(typeof t=="string"){let r=t in r5e?r5e[t]:t;if(r==="GlorotNormal")return new sae;if(r==="GlorotUniform")return new iae;if(r==="HeNormal")return new aae;if(r==="HeUniform")return new lae;if(r==="LeCunNormal")return new uae;if(r==="LeCunUniform")return new cae;{let n={};return n.className=r,n.config={},n5e(n)}}else return t instanceof hu?t:n5e(t)}function B7(t){return Array.isArray(t)&&Array.isArray(t[0])}function uD(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function lr(t){let r;if(Array.isArray(t)){if(t.length!==1)throw new Ie(`Expected Tensor length to be 1; got ${t.length}`);r=t[0]}else r=t;return r}function Wr(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Ie(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function cD(t){let r=0;for(let n of t)n.shape.length===0?r+=1:r+=n.shape.reduce((o,i)=>o*i);return r}re();re();var d5e="Variable",tP=class{constructor(r,n="float32",o=d5e,i=!0,s=null){this.dtype=n??"float32",this.shape=r.shape,this.id=N7(),o=o??d5e,this.originalName=M7(o),this.name=F7(this.originalName),this.trainable_=i,this.constraint=s,this.val=QU(r,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(r){return this.assertNotDisposed(),N3t(this.val,r),this.val.id!==r.id&&(this.val.assign(r),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(r){this.trainable_=r,this.val.trainable=r}};function N3t(t,r){if(t.shape.toString()!==r.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(r.shape))}function rP(t){return t.map(r=>r.read())}function fD(t){t.forEach(r=>{r[0].write(r[1])})}var so=class{constructor(r){this.dtype=r.dtype,this.shape=r.shape,r.shape!=null?this.ndim=r.shape.length:this.ndim=r.ndim,this.maxNDim=r.maxNDim,this.minNDim=r.minNDim,this.axes=r.axes||{}}},Ml=class{constructor(r,n,o,i,s,a,l){this.dtype=r,this.shape=n,this.sourceLayer=o,this.inputs=i,this.callArgs=s,this.outputTensorIndex=l,this.id=N7(),a!=null&&(this.originalName=M7(a),this.name=F7(this.originalName)),this.rank=n.length}},M3t=0,Px=class{constructor(r,n){this.callArgs=n,this.id=M3t++,this.outboundLayer=r.outboundLayer,this.inboundLayers=r.inboundLayers,this.nodeIndices=r.nodeIndices,this.tensorIndices=r.tensorIndices,this.inputTensors=r.inputTensors,this.outputTensors=r.outputTensors,this.inputMasks=r.inputMasks,this.outputMasks=r.outputMasks,this.inputShapes=r.inputShapes,this.outputShapes=r.outputShapes;for(let o of r.inboundLayers)o?.outboundNodes.push(this);r.outboundLayer.inboundNodes.push(this)}getConfig(){let r=[];for(let n of this.inboundLayers)n!=null?r.push(n.name):r.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:r,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},F3t=0,hr=class extends tt.Serializable{constructor(r={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=F3t++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=r.name;if(!n){let o=this.getClassName();n=hp(o)+"_"+Aw(o)}if(this.name=n,this.trainable_=r.trainable==null?!0:r.trainable,r.inputShape!=null||r.batchInputShape!=null){let o;if(r.batchInputShape!=null)o=r.batchInputShape;else if(r.inputShape!=null){let s=null;r.batchSize!=null&&(s=r.batchSize),o=[s].concat(r.inputShape)}this.batchInputShape=o;let i=r.dtype;i==null&&(i=r.inputDType),i==null&&(i="float32"),this.dtype=i}r.weights!=null?this.initialWeights=r.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(r,n){return r.name+"_ib-"+n.toString()}getNodeAtIndex(r,n){if(this.inboundNodes.length===0)throw new uu(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=r)throw new Ie(`Asked to get ${n} at node ${r}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[r]}getInputAt(r){return ta(this.getNodeAtIndex(r,"input").inputTensors)}getOutputAt(r){return ta(this.getNodeAtIndex(r,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new md(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new md(`Layer ${this.name} is not connected, no input to return.`);return ta(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new md(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new md(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ta(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(r=>r())}get updates(){return this._updates}get built(){return this._built}set built(r){this._built=r}get trainable(){return this.trainable_}set trainable(r){this._trainableWeights.forEach(n=>n.trainable=r),this.trainable_=r}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(r=>r.trainable):[]}set trainableWeights(r){this._trainableWeights=r}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(r=>!r.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(r){this._nonTrainableWeights=r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(r){let n=Rn(r);if(this.inputSpec==null||this.inputSpec.length===0)return;let o=Rn(this.inputSpec);if(n.length!==o.length)throw new Ie(`Layer ${this.name} expects ${o.length} inputs, but it received ${n.length} input tensors. Input received: ${r}`);for(let i=0;i<n.length;i++){let s=n[i],a=o[i];if(a==null)continue;let l=s.rank;if(a.ndim!=null&&l!==a.ndim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${l}`);if(a.maxNDim!=null&&l>a.maxNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${l}`);if(a.minNDim!=null&&l<a.minNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${l}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new Ie(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){let u=s.shape;for(let c in a.axes){let f=Number(c),d=a.axes[c],p=f>=0?u[f]:u[u.length+f];if(d!=null&&[d,null].indexOf(p)===-1)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${d} but got shape ${u}.`)}}if(a.shape!=null)for(let u=0;u<a.shape.length;++u){let c=a.shape[u],f=s.shape[u];if(c!=null&&f!=null&&c!==f)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(r,n){return r}invokeCallHook(r,n){this._callHook!=null&&this._callHook(r,n)}setCallHook(r){this._callHook=r}clearCallHook(){this._callHook=null}apply(r,n){n=n||{},this.assertNotDisposed();let o=Rn(r),i=P3t(r),s=L3t(r);if(i===s)throw new Ie("Arguments to apply() must be all SymbolicTensors or all Tensors");return $h(this.name,()=>{if(!this.built){this.assertInputCompatibility(r);let a=[];for(let l of Rn(r))a.push(l.shape);this.build(ta(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(r),s){let a=this.call(r,n);this.supportsMasking&&this.setMaskMetadata(r,a);let l=Rn(a),u=[];for(let c of l)o.indexOf(c)!==-1&&(c=c.clone()),u.push(c);if(a=ta(u),this.activityRegularizer!=null)throw new wr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{let a=O3t(r),l=this.computeOutputShape(a),u,c=R3t(r);if(this.warnOnIncompatibleInputShape(Array.isArray(r)?a[0]:a),l!=null&&l.length>0&&Array.isArray(l[0])?u=l.map((f,d)=>new Ml(c,f,this,Rn(r),n,this.name,d)):u=new Ml(c,l,this,Rn(r),n,this.name),this.addInboundNode(r,u,null,null,a,l,n),this._refCount++,this.activityRegularizer!=null)throw new wr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(r){if(this.batchInputShape!=null)if(r.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(r)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((o,i)=>{o!=null&&r[i]!=null&&r[i]!==o&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(r)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new md(`The layer ${this.name} has never been called and thus has no defined output shape.`);let r=[];for(let n of this.inboundNodes){let o=JSON.stringify(n.outputShapes);r.indexOf(o)===-1&&r.push(o)}if(r.length===1){let n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new md(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new uu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return cD(this.weights)}build(r){this.built=!0}getWeights(r=!1){return rP(r?this.trainableWeights:this.weights)}setWeights(r){Pe(()=>{let n=this.weights;if(n.length!==r.length)throw new Ie(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${r.length}, but the layer was expecting ${n.length} weights. Provided weights: ${r}...`);if(n.length===0)return;let o=[],i=rP(n);for(let s=0;s<i.length;++s){let a=i[s],l=n[s],u=r[s];if(!Y.arraysEqual(a.shape,u.shape))throw new Ie(`Layer weight shape ${a.shape} not compatible with provided weight shape ${u.shape}`);o.push([l,u])}fD(o)})}addWeight(r,n,o,i,s,a,l,u){if(this._addedWeightNames.indexOf(r)!==-1)throw new Ie(`Duplicate weight name ${r} for layer ${this.name}`);this._addedWeightNames.push(r),o==null&&(o="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():Qn("zeros"));let c=i.apply(n,o),f=new tP(c,o,r,a,l);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(f.read())),a==null&&(a=!0),a?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(r){this.fastWeightInitDuringBuild=r}addLoss(r){r==null||Array.isArray(r)&&r.length===0||(r=Rn(r),this._losses!==void 0&&this._losses!==null&&this.losses.push(...r))}computeOutputShape(r){return r}computeMask(r,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(o=>{if(o!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(r,n,o){if(!this.supportsMasking)return;let i=this.computeMask(r,o),s=Rn(n),a=Rn(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let l=0;l<s.length;l++)s[l].kerasMask=a[l]}addInboundNode(r,n,o,i,s,a,l=null){let u=Rn(r);n=Rn(n),o=Rn(o),i=Rn(i),s=uD(s),a=uD(a);let c=[],f=[],d=[];for(let p of u)c.push(p.sourceLayer),f.push(p.nodeIndex),d.push(p.tensorIndex);new Px({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:d,inputTensors:u,outputTensors:n,inputMasks:o,outputMasks:i,inputShapes:s,outputShapes:a},l);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){let r={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(r.batchInputShape=this.batchInputShape),this.dtype!=null&&(r.dtype=this.dtype),r}disposeWeights(){return this.weights.forEach(r=>r.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let r=0;return--this._refCount===0&&(r=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:r}}};function O3t(t){t=Rn(t);let r=[];for(let n of t)r.push(n.shape);return ta(r)}function R3t(t){return"float32"}function fae(t,r,n){if((r==null||n!=null&&n>0)&&(r=t.sourceLayer,n=t.nodeIndex),r.inboundNodes.length===0)return[t];{let o=r.inboundNodes[n];if(o.inboundLayers.length===0)return o.inputTensors;{let i=[];for(let s=0;s<o.inboundLayers.length;s++){let a=o.inputTensors[s],l=o.inboundLayers[s],u=o.nodeIndices[s],c=fae(a,l,u);for(let f of c)i.indexOf(f)===-1&&i.push(f)}return i}}}function P3t(t){let r=!0;for(let n of Rn(t))if(!(n instanceof Ml)){r=!1;break}return r}function L3t(t){let r=!0;for(let n of Rn(t))if(n instanceof Ml){r=!1;break}return r}var Iw=(()=>{class t extends hr{constructor(n){if(super({dtype:n.dtype,name:n.name!=null?n.name:Aw("input").toString()}),n.batchSize==null&&(n.batchSize=null),n.sparse==null&&(n.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=n.sparse,n.inputShape!=null&&n.batchInputShape!=null)throw new Ie("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let o=n.batchInputShape;if(o==null){if(n.inputShape==null)throw new Ie("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");o=[n.batchSize].concat(n.inputShape)}else if(n.batchSize!=null)throw new Ie("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let i=n.dtype||"float32";this.batchInputShape=o,this.dtype=i,this.inputSpec=[{shape:o}];let s=new Ml(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Px({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[o],outputShapes:[o]})}apply(n,o){throw new Ie(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();tt.registerClass(Iw);function $7(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Ie("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let r=t.batchShape;t.shape!=null&&r==null&&(r=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Iw({batchInputShape:r,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function j3t(t,r){if(t.dtype==null||t.dtype===r.dtype)return r;try{return rt(r,t.dtype)}catch{throw new Ie(`The dtype of the feed (${r.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var P0=class t{constructor(r){if(this.id2Value={},this.id2Mask={},this.name2Id={},r instanceof t)for(let n in r.id2Value)this.id2Value[n]=r.id2Value[n],n in r.id2Mask&&(this.id2Mask[n]=r.id2Mask[n]);else{if(r==null)return;for(let n of r)this.add(n.key,n.value)}}add(r,n,o){if(this.id2Value[r.id]==null)this.id2Value[r.id]=j3t(r,n),this.name2Id[r.name]=r.id,o!=null&&(this.id2Mask[r.id]=o);else throw new Ie(`Duplicate key: name=${r.name}, id=${r.id}`);return this}addFeed(r){this.add(r.key,r.value)}hasKey(r){return this.id2Value[r.id]!=null}names(){return Object.keys(this.name2Id)}getValue(r){if(r instanceof Ml){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Value[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Value[n]}}getMask(r){if(r instanceof Ml){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Mask[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Cr(this.id2Mask)}},z7=new Z3,U7=new Z3;function h5e(t){z7?.setMaxEntries(t),U7?.setMaxEntries(t)}function tE(t,r,n,o){let i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],l=a.map(m=>m.name),u=[],c=r.names();for(let m of l)c.indexOf(m)!==-1?u.push(r.getValue(m)):u.push(null);o!=null&&(o.maxNumTensors=-1/0,o.minNumTensors=1/0);let f=l.join(",")+"|"+r.names().sort().join(","),d=z7.get(f),p;if(d==null){let m=B3t(a,r);d=m.sorted,p=m.recipientCounts,z7.put(f,d),U7.put(f,p)}p={},i||Object.assign(p,U7.get(f));let h=new P0(r);for(let m=0;m<d.length;++m){if(o!=null){let T=pI().numTensors;T>o.maxNumTensors&&(o.maxNumTensors=T),T<o.minNumTensors&&(o.minNumTensors=T)}let g=d[m],y=g.sourceLayer;if(y instanceof Iw)continue;let b=[],x=[],v=[],w=!1;for(let T of g.inputs){let I=h.getValue(T),k=h.getMask(T);b.push(I),x.push(k),k!=null&&(w=!0),i||(p[T.name]--,p[T.name]===0&&!r.hasKey(T)&&l.indexOf(T.name)===-1&&!I.isDisposed&&T.sourceLayer.stateful!==!0&&v.push(I))}w&&(n=n||{},n.mask=x[0]);let _=Rn(y.apply(b,n)),S=null;y.supportsMasking&&(S=y.computeMask(b,x));let C=z3t(g),E=Array.isArray(C)?C:[C];for(let T=0;T<E.length;++T){h.hasKey(E[T])||h.add(E[T],_[T],Array.isArray(S)?S[0]:S);let I=l.indexOf(E[T].name);I!==-1&&(u[I]=_[T])}i||Cr(v)}return h.disposeMasks(),s?u:u[0]}function B3t(t,r){Y.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],o={};if(t.length===1){let i=p5e(t[0],r);n=i.sorted,o=i.recipientMap}else{let i=new Set;for(let s of t){let{sorted:a,recipientMap:l}=p5e(s,r);for(let u of a)i.has(u.name)||(n.push(u),i.add(u.name));for(let u in l)o[u]==null&&(o[u]=new Set),l[u].forEach(c=>o[u].add(c))}}return{sorted:n,recipientCounts:$3t(o)}}function $3t(t){let r={};for(let n in t)r[n]=t[n].size;return r}function p5e(t,r){let n=new Set,o=[],i={};for(let l of r.names())n.add(l);let s=[],a=[];for(s.push(t);s.length>0;){let l=s[s.length-1];if(n.has(l.name)){s.pop();continue}let u=a[a.length-1]===s.length-1;if(l.inputs.length===0||u)s.pop(),o.push(l),n.add(l.name),u&&a.pop();else{a.push(s.length-1);for(let c of l.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(l.name),!n.has(c.name)&&s.push(c)}}return{sorted:o,recipientMap:i}}function z3t(t){let r;if(t.sourceLayer.inboundNodes.length===1)r=t.sourceLayer.output;else{let n=null;for(let o=0;o<t.sourceLayer.inboundNodes.length;++o)for(let i of t.sourceLayer.inboundNodes[o].outputTensors)if(i.id===t.id){n=o;break}r=t.sourceLayer.getOutputAt(n)}return r}var U3t=Me();U3t.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,h5e);re();re();re();function dae(t,r){return Pe(()=>Zn(It(we(t,t),r,!0)))}var rE=class extends tt.Serializable{getConfig(){return{}}},y5e=(()=>{class t extends rE{constructor(n){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>{let o=dae(n,this.axis),i=Zs(o,0,this.maxValue);return we(n,Tt(i,Ke(as(),o)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();tt.registerClass(y5e);var b5e=(()=>{class t extends rE{constructor(n){super(),this.defaultAxis=0,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>Tt(n,Ke(as(),dae(n,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();tt.registerClass(b5e);var x5e=(()=>{class t extends rE{apply(n){return _a(n)}}return t.className="NonNeg",t})();tt.registerClass(x5e);var v5e=(()=>{class t extends rE{constructor(n){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=n.minValue!=null?n.minValue:this.defaultMinValue,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.rate=n.rate!=null?n.rate:this.defaultRate,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>{let o=dae(n,this.axis),i=Ke(we(this.rate,Zs(o,this.minValue,this.maxValue)),we(1-this.rate,o));return we(n,Tt(i,Ke(as(),o)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();tt.registerClass(v5e);var m5e={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ii(t){return iD(t)}function g5e(t,r={}){return O0(t,tt.SerializationMap.getMap().classNameMap,r,"constraint")}function si(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in m5e?m5e[t]:t,config:{}};return g5e(n)}else return t instanceof rE?t:g5e(t)}var Mw={};fn(Mw,{Layer:()=>hr,RNN:()=>L0,RNNCell:()=>Bx,activation:()=>ELt,add:()=>OLt,alphaDropout:()=>yjt,average:()=>RLt,averagePooling1d:()=>Dle,averagePooling2d:()=>Nle,averagePooling3d:()=>Mle,avgPool1d:()=>GLt,avgPool2d:()=>qLt,avgPool3d:()=>YLt,avgPooling1d:()=>WLt,avgPooling2d:()=>HLt,avgPooling3d:()=>XLt,batchNormalization:()=>zLt,bidirectional:()=>ujt,categoryEncoding:()=>_jt,centerCrop:()=>vjt,concatenate:()=>PLt,conv1d:()=>gLt,conv2d:()=>yLt,conv2dTranspose:()=>bLt,conv3d:()=>xLt,conv3dTranspose:()=>vLt,convLstm2d:()=>ijt,convLstm2dCell:()=>sjt,cropping2D:()=>_Lt,dense:()=>TLt,depthwiseConv2d:()=>CLt,dot:()=>$Lt,dropout:()=>ALt,elu:()=>cLt,embedding:()=>FLt,flatten:()=>ILt,gaussianDropout:()=>gjt,gaussianNoise:()=>mjt,globalAveragePooling1d:()=>KLt,globalAveragePooling2d:()=>ZLt,globalMaxPool1d:()=>fjt,globalMaxPool2d:()=>djt,globalMaxPooling1d:()=>Y5e,globalMaxPooling2d:()=>X5e,gru:()=>JLt,gruCell:()=>ejt,input:()=>_ae,inputLayer:()=>uLt,layerNormalization:()=>ULt,leakyReLU:()=>dLt,lstm:()=>tjt,lstmCell:()=>rjt,masking:()=>bjt,maxPool1d:()=>pjt,maxPool2d:()=>hjt,maxPooling1d:()=>K5e,maxPooling2d:()=>Z5e,maxPooling3d:()=>QLt,maximum:()=>LLt,minimum:()=>jLt,multiply:()=>BLt,permute:()=>MLt,prelu:()=>pLt,randomWidth:()=>Sjt,reLU:()=>fLt,repeatVector:()=>DLt,rescaling:()=>xjt,reshape:()=>NLt,resizing:()=>wjt,rnn:()=>ajt,separableConv2d:()=>wLt,simpleRNN:()=>njt,simpleRNNCell:()=>ojt,softmax:()=>hLt,spatialDropout1d:()=>kLt,stackedRNNCells:()=>ljt,thresholdedReLU:()=>mLt,timeDistributed:()=>cjt,upSampling2d:()=>SLt,zeroPadding2d:()=>VLt});re();re();function Lx(t){return je(this,null,function*(){if(t==null)return;let r=[],n=[],o=[];for(let i in t){let s=t[i];if(typeof s!="number"){let a=s;r.push(a.data()),n.push(i),o.push(a)}}if(r.length>0){let i=yield Promise.all(r);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Cr(o)}})}function V7(t){if(t!=null)for(let r in t){let n=t[r];typeof n!="number"&&n.dispose()}}var W3t=125,Dw=class{constructor(){this.validationData=null}setParams(r){this.params=r}onEpochBegin(r,n){return je(this,null,function*(){})}onEpochEnd(r,n){return je(this,null,function*(){})}onBatchBegin(r,n){return je(this,null,function*(){})}onBatchEnd(r,n){return je(this,null,function*(){})}onTrainBegin(r){return je(this,null,function*(){})}onTrainEnd(r){return je(this,null,function*(){})}setModel(r){}},G7=class{constructor(r,n=10){r==null&&(r=[]),this.callbacks=r,this.queueLength=n}append(r){this.callbacks.push(r)}setParams(r){for(let n of this.callbacks)n.setParams(r)}setModel(r){for(let n of this.callbacks)n.setModel(r)}onEpochBegin(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochBegin(r,n)})}onEpochEnd(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochEnd(r,n)})}onBatchBegin(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchBegin(r,n)})}onBatchEnd(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchEnd(r,n)})}onTrainBegin(r){return je(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainBegin(r)})}onTrainEnd(r){return je(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainEnd(r)})}},pae=class extends Dw{constructor(){super()}onEpochBegin(r){return je(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(r,n){return je(this,null,function*(){n==null&&(n={});let o=n.size==null?0:n.size;this.seen+=o;for(let i in n){let s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*o;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;let l=Pe(()=>Ke(this.totals[i],we(s,o)));this.totals[i]=l,a?.dispose()}}})}onEpochEnd(r,n){return je(this,null,function*(){if(n!=null)for(let o of this.params.metrics)this.totals[o]!=null&&(typeof this.totals[o]=="number"?n[o]=this.totals[o]/this.seen:Pe(()=>{let i=we(Tt(1,this.seen),this.totals[o]);n[o]=i,this.totals[o].dispose(),Ms(n[o])}))})}},W7=class extends Dw{onTrainBegin(r){return je(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(r,n){return je(this,null,function*(){n==null&&(n={}),this.epoch.push(r);for(let o in n)this.history[o]==null&&(this.history[o]=[]),this.history[o].push(n[o])})}syncData(){return je(this,null,function*(){let r=[],n=[],o=[];for(let s in this.history){let a=this.history[s];for(let l=0;l<a.length;++l)if(typeof a[l]!="number"){let u=a[l];r.push(u.data()),n.push(s),o.push(l)}}let i=yield Promise.all(r);for(let s=0;s<i.length;++s)this.history[n[s]][o[s]].dispose(),this.history[n[s]][o[s]]=i[s][0]})}},q7=class extends Dw{constructor(r,n){if(super(),this.currentEpoch=0,this.nowFunc=r.nowFunc,this.nextFrameFunc=r.nextFrameFunc||oD,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=W3t),this.yieldEvery==="never"&&r.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Y.isNumber(this.yieldEvery)&&(this.maybeWait=j4e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=r.onTrainBegin,this.trainEnd=r.onTrainEnd,this.epochBegin=r.onEpochBegin,this.epochEnd=r.onEpochEnd,this.batchBegin=r.onBatchBegin,this.batchEnd=r.onBatchEnd,this.yield=r.onYield}maybeWait(r,n,o){return je(this,null,function*(){let i=[];this.yield!=null&&(yield Lx(o),i.push(this.yield(r,n,o))),i.push(this.nextFrameFunc()),yield Promise.all(i)})}onEpochBegin(r,n){return je(this,null,function*(){this.currentEpoch=r,this.epochBegin!=null&&(yield Lx(n),yield this.epochBegin(r,n))})}onEpochEnd(r,n){return je(this,null,function*(){let o=[];this.epochEnd!=null&&(yield Lx(n),o.push(this.epochEnd(r,n))),this.yieldEvery==="epoch"&&o.push(this.nextFrameFunc()),yield Promise.all(o)})}onBatchBegin(r,n){return je(this,null,function*(){this.batchBegin!=null&&(yield Lx(n),yield this.batchBegin(r,n))})}onBatchEnd(r,n){return je(this,null,function*(){let o=[];this.batchEnd!=null&&(yield Lx(n),o.push(this.batchEnd(r,n))),this.yieldEvery==="batch"?o.push(this.nextFrameFunc()):Y.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,r,n)),yield Promise.all(o)})}onTrainBegin(r){return je(this,null,function*(){this.trainBegin!=null&&(yield Lx(r),yield this.trainBegin(r))})}onTrainEnd(r){return je(this,null,function*(){this.trainEnd!=null&&(yield Lx(r),yield this.trainEnd(r))})}};function H7(t,r){return t==null&&(t={}),t instanceof Dw?[t]:Array.isArray(t)&&t[0]instanceof Dw?t:Rn(t).map(o=>new q7(o,r))}var w5e=(()=>{class t{constructor(){}static registerCallbackConstructor(n,o){Y.assert(n>=0&&Number.isInteger(n),()=>`Verbosity level is expected to be an integer >= 0, but got ${n}`),t.checkForDuplicate(o),t.constructors[n]==null&&(t.constructors[n]=[]),t.constructors[n].push(o)}static checkForDuplicate(n){for(let o in t.constructors)t.constructors[+o].forEach(s=>{if(s===n)throw new Ie("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(n){let o=[];for(let i in t.constructors){let s=+i;n>=s&&o.push(...t.constructors[s])}return o.map(i=>new i)}}return t.constructors={},t})();function Y7(t,r,n,o,i,s,a,l,u){let c=new W7,f=[new pae,...w5e.createCallbacks(r)];t!=null&&f.push(...t),f.push(c);let d=new G7(f);return d.setParams({epochs:n,initialEpoch:o,samples:i,steps:s,batchSize:a,verbose:r,doValidation:l,metrics:u}),{callbackList:d,history:c}}re();re();re();function tc(t,r={},n=!1){return O0(t,tt.SerializationMap.getMap().classNameMap,r,"layer",n)}re();re();function nP(t,r){return Pe(()=>{t.dtype!=="float32"&&(t=rt(t,"float32"));let n=It(eE(t),r,!0),o=ap(n.shape,as()),i=Zn(Ju(n,o));return Tt(t,i)})}function nE(t,r){return Pe(()=>bo(eE(wt(r,t)),-1))}function iP(t,r){return Pe(()=>bo(Ao(wt(r,t)),-1))}function sP(t,r){return Pe(()=>{let n=wt(t,r),o=Zs(Ao(t),as(),Number.MAX_VALUE),i=Ao(Tt(n,o));return we(100,bo(i,-1))})}function q3t(t,r){return Pe(()=>{let n=Zs(r,as(),Number.MAX_VALUE),o=Js(Ke(1,n)),i=Zs(t,as(),Number.MAX_VALUE),s=Js(Ke(1,i));return bo(eE(wt(o,s)),-1)})}function H3t(t,r){return Pe(()=>{let n=Ju(0,wt(1,we(t,r)));return bo(eE(n),-1)})}function Y3t(t,r){return Pe(()=>{let n=Ju(0,wt(1,we(t,r)));return bo(n,-1)})}function X3t(t,r){return Pe(()=>{let n=It(we(t,r),-1),o=Qs(we(wt(1,t),r),-1);return Ju(0,Ke(1,wt(o,n)))})}function K3t(t,r){return Pe(()=>{let n=Math.log(2),o=wt(r,t),i=wt(Ke(o,Ph(we(-2,o))),n);return bo(i,-1)})}function oE(t,r,n=!1){return Pe(()=>{if(n)r=hw(r);else{let o=It(r,r.shape.length-1,!0);r=Tt(r,o)}return r=Zs(r,as(),1-as()),Zr(It(we(rt(t,"float32"),Js(r)),r.shape.length-1))})}function dD(t,r,n=!1){return Pe(()=>{let o=rt(A0(X4e(t)),"int32");r=Zs(r,as(),1-as());let i=r.shape,s=Se(D0(o,i[i.length-1]),i);return oE(s,r,n)})}function Z3t(t,r){if(!Y.arraysEqual(t.shape,r.shape))throw new Ie(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(r.shape)}`);return Pe(()=>{let n=_a(r),o=Zr(Ao(r));return Ke(wt(n,we(r,t)),aw(xi(o)))})}function pD(t,r){return Pe(()=>{let n;return n=Zs(r,as(),1-as()),n=Js(Tt(n,wt(1,n))),bo(Z3t(t,n),-1)})}function Q3t(t,r){return Pe(()=>{let n=Zs(t,as(),1),o=Zs(r,as(),1);return It(we(t,Js(Tt(n,o))),-1)})}function J3t(t,r){return Pe(()=>{let n=Js(Ke(as(),r));return bo(wt(r,we(t,n)),-1)})}function X7(t,r){return Pe(()=>{let n=nP(t,-1),o=nP(r,-1),i=we(n,o);return Zr(It(i,-1))})}var oP={meanSquaredError:nE,meanAbsoluteError:iP,meanAbsolutePercentageError:sP,meanSquaredLogarithmicError:q3t,squaredHinge:H3t,hinge:Y3t,categoricalHinge:X3t,logcosh:K3t,categoricalCrossentropy:oE,sparseCategoricalCrossentropy:dD,binaryCrossentropy:pD,kullbackLeiblerDivergence:Q3t,poisson:J3t,cosineProximity:X7};function K7(t){if(typeof t=="string"){if(t in oP)return oP[t];let r=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ie(r)}else return t}re();re();function Q7(t,r){return Pe(()=>{let n=we(.5,Os(r)),o=Nl(ni(r,n),t.dtype);return bo(Il(t,o),-1)})}function J7(t,r){return Pe(()=>Nl(Il(qc(t,-1),qc(r,-1)),"float32"))}function ePt(t,r){return Pe(()=>rt(It(Ha(Il(t,1),Il(r,1))),"float32"))}function tPt(t,r){return Pe(()=>rt(It(Ha(Il(t,0),Il(r,1))),"float32"))}function S5e(t,r){return Pe(()=>{let n=ePt(t,r),o=tPt(t,r),i=Ke(n,o);return rt(yo(ni(i,0),Tt(n,i),0),"float32")})}function hae(t,r){return pD(t,r)}function mae(t,r){return t.rank===r.rank&&(t=Xc(t,[t.rank-1])),r=qc(r,-1),r.dtype!==t.dtype&&(r=rt(r,t.dtype)),rt(Il(t,r),"float32")}var rPt=nE,nPt=nE,oPt=iP,iPt=iP,sPt=sP,aPt=sP,e9=oE,lPt=X7,gae=dD,Z7={binaryAccuracy:Q7,categoricalAccuracy:J7,precision:S5e,categoricalCrossentropy:e9,sparseCategoricalCrossentropy:gae,mse:rPt,MSE:nPt,mae:oPt,MAE:iPt,mape:sPt,MAPE:aPt,cosine:lPt};function C5e(t){if(typeof t=="string"&&t in Z7)return Z7[t];if(typeof t!="string"&&t!=null)return t;throw new Ie(`Unknown metric ${t}`)}function aP(t){if(gd(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let r;for(let n of Object.keys(oP))if(oP[n]===t){r=n;break}if(r!==void 0)return r;for(let n of Object.keys(Z7))if(Z7[n]===t){r=n;break}return r!==void 0?r:t.name}}re();function T5e(t){let r={Adagrad:()=>fp.adagrad(.01),Adadelta:()=>fp.adadelta(1,.95,as()),Adam:()=>fp.adam(.001,.9,.999,as()),Adamax:()=>fp.adamax(.002,.9,.999,as(),0),RMSProp:()=>fp.rmsprop(.001,.9,0,as()),SGD:()=>fp.sgd(.01)};if(r.adagrad=r.Adagrad,r.adadelta=r.Adadelta,r.adam=r.Adam,r.adamax=r.Adamax,r.rmsprop=r.RMSProp,r.sgd=r.SGD,t in r)return r[t]();throw new Ie(`Unknown Optimizer ${t}`)}function bae(t,r,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!yae(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let o=JSON.stringify(t);o.length>1048576&&console.warn(`User-defined metadata of model "${r}" is too large in size (length=${o.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function yae(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let r=Object.keys(t);for(let n of r)if(typeof n!="string"||!yae(t[n]))return!1;return!0}else if(Array.isArray(t)){for(let r of t)if(!yae(r))return!1;return!0}else return!1;else{let r=typeof t;return r==="string"||r==="number"||r==="boolean"}}function A5e(t,r,n,o=console.log){let i=fPt(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(r=r||90,n=n||[.32,.61,.89,1]):(r=r||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(r*f)));let a;if(!i){s.push("Receives inputs"),a=[];for(let f in t.nodesByDepth)a.push(...t.nodesByDepth[f])}o("_".repeat(r)),t9(s,n,o),o("=".repeat(r));let l=t.layers;for(let f=0;f<l.length;++f)i?dPt(l[f],n,o):pPt(l[f],n,a,o),o((f===l.length-1?"=":"_").repeat(r));t.checkTrainableWeightsConsistency();let u=cPt(t),c=cD(t.nonTrainableWeights);o(`Total params: ${u+c}`),o(`Trainable params: ${u}`),o(`Non-trainable params: ${c}`),o("_".repeat(r))}function cPt(t){let r;return t.collectedTrainableWeights!=null?r=cD(t.collectedTrainableWeights):r=cD(t.trainableWeights),r}function fPt(t){let r=!0,n=[],o=[];for(let i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(let i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){r=!1;break}o.push(...i)}if(r)for(let i of t.layers){let s=!1;for(let a of i.inboundNodes)if(o.indexOf(a)!==-1)if(s){r=!1;break}else s=!0;if(!r)break}return r}function t9(t,r,n=console.log){let o="";for(let i=0;i<t.length;++i)i>0&&(o=o.slice(0,o.length-1)+" "),o+=t[i],o=o.slice(0,r[i]),o+=" ".repeat(r[i]-o.length);n(o)}function dPt(t,r,n){let o,i;try{i=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=t.name,a=t.getClassName(),l=[`${s} (${a})`,i,o,t.countParams().toString()];t9(l,r,n)}function pPt(t,r,n,o){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}let a=[];for(let d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,m=d.nodeIndices[p],g=d.tensorIndices[p];a.push(`${h}[${m}][${g}]`)}let l=t.name,u=t.getClassName(),c=a.length===0?"":a[0],f=[`${l} (${u})`,s,i,t.countParams().toString(),c];t9(f,r,o);for(let d=1;d<a.length;++d)t9(["","","","",a[d]],r,o)}function k5e(t,r,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&r===0&&typeof n=="string"}function hD(t,r){if(t===null)return null;if(typeof t=="string")return Fx(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];k5e(r,i,s)?n.push(s):n.push(hD(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o];if(o==="name"&&typeof i=="string")n[o]=i;else{let s=Fx(o);n[s]=hD(i,s)}}return n}}function r9(t,r){if(t==null)return null;if(typeof t=="string")return hp(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];k5e(r,i,s)?n.push(s):n.push(r9(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o],s=hp(o);(o==="name"||o==="className")&&typeof i=="string"?n[s]=i:n[s]=r9(i,o)}return n}}var mD="4.19.0";re();var hPt=t=>{let r=Object.keys(t);if(r.length===0)return!1;let n=r[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},n9=class t extends hr{constructor(r){if(super({}),this.containerNodes=new Set,this.name=r.name,this.name==null){let x=this.getClassName().toLowerCase();this.name=Aw(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(r.inputs)?this.inputs=r.inputs.slice():this.inputs=[r.inputs],Array.isArray(r.outputs)?this.outputs=r.outputs.slice():this.outputs=[r.outputs],mp(this.inputs).length!==this.inputs.length)throw new Ie(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);mp(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let x of this.outputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(_)}for(let x of this.inputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;gd(w===0,"input layer has >1 nodes"),gd(_===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){let v=this.inputLayers[x];if(!(v instanceof Iw))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${r.inputs}. Input ${x} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(let x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);let n={},o={},i={},s={},a={},l=[],u=(x,v,w,_,S,C)=>{(_==null||S==null||C==null)&&(_=x.sourceLayer,S=x.nodeIndex,C=x.tensorIndex);let E=_.inboundNodes[S];if(w.indexOf(E)!==-1)throw new uu(`The tensor ${x.name} at layer "${_.name}" is part of a cycle.`);if(v.indexOf(E)!==-1)return;this.containerNodes.add(t.nodeKey(_,S)),_.id in a||(a[_.id]=Object.keys(a).length),w.indexOf(E)===-1&&w.push(E);let T=E.inboundLayers.length;for(let I=0;I<T;I++){let k=E.inputTensors[I],F=E.inboundLayers[I],D=E.nodeIndices[I],L=E.tensorIndices[I];u(k,v,w,F,D,L)}for(v.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);l.push(E)},c=[],f=[];for(let x of this.outputs)u(x,c,f);let d=l.slice().reverse();for(let x of d){o[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id],w=i[x.outboundLayer.id]==null?0:i[x.outboundLayer.id];v=Math.max(v,w),i[x.outboundLayer.id]=v,s[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let _=0;_<x.inboundLayers.length;_++){let S=x.inboundLayers[_],C=x.nodeIndices[_],E=S.inboundNodes[C],T=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(v+1,T),o[E.id]=E}}let p={};for(let x in n){let v=n[x];v in p||(p[v]=[]),p[v].push(o[x])}let h={};for(let x in i){let v=i[x];v in h||(h[v]=[]),h[v].push(s[x])}let m=Object.keys(h).map(x=>parseInt(x,10)).sort(Q3);this.layers=[];for(let x of m){let v=h[x];v.sort((w,_)=>{let S=a[w.id],C=a[_.id];return S<C?-1:S>C?1:0});for(let w of v)w instanceof t&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=h,m=Object.keys(p).map(x=>parseInt(x,10)).sort(Q3);let g=this.inputs.slice(),y=[];for(let x of m)for(let v of p[x]){let w=v.outboundLayer;if(w!=null){for(let _ of v.inputTensors)if(g.indexOf(_)===-1)throw new uu(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${w.name}". The following previous layers were accessed without issue: ${y}`);for(let _ of v.outputTensors)g.push(_);y.push(w.name)}}this.nodesByDepth=p;let b=this.layers.map(x=>x.name);for(let x of b){let v=b.filter(w=>w===x).length;if(v!==1)throw new uu(`The name "${x}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new Px({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let r={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let n of this.layers)r.numDisposedVariables+=n.dispose().numDisposedVariables;for(let n of this.internalContainerRefs)r.numDisposedVariables+=n.dispose().numDisposedVariables}return r.refCountAfterDispose=this._refCount,r}get trainable(){return this.trainable_}set trainable(r){this.layers.forEach(n=>{n._trainableWeights.forEach(o=>o.trainable=r)}),this.trainable_=r}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ie("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let r=[];for(let n of this.layers)r=r.concat(n.trainableWeights);return r}get nonTrainableWeights(){let r=[];for(let n of this.layers)r.push(...n.nonTrainableWeights);if(!this.trainable){let n=[];for(let o of this.layers)n.push(...o.trainableWeights);return n.concat(r)}return r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(r,n=!0){let o={},i=0,s=hPt(r);s&&this.parseWeights(r);for(let l of this.layers)for(let[u,c]of l.weights.entries()){let f=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${u}`:c.originalName;if(o[f]!=null)throw new Ie(`Duplicate weight name: ${f}`);o[f]=c,i++}let a=[];for(let l in r){let u=l;if(o[l]==null){let c=l.split("/");u=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(o[u]!=null)a.push([o[u],r[l]]);else if(n)throw new Ie(`Provided weight data has no target variable: ${l}`);delete o[u]}if(n){let l=[];for(let u in o)l.push(u);if(l.length>0)throw new Ie(`${l.length} of ${i} weights are not set: ${l}`)}fD(a)}parseWeights(r){for(let n in Object.keys(r)){let o=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=o.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(r[s]=r[n],delete r[n])}}updatedConfig(){let r=this.getConfig(),n={};return n.className=this.getClassName(),n.config=r,n.kerasVersion=`tfjs-layers ${mD}`,n.backend="TensorFlow.js",n}toJSON(r,n=!0){let o=r9(this.updatedConfig());return n?JSON.stringify(o):o}call(r,n){return Pe(()=>{r=Rn(r);let o=new P0;for(let i=0;i<this.inputs.length;++i)o.add(this.inputs[i],r[i]);return tE(this.outputs,o,n)})}computeMask(r,n){return Pe(()=>{r=Rn(r);let o;return n==null?o=pp(null,r.length):o=Rn(n),this.runInternalGraph(r,o)[1]})}computeOutputShape(r){let n=uD(r);if(n.length!==this.inputLayers.length)throw new Ie(`Invalid inputShape argument ${r}: model has ${this.inputLayers.length} tensor inputs.`);let o={};for(let l=0;l<n.length;l++){let u=this.inputLayers[l],c=n[l],f=u.name+"_0_0";o[f]=c}let i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Q3);if(i.length>1)for(let l of i){let u=this.nodesByDepth[l];for(let c of u){let f=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(f.id)!==-1)continue;let d=[];for(let g=0;g<c.inboundLayers.length;g++){let y=c.inboundLayers[g],b=c.nodeIndices[g],x=c.tensorIndices[g],v=`${y.name}_${b}_${x}`,w=o[v];d.push(w)}let p=f.computeOutputShape(ta(d)),h=uD(p),m=f.inboundNodes.indexOf(c);for(let g=0;g<h.length;g++){let y=`${f.name}_${m}_${g}`;o[y]=h[g]}}}let s=[],a=[];for(let l=0;l<this.outputLayers.length;l++){let u=this.outputLayers[l],c=this.outputLayersNodeIndices[l],f=this.outputLayersTensorIndices[l],d=`${u.name}_${c}_${f}`;a.push(d)}for(let l=0;l<a.length;l++){let u=a[l];gd(u in o),s.push(o[u])}return ta(s)}runInternalGraph(r,n){n==null&&(n=pp(null,r.length));let o={};for(let u=0;u<this.inputs.length;++u){let c=this.inputs[u],f=r[u],d=n[u];o[c.id]=[f,d]}let i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Q3);for(let u of i){let c=this.nodesByDepth[u];for(let f of c){let d=f.outboundLayer,p=f.inputTensors,h=f.outputTensors,m=new Array;for(let g of p)g.id in o&&m.push(o[g.id]);if(m.length===p.length){let g={},y,b,x,v;if(f.callArgs!=null&&(g=f.callArgs),m.length===1){let[w,_]=m[0];g.mask==null&&(g.mask=_),x=Rn(d.call(w,g)),v=Rn(d.computeMask(w,_)),y=[w],b=[_]}else y=m.map(w=>w[0]),b=m.map(w=>w[1]),g.mask==null&&(g.mask=b),x=Rn(d.call(y,g)),v=Rn(d.computeMask(y,b));if(d.activityRegularizer)throw new wr("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<h.length;++w){let _=h[w],S=x[w],C=v[w];o[_.id]=[S,C]}}}}let s=[],a=[],l=[];for(let u of this.outputs){gd(u.id in o,`Could not compute output ${u.name} : ${u.id}`);let[c,f]=o[u.id];l.push(c.shape),s.push(c),a.push(f)}return[s,a,l]}buildNodeConversionMap(r){let n={},o;for(let i of this.layers){o=i instanceof t?1:0;for(let s=0;s<i.inboundNodes.length;s++){let a=t.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=o,o+=1)}}return n}getLayer(r,n){if(n!=null)return this.findLayer(n);if(r==null)throw new Ie("Provide either a layer name or layer index");if(typeof r=="number")return this.findLayer(r);for(let o of this.layers)if(o.name===r)return o;throw new Ie(`No such layer: ${r}`)}findLayer(r){if(this.layers.length<=r)throw new Ie(`Was asked to retrieve layer at index ${r}, but model only has ${this.layers.length} layer(s).`);return this.layers[r]}calculateLosses(){return Pe(()=>{let r=[];for(let n of this.layers)for(let o=0;o<n.inboundNodes.length;++o){let i=t.nodeKey(n,o);this.containerNodes.has(i)&&r.push(...n.calculateLosses())}return r})}getConfig(){let r={name:this.name},n=this.buildNodeConversionMap(this.layers),o=[];for(let a of this.layers){let l=a.getClassName(),u=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){let p=a.inboundNodes[d],h=t.nodeKey(a,d),m={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),m=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(p.inboundLayers.length>0){let g=[];for(let y=0;y<p.inboundLayers.length;y++){let b=p.inboundLayers[y],x=p.nodeIndices[y],v=p.tensorIndices[y],w=t.nodeKey(b,x),_=n[w];_==null&&(_=0),g.push([b.name,_,v,m])}c.push(g)}}}let f={};f.name=a.name,f.className=l,f.config=u,f.inboundNodes=c,o.push(f)}r.layers=o;let i=[];for(let a=0;a<this.inputLayers.length;a++){let l=this.inputLayers[a],u=this.inputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.inputLayersTensorIndices[a];i.push([l.name,f,d])}r.inputLayers=i;let s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.outputLayersTensorIndices[a];s.push([l.name,f,d])}return r.outputLayers=s,r}static fromConfig(r,n,o={},i=!1){let s={},a={};function l(y,b){y.name in a?a[y.name].push(b):a[y.name]=[b]}function u(y,b){let x=[],v;for(let w of b){let _=w[0],S=w[1],C=w[2];if(v=w[3]==null?{}:w[3],!(_ in s)){l(y,b);return}let E=s[_];if(E.inboundNodes.length<=S){l(y,b);return}let T=E.inboundNodes[S];x.push(T.outputTensors[C])}x.length>0&&y.apply(ta(x),v)}function c(y){let b=y.name,x=tc(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(i),s[b]=x,y.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new Ie(`Corrupted configuration, expected array for nodeData: ${w}`);l(x,w)})}let f=n.name,d=n.layers;for(let y of d)c(y);for(;!P4e(a);)for(let y of d){let b=s[y.name];if(b.name in a){let x=a[b.name];delete a[b.name];for(let v of x)u(b,v)}}let p=[],h=[],m=n.inputLayers;for(let y of m){let b=y[0],x=y[1],v=y[2];gd(b in s);let _=s[b].inboundNodes[x].outputTensors;p.push(_[v])}let g=n.outputLayers;for(let y of g){let b=y[0],x=y[1],v=y[2];gd(b in s);let _=s[b].inboundNodes[x].outputTensors;h.push(_[v])}return new r({inputs:p,outputs:h,name:f})}get stateful(){if(this._stateful)throw new Ie("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let r of this.layers)if(r.stateful)return!0;return!1}resetStates(){Pe(()=>{this.layers.forEach(r=>{r.stateful&&r.resetStates()})})}};re();re();re();function mPt(t,r,n){let o=r.length;if(t==null||Array.isArray(t)&&t.length===0)return r.map(i=>null);if(o===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&r[0]in t?[t[r[0]]]:[t];if(Array.isArray(t)){if(t.length!==o)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${o} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let i=[];return r.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${o}) outputs, so ${n} must be either an array with ${o} elements or an object with ${r} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function o9(t,r){return mPt(t,r,"classWeight")}function i9(t,r,n,o){return je(this,null,function*(){if(r!=null||o!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let i=Pe(()=>{if(t.shape.length===1)return Xu(t);if(t.shape.length===2){if(t.shape[1]>1)return qc(t,1);if(t.shape[1]===1)return Se(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(yield i.data());Cr(i);let a=[];return s.forEach(l=>{if(n[l]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${l} exists in the data but not in classWeight`);a.push(n[l])}),oi(a,"float32")}else return null})}function I5e(t,r){return we(t,r)}var gPt=32;function M5e(t,r){let n,o,i=r;n=i.xs,o=i.ys,Y.assert(n!=null&&o!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${r}`);let s=D5e("input",t.inputNames,n),a=D5e("output",t.outputNames,o),l=s[0].shape[0];Y.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y.assert(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<s.length;u++)Y.assert(s[u].shape[0]===l,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${s[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);for(let u=0;u<a.length;u++)Y.assert(a[u].shape[0]===l,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${a[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function D5e(t,r,n){if(n instanceof tn)return[n];if(Array.isArray(n))return Y.assert(n.length===r.length,()=>`Received an array of ${n.length} Tensors, but expected ${r.length} to match the ${t} keys ${r}.`),n;{let o=[];for(let i of r){if(n[i]==null)throw new Ie(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);o.push(n[i])}return o}}function yPt(t){if(t.length===3)throw new wr("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function F5e(t,r,n){return je(this,null,function*(){let o=n.batchesPerEpoch!=null;if(Y.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y.assert(!o||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let i=n.validationData!=null,s,a;if(i)if(N5e(n.validationData))Y.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let y=yPt(n.validationData);s=y.xs,a=y.ys}let l=t.makeTrainFunction(),u=t.getDedupedMetricsNames(),c;i?c=u.slice().concat(u.map(y=>"val_"+y)):c=u.slice();let f=H7(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:h}=Y7(f,d,n.epochs,null,null,bPt(r,n),null,i,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=yield r.iterator();for(;m<n.epochs;){let y={};yield p.onEpochBegin(m);let b=0,x=0;for(o||(g=yield r.iterator());!o||b<n.batchesPerEpoch;){let v=yield g.next();if(o&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){let{xs:w,ys:_}=M5e(t,v.value),S={};S.batch=x,S.size=w[0].shape[0],yield p.onBatchBegin(x,S);let C=[];if(n.classWeight!=null){let I=o9(n.classWeight,t.outputNames);for(let k=0;k<I.length;++k)C.push(yield i9(_[k],null,I[k]))}let E=w.concat(_).concat(C),T=l(E);Cr(E);for(let I=0;I<u.length;++I){let k=u[I],F=T[I];S[k]=F,Ms(F)}yield p.onBatchEnd(x,S),V7(S),x++,b++}if(o?b>=n.batchesPerEpoch:v.done){if(i){let w;N5e(n.validationData)?w=Rn(yield t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=Rn(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?gPt:n.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)y[`val_${t.metricsNames[_]}`]=w[_]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(m,y),m++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function bPt(t,r){let n=null;return r.batchesPerEpoch!=null?n=r.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function N5e(t){return typeof t.iterator=="function"}function xPt(t){return typeof t.next=="function"}function O5e(t,r,n){return je(this,null,function*(){n=n||{};let o=n.batches!=null,i=t.testFunction,s=[];if(n.verbose>0)throw new wr("Verbose mode is not implemented yet.");Y.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let a=xPt(r)?r:yield r.iterator(),l=0,u=0;for(;!o||u<n.batches;){let c=yield a.next();if(s=Pe(()=>{if(c.value){let{xs:f,ys:d}=M5e(t,c.value),p=f.concat(d),h=Pe(()=>i(p));if(Cr(p),u===0)for(let g=0;g<h.length;++g)s.push(Ot(0));let m=p[0].shape[0];for(let g=0;g<h.length;++g){let y=h[g],b=s[g];s[g]=Pe(()=>Ke(s[g],we(m,y))),u>0&&Cr(b)}Cr(h),l+=m,++u}return s}),c.done){o&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){let f=s[c];s[c]=Tt(s[c],l),Cr(f)}return ta(s)})}re();re();function s9(t){Y.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function gD(t,r,n){return t==null?[null]:Array.isArray(t)?t.map(o=>Ox(o,r,n-r)):Ox(t,r,n-r)}function a9(t,r){return Pe(()=>t==null?null:Array.isArray(t)?t.map(n=>a9(n,r)):P7(t,r.dtype==="int32"?r:rt(r,"int32")))}function l9(t,r){let n=[],o=0,i=null;for(;o<t;)i=o+r,i>=t&&(i=t),n.push([o,i]),o=i;return n}function xae(t){let r=[];t instanceof tn&&(t=[t]);for(let n=0;n<t.length;++n){let o=t[n];if(o.rank===1)r.push(Rx(o,1));else{if(o.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");r.push(o)}}return r}function bp(t,r){if(t==null)return;let n=[];if(r instanceof tn)n.push(r.id);else if(Array.isArray(r))r.forEach(i=>n.push(i.id));else if(r!=null)for(let i in r){let s=r[i];n.push(s.id)}let o=[];if(t instanceof tn)n.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&o.push(i)});else if(t!=null)for(let i in t){let s=t[i];n.indexOf(s.id)===-1&&o.push(s)}o.forEach(i=>{i.isDisposed||i.dispose()})}function vPt(t){return t instanceof tn}function vae(t){return Array.isArray(t)}function R5e(t){return!vPt(t)&&!vae(t)}function P5e(t,r,n,o=!0,i=""){if(r==null||r.length===0){if(t!=null){let a=!1;if(vae(t)&&t.length>0)a=!0;else if(R5e(t)){for(let l in t)if(t.hasOwnProperty(l)){a=!0;break}}else a=!0;if(a)throw new Ie(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return r.map(a=>null);let s;if(R5e(t)){t=t,s=[];for(let a of r){if(t[a]==null)throw new Ie(`No data provided for "${a}". Need data for each key in: ${r}`);s.push(t[a])}}else if(vae(t)){if(t=t,t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${r.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,r.length>1)throw new Ie(`The model ${i} expects ${r.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=xae(s),n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s). but got array with shape ${l.shape}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f>=0&&c!==f)throw new Ie(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${l.shape[0]} examples, each with shape [${l.shape.slice(1,l.shape.length)}] (tensor shape [${l.shape}])`)}}return s}function wPt(t,r,n){let o=mp(t.map(s=>s.shape[0]));o.sort();let i=mp(r.map(s=>s.shape[0]));if(i.sort(),o.length>1)throw new Ie(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new Ie(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(r.map(s=>s.shape))}`);if(o.length>0&&i.length>0&&!Y.arraysEqual(o,i))throw new Ie(`Input Tensors should have the same number of samples as target Tensors. Found ${o[0]} input sample(s) and ${i[0]} target sample(s).`)}function _Pt(t,r,n){let o=[nE,pD,oE];for(let i=0;i<t.length;++i){let s=t[i],a=r[i],l=n[i];if(a!=null){if(a===oE&&s.shape[s.shape.length-1]===1)throw new Ie(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(o.indexOf(a)!==-1){let u=s.shape.slice(1),c=l.slice(1);for(let f=0;f<u.length;++f){let d=u[f],p=c[f];if(p!=null&&d!==p)throw new Ie(`A target Tensor with shape ${s.shape} was passed for an output of shape ${l}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function L5e(t,r,n,o=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${r.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(r.length>1)throw new Ie(`The model expects ${r.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(l.shape)}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f!==c)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(l.shape)}.`)}}}function SPt(t,r){if(t==null||Array.isArray(t)&&t.length===0)return r.map(o=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return r.map(o=>n);{let o=[];for(let i of r){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),o.push(s)}return o}}var CPt="layers-model",jx=(()=>{class t extends n9{constructor(n){super(n),this.isTraining=!1}summary(n,o,i=console.log){if(!this.built)throw new Ie("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");A5e(this,n,o,i)}compile(n){if(n.loss==null&&(n.loss=[]),this.loss=n.loss,typeof n.optimizer=="string")this.optimizer_=T5e(n.optimizer),this.isOptimizerOwned=!0;else{if(!(n.optimizer instanceof Sa))throw new Ie("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=n.optimizer,this.isOptimizerOwned=!1}let o=[];if(!Array.isArray(n.loss)&&typeof n.loss!="string"&&typeof n.loss!="function"){n.loss=n.loss;for(let l in n.loss)if(this.outputNames.indexOf(l)===-1)throw new Ie(`Unknown entry in loss dictionary: "${l}". Only expected the following keys: ${this.outputNames}`);for(let l of this.outputNames)n.loss[l]==null&&console.warn(`Output "${l}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${l} during training`),o.push(K7(n.loss[l]))}else if(Array.isArray(n.loss)){if(n.loss.length!==this.outputs.length)throw new Ie(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${n.loss}.`);o=n.loss.map(u=>K7(u))}else{let l=K7(n.loss);this.outputs.forEach(u=>{o.push(l)})}this.lossFunctions=o,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let l=0;l<this.outputs.length;++l){let u=this.internalOutputShapes[l],c=this.outputNames[l];this.feedOutputNames.push(c),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[l])}let i=[];this.metrics=n.metrics,this.metricsNames=["loss"],this.metricsTensors=[],$h("loss",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=this.lossFunctions[l];this.outputs.length>1&&(this.metricsTensors.push([u,l]),this.metricsNames.push(this.outputNames[l]+"_loss"))}});let s=SPt(n.metrics,this.outputNames),a=(l,u,c)=>{this.outputNames.length>1&&(u=this.outputNames[l]+"_"+u),this.metricsNames.push(u),this.metricsTensors.push([c,l])};$h("metric",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=s[l];(f=>{let d="",p,h,m;for(let g of f){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let b=this.internalOutputShapes[l];b[b.length-1]===1||this.lossFunctions[l]===pD?["accuracy","acc"].indexOf(g)!==-1?h=Q7:["crossentropy","ce"].indexOf(g)!==-1&&(h=hae):this.lossFunctions[l]===dD?["accuracy","acc"].indexOf(g)!==-1?h=mae:["crossentropy","ce"].indexOf(g)!==-1&&(h=gae):["accuracy","acc"].indexOf(g)!==-1?h=J7:["crossentropy","ce"].indexOf(g)!==-1&&(h=e9);let x;["accuracy","acc"].indexOf(g)!==-1?x="acc":["crossentropy","ce"].indexOf(g)!==-1&&(x="ce"),m=h,p=d+x}else m=C5e(g),p=d+aP(g);let y;$h(p,()=>{y=m}),a(l,p,y)}})(u)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(n,o,i={}){let s=i.batchSize==null?32:i.batchSize;s9(s);let l=this.standardizeUserDataXY(n,o,!0,s);try{let u=l[0].concat(l[1]);this.makeTestFunction();let c=this.testFunction,f=this.testLoop(c,u,s,i.verbose,i.steps);return ta(f)}finally{bp(l[0],n),bp(l[1],o)}}evaluateDataset(n,o){return je(this,null,function*(){return this.makeTestFunction(),O5e(this,n,o)})}checkNumSamples(n,o,i,s="steps"){let a;if(i!=null){if(a=null,o!=null)throw new Ie(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${o}`)}else if(n!=null)Array.isArray(n)?a=n[0].shape[0]:a=n.shape[0];else throw new Ie(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(n,o){if(Array.isArray(o)&&o.length===0)throw new Ie("`outputs` is an empty Array, which is not allowed.");let i=Array.isArray(o),s=i?o:[o],a=this.retrieveSymbolicTensors(s),l=new P0;if(n instanceof tn&&(n=[n]),Array.isArray(n)){if(n.length!==this.inputs.length)throw new Ie(`The number of inputs provided (${n.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)l.add(this.inputs[c],n[c])}else for(let c of this.inputs){let f=n[c.name];if(f==null)throw new Ie(`No value is provided for the model's input ${c.name}`);l.add(c,f)}let u=tE(a,l);return i?u:u[0]}retrieveSymbolicTensors(n){let o=pp(null,n.length),i=n.length;for(let s of this.layers){let a=Array.isArray(s.output)?s.output:[s.output],l=a.map(u=>u.name);for(let u=0;u<n.length;++u){let c=l.indexOf(n[u]);if(c!==-1&&(o[u]=a[c],i--),i===0)break}if(i===0)break}if(i>0){let s=[];throw o.forEach((a,l)=>{a==null&&s.push(n[l])}),new Ie(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return o}predictLoop(n,o=32,i=!1){return Pe(()=>{let s=this.checkNumSamples(n);if(i)throw new wr("Verbose predictLoop() is not implemented yet.");let a=l9(s,o),l=this.outputs.map(u=>[]);for(let u=0;u<a.length;++u)Pe(()=>{let f=a[u][0],d=a[u][1],p=gD(n,f,d),h=[];if(Array.isArray(p))for(let g=0;g<p.length;++g)h.push({key:this.inputs[g],value:p[g]});else h.push({key:this.inputs[0],value:p});let m=new P0(h);return tE(this.outputs,m)}).forEach((f,d)=>l[d].push(f));return ta(l.map(u=>On(u,0)))})}predict(n,o={}){let i=xae(n);L5e(i,this.inputNames,this.feedInputShapes,!1);try{let s=o.batchSize==null?32:o.batchSize;return s9(s),this.predictLoop(i,s)}finally{bp(i,n)}}predictOnBatch(n){L5e(n,this.inputNames,this.feedInputShapes,!0);let o=(Array.isArray(n)?n[0]:n).shape[0];return this.predictLoop(n,o)}standardizeUserDataXY(n,o,i=!0,s){if(this.optimizer_==null)throw new uu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let l=0;l<this.feedOutputShapes.length;++l){let u=this.feedOutputShapes[l];this.feedLossFns[l]===dD?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(n=P5e(n,this.feedInputNames,this.feedInputShapes,!1,"input"),o=P5e(o,this.feedOutputNames,a,!1,"target"),wPt(n,o,null),_Pt(o,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&n[0].shape[0]%s!==0)throw new Ie(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${n[0].shape[0]} sample(s).`);return[n,o]}standardizeUserData(n,o,i,s,a=!0,l){return je(this,null,function*(){let[u,c]=this.standardizeUserDataXY(n,o,a,l);if(i!=null)throw new Error("sample weight is not supported yet.");let f=null;if(s!=null){let d=o9(s,this.outputNames);f=[];for(let p=0;p<d.length;++p)f.push(yield i9(c[p],null,d[p]))}return[u,c,f]})}testLoop(n,o,i,s=0,a){return Pe(()=>{let l=this.checkNumSamples(o,i,a,"steps"),u=[];if(s>0)throw new wr("Verbose mode is not implemented yet.");if(a!=null)throw new wr("steps mode in testLoop() is not implemented yet");{let c=l9(l,i),f=oi(fu(0,l));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],m=Ox(f,p,h-p),g=a9(o,m),y=n(g);if(d===0)for(let b=0;b<y.length;++b)u.push(Ot(0));for(let b=0;b<y.length;++b){let x=y[b];u[b]=Ke(u[b],we(h-p,x))}}for(let d=0;d<u.length;++d)u[d]=Tt(u[d],l)}return u})}getDedupedMetricsNames(){let n=this.metricsNames,o=[];for(let i=0;i<n.length;++i){let s=n[i],a=s;if(Jse(n,s)>1){let l=Jse(n.slice(0,i),s);a+=`_${l}`}o.push(a)}return o}makeTrainFunction(){return n=>{let o=[],i=n.slice(0,this.inputs.length),s=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=n.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),l=[],u=()=>{let p=[];for(let y=0;y<this.inputs.length;++y)p.push({key:this.inputs[y],value:i[y]});let h=new P0(p),m=tE(this.outputs,h,{training:!0}),g;for(let y=0;y<this.lossFunctions.length;++y){let b=this.lossFunctions[y],x=b(s[y],m[y]);a[y]!=null&&(x=I5e(x,a[y]));let v=bo(x);o.push(v),y===0?g=x:g=Ke(g,x)}for(let y=0;y<this.metricsTensors.length;++y){let b;if(this.outputs.length>1&&y<this.outputs.length)b=o[y];else{let x=this.metricsTensors[y][0],v=this.metricsTensors[y][1];b=bo(x(s[v],m[v]))}Ms(b),l.push(b)}return g=bo(g),this.calculateLosses().forEach(y=>{g=Ke(g,y)}),g},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(u,!0,c)].concat(l)}}makeTestFunction(){this.testFunction=n=>Pe(()=>{let o=[],i,s=n.slice(0,this.inputs.length),a=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),l=[];for(let f=0;f<this.inputs.length;++f)l.push({key:this.inputs[f],value:s[f]});let u=new P0(l),c=tE(this.outputs,u);for(let f=0;f<this.lossFunctions.length;++f){let d=this.lossFunctions[f],p=bo(d(a[f],c[f]));f===0?i=p:i=Ke(i,p),o.push(i)}for(let f=0;f<this.metricsTensors.length;++f){let d=this.metricsTensors[f][0],p=this.metricsTensors[f][1],h=bo(d(a[p],c[p]));o.push(h)}return o})}fit(s,a){return je(this,arguments,function*(n,o,i={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let l,u,c,f,d,p,h,m,g;try{let y=i.batchSize==null?32:i.batchSize;s9(y);let x=yield this.standardizeUserData(n,o,i.sampleWeight,i.classWeight,!1,y);l=x[0],u=x[1],g=x[2];let v=!1,w;if(i.validationData!=null&&i.validationData.length>0){if(v=!0,i.validationData.length===2)d=i.validationData[0],p=i.validationData[1];else throw i.validationData.length===3?new wr("validationData including sample weights is not supported yet."):new Ie(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${i.validationData} is invalid.`);let D=yield this.standardizeUserData(d,p,null,null,!0,y);h=D[0],m=D[1],w=h.concat(m)}else if(i.validationSplit!=null&&i.validationSplit>0&&i.validationSplit<1){v=!0;let F=Math.floor(l[0].shape[0]*(1-i.validationSplit)),D=l[0].shape[0];h=gD(l,F,D),c=l,l=gD(l,0,F),m=gD(u,F,D),f=u,u=gD(u,0,F),w=h.concat(m)}else i.validationSteps!=null&&(v=!0);let _=l.concat(u).concat(g);this.checkTrainableWeightsConsistency();let S=this.makeTrainFunction(),C=this.getDedupedMetricsNames(),E,T;v?(this.makeTestFunction(),E=this.testFunction,T=C.slice().concat(C.map(F=>"val_"+F))):(E=null,w=[],T=C.slice());let I=H7(i.callbacks,i.yieldEvery);return yield this.fitLoop(S,_,C,y,i.epochs,i.verbose,I,E,w,i.shuffle,T,i.initialEpoch,null,null)}finally{this.isTraining=!1,bp(l,n),bp(u,o),bp(c,n),bp(f,o),bp(h,d),bp(m,p),g!=null&&Cr(g)}})}fitLoop(n,o,i,s,a,l,u,c,f,d,p,h,m,g){return je(this,null,function*(){s==null&&(s=32),a==null&&(a=1),d==null&&(d=!0),h==null&&(h=0);let y=!1;if(c!=null&&f!=null&&(y=!0),g!=null&&(y=!0,m==null))throw new Ie("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let b=this.checkNumSamples(o,s,m,"steps_per_epoch"),x;b!=null&&(x=fu(0,b)),l==null&&(l=1);let{callbackList:v,history:w}=Y7(u,l,a,h,b,m,s,y,p);v.setModel(this),this.history=w,yield v.onTrainBegin(),this.stopTraining_=!1;for(let _=h;_<a;++_){yield v.onEpochBegin(_);let S={};if(m!=null)throw new wr("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new wr("batch shuffling is not implemneted yet");d&&Y.shuffle(x);let C=oi(x),E=l9(b,s);for(let T=0;T<E.length;++T){let I={};if(yield v.onBatchBegin(T,I),Pe(()=>{let k=E[T][0],F=E[T][1],D=Ox(C,k,F-k);I.batch=T,I.size=F-k;let L=a9(o,D),P=n(L);for(let R=0;R<i.length;++R){let V=i[R],G=P[R];I[V]=G,Ms(G)}if(T===E.length-1&&y){let R=this.testLoop(c,f,s);for(let V=0;V<i.length;++V){let G=i[V],U=R[V];Ms(U),S["val_"+G]=U}}}),yield v.onBatchEnd(T,I),V7(I),this.stopTraining_)break}C.dispose()}if(yield v.onEpochEnd(_,S),this.stopTraining_)break}return yield v.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(n,o){return je(this,null,function*(){return F5e(this,n,o)})}trainOnBatch(n,o){return je(this,null,function*(){let i=yield this.standardizeUserData(n,o),s=i[0],a=i[1],u=this.makeTrainFunction()(s.concat(a)),c=[];for(let f of u){let d=yield f.data();c.push(d[0])}return Cr(u),bp(i[0],n),bp(i[1],o),ta(c)})}getNamedWeights(n){let o=[],i=n!=null&&n.trainableOnly,s=i?this.trainableWeights:this.weights,a=this.getWeights(i);for(let l=0;l<s.length;++l)i&&!s[l].trainable||o.push({name:s[l].originalName,tensor:a[l]});return o}set stopTraining(n){this.stopTraining_=n}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(n){this.optimizer_!==n&&(this.optimizer_=n,this.isOptimizerOwned=!1)}dispose(){let n=super.dispose();if(n.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let o=pI().numTensors;this.optimizer_.dispose(),n.numDisposedVariables+=o-pI().numTensors}return n}getLossIdentifiers(){let n;if(typeof this.loss=="string")n=hp(this.loss);else if(Array.isArray(this.loss)){for(let o of this.loss)if(typeof o!="string")throw new Error("Serialization of non-string loss is not supported.");n=this.loss.map(o=>hp(o))}else{let o=Object.keys(this.loss);n={};let i=this.loss;for(let s of o)if(typeof i[s]=="string")n[s]=hp(i[s]);else throw new Error("Serialization of non-string loss is not supported.")}return n}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[hp(aP(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(n=>hp(aP(n)));{let n={};for(let o in this.metrics)n[o]=hp(aP(this.metrics[o]));return n}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(n){if(n.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(n.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(n.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let o=hD(n.optimizer_config),i=tc(o),s;if(typeof n.loss=="string")s=Fx(n.loss);else if(Array.isArray(n.loss))s=n.loss.map(l=>Fx(l));else if(n.loss!=null){s={};for(let l in n.loss)s[l]=Fx(n.loss[l])}let a;if(Array.isArray(n.metrics))a=n.metrics.map(l=>Fx(l));else if(n.metrics!=null){a={};for(let l in n.metrics)a[l]=Fx(n.metrics[l])}this.compile({loss:s,metrics:a,optimizer:i})}save(n,o){return je(this,null,function*(){if(typeof n=="string"){let f=hd.getSaveHandlers(n);if(f.length===0)throw new Ie(`Cannot find any save handlers for URL '${n}'`);if(f.length>1)throw new Ie(`Found more than one (${f.length}) save handlers for URL '${n}'`);n=f[0]}if(n.save==null)throw new Ie("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let i=yield hd.encodeWeights(this.getNamedWeights(o)),u={modelTopology:this.toJSON(null,!1),format:CPt,generatedBy:`TensorFlow.js tfjs-layers v${mD}`,convertedBy:null};if((o==null?!1:o.includeOptimizer)&&this.optimizer!=null){u.trainingConfig=this.getTrainingConfig();let f="optimizer",{data:d,specs:p}=yield hd.encodeWeights(yield this.optimizer.getWeights(),f);i.specs.push(...p),i.data=hd.concatenateArrayBuffers([i.data,d])}return this.userDefinedMetadata!=null&&(bae(this.userDefinedMetadata,this.name,!0),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=i.data,u.weightSpecs=i.specs,n.save(u)})}setUserDefinedMetadata(n){bae(n,this.name),this.userDefinedMetadata=n}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();tt.registerClass(jx);var EPt=(()=>{class t extends jx{}return t.className="Functional",t})();tt.registerClass(EPt);re();function u9(t,r){return je(this,null,function*(){if(r==null&&(r={}),typeof t=="string"){let n=hd.getLoadHandlers(t,r);if(n.length===0)n.push(hd.browserHTTPRequest(t,r));else if(n.length>1)throw new Ie(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return TPt(t,void 0,r)})}function TPt(t,r,n){return je(this,null,function*(){if(n==null&&(n={}),t.load==null)throw new Ie("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let o=yield t.load(),i=o.modelTopology;i.model_config!=null&&(i=i.model_config);let s=n.strict==null?!0:n.strict,a=o.weightData!=null&&o.weightSpecs!=null&&s,l=tc(hD(i),r,a),u=o.trainingConfig;if(u!=null&&l.loadTrainingConfig(u),o.userDefinedMetadata!=null&&l.setUserDefinedMetadata(o.userDefinedMetadata),o.weightData!=null){if(o.weightSpecs==null)throw new Ie("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:f}=APt(o.weightData,o.weightSpecs);l.loadWeights(c,s),l.optimizer!=null&&f.length>0&&(yield l.optimizer.setWeights(f)),Cr(c),Cr(f.map(d=>d.tensor))}return l})}function APt(t,r){let n=hd.decodeWeights(t,r),o={},i=[];return r.forEach(s=>{s.group==="optimizer"?i.push({name:s.name,tensor:n[s.name]}):o[s.name]=n[s.name]}),{modelWeights:o,optimizerWeights:i}}var c9=(()=>{class t extends jx{constructor(n){if(super({inputs:[],outputs:[]}),n=n||{},this.trainable=!0,this.built=!1,this.name=n.name!=null?n.name:Aw("sequential_"),n.layers!=null)for(let o of n.layers)this.add(o)}checkShape(n){if(n.inboundNodes[0].outputTensors[0].shape.some(i=>i<0))throw new Ie(`Negative dimension size caused by adding layer ${n.name} with input shape [${n.inboundNodes[0].inputTensors[0].shape}]`)}add(n){let o=n instanceof t||n instanceof jx,i;if(o){if(i=n,i.outputs.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(i.inputs.length!==1)throw new Ie("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(n.inboundNodes.length===0){if(n.batchInputShape==null)throw new Ie("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let s=$7({batchShape:n.batchInputShape,dtype:n.dtype,name:n.name+"_input"});n.apply(s)}if(o)this.outputs=i.outputs,this.inputs=i.inputs;else{if(n.inboundNodes.length!==1)throw new Ie(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${n.name} which has ${n.inboundNodes.length} pre-existing inbound connections.`);if(n.inboundNodes[0].outputTensors.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[n.inboundNodes[0].outputTensors[0]],this.inputs=fae(this.outputs[0])}this.inboundNodes=[],new Px({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{let s=n.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(n),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let n=this.layers.length-1;this.layers[n].outboundNodes=[],this.outputs=[this.layers[n].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(n,o){return this.model==null&&this.build(),this.model.call(n,o)}build(n){if(Wr(n),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new jx({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(n,o,i=console.log){this.built||this.build(),super.summary(n,o,i)}setWeights(n){this.model==null&&this.build(),this.model.setWeights(n)}evaluate(n,o,i={}){if(!this.built)throw new uu("The model needs to be compiled before being used.");return this.model.evaluate(n,o,i)}evaluateDataset(n,o){return je(this,null,function*(){if(!this.built)throw new uu("The model needs to be compiled before being used.");return this.model.evaluateDataset(n,o)})}predict(n,o={}){return this.model==null&&this.build(),this.model.predict(n,o)}predictOnBatch(n){return this.model==null&&this.build(),this.model.predictOnBatch(n)}compile(n){this.build(),this.model.compile(n),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(n){this.model.optimizer=n}fit(s,a){return je(this,arguments,function*(n,o,i={}){if(!this.built)throw new uu("The model needs to be compiled before being used.");return this.model.fit(n,o,i)})}fitDataset(n,o){return je(this,null,function*(){if(!this.built)throw new uu("The model needs to be compiled before being used.");return this.model.fitDataset(n,o)})}trainOnBatch(n,o){return je(this,null,function*(){return this.model.trainOnBatch(n,o)})}static fromConfig(n,o,i={},s=!1){let a,l={};if(o instanceof Array){if(o[0].className==null||o[0].className==="Merge")throw new Ie("Legacy serialization format not supported yet.");a=o}else Y.assert(o.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=o.layers,delete o.layers,l=o;let u=new n(l);if(!(u instanceof t))throw new wr(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(let c of a){let d=tc(c,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),u.add(d)}return u}set stopTraining(n){if(this.model==null)throw new Ie("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=n}get stopTraining(){if(this.model==null)throw new Ie("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let n=[];for(let o of this.layers){let i={};i.className=o.getClassName(),i.config=o.getConfig(),n.push(i)}return{name:this.name,layers:n}}}return t.className="Sequential",t})();tt.registerClass(c9);function wae(t){return new c9(t)}function _ae(t){return $7(t)}re();re();re();var Ea=class extends tt.Serializable{getConfig(){return{}}},kPt=(()=>{class t extends Ea{apply(n,o=1){return Z4e(n,o)}}return t.className="elu",t})();tt.registerClass(kPt);var IPt=(()=>{class t extends Ea{apply(n){return UI(n)}}return t.className="selu",t})();tt.registerClass(IPt);var DPt=(()=>{class t extends Ea{apply(n){return _a(n)}}return t.className="relu",t})();tt.registerClass(DPt);var NPt=(()=>{class t extends Ea{apply(n){return Pe(()=>pd(6,_a(n)))}}return t.className="relu6",t})();tt.registerClass(NPt);var MPt=(()=>{class t extends Ea{apply(n){return n}}return t.className="linear",t})();tt.registerClass(MPt);var FPt=(()=>{class t extends Ea{apply(n){return kl(n)}}return t.className="sigmoid",t})();tt.registerClass(FPt);var OPt=(()=>{class t extends Ea{apply(n){return J4e(n)}}return t.className="hardSigmoid",t})();tt.registerClass(OPt);var RPt=(()=>{class t extends Ea{apply(n){return Ph(n)}}return t.className="softplus",t})();tt.registerClass(RPt);var PPt=(()=>{class t extends Ea{apply(n){return Q4e(n)}}return t.className="softsign",t})();tt.registerClass(PPt);var LPt=(()=>{class t extends Ea{apply(n){return Fh(n)}}return t.className="tanh",t})();tt.registerClass(LPt);var Cae=(()=>{class t extends Ea{apply(n,o=-1){return hw(n,o)}}return t.className="softmax",t})();tt.registerClass(Cae);var jPt=(()=>{class t extends Ea{apply(n,o=-1){return RI(n,o)}}return t.className="logSoftmax",t})();tt.registerClass(jPt);var BPt=(()=>{class t extends Ea{apply(n){return Pe(()=>Pe(()=>{let o=Math.sqrt(2),i=we(.5,Ke(1,DI(Tt(n,o))));return we(n,i)}))}}return t.className="gelu",t})();tt.registerClass(BPt);var $Pt=(()=>{class t extends Ea{apply(n){return Pe(()=>we(.5,we(n,Ke(1,Fh(we(Zn(Tt(2,Math.PI)),Ke(n,we(.044715,qa(n,3)))))))))}}return t.className="gelu_new",t})();tt.registerClass($Pt);var zPt=(()=>{class t extends Ea{apply(n){return Pe(()=>we(n,Fh(Ph(n))))}}return t.className="mish",t})();tt.registerClass(zPt);var UPt=(()=>{class t extends Ea{apply(n,o=1){return Pe(()=>we(kl(we(n,o)),n))}}return t.className="swish",t})();tt.registerClass(UPt);function Uh(t){return t.getClassName()}function Sae(t,r={}){return O0(t,tt.SerializationMap.getMap().classNameMap,r,"activation")}function Vh(t){if(t==null){let r={};return r.className="linear",r.config={},Sae(r)}if(typeof t=="string"){let r={};return r.className=t,r.config={},Sae(r)}else return t instanceof Ea?t:Sae(t)}re();re();function VPt(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var f9=class extends tt.Serializable{},$5e=(()=>{class t extends f9{constructor(n){super(),VPt(n),this.l1=n==null||n.l1==null?.01:n.l1,this.l2=n==null||n.l2==null?.01:n.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(n){return Pe(()=>{let o=xo([1]);return this.hasL1&&(o=Ke(o,It(we(this.l1,Ao(n))))),this.hasL2&&(o=Ke(o,It(we(this.l2,eE(n))))),Se(o,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(n,o){return new n({l1:o.l1,l2:o.l2})}}return t.className="L1L2",t})();tt.registerClass($5e);var j5e={l1l2:"L1L2"};function $n(t){return iD(t)}function B5e(t,r={}){return O0(t,tt.SerializationMap.getMap().classNameMap,r,"regularizer")}function ao(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in j5e?j5e[t]:t,config:{}};return B5e(n)}else return t instanceof f9?t:B5e(t)}var Eae=(()=>{class t extends hr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null&&(this.maxValue=n.maxValue)}call(n,o){n=lr(n);let i=_a(n);return this.maxValue!=null&&(i=Zs(i,0,this.maxValue)),i}computeOutputShape(n){return n}getConfig(){let n={maxValue:this.maxValue},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ReLU",t})();tt.registerClass(Eae);var Tae=(()=>{class t extends hr{constructor(n){super(n??{}),this.DEFAULT_ALPHA=.3,n==null&&(n={}),this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=lr(n);return iw(i,this.alpha)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LeakyReLU",t})();tt.registerClass(Tae);var Aae=(()=>{class t extends hr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",n==null&&(n={}),this.supportsMasking=!0,this.alphaInitializer=Qn(n.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ao(n.alphaRegularizer),this.alphaConstraint=si(n.alphaConstraint),n.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(n.sharedAxes))this.sharedAxes=n.sharedAxes;else if(typeof n.sharedAxes=="number")this.sharedAxes=[n.sharedAxes];else throw new Ie(`Expected sharedAxes to be a number or an array of numbers, but got ${n.sharedAxes}`)}build(n){n=Wr(n);let o=n.slice(1);if(this.sharedAxes!=null)for(let s of this.sharedAxes)o[s-1]=1;this.alpha=this.addWeight("alpha",o,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let i={};if(this.sharedAxes!=null)for(let s=1;s<n.length;++s)i[s]=n[s];this.inputSpec=[new so({ndim:n.length,axes:i})],this.built=!0}call(n,o){return n=lr(n),pw(n,this.alpha.read())}getConfig(){let n={alphaInitializer:vo(this.alphaInitializer),alphaRegularizer:$n(this.alphaRegularizer),alphaConstraint:ii(this.alphaConstraint),sharedAxes:this.sharedAxes},o=super.getConfig();return Object.assign(n,o),n}}return t.className="PReLU",t})();tt.registerClass(Aae);var kae=(()=>{class t extends hr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA=1,n==null&&(n={}),n.alpha!=null&&n.alpha!==this.DEFAULT_ALPHA)throw new wr(`Non-default alpha value (${n.alpha}) is not supported by the ELU layer yet.`);this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=lr(n);return E0(i)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ELU",t})();tt.registerClass(kae);var Iae=(()=>{class t extends hr{constructor(n){super(n??{}),this.DEFAULT_THETA=1,n==null&&(n={}),this.theta=n.theta==null?this.DEFAULT_THETA:n.theta}call(n,o){let i=lr(n);return we(i,rt(ni(i,this.theta),"float32"))}computeOutputShape(n){return n}getConfig(){let n={theta:this.theta},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ThresholdedReLU",t})();tt.registerClass(Iae);var Dae=(()=>{class t extends hr{constructor(n){super(n??{}),this.DEFAULT_AXIS=1,n==null&&(n={}),this.softmax=new Cae().apply,this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis}call(n,o){return Pe(()=>{let i=lr(n),s=o.mask;if(s!=null){let a=we(wt(Wi(i.shape),rt(s,i.dtype)),Ot(-1e9));i=Ke(i,a)}return this.axis instanceof Array?this.axis.length>1?xi(wt(i,lw(i,this.axis,!0))):this.softmax(i,this.axis[0]):this.softmax(i,this.axis)})}computeOutputShape(n){return n}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Softmax",t})();tt.registerClass(Dae);re();re();function Nw(t,r,n){if(typeof t=="number")return pp(t,r);if(t.length!==r)throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${t.length} elements.`);for(let o=0;o<r;++o){let i=t[o];if(!H4e(i))throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function rc(t,r,n,o,i=1){if(t==null)return t;let s=r+(r-1)*(i-1),a;return n==="same"?a=t:a=t-s+1,Math.floor((a+o-1)/o)}function Gh(t,r,n,o){if(t==null)return null;if(o==="valid")t=t*r+zh([n-r,0]);else if(o==="same")t=t*r;else throw new Ie(`Unsupport padding mode: ${o}.`);return t}function uP(t,r){return Pe(()=>(Vo(r),r==="channelsFirst"?Gr(t,[0,2,3,1]):t))}function Nae(t,r){return Pe(()=>(Vo(r),r==="channelsFirst"?Gr(t,[0,2,3,4,1]):t))}function WPt(t,r,n,o=1,i="valid",s,a=1){return Pe(()=>{if(s==null&&(s=du()),Vo(s),t.shape.length!==3)throw new Ie(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(r.shape.length!==3)throw new Ie(`The kernel for a conv1dWithBias operation should be 3, but is ${r.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ie(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=Gr(t,[0,2,1])),i==="causal")throw new wr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=EI(t,r,o,i==="same"?"same":"valid","NWC",a);return n!=null&&(l=pu(l,n)),l})}function z5e(t,r,n,o=[1,1],i="valid",s,a,l=null){return Pe(()=>{if(s==null&&(s=du()),Vo(s),t.rank!==3&&t.rank!==4)throw new Ie(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(r.rank!==3&&r.rank!==4)throw new Ie(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=uP(t,s);if(i==="causal")throw new wr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=xw.conv2d({x:u,filter:r,strides:o,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:l}),s==="channelsFirst"&&(u=Gr(u,[0,3,1,2])),u})}function qPt(t,r,n,o=[1,1,1],i="valid",s,a){return Pe(()=>{if(s==null&&(s=du()),Vo(s),t.rank!==4&&t.rank!==5)throw new Ie(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(r.rank!==4&&r.rank!==5)throw new Ie(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let l=Nae(t,s);if(i==="causal")throw new wr("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=K8(l,r,o,i==="same"?"same":"valid","NDHWC",a),n!=null&&(l=pu(l,n)),s==="channelsFirst"&&(l=Gr(l,[0,4,1,2,3])),l})}var lP=class t extends hr{constructor(r,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(n),this.rank=r,Di(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new wr(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Nw(n.kernelSize,r,"kernelSize"),this.strides=Nw(n.strides==null?1:n.strides,r,"strides"),this.padding=n.padding==null?"valid":n.padding,cu(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Vo(this.dataFormat),this.activation=Vh(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=si(n.biasConstraint),this.biasRegularizer=ao(n.biasRegularizer),this.activityRegularizer=ao(n.activityRegularizer),this.dilationRate=Nw(n.dilationRate==null?1:n.dilationRate,r,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ie(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ie(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ie(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(r){if(gd("kernelSize"in r,"required key 'kernelSize' not in config"),typeof r.kernelSize!="number"&&!k7(r.kernelSize,"number",1,3))throw new Ie(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(r.kernelSize)}.`)}getConfig(){let r={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Uh(this.activation),useBias:this.useBias,biasInitializer:vo(this.biasInitializer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),biasConstraint:ii(this.biasConstraint)},n=super.getConfig();return Object.assign(r,n),r}},yD=class t extends lP{constructor(r,n){super(r,n),this.kernel=null,t.verifyArgs(n),this.filters=n.filters,Di(this.filters,"filters"),this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=si(n.kernelConstraint),this.kernelRegularizer=ao(n.kernelRegularizer)}build(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?1:r.length-1;if(r[n]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${r[n]}`);let o=r[n],i=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:o}}],this.built=!0}call(r,n){return Pe(()=>{r=lr(r);let o,i=this.bias==null?null:this.bias.read(),s=I7(this.activation.getClassName());if(s!=null&&this.rank===2)o=z5e(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)o=WPt(r,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)o=z5e(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)o=qPt(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new wr("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(o=this.activation.apply(o))}return o})}computeOutputShape(r){r=Wr(r);let n=[],o=this.dataFormat==="channelsLast"?r.slice(1,r.length-1):r.slice(2);for(let s=0;s<o.length;++s){let a=rc(o[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[r[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){let r={filters:this.filters,kernelInitializer:vo(this.kernelInitializer),kernelRegularizer:$n(this.kernelRegularizer),kernelConstraint:ii(this.kernelConstraint)},n=super.getConfig();return Object.assign(r,n),r}static verifyArgs(r){if(!("filters"in r)||typeof r.filters!="number"||r.filters<1)throw new Ie(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(r.filters)}`)}},d9=(()=>{class t extends yD{constructor(n){super(2,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!k7(n.kernelSize,"number",1,2))throw new Ie(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv2D",t})();tt.registerClass(d9);var p9=(()=>{class t extends yD{constructor(n){super(3,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!(Array.isArray(n.kernelSize)&&(n.kernelSize.length===1||n.kernelSize.length===3)))throw new Ie(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv3D",t})();tt.registerClass(p9);var Mae=(()=>{class t extends d9{constructor(n){if(super(n),this.inputSpec=[new so({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Wr(n),n.length!==4)throw new Ie("Input should have rank 4; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new so({ndim:4,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{let i=lr(n);if(i.shape.length!==4)throw new Ie(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u;this.dataFormat==="channelsFirst"?(l=2,u=3):(l=1,u=2);let c=s[l],f=s[u],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],m=this.strides[1],g=Gh(c,h,d,this.padding),y=Gh(f,m,p,this.padding),b=[a,g,y,this.filters];this.dataFormat!=="channelsLast"&&(i=Gr(i,[0,2,3,1]));let x=AI(i,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Gr(x,[0,3,1,2])),this.bias!=null&&(x=pu(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(n){n=Wr(n);let o=n.slice(),i,s,a;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3):(i=3,s=1,a=2);let l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],f=this.strides[1];return o[i]=this.filters,o[s]=Gh(o[s],c,l,this.padding),o[a]=Gh(o[a],f,u,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv2DTranspose",t})();tt.registerClass(Mae);var Fae=(()=>{class t extends p9{constructor(n){if(super(n),this.inputSpec=[new so({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Wr(n),n.length!==5)throw new Ie("Input should have rank 5; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new so({ndim:5,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{let i=lr(n);if(i.shape.length!==5)throw new Ie(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u,c;this.dataFormat==="channelsFirst"?(c=2,l=3,u=4):(c=1,l=2,u=3);let f=s[c],d=s[l],p=s[u],h=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[0],b=this.strides[1],x=this.strides[2],v=Gh(f,y,h,this.padding),w=Gh(d,b,m,this.padding),_=Gh(p,x,g,this.padding),S=[a,v,w,_,this.filters];this.dataFormat!=="channelsLast"&&(i=Gr(i,[0,2,3,4,1]));let C=Q8(i,this.kernel.read(),S,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Gr(C,[0,4,1,2,3])),this.bias!==null&&(C=pu(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(n){n=Wr(n);let o=n.slice(),i,s,a,l;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3,l=4):(i=4,s=1,a=2,l=3);let u=this.kernelSize[0],c=this.kernelSize[1],f=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return o[i]=this.filters,o[s]=Gh(o[s],d,u,this.padding),o[a]=Gh(o[a],p,c,this.padding),o[l]=Gh(o[l],h,f,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv3DTranspose",t})();tt.registerClass(Fae);var HPt=(()=>{class t extends yD{constructor(n,o){if(super(n,o),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,o.filters==null)throw new Ie("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(o.kernelInitializer!=null||o.kernelRegularizer!=null||o.kernelConstraint!=null)throw new Ie("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(o.padding!=null&&o.padding!=="same"&&o.padding!=="valid")throw new Ie(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(o.padding)}`);this.depthMultiplier=o.depthMultiplier==null?1:o.depthMultiplier,this.depthwiseInitializer=Qn(o.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ao(o.depthwiseRegularizer),this.depthwiseConstraint=si(o.depthwiseConstraint),this.pointwiseInitializer=Qn(o.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ao(o.pointwiseRegularizer),this.pointwiseConstraint=si(o.pointwiseConstraint)}build(n){if(n=Wr(n),n.length<this.rank+2)throw new Ie(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(n)}`);let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(n[o])}`);let i=n[o],s=this.kernelSize.concat([i,this.depthMultiplier]),a=[];for(let u=0;u<this.rank;++u)a.push(1);a.push(i*this.depthMultiplier,this.filters);let l=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,l,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,l,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,l,this.biasConstraint):this.bias=null,this.inputSpec=[new so({ndim:this.rank+2,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{n=lr(n);let i;if(this.rank===1)throw new wr("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(n=Gr(n,[0,2,3,1])),i=VI(n,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=pu(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),this.dataFormat==="channelsFirst"&&(i=Gr(i,[0,3,1,2])),i})}getConfig(){let n=super.getConfig();return delete n.rank,delete n.kernelInitializer,delete n.kernelRegularizer,delete n.kernelConstraint,n.depthwiseInitializer=vo(this.depthwiseInitializer),n.pointwiseInitializer=vo(this.pointwiseInitializer),n.depthwiseRegularizer=$n(this.depthwiseRegularizer),n.pointwiseRegularizer=$n(this.pointwiseRegularizer),n.depthwiseConstraint=ii(this.depthwiseConstraint),n.pointwiseConstraint=ii(this.pointwiseConstraint),n}}return t.className="SeparableConv",t})();var Oae=(()=>{class t extends HPt{constructor(n){super(2,n)}}return t.className="SeparableConv2D",t})();tt.registerClass(Oae);var Rae=(()=>{class t extends yD{constructor(n){super(1,n),t.verifyArgs(n),this.inputSpec=[{ndim:3}]}getConfig(){let n=super.getConfig();return delete n.rank,delete n.dataFormat,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!k7(n.kernelSize,"number",1,1))throw new Ie(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv1D",t})();tt.registerClass(Rae);var Pae=(()=>{class t extends hr{constructor(n){super(n),typeof n.cropping=="number"?this.cropping=[[n.cropping,n.cropping],[n.cropping,n.cropping]]:typeof n.cropping[0]=="number"?this.cropping=[[n.cropping[0],n.cropping[0]],[n.cropping[1],n.cropping[1]]]:this.cropping=n.cropping,this.dataFormat=n.dataFormat===void 0?"channelsLast":n.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(n){return this.dataFormat==="channelsFirst"?[n[0],n[1],n[2]-this.cropping[0][0]-this.cropping[0][1],n[3]-this.cropping[1][0]-this.cropping[1][1]]:[n[0],n[1]-this.cropping[0][0]-this.cropping[0][1],n[2]-this.cropping[1][0]-this.cropping[1][1],n[3]]}call(n,o){return Pe(()=>{if(n=lr(n),this.dataFormat==="channelsLast"){let i=eP(n,this.cropping[0][0],n.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return eP(i,this.cropping[1][0],n.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let i=eP(n,this.cropping[0][0],n.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return eP(i,this.cropping[1][0],n.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let n={cropping:this.cropping,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Cropping2D",t})();tt.registerClass(Pae);var Lae=(()=>{class t extends hr{constructor(n){super(n),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=n.size==null?this.DEFAULT_SIZE:n.size,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Vo(this.dataFormat),this.interpolation=n.interpolation==null?"nearest":n.interpolation,W4e(this.interpolation)}computeOutputShape(n){if(this.dataFormat==="channelsFirst"){let o=n[2]==null?null:this.size[0]*n[2],i=n[3]==null?null:this.size[1]*n[3];return[n[0],n[1],o,i]}else{let o=n[1]==null?null:this.size[0]*n[1],i=n[2]==null?null:this.size[1]*n[2];return[n[0],o,i,n[3]]}}call(n,o){return Pe(()=>{let i=lr(n),s=i.shape;if(this.dataFormat==="channelsFirst"){i=Gr(i,[0,2,3,1]);let a=this.size[0]*s[2],l=this.size[1]*s[3],u=this.interpolation==="nearest"?ec.resizeNearestNeighbor(i,[a,l]):ec.resizeBilinear(i,[a,l]);return Gr(u,[0,3,1,2])}else{let a=this.size[0]*s[1],l=this.size[1]*s[2];return this.interpolation==="nearest"?ec.resizeNearestNeighbor(i,[a,l]):ec.resizeBilinear(i,[a,l])}})}getConfig(){let n={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}}return t.className="UpSampling2D",t})();tt.registerClass(Lae);re();re();function YPt(t,r,n=[1,1],o="valid",i,s){return Pe(()=>{i==null&&(i=du()),Vo(i);let a=uP(t,i);if(t.rank!==4)throw new Ie(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(r.rank!==4)throw new Ie(`depthwiseKernel is required to be 4-D, but is instead ${r.rank}-D`);return a=C0(a,r,n,o==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=Gr(a,[0,3,1,2])),a})}var jae=(()=>{class t extends lP{constructor(n){super(2,n),this.depthwiseKernel=null,this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Qn(n.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=si(n.depthwiseConstraint),this.depthwiseRegularizer=ao(n.depthwiseRegularizer)}build(n){if(n=Wr(n),n.length<4)throw new Ie(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(n)}.`);let o=this.dataFormat==="channelsFirst"?1:3;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${n[o]}).`);let i=n[o],s=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{n=lr(n);let i=YPt(n,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(i=pu(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),i})}computeOutputShape(n){n=Wr(n);let o=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2],s=this.dataFormat==="channelsFirst"?n[1]*this.depthMultiplier:n[3]*this.depthMultiplier,a=rc(o,this.kernelSize[0],this.padding,this.strides[0]),l=rc(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[n[0],s,a,l]:[n[0],a,l,s]}getConfig(){let n=super.getConfig();return n.depthMultiplier=this.depthMultiplier,n.depthwiseInitializer=vo(this.depthwiseInitializer),n.depthwiseRegularizer=$n(this.depthwiseRegularizer),n.depthwiseConstraint=ii(this.depthwiseRegularizer),n}}return t.className="DepthwiseConv2D",t})();tt.registerClass(jae);re();re();re();re();function Bae(t,r,n,o){if(Array.isArray(t)){if(r!=null||n!=null)throw new Ie("When inputs is an array, neither initialState or constants should be provided");o!=null&&(n=t.slice(t.length-o,t.length),t=t.slice(0,t.length-o)),t.length>1&&(r=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return r=i(r),n=i(n),{inputs:t,initialState:r,constants:n}}function $ae(t,r,n,o=!1,i,s,a=!1,l=!1){return Pe(()=>{let u=r.shape.length;if(u<3)throw new Ie(`Input should be at least 3D, but is ${u}D.`);let c=[1,0].concat(fu(2,u));if(r=Gr(r,c),s!=null)throw new wr("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=rt(rt(i,"bool"),"float32"),i.rank===u-1&&(i=ki(i,-1)),i=Gr(i,c)),o&&(r=bs(r,0),i!=null&&(i=bs(i,0)));let f=[],d,p=n,h=r.shape[0],m=Ya(r),g;i!=null&&(g=Ya(i));for(let b=0;b<h;++b){let x=m[b],v=Pe(()=>t(x,p));if(i==null)d=v[0],p=v[1];else{let w=Pe(()=>{let _=g[b],S=wt(Os(_),_),C=Ke(we(v[0],_),we(p[0],S)),E=p.map((T,I)=>Ke(we(v[1][I],_),we(T,S)));return{output:C,newStates:E}});d=w.output,p=w.newStates}l&&f.push(d)}let y;return l&&(y=ss(f,1)),[d,y,p]})}var L0=(()=>{class t extends hr{constructor(n){super(n);let o;if(n.cell==null)throw new Ie("cell property is missing for the constructor of RNN.");if(Array.isArray(n.cell)?o=new g9({cells:n.cell}):o=n.cell,o.stateSize==null)throw new Ie("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=o,this.returnSequences=n.returnSequences==null?!1:n.returnSequences,this.returnState=n.returnState==null?!1:n.returnState,this.goBackwards=n.goBackwards==null?!1:n.goBackwards,this._stateful=n.stateful==null?!1:n.stateful,this.unroll=n.unroll==null?!1:n.unroll,this.supportsMasking=!0,this.inputSpec=[new so({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return fu(0,n).map(o=>null)}else return this.states_}setStates(n){this.states_=n}computeOutputShape(n){B7(n)&&(n=n[0]),n=n;let o=this.cell.stateSize;Array.isArray(o)||(o=[o]);let i=o[0],s;if(this.returnSequences?s=[n[0],n[1],i]:s=[n[0],i],this.returnState){let a=[];for(let l of o)a.push([n[0],l]);return[s].concat(a)}else return s}computeMask(n,o){return Pe(()=>{Array.isArray(o)&&(o=o[0]);let i=this.returnSequences?o:null;if(this.returnState){let s=this.states.map(a=>null);return[i].concat(s)}else return i})}get states(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,o=[];for(let i=0;i<n;++i)o.push(null);return o}else return this.states_}set states(n){this.states_=n}build(n){if(this.numConstants!=null)throw new wr("Constants support is not implemented in RNN yet.");B7(n)&&(n=n[0]),n=n;let i=this.stateful?n[0]:null,s=n.slice(2);this.inputSpec[0]=new so({shape:[i,null,...s]});let a=[n[0]].concat(n.slice(2));this.cell.build(a);let l;if(Array.isArray(this.cell.stateSize)?l=this.cell.stateSize:l=[this.cell.stateSize],this.stateSpec!=null){if(!Y.arraysEqual(this.stateSpec.map(u=>u.shape[u.shape.length-1]),l))throw new Ie(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(u=>new so({shape:[null,u]}));this.stateful&&this.resetStates()}resetStates(n,o=!1){Pe(()=>{if(!this.stateful)throw new md("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape[0];if(i==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>xo([i,s])):this.states_=[xo([i,this.cell.stateSize])];else if(n==null)Cr(this.states_),this.keptStates!=null&&(Cr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>xo([i,s])):this.states_[0]=xo([i,this.cell.stateSize]);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o===!0?this.keptStates.push(this.states_.slice()):Cr(this.states_);for(let s=0;s<this.states_.length;++s){let a=n[s],l=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,u=[i,l];if(!Y.arraysEqual(a.shape,u))throw new Ie(`State ${s} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>Ms(s.clone()))})}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=Bae(n,i,s,this.numConstants);n=a.inputs,i=a.initialState,s=a.constants;let l=[],u=[];if(i!=null){o.initialState=i,l=l.concat(i),this.stateSpec=[];for(let f of i)this.stateSpec.push(new so({shape:f.shape}));u=u.concat(this.stateSpec)}if(s!=null&&(o.constants=s,l=l.concat(s),this.numConstants=s.length),l[0]instanceof Ml){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let h=super.apply(f,o);return this.inputSpec=p,h}else return super.apply(n,o)}call(n,o){return Pe(()=>{let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;n=lr(n),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(n));let l=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==l)throw new Ie(`RNN Layer has ${l} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let u={training:s},f=$ae((g,y)=>{let b=this.cell.call([g].concat(y),u);return[b[0],b.slice(1)]},n,a,this.goBackwards,i,null,this.unroll,this.returnSequences),d=f[0],p=f[1],h=f[2];this.stateful&&this.resetStates(h,s);let m=this.returnSequences?p:d;return this.returnState?[m].concat(h):m})}getInitialState(n){return Pe(()=>{let o=xo(n.shape);return o=It(o,[1,2]),o=Rx(o),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>i>1?R7(o,[1,i]):o):this.cell.stateSize>1?[R7(o,[1,this.cell.stateSize])]:[o]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(n)}getConfig(){let n=super.getConfig(),o={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(o.numConstants=this.numConstants);let i=this.cell.getConfig();return this.getClassName()===t.className&&(o.cell={className:this.cell.getClassName(),config:i}),Object.assign(Object.assign(Object.assign({},i),n),o)}static fromConfig(n,o,i={}){let s=o.cell,a=tc(s,i);return new n(Object.assign(o,{cell:a}))}}return t.className="RNN",t})();tt.registerClass(L0);var Bx=class extends hr{},h9=(()=>{class t extends Bx{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Di(this.units,"units"),this.activation=Vh(n.activation==null?this.DEFAULT_ACTIVATION:n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qn(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ao(n.kernelRegularizer),this.recurrentRegularizer=ao(n.recurrentRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.kernelConstraint=si(n.kernelConstraint),this.recurrentConstraint=si(n.recurrentConstraint),this.biasConstraint=si(n.biasConstraint),this.dropout=JC([1,zh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=JC([1,zh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Wr(n),this.kernel=this.addWeight("kernel",[n[n.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{if(n=n,n.length!==2)throw new Ie(`SimpleRNNCell expects 2 input Tensors, got ${n.length}.`);let i=n[1];n=n[0];let s=o.training==null?!1:o.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$x({ones:()=>Os(n),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$x({ones:()=>Os(i),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a,l=this.dropoutMask,u=this.recurrentDropoutMask;l!=null?a=yp(we(n,l),this.kernel.read()):a=yp(n,this.kernel.read()),this.bias!=null&&(a=pu(a,this.bias.read())),u!=null&&(i=we(i,u));let c=Ke(a,yp(i,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Uh(this.activation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),recurrentInitializer:vo(this.recurrentInitializer),biasInitializer:vo(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:ii(this.kernelConstraint),recurrentConstraint:ii(this.recurrentConstraint),biasConstraint:ii(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},n),o)}}return t.className="SimpleRNNCell",t})();tt.registerClass(h9);var zae=(()=>{class t extends L0{constructor(n){n.cell=new h9(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return new n(o)}}return t.className="SimpleRNN",t})();tt.registerClass(zae);var m9=(()=>{class t extends Bx{constructor(n){if(super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.resetAfter)throw new Ie("GRUCell does not support reset_after parameter set to true.");this.units=n.units,Di(this.units,"units"),this.activation=Vh(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Vh(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qn(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ao(n.kernelRegularizer),this.recurrentRegularizer=ao(n.recurrentRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.kernelConstraint=si(n.kernelConstraint),this.recurrentConstraint=si(n.recurrentConstraint),this.biasConstraint=si(n.biasConstraint),this.dropout=JC([1,zh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=JC([1,zh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Wr(n);let o=n[n.length-1];this.kernel=this.addWeight("kernel",[o,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{if(n=n,n.length!==2)throw new Ie(`GRUCell expects 2 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training==null?!1:o.training,s=n[1];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$x({ones:()=>Os(n),rate:this.dropout,training:i,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$x({ones:()=>Os(s),rate:this.recurrentDropout,training:i,count:3,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,u,c,f;0<this.dropout&&this.dropout<1&&(n=we(n,a[0]));let d=yp(n,this.kernel.read());this.useBias&&(d=pu(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,l[0]));let p=this.recurrentKernel.read(),[h,m]=xs(p,[2*this.units,this.units],p.rank-1),g=yp(s,h),[y,b,x]=xs(d,3,d.rank-1),[v,w]=xs(g,2,g.rank-1);u=this.recurrentActivation.apply(Ke(y,v)),c=this.recurrentActivation.apply(Ke(b,w));let _=yp(we(c,s),m);f=this.activation.apply(Ke(x,_));let S=Ke(we(u,s),we(Ke(1,Zr(u)),f));return[S,S]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Uh(this.activation),recurrentActivation:Uh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),recurrentInitializer:vo(this.recurrentInitializer),biasInitializer:vo(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:ii(this.kernelConstraint),recurrentConstraint:ii(this.recurrentConstraint),biasConstraint:ii(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},n),o)}}return t.className="GRUCell",t})();tt.registerClass(m9);var Uae=(()=>{class t extends L0{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new m9(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="GRU",t})();tt.registerClass(Uae);var bD=(()=>{class t extends Bx{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Di(this.units,"units"),this.activation=Vh(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Vh(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qn(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=n.unitForgetBias,this.kernelRegularizer=ao(n.kernelRegularizer),this.recurrentRegularizer=ao(n.recurrentRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.kernelConstraint=si(n.kernelConstraint),this.recurrentConstraint=si(n.recurrentConstraint),this.biasConstraint=si(n.biasConstraint),this.dropout=JC([1,zh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=JC([1,zh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){var o;n=Wr(n);let i=n[n.length-1];this.kernel=this.addWeight("kernel",[i,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){let a=this.biasInitializer,l=this.units;s=new(o=class extends hu{apply(c,f){let d=a.apply([l]),p=new j7().apply([l]),h=a.apply([l*2]);return oae(oae(d,p),h)}},o.className="CustomInit",o)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(n,o){return Pe(()=>{let i=o.training==null?!1:o.training;if(n=n,n.length!==3)throw new Ie(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let s=n[1],a=n[2];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$x({ones:()=>Os(n),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$x({ones:()=>Os(s),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));let l=this.dropoutMask,u=this.recurrentDropoutMask,c,f,d,p;0<this.dropout&&this.dropout<1&&(n=we(n,l[0]));let h=yp(n,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,u[0])),h=Ke(h,yp(s,this.recurrentKernel.read())),this.useBias&&(h=pu(h,this.bias.read()));let[m,g,y,b]=xs(h,4,h.rank-1);c=this.recurrentActivation.apply(m),f=this.recurrentActivation.apply(g),d=Ke(we(f,a),we(c,this.activation.apply(y))),p=this.recurrentActivation.apply(b);let x=we(p,this.activation.apply(d));return[x,x,d]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Uh(this.activation),recurrentActivation:Uh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),recurrentInitializer:vo(this.recurrentInitializer),biasInitializer:vo(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:ii(this.kernelConstraint),recurrentConstraint:ii(this.recurrentConstraint),biasConstraint:ii(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},n),o)}}return t.className="LSTMCell",t})();tt.registerClass(bD);var Vae=(()=>{class t extends L0{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new bD(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="LSTM",t})();tt.registerClass(Vae);var g9=(()=>{class t extends Bx{constructor(n){super(n),this.cells=n.cells}get stateSize(){let n=[];for(let o of this.cells.slice().reverse())Array.isArray(o.stateSize)?n.push(...o.stateSize):n.push(o.stateSize);return n}call(n,o){return Pe(()=>{n=n;let i=n.slice(1),s=[];for(let u of this.cells.slice().reverse())Array.isArray(u.stateSize)?s.push(i.splice(0,u.stateSize.length)):s.push(i.splice(0,1));s.reverse();let a=[],l;for(let u=0;u<this.cells.length;++u){let c=this.cells[u];i=s[u],u===0?l=[n[0]].concat(i):l=[l[0]].concat(i),l=c.call(l,o),a.push(l.slice(1))}i=[];for(let u of a.slice().reverse())i.push(...u);return[l[0]].concat(i)})}build(n){B7(n)&&(n=n[0]),n=n;let o;this.cells.forEach((i,s)=>{$h(`RNNCell_${s}`,()=>{i.build(n),Array.isArray(i.stateSize)?o=i.stateSize[0]:o=i.stateSize,n=[n[0],o]})}),this.built=!0}getConfig(){let n=super.getConfig(),o=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(o)};return Object.assign(Object.assign({},n),s)}static fromConfig(n,o,i={}){let s=[];for(let a of o.cells)s.push(tc(a,i));return new n({cells:s})}get trainableWeights(){if(!this.trainable)return[];let n=[];for(let o of this.cells)n.push(...o.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let o of this.cells)n.push(...o.nonTrainableWeights);if(!this.trainable){let o=[];for(let i of this.cells)o.push(...i.trainableWeights);return o.concat(n)}return n}getWeights(){let n=[];for(let o of this.cells)n.push(...o.weights);return rP(n)}setWeights(n){let o=[];for(let i of this.cells){let s=i.weights.length,a=n.splice(s);for(let l=0;l<i.weights.length;++l)o.push([i.weights[l],a[l]])}fD(o)}}return t.className="StackedRNNCells",t})();tt.registerClass(g9);function $x(t){let{ones:r,rate:n,training:o=!1,count:i=1,dropoutFunc:s}=t,a=()=>s!=null?s(r(),n):L7(r(),n),l=()=>kw(a,r,o);return!i||i<=1?Ms(l().clone()):Array(i).fill(void 0).map(l).map(c=>Ms(c.clone()))}var XPt=function(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n};var KPt=(()=>{class t extends L0{constructor(n){if(n.unroll)throw new wr("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(n.cell))throw new wr("It is not possible at the moment to stack convolutional cells.");super(n),this.inputSpec=[new so({ndim:5})]}call(n,o){return Pe(()=>{if(this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),o&&o.constants)throw new Ie("ConvRNN2D cell does not support constants");let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}computeOutputShape(n){let o=this.computeSingleOutputShape(n);return this.returnSequences||(o=[o[0],...o.slice(2)]),this.returnState&&(o=[o,...Array(2).fill([n[0],...o.slice(-3)])]),o}getInitialState(n){return Pe(()=>{let{stateSize:o}=this.cell,i=n.shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)],l=xo(a);return Array.isArray(o)?Array(o.length).fill(l):[l]})}resetStates(n,o=!1){Pe(()=>{if(!this.stateful)throw new md("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)];if(i[0]==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xo(a)):this.states_=[xo(a)];else if(n==null)Cr(this.states_),this.keptStates!=null&&(Cr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xo(a)):this.states_[0]=xo(a);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o?this.keptStates.push(this.states_.slice()):Cr(this.states_);for(let u=0;u<this.states_.length;++u){let c=n[u],f=a;if(!Y.arraysEqual(c.shape,f))throw new Ie(`State ${u} is incompatible with layer ${this.name}: expected shape=${f}, received shape=${c.shape}`);this.states_[u]=c}}this.states_=this.states_.map(u=>Ms(u.clone()))})}computeSingleOutputShape(n){let{dataFormat:o,filters:i,kernelSize:s,padding:a,strides:l,dilationRate:u}=this.cell,c=o==="channelsFirst",f=n[c?3:2],d=n[c?4:3],p=rc(f,s[0],a,l[0],u[0]),h=rc(d,s[1],a,l[1],u[1]);return[...n.slice(0,2),...c?[i,p,h]:[p,h,i]]}}return t.className="ConvRNN2D",t})(),y9=(()=>{class t extends bD{constructor(n){let{filters:o,kernelSize:i,strides:s,padding:a,dataFormat:l,dilationRate:u}=n;super(Object.assign(Object.assign({},n),{units:o})),this.filters=o,Di(this.filters,"filters"),this.kernelSize=Nw(i,2,"kernelSize"),this.kernelSize.forEach(c=>Di(c,"kernelSize")),this.strides=Nw(s||1,2,"strides"),this.strides.forEach(c=>Di(c,"strides")),this.padding=a||"valid",cu(this.padding),this.dataFormat=l||"channelsLast",Vo(this.dataFormat),this.dilationRate=Nw(u||1,2,"dilationRate"),this.dilationRate.forEach(c=>Di(c,"dilationRate"))}build(n){var o;n=Wr(n);let i=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[i]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${n[i]}`);let s=n[i],a=4,l=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",l,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let u=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let f=this.biasInitializer,d=this.filters;c=new(o=class extends hu{apply(h,m){let g=f.apply([d]),y=Wi([d]),b=f.apply([d*2]);return aD([g,y,b])}},o.className="CustomInit",o)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(n,o){return Pe(()=>{if(n.length!==3)throw new Ie(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training||!1,s=n[0],a=n[1],l=n[2],u=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$x({ones:()=>Os(s),rate:this.dropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,f=(X,fe,$)=>!fe||!fe[$]?X:we(fe[$],X),d=f(s,c,0),p=f(s,c,1),h=f(s,c,2),m=f(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$x({ones:()=>Os(a),rate:this.recurrentDropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,y=f(a,g,0),b=f(a,g,1),x=f(a,g,2),v=f(a,g,3),w=3,[_,S,C,E]=xs(this.kernel.read(),u,w),[T,I,k,F]=this.useBias?xs(this.bias.read(),u):[null,null,null,null];d=this.inputConv(d,_,T,this.padding),p=this.inputConv(p,S,I,this.padding),h=this.inputConv(h,C,k,this.padding),m=this.inputConv(m,E,F,this.padding);let[D,L,P,R]=xs(this.recurrentKernel.read(),u,w);y=this.recurrentConv(y,D),b=this.recurrentConv(b,L),x=this.recurrentConv(x,P),v=this.recurrentConv(v,R);let V=this.recurrentActivation.apply(Ke(d,y)),G=this.recurrentActivation.apply(Ke(p,b)),U=Ke(we(G,l),we(V,this.activation.apply(Ke(h,x)))),H=we(this.recurrentActivation.apply(Ke(m,v)),this.activation.apply(U));return[H,H,U]})}getConfig(){let n=super.getConfig(),{units:o}=n,i=XPt(n,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},i),s)}inputConv(n,o,i,s){let a=Zu(n,o,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return i?pu(a,i,this.dataFormat):a}recurrentConv(n,o){return Zu(n,o,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();tt.registerClass(y9);var Gae=(()=>{class t extends KPt{constructor(n){let o=new y9(n);super(Object.assign(Object.assign({},n),{cell:o}))}static fromConfig(n,o){return new n(o)}}return t.className="ConvLSTM2D",t})();tt.registerClass(Gae);re();var b9=(()=>{class t extends hr{constructor(n){super(n),this.rate=Math.max(Math.min(n.rate,1),0),this.noiseShape=n.noiseShape,this.seed=n.seed,this.supportsMasking=!0}getNoiseShape(n){if(this.noiseShape==null)return this.noiseShape;let o=n.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(this.noiseShape[s]==null?o[s]:this.noiseShape[s]);return i}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);if(0<this.rate&&this.rate<1){let s=o.training==null?!1:o.training,a=this.getNoiseShape(i);return kw(()=>L7(i,this.rate,a,this.seed),()=>i,s)}return n})}getConfig(){let n={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},o=super.getConfig();return Object.assign(n,o),n}dispose(){return super.dispose()}}return t.className="Dropout",t})();tt.registerClass(b9);var Wae=(()=>{class t extends b9{constructor(n){super(n),this.inputSpec=[{ndim:3}]}getNoiseShape(n){let o=n.shape;return[o[0],1,o[2]]}}return t.className="SpatialDropout1D",t})();tt.registerClass(Wae);var qae=(()=>{class t extends hr{constructor(n){if(super(n),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.batchInputShape==null&&n.inputShape==null&&n.inputDim!=null){let o=null;n.batchSize!=null&&(o=n.batchSize),this.batchInputShape=[o,n.inputDim]}this.units=n.units,Di(this.units,"units"),this.activation=Vh(n.activation),n.useBias!=null&&(this.useBias=n.useBias),this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=si(n.kernelConstraint),this.biasConstraint=si(n.biasConstraint),this.kernelRegularizer=ao(n.kernelRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.activityRegularizer=ao(n.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(n){n=Wr(n);let o=n[n.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[o,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:o}}],this.built=!0}computeOutputShape(n){n=Wr(n);let o=n.slice();return o[o.length-1]=this.units,o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n),s=I7(this.activation.getClassName()),a;return s!=null?a=yp(i,this.kernel.read(),s,this.bias?this.bias.read():null):(a=yp(i,this.kernel.read()),this.bias!=null&&(a=pu(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){let n={units:this.units,activation:Uh(this.activation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),biasInitializer:vo(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:ii(this.kernelConstraint),biasConstraint:ii(this.biasConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dense",t})();tt.registerClass(qae);var Hae=(()=>{class t extends hr{constructor(n){n=n||{},super(n),this.inputSpec=[{minNDim:3}],this.dataFormat=n.dataFormat}computeOutputShape(n){n=Wr(n);for(let o of n.slice(1))if(o==null)throw new Ie(`The shape of the input to "Flatten" is not fully defined (got ${n.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[n[0],gp(n,1)]}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);if(this.dataFormat==="channelsFirst"&&i.rank>1){let s=[0];for(let a=2;a<i.rank;++a)s.push(a);s.push(1),i=Gr(i,s)}return K4e(i)})}getConfig(){let n={};this.dataFormat!=null&&(n.dataFormat=this.dataFormat);let o=super.getConfig();return Object.assign(n,o),n}}return t.className="Flatten",t})();tt.registerClass(Hae);var Yae=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.activation=Vh(n.activation)}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);return this.activation.apply(i)})}getConfig(){let n={activation:Uh(this.activation)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Activation",t})();tt.registerClass(Yae);var Xae=(()=>{class t extends hr{constructor(n){super(n),this.n=n.n,this.inputSpec=[{ndim:2}]}computeOutputShape(n){return[n[0],this.n,n[1]]}call(n,o){return Pe(()=>(n=lr(n),Y4e(n,this.n)))}getConfig(){let n={n:this.n},o=super.getConfig();return Object.assign(n,o),n}}return t.className="RepeatVector",t})();tt.registerClass(Xae);var Kae=(()=>{class t extends hr{constructor(n){super(n),this.targetShape=n.targetShape;for(let o=0;o<this.targetShape.length;++o)this.isUnknown(this.targetShape[o])&&(this.targetShape[o]=null)}isUnknown(n){return n<0||n==null}fixUnknownDimension(n,o){let i="Total size of new array must be unchanged.",s=o.slice(),a=1,l=null;for(let c=0;c<s.length;++c){let f=s[c];if(this.isUnknown(f))if(l===null)l=c;else throw new Ie("Can only specifiy one unknown dimension.");else a*=f}let u=gp(n);if(l!==null){if(a===0||u%a!==0)throw new Ie(i);s[l]=u/a}else if(u!==a)throw new Ie(i);return s}computeOutputShape(n){let o=!1;for(let i=0;i<n.length;++i)if(this.isUnknown(n[i])){o=!0;break}return o?n.slice(0,1).concat(this.targetShape):n.slice(0,1).concat(this.fixUnknownDimension(n.slice(1),this.targetShape))}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n),s=i.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Se(i,a)})}getConfig(){let n={targetShape:this.targetShape},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Reshape",t})();tt.registerClass(Kae);var Zae=(()=>{class t extends hr{constructor(n){if(super(n),n.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(n.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${n.dims} instead.`);let o=fu(1,n.dims.length+1);if(!Y.arraysEqual(n.dims.slice().sort(),o))throw new Error("Invalid permutation `dims`: "+JSON.stringify(n.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=n.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new so({ndim:this.dims.length+1})]}computeOutputShape(n){n=Wr(n);let o=n.slice();return this.dims.forEach((i,s)=>{o[s+1]=n[i]}),o}call(n,o){return Gr(lr(n),this.dimsIncludingBatch)}getConfig(){let n={dims:this.dims},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Permute",t})();tt.registerClass(Zae);var Qae=(()=>{class t extends hr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null?this.maskValue=n.maskValue==null?0:n.maskValue:this.maskValue=0}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={maskValue:this.maskValue};return Object.assign(o,n),o}computeMask(n,o){let i=lr(n);return FC(Lh(i,this.maskValue),-1)}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n),l=FC(Lh(i,this.maskValue),-1,!0);return we(i,rt(l,i.dtype))})}}return t.className="Masking",t})();tt.registerClass(Qae);re();var Jae=(()=>{class t extends hr{constructor(n){if(super(n),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",n.batchInputShape==null&&n.inputShape==null){let o=null;n.batchSize!=null&&(o=n.batchSize),n.inputLength==null?this.batchInputShape=[o,null]:this.batchInputShape=[o].concat(Rn(n.inputLength))}this.inputDim=n.inputDim,Di(this.inputDim,"inputDim"),this.outputDim=n.outputDim,Di(this.outputDim,"outputDim"),this.embeddingsInitializer=Qn(n.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ao(n.embeddingsRegularizer),this.activityRegularizer=ao(n.activityRegularizer),this.embeddingsConstraint=si(n.embeddingsConstraint),this.maskZero=n.maskZero,this.supportsMasking=n.maskZero,this.inputLength=n.inputLength}build(n){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(n){}computeMask(n,o){return Pe(()=>this.maskZero?(n=lr(n),Lh(n,ar(n))):null)}computeOutputShape(n){if(n=Wr(n),this.inputLength==null)return[...n,this.outputDim];let o=Rn(this.inputLength);if(o.length!==n.length-1)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);{let i=0;for(let s=0;s<o.length;++s){let a=o[s],l=n[s+1];if(a!=null&&l!=null&&a!==l)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);a==null&&(o[i]=l),i++}}return[n[0],...o,this.outputDim]}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);i.dtype!=="int32"&&(i=Nl(i,"int32"));let s=P7(this.embeddings.read(),Se(i,[i.size]));return Se(s,Wr(this.computeOutputShape(i.shape)))})}getConfig(){let n={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:vo(this.embeddingsInitializer),embeddingsRegularizer:$n(this.embeddingsRegularizer),activityRegularizer:$n(this.activityRegularizer),embeddingsConstraint:ii(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Embedding",t})();tt.registerClass(Jae);re();re();var zx=class extends hr{constructor(r){super(r||{}),this.supportsMasking=!0}mergeFunction(r){throw new wr}computeElementwiseOpOutputShape(r,n){if(r==null||n==null)return null;if(r.length<n.length)return this.computeElementwiseOpOutputShape(n,r);if(n.length===0)return r;let o=r.slice(0,r.length-n.length);for(let i=0;i<n.length;++i){let s=r[r.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)o.push(null);else if(s===1)o.push(a);else if(a===1)o.push(s);else{if(s!==a)throw new Ie("Operands could not be broadcast together with shapes "+JSON.stringify(r)+" "+JSON.stringify(n));o.push(s)}}return o}build(r){if(Array.isArray(r)&&!Array.isArray(r[0])&&(r=[Wr(r)]),r=r,r.length<2)throw new Ie(`A merge layer should be called on an Array of at least 2 inputs. Got ${r.length} input(s).`);let n=[];for(let s of r)s!=null&&s[0]!==null&&n.push(s[0]);if(n=mp(n),n.length>1)throw new Ie(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(r)}.`);let o=r[0]==null?null:r[0].slice(1);for(let s=1;s<r.length;++s){let a=r[s]==null?null:r[s].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}let i=r.map(s=>s.length);r.indexOf(null)===-1&&mp(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return Pe(()=>{if(r=r,this.reshapeRequired){let o=[],i=r.map(s=>s.rank);if(i.indexOf(null)===-1){let s=zh(i);for(let a of r){let l=a.rank;for(let u=0;u<s-l;++u)a=Rx(a,1);o.push(a)}return this.mergeFunction(o)}else{let s=!1;for(let u of r){let c=u.rank;if(c==null){let f=u.shape,d=f[0],p=f.slice(1).concat([d]),h=Se(u,[d].concat(gp(f.slice(1))));h=Gr(h,[1,0]),h=Se(h,p),o.push(h),s=!0}else if(c>1){let f=fu(1,c).concat([0]);o.push(Gr(u,f)),s=!0}else o.push(u)}let a=this.mergeFunction(o),l=a.rank;if(s){if(l==null){let u=a.shape,c=u.length,f=u[c-1],d=[f].concat(u.slice(0,u.length-1));a=Se(Gr(Se(a,[-1,f]),[1,0]),d)}else if(l>1){let u=[l-1].concat(fu(0,l-1));a=Gr(a,u)}}return a}}else return this.mergeFunction(r)})}computeOutputShape(r){r=r;let n;r[0]==null?n=null:n=r[0].slice(1);for(let i=1;i<r.length;++i){let s=r[i]==null?null:r[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let o=[];for(let i of r)i!=null&&i[0]!==null&&o.push(i[0]);return o=mp(o),o.length===1?n=o.concat(n):n=[null].concat(n),n}computeMask(r,n){return Pe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ie("`mask` should be an Array");if(!Array.isArray(r))throw new Ie("`inputs` should be an Array");if(n.length!==r.length)throw new Ie(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${r.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:ki(i,0));let o=n[0];for(let i=1;i<n.length-1;++i)o=Ha(o,n[i]);return o})}},ele=(()=>{class t extends zx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return o})}}return t.className="Add",t})();tt.registerClass(ele);var tle=(()=>{class t extends zx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=we(o,n[i]);return o})}}return t.className="Multiply",t})();tt.registerClass(tle);var rle=(()=>{class t extends zx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return we(1/n.length,o)})}}return t.className="Average",t})();tt.registerClass(rle);var nle=(()=>{class t extends zx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=Ju(o,n[i]);return o})}}return t.className="Maximum",t})();tt.registerClass(nle);var ole=(()=>{class t extends zx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=pd(o,n[i]);return o})}}return t.className="Minimum",t})();tt.registerClass(ole);var ile=(()=>{class t extends zx{constructor(n){super(n),this.DEFAULT_AXIS=-1,n==null&&(n={}),this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){if(!(Array.isArray(n)&&Array.isArray(n[0]))||n.length===1)throw new Ie("A `Concatenate` layer should be called on a list of at least 2 inputs");n=n;let o=!0;for(let s of n)if(s!=null){o=!1;break}if(o)return;let i=[];for(let s=0;s<n.length;++s){let a=n[s].slice();a.splice(this.axis,1);let l=!1;for(let u of i)if(Y.arraysEqual(u,a)){l=!0;break}l||i.push(a)}if(i.length>1)throw new Ie("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(n))}mergeFunction(n){return Pe(()=>aD(n,this.axis))}computeOutputShape(n){if(!(Array.isArray(n)&&Array.isArray(n[0])))throw new Ie("A `Concatenate` layer should be called on a list of inputs.");let o=n,i=o[0].slice(),s=this.axis<0?i.length+this.axis:this.axis;for(let a of o.slice(1)){if(i[s]==null||a[s]==null){i[s]=null;break}i[s]+=a[s]}return i}computeMask(n,o){if(o==null)return null;if(!Array.isArray(o))throw new Ie("`mask` should be an array for Concatenate");if(!Array.isArray(n))throw new Ie("`inputs` should be an array for Concatenate");if(o.length!==n.length)throw new Ie(`Mismatch in the length of mask (${o.length}) and the legnth of inputs (${n.length})`);return Pe(()=>{let i=!0;if(o.forEach(l=>{if(l!=null){i=!1;return}}),i)return null;let s=[];for(let l=0;l<n.length;++l)o[l]==null?s.push(rt(Os(n[l]),"bool")):o[l].rank<n[l].rank?s.push(ki(o[l],-1)):s.push(o[l]);let a=On(s,this.axis);return vI(a,-1,!1)})}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Concatenate",t})();tt.registerClass(ile);function cP(t,r){for(;t<0;)t+=r;return t}function ZPt(t,r,n){if(t.shape.length>3||r.shape.length>3)throw new wr("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${r.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||r.dtype==="complex64")throw new wr("batchDot is not implemented for complex64-type Tensors yet.");let o=t.shape.length,i=r.shape.length;n==null&&(n=[o-1,i-2]);let s=n;return Pe(()=>{let a;if(o>i){a=o-i;let u=[];for(let c=0;c<a;++c)u.push(1);r=Se(r,r.shape.concat(u))}else if(i>o){a=i-o;let u=[];for(let c=0;c<a;++c)u.push(1);t=Se(t,t.shape.concat(u))}else a=0;let l;if(t.shape.length===2&&r.shape.length===2)s[0]===s[1]?l=It(we(t,r),s[0]):l=It(we(Gr(t,[1,0]),r),s[1]);else{let u=s[0]!==t.shape.length-1,c=s[1]===r.shape.length-1;l=Vr(t,r,u,c)}if(a>0){let u;o>i?u=o+i-3:u=o-1;let c=[];for(let f=u;f<u+a;++f)c.push(f);l=Xc(l,c)}return l.shape.length===1&&(l=ki(l,1)),l})}var sle=(()=>{class t extends zx{constructor(n){super(n),this.axes=n.axes,this.normalize=n.normalize==null?!1:n.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){Y.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0],i=n[1];if(o.length>3||i.length>3)throw new wr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);if(o[s[0]]!==i[s[1]])throw new Ie(`Dimension incompatibility: ${o[s[0]]} !== ${i[s[1]]}`)}mergeFunction(n){if(n.length!==2)throw new Ie(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${n.length} input(s).`);let o=n[0],i=n[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,l)=>cP(a,n[l].shape.length)):s=[cP(this.axes,o.shape.length),cP(this.axes,i.shape.length)],this.normalize&&(o=nP(o,s[0]),i=nP(i,s[1])),ZPt(o,i,s)}interpretAxes(n,o){let i;return Array.isArray(this.axes)?i=this.axes:i=[cP(this.axes,n.length),cP(this.axes,o.length)],i}computeOutputShape(n){Y.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0].slice(),i=n[1].slice();if(o.length>3||i.length>3)throw new wr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);o.splice(s[0],1),i.splice(s[1],1),i.splice(0,1);let a=o.concat(i);return a.length===1&&a.push(1),a}computeMask(n,o){return null}getConfig(){let n={axes:this.axes,normalize:this.normalize},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dot",t})();tt.registerClass(sle);re();var ale=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.stddev=n.stddev}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={stddev:this.stddev};return Object.assign(o,n),o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);return kw(()=>Ke(lD(i.shape,0,this.stddev),i),()=>i,o.training||!1)})}}return t.className="GaussianNoise",t})();tt.registerClass(ale);var lle=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);return this.rate>0&&this.rate<1?kw(()=>{let a=Math.sqrt(this.rate/(1-this.rate));return we(i,lD(i.shape,1,a))},()=>i,o.training||!1):i})}}return t.className="GaussianDropout",t})();tt.registerClass(lle);var ule=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate,this.noiseShape=n.noiseShape}_getNoiseShape(n){return this.noiseShape||lr(n).shape}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return Pe(()=>{if(this.rate<1&&this.rate>0){let i=this._getNoiseShape(n);return kw(()=>{let a=lr(n),c=-1.6732632423543772*1.0507009873554805,f=au(Yc(i),this.rate);f=Nl(f,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=Ke(we(a,f),we(Ke(f,-1),c));return Ke(we(h,d),p)},()=>lr(n),o.training||!1)}return n})}}return t.className="AlphaDropout",t})();tt.registerClass(ule);re();re();function fP(t,r,n,o,i,s=.001){let a;if(t.rank===2)a=B8(t,r,n,o,i,s);else if(t.rank===3)a=$8(t,r,n,o,i,s);else if(t.rank===4)a=z8(t,r,n,o,i,s);else throw new wr(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function QPt(t,r,n,o,i=.001){return Pe(()=>{let s=zC(t,o),a=s.mean,l=s.variance;return[fP(t,a,l,n,r,i),a,l]})}function JPt(t,r,n,o,i=.001){return Pe(()=>{let s=zC(t,o),a=s.mean,l=s.variance,u=[];for(let m of fu(0,t.rank))o.indexOf(m)!==-1?u.push(1):u.push(t.shape[m]);let c=Se(a,u),f=Se(l,u),d=r==null?null:Se(r,u),p=n==null?null:Se(n,u);return[fP(t,c,f,p,d,i),a,l]})}function eLt(t,r,n,o,i=.001){return Y.arraysEqual(o.slice().sort(),fu(0,t.rank-1))?QPt(t,r,n,o,i):JPt(t,r,n,o,i)}var cle=(()=>{class t extends hr{constructor(n){n==null&&(n={}),super(n),this.supportsMasking=!0,this.axis=n.axis==null?-1:n.axis,this.momentum=n.momentum==null?.99:n.momentum,this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=Qn(n.betaInitializer||"zeros"),this.gammaInitializer=Qn(n.gammaInitializer||"ones"),this.movingMeanInitializer=Qn(n.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Qn(n.movingVarianceInitializer||"ones"),this.betaConstraint=si(n.betaConstraint),this.gammaConstraint=si(n.gammaConstraint),this.betaRegularizer=ao(n.betaRegularizer),this.gammaRegularizer=ao(n.gammaRegularizer)}build(n){n=Wr(n);let o=this.axis>=0?this.axis:this.axis+n.length,i=n[o];if(i==null)throw new Ie(`Axis ${o} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(n)}.`);this.inputSpec=[new so({ndim:n.length,axes:{[o]:i}})];let s=[i];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(n,o){return Pe(()=>{let i=o.training==null?!1:o.training,s=lr(n),a=s.shape,l=a.length,u=fu(0,l),c=this.axis>=0?this.axis:this.axis+l;u.splice(c,1);let f=pp(1,l);f[c]=a[c];let d=u.slice();d.sort();let p=!Y.arraysEqual(d,fu(0,l).slice(0,l-1)),h=()=>{if(p){let v=Se(this.movingMean.read(),f),w=Se(this.movingVariance.read(),f),_=this.center?Se(this.beta.read(),f):null,S=this.scale?Se(this.gamma.read(),f):null;return fP(s,v,w,_,S,this.epsilon)}else return fP(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!i)return h();let[m,g,y]=eLt(s,this.gamma.read(),this.beta.read(),u,this.epsilon),b=(v,w,_)=>{Pe(()=>{let S=1-_,C=v.read(),E=we(wt(C,w),S);v.write(wt(C,E))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,y,this.momentum)})(),m})}getConfig(){let n={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vo(this.betaInitializer),gammaInitializer:vo(this.gammaInitializer),movingMeanInitializer:vo(this.movingMeanInitializer),movingVarianceInitializer:vo(this.movingVarianceInitializer),betaRegularizer:$n(this.betaRegularizer),gammaRegularizer:$n(this.gammaRegularizer),betaConstraint:ii(this.betaConstraint),gammaConstraint:ii(this.gammaConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BatchNormalization",t})();tt.registerClass(cle);var fle=(()=>{class t extends hr{constructor(n){if(n==null&&(n={}),super(n),this.axis=n.axis==null?-1:n.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let o of this.axis)if(!Number.isInteger(o))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=Qn(n.betaInitializer||"zeros"),this.gammaInitializer=Qn(n.gammaInitializer||"ones"),this.betaRegularizer=ao(n.betaRegularizer),this.gammaRegularizer=ao(n.gammaRegularizer),this.supportsMasking=!0}build(n){n=Wr(n);let o=n.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=o);for(let a of this.axis)if(a<0||a>=o)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==mp(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let i=this.axis.map(a=>n[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(n,o){let i=lr(n),s=i.shape,a=s.length;return Pe(()=>{let{mean:u,variance:c}=zC(i,this.axis,!0),f=pp(1,a);for(let y of this.axis)f[y]=s[y];let d=y=>y!=null&&y.shape.length!==a?Se(y,f):y,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,m=[],g=[];for(let y=0;y<a;++y)this.axis.indexOf(y)!==-1?(m.push(s[y]),g.push(1)):(m.push(1),g.push(s[y]));return u=wa(u,m),c=wa(c,m),p!=null&&(p=wa(p,g)),h!=null&&(h=wa(h,g)),fP(i,u,c,h,p,this.epsilon)})}getConfig(){let n={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vo(this.betaInitializer),gammaInitializer:vo(this.gammaInitializer),betaRegularizer:$n(this.betaRegularizer),gammaRegularizer:$n(this.gammaRegularizer)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LayerNormalization",t})();tt.registerClass(fle);re();re();function tLt(t,r,n){return Pe(()=>{if(t.rank!==4)throw new Ie(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(r==null&&(r=[[1,1],[1,1]]),r.length!==2||r[0].length!==2||r[1].length!==2)throw new Ie("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=du()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ie(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let o;return n==="channelsFirst"?o=[[0,0],[0,0],r[0],r[1]]:o=[[0,0],r[0],r[1],[0,0]],lu(t,o)})}var dle=(()=>{class t extends hr{constructor(n){if(n==null&&(n={}),super(n),this.dataFormat=n.dataFormat==null?du():n.dataFormat,n.padding==null)this.padding=[[1,1],[1,1]];else if(typeof n.padding=="number")this.padding=[[n.padding,n.padding],[n.padding,n.padding]];else{if(n.padding=n.padding,n.padding.length!==2)throw new Ie(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${n.padding.length} array.`);let o,i;if(typeof n.padding[0]=="number")o=[n.padding[0],n.padding[0]],i=[n.padding[1],n.padding[1]];else{if(n.padding=n.padding,n.padding[0].length!==2)throw new Ie(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${n.padding[0].length} array.`);if(o=n.padding[0],n.padding[1].length!==2)throw new Ie(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${n.padding[1].length} array.`);i=n.padding[1]}this.padding=[o,i]}this.inputSpec=[new so({ndim:4})]}computeOutputShape(n){n=Wr(n);let o,i;return this.dataFormat==="channelsFirst"?(n[2]!=null&&n[2]>=0?o=n[2]+this.padding[0][0]+this.padding[0][1]:o=null,n[3]!=null&&n[3]>=0?i=n[3]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],n[1],o,i]):(n[1]!=null&&n[1]>=0?o=n[1]+this.padding[0][0]+this.padding[0][1]:o=null,n[2]!=null&&n[2]>=0?i=n[2]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],o,i,n[3]])}call(n,o){return Pe(()=>tLt(lr(n),this.padding,this.dataFormat))}getConfig(){let n={padding:this.padding,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ZeroPadding2D",t})();tt.registerClass(dle);re();re();function C9(t,r,n,o,i,s){return Pe(()=>{Vo(i),eae(s),cu(o),n==null&&(n=[1,1]),o==null&&(o="valid"),i==null&&(i=du()),s==null&&(s="max"),t=uP(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=cw(t,r,n,l):a=J1(t,r,n,l),i==="channelsFirst"&&(a=Gr(a,[0,3,1,2])),a})}function U5e(t,r,n,o,i,s){return Pe(()=>{Vo(i),eae(s),cu(o),n==null&&(n=[1,1,1]),o==null&&(o="valid"),i==null&&(i=du()),s==null&&(s="max"),t=Nae(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=CU(t,r,n,l):a=j8(t,r,n,l),i==="channelsFirst"&&(a=Gr(a,[0,4,1,2,3])),a})}var x9=class extends hr{constructor(r){if(r.poolSize==null&&(r.poolSize=2),super(r),typeof r.poolSize=="number")this.poolSize=[r.poolSize];else if(Array.isArray(r.poolSize)&&r.poolSize.length===1&&typeof r.poolSize[0]=="number")this.poolSize=r.poolSize;else throw new Ie(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.poolSize)}`);if(Di(this.poolSize,"poolSize"),r.strides==null)this.strides=this.poolSize;else if(typeof r.strides=="number")this.strides=[r.strides];else if(Array.isArray(r.strides)&&r.strides.length===1&&typeof r.strides[0]=="number")this.strides=r.strides;else throw new Ie(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.strides)}`);Di(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,cu(this.padding),this.inputSpec=[new so({ndim:3})]}computeOutputShape(r){r=Wr(r);let n=rc(r[1],this.poolSize[0],this.padding,this.strides[0]);return[r[0],n,r[2]]}call(r,n){return Pe(()=>{this.invokeCallHook(r,n),r=Rx(lr(r),2);let o=this.poolingFunction(lr(r),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Xc(o,[2])})}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(r,n),r}},ple=(()=>{class t extends x9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Vo(a),cu(s),C9(n,o,i,s,a,"max")}}return t.className="MaxPooling1D",t})();tt.registerClass(ple);var hle=(()=>{class t extends x9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Vo(a),cu(s),C9(n,o,i,s,a,"avg")}}return t.className="AveragePooling1D",t})();tt.registerClass(hle);var v9=class extends hr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==2)throw new Ie(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides];Di(this.poolSize,"poolSize"),Di(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Vo(this.dataFormat),cu(this.padding),this.inputSpec=[new so({ndim:4})]}computeOutputShape(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2];return n=rc(n,this.poolSize[0],this.padding,this.strides[0]),o=rc(o,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o]:[r[0],n,o,r[3]]}call(r,n){return Pe(()=>(this.invokeCallHook(r,n),this.poolingFunction(lr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},mle=(()=>{class t extends v9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Vo(a),cu(s),C9(n,o,i,s,a,"max")}}return t.className="MaxPooling2D",t})();tt.registerClass(mle);var gle=(()=>{class t extends v9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Vo(a),cu(s),C9(n,o,i,s,a,"avg")}}return t.className="AveragePooling2D",t})();tt.registerClass(gle);var w9=class extends hr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==3)throw new Ie(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides,r.strides];Di(this.poolSize,"poolSize"),Di(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Vo(this.dataFormat),cu(this.padding),this.inputSpec=[new so({ndim:5})]}computeOutputShape(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2],i=this.dataFormat==="channelsFirst"?r[4]:r[3];return n=rc(n,this.poolSize[0],this.padding,this.strides[0]),o=rc(o,this.poolSize[1],this.padding,this.strides[1]),i=rc(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o,i]:[r[0],n,o,i,r[4]]}call(r,n){return Pe(()=>(this.invokeCallHook(r,n),this.poolingFunction(lr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},yle=(()=>{class t extends w9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Vo(a),cu(s),U5e(n,o,i,s,a,"max")}}return t.className="MaxPooling3D",t})();tt.registerClass(yle);var ble=(()=>{class t extends w9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Vo(a),cu(s),U5e(n,o,i,s,a,"avg")}}return t.className="AveragePooling3D",t})();tt.registerClass(ble);var _9=class extends hr{constructor(r){super(r),this.inputSpec=[new so({ndim:3})]}computeOutputShape(r){return[r[0],r[2]]}call(r,n){throw new wr}},xle=(()=>{class t extends _9{constructor(n){super(n||{})}call(n,o){return Pe(()=>{let i=lr(n);return bo(i,1)})}}return t.className="GlobalAveragePooling1D",t})();tt.registerClass(xle);var vle=(()=>{class t extends _9{constructor(n){super(n||{})}call(n,o){return Pe(()=>{let i=lr(n);return Qs(i,1)})}}return t.className="GlobalMaxPooling1D",t})();tt.registerClass(vle);var S9=class extends hr{constructor(r){super(r),this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Vo(this.dataFormat),this.inputSpec=[new so({ndim:4})]}computeOutputShape(r){return r=r,this.dataFormat==="channelsLast"?[r[0],r[3]]:[r[0],r[1]]}call(r,n){throw new wr}getConfig(){let r={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},wle=(()=>{class t extends S9{call(n,o){return Pe(()=>{let i=lr(n);return this.dataFormat==="channelsLast"?bo(i,[1,2]):bo(i,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();tt.registerClass(wle);var _le=(()=>{class t extends S9{call(n,o){return Pe(()=>{let i=lr(n);return this.dataFormat==="channelsLast"?Qs(i,[1,2]):Qs(i,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();tt.registerClass(_le);re();re();var E9=class extends hr{constructor(r){super(r),this.layer=r.layer}build(r){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(r){this.layer!=null&&(this.layer.trainable=r)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(r){this.layer.setWeights(r)}getConfig(){let r={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(r,n),r}setFastWeightInitDuringBuild(r){super.setFastWeightInitDuringBuild(r),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(r)}static fromConfig(r,n,o={}){let i=n.layer,s=tc(i,o);delete n.layer;let a={layer:s};return Object.assign(a,n),new r(a)}},Sle=(()=>{class t extends E9{constructor(n){super(n),this.supportsMasking=!0}build(n){if(n=Wr(n),n.length<3)throw new Ie(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(n)}`);this.inputSpec=[{shape:n}];let o=[n[0]].concat(n.slice(2));this.layer.built||(this.layer.build(o),this.layer.built=!0),super.build(n)}computeOutputShape(n){n=Wr(n);let o=[n[0]].concat(n.slice(2)),i=this.layer.computeOutputShape(o),s=n[1];return[i[0],s].concat(i.slice(1))}call(n,o){return Pe(()=>(n=lr(n),$ae((l,u)=>[lr(this.layer.call(l,o)),[]],n,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();tt.registerClass(Sle);function rLt(t){R0(V4e,"BidirectionalMergeMode",t)}var nLt="concat",Cle=(()=>{class t extends E9{constructor(n){super(n);let o=n.layer.getConfig(),i={};i.className=n.layer.getClassName(),i.config=o,this.forwardLayer=tc(i),o.goBackwards=o.goBackwards!==!0;let s={};if(s.className=n.layer.getClassName(),s.config=o,this.backwardLayer=tc(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=n.mergeMode===void 0?nLt:n.mergeMode,rLt(this.mergeMode),n.weights)throw new wr("weights support is not implemented for Bidirectional layer yet.");this._stateful=n.layer.stateful,this.returnSequences=n.layer.returnSequences,this.returnState=n.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=n.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(n){this._trainable=n,this.forwardLayer!=null&&(this.forwardLayer.trainable=n),this.backwardLayer!=null&&(this.backwardLayer.trainable=n)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(n){let o=n.length,i=Math.floor(o/2);this.forwardLayer.setWeights(n.slice(0,i)),this.backwardLayer.setWeights(n.slice(i))}computeOutputShape(n){let o=this.forwardLayer.computeOutputShape(n);Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o;let i,s,a;return this.returnState&&(a=o.slice(1)),i=o[0],i=i,this.mergeMode==="concat"?(i[i.length-1]*=2,s=[i]):this.mergeMode==null?s=[i,i.slice()]:s=[i],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[i].concat(a).concat(a.slice()):ta(s)}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=Bae(n,i,s,this.numConstants);if(n=a.inputs,i=a.initialState,s=a.constants,Array.isArray(n)&&(i=n.slice(1),n=n[0]),(i==null||i.length===0)&&s==null)return super.apply(n,o);let l=[],u=[];if(i!=null){let f=i.length;if(f%2>0)throw new Ie("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");o.initialState=i,l.push(...i);let d=i.map(p=>new so({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,f/2),this.backwardLayer.stateSpec=d.slice(f/2),u.push(...d)}if(s!=null)throw new wr("Support for constants in Bidirectional layers is not implemented yet.");let c=l[0]instanceof Ml;for(let f of l)if(f instanceof Ml!==c)throw new Ie("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let h=super.apply(f,o);return this.inputSpec=p,h}else return super.apply(n,o)}call(n,o){return Pe(()=>{let i=o.initialState,s,a;if(i==null)s=this.forwardLayer.call(n,o),a=this.backwardLayer.call(n,o);else{let c=i.slice(0,i.length/2),f=i.slice(i.length/2);s=this.forwardLayer.call(n,Object.assign(o,{initialState:c})),a=this.backwardLayer.call(n,Object.assign(o,{initialState:f}))}let l;this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=bs(a,1));let u;return this.mergeMode==="concat"?u=aD([s,a]):this.mergeMode==="sum"?u=Ke(s,a):this.mergeMode==="ave"?u=we(.5,Ke(s,a)):this.mergeMode==="mul"?u=we(s,a):this.mergeMode==null&&(u=[s,a]),this.returnState?this.mergeMode==null?u.concat(l):[u].concat(l):u})}resetStates(n){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(n){$h(this.forwardLayer.name,()=>{this.forwardLayer.build(n)}),$h(this.backwardLayer.name,()=>{this.backwardLayer.build(n)}),this.built=!0}computeMask(n,o){Array.isArray(o)&&(o=o[0]);let i;if(this.returnSequences?this.mergeMode==null?i=[o,o]:i=o:this.mergeMode==null?i=[null,null]:i=null,this.returnState){let a=this.forwardLayer.states.map(l=>null);return Array.isArray(i)?i.concat(a).concat(a):[i].concat(a).concat(a)}else return i}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(n),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(n)}getConfig(){let n={mergeMode:this.mergeMode},o=super.getConfig();return Object.assign(n,o),n}static fromConfig(n,o){let i=tc(o.layer);if(delete o.layer,o.numConstants!=null)throw new wr("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let s=o;return s.layer=i,new n(s)}}return t.className="Bidirectional",t})();tt.registerClass(Cle);re();var Ele=(()=>{class t extends hr{constructor(n){super(n),this.scale=n.scale,n.offset?this.offset=n.offset:this.offset=0}getConfig(){let n={scale:this.scale,offset:this.offset},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return Pe(()=>(n=lr(n),n.dtype!=="float32"&&(n=Nl(n,"float32")),Ke(we(n,this.scale),this.offset)))}}return t.className="Rescaling",t})();tt.registerClass(Ele);re();var{resizeBilinear:oLt,cropAndResize:iLt}=ec,Tle=(()=>{class t extends hr{constructor(n){super(n),this.height=n.height,this.width=n.width}centerCrop(n,o,i,s,a,l,u,c){return Pe(()=>{let f,d=!1,p=o/l,h=i/u,m=(s+o)/l,g=(a+i)/u,y=[p,h,m,g],b=[];n.rank===3?(d=!0,f=ss([n])):f=n;for(let S=0;S<f.shape[0];S++)b.push(y);let x=Ti(b,[b.length,4]),v=N0(0,b.length,1,"int32"),_=iLt(f,x,v,[s,a],"nearest");return d?Nl(lr(Ya(_)),c):Nl(_,c)})}upsize(n,o,i,s){return Pe(()=>{let a=oLt(n,[o,i]);return Nl(a,s)})}call(n,o){return Pe(()=>{let i=lr(n),s=i.dtype,a=i.shape,l=a[a.length-3],u=a[a.length-2],c=0;l!==this.height&&(c=Math.floor((l-this.height)/2));let f=0;return u!==this.width&&(f=Math.floor((u-this.width)/2),f===0&&(f=1)),c>=0&&f>=0?this.centerCrop(i,c,f,this.height,this.width,l,u,s):this.upsize(n,this.height,this.width,s)})}getConfig(){let n={height:this.height,width:this.width},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Wr(n);let o=n.length-3,i=n.length-2;return n[o]=this.height,n[i]=this.width,n}}return t.className="CenterCrop",t})();tt.registerClass(Tle);re();re();re();re();function V5e(t,r,n,o){let i=lr(t);if(i.dtype!=="int32"&&(i=Nl(i,"int32")),r==="int")return i;let s=i.shape;if(i.rank===0&&(i=ki(i,-1)),r==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=ki(i,-1)),i.rank>2)throw new Ie(`When outputMode is not int, maximum output rank is 2 Received outputMode ${r} and input shape ${s} which would result in output rank ${i.rank}.`);let a=["multiHot","oneHot"].includes(r),l=i,u;if(typeof o<"u"&&r==="count"?u=S3(l,o,n,a):u=S3(l,[],n,a),r!=="tfIdf")return u;if(o)return we(u,o);throw new Ie("When outputMode is 'tfIdf', weights must be provided.")}var Ale=(()=>{class t extends hr{constructor(n){super(n),this.numTokens=n.numTokens,n.outputMode?this.outputMode=n.outputMode:this.outputMode="multiHot"}getConfig(){let n={numTokens:this.numTokens,outputMode:this.outputMode},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){return n=Wr(n),n==null?[this.numTokens]:this.outputMode==="oneHot"&&n[n.length-1]!==1?(n.push(this.numTokens),n):(n[n.length-1]=this.numTokens,n)}call(n,o){return Pe(()=>{n=lr(n),n.dtype!=="int32"&&(n=Nl(n,"int32"));let i;if(typeof o.countWeights<"u"){if(this.outputMode!=="count")throw new Ie(`countWeights is not used when outputMode !== count.
              Received countWeights=${o.countWeights}`);i=lr(o.countWeights)}let s=Qs(n),a=Sx(n),l=ni(this.numTokens,s).bufferSync().get(0),u=au(a,0).bufferSync().get(0);if(!(l&&u))throw new Ie(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return V5e(n,this.outputMode,this.numTokens,i)})}}return t.className="CategoryEncoding",t})();tt.registerClass(Ale);re();var aLt=["bilinear","nearest"],G5e=new Set(aLt),kle=(()=>{class t extends hr{constructor(n){if(super(n),this.height=n.height,this.width=n.width,n.interpolation)if(G5e.has(n.interpolation))this.interpolation=n.interpolation;else throw new Ie(`Invalid interpolation parameter: ${n.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!n.cropToAspectRatio}computeOutputShape(n){n=Wr(n);let o=n[2];return[this.height,this.width,o]}getConfig(){let n={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return Pe(()=>{let i=[this.height,this.width];if(this.interpolation==="bilinear")return ec.resizeBilinear(n,i,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ec.resizeNearestNeighbor(n,i,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...G5e]} are supported`)})}}return t.className="Resizing",t})();tt.registerClass(kle);re();var W5e=(()=>{class t{constructor(n){this.seed=n}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var q5e=(()=>{class t extends hr{constructor(n){super(n),this.randomGenerator=new W5e(n.seed)}getConfig(){let n={seed:this.randomGenerator.seed},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BaseRandomLayer",t})();re();var lLt=["bilinear","nearest"],H5e=new Set(lLt),Ile=(()=>{class t extends q5e{constructor(n){super(n);let{factor:o,interpolation:i="bilinear"}=n;if(this.factor=o,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ie(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ie(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ie(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(i)if(H5e.has(i))this.interpolation=i;else throw new Ie(`Invalid interpolation parameter: ${i} is not implemented`)}getConfig(){let n={factor:this.factor,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Wr(n);let o=n[2];return[this.imgHeight,-1,o]}call(n,o){return Pe(()=>{let i=lr(n);this.imgHeight=i.shape[i.shape.length-3];let s=i.shape[i.shape.length-2];this.widthFactor=Yc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);let l=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return ec.resizeBilinear(n,l);case"nearest":return ec.resizeNearestNeighbor(n,l);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...H5e]} are supported`)}})}}return t.className="RandomWidth",t})();tt.registerClass(Ile);function uLt(t){return new Iw(t)}function cLt(t){return new kae(t)}function fLt(t){return new Eae(t)}function dLt(t){return new Tae(t)}function pLt(t){return new Aae(t)}function hLt(t){return new Dae(t)}function mLt(t){return new Iae(t)}function gLt(t){return new Rae(t)}function yLt(t){return new d9(t)}function bLt(t){return new Mae(t)}function xLt(t){return new p9(t)}function vLt(t){return new Fae(t)}function wLt(t){return new Oae(t)}function _Lt(t){return new Pae(t)}function SLt(t){return new Lae(t)}function CLt(t){return new jae(t)}function ELt(t){return new Yae(t)}function TLt(t){return new qae(t)}function ALt(t){return new b9(t)}function kLt(t){return new Wae(t)}function ILt(t){return new Hae(t)}function DLt(t){return new Xae(t)}function NLt(t){return new Kae(t)}function MLt(t){return new Zae(t)}function FLt(t){return new Jae(t)}function OLt(t){return new ele(t)}function RLt(t){return new rle(t)}function PLt(t){return new ile(t)}function LLt(t){return new nle(t)}function jLt(t){return new ole(t)}function BLt(t){return new tle(t)}function $Lt(t){return new sle(t)}function zLt(t){return new cle(t)}function ULt(t){return new fle(t)}function VLt(t){return new dle(t)}function Dle(t){return new hle(t)}function GLt(t){return Dle(t)}function WLt(t){return Dle(t)}function Nle(t){return new gle(t)}function qLt(t){return Nle(t)}function HLt(t){return Nle(t)}function Mle(t){return new ble(t)}function YLt(t){return Mle(t)}function XLt(t){return Mle(t)}function KLt(t){return new xle(t)}function ZLt(t){return new wle(t)}function Y5e(t){return new vle(t)}function X5e(t){return new _le(t)}function K5e(t){return new ple(t)}function Z5e(t){return new mle(t)}function QLt(t){return new yle(t)}function JLt(t){return new Uae(t)}function ejt(t){return new m9(t)}function tjt(t){return new Vae(t)}function rjt(t){return new bD(t)}function njt(t){return new zae(t)}function ojt(t){return new h9(t)}function ijt(t){return new Gae(t)}function sjt(t){return new y9(t)}function ajt(t){return new L0(t)}function ljt(t){return new g9(t)}function ujt(t){return new Cle(t)}function cjt(t){return new Sle(t)}var fjt=Y5e,djt=X5e,pjt=K5e,hjt=Z5e;function mjt(t){return new ale(t)}function gjt(t){return new lle(t)}function yjt(t){return new ule(t)}function bjt(t){return new Qae(t)}function xjt(t){return new Ele(t)}function vjt(t){return new Tle(t)}function wjt(t){return new kle(t)}function _jt(t){return new Ale(t)}function Sjt(t){return new Ile(t)}re();var Ajt=Me();Ajt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});re();re();var Q5e;(function(t){let r;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(r=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(Q5e||(Q5e={}));re();re();re();re();re();re();re();re();re();Z1();re();var E4t=Pc(j3());re();var S4t=Pc(j3());re();re();re();var XBn=Symbol("out"),KBn=Symbol("field"),ZBn=Symbol("quote"),QBn=Symbol("quoteafterquote"),JBn=Symbol("quoteinquote");re();re();re();re();re();re();re();re();re();function lt(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the CPU backend.`)})}var P4t=Ca.whereImpl,eBe=(()=>{class t extends Sg{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new D1(this,ld())}write(n,o,i){this.firstUse&&(this.firstUse=!1,Me().get("IS_NODE")&&ce.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let s={id:this.nextDataId()};return this.data.set(s,{values:n,dtype:i,refCount:1}),s}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&Y.isString(i[0])){let a=i.map(l=>Y.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return{dataId:s,shape:n,dtype:o}}refCount(n){return this.data.has(n)?this.data.get(n).refCount:0}incRef(n){let o=this.data.get(n);o.refCount++}decRef(n){if(this.data.has(n)){let o=this.data.get(n);o.refCount--}}move(n,o,i,s,a){this.data.set(n,{values:o,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}read(n){return je(this,null,function*(){return this.readSync(n)})}readSync(n){let{dtype:o,complexTensorInfos:i}=this.data.get(n);if(o==="complex64"){let s=this.readSync(i.real.dataId),a=this.readSync(i.imag.dataId);return ce.mergeRealAndImagArrays(s,a)}return Y.convertBackendValuesAndArrayBuffer(this.data.get(n).values,o)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>Y.decodeString(s));return er(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return er(n.shape,n.dtype,o)}makeOutput(n,o,i){return ld().makeTensorFromTensorInfo(this.makeTensorInfo(o,i,n),this)}disposeData(n,o=!1){if(this.data.has(n)){if(this.data.get(n).refCount--,!o&&this.data.get(n).refCount>0)return!1;let{complexTensorInfos:i}=this.data.get(n);i!=null&&(this.disposeData(i.real.dataId,!0),this.disposeData(i.imag.dataId,!0)),this.data.delete(n)}return!0}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}time(n){return je(this,null,function*(){let o=Y.now();return n(),{kernelMs:Y.now()-o}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(n){lt([n],"where");let o=this.readSync(n.dataId);return P4t(n.shape,o)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var cue={};fn(cue,{addImpl:()=>Ple,bincountImpl:()=>wD,bincountReduceImpl:()=>A9,bitwiseAndImpl:()=>Lle,castImpl:()=>Rle,ceilImpl:()=>jle,concatImpl:()=>k9,equalImpl:()=>Ble,expImpl:()=>zle,expm1Impl:()=>Vle,floorDivImpl:()=>Wle,floorImpl:()=>Gle,gatherNdImpl:()=>I9,gatherV2Impl:()=>D9,greaterEqualImpl:()=>Hle,greaterImpl:()=>qle,lessEqualImpl:()=>Xle,lessImpl:()=>Yle,linSpaceImpl:()=>N9,logImpl:()=>Kle,maxImpl:()=>M9,maximumImpl:()=>Zle,minimumImpl:()=>Qle,multiplyImpl:()=>dP,negImpl:()=>Jle,notEqualImpl:()=>eue,prodImpl:()=>tue,raggedGatherImpl:()=>F9,raggedRangeImpl:()=>O9,raggedTensorToTensorImpl:()=>R9,rangeImpl:()=>P9,rsqrtImpl:()=>nue,scatterImpl:()=>Wh,sigmoidImpl:()=>NBe,simpleAbsImpl:()=>Ole,sliceImpl:()=>iue,sparseFillEmptyRowsImpl:()=>L9,sparseReshapeImpl:()=>j9,sparseSegmentReductionImpl:()=>SD,sqrtImpl:()=>OBe,squaredDifferenceImpl:()=>sue,staticRegexReplaceImpl:()=>aue,stridedSliceImpl:()=>B9,stringNGramsImpl:()=>$9,stringSplitImpl:()=>z9,stringToHashBucketFastImpl:()=>U9,subImpl:()=>uue,tileImpl:()=>V9,topKImpl:()=>G9,transposeImpl:()=>_D,uniqueImpl:()=>W9});re();function Ole(t){let r=new Float32Array(t.length);for(let n=0;n<t.length;++n)r[n]=Math.abs(t[n]);return r}var L4t=t=>{let{x:r}=t.inputs,n=t.backend;lt(r,"abs");let o=new Float32Array(Y.sizeFromShape(r.shape)),i=n.data.get(r.dataId).values;return o=Ole(i),n.makeOutput(o,r.shape,r.dtype)},tBe={kernelName:Cb,backendName:"cpu",kernelFunc:L4t};re();re();function hn(t){return(r,n,o,i,s)=>{let a=ce.assertAndGetBroadcastShape(r,n),l=a.length,u=Y.computeStrides(a),c=Y.sizeFromShape(a),f=Y.getTypedArrayFromDType(s,c),d=r.length,p=n.length,h=Y.computeStrides(r),m=Y.computeStrides(n),g=ce.getBroadcastDims(r,a),y=ce.getBroadcastDims(n,a);if(g.length+y.length===0)for(let b=0;b<f.length;++b)f[b]=t(o[b%o.length],i[b%i.length]);else for(let b=0;b<f.length;++b){let x=Y.indexToLoc(b,l,u),v=x.slice(-d);g.forEach(C=>v[C]=0);let w=Y.locToIndex(v,d,h),_=x.slice(-p);y.forEach(C=>_[C]=0);let S=Y.locToIndex(_,p,m);f[b]=t(o[w],i[S])}return[f,a]}}re();re();re();re();function Ps(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=n.makeTensorInfo(o.shape,"complex64"),u=n.data.get(l.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(o.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},l}var rBe={kernelName:SS,backendName:"cpu",kernelFunc:Ps};function xD(t,r,n="float32"){if(n==="complex64"){let i=xD(t,r,"float32"),s=xD(t,r,"float32");return Ps({inputs:{real:i,imag:s},backend:t})}let o=Y.makeZerosTypedArray(Y.sizeFromShape(r),n);return t.makeTensorInfo(r,n,o)}re();function Ka(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var nBe={kernelName:Eh,backendName:"cpu",kernelFunc:Ka};re();function xp(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var oBe={kernelName:tC,backendName:"cpu",kernelFunc:xp};function Rle(t,r,n,o){if(o==="int32"){let i=Int32Array.from(t);return[r,"int32",i]}if(o==="bool"){let i=Y.toTypedArray([0],n),[s,a]=hn((l,u)=>l!==u?1:0)(r,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${o}`)}function vp(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return Ka({inputs:{x:i},backend:n});let f=xD(n,i.shape,i.dtype),d=vp({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=Ps({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){let f=xp({inputs:{input:i},backend:n}),d=vp({inputs:{x:f},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(f),d}if(!Y.hasEncodingLoss(i.dtype,s)){let f=Ka({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:s}}let a=n.data.get(i.dataId).values,[l,u,c]=Rle(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}var iBe={kernelName:Ch,backendName:"cpu",kernelFunc:vp};function _n(t,r,n,o){return n==null?({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;lt([a,l],t);let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=a.dtype==="string"?ce.fromUint8ToStringArray(c):c,p=a.dtype==="string"?ce.fromUint8ToStringArray(f):f,h=o||a.dtype,[m,g]=r(a.shape,l.shape,d,p,h);return u.makeTensorInfo(g,h,m)}:({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;if(a.dtype==="complex64"||l.dtype==="complex64"){let c=vp({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),f=u.data.get(c.dataId),d=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,h=u.data.get(d.dataId).values,m=u.data.get(p.dataId).values,g=vp({inputs:{x:l},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(g.dataId),b=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,v=u.data.get(b.dataId).values,w=u.data.get(x.dataId).values,[_,S,C]=n(a.shape,l.shape,h,m,v,w),E=u.makeTensorInfo(C,"float32",_),T=u.makeTensorInfo(C,"float32",S),I=Ps({inputs:{real:E,imag:T},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(T),I}else{let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=o||a.dtype,[p,h]=r(a.shape,l.shape,c,f,d);return u.makeTensorInfo(h,d,p)}}}function vD(t){return(r,n,o,i,s,a)=>{let l=ce.assertAndGetBroadcastShape(r,n),u=Y.sizeFromShape(l),c=l.length,f=Y.computeStrides(l),d=Y.getTypedArrayFromDType("float32",u),p=Y.getTypedArrayFromDType("float32",u),h=ce.getBroadcastDims(r,l),m=ce.getBroadcastDims(n,l),g=ce.mergeRealAndImagArrays(o,i),y=ce.mergeRealAndImagArrays(s,a),b=r.length,x=Y.computeStrides(r),v=n.length,w=Y.computeStrides(n);if(h.length+m.length===0)for(let _=0;_<d.length;_++){let S=_%g.length,C=_%y.length,E=t(g[S*2],g[S*2+1],y[C*2],y[C*2+1]);d[_]=E.real,p[_]=E.imag}else for(let _=0;_<d.length;_++){let S=Y.indexToLoc(_,c,f),C=S.slice(-b);h.forEach(F=>C[F]=0);let E=Y.locToIndex(C,b,x),T=S.slice(-v);m.forEach(F=>T[F]=0);let I=Y.locToIndex(T,v,w),k=t(g[E*2],g[E*2+1],y[I*2],y[I*2+1]);d[_]=k.real,p[_]=k.imag}return[d,p,l]}}var Ple=hn((t,r)=>t+r),j4t=vD((t,r,n,o)=>({real:t+n,imag:r+o})),j0=_n(np,Ple,j4t),sBe={kernelName:np,backendName:"cpu",kernelFunc:j0};re();function wD(t,r,n,o,i){let s=Y.sizeFromShape(o),a=Y.makeZerosTypedArray(i,n);for(let l=0;l<t.length;l++){let u=t[l];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(s>0?a[u]+=r[l]:a[u]+=1)}return a}function A9(t,r,n,o=!1){let i=t.shape[0],s=t.shape[1],a=er([i,n],r.dtype);for(let l=0;l<i;l++)for(let u=0;u<s;u++){let c=t.get(l,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(o?a.set(1,l,c):r.size>0?a.set(a.get(l,c)+r.get(l,u),l,c):a.set(a.get(l,c)+1,l,c))}return a}re();var Lle=hn((t,r)=>t&r),B4t=_n(M1,Lle),aBe={kernelName:M1,backendName:"cpu",kernelFunc:B4t};re();re();function oa(t){return(r,n,o)=>{let i=Y.getArrayFromDType(n,r.length);for(let s=0;s<r.length;++s)i[s]=t(r[s],o);return i}}re();function Er(t,r,n){let o=oa(r);return nc(t,o,n)}function nc(t,r,n){return({inputs:o,attrs:i,backend:s})=>{let{x:a}=o;lt(a,t);let l=s,u=l.data.get(a.dataId).values,c;if(a.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=ce.fromUint8ToStringArray(u)}else c=u;let f=n||a.dtype,d=r(c,f,i);return l.makeTensorInfo(a.shape,f,d)}}var jle=oa(t=>Math.ceil(t)),$4t=nc(Fg,jle),lBe={kernelName:Fg,backendName:"cpu",kernelFunc:$4t};re();function k9(t,r,n,o){let i=Y.getArrayFromDType(n,Y.sizeFromShape(r));if(o&&n!=="string"){let s=0;t.forEach(a=>{let l=Y.sizeFromShape(a.shape);i.set(a.vals,s),s+=l})}else{let s=0;t.forEach(a=>{let l=n==="string"?ce.fromUint8ToStringArray(a.vals):a.vals,u=0;for(let c=0;c<a.shape[0];++c){let f=c*r[1]+s;for(let d=0;d<a.shape[1];++d)i[f+d]=l[u++]}s+=a.shape[1]})}return i}re();var Ble=hn((t,r)=>t===r?1:0),$le=_n(F1,Ble,null,"bool"),uBe={kernelName:F1,backendName:"cpu",kernelFunc:$le};re();var zle=oa(t=>Math.exp(t)),Ule=nc($g,zle,"float32"),cBe={kernelName:$g,backendName:"cpu",kernelFunc:Ule};re();var Vle=oa(t=>Math.expm1(t)),z4t=nc(zg,Vle),fBe={kernelName:zg,backendName:"cpu",kernelFunc:z4t};re();var Gle=oa(t=>Math.floor(t)),U4t=nc(Ug,Gle),dBe={kernelName:Ug,backendName:"cpu",kernelFunc:U4t};re();var Wle=hn((t,r)=>Math.floor(t/r)),V4t=_n(Vg,Wle,null,"int32"),pBe={kernelName:Vg,backendName:"cpu",kernelFunc:V4t};re();function I9(t,r,n,o,i,s,a,l,u){let c=er([o,s],n);for(let f=0;f<o;f++){let d=[],p=0;for(let h=0;h<i;h++){let m=t[f*i+h];p+=m*a[h],d.push(m)}if(p<0||p>=u/s)throw new Error(`Invalid indices: ${d} does not index into ${l}`);for(let h=0;h<s;h++)c.values[f*s+h]=r.get(...r.indexToLoc(p*s+h))}return c}re();function D9(t,r,n){let o=er(n,t.dtype);for(let i=0;i<o.size;++i){let a=o.indexToLoc(i).slice(),l=a[0],u=a[2],c=r.locToIndex([l,u]);a[2]=r.values[c];let f=t.locToIndex(a);0<=f&&f<t.values.length&&(o.values[i]=t.values[f])}return o}re();var qle=hn((t,r)=>t>r?1:0),G4t=_n(O1,qle,null,"bool"),hBe={kernelName:O1,backendName:"cpu",kernelFunc:G4t};re();var Hle=hn((t,r)=>t>=r?1:0),W4t=_n(Gg,Hle,null,"bool"),mBe={kernelName:Gg,backendName:"cpu",kernelFunc:W4t};re();var Yle=hn((t,r)=>t<r?1:0),q4t=_n(R1,Yle,null,"bool"),gBe={kernelName:R1,backendName:"cpu",kernelFunc:q4t};re();var Xle=hn((t,r)=>t<=r?1:0),H4t=_n(P1,Xle,null,"bool"),yBe={kernelName:P1,backendName:"cpu",kernelFunc:H4t};re();function N9(t,r,n){let o=(r-t)/(n-1),i=Y.makeZerosTypedArray(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+o;return i}re();var Kle=oa(t=>Math.log(t)),Y4t=nc(Yg,Kle),bBe={kernelName:Yg,backendName:"cpu",kernelFunc:Y4t};re();function M9(t,r,n,o){let i=Y.getTypedArrayFromDType(o,Y.sizeFromShape(n));for(let s=0;s<i.length;++s){let a=s*r,l=t[a];for(let u=0;u<r;++u){let c=t[a+u];(Number.isNaN(c)||c>l)&&(l=c)}i[s]=l}return i}re();var Zle=hn((t,r)=>Math.max(t,r)),X4t=_n(Kg,Zle),xBe={kernelName:Kg,backendName:"cpu",kernelFunc:X4t};re();var Qle=hn((t,r)=>Math.min(t,r)),K4t=_n(Zg,Qle),vBe={kernelName:Zg,backendName:"cpu",kernelFunc:K4t};re();var dP=hn((t,r)=>t*r),Z4t=vD((t,r,n,o)=>({real:t*n-r*o,imag:t*o+r*n})),iE=_n(Jg,dP,Z4t),wBe={kernelName:Jg,backendName:"cpu",kernelFunc:iE};re();function Jle(t,r,n){let o=Y.createScalarValue(-1,n);return dP([],r,o,t,n)}function Q4t(t){let{inputs:r,backend:n}=t,{x:o}=r;lt(o,"neg");let i=n.data.get(o.dataId).values,[s,a]=Jle(i,o.shape,o.dtype);return n.makeTensorInfo(a,o.dtype,s)}var _Be={kernelName:Zb,backendName:"cpu",kernelFunc:Q4t};re();var eue=hn((t,r)=>t!==r?1:0),J4t=_n($1,eue,null,"bool"),SBe={kernelName:$1,backendName:"cpu",kernelFunc:J4t};re();re();re();function _D(t,r,n,o,i){let s=r.length,a=Y.sizeFromShape(r),l=Y.computeStrides(r),u=Y.computeStrides(i),c=Y.getTypedArrayFromDType(n,Y.sizeFromShape(i));for(let f=0;f<a;++f){let d=Y.indexToLoc(f,s,l),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[o[m]];let h=Y.locToIndex(p,s,u);c[h]=t[f]}return c}function ai(t){let{inputs:r,attrs:n,backend:o}=t,{x:i}=r,{perm:s}=n;lt(i,"transpose");let a=i.shape.length,l=new Array(a);for(let d=0;d<l.length;d++)l[d]=i.shape[s[d]];let u=o.data.get(i.dataId).values,c=_D(u,i.shape,i.dtype,s,l);return{dataId:o.write(c,l,i.dtype),shape:l,dtype:i.dtype}}var CBe={kernelName:Ah,backendName:"cpu",kernelFunc:ai};function tue(t,r,n,o){let[i,s]=ce.computeOutAndReduceShapes(t,o),a=Gi(r,"int32"),l=Y.makeZerosTypedArray(Y.sizeFromShape(i),a),u=Y.sizeFromShape(s);for(let c=0;c<l.length;++c){let f=c*u,d=1;for(let p=0;p<u;++p)d*=n[f+p];l[c]=d}return{outVals:l,outShape:i,outDtype:a}}function e5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"prod");let l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=ce.getAxesPermutation(u,l),f=u,d=i,p=[];c!=null&&(d=ai({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),f=ce.getInnerMostAxes(f.length,l));let h=n.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=tue(d.shape,d.dtype,h,f),b=g;return a&&(b=ce.expandShapeToKeepDim(g,u)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,y,m)}var EBe={kernelName:nx,backendName:"cpu",kernelFunc:e5t};re();function t5t(t,r,n){t.forEach((o,i)=>{if(o<0||o>=n){let s=Y.indexToLoc(i,r.length,Y.computeStrides(r)).join(",");throw new Error(`indices[${s}] = ${o} is not in [0, ${n})`)}})}function r5t(t,r){for(let n=0;n<t.length;++n){let o=t[n],i=n===t.length-1?r:t[n+1].length;if(o.length===0)throw new Error("Ragged splits may not be empty");if(o[0]<0)throw new Error("Ragged splits must be non-negative");if(o[o.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<o.length;++s)if(o[s-1]>o[s])throw new Error("Ragged splits must be sorted in ascending order")}}function n5t(t,r,n,o){let i=[],s=0,a=r.length-1+n.length,l=new Array(a).fill(null).map(()=>[0]);r5t(n,o);let u=1;for(let c=0;c<r.length-1;++c){u*=r[c];let f=r[c+1];for(let d=1;d<u+1;++d)l[c].push(d*f)}for(let c=0;c<t.length;++c){let f=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){let h=n[p],m=p+r.length-1;if(m>=0){let g=l[m],y=g[g.length-1]-h[f];for(let b=f;b<d;++b)l[m].push(h[b+1]+y)}f=h[f],d=h[d]}d!==f&&(i.push([f,d]),s+=d-f)}return{outSplits:l,valueSlices:i,numValues:s}}function o5t(t){let r=[];for(let n=0;n<t.length;++n){let o=t[n].length,i=Y.getArrayFromDType("int32",o);r.push(i),t[n].forEach((s,a)=>i[a]=s)}return r}function TBe(t,r){let n=t.slice(0,r);for(;n.length<r;)n.push(1);for(let o=r;o<t.length;o++)n[r-1]*=t[o];return n}function i5t(t,r,n,o,i,s){let a=TBe(r,2)[1],l=TBe(s,2)[1],u=0;for(let c of n)for(let f=c[0];f<c[1];++f){for(let d=0;d<o;++d)i[u*l+d]=t[f*a+d];++u}}function s5t(t,r,n,o,i){let s=r.slice();s[0]=i;let a=Y.getArrayFromDType(n,Y.sizeFromShape(s)),l=t.length,u=l===0?0:l/r[0];return i5t(t,r,o,u,a,s),[a,s]}function F9(t,r,n,o,i,s,a,l){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(r[0].length===0)throw new Error("Split tensors must not be scalars");let u=r[0][0]-1;if(t5t(s,a,u),o.length===0)throw new Error("params.rank must be nonzero");let c=o[0],{outSplits:f,valueSlices:d,numValues:p}=n5t(s,a,t,c),h=o5t(f),m=s5t(n,o,i,d,p);return[h,m[0],m[1]]}re();var ABe=2147483647;function O9(t,r,n,o,i,s,a){if(r.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");let l=r.length===0,u=i.length===0,c=a.length===0,f=[];l||f.push(r[0]),u||f.push(i[0]),c||f.push(a[0]);for(let y=1;y<f.length;++y)if(f[y]!==f[y-1])throw new Error("starts, limits, and deltas must have the same shape");let d=f.length===0?1:f[0],p=Y.getArrayFromDType("int32",d+1);p[0]=0;for(let y=0;y<d;++y){let b=l?t[0]:t[y],x=u?o[0]:o[y],v=c?s[0]:s[y];if(v===0)throw new Error("Requires delta != 0");let w;if(v>0&&x<b||v<0&&x>b)w=0;else if(w=Math.ceil(Math.abs((x-b)/v)),w>ABe)throw new Error(`Requires ((limit - start) / delta) <= ${ABe}`);p[y+1]=p[y]+w}let h=p[d],m=Y.getArrayFromDType(n,h),g=0;for(let y=0;y<d;++y){let b=p[y+1]-p[y],x=l?t[0]:t[y],v=c?s[0]:s[y];for(let w=0;w<b;++w)m[g++]=x,x+=v}return[p,m]}re();var wp=ce.RowPartitionType,rue=class t{constructor(r,n,o,i,s,a,l,u,c,f){this.shape=r,this.shapeShape=n,this.values=o,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=l,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=ce.getRowPartitionTypesHelper(f),this.raggedRank=ce.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(r){return this.rowPartitionTypes[0]===wp.FIRST_DIM_SIZE?this.rowPartitionTypes[r+1]:this.rowPartitionTypes[r]}getRowPartitionTensor(r){return this.rowPartitionTypes[0]===wp.FIRST_DIM_SIZE?this.rowPartitionValues[r+1]:this.rowPartitionValues[r]}getMaxWidth(r){let n=this.getRowPartitionTensor(r-1);switch(this.getRowPartitionTypeByDimension(r-1)){case wp.VALUE_ROWIDS:return t.getMaxWidthValueRowID(n);case wp.ROW_SPLITS:return t.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${wp[this.getRowPartitionTypeByDimension(r-1)]}`)}}static getMaxWidthRowSplit(r){let n=r.length;if(n===0||n===1)return 0;let o=0;for(let i=0;i<n-1;++i){let s=r[i+1]-r[i];s>o&&(o=s)}return o}static getMaxWidthValueRowID(r){let n=r.length;if(n===0)return 0;let o=0,i=r[0],s=0;for(let a=1;a<n;++a){let l=r[a];l!==i&&(i=l,s=Math.max(a-o,s),o=a)}return Math.max(n-o,s)}tensorShapeFromTensor(r,n,o=!0){if(n.length===0){if(r[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return IBe(r,o)}calculateOutputSize(r){let n=this.valuesShape,o=this.defaultValueShape;ce.validateDefaultValueShape(o,n);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=ce.combineRaggedTensorToTensorShapes(this.raggedRank,i,n);a[0]<0&&(a[0]=r);for(let l=1;l<=this.raggedRank;++l)a[l]<0&&(a[l]=this.getMaxWidth(l));return a}calculateFirstParentOutputIndex(r,n,o){let i=Math.min(r,o),s=[],a=0;for(let l=0;l<i;++l,a+=n)s.push(a);for(let l=i;l<r;++l)s.push(-1);return Y.assert(s.length===r,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(r,n,o,i){let s=r.length,a=[];for(let l=0;l<s-1;++l){let u=r[l+1]-r[l],c=Math.min(i,u),f=n[l];f===-1&&(c=0);for(let d=0;d<c;++d)a.push(f),f+=o;for(let d=0;d<u-c;++d)a.push(-1)}if(s>0&&a.length!==r[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(r,n,o,i){let s=r.length,a=[];if(s===0)return[];let l=0,u=r[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];a.push(c);for(let f=1;f<s;++f){let d=r[f];if(d===u)c>=0&&(++l,l<i?c+=o:c=-1);else{if(l=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==r.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(r,n,o,i){let s=this.getRowPartitionTensor(r),a=this.getRowPartitionTypeByDimension(r);switch(a){case wp.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,o,i);case wp.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,o,i);default:throw new Error(`Unsupported partition type: ${wp[a]}`)}}getFirstDimensionSize(){let r=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case wp.FIRST_DIM_SIZE:return r[0];case wp.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case wp.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${wp[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),o=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*o[u+1];let s=IBe(o,!1),a=Y.getArrayFromDType(this.valuesDType,Y.sizeFromShape(s));if(i[0]*o[0]>0){let u=this.calculateFirstParentOutputIndex(n,i[0],o[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,i[c],o[c]);this.setOutput(this.raggedRank,u,a,s)}return[s,a]}setOutput(r,n,o,i){if(o.length===0)return;let s=this.values,a=o,l=i.slice();l=l.slice(r+1);let u=Y.sizeFromShape(l),c=n.length,f=this.defaultValue;if(f.length!==u&&f.length!==1){let m=this.defaultValueShape;Pe(()=>{let g=Se(f,m);f=S0(g,l).dataSync()})}let d=0,p=0,h=0;for(let m=0;m<=c;++m){let g=m<c?n[m]:-1;if(g===h){++h;continue}if(p<h){let y=s.subarray(d*u),b=a.subarray(p*u),x=(h-p)*u;kBe(b,y,x)}if(m>=c){let y=o.length;g=Math.floor(y/u)}if(g>h)if(this.defaultValue.length===1)a.subarray(h*u,g*u).fill(this.defaultValue[0]),h=g;else for(;g>h;){let y=a.slice(h*u);kBe(y,f,u),++h}g<0?(d=m+1,p=h):(d=m,p=h,h=p+1)}}};function kBe(t,r,n){for(let o=0;o<n;o++)t[o]=r[o]}function IBe(t,r){let n=[];for(let o of t){if(o<0){if(!r)throw new Error(`Dimension ${o} must be >= 0`);if(o<-1)throw new Error(`Dimension ${o} must be >= -1`);o=-1}n.push(o)}return n}function R9(t,r,n,o,i,s,a,l,u,c){return new rue(t,r,n,o,i,s,a,l,u,c).compute()}re();function P9(t,r,n,o){let i=t===r,s=t<r&&n<0,a=r<t&&n>1;if(i||s||a)return Y.makeZerosTypedArray(0,o);let l=Math.abs(Math.ceil((r-t)/n)),u=Y.makeZerosTypedArray(l,o);r<t&&n===1&&(n=-1),u[0]=t;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}re();var nue=oa(t=>1/Math.sqrt(t)),a5t=nc(i0,nue),DBe={kernelName:i0,backendName:"cpu",kernelFunc:a5t};re();function Wh(t,r,n,o,i,s,a,l,u,c){let f=[o/i,i],d=t.values,p=r.values;if(o===0)return er(n,r.dtype);let h=u instanceof Tn?u:er(f,r.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let m=0;m<s;m++){let g=[],y=0;for(let b=0;b<a;b++){let x=d[m*a+b];g.push(x),y+=x*l[b]}if(y<0||y>=o/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let b=0;b<i;b++)c?h.values[y*i+b]+=p[m*i+b]:h.values[y*i+b]=r.rank===0?p[0]:p[m*i+b]}return h}re();var NBe=oa(t=>1/(1+Math.exp(-t))),oue=Er(c0,t=>1/(1+Math.exp(-t))),MBe={kernelName:c0,backendName:"cpu",kernelFunc:oue};re();function iue(t,r,n,o,i){let s=Rs.isSliceContinous(o,r,n),a=Y.sizeFromShape(n),l=Y.computeStrides(o);if(s){let d=Rs.computeFlatOffset(r,l);return i==="string"?t.slice(d,d+a):t.subarray(d,d+a)}let u=i==="string"?ce.fromUint8ToStringArray(t):t,c=er(o,i,u),f=er(n,i);for(let d=0;d<f.size;++d){let p=f.indexToLoc(d),h=p.map((m,g)=>m+r[g]);f.set(c.get(...h),...p)}return i==="string"?ce.fromStringArrayToUint8(f.values):f.values}function _p(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o;lt(i,"slice");let[l,u]=Rs.parseSliceParams(i,s,a);Rs.assertParamsValid(i,l,u);let c=n.data.get(i.dataId).values,f=iue(c,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,f)}var FBe={kernelName:ux,backendName:"cpu",kernelFunc:_p};re();function L9(t,r,n,o,i,s,a){let l=r[0],u=s[0],c=new Array(u),f=new Array(l),d=r[1];if(u===0){if(l!==0)throw new Error(ce.getSparseFillEmptyRowsIndicesDenseShapeMismatch(l));let y=Y.getArrayFromDType(n,0),b=Y.getArrayFromDType(i,0);return[y,[0,d],b,c,f]}let p=!0,h=0,m=new Array(u).fill(0);for(let y=0;y<l;++y){let b=t[y*d];if(b<0)throw new Error(ce.getSparseFillEmptyRowsNegativeIndexErrorMessage(y,b));if(b>=u)throw new Error(ce.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(y,b,u));++m[b],p=p&&b>=h,h=b}let g=!0;for(let y=0;y<u;++y){let b=m[y]===0;c[y]=b,g=g&&!b,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&p){let y=t,b=o;for(let x=0;x<l;++x)f[x]=x;return[y,[l,d],b,c,f]}else{let y=m[u-1],b=Y.getArrayFromDType(n,y*d),x=Y.getArrayFromDType(i,y),v=new Array(u).fill(0);for(let w=0;w<l;++w){let _=t[w*d],S=v[_],C=(_===0?0:m[_-1])+S;v[_]++;for(let E=0;E<d;++E)b[C*d+E]=t[w*d+E];x[C]=o[w],f[w]=C}for(let w=0;w<u;++w)if(v[w]===0){let S=w===0?0:m[w-1];b[S*d+0]=w;for(let C=1;C<d;++C)b[S*d+C]=0;x[S]=a}return[b,[y,d],x,c,f]}}re();function j9(t,r,n,o,i){let s=Y.sizeFromShape(o),a=r[0],l=i.length,u=[],c=1,f=-1;for(let y=0;y<l;++y){let b=i[y];if(b===-1){if(f!==-1)throw new Error(ce.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(f,y));f=y,u.push(1)}else{if(b<0)throw new Error(ce.getSparseReshapeNegativeOutputDimErrorMessage(y,b));c*=b,u.push(b)}}if(f!==-1){if(c<=0)throw new Error(ce.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let y=Math.trunc(s/c);if(c*y!==s)throw new Error(ce.getSparseReshapeInputOutputMultipleErrorMessage(o,u));u[f]=y}if(Y.sizeFromShape(u)!==s)throw new Error(ce.getSparseReshapeInputOutputMismatchErrorMessage(o,u));let p=o.length,h=[];if(p>0){h[p-1]=1;for(let y=p-2;y>=0;--y)h[y]=h[y+1]*o[y+1]}let m=[];if(l>0){m[l-1]=1;for(let y=l-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}let g=Y.getArrayFromDType(n,a*l);for(let y=0;y<a;++y){let b=0;for(let x=0;x<p;++x)b+=t[y*p+x]*h[x];for(let x=0;x<l;++x)g[y*l+x]=Math.trunc(b/m[x]),b%=m[x]}return[g,[a,l],u]}re();function SD(t,r,n,o,i,s=!1,a=0){let l=o.length,u=[r[0],t.length/r[0]],c=u[1],d=l>0?i[l-1]+1:0;if(d<0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=r.slice();p[0]=d;let h=p.reduce((v,w)=>v*w,1),m=Y.getArrayFromDType(n,h);if(l===0)return d>0&&m.fill(a),[m,p];if(d<=0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,y=1,b=0,x=i[g];for(;;){let v=0;if(y<l){if(v=i[y],x===v){++y;continue}if(x>=v)throw new Error(ce.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(x<0||x>=d)throw new Error(ce.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(x,d));x>b&&m.fill(a,b*c,x*c);for(let w=g;w<y;++w){let _=o[w];if(_<0||_>=u[0])throw new Error(ce.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(w,o[w],u[0]));for(let S=0;S<c;S++)m[x*c+S]+=t[_*c+S]}if(s)for(let w=0;w<c;w++)m[x*c+w]/=y-g;if(g=y,++y,b=x+1,x=v,y>l)break}return b<d&&m.fill(a,b*c,d*c),[m,p]}re();var OBe=oa(t=>Math.sqrt(t)),l5t=Er(d0,t=>Math.sqrt(t)),RBe={kernelName:d0,backendName:"cpu",kernelFunc:l5t};re();var sue=hn((t,r)=>{let n=t-r;return n*n}),u5t=_n(p0,sue),PBe={kernelName:p0,backendName:"cpu",kernelFunc:u5t};re();var aue=oa((t,r)=>{let{pattern:n,replaceGlobal:o,rewrite:i}=r;return t.replace(new RegExp(n,o?"g":""),i)}),c5t=nc(z1,aue),LBe={kernelName:z1,backendName:"cpu",kernelFunc:c5t};re();function B9(t,r,n,o){let i=er(t,r.dtype);for(let s=0;s<i.size;s++){let a=i.indexToLoc(s),l=new Array(a.length);for(let u=0;u<l.length;u++)l[u]=a[u]*n[u]+o[u];i.set(r.get(...l),...a)}return i}re();var lue=class{constructor(r,n,o,i,s,a){this.separator=Y.encodeString(r),this.nGramWidths=n,this.leftPad=Y.encodeString(o),this.rightPad=Y.encodeString(i),this.padWidth=s,this.preserveShort=a}getPadWidth(r){return Math.min(this.padWidth<0?r-1:this.padWidth,r-1)}getNumNGrams(r,n){let o=this.getPadWidth(n);return Math.max(0,r+2*o-n+1)}createNGrams(r,n,o,i,s,a){for(let l=0;l<s;++l){let u=this.getPadWidth(a),c=Math.max(0,u-l),f=Math.max(0,u-(s-(l+1))),d=a-(c+f),p=n+(c>0?0:l-u),h=0;h+=c*this.leftPad.length;for(let x=0;x<d;++x)h+=r[p+x].length;h+=f*this.rightPad.length;let m=c+f+d-1;h+=m*this.separator.length,o[i+l]=new Uint8Array(h);let g=o[i+l],y=0,b=x=>x.forEach(v=>g[y++]=v);for(let x=0;x<c;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(r[p+x]),b(this.separator);if(d>0){b(r[p+d-1]);for(let x=0;x<f;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<f-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(r,n){let o=r.length,i=n.length;if(i>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<i;++c){let f=n[c]>=u;if(f=f&&n[c]<=o,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${o}]`);u=n[c]}if(u!==o)throw new Error(`Last split value must be data size. Expected ${o}, got ${u}`)}let s=i-1,a=Y.getArrayFromDType("int32",i);if(o===0||i===0){let u=new Array(o);for(let c=0;c<=s;++c)a[c]=0;return[u,a]}a[0]=0;for(let u=1;u<=s;++u){let c=n[u]-n[u-1],f=0;this.nGramWidths.forEach(d=>{f+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&f===0&&(f=1),a[u]=a[u-1]+f}let l=new Array(a[s]);for(let u=0;u<s;++u){let c=n[u],f=a[u];if(this.nGramWidths.forEach(d=>{let p=n[u+1]-n[u],h=this.getNumNGrams(p,d);this.createNGrams(r,c,l,f,h,d),f+=h}),this.preserveShort&&f===a[u]){let d=n[u+1]-n[u];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(r,c,l,f,1,p)}}return[l,a]}};function $9(t,r,n,o,i,s,a,l){return new lue(n,o,i,s,a,l).compute(t,r)}re();function f5t(t,r,n,o){if(!t.length)return;if(r.length===0){for(let s=0;s<t.length;++s)o.push(t.subarray(s,s+1));return}if(r.length===1){let s=r[0],a=t.indexOf(s);for(;a!==-1;){let l=t.subarray(0,a);(!n||l.length!==0)&&o.push(l),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&o.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||r.indexOf(t[s])!==-1){let a=t.subarray(i,s);(!n||a.length!==0)&&o.push(a),i=s+1}}function z9(t,r,n){let o=t.length,i=[],s=0,a=0,l=new Array(o);for(let p=0;p<o;++p){let h=i.length;f5t(t[p],r,n,i);let m=i.length-h;l[p]=m,s+=m,a=Math.max(a,m)}let u=Y.getArrayFromDType("int32",s*2),c=new Array(s),f=[o,a],d=0;for(let p=0;p<o;++p)for(let h=0;h<l[p];++h)u[d*2]=p,u[d*2+1]=h,c[d]=i[d],++d;return[u,c,f]}re();function U9(t,r){let n=Y.getArrayFromDType("int32",t.length);for(let o=0;o<t.length;++o)n[o]=Y.fingerPrint64(t[o]).modulo(r).getLowBitsUnsigned();return n}re();var uue=hn((t,r)=>t-r),d5t=vD((t,r,n,o)=>({real:t-n,imag:r-o})),pP=_n(h0,uue,d5t),jBe={kernelName:h0,backendName:"cpu",kernelFunc:pP};re();function V9(t,r){let n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*r[i];let o=er(n,t.dtype);for(let i=0;i<o.values.length;++i){let s=o.indexToLoc(i),a=new Array(t.rank);for(let u=0;u<a.length;u++)a[u]=s[u]%t.shape[u];let l=t.locToIndex(a);o.values[i]=t.values[l]}return o}re();var hP=(t,r)=>{let n=r.value-t.value;return n===0?t.index-r.index:n};function BBe(t,r,n=0,o=t.length-1){for(;o>n;){if(o-n>600){let l=o-n+1,u=r-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*Math.sign(u-l/2),p=Math.max(n,Math.floor(r-u*f/l+d)),h=Math.min(o,Math.floor(r+(l-u)*f/l+d));BBe(t,r,p,h)}let i=t[r],s=n,a=o;for(Y.swap(t,n,r),hP(t[o],i)>0&&Y.swap(t,n,o);s<a;){for(Y.swap(t,s,a),s++,a--;hP(t[s],i)<0;)s=s+1;for(;hP(t[a],i)>0;)a=a-1}hP(t[n],i)===0?Y.swap(t,n,a):(a=a+1,Y.swap(t,a,o)),a<=r&&(n=a+1),r<=a&&(o=a-1)}}function G9(t,r,n,o,i){let s=r[r.length-1],[a,l]=[t.length/s,s],u=Y.getTypedArrayFromDType(n,a*o),c=Y.getTypedArrayFromDType("int32",a*o);for(let d=0;d<a;d++){let p=d*l,h=t.subarray(p,p+l),m=new Array(h.length);h.forEach((x,v)=>m[v]={value:x,index:v}),o<m.length&&(BBe(m,o),m=m.slice(0,o)),i&&m.sort(hP);let g=d*o,y=u.subarray(g,g+o),b=c.subarray(g,g+o);for(let x=0;x<o;x++)y[x]=m[x].value,b[x]=m[x].index}let f=r.slice();return f[f.length-1]=o,[er(f,n,u),er(f,"int32",c)]}re();function W9(t,r,n,o){let i=Y.parseAxisParam(r,n)[0],s=[1,n[0],1];for(let m=0;m<i;m++)s[0]*=n[m];s[1]=n[i];for(let m=i+1;m<n.length;m++)s[2]*=n[m];let a=new Map,l=new Int32Array(n[i]),u=new Tn(s,o,t),c=[],f=s[0]===1&&s[2]===1;for(let m=0;m<n[i];m++){let g;if(f)g=t[m].toString();else{let b=[];for(let x=0;x<s[0];x++)for(let v=0;v<s[2];v++)b.push(u.get(x,m,v));g=b.join(",")}let y=a.get(g);if(y!=null)l[m]=y;else{let b=a.size;a.set(g,b),l[m]=b,c.push(m)}}let d=s.slice();d[1]=a.size;let p=new Tn(d,o);c.forEach((m,g)=>{for(let y=0;y<s[0];y++)for(let b=0;b<s[2];b++)p.set(u.get(y,m,b),y,g,b)});let h=n.slice();return h[i]=d[1],{outputValues:p.values,outputShape:h,indices:l}}y3("cpu",()=>new eBe,1);re();re();re();var fue=Er(jg,t=>t>=0?t:Math.exp(t)-1),$Be={kernelName:jg,backendName:"cpu",kernelFunc:fue};re();function due(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o;lt([i],"leakyRelu");let a=Y.sizeFromShape(i.shape),l=n.data.get(i.dataId).values,u=Y.getTypedArrayFromDType("float32",a);for(let c=0;c<l.length;c++)u[c]=l[c]<0?s*l[c]:l[c];return n.makeTensorInfo(i.shape,"float32",u)}var zBe={kernelName:Vb,backendName:"cpu",kernelFunc:due};re();var p5t=hn((t,r)=>t<0?r*t:t);function pue(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r;lt([o,i],"prelu");let s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,[l,u]=p5t(o.shape,i.shape,s,a,"float32");return n.makeTensorInfo(u,"float32",l)}var UBe={kernelName:rx,backendName:"cpu",kernelFunc:pue};re();var hue=Er(r0,t=>Math.max(0,t)),VBe={kernelName:r0,backendName:"cpu",kernelFunc:hue};re();var mue=Er(n0,t=>Math.min(Math.max(0,t),6)),GBe={kernelName:n0,backendName:"cpu",kernelFunc:mue};function sE(t,r,n,o,i){if(n==="linear")return Ka({inputs:{x:r},backend:t});if(n==="relu")return hue({inputs:{x:r},backend:t});if(n==="elu")return fue({inputs:{x:r},backend:t});if(n==="relu6")return mue({inputs:{x:r},backend:t});if(n==="prelu")return pue({inputs:{x:r,alpha:o},backend:t});if(n==="leakyrelu")return due({inputs:{x:r},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return oue({inputs:{x:r},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}re();re();function mn(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=Y.sizeFromShape(i.shape),l=Y.inferFromImplicitShape(s,a),u=Y.sizeFromShape(l);Y.assert(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){let f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;f.shape=l,d.shape=l}return{dataId:i.dataId,shape:l,dtype:i.dtype}}var WBe={kernelName:ox,backendName:"cpu",kernelFunc:mn};function gue(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;lt([i,s],"matMul");let u=i.shape.length,c=s.shape.length,f=a?i.shape[u-2]:i.shape[u-1],d=l?s.shape[c-1]:s.shape[c-2],p=a?i.shape[u-1]:i.shape[u-2],h=l?s.shape[c-2]:s.shape[c-1],m=i.shape.slice(0,-2),g=s.shape.slice(0,-2),y=Y.sizeFromShape(m),b=Y.sizeFromShape(g),v=Qu.assertAndGetBroadcastShape(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,h]);Y.assert(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${l} must match.`);let w=a?[y,f,p]:[y,p,f],_=l?[b,h,d]:[b,d,h],S=mn({inputs:{x:i},backend:n,attrs:{shape:w}}),C=mn({inputs:{x:s},backend:n,attrs:{shape:_}}),E=a?S.shape[1]:S.shape[2],T=a?S.shape[2]:S.shape[1],I=l?C.shape[1]:C.shape[2],k=Math.max(y,b),F=n.data.get(S.dataId).values,D=n.data.get(C.dataId).values,L=Y.computeStrides(S.shape),P=Y.computeStrides(C.shape),[R,V,G]=a?[L[0],1,L[1]]:[L[0],L[1],1],[U,H,X]=l?[1,P[1],P[0]]:[P[1],1,P[0]],fe=T*I,$=er([k,T,I],S.dtype),M=$.values,z=n.blockSize;for(let q=0;q<k;q++){let ee=q%y,ae=q%b;for(let Q=0;Q<T;Q+=z){let le=Math.min(Q+z,T);for(let ie=0;ie<I;ie+=z){let K=Math.min(ie+z,I);for(let ge=0;ge<E;ge+=z){let ne=Math.min(ge+z,E);for(let ye=Q;ye<le;ye++)for(let xe=ie;xe<K;xe++){let De=0;for(let Te=ge;Te<ne;Te++){let Fe=F[ee*R+ye*V+Te*G],$e=D[Te*U+xe*H+ae*X];De+=Fe*$e}M[q*fe+(ye*I+xe)]+=De}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(v,$.dtype,$.values)}var qBe={kernelName:Db,backendName:"cpu",kernelFunc:gue};function h5t(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o,p,h,m,g=[];p=gue({inputs:{a:i,b:s},attrs:{transposeA:u,transposeB:c},backend:n}),a&&(h=j0({inputs:{a:p,b:a},backend:n}),g.push(p),p=h),f&&(m=sE(n,p,f,l,d),g.push(p),p=m);for(let b of g)n.disposeIntermediateTensorInfo(b);return p}var HBe={kernelName:U1,backendName:"cpu",kernelFunc:h5t};re();var m5t=Er(Tg,t=>Math.acos(t)),YBe={kernelName:Tg,backendName:"cpu",kernelFunc:m5t};re();var g5t=Er(Ag,t=>Math.acosh(t)),XBe={kernelName:Ag,backendName:"cpu",kernelFunc:g5t};re();function y5t(t){let{inputs:r,backend:n}=t,o=r;lt(r,"addN");let i=o.map(l=>n.data.get(l.dataId).values),s=er(o[0].shape,o[0].dtype),a=s.values;for(let l=0;l<o.length;l++){let u=i[l];for(let c=0;c<a.length;c++)a[c]+=u[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}var KBe={kernelName:Eb,backendName:"cpu",kernelFunc:y5t};re();function b5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"all");let l=Y.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=ai({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("all",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=Y.sizeFromShape(p),m=Y.makeZerosTypedArray(Y.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];v=v&&_}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var ZBe={kernelName:yS,backendName:"cpu",kernelFunc:b5t};re();function x5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"any");let l=Y.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=ai({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("any",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=Y.sizeFromShape(p),m=Y.makeZerosTypedArray(Y.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];v=v||_}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var QBe={kernelName:bS,backendName:"cpu",kernelFunc:x5t};re();function v5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;lt(i,"argMax");let a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=ai({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMax",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=Y.sizeFromShape(f),h=Y.makeZerosTypedArray(p,"int32"),m=Y.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){let b=y*m,x=g[b],v=0;for(let w=0;w<m;++w){let _=g[b+w];_>x&&(x=_,v=w)}h[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",h)}var JBe={kernelName:Tb,backendName:"cpu",kernelFunc:v5t};re();function w5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;lt(i,"argMin");let a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=ai({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMin",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=Y.sizeFromShape(f),h=Y.makeZerosTypedArray(p,"int32"),m=Y.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){let b=y*m,x=g[b],v=0;for(let w=0;w<m;++w){let _=g[b+w];_<x&&(x=_,v=w)}h[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",h)}var e$e={kernelName:Ab,backendName:"cpu",kernelFunc:w5t};re();var _5t=Er(kg,t=>Math.asin(t)),t$e={kernelName:kg,backendName:"cpu",kernelFunc:_5t};re();var S5t=Er(Ig,t=>Math.asinh(t)),r$e={kernelName:Ig,backendName:"cpu",kernelFunc:S5t};re();var C5t=Er(Dg,t=>Math.atan(t)),n$e={kernelName:Dg,backendName:"cpu",kernelFunc:C5t};re();var E5t=hn((t,r)=>Math.atan2(t,r)),T5t=_n(Mg,E5t),o$e={kernelName:Mg,backendName:"cpu",kernelFunc:T5t};re();var A5t=Er(Ng,t=>Math.atanh(t)),i$e={kernelName:Ng,backendName:"cpu",kernelFunc:A5t};re();re();function CD(t,r,n,o,i,s){let a=i.strideHeight,l=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,m=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=er(i.outShape,n),y=g.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],x=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let w=0;w<i.batchSize;++w){let _=w*b,S=w*o[0];for(let C=0;C<i.inChannels;++C)for(let E=0;E<i.outHeight;++E){let T=E*a-p,I=Math.max(0,T),k=Math.min(i.inHeight,f+T),F=_+E*x;for(let D=0;D<i.outWidth;++D){let L=D*l-h,P=Math.max(0,L),R=Math.min(i.inWidth,d+L),V=m,G=0,U=0;for(let X=I;X<k;X+=u){let fe=S+X*o[1];for(let $=P;$<R;$+=c){let M=fe+$*o[2],z=t[M+C];s==="max"&&z>V?V=z:s==="avg"&&(G+=z,U++)}if(isNaN(V))break}let H=F+D*v+C;y[H]=s==="avg"?G/U:V}}}return g}function q9(t,r,n,o,i=!1,s=!1){let a=er(o.outShape,"int32"),l=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,f=o.dilationWidth,d=o.effectiveFilterHeight,p=o.effectiveFilterWidth,h=o.padInfo.top,m=o.padInfo.left,g=er(r,n,t);for(let y=0;y<o.batchSize;++y)for(let b=0;b<o.inChannels;++b)for(let x=0;x<o.outHeight;++x){let v=x*l-h,w=v;for(;w<0;)w+=c;let _=Math.min(o.inHeight,d+v);for(let S=0;S<o.outWidth;++S){let C=S*u-m,E=C;for(;E<0;)E+=f;let T=Math.min(o.inWidth,p+C),I=Number.NEGATIVE_INFINITY,k=-1;for(let F=w;F<_;F+=c){let D=F-v;for(let L=E;L<T;L+=f){let P=L-C,R=g.get(y,F,L,b);R>I&&(I=R,i?k=s?((y*o.inHeight+F)*o.inWidth+L)*o.inChannels+b:(F*o.inWidth+L)*o.inChannels+b:k=D*p+P)}}a.set(k,y,x,S,b)}}return a}function H9(t,r,n,o,i,s){let a=i.strideDepth,l=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=i.padInfo.front,y=i.padInfo.top,b=i.padInfo.left,x=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=er(i.outShape,n),w=v.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let T=0;T<i.batchSize;++T){let I=T*_,k=T*o[0];for(let F=0;F<i.inChannels;++F)for(let D=0;D<i.outDepth;++D){let L=D*a-g,P=L;for(;P<0;)P+=c;let R=Math.min(i.inDepth,p+L),V=I+D*S;for(let G=0;G<i.outHeight;++G){let U=G*l-y,H=U;for(;H<0;)H+=f;let X=Math.min(i.inHeight,h+U),fe=V+G*C;for(let $=0;$<i.outWidth;++$){let M=$*u-b,z=M;for(;z<0;)z+=d;let q=Math.min(i.inWidth,m+M),ee=fe+$*E,ae=x,Q=0,le=0;for(let K=P;K<R;K+=c){let ge=k+K*o[1];for(let ne=H;ne<X;ne+=f){let ye=ge+ne*o[2];for(let xe=z;xe<q;xe+=d){let De=ye+xe*o[3],Te=t[De+F];if(s==="max"&&Te>ae?ae=Te:s==="avg"&&(Q+=Te,le++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}let ie=ee+F;w[ie]=s==="avg"?Q/Math.max(le,1):ae}}}}return v}function s$e(t,r){let n=er(r.outShape,"int32"),o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,a=r.dilationDepth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,h=r.padInfo.top,m=r.padInfo.left;for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outDepth;++b){let x=b*o-p,v=x;for(;v<0;)v+=a;let w=Math.min(r.inDepth,c+x);for(let _=0;_<r.outHeight;++_){let S=_*i-h,C=S;for(;C<0;)C+=l;let E=Math.min(r.inHeight,f+S);for(let T=0;T<r.outWidth;++T){let I=T*s-m,k=I;for(;k<0;)k+=u;let F=Math.min(r.inWidth,d+I),D=Number.NEGATIVE_INFINITY,L=-1;for(let P=v;P<w;P+=a){let R=P-x;for(let V=C;V<E;V+=l){let G=V-S;for(let U=k;U<F;U+=u){let H=U-I,X=t.get(g,P,V,U,y);X>=D&&(D=X,L=R*f*d+G*f+H)}}}n.set(L,g,b,_,T,y)}}}return n}function k5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;lt(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))d=Ka({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=Y.computeStrides(i.shape),m=CD(p,i.shape,i.dtype,h,f,"avg");d=n.makeTensorInfo(f.outShape,i.dtype,m.values)}return d}var a$e={kernelName:kb,backendName:"cpu",kernelFunc:k5t};re();function I5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;lt(i,"avgPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=H9(d,i.shape,i.dtype,Y.computeStrides(i.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}var l$e={kernelName:Ib,backendName:"cpu",kernelFunc:I5t};re();function D5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;lt([i,s],"avgPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=f.strideDepth,p=f.strideHeight,h=f.strideWidth,m=f.filterDepth,g=f.filterHeight,y=f.filterWidth,b=f.dilationDepth,x=f.dilationHeight,v=f.dilationWidth,w=f.effectiveFilterDepth,_=f.effectiveFilterHeight,S=f.effectiveFilterWidth,C=w-1-f.padInfo.front,E=S-1-f.padInfo.left,T=_-1-f.padInfo.top,I=er(s.shape,"float32"),k=1/(m*g*y),F=n.bufferSync(i);for(let D=0;D<f.batchSize;++D)for(let L=0;L<f.inChannels;++L)for(let P=0;P<f.inDepth;++P)for(let R=0;R<f.inHeight;++R)for(let V=0;V<f.inWidth;++V){let G=P-C,U=R-T,H=V-E,X=0;for(let fe=0;fe<w;fe+=b){let $=(G+fe)/d;if(!($<0||$>=f.outDepth||Math.floor($)!==$))for(let M=0;M<_;M+=x){let z=(U+M)/p;if(!(z<0||z>=f.outHeight||Math.floor(z)!==z))for(let q=0;q<S;q+=v){let ee=(H+q)/h;if(ee<0||ee>=f.outWidth||Math.floor(ee)!==ee)continue;let ae=F.get(D,$,z,ee,L);X+=ae}}}I.set(X*k,D,P,R,V,L)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}var u$e={kernelName:vS,backendName:"cpu",kernelFunc:D5t};re();function N5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;lt([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=f.strideHeight,p=f.strideWidth,h=f.filterHeight,m=f.filterWidth,g=f.dilationHeight,y=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,v=x-1-f.padInfo.left,w=b-1-f.padInfo.top,_=er(a.shape,"float32"),S=1/(h*m),C=n.data.get(i.dataId).values,E=er(i.shape,"float32",C);for(let T=0;T<f.batchSize;++T)for(let I=0;I<f.inChannels;++I)for(let k=0;k<f.inHeight;++k)for(let F=0;F<f.inWidth;++F){let D=k-w,L=F-v,P=0;for(let R=0;R<b;R+=g){let V=(D+R)/d;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let G=0;G<x;G+=y){let U=(L+G)/p;if(U<0||U>=f.outWidth||Math.floor(U)!==U)continue;let H=E.get(T,V,U,I);P+=H}}_.set(P*S,T,k,F,I)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}var c$e={kernelName:xS,backendName:"cpu",kernelFunc:N5t};re();function M5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,scale:s,offset:a,mean:l,variance:u}=r;Y.assert(l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y.assert(a==null||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y.assert(s==null||l.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),lt([i,l,u,s,a],"batchNorm");let{varianceEpsilon:c}=o;c==null&&(c=.001);let f=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),m=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(f.length),y=m.length,b=h.length,x=p.length,v=d.length,w=0,_=0,S=0,C=0;for(let E=0;E<f.length;++E)g[E]=m[w++]+(f[E]-d[_++])*h[S++]/Math.sqrt(p[C++]+c),w>=y&&(w=0),_>=v&&(_=0),S>=b&&(S=0),C>=x&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,g)}var f$e={kernelName:zb,backendName:"cpu",kernelFunc:M5t};re();function F5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;lt([i],"batchToSpaceND");let l=s.reduce((b,x)=>b*x),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),h=mn({inputs:{x:i},backend:n,attrs:{shape:u}}),m=ai({inputs:{x:h},backend:n,attrs:{perm:c}}),g=mn({inputs:{x:m},backend:n,attrs:{shape:f}}),y=_p({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var d$e={kernelName:Nb,backendName:"cpu",kernelFunc:F5t};re();function O5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=wD(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var p$e={kernelName:wS,backendName:"cpu",kernelFunc:O5t};re();function R5t(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var h$e={kernelName:_S,backendName:"cpu",kernelFunc:R5t};re();var P5t=Er(Og,(t,r)=>{let n=r;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),m$e={kernelName:Og,backendName:"cpu",kernelFunc:P5t};re();var L5t=t=>{let{x:r}=t.inputs,n=t.backend,o=new Float32Array(Y.sizeFromShape(r.shape)),i=n.data.get(r.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values;for(let c=0;c<l.length;c++){let f=l[c],d=u[c];o[c]=Math.hypot(f,d)}return n.makeOutput(o,r.shape,"float32")},g$e={kernelName:Mb,backendName:"cpu",kernelFunc:L5t};re();re();function B0(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var y$e={kernelName:zS,backendName:"cpu",kernelFunc:B0};function Fw(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=Y.parseAxisParam(i,r[0].shape)[0],a=r.map(g=>g.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(g=>g.shape),s);if(Y.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(g=>Y.sizeFromShape(g.shape)>0);if(u.length===1)return Ka({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){let g=u.map(w=>xp({inputs:{input:w},backend:n})),y=u.map(w=>B0({inputs:{input:w},backend:n})),b=Fw({inputs:g,backend:n,attrs:{axis:s}}),x=Fw({inputs:y,backend:n,attrs:{axis:s}}),v=Ps({inputs:{real:b,imag:x},backend:n});return g.forEach(w=>n.disposeIntermediateTensorInfo(w)),y.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),v}let c=u.map(g=>{let b=[-1,Y.sizeFromShape(g.shape.slice(s))];return mn({inputs:{x:g},backend:n,attrs:{shape:b}})}),f=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));l=ce.computeOutShape(c.map(g=>g.shape),1);let d=c[0].shape[0]===1,p=k9(f,l,r[0].dtype,d),h=ce.computeOutShape(u.map(g=>g.shape),s),m=n.makeTensorInfo(h,r[0].dtype,p);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var b$e={kernelName:Fb,backendName:"cpu",kernelFunc:Fw};re();function yue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o;lt([i,s],"conv2d");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,v=p.dataFormat==="channelsLast",w=new Tn(p.outShape,i.dtype),_=Y.computeStrides(i.shape),S=Y.computeStrides(s.shape),C=_[0],E=v?_[1]:_[2],T=v?_[2]:1,I=v?1:_[1],k=w.strides[0],F=v?w.strides[1]:w.strides[2],D=v?w.strides[2]:1,L=v?1:w.strides[1],P=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,V=w.values;for(let G=0;G<p.batchSize;++G){let U=G*C,H=G*k;for(let X=0;X<p.outHeight;++X){let fe=H+X*F,$=X*p.strideHeight-x;for(let M=0;M<h;++M){let z=$+M*g;if(z<0||z>=p.inHeight)continue;let q=M*S[0],ee=U+z*E;for(let ae=0;ae<p.outWidth;++ae){let Q=fe+ae*D,le=ae*p.strideWidth-b;for(let ie=0;ie<m;++ie){let K=le+ie*y;if(K<0||K>=p.inWidth)continue;let ge=q+ie*S[1],ne=ee+K*T,ye=ge;for(let xe=0;xe<p.inChannels;++xe){let De=P[ne+xe*I];for(let Te=0;Te<p.outChannels;++Te)V[Q+Te*L]+=De*R[ye+Te];ye+=p.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,V)}var x$e={kernelName:Ob,backendName:"cpu",kernelFunc:yue};re();function j5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o;lt([i,s],"conv2dBackpropFilter");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:y}=p,b=p.dataFormat==="channelsLast",x=new Tn(p.filterShape,"float32"),v=p.padInfo.left,w=p.padInfo.top,_=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=new Tn(i.shape,i.dtype,_),E=new Tn(s.shape,s.dtype,S);for(let T=0;T<g;++T){let I=Math.max(0,Math.ceil((w-T)/h)),k=Math.min(p.outHeight,(p.inHeight+w-T)/h);for(let F=0;F<y;++F){let D=Math.max(0,Math.ceil((v-F)/m)),L=Math.min(p.outWidth,(p.inWidth+v-F)/m);for(let P=0;P<p.inChannels;++P)for(let R=0;R<p.outChannels;++R){let V=0;for(let G=0;G<p.batchSize;++G)for(let U=I;U<k;++U){let H=T+U*h-w;for(let X=D;X<L;++X){let fe=F+X*m-v;b?V+=C.get(G,H,fe,P)*E.get(G,U,X,R):V+=C.get(G,P,H,fe)*E.get(G,R,U,X)}}x.set(V,T,F,P,R)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var v$e={kernelName:CS,backendName:"cpu",kernelFunc:j5t};re();function B5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o;lt([i,s],"conv2dBackpropInput");let d=Y.computeStrides(s.shape),p=Y.computeStrides(i.shape),h=ce.convertConv2DDataFormat(c),m=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,h),g=new Tn(m.inShape,"float32"),y=g.values,b=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,[v,w,_]=d,{batchSize:S,filterHeight:C,filterWidth:E,inChannels:T,inHeight:I,inWidth:k,outChannels:F,outHeight:D,outWidth:L,strideHeight:P,strideWidth:R}=m;h=m.dataFormat;let V=C-1-m.padInfo.top,G=E-1-m.padInfo.left,U=h==="channelsLast",H=g.strides[0],X=U?g.strides[1]:g.strides[2],fe=U?g.strides[2]:1,$=U?1:g.strides[1],M=p[0],z=U?p[1]:p[2],q=U?p[2]:1,ee=U?1:p[1];for(let ae=0;ae<S;++ae)for(let Q=0;Q<T;++Q)for(let le=0;le<I;++le){let ie=le-V,K=Math.max(0,Math.ceil(ie/P)),ge=Math.min(D,(C+ie)/P);for(let ne=0;ne<k;++ne){let ye=ne-G,xe=Math.max(0,Math.ceil(ye/R)),De=Math.min(L,(E+ye)/R),Te=0;for(let $e=K;$e<ge;++$e){let at=$e*P-ie;for(let We=xe;We<De;++We){let jt=We*R-ye,_t=M*ae+z*$e+q*We,kt=v*(C-1-at)+w*(E-1-jt)+_*Q;for(let Rt=0;Rt<F;++Rt){let Mt=b[_t+ee*Rt],Be=x[kt+Rt];Te+=Mt*Be}}}let Fe=H*ae+X*le+fe*ne+$*Q;y[Fe]=Te}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var w$e={kernelName:Rb,backendName:"cpu",kernelFunc:B5t};re();function $5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o;lt([i,s],"conv3d");let c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),{filterDepth:f,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:y}=c,b=y.front,x=y.left,v=y.top,w=new Tn(c.outShape,i.dtype),_=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=w.values,E=Y.computeStrides(i.shape),T=Y.computeStrides(s.shape);for(let I=0;I<c.batchSize;++I){let k=I*E[0],F=I*w.strides[0];for(let D=0;D<c.outDepth;++D){let L=F+D*w.strides[1],P=D*c.strideDepth-b;for(let R=0;R<f;++R){let V=P+R*h;if(V<0||V>=c.inDepth)continue;let G=R*T[0],U=k+V*E[1];for(let H=0;H<c.outHeight;++H){let X=L+H*w.strides[2],fe=H*c.strideHeight-v;for(let $=0;$<d;++$){let M=fe+$*m;if(M<0||M>=c.inHeight)continue;let z=G+$*T[1],q=U+M*E[2];for(let ee=0;ee<c.outWidth;++ee){let ae=X+ee*c.outChannels,Q=ee*c.strideWidth-x;for(let le=0;le<p;++le){let ie=Q+le*g;if(ie<0||ie>=c.inWidth)continue;let K=z+le*T[2],ge=q+ie*c.inChannels,ne=K;for(let ye=0;ye<c.inChannels;++ye){let xe=_[ge+ye];for(let De=0;De<c.outChannels;++De)C[ae+De]+=xe*S[ne+De];ne+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var _$e={kernelName:Pb,backendName:"cpu",kernelFunc:$5t};re();function z5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o;lt([i,s],"conv3dBackpropFilterV2");let c=Y.computeStrides(i.shape),f=Y.computeStrides(s.shape),d=ce.computeConv3DInfo(i.shape,u,a,1,l),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,g=d.filterDepth,y=d.filterHeight,b=d.filterWidth,x=new Tn(d.filterShape,"float32"),v=x.values,[w,_,S,C]=x.strides,E=n.data.get(s.dataId).values,[T,I,k,F]=f,D=n.data.get(i.dataId).values,[L,P,R,V]=c,G=d.padInfo.front,U=d.padInfo.left,H=d.padInfo.top;for(let X=0;X<g;++X){let fe=Math.max(0,Math.ceil((G-X)/p)),$=Math.min(d.outDepth,(d.inDepth+G-X)/p),M=X*w;for(let z=0;z<y;++z){let q=Math.max(0,Math.ceil((H-z)/h)),ee=Math.min(d.outHeight,(d.inHeight+H-z)/h),ae=z*_+M;for(let Q=0;Q<b;++Q){let le=Math.max(0,Math.ceil((U-Q)/m)),ie=Math.min(d.outWidth,(d.inWidth+U-Q)/m),K=Q*S+ae;for(let ge=0;ge<d.inChannels;++ge){let ne=ge*C+K;for(let ye=0;ye<d.outChannels;++ye){let xe=0;for(let De=0;De<d.batchSize;++De){let Te=De*L,Fe=De*T;for(let $e=fe;$e<$;++$e){let We=(X+$e*p-G)*P+Te,jt=$e*I+Fe;for(let _t=q;_t<ee;++_t){let Rt=(z+_t*h-H)*R+We,Mt=_t*k+jt;for(let Be=le;Be<ie;++Be){let Ge=(Q+Be*m-U)*V+Rt,de=Be*F+Mt;xe+=D[Ge+ge]*E[de+ye]}}}}v[ne+ye]=xe}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var S$e={kernelName:ES,backendName:"cpu",kernelFunc:z5t};re();function U5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o;lt([i],"conv3dBackpropInputV2");let c=Y.computeStrides(i.shape),f=Y.computeStrides(s.shape),d=ce.computeConv3DInfo(u,s.shape,l,1,a),p=new Tn(d.inShape,"float32"),h=p.values,[m,g,y,b]=p.strides,x=n.data.get(i.dataId).values,[v,w,_,S]=c,C=n.data.get(s.dataId).values,[E,T,I,k]=f,{batchSize:F,filterDepth:D,filterHeight:L,filterWidth:P,inChannels:R,inDepth:V,inHeight:G,inWidth:U,outChannels:H,outDepth:X,outHeight:fe,outWidth:$,strideDepth:M,strideHeight:z,strideWidth:q}=d,ee=D-1-d.padInfo.front,ae=L-1-d.padInfo.top,Q=P-1-d.padInfo.left;for(let le=0;le<F;++le)for(let ie=0;ie<R;++ie)for(let K=0;K<V;++K){let ge=K-ee,ne=Math.max(0,Math.ceil(ge/M)),ye=Math.min(X,(D+ge)/M);for(let xe=0;xe<G;++xe){let De=xe-ae,Te=Math.max(0,Math.ceil(De/z)),Fe=Math.min(fe,(L+De)/z);for(let $e=0;$e<U;++$e){let at=$e-Q,We=Math.max(0,Math.ceil(at/q)),jt=Math.min($,(P+at)/q),_t=0;for(let kt=ne;kt<ye;++kt){let Rt=kt*M-ge;for(let Mt=Te;Mt<Fe;++Mt){let Be=Mt*z-De;for(let ut=We;ut<jt;++ut){let Ge=ut*q-at,de=v*le+w*kt+_*Mt+S*ut,me=E*(D-1-Rt)+T*(L-1-Be)+I*(P-1-Ge)+k*ie;for(let oe=0;oe<H;++oe){let be=x[de+oe],Oe=C[me+oe];_t+=be*Oe}}}}h[m*le+g*K+y*xe+b*$e+ie]=_t}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}var C$e={kernelName:TS,backendName:"cpu",kernelFunc:U5t};re();var V5t=Er(Rg,t=>Math.cos(t)),E$e={kernelName:Rg,backendName:"cpu",kernelFunc:V5t};re();var G5t=Er(Pg,t=>Math.cosh(t)),T$e={kernelName:Pg,backendName:"cpu",kernelFunc:G5t};re();function W5t(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,[f,d,p,h]=i.shape,m=s.shape[0],[g,y]=l,b=er([m,g,y,h],"float32"),x=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,_=Y.computeStrides(i.shape),S=Y.computeStrides(b.shape);for(let C=0;C<m;C++){let E=C*4,T=x[E],I=x[E+1],k=x[E+2],F=x[E+3],D=v[C];if(D>=f)continue;let L=g>1?(k-T)*(d-1)/(g-1):0,P=y>1?(F-I)*(p-1)/(y-1):0;for(let R=0;R<g;R++){let V=g>1?T*(d-1)+R*L:.5*(T+k)*(d-1);if(V<0||V>d-1){for(let G=0;G<y;G++)for(let U=0;U<h;U++){let H=U+G*S[2]+R*S[1]+C*S[0];b.values[H]=c}continue}if(u==="bilinear"){let G=Math.floor(V),U=Math.ceil(V),H=V-G;for(let X=0;X<y;X++){let fe=y>1?I*(p-1)+X*P:.5*(I+F)*(p-1);if(fe<0||fe>p-1){for(let q=0;q<h;q++){let ee=q+X*S[2]+R*S[1]+C*S[0];b.values[ee]=c}continue}let $=Math.floor(fe),M=Math.ceil(fe),z=fe-$;for(let q=0;q<h;q++){let ee=q+$*_[2]+G*_[1]+D*_[0],ae=w[ee];ee=q+M*_[2]+G*_[1]+D*_[0];let Q=w[ee];ee=q+$*_[2]+U*_[1]+D*_[0];let le=w[ee];ee=q+M*_[2]+U*_[1]+D*_[0];let ie=w[ee],K=ae+(Q-ae)*z,ge=le+(ie-le)*z;ee=q+X*S[2]+R*S[1]+C*S[0],b.values[ee]=K+(ge-K)*H}}}else for(let G=0;G<y;++G){let U=y>1?I*(p-1)+G*P:.5*(I+F)*(p-1);if(U<0||U>p-1){for(let fe=0;fe<h;fe++){let $=fe+G*S[2]+R*S[1]+C*S[0];b.values[$]=c}continue}let H=Math.round(U),X=Math.round(V);for(let fe=0;fe<h;fe++){let $=fe+H*_[2]+X*_[1]+D*_[0],M=fe+G*S[2]+R*S[1]+C*S[0];b.values[M]=w[$]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var A$e={kernelName:kS,backendName:"cpu",kernelFunc:W5t};re();function q5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;lt(i,"cumprod");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=ai({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=Gi(c.dtype,"int32"),p=Y.makeOnesTypedArray(Y.sizeFromShape(c.shape),d),h=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=l?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){let v=g(b,x);if(x===0)p[v]=a?1:h[v];else{let w=g(b,x-1);p[v]=a?h[w]*p[w]:h[v]*p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=ai({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var k$e={kernelName:AS,backendName:"cpu",kernelFunc:q5t};re();function H5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;lt(i,"cumsum");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=ai({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=Gi(c.dtype,"int32"),p=Y.makeZerosTypedArray(Y.sizeFromShape(c.shape),d),h=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=l?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){let v=g(b,x);if(x===0)p[v]=a?0:h[v];else{let w=g(b,x-1);p[v]=a?h[w]+p[w]:h[v]+p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=ai({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var I$e={kernelName:Lb,backendName:"cpu",kernelFunc:H5t};re();function Y5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=wD(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=A9(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var D$e={kernelName:IS,backendName:"cpu",kernelFunc:Y5t};re();function X5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o;Y.assert(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);let l=i.shape[0],u=i.shape[1],c=i.shape[2],f=i.shape[3],d=u*s,p=c*s,h=f/(s*s),m=n.data.get(i.dataId).values,g=new Float32Array(l*d*p*h),y=0;for(let b=0;b<l;++b)for(let x=0;x<d;++x){let v=Math.floor(x/s),w=x%s;for(let _=0;_<p;++_){let S=Math.floor(_/s),C=_%s,E=(w*s+C)*h;for(let T=0;T<h;++T){let k=T+E+f*(S+c*(v+u*b));g[y++]=m[k]}}}return n.makeTensorInfo([l,d,p,h],i.dtype,g)}var N$e={kernelName:DS,backendName:"cpu",kernelFunc:X5t};re();function bue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;lt([i,s],"depthwiseConv2DNative");let f=Y.computeStrides(i.shape),d=Y.computeStrides(s.shape),p=u;p==null&&(p=[1,1]),Y.assert(ce.eitherStridesOrDilationsAreOne(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);let h=ce.computeConv2DInfo(i.shape,s.shape,a,p,l,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:y,dilationWidth:b,padInfo:x}=h,v=x.left,w=x.top,_=h.outChannels/h.inChannels,S=new Tn(h.outShape,i.dtype),C=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,T=S.values;for(let I=0;I<h.batchSize;++I){let k=I*f[0],F=I*S.strides[0];for(let D=0;D<h.outHeight;++D){let L=F+D*S.strides[1],P=D*h.strideHeight-w;for(let R=0;R<m;++R){let V=P+R*y;if(V<0||V>=h.inHeight)continue;let G=R*d[0],U=k+V*f[1];for(let H=0;H<h.outWidth;++H){let X=L+H*S.strides[2],fe=H*h.strideWidth-v;for(let $=0;$<g;++$){let M=fe+$*b;if(M<0||M>=h.inWidth)continue;let z=G+$*d[1],q=U+M*h.inChannels,ee=X,ae=z;for(let Q=0;Q<h.inChannels;++Q){let le=C[q+Q];for(let ie=0;ie<_;++ie)T[ee+ie]+=le*E[ae+ie];ee+=_,ae+=_}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}var M$e={kernelName:jb,backendName:"cpu",kernelFunc:bue};re();function K5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o;lt([i,s],"depthwiseConv2dNativeBackpropFilter");let d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=d,y=new Tn(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,v=d.outChannels/d.inChannels,w=n.data.get(i.dataId).values,_=new Tn(i.shape,i.dtype,w),S=n.data.get(s.dataId).values,C=new Tn(s.shape,s.dtype,S);for(let E=0;E<m;++E){let T=Math.max(0,Math.ceil((x-E)/p)),I=Math.min(d.outHeight,(d.inHeight+x-E)/p);for(let k=0;k<g;++k){let F=Math.max(0,Math.ceil((b-k)/h)),D=Math.min(d.outWidth,(d.inWidth+b-k)/h);for(let L=0;L<d.outChannels;++L){let P=Math.trunc(L/v),R=L%v,V=0;for(let G=0;G<d.batchSize;++G)for(let U=T;U<I;++U){let H=E+U*p-x;for(let X=F;X<D;++X){let fe=k+X*h-b;V+=_.get(G,H,fe,P)*C.get(G,U,X,L)}}y.set(V,E,k,P,R)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var F$e={kernelName:NS,backendName:"cpu",kernelFunc:K5t};re();function Z5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o;lt([i,s],"depthwiseConv2DNativeBackpropInput");let d=Y.computeStrides(i.shape),p=Y.computeStrides(s.shape),h=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),m=new Tn(h.inShape,"float32"),g=m.values,[y,b,x]=m.strides,v=n.data.get(i.dataId).values,[w,_,S]=d,C=n.data.get(s.dataId).values,[E,T,I]=p,{batchSize:k,filterHeight:F,filterWidth:D,inChannels:L,inHeight:P,inWidth:R,outChannels:V,outHeight:G,outWidth:U,strideHeight:H,strideWidth:X}=h,fe=F-1-h.padInfo.top,$=D-1-h.padInfo.left,M=V/L;for(let z=0;z<k;++z)for(let q=0;q<L;++q)for(let ee=0;ee<P;++ee){let ae=ee-fe,Q=Math.max(0,Math.ceil(ae/H)),le=Math.min(G,(F+ae)/H);for(let ie=0;ie<R;++ie){let K=ie-$,ge=Math.max(0,Math.ceil(K/X)),ne=Math.min(U,(D+K)/X),ye=0;for(let xe=Q;xe<le;++xe){let De=xe*H-ae;for(let Te=ge;Te<ne;++Te){let Fe=Te*X-K,$e=w*z+_*xe+S*Te,at=E*(F-1-De)+T*(D-1-Fe)+I*q;for(let We=0;We<M;++We){let jt=q*M+We,_t=v[$e+jt],kt=C[at+We];ye+=_t*kt}}}g[y*z+b*ee+x*ie+q]=ye}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var O$e={kernelName:MS,backendName:"cpu",kernelFunc:Z5t};re();function Q5t(t){let{inputs:r,backend:n}=t,{x:o}=r,i=Y.sizeFromShape(o.shape),s=n.data.get(o.dataId).values,a=er([i,i],o.dtype),l=a.values;for(let c=0;c<s.length;c++)l[c*i+c]=s[c];let u=[...o.shape,...o.shape];return n.makeTensorInfo(u,a.dtype,a.values)}var R$e={kernelName:FS,backendName:"cpu",kernelFunc:Q5t};re();var P$e={kernelName:Bb,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i}=t,{strides:s,pad:a,dilations:l}=n,u=r,c=u.data.get(o.dataId).values,f=o.shape.length,d=u.data.get(i.dataId).values,p=i.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:y,outHeight:b,outWidth:x,padInfo:v,strideHeight:w,strideWidth:_,filterHeight:S,filterWidth:C,dilationHeight:E,dilationWidth:T,outShape:I}=ce.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),k=Y.sizeFromShape(I),F=I.length,D=Y.getArrayFromDType(o.dtype,k);for(let P=0;P<h;++P)for(let R=0;R<b;++R){let V=R*w-v.top;for(let G=0;G<x;++G){let U=G*_-v.left;for(let H=0;H<y;++H){let X=Number.MIN_SAFE_INTEGER;for(let $=0;$<S;++$){let M=V+$*E;if(M>=0&&M<m)for(let z=0;z<C;++z){let q=U+z*T;if(q>=0&&q<g){let ee=Y.locToIndex([P,M,q,H],f,Y.computeStrides(o.shape)),ae=Y.locToIndex([$,z,H],p,Y.computeStrides(i.shape)),Q=c[ee]+d[ae];Q>X&&(X=Q)}}}let fe=Y.locToIndex([P,R,G,H],F,Y.computeStrides(I));D[fe]=X}}}return{dataId:u.write(Y.toTypedArray(D,o.dtype),I,o.dtype),shape:I,dtype:o.dtype}}};re();var L$e={kernelName:tI,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=Y.toNestedArray(o.shape,c.data.get(o.dataId).values),d=Y.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:S,dilationHeight:C,dilationWidth:E,outShape:T}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);Y.assert(s.rank===T.length,()=>`Error in ${tI}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);let I=Y.toNestedArray(T,c.data.get(s.dataId).values),k=Y.makeZerosNestedTypedArray(i.shape,i.dtype);for(let D=0;D<p;++D)for(let L=0;L<y;++L){let P=L*v-x.top;for(let R=0;R<b;++R){let V=R*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,H=0,X=0;for(let fe=0;fe<_;++fe){let $=P+fe*C;if($>=0&&$<h)for(let M=0;M<S;++M){let z=V+M*E;if(z>=0&&z<m){let q=f[D][$][z][G]+d[fe][M][G];q>U&&(U=q,H=fe,X=M)}}}k[H][X][G]+=I[D][L][R][G]}}}return{dataId:c.write(Y.toTypedArray(k,o.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};re();var j$e={kernelName:eI,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=Y.toNestedArray(o.shape,c.data.get(o.dataId).values),d=Y.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:S,dilationHeight:C,dilationWidth:E,outShape:T}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);Y.assert(s.rank===T.length,()=>`Error in ${eI}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);let I=Y.toNestedArray(T,c.data.get(s.dataId).values),k=Y.makeZerosNestedTypedArray(o.shape,o.dtype);for(let D=0;D<p;++D)for(let L=0;L<y;++L){let P=L*v-x.top;for(let R=0;R<b;++R){let V=R*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,H=P<0?0:P,X=V<0?0:V;for(let fe=0;fe<_;++fe){let $=P+fe*C;if($>=0&&$<h)for(let M=0;M<S;++M){let z=V+M*E;if(z>=0&&z<m){let q=f[D][$][z][G]+d[fe][M][G];q>U&&(U=q,H=$,X=z)}}}k[D][H][X][G]+=I[D][L][R][G]}}}return{dataId:c.write(Y.toTypedArray(k,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function J5t(t){let{inputs:r,backend:n,attrs:o}=t,{image:i}=r,{canvas:s,options:a}=o,{contextOptions:l,imageOptions:u}=a||{},c=u?.alpha||1,f=l?.contextType||"2d";if(f!=="2d")throw new Error(`Context type ${l.contextType} is not supported by the CPU backend.`);let d=s.getContext(f,l?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${f} type.`);let[p,h]=i.shape.slice(0,2),m=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,y=i.dtype==="float32"?255:1,b=new Uint8ClampedArray(h*p*4);for(let v=0;v<p*h;++v){let w=[0,0,0,255*c];for(let S=0;S<m;S++){let C=g[v*m+S];if(i.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(i.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);m===1?(w[0]=C*y,w[1]=C*y,w[2]=C*y):w[S]=C*y}let _=v*4;b[_+0]=Math.round(w[0]),b[_+1]=Math.round(w[1]),b[_+2]=Math.round(w[2]),b[_+3]=Math.round(w[3])}s.width=h,s.height=p;let x=new ImageData(b,h,p);return d.putImageData(x,0,0),i}var B$e={kernelName:rI,backendName:"cpu",kernelFunc:J5t};re();re();function Ux(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"sum");let l;i.dtype==="bool"?l=vp({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):l=Ka({inputs:{x:i},backend:n});let u=l.shape.length,c=Y.parseAxisParam(s,l.shape),f=ce.getAxesPermutation(c,u),d=c,p=l;f!=null&&(p=ai({inputs:{x:l},backend:n,attrs:{perm:f}}),d=ce.getInnerMostAxes(d.length,u)),ce.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,m]=ce.computeOutAndReduceShapes(p.shape,d),g=ce.upcastType(p.dtype,"int32"),y=xD(n,h,g),b=Y.sizeFromShape(m),x=n.data.get(y.dataId).values,v=n.data.get(p.dataId).values;for(let w=0;w<x.length;++w){let _=w*b,S=0;for(let C=0;C<b;++C)S+=v[_+C];x[w]=S}if(a){let w=ce.expandShapeToKeepDim(y.shape,c),_=y;y=mn({inputs:{x:y},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(_)}return n.disposeIntermediateTensorInfo(l),f!=null&&n.disposeIntermediateTensorInfo(p),y}var $$e={kernelName:cx,backendName:"cpu",kernelFunc:Ux};function eBt(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,h=a.length,m=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(h,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=ai({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);Y.arraysEqual(v.shape,w)||(v=mn({inputs:{x:v},backend:n,attrs:{shape:w}}),m.push(v)),p===null?p=v:(p=iE({inputs:{a:v,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=Ux({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var z$e={kernelName:OS,backendName:"cpu",kernelFunc:eBt};re();function tBt(t){let{inputs:r,backend:n}=t,{dy:o,y:i}=r;lt([o,i],"eluGrad");let s=new Float32Array(Y.sizeFromShape(i.shape)),a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;++u){let c=a[u];c>=0?s[u]=l[u]:s[u]=l[u]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}var U$e={kernelName:RS,backendName:"cpu",kernelFunc:tBt};re();var rBt=ce.ERF_P,nBt=ce.ERF_A1,oBt=ce.ERF_A2,iBt=ce.ERF_A3,sBt=ce.ERF_A4,aBt=ce.ERF_A5,lBt=Er(Bg,t=>{let r=Math.sign(t),n=Math.abs(t),o=1/(1+rBt*n);return r*(1-((((aBt*o+sBt)*o+iBt)*o+oBt)*o+nBt)*o*Math.exp(-n*n))}),V$e={kernelName:Bg,backendName:"cpu",kernelFunc:lBt};re();function ED(t){let{inputs:r,backend:n,attrs:o}=t,{input:i}=r,{dim:s}=o,a=i.shape.length,l=i.shape.slice(),u=s;return s<0&&(Y.assert(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+s+1),l.splice(u,0,1),mn({inputs:{x:i},backend:n,attrs:{shape:l}})}var G$e={kernelName:$b,backendName:"cpu",kernelFunc:ED};re();re();re();var uBt=hn((t,r)=>t/r),mP=_n(Lg,uBt),gP={kernelName:Lg,backendName:"cpu",kernelFunc:mP};function Y9(t,r,n){let o=t.shape,i=o[0],s=o[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,u=a.complexTensorInfos.imag,c=[i,s],f=Y.sizeFromShape(c),d=Y.getTypedArrayFromDType("float32",f),p=Y.getTypedArrayFromDType("float32",f);for(let y=0;y<i;y++){let b=_p({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,s]}}),x=_p({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,s]}}),v=Ps({inputs:{real:b,imag:x},backend:n}),{real:w,imag:_}=cBt(v,r,n),S=ce.mergeRealAndImagArrays(w,_);for(let C=0;C<s;C++){let E=ce.getComplexWithIndex(S,C);d[y*s+C]=E.real,p[y*s+C]=E.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}let h=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",p),g=Ps({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}function cBt(t,r,n){let o=Y.sizeFromShape(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(fBt(o)){let l=xue(s,a,o,r,n),u=[t.shape[0],t.shape[1]];if(r){let c=n.makeTensorInfo(u,"float32",l.real),f=n.makeTensorInfo(u,"float32",l.imag),d=n.makeTensorInfo([],"float32",Y.createScalarValue(o,"float32")),p=Ka({inputs:{x:d},backend:n}),h=gP.kernelFunc({inputs:{a:c,b:d},backend:n}),m=gP.kernelFunc({inputs:{a:f,b:p},backend:n}),g=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return l}else{let l=ce.mergeRealAndImagArrays(s,a),u=dBt(l,o,r);return ce.splitRealAndImagArrays(u)}}function fBt(t){return(t&t-1)===0}function xue(t,r,n,o,i){if(n===1)return{real:t,imag:r};let s=ce.mergeRealAndImagArrays(t,r),a=n/2,l=ce.complexWithEvenIndex(s),u=l.real,c=l.imag,f=[u.length],d=i.makeTensorInfo(f,"float32",u),p=i.makeTensorInfo(f,"float32",c),h=Ps({inputs:{real:d,imag:p},backend:i}),m=ce.complexWithOddIndex(s),g=m.real,y=m.imag,b=[g.length],x=i.makeTensorInfo(b,"float32",g),v=i.makeTensorInfo(b,"float32",y),w=Ps({inputs:{real:x,imag:v},backend:i}),_=xue(u,c,a,o,i),S=_.real,C=_.imag,E=[S.length],T=i.makeTensorInfo(E,"float32",S),I=i.makeTensorInfo(E,"float32",C),k=Ps({inputs:{real:T,imag:I},backend:i}),F=xue(g,y,a,o,i),D=F.real,L=F.imag,P=[D.length],R=i.makeTensorInfo(P,"float32",D),V=i.makeTensorInfo(P,"float32",L),G=Ps({inputs:{real:R,imag:V},backend:i}),U=ce.exponents(n,o),H=[U.real.length],X=i.makeTensorInfo(H,"float32",U.real),fe=i.makeTensorInfo(H,"float32",U.imag),$=Ps({inputs:{real:X,imag:fe},backend:i}),M=iE({inputs:{a:$,b:G},backend:i}),z=j0({inputs:{a:k,b:M},backend:i}),q=pP({inputs:{a:k,b:M},backend:i}),ee=xp({inputs:{input:z},backend:i}),ae=xp({inputs:{input:q},backend:i}),Q=B0({inputs:{input:z},backend:i}),le=B0({inputs:{input:q},backend:i}),ie=Fw({inputs:[ee,ae],backend:i,attrs:{axis:0}}),K=Fw({inputs:[Q,le],backend:i,attrs:{axis:0}}),ge=i.data.get(ie.dataId).values,ne=i.data.get(K.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(K),{real:ge,imag:ne}}function dBt(t,r,n){let o=new Float32Array(r*2);for(let i=0;i<r;i++){let s=0,a=0;for(let l=0;l<r;l++){let u=ce.exponent(i*l,r,n),c=ce.getComplexWithIndex(t,l);s+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(s/=r,a/=r),ce.assignToTypedArray(o,s,a,i)}return o}function pBt(t){let{inputs:r,backend:n}=t,{input:o}=r,i=Y.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=mn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=Y9(l,!1,n),c=mn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var W$e={kernelName:PS,backendName:"cpu",kernelFunc:pBt};re();function yP(t){let{backend:r,attrs:n}=t,{shape:o,value:i,dtype:s}=n,a=s||Y.inferDtype(i),l=Y.getArrayFromDType(a,Y.sizeFromShape(o));return hBt(l,i,a),r.makeTensorInfo(o,a,l)}var q$e={kernelName:LS,backendName:"cpu",kernelFunc:yP};function hBt(t,r,n){t.fill(r)}re();var H$e={kernelName:jS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,i=n,s=Y.getTypedArrayFromDType(o.dtype,Y.sizeFromShape(o.shape)),[a,l,u,c]=o.shape,f=i.data.get(o.dataId).values;for(let p=0;p<a;p++){let h=p*u*l*c;for(let m=0;m<l;m++){let g=m*(u*c);for(let y=0;y<u;y++){let b=y*c;for(let x=0;x<c;x++){let v=Math.round(u-y-1),w=h+g+b+x,_=f[w];if(v>=0&&v<u){let S=v*c,C=h+g+S+x;_=f[C]}s[w]=_}}}}return{dataId:i.write(s,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function mBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=yue({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;if(f==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){let b=mn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=j0({inputs:{a:g,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else g=j0({inputs:{a:g,b:a},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){let y=g;if(f==="NCHW"&&h==="prelu"&&l.shape.length===1&&l.shape[0]!==1){let b=mn({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});g=sE(n,g,h,b,m),n.disposeIntermediateTensorInfo(b)}else g=sE(n,g,h,l,m);n.disposeIntermediateTensorInfo(y)}return g}var Y$e={kernelName:V1,backendName:"cpu",kernelFunc:mBt};re();function gBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=bue({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;g=j0({inputs:{a:g,b:a},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){let y=g;g=sE(n,g,h,l,m),n.disposeIntermediateTensorInfo(y)}return g}var X$e={kernelName:G1,backendName:"cpu",kernelFunc:gBt};re();function yBt(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=Y.sizeFromShape(o.shape),a=i.shape,l=a[a.length-1],[u,c,f,d]=ce.prepareAndValidate(o,i);if(c===0)return n.makeTensorInfo(u,o.dtype,[]);let p=n.data.get(i.dataId).values,h=n.bufferSync(o),m=I9(p,h,o.dtype,c,l,f,d,o.shape,s);return n.makeTensorInfo(u,o.dtype,m.values)}var K$e={kernelName:BS,backendName:"cpu",kernelFunc:yBt};re();function bBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o;lt([i,s],"gatherV2");let u=Y.parseAxisParam(a,i.shape)[0],c=n.data.get(s.dataId).values,f=i.shape[u];for(let w=0;w<c.length;++w){let _=c[w];Y.assert(_<=f-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${f-1}]`)}let d=l;l==null&&(d=0);let p=Y.sizeFromShape(s.shape),h=ce.segment_util.collectGatherOpShapeInfo(i,s,u,d),m=mn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=mn({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),y=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],b=n.bufferSync(g),x=n.bufferSync(m),v=D9(x,b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,v.dtype,v.values)}var Z$e={kernelName:Ub,backendName:"cpu",kernelFunc:bBt};re();function xBt(t){let{inputs:r,backend:n}=t,{input:o}=r,i=Y.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=mn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=Y9(l,!0,n),c=mn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var Q$e={kernelName:$S,backendName:"cpu",kernelFunc:xBt};re();var vBt=Er(Wg,t=>Number.isFinite(t)?1:0,"bool"),J$e={kernelName:Wg,backendName:"cpu",kernelFunc:vBt};re();var wBt=Er(qg,t=>Math.abs(t)===1/0?1:0,"bool"),e6e={kernelName:qg,backendName:"cpu",kernelFunc:wBt};re();var _Bt=Er(Hg,t=>Number.isNaN(t)?1:0,"bool"),t6e={kernelName:Hg,backendName:"cpu",kernelFunc:_Bt};re();function SBt(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=N9(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var r6e={kernelName:US,backendName:"cpu",kernelFunc:SBt};re();var CBt=Er(Xg,t=>Math.log1p(t)),n6e={kernelName:Xg,backendName:"cpu",kernelFunc:CBt};re();var EBt=hn((t,r)=>t&&r),TBt=_n(L1,EBt,null,"bool"),o6e={kernelName:L1,backendName:"cpu",kernelFunc:TBt};re();var ABt=Er(j1,t=>t?0:1,"bool"),i6e={kernelName:j1,backendName:"cpu",kernelFunc:ABt};re();var kBt=hn((t,r)=>t||r),IBt=_n(B1,kBt,null,"bool"),s6e={kernelName:B1,backendName:"cpu",kernelFunc:IBt};re();function DBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o;lt(i,"LRN");let c=i.shape[3],f=c-1,d=n.data.get(i.dataId).values,p=Y.sizeFromShape(i.shape),h=new Float32Array(p);function m(g){let y=g%c,b=g-y+Math.max(0,y-s),x=g-y+Math.min(y+s,f),v=0;for(;b<=x;b++){let w=d[b];v+=w*w}return v}for(let g=0;g<p;g++){let y=m(g),b=d[g]*Math.pow(a+l*y,-u);h[g]=b}return n.makeTensorInfo(i.shape,i.dtype,h)}var a6e={kernelName:Gb,backendName:"cpu",kernelFunc:DBt};re();function NBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o;lt(a,"LRNGrad");let d=Y.sizeFromShape(a.shape),p=a.shape[3],h=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,y=new Float32Array(d),b=d;for(let x=0;x<b;x++){let v=x%p,w=x-v+Math.max(0,v-l),_=x-v+Math.min(p,v+l+1),S=0;for(let C=w;C<_;C++)S+=Math.pow(m[C],2);S=c*S+u;for(let C=w;C<_;C++){let E=-2*c*f*m[C]*g[x]/S;x===C&&(E+=Math.pow(S,-f)),E*=h[x],y[C]+=E}}return n.makeTensorInfo(a.shape,i.dtype,y)}var l6e={kernelName:VS,backendName:"cpu",kernelFunc:NBt};re();re();re();function vue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=n,u=i.shape,c=u.length,f=Y.parseAxisParam(s,u),d=f,p=ce.getAxesPermutation(d,c),h=l.data.get(i.dataId).values;if(p!=null){let w=new Array(c);for(let _=0;_<w.length;_++)w[_]=u[p[_]];h=_D(h,u,i.dtype,p,w),d=ce.getInnerMostAxes(d.length,c),u=w}lt(i,"max"),ce.assertAxesAreInnerMostDims("max",d,c);let[m,g]=ce.computeOutAndReduceShapes(u,d),y=Y.sizeFromShape(g),b=M9(h,y,m,i.dtype),x=l.write(b,m,i.dtype),v=m;return a&&(v=ce.expandShapeToKeepDim(m,f)),{dataId:x,shape:v,dtype:i.dtype}}var u6e={kernelName:Wb,backendName:"cpu",kernelFunc:vue};re();function MBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;lt(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))d=Ka({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=Y.computeStrides(i.shape),m=CD(p,i.shape,i.dtype,h,f,"max");d=n.makeTensorInfo(f.outShape,i.dtype,m.values)}return d}var c6e={kernelName:qb,backendName:"cpu",kernelFunc:MBt};re();function FBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;lt(i,"maxPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=H9(d,i.shape,i.dtype,Y.computeStrides(i.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}var f6e={kernelName:Hb,backendName:"cpu",kernelFunc:FBt};re();function OBt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;lt([i,s],"maxPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=n.bufferSync(s),p=s$e(d,f),h=f.strideDepth,m=f.strideHeight,g=f.strideWidth,y=f.dilationDepth,b=f.dilationHeight,x=f.dilationWidth,v=f.effectiveFilterDepth,w=f.effectiveFilterHeight,_=f.effectiveFilterWidth,S=v-1-f.padInfo.front,C=_-1-f.padInfo.left,E=w-1-f.padInfo.top,T=er(s.shape,"float32"),I=n.bufferSync(i);for(let k=0;k<f.batchSize;++k)for(let F=0;F<f.inChannels;++F)for(let D=0;D<f.inDepth;++D)for(let L=0;L<f.inHeight;++L)for(let P=0;P<f.inWidth;++P){let R=D-S,V=L-E,G=P-C,U=0;for(let H=0;H<v;H+=y){let X=(R+H)/h;if(!(X<0||X>=f.outDepth||Math.floor(X)!==X))for(let fe=0;fe<w;fe+=b){let $=(V+fe)/m;if(!($<0||$>=f.outHeight||Math.floor($)!==$))for(let M=0;M<_;M+=x){let z=(G+M)/g;if(z<0||z>=f.outWidth||Math.floor(z)!==z)continue;let q=v*w*_-1-p.get(k,X,$,z,F),ee=H*w*_+fe*_+M,ae=q===ee?1:0;if(ae===0)continue;let Q=I.get(k,X,$,z,F);U+=Q*ae}}}T.set(U,k,D,L,P,F)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}var d6e={kernelName:WS,backendName:"cpu",kernelFunc:OBt};re();function RBt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;lt([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),h=n.data.get(l.dataId).values,m=er(p.outShape,l.dtype,q9(h,l.shape,l.dtype,p).values),g=p.strideHeight,y=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,v=p.effectiveFilterHeight,w=p.effectiveFilterWidth,_=w-1-p.padInfo.left,S=v-1-p.padInfo.top,C=er(l.shape,"float32"),E=n.data.get(i.dataId).values,T=er(i.shape,"float32",E);for(let I=0;I<p.batchSize;++I)for(let k=0;k<p.inChannels;++k)for(let F=0;F<p.inHeight;++F)for(let D=0;D<p.inWidth;++D){let L=F-S,P=D-_,R=0;for(let V=0;V<v;V+=b){let G=(L+V)/g;if(!(G<0||G>=p.outHeight||Math.floor(G)!==G))for(let U=0;U<w;U+=x){let H=(P+U)/y;if(H<0||H>=p.outWidth||Math.floor(H)!==H)continue;let X=v*w-1-m.get(I,G,H,k),fe=V*w+U,$=X===fe?1:0;if($===0)continue;let M=T.get(I,G,H,k);R+=M*$}}C.set(R,I,F,D,k)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var p6e={kernelName:GS,backendName:"cpu",kernelFunc:RBt};re();re();re();function h6e(t,r,n,o,i){let s=Y.computeStrides(r),a=CD(t,r,n,s,i,"max"),l=q9(t,r,n,i,!0,o);return[a.values,l.values]}var m6e={kernelName:qS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;lt(o,"MaxPoolWithArgmax");let c=u.data.get(o.dataId).values,f=ce.computePool2DInfo(o.shape,i,s,[1,1],a),[d,p]=h6e(c,o.shape,o.dtype,l,f),h=u.write(d,f.outShape,o.dtype),m=u.write(p,f.outShape,o.dtype);return[{dataId:h,shape:f.outShape,dtype:o.dtype},{dataId:m,shape:f.outShape,dtype:"int32"}]}};re();function PBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=Y.parseAxisParam(s,i.shape),c=ce.computeOutAndReduceShapes(i.shape,l)[1],f=Y.sizeFromShape(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));d.push(p);let h=vp({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);let m=mP({inputs:{a:h,b:p},backend:n});d.push(m);let g=Ux({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:a}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}var g6e={kernelName:Yb,backendName:"cpu",kernelFunc:PBt};re();function LBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"min");let l=Y.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=ai({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=Y.sizeFromShape(p),m=Y.makeZerosTypedArray(Y.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];(Number.isNaN(_)||_<v)&&(v=_)}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var y6e={kernelName:Xb,backendName:"cpu",kernelFunc:LBt};re();function jBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,mode:a}=o;lt(i,"mirrorPad");let l=s.map((v,w)=>v[0]+i.shape[w]+v[1]),u=s.map(v=>v[0]),c=s.map((v,w)=>v[0]+i.shape[w]),f=a==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,h=Y.computeStrides(i.shape),m=Y.sizeFromShape(l),g=l.length,y=Y.computeStrides(l),b=Y.getTypedArrayFromDType(i.dtype,m);for(let v=0;v<m;v++){let w=Y.indexToLoc(v,g,y);for(let S=0;S<g;S++)w[S]<u[S]?w[S]=u[S]*2-w[S]-f:w[S]>=c[S]&&(w[S]=(c[S]-1)*2-w[S]+f);w=w.map((S,C)=>S-u[C]);let _=Y.locToIndex(w,p,h);b[v]=d[_]}return{dataId:n.write(b,l,i.dtype),shape:l,dtype:i.dtype}}var b6e={kernelName:Kb,backendName:"cpu",kernelFunc:jBt};re();var BBt=hn((t,r)=>{let n=t%r;return t<0&&r<0||t>=0&&r>=0?n:(n+r)%r}),$Bt=_n(Qg,BBt),x6e={kernelName:Qg,backendName:"cpu",kernelFunc:$Bt};re();var w6e=Pc(j3());re();function wue(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=i.shape.length,l=s;if(l===-1&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);let u=Y.parseAxisParam([l],i.shape),c=vue({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),f=ce.expandShapeToKeepDim(c.shape,u),d=mn({inputs:{x:c},backend:n,attrs:{shape:f}}),p=pP({inputs:{a:i,b:d},backend:n}),h=Ule({inputs:{x:p},backend:n}),m=Ux({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),g=mn({inputs:{x:m},backend:n,attrs:{shape:f}}),y=mP({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var v6e={kernelName:px,backendName:"cpu",kernelFunc:wue};function zBt(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o;lt(i,"multinomial");let u=l?i:wue({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=u.shape[0],f=u.shape[1],d=n.data.get(u.dataId).values,p=[c,s],h=Y.makeZerosTypedArray(Y.sizeFromShape(p),"int32");for(let m=0;m<c;++m){let g=m*f,y=new Float32Array(f-1);y[0]=d[g];for(let v=1;v<y.length;++v)y[v]=y[v-1]+d[g+v];let b=w6e.alea(a.toString()),x=m*s;for(let v=0;v<s;++v){let w=b();h[x+v]=y.length;for(let _=0;_<y.length;_++)if(w<y[_]){h[x+v]=_;break}}}return l||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",h)}var _6e={kernelName:HS,backendName:"cpu",kernelFunc:zBt};re();var UBt=Ca.nonMaxSuppressionV3Impl;function VBt(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o;lt(i,"NonMaxSuppression");let c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d}=UBt(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var S6e={kernelName:YS,backendName:"cpu",kernelFunc:VBt};re();var GBt=Ca.nonMaxSuppressionV4Impl;function WBt(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o;lt(i,"NonMaxSuppressionPadded");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:h}=GBt(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var C6e={kernelName:XS,backendName:"cpu",kernelFunc:WBt};re();var qBt=Ca.nonMaxSuppressionV5Impl;function HBt(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o;lt(i,"NonMaxSuppressionWithScore");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=a,h=l,m=u,g=c,{selectedIndices:y,selectedScores:b}=qBt(f,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var E6e={kernelName:KS,backendName:"cpu",kernelFunc:HBt};re();function YBt(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o;lt(i,"oneHot");let c=Y.sizeFromShape(i.shape),f=new Float32Array(c*a);f.fill(u);let d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<a&&(f[p*a+d[p]]=l);return n.makeTensorInfo([...i.shape,a],s,f)}var T6e={kernelName:Jb,backendName:"cpu",kernelFunc:YBt};re();re();function bP(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(o.dtype==="complex64"){let i=xp({inputs:{input:o},backend:n}),s=bP({inputs:{x:i},backend:n}),a=B0({inputs:{input:o},backend:n}),l=bP({inputs:{x:a},backend:n}),u=Ps({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return yP({backend:n,attrs:{shape:o.shape,value:0,dtype:o.dtype}})}var A6e={kernelName:gx,backendName:"cpu",kernelFunc:bP};function k6e(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(o.dtype==="complex64"){let i=xp({inputs:{input:o},backend:n}),s=k6e({inputs:{x:i},backend:n}),a=B0({inputs:{input:o},backend:n}),l=bP({inputs:{x:a},backend:n}),u=Ps({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return yP({backend:n,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}var I6e={kernelName:Qb,backendName:"cpu",kernelFunc:k6e};re();function _ue(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return ED({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{Y.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),Y.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=ED({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=Fw({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var D6e={kernelName:ex,backendName:"cpu",kernelFunc:_ue};re();function XBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;lt(i,"pad");let l=s.map((x,v)=>x[0]+i.shape[v]+x[1]),u=s.map(x=>x[0]),c=n.data.get(i.dataId).values,f=Y.sizeFromShape(i.shape),d=i.shape.length,p=Y.computeStrides(i.shape),h=Y.sizeFromShape(l),m=l.length,g=Y.computeStrides(l),y=Y.getTypedArrayFromDType(i.dtype,h);a!==0&&y.fill(a);for(let x=0;x<f;x++){let w=Y.indexToLoc(x,d,p).map((S,C)=>S+u[C]),_=Y.locToIndex(w,m,g);y[_]=c[x]}return{dataId:n.write(y,l,i.dtype),shape:l,dtype:i.dtype}}var X9={kernelName:tx,backendName:"cpu",kernelFunc:XBt};re();var KBt=hn((t,r)=>Math.pow(t,r)),ZBt=_n(e0,KBt),N6e={kernelName:e0,backendName:"cpu",kernelFunc:ZBt};re();function QBt(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.data.get(b.dataId).values),c=i.map(b=>b.shape),f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,[p,h,m]=F9(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return g.concat([y])}var M6e={kernelName:ZS,backendName:"cpu",kernelFunc:QBt};re();function JBt(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=O9(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var F6e={kernelName:QS,backendName:"cpu",kernelFunc:JBt};re();function e$t(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,p=l.map(y=>n.data.get(y.dataId).values),h=l.map(y=>y.shape),[m,g]=R9(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,h,u);return n.makeTensorInfo(m,s.dtype,g)}var O6e={kernelName:JS,backendName:"cpu",kernelFunc:e$t};re();function t$t(t){let{backend:r,attrs:n}=t,{start:o,stop:i,dtype:s,step:a}=n,l=P9(o,i,a,s);return r.makeTensorInfo([l.length],s,l)}var R6e={kernelName:eC,backendName:"cpu",kernelFunc:t$t};re();var r$t=Er(t0,t=>1/t),P6e={kernelName:t0,backendName:"cpu",kernelFunc:r$t};re();function n$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;lt(i,"resizeBilinear");let u=Y.computeStrides(i.shape),[c,f]=l,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(Y.sizeFromShape([d,c,f,m])),b=[s&&c>1?p-1:p,s&&f>1?h-1:h],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=0,w=b[0]/x[0],_=b[1]/x[1];for(let S=0;S<d;S++)for(let C=0;C<c;C++){let E;a?E=w*(C+.5)-.5:E=w*C;let T=Math.max(0,Math.floor(E)),I=E-T,k=Math.min(p-1,Math.ceil(E)),F=S*u[0]+T*u[1],D=S*u[0]+k*u[1];for(let L=0;L<f;L++){let P;a?P=_*(L+.5)-.5:P=_*L;let R=Math.max(0,Math.floor(P)),V=P-R,G=Math.min(h-1,Math.ceil(P)),U=F+R*u[2],H=D+R*u[2],X=F+G*u[2],fe=D+G*u[2];for(let $=0;$<m;$++){let M=g[U+$],z=g[H+$],q=g[X+$],ee=g[fe+$],ae=M+(q-M)*V,Q=z+(ee-z)*V,le=ae+(Q-ae)*I;y[v++]=le}}}return n.makeTensorInfo([d,c,f,m],"float32",y)}var L6e={kernelName:sx,backendName:"cpu",kernelFunc:n$t};re();function o$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;lt([s,i],"resizeBilinearGrad");let l=Y.computeStrides(i.shape),[u,c,f,d]=i.shape,[,p,h]=s.shape,m=new Float32Array(u*c*f*d),g=[a&&p>1?c-1:c,a&&h>1?f-1:f],y=[a&&p>1?p-1:p,a&&h>1?h-1:h],b=g[0]/y[0],x=g[1]/y[1],v=n.data.get(s.dataId).values,w=0;for(let _=0;_<u;_++){let S=_*l[0];for(let C=0;C<p;C++){let E=C*b,T=Math.floor(E),I=Math.min(Math.ceil(E),c-1),k=S+T*l[1],F=S+I*l[1],D=E-T,L=1-D;for(let P=0;P<h;P++){let R=P*x,V=Math.floor(R),G=Math.min(Math.ceil(R),f-1),U=R-V,H=1-U,X=k+V*l[2],fe=k+G*l[2],$=F+V*l[2],M=F+G*l[2],z=L*H,q=L*U,ee=D*H,ae=D*U;for(let Q=0;Q<d;Q++){let le=v[w++];m[X+Q]+=le*z,m[fe+Q]+=le*q,m[$+Q]+=le*ee,m[M+Q]+=le*ae}}}}return n.makeTensorInfo([u,f,c,d],"float32",m)}var j6e={kernelName:nC,backendName:"cpu",kernelFunc:o$t};re();function i$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;lt(i,"resizeNearestNeighbor");let u=Y.computeStrides(i.shape),[c,f]=l,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(d*c*f*m),b=[s&&c>1?p-1:p,s&&f>1?h-1:h],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=b[0]/x[0],w=b[1]/x[1],_=0;for(let S=0;S<d;S++){let C=S*u[0];for(let E=0;E<c;E++){let T=a?v*(E+.5):v*E,I=Math.min(p-1,s?Math.round(T):Math.floor(T));a&&(I=Math.max(0,I));let k=C+I*u[1];for(let F=0;F<f;F++){let D=a?w*(F+.5):w*F,L=Math.min(h-1,s?Math.round(D):Math.floor(D));a&&(L=Math.max(0,L));let P=k+L*u[2];for(let R=0;R<m;R++){let V=g[P+R];y[_++]=V}}}}return n.makeTensorInfo([d,c,f,m],i.dtype,y)}var B6e={kernelName:ix,backendName:"cpu",kernelFunc:i$t};re();function s$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;lt([s,i],"resizeNearestNeighborGrad");let l=Y.computeStrides(i.shape),u=Y.computeStrides(s.shape),[c,f,d,p]=i.shape,[,h,m]=s.shape,g=new Float32Array(c*f*d*p),y=n.data.get(s.dataId).values,b=[a&&h>1?f-1:f,a&&m>1?d-1:d],x=[a&&h>1?h-1:h,a&&m>1?m-1:m],v=b[0]/x[0],w=b[1]/x[1],_=1/v,S=1/w,C=Math.ceil(_)*2+2,E=Math.ceil(S)*2+2;for(let T=0;T<c;T++){let I=T*l[0];for(let k=0;k<f;k++){let F=I+k*l[1],D=Math.floor(k*_),L=Math.floor(D-C/2);for(let P=0;P<d;P++){let R=F+P*l[2],V=Math.floor(P*S),G=Math.floor(V-E/2);for(let U=0;U<p;U++){let H=0;for(let X=0;X<C;X++){let fe=X+L;if(fe<0||fe>=h)continue;let $=I+fe*u[1],M=fe*v,z=Math.min(f-1,a?Math.round(M):Math.floor(M));if(k===z)for(let q=0;q<E;q++){let ee=q+G;if(ee<0||ee>=m)continue;let ae=$+ee*u[2],Q=ee*w,le=Math.min(d-1,a?Math.round(Q):Math.floor(Q));P===le&&(H+=y[ae+U])}}g[R+U]=H}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}var $6e={kernelName:rC,backendName:"cpu",kernelFunc:s$t};re();function a$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o;lt(i,"reverse");let a=i.shape.length,l=Y.parseAxisParam(s,i.shape);if(a===0)return Ka({inputs:{x:i},backend:n});let u=new Tn(i.shape,i.dtype),c=n.bufferSync(i);for(let f=0;f<u.size;f++){let d=u.indexToLoc(f),p=d.slice();l.forEach(h=>p[h]=i.shape[h]-1-p[h]),u.set(c.get(...p),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}var z6e={kernelName:ax,backendName:"cpu",kernelFunc:a$t};re();var U6e={kernelName:vC,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=Y.getTypedArrayFromDType(o.dtype,Y.sizeFromShape(o.shape)),[c,f,d,p]=o.shape,[h,m]=ce.getImageCenter(a,f,d),g=255,y=Math.sin(i),b=Math.cos(i),x=l.data.get(o.dataId).values;for(let w=0;w<c;w++){let _=w*d*f*p;for(let S=0;S<f;S++){let C=S*(d*p);for(let E=0;E<d;E++){let T=E*p;for(let I=0;I<p;I++){let k=[c,S,E,I],F=k[2],D=k[1],L=(F-h)*b-(D-m)*y,P=(F-h)*y+(D-m)*b;L=Math.round(L+h),P=Math.round(P+m);let R=s;if(typeof s!="number"&&(I===3?R=g:R=s[I]),L>=0&&L<d&&P>=0&&P<f){let G=P*(d*p),U=L*p,H=_+G+U+I;R=x[H]}let V=_+C+T+I;u[V]=R}}}}return{dataId:l.write(u,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();var l$t=Er(o0,t=>{let r=Math.floor(t);return t-r<.5?Math.floor(t):t-r>.5?Math.ceil(t):r%2===0?r:r+1}),V6e={kernelName:o0,backendName:"cpu",kernelFunc:l$t};re();function u$t(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=!0,h=n.bufferSync(i),m=n.bufferSync(s),g=Wh(h,m,a,d,c,u,l,f,0,p);return n.makeTensorInfo(a,g.dtype,g.values)}var G6e={kernelName:oC,backendName:"cpu",kernelFunc:u$t};re();re();function c$t(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<r?n=i+1:o=i;return o}function f$t(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<=r?n=i+1:o=i;return o}function W6e(t,r,n,o,i,s){let a=Y.getArrayFromDType("int32",n*i);for(let l=0;l<n;++l){let u=t.slice(l*o,(l+1)*o),c=l*i;for(let f=0;f<i;++f)a[c+f]=s==="left"?c$t(u,r[f+c]):f$t(u,r[f+c])}return a}function d$t(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=W6e(l,u,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}var q6e={kernelName:sC,backendName:"cpu",kernelFunc:d$t};re();function p$t(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r;lt([o,i,s],"select");let a=o.shape.length,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=Gi(i.dtype,s.dtype),d=Y.makeZerosTypedArray(Y.sizeFromShape(i.shape),f),p=0,h=a===0||a>1||i.shape.length===1?1:Y.sizeFromShape(i.shape.slice(1));for(let m=0;m<l.length;m++)for(let g=0;g<h;g++)l[m]===1?d[p++]=u[m]:d[p++]=c[m];return n.makeTensorInfo(i.shape,f,d)}var H6e={kernelName:lx,backendName:"cpu",kernelFunc:p$t};re();var h$t=ce.SELU_SCALEALPHA,m$t=ce.SELU_SCALE,g$t=Er(s0,t=>t>=0?m$t*t:h$t*(Math.exp(t)-1)),Y6e={kernelName:s0,backendName:"cpu",kernelFunc:g$t};re();var y$t=Er(u0,t=>t<0?-1:t>0?1:0),X6e={kernelName:u0,backendName:"cpu",kernelFunc:y$t};re();var b$t=Er(a0,t=>Math.sin(t)),K6e={kernelName:a0,backendName:"cpu",kernelFunc:b$t};re();var x$t=Er(l0,t=>Math.sinh(t)),Z6e={kernelName:l0,backendName:"cpu",kernelFunc:x$t};re();var v$t=11920928955078125e-23,Q6e=Math.log(v$t)+2,w$t=Er(f0,t=>{let r=t>-Q6e,n=t<Q6e,o=Math.exp(t),i;return n?i=o:r?i=t:i=Math.log(1+o),i}),J6e={kernelName:f0,backendName:"cpu",kernelFunc:w$t};re();function _$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;lt([i],"spaceToBatchND");let l=Y.sizeFromShape(s),u=[[0,0]];u.push(...a);for(let S=1+s.length;S<i.shape.length;++S)u.push([0,0]);let c=X9.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),f=ce.getReshaped(c.shape,s,l,!1),d=ce.getPermuted(f.length,s.length,!1),p=ce.getReshapedPermuted(c.shape,s,l,!1),g=mn({inputs:{x:c},backend:n,attrs:{shape:f}}),x=ai({inputs:{x:g},backend:n,attrs:{perm:d}}),_=mn({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),_}var eze={kernelName:fx,backendName:"cpu",kernelFunc:_$t};re();function S$t(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values[0],[d,p,h,m,g]=L9(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var tze={kernelName:aC,backendName:"cpu",kernelFunc:S$t};re();function C$t(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.data.get(i.dataId).values),l=n.data.get(o.dataId).values,u=Array.from(n.data.get(s.dataId).values),[c,f,d]=j9(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var rze={kernelName:lC,backendName:"cpu",kernelFunc:C$t};re();function E$t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=SD(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var nze={kernelName:uC,backendName:"cpu",kernelFunc:E$t};re();function T$t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=SD(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var oze={kernelName:cC,backendName:"cpu",kernelFunc:T$t};re();function A$t(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),h=!1,m=n.bufferSync(i),g;switch(s.dtype){case"bool":{let y=n.bufferSync(s),b=!!n.data.get(a.dataId).values[0];g=Wh(m,y,l,p,f,c,u,d,b,h);break}case"float32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=Wh(m,y,l,p,f,c,u,d,b,h);break}case"int32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=Wh(m,y,l,p,f,c,u,d,b,h);break}case"string":{let y=n.bufferSync(s),b=Y.decodeString(n.data.get(a.dataId).values[0]);g=Wh(m,y,l,p,f,c,u,d,b,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(l,g.dtype,g.values)}var ize={kernelName:fC,backendName:"cpu",kernelFunc:A$t};re();re();function k$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=Y.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=new Array(i.shape.length).fill(0),f=i.shape.slice();return u.map(d=>{let p=[...f];p[l]=d;let h=_p({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[l]+=d,h})}var sze={kernelName:dx,backendName:"cpu",kernelFunc:k$t};re();var aze={kernelName:dC,backendName:"cpu",kernelFunc:({inputs:t,backend:r})=>{let{x:n}=t,o=r;lt(n,"square");let i=o.data.get(n.dataId).values,s=new Float32Array(i.length);for(let l=0;l<i.length;++l){let u=i[l];s[l]=u*u}return{dataId:o.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};re();var I$t=Er(y0,(t,r)=>{let n=r;return isNaN(t)?NaN:t>0?1:n.alpha}),lze={kernelName:y0,backendName:"cpu",kernelFunc:I$t};re();function D$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o;lt(i,"stridedSlice");let{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Rs.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=mn({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||b){Y.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let S=Rs.computeOutShape(x,v,w),C=_p({inputs:{x:i},backend:n,attrs:{begin:x,size:S}});_=mn({inputs:{x:C},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(C)}else{let S=n.bufferSync(i),C=B9(h,S,w,x);_=n.makeTensorInfo(m,C.dtype,C.values)}return _}var uze={kernelName:pC,backendName:"cpu",kernelFunc:D$t};re();function N$t(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.data.get(f.dataId).values,h=n.data.get(d.dataId).values,[m,g]=$9(p,h,i,s,a,l,u,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var cze={kernelName:hC,backendName:"cpu",kernelFunc:N$t};re();function M$t(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values[0],[c,f,d]=z9(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var fze={kernelName:mC,backendName:"cpu",kernelFunc:M$t};re();function F$t(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.data.get(s.dataId).values,l=U9(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var dze={kernelName:gC,backendName:"cpu",kernelFunc:F$t};re();var O$t=Er(m0,t=>Math.tan(t)),pze={kernelName:m0,backendName:"cpu",kernelFunc:O$t};re();var R$t=Er(g0,t=>Math.tanh(t)),hze={kernelName:g0,backendName:"cpu",kernelFunc:R$t};re();function P$t(t){let{inputs:r,backend:n}=t,{tensor:o,indices:i,updates:s}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=ce.calculateShapes(s,i,o.shape),d=!1,p=n.bufferSync(i),h=n.bufferSync(s),m=n.bufferSync(o),g=Wh(p,h,o.shape,f,u,l,a,c,m,d);return n.makeTensorInfo(o.shape,g.dtype,g.values)}var mze={kernelName:iC,backendName:"cpu",kernelFunc:P$t};re();function L$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;lt(i,"tile");let a=V9(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}var gze={kernelName:Th,backendName:"cpu",kernelFunc:L$t};re();function j$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o;lt(i,"topk");let l=n.data.get(i.dataId).values,[u,c]=G9(l,i.shape,i.dtype,s,a);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}var yze={kernelName:yC,backendName:"cpu",kernelFunc:j$t};re();function B$t(t){let{inputs:r,attrs:n,backend:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=n,[f,d,p,h]=i.shape,[m,g]=c??[d,p],y=[f,m,g,h],b=Y.computeStrides(i.shape),x=b[0],v=b[1],w=b[2],_=Y.computeStrides(y),S=_[0],C=_[1],E=_[2],T=Y.getTypedArrayFromDType(i.dtype,Y.sizeFromShape(y));T.fill(u);let I=o.data.get(i.dataId).values,k=o.data.get(s.dataId).values;for(let D=0;D<f;++D){let L=s.shape[0]===1?k:k.subarray(D*8,D*8+8);for(let P=0;P<m;++P)for(let R=0;R<g;++R)for(let V=0;V<h;++V){let G,U=L[6]*R+L[7]*P+1;if(U===0)continue;let H=(L[0]*R+L[1]*P+L[2])/U,X=(L[3]*R+L[4]*P+L[5])/U,fe=bze(H,p,l),$=bze(X,d,l);switch(a){case"nearest":G=G$t(I,d,p,x,v,w,D,$,fe,V,u);break;case"bilinear":G=W$t(I,d,p,x,v,w,D,$,fe,V,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}let M=D*S+P*C+R*E+V;T[M]=G}return o.makeTensorInfo(y,i.dtype,T)}return{dataId:o.write(T,y,i.dtype),shape:i.shape,dtype:i.dtype}}var xze={kernelName:bC,backendName:"cpu",kernelFunc:B$t};function bze(t,r,n){switch(n){case"reflect":return $$t(t,r);case"wrap":return z$t(t,r);case"nearest":return V$t(t,r);case"constant":default:return U$t(t,r)}}function $$t(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=2*r;n<o&&(n=o*Math.trunc(-n/o)+n),n=n<-r?n+o:-n-1}else if(n>r-1)if(r<=1)n=0;else{let o=2*r;n-=o*Math.trunc(n/o),n>=r&&(n=o-n-1)}return Y.clamp(0,n,r-1)}function z$t(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=r-1;n+=r*(Math.trunc(-n/o)+1)}else if(n>r-1)if(r<=1)n=0;else{let o=r-1;n-=r*Math.trunc(n/o)}return Y.clamp(0,n,r-1)}function U$t(t,r){return t}function V$t(t,r){return Y.clamp(0,t,r-1)}function xP(t,r,n,o,i,s,a,l,u,c,f){let d=a*o+l*i+u*s+c;return 0<=l&&l<r&&0<=u&&u<n?t[d]:f}function G$t(t,r,n,o,i,s,a,l,u,c,f){let d=Math.round(l),p=Math.round(u);return xP(t,r,n,o,i,s,a,d,p,c,f)}function W$t(t,r,n,o,i,s,a,l,u,c,f){let d=Math.floor(l),p=Math.floor(u),h=d+1,m=p+1,g=(m-u)*xP(t,r,n,o,i,s,a,d,p,c,f)+(u-p)*xP(t,r,n,o,i,s,a,d,m,c,f),y=(m-u)*xP(t,r,n,o,i,s,a,h,p,c,f)+(u-p)*xP(t,r,n,o,i,s,a,h,m,c,f);return(h-l)*g+(l-d)*y}re();function q$t(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;lt(s,"unique");let a=o.data.get(s.dataId).values,{outputValues:l,outputShape:u,indices:c}=W9(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var vze={kernelName:xC,backendName:"cpu",kernelFunc:q$t};re();function H$t(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i.shape.length,l=i.shape[s],u=new Array(a-1),c=0;for(let h=0;h<a;h++)h!==s&&(u[c++]=i.shape[h]);let f=new Array(a).fill(0),d=i.shape.slice();d[s]=1;let p=new Array(l);for(let h=0;h<p.length;h++){f[s]=h;let m=_p({inputs:{x:i},backend:n,attrs:{begin:f,size:d}});p[h]=mn({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}var wze={kernelName:hx,backendName:"cpu",kernelFunc:H$t};re();function Y$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o;lt(i,"unsortedSegmentSum");let l=i.shape.length,u=s.shape.length,c=[],f=[],d=l-u,p=s;for(let m=0;m<d;++m){let g=ED({inputs:{input:p},backend:n,attrs:{dim:m+1}});p=g,f.push(g)}for(let m=0;m<a;++m){let g=Y.createScalarValue(m,"int32"),y=n.makeTensorInfo([],"int32",g),b=$le({inputs:{a:y,b:p},backend:n}),x=vp({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),v=iE({inputs:{a:x,b:i},backend:n}),w=Ux({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(w),f.push(y),f.push(b),f.push(x),f.push(v),f.push(w)}let h=_ue({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var _ze={kernelName:mx,backendName:"cpu",kernelFunc:Y$t};var X$t=[HBe,tBe,YBe,XBe,sBe,KBe,ZBe,QBe,JBe,e$e,t$e,r$e,n$e,o$e,i$e,a$e,l$e,u$e,c$e,qBe,f$e,d$e,p$e,aBe,h$e,iBe,lBe,m$e,rBe,g$e,b$e,x$e,v$e,w$e,_$e,S$e,C$e,E$e,T$e,A$e,k$e,I$e,D$e,N$e,M$e,F$e,O$e,R$e,P$e,L$e,j$e,B$e,z$e,$Be,U$e,uBe,V$e,cBe,G$e,fBe,W$e,q$e,H$e,dBe,pBe,Y$e,X$e,K$e,Z$e,hBe,mBe,nBe,Q$e,y$e,J$e,e6e,t6e,zBe,gBe,yBe,r6e,bBe,n6e,o6e,i6e,s6e,a6e,l6e,u6e,xBe,c6e,f6e,d6e,p6e,m6e,g6e,y6e,vBe,b6e,x6e,_6e,wBe,_Be,S6e,C6e,E6e,SBe,T6e,I6e,D6e,X9,N6e,UBe,EBe,M6e,F6e,O6e,R6e,oBe,gP,P6e,VBe,GBe,WBe,L6e,j6e,B6e,$6e,z6e,U6e,V6e,DBe,G6e,q6e,H6e,Y6e,MBe,X6e,K6e,Z6e,FBe,v6e,J6e,eze,tze,rze,nze,oze,ize,sze,RBe,aze,PBe,LBe,lze,uze,cze,fze,dze,jBe,$$e,pze,hze,mze,gze,yze,xze,CBe,vze,wze,_ze,A6e];for(let t of X$t)iI(t);re();re();re();re();var aE={},K9={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Sze(t,r){aE[t]=r}function Zc(t,r){if(!(t in aE)||r!=null){let o=Z$t(t,r);if(o!==null)aE[t]=o;else return console.log("Could not get context for WebGL version",t),null}let n=aE[t];return n==null||n.isContextLost()?(delete aE[t],Zc(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),aE[t])}function K$t(t){if(!Me().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Z$t(t,r){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=r??K$t(t);return n.addEventListener("webglcontextlost",o=>{o.preventDefault(),delete aE[t]},!1),Me().getBool("SOFTWARE_WEBGL_ENABLED")&&(K9.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",K9)||n.getContext("experimental-webgl",K9):n.getContext("webgl2",K9)}re();var lE=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(lE||{}),Fl=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Fl||{}),Za=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(Za||{});function uE(t,r){return[r,t]}function Cze(t,r){return t*r}function vP(t){let r=Y.sizeFromShape(t),n=Math.ceil(r/4);return Y.sizeToSquarishShape(n)}function $0(t,r){return[Math.max(1,Math.ceil(r/2)),Math.max(1,Math.ceil(t/2))]}function Eze(t,r){let[n,o]=$0(t,r);return n*o*4}function wP(t,r){let n=t,o,i,s,a,l,u,c,f,d,p;return Me().getNumber("WEBGL_VERSION")===2?(o=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,l=n.RED,c=4,f=1,d=n.HALF_FLOAT,p=n.FLOAT,u=n.RGBA8):(o=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,l=t.RGBA,c=4,f=4,d=r!=null?r.HALF_FLOAT_OES:null,p=t.FLOAT,u=t.RGBA),{internalFormatFloat:o,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:l,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:d,textureTypeFloat:p}}function Wt(t,r){let n=r();return Me().getBool("DEBUG")&&Q$t(t),n}function Q$t(t){let r=t.getError();if(r!==t.NO_ERROR)throw new Error("WebGL Error: "+t6t(t,r))}var J$t=596e-10,e6t=65504;function Tze(t){return!!(Me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||J$t<Math.abs(t)&&Math.abs(t)<e6t)}function t6t(t,r){switch(r){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function _P(t,r){return Vx(t,()=>t.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function Aze(t,r){let n=Vx(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function kze(t,r){let n=Vx(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),Me().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Aue(r,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var r6t=/ERROR: [0-9]+:([0-9]+):/g;function Aue(t,r){let n=r6t.exec(r);if(n==null){console.log(`Couldn't parse line number in error: ${r}`),console.log(t);return}let o=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((d,p)=>Y.rightPad((p+1).toString(),s)+d),l=0;for(let d=0;d<a.length;d++)l=Math.max(a[d].length,l);let u=a.slice(0,o-1),c=a.slice(o-1,o),f=a.slice(o);console.log(u.join(`
`)),console.log(r.split(`
`)[0]),console.log(`%c ${Y.rightPad(c[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function Ize(t){return Vx(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Dze(t,r){if(Wt(t,()=>t.linkProgram(r)),!Me().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(r,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function Q9(t,r){if(Wt(t,()=>t.validateProgram(r)),t.getProgramParameter(r,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function Nze(t,r){let n=Vx(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function Mze(t,r){let n=Vx(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function Fze(t){return Vx(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function Oze(t,r){let n=Me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||r<=0){let o=`[${t}x${r}]`;throw new Error("Requested texture size "+o+" is invalid.")}if(t>n||r>n){let o=`[${t}x${r}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+i+".")}}function Rze(t){return Vx(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function kue(t,r,n,o,i,s,a){let l=t.getAttribLocation(r,n);return l===-1?!1:(Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,o)),Wt(t,()=>t.vertexAttribPointer(l,i,t.FLOAT,!1,s,a)),Wt(t,()=>t.enableVertexAttribArray(l)),!0)}function n6t(t,r,n){i6t(t,n),Wt(t,()=>t.activeTexture(t.TEXTURE0+n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r))}function Pze(t,r,n){return Vx(t,()=>t.getUniformLocation(r,n),'uniform "'+n+'" not present in program.')}function Lze(t,r,n){return t.getUniformLocation(r,n)}function jze(t,r,n,o){Wt(t,()=>n6t(t,r,o)),Wt(t,()=>t.uniform1i(n,o))}function J9(t,r,n){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0))}function Iue(t,r){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,r)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function SP(t){let r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+o6t(t,r))}function o6t(t,r){switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function Vx(t,r,n){let o=Wt(t,()=>r());if(o==null)throw new Error(n);return o}function i6t(t,r){let n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,o=r+t.TEXTURE0;if(o<t.TEXTURE0||o>n){let i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Ow(t,r=2){return Y.sizeFromShape(t.slice(0,t.length-r))}function Rw(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function CP(t){let r=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(r=[Ow(t),...Rw(t)]),r}function Bze(t,r=!1){let n=Me().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=Me().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");o===1/0&&Me().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),r&&(n=n*2,o=o*2,t=t.map((l,u)=>u>=t.length-2?Y.nearestLargerEven(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Y.squeezeShape(t).newShape);let i=Y.sizeFromShape(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);let a=s!=null&&Math.max(...s)>o&&Math.min(...s)<=(r?2:1)&&Math.min(...s)>0;if(s==null||a)if(r){let l=Ow(t),u=2,c=2;t.length&&([u,c]=Rw(t)),i=l*(u/2)*(c/2),s=Y.sizeToSquarishShape(i).map(f=>f*2)}else s=Y.sizeToSquarishShape(i);return s}function Z9(t){return t%2===0}function cE(t,r){if(t=t.slice(-2),r=r.slice(-2),Y.arraysEqual(t,r)||!t.length||!r.length||t[0]===0||t[1]===0||r[0]===0||r[1]===0)return!0;if(t.length!==r.length){let n=t[t.length-1],o=r[r.length-1];if(n===o||Z9(n)&&Z9(o)&&(t[0]===1||r[0]===1))return!0}return t[1]===r[1]&&Z9(t[0])&&Z9(r[0])}var Cue,Eue;function $ze(t){if(Cue==null){let r=Zc(t);Cue=r.getParameter(r.MAX_TEXTURE_SIZE)}return Cue}function zze(t){if(Eue==null){let r=Zc(t);Eue=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Eue)}function Uze(t){if(t===0)return 0;let r,n=Zc(t);return yd(n,"EXT_disjoint_timer_query_webgl2")&&t===2?r=2:yd(n,"EXT_disjoint_timer_query")?r=1:r=0,r}function yd(t,r){return t.getExtension(r)!=null}function Due(t){try{if(Zc(t)!=null)return!0}catch(r){return console.log("Error when getting WebGL context: ",r),!1}return!1}function Vze(t){if(t===0)return!1;let r=Zc(t);if(t===1){if(!yd(r,"OES_texture_float"))return!1}else if(!yd(r,"EXT_color_buffer_float"))return!1;return Tue(r)}function Gze(t){if(t===0)return!1;let r=Zc(t);if(t===1){if(!yd(r,"OES_texture_float")||!yd(r,"WEBGL_color_buffer_float"))return!1}else{if(yd(r,"EXT_color_buffer_float"))return Tue(r);let o="EXT_color_buffer_half_float";if(yd(r,o)){let i=r.getExtension(o);return s6t(r,i)}return!1}return Tue(r)}function Tue(t){let r=wP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function s6t(t,r){let n=wP(t,r),o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);let l=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(a),l}function Wze(t){return t!==2?!1:Zc(t).fenceSync!=null}function z0(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the WebGL backend.`)})}var dr=Me();dr.registerFlag("HAS_WEBGL",()=>dr.getNumber("WEBGL_VERSION")>0);dr.registerFlag("WEBGL_VERSION",()=>Due(2)?2:Due(1)?1:0);dr.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);dr.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>dr.get("WEBGL_VERSION")===2);dr.registerFlag("WEBGL_CPU_FORWARD",()=>!0);dr.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);dr.registerFlag("WEBGL_PACK",()=>dr.getBool("HAS_WEBGL"));dr.registerFlag("WEBGL_PACK_NORMALIZATION",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_CLIP",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_REDUCE",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_LAZILY_UNPACK",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_CONV_IM2COL",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>$ze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>zze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=dr.getNumber("WEBGL_VERSION");return t===0?0:Uze(t)});dr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>dr.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!yx.isMobile());dr.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Vze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>dr.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:dr.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));dr.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Gze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Wze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>dr.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);dr.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});dr.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>yx.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});dr.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);dr.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);dr.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);dr.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);dr.registerFlag("WEBGL_EXP_CONV",()=>!1);dr.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>dr.getBool("IS_TEST"));dr.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);dr.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);dr.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);dr.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);re();re();function li(){let t,r,n,o,i,s,a,l,u,c;return Me().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",r="in",n="out",o="in",i="texture",s="outputColor",a="out vec4 outputColor;",l=Me().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",r="attribute",n="varying",o="varying",i="texture2D",s="gl_FragColor",a="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:r,varyingVs:n,varyingFs:o,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:l,defineSpecialInf:u,defineRound:c}}re();re();re();function qh(t,r,n="index"){let o=Y.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / ${i}`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${l};`}).join("")}function fE(t,r,n="index"){let o=Y.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${l};`}).join("")}function a6t(t,r){let n=t.length,o=t.map(s=>`${r}[${s}]`),i=new Array(n-1);i[n-2]=o[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${o[s+1]})`;return i}function qze(t,r,n="index"){let o=t.map((s,a)=>a),i=a6t(o,r);return i.map((s,a)=>{let l=`int ${t[a]} = ${n} / ${i[a]}`,u=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${l}; ${u};`}).join("")}function TD(t){let r=Y.computeStrides(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${r[0]} + coords.y * ${r[1]} + coords.z;
  }
`}function AD(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var tV=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:Hze}=ce;function Yze(t,r,n){let o=[];if(t.forEach(h=>{let m=Y.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?o.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(o.push(`uniform sampler2D ${h.name};`),o.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){let{uniformShape:g}=rV(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:o.push(`uniform int ${h.name}Shape;`);break;case 2:o.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:o.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:o.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}o.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(r.logicalShape.length){case 1:o.push("uniform int outShape;");break;case 2:o.push("uniform ivec2 outShape;"),o.push("uniform int outShapeStrides;");break;case 3:o.push("uniform ivec3 outShape;"),o.push("uniform ivec2 outShapeStrides;");break;case 4:o.push("uniform ivec4 outShape;"),o.push("uniform ivec3 outShapeStrides;");break;default:break}o.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{o.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let i=o.join(`
`),s=t.map(h=>l6t(h,r,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=r.texShape,l=li(),u=f6t(l),c,f,d=h6t(l);return r.isPacked?(c=u6t(r.logicalShape,a,n.enableShapeUniforms),f=p6t(l)):(c=c6t(r.logicalShape,a,n.enableShapeUniforms),f=d6t(l)),n.packedInputs&&(d+=b6t),[d,u,f,i,c,s,n.userCode].join(`
`)}function ID(t,r=!1){let n=t.shapeInfo.logicalShape;switch(n.length){case 0:return D6t(t,r);case 1:return M6t(t,r);case 2:return O6t(t,r);case 3:return P6t(t,r);case 4:return j6t(t,r);case 5:return B6t(t);case 6:return $6t(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Xze(t,r){switch(t.shapeInfo.logicalShape.length){case 0:return I6t(t);case 1:return N6t(t,r);case 2:return F6t(t,r);case 3:return R6t(t,r);default:return L6t(t,r)}}function l6t(t,r,n=!1,o){let i="";n?i+=Xze(t,o):i+=ID(t,o);let s=t.shapeInfo.logicalShape,a=r.logicalShape;return s.length<=a.length&&(n?i+=z6t(t,r):i+=U6t(t,r)),i}function u6t(t,r,n){switch(t.length){case 0:return Kze();case 1:return x6t(t,r,n);case 2:return A6t(t,r,n);case 3:return w6t(t,r,n);default:return S6t(t,r,n)}}function c6t(t,r,n){switch(t.length){case 0:return Kze();case 1:return v6t(t,r,n);case 2:return k6t(t,r,n);case 3:return _6t(t,r,n);case 4:return C6t(t,r,n);case 5:return E6t(t,r);case 6:return T6t(t,r);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function f6t(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function d6t(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function p6t(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function h6t(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${m6t}
    ${g6t}
    ${y6t}
  `}var m6t=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,g6t=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,y6t=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,b6t=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Kze(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function x6t(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return o[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${o[1]}.0);
      }
    `:o[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${o[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      return 2 * (resTexRC.x * ${o[1]} + resTexRC.y);
    }
  `}function v6t(t,r,n){return r[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return resTexRC.x * ${r[1]} + resTexRC.y;
    }
  `}function w6t(t,r,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function _6t(t,r,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${fE(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let o=qh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec3(r, c, d);
    }
  `}function S6t(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2),a=s,l="",u="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],l=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+l,u=`b${c}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      ${l}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${u});
    }
  `}function C6t(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${fE(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let o=qh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec4(r, c, d, d2);
    }
  `}function E6t(t,r){let n=qh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${r[0]},
                             ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function T6t(t,r){let n=qh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function A6t(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(Y.arraysEqual(t,r))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));
      }
    `;let i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));

      int index = resTexRC.x * ${o[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function k6t(t,r,n){return Y.arraysEqual(t,r)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function dE(t){return`offset${t}`}function I6t(t){let r=t.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=li();return`
    vec4 ${n}() {
      return ${o.texture2D}(${r}, halfCR);
    }
  `}function D6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${o}() {return ${n};}`;let[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${o}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let a=dE(n);if(r)return`
    float ${o}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;let[l,u]=t.shapeInfo.texShape;return`
    float ${o}() {
      vec2 uv = uvFromFlat(${l}, ${u}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function N6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=li();if(r)return`
    vec4 ${o}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;let a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function M6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${o}(int index) {
        ${DD(t)}
      }
    `;let i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${o}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let l=dE(n);return a===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:r?`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${l});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}function F6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=s[0],l=s[1],u=li();if(s!=null&&Y.arraysEqual(n,s))return r?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);

        return ${u.texture2D}(${o}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${a}.0);

        return ${u.texture2D}(${o}, uv);
      }
    `;if(r)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `;let c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `}function O6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Y.arraysEqual(n,s)){if(r)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `;let p=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${o}, uv);
    }
  `}let{newShape:a,keptDims:l}=Y.squeezeShape(n),u=a;if(u.length<n.length){let p=ND(t,u),h=["row","col"];return`
      ${ID(p,r)}
      float ${i}(int row, int col) {
        return ${i}(${MD(h,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${DD(t)}
      }
    `;let c=s[0],f=s[1],d=dE(o);return f===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${o}, uv);
    }
  `:c===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${o}, uv);
    }
  `:r?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
        return sampleTexture(${o}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${o}, uv);
  }
`}function R6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){let p=n.slice(1),h=[1,2],m=ND(t,p),g=["b","row","col"];return`
        ${Xze(m,r)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${MD(g,h)});
        }
      `}let l=li();if(r)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `;let u=a[0],c=a[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${c}, ${d}, ${f}, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `}function P6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[1]*n[2],a=n[2],{newShape:l,keptDims:u}=Y.squeezeShape(n),c=l;if(c.length<n.length){let g=ND(t,c),y=["row","col","depth"];return`
        ${ID(g,r)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${MD(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${DD(t)}
      }
    `;let f=t.shapeInfo.texShape,d=f[0],p=f[1],h=t.shapeInfo.flatOffset;if(p===s&&h==null)return r?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${o}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${o}, uv);
        }
      `;if(p===a&&h==null)return r?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${o}, uv);
    }
  `;let m=dE(o);return r?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${o}Shape[1] * ${o}Shape[2];
      int stride1 = ${o}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
      return sampleTexture(${o}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${o}, uv);
      }
  `}function L6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=li();if(r)return`
    vec4 ${o}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;let s=t.shapeInfo.logicalShape,a=s.length,l=t.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],c=u[0],f=u[1],d=Math.ceil(s[a-1]/2),p=d*Math.ceil(s[a-2]/2),h="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<a-1;g++)h=`int b${g}, `+h,p*=s[a-g-1],m=`b${g} * ${p} + `+m;return`
    vec4 ${o}(${h}) {
      int index = ${m};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function j6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[3],a=n[2]*s,l=n[1]*a,{newShape:u,keptDims:c}=Y.squeezeShape(n);if(u.length<n.length){let x=ND(t,u),v=["row","col","depth","depth2"];return`
      ${ID(x,r)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${MD(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${l}, ${a}, ${s}, 1)));
        ${DD(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],m=`int stride2 = ${o}Shape[3];`,g=`int stride1 = ${o}Shape[2] * stride2;`,y=`int stride0 = ${o}Shape[1] * stride1;`;if(h===l&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;if(h===s&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;let b=dE(o);return r?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${b});
      return sampleTexture(${o}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${b});
      return sampleTexture(${o}, uv);
    }
  `}function B6t(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r[4],s=r[3]*i,a=r[2]*s,l=r[1]*a,{newShape:u,keptDims:c}=Y.squeezeShape(r);if(u.length<r.length){let g=ND(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${ID(g)}
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        return ${o}(${MD(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${a}, ${s}, ${i})) +
          depth3;
        ${DD(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===l&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]},
               ${r[2]*r[3]}, ${r[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;let m=dE(n);return`
    float ${o}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function $6t(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Y.squeezeShape(r);if(i.length<r.length){let y=ND(t,i),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${ID(y)}
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${o}(${MD(b,s)});
      }
    `}let a=r[5],l=r[4]*a,u=r[3]*l,c=r[2]*u,f=r[1]*c;if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${u}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${DD(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],m=p[1];if(m===f&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${u}, ${l}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===a&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]*r[4]},
               ${r[2]*r[3]*r[4]},
               ${r[3]*r[4]},
               ${r[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;let g=dE(n);return`
    float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${u} +
          depth2 * ${l} + depth3 * ${a} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function DD(t){let r=t.name,n=Y.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${r};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${r}[i];
      }
    }
  `}function z6t(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=r.logicalShape.length,l=Hze(t.shapeInfo.logicalShape,r.logicalShape),u=Ur(a),c=a-s,f,d=["x","y","z","w","u","v"];s===0?f="":a<2&&l.length>=1?f="coords = 0;":f=l.map(x=>`coords.${d[x+c]} = 0;`).join(`
`);let p="";a<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((x,v)=>`coords.${d[v+c]}`).join(", ");let h="return outputValue;",g=Y.sizeFromShape(t.shapeInfo.logicalShape)===1,b=Y.sizeFromShape(r.logicalShape)===1;if(s===1&&!g&&!b)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!b)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(l.length){let x=s-2,v=s-1;l.indexOf(x)>-1&&l.indexOf(v)>-1?h="return vec4(outputValue.x);":l.indexOf(x)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${o}(${p});
      ${h}
    }
  `}function U6t(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=r.texShape,a=t.shapeInfo.texShape,l=t.shapeInfo.logicalShape.length,u=r.logicalShape.length;if(!t.shapeInfo.isUniform&&l===u&&t.shapeInfo.flatOffset==null&&Y.arraysEqual(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let c=Ur(u),f=Hze(t.shapeInfo.logicalShape,r.logicalShape),d=u-l,p,h=["x","y","z","w","u","v"];l===0?p="":u<2&&f.length>=1?p="coords = 0;":p=f.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return u<2&&l>0?m="coords":m=t.shapeInfo.logicalShape.map((g,y)=>`coords.${h[y+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${o}(${m});
    }
  `}function Ur(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function rV(t,r,n){let{newShape:o,keptDims:i}=Y.squeezeShape(r),s=r.length,a=t&&s===3&&r[0]===1,l=a?r.slice(1):o,u=!t&&s>1&&!Y.arraysEqual(r,n)&&o.length<s||a;return{useSqueezeShape:u,uniformShape:u?l:r,keptDims:i}}function ND(t,r){let n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=r,n}function MD(t,r){return r.map(n=>t[n]).join(", ")}function Qze(t,r,n,o){let i=n.map((f,d)=>{let p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:r.variableNames[d],shapeInfo:p}}),s=i.map(f=>f.shapeInfo),a={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},l=Yze(i,a,r),u=kze(t.gl,l),c=t.createProgram(u);return Me().get("ENGINE_COMPILE_ONLY")?{program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},Nue(t,r,c)))}function Nue(t,r,n){let o=[],i=[],s,a,l,u=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Me().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));let f=!1;for(let d of r.variableNames){let p={name:d,uniform:t.getUniformLocation(n,d,f),offset:t.getUniformLocation(n,`offset${d}`,f)};r.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,f),p.texShape=t.getUniformLocation(n,`${d}TexShape`,f)),o.push(p)}if(r.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",f),l=t.getUniformLocation(n,"outShapeStrides",f),a=t.getUniformLocation(n,"outTexShape",f)),r.customUniforms)for(let d of r.customUniforms)i.push(t.getUniformLocation(n,d.name,f));return{variablesLocations:o,customUniformLocations:i,infLoc:u,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:a}}function Zze(t,r){if(t.length!==r.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${r.length} inputs`);t.forEach((n,o)=>{let i=n.logicalShape,s=r[o],a=s.shape;if(!Y.arraysEqual(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;let l=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!Y.arraysEqual(l,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${l} and ${u} must match`)})}function Jze(t,r,n,o,i){r.program.enableShapeUniforms||(Zze(r.inShapeInfos,n),Zze([r.outShapeInfo],[o]));let s=o.texData.texture,a=o.texData.texShape;o.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(r.webGLProgram),t.bindVertexArray(r.webGLProgram.vao),Me().getNumber("WEBGL_VERSION")===1&&r.infLoc!==null&&t.gl.uniform1f(r.infLoc,1/0),r.nanLoc!==null&&t.gl.uniform1f(r.nanLoc,NaN);for(let u=0;u<n.length;++u){let c=n[u],{uniform:f,offset:d,shape:p,texShape:h}=r.variablesLocations[u];if(p){let{uniformShape:m}=rV(r.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(p,new Int32Array(m));break;case 2:t.gl.uniform2iv(p,new Int32Array(m));break;case 3:t.gl.uniform3iv(p,new Int32Array(m));break;case 4:t.gl.uniform4iv(p,new Int32Array(m));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(Y.sizeFromShape(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(f,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,u)}}let l=r.outShapeLocation;if(l)switch(o.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(o.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(o.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(o.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(o.shape));break;default:break}if(r.outShapeStridesLocation){let u=Y.computeStrides(o.shape);switch(o.shape.length){case 2:t.gl.uniform1iv(r.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(r.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(r.outShapeStridesLocation,new Int32Array(u));break;default:break}}if(r.outTexShapeLocation&&t.gl.uniform2i(r.outTexShapeLocation,o.texData.texShape[0],o.texData.texShape[1]),r.program.customUniforms&&i)for(let u=0;u<r.program.customUniforms.length;++u){let c=r.program.customUniforms[u],f=r.customUniformLocations[u],d=i[u];if(c.type==="float")t.gl.uniform1fv(f,d);else if(c.type==="vec2")t.gl.uniform2fv(f,d);else if(c.type==="vec3")t.gl.uniform3fv(f,d);else if(c.type==="vec4")t.gl.uniform4fv(f,d);else if(c.type==="int")t.gl.uniform1iv(f,d);else if(c.type==="ivec2")t.gl.uniform2iv(f,d);else if(c.type==="ivec3")t.gl.uniform3iv(f,d);else if(c.type==="ivec4")t.gl.uniform4iv(f,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function e8e(t,r,n){let o="";r.concat(n).forEach(a=>{let l=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){let u=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:d}=rV(t.packedInputs,a.shape,u),p="",h="",m="";if(f.length===1&&t.packedInputs){let _=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];p=`${_[0]>1}_${_[1]>1}`}else if(f.length===2&&!t.packedInputs)h=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){let _=Y.computeStrides(f);m=`${_[0]===u[1]}_${_[_.length-1]===u[1]}`}let g=a.shape.length,y=f.length===2&&Y.arraysEqual(a.shape,u),b=Y.sizeFromShape(a.shape)===1,x=ce.getBroadcastDims(a.shape,n.shape),v=!t.packedInputs&&g===n.shape.length&&Y.arraysEqual(u,n.texData.texShape),w=t.packedInputs||f.length>2?"":`${u[0]>1}_${u[1]>1}`;o+=`${g}_${v}_${c?d:""}_${f.length}_${b}_${x}_${y}_${p}_${h}_${m}_${w}_${l}`}else{let u=a.isUniform?"uniform":a.texData.texShape;o+=`${a.shape}_${u}_${l}`}});let i=t.userCode,s=t.constructor.name;return s+="_"+o+"_"+i+`${Me().getNumber("WEBGL_VERSION")}`,s}function zn(t){return Me().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var nV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=lE.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=li();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?fE(["r","c","d"],r):qh(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};var oV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=lE.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=li();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?fE(["r","c","d"],r):qh(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};var iV=class{constructor(r){this.variableNames=["A"],this.outTexUsage=Fl.DOWNLOAD;let n=li();this.outputShape=r,this.userCode=`
      ${tV}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}};var sV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Fl.DOWNLOAD;let n=li();this.outputShape=r,this.userCode=`
      ${tV}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}};var W6t={R:0,G:1,B:2,A:3},EP=class{constructor(r,n=!1,o="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=li();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let l=0;l<o.length;l++){let u=o[l];a+=`
          if(offset == ${l}) {
            result = values[${W6t[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?AD():TD(r)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${o.length});

        flatIndex = idiv(flatIndex, ${o.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}};var aV=class{constructor(r,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=li();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){let u=a*2+l;i+=`
          localCoords = coords;
          if(localCoords[2] + ${l} < ${this.enableShapeUniforms?"outShape[2]":`${r[2]}`}) {
          localCoords[2] += ${l};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${r[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${o.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?AD():TD(r)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${o.output} = ${s};
        }
    `}};re();re();function t8e(t){let r=li(),n=`${r.version}
    precision highp float;
    ${r.attribute} vec3 clipSpacePos;
    ${r.attribute} vec2 uv;
    ${r.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Aze(t,n)}function r8e(t){let r=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Nze(t,r)}function n8e(t){let r=new Uint16Array([0,1,2,2,1,3]);return Mze(t,r)}function TP(t,r,n,o,i,s){Oze(r,n);let a=Fze(t),l=t.TEXTURE_2D;return Wt(t,()=>t.bindTexture(l,a)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),Me().getNumber("WEBGL_VERSION")===1?Wt(t,()=>t.texImage2D(l,0,o,r,n,0,i,s,null)):Wt(t,()=>t.texStorage2D(l,1,o,r,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,r]}}function Mue(t){return t.internalFormatFloat}function o8e(t,r,n,o){let[i,s]=uE(r,n);return TP(t,i,s,Mue(o),o.textureFormatFloat,t.FLOAT)}function Fue(t){return t.internalFormatHalfFloat}function i8e(t,r,n,o){let[i,s]=uE(r,n);return TP(t,i,s,Fue(o),o.textureFormatFloat,o.textureTypeHalfFloat)}function Oue(t){return t.downloadTextureFormat}function s8e(t,r,n,o){let[i,s]=uE(r,n);return TP(t,i,s,Oue(o),t.RGBA,t.UNSIGNED_BYTE)}function Rue(t){return t.internalFormatPackedFloat}function a8e(t,r,n,o){let[i,s]=$0(r,n);return TP(t,i,s,Rue(o),t.RGBA,t.FLOAT)}function Pue(t){return t.internalFormatPackedHalfFloat}function l8e(t,r,n,o){let[i,s]=$0(r,n);return TP(t,i,s,Pue(o),t.RGBA,o.textureTypeHalfFloat)}function u8e(t,r,n){return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),kue(t,r,"clipSpacePos",n,3,20,0)&&kue(t,r,"uv",n,2,20,12)}function c8e(t,r,n,o,i,s){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r));let a,l,u;i instanceof Uint8Array?(a=new Uint8Array(n*o*4),l=t.UNSIGNED_BYTE,u=t.RGBA):(a=new Float32Array(n*o*4),l=t.FLOAT,u=s.internalFormatPackedFloat),a.set(i),Me().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,o,t.RGBA,l,a)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,o,0,t.RGBA,l,a)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function f8e(t,r,n){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r)),n.data instanceof Uint8Array?Me().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Me().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function d8e(t,r,n,o){let i=t.createBuffer();Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));let l=4*4*r*n;return Wt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,l,t.STREAM_READ)),Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,0)),Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function p8e(t,r,n){let o=t,i=new Float32Array(n);return o.bindBuffer(o.PIXEL_PACK_BUFFER,r),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,i),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),i}function h8e(t,r,n,o){let[i,s]=uE(r,n),a=4,l=new Uint8Array(Cze(r*n,a));return Wt(t,()=>t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function m8e(t,r,n,o,i,s,a,l){let u=t,c=new Float32Array(Eze(s,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,r),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function g8e(t,r,n){let o=new Float32Array(r*n*4);return Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,o)),o}var FD=class{constructor(r){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=Me().getNumber("WEBGL_VERSION");if(r!=null?(this.gl=r,Sze(n,r)):this.gl=Zc(n),r=this.gl,Me().getNumber("WEBGL_VERSION")===2){let s=r;this.createVertexArray=()=>Wt(s,()=>s.createVertexArray()),this.bindVertexArray=a=>Wt(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>Wt(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>Wt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(r!=null){let s=r.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Wt(r,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>Wt(r,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Wt(r,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>Wt(r,()=>r.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Me().getNumber("WEBGL_VERSION")===1){let s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=_P(this.gl,s),yd(this.gl,a))this.textureHalfFloatExtension=_P(this.gl,a);else if(Me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),yd(this.gl,i))this.colorBufferHalfFloatExtension=_P(this.gl,i);else if(Me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",yd(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else if(yd(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=r8e(this.gl),this.indexBuffer=n8e(this.gl),this.framebuffer=Rze(this.gl),this.textureConfig=wP(this.gl,this.textureHalfFloatExtension)}get debug(){return Me().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let r=this.gl;Wt(r,()=>r.finish()),Wt(r,()=>r.bindFramebuffer(r.FRAMEBUFFER,null)),Wt(r,()=>r.deleteFramebuffer(this.framebuffer)),Wt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,null)),Wt(r,()=>r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)),Wt(r,()=>r.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(r,n){return this.throwIfDisposed(),o8e(this.gl,r,n,this.textureConfig)}createFloat16MatrixTexture(r,n){return this.throwIfDisposed(),i8e(this.gl,r,n,this.textureConfig)}createUnsignedBytesMatrixTexture(r,n){return this.throwIfDisposed(),s8e(this.gl,r,n,this.textureConfig)}uploadPixelDataToTexture(r,n){this.throwIfDisposed(),f8e(this.gl,r,n)}uploadDenseMatrixToTexture(r,n,o,i){this.throwIfDisposed(),c8e(this.gl,r,n,o,i,this.textureConfig)}createFloat16PackedMatrixTexture(r,n){return this.throwIfDisposed(),l8e(this.gl,r,n,this.textureConfig)}createPackedMatrixTexture(r,n){return this.throwIfDisposed(),a8e(this.gl,r,n,this.textureConfig)}deleteMatrixTexture(r){this.throwIfDisposed(),this.outputTexture===r&&(Iue(this.gl,this.framebuffer),this.outputTexture=null),Wt(this.gl,()=>this.gl.deleteTexture(r))}downloadByteEncodedFloatMatrixFromOutputTexture(r,n,o){return this.downloadMatrixDriver(r,()=>h8e(this.gl,n,o,this.textureConfig))}downloadPackedMatrixFromBuffer(r,n,o,i,s,a){return m8e(this.gl,r,n,o,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(r,n){return p8e(this.gl,r,n)}createBufferFromTexture(r,n,o){this.bindTextureToFrameBuffer(r);let i=d8e(this.gl,n,o,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){let r=this.createFence(this.gl);return this.pollFence(r)}createFence(r){let n,o;if(Me().getBool("WEBGL_FENCE_API_ENABLED")){let i=r,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),o=()=>{let a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),o=()=>this.isQueryAvailable(n,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):o=()=>!0;return{query:n,isFencePassed:o}}downloadMatrixFromPackedTexture(r,n,o){return this.downloadMatrixDriver(r,()=>g8e(this.gl,n,o))}createProgram(r){this.throwIfDisposed();let n=this.gl;this.vertexShader==null&&(this.vertexShader=t8e(n));let o=Ize(n);Wt(n,()=>n.attachShader(o,this.vertexShader)),Wt(n,()=>n.attachShader(o,r)),Dze(n,o);let i=Object.assign(o,{vao:this.createVertexArray()});return this.debug&&Q9(n,i),i}buildVao(r){this.setProgram(r),this.bindVertexArray(r.vao);let n=this.gl;Wt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),u8e(n,r,this.vertexBuffer)}deleteProgram(r){this.throwIfDisposed(),r===this.program&&(this.program=null),r!=null&&(Wt(this.gl,()=>this.gl.deleteProgram(r)),this.deleteVertexArray(r.vao))}setProgram(r){this.throwIfDisposed(),this.program=r,this.program!=null&&this.debug&&Q9(this.gl,this.program),Wt(this.gl,()=>this.gl.useProgram(r))}getUniformLocation(r,n,o=!0){return this.throwIfDisposed(),o?Pze(this.gl,r,n):Lze(this.gl,r,n)}getAttributeLocation(r,n){return this.throwIfDisposed(),Wt(this.gl,()=>this.gl.getAttribLocation(r,n))}getUniformLocationNoThrow(r,n){return this.throwIfDisposed(),this.gl.getUniformLocation(r,n)}setInputMatrixTexture(r,n,o){this.throwIfDisposed(),this.throwIfNoProgram(),jze(this.gl,r,n,o)}setOutputMatrixTexture(r,n,o){this.setOutputMatrixTextureDriver(r,o,n)}setOutputPackedMatrixTexture(r,n,o){this.throwIfDisposed();let[i,s]=$0(n,o);this.setOutputMatrixTextureDriver(r,i,s)}setOutputMatrixWriteRegion(r,n,o,i){this.setOutputMatrixWriteRegionDriver(o,r,i,n)}setOutputPackedMatrixWriteRegion(r,n,o,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Q9(this.gl,this.program),SP(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let r=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Wt(r,()=>r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=_P(this.gl,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.createQuery();return o.beginQuery(i.TIME_ELAPSED_EXT,s),s}let r=this.getQueryTimerExtensionWebGL1(),n=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,n),n}endQuery(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,o=this.getQueryTimerExtensionWebGL2();n.endQuery(o.TIME_ELAPSED_EXT);return}let r=this.getQueryTimerExtensionWebGL1();r.endQueryEXT(r.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(r){return je(this,null,function*(){return yield Y.repeatedTry(()=>this.disposed||this.isQueryAvailable(r,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(r,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(r,n){if(n===0)return null;if(n===2){let o=this.gl;return o.getQueryParameter(r,o.QUERY_RESULT)/1e6}else{let o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(r,n){if(n===0)return!0;if(n===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.getQueryParameter(r,o.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{let o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(r,o.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(r){return new Promise(n=>{this.addItemToPoll(()=>r.isFencePassed(),()=>n())})}pollItems(){let r=H6t(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=r;++n){let{resolveFn:o}=this.itemsToPoll[n];o()}this.itemsToPoll=this.itemsToPoll.slice(r+1)}addItemToPoll(r,n){if(this.itemsToPoll.push({isDoneFn:r,resolveFn:n}),this.itemsToPoll.length>1)return;let o;"setTimeoutCustom"in Me().platform&&(o=Me().platform.setTimeoutCustom.bind(Me().platform)),Y.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,o)}bindTextureToFrameBuffer(r){this.throwIfDisposed(),J9(this.gl,r,this.framebuffer),this.debug&&SP(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(J9(this.gl,this.outputTexture,this.framebuffer),this.debug&&SP(this.gl)):Iue(this.gl,this.framebuffer)}downloadMatrixDriver(r,n){this.bindTextureToFrameBuffer(r);let o=n();return this.unbindTextureToFrameBuffer(),o}setOutputMatrixTextureDriver(r,n,o){this.throwIfDisposed();let i=this.gl;J9(i,r,this.framebuffer),this.debug&&SP(i),this.outputTexture=r,Wt(i,()=>i.viewport(0,0,n,o)),Wt(i,()=>i.scissor(0,0,n,o))}setOutputMatrixWriteRegionDriver(r,n,o,i){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.scissor(r,n,o,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function H6t(t){let r=0;for(;r<t.length&&t[r]();++r);return r-1}var{addImpl:y8e,bincountImpl:lV,bincountReduceImpl:b8e,bitwiseAndImpl:x8e,castImpl:v8e,ceilImpl:w8e,concatImpl:_8e,equalImpl:S8e,expImpl:C8e,expm1Impl:E8e,floorImpl:T8e,gatherNdImpl:A8e,gatherV2Impl:k8e,greaterImpl:I8e,greaterEqualImpl:D8e,lessImpl:N8e,lessEqualImpl:M8e,linSpaceImpl:F8e,logImpl:O8e,maxImpl:R8e,maximumImpl:P8e,minimumImpl:L8e,multiplyImpl:j8e,negImpl:B8e,notEqualImpl:$8e,prodImpl:z8e,raggedGatherImpl:U8e,raggedRangeImpl:V8e,raggedTensorToTensorImpl:G8e,rangeImpl:W8e,rsqrtImpl:q8e,scatterImpl:H8e,sigmoidImpl:Y8e,simpleAbsImpl:uV,sliceImpl:X8e,sparseFillEmptyRowsImpl:K8e,sparseReshapeImpl:Z8e,sparseSegmentReductionImpl:cV,sqrtImpl:Q8e,staticRegexReplaceImpl:J8e,stridedSliceImpl:eUe,stringNGramsImpl:tUe,stringSplitImpl:rUe,stringToHashBucketFastImpl:nUe,subImpl:oUe,tileImpl:iUe,topKImpl:sUe,transposeImpl:pE,uniqueImpl:aUe}=cue;function Lue(t,r){return["x","y","z","w","u","v"].slice(0,r).map(n=>`${t}.${n}`)}function Ni(t,r){return r===1?[t]:Lue(t,r)}function lUe(t,r){if(t===1)return"rc";let n="";for(let o=0;o<t;o++)n+=r[o],o<t-1&&(n+=",");return n}var fV=class{constructor(r){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.enableShapeUniforms=zn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=Ni("rc",this.rank),o=Ur(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(r){let n=[];for(let o=0;o<=1;o++)for(let i=0;i<=1;i++){let s=`${o===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${r[r.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(r){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let o=this.rank-2;o<this.rank;o++)n+=`${r[o]} >= ${this.enableShapeUniforms?`outShape[${o}]`:this.outputShape[o]}`,o<this.rank-1&&(n+="||");return n}getSetup(r){if(this.rank===1)return"";let n=r.slice(-2),o=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${o};
      bool rEdge = rp1 >= ${i};
    `}getOutput(r){let n=this.getSourceCoordsArr(r);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}};var OD=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let o="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),o+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${Y6t(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?AD():TD(r)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":r[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":r[2]};

        ${o}

        setOutput(result);
      }
    `}};function Y6t(t,r){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${r?qze(["r","c","d"],"inputShape"):qh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}re();var dV=class{constructor(r){this.gpgpu=r,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(r,n,o){let i=cUe(n,o),s=fUe(r,i,o);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);let a=uUe(r,i,this.gpgpu.gl,this.gpgpu.textureConfig,o);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let l;return i===Za.PACKED_2X2_FLOAT32?l=this.gpgpu.createPackedMatrixTexture(r[0],r[1]):i===Za.PACKED_2X2_FLOAT16?l=this.gpgpu.createFloat16PackedMatrixTexture(r[0],r[1]):i===Za.UNPACKED_FLOAT32?l=this.gpgpu.createFloat32MatrixTexture(r[0],r[1]):i===Za.UNPACKED_FLOAT16?l=this.gpgpu.createFloat16MatrixTexture(r[0],r[1]):i===Za.PACKED_4X1_UNSIGNED_BYTE&&(l=this.gpgpu.createUnsignedBytesMatrixTexture(r[0],r[1])),this.usedTextures[s].push(l),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),l}releaseTexture(r,n,o,i){if(this.freeTextures==null)return;let s=cUe(o,i),a=fUe(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);let l=uUe(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=Me().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(r.texture),this._numBytesAllocated-=l):(this.freeTextures[a].push(r),this.numFreeTextures++,this._numBytesFree+=l),this.numUsedTextures--;let c=this.usedTextures[a],f=c&&c.indexOf(r);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let r=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${r})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let r in this.freeTextures)this.freeTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let r in this.usedTextures)this.usedTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function X6t(t,r){let n=t;if(r===n.R32F)return 4;if(r===n.R16F)return 2;if(r===n.RGBA32F)return 16;if(r===t.RGBA)return 16;if(r===n.RGBA16F)return 8;if(r===n.RGBA8)return 4;throw new Error(`Unknown internal format ${r}`)}function uUe(t,r,n,o,i){let s=K6t(r,o),a;if(i){let[u,c]=$0(t[0],t[1]);a=u*c}else{let[u,c]=uE(t[0],t[1]);a=u*c}let l=X6t(n,s);return a*l}function K6t(t,r){switch(t){case Za.PACKED_2X2_FLOAT32:return Rue(r);case Za.PACKED_2X2_FLOAT16:return Pue(r);case Za.UNPACKED_FLOAT32:return Mue(r);case Za.UNPACKED_FLOAT16:return Fue(r);case Za.PACKED_4X1_UNSIGNED_BYTE:return Oue(r);default:throw new Error(`Unknown physical texture type ${t}`)}}function Z6t(t){return Me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Za.PACKED_2X2_FLOAT32:Za.UNPACKED_FLOAT32:t?Za.PACKED_2X2_FLOAT16:Za.UNPACKED_FLOAT16}function cUe(t,r){if(t===Fl.UPLOAD)return Za.PACKED_2X2_FLOAT32;if(t===Fl.RENDER||t==null)return Z6t(r);if(t===Fl.DOWNLOAD||t===Fl.PIXELS)return Za.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function fUe(t,r,n){return`${t[0]}_${t[1]}_${r}_${n}`}var Ta=class{constructor(r,n){this.variableNames=["A"],this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},vs="if (isnan(x)) return x;",dUe="return x;",jue="return abs(x);";var pUe="return (x >= 0.0) ? x : (exp(x) - 1.0);",hUe=vs+`
  return (x < 0.0) ? 0.0 : x;
`,mUe=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,U0="return x;",gUe="return 1.0 / (1.0 + exp(-1.0 * x));";var bUe="return x;",xUe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,vUe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wUe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_Ue="return 1.0 / (1.0 + exp(-1.0 * x));",oc=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var pV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let n=r.length,o=Ni("rc",n),i=Ur(n),s=lUe(n,o),a=o.slice(-2),l=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${l}));
      }
    `}};var J6t=Ca.whereImpl,ezt=1e-7,tzt=1e-4,hV={};function rzt(t){return t in hV||(hV[t]={}),hV[t]}var nzt=Me().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),ozt=600;function izt(){return Me().global.screen==null?1024:Me().global.screen.height*Me().global.screen.width*window.devicePixelRatio*ozt/1024/1024}var SUe=(()=>{class t extends Sg{nextDataId(){return t.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Me().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let o;if(n!=null){if(n instanceof FD)o=n;else{let i=Zc(Me().getNumber("WEBGL_VERSION"),n);o=new FD(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let i=Zc(Me().getNumber("WEBGL_VERSION"));o=new FD(i),this.binaryCache=rzt(Me().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=o,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new dV(this.gpgpu),this.numMBBeforeWarning=izt(),this.texData=new D1(this,ld())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,o,i,s,a,l){let u=this.makeTensorInfo(o,i),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:n,texShape:[s,a]},c.texShape=[s,a];let f=CP(o),d=new EP(f,!1,l),p=this.runWebGLProgram(d,[u],i,[[s,a]]);return p.shape=o,c.texture=null,this.disposeIntermediateTensorInfo(u),p.dataId}write(n,o,i){if((Me().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Me().getBool("DEBUG"))&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let s={id:this.nextDataId()};return this.texData.set(s,{shape:o,dtype:i,values:n,usage:Fl.UPLOAD,refCount:1}),s}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){let o=this.texData.get(n);o.refCount++}decRef(n){if(this.texData.has(n)){let o=this.texData.get(n);o.refCount--}}move(n,o,i,s,a){if(Me().getBool("DEBUG")&&this.checkNumericalProblems(o),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:s,values:o,usage:Fl.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let o=this.texData.get(n),{values:i,dtype:s,complexTensorInfos:a,slice:l,shape:u,isPacked:c}=o;if(l!=null){let h;c?h=new oc(u,U0):h=new Ta(u,U0);let m=this.runWebGLProgram(h,[{dataId:n,shape:u,dtype:s}],s),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(i!=null)return this.convertAndCacheOnCPU(n);if(s==="string")return i;let f=this.activeTimers!=null,d;f&&(d=Y.now());let p;if(s==="complex64"){let h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);p=ce.mergeRealAndImagArrays(h,m)}else p=this.getValuesFromTexture(n);return f&&(this.downloadWaitMs+=Y.now()-d),this.convertAndCacheOnCPU(n,p)}read(n){return je(this,null,function*(){if(this.pendingRead.has(n)){let g=this.pendingRead.get(n);return new Promise(y=>g.push(y))}let o=this.texData.get(n),{values:i,shape:s,slice:a,dtype:l,complexTensorInfos:u,isPacked:c}=o;if(a!=null){let g;c?g=new oc(s,U0):g=new Ta(s,U0);let y=this.runWebGLProgram(g,[{dataId:n,shape:s,dtype:l}],l),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(i!=null)return this.convertAndCacheOnCPU(n);if(Me().getBool("DEBUG")&&!Me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Me().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let f=null,d;if(l!=="complex64"&&Me().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(n);let g=this.texData.get(d.dataId);f=this.gpgpu.createBufferFromTexture(g.texture.texture,...vP(s))}this.pendingRead.set(n,[]),l!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(l==="complex64"){let g=yield Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),y=g[0],b=g[1];p=ce.mergeRealAndImagArrays(y,b)}else if(f==null)p=this.getValuesFromTexture(n);else{let g=Y.sizeFromShape(s);p=this.gpgpu.downloadFloat32MatrixFromBuffer(f,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),f!=null){let g=this.gpgpu.gl;Wt(g,()=>g.deleteBuffer(f))}let h=this.convertAndCacheOnCPU(n,p),m=this.pendingRead.get(n);return this.pendingRead.delete(n),m.forEach(g=>g(h)),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&ld().removeDataId(n,this),this.pendingDeletes--),h})}readToGPU(n,o={}){let i=this.texData.get(n),{values:s,shape:a,slice:l,dtype:u,isPacked:c,texture:f}=i;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(l!=null){let m;c?m=new oc(a,U0):m=new Ta(a,U0);let g=this.runWebGLProgram(m,[{dataId:n,shape:a,dtype:u}],u),y=this.readToGPU(g,o);return this.disposeIntermediateTensorInfo(g),y}if(f==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(n,o.customTexShape),p=ld().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>Y.decodeString(s));return er(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return er(n.shape,n.dtype,o)}checkNumericalProblems(n){if(n!=null)for(let o=0;o<n.length;o++){let i=n[o];if(!Tze(i))throw Me().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:o,dtype:i,isPacked:s}=this.texData.get(n),a=Y.sizeFromShape(o);if(Me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(n),m=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...vP(o)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),g}let l=Me().getBool("WEBGL_PACK")&&s===!0,u=l?CP(o):o,c=l?new sV(u):new iV(u),f=this.runWebGLProgram(c,[{shape:u,dtype:i,dataId:n}],"float32"),d=this.texData.get(f.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(f),p}timerAvailable(){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){let o=this.activeTimers,i=[],s=!1;this.programTimersStack==null?(this.programTimersStack=i,s=!0):this.activeTimers.push(i),this.activeTimers=i,n();let a=Y.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),l=Y.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=o,s&&(this.programTimersStack=null);let u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return je(this,null,function*(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(a);u.kernelMs=Y.sum(c),u.getExtraProfileInfo=()=>c.map((f,d)=>({name:l[d],ms:f})).map(f=>`${f.name}: ${f.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Y.now(),endMs:null}}endTimer(n){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Y.now(),n)}getQueryTime(n){return je(this,null,function*(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(n);let o=n;return o.endMs-o.startMs})}disposeData(n,o=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(o?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!o&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:i}=this.texData.get(n);return i!=null&&(this.disposeData(i.real.dataId,o),this.disposeData(i.imag.dataId,o)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:o,dtype:i,texShape:s,usage:a,isPacked:l,slice:u}=this.texData.get(n),c=u&&u.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(o,s,a,l)));let d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,o=nzt){return Me().getBool("WEBGL_CPU_FORWARD")&&n.every(i=>this.texData.get(i.dataId).texture==null&&Y.sizeFromShape(i.shape)<o)}getGPGPUContext(){return this.gpgpu}where(n){ce.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let o=n.dataSync();return J6t(n.shape,o)}packedUnaryOp(n,o,i){let s=new oc(n.shape,o),a=this.compileAndRun(s,[n],i);return ld().makeTensorFromTensorInfo(a)}abs(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let s=uV(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,s)}if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,jue,n.dtype);let o=new Ta(n.shape,jue),i=this.compileAndRun(o,[n]);return ld().makeTensorFromTensorInfo(i)}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&Y.isString(i[0])){let a=i.map(l=>Y.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return this.texData.get(s).usage=null,{dataId:s,shape:n,dtype:o}}makeOutput(n,o,i){return ld().makeTensorFromTensorInfo(this.makeTensorInfo(n,o,i),this)}unpackTensor(n){let o=new pV(n.shape);return this.runWebGLProgram(o,[n],n.dtype)}packTensor(n){let o=new fV(n.shape);return this.runWebGLProgram(o,[n],n.dtype,null,!0)}packedReshape(n,o){let i=[Ow(n.shape),...Rw(n.shape)],s={dtype:n.dtype,shape:i,dataId:n.dataId},a=[Ow(o),...Rw(o)],l=new OD(a,i),u=!0,c=[i],f=this.runWebGLProgram(l,[s],n.dtype,c,u);return{dataId:f.dataId,shape:o,dtype:f.dtype}}decode(n,o){let i=this.texData.get(n),{isPacked:s,shape:a,dtype:l}=i;if(o!=null){let h=Y.sizeFromShape(a),m=o[0]*o[1]*4;Y.assert(h<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let u=CP(a),c;s?c=new oV(u):c=new nV(u);let f=!0,d=[o??vP(u)],p=this.runWebGLProgram(c,[{shape:u,dtype:l,dataId:n}],l,d,f,o);return{dtype:l,shape:a,dataId:p.dataId}}runWebGLProgram(n,o,i,s,a=!1,l){let u=this.makeTensorInfo(n.outputShape,i),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===lE.DENSE){let x=l??vP(n.outputShape);c.texShape=x.map(v=>v*2)}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),Y.sizeFromShape(u.shape)===0)return c.values=Y.getTypedArrayFromDType(u.dtype,0),u;let f=[],d=o.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(x.dataId);if(v.texture==null){if(!n.packedInputs&&Y.sizeFromShape(x.shape)<=Me().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:v.values};n.packedInputs&&(v.isPacked=!0,v.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!v.isPacked!=!!n.packedInputs)x=v.isPacked?this.unpackTensor(x):this.packTensor(x),f.push(x),v=this.texData.get(x.dataId);else if(v.isPacked&&!cE(v.shape,x.shape)){let w=x,_=x.shape;x.shape=v.shape,x=this.packedReshape(x,_),f.push(x),v=this.texData.get(x.dataId),w.shape=_}return{shape:x.shape,texData:v,isUniform:!1}});this.uploadToGPU(u.dataId);let p={shape:u.shape,texData:c,isUniform:!1},h=e8e(n,d,p),m=this.getAndSaveBinary(h,()=>Qze(this.gpgpu,n,d,p)),g=this.activeTimers!=null,y;g&&(y=this.startTimer()),Me().get("ENGINE_COMPILE_ONLY")||Jze(this.gpgpu,m,d,p,s),f.forEach(x=>this.disposeIntermediateTensorInfo(x)),g&&(y=this.endTimer(y),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(y)}));let b=Me().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){let x=Y.now();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!Me().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&a===!1){let x=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),x}return u}compileAndRun(n,o,i,s,a=!1){return i=i||o[0].dtype,this.runWebGLProgram(n,o,i,s,a)}getAndSaveBinary(n,o){return n in this.binaryCache||(this.binaryCache[n]=o()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Me().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(o=>{this.gpgpu.deleteProgram(this.binaryCache[o].webGLProgram),delete this.binaryCache[o]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Pe(()=>{if(!Me().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=Me().getBool("DEBUG");Me().set("DEBUG",!1);let o=this.abs(Ot(1e-8)).dataSync()[0];if(Me().set("DEBUG",n),o>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?ezt:tzt}uploadToGPU(n){let o=this.texData.get(n),{shape:i,dtype:s,values:a,texture:l,usage:u,isPacked:c}=o;if(l!=null)return;let f=this.activeTimers!=null,d;f&&(d=Y.now());let p=o.texShape;if(p==null&&(p=Bze(i,c),o.texShape=p),a!=null){let h=CP(i),m,g=p[1],y=p[0],b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(c||!b)&&([g,y]=$0(p[0],p[1])),c?m=new aV(h,b):m=new EP(h,b);let x=b?[y,g]:p,v=this.makeTensorInfo(x,s),w=this.texData.get(v.dataId);b?w.usage=Fl.PIXELS:w.usage=Fl.UPLOAD,w.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),g,y,a);let _=[[y,g]],C=this.runWebGLProgram(m,[v],s,_,!0),E=this.texData.get(C.dataId);o.texShape=E.texShape,o.isPacked=E.isPacked,o.usage=E.usage,Me().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(o.texture=E.texture,o.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(v),f&&(this.uploadWaitMs+=Y.now()-d)}else{let h=this.acquireTexture(p,u,s,c);o.texture=h}}convertAndCacheOnCPU(n,o){let i=this.texData.get(n),{dtype:s}=i;return o!=null&&(i.values=szt(o,s)),i.values}acquireTexture(n,o,i,s){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,o,s)}computeBytes(n,o){return n[0]*n[1]*Y.bytesPerElement(o)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){return je(this,null,function*(){let n=[];if(this.gpgpu.parallelCompilationExtension){for(let[,o]of Object.entries(this.binaryCache))n.push(this.checkCompletionAsync_(o));return Promise.all(n)}else{for(let[,o]of Object.entries(this.binaryCache)){let i=new Promise(s=>{try{this.checkCompletion_(o),s(!0)}catch(a){throw a}});n.push(i)}return Promise.all(n)}})}checkCompletionAsync_(n){return je(this,null,function*(){return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(n):(yield oD(),this.checkCompletionAsync_(n))})}checkCompletion_(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Aue(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:o,customUniformLocations:i,infLoc:s,nanLoc:a,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=Nue(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=o,n.customUniformLocations=i,n.infLoc=s,n.nanLoc=a,n.outShapeLocation=l,n.outShapeStridesLocation=u,n.outTexShapeLocation=c}}createTensorFromGPUData(n,o,i){n.channels=n.channels||"RGBA";let{texture:s,height:a,width:l,channels:u}=n,c=ld().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let f=c.writeTexture(s,o,i,a,l,u);return ld().makeTensorFromDataId(f,o,i,c)}}return t.nextDataId=0,t})();function szt(t,r){if(r==="float32"||r==="complex64")return t;if(r==="int32"||r==="bool"){let n=r==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let o=0;o<n.length;++o)n[o]=Math.round(t[o]);return n}else throw new Error(`Unknown dtype ${r}`)}yx.isBrowser()&&y3("webgl",()=>new SUe,2);re();re();re();re();re();var RD=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var ic=class{constructor(r,n,o){this.variableNames=["A","B"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${r}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};re();var Jc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Qc=class{constructor(r,n,o,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ce.assertAndGetBroadcastShape(n,o);let s=this.outputShape.length;this.enableShapeUniforms=zn(s);let a="";if(i)if(s===0||Y.sizeFromShape(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Ur(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let u=Ni("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${r}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}};re();re();function Mi(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var CUe={kernelName:Eh,backendName:"webgl",kernelFunc:Mi};function sc(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.makeTensorInfo(o.shape,"complex64"),a=n.texData.get(s.dataId),l=Mi({inputs:{x:o},backend:n}),u=Mi({inputs:{x:i},backend:n});return a.complexTensorInfos={real:l,imag:u},s}var EUe={kernelName:SS,backendName:"webgl",kernelFunc:sc};re();var Bue="return (a < 0.) ? b * a : a;",$ue=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function azt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o,a=n.makeTensorInfo([],"float32",Y.createScalarValue(s,"float32")),l=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qc($ue,i.shape,a.shape):new ic(Bue,i.shape,a.shape),u=n.runWebGLProgram(l,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),u}var TUe={kernelName:Vb,backendName:"webgl",kernelFunc:azt};re();var zue="return (a < 0.) ? b * a : a;",Uue=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function lzt(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qc(Uue,o.shape,i.shape):new ic(zue,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],"float32")}var AUe={kernelName:rx,backendName:"webgl",kernelFunc:lzt};var Sp="if (isnan(x)) return x;";function tr({opSnippet:t,packedOpSnippet:r,cpuKernelImpl:n,dtype:o}){return({inputs:i,backend:s})=>{let{x:a}=i,l=s,u=o||a.dtype;if(l.shouldExecuteOnCPU([a])&&n!=null){let d=l.texData.get(a.dataId),p=n(d.values,u);return l.makeTensorInfo(a.shape,u,p)}let c=Me().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&r!=null,f;return c?f=new oc(a.shape,r):f=new Ta(a.shape,t),l.runWebGLProgram(f,[a],u)}}function Pn({opSnippet:t,packedOpSnippet:r,checkOutOfBounds:n=!1,supportsComplex:o=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:l})=>{let{a:u,b:c}=a,f=l;if(o&&u.dtype==="complex64"){let m=f.texData.get(u.dataId),g=f.texData.get(c.dataId),[y,b]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(v=>{let[w,_]=v,S={dataId:w.dataId,dtype:w.dtype,shape:u.shape},C={dataId:_.dataId,dtype:_.dtype,shape:c.shape},E=new ic(t,u.shape,c.shape);return f.runWebGLProgram(E,[S,C],Gi(w.dtype,_.dtype))}),x=sc({inputs:{real:y,imag:b},backend:f});return f.disposeIntermediateTensorInfo(y),f.disposeIntermediateTensorInfo(b),x}let d=s||Gi(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([u,c]))&&i!=null){let m=f.texData.get(u.dataId).values,g=f.texData.get(c.dataId).values,y=u.dtype==="string"?ce.fromUint8ToStringArray(m):m,b=u.dtype==="string"?ce.fromUint8ToStringArray(g):g,[x,v]=i(u.shape,c.shape,y,b,d),w=f.makeTensorInfo(v,d),_=f.texData.get(w.dataId);return _.values=x,w}let p=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&r!=null,h;return p?h=new Qc(r,u.shape,c.shape,n):h=new ic(t,u.shape,c.shape),f.runWebGLProgram(h,[u,c],d)}}function Gx(t,r=!1){if(t==="linear")return r?bUe:dUe;if(t==="relu")return r?vUe:hUe;if(t==="elu")return r?xUe:pUe;if(t==="relu6")return r?wUe:mUe;if(t==="prelu")return r?Uue:zue;if(t==="leakyrelu")return r?$ue:Bue;if(t==="sigmoid")return r?_Ue:gUe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var PD=class{constructor(r,n,o,i=!1,s=!1,a=!1,l=null,u=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=zn(this.outputShape.length);let f=i?r[1]:r[2],d=Math.ceil(f/2),p=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",m=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],y="",b="";l&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${l}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${l}
        }`:y=`vec4 activation(vec4 x) {
          ${l}
        }`,b="result = activation(result);");let x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",w="rc.x";r[0]<n[0]?v=`imod(rc.x, ${r[0]})`:n[0]<r[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}};re();re();var Vue={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},AP=class{constructor(r,n,o){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${r}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var kUe="return a * b;";function kP(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=ce.upcastType(o.dtype,i.dtype);if(o.dtype==="complex64"){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),c=new AP(Vue.REAL,o.shape,i.shape),f=new AP(Vue.IMAG,o.shape,i.shape),d=[{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(f,d,"float32"),m=sc({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([o,i])){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),[c,f]=j8e(o.shape,i.shape,l.values,u.values,s),d=n.makeTensorInfo(f,s),p=n.texData.get(d.dataId);return p.values=c,d}let a;return Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Qc(kUe,o.shape,i.shape):a=new ic(kUe,o.shape,i.shape),n.runWebGLProgram(a,[o,i],s)}var IUe={kernelName:Jg,backendName:"webgl",kernelFunc:kP};re();function DUe(t,r,n){let o=[Ow(t.shape),...Rw(t.shape)],i={dtype:t.dtype,shape:o,dataId:t.dataId},s=[Ow(r),...Rw(r)],a=new OD(s,o),l=!0,u=[o],c=n.runWebGLProgram(a,[i],t.dtype,u,l);return{dataId:c.dataId,shape:r,dtype:c.dtype}}function yt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=n,l=Y.sizeFromShape(i.shape),u=Y.inferFromImplicitShape(s,l),c=Y.sizeFromShape(u);Y.assert(l===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);let f=a.texData.get(i.dataId);return f.isPacked&&!cE(i.shape,u)&&!(f.texture!==null&&cE(f.shape,u))?DUe(i,u,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}var NUe={kernelName:ox,backendName:"webgl",kernelFunc:yt};re();re();re();re();var IP=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l=Math.floor(o/4)*4,u=o%4,c="sumValue += dot(values, ones);";if(n!=null){let d=1/n;c=`sumValue += dot(values * ${Y.isInt(d)?d.toPrecision(2):d}, ones);`}let f="";s%o>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${l};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var mV=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l="0.0",u="";n==="prod"?l="1.0":n==="min"?(l="1.0 / 1e-20",u="min"):n==="max"&&(l="-1.0 / 1e-20",u="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");let f=Math.floor(o/4)*4,d=o%4,p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(l="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(l="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${l};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        vec4 minMaxValue = vec4(${l});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function czt(t){let r=[];for(;r.length===0||r[r.length-1].outSize!==1;){let n=r.length?r[r.length-1].outSize:t[1],o=ce.computeOptimalWindowSize(n);r.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return r}function ef(t,r,n,o){let i=czt(t.shape),s=t;for(let a=0;a<i.length;a++){let{inSize:l,windowSize:u,outSize:c}=i[a],f,d;n==="mean"?f=a===0?new IP({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},l):new IP({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c}):f=new mV({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},n),d=s,s=o.runWebGLProgram(f,[s],r),d.dataId!==t.dataId&&o.disposeIntermediateTensorInfo(d)}return s}re();var gV=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[n[a]];this.outputShape=o,this.rank=o.length;let i=Ur(this.rank),s=fzt(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}};function fzt(t){let r=t.length;if(r>6)throw Error(`Transpose for rank ${r} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],o=new Array(r);for(let i=0;i<t.length;i++)o[t[i]]=n[i];return o.join()}var yV=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let o=new Array(r.length);for(let f=0;f<o.length;f++)o[f]=r[n[f]];if(this.outputShape=o,this.rank=o.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let i=Ur(this.rank),s=Lue("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=s[f];let l=`vec2(${a.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${o[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${l})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${u}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${o[this.rank-2]}) {
        result[2] = ${c};
        if(${u}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function Pw(t,r,n){let o=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yV(t.shape,r):new gV(t.shape,r);return n.runWebGLProgram(o,[t],t.dtype)}function MUe(t,r,n,o){let i=r,s=t.shape.length,a=Y.parseAxisParam(i,t.shape),l=a,u=ce.getAxesPermutation(l,s),c=u!=null,f=t;c&&(f=Pw(t,u,o),l=ce.getInnerMostAxes(l.length,s)),ce.assertAxesAreInnerMostDims("sum",l,s);let[d,p]=ce.computeOutAndReduceShapes(f.shape,l),h=d;n&&(h=ce.expandShapeToKeepDim(d,a));let m=Y.sizeFromShape(p),y=Y.sizeFromShape(t.shape)/m,b=yt({inputs:{x:f},attrs:{shape:[y,m]},backend:o}),x=H1(t.dtype),v=ef(b,x,"sum",o),w=yt({inputs:{x:v},attrs:{shape:h},backend:o});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(v),c&&o.disposeIntermediateTensorInfo(f),w}function hE(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;return MUe(i,s,a,n)}var FUe={kernelName:cx,backendName:"webgl",kernelFunc:hE};re();function Go(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{perm:s}=o,a=n,l=i.shape.length,u=new Array(l);for(let f=0;f<u.length;f++)u[f]=i.shape[s[f]];let c;if(a.shouldExecuteOnCPU([i])){let d=a.texData.get(i.dataId).values,p=pE(d,i.shape,i.dtype,s,u);c=a.makeTensorInfo(u,i.dtype);let h=a.texData.get(c.dataId);h.values=p}else c=Pw(i,s,a);return c}var OUe={kernelName:Ah,backendName:"webgl",kernelFunc:Go};var Gue=1e3;function mE({a:t,b:r,transposeA:n,transposeB:o,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:u=null}){let c=t.shape.length,f=r.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=o?r.shape[f-1]:r.shape[f-2],h=n?t.shape[c-1]:t.shape[c-2],m=o?r.shape[f-2]:r.shape[f-1],g=t.shape.slice(0,-2),y=r.shape.slice(0,-2),b=Y.sizeFromShape(g),x=Y.sizeFromShape(y),w=Qu.assertAndGetBroadcastShape(t.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,m]);Y.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${r.shape} and transposeA=${n} and transposeB=${o} must match.`);let _=n?[b,d,h]:[b,h,d],S=o?[x,m,p]:[x,p,m],C=yt({inputs:{x:t},backend:i,attrs:{shape:_}}),E=yt({inputs:{x:r},backend:i,attrs:{shape:S}}),T=[C,E],I=Math.max(b,x),k=n?C.shape[1]:C.shape[2],F=s!=null,D=a!=null,L=u==="leakyrelu",P=u!=null?Gx(u,!0):null,R=F||D||L||P!=null,V;if((h===1||m===1)&&k>Gue&&R===!1){let U=C,H=E;n&&(U=Go({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),T.push(U)),o&&(H=Go({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),T.push(H));let X=m!==1,fe=m===1,$=U;X&&($=yt({inputs:{x:U},backend:i,attrs:{shape:[I,k,1]}}),T.push($));let M=m===1?2:1,z=H;fe&&(z=yt({inputs:{x:H},backend:i,attrs:{shape:[I,1,k]}}),T.push(z));let q=kP({inputs:{a:$,b:z},backend:i});V=hE({inputs:{x:q},backend:i,attrs:{axis:M,keepDims:!0}}),T.push(q)}else{let U=Gi(t.dtype,r.dtype),H=new PD(_,S,[I,h,m],n,o,F,P,D,L),X=[C,E];if(s!=null&&X.push(s),D&&X.push(a),L){let fe=i.makeTensorInfo([],"float32",Y.createScalarValue(l,"float32"));X.push(fe),T.push(fe)}V=i.runWebGLProgram(H,X,U)}let G=yt({inputs:{x:V},backend:i,attrs:{shape:w}});T.push(V);for(let U of T)i.disposeIntermediateTensorInfo(U);return G}function dzt(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o;return mE({a:i,b:s,transposeA:u,transposeB:c,backend:n,bias:a,preluActivationWeights:l,leakyreluAlpha:d,activation:f})}var RUe={kernelName:U1,backendName:"webgl",kernelFunc:dzt};re();var PUe="return abs(x);";function pzt(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])&&o.dtype!=="complex64"){let s=n.texData.get(o.dataId),a=uV(s.values);return n.makeTensorInfo(o.shape,o.dtype,a)}let i;return Me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new oc(o.shape,PUe):i=new Ta(o.shape,PUe),n.runWebGLProgram(i,[o],o.dtype)}var LUe={kernelName:Cb,backendName:"webgl",kernelFunc:pzt};re();var hzt=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,mzt=tr({opSnippet:hzt}),jUe={kernelName:Tg,backendName:"webgl",kernelFunc:mzt};re();var gzt=vs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,yzt=tr({opSnippet:gzt}),BUe={kernelName:Ag,backendName:"webgl",kernelFunc:yzt};re();var $Ue="return a + b;",bzt=Pn({opSnippet:$Ue,packedOpSnippet:$Ue,supportsComplex:!0,cpuKernelImpl:y8e}),zUe={kernelName:np,backendName:"webgl",kernelFunc:bzt};re();var bV=class{constructor(r,n){this.outputShape=[],this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`float v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}};var xV=class{constructor(r,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`vec4 v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}};function vV(t){let{inputs:r,backend:n}=t,o=r;if(o.length===1)return Mi({inputs:{x:o[0]},backend:n});if(o.length>Me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(o.length/2),c=vV({inputs:o.slice(0,u),backend:n}),f=vV({inputs:o.slice(u),backend:n});return vV({inputs:[c,f],backend:n})}let i=o.map(u=>u.dtype).reduce((u,c)=>Gi(u,c)),s=o.map(u=>u.shape),l=Me().getBool("WEBGL_PACK")?new xV(o[0].shape,s):new bV(o[0].shape,s);return n.runWebGLProgram(l,o,i)}var UUe={kernelName:Eb,backendName:"webgl",kernelFunc:vV};re();function xzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Go({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("all",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=Y.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=ef(g,g.dtype,"all",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var VUe={kernelName:yS,backendName:"webgl",kernelFunc:xzt};re();function vzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Go({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("any",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=Y.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=ef(g,g.dtype,"any",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var GUe={kernelName:bS,backendName:"webgl",kernelFunc:vzt};re();re();var wV=class{constructor(r,n,o){this.variableNames=["A"];let{windowSize:i,batchSize:s,outSize:a}=r;o||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];let l=n==="max"?">":"<",u=o?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${l} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};re();var _V=class{constructor(r,n,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y.assert(r.length>2,()=>`Packed arg${o.charAt(0).toUpperCase()+o.slice(1)} supports only inputs with rank above 2.`);let s=r[r.length-1],a=Math.ceil(s/n);this.outputShape=r.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");let l=this.outputShape,u=l.length,c=Ur(u),f=Ni("coords",u),d,p;if(a===1){p=u+1;let E=Ur(p);d=`
        ${E} sourceLocR = ${E}(${f.join()}, 0);
        ++${f[u-1]};
        ${E} sourceLocG = ${E}(${f.join()}, 0);
        ++${f[u-2]};
        ${E} sourceLocA = ${E}(${f.join()}, 0);
        --${f[u-1]};
        ${E} sourceLocB = ${E}(${f.join()}, 0);
        --${f[u-2]};`}else p=u,d=`
        ${c} sourceLocR = coords;
        ++${f[u-1]};
        ${c} sourceLocG = coords;
        ++${f[u-2]};
        ${c} sourceLocA = coords;
        --${f[u-1]};
        ${c} sourceLocB = coords;
        --${f[u-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),m="."+h[p-1],g=h.map(E=>"int "+E),y=Ni("sourceLocR",p-1).concat("inIdx.r"),b=Ni("sourceLocG",p-1).concat("inIdx.g"),x=Ni("sourceLocB",p-1).concat("inIdx.b"),v=Ni("sourceLocA",p-1).concat("inIdx.a"),w=o==="max"?"greaterThan":"lessThan",_=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()})));`,S=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,C=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[u-1]} < ${l[u-1]-1};
        bool hasNextRow = ${f[u-2]} < ${l[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function WUe(t,r,n,o=null){let i=r.shape[0],s=r.shape[1];o!=null&&(i=o.shape[0],s=o.shape[1]);let a=ce.computeOptimalWindowSize(s),l={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},u=new wV(l,n,o==null),c=[r];o!=null&&c.push(o);let f=t.runWebGLProgram(u,c,"int32");if(f.shape[1]===1)return f;let d=WUe(t,r,n,f);return t.disposeIntermediateTensorInfo(f),d}function qUe(t,r,n,o=null){let i=o!=null?o.shape:r.shape,s=i[i.length-1],a=ce.computeOptimalWindowSize(s),l=new _V(i,a,n,o==null),u=o==null?[r]:[r,o],c=t.runWebGLProgram(l,u,"int32");if(c.shape.length===r.shape.length){let f=qUe(t,r,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function SV(t,r,n,o){let i=[n];if(ce.assertAxesAreInnerMostDims("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,r.shape.length),!Me().getBool("WEBGL_PACK_REDUCE")||r.shape.length<=2){let s=[],a=t.texData.get(r.dataId),l=a!==null&&a.isPacked,u=r;l&&(u=t.unpackTensor(r),s.push(u));let[c,f]=ce.computeOutAndReduceShapes(u.shape,i),d=Y.sizeFromShape(f),p=yt({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});s.push(p);let h=WUe(t,p,o);s.push(h);let m=yt({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return qUe(t,r,o)}function wzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Go({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMax",[a[0]],u.shape.length);let f=SV(n,u,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var HUe={kernelName:Tb,backendName:"webgl",kernelFunc:wzt};re();function _zt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Go({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMin",[a[0]],u.shape.length);let f=SV(n,u,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var YUe={kernelName:Ab,backendName:"webgl",kernelFunc:_zt};re();var Szt=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Czt=tr({opSnippet:Szt}),XUe={kernelName:kg,backendName:"webgl",kernelFunc:Czt};re();var Ezt=vs+"return log(x + sqrt(x * x + 1.0));",Tzt=tr({opSnippet:Ezt}),KUe={kernelName:Ig,backendName:"webgl",kernelFunc:Tzt};re();var Azt=vs+`
  return atan(x);
`,kzt=tr({opSnippet:Azt}),ZUe={kernelName:Dg,backendName:"webgl",kernelFunc:kzt};re();var Izt=RD+`
  return atan(a, b);
`,Dzt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jc+`
  return result;
`,Nzt=Pn({opSnippet:Izt,packedOpSnippet:Dzt}),QUe={kernelName:Mg,backendName:"webgl",kernelFunc:Nzt};re();var Mzt=vs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Fzt=tr({opSnippet:Mzt}),JUe={kernelName:Ng,backendName:"webgl",kernelFunc:Fzt};re();var Hh=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left;this.outputShape=r.outShape;let g=n==="avg",y=`((batch  * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + d`,b=`(xR * ${r.inWidth} + xC) * ${r.inChannels} + d`,x="0.0";if(g||(x="-1.0 / 1e-20"),o){let E=">=";this.userCode=`
        const ivec2 strides = ivec2(${l}, ${u});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?y:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let v="max",w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");let _=Math.floor(a/4)*4,S=a%4,C=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${_};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${w});
      }
    `}},Lw=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideDepth,u=r.strideHeight,c=r.strideWidth,f=r.dilationDepth,d=r.dilationHeight,p=r.dilationWidth,h=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,x=r.padInfo.left;this.outputShape=r.outShape;let v=n==="avg",w="0.0";if(v||(w="-1.0 / 1e-20"),o){let I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${l}, ${u}, ${c});
        const ivec3 pads = ivec3(${y}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${r.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${r.inDepth} + xD) * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`((xD * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let _="max",S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");let C=Math.floor(a/4)*4,E=a%4,T=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${l}, ${u}, ${c});
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${C};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${T}
            }
          }
        }
        setOutput(${S});
      }
    `}};function Ozt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;z0(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))return Mi({inputs:{x:i},backend:n});let d=new Hh(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}var e7e={kernelName:kb,backendName:"webgl",kernelFunc:Ozt};re();function Rzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,u,c),p=new Lw(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}var t7e={kernelName:Ib,backendName:"webgl",kernelFunc:Rzt};re();var CV=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=u-1-r.padInfo.top,d=c-1-r.padInfo.left,p=1/(n*o);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${l}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},EV=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,m=d-1-r.padInfo.front,g=p-1-r.padInfo.top,y=h-1-r.padInfo.left,b=1/(n*o*i);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Pzt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),h=new EV(p);return n.runWebGLProgram(h,[i],a.dtype)}var r7e={kernelName:vS,backendName:"webgl",kernelFunc:Pzt};re();function Lzt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;z0([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=new CV(f);return n.runWebGLProgram(d,[i],a.dtype)}var n7e={kernelName:xS,backendName:"webgl",kernelFunc:Lzt};re();function jzt(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;return mE({a:i,b:s,transposeA:a,transposeB:l,backend:n})}var o7e={kernelName:Db,backendName:"webgl",kernelFunc:jzt};re();re();var TV=class{constructor(r,n,o,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="0.0";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="1.0";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${l};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};re();var AV=class{constructor(r,n,o,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="vec4(0.0)";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        vec4 offset = ${l};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var Bzt=({inputs:t,backend:r,attrs:n})=>{let{x:o,mean:i,variance:s,offset:a,scale:l}=t;Y.assert(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y.assert(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y.assert(l==null||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=[o,i,s],f=null;a!=null&&(f=a.shape,c.push(a));let d=null;l!=null&&(d=l.shape,c.push(l));let p=Me().getBool("WEBGL_PACK_NORMALIZATION")?new AV(o.shape,i.shape,s.shape,f,d,u):new TV(o.shape,i.shape,s.shape,f,d,u);return r.runWebGLProgram(p,c,c[0].dtype)},i7e={kernelName:zb,backendName:"webgl",kernelFunc:Bzt};re();re();var kV=class{constructor(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;let n=Ur(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let o=$zt(this.rank),i,s=r.map((a,l)=>`sourceLoc.${Wue[l]} = start[${l}] + coords.${Wue[l]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${o}));
      }
    `}},Wue=["x","y","z","w","u","v"];function $zt(t){if(t===1)return"sourceLoc";if(t<=6)return Wue.slice(0,t).map(r=>"sourceLoc."+r).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var IV=class{constructor(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=Ur(this.rank),o=Ni("coords",this.rank),i=Ni("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,l=`
      result.x = ${a};
      if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${o[this.rank-1]};
      if (++${o[this.rank-2]} < ${r[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${r.map((f,d)=>`start[${d}]`).join()});`:r.map((f,d)=>`${i[d]} = ${o[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${l}
        ${u}
        setOutput(result);
      }
    `}};function zzt(t,r,n,o){let i=o.texData.get(t.dataId),s=o.makeTensorInfo(n,t.dtype),a=o.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let l=Rs.computeFlatOffset(r,Y.computeStrides(t.shape));i.slice&&(l+=i.slice.flatOffset),a.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||t.dataId};let u=o.dataRefCount.get(a.slice.origDataId)||1;return o.dataRefCount.set(a.slice.origDataId,u+1),s}function Yh(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o,[l,u]=Rs.parseSliceParams(i,s,a);if(Rs.assertParamsValid(i,l,u),Y.sizeFromShape(u)===0)return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){let d=n.texData.get(i.dataId),p=X8e(d.values,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,p)}let{isPacked:c}=n.texData.get(i.dataId),f=Rs.isSliceContinous(i.shape,l,u);if(c||!f){let d=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new IV(u):new kV(u),p=[l];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),zzt(i,l,u,n)}var s7e={kernelName:ux,backendName:"webgl",kernelFunc:Yh};var Uzt=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;Y.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((x,v)=>x*v),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),h=[],m=yt({inputs:{x:i},backend:n,attrs:{shape:u}}),g=Go({inputs:{x:m},backend:n,attrs:{perm:c}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:f}}),b=Yh({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return h.push(m),h.push(g),h.push(y),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},a7e={kernelName:Nb,backendName:"webgl",kernelFunc:Uzt};re();function Vzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=lV(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var l7e={kernelName:wS,backendName:"webgl",kernelFunc:Vzt};re();var Gzt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Wzt=`
  return float(int(a.r) & int(b.r));
`;function qzt(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=Me().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([o,i])||a===1){let u=n.texData.get(o.dataId).values,c=n.texData.get(i.dataId).values,[f,d]=x8e(o.shape,i.shape,u,c,o.dtype),p=n.makeTensorInfo(d,o.dtype),h=n.texData.get(p.dataId);return h.values=f,p}let l;return s?l=new Qc(Gzt,o.shape,i.shape,!1):l=new ic(Wzt,o.shape,i.shape),n.runWebGLProgram(l,[o,i],o.dtype)}var u7e={kernelName:M1,backendName:"webgl",kernelFunc:qzt};re();function Hzt(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.readSync(o.dataId),a=n.readSync(i.dataId),l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var c7e={kernelName:_S,backendName:"webgl",kernelFunc:Hzt};re();re();re();var Yzt="return float(a != b);",que=Pn({opSnippet:Yzt,cpuKernelImpl:$8e,dtype:"bool"}),f7e={kernelName:$1,backendName:"webgl",kernelFunc:que};re();function Wx(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Mi({inputs:{x:i.complexTensorInfos.real},backend:n})}var d7e={kernelName:tC,backendName:"webgl",kernelFunc:Wx};var Xzt="return float(int(x));";function p7e(t,r){let n=new Ta(t.shape,Xzt),o=r.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}function Hue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return Mi({inputs:{x:i},backend:n});let a=xo(i.shape),l=Hue({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),u=sc({inputs:{real:l,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(l),u}if(i.dtype==="complex64"){let a=Wx({inputs:{input:i},backend:n}),l=Hue({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),l}if(!Y.hasEncodingLoss(i.dtype,s)){let a=Mi({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){let a=n.texData.get(i.dataId).values,[l,u,c]=v8e(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}if(s==="int32")return p7e(i,n);if(s==="bool"){let a=n.makeTensorInfo([],"bool",Y.getTypedArrayFromDType("bool",1)),u=que({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}var h7e={kernelName:Ch,backendName:"webgl",kernelFunc:Hue};re();var m7e="return ceil(x);",Kzt=tr({opSnippet:m7e,packedOpSnippet:m7e,cpuKernelImpl:w8e}),g7e={kernelName:Fg,backendName:"webgl",kernelFunc:Kzt};re();var DV=class{constructor(r){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var NV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function Zzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{clipValueMin:s,clipValueMax:a}=o,l;Me().getBool("WEBGL_PACK_CLIP")?l=new NV(i.shape):l=new DV(i.shape);let u=[[s],[a]];return n.runWebGLProgram(l,[i],i.dtype,u)}var y7e={kernelName:Og,backendName:"webgl",kernelFunc:Zzt};re();var MV=class{constructor(r){this.variableNames=["real","imag"],this.outputShape=r,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function b7e(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}}function Qzt(t){let{inputs:r,backend:n}=t,{x:o}=r,i=n.texData.get(o.dataId),s=new MV(o.shape),a=[b7e(o,i.complexTensorInfos.real),b7e(o,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}var x7e={kernelName:Mb,backendName:"webgl",kernelFunc:Qzt};re();re();re();var FV=class{constructor(r){this.outputShape=[],this.outputShape=ce.computeOutShape(r,1),this.variableNames=r.map((a,l)=>`T${l}`);let n=new Array(r.length-1);n[0]=r[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+r[a][1];let o=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){let l=n[a-1];o.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${l}));`)}let i=n.length,s=n[n.length-1];o.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${o.join(`
        `)}
      }
    `}};re();var RV=class{constructor(r,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ce.computeOutShape(r,n);let o=this.outputShape,i=o.length,s=Ur(i),a=Ni("coords",i),l=["x","y","z","w","u","v"].slice(0,i);this.variableNames=r.map((g,y)=>`T${y}`);let u=new Array(r.length-1);u[0]=r[0][n];for(let g=1;g<u.length;g++)u[g]=u[g-1]+r[g][n];let c=l[n],f=l.slice(-2),d=l.join(),p=`if (${c} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${f.join()}));
        }`;for(let g=1;g<u.length;g++){let y=u[g-1];p+=`
        if (${c} < ${u[g]}  && ${c} >= ${u[g-1]}) {
          return getChannel(
            getT${g}(${OV(l,c,y)}),
            vec2(${OV(f,c,y)}));
        }`}let h=u.length,m=u[u.length-1];p+=`
        return getChannel(
          getT${h}(${OV(l,c,m)}),
          vec2(${OV(f,c,m)}));`,this.userCode=`
      float getValue(${l.map(g=>"int "+g)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${o[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${o[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${o[i-2]} &&
            ${a[i-1]} < ${o[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}};function OV(t,r,n){let o=t.indexOf(r);return t.map((s,a)=>a===o?`${s} - ${n}`:s).join()}re();function gE(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Mi({inputs:{x:i.complexTensorInfos.imag},backend:n})}var v7e={kernelName:zS,backendName:"webgl",kernelFunc:gE};function LD(t,r,n){let o=t[0].dtype;if(o==="complex64"){let h=t.map(x=>Wx({inputs:{input:x},backend:n})),m=t.map(x=>gE({inputs:{input:x},backend:n})),g=LD(h,r,n),y=LD(m,r,n),b=sc({inputs:{real:g,imag:y},backend:n});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}let i=n.shouldExecuteOnCPU(t);if(o==="string"&&(i=!0),i){let h=t.map(w=>{let S=[-1,Y.sizeFromShape(w.shape.slice(r))];return yt({inputs:{x:w},backend:n,attrs:{shape:S}})}),m=h.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),g=ce.computeOutShape(h.map(w=>w.shape),1),y=h[0].shape[0]===1,b=_8e(m,g,o,y),x=ce.computeOutShape(t.map(w=>w.shape),r),v=n.makeTensorInfo(x,o,b);return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}let s=t.filter(h=>Y.sizeFromShape(h.shape)>0),a=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){let h=a?new Ta(t[0].shape,U0):new oc(t[0].shape,U0);return n.runWebGLProgram(h,t,o)}let l=Me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>l){let h=[];for(let g=0;g<s.length;g+=l){let y=s.slice(g,g+l);h.push(LD(y,r,n))}let m=LD(h,r,n);for(let g of h)n.disposeIntermediateTensorInfo(g);return m}if(a){let h=new RV(s.map(m=>m.shape),r);return n.runWebGLProgram(h,s,o)}let{tensors2D:u,outShape:c}=Jzt(s,r,n),f=new FV(u.map(h=>h.shape)),d=n.runWebGLProgram(f,u,o);u.forEach(h=>n.disposeIntermediateTensorInfo(h));let p=yt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function Jzt(t,r,n){let o=ce.computeOutShape(t.map(s=>s.shape),r);return{tensors2D:t.map(s=>yt({inputs:{x:s},attrs:{shape:[-1,Y.sizeFromShape(s.shape.slice(r))]},backend:n})),outShape:o}}function Yue(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=Y.parseAxisParam(i,r[0].shape)[0],a=r.map(c=>c.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(c=>c.shape),s);if(Y.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(c=>Y.sizeFromShape(c.shape)>0);return u.length===1?Mi({inputs:{x:u[0]},backend:n}):LD(u,s,n)}var w7e={kernelName:Fb,backendName:"webgl",kernelFunc:Yue};re();var jD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=r.outShape;let a=r.padInfo.top,l=r.padInfo.left,u=r.strideHeight,c=r.strideWidth,f=r.dilationHeight,d=r.dilationWidth,p=r.filterHeight,h=r.filterWidth,m=Math.floor(r.inChannels/4)*4,g=r.inChannels%4,y=r.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,v=y?3:1,w="",_="";o&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:w=`
          float activation(float x) {
            ${o}
          }
        `,_="result = activation(result);");let S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${r.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${_}
        setOutput(result);
      }
    `}},PV=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let n=r.padInfo.front,o=r.padInfo.top,i=r.padInfo.left,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.filterDepth,p=r.filterHeight,h=r.filterWidth,m=Math.floor(r.inChannels/4)*4,g=r.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${l});
      const ivec3 pads = ivec3(${n}, ${o}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};re();var BD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=zn(this.outputShape.length);let a=r.padInfo.left,l=r.strideWidth,u=r.dilationWidth,c=r.filterHeight,f=r.filterWidth,d=f,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)p+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${r.inChannels}; d1 += 2) {
       `;for(let y=0;y<f;y++)p+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){let b=y*2;if(p+=`
           xC = xCCorner + ${b*u};
           `,l===1){if(b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<f)){let x=a%2===0?Y.nearestLargerEven(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<f&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<f&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${r.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<f&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${r.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",m="";o&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${o}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${o}
         }`:h=`vec4 activation(vec4 x) {
           ${o}
         }`,m="result = activation(result);");let g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}};re();var LV=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let{dataFormat:o}=n,i=li(),s=o==="channelsLast",a=s?1:2,l=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${r[2]} && pos < ${r[1]}) {`,c="";for(let f=0;f<=1;f++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${f};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${l}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}};function jV(t,r){let n=t.length;return n>=3?r?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!r&&n===1&&t[0]>1?[t[0],1]:null}function BV({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let u=t.shape,c=o.texData.get(t.dataId),f=n.inChannels,d=u[0]*u[1]*u[2],p=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,g=!1,y,b=[];if(s!=null){let w=jV(s.shape,h);w!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:w}}),b.push(s))}if(i!=null){let w=jV(i.shape,h);w!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:w}}),b.push(i))}if(!((d===1||p===1)&&f>Gue)&&c.isPacked&&h&&c.texture!=null&&u[2]%2!==0&&Y.arraysEqual(c.shape.slice(-3),u.slice(-3))){let w=u[0]*u[1]*(u[2]+1),_={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},S=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Y.assert(cE(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);let C=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);let E=mE({a:_,b:C,backend:o,transposeA:m,transposeB:g,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a}),T=o.texData.get(E.dataId);Y.assert(T.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=S,T.shape=n.outShape,y=Mi({inputs:{x:E},backend:o}),y.shape=n.outShape,b.push(E)}else{let w=n.outHeight*n.outWidth,_=yt({inputs:{x:t},backend:o,attrs:{shape:h?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),S=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=mE({a:h?_:S,b:h?S:_,transposeA:!h,transposeB:g,backend:o,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a});y=yt({inputs:{x:C},backend:o,attrs:{shape:n.outShape}}),b.push(_),b.push(S),b.push(C)}for(let w of b)o.disposeIntermediateTensorInfo(w);return y}function $V({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let{filterWidth:u,filterHeight:c,inChannels:f,outWidth:d,outHeight:p,dataFormat:h}=n,m=h==="channelsLast",g=u*c*f,y=p*d,b=[n.batchSize,g,y],x=!0,v=!1,w=[];if(s!=null){let G=jV(s.shape,m);G!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:G}}),w.push(s))}if(i!=null){let G=jV(i.shape,m);G!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:G}}),w.push(i))}let _=yt({inputs:{x:r},backend:o,attrs:{shape:[1,g,Y.sizeFromShape(r.shape)/g]}});w.push(_);let S=new LV(b,n),C=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=o.runWebGLProgram(S,[t],"float32",C),T=yt({inputs:{x:E},backend:o,attrs:{shape:b}});w.push(E),w.push(T);let I=i!=null,k=s!=null,F=l==="leakyrelu",D=l?Gx(l,!0):null,L=new PD(m?T.shape:_.shape,m?_.shape:T.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,v,I,D,k,F),P=m?[T,_]:[_,T];if(i&&P.push(i),k&&P.push(s),F){let G=o.makeTensorInfo([],"float32",Y.createScalarValue(a,"float32"));P.push(G),w.push(G)}let R=o.runWebGLProgram(L,P,"float32"),V=yt({inputs:{x:R},backend:o,attrs:{shape:n.outShape}});w.push(R);for(let G of w)o.disposeIntermediateTensorInfo(G);return V}function e8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=BV({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&Me().getBool("WEBGL_EXP_CONV")){let g=new BD(p),y=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(g,[i,s],"float32",y)}else if(Me().getBool("WEBGL_CONV_IM2COL"))h=$V({x:i,filter:s,convInfo:p,backend:n});else{let g=new jD(p);h=n.runWebGLProgram(g,[i,s],"float32")}let m=yt({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),m}var _7e={kernelName:Ob,backendName:"webgl",kernelFunc:e8t};re();var zV=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},UV=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dataFormat==="channelsLast",l=n-1-r.padInfo.top,u=o-1-r.padInfo.left,c=a?1:2,f=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            for (int d2 = 0; d2 < ${r.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},VV=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.padInfo.front,a=r.padInfo.top,l=r.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yF = 0; yF < ${r.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${r.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${r.outHeight}; yR++) {
              int xR = wR + yR * ${o} - ${a};

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${r.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${l};

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},GV=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=n-1-r.padInfo.front,c=o-1-r.padInfo.top,f=i-1-r.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${r.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${o}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${o} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${r.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function t8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),h=new zV(p);return n.runWebGLProgram(h,[i,s],"float32")}var S7e={kernelName:CS,backendName:"webgl",kernelFunc:t8t};re();var WV=class{constructor(r){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=r.inShape,this.enableShapeUniforms=zn(this.outputShape.length);let n=r.filterHeight,o=r.filterWidth,i=n-1-r.padInfo.top,s=o-1-r.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            int wCPerm = ${o} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${r.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${r.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function r8t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(c),p=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,d);if(Me().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],m=new WV(p);return n.runWebGLProgram(m,[i,s],"float32",h)}else{let h=new UV(p);return n.runWebGLProgram(h,[i,s],"float32")}}var C7e={kernelName:Rb,backendName:"webgl",kernelFunc:r8t};re();function n8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),f=new PV(c);return n.runWebGLProgram(f,[i,s],"float32")}var E7e={kernelName:Pb,backendName:"webgl",kernelFunc:n8t};re();function o8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o,c=ce.computeConv3DInfo(i.shape,u,a,1,l),f=new VV(c);return n.runWebGLProgram(f,[i,s],"float32")}var T7e={kernelName:ES,backendName:"webgl",kernelFunc:o8t};re();function i8t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o,c=ce.computeConv3DInfo(u,s.shape,l,1,a),f=new GV(c);return n.runWebGLProgram(f,[i,s],"float32")}var A7e={kernelName:TS,backendName:"webgl",kernelFunc:i8t};re();var s8t=Sp+`
  return cos(x);
`,a8t=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Jc}
  return result;
`,l8t=tr({opSnippet:s8t,packedOpSnippet:a8t}),k7e={kernelName:Rg,backendName:"webgl",kernelFunc:l8t};re();var u8t=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,c8t=tr({opSnippet:u8t}),I7e={kernelName:Pg,backendName:"webgl",kernelFunc:c8t};re();var qV=class{constructor(r,n,o,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,l,u,c]=r,[f]=n,[d,p]=o;this.outputShape=[f,d,p,c];let h=i==="bilinear"?1:0,[m,g]=[`${l-1}.0`,`${u-1}.0`],[y,b,x]=d>1?[`${(l-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[v,w,_]=p>1?[`${(u-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${w};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var f8t=t=>{let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,f=new qV(i.shape,s.shape,l,u,c);return n.runWebGLProgram(f,[i,s,a],"float32")},D7e={kernelName:kS,backendName:"webgl",kernelFunc:f8t};re();var $D=function(t){return t.Prod="*",t.Sum="+",t}($D||{}),DP=class{constructor(r,n,o,i){this.op=r,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let s=this.outputShape.length,a=this.op===$D.Prod?"1.0":"0.0",l=o?a:`getX(${N7e(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1],c="",f="";o?(c=i?`end != ${u-1}`:"end != 0",f=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${u}`:"end >= pow2",f=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Ur(s)} coords = getOutputCoords();
        int end = ${M7e(s,"coords",this.op)};
        float val = ${l};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${M7e(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${N7e(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function N7e(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.x, ${r}.y`;if(t===3)return`${r}.x, ${r}.y, ${r}.z`;if(t===4)return`${r}.x, ${r}.y, ${r}.z, ${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function M7e(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.y`;if(t===3)return`${r}.z`;if(t===4)return`${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}re();function HV(t,r,n,o,i,s){let a=r.shape.length,l=ce.getAxesPermutation([o],a),u=r;l!=null&&(u=Go({inputs:{x:r},backend:n,attrs:{perm:l}}));let c=ce.getInnerMostAxes(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${r.shape.length-1} but got axis=${o}`);let f=u.shape[c],d=Mi({inputs:{x:u},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){let h=new DP(t,u.shape,!1,s),m=[[p]],g=d;d=n.runWebGLProgram(h,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(i){let p=new DP(t,u.shape,i,s),h=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(l!=null){let p=ce.getUndoAxesPermutation(l),h=Go({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),h}return d}function d8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return HV($D.Prod,i,n,s,a,l)}var F7e={kernelName:AS,backendName:"webgl",kernelFunc:d8t};re();function p8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return HV($D.Sum,i,n,s,a,l)}var O7e={kernelName:Lb,backendName:"webgl",kernelFunc:p8t};re();function h8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=lV(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=b8e(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var R7e={kernelName:IS,backendName:"webgl",kernelFunc:h8t};re();var YV=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=[],this.outputShape=r,this.blockSize=n,this.dataFormat=o,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function m8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o,l=i.shape[0],u=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],f=a==="NHWC"?i.shape[3]:i.shape[1],d=u*s,p=c*s,h=f/(s*s),m=a==="NHWC"?[l,d,p,h]:[l,h,d,p],g=new YV(m,s,a);return n.runWebGLProgram(g,[i],i.dtype)}var P7e={kernelName:DS,backendName:"webgl",kernelFunc:m8t};re();var zD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=zn(this.outputShape.length);let a=r.filterHeight,l=r.filterWidth,u=r.outChannels/r.inChannels,c="",f="";o&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:c=`
          float activation(float x) {
            ${o}
          }
        `,f="result = activation(result);");let d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${l}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${f}
        setOutput(result);
      }
    `}};re();var UD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=zn(this.outputShape.length);let a=r.outChannels/r.inChannels,l=r.padInfo.left,u=r.strideWidth,c=r.dilationWidth,f=r.filterHeight,d=r.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)h+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;h+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let b=0;b<d;b++)h+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){let x=b*2;if(h+=`
          xC = xCCorner + ${x*c};
          `,u===1){if(x<d&&(l%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?h+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){let v=l%2===0?Y.nearestLargerEven(c):c;c%2===0&&l%2===1||c%2!==0&&l%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:h+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):v===1?h+=`
                    xC${x+1} = xTexelC${x};
                    `:h+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(l%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(h+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(h+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(h+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",g="";o&&(i?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:m=`vec4 activation(vec4 x) {
          ${o}
        }`,g="result = activation(result);");let y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}};function g8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o,f=u;f==null&&(f=[1,1]),Y.assert(ce.eitherStridesOrDilationsAreOne(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);let d=ce.computeConv2DInfo(i.shape,s.shape,a,f,l,c,!0),p;Me().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new UD(d):p=new zD(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",h)}var L7e={kernelName:jb,backendName:"webgl",kernelFunc:g8t};re();var XV=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.outChannels/r.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},KV=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=n-1-r.padInfo.top,l=o-1-r.padInfo.left,u=r.outChannels/r.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function y8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o,d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),p=new XV(d);return n.runWebGLProgram(p,[i,s],"float32")}var j7e={kernelName:NS,backendName:"webgl",kernelFunc:y8t};re();function b8t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o,d=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),p=new KV(d);return n.runWebGLProgram(p,[i,s],"float32")}var B7e={kernelName:MS,backendName:"webgl",kernelFunc:b8t};re();var ZV=class{constructor(r){this.variableNames=["X"],this.outputShape=[r,r],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function x8t(t){let{inputs:r,backend:n}=t,{x:o}=r,i=[...o.shape,...o.shape],s=Y.sizeFromShape(o.shape),a=yt({inputs:{x:o},backend:n,attrs:{shape:[s]}}),l=new ZV(s),u=n.runWebGLProgram(l,[a],a.dtype),c=yt({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),c}var $7e={kernelName:FS,backendName:"webgl",kernelFunc:x8t};re();var QV=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let{inHeight:n,inWidth:o,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:l,filterWidth:u,dilationHeight:c,dilationWidth:f}=r,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${l}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${o}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function v8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeDilation2DInfo(i.shape,s.shape,a,l,"NHWC",u),f,d=new QV(c);f=n.runWebGLProgram(d,[i,s],"float32");let p=yt({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}var z7e={kernelName:Bb,backendName:"webgl",kernelFunc:v8t};re();function w8t(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,h=a.length,m=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(h,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=Go({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);Y.arraysEqual(v.shape,w)||(v=yt({inputs:{x:v},backend:n,attrs:{shape:w}}),m.push(v)),p===null?p=v:(p=kP({inputs:{a:v,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=hE({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var U7e={kernelName:OS,backendName:"webgl",kernelFunc:w8t};re();var _8t="return (x >= 0.0) ? x : (exp(x) - 1.0);",S8t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,C8t=tr({opSnippet:_8t,packedOpSnippet:S8t}),V7e={kernelName:jg,backendName:"webgl",kernelFunc:C8t};re();var E8t="return (b >= 0.0) ? a : a * (b + 1.0);",T8t=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,A8t=t=>{let{inputs:r,backend:n}=t,{dy:o,y:i}=r,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qc(T8t,o.shape,i.shape):new ic(E8t,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],o.dtype)},G7e={kernelName:RS,backendName:"webgl",kernelFunc:A8t};re();var k8t=`
  return vec4(equal(a, b));
`,I8t="return float(a == b);",D8t=Pn({opSnippet:I8t,packedOpSnippet:k8t,dtype:"bool",cpuKernelImpl:S8e}),W7e={kernelName:F1,backendName:"webgl",kernelFunc:D8t};re();var N8t=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ce.ERF_P};
  float a1 = ${ce.ERF_A1};
  float a2 = ${ce.ERF_A2};
  float a3 = ${ce.ERF_A3};
  float a4 = ${ce.ERF_A4};
  float a5 = ${ce.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,M8t=tr({opSnippet:N8t}),q7e={kernelName:Bg,backendName:"webgl",kernelFunc:M8t};re();var F8t=Sp+`
  return exp(x);
`,O8t=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xue=tr({opSnippet:F8t,packedOpSnippet:O8t,cpuKernelImpl:C8e,dtype:"float32"}),H7e={kernelName:$g,backendName:"webgl",kernelFunc:Xue};re();function JV(t){let{inputs:r,attrs:n,backend:o}=t,{dim:i}=n,{input:s}=r,a=s.shape.length,l=s.shape.slice(),u=i;return i<0&&(Y.assert(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+i+1),l.splice(u,0,1),yt({inputs:{x:s},backend:o,attrs:{shape:l}})}var Y7e={kernelName:$b,backendName:"webgl",kernelFunc:JV};re();var X7e="return exp(x) - 1.0;",R8t=tr({opSnippet:X7e,packedOpSnippet:X7e,cpuKernelImpl:E8e}),K7e={kernelName:zg,backendName:"webgl",kernelFunc:R8t};re();re();var NP=class{constructor(r,n,o){this.variableNames=["real","imag"];let i=n[1];this.outputShape=n;let s=o?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=o?`${i}.0`:"1.0",l;if(r==="real")l="return real * expR - imag * expI;";else if(r==="imag")l="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${r}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${l}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function eG(t,r,n){let o=n.texData.get(t.dataId),i=Y.sizeFromShape(t.shape),s=t.shape[t.shape.length-1],a=i/s,l=yt({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),u=l.shape,c=new NP("real",u,r),f=new NP("imag",u,r),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:u},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:u}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(f,d,"float32"),m=sc({inputs:{real:p,imag:h},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h);let g=yt({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),g}function P8t(t){let{inputs:r,backend:n}=t,{input:o}=r;return eG(o,!1,n)}var Z7e={kernelName:PS,backendName:"webgl",kernelFunc:P8t};re();var tG=class{constructor(r,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=r,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function qx(t){let{backend:r,attrs:n}=t,{shape:o,value:i}=n,{dtype:s}=n;if(s=s||Y.inferDtype(i),s==="string"){let a=Y.getArrayFromDType(s,Y.sizeFromShape(o));return a.fill(i),r.makeTensorInfo(o,s,a)}else{let a=new tG(o,i),l=[[i]];return r.runWebGLProgram(a,[],s,l)}}var Q7e={kernelName:LS,backendName:"webgl",kernelFunc:qx};re();var rG=class{constructor(r){this.variableNames=["Image"],this.outputShape=[];let n=r[2];this.outputShape=r,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var J7e={kernelName:jS,backendName:"webgl",kernelFunc:({inputs:t,backend:r})=>{let{image:n}=t,o=r,i=new rG(n.shape);return o.runWebGLProgram(i,[n],n.dtype)}};re();var e9e="return floor(x);",L8t=tr({opSnippet:e9e,packedOpSnippet:e9e,cpuKernelImpl:T8e}),t9e={kernelName:Ug,backendName:"webgl",kernelFunc:L8t};re();var j8t=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,B8t=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,$8t=Pn({opSnippet:j8t,packedOpSnippet:B8t,dtype:"int32"}),r9e={kernelName:Vg,backendName:"webgl",kernelFunc:$8t};re();re();var nG=class{constructor(r){this.variableNames=["A"];let n=li(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${o}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var oG=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=li(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${o}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}};var n9e={kernelName:nI,backendName:"webgl",kernelFunc:z8t},VD,Kue=Me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function z8t(t){let{inputs:r,backend:n,attrs:o}=t,{pixels:i}=r,{numChannels:s}=o,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,u],d=[c,u,s];if(l||a){let g=Me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(VD==null||g!==Kue)&&(Kue=g,VD=document.createElement("canvas").getContext("2d",{willReadFrequently:Kue})),VD.canvas.width=u,VD.canvas.height=c,VD.drawImage(i,0,0,u,c),i=VD.canvas}let p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Fl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);let h=Me().getBool("WEBGL_PACK")?new oG(d):new nG(d),m=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),m}re();function U8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=ce.convertConv2DDataFormat(f),y=ce.computeConv2DInfo(i.shape,s.shape,u,d,c,p,!1,g),b,x=[],v=a!=null,w=l!=null,_=h==="leakyrelu",S=()=>{let E=[i,s],T=(I,k)=>{if(k==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){let F=yt({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return x.push(F),F}return I};if(v&&E.push(T(a,f)),w&&E.push(T(l,f)),_){let I=n.makeTensorInfo([],"float32",Y.createScalarValue(m,"float32"));E.push(I),x.push(I)}return E};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=BV({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:h,preluActivationWeights:l,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&Me().getBool("WEBGL_EXP_CONV")){let E=h?Gx(h,!0):null,T=new BD(y,v,E,w,_),I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],k=S();b=n.runWebGLProgram(T,k,"float32",I)}else if(Me().getBool("WEBGL_CONV_IM2COL"))b=$V({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:h,preluActivationWeights:l,leakyreluAlpha:m});else{let E=h?Gx(h,!1):null,T=new jD(y,v,E,w,_),I=S();b=n.runWebGLProgram(T,I,"float32")}let C=yt({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return x.push(b),x.forEach(E=>n.disposeIntermediateTensorInfo(E)),C}var o9e={kernelName:V1,backendName:"webgl",kernelFunc:U8t};re();function V8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dilations:f,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=o,m=[],g=f;g==null&&(g=[1,1]),Y.assert(ce.eitherStridesOrDilationsAreOne(u,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`);let y=ce.computeConv2DInfo(i.shape,s.shape,u,g,c,d,!0),b=Me().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=p?Gx(p,b):null,v=[i,s],w=a!=null,_=l!=null,S=p==="leakyrelu";if(w&&v.push(a),_&&v.push(l),S){let I=n.makeTensorInfo([],"float32",Y.createScalarValue(h,"float32"));v.push(I),m.push(I)}let C;b?C=new UD(y,w,x,_,S):C=new zD(y,w,x,_,S);let E=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],T=n.runWebGLProgram(C,v,"float32",E);return m.forEach(I=>n.disposeIntermediateTensorInfo(I)),T}var i9e={kernelName:G1,backendName:"webgl",kernelFunc:V8t};re();var iG=class{constructor(r,n,o,i){this.sliceDim=r,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=o;let s=Ur(o.length),a=`
    int index;`;for(let l=0;l<this.sliceDim;l++)a+=`
          index = round(getIndices(coords[0], ${l}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[l]};
          flattenIndex += index * ${this.strides[l]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function G8t(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=i.shape,a=s[s.length-1],l=Y.sizeFromShape(o.shape),[u,c,f,d]=ce.prepareAndValidate(o,i),p=yt({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),h=yt({inputs:{x:o},backend:n,attrs:{shape:[Y.sizeFromShape(o.shape)/f,f]}});if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let b=n.readSync(i.dataId),x=n.bufferSync(o),v=A8e(b,x,o.dtype,c,a,f,d,o.shape,l);return n.makeTensorInfo(u,o.dtype,v.values)}let m=new iG(a,d,[c,f],o.shape),g=n.runWebGLProgram(m,[h,p],h.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}var s9e={kernelName:BS,backendName:"webgl",kernelFunc:G8t};re();var sG=class{constructor(r,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let o=Ur(this.rank),i=W8t(r,2);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${r[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}};function W8t(t,r){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let i=0;i<t.length;i++)i===2?o.push("index"):o.push(`${n[i]}`);return o.join()}function Zue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o,u=Y.parseAxisParam(a,i.shape)[0];if(Me().get("DEBUG")){let x=n.readSync(s.dataId),v=i.shape[u];for(let w=0;w<x.length;++w){let _=x[w];Y.assert(_<=v-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${v-1}]`)}}let c=ce.segment_util.collectGatherOpShapeInfo(i,s,u,l),f=Y.sizeFromShape(s.shape),d=[],p=yt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=yt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});d.push(p),d.push(h);let m=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){let x=n.bufferSync(h),v=n.bufferSync(p),w=k8e(v,x,m);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}let g=new sG(p.shape,m),y=n.runWebGLProgram(g,[p,h],p.dtype);d.push(y);let b=yt({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}var a9e={kernelName:Ub,backendName:"webgl",kernelFunc:Zue};re();var q8t="return float(a > b);",H8t=`
  return vec4(greaterThan(a, b));
`,Y8t=Pn({opSnippet:q8t,packedOpSnippet:H8t,cpuKernelImpl:I8e,dtype:"bool"}),l9e={kernelName:O1,backendName:"webgl",kernelFunc:Y8t};re();var X8t="return float(a >= b);",K8t=`
  return vec4(greaterThanEqual(a, b));
`,Z8t=Pn({opSnippet:X8t,packedOpSnippet:K8t,dtype:"bool",cpuKernelImpl:D8e}),u9e={kernelName:Gg,backendName:"webgl",kernelFunc:Z8t};re();function Q8t(t){let{inputs:r,backend:n}=t,{input:o}=r;return eG(o,!0,n)}var c9e={kernelName:$S,backendName:"webgl",kernelFunc:Q8t};re();var J8t="return float(!isnan(x) && !isinf(x));",eUt=tr({opSnippet:J8t,dtype:"bool"}),f9e={kernelName:Wg,backendName:"webgl",kernelFunc:eUt};re();var tUt="return float(isinf(x));",rUt=tr({opSnippet:tUt,dtype:"bool"}),d9e={kernelName:qg,backendName:"webgl",kernelFunc:rUt};re();var nUt="return float(isnan(x));",oUt=tr({opSnippet:nUt,dtype:"bool"}),p9e={kernelName:Hg,backendName:"webgl",kernelFunc:oUt};re();var iUt="return float(a < b);",sUt=`
  return vec4(lessThan(a, b));
`,aUt=Pn({opSnippet:iUt,packedOpSnippet:sUt,cpuKernelImpl:N8e,dtype:"bool"}),h9e={kernelName:R1,backendName:"webgl",kernelFunc:aUt};re();var lUt="return float(a <= b);",uUt=`
  return vec4(lessThanEqual(a, b));
`,cUt=Pn({opSnippet:lUt,packedOpSnippet:uUt,cpuKernelImpl:M8e,dtype:"bool"}),m9e={kernelName:P1,backendName:"webgl",kernelFunc:cUt};re();function fUt(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=F8e(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var g9e={kernelName:US,backendName:"webgl",kernelFunc:fUt};re();var dUt=Sp+`
  return x < 0.0 ? 0./0. : log(x);
`,pUt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,hUt=tr({opSnippet:dUt,packedOpSnippet:pUt,cpuKernelImpl:O8e}),y9e={kernelName:Yg,backendName:"webgl",kernelFunc:hUt};re();var mUt=Sp+`
  return log(1.0 + x);
`,gUt=tr({opSnippet:mUt}),b9e={kernelName:Xg,backendName:"webgl",kernelFunc:gUt};re();var yUt="return float(a >= 1.0 && b >= 1.0);",bUt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,xUt=Pn({opSnippet:yUt,packedOpSnippet:bUt,dtype:"bool"}),x9e={kernelName:L1,backendName:"webgl",kernelFunc:xUt};re();var vUt="return float(!(x >= 1.0));",wUt=tr({opSnippet:vUt}),v9e={kernelName:j1,backendName:"webgl",kernelFunc:wUt};re();var _Ut="return float(a >= 1.0 || b >= 1.0);",SUt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,CUt=Pn({opSnippet:_Ut,packedOpSnippet:SUt,dtype:"bool"}),w9e={kernelName:B1,backendName:"webgl",kernelFunc:CUt};re();var aG=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[];let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${l}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}};var lG=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${l}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}};var EUt=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o,c=Me().getBool("WEBGL_PACK_NORMALIZATION")?new lG(i.shape,s,a,l,u):new aG(i.shape,s,a,l,u);return n.runWebGLProgram(c,[i],i.dtype)},_9e={kernelName:Gb,backendName:"webgl",kernelFunc:EUt};re();var uG=class{constructor(r,n,o,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=r,this.depth=r[3],this.depthRadius=n,this.bias=o,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${o});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var TUt=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o,d=new uG(i.shape,l,u,c,f);return n.runWebGLProgram(d,[i,s,a],i.dtype)},S9e={kernelName:VS,backendName:"webgl",kernelFunc:TUt};re();re();re();function C9e(t,r,n,o){let i=Y.sizeFromShape(r),a=Y.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=ef(l,t.dtype,"max",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}function Que(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=n.shouldExecuteOnCPU([i]),h=i;if(d){if(p){let v=n.texData.get(h.dataId).values,w=new Array(l);for(let C=0;C<w.length;C++)w[C]=i.shape[f[C]];let _=pE(v,i.shape,i.dtype,f,w);h=n.makeTensorInfo(w,i.dtype);let S=n.texData.get(h.dataId);S.values=_}else h=Pw(i,f,n);c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("max",c,l);let[m,g]=ce.computeOutAndReduceShapes(h.shape,c),y=m;a&&(y=ce.expandShapeToKeepDim(m,u));let b;if(p){let v=n.texData.get(h.dataId).values,w=R8e(v,Y.sizeFromShape(g),y,i.dtype);b=n.makeTensorInfo(y,i.dtype);let _=n.texData.get(b.dataId);_.values=w}else b=C9e(h,g,y,n);return d&&n.disposeIntermediateTensorInfo(h),b}var E9e={kernelName:Wb,backendName:"webgl",kernelFunc:Que};re();var AUt=RD+`
  return max(a, b);
`,kUt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jc+`
  return result;
`,IUt=Pn({opSnippet:AUt,packedOpSnippet:kUt,cpuKernelImpl:P8e}),T9e={kernelName:Kg,backendName:"webgl",kernelFunc:IUt};re();function DUt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;z0(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))return Mi({inputs:{x:i},backend:n});let d=new Hh(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}var A9e={kernelName:qb,backendName:"webgl",kernelFunc:DUt};re();function NUt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,c,u),p=new Lw(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}var k9e={kernelName:Hb,backendName:"webgl",kernelFunc:NUt};re();var cG=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideHeight,o=r.strideWidth,i=r.dilationHeight,s=r.effectiveFilterHeight,a=r.effectiveFilterWidth,l=s-1-r.padInfo.top,u=a-1-r.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},fG=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.dilationDepth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterDepth,c=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=u-1-r.padInfo.front,p=c-1-r.padInfo.top,h=f-1-r.padInfo.left,m=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function MUt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),h=new Lw(p,"max",!0),m=n.runWebGLProgram(h,[a],a.dtype),g=new fG(p),y=n.runWebGLProgram(g,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}var I9e={kernelName:WS,backendName:"webgl",kernelFunc:MUt};re();function FUt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;z0([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),h=!0,m=new Hh(p,"max",h),g=n.runWebGLProgram(m,[l],l.dtype),y=new cG(p),b=n.runWebGLProgram(y,[i,g],l.dtype);return n.disposeIntermediateTensorInfo(g),b}var D9e={kernelName:GS,backendName:"webgl",kernelFunc:FUt};re();re();function N9e(t,r,n,o){let i=new Hh(n,"max",!1),s=o.runWebGLProgram(i,[t],"float32");i=new Hh(n,"max",!0,!0,r);let a=o.runWebGLProgram(i,[t],"float32");return[s,a]}var M9e={kernelName:qS,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;Y.assert(o.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.shape.length}.`);let c=[1,1];Y.assert(ce.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let f=ce.computePool2DInfo(o.shape,i,s,c,a),[d,p]=N9e(o,l,f,u);return[d,p]}};re();re();function F9e(t,r,n,o){let i=Y.sizeFromShape(r),a=Y.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=ef(l,"float32","mean",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}var O9e={kernelName:Yb,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{keepDims:i,axis:s}=r,a=n,l=o.shape.length,u=Y.parseAxisParam(s,o.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=a.shouldExecuteOnCPU([o]),h=[],m=o;if(d){if(p){let w=a.texData.get(m.dataId).values,_=new Array(l);for(let E=0;E<_.length;E++)_[E]=o.shape[f[E]];let S=pE(w,o.shape,o.dtype,f,_);m=a.makeTensorInfo(_,o.dtype);let C=a.texData.get(m.dataId);C.values=S}else m=Pw(o,f,a);h.push(m),c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("sum",c,l);let[g,y]=ce.computeOutAndReduceShapes(m.shape,c),b=g;i&&(b=ce.expandShapeToKeepDim(g,u));let x=F9e(m,y,b,a);for(let v of h)a.disposeIntermediateTensorInfo(v);return x}};re();function OUt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Go({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=Y.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=ef(g,g.dtype,"min",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var R9e={kernelName:Xb,backendName:"webgl",kernelFunc:OUt};re();var RUt=RD+`
  return min(a, b);
`,PUt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jc+`
  return result;
`,LUt=Pn({opSnippet:RUt,packedOpSnippet:PUt,cpuKernelImpl:L8e}),P9e={kernelName:Zg,backendName:"webgl",kernelFunc:LUt};re();var dG=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=n.map((f,d)=>f[0]+r[d]+f[1]);let i=r.length,s=Ur(i),a=n.map(f=>f[0]).join(","),l=n.map((f,d)=>f[0]+r[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=o==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}};var pG=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+r[g]+m[1]);let i=r.length,s=Ur(i),a=n.map(m=>m[0]).join(","),l=n.map((m,g)=>m[0]+r[g]).join(","),u=Ni("rc",i),c=Ni("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=o==="reflect"?0:1,h="";if(i===1){let m=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let m=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${u[i-1]} += 1;
          if(${f}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var jUt=({inputs:t,backend:r,attrs:n})=>{let{x:o}=t,{paddings:i,mode:s}=n,a=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pG(o.shape,i,s):new dG(o.shape,i,s);return r.runWebGLProgram(a,[o],o.dtype)},L9e={kernelName:Kb,backendName:"webgl",kernelFunc:jUt};re();var BUt=`if (b == 0.0) return NAN;
  return mod(a, b);`,$Ut=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Jc+`
  return result;
`,zUt=Pn({opSnippet:BUt,packedOpSnippet:$Ut}),j9e={kernelName:Qg,backendName:"webgl",kernelFunc:zUt};re();var hG=class{constructor(r,n,o){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[r,o],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};re();re();var UUt=`
if (a == b) {
  return 1.0;
};
return a / b;`,VUt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Jue=Pn({opSnippet:UUt,packedOpSnippet:VUt,checkOutOfBounds:!0}),B9e={kernelName:Lg,backendName:"webgl",kernelFunc:Jue};re();var $9e="return a - b;",ece=Pn({opSnippet:$9e,packedOpSnippet:$9e,supportsComplex:!0,cpuKernelImpl:oUe}),z9e={kernelName:h0,backendName:"webgl",kernelFunc:ece};function tce(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=Y.parseAxisParam([s],i.shape),l=Que({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),u=ce.expandShapeToKeepDim(l.shape,a),c=yt({inputs:{x:l},backend:n,attrs:{shape:u}}),f=ece({inputs:{a:i,b:c},backend:n}),d=Xue({inputs:{x:f},backend:n}),p=hE({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),h=yt({inputs:{x:p},backend:n,attrs:{shape:u}}),m=Jue({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}var U9e={kernelName:px,backendName:"webgl",kernelFunc:tce};function GUt(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o,u=l?i:tce({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=u.shape[0],f=u.shape[1],d=new hG(c,f,s),p=[[a]],h=n.runWebGLProgram(d,[u],"int32",p);return l||n.disposeIntermediateTensorInfo(u),h}var V9e={kernelName:HS,backendName:"webgl",kernelFunc:GUt};re();var WUt=vs+`
  return -x;
`,qUt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function HUt(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])){let s=n.texData.get(o.dataId),[a,l]=B8e(s.values,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,a)}let i;return Me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new oc(o.shape,qUt):i=new Ta(o.shape,WUt),n.runWebGLProgram(i,[o],o.dtype)}var G9e={kernelName:Zb,backendName:"webgl",kernelFunc:HUt};re();var YUt=Ca.nonMaxSuppressionV3Impl;function XUt(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d}=YUt(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var W9e={kernelName:YS,backendName:"webgl",kernelFunc:XUt};re();var KUt=Ca.nonMaxSuppressionV4Impl;function ZUt(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:h}=KUt(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var q9e={kernelName:XS,backendName:"webgl",kernelFunc:ZUt};re();var QUt=Ca.nonMaxSuppressionV5Impl;function JUt(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),p=a,h=l,m=u,g=c,{selectedIndices:y,selectedScores:b}=QUt(f,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var H9e={kernelName:KS,backendName:"webgl",kernelFunc:JUt};re();var mG=class{constructor(r,n,o,i){this.variableNames=["indices"],this.outputShape=[r,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${o}),
                      float(index == coords.y)));
      }
    `}};var e7t=t=>{let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o,c=Y.sizeFromShape(i.shape),f=new mG(c,a,l,u),d=yt({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[d],s);n.disposeIntermediateTensorInfo(d);let h=[...i.shape,a],m=yt({inputs:{x:p},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),m},Y9e={kernelName:Jb,backendName:"webgl",kernelFunc:e7t};re();re();function MP(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="complex64"){let i=Wx({inputs:{input:o},backend:n}),s=MP({inputs:{x:i},backend:n}),a=gE({inputs:{input:o},backend:n}),l=MP({inputs:{x:a},backend:n}),u=sc({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return qx({attrs:{shape:o.shape,dtype:o.dtype,value:o.dtype==="string"?"":0},backend:n})}var X9e={kernelName:gx,backendName:"webgl",kernelFunc:MP};function K9e(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(o.dtype==="complex64"){let i=Wx({inputs:{input:o},backend:n}),s=K9e({inputs:{x:i},backend:n}),a=gE({inputs:{input:o},backend:n}),l=MP({inputs:{x:a},backend:n}),u=sc({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return qx({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:n})}var Z9e={kernelName:Qb,backendName:"webgl",kernelFunc:K9e};re();function t7t(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return JV({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{Y.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),Y.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=JV({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=Yue({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var Q9e={kernelName:ex,backendName:"webgl",kernelFunc:t7t};re();var gG=class{constructor(r,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+r[f]+c[1]);let i=r.length,s=Ur(i),a=n.map(c=>c[0]).join(","),l=n.map((c,f)=>c[0]+r[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}};var yG=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+r[y]+g[1]);let i=r.length,s=Ur(i),a=n.map(g=>g[0]).join(","),l=n.map((g,y)=>g[0]+r[y]).join(","),u=Ni("rc",i),c=Ni("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${f}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${f}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="";for(let g=0,y=i===1?2:4;g<y;g++)m+=`
        ${p[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var rce=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;if(Y.sizeFromShape(i.shape)===0){let c=s.map((f,d)=>f[0]+i.shape[d]+f[1]);return qx({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}let l=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yG(i.shape,s,a):new gG(i.shape,s,a),u=[[a]];return n.runWebGLProgram(l,[i],i.dtype,u)},J9e={kernelName:tx,backendName:"webgl",kernelFunc:rce};re();var r7t=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n7t=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Jc+`
  return result;
`,o7t=Pn({opSnippet:r7t,packedOpSnippet:n7t}),eVe={kernelName:e0,backendName:"webgl",kernelFunc:o7t};re();function i7t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=[],c=Y.parseAxisParam(s,i.shape),f=c,d=ce.getAxesPermutation(f,l),p=i;d!=null&&(p=Go({inputs:{x:i},backend:n,attrs:{perm:d}}),f=ce.getInnerMostAxes(f.length,l),u.push(p)),ce.assertAxesAreInnerMostDims("prod",f,l);let h;if(n.shouldExecuteOnCPU([p])){let m=n.texData.get(p.dataId).values,{outVals:g,outShape:y,outDtype:b}=z8e(p.shape,p.dtype,m,f);h=n.makeTensorInfo(y,b,g)}else{let[m,g]=ce.computeOutAndReduceShapes(p.shape,f),y=Y.sizeFromShape(g),b=yt({inputs:{x:p},backend:n,attrs:{shape:[-1,y]}}),x=H1(i.dtype),v=ef(b,x,"prod",n);h=yt({inputs:{x:v},backend:n,attrs:{shape:m}}),u.push(b),u.push(v)}if(a){u.push(h);let m=ce.expandShapeToKeepDim(h.shape,c);h=yt({inputs:{x:h},backend:n,attrs:{shape:m}})}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var tVe={kernelName:nx,backendName:"webgl",kernelFunc:i7t};re();function s7t(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.readSync(b.dataId)),c=i.map(b=>b.shape),f=n.readSync(s.dataId),d=n.readSync(a.dataId),[p,h,m]=U8e(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return g.concat([y])}var rVe={kernelName:ZS,backendName:"webgl",kernelFunc:s7t};re();function a7t(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=V8e(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var nVe={kernelName:QS,backendName:"webgl",kernelFunc:a7t};re();function l7t(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=n.readSync(a.dataId),p=l.map(y=>n.readSync(y.dataId)),h=l.map(y=>y.shape),[m,g]=G8e(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,h,u);return n.makeTensorInfo(m,s.dtype,g)}var oVe={kernelName:JS,backendName:"webgl",kernelFunc:l7t};re();var nce=t=>{let{backend:r,attrs:n}=t,{start:o,stop:i,step:s,dtype:a}=n,l=W8e(o,i,s,a);return r.makeTensorInfo([l.length],a,l)},iVe={kernelName:eC,backendName:"webgl",kernelFunc:nce};re();var u7t="return 1.0 / x;",c7t=tr({opSnippet:u7t}),sVe={kernelName:t0,backendName:"webgl",kernelFunc:c7t};re();var f7t=vs+`
  return (x < 0.0) ? 0.0 : x;
`,d7t=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,p7t=tr({opSnippet:f7t,packedOpSnippet:d7t}),aVe={kernelName:r0,backendName:"webgl",kernelFunc:p7t};re();var h7t=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,m7t=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,g7t=tr({opSnippet:h7t,packedOpSnippet:m7t}),lVe={kernelName:n0,backendName:"webgl",kernelFunc:g7t};re();var bG=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var xG=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function y7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xG(i.shape,u,c,s,a):new bG(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],"float32")}var uVe={kernelName:sx,backendName:"webgl",kernelFunc:y7t};re();var vG=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function b7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new vG(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var cVe={kernelName:nC,backendName:"webgl",kernelFunc:b7t};re();var wG=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var _G=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function x7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _G(i.shape,u,c,s,a):new wG(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],i.dtype)}var fVe={kernelName:ix,backendName:"webgl",kernelFunc:x7t};re();var SG=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${o} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${o} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function v7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new SG(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var dVe={kernelName:rC,backendName:"webgl",kernelFunc:v7t};re();var CG=class{constructor(r,n){this.variableNames=["x"];let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);if(this.outputShape=r,o===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${r[0]} - coord - 1));
        }
      `;return}let i=l=>n.indexOf(l)!==-1&&r[l]!==1?`${r[l]} - coords[${l}] - 1`:`coords[${l}]`,s=r.map((l,u)=>i(u)).join(","),a=Ur(o);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};var EG=class{constructor(r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);this.outputShape=r;let i=Ni("rc",o),s=`${i[o-1]} + 1 < ${this.outputShape[o-1]}`,a=`${i[o-2]} + 1 < ${this.outputShape[o-2]}`,l=Ur(o);o===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${r[0]} - rc - 1),
            ${r[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${r[0]} - (rc  + 1) - 1),
                ${r[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${f(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(m){return p(m)}function c(m){return m[o-1]="("+m[o-1]+" + 1)",p(m)}function f(m){return m[o-2]="("+m[o-2]+" + 1)",p(m)}function d(m){return m[o-1]="("+m[o-1]+" + 1)",m[o-2]="("+m[o-2]+" + 1)",p(m)}function p(m){let g=r.map((x,v)=>h(v,m)),y=g.join(","),b=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function h(m,g){return n.indexOf(m)!==-1&&r[m]!==1?`${r[m]} - ${g[m]} - 1`:`${g[m]}`}}};function w7t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o,a=i.shape.length,l=Y.parseAxisParam(s,i.shape);if(a===0)return Mi({inputs:{x:i},backend:n});let u=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EG(i.shape,l):new CG(i.shape,l);return n.runWebGLProgram(u,[i],i.dtype)}var pVe={kernelName:ax,backendName:"webgl",kernelFunc:w7t};re();re();var TG=class{constructor(r,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let o=r[1],i=r[2];this.outputShape=r;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${o}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var hVe={kernelName:vC,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=new TG(o.shape,s),[c,f]=ce.getImageCenter(a,o.shape[1],o.shape[2]),d=[[c,f,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(u,[o],o.dtype,d)}};re();var _7t=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,S7t=tr({opSnippet:_7t}),mVe={kernelName:o0,backendName:"webgl",kernelFunc:S7t};re();var C7t="return inversesqrt(x);",E7t=tr({opSnippet:C7t,cpuKernelImpl:q8e}),gVe={kernelName:i0,backendName:"webgl",kernelFunc:E7t};re();var jw=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let c=Ur(s.length),f=Ur(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,h="";i===1?h="i":i===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${r}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}};var AG=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let c=Ur(s.length),f=Ur(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,h="";i===1?h="i":i===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${r}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}};function T7t(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=[d/c,c];if(d===0)return n.makeTensorInfo(a,i.dtype);let h=yt({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=yt({inputs:{x:s},backend:n,attrs:{shape:[u,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y;Me().getBool("WEBGL_PACK")?y=new AG(u,l,h.shape.length,m.shape.length,f,p):y=new jw(u,l,h.shape.length,m.shape.length,f,p);let b=n.runWebGLProgram(y,[m,h,g],m.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),x}var yVe={kernelName:oC,backendName:"webgl",kernelFunc:T7t};re();re();var kG=class{constructor(r,n,o,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[r,o];let s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,l=Me().getNumber("WEBGL_VERSION")===2?s:a,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${l}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function A7t(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=new kG(i.shape[0],i.shape[1],s.shape[1],a),u=[[i.shape[1]]];return n.runWebGLProgram(l,[i,s],"int32",u)}var bVe={kernelName:sC,backendName:"webgl",kernelFunc:A7t};re();var IG=class{constructor(r,n,o){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(o>4)throw Error(`Where for rank ${o} is not yet supported`);if(o===1)s="resRC",i="resRC";else{let l=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],c=[];for(let f=0;f<n.length;f++)c.push(`${l[f]}`),f<r&&u.push(`${l[f]}`);i=u.join(),s=c.join()}let a=Ur(o);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}};function k7t(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r,a=new IG(o.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[o,i,s],Gi(i.dtype,s.dtype))}var xVe={kernelName:lx,backendName:"webgl",kernelFunc:k7t};re();var I7t=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${ce.SELU_SCALEALPHA};
  float scale = ${ce.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,D7t=tr({opSnippet:I7t}),vVe={kernelName:s0,backendName:"webgl",kernelFunc:D7t};re();var N7t=Sp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,M7t=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,F7t=tr({opSnippet:N7t,packedOpSnippet:M7t,cpuKernelImpl:Y8e}),wVe={kernelName:c0,backendName:"webgl",kernelFunc:F7t};re();var O7t=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,R7t=tr({opSnippet:O7t}),_Ve={kernelName:u0,backendName:"webgl",kernelFunc:R7t};re();var P7t=Sp+`
  return sin(x);
`,L7t=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Jc}
  return result;
`,j7t=tr({opSnippet:P7t,packedOpSnippet:L7t}),SVe={kernelName:a0,backendName:"webgl",kernelFunc:j7t};re();var B7t=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,$7t=tr({opSnippet:B7t}),CVe={kernelName:l0,backendName:"webgl",kernelFunc:$7t};re();var z7t=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,U7t=tr({opSnippet:z7t}),EVe={kernelName:f0,backendName:"webgl",kernelFunc:U7t};re();var V7t=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;Y.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((b,x)=>b*x),u=[[0,0]];u.push(...a);for(let b=1+s.length;b<i.shape.length;++b)u.push([0,0]);let c=[],f=rce({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),d=ce.getReshaped(f.shape,s,l,!1),p=ce.getPermuted(d.length,s.length,!1),h=ce.getReshapedPermuted(f.shape,s,l,!1),m=yt({inputs:{x:f},backend:n,attrs:{shape:d}}),g=Go({inputs:{x:m},backend:n,attrs:{perm:p}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:h}});return c.push(f),c.push(m),c.push(g),c.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},TVe={kernelName:fx,backendName:"webgl",kernelFunc:V7t};re();function G7t(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.readSync(o.dataId),u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId)[0],[d,p,h,m,g]=K8e(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var AVe={kernelName:aC,backendName:"webgl",kernelFunc:G7t};re();function W7t(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.readSync(i.dataId)),l=n.readSync(o.dataId),u=Array.from(n.readSync(s.dataId)),[c,f,d]=Z8e(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var kVe={kernelName:lC,backendName:"webgl",kernelFunc:W7t};re();function q7t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=cV(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var IVe={kernelName:uC,backendName:"webgl",kernelFunc:q7t};re();function H7t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=cV(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var DVe={kernelName:cC,backendName:"webgl",kernelFunc:H7t};re();function Y7t(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),h=!1;if(s.dtype==="string"){let b=n.bufferSync(i),x=n.bufferSync(s),v=Y.decodeString(n.readSync(a.dataId)[0]),w=H8e(b,x,l,p,f,c,u,d,v,h);return n.makeTensorInfo(l,w.dtype,w.values)}let m=new jw(c,u,i.shape.length,s.shape.length,d,[p,1],h),g=n.runWebGLProgram(m,[s,i,a],s.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(g),y}var NVe={kernelName:fC,backendName:"webgl",kernelFunc:Y7t};re();function X7t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=Y.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=i.shape.length,f=new Array(c).fill(0),d=i.shape.slice();return u.map(p=>{let h=[...d];h[l]=p;let m=Yh({inputs:{x:i},backend:n,attrs:{begin:f,size:h}});return f[l]+=p,m})}var MVe={kernelName:dx,backendName:"webgl",kernelFunc:X7t};re();var FVe="return sqrt(x);",K7t=tr({opSnippet:FVe,packedOpSnippet:FVe,cpuKernelImpl:Q8e}),OVe={kernelName:d0,backendName:"webgl",kernelFunc:K7t};re();var Z7t="return x * x;",Q7t=tr({opSnippet:Z7t}),RVe={kernelName:dC,backendName:"webgl",kernelFunc:Q7t};re();var PVe="return (a - b) * (a - b);",J7t=Pn({opSnippet:PVe,packedOpSnippet:PVe}),LVe={kernelName:p0,backendName:"webgl",kernelFunc:J7t};re();function e9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;if(i.dtype!=="string")throw new Error("Input must be of datatype string");let s=n.readSync(i.dataId),a=ce.fromUint8ToStringArray(s),l=J8e(a,"string",o);return n.makeTensorInfo(i.shape,"string",l)}var jVe={kernelName:z1,backendName:"webgl",kernelFunc:e9t};re();function t9t({inputs:t,attrs:r,backend:n}){let{x:o}=t,i=vs+`
    return x > 0.0 ? 1.0 : float(${r.alpha});
  `,s=new Ta(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}var BVe={kernelName:y0,backendName:"webgl",kernelFunc:t9t};re();var DG=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=o;let i=o.length,s=Ur(o.length),a=Ur(o.length),l="";if(i===1)l="coords * strides + begin";else{let u=0;l=o.map((c,f)=>(u++,o.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${u-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${r});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${l}));
      }
    `}};function r9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Rs.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=yt({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||b){Y.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let C=Rs.computeOutShape(x,v,w),E=Yh({inputs:{x:i},backend:n,attrs:{begin:x,size:C}});_=yt({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([i])){let E=n.readSync(i.dataId),T=er(i.shape,i.dtype,E),I=eUe(h,T,w,x);_=n.makeTensorInfo(m,i.dtype,I.values)}else{let E=new DG(x,w,h);_=n.runWebGLProgram(E,[i],i.dtype)}let S=yt({inputs:{x:_},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(_),S}var $Ve={kernelName:pC,backendName:"webgl",kernelFunc:r9t};re();function n9t(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.readSync(f.dataId),h=n.readSync(d.dataId),[m,g]=tUe(p,h,i,s,a,l,u,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var zVe={kernelName:hC,backendName:"webgl",kernelFunc:n9t};re();function o9t(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.readSync(s.dataId),u=n.readSync(a.dataId)[0],[c,f,d]=rUe(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var UVe={kernelName:mC,backendName:"webgl",kernelFunc:o9t};re();function i9t(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.readSync(s.dataId),l=nUe(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var VVe={kernelName:gC,backendName:"webgl",kernelFunc:i9t};re();var s9t="return tan(x);",a9t=tr({opSnippet:s9t}),GVe={kernelName:m0,backendName:"webgl",kernelFunc:a9t};re();var l9t=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,u9t=tr({opSnippet:l9t}),WVe={kernelName:g0,backendName:"webgl",kernelFunc:u9t};re();function c9t(t){let{inputs:r,backend:n,attrs:o}=t,{tensor:i,indices:s,updates:a}=r,{}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(a,s,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);let h=yt({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),m=yt({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),g=yt({inputs:{x:i},backend:n,attrs:{shape:p}}),y=new jw(u,l,h.shape.length,m.shape.length,f,p,!1,!0),b=n.runWebGLProgram(y,[m,h,g],g.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}var qVe={kernelName:iC,backendName:"webgl",kernelFunc:c9t};re();var NG=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[a]*n[a];this.outputShape=o,this.rank=o.length;let i=Ur(this.rank),s=f9t(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}};function f9t(t){let r=t.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(r===1)return`imod(resRC, ${t[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],o=[];for(let i=0;i<t.length;i++)o.push(`imod(${n[i]}, ${t[i]})`);return o.join()}function oce(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;if(i.dtype==="string"||i.shape.length>5){let u=n.readSync(i.dataId),c=i.dtype==="string"?u.map(p=>Y.decodeString(p)):u,f=er(i.shape,i.dtype,c),d=iUe(f,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}let a=new NG(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var HVe={kernelName:Th,backendName:"webgl",kernelFunc:oce};re();var MG=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=r,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},FG=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=r,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function yE(t,r){r!==null&&t.disposeIntermediateTensorInfo(r)}function YVe(t){let r=1;for(;r<t;)r*=2;return r}function d9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o,l=Me().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Me().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([i])||f<l||s>u){let I=n.readSync(i.dataId),[k,F]=sUe(I,c,i.dtype,s,a);return[n.makeTensorInfo(k.shape,k.dtype,k.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[i,qx({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,h=p?n.unpackTensor(i):i,g=Y.sizeFromShape(c)/f,y=yt({inputs:{x:h},attrs:{shape:[g,f]},backend:n});p&&yE(n,h);let b=YVe(s),x=YVe(f),v=null,w=()=>v===null?[y,y]:[y,v],_=(I,k,F)=>{let D=w(),L=new MG(F),R=[[f],[v===null?1:0],[Number.NEGATIVE_INFINITY],[I],[k]],V=v;v=n.runWebGLProgram(L,D,"int32",R),yE(n,V)};for(let I=1;I<b;I*=2){let k=I*2;for(let F=I;F>=1;F/=2)_(k,F,[g,x])}for(let I=x;I>b;I/=2){let k=w(),F=new FG([g,I/2]),L=[[f],[v===null?1:0],[b]],P=v;v=n.runWebGLProgram(F,k,"int32",L),yE(n,P);let R=b/2,V=R*2;for(let G=R;G>=1;G/=2)_(V,G,v.shape)}let S=v;v=Yh({inputs:{x:v},backend:n,attrs:{begin:0,size:[g,s]}}),yE(n,S);let C=Zue({inputs:{x:y,indices:v},backend:n,attrs:{axis:1,batchDims:1}});yE(n,y);let E=c.slice(0,-1);E.push(s),S=v,v=yt({inputs:{x:v},attrs:{shape:E},backend:n}),yE(n,S);let T=C;return C=yt({inputs:{x:C},attrs:{shape:E},backend:n}),yE(n,T),[C,v]}var XVe={kernelName:yC,backendName:"webgl",kernelFunc:d9t};re();var OG=class{constructor(r,n,o,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;let l=o==="nearest"?1:2,u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${r} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${r}));

                if (${l} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function p9t(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=o,[f,d,p,h]=i.shape,[m,g]=c??[d,p],y=[f,m,g,h],b=new OG(d,p,a,l,u,y);return n.runWebGLProgram(b,[i,s],"float32")}var KVe={kernelName:bC,backendName:"webgl",kernelFunc:p9t};re();function h9t(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;z0(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let a=o.readSync(s.dataId),{outputValues:l,outputShape:u,indices:c}=aUe(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var ZVe={kernelName:xC,backendName:"webgl",kernelFunc:h9t};re();function m9t(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i,l=a.shape.length,u=i.shape[s],c=new Array(l-1),f=0;for(let g=0;g<l;g++)g!==s&&(c[f++]=a.shape[g]);let d=[],p=new Array(l).fill(0),h=a.shape.slice();h[s]=1;let m=new Array(u);for(let g=0;g<m.length;g++){p[s]=g;let y=Yh({inputs:{x:a},backend:n,attrs:{begin:p,size:h}}),b=yt({inputs:{x:y},backend:n,attrs:{shape:c}});m[g]=b,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var QVe={kernelName:hx,backendName:"webgl",kernelFunc:m9t};re();var RG=class{constructor(r,n){this.variableNames=["x","segmentIds"];let o=r.windowSize,i=r.batchSize,s=r.inSize,a=r.numSegments,l=a*Math.ceil(s/o);this.outputShape=[i,l];let u="0.0",c="sumValue",f=Math.floor(o/4)*4,d=o%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";s%o>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${o}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function g9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o,l=i.shape.length,u=[],c=0,f=ce.getAxesPermutation([c],l),d=i;f!=null&&(d=Go({inputs:{x:i},backend:n,attrs:{perm:f}}),u.push(d),c=ce.getInnerMostAxes(1,l)[0]);let p=ce.segment_util.computeOutShape(d.shape,c,a),h=Y.sizeFromShape([d.shape[c]]),m=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(m);let g=H1(i.dtype),y=(w,_,S,C,E)=>{let T=w.shape[0],I=w.shape[1],k=ce.segment_util.segOpComputeOptimalWindowSize(I,E),F={windowSize:k,inSize:I,batchSize:T,numSegments:E},D=new RG(F,_),L=n.compileAndRun(D,[w,S],C);if(u.push(L),L.shape[1]===E)return L;let P=nce({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),R=oce({inputs:{x:P},backend:n,attrs:{reps:[I/k]}});return u.push(P),u.push(R),y(L,_,R,C,E)},b=y(m,"unsortedSegmentSum",s,g,a),x=yt({inputs:{x:b},backend:n,attrs:{shape:p}}),v=x;if(f!=null){u.push(x);let w=ce.getUndoAxesPermutation(f);v=Go({inputs:{x:v},backend:n,attrs:{perm:w}})}return u.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}var JVe={kernelName:mx,backendName:"webgl",kernelFunc:g9t};var y9t=[RUe,LUe,jUe,BUe,zUe,UUe,VUe,GUe,HUe,YUe,XUe,KUe,ZUe,QUe,JUe,e7e,t7e,r7e,n7e,o7e,i7e,a7e,l7e,u7e,c7e,h7e,g7e,y7e,EUe,x7e,w7e,_7e,S7e,C7e,E7e,T7e,A7e,k7e,I7e,D7e,F7e,O7e,R7e,P7e,L7e,j7e,B7e,$7e,z7e,U7e,V7e,G7e,W7e,q7e,H7e,Y7e,K7e,Z7e,Q7e,J7e,t9e,r9e,n9e,o9e,i9e,s9e,a9e,l9e,u9e,CUe,c9e,v7e,f9e,d9e,p9e,TUe,h9e,m9e,g9e,y9e,b9e,x9e,v9e,w9e,_9e,S9e,E9e,T9e,A9e,k9e,I9e,D9e,M9e,O9e,R9e,P9e,L9e,j9e,V9e,IUe,G9e,W9e,q9e,H9e,f7e,Y9e,Z9e,Q9e,J9e,eVe,AUe,tVe,rVe,nVe,oVe,iVe,d7e,B9e,sVe,aVe,lVe,NUe,uVe,cVe,fVe,dVe,pVe,hVe,mVe,gVe,yVe,bVe,xVe,vVe,wVe,_Ve,SVe,CVe,s7e,U9e,EVe,TVe,AVe,kVe,IVe,DVe,NVe,MVe,OVe,RVe,LVe,jVe,BVe,$Ve,zVe,UVe,VVe,z9e,FUe,GVe,WVe,qVe,HVe,XVe,KVe,OUe,ZVe,QVe,JVe,X9e];for(let t of y9t)iI(t);re();var iCt=Pc(tGe());var PG=class{constructor(r,n,o,i,s){this.p=r,this.background=n,this.ground=o,this.w=i,this.y=s}drawBackground(){let r=Math.round(this.w/this.background.width)+1;for(let n=0;n<r;n++)this.p.image(this.background,this.background.width*n,this.y-this.ground.height-this.background.height)}drawGround(){let r=Math.round(this.w/this.ground.width)+1;for(let n=0;n<r;n++)this.p.image(this.ground,this.ground.width*n,this.y-this.ground.height)}};var LG=class{constructor(r,n,o,i,s,a){this.p=r,this.upPipe=n,this.downPipe=o,this.w=i,this.h=s,this.minBottom=0,this.maxBottom=0,this.yBottom=0,this.distancePipe=420,this.x=0,this.velocity=5,this.targetX=0,this.targetY=0,this.minBottom=this.h-480,this.maxBottom=this.h-140,this.yBottom=r.random(this.minBottom,this.maxBottom),this.x=a}draw(){let r=this.yBottom-this.distancePipe,n=0-this.downPipe.height+r;if(r>0){let o=Math.round(r/this.downPipe.height)+1;for(let i=0;i<o;i++)n*i>0?this.p.image(this.downPipe,this.x,n*i):this.p.image(this.downPipe,this.x,n)}this.p.image(this.downPipe,this.x,this.yBottom),this.p.image(this.upPipe,this.x,this.yBottom-this.distancePipe),this.targetY=this.yBottom-70,this.targetX=this.x+65,this.image=this.downPipe,this.x=this.x-this.velocity}isOffscreen(r){let n=!1;if(this.x+this.downPipe.width<-10){let i=r.sort((s,a)=>s.x<a.x?1:s.x>a.x?-1:0)[0].x+400;this.x=i,this.yBottom=this.p.random(this.minBottom,this.maxBottom),n=!0}return n}isOffscreenScore(r){return this.targetX>r?1:0}};var jG=class{constructor(r,n,o,i,s=-5){this.p=r,this.bird=n,this.ground=o,this.height=i,this.isAlive=!0,this.x=70,this.y=0,this.gravity=.9,this.velocity=0,this.score=0,this.generation=0,this.isAlive=!0,this.y=window.innerHeight/2-170,this.jumpForce=s}update(r){let n=this.getNearObstacle(r),o=0,i=0;n?.targetX>this.x?i=n?.targetX-this.x:i=this.x-n?.targetX,n?.targetY<this.y?o=n?.targetY-this.y:o=this.y-n?.targetY,this.fall(i,o),this.p.image(this.bird,this.x,this.y)}fall(r,n){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.score=this.score-r-n}getNearObstacle(r){return r.filter(o=>o.x>=this.x+this.bird.width).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0]}hits(r){let o=r.filter(i=>i.x<this.x+this.bird.width).sort((i,s)=>i.x<s.x?-1:i.x>s.x?1:0)[0];return(this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y+this.bird.height>o.yBottom+10||this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y<o.yBottom-180)&&(this.isAlive=!1),!1}isOffScreen(){(this.y+this.bird.height<0||this.y>this.height-this.ground.height)&&(this.isAlive=!1)}jump(){this.velocity+=this.jumpForce,this.velocity*=.9}info(r){let n=r.filter(o=>o.targetX>=this.x).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0];return{agentY:this.y,targetY:n?.targetY}}};var oCt=Pc(nCt());var p3r=["vis"],Fre=(()=>{let r=class r{set settings(o){this._settingsValue!==o&&(this._settingsValue=o,this._tensorflowSettings.next(o))}constructor(){this.modelTrainned=new Ys,this._tensorflowSettings=new Hs(null),this._settingsValue=null}ngAfterViewInit(){this._tensorflowSettings.pipe(gi(o=>je(this,null,function*(){o&&this.container&&this.container.nativeElement&&(yield this.initializeModel(o))}))).subscribe()}initializeModel(o){return je(this,null,function*(){yield Yoe();let{inputs:i,labels:s,mainLayers:a,finalLayer:l}=o,u=Math.floor(i.length*.9),c=i.slice(0,u),f=i.slice(u),d=s.slice(0,u),p=s.slice(u),h=Ti(c),m=Ti(f),g=Ti(d),y=Ti(p);this.model=wae(),a.forEach(v=>this.model.add(v)),this.model.add(l),this.model.compile(o.compiler);let b={name:"show.fitCallbacks",tab:"Training",drawArea:this.container.nativeElement},x={onTrainEnd:()=>{this.modelTrainned.emit(this.model)}};yield Pe(()=>{this.model.fit(h,g,Is(Gt({},o.fit),{validationData:[m,y],callbacks:[oCt.show.fitCallbacks(b,["loss","acc"]),x]}))})})}ngOnDestroy(){this.modelTrainned.complete(),this.modelTrainned.unsubscribe(),this._tensorflowSettings.complete(),this._tensorflowSettings.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=os({type:r,selectors:[["app-tensorflow-visualization"]],viewQuery:function(i,s){if(i&1&&zc(p3r,7),i&2){let a;za(a=Ua())&&(s.container=a.first)}},inputs:{settings:"settings"},outputs:{modelTrainned:"modelTrainned"},standalone:!0,features:[is],decls:3,vars:0,consts:[["vis",""],[1,"container"]],template:function(i,s){i&1&&(Ei(0,"div",1),$a(1,"div",null,0),Ui())},styles:[".container[_ngcontent-%COMP%]{background:#fff;width:100%;height:100%;margin-top:40px}"]});let t=r;return t})();var h3r=["canvas"];function m3r(t,r){if(t&1){let n=vh();Ei(0,"app-tensorflow-visualization",3),$c("modelTrainned",function(i){gh(n);let s=td();return yh(s.modelTrainned(i))}),Ui()}if(t&2){let n=td();ru("settings",n.settings)}}var _Te=function(t){return t[t.Nothing=0]="Nothing",t[t.Jump=1]="Jump",t}(_Te||{}),sCt=(()=>{let r=class r{get model(){return this._model.getValue()}set model(o){this._model.getValue()!==o&&this._model.next(o)}constructor(){this.screenYSize=window.innerHeight,this.data=[],this.inputs=[],this.labels=[],this._model=new Hs(null),this.model$=this._model.asObservable().pipe(xb(),ER({bufferSize:1,refCount:!0})),this.nextYellowPointX=0,this.birdX=0,this.scorePipes=0,this.obstacles=[],this.width=window.innerWidth,this.height=window.innerHeight;let o=this.creatingDataToTraining();this.settingTensorflow()}ngOnInit(){this.canvas,this._model.subscribe(o=>{o&&(this.p=new iCt.default(this.sketch.bind(this)))})}sketch(o){o.setup=()=>this.setup(o),o.draw=()=>this.draw(o)}setup(o){let i=o.loadImage("assets/bg.png"),s=o.loadImage("assets/ground.png");this.upPipe=o.loadImage("assets/pipeUp.png"),this.downPipe=o.loadImage("assets/pipeDown.png");let a=o.loadImage("assets/bird.png");this.background=new PG(o,i,s,this.width,this.height),this.initObstacles(o,this.upPipe,this.downPipe),o.createCanvas(this.width,this.height,this.canvas.nativeElement),this.bird=new jG(o,a,s,this.height)}draw(o){o.background(111,197,206),this.background.drawBackground(),this.obstacles.forEach(h=>{h.draw(),h.isOffscreen(this.obstacles)&&(this.scorePipes+=1)}),this.bird.update(this.obstacles);let{agentY:i,targetY:s}=this.bird.info(this.obstacles),a=Ti([[i,s]]),l=this.model?.predict(a),f=qc(l,1).arraySync()[0];["Nothing","JUMP"][f]==="JUMP"&&this.bird.jump(),o.textSize(20),o.text(`Score (Pipe counter): ${this.scorePipes}`,10,110),this.background.drawGround()}initObstacles(o,i,s){this.obstacles=[];let a=400;for(let l=0;l<10;l++)this.obstacles.push(new LG(o,i,s,this.width,this.height,this.width+a*l))}settingTensorflow(){this.inputs=this.data.map(o=>[o.yAgent,o.yTarget]),this.labels=this.data.map(o=>Number(o.action)),this.settings={compiler:{optimizer:fp.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:512,epochs:5},inputs:this.inputs,labels:this.labels,mainLayers:[Mw.dense({units:32,activation:"relu",inputShape:[2]})],finalLayer:Mw.dense({units:2,activation:"softmax"})}}creatingDataToTraining(){for(let o=0;o<this.screenYSize;o+=5)for(let i=0;i<this.screenYSize;i+=5)i<o?this.data.push({yAgent:i,yTarget:o,action:_Te.Nothing}):this.data.push({yAgent:i,yTarget:o,action:_Te.Jump});return JSON.stringify(this.data)}modelTrainned(o){this.model=o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=os({type:r,selectors:[["app-flappy-bird-supervised"]],viewQuery:function(i,s){if(i&1&&zc(h3r,7),i&2){let a;za(a=Ua())&&(s.canvas=a.first)}},standalone:!0,features:[is],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(Ei(0,"div"),Jf(1,m3r,1,1,"app-tensorflow-visualization",1),$a(2,"canvas",2,0),Ui()),i&2&&(Al(),ru("ngIf",!s.model),Al(),ru("width",0))},dependencies:[od,Rz,Fre],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block;width:100%;height:100%}"]});let t=r;return t})();var Oa=Pc(aCt());var lCt=t=>t*(180/Math.PI),uCt=t=>t*(Math.PI/180);var g3r=["canvas"];function y3r(t,r){if(t&1){let n=vh();Ei(0,"app-tensorflow-visualization",3),$c("modelTrainned",function(i){gh(n);let s=td();return yh(s.modelTrainned(i))}),Ui()}if(t&2){let n=td();ru("settings",n.settings)}}var iR=function(t){return t[t.NoRotate=0]="NoRotate",t[t.LeftRotate=1]="LeftRotate",t[t.RightRotate=2]="RightRotate",t}(iR||{}),cCt=(()=>{let r=class r{get starShipAngle(){return this.starShip.angle}get starShipX(){return parseInt(this.starShip.position.x.toPrecision(3))}get starShipY(){return parseInt(this.starShip.position.y.toPrecision(3))}get landingPlatformY(){return parseInt(this.landingPlatform.position.y.toPrecision(3))}get landingPlatformX(){return parseInt(this.landingPlatform.position.x.toPrecision(3))}get model(){return this._model.getValue()}set model(o){this._model.getValue()!==o&&this._model.next(o)}constructor(){this.data=[],this.inputs=[],this.labels=[],this.width=window.innerWidth,this.height=window.innerHeight,this.Engine=Oa.default.Engine,this.Render=Oa.default.Render,this.Runner=Oa.default.Runner,this.Bodies=Oa.default.Bodies,this.Composite=Oa.default.Composite,this.maxSpeedCollision=0,this._model=new Hs(null),this.model$=this._model.asObservable().pipe(xb(),ER({bufferSize:1,refCount:!0})),u9("/assets/model/startship_landing_model.json").then(o=>{o?this._model.next(o):(this.dataBuilder(),this.settingTensorflow())}),this.model$.pipe(gi(o=>{o&&this.draw()})).subscribe()}ngAfterViewInit(){}dataBuilder(){for(let o=-180;o<180;o++)for(let i=0;i<this.width/10;i++)for(let s=0;s<this.height/10;s++)o<5?this.data.push({Agent:{angle:o,x:i,y:s},action:iR.RightRotate}):o>5&&this.data.push({Agent:{angle:o,x:i,y:s},action:iR.LeftRotate}),this.data.push({Agent:{angle:0,x:0,y:0},action:iR.NoRotate})}settingTensorflow(){this.inputs=[],this.labels=[],this.data.forEach(o=>{this.inputs.push([o.Agent.angle]),this.labels.push(Number(o.action))}),this.settings={compiler:{optimizer:fp.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:1e4,epochs:3},inputs:this.inputs,labels:this.labels,mainLayers:[Mw.dense({units:64,activation:"relu",inputShape:[1]})],finalLayer:Mw.dense({units:3,activation:"softmax"})}}draw(){this.engine=this.Engine.create({gravity:{scale:.001,x:0,y:.1}}),this.render=this.Render.create({canvas:this.canvas.nativeElement,engine:this.engine,options:{showDebug:!0,wireframes:!1}}),this.starShip=this.addStarship(),this.lauchingPlatform=this.addLauchingPlatform(),this.landingPlatform=this.addLandingPlatform(),this.Composite.add(this.engine.world,[this.starShip,this.lauchingPlatform,this.landingPlatform]);let o=Oa.Mouse.create(this.render.canvas),i=Oa.MouseConstraint.create(this.engine,{mouse:o,constraint:{stiffness:.2,render:{visible:!1}}});Oa.World.add(this.engine.world,i),this.Render.run(this.render);let s=this.Runner.create();this.Runner.run(s,this.engine),this.afterUpdate(()=>{let a=lCt(this.starShipAngle),l=Oa.default.Collision.collides(this.starShip,this.lauchingPlatform);if(this.model&&!l){let u=Ti([a]),c=this.model?.predict(u),p=qc(c,1).arraySync()[0],h=["RightRotate","LeftRotate","Thrust","Nothing","NoRotate"];switch(console.log("******",iR[p]),iR[p]){case"RightRotate":this.rotateRight();break;case"LeftRotate":this.rotateLeft();break;default:break}this.starShipY>500}})}addStarship(){return this.Bodies.rectangle(100,90,12,25,{angle:uCt(45),render:{sprite:{texture:"assets/starship.png",xScale:.02,yScale:.02}}})}rotateLeft(){this.starShip.angle-=.01}rotateRight(){this.starShip.angle+=.01}applyThrust(o,i){let s=o.angle,a={x:Math.sin(s)*i,y:-Math.cos(s)*i};Oa.Body.applyForce(o,{x:o.position.x,y:o.position.y},a)}addLauchingPlatform(){return this.Bodies.rectangle(0,this.height-50,600,60,{isStatic:!0,render:{fillStyle:"white"}})}addLandingPlatform(){return this.Bodies.rectangle(780,this.height-50,100,60,{isStatic:!0,render:{fillStyle:"white"}})}beforeUpdate(o){Oa.default.Events.on(this.engine,"beforeUpdate",i=>{o(i)})}afterUpdate(o){Oa.default.Events.on(this.engine,"afterUpdate",i=>{o(i)})}calculateDistance(){let o=this.starShipX-this.landingPlatformX,i=this.starShipY-this.landingPlatformY,s=Oa.Vector.magnitude({x:o,y:i})-68;return s<5?0:s}modelTrainned(o){this.model=o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=os({type:r,selectors:[["app-star-ship-landing-super-vized"]],viewQuery:function(i,s){if(i&1&&zc(g3r,7),i&2){let a;za(a=Ua())&&(s.canvas=a.first)}},standalone:!0,features:[is],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(Ei(0,"div"),Jf(1,y3r,1,1,"app-tensorflow-visualization",1),$a(2,"canvas",2,0),Ui()),i&2&&(Al(),ru("ngIf",!s.model),Al(),ru("width",0))},dependencies:[od,Rz,Fre],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block;width:calc(100vw - 2px);height:calc(100vh - 2px);border:1px solid red}"]});let t=r;return t})();var Ore=[{path:"",redirectTo:"starship-landing-regression-trainning",pathMatch:"full"},{path:"flappy-bird-regression-trainning",component:sCt,title:"Flappy Bird - (regression trainning)"},{path:"starship-landing-regression-trainning",component:cCt,title:"Starship Landing - (regression trainning)"}];var b3r="@",x3r=(()=>{let r=class r{constructor(o,i,s,a,l){this.doc=o,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=l,this._rendererFactoryPromise=null,this.scheduler=Zt(rke,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-ZAHMD44B.js").then(i=>i)).catch(i=>{throw new ns(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(o,i){let s=this.delegate.createRenderer(o,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new CTe(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(l=>{let u=l.createRenderer(o,i);a.use(u),this.scheduler?.notify(9)}).catch(l=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(i){Mk()},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),CTe=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let n of this.replay)n(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,n){return this.delegate.createElement(r,n)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,n){this.delegate.appendChild(r,n)}insertBefore(r,n,o,i){this.delegate.insertBefore(r,n,o,i)}removeChild(r,n,o){this.delegate.removeChild(r,n,o)}selectRootElement(r,n){return this.delegate.selectRootElement(r,n)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,n,o,i){this.delegate.setAttribute(r,n,o,i)}removeAttribute(r,n,o){this.delegate.removeAttribute(r,n,o)}addClass(r,n){this.delegate.addClass(r,n)}removeClass(r,n){this.delegate.removeClass(r,n)}setStyle(r,n,o,i){this.delegate.setStyle(r,n,o,i)}removeStyle(r,n,o){this.delegate.removeStyle(r,n,o)}setProperty(r,n,o){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(r,n,o)),this.delegate.setProperty(r,n,o)}setValue(r,n){this.delegate.setValue(r,n)}listen(r,n,o){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(r,n,o)),this.delegate.listen(r,n,o)}shouldReplay(r){return this.replay!==null&&r.startsWith(b3r)}};function fCt(t="animations"){return nke("NgAsyncAnimations"),AR([{provide:Nz,useFactory:(r,n,o)=>new x3r(r,n,o,t),deps:[yn,jz,Cn]},{provide:bh,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var dCt={providers:[fke({eventCoalescing:!0}),DIe(Ore),fCt()]};var TTe;try{TTe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{TTe=!1}var ts=(()=>{let r=class r{constructor(o){this._platformId=o,this.isBrowser=this._platformId?Ske(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||TTe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};r.\u0275fac=function(i){return new(i||r)(Et(sS))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var uz;function v3r(){if(uz==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>uz=!0}))}finally{uz=uz||!1}return uz}function sR(t){return v3r()?t:!!t.capture}var hg=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(hg||{}),Rre,yk;function Pre(){if(yk==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return yk=!1,yk;if("scrollBehavior"in document.documentElement.style)yk=!0;else{let t=Element.prototype.scrollTo;t?yk=!/\{\s*\[native code\]\s*\}/.test(t.toString()):yk=!1}}return yk}function aR(){if(typeof document!="object"||!document)return hg.NORMAL;if(Rre==null){let t=document.createElement("div"),r=t.style;t.dir="rtl",r.width="1px",r.overflow="auto",r.visibility="hidden",r.pointerEvents="none",r.position="absolute";let n=document.createElement("div"),o=n.style;o.width="2px",o.height="1px",t.appendChild(n),document.body.appendChild(t),Rre=hg.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,Rre=t.scrollLeft===0?hg.NEGATED:hg.INVERTED),t.remove()}return Rre}var ETe;function w3r(){if(ETe==null){let t=typeof document<"u"?document.head:null;ETe=!!(t&&(t.createShadowRoot||t.attachShadow))}return ETe}function pCt(t){if(w3r()){let r=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function fh(t){return t.composedPath?t.composedPath()[0]:t.target}function cz(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function hCt(t,...r){return r.length?r.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function xk(t){return t!=null&&`${t}`!="false"}function lR(t){return Array.isArray(t)?t:[t]}function Vs(t){return t==null?"":typeof t=="string"?t:`${t}px`}function f1(t){return t instanceof No?t.nativeElement:t}var _3r=(()=>{let r=class r{create(o){return typeof MutationObserver>"u"?null:new MutationObserver(o)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var mCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[_3r]});let t=r;return t})();var gCt=new Set,vk,S3r=(()=>{let r=class r{constructor(o,i){this._platform=o,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):E3r}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&C3r(o,this._nonce),this._matchMedia(o)}};r.\u0275fac=function(i){return new(i||r)(Et(ts),Et(IR,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function C3r(t,r){if(!gCt.has(t))try{vk||(vk=document.createElement("style"),r&&vk.setAttribute("nonce",r),vk.setAttribute("type","text/css"),document.head.appendChild(vk)),vk.sheet&&(vk.sheet.insertRule(`@media ${t} {body{ }}`,0),gCt.add(t))}catch(n){console.error(n)}}function E3r(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var bCt=(()=>{let r=class r{constructor(o,i){this._mediaMatcher=o,this._zone=i,this._queries=new Map,this._destroySubject=new Xn}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return yCt(lR(o)).some(s=>this._registerQuery(s).mql.matches)}observe(o){let s=yCt(lR(o)).map(l=>this._registerQuery(l).observable),a=kk(s);return a=Cz(a.pipe(Lc(1)),a.pipe(Tz(1),SR(0))),a.pipe(dn(l=>{let u={matches:!1,breakpoints:{}};return l.forEach(({matches:c,query:f})=>{u.matches=u.matches||c,u.breakpoints[f]=c}),u}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let i=this._mediaMatcher.matchMedia(o),a={observable:new Ak(l=>{let u=c=>this._zone.run(()=>l.next(c));return i.addListener(u),()=>{i.removeListener(u)}}).pipe(_1(i),dn(({matches:l})=>({query:o,matches:l})),Ns(this._destroySubject)),mql:i};return this._queries.set(o,a),a}};r.\u0275fac=function(i){return new(i||r)(Et(S3r),Et(Cn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function yCt(t){return t.map(r=>r.split(",")).reduce((r,n)=>r.concat(n)).map(r=>r.trim())}var ITe=(()=>{let r=class r{constructor(o){this._platform=o}isDisabled(o){return o.hasAttribute("disabled")}isVisible(o){return A3r(o)&&getComputedStyle(o).visibility==="visible"}isTabbable(o){if(!this._platform.isBrowser)return!1;let i=T3r(R3r(o));if(i&&(xCt(i)===-1||!this.isVisible(i)))return!1;let s=o.nodeName.toLowerCase(),a=xCt(o);return o.hasAttribute("contenteditable")?a!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!F3r(o)?!1:s==="audio"?o.hasAttribute("controls")?a!==-1:!1:s==="video"?a===-1?!1:a!==null?!0:this._platform.FIREFOX||o.hasAttribute("controls"):o.tabIndex>=0}isFocusable(o,i){return O3r(o)&&!this.isDisabled(o)&&(i?.ignoreVisibility||this.isVisible(o))}};r.\u0275fac=function(i){return new(i||r)(Et(ts))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function T3r(t){try{return t.frameElement}catch{return null}}function A3r(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function k3r(t){let r=t.nodeName.toLowerCase();return r==="input"||r==="select"||r==="button"||r==="textarea"}function I3r(t){return N3r(t)&&t.type=="hidden"}function D3r(t){return M3r(t)&&t.hasAttribute("href")}function N3r(t){return t.nodeName.toLowerCase()=="input"}function M3r(t){return t.nodeName.toLowerCase()=="a"}function _Ct(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let r=t.getAttribute("tabindex");return!!(r&&!isNaN(parseInt(r,10)))}function xCt(t){if(!_Ct(t))return null;let r=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(r)?-1:r}function F3r(t){let r=t.nodeName.toLowerCase(),n=r==="input"&&t.type;return n==="text"||n==="password"||r==="select"||r==="textarea"}function O3r(t){return I3r(t)?!1:k3r(t)||D3r(t)||t.hasAttribute("contenteditable")||_Ct(t)}function R3r(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var kTe=class{get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}constructor(r,n,o,i,s=!1,a){this._element=r,this._checker=n,this._ngZone=o,this._document=i,this._injector=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let r=this._startAnchor,n=this._endAnchor;r&&(r.removeEventListener("focus",this.startAnchorListener),r.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(r)))})}focusFirstTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(r)))})}focusLastTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(r)))})}_getRegionBoundary(r){let n=this._element.querySelectorAll(`[cdk-focus-region-${r}], [cdkFocusRegion${r}], [cdk-focus-${r}]`);return r=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(r){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let o=this._getFirstTabbableElement(n);return o?.focus(r),!!o}return n.focus(r),!0}return this.focusFirstTabbableElement(r)}focusFirstTabbableElement(r){let n=this._getRegionBoundary("start");return n&&n.focus(r),!!n}focusLastTabbableElement(r){let n=this._getRegionBoundary("end");return n&&n.focus(r),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=0;o<n.length;o++){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[o]):null;if(i)return i}return null}_getLastTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=n.length-1;o>=0;o--){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[o]):null;if(i)return i}return null}_createAnchor(){let r=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,r),r.classList.add("cdk-visually-hidden"),r.classList.add("cdk-focus-trap-anchor"),r.setAttribute("aria-hidden","true"),r}_toggleAnchorTabIndex(r,n){r?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(r){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_executeOnStable(r){this._ngZone.isStable?this._injector?xh(r,{injector:this._injector}):r():this._ngZone.onStable.pipe(Lc(1)).subscribe(r)}},SCt=(()=>{let r=class r{constructor(o,i,s){this._checker=o,this._ngZone=i,this._injector=Zt(jc),this._document=s}create(o,i=!1){return new kTe(o,this._checker,this._ngZone,this._document,i,this._injector)}};r.\u0275fac=function(i){return new(i||r)(Et(ITe),Et(Cn),Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function DTe(t){return t.buttons===0||t.detail===0}function NTe(t){let r=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!r&&r.identifier===-1&&(r.radiusX==null||r.radiusX===1)&&(r.radiusY==null||r.radiusY===1)}var P3r=new En("cdk-input-modality-detector-options"),L3r={ignoreKeys:[18,17,224,91,16]},CCt=650,uR=sR({passive:!0,capture:!0}),j3r=(()=>{let r=class r{get mostRecentModality(){return this._modality.value}constructor(o,i,s,a){this._platform=o,this._mostRecentTarget=null,this._modality=new Hs(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(u=>u===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=fh(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<CCt||(this._modality.next(DTe(l)?"keyboard":"mouse"),this._mostRecentTarget=fh(l))},this._onTouchstart=l=>{if(NTe(l)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=fh(l)},this._options=Gt(Gt({},L3r),a),this.modalityDetected=this._modality.pipe(Tz(1)),this.modalityChanged=this.modalityDetected.pipe(xb()),o.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,uR),s.addEventListener("mousedown",this._onMousedown,uR),s.addEventListener("touchstart",this._onTouchstart,uR)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,uR),document.removeEventListener("mousedown",this._onMousedown,uR),document.removeEventListener("touchstart",this._onTouchstart,uR))}};r.\u0275fac=function(i){return new(i||r)(Et(ts),Et(Cn),Et(yn),Et(P3r,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var jre=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(jre||{}),B3r=new En("cdk-focus-monitor-default-options"),Lre=sR({passive:!0,capture:!0}),Bre=(()=>{let r=class r{constructor(o,i,s,a,l){this._ngZone=o,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Xn,this._rootNodeFocusAndBlurListener=u=>{let c=fh(u);for(let f=c;f;f=f.parentElement)u.type==="focus"?this._onFocus(u,f):this._onBlur(u,f)},this._document=a,this._detectionMode=l?.detectionMode||jre.IMMEDIATE}monitor(o,i=!1){let s=f1(o);if(!this._platform.isBrowser||s.nodeType!==1)return kr();let a=pCt(s)||this._getDocument(),l=this._elementInfo.get(s);if(l)return i&&(l.checkChildren=!0),l.subject;let u={checkChildren:i,subject:new Xn,rootNode:a};return this._elementInfo.set(s,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(o){let i=f1(o),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(o,i,s){let a=f1(o),l=this._getDocument().activeElement;a===l?this._getClosestElementsInfo(a).forEach(([u,c])=>this._originChanged(u,i,c)):(this._setOrigin(i),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((o,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(o){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(o)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:o&&this._isLastInteractionFromInputLabel(o)?"mouse":"program"}_shouldBeAttributedToTouch(o){return this._detectionMode===jre.EVENTUAL||!!o?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(o,i){o.classList.toggle("cdk-focused",!!i),o.classList.toggle("cdk-touch-focused",i==="touch"),o.classList.toggle("cdk-keyboard-focused",i==="keyboard"),o.classList.toggle("cdk-mouse-focused",i==="mouse"),o.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(o,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=o,this._originFromTouchInteraction=o==="touch"&&i,this._detectionMode===jre.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?CCt:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(o,i){let s=this._elementInfo.get(i),a=fh(o);!s||!s.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),s)}_onBlur(o,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&o.relatedTarget instanceof Node&&i.contains(o.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(o,i){o.subject.observers.length&&this._ngZone.run(()=>o.subject.next(i))}_registerGlobalListeners(o){if(!this._platform.isBrowser)return;let i=o.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Lre),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Lre)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ns(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(o){let i=o.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Lre),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Lre),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(o,i,s){this._setClasses(o,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(o){let i=[];return this._elementInfo.forEach((s,a)=>{(a===o||s.checkChildren&&a.contains(o))&&i.push([a,s])}),i}_isLastInteractionFromInputLabel(o){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===o||o.nodeName!=="INPUT"&&o.nodeName!=="TEXTAREA"||o.disabled)return!1;let a=o.labels;if(a){for(let l=0;l<a.length;l++)if(a[l].contains(i))return!0}return!1}};r.\u0275fac=function(i){return new(i||r)(Et(Cn),Et(ts),Et(j3r),Et(yn,8),Et(B3r,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var wk=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(wk||{}),vCt="cdk-high-contrast-black-on-white",wCt="cdk-high-contrast-white-on-black",ATe="cdk-high-contrast-active",ECt=(()=>{let r=class r{constructor(o,i){this._platform=o,this._document=i,this._breakpointSubscription=Zt(bCt).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return wk.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(o):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(o.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return wk.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return wk.BLACK_ON_WHITE}return wk.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(ATe,vCt,wCt),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===wk.BLACK_ON_WHITE?o.add(ATe,vCt):i===wk.WHITE_ON_BLACK&&o.add(ATe,wCt)}}};r.\u0275fac=function(i){return new(i||r)(Et(ts),Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var $3r=new En("cdk-dir-doc",{providedIn:"root",factory:z3r});function z3r(){return Zt(yn)}var U3r=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function V3r(t){let r=t?.toLowerCase()||"";return r==="auto"&&typeof navigator<"u"&&navigator?.language?U3r.test(navigator.language)?"rtl":"ltr":r==="rtl"?"rtl":"ltr"}var cR=(()=>{let r=class r{constructor(o){if(this.value="ltr",this.change=new Ys,o){let i=o.body?o.body.dir:null,s=o.documentElement?o.documentElement.dir:null;this.value=V3r(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}};r.\u0275fac=function(i){return new(i||r)(Et($3r,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var rS=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})();function W3r(){return!0}var q3r=new En("mat-sanity-checks",{providedIn:"root",factory:W3r}),As=(()=>{let r=class r{constructor(o,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return cz()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};r.\u0275fac=function(i){return new(i||r)(Et(ECt),Et(q3r,8),Et(yn))},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[rS,rS]});let t=r;return t})();var dh=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(dh||{}),RTe=class{constructor(r,n,o,i=!1){this._renderer=r,this.element=n,this.config=o,this._animationForciblyDisabledThroughCss=i,this.state=dh.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},ACt=sR({passive:!0,capture:!0}),PTe=class{constructor(){this._events=new Map,this._delegateEventHandler=r=>{let n=fh(r);n&&this._events.get(r.type)?.forEach((o,i)=>{(i===n||i.contains(n))&&o.forEach(s=>s.handleEvent(r))})}}addHandler(r,n,o,i){let s=this._events.get(n);if(s){let a=s.get(o);a?a.add(i):s.set(o,new Set([i]))}else this._events.set(n,new Map([[o,new Set([i])]])),r.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,ACt)})}removeHandler(r,n,o){let i=this._events.get(r);if(!i)return;let s=i.get(n);s&&(s.delete(o),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(r),document.removeEventListener(r,this._delegateEventHandler,ACt)))}},kCt={enterDuration:225,exitDuration:150},H3r=800,ICt=sR({passive:!0,capture:!0}),DCt=["mousedown","touchstart"],NCt=["mouseup","mouseleave","touchend","touchcancel"],fz=class fz{constructor(r,n,o,i){this._target=r,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=f1(o))}fadeInRipple(r,n,o={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Gt(Gt({},kCt),o.animation);o.centered&&(r=i.left+i.width/2,n=i.top+i.height/2);let a=o.radius||Y3r(r,n,i),l=r-i.left,u=n-i.top,c=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-a}px`,f.style.top=`${u-a}px`,f.style.height=`${a*2}px`,f.style.width=`${a*2}px`,o.color!=null&&(f.style.backgroundColor=o.color),f.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(f);let d=window.getComputedStyle(f),p=d.transitionProperty,h=d.transitionDuration,m=p==="none"||h==="0s"||h==="0s, 0s"||i.width===0&&i.height===0,g=new RTe(this,f,o,m);f.style.transform="scale3d(1, 1, 1)",g.state=dh.FADING_IN,o.persistent||(this._mostRecentTransientRipple=g);let y=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>this._finishRippleTransition(g),x=()=>this._destroyRipple(g);f.addEventListener("transitionend",b),f.addEventListener("transitioncancel",x),y={onTransitionEnd:b,onTransitionCancel:x}}),this._activeRipples.set(g,y),(m||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(r){if(r.state===dh.FADING_OUT||r.state===dh.HIDDEN)return;let n=r.element,o=Gt(Gt({},kCt),r.config.animation);n.style.transitionDuration=`${o.exitDuration}ms`,n.style.opacity="0",r.state=dh.FADING_OUT,(r._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(r)}fadeOutAll(){this._getActiveRipples().forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){let n=f1(r);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,DCt.forEach(o=>{fz._eventManager.addHandler(this._ngZone,o,n,this)}))}handleEvent(r){r.type==="mousedown"?this._onMousedown(r):r.type==="touchstart"?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{NCt.forEach(n=>{this._triggerElement.addEventListener(n,this,ICt)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(r){r.state===dh.FADING_IN?this._startFadeOutTransition(r):r.state===dh.FADING_OUT&&this._destroyRipple(r)}_startFadeOutTransition(r){let n=r===this._mostRecentTransientRipple,{persistent:o}=r.config;r.state=dh.VISIBLE,!o&&(!n||!this._isPointerDown)&&r.fadeOut()}_destroyRipple(r){let n=this._activeRipples.get(r)??null;this._activeRipples.delete(r),this._activeRipples.size||(this._containerRect=null),r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),r.state=dh.HIDDEN,n!==null&&(r.element.removeEventListener("transitionend",n.onTransitionEnd),r.element.removeEventListener("transitioncancel",n.onTransitionCancel)),r.element.remove()}_onMousedown(r){let n=DTe(r),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+H3r;!this._target.rippleDisabled&&!n&&!o&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!NTe(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=r.changedTouches;if(n)for(let o=0;o<n.length;o++)this.fadeInRipple(n[o].clientX,n[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(r=>{let n=r.state===dh.VISIBLE||r.config.terminateOnPointerUp&&r.state===dh.FADING_IN;!r.config.persistent&&n&&r.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let r=this._triggerElement;r&&(DCt.forEach(n=>fz._eventManager.removeHandler(n,r,this)),this._pointerUpEventsRegistered&&(NCt.forEach(n=>r.removeEventListener(n,this,ICt)),this._pointerUpEventsRegistered=!1))}};fz._eventManager=new PTe;var LTe=fz;function Y3r(t,r,n){let o=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom));return Math.sqrt(o*o+i*i)}var PCt=new En("mat-ripple-global-options"),LCt=(()=>{let r=class r{get disabled(){return this._disabled}set disabled(o){o&&this.fadeOutAllNonPersistent(),this._disabled=o,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(o){this._trigger=o,this._setupTriggerEventsIfEnabled()}constructor(o,i,s,a,l){this._elementRef=o,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new LTe(this,i,o,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Gt(Gt(Gt({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(o,i=0,s){return typeof o=="number"?this._rippleRenderer.fadeInRipple(o,i,Gt(Gt({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Gt(Gt({},this.rippleConfig),o))}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(Cn),vr(ts),vr(PCt,8),vr(bh,8))},r.\u0275dir=Ba({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){i&2&&Bc("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=r;return t})(),dz=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,As]});let t=r;return t})();var X3r=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As]});let t=r;return t})();var jTe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[dz,As,X3r]});let t=r;return t})(),MCt={capture:!0},FCt=["focus","mousedown","mouseenter","touchstart"],FTe="mat-ripple-loader-uninitialized",OTe="mat-ripple-loader-class-name",OCt="mat-ripple-loader-centered",$re="mat-ripple-loader-disabled",jCt=(()=>{let r=class r{constructor(){this._document=Zt(yn,{optional:!0}),this._animationMode=Zt(bh,{optional:!0}),this._globalRippleOptions=Zt(PCt,{optional:!0}),this._platform=Zt(ts),this._ngZone=Zt(Cn),this._hosts=new Map,this._onInteraction=o=>{let i=fh(o);if(i instanceof HTMLElement){let s=i.closest(`[${FTe}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(let o of FCt)this._document?.addEventListener(o,this._onInteraction,MCt)})}ngOnDestroy(){let o=this._hosts.keys();for(let i of o)this.destroyRipple(i);for(let i of FCt)this._document?.removeEventListener(i,this._onInteraction,MCt)}configureRipple(o,i){o.setAttribute(FTe,this._globalRippleOptions?.namespace??""),(i.className||!o.hasAttribute(OTe))&&o.setAttribute(OTe,i.className||""),i.centered&&o.setAttribute(OCt,""),i.disabled&&o.setAttribute($re,"")}getRipple(o){return this._hosts.get(o)||this._createRipple(o)}setDisabled(o,i){let s=this._hosts.get(o);if(s){s.disabled=i;return}i?o.setAttribute($re,""):o.removeAttribute($re)}_createRipple(o){if(!this._document)return;let i=this._hosts.get(o);if(i)return i;o.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",o.getAttribute(OTe)),o.append(s);let a=new LCt(new No(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=o,a.centered=o.hasAttribute(OCt),a.disabled=o.hasAttribute($re),this.attachRipple(o,a),a}attachRipple(o,i){o.removeAttribute(FTe),this._hosts.set(o,i)}destroyRipple(o){let i=this._hosts.get(o);i&&(i.ngOnDestroy(),this._hosts.delete(o))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Z3r=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var Q3r=["mat-icon-button",""],J3r=["*"];var ePr=new En("MAT_BUTTON_CONFIG");var tPr=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],rPr=(()=>{let r=class r{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(o){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,o)}get disableRipple(){return this._disableRipple}set disableRipple(o){this._disableRipple=o,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(o){this._disabled=o,this._updateRippleDisabled()}constructor(o,i,s,a){this._elementRef=o,this._platform=i,this._ngZone=s,this._animationMode=a,this._focusMonitor=Zt(Bre),this._rippleLoader=Zt(jCt),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let l=Zt(ePr,{optional:!0}),u=o.nativeElement,c=u.classList;this.disabledInteractive=l?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:d}of tPr)u.hasAttribute(f)&&c.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(o="program",i){o?this._focusMonitor.focusVia(this._elementRef.nativeElement,o,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};r.\u0275fac=function(i){Mk()},r.\u0275dir=Ba({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",nu],disabled:[2,"disabled","disabled",nu],ariaDisabled:[2,"aria-disabled","ariaDisabled",nu],disabledInteractive:[2,"disabledInteractive","disabledInteractive",nu]},features:[Qf]});let t=r;return t})();var BCt=(()=>{let r=class r extends rPr{constructor(o,i,s,a){super(o,i,s,a),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(ts),vr(Cn),vr(bh,8))},r.\u0275cmp=os({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,s){i&2&&(ed("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),NR(s.color?"mat-"+s.color:""),Bc("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ok,is],attrs:Q3r,ngContentSelectors:J3r,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){i&1&&(rd(),$a(0,"span",0),qu(1),$a(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Z3r],encapsulation:2,changeDetection:0});let t=r;return t})();var $Ct=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,dz,As]});let t=r;return t})();var oPr=20,pz=(()=>{let r=class r{constructor(o,i,s){this._ngZone=o,this._platform=i,this._scrolled=new Xn,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(o){this.scrollContainers.has(o)||this.scrollContainers.set(o,o.elementScrolled().subscribe(()=>this._scrolled.next(o)))}deregister(o){let i=this.scrollContainers.get(o);i&&(i.unsubscribe(),this.scrollContainers.delete(o))}scrolled(o=oPr){return this._platform.isBrowser?new Ak(i=>{this._globalSubscription||this._addGlobalListener();let s=o>0?this._scrolled.pipe(lne(o)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):kr()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((o,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(o,i){let s=this.getAncestorScrollContainers(o);return this.scrolled(i).pipe(Ds(a=>!a||s.indexOf(a)>-1))}getAncestorScrollContainers(o){let i=[];return this.scrollContainers.forEach((s,a)=>{this._scrollableContainsElement(a,o)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(o,i){let s=f1(i),a=o.getElementRef().nativeElement;do if(s==a)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let o=this._getWindow();return _R(o.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};r.\u0275fac=function(i){return new(i||r)(Et(Cn),Et(ts),Et(yn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Ure=(()=>{let r=class r{constructor(o,i,s,a){this.elementRef=o,this.scrollDispatcher=i,this.ngZone=s,this.dir=a,this._destroyed=new Xn,this._elementScrolled=new Ak(l=>this.ngZone.runOutsideAngular(()=>_R(this.elementRef.nativeElement,"scroll").pipe(Ns(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(o){let i=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";o.left==null&&(o.left=s?o.end:o.start),o.right==null&&(o.right=s?o.start:o.end),o.bottom!=null&&(o.top=i.scrollHeight-i.clientHeight-o.bottom),s&&aR()!=hg.NORMAL?(o.left!=null&&(o.right=i.scrollWidth-i.clientWidth-o.left),aR()==hg.INVERTED?o.left=o.right:aR()==hg.NEGATED&&(o.left=o.right?-o.right:o.right)):o.right!=null&&(o.left=i.scrollWidth-i.clientWidth-o.right),this._applyScrollToOptions(o)}_applyScrollToOptions(o){let i=this.elementRef.nativeElement;Pre()?i.scrollTo(o):(o.top!=null&&(i.scrollTop=o.top),o.left!=null&&(i.scrollLeft=o.left))}measureScrollOffset(o){let i="left",s="right",a=this.elementRef.nativeElement;if(o=="top")return a.scrollTop;if(o=="bottom")return a.scrollHeight-a.clientHeight-a.scrollTop;let l=this.dir&&this.dir.value=="rtl";return o=="start"?o=l?s:i:o=="end"&&(o=l?i:s),l&&aR()==hg.INVERTED?o==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:l&&aR()==hg.NEGATED?o==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:o==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(pz),vr(Cn),vr(cR,8))},r.\u0275dir=Ba({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let t=r;return t})(),iPr=20,hz=(()=>{let r=class r{constructor(o,i,s){this._platform=o,this._change=new Xn,this._changeListener=a=>{this._change.next(a)},this._document=s,i.runOutsideAngular(()=>{if(o.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let o=this._getWindow();o.removeEventListener("resize",this._changeListener),o.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let o={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),o}getViewportRect(){let o=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:o.top,left:o.left,bottom:o.top+s,right:o.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let o=this._document,i=this._getWindow(),s=o.documentElement,a=s.getBoundingClientRect(),l=-a.top||o.body.scrollTop||i.scrollY||s.scrollTop||0,u=-a.left||o.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:l,left:u}}change(o=iPr){return o>0?this._change.pipe(lne(o)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let o=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:o.innerWidth,height:o.innerHeight}:{width:0,height:0}}};r.\u0275fac=function(i){return new(i||r)(Et(ts),Et(Cn),Et(yn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var d1=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})(),BTe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[rS,d1,rS,d1]});let t=r;return t})();var mz=class{attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},$Te=class extends mz{constructor(r,n,o,i,s){super(),this.component=r,this.viewContainerRef=n,this.injector=o,this.componentFactoryResolver=i,this.projectableNodes=s}},Vre=class extends mz{constructor(r,n,o,i){super(),this.templateRef=r,this.viewContainerRef=n,this.context=o,this.injector=i}get origin(){return this.templateRef.elementRef}attach(r,n=this.context){return this.context=n,super.attach(r)}detach(){return this.context=void 0,super.detach()}},zTe=class extends mz{constructor(r){super(),this.element=r instanceof No?r.nativeElement:r}},UTe=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof $Te)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof Vre)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof zTe)return this._attachedPortal=r,this.attachDomPortal(r)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Gre=class extends UTe{constructor(r,n,o,i,s){super(),this.outletElement=r,this._componentFactoryResolver=n,this._appRef=o,this._defaultInjector=i,this.attachDomPortal=a=>{this._document;let l=a.element;l.parentNode;let u=this._document.createComment("dom-portal");l.parentNode.insertBefore(u,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(l,u)})},this._document=s}attachComponentPortal(r){let o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),i;return r.viewContainerRef?(i=r.viewContainerRef.createComponent(o,r.viewContainerRef.length,r.injector||r.viewContainerRef.injector,r.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=o.create(r.injector||this._defaultInjector||jc.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=r,i}attachTemplatePortal(r){let n=r.viewContainerRef,o=n.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return o.rootNodes.forEach(i=>this.outletElement.appendChild(i)),o.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(o);i!==-1&&n.remove(i)}),this._attachedPortal=r,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}};var UCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})();var VCt=Pre(),VTe=class{constructor(r,n){this._viewportRuler=r,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=Vs(-this._previousScrollPosition.left),r.style.top=Vs(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,n=this._document.body,o=r.style,i=n.style,s=o.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),VCt&&(o.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),VCt&&(o.scrollBehavior=s,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,o=this._viewportRuler.getViewportSize();return n.scrollHeight>o.height||n.scrollWidth>o.width}};var GTe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._ngZone=n,this._viewportRuler=o,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(Ds(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Wre=class{enable(){}disable(){}attach(){}};function WTe(t,r){return r.some(n=>{let o=t.bottom<n.top,i=t.top>n.bottom,s=t.right<n.left,a=t.left>n.right;return o||i||s||a})}function GCt(t,r){return r.some(n=>{let o=t.top<n.top,i=t.bottom>n.bottom,s=t.left<n.left,a=t.right>n.right;return o||i||s||a})}var qTe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._viewportRuler=n,this._ngZone=o,this._config=i,this._scrollSubscription=null}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:i}=this._viewportRuler.getViewportSize();WTe(n,[{width:o,height:i,bottom:i,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sPr=(()=>{let r=class r{constructor(o,i,s,a){this._scrollDispatcher=o,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new Wre,this.close=l=>new GTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new VTe(this._viewportRuler,this._document),this.reposition=l=>new qTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=a}};r.\u0275fac=function(i){return new(i||r)(Et(pz),Et(hz),Et(Cn),Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),qre=class{constructor(r){if(this.scrollStrategy=new Wre,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,r){let n=Object.keys(r);for(let o of n)r[o]!==void 0&&(this[o]=r[o])}}};var HTe=class{constructor(r,n){this.connectionPair=r,this.scrollableViewProperties=n}};var XCt=(()=>{let r=class r{constructor(o){this._attachedOverlays=[],this._document=o}ngOnDestroy(){this.detach()}add(o){this.remove(o),this._attachedOverlays.push(o)}remove(o){let i=this._attachedOverlays.indexOf(o);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),aPr=(()=>{let r=class r extends XCt{constructor(o,i){super(o),this._ngZone=i,this._keydownListener=s=>{let a=this._attachedOverlays;for(let l=a.length-1;l>-1;l--)if(a[l]._keydownEvents.observers.length>0){let u=a[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s);break}}}add(o){super.add(o),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(Cn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),lPr=(()=>{let r=class r extends XCt{constructor(o,i,s){super(o),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=fh(a)},this._clickListener=a=>{let l=fh(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let f=c.length-1;f>-1;f--){let d=c[f];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(l)||d.overlayElement.contains(u))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(a)):p.next(a)}}}add(o){if(super.add(o),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let o=this._document.body;o.removeEventListener("pointerdown",this._pointerDownListener,!0),o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(o){o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0)}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(ts),Et(Cn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),KCt=(()=>{let r=class r{constructor(o,i){this._platform=i,this._document=o}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let o="cdk-overlay-container";if(this._platform.isBrowser||cz()){let s=this._document.querySelectorAll(`.${o}[platform="server"], .${o}[platform="test"]`);for(let a=0;a<s.length;a++)s[a].remove()}let i=this._document.createElement("div");i.classList.add(o),cz()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(ts))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),YTe=class{constructor(r,n,o,i,s,a,l,u,c,f=!1,d){this._portalOutlet=r,this._host=n,this._pane=o,this._config=i,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=u,this._outsideClickDispatcher=c,this._animationsDisabled=f,this._injector=d,this._backdropElement=null,this._backdropClick=new Xn,this._attachments=new Xn,this._detachments=new Xn,this._locationChanges=bb.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new Xn,this._outsidePointerEvents=new Xn,this._renders=new Xn,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=pke(()=>ike(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(r){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(r);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),xh(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,r&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=Gt(Gt({},this._config),r),this._updateElementSize()}setDirection(r){this._config=Is(Gt({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=Vs(this._config.width),r.height=Vs(this._config.height),r.minWidth=Vs(this._config.minWidth),r.minHeight=Vs(this._config.minHeight),r.maxWidth=Vs(this._config.maxWidth),r.maxHeight=Vs(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let r=this._backdropElement;if(r){if(this._animationsDisabled){this._disposeBackdrop(r);return}r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{r.addEventListener("transitionend",this._backdropTransitionendHandler)}),r.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(r)},500))}}_toggleClasses(r,n,o){let i=lR(n||[]).filter(s=>!!s);i.length&&(o?r.classList.add(...i):r.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let r=this._renders.pipe(Ns(Ez(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),r.unsubscribe())})})}_disposeScrollStrategy(){let r=this._scrollStrategy;r&&(r.disable(),r.detach&&r.detach())}_disposeBackdrop(r){r&&(r.removeEventListener("click",this._backdropClickHandler),r.removeEventListener("transitionend",this._backdropTransitionendHandler),r.remove(),this._backdropElement===r&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},WCt="cdk-overlay-connected-position-bounding-box",uPr=/([A-Za-z%]+)$/,XTe=class{get positions(){return this._preferredPositions}constructor(r,n,o,i,s){this._viewportRuler=n,this._document=o,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Xn,this._resizeSubscription=bb.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(WCt),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,n=this._overlayRect,o=this._viewportRect,i=this._containerRect,s=[],a;for(let l of this._preferredPositions){let u=this._getOriginPoint(r,i,l),c=this._getOverlayPoint(u,n,l),f=this._getOverlayFit(c,n,o,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,u);return}if(this._canFitWithFlexibleDimensions(f,c,o)){s.push({position:l,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,l)});continue}(!a||a.overlayFit.visibleArea<f.visibleArea)&&(a={overlayFit:f,overlayPoint:c,originPoint:u,position:l,overlayRect:n})}if(s.length){let l=null,u=-1;for(let c of s){let f=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);f>u&&(u=f,l=c)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&_k(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(WCt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,n)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,n,o){let i;if(o.originX=="center")i=r.left+r.width/2;else{let a=this._isRtl()?r.right:r.left,l=this._isRtl()?r.left:r.right;i=o.originX=="start"?a:l}n.left<0&&(i-=n.left);let s;return o.originY=="center"?s=r.top+r.height/2:s=o.originY=="top"?r.top:r.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(r,n,o){let i;o.overlayX=="center"?i=-n.width/2:o.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let s;return o.overlayY=="center"?s=-n.height/2:s=o.overlayY=="top"?0:-n.height,{x:r.x+i,y:r.y+s}}_getOverlayFit(r,n,o,i){let s=HCt(n),{x:a,y:l}=r,u=this._getOffset(i,"x"),c=this._getOffset(i,"y");u&&(a+=u),c&&(l+=c);let f=0-a,d=a+s.width-o.width,p=0-l,h=l+s.height-o.height,m=this._subtractOverflows(s.width,f,d),g=this._subtractOverflows(s.height,p,h),y=m*g;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(r,n,o){if(this._hasFlexibleDimensions){let i=o.bottom-n.y,s=o.right-n.x,a=qCt(this._overlayRef.getConfig().minHeight),l=qCt(this._overlayRef.getConfig().minWidth),u=r.fitsInViewportVertically||a!=null&&a<=i,c=r.fitsInViewportHorizontally||l!=null&&l<=s;return u&&c}return!1}_pushOverlayOnScreen(r,n,o){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let i=HCt(n),s=this._viewportRect,a=Math.max(r.x+i.width-s.width,0),l=Math.max(r.y+i.height-s.height,0),u=Math.max(s.top-o.top-r.y,0),c=Math.max(s.left-o.left-r.x,0),f=0,d=0;return i.width<=s.width?f=c||-a:f=r.x<this._viewportMargin?s.left-o.left-r.x:0,i.height<=s.height?d=u||-l:d=r.y<this._viewportMargin?s.top-o.top-r.y:0,this._previousPushAmount={x:f,y:d},{x:r.x+f,y:r.y+d}}_applyPosition(r,n){if(this._setTransformOrigin(r),this._setOverlayElementStyles(n,r),this._setBoundingBoxStyles(n,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!cPr(this._lastScrollVisibility,o)){let i=new HTe(r,o);this._positionChanges.next(i)}this._lastScrollVisibility=o}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,i=r.overlayY;r.overlayX==="center"?o="center":this._isRtl()?o=r.overlayX==="start"?"right":"left":o=r.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${o} ${i}`}_calculateBoundingBoxRect(r,n){let o=this._viewportRect,i=this._isRtl(),s,a,l;if(n.overlayY==="top")a=r.y,s=o.height-a+this._viewportMargin;else if(n.overlayY==="bottom")l=o.height-r.y+this._viewportMargin*2,s=o.height-l+this._viewportMargin;else{let h=Math.min(o.bottom-r.y+o.top,r.y),m=this._lastBoundingBoxSize.height;s=h*2,a=r.y-h,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(a=r.y-m/2)}let u=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,c=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,f,d,p;if(c)p=o.width-r.x+this._viewportMargin*2,f=r.x-this._viewportMargin;else if(u)d=r.x,f=o.right-r.x;else{let h=Math.min(o.right-r.x+o.left,r.x),m=this._lastBoundingBoxSize.width;f=h*2,d=r.x-h,f>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=r.x-m/2)}return{top:a,left:d,bottom:l,right:p,width:f,height:s}}_setBoundingBoxStyles(r,n){let o=this._calculateBoundingBoxRect(r,n);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Vs(o.height),i.top=Vs(o.top),i.bottom=Vs(o.bottom),i.width=Vs(o.width),i.left=Vs(o.left),i.right=Vs(o.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(i.maxHeight=Vs(s)),a&&(i.maxWidth=Vs(a))}this._lastBoundingBoxSize=o,_k(this._boundingBox.style,i)}_resetBoundingBoxStyles(){_k(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){_k(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,n){let o={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){let f=this._viewportRuler.getViewportScrollPosition();_k(o,this._getExactOverlayY(n,r,f)),_k(o,this._getExactOverlayX(n,r,f))}else o.position="static";let l="",u=this._getOffset(n,"x"),c=this._getOffset(n,"y");u&&(l+=`translateX(${u}px) `),c&&(l+=`translateY(${c}px)`),o.transform=l.trim(),a.maxHeight&&(i?o.maxHeight=Vs(a.maxHeight):s&&(o.maxHeight="")),a.maxWidth&&(i?o.maxWidth=Vs(a.maxWidth):s&&(o.maxWidth="")),_k(this._pane.style,o)}_getExactOverlayY(r,n,o){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,r);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),r.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;i.bottom=`${a-(s.y+this._overlayRect.height)}px`}else i.top=Vs(s.y);return i}_getExactOverlayX(r,n,o){let i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,r);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o));let a;if(this._isRtl()?a=r.overlayX==="end"?"left":"right":a=r.overlayX==="end"?"right":"left",a==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(s.x+this._overlayRect.width)}px`}else i.left=Vs(s.x);return i}_getScrollVisibility(){let r=this._getOriginRect(),n=this._pane.getBoundingClientRect(),o=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GCt(r,o),isOriginOutsideView:WTe(r,o),isOverlayClipped:GCt(n,o),isOverlayOutsideView:WTe(n,o)}}_subtractOverflows(r,...n){return n.reduce((o,i)=>o-Math.max(i,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+r-this._viewportMargin,bottom:o.top+n-this._viewportMargin,width:r-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,n){return n==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&lR(r).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){let r=this._origin;if(r instanceof No)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let n=r.width||0,o=r.height||0;return{top:r.y,bottom:r.y+o,left:r.x,right:r.x+n,height:o,width:n}}};function _k(t,r){for(let n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}function qCt(t){if(typeof t!="number"&&t!=null){let[r,n]=t.split(uPr);return!n||n==="px"?parseFloat(r):null}return t||null}function HCt(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function cPr(t,r){return t===r?!0:t.isOriginClipped===r.isOriginClipped&&t.isOriginOutsideView===r.isOriginOutsideView&&t.isOverlayClipped===r.isOverlayClipped&&t.isOverlayOutsideView===r.isOverlayOutsideView}var YCt="cdk-global-overlay-wrapper",KTe=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(r){let n=r.getConfig();this._overlayRef=r,this._width&&!n.width&&r.updateSize({width:this._width}),this._height&&!n.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(YCt),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:a,maxHeight:l}=o,u=(i==="100%"||i==="100vw")&&(!a||a==="100%"||a==="100vw"),c=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",m="",g="";u?g="flex-start":f==="center"?(g="center",p?m=d:h=d):p?f==="left"||f==="end"?(g="flex-end",h=d):(f==="right"||f==="start")&&(g="flex-start",m=d):f==="left"||f==="start"?(g="flex-start",h=d):(f==="right"||f==="end")&&(g="flex-end",m=d),r.position=this._cssPosition,r.marginLeft=u?"0":h,r.marginTop=c?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=u?"0":m,n.justifyContent=g,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,o=n.style;n.classList.remove(YCt),o.justifyContent=o.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},fPr=(()=>{let r=class r{constructor(o,i,s,a){this._viewportRuler=o,this._document=i,this._platform=s,this._overlayContainer=a}global(){return new KTe}flexibleConnectedTo(o){return new XTe(o,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};r.\u0275fac=function(i){return new(i||r)(Et(hz),Et(yn),Et(ts),Et(KCt))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),dPr=0,p1=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f,d,p,h,m){this.scrollStrategies=o,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=a,this._keyboardDispatcher=l,this._injector=u,this._ngZone=c,this._document=f,this._directionality=d,this._location=p,this._outsideClickDispatcher=h,this._animationsModuleType=m}create(o){let i=this._createHostElement(),s=this._createPaneElement(i),a=this._createPortalOutlet(s),l=new qre(o);return l.direction=l.direction||this._directionality.value,new YTe(a,i,s,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(vb))}position(){return this._positionBuilder}_createPaneElement(o){let i=this._document.createElement("div");return i.id=`cdk-overlay-${dPr++}`,i.classList.add("cdk-overlay-pane"),o.appendChild(i),i}_createHostElement(){let o=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalOutlet(o){return this._appRef||(this._appRef=this._injector.get(Rk)),new Gre(o,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};r.\u0275fac=function(i){return new(i||r)(Et(sPr),Et(KCt),Et(Dz),Et(fPr),Et(aPr),Et(jc),Et(Cn),Et(yn),Et(cR),Et(uS),Et(lPr),Et(bh,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var pPr=new En("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=Zt(p1);return()=>t.scrollStrategies.reposition()}});function hPr(t){return()=>t.scrollStrategies.reposition()}var mPr={provide:pPr,deps:[p1],useFactory:hPr},Hre=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[p1,mPr],imports:[rS,UCt,BTe,BTe]});let t=r;return t})();var Yre=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,od,mCt,As]});let t=r;return t})();var bPr=new En("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=Zt(p1);return()=>t.scrollStrategies.reposition()}});function xPr(t){return()=>t.scrollStrategies.reposition()}var vPr={provide:bPr,deps:[p1],useFactory:xPr};var ZCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[vPr],imports:[od,Hre,jTe,As,d1,Yre,jTe,As]});let t=r;return t})();var QCt=["*"],_Pr=["content"],SPr=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],CPr=["mat-drawer","mat-drawer-content","*"];function EPr(t,r){if(t&1){let n=vh();Ei(0,"div",1),$c("click",function(){gh(n);let i=td();return yh(i._onBackdropClicked())}),Ui()}if(t&2){let n=td();Bc("mat-drawer-shown",n._isShowingBackdrop())}}function TPr(t,r){t&1&&(Ei(0,"mat-drawer-content"),qu(1,2),Ui())}var APr={transformDrawer:FR("transform",[Pk("open, open-instant",wb({transform:"none",visibility:"visible"})),Pk("void",wb({"box-shadow":"none",visibility:"hidden"})),fS("void => open-instant",cS("0ms")),fS("void <=> open, open-instant => void",cS("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var kPr=new En("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:IPr}),JCt=new En("MAT_DRAWER_CONTAINER");function IPr(){return!1}var gz=(()=>{let r=class r extends Ure{constructor(o,i,s,a,l){super(s,a,l),this._changeDetectorRef=o,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};r.\u0275fac=function(i){return new(i||r)(vr(nd),vr(VAe(()=>QTe)),vr(No),vr(pz),vr(Cn))},r.\u0275cmp=os({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,s){i&2&&mne("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},standalone:!0,features:[vg([{provide:Ure,useExisting:r}]),Ok,is],ngContentSelectors:QCt,decls:1,vars:0,template:function(i,s){i&1&&(rd(),qu(0))},encapsulation:2,changeDetection:0});let t=r;return t})(),ZTe=(()=>{let r=class r{get position(){return this._position}set position(o){o=o==="end"?"end":"start",o!==this._position&&(this._isAttached&&this._updatePositionInParent(o),this._position=o,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(o){this._mode=o,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(o){this._disableClose=xk(o)}get autoFocus(){let o=this._autoFocus;return o??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(o){(o==="true"||o==="false"||o==null)&&(o=xk(o)),this._autoFocus=o}get opened(){return this._opened}set opened(o){this.toggle(xk(o))}constructor(o,i,s,a,l,u,c,f){this._elementRef=o,this._focusTrapFactory=i,this._focusMonitor=s,this._platform=a,this._ngZone=l,this._interactivityChecker=u,this._doc=c,this._container=f,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Xn,this._animationEnd=new Xn,this._animationState="void",this.openedChange=new Ys(!0),this._openedStream=this.openedChange.pipe(Ds(d=>d),dn(()=>{})),this.openedStart=this._animationStarted.pipe(Ds(d=>d.fromState!==d.toState&&d.toState.indexOf("open")===0),CR(void 0)),this._closedStream=this.openedChange.pipe(Ds(d=>!d),dn(()=>{})),this.closedStart=this._animationStarted.pipe(Ds(d=>d.fromState!==d.toState&&d.toState==="void"),CR(void 0)),this._destroyed=new Xn,this.onPositionChanged=new Ys,this._modeChanged=new Xn,this._injector=Zt(jc),this.openedChange.pipe(Ns(this._destroyed)).subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{_R(this._elementRef.nativeElement,"keydown").pipe(Ds(d=>d.keyCode===27&&!this.disableClose&&!hCt(d)),Ns(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(xb((d,p)=>d.fromState===p.fromState&&d.toState===p.toState)).subscribe(d=>{let{fromState:p,toState:h}=d;(h.indexOf("open")===0&&p==="void"||h==="void"&&p.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(o,i){this._interactivityChecker.isFocusable(o)||(o.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{o.removeEventListener("blur",s),o.removeEventListener("mousedown",s),o.removeAttribute("tabindex")};o.addEventListener("blur",s),o.addEventListener("mousedown",s)})),o.focus(i)}_focusByCssSelector(o,i){let s=this._elementRef.nativeElement.querySelector(o);s&&this._forceFocus(s,i)}_takeFocus(){if(!this._focusTrap)return;let o=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":xh(()=>{!this._focusTrap.focusInitialElement()&&typeof o.focus=="function"&&o.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(o){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,o):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let o=this._doc.activeElement;return!!o&&this._elementRef.nativeElement.contains(o)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(o){return this.toggle(!0,o)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(o=!this.opened,i){o&&i&&(this._openedVia=i);let s=this._setOpen(o,!o&&this._isFocusWithinDrawer(),this._openedVia||"program");return o||(this._openedVia=null),s}_setOpen(o,i,s){return this._opened=o,o?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(Lc(1)).subscribe(l=>a(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(o){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,s=i.parentNode;o==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,i)),s.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(SCt),vr(Bre),vr(ts),vr(Cn),vr(ITe),vr(yn,8),vr(JCt,8))},r.\u0275cmp=os({type:r,selectors:[["mat-drawer"]],viewQuery:function(i,s){if(i&1&&zc(_Pr,5),i&2){let a;za(a=Ua())&&(s._content=a.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,s){i&1&&uke("@transform.start",function(l){return s._animationStarted.next(l)})("@transform.done",function(l){return s._animationEnd.next(l)}),i&2&&(lke("@transform",s._animationState),ed("align",null),Bc("mat-drawer-end",s.position==="end")("mat-drawer-over",s.mode==="over")("mat-drawer-push",s.mode==="push")("mat-drawer-side",s.mode==="side")("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[is],ngContentSelectors:QCt,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,s){i&1&&(rd(),Ei(0,"div",1,0),qu(2),Ui())},dependencies:[Ure],encapsulation:2,data:{animation:[APr.transformDrawer]},changeDetection:0});let t=r;return t})(),QTe=(()=>{let r=class r{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(o){this._autosize=xk(o)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(o){this._backdropOverride=o==null?null:xk(o)}get scrollable(){return this._userContent||this._content}constructor(o,i,s,a,l,u=!1,c){this._dir=o,this._element=i,this._ngZone=s,this._changeDetectorRef=a,this._animationMode=c,this._drawers=new kz,this.backdropClick=new Ys,this._destroyed=new Xn,this._doCheckSubject=new Xn,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Xn,this._injector=Zt(jc),o&&o.change.pipe(Ns(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(Ns(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=u}ngAfterContentInit(){this._allDrawers.changes.pipe(_1(this._allDrawers),Ns(this._destroyed)).subscribe(o=>{this._drawers.reset(o.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(_1(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(o=>{this._watchDrawerToggle(o),this._watchDrawerPosition(o),this._watchDrawerMode(o)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(SR(10),Ns(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(o=>o.open())}close(){this._drawers.forEach(o=>o.close())}updateContentMargins(){let o=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")o+=this._left._getWidth();else if(this._left.mode=="push"){let s=this._left._getWidth();o+=s,i-=s}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let s=this._right._getWidth();i+=s,o-=s}}o=o||null,i=i||null,(o!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:o,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(o){o._animationStarted.pipe(Ds(i=>i.fromState!==i.toState),Ns(this._drawers.changes)).subscribe(i=>{i.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),o.mode!=="side"&&o.openedChange.pipe(Ns(this._drawers.changes)).subscribe(()=>this._setContainerClass(o.opened))}_watchDrawerPosition(o){o&&o.onPositionChanged.pipe(Ns(this._drawers.changes)).subscribe(()=>{xh(()=>{this._validateDrawers()},{injector:this._injector,phase:oke.Read})})}_watchDrawerMode(o){o&&o._modeChanged.pipe(Ns(Ez(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(o){let i=this._element.nativeElement.classList,s="mat-drawer-container-has-open";o?i.add(s):i.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(o=>{o.position=="end"?(this._end!=null,this._end=o):(this._start!=null,this._start=o)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(o=>o&&!o.disableClose&&this._drawerHasBackdrop(o)).forEach(o=>o._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(o){return o!=null&&o.opened}_drawerHasBackdrop(o){return this._backdropOverride==null?!!o&&o.mode!=="side":this._backdropOverride}};r.\u0275fac=function(i){return new(i||r)(vr(cR,8),vr(No),vr(Cn),vr(nd),vr(hz),vr(kPr),vr(bh,8))},r.\u0275cmp=os({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(i,s,a){if(i&1&&(C1(a,gz,5),C1(a,ZTe,5)),i&2){let l;za(l=Ua())&&(s._content=l.first),za(l=Ua())&&(s._allDrawers=l)}},viewQuery:function(i,s){if(i&1&&zc(gz,5),i&2){let a;za(a=Ua())&&(s._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,s){i&2&&Bc("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[vg([{provide:JCt,useExisting:r}]),is],ngContentSelectors:CPr,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,s){i&1&&(rd(SPr),Jf(0,EPr,1,2,"div",0),qu(1),qu(2,1),Jf(3,TPr,2,0,"mat-drawer-content")),i&2&&(aS(s.hasBackdrop?0:-1),Al(3),aS(s._content?-1:3))},dependencies:[gz],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let t=r;return t})();var eEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,d1,d1,As]});let t=r;return t})();var NPr=["*"],Xre;function MPr(){if(Xre===void 0&&(Xre=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Xre=t.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return Xre}function yz(t){return MPr()?.createHTML(t)||t}function tEt(t){return Error(`Unable to find icon with the name "${t}"`)}function FPr(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function rEt(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function nEt(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var h1=class{constructor(r,n,o){this.url=r,this.svgText=n,this.options=o}},OPr=(()=>{let r=class r{constructor(o,i,s,a){this._httpClient=o,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(o,i,s){return this.addSvgIconInNamespace("",o,i,s)}addSvgIconLiteral(o,i,s){return this.addSvgIconLiteralInNamespace("",o,i,s)}addSvgIconInNamespace(o,i,s,a){return this._addSvgIconConfig(o,i,new h1(s,null,a))}addSvgIconResolver(o){return this._resolvers.push(o),this}addSvgIconLiteralInNamespace(o,i,s,a){let l=this._sanitizer.sanitize(Zf.HTML,s);if(!l)throw nEt(s);let u=yz(l);return this._addSvgIconConfig(o,i,new h1("",u,a))}addSvgIconSet(o,i){return this.addSvgIconSetInNamespace("",o,i)}addSvgIconSetLiteral(o,i){return this.addSvgIconSetLiteralInNamespace("",o,i)}addSvgIconSetInNamespace(o,i,s){return this._addSvgIconSetConfig(o,new h1(i,null,s))}addSvgIconSetLiteralInNamespace(o,i,s){let a=this._sanitizer.sanitize(Zf.HTML,i);if(!a)throw nEt(i);let l=yz(a);return this._addSvgIconSetConfig(o,new h1("",l,s))}registerFontClassAlias(o,i=o){return this._fontCssClassesByAlias.set(o,i),this}classNameForFontAlias(o){return this._fontCssClassesByAlias.get(o)||o}setDefaultFontSetClass(...o){return this._defaultFontSetClass=o,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(o){let i=this._sanitizer.sanitize(Zf.RESOURCE_URL,o);if(!i)throw rEt(o);let s=this._cachedIconsByUrl.get(i);return s?kr(Kre(s)):this._loadSvgIconFromConfig(new h1(o,null)).pipe(gi(a=>this._cachedIconsByUrl.set(i,a)),dn(a=>Kre(a)))}getNamedSvgIcon(o,i=""){let s=oEt(i,o),a=this._svgIconConfigs.get(s);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,o),a)return this._svgIconConfigs.set(s,a),this._getSvgFromConfig(a);let l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(o,l):nS(tEt(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(o){return o.svgText?kr(Kre(this._svgElementFromConfig(o))):this._loadSvgIconFromConfig(o).pipe(dn(i=>Kre(i)))}_getSvgFromIconSetConfigs(o,i){let s=this._extractIconWithNameFromAnySet(o,i);if(s)return kr(s);let a=i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(x1(u=>{let f=`Loading icon set URL: ${this._sanitizer.sanitize(Zf.RESOURCE_URL,l.url)} failed: ${u.message}`;return this._errorHandler.handleError(new Error(f)),kr(null)})));return BAe(a).pipe(dn(()=>{let l=this._extractIconWithNameFromAnySet(o,i);if(!l)throw tEt(o);return l}))}_extractIconWithNameFromAnySet(o,i){for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.svgText&&a.svgText.toString().indexOf(o)>-1){let l=this._svgElementFromConfig(a),u=this._extractSvgIconFromSet(l,o,a.options);if(u)return u}}return null}_loadSvgIconFromConfig(o){return this._fetchIcon(o).pipe(gi(i=>o.svgText=i),dn(()=>this._svgElementFromConfig(o)))}_loadSvgIconSetFromConfig(o){return o.svgText?kr(null):this._fetchIcon(o).pipe(gi(i=>o.svgText=i))}_extractSvgIconFromSet(o,i,s){let a=o.querySelector(`[id="${i}"]`);if(!a)return null;let l=a.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,s);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),s);let u=this._svgElementFromString(yz("<svg></svg>"));return u.appendChild(l),this._setSvgAttributes(u,s)}_svgElementFromString(o){let i=this._document.createElement("DIV");i.innerHTML=o;let s=i.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(o){let i=this._svgElementFromString(yz("<svg></svg>")),s=o.attributes;for(let a=0;a<s.length;a++){let{name:l,value:u}=s[a];l!=="id"&&i.setAttribute(l,u)}for(let a=0;a<o.childNodes.length;a++)o.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(o.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(o,i){return o.setAttribute("fit",""),o.setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("preserveAspectRatio","xMidYMid meet"),o.setAttribute("focusable","false"),i&&i.viewBox&&o.setAttribute("viewBox",i.viewBox),o}_fetchIcon(o){let{url:i,options:s}=o,a=s?.withCredentials??!1;if(!this._httpClient)throw FPr();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let l=this._sanitizer.sanitize(Zf.RESOURCE_URL,i);if(!l)throw rEt(i);let u=this._inProgressUrlFetches.get(l);if(u)return u;let c=this._httpClient.get(l,{responseType:"text",withCredentials:a}).pipe(dn(f=>yz(f)),oS(()=>this._inProgressUrlFetches.delete(l)),UAe());return this._inProgressUrlFetches.set(l,c),c}_addSvgIconConfig(o,i,s){return this._svgIconConfigs.set(oEt(o,i),s),this}_addSvgIconSetConfig(o,i){let s=this._iconSetConfigs.get(o);return s?s.push(i):this._iconSetConfigs.set(o,[i]),this}_svgElementFromConfig(o){if(!o.svgElement){let i=this._svgElementFromString(o.svgText);this._setSvgAttributes(i,o.options),o.svgElement=i}return o.svgElement}_getIconConfigFromResolvers(o,i){for(let s=0;s<this._resolvers.length;s++){let a=this._resolvers[s](i,o);if(a)return RPr(a)?new h1(a.url,null,a.options):new h1(a,null)}}};r.\u0275fac=function(i){return new(i||r)(Et(Nke,8),Et(One),Et(yn,8),Et(iS))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function Kre(t){return t.cloneNode(!0)}function oEt(t,r){return t+":"+r}function RPr(t){return!!(t.url&&t.options)}var PPr=new En("MAT_ICON_DEFAULT_OPTIONS"),LPr=new En("mat-icon-location",{providedIn:"root",factory:jPr});function jPr(){let t=Zt(yn),r=t?t.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var iEt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],BPr=iEt.map(t=>`[${t}]`).join(", "),$Pr=/^url\(['"]?#(.*?)['"]?\)$/,sEt=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(o){this._color=o}get svgIcon(){return this._svgIcon}set svgIcon(o){o!==this._svgIcon&&(o?this._updateSvgIcon(o):this._svgIcon&&this._clearSvgElement(),this._svgIcon=o)}get fontSet(){return this._fontSet}set fontSet(o){let i=this._cleanupFontValue(o);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(o){let i=this._cleanupFontValue(o);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(o,i,s,a,l,u){this._elementRef=o,this._iconRegistry=i,this._location=a,this._errorHandler=l,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=bb.EMPTY,u&&(u.color&&(this.color=this._defaultColor=u.color),u.fontSet&&(this.fontSet=u.fontSet)),s||o.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(o){if(!o)return["",""];let i=o.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${o}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let o=this._elementsWithExternalReferences;if(o&&o.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(o){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(o),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(o)}_clearSvgElement(){let o=this._elementRef.nativeElement,i=o.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let s=o.childNodes[i];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let o=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>o.classList.remove(s)),i.forEach(s=>o.classList.add(s)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&o.classList.remove(this._previousFontIconClass),this.fontIcon&&o.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(o){return typeof o=="string"?o.trim().split(" ")[0]:o}_prependPathToReferences(o){let i=this._elementsWithExternalReferences;i&&i.forEach((s,a)=>{s.forEach(l=>{a.setAttribute(l.name,`url('${o}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(o){let i=o.querySelectorAll(BPr),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)iEt.forEach(l=>{let u=i[a],c=u.getAttribute(l),f=c?c.match($Pr):null;if(f){let d=s.get(u);d||(d=[],s.set(u,d)),d.push({name:l,value:f[1]})}})}_updateSvgIcon(o){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),o){let[i,s]=this._splitIconName(o);i&&(this._svgNamespace=i),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,i).pipe(Lc(1)).subscribe(a=>this._setSvgElement(a),a=>{let l=`Error retrieving icon ${i}:${s}! ${a.message}`;this._errorHandler.handleError(new Error(l))})}}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(OPr),Ik("aria-hidden"),vr(LPr),vr(iS),vr(PPr,8))},r.\u0275cmp=os({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,s){i&2&&(ed("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),NR(s.color?"mat-"+s.color:""),Bc("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",nu],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Qf,is],ngContentSelectors:NPr,decls:1,vars:0,template:function(i,s){i&1&&(rd(),qu(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=r;return t})(),aEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,As]});let t=r;return t})();var lEt={transformMenu:FR("transformMenu",[Pk("void",wb({opacity:0,transform:"scale(0.8)"})),fS("void => enter",cS("120ms cubic-bezier(0, 0, 0.2, 1)",wb({opacity:1,transform:"scale(1)"}))),fS("* => void",cS("100ms 25ms linear",wb({opacity:0})))]),fadeInItems:FR("fadeInItems",[Pk("showing",wb({opacity:1})),fS("void => *",[wb({opacity:0}),cS("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},nCi=lEt.fadeInItems,oCi=lEt.transformMenu;var UPr=new En("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=Zt(p1);return()=>t.scrollStrategies.reposition()}});function VPr(t){return()=>t.scrollStrategies.reposition()}var GPr={provide:UPr,deps:[p1],useFactory:VPr};var uEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[GPr],imports:[od,dz,As,Hre,d1,As]});let t=r;return t})();function WPr(t,r){if(t&1&&(Ei(0,"div",7),lS(1),Ui()),t&2){let n=r.$implicit;ru("routerLink",n.path),Al(),gne(" ",n.title," ")}}var cEt=(()=>{let r=class r{constructor(){this.title="victorbarbosa",this.routes=Ore.filter(o=>!!o.path)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=os({type:r,selectors:[["app-root"]],standalone:!0,features:[is],decls:13,vars:2,consts:[["drawer",""],[1,"example-container"],[1,"content-menu",3,"mode"],["routerLinkActive","active-link",3,"routerLink",4,"ngFor","ngForOf"],[1,"top-bar"],[1,"title"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"click"],["routerLinkActive","active-link",3,"routerLink"]],template:function(i,s){if(i&1){let a=vh();Ei(0,"mat-drawer-container",1)(1,"mat-drawer",2,0),Jf(3,WPr,2,2,"div",3),Ui(),Ei(4,"mat-drawer-content")(5,"div",4)(6,"div",5),lS(7,"Victor Barbosa"),Ui(),Ei(8,"button",6),$c("click",function(){gh(a);let u=Mz(2);return yh(u.toggle())}),Ei(9,"mat-icon"),lS(10,"more_vert"),Ui()()(),Ei(11,"div"),$a(12,"router-outlet"),Ui()()()}i&2&&(Al(),ru("mode","over"),Al(2),ru("ngForOf",s.routes))},dependencies:[od,wke,doe,RIe,r8,kIe,eEt,ZTe,QTe,gz,Yre,ZCt,$Ct,BCt,uEt,aEt,sEt],styles:['.top-bar[_ngcontent-%COMP%]{float:right;width:100%;display:flex;align-items:flex-end;justify-content:flex-end;position:fixed;background:#000}.top-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;left:10px;align-self:center;font-size:x-large}.top-bar[_ngcontent-%COMP%]:after{content:"";background:#fff;position:absolute;width:100vw;height:1px}mat-drawer-content[_ngcontent-%COMP%]{height:100vh}.content-title[_ngcontent-%COMP%]{background:red;cursor:pointer}']});let t=r;return t})();Bke(cEt,dCt).catch(t=>console.error(t));
