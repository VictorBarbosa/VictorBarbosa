import{$ as Lr,$a as da,A as Rd,Aa as $2,Ab as lAe,B as ez,Ba as z2,Bb as Dn,C as Sre,Ca as lR,Cb as hk,D as eR,Da as uR,Db as uAe,E as tz,Ea as Pd,Eb as cAe,F as ja,Fa as En,Fb as ub,G as Cre,Ga as az,Gb as fAe,H as uk,Ha as HTe,Hb as dAe,I as tR,Ia as lz,Ib as Nre,J as rR,Ja as uz,Jb as pAe,K as Ere,Ka as YTe,L as jd,La as jn,M as nR,Ma as XTe,Mb as fR,N as ob,Na as KTe,Nb as W2,O as rz,Oa as sb,P as a1,Pa as dk,Pb as cb,Q as Tre,Qa as cR,Qb as gk,R as $Te,Ra as ZTe,Rb as q2,S as zTe,Sa as QTe,T as oR,Ta as JTe,U as nz,Ua as ab,V as l1,Va as ng,W as tm,Wa as og,X as ws,Xa as kre,Y as la,Ya as rm,Z as Ps,Za as U2,_ as UTe,_a as fa,a as ar,aa as qn,ab as kc,b as vs,ba as VTe,bb as V2,c as KM,ca as Do,cb as eAe,da as Are,db as lb,e as D,ea as Ot,eb as tAe,f as gt,fa as Ir,fb as ig,g as cn,ga as iR,gb as nm,h as jf,ha as ua,hb as Lf,i as vl,ia as Hn,ib as G2,j as Be,ja as Ac,jb as Ld,k as PTe,ka as sR,kb as Pu,l as P2,la as GTe,lb as Lu,m as LTe,ma as ck,mb as pk,n as ZM,na as ib,nb as sg,o as vre,oa as fk,ob as pa,p as wre,pa as L2,pb as cz,q as ro,qa as B2,qb as rAe,r as Ra,ra as aR,rb as nAe,s as s1,sa as Pf,sb as mk,t as em,ta as oz,tb as Ire,u as an,ua as Zi,ub as oAe,v as QM,va as ca,vb as Bd,w as _re,wa as iz,wb as iAe,x as BTe,xa as WTe,xb as sAe,y as Wn,ya as sz,yb as Dre,z as JM,za as qTe,zb as aAe}from"./chunk-FA62G7WV.js";function Ic(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var f1,lg,Tne=D(()=>{"use strict";f1=class{constructor(r,n){this.backend=r,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,n){this.dataIdsCount++,this.data.set(r,n)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}},lg=class{refCount(r){return Ic("refCount")}incRef(r){return Ic("incRef")}timerAvailable(){return!0}time(r){return Ic("time")}read(r){return Ic("read")}readSync(r){return Ic("readSync")}readToGPU(r,n){return Ic("readToGPU")}numDataIds(){return Ic("numDataIds")}disposeData(r,n){return Ic("disposeData")}write(r,n,o){return Ic("write")}move(r,n,o,i,s){return Ic("move")}createTensorFromGPUData(r,n,o){return Ic("createTensorFromGPUData")}memory(){return Ic("memory")}floatPrecision(){return Ic("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Ic("dispose")}}});function ike(t){let r=t.length,n=0;for(;r>0;)n=Math.random()*r|0,r--,Dz(t,r,n)}function tTt(t,r){if(t.length!==r.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${r.length}`);let n=t.length,o=0;for(;n>0;)o=Math.random()*n|0,n--,Dz(t,n,o),Dz(r,n,o)}function Ak(t,r,n){return Math.max(t,Math.min(r,n))}function rTt(t){return t%2===0?t:t+1}function Dz(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function nTt(t){let r=0;for(let n=0;n<t.length;n++)r+=t[n];return r}function oTt(t,r){let n=Math.random();return r*n+(1-n)*t}function iTt(t,r){let n=0;for(let o=0;o<t.length;o++){let i=Number(t[o])-Number(r[o]);n+=i*i}return n}function de(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}function Bo(t,r,n=""){de(Kl(t,r),()=>n+` Shapes ${t} and ${r} must match`)}function zf(t){de(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function rn(t){if(t.length===0)return 1;let r=t[0];for(let n=1;n<t.length;n++)r*=t[n];return r}function sTt(t){return t.length===0}function Ane(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&r[n]!==null&&t[n]!==r[n])return!1;return!0}function Kl(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function pb(t){return t%1===0}function aTt(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let r=Math.exp(2*t);return(r-1)/(r+1)}}function lTt(t){let r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function uTt(t){let r=new Uint32Array(t);for(let n=0;n<t;++n)r[n]=n;return ike(r),r}function Q2(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function cTt(t,r=i=>0,n,o){return new Promise((i,s)=>{let a=0,l=()=>{if(t()){i();return}a++;let u=r(a);if(n!=null&&a>=n){s();return}o!=null?o(l,u):setTimeout(l,u)};l()})}function fTt(t,r){let n=1,o=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(o!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${o} and dim ${s}`);o=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(o===-1){if(r>0&&r!==n)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(r%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${r} / ${n}`);let i=t.slice();return i[o]=r/n,i}function as(t,r){let n=r.length;return t=t==null?r.map((o,i)=>i):[].concat(t),de(t.every(o=>o>=-n&&o<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),de(t.every(o=>pb(o)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(o=>o<0?n+o:o)}function kne(t,r){let n=[],o=[],i=r!=null&&Array.isArray(r)&&r.length===0,s=r==null||i?null:as(r,t).sort(),a=0;for(let l=0;l<t.length;++l){if(s!=null){if(s[a]===l&&t[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(s[a]==null||s[a]>l)&&t[l]===1&&(n.push(t[l]),o.push(l)),s[a]<=l&&a++}t[l]!==1&&(n.push(t[l]),o.push(l))}return{newShape:n,keptDims:o}}function Ine(t,r){return Nz(t,r)}function Nz(t,r){let n=null;if(t==null||t==="float32")n=new Float32Array(r);else if(t==="int32")n=new Int32Array(r);else if(t==="bool")n=new Uint8Array(r);else if(t==="string")n=new Array(r);else throw new Error(`Unknown data type ${t}`);return n}function Dne(t,r){for(let n=0;n<t.length;n++){let o=t[n];if(isNaN(o)||!isFinite(o))throw Error(`A tensor of type ${r} being uploaded contains ${o}.`)}}function Nne(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function dTt(t,r){return!(r==="complex64"||r==="float32"&&t!=="complex64"||r==="int32"&&t!=="float32"&&t!=="complex64"||r==="bool"&&t==="bool")}function kk(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Fne(t){if(t==null)return 0;let r=0;return t.forEach(n=>r+=n.length),r}function im(t){return typeof t=="string"||t instanceof String}function ske(t){return typeof t=="boolean"}function ake(t){return typeof t=="number"}function d1(t){return Array.isArray(t)?d1(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":ake(t)?"float32":im(t)?"string":ske(t)?"bool":"float32"}function ug(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ik(t,r){for(let n=r;n<t;++n)if(t%n===0)return n;return t}function cg(t){let r=t.length;if(r<2)return[];let n=new Array(r-1);n[r-2]=t[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*t[o+1];return n}function lke(t,r,n,o=!1){let i=new Array;if(r.length===1){let s=r[0]*(o?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{let s=r[0],a=r.slice(1),l=a.reduce((u,c)=>u*c)*(o?2:1);for(let u=0;u<s;u++)i[u]=lke(t+u*l,a,n,o)}return i}function Z2(t,r,n=!1){if(t.length===0)return r[0];let o=t.reduce((i,s)=>i*s)*(n?2:1);if(o===0)return[];if(o!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}${n?" for a complex tensor":""}.`);return lke(0,t,r,n)}function pTt(t,r){if(Array.isArray(t))return t;if(r==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(r==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(r==="bool"||r==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${r}`)}function RR(t,r){let n=Dk(t,r);for(let o=0;o<n.length;o++)n[o]=1;return n}function Dk(t,r){if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function mTt(t,r){let n=t.reduce((o,i)=>o*i,1);if(r==null||r==="float32")return Z2(t,new Float32Array(n));if(r==="int32")return Z2(t,new Int32Array(n));if(r==="bool")return Z2(t,new Uint8Array(n));throw new Error(`Unknown data type ${r}`)}function ei(t){t.forEach(r=>{de(Number.isInteger(r)&&r>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function hTt(t,r,n){if(r===0)return 0;if(r===1)return t[0];let o=t[t.length-1];for(let i=0;i<t.length-1;++i)o+=n[i]*t[i];return o}function gTt(t,r,n){if(r===0)return[];if(r===1)return[t];let o=new Array(r);for(let i=0;i<o.length-1;++i)o[i]=Math.floor(t/n[i]),t-=o[i]*n[i];return o[o.length-1]=t,o}function J2(t){return t&&t.then&&typeof t.then=="function"}var Bs=D(()=>{"use strict";});function bTt(t){let r={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...o)=>(xTt(r,o[0],o[1]),o.join("="))),r}function xTt(t,r,n){t[decodeURIComponent(r)]=decodeURIComponent(n||"")}function vTt(t,r){let n=r.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:r}function Fe(){return Fz}function cke(t){Fz=t}var uke,Nk,Fz,ma=D(()=>{"use strict";Bs();uke="tfjsflags",Nk=class{constructor(r){this.global=r,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=bTt,this.populateURLFlags()}setPlatform(r,n){this.platform!=null&&(Fe().getBool("IS_TEST")||Fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${r}.`)),this.platformName=r,this.platform=n}registerFlag(r,n,o){if(this.flagRegistry[r]={evaluationFn:n,setHook:o},this.urlFlags[r]!=null){let i=this.urlFlags[r];Fe().getBool("IS_TEST")||Fe().getBool("PROD")||console.warn(`Setting feature override from URL ${r}: ${i}.`),this.set(r,i)}}getAsync(r){return Be(this,null,function*(){return r in this.flags?this.flags[r]:(this.flags[r]=yield this.evaluateFlag(r),this.flags[r])})}get(r){if(r in this.flags)return this.flags[r];let n=this.evaluateFlag(r);if(J2(n))throw new Error(`Flag ${r} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[r]=n,this.flags[r]}getNumber(r){return this.get(r)}getBool(r){return this.get(r)}getString(r){return this.get(r)}getFlags(){return this.flags}get features(){return this.flags}set(r,n){if(this.flagRegistry[r]==null)throw new Error(`Cannot set flag ${r} as it has not been registered.`);this.flags[r]=n,this.flagRegistry[r].setHook!=null&&this.flagRegistry[r].setHook(n)}evaluateFlag(r){if(this.flagRegistry[r]==null)throw new Error(`Cannot evaluate flag '${r}': no evaluation function found.`);return this.flagRegistry[r].evaluationFn()}setFlags(r){this.flags=Object.assign({},r)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let r=this.getQueryParams(this.global.location.search);uke in r&&r[uke].split(",").forEach(o=>{let[i,s]=o.split(":");this.urlFlags[i]=vTt(i,s)})}};Fz=null});function Mne(){if(One==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");One=t}return One}function wTt(){let t=Mne();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function jR(t,r){let n=wTt();if(n.has(t))return n.get(t);{let o=r();return n.set(t,o),n.get(t)}}var One,Oz=D(()=>{"use strict";});var mb,fg,dg,zd,hb,eS,tS,gb,yb,pg,mg,hg,gg,yg,bb,rS,xb,nS,vb,wb,oS,p1,Rne,iS,sm,bg,xg,sS,_b,Sb,Cb,aS,Eb,Tb,lS,uS,vg,wg,cS,Ab,fS,dS,pS,kb,mS,hS,gS,Ib,Fk,Ok,Mk,_g,yS,Sg,bS,Cg,m1,Eg,Db,Tg,xS,vS,wS,Ag,kg,Nb,Fb,_S,h1,Ig,am,SS,CS,Dg,Ng,Fg,Ob,g1,y1,ES,Og,Mg,b1,x1,v1,_Tt,jne,STt,Mb,TS,CTt,Rb,Rg,jb,AS,Pb,kS,IS,Lb,Bb,jg,$b,Pg,DS,Lg,zb,w1,NS,FS,OS,Ub,Vb,Gb,Wb,ETt,Bg,qb,Hb,MS,RS,jS,PS,LS,$g,zg,Yb,Xb,BS,Kb,$S,Ug,Zb,Vg,Gg,zS,US,VS,Qb,Wg,Jb,qg,Hg,Yg,Xg,Kg,Zg,ex,tx,rx,nx,GS,WS,qS,HS,YS,Qg,XS,_1,KS,ZS,QS,JS,Jg,e0,t0,lm,eC,tC,um,rC,ox,ix,TTt,sx,r0,Rk,nC,S1,C1,E1,Ee=D(()=>{"use strict";mb="Abs",fg="Acos",dg="Acosh",zd="Add",hb="AddN",eS="All",tS="Any",gb="ArgMax",yb="ArgMin",pg="Asin",mg="Asinh",hg="Atan",gg="Atanh",yg="Atan2",bb="AvgPool",rS="AvgPoolGrad",xb="AvgPool3D",nS="AvgPool3DGrad",vb="BatchMatMul",wb="BatchToSpaceND",oS="Bincount",p1="BitwiseAnd",Rne="BroadcastTo",iS="BroadcastArgs",sm="Cast",bg="Ceil",xg="ClipByValue",sS="Complex",_b="ComplexAbs",Sb="Concat",Cb="Conv2D",aS="Conv2DBackpropFilter",Eb="Conv2DBackpropInput",Tb="Conv3D",lS="Conv3DBackpropFilterV2",uS="Conv3DBackpropInputV2",vg="Cos",wg="Cosh",cS="Cumprod",Ab="Cumsum",fS="CropAndResize",dS="DenseBincount",pS="DepthToSpace",kb="DepthwiseConv2dNative",mS="DepthwiseConv2dNativeBackpropFilter",hS="DepthwiseConv2dNativeBackpropInput",gS="Diag",Ib="Dilation2D",Fk="Dilation2DBackpropInput",Ok="Dilation2DBackpropFilter",Mk="Draw",_g="RealDiv",yS="Einsum",Sg="Elu",bS="EluGrad",Cg="Erf",m1="Equal",Eg="Exp",Db="ExpandDims",Tg="Expm1",xS="FFT",vS="Fill",wS="FlipLeftRight",Ag="Floor",kg="FloorDiv",Nb="FusedBatchNorm",Fb="GatherV2",_S="GatherNd",h1="Greater",Ig="GreaterEqual",am="Identity",SS="IFFT",CS="Imag",Dg="IsFinite",Ng="IsInf",Fg="IsNan",Ob="LeakyRelu",g1="Less",y1="LessEqual",ES="LinSpace",Og="Log",Mg="Log1p",b1="LogicalAnd",x1="LogicalNot",v1="LogicalOr",_Tt="LogicalXor",jne="LogSoftmax",STt="LowerBound",Mb="LRN",TS="LRNGrad",CTt="MatrixBandPart",Rb="Max",Rg="Maximum",jb="MaxPool",AS="MaxPoolGrad",Pb="MaxPool3D",kS="MaxPool3DGrad",IS="MaxPoolWithArgmax",Lb="Mean",Bb="Min",jg="Minimum",$b="MirrorPad",Pg="Mod",DS="Multinomial",Lg="Multiply",zb="Neg",w1="NotEqual",NS="NonMaxSuppressionV3",FS="NonMaxSuppressionV4",OS="NonMaxSuppressionV5",Ub="OnesLike",Vb="OneHot",Gb="Pack",Wb="PadV2",ETt="Pool",Bg="Pow",qb="Prelu",Hb="Prod",MS="RaggedGather",RS="RaggedRange",jS="RaggedTensorToTensor",PS="Range",LS="Real",$g="Reciprocal",zg="Relu",Yb="Reshape",Xb="ResizeNearestNeighbor",BS="ResizeNearestNeighborGrad",Kb="ResizeBilinear",$S="ResizeBilinearGrad",Ug="Relu6",Zb="Reverse",Vg="Round",Gg="Rsqrt",zS="ScatterNd",US="TensorScatterUpdate",VS="SearchSorted",Qb="Select",Wg="Selu",Jb="Slice",qg="Sin",Hg="Sinh",Yg="Sign",Xg="Sigmoid",Kg="Softplus",Zg="Sqrt",ex="Sum",tx="SpaceToBatchND",rx="SplitV",nx="Softmax",GS="SparseFillEmptyRows",WS="SparseReshape",qS="SparseSegmentMean",HS="SparseSegmentSum",YS="SparseToDense",Qg="SquaredDifference",XS="Square",_1="StaticRegexReplace",KS="StridedSlice",ZS="StringNGrams",QS="StringSplit",JS="StringToHashBucketFast",Jg="Sub",e0="Tan",t0="Tanh",lm="Tile",eC="TopK",tC="Transform",um="Transpose",rC="Unique",ox="Unpack",ix="UnsortedSegmentSum",TTt="UpperBound",sx="ZerosLike",r0="Step",Rk="FromPixels",nC="RotateWithOffset",S1="_FusedMatMul",C1="FusedConv2D",E1="FusedDepthwiseConv2D"});function n0(...t){Fe().getBool("IS_TEST")||Fe().getBool("PROD")||console.warn(...t)}function ATt(...t){Fe().getBool("IS_TEST")||Fe().getBool("PROD")||console.log(...t)}var Mz=D(()=>{"use strict";ma();});function oC(t,r){let n=Lne(t,r);return jk.get(n)}function Rz(t){return PR.get(t)}function LR(t){let r=jk.entries(),n=[];for(;;){let{done:o,value:i}=r.next();if(o)break;let[s,a]=i,[l]=s.split("_");l===t&&n.push(a)}return n}function Pk(t){let{kernelName:r,backendName:n}=t,o=Lne(r,n);jk.has(o)&&n0(`The kernel '${r}' for backend '${n}' is already registered`),jk.set(o,t)}function Pne(t){let{kernelName:r}=t;PR.has(r)&&Fe().getBool("DEBUG")&&n0(`Overriding the gradient for '${r}'`),PR.set(r,t)}function kTt(t,r){let n=Lne(t,r);if(!jk.has(n))throw new Error(`The kernel '${t}' for backend '${r}' is not registered`);jk.delete(n)}function ITt(t){if(!PR.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);PR.delete(t)}function DTt(t,r){LR(t).forEach(o=>{let i=Object.assign({},o,{backendName:r});Pk(i)})}function Lne(t,r){return`${r}_${t}`}var jk,PR,BR=D(()=>{"use strict";ma();Oz();Mz();jk=jR("kernelRegistry",()=>new Map),PR=jR("gradRegistry",()=>new Map)});function jz(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Bne=D(()=>{"use strict";});var _ke=gt((V3r,wke)=>{"use strict";wke.exports=hi;var Ud=null;try{Ud=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function hi(t,r,n){this.low=t|0,this.high=r|0,this.unsigned=!!n}hi.prototype.__isLong__;Object.defineProperty(hi.prototype,"__isLong__",{value:!0});function Nc(t){return(t&&t.__isLong__)===!0}hi.isLong=Nc;var dke={},pke={};function sC(t,r){var n,o,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(o=pke[t],o)?o:(n=gi(t,(t|0)<0?-1:0,!0),i&&(pke[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(o=dke[t],o)?o:(n=gi(t,t<0?-1:0,!1),i&&(dke[t]=n),n))}hi.fromInt=sC;function Vd(t,r){if(isNaN(t))return r?iC:Gd;if(r){if(t<0)return iC;if(t>=yke)return vke}else{if(t<=-hke)return Dc;if(t+1>=hke)return xke}return t<0?Vd(-t,r).neg():gi(t%Bk|0,t/Bk|0,r)}hi.fromNumber=Vd;function gi(t,r,n){return new hi(t,r,n)}hi.fromBits=gi;var Pz=Math.pow;function zne(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Gd;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return zne(t.substring(1),r,n).neg();for(var i=Vd(Pz(n,8)),s=Gd,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+l),n);if(l<8){var c=Vd(Pz(n,l));s=s.mul(c).add(Vd(u))}else s=s.mul(i),s=s.add(Vd(u))}return s.unsigned=r,s}hi.fromString=zne;function cm(t,r){return typeof t=="number"?Vd(t,r):typeof t=="string"?zne(t,r):gi(t.low,t.high,typeof r=="boolean"?r:t.unsigned)}hi.fromValue=cm;var mke=65536,NTt=1<<24,Bk=mke*mke,yke=Bk*Bk,hke=yke/2,gke=sC(NTt),Gd=sC(0);hi.ZERO=Gd;var iC=sC(0,!0);hi.UZERO=iC;var Lk=sC(1);hi.ONE=Lk;var bke=sC(1,!0);hi.UONE=bke;var $ne=sC(-1);hi.NEG_ONE=$ne;var xke=gi(-1,2147483647,!1);hi.MAX_VALUE=xke;var vke=gi(-1,-1,!0);hi.MAX_UNSIGNED_VALUE=vke;var Dc=gi(0,-2147483648,!1);hi.MIN_VALUE=Dc;var $t=hi.prototype;$t.toInt=function(){return this.unsigned?this.low>>>0:this.low};$t.toNumber=function(){return this.unsigned?(this.high>>>0)*Bk+(this.low>>>0):this.high*Bk+(this.low>>>0)};$t.toString=function(r){if(r=r||10,r<2||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Dc)){var n=Vd(r),o=this.div(n),i=o.mul(n).sub(this);return o.toString(r)+i.toInt().toString(r)}else return"-"+this.neg().toString(r);for(var s=Vd(Pz(r,6),this.unsigned),a=this,l="";;){var u=a.div(s),c=a.sub(u.mul(s)).toInt()>>>0,f=c.toString(r);if(a=u,a.isZero())return f+l;for(;f.length<6;)f="0"+f;l=""+f+l}};$t.getHighBits=function(){return this.high};$t.getHighBitsUnsigned=function(){return this.high>>>0};$t.getLowBits=function(){return this.low};$t.getLowBitsUnsigned=function(){return this.low>>>0};$t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Dc)?64:this.neg().getNumBitsAbs();for(var r=this.high!=0?this.high:this.low,n=31;n>0&&!(r&1<<n);n--);return this.high!=0?n+33:n+1};$t.isZero=function(){return this.high===0&&this.low===0};$t.eqz=$t.isZero;$t.isNegative=function(){return!this.unsigned&&this.high<0};$t.isPositive=function(){return this.unsigned||this.high>=0};$t.isOdd=function(){return(this.low&1)===1};$t.isEven=function(){return(this.low&1)===0};$t.equals=function(r){return Nc(r)||(r=cm(r)),this.unsigned!==r.unsigned&&this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low};$t.eq=$t.equals;$t.notEquals=function(r){return!this.eq(r)};$t.neq=$t.notEquals;$t.ne=$t.notEquals;$t.lessThan=function(r){return this.comp(r)<0};$t.lt=$t.lessThan;$t.lessThanOrEqual=function(r){return this.comp(r)<=0};$t.lte=$t.lessThanOrEqual;$t.le=$t.lessThanOrEqual;$t.greaterThan=function(r){return this.comp(r)>0};$t.gt=$t.greaterThan;$t.greaterThanOrEqual=function(r){return this.comp(r)>=0};$t.gte=$t.greaterThanOrEqual;$t.ge=$t.greaterThanOrEqual;$t.compare=function(r){if(Nc(r)||(r=cm(r)),this.eq(r))return 0;var n=this.isNegative(),o=r.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1};$t.comp=$t.compare;$t.negate=function(){return!this.unsigned&&this.eq(Dc)?Dc:this.not().add(Lk)};$t.neg=$t.negate;$t.add=function(r){Nc(r)||(r=cm(r));var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=r.high>>>16,l=r.high&65535,u=r.low>>>16,c=r.low&65535,f=0,d=0,p=0,m=0;return m+=s+c,p+=m>>>16,m&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=o+l,f+=d>>>16,d&=65535,f+=n+a,f&=65535,gi(p<<16|m,f<<16|d,this.unsigned)};$t.subtract=function(r){return Nc(r)||(r=cm(r)),this.add(r.neg())};$t.sub=$t.subtract;$t.multiply=function(r){if(this.isZero())return Gd;if(Nc(r)||(r=cm(r)),Ud){var n=Ud.mul(this.low,this.high,r.low,r.high);return gi(n,Ud.get_high(),this.unsigned)}if(r.isZero())return Gd;if(this.eq(Dc))return r.isOdd()?Dc:Gd;if(r.eq(Dc))return this.isOdd()?Dc:Gd;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(gke)&&r.lt(gke))return Vd(this.toNumber()*r.toNumber(),this.unsigned);var o=this.high>>>16,i=this.high&65535,s=this.low>>>16,a=this.low&65535,l=r.high>>>16,u=r.high&65535,c=r.low>>>16,f=r.low&65535,d=0,p=0,m=0,h=0;return h+=a*f,m+=h>>>16,h&=65535,m+=s*f,p+=m>>>16,m&=65535,m+=a*c,p+=m>>>16,m&=65535,p+=i*f,d+=p>>>16,p&=65535,p+=s*c,d+=p>>>16,p&=65535,p+=a*u,d+=p>>>16,p&=65535,d+=o*f+i*c+s*u+a*l,d&=65535,gi(m<<16|h,d<<16|p,this.unsigned)};$t.mul=$t.multiply;$t.divide=function(r){if(Nc(r)||(r=cm(r)),r.isZero())throw Error("division by zero");if(Ud){if(!this.unsigned&&this.high===-2147483648&&r.low===-1&&r.high===-1)return this;var n=(this.unsigned?Ud.div_u:Ud.div_s)(this.low,this.high,r.low,r.high);return gi(n,Ud.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?iC:Gd;var o,i,s;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return iC;if(r.gt(this.shru(1)))return bke;s=iC}else{if(this.eq(Dc)){if(r.eq(Lk)||r.eq($ne))return Dc;if(r.eq(Dc))return Lk;var a=this.shr(1);return o=a.div(r).shl(1),o.eq(Gd)?r.isNegative()?Lk:$ne:(i=this.sub(r.mul(o)),s=o.add(i.div(r)),s)}else if(r.eq(Dc))return this.unsigned?iC:Gd;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();s=Gd}for(i=this;i.gte(r);){o=Math.max(1,Math.floor(i.toNumber()/r.toNumber()));for(var l=Math.ceil(Math.log(o)/Math.LN2),u=l<=48?1:Pz(2,l-48),c=Vd(o),f=c.mul(r);f.isNegative()||f.gt(i);)o-=u,c=Vd(o,this.unsigned),f=c.mul(r);c.isZero()&&(c=Lk),s=s.add(c),i=i.sub(f)}return s};$t.div=$t.divide;$t.modulo=function(r){if(Nc(r)||(r=cm(r)),Ud){var n=(this.unsigned?Ud.rem_u:Ud.rem_s)(this.low,this.high,r.low,r.high);return gi(n,Ud.get_high(),this.unsigned)}return this.sub(this.div(r).mul(r))};$t.mod=$t.modulo;$t.rem=$t.modulo;$t.not=function(){return gi(~this.low,~this.high,this.unsigned)};$t.and=function(r){return Nc(r)||(r=cm(r)),gi(this.low&r.low,this.high&r.high,this.unsigned)};$t.or=function(r){return Nc(r)||(r=cm(r)),gi(this.low|r.low,this.high|r.high,this.unsigned)};$t.xor=function(r){return Nc(r)||(r=cm(r)),gi(this.low^r.low,this.high^r.high,this.unsigned)};$t.shiftLeft=function(r){return Nc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?gi(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):gi(0,this.low<<r-32,this.unsigned)};$t.shl=$t.shiftLeft;$t.shiftRight=function(r){return Nc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?gi(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):gi(this.high>>r-32,this.high>=0?0:-1,this.unsigned)};$t.shr=$t.shiftRight;$t.shiftRightUnsigned=function(r){if(Nc(r)&&(r=r.toInt()),r&=63,r===0)return this;var n=this.high;if(r<32){var o=this.low;return gi(o>>>r|n<<32-r,n>>>r,this.unsigned)}else return r===32?gi(n,0,this.unsigned):gi(n>>>r-32,0,this.unsigned)};$t.shru=$t.shiftRightUnsigned;$t.shr_u=$t.shiftRightUnsigned;$t.toSigned=function(){return this.unsigned?gi(this.low,this.high,!1):this};$t.toUnsigned=function(){return this.unsigned?this:gi(this.low,this.high,!0)};$t.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()};$t.toBytesLE=function(){var r=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]};$t.toBytesBE=function(){var r=this.high,n=this.low;return[r>>>24,r>>>16&255,r>>>8&255,r&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};hi.fromBytes=function(r,n,o){return o?hi.fromBytesLE(r,n):hi.fromBytesBE(r,n)};hi.fromBytesLE=function(r,n){return new hi(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,n)};hi.fromBytesBE=function(r,n){return new hi(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],n)}});function $R(t){return lC.fromString(t,!0,16)}function Une(t){return t.xor(t.shru(47))}function Eke(t,r,n){let o=t.slice(r,r+n);return lC.fromBytes(Array.from(o),!0,!0)}function ti(t,r){return Eke(t,r,8)}function Ske(t,r){return Eke(t,r,4)}function ha(t,r){return r===0?t:t.shru(r).or(t.shl(64-r))}function T1(t,r,n=$R("9ddfea08eb382d69")){let o=t.xor(r).mul(n);o=o.xor(o.shru(47));let i=r.xor(o).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function FTt(t,r,n,o,i,s){i=i.add(t),s=ha(s.add(i).add(o),21);let a=i;return i=i.add(r),i=i.add(n),s=s.add(ha(i,44)),[i.add(o),s.add(a)]}function Lz(t,r,n,o){return FTt(ti(t,r),ti(t,r+8),ti(t,r+16),ti(t,r+24),n,o)}function OTt(t,r=t.length){if(r>=8){let n=Zl.add(r*2),o=ti(t,0).add(Zl),i=ti(t,r-8),s=ha(i,37).mul(n).add(o),a=ha(o,25).add(i).mul(n);return T1(s,a,n)}if(r>=4){let n=Zl.add(r*2),o=Ske(t,0);return T1(o.shl(3).add(r),Ske(t,r-4),n)}if(r>0){let n=t[0],o=t[r>>1],i=t[r-1],s=n+(o<<8),a=r+(i<<2);return Une(Zl.mul(s).xor(Cke.mul(a))).mul(Zl)}return Zl}function MTt(t,r=t.length){let n=Zl.add(r*2),o=ti(t,0).mul(aC),i=ti(t,8),s=ti(t,r-8).mul(n),a=ti(t,r-16).mul(Zl);return T1(ha(o.add(i),43).add(ha(s,30)).add(a),o.add(ha(i.add(Zl),18)).add(s),n)}function RTt(t,r=t.length){let n=Zl.add(r*2),o=ti(t,0).mul(Zl),i=ti(t,8),s=ti(t,r-8).mul(n),a=ti(t,r-16).mul(Zl),l=ha(o.add(i),43).add(ha(s,30)).add(a),u=T1(l,o.add(ha(i.add(Zl),18)).add(s),n),c=ti(t,16).mul(n),f=ti(t,24),d=l.add(ti(t,r-32)).mul(n),p=u.add(ti(t,r-24)).mul(n);return T1(ha(c.add(f),43).add(ha(d,30)).add(p),c.add(ha(f.add(o),18)).add(d),n)}function jTt(t,r=t.length){let n=lC.fromNumber(81,!0);if(r<=32)return r<=16?OTt(t,r):MTt(t,r);if(r<=64)return RTt(t,r);let o=n,i=n.mul(aC).add(113),s=Une(i.mul(Zl).add(113)).mul(Zl),a=[lC.UZERO,lC.UZERO],l=[lC.UZERO,lC.UZERO];o=o.mul(Zl).add(ti(t,0));let u=0,c=(r-1>>6)*64,f=c+(r-1&63)-63;do o=ha(o.add(i).add(a[0]).add(ti(t,u+8)),37).mul(aC),i=ha(i.add(a[1]).add(ti(t,u+48)),42).mul(aC),o=o.xor(l[1]),i=i.add(a[0]).add(ti(t,u+40)),s=ha(s.add(l[0]),33).mul(aC),a=Lz(t,u,a[1].mul(aC),o.add(l[0])),l=Lz(t,u+32,s.add(l[1]),i.add(ti(t,u+16))),[s,o]=[o,s],u+=64;while(u!==c);let d=aC.add(s.and(255).shl(1));return u=f,l[0]=l[0].add(r-1&63),a[0]=a[0].add(l[0]),l[0]=l[0].add(a[0]),o=ha(o.add(i).add(a[0]).add(ti(t,u+8)),37).mul(d),i=ha(i.add(a[1]).add(ti(t,u+48)),42).mul(d),o=o.xor(l[1].mul(9)),i=i.add(a[0].mul(9).add(ti(t,u+40))),s=ha(s.add(l[0]),33).mul(d),a=Lz(t,u,a[1].mul(d),o.add(l[0])),l=Lz(t,u+32,s.add(l[1]),i.add(ti(t,u+16))),[s,o]=[o,s],T1(T1(a[0],l[0],d).add(Une(i).mul(Cke)).add(s),T1(a[1],l[1],d).add(o),d)}var Vne,lC,Cke,aC,Zl,Tke=D(()=>{"use strict";Vne=jf(_ke());lC=Vne.default||Vne;Cke=$R("c3a5c85c97cb3127"),aC=$R("b492b66fbe98f273"),Zl=$R("9ae16a3b2f90404f")});var H={};cn(H,{arraysEqual:()=>Kl,arraysEqualWithNull:()=>Ane,assert:()=>de,assertNonNegativeIntegerDimensions:()=>ei,assertNonNull:()=>zf,assertShapesMatch:()=>Bo,bytesFromStringArray:()=>Fne,bytesPerElement:()=>kk,checkConversionForErrors:()=>Dne,clamp:()=>Ak,computeStrides:()=>cg,convertBackendValuesAndArrayBuffer:()=>pTt,createScalarValue:()=>PTt,createShuffledIndices:()=>uTt,decodeString:()=>zk,distSquared:()=>iTt,encodeString:()=>A1,fetch:()=>BTt,fingerPrint64:()=>jTt,flatten:()=>fm,getArrayFromDType:()=>Nz,getTypedArrayFromDType:()=>Ine,hasEncodingLoss:()=>dTt,hexToLong:()=>$R,indexToLoc:()=>gTt,inferDtype:()=>d1,inferFromImplicitShape:()=>fTt,isBoolean:()=>ske,isFunction:()=>ug,isInt:()=>pb,isNumber:()=>ake,isPromise:()=>J2,isScalarShape:()=>sTt,isString:()=>im,isTypedArray:()=>Li,isValidDtype:()=>Nne,locToIndex:()=>hTt,makeOnesTypedArray:()=>RR,makeZerosNestedTypedArray:()=>mTt,makeZerosTypedArray:()=>Dk,nearestDivisor:()=>Ik,nearestLargerEven:()=>rTt,now:()=>uC,parseAxisParam:()=>as,randUniform:()=>oTt,repeatedTry:()=>cTt,rightPad:()=>Q2,shuffle:()=>ike,shuffleCombo:()=>tTt,sizeFromShape:()=>rn,sizeToSquarishShape:()=>lTt,squeezeShape:()=>kne,sum:()=>nTt,swap:()=>Dz,tanh:()=>aTt,toNestedArray:()=>Z2,toTypedArray:()=>$k});function PTt(t,r){return r==="string"?A1(t):$k([t],r)}function LTt(t,r){return t instanceof Float32Array&&r==="float32"||t instanceof Int32Array&&r==="int32"||t instanceof Uint8Array&&r==="bool"}function $k(t,r){if(r==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=fm(t)),Fe().getBool("DEBUG")&&Dne(t,r),LTt(t,r))return t;if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool"){let n=new Uint8Array(t.length);for(let o=0;o<n.length;++o)Math.round(t[o])!==0&&(n[o]=1);return n}else throw new Error(`Unknown data type ${r}`)}function uC(){return Fe().platform.now()}function BTt(t,r){return Fe().platform.fetch(t,r)}function A1(t,r="utf-8"){return r=r||"utf-8",Fe().platform.encode(t,r)}function zk(t,r="utf-8"){return r=r||"utf-8",Fe().platform.decode(t,r)}function Li(t){return Fe().platform.isTypedArray!=null?Fe().platform.isTypedArray(t):jz(t)}function fm(t,r=[],n=!1){if(r==null&&(r=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||J2(t)||t==null||Li(t)&&n)r.push(t);else if(Array.isArray(t)||Li(t))for(let o=0;o<t.length;++o)fm(t[o],r,n);else{let o=-1;for(let i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(o=Math.max(o,Number(i)));for(let i=0;i<=o;i++)fm(t[i],r,n)}return r}var Ze=D(()=>{"use strict";ma();Bne();Bs();Bs();Tke();});function $Tt(t,r,n){if(r!=="float32")return!1;for(let o=0;o<t.length;o++){let i=t[o];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}var Bz,Gne,Ake=D(()=>{"use strict";ma();Ze();Bz=class{constructor(r,n){this.backendTimer=r,this.logger=n,n==null&&(this.logger=new Gne)}profileKernel(r,n,o){let i,s=()=>{i=o()},a,l=uC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(let c of i)c.dataSync();a=Promise.resolve({kernelMs:uC()-l})}if(Fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){let f=i[c];f.data().then(d=>{$Tt(d,f.dtype,r)})}return{kernelName:r,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(r){let{kernelName:n,outputs:o,timeMs:i,inputs:s,extraInfo:a}=r;o.forEach(l=>{Promise.all([l.data(),i,a]).then(u=>{this.logger.logKernelProfile(n,l,u[0],u[1],s,u[2])})})}};Gne=class{logKernelProfile(r,n,o,i,s,a){let l=typeof i=="number"?Q2(`${i}ms`,9):i.error,u=Q2(r,25),c=n.rank,f=n.size,d=Q2(n.shape.toString(),14),p="";for(let m in s){let h=s[m];if(h!=null){let g=h.shape||n.shape,y=g.length;p+=`${m}: ${y}D ${y>0?g:""} `}}console.log(`%c${u}	%c${l}	%c${c}D ${d}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function kke(t,r,n){let o={},i={};for(let u=0;u<r.length;u++)o[r[u].id]=!0;for(let u=0;u<t.length;u++){let c=t[u],f=c.inputs;for(let d in f){let p=f[d],m=!1;for(let h=0;h<r.length;h++)if(o[p.id]){c.outputs.forEach(g=>o[g.id]=!0),m=!0,i[c.id]=!0;break}if(m)break}}let s={};s[n.id]=!0;let a={};for(let u=t.length-1;u>=0;u--){let c=t[u],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(let p in f)s[f[p].id]=!0,a[c.id]=!0;break}}let l=[];for(let u=0;u<t.length;u++){let c=t[u];if(i[c.id]&&a[c.id]){let f={};for(let p in c.inputs){let m=c.inputs[p];o[m.id]&&(f[p]=m)}let d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,l.push(d)}}return l}function Ike(t,r,n,o){for(let i=r.length-1;i>=0;i--){let s=r[i],a=[];if(s.outputs.forEach(u=>{let c=t[u.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let l=s.gradient(a);for(let u in s.inputs){if(!(u in l))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(l)}.`);let c=n(()=>l[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let f=s.inputs[u];if(!Kl(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{let d=t[f.id];t[f.id]=o(d,c),d.dispose()}}}}var Dke=D(()=>{"use strict";Ze();});function Fke(t,r,n,o){let i=cg(r),s=zTt(t,r,n,i),a=r.length,l=$z(t,r,n,i,s),u=["Tensor"];return o&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${a}`),u.push(`  shape: [${r}]`),u.push("  values:")),u.push(l.map(c=>"    "+c).join(`
`)),u.join(`
`)}function zTt(t,r,n,o){let i=rn(r),s=o[o.length-1],a=new Array(s).fill(0),l=r.length,u=n==="complex64"?VR(t):t;if(l>1)for(let c=0;c<i/s;c++){let f=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],UR(u[f+d],0,n).length)}return a}function UR(t,r,n){let o;return Array.isArray(t)?o=`${parseFloat(t[0].toFixed(Wne))} + ${parseFloat(t[1].toFixed(Wne))}j`:im(t)?o=`'${t}'`:n==="bool"?o=Oke(t):o=parseFloat(t.toFixed(Wne)).toString(),Q2(o,r)}function Oke(t){return t===0?"false":"true"}function $z(t,r,n,o,i,s=!0){let a=n==="complex64"?2:1,l=r[0],u=r.length;if(u===0){if(n==="complex64"){let g=VR(t);return[UR(g[0],0,n)]}return n==="bool"?[Oke(t[0])]:[t[0].toString()]}if(u===1){if(l>Nke){let y=zR*a,b=Array.from(t.slice(0,y)),x=Array.from(t.slice((l-zR)*a,l*a));return n==="complex64"&&(b=VR(b),x=VR(x)),["["+b.map((v,w)=>UR(v,i[w],n)).join(", ")+", ..., "+x.map((v,w)=>UR(v,i[l-zR+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?VR(t):Array.from(t)).map((y,b)=>UR(y,i[b],n)).join(", ")+"]"]}let c=r.slice(1),f=o.slice(1),d=o[0]*a,p=[];if(l>Nke){for(let g=0;g<zR;g++){let y=g*d,b=y+d;p.push(...$z(t.slice(y,b),c,n,f,i,!1))}p.push("...");for(let g=l-zR;g<l;g++){let y=g*d,b=y+d;p.push(...$z(t.slice(y,b),c,n,f,i,g===l-1))}}else for(let g=0;g<l;g++){let y=g*d,b=y+d;p.push(...$z(t.slice(y,b),c,n,f,i,g===l-1))}let m=u===2?",":"";p[0]="["+(l>0?p[0]+m:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+m;let h=`,
`;for(let g=2;g<u;g++)h+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":h),p}function VR(t){let r=[];for(let n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return r}var Nke,zR,Wne,Mke=D(()=>{"use strict";Ze();Nke=20,zR=3,Wne=7});function Rke(t){dm=t}function jke(t){Uk=t}function Pke(t){UTt=t}function Ce(){return jR("Tensor",()=>Jr)}var wn,dm,Uk,UTt,Jr,o0,Je=D(()=>{"use strict";Oz();Mke();Ze();Ze();wn=class{constructor(r,n,o){if(this.dtype=n,this.shape=r.slice(),this.size=rn(r),o!=null){let i=o.length;de(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=o||Nz(n,this.size),this.strides=cg(r)}set(r,...n){n.length===0&&(n=[0]),de(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let o=this.locToIndex(n);this.values[o]=r}get(...r){r.length===0&&(r=[0]);let n=0;for(let i of r){if(i<0||i>=this.shape[n]){let s=`Requested out of range element at ${r}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let o=r[r.length-1];for(let i=0;i<r.length-1;++i)o+=this.strides[i]*r[i];return this.values[o]}locToIndex(r){if(this.rank===0)return 0;if(this.rank===1)return r[0];let n=r[r.length-1];for(let o=0;o<r.length-1;++o)n+=this.strides[o]*r[o];return n}indexToLoc(r){if(this.rank===0)return[];if(this.rank===1)return[r];let n=new Array(this.shape.length);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(r/this.strides[o]),r-=n[o]*this.strides[o];return n[n.length-1]=r,n}get rank(){return this.shape.length}toTensor(){return dm().makeTensor(this.values,this.shape,this.dtype)}},dm=null,Uk=null,UTt=null;Jr=class{constructor(r,n,o,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=r.slice(),this.dtype=n||"float32",this.size=rn(r),this.strides=cg(r),this.dataId=o,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return Be(this,null,function*(){let r=yield this.data();return Uk.buffer(this.shape,this.dtype,r)})}bufferSync(){return Uk.buffer(this.shape,this.dtype,this.dataSync())}array(){return Be(this,null,function*(){let r=yield this.data();return Z2(this.shape,r,this.dtype==="complex64")})}arraySync(){return Z2(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return Be(this,null,function*(){this.throwIfDisposed();let r=dm().read(this.dataId);if(this.dtype==="string"){let n=yield r;try{return n.map(o=>zk(o))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return r})}dataToGPU(r){return this.throwIfDisposed(),dm().readToGPU(this.dataId,r)}dataSync(){this.throwIfDisposed();let r=dm().readSync(this.dataId);if(this.dtype==="string")try{return r.map(n=>zk(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return r}bytes(){return Be(this,null,function*(){this.throwIfDisposed();let r=yield dm().read(this.dataId);return this.dtype==="string"?r:new Uint8Array(r.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),dm().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(r=!1){return Uk.print(this,r)}clone(){return this.throwIfDisposed(),Uk.clone(this)}toString(r=!1){let n=this.dataSync();return Fke(n,this.shape,this.dtype,r)}cast(r){return this.throwIfDisposed(),Uk.cast(this,r)}variable(r=!0,n,o){return this.throwIfDisposed(),dm().makeVariable(this,r,n,o)}};Object.defineProperty(Jr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});Ce();o0=class extends Jr{constructor(r,n,o,i){super(r.shape,r.dtype,r.dataId,i),this.trainable=n,this.name=o}assign(r){if(r.dtype!==this.dtype)throw new Error(`dtype of the new value (${r.dtype}) and previous value (${this.dtype}) must match`);if(!Kl(r.shape,this.shape))throw new Error(`shape of the new value (${r.shape}) and previous value (${this.shape}) must match`);dm().disposeTensor(this),this.dataId=r.dataId,dm().incRef(this,null)}dispose(){dm().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(o0,Symbol.hasInstance,{value:t=>t instanceof Jr&&t.assign!=null&&t.assign instanceof Function})});function Bi(t,r){if(t==="string"||r==="string"){if(t==="string"&&r==="string")return"string";throw new Error(`Can not upcast ${t} with ${r}`)}return VTt[t][r]}function k1(t){return Bi(t,"int32")}function zz(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Uz(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}var qne,Lke,Bke,$ke,zke,VTt,Vk=D(()=>{"use strict";qne=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(qne||{}),Lke=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(Lke||{}),Bke=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(Bke||{}),$ke=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}($ke||{}),zke=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(zke||{}),VTt={float32:$ke,int32:Lke,bool:Bke,complex64:zke}});var Vz={};cn(Vz,{assertTypesMatch:()=>Hne,getTensorsInContainer:()=>GR,isTensorInList:()=>GTt,makeTypesMatch:()=>nn});function nn(t,r){if(t.dtype===r.dtype)return[t,r];let n=Bi(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function Hne(t,r){de(t.dtype===r.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${r.dtype}) input must match`)}function GTt(t,r){return r.some(n=>n.id===t.id)}function GR(t){let r=[];return Uke(t,r,new Set),r}function Uke(t,r,n){if(t==null)return;if(t instanceof Jr){r.push(t);return}if(!WTt(t))return;let o=t;for(let i in o){let s=o[i];n.has(s)||(n.add(s),Uke(s,r,n))}}function WTt(t){return Array.isArray(t)||typeof t=="object"}var ri=D(()=>{"use strict";Je();Vk();Ze();});function Yne(t){return t.kernelName!=null}function HTt(t){let r=RR(rn(t),"float32");return ue.makeTensor(r,t,"float32")}function Xne(){let t=Mne();if(t._tfengine==null){let r=new Nk(t);t._tfengine=new qTt(r)}return cke(t._tfengine.ENV),Rke(()=>t._tfengine),t._tfengine}function YTt(t,r){let n={a:t,b:r};return ue.runKernel(zd,n)}var Gz,qTt,ue,$e=D(()=>{"use strict";Tne();ma();Oz();Ee();BR();Mz();Ake();Dke();Je();ri();Ze();Ze();Gz=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(r=>r.name)))}}}dispose(){for(let r in this.registeredVariables)this.registeredVariables[r].dispose()}},qTt=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Gz}ready(){return Be(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o];if(yield this.initializeBackend(i).success){yield this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:o}=this.initializeBackendsAndReturnBest();if(o)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:o}=this.initializeBackend(n);if(o)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,o,i=1){return n in this.registryFactory?(n0(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:o,priority:i},!0)}setBackend(n){return Be(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:o,asyncInit:i}=this.initializeBackend(n);if(!(i?yield o:o))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new Bz(this.backendInstance),!0})}setupRegisteredKernels(){LR(this.backendName).forEach(o=>{o.setupFunc!=null&&o.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){LR(n).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[n])})}initializeBackend(n){let o=this.registryFactory[n];if(o==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let i=o.factory();if(i&&!(i instanceof lg)&&typeof i.then=="function"){let s=++this.pendingBackendInitId,a=i.then(l=>s<this.pendingBackendInitId?!1:(this.registry[n]=l,this.pendingBackendInit=null,!0)).catch(l=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,n0(`Initialization of backend ${n} failed`),n0(l.stack||l.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(i){return n0(`Initialization of backend ${n} failed`),n0(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,o)=>this.registryFactory[o].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o],{success:s,asyncInit:a}=this.initializeBackend(i);if(a||s)return{name:i,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,o){let i=this.state.tensorInfo.get(o),s=i.backend,a=this.readSync(o),l=s.refCount(o);s.disposeData(o,!0),i.backend=n,n.move(o,a,i.shape,i.dtype,l),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,o){let i=null;if(o==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");o=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof o!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=n}let s;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(s),()=>(s=o(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(n,o,i){n();try{let s=i();return o(),s}catch(s){throw o(),s}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let o=ue.runKernel(am,{x:n}),i={x:n},s=l=>({x:()=>{let u="float32",c={x:l},f={dtype:u};return ue.runKernel(sm,c,f)}}),a=[];return this.addTapeNode(this.state.activeScope.name,i,[o],s,a,{}),o}runKernel(n,o,i){if(this.backendName==null&&this.backend,!(oC(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:o,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,o,i){let s=this.backend.numDataIds(),a=0;i.forEach(c=>{a+=c.dtype==="complex64"?3:1});let l=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=s-o-a-l;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let o,i=[],s=this.isTapeOn(),a=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,f=Yne(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Yne(n)){let{kernelName:g,inputs:y,attrs:b}=n;this.backendName==null&&this.backend;let x=oC(g,this.backendName);de(x!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),u=()=>{let v=this.backend.numDataIds();c=x.kernelFunc({inputs:y,attrs:b,backend:this.backend});let w=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,v,w);let _=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(s){let C=this.getTensorsForGradient(g,y,_);i=this.saveTensorsForBackwardMode(C)}return _}}else{let{forwardFunc:g}=n,y=b=>{s&&(i=b.map(x=>this.keep(this.clone(x))))};u=()=>{let b=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,y));let x=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,b,x),x}}let{inputs:d,attrs:p}=n,m=Yne(n)?null:n.backwardsFunc,h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?o=u():(h=this.profiler.profileKernel(f,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),o=h.outputs)}),s&&this.addTapeNode(f,d,o,m,i,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:o.map(g=>g.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(c)?o:o[0]}saveTensorsForBackwardMode(n){return n.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(n,o,i){let s=Rz(n);if(s!=null){let a=s.inputsToSave||[],l=s.outputsToSave||[],u;s.saveAllInputs?(de(Array.isArray(o),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(o).map(f=>o[f])):u=a.map(f=>o[f]);let c=i.filter((f,d)=>l[d]);return u.concat(c)}return[]}makeTensor(n,o,i,s){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",s=s||this.backend;let a=n;i==="string"&&im(n[0])&&(a=n.map(c=>A1(c)));let l=s.write(a,o,i),u=new Jr(o,i,l,this.nextTensorId());if(this.trackTensor(u,s),i==="string"){let c=this.state.tensorInfo.get(l),f=Fne(a);this.state.numBytes+=f-c.bytes,c.bytes=f}return u}makeTensorFromDataId(n,o,i,s){i=i||"float32";let a={dataId:n,shape:o,dtype:i};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(n,o){let{dataId:i,shape:s,dtype:a}=n,l=new Jr(s,a,i,this.nextTensorId());return this.trackTensor(l,o),l}makeVariable(n,o=!0,i,s){i=i||this.nextVariableId().toString(),s!=null&&s!==n.dtype&&(n=n.cast(s));let a=new o0(n,o,i,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(n,o){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*kk(n.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:o||this.backend,dtype:n.dtype,shape:n.shape,bytes:i})),n instanceof o0||this.track(n)}incRef(n,o){this.trackTensor(n,o),this.backend.incRef(n.dataId)}removeDataId(n,o){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===o&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let o=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=o.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let i=n.size*kk(n.dtype);this.state.numBytes-=i}o.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,o.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let o=this.state.registeredVariables[n];this.disposeVariable(o)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return Be(this,null,function*(){this.state.profiling=!0;let o=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-o,this.state.activeProfile.newTensors=this.state.numTensors-i;for(let s of this.state.activeProfile.kernels)s.kernelTimeMs=yield s.kernelTimeMs,s.extraInfo=yield s.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,o,i,s,a,l){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:o,outputs:i,saved:a},c=Rz(n);c!=null&&(s=c.gradFunc),s!=null&&(u.gradient=f=>(f=f.map((d,p)=>{if(d==null){let m=i[p],h=Dk(m.size,m.dtype);return this.makeTensor(h,m.shape,m.dtype)}return d}),s(f.length>1?f:f[0],a,l))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let o={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(o.name=n),this.state.scopeStack.push(o),this.state.activeScope=o}endScope(n){let o=GR(n),i=new Set(o.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let l=this.state.activeScope.track[a];!l.kept&&!i.has(l.id)&&l.dispose()}let s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],o.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(n,o,i,s=!1){if(de(o.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));de(a instanceof Jr,()=>"The result y returned by f() must be a tensor.");let l=kke(this.state.activeTape,o,a);if(!s&&l.length===0&&o.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[a.id]=i??HTt(a.shape),Ike(u,l,f=>this.tidy(f),YTt);let c=o.map(f=>u[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(let d of f.saved)d.dispose()}),this.state.activeTape=null),{value:a,grads:c}})}customGrad(n){return de(ug(n),()=>"The f passed in customGrad(f) must be a function."),(...o)=>{de(o.every(u=>u instanceof Jr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i,s={};o.forEach((u,c)=>{s[c]=u});let a=(u,c)=>(i=n(...o,c),de(i.value instanceof Jr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),de(ug(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),l=(u,c)=>{let f=i.gradFunc(u,c),d=Array.isArray(f)?f:[f];de(d.length===o.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),de(d.every(m=>m instanceof Jr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((m,h)=>{p[h]=()=>m}),p};return this.runKernelFunc({forwardFunc:a,backwardsFunc:l,inputs:s})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,o){return this.state.tensorInfo.get(n).backend.readToGPU(n,o)}time(n){return Be(this,null,function*(){let o=uC(),i=yield this.backend.time(n);return i.wallMs=uC()-o,i})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Gz;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();ue=Xne()});var ax={};cn(ax,{isBrowser:()=>Zne,isMobile:()=>ZTt,mockIsMobile:()=>KTt});function XTt(){return typeof navigator<"u"&&navigator!=null}function KTt(t){Kne=t}function ZTt(t){if(Kne!==void 0)return Kne;if(t||XTt()){if(t||(t=navigator),t.product==="ReactNative")return!0;let r=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!r){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}return!1}function Zne(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Kne,Qne=D(()=>{"use strict";});var Bu,Gk=D(()=>{"use strict";$e();Qne();ma();Bu=Fe();Bu.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Bu.registerFlag("IS_BROWSER",()=>Zne());Bu.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Bu.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Bu.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Bu.registerFlag("PROD",()=>!1);Bu.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Bu.getBool("DEBUG"));Bu.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Bu.registerFlag("IS_TEST",()=>!1);Bu.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Bu.getBool("DEBUG"));Bu.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Bu.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Bu.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function Pa(t,r){let n=t;if(Li(t))return r==="string"?[]:[t.length];if(zz(t)){let i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Uz(t))return[t.buffer.size/(r==null?4:kk(r))];if(!Array.isArray(t))return[];let o=[];for(;Array.isArray(n)||Li(n)&&r!=="string";)o.push(n.length),n=n[0];return Array.isArray(t)&&Fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Gke(t,o,[]),o}function Gke(t,r,n){if(n=n||[],!Array.isArray(t)&&!Li(t)){de(r.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${r[0]} elements`);return}de(r.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),de(t.length===r[0],()=>`Element arr[${n.join("][")}] should have ${r[0]} elements, but has ${t.length} elements`);let o=r.slice(1);for(let i=0;i<t.length;++i)Gke(t[i],o,n.concat(i))}function Vke(t,r,n,o){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==r||t==="numeric"&&r==="string")throw new Error(`Argument '${n}' passed to '${o}' must be ${t} tensor, but got ${r} tensor`)}}function J(t,r,n,o="numeric"){if(t instanceof Ce())return Vke(o,t.dtype,r,n),t;let i=d1(t);if(i!=="string"&&["bool","int32","float32"].indexOf(o)>=0&&(i=o),Vke(o,i,r,n),t==null||!Li(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let u=t==null?"null":t.constructor.name;throw new Error(`Argument '${r}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let s=Pa(t,i);!Li(t)&&!Array.isArray(t)&&(t=[t]);let l=i!=="string"?$k(t,i):fm(t,[],!0);return ue.makeTensor(l,s,i)}function lx(t,r,n,o="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${r} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>J(s,`${r}[${a}]`,n,o))}var je=D(()=>{"use strict";$e();ma();Je();Vk();Ze();Bs();});function se(t){let r=Object.keys(t);if(r.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${r.length} keys.`);let n=r[0],o=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Jne;let i=(...s)=>{ue.startScope(n);try{let a=o(...s);return J2(a)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(a),a}catch(a){throw ue.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var Jne,De=D(()=>{"use strict";$e();Ze();Jne="__op"});function QTt(t,r){let n=J(t,"real","complex"),o=J(r,"imag","complex");Bo(n.shape,o.shape,`real and imag shapes, ${n.shape} and ${o.shape}, must match in call to tf.complex().`);let i={real:n,imag:o};return ue.runKernel(sS,i)}var $u,I1=D(()=>{"use strict";$e();Ee();je();Ze();De();$u=se({complex_:QTt})});function Ql(t,r,n,o){if(o==null)o=d1(t);else if(o==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Uz(t)||zz(t)){if(o!=="float32"&&o!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${o}.`);return ue.backend.createTensorFromGPUData(t,r||n,o)}if(!Li(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(r!=null){ei(r);let i=rn(r),s=rn(n);de(i===s,()=>`Based on the provided shape, [${r}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1?l!==rn(r.slice(a)):!0;de(n[a]===r[a]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${r}). `)}}return!Li(t)&&!Array.isArray(t)&&(t=[t]),r=r||n,t=o!=="string"?$k(t,o):fm(t,[],!0),ue.makeTensor(t,r,o)}var ux=D(()=>{"use strict";$e();Vk();Ze();});function La(t,r,n){let o=Pa(t,n);return Ql(t,r,o,n)}var WR=D(()=>{"use strict";je();ux();});var cx,eoe=D(()=>{"use strict";cx={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function JTt(t,r){let n=0,o=t.length;for(;n<=o;){let i=Math.floor((o-n)/2)+n,s=r(t[i]);if(s===0)return i;s<0?o=i:n=i+1}return-1}var Ba,D1=D(()=>{"use strict";Ze();Ba=class t{static join(r){return new t(r).slice()}constructor(r){if(this.shards=[],this.previousShardIndex=0,r==null||(r instanceof Array||(r=[r]),r=r.map(o=>Li(o)?o.buffer:o),r.length===0))return;this.bufferUniformSize=r[0].byteLength;let n=0;for(let o=0;o<r.length;o++){let i=r[o];o!==r.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(r=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(r=isNaN(Number(r))?0:r,n=isNaN(Number(n))?0:n,r=Math.max(0,r),n=Math.min(this.byteLength,n),n<=r)return new ArrayBuffer(0);let o=this.findShardForByte(r);if(o===-1)throw new Error(`Could not find start shard for byte ${r}`);let i=n-r,s=new ArrayBuffer(i),a=new Uint8Array(s),l=0;for(let u=o;u<this.shards.length;u++){let c=this.shards[u],d=r+l-c.start,p=l,h=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,h-d);if(a.set(g,p),l+=g.length,n<c.end)break}return s}findShardForByte(r){if(this.shards.length===0||r<0||r>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(r/this.bufferUniformSize),this.previousShardIndex;function n(i){return r<i.start?-1:r>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let o=JTt(this.shards,n);return o===-1?-1:(this.previousShardIndex=o,this.previousShardIndex)}}});function eAt(){Fe().set("PROD",!0)}function tAt(){Fe().set("DEBUG",!0)}function rAt(){Fe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Wke(t){Fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function nAt(){ue.disposeVariables()}function Uf(){return ue}function Wk(){return ue.memory()}function oAt(t){return ue.profile(t)}function Pe(t,r){return ue.tidy(t,r)}function Cr(t){GR(t).forEach(n=>n.dispose())}function _s(t){return ue.keep(t)}function iAt(t){return ue.time(t)}function qke(t){return ue.setBackend(t)}function sAt(){return ue.ready()}function toe(){return ue.backendName}function aAt(t){ue.removeBackend(t)}function lAt(t){return ue.findBackend(t)}function uAt(t){return ue.findBackendFactory(t)}function qR(t,r,n=1){return ue.registerBackend(t,r,n)}function HR(){return ue.backend}function cAt(t,r){Fe().setPlatform(t,r)}var Fc=D(()=>{"use strict";$e();ma();Je();ri();Pke(Wke)});function Xke(t,r){return Be(this,null,function*(){let n=[],o=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){let l=i[a],u=Array.isArray(t)?t[a].tensor:t[l];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${u.dtype}`);let c={name:l,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let f=new Promise(d=>Be(this,null,function*(){let p=yield u.bytes(),m=p.reduce((y,b)=>y+b.length,0)+N1*p.length,h=new Uint8Array(m),g=0;for(let y=0;y<p.length;y++){let b=p[y],x=new Uint8Array(new Uint32Array([b.length]).buffer);h.set(x,g),g+=N1,h.set(b,g),g+=b.length}d(h)}));o.push(f)}else o.push(u.data());r!=null&&(c.group=r),n.push(c)}let s=yield Promise.all(o);return{data:pAt(s),specs:n}})}function Wz(t,r){let n=new Ba(t),o={},i=0;for(let s of r){let a=fAt(s,(l,u)=>n.slice(i+l,i+u));o[s.name]=Kke(s,n.slice(i,i+a)),i+=a}return o}function fAt(t,r){let n=rn(t.shape),o;if("quantization"in t){let i=t.quantization;o=cx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=N1+new Uint32Array(r(i,i+N1))[0];return i}else o=cx[t.dtype];return n*o}function dAt(t,r){return Be(this,null,function*(){let n=rn(t.shape),o;if("quantization"in t){let i=t.quantization;o=cx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=N1+new Uint32Array(yield r(i,i+N1))[0];return i}else o=cx[t.dtype];return n*o})}function Kke(t,r){let n=t.name,o=t.dtype,i=t.shape,s=rn(i),a,l=0;if("quantization"in t){let u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=cx[u.dtype],f=u.dtype==="uint8"?new Uint8Array(r):new Uint16Array(r);if(o==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){a=new Float32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=p*u.scale+u.min}}else if(u.dtype==="float16")a=yAt()(f);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(o==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);a=new Int32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=Math.round(p*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*c}else if(o==="string"){let u=rn(t.shape);a=[];for(let c=0;c<u;c++){let f=new Uint32Array(r.slice(l,l+N1))[0];l+=N1;let d=new Uint8Array(r.slice(l,l+f));a.push(d),l+=f}}else{let u=cx[o];if(o==="float32")a=new Float32Array(r);else if(o==="int32")a=new Int32Array(r);else if(o==="bool")a=new Uint8Array(r);else if(o==="complex64"){a=new Float32Array(r);let c=new Float32Array(a.length/2),f=new Float32Array(a.length/2);for(let h=0;h<c.length;h++)c[h]=a[h*2],f[h]=a[h*2+1];let d=La(c,i,"float32"),p=La(f,i,"float32"),m=$u(d,p);return d.dispose(),p.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*u}return La(a,i,o)}function Hke(t,r,n){return Be(this,null,function*(){let o=new Uint8Array(r);for(;o.byteLength<n;){let{done:i,value:s}=yield t.read();if(i&&s==null){let l=n-o.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}let a=new Uint8Array(o.length+s.byteLength);a.set(o,0),a.set(new Uint8Array(s),o.length),o=a}return o.buffer})}function roe(t,r){return Be(this,null,function*(){let n={},o=t.getReader(),i=new ArrayBuffer(0);for(let s of r){let a=yield dAt(s,(c,f)=>Be(this,null,function*(){return i=yield Hke(o,i,f),i.slice(c,f)}));i=yield Hke(o,i,a);let l=i.slice(0,a);i=i.slice(a);let u=Kke(s,l);if(n[s.name]=u,toe()==="webgpu"){let c=HR();"uploadToGPU"in c&&rn(u.shape)>=Fe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function pAt(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let r=0,n=[];t.forEach(s=>{if(r+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});let o=new Uint8Array(r),i=0;return n.forEach(s=>{o.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),o.buffer}function Yke(t){return noe?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Zke(t){if(noe)return Buffer.from(t).toString("base64");let r=new Uint8Array(t),n="";for(let o=0,i=r.length;o<i;o++)n+=String.fromCharCode(r[o]);return btoa(n)}function Qke(t){if(noe){let o=Buffer.from(t,"base64");return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}let r=atob(t),n=new Uint8Array(r.length);for(let o=0;o<r.length;++o)n.set([r.charCodeAt(o)],o);return n.buffer}function Jke(t){return Ba.join(t)}function ooe(t){let r="/";for(t=t.trim();t.endsWith(r);)t=t.slice(0,t.length-1);let n=t.split(r);return n[n.length-1]}function qz(t,r){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function ioe(t,r,n){let o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(o.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!r)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");o.weightSpecs=r,o.weightData=n}return t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(o.initializerSignature=t.initializerSignature),o}function qk(t,r){return Be(this,null,function*(){let n,o;return t.weightsManifest!=null&&([n,o]=yield r(t.weightsManifest)),ioe(t,n,o)})}function i0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Yke(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Yke(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Ba(t.weightData).byteLength}}function YR(t){let r=[];for(let n of t)r.push(...n.weights);return r}function mAt(){let t=n=>{let o=n<<13,i=0;for(;!(o&8388608);)i-=8388608,o<<=1;return o&=-8388609,i+=947912704,o|i},r=new Uint32Array(2048);r[0]=0;for(let n=1;n<1024;n++)r[n]=t(n);for(let n=1024;n<2048;n++)r[n]=939524096+(n-1024<<13);return r}function hAt(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let r=1;r<31;r++)t[r]=r<<23;for(let r=33;r<63;r++)t[r]=2147483648+(r-32<<23);return t}function gAt(){let t=new Uint32Array(64);for(let r=0;r<64;r++)t[r]=1024;return t[0]=t[32]=0,t}function yAt(){let t=mAt(),r=hAt(),n=gAt();return o=>{let i=new ArrayBuffer(4*o.length),s=new Uint32Array(i);for(let a=0;a<o.length;a++){let l=o[a],u=t[n[l>>10]+(l&1023)]+r[l>>10];s[a]=u}return new Float32Array(i)}}var N1,noe,F1=D(()=>{"use strict";I1();WR();Ze();eoe();D1();Fc();ma();Fc();N1=4;noe=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var $s,eIe,tIe,rIe,nIe,cC=D(()=>{"use strict";$s=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(r){t.getInstance().saveRouters.push(r)}static registerLoadRouter(r){t.getInstance().loadRouters.push(r)}static getSaveHandlers(r){return t.getHandlers(r,"save")}static getLoadHandlers(r,n){return t.getHandlers(r,"load",n)}static getHandlers(r,n,o){let i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(a=>{let l=a(r,o);l!==null&&i.push(l)}),i}},eIe=t=>$s.registerSaveRouter(t),tIe=t=>$s.registerLoadRouter(t),rIe=t=>$s.getSaveHandlers(t),nIe=(t,r)=>$s.getLoadHandlers(t,r)});function oIe(){if(!Fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,r=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(r==null)throw new Error("The current browser does not appear to support IndexedDB.");return r}function loe(t){let r=t.result;r.createObjectStore(fC,{keyPath:"modelPath"}),r.createObjectStore(O1,{keyPath:"modelPath"})}function bAt(t){return new dC(t)}function xAt(t){return t.startsWith(dC.URL_SCHEME)?t.slice(dC.URL_SCHEME.length):t}var soe,aoe,fC,O1,dC,iIe,Hz,uoe=D(()=>{"use strict";Gk();ma();F1();cC();D1();soe="tensorflowjs",aoe=1,fC="models_store",O1="model_info_store";dC=(()=>{class t{constructor(n){if(this.indexedDB=oIe(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return Be(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return Be(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,o){return new Promise((i,s)=>{let a=this.indexedDB.open(soe,aoe);a.onupgradeneeded=()=>loe(a),a.onsuccess=()=>{let l=a.result;if(o==null){let u=l.transaction(fC,"readonly"),f=u.objectStore(fC).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return l.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(f.result.modelArtifacts)},f.onerror=d=>(l.close(),s(f.error)),u.oncomplete=()=>l.close()}else{o.weightData=Ba.join(o.weightData);let u=i0(o),c=l.transaction(O1,"readwrite"),f=c.objectStore(O1),d;try{d=f.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(m){return s(m)}let p;d.onsuccess=()=>{p=l.transaction(fC,"readwrite");let m=p.objectStore(fC),h;try{h=m.put({modelPath:this.modelPath,modelArtifacts:o,modelArtifactsInfo:u})}catch(g){return s(g)}h.onsuccess=()=>i({modelArtifactsInfo:u}),h.onerror=g=>{f=c.objectStore(O1);let y=f.delete(this.modelPath);y.onsuccess=()=>(l.close(),s(h.error)),y.onerror=b=>(l.close(),s(h.error))}},d.onerror=m=>(l.close(),s(d.error)),c.oncomplete=()=>{p==null?l.close():p.oncomplete=()=>l.close()}}},a.onerror=l=>s(a.error)})}}return t.URL_SCHEME="indexeddb://",t})(),iIe=t=>Fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(dC.URL_SCHEME)?bAt(t.slice(dC.URL_SCHEME.length)):null;$s.registerSaveRouter(iIe);$s.registerLoadRouter(iIe);Hz=class{constructor(){this.indexedDB=oIe()}listModels(){return Be(this,null,function*(){return new Promise((r,n)=>{let o=this.indexedDB.open(soe,aoe);o.onupgradeneeded=()=>loe(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(O1,"readonly"),l=s.objectStore(O1).getAll();l.onsuccess=()=>{let u={};for(let c of l.result)u[c.modelPath]=c.modelArtifactsInfo;r(u)},l.onerror=u=>(i.close(),n(l.error)),s.oncomplete=()=>i.close()},o.onerror=i=>n(o.error)})})}removeModel(r){return Be(this,null,function*(){return r=xAt(r),new Promise((n,o)=>{let i=this.indexedDB.open(soe,aoe);i.onupgradeneeded=()=>loe(i),i.onsuccess=()=>{let s=i.result,a=s.transaction(O1,"readwrite"),l=a.objectStore(O1),u=l.get(r),c;u.onsuccess=()=>{if(u.result==null)return s.close(),o(new Error(`Cannot find model with path '${r}' in IndexedDB.`));{let f=l.delete(r),d=()=>{c=s.transaction(fC,"readwrite");let m=c.objectStore(fC).delete(r);m.onsuccess=()=>n(u.result.modelArtifactsInfo),m.onerror=h=>o(u.error)};f.onsuccess=d,f.onerror=p=>(d(),s.close(),o(u.error))}},u.onerror=f=>(s.close(),o(u.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>o(i.error)})})}}});function aIe(t){return{info:[Hk,t,sIe].join(fx),topology:[Hk,t,vAt].join(fx),weightSpecs:[Hk,t,wAt].join(fx),weightData:[Hk,t,_At].join(fx),modelMetadata:[Hk,t,SAt].join(fx)}}function lIe(t){for(let r of Object.values(t))window.localStorage.removeItem(r)}function CAt(t){let r=t.split(fx);if(r.length<3)throw new Error(`Invalid key format: ${t}`);return r.slice(1,r.length-1).join(fx)}function EAt(t){return t.startsWith(pC.URL_SCHEME)?t.slice(pC.URL_SCHEME.length):t}function TAt(t){return new pC(t)}var fx,Hk,sIe,vAt,wAt,_At,SAt,pC,uIe,Yz,coe=D(()=>{"use strict";Gk();ma();Ze();F1();D1();cC();fx="/",Hk="tensorflowjs_models",sIe="info",vAt="model_topology",wAt="weight_specs",_At="weight_data",SAt="model_metadata";pC=(()=>{class t{constructor(n){if(!Fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=aIe(this.modelPath)}save(n){return Be(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let o=JSON.stringify(n.modelTopology),i=JSON.stringify(n.weightSpecs),s=i0(n),a=Ba.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,o),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,Zke(a));let l={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(l)),{modelArtifactsInfo:s}}catch{throw lIe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}})}load(){return Be(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let o={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);o.modelTopology=i;let s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);o.weightSpecs=s;let a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){let u=JSON.parse(a);o.format=u.format,o.generatedBy=u.generatedBy,o.convertedBy=u.convertedBy,u.signature!=null&&(o.signature=u.signature),u.userDefinedMetadata!=null&&(o.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(o.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(o.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(o.trainingConfig=u.trainingConfig)}let l=this.LS.getItem(this.keys.weightData);if(l==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return o.weightData=Qke(l),o})}}return t.URL_SCHEME="localstorage://",t})(),uIe=t=>Fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(pC.URL_SCHEME)?TAt(t.slice(pC.URL_SCHEME.length)):null;$s.registerSaveRouter(uIe);$s.registerLoadRouter(uIe);Yz=class{constructor(){de(Fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),de(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return Be(this,null,function*(){let r={},n=Hk+fx,o=fx+sIe;for(let i=0;i<this.LS.length;++i){let s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(o)){let a=CAt(s);r[a]=JSON.parse(this.LS.getItem(s))}}return r})}removeModel(r){return Be(this,null,function*(){r=EAt(r);let n=aIe(r);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${r}'`);let o=JSON.parse(this.LS.getItem(n.info));return lIe(n),o})}}});function Xz(t){if(t.indexOf(Yk)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${pm.getSchemes().join(",")}`);return{scheme:t.split(Yk)[0],path:t.split(Yk)[1]}}function cIe(t,r,n=!1){return Be(this,null,function*(){de(t!==r,()=>`Old path and new path are the same: '${t}'`);let o=$s.getLoadHandlers(t);de(o.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),de(o.length<2,()=>`Copying failed because more than one (${o.length}) load handlers for source URL ${t}.`);let i=o[0],s=$s.getSaveHandlers(r);de(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${r}.`),de(s.length<2,()=>`Copying failed because more than one (${o.length}) save handlers for destination URL ${r}.`);let a=s[0],l=Xz(t).scheme,u=Xz(t).path,c=l===Xz(t).scheme,f=yield i.load();n&&c&&(yield pm.getManager(l).removeModel(u));let d=yield a.save(f);return n&&!c&&(yield pm.getManager(l).removeModel(u)),d.modelArtifactsInfo})}function fIe(){return Be(this,null,function*(){let t=pm.getSchemes(),r={};for(let n of t){let o=yield pm.getManager(n).listModels();for(let i in o){let s=n+Yk+i;r[s]=o[i]}}return r})}function dIe(t){return Be(this,null,function*(){let r=Xz(t);return pm.getManager(r.scheme).removeModel(r.path)})}function pIe(t,r){return Be(this,null,function*(){return cIe(t,r,!1)})}function mIe(t,r){return Be(this,null,function*(){return cIe(t,r,!0)})}var Yk,pm,foe=D(()=>{"use strict";Ze();cC();Yk="://",pm=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(r,n){de(r!=null,()=>"scheme must not be undefined or null."),r.endsWith(Yk)&&(r=r.slice(0,r.indexOf(Yk))),de(r.length>0,()=>"scheme must not be an empty string.");let o=t.getInstance();de(o.managers[r]==null,()=>`A model store manager is already registered for scheme '${r}'.`),o.managers[r]=n}static getManager(r){let n=t.getInstance().managers[r];if(n==null)throw new Error(`Cannot find model manager for scheme '${r}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}}});var doe,hIe=D(()=>{"use strict";Gk();ma();uoe();coe();foe();Bne();doe=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(r,n){return fetch(r,n)}now(){return performance.now()}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(r)}decode(r,n){return new TextDecoder(n).decode(r)}setTimeoutCustom(r,n){if(typeof window>"u"||!Fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(r,n);return}this.functionRefs.push(r),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",o=>{if(o.source===window&&o.data.name===this.messageName){o.stopPropagation();let i=this.functionRefs[o.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(r){return jz(r)}};if(Fe().get("IS_BROWSER")){Fe().setPlatform("browser",new doe);try{pm.registerManager(pC.URL_SCHEME,new Yz)}catch{}try{pm.registerManager(dC.URL_SCHEME,new Hz)}catch{}}});var yIe=gt((Xk,gIe)=>{"use strict";var AAt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mC=AAt();gIe.exports=Xk=mC.fetch;mC.fetch&&(Xk.default=mC.fetch.bind(mC));Xk.Headers=mC.Headers;Xk.Request=mC.Request;Xk.Response=mC.Response});var bIe=gt(()=>{"use strict"});var kAt,poe,moe,xIe=D(()=>{"use strict";ma();kAt={importFetch:()=>yIe()},moe=class{constructor(){this.util=bIe(),this.textEncoder=new this.util.TextEncoder}fetch(r,n){return Fe().global.fetch!=null?Fe().global.fetch(r,n):(poe==null&&(poe=kAt.importFetch()),poe(r,n))}now(){let r=process.hrtime();return r[0]*1e3+r[1]/1e6}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(r)}decode(r,n){return r.length===0?"":new this.util.TextDecoder(n).decode(r)}isTypedArray(r){return this.util.types.isFloat32Array(r)||this.util.types.isInt32Array(r)||this.util.types.isUint8Array(r)||this.util.types.isUint8ClampedArray(r)}};Fe().get("IS_NODE")&&!Fe().get("IS_BROWSER")&&Fe().setPlatform("node",new moe)});function Qt(t,r="float32",n){return r=r||"float32",ei(t),new wn(t,r,n)}var dx=D(()=>{"use strict";Je();Ze();});function IAt(t,r){let n=J(t,"x","cast");if(!Nne(r))throw new Error(`Failed to cast to unknown dtype ${r}`);if(r==="string"&&n.dtype!=="string"||r!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let o={x:n},i={dtype:r};return ue.runKernel(sm,o,i)}var rt,fn=D(()=>{"use strict";$e();Ee();je();Ze();De();rt=se({cast_:IAt})});function DAt(t){let n={x:J(t,"x","clone","string_or_numeric")};return ue.runKernel(am,n)}var zu,Kk=D(()=>{"use strict";$e();Ee();je();De();zu=se({clone_:DAt})});function Kz(t,r=!1){console.log(t.toString(r))}var hoe=D(()=>{"use strict";});var NAt,vIe=D(()=>{"use strict";$e();Gk();hIe();xIe();dx();fn();Kk();hoe();Je();Xne();NAt={buffer:Qt,cast:rt,clone:zu,print:Kz};jke(NAt)});function FAt(t,r){let n=J(t,"a","add"),o=J(r,"b","add");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(zd,i)}var Ke,$o=D(()=>{"use strict";$e();Ee();ri();je();De();Ke=se({add_:FAt})});function OAt(t,r){let n=J(t,"a","floorDiv"),o=J(r,"b","floorDiv");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(kg,i)}var Zk,Zz=D(()=>{"use strict";$e();Ee();ri();je();De();Zk=se({floorDiv_:OAt})});function MAt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");if([n,o]=nn(n,o),n.dtype==="int32"&&o.dtype==="int32")return Zk(n,o);let i={a:n,b:o},s={};return ue.runKernel(_g,i,s)}var Ct,Yn=D(()=>{"use strict";$e();Ee();ri();je();Zz();De();Ct=se({div_:MAt})});function RAt(t,r){let n=J(t,"a","mul"),o=J(r,"b","mul");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(Lg,i)}var we,cr=D(()=>{"use strict";$e();Ee();ri();je();De();we=se({mul_:RAt})});function jAt(t){let r=J(t,"x","abs");if(r.dtype==="complex64"){let n={x:r};return ue.runKernel(_b,n)}else{let n={x:r};return ue.runKernel(mb,n)}}var To,hC=D(()=>{"use strict";$e();Ee();je();De();To=se({abs_:jAt})});function PAt(t){let n={x:J(t,"x","acos")};return ue.runKernel(fg,n)}var Qz,wIe=D(()=>{"use strict";$e();Ee();je();De();Qz=se({acos_:PAt})});function LAt(t){let n={x:J(t,"x","acosh")};return ue.runKernel(dg,n)}var Jz,_Ie=D(()=>{"use strict";$e();Ee();je();De();Jz=se({acosh_:LAt})});function BAt(t){de(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),de(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let r=t.map((i,s)=>J(i,`tensors${s}`,"addN")),n=r[0];r.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),r.forEach(i=>{if(!Kl(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let o=r;return ue.runKernel(hb,o)}var SIe,CIe=D(()=>{"use strict";$e();Ee();je();Ze();De();SIe=se({addN_:BAt})});function $At(t,r=null,n=!1){let i={x:J(t,"x","all","bool")},s={axis:r,keepDims:n};return ue.runKernel(eS,i,s)}var Qk,goe=D(()=>{"use strict";$e();Ee();je();De();Qk=se({all_:$At})});function zAt(t,r=null,n=!1){let i={x:J(t,"x","any","bool")},s={axis:r,keepDims:n};return ue.runKernel(tS,i,s)}var gC,yoe=D(()=>{"use strict";$e();Ee();je();De();gC=se({any_:zAt})});function UAt(t,r=0){let o={x:J(t,"x","argMax")},i={axis:r};return ue.runKernel(gb,o,i)}var Wd,boe=D(()=>{"use strict";$e();Ee();je();De();Wd=se({argMax_:UAt})});function VAt(t,r=0){let o={x:J(t,"x","argMin")},i={axis:r};return ue.runKernel(yb,o,i)}var e8,xoe=D(()=>{"use strict";$e();Ee();je();De();e8=se({argMin_:VAt})});function GAt(t){let n={x:J(t,"x","asin")};return ue.runKernel(pg,n)}var t8,EIe=D(()=>{"use strict";$e();Ee();je();De();t8=se({asin_:GAt})});function WAt(t){let n={x:J(t,"x","asinh")};return ue.runKernel(mg,n)}var r8,TIe=D(()=>{"use strict";$e();Ee();je();De();r8=se({asinh_:WAt})});function qAt(t){let n={x:J(t,"x","atan")};return ue.runKernel(hg,n)}var n8,AIe=D(()=>{"use strict";$e();Ee();je();De();n8=se({atan_:qAt})});function HAt(t,r){let n=J(t,"a","atan2"),o=J(r,"b","atan2");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(yg,i)}var o8,voe=D(()=>{"use strict";$e();Ee();ri();je();De();o8=se({atan2_:HAt})});function YAt(t){let n={x:J(t,"x","atanh")};return ue.runKernel(gg,n)}var i8,kIe=D(()=>{"use strict";$e();Ee();je();De();i8=se({atanh_:YAt})});function XAt(t,r,n,o,i="NHWC",s){let a=t[3],l=[...r,a],u=DIe(i);return yC(t,l,n,s,o,null,null,u)}function _oe(t,r,n,o,i,s,a="channelsLast"){let[l,u]=XR(r),c;if(a==="channelsLast")c=[l,u,t[3],t[3]];else if(a==="channelsFirst")c=[l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return yC(t,c,n,o,i,s,!1,a)}function KAt(t,r,n,o,i,s,a="NDHWC"){let[l,u,c]=woe(r),f,d;if(a==="NDHWC")d="channelsLast",f=[l,u,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",f=[l,u,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return IIe(t,f,n,o,i,!1,d,s)}function yC(t,r,n,o,i,s,a=!1,l="channelsLast"){let[u,c,f,d]=[-1,-1,-1,-1];if(l==="channelsLast")[u,c,f,d]=t;else if(l==="channelsFirst")[u,d,c,f]=t;else throw new Error(`Unknown dataFormat ${l}`);let[p,m,,h]=r,[g,y]=XR(n),[b,x]=XR(o),v=Jk(p,b),w=Jk(m,x),{padInfo:_,outHeight:C,outWidth:S}=JAt(i,c,f,g,y,v,w,s,l),E=a?h*d:h,A;return l==="channelsFirst"?A=[u,E,C,S]:l==="channelsLast"&&(A=[u,C,S,E]),{batchSize:u,dataFormat:l,inHeight:c,inWidth:f,inChannels:d,outHeight:C,outWidth:S,outChannels:E,padInfo:_,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:m,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:b,dilationWidth:x,inShape:t,outShape:A,filterShape:r}}function IIe(t,r,n,o,i,s=!1,a="channelsLast",l){let[u,c,f,d,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[u,c,f,d,p]=t;else if(a==="channelsFirst")[u,p,c,f,d]=t;else throw new Error(`Unknown dataFormat ${a}`);let[m,h,g,,y]=r,[b,x,v]=woe(n),[w,_,C]=woe(o),S=Jk(m,w),E=Jk(h,_),A=Jk(g,C),{padInfo:N,outDepth:k,outHeight:M,outWidth:I}=ekt(i,c,f,d,b,x,v,S,E,A,l),L=s?y*p:y,P;return a==="channelsFirst"?P=[u,L,k,M,I]:a==="channelsLast"&&(P=[u,k,M,I,L]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:k,outHeight:M,outWidth:I,outChannels:L,padInfo:N,strideDepth:b,strideHeight:x,strideWidth:v,filterDepth:m,filterHeight:h,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationDepth:w,dilationHeight:_,dilationWidth:C,inShape:t,outShape:P,filterShape:r}}function ZAt(t,r,n,o,i){o==null&&(o=Soe(t,r,n));let s=t[0],a=t[1],l=KR((s-r+2*o)/n+1,i),u=KR((a-r+2*o)/n+1,i);return[l,u]}function QAt(t,r,n,o,i,s){i==null&&(i=Soe(t,r[0],o[0]));let a=[0,0,0,n];for(let l=0;l<3;l++)t[l]+2*i>=r[l]&&(a[l]=KR((t[l]-r[l]+2*i)/o[l]+1,s));return a}function Soe(t,r,n,o=1){let i=Jk(r,o);return Math.floor((t[0]*(n-1)-n+i)/2)}function XR(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function woe(t){return typeof t=="number"?[t,t,t]:t}function Jk(t,r){return r<=1?t:t+(t-1)*(r-1)}function JAt(t,r,n,o,i,s,a,l,u){let c,f,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let m=ZAt([r,n],s,o,t,l);f=m[0],d=m[1]}else if(t==="same"){f=Math.ceil(r/o),d=Math.ceil(n/i);let p=Math.max(0,(f-1)*o+s-r),m=Math.max(0,(d-1)*i+a-n),h=Math.floor(p/2),g=p-h,y=Math.floor(m/2),b=m-y;c={top:h,bottom:g,left:y,right:b,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((r-s+1)/o),d=Math.ceil((n-a+1)/i);else if(typeof t=="object"){let p=u==="channelsLast"?t[1][0]:t[2][0],m=u==="channelsLast"?t[1][1]:t[2][1],h=u==="channelsLast"?t[2][0]:t[3][0],g=u==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:m,left:h,right:g,type:p===0&&m===0&&h===0&&g===0?"VALID":"EXPLICIT"},f=KR((r-s+p+m)/o+1,l),d=KR((n-a+h+g)/i+1,l)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:d}}function ekt(t,r,n,o,i,s,a,l,u,c,f){let d,p,m,h;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let y=QAt([r,n,o,1],[l,u,c],1,[i,s,a],t,f);p=y[0],m=y[1],h=y[2]}else if(t==="same"){p=Math.ceil(r/i),m=Math.ceil(n/s),h=Math.ceil(o/a);let g=(p-1)*i+l-r,y=(m-1)*s+u-n,b=(h-1)*a+c-o,x=Math.floor(g/2),v=g-x,w=Math.floor(y/2),_=y-w,C=Math.floor(b/2),S=b-C;d={top:w,bottom:_,left:C,right:S,front:x,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:m,outWidth:h}}function KR(t,r){if(!r)return Math.trunc(t);switch(r){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${r}`)}}function Vf(t){let[r,n,o]=XR(t);return r===1&&n===1&&o===1}function ga(t,r){return Vf(t)||Vf(r)}function s0(t){return XR(t).every(r=>r>0)}function DIe(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ho(t,r,n){if(n!=null){if(typeof r=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);if(typeof r=="number")de(pb(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);else if(typeof r=="object")r.forEach(o=>{o.forEach(i=>{de(pb(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${r}`)}}var Ss=D(()=>{"use strict";Ze();});function tkt(t,r){let o={x:J(t,"x","reshape","string_or_numeric")},i={shape:r};return ue.runKernel(Yb,o,i)}var Se,Ht=D(()=>{"use strict";$e();Ee();je();De();Se=se({reshape_:tkt})});function rkt(t,r,n,o,i){let s=J(t,"x","avgPool","float32"),a=1;de(ga(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),ho("avgPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(bb,c,f);return d=rt(d,s.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var M1,s8=D(()=>{"use strict";$e();Ee();je();Ze();fn();Ss();De();Ht();M1=se({avgPool_:rkt})});function nkt(t,r,n,o,i,s="NDHWC"){let a=J(t,"x","avgPool3d","float32"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),de(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),de(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),ho("avgPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(xb,c,f);return d=rt(d,l.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var a8,NIe=D(()=>{"use strict";$e();Ee();je();Ze();fn();Ss();De();Ht();a8=se({avgPool3d_:nkt})});function okt(t,r=0){de(t.length>=1,()=>"Pass at least one tensor to concat");let n=lx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return zu(n[0]);let o=n,i={axis:r};return ue.runKernel(Sb,o,i)}var Nn,Wf=D(()=>{"use strict";$e();Ee();je();Ze();Kk();De();Nn=se({concat_:okt})});function ikt(t,r,n=!1,o=!1){let i=J(t,"a","matMul"),s=J(r,"b","matMul");[i,s]=nn(i,s);let a={a:i,b:s},l={transposeA:n,transposeB:o};return ue.runKernel(vb,a,l)}var zr,mm=D(()=>{"use strict";$e();Ee();ri();je();De();zr=se({matMul_:ikt})});function skt(t){let n={x:J(t,"x","sigmoid","float32")};return ue.runKernel(Xg,n)}var _l,eI=D(()=>{"use strict";$e();Ee();je();De();_l=se({sigmoid_:skt})});function akt(t,r,n){let o=J(t,"x","slice","string_or_numeric");if(o.rank===0)throw new Error("Slicing scalar is not possible");let i={x:o},s={begin:r,size:n};return ue.runKernel(Jb,i,s)}var Br,Uu=D(()=>{"use strict";$e();Ee();je();De();Br=se({slice_:akt})});function lkt(t){let n={x:J(t,"x","tanh","float32")};return ue.runKernel(t0,n)}var hm,Coe=D(()=>{"use strict";$e();Ee();je();De();hm=se({tanh_:lkt})});function ukt(t,r,n,o,i,s){let a=J(t,"forgetBias","basicLSTMCell"),l=J(r,"lstmKernel","basicLSTMCell"),u=J(n,"lstmBias","basicLSTMCell"),c=J(o,"data","basicLSTMCell"),f=J(i,"c","basicLSTMCell"),d=J(s,"h","basicLSTMCell"),p=Nn([c,d],1),m=zr(p,l),h=Ke(m,u),g=h.shape[0],y=h.shape[1]/4,b=[g,y],x=Br(h,[0,0],b),v=Br(h,[0,y],b),w=Br(h,[0,y*2],b),_=Br(h,[0,y*3],b),C=Ke(we(_l(x),hm(v)),we(f,_l(Ke(a,w)))),S=we(hm(C),_l(_));return[C,S]}var FIe,OIe=D(()=>{"use strict";je();$o();Wf();mm();cr();De();eI();Uu();Coe();FIe=se({basicLSTMCell_:ukt})});function ckt(t,r,n){let o=J(t,"x","batchToSpaceND"),i=r.reduce((l,u)=>l*u);de(o.rank>=1+r.length,()=>`input rank is ${o.rank} but should be > than blockShape.length ${r.length}`),de(n.length===r.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${r.length}`),de(o.shape[0]%i===0,()=>`input tensor batch is ${o.shape[0]} but is not divisible by the product of the elements of blockShape ${r.join(" * ")} === ${i}`);let s={x:o},a={blockShape:r,crops:n};return ue.runKernel(wb,s,a)}var R1,ZR=D(()=>{"use strict";$e();Ee();je();Ze();De();R1=se({batchToSpaceND_:ckt})});function MIe(t){let r;return t.rank===0||t.rank===1?r=Se(t,[1,1,1,t.size]):t.rank===2?r=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?r=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):r=t,r}var RIe=D(()=>{"use strict";Ht()});function fkt(t,r,n,o,i,s){s==null&&(s=.001);let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;o!=null&&(f=J(o,"offset","batchNorm")),de(l.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(f==null||l.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(c==null||l.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:MIe(a),scale:c,offset:f,mean:l,variance:u},m={varianceEpsilon:s},h=ue.runKernel(Nb,p,m);return Se(h,a.shape)}var a0,tI=D(()=>{"use strict";$e();Ee();je();Ze();RIe();De();Ht();a0=se({batchNorm_:fkt})});function dkt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),de(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),de(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),de(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&de(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&de(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),a0(a,l,u,f,c,s)}var l8,jIe=D(()=>{"use strict";je();Ze();tI();De();l8=se({batchNorm2d_:dkt})});function pkt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),de(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),de(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),de(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&de(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&de(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),a0(a,l,u,f,c,s)}var u8,PIe=D(()=>{"use strict";je();Ze();tI();De();u8=se({batchNorm3d_:pkt})});function mkt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),de(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),de(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),de(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&de(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&de(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),a0(a,l,u,f,c,s)}var c8,LIe=D(()=>{"use strict";je();Ze();tI();De();c8=se({batchNorm4d_:mkt})});function hkt(t,r,n){let o=J(t,"x","bincount"),i=J(r,"weights","bincount");de(o.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${o.dtype}`),de(n>=0,()=>`size must be non-negative, but got ${n}.`),de(i.size===o.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n};return ue.runKernel(oS,s,a)}var f8,Eoe=D(()=>{"use strict";$e();Ee();je();Ze();De();f8=se({bincount_:hkt})});function gkt(t,r){let n=J(t,"x","bitwiseAnd"),o=J(r,"y","bitwiseAnd");if(!Kl(n.shape,o.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${o.shape}`);if(n.dtype!=="int32"||o.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${o.dtype}`);let i={a:n,b:o};return ue.runKernel(p1,i)}var BIe,$Ie=D(()=>{"use strict";$e();Ee();je();Bs();De();BIe=se({bitwiseAnd_:gkt})});function ykt(t,r){let n=J(t,"s0","broadcastArgs","int32"),o=J(r,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(o.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${o.rank}`);let i={s0:n,s1:o};return ue.runKernel(iS,i)}var zIe,UIe=D(()=>{"use strict";$e();Ee();je();De();zIe=se({broadcastArgs_:ykt})});function bkt(t,r){let n=J(t,"broadcastTo","x"),o=n.shape;if(ei(r),r.length<n.rank)throw new Error(`broadcastTo(): shape.length=${r.length} < input.rank=${n.rank}.`);if(r.length>n.rank){let c=n.shape.slice();for(;c.length<r.length;)c.unshift(1);n=Se(n,c)}let i=n.shape,s=Array.from(r);for(let c=r.length-1;c>=0;c--)if(i[c]===r[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return zu(n);let l={x:n},u={reps:s};return ue.runKernel(lm,l,u)}var l0,d8=D(()=>{"use strict";$e();Ee();je();Bs();Kk();De();Ht();l0=se({broadcastTo_:bkt})});function xkt(t){let n={x:J(t,"x","ceil","float32")};return ue.runKernel(bg,n)}var p8,VIe=D(()=>{"use strict";$e();Ee();je();De();p8=se({ceil_:xkt})});function qd(t,r,n){ei(t),n=n||d1(r);let o={shape:t,value:r,dtype:n};return ue.runKernel(vS,{},o)}var rI=D(()=>{"use strict";$e();Ee();Ze();Bs();});function vkt(t,r,n){let o=J(t,"x","clipByValue");if(de(r<=n,()=>`Error in clip: min (${r}) must be less than or equal to max (${n}).`),r===n)return qd(o.shape,r,o.dtype);let i={x:o},s={clipValueMin:r,clipValueMax:n};return ue.runKernel(xg,i,s)}var zs,GIe=D(()=>{"use strict";$e();Ee();je();Ze();rI();De();zs=se({clipByValue_:vkt})});function wkt(t){return Nn(t,0)}var m8,WIe=D(()=>{"use strict";Wf();De();m8=se({concat1d_:wkt})});function _kt(t,r){return Nn(t,r)}var h8,qIe=D(()=>{"use strict";Wf();De();h8=se({concat2d_:_kt})});function Skt(t,r){return Nn(t,r)}var g8,HIe=D(()=>{"use strict";Wf();De();g8=se({concat3d_:Skt})});function Ckt(t,r){return Nn(t,r)}var y8,YIe=D(()=>{"use strict";Wf();De();y8=se({concat4d_:Ckt})});function Ekt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","conv2d","float32"),u=J(r,"filter","conv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),de(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),de(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),ho("conv2d",o,a);let d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),de(ga(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),de(s0(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),de(s0(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:u},m={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},h=ue.runKernel(Cb,p,m);return f?Se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Vu,bC=D(()=>{"use strict";$e();Ee();je();Ze();Ss();De();Ht();Vu=se({conv2d_:Ekt})});function Tkt(t,r,n,o,i="NWC",s=1,a){let l=J(t,"x","conv1d"),u=J(r,"filter","conv1d"),c=l,f=!1;l.rank===2&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1]])),de(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),de(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),ho("conv1d",o,a),de(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),de(ga(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),de(s0(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),de(s0(n),()=>"Error in conv1D: Stride should be larger than 0."),de(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=Se(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=Vu(p,d,[1,n],o,"NHWC",[1,s],a);return f?Se(y,[y.shape[2],y.shape[3]]):Se(y,[y.shape[0],y.shape[2],y.shape[3]])}var nI,Toe=D(()=>{"use strict";je();Ze();bC();Ss();De();Ht();nI=se({conv1d_:Tkt})});function Akt(t,r,n,o,i,s="NHWC",a){de(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let l=t,u=r,c=!1;r.rank===3&&(c=!0,u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]),l=[1,t[0],t[1],t[2]]),de(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),de(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),de(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let f=s==="NHWC"?l[3]:l[1],d=s==="NHWC"?u.shape[3]:u.shape[1];de(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),de(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),ho("conv2dDerInput",i,a);let p={dy:u,filter:n},m={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:l},h=ue.runKernel(Eb,p,m);return c?Se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var oI,b8=D(()=>{"use strict";$e();Ee();Ze();Ss();De();Ht();oI=se({conv2DBackpropInput_:Akt})});function kkt(t,r,n,o,i,s){let a=J(t,"x","conv2dTranspose"),l=J(r,"filter","conv2dTranspose");return oI(n,a,l,o,i,"NHWC",s)}var iI,Aoe=D(()=>{"use strict";je();b8();De();iI=se({conv2dTranspose_:kkt})});function Ikt(t,r,n,o,i="NDHWC",s=[1,1,1]){let a=J(t,"x","conv3d"),l=J(r,"filter","conv3d"),u=a,c=!1;a.rank===4&&(c=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),de(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),de(u.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${l.shape[3]}.`),de(ga(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),de(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),de(s0(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),de(s0(n),()=>"Error in conv3D: Strides should be larger than 0.");let f={x:u,filter:l},d={strides:n,pad:o,dataFormat:i,dilations:s},p=ue.runKernel(Tb,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var x8,XIe=D(()=>{"use strict";$e();Ee();je();Ze();Ss();De();Ht();x8=se({conv3d_:Ikt})});function Dkt(t,r,n,o,i){de(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let s=t,a=r,l=!1;r.rank===4&&(l=!0,a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);let u=s[4],c=a.shape[4];de(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),de(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),de(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),de(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),de(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let f={dy:a,filter:n},d={pad:i,strides:o,inputShape:s},p=ue.runKernel(uS,f,d);return l?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var v8,koe=D(()=>{"use strict";$e();Ee();Ze();De();Ht();v8=se({conv3DBackpropInput_:Dkt})});function Nkt(t,r,n,o,i){let s=J(t,"x","conv3dTranspose"),a=J(r,"filter","conv3dTranspose");return v8(n,s,a,o,i)}var w8,KIe=D(()=>{"use strict";je();koe();De();w8=se({conv3dTranspose_:Nkt})});function Fkt(t){let n={x:J(t,"x","cos","float32")};return ue.runKernel(vg,n)}var j1,_8=D(()=>{"use strict";$e();Ee();je();De();j1=se({cos_:Fkt})});function Okt(t){let n={x:J(t,"x","cosh","float32")};return ue.runKernel(wg,n)}var sI,Ioe=D(()=>{"use strict";$e();Ee();je();De();sI=se({cosh_:Okt})});function Mkt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumprod")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(cS,s,a)}var xC,S8=D(()=>{"use strict";$e();Ee();je();De();xC=se({cumprod_:Mkt})});function Rkt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumsum")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(Ab,s,a)}var aI,C8=D(()=>{"use strict";$e();Ee();je();De();aI=se({cumsum_:Rkt})});function jkt(t,r,n,o=!1){let i=J(t,"x","denseBincount"),s=J(r,"weights","denseBincount");de(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),de(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),de(n>=0,()=>`size must be non-negative, but got ${n}.`),de(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);let a={x:i,weights:s},l={size:n,binaryOutput:o};return ue.runKernel(dS,a,l)}var QR,ZIe=D(()=>{"use strict";$e();Ee();je();Ze();De();QR=se({denseBincount_:jkt})});function Pkt(t,r,n="NHWC"){let o=J(t,"x","depthToSpace","float32"),i=n==="NHWC"?o.shape[1]:o.shape[2],s=n==="NHWC"?o.shape[2]:o.shape[3],a=n==="NHWC"?o.shape[3]:o.shape[1];de(r>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${r}`),de(i*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${r}  for depthToSpace with input shape
    ${o.shape}`),de(s*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${r} for depthToSpace with input shape
        ${o.shape}`),de(a%(r*r)===0,()=>`Dimension size must be evenly divisible by ${r*r} but is ${a} for depthToSpace with input shape ${o.shape}`);let l={x:o},u={blockSize:r,dataFormat:n};return ue.runKernel(pS,l,u)}var E8,Doe=D(()=>{"use strict";$e();Ee();je();Ze();De();E8=se({depthToSpace_:Pkt})});function Lkt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","depthwiseConv2d","float32"),u=J(r,"filter","depthwiseConv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),de(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),de(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),ho("depthwiseConv2d",o,a);let p={x:c,filter:u},m={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},h=ue.runKernel(kb,p,m);return f?Se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var u0,JR=D(()=>{"use strict";$e();Ee();je();Ze();Ss();De();Ht();u0=se({depthwiseConv2d_:Lkt})});function Bkt(t){let n={x:J(t,"x","diag")};return ue.runKernel(gS,n)}var QIe,JIe=D(()=>{"use strict";$e();Ee();je();De();QIe=se({diag_:Bkt})});function $kt(t,r,n,o,i=[1,1],s="NHWC"){let a=J(t,"x","dilation2d"),l=J(r,"filter","dilation2d");de(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),de(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),de(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=a,c=!1;a.rank===3&&(u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),de(u.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${l.shape[2]}`);let f={x:u,filter:l},d={strides:n,pad:o,dilations:i},p=ue.runKernel(Ib,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var T8,Noe=D(()=>{"use strict";$e();Ee();je();Ze();De();Ht();T8=se({dilation2d_:$kt})});var Gu={};cn(Gu,{assertAndGetBroadcastShape:()=>Rr,getBroadcastDims:()=>eDe,getReductionAxes:()=>no});function eDe(t,r){let n=t.length,o=[];for(let i=0;i<n;i++){let s=n-1-i,a=t[s]||1;(r[r.length-1-i]||1)>1&&a===1&&o.unshift(s)}return o}function no(t,r){let n=[];for(let o=0;o<r.length;o++){let i=t[t.length-o-1],s=r.length-o-1,a=r[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function Rr(t,r){let n=Math.max(t.length,r.length),o=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=r[r.length-i-1];if(a==null&&(a=1),s===1)o[n-i-1]=a;else if(a===1)o[n-i-1]=s;else if(s!==a){let l=`Operands could not be broadcast together with shapes ${t} and ${r}.`;throw Error(l)}else o[n-i-1]=s}return o}var Ao=D(()=>{"use strict";});function zkt(t,r){let n=J(t,"a","equal","string_or_numeric"),o=J(r,"b","equal","string_or_numeric");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(m1,i)}var Sl,e3=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();Sl=se({equal_:zkt})});function Ukt(t,r,n){let o=J(r,"a","where"),i=J(n,"b","where"),s=J(t,"condition","where","bool"),a=Rr(Rr(s.shape,o.shape),i.shape),l=l0(s,a),u=l0(o,a),c=l0(i,a),f={condition:l,t:u,e:c};return ue.runKernel(Qb,f)}var go,qf=D(()=>{"use strict";$e();Ee();je();d8();Ao();De();go=se({where_:Ukt})});function Vkt(t){let n={x:J(t,"x","zerosLike")};return ue.runKernel(sx,n)}var ir,zo=D(()=>{"use strict";$e();Ee();je();De();ir=se({zerosLike_:Vkt})});function Gkt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");[n,o]=nn(n,o);let i=Ct(n,o),s=ir(i),a=Sl(o,s);return go(a,s,i)}var A8,Foe=D(()=>{"use strict";ri();je();Yn();e3();De();qf();zo();A8=se({divNoNan_:Gkt})});function Wkt(t,r){let n=J(t,"t1","dot"),o=J(r,"t2","dot");de((n.rank===1||n.rank===2)&&(o.rank===1||o.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);let i=n.rank===1?n.size:n.shape[1],s=o.rank===1?o.size:o.shape[0];if(de(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&o.rank===1){let a=Se(n,[1,-1]),l=Se(o,[-1,1]),u=zr(a,l);return Se(u,[])}else if(n.rank===1&&o.rank===2){let a=Se(n,[1,-1]),l=Se(o,[o.shape[0],o.shape[1]]),u=zr(a,l);return Se(u,[u.size])}else if(n.rank===2&&o.rank===1){let a=Se(o,[-1,1]),l=zr(n,a);return Se(l,[l.size])}else{let a=Se(o,[o.shape[0],o.shape[1]]);return zr(n,a)}}var k8,Ooe=D(()=>{"use strict";je();Ze();mm();De();Ht();k8=se({dot_:Wkt})});function qkt(t,...r){let n=r.map((i,s)=>J(i,`tensors${s}`,"einsum")),o={equation:t};return ue.runKernel(yS,n,o)}var P1,Moe=D(()=>{"use strict";$e();Ee();je();De();P1=se({einsum_:qkt})});function Hkt(t){let n={x:J(t,"x","elu","float32")};return ue.runKernel(Sg,n)}var c0,I8=D(()=>{"use strict";$e();Ee();je();De();c0=se({elu_:Hkt})});function Ykt(t,r){let n=J(t,"x","ensureShape","string_or_numeric");if(!Ane(n.shape,r))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${r}`);return t}var tDe,rDe=D(()=>{"use strict";je();Bs();De();tDe=se({ensureShape_:Ykt})});function Xkt(t){let r=J(t,"x","erf");de(r.dtype==="int32"||r.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),r.dtype==="int32"&&(r=rt(r,"float32"));let n={x:r};return ue.runKernel(Cg,n)}var lI,nDe=D(()=>{"use strict";$e();Ee();je();Ze();fn();De();lI=se({erf_:Xkt})});function Roe(t,r){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==r-1-n)return!1;return!0}function oDe(t,r,n){let o=t.length+r.length,i=[],s=0,a=0;for(let l=0;l<o;l++)n.indexOf(l)===-1?i.push(t[s++]):i.push(r[a++]);return i}function joe(t,r){let n=[],o=t.length;for(let s=0;s<o;s++)r.indexOf(s)===-1&&n.push(t[s]);let i=r.map(s=>t[s]);return[n,i]}function Hd(t,r){let n=r.map(o=>1);return oDe(t,n,r)}function Kkt(t,r,n){de(Roe(r,n),()=>`${t} supports only inner-most axes for now. Got axes ${r} and rank-${n} input.`)}function Poe(t,r){if(Roe(t,r))return null;let n=[];for(let o=0;o<r;++o)t.indexOf(o)===-1&&n.push(o);return t.forEach(o=>n.push(o)),n}function t3(t){return t.map((r,n)=>[n,r]).sort((r,n)=>r[1]-n[1]).map(r=>r[0])}function Zkt(t,r){let n=[];for(let o=r-t;o<r;++o)n.push(o);return n}var gm=D(()=>{"use strict";Ze();});function Qkt(t,r=null,n=!1){let i={x:J(t,"x","max")},s={reductionIndices:r,keepDims:n};return ue.runKernel(Rb,i,s)}var Us,uI=D(()=>{"use strict";$e();Ee();je();De();Us=se({max_:Qkt})});function Jkt(t,r=null,n=!1){let i={x:J(t,"x","min")},s={axis:r,keepDims:n};return ue.runKernel(Bb,i,s)}var px,D8=D(()=>{"use strict";$e();Ee();je();De();px=se({min_:Jkt})});function eIt(t,r){let n=J(t,"base","pow"),o=J(r,"exp","pow");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(Bg,i)}var $a,L1=D(()=>{"use strict";$e();Ee();ri();je();De();$a=se({pow_:eIt})});function Mt(t,r){if((Li(t)&&r!=="string"||Array.isArray(t))&&r!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(r==="string"&&Li(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ql(t,[],[],r)}var Uo=D(()=>{"use strict";Ze();ux();});function tIt(t){let n={x:J(t,"x","sqrt","float32")};return ue.runKernel(Zg,n)}var Xn,ym=D(()=>{"use strict";$e();Ee();je();De();Xn=se({sqrt_:tIt})});function rIt(t){let r=J(t,"x","square"),n={};return ue.runKernel("Square",{x:r},n)}var Gr,ls=D(()=>{"use strict";$e();je();De();Gr=se({square_:rIt})});function nIt(t,r=null,n=!1){let o=J(t,"x","sum");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(ex,i,s)}var kt,Si=D(()=>{"use strict";$e();Ee();je();fn();De();kt=se({sum_:nIt})});function oIt(t,r="euclidean",n=null,o=!1){t=J(t,"x","norm");let i=iDe(t,r,n),s=i.shape;if(o){let a=as(n,t.shape);s=Hd(i.shape,a)}return Se(i,s)}function iDe(t,r,n=null){if(t.rank===0)return To(t);if(t.rank!==1&&n===null)return iDe(Se(t,[-1]),r,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(r===1)return kt(To(t),n);if(r===1/0)return Us(To(t),n);if(r===-1/0)return px(To(t),n);if(r==="euclidean"||r===2)return Xn(kt($a(To(t),Mt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}if(Array.isArray(n)&&n.length===2){if(r===1)return Us(kt(To(t),n[0]),n[1]-1);if(r===1/0)return Us(kt(To(t),n[1]),n[0]);if(r===-1/0)return px(kt(To(t),n[1]),n[0]);if(r==="fro"||r==="euclidean")return Xn(kt(Gr(t),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var mx,r3=D(()=>{"use strict";je();Ze();hC();gm();uI();D8();De();L1();Ht();Uo();ym();ls();Si();mx=se({norm_:oIt})});function iIt(t,r=null,n=!1){return mx(t,"euclidean",r,n)}var N8,Boe=D(()=>{"use strict";r3();De();N8=se({euclideanNorm_:iIt})});function sIt(t){let n={x:J(t,"x","exp")};return ue.runKernel(Eg,n)}var yi,f0=D(()=>{"use strict";$e();Ee();je();De();yi=se({exp_:sIt})});function aIt(t,r=0){let n=J(t,"x","expandDims","string_or_numeric");de(r<=n.rank,()=>"Axis must be <= rank of the tensor");let o={input:n},i={dim:r};return ue.runKernel(Db,o,i)}var Ci,cI=D(()=>{"use strict";$e();Ee();je();Ze();De();Ci=se({expandDims_:aIt})});function lIt(t){let n={x:J(t,"x","expm1")};return ue.runKernel(Tg,n)}var F8,sDe=D(()=>{"use strict";$e();Ee();je();De();F8=se({expm1_:lIt})});function uIt(t,r){let n=J(t,"x","tile","string_or_numeric");de(n.rank===r.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${r}.`);let o={x:n},i={reps:r};return ue.runKernel(lm,o,i)}var ya,fI=D(()=>{"use strict";$e();Ee();je();Ze();De();ya=se({tile_:uIt})});function cIt(t,r,n,o="float32"){r==null&&(r=t);let i=Qt([t,r],o),s=t<=r?t:r;for(let l=0;l<s;++l)i.set(1,l,l);let a=Se(i.toTensor(),[t,r]);if(n==null)return a;if(n.length===1)return ya(Ci(a,0),[n[0],1,1]);if(n.length===2)return ya(Ci(Ci(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return ya(Ci(Ci(Ci(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var vC,$oe=D(()=>{"use strict";dx();cI();De();Ht();fI();vC=se({eye_:cIt})});function fIt(t){let n={x:J(t,"x","floor","float32")};return ue.runKernel(Ag,n)}var d0,O8=D(()=>{"use strict";$e();Ee();je();De();d0=se({floor_:fIt})});function dIt(t,r,n=0,o=0){let i=J(t,"x","gather"),s=J(r,"indices","gather","int32"),a={x:i,indices:s},l={axis:n,batchDims:o};return ue.runKernel(Fb,a,l)}var p0,n3=D(()=>{"use strict";$e();Ee();je();De();p0=se({gather_:dIt})});function pIt(t,r){let n=J(t,"a","greater","string_or_numeric"),o=J(r,"b","greater","string_or_numeric");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(h1,i)}var ni,m0=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();ni=se({greater_:pIt})});function mIt(t,r){let n=J(t,"a","greaterEqual","string_or_numeric"),o=J(r,"b","greaterEqual","string_or_numeric");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Ig,i)}var Jl,wC=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();Jl=se({greaterEqual_:mIt})});function hIt(t){let n={input:J(t,"input","imag")};return ue.runKernel(CS,n)}var B1,o3=D(()=>{"use strict";$e();Ee();je();De();B1=se({imag_:hIt})});function gIt(t){let n={x:J(t,"x","isFinite")};return ue.runKernel(Dg,n)}var M8,aDe=D(()=>{"use strict";$e();Ee();je();De();M8=se({isFinite_:gIt})});function yIt(t){let n={x:J(t,"x","isInf")};return ue.runKernel(Ng,n)}var R8,lDe=D(()=>{"use strict";$e();Ee();je();De();R8=se({isInf_:yIt})});function bIt(t){let n={x:J(t,"x","isNaN")};return ue.runKernel(Fg,n)}var j8,uDe=D(()=>{"use strict";$e();Ee();je();De();j8=se({isNaN_:bIt})});function xIt(t,r=.2){let o={x:J(t,"x","leakyRelu")},i={alpha:r};return ue.runKernel(Ob,o,i)}var $1,P8=D(()=>{"use strict";$e();Ee();je();De();$1=se({leakyRelu_:xIt})});function vIt(t,r){let n=J(t,"a","less","string_or_numeric"),o=J(r,"b","less","string_or_numeric");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(g1,i)}var hx,i3=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();hx=se({less_:vIt})});function wIt(t,r){let n=J(t,"a","lessEqual","string_or_numeric"),o=J(r,"b","lessEqual","string_or_numeric");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(y1,i)}var Oc,z1=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();Oc=se({lessEqual_:wIt})});function cDe(t,r,n){if(n<=0)throw new Error("The number of values should be positive.");let o={start:t,stop:r,num:n};return ue.runKernel(ES,{},o)}var fDe=D(()=>{"use strict";$e();Ee();});function _It(t,r=5,n=1,o=1,i=.5){let s=J(t,"x","localResponseNormalization");de(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),de(pb(r),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${r}.`);let a=s,l=!1;s.rank===3&&(l=!0,a=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let u={x:a},c={depthRadius:r,bias:n,alpha:o,beta:i},f=ue.runKernel(Mb,u,c);return l?Se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var L8,zoe=D(()=>{"use strict";$e();Ee();je();Ze();De();Ht();L8=se({localResponseNormalization_:_It})});function SIt(t){let n={x:J(t,"x","log","float32")};return ue.runKernel(Og,n)}var Vs,dI=D(()=>{"use strict";$e();Ee();je();De();Vs=se({log_:SIt})});function CIt(t){let n={x:J(t,"x","log1p")};return ue.runKernel(Mg,n)}var U1,Uoe=D(()=>{"use strict";$e();Ee();je();De();U1=se({log1p_:CIt})});function dDe(t){return de(ug(t),()=>"The f passed in grad(f) must be a function"),(r,n)=>{let o=J(r,"x","tf.grad","string_or_numeric"),i=n!=null?J(n,"dy","tf.grad"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(o),[o],i);return i!=null&&Bo(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),B8(a),a[0]})}}function pDe(t){return de(ug(t),()=>"The f passed in grads(f) must be a function"),(r,n)=>{de(Array.isArray(r),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let o=lx(r,"args","tf.grads","string_or_numeric"),i=n!=null?J(n,"dy","tf.grads"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(...o),o,i);return i!=null&&Bo(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),B8(a),a})}}function mDe(t){return de(ug(t),()=>"The f passed in valueAndGrad(f) must be a function"),(r,n)=>{de(r instanceof Jr,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),de(n==null||n instanceof Jr,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:o,value:i}=ue.gradients(()=>t(r),[r],n);return B8(o),{grad:o[0],value:i}}}function hDe(t){return de(ug(t),()=>"The f passed in valueAndGrads(f) must be a function"),(r,n)=>{de(Array.isArray(r)&&r.every(i=>i instanceof Jr),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),de(n==null||n instanceof Jr,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let o=ue.gradients(()=>t(...r),r,n);return n!=null&&Bo(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),B8(o.grads),o}}function s3(t,r){de(ug(t),()=>"The f passed in variableGrads(f) must be a function"),de(r==null||Array.isArray(r)&&r.every(c=>c instanceof o0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=r!=null;if(!n){r=[];for(let c in ue.registeredVariables)r.push(ue.registeredVariables[c])}let o=n?r.filter(c=>!c.trainable):null,i=r.length;r=r.filter(c=>c.trainable),de(r.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let s=!0,{value:a,grads:l}=ue.gradients(t,r,null,s);de(l.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),de(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);let u={};return r.forEach((c,f)=>{l[f]!=null&&(u[c.name]=l[f])}),o?.forEach(c=>u[c.name]=null),{value:a,grads:u}}function Cl(t){return ue.customGrad(t)}function B8(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var gx=D(()=>{"use strict";$e();Je();je();Ze();});function EIt(t){let n={x:J(t,"x","neg")};return ue.runKernel(zb,n)}var Xr,Gs=D(()=>{"use strict";$e();Ee();je();De();Xr=se({neg_:EIt})});function TIt(t){let n={x:J(t,"x","softplus")};return ue.runKernel(Kg,n)}var bm,Voe=D(()=>{"use strict";$e();Ee();je();De();bm=se({softplus_:TIt})});function AIt(t){let r=J(t,"x","logSigmoid");return Cl(o=>({value:Xr(bm(Xr(o))),gradFunc:a=>we(a,_l(Xr(o)))}))(r)}var $8,gDe=D(()=>{"use strict";gx();je();cr();Gs();De();eI();Voe();$8=se({logSigmoid_:AIt})});function kIt(t,r){let n=J(t,"a","sub"),o=J(r,"b","sub");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(Jg,i)}var wt,oo=D(()=>{"use strict";$e();Ee();ri();je();De();wt=se({sub_:kIt})});function IIt(t,r=-1){let n=J(t,"logits","logSoftmax");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${r}`);return Cl((i,s)=>{let l=Us(i,r,!0),u=wt(i,l),c=wt(rt(u,"float32"),Vs(kt(yi(u),r,!0)));return s([c]),{value:c,gradFunc:(d,p)=>{let[m]=p,h=!0,g=yi(m);return wt(d,we(kt(d,r,h),g))}}})(n)}var pI,yDe=D(()=>{"use strict";gx();je();fn();f0();dI();uI();cr();De();oo();Si();pI=se({logSoftmax_:IIt})});function DIt(t,r=null,n=!1){let o=J(t,"x","logSumExp"),i=as(r,o.shape),s=Us(o,i,!0),a=wt(o,s),l=yi(a),u=kt(l,i),c=Vs(u),f=Ke(Se(s,c.shape),c);if(n){let d=Hd(f.shape,i);return Se(f,d)}return f}var V1,z8=D(()=>{"use strict";je();Ze();$o();gm();f0();dI();uI();De();Ht();oo();Si();V1=se({logSumExp_:DIt})});function NIt(t,r){let n=J(t,"a","logicalAnd","bool"),o=J(r,"b","logicalAnd","bool");Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(b1,i)}var za,_C=D(()=>{"use strict";$e();Ee();je();Ao();De();za=se({logicalAnd_:NIt})});function FIt(t){let n={x:J(t,"x","logicalNot","bool")};return ue.runKernel(x1,n)}var G1,a3=D(()=>{"use strict";$e();Ee();je();De();G1=se({logicalNot_:FIt})});function OIt(t,r){let n=J(t,"a","logicalOr","bool"),o=J(r,"b","logicalOr","bool");Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(v1,i)}var mI,U8=D(()=>{"use strict";$e();Ee();je();Ao();De();mI=se({logicalOr_:OIt})});function MIt(t,r){let n=J(t,"a","logicalXor","bool"),o=J(r,"b","logicalXor","bool");return Rr(n.shape,o.shape),za(mI(t,r),G1(za(t,r)))}var V8,Goe=D(()=>{"use strict";je();Ao();_C();a3();U8();De();V8=se({logicalXor_:MIt})});function RIt(t,r,n="left"){let o=J(t,"sortedSequence","searchSorted"),i=J(r,"values","searchSorted"),s=o.shape[o.shape.length-1],a=i.shape[i.shape.length-1],l=Se(o,[-1,s]),u=Se(i,[-1,a]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(rn(u.shape)>=G8)throw new Error(`values tensor size must less than ${G8}`);if(l.shape[1]>=G8)throw new Error(`trailing dim_size must less than ${G8} for int32 output type, was ${l.shape[1]}`);let c={sortedSequence:l,values:u},f={side:n};return ue.runKernel(VS,c,f)}var G8,l3,W8=D(()=>{"use strict";$e();Ee();je();Bs();De();Ht();G8=2147483648;l3=se({searchSorted_:RIt})});function bDe(t,r){return l3(t,r,"left")}var xDe=D(()=>{"use strict";W8();});function jIt(t,r,n,o,i){let s=J(t,"x","maxPool"),a=1,l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),de(ga(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),ho("maxPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(jb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var W1,q8=D(()=>{"use strict";$e();Ee();je();Ze();Ss();De();Ht();W1=se({maxPool_:jIt})});function PIt(t,r=[1,1,1],n,o,i,s="NDHWC"){let a=J(t,"x","maxPool3d"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),de(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),ho("maxPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Pb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var H8,vDe=D(()=>{"use strict";$e();Ee();je();Ze();Ss();De();Ht();H8=se({maxPool3d_:PIt})});function LIt(t,r,n,o,i=!1){let a={x:J(t,"x","maxPoolWithArgmax")},l={filterSize:r,strides:n,pad:o,includeBatchInIndex:i},u=ue.runKernel(IS,a,l);return{result:u[0],indexes:u[1]}}var wDe,_De=D(()=>{"use strict";$e();Ee();je();De();wDe=se({maxPoolWithArgmax_:LIt})});function BIt(t,r){let n=J(t,"a","maximum"),o=J(r,"b","maximum");[n,o]=nn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Rg,i)}var Wu,u3=D(()=>{"use strict";$e();Ee();ri();je();Ao();fn();De();Wu=se({maximum_:BIt})});function $It(t,r=null,n=!1){let i={x:J(t,"x","mean")},s={axis:r,keepDims:n};return ue.runKernel(Lb,i,s)}var yo,c3=D(()=>{"use strict";$e();Ee();je();De();yo=se({mean_:$It})});function bo(t,r="float32"){if(ei(t),r==="complex64"){let o=bo(t,"float32"),i=bo(t,"float32");return $u(o,i)}let n=Dk(rn(t),r);return ue.makeTensor(n,t,r)}var hI=D(()=>{"use strict";$e();Ze();I1();});function $i(t,r="float32"){if(ei(t),r==="complex64"){let o=$i(t,"float32"),i=bo(t,"float32");return $u(o,i)}let n=RR(rn(t),r);return ue.makeTensor(n,t,r)}var SC=D(()=>{"use strict";$e();Ze();Bs();I1();hI();});function SDe(t,r,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let o=J(t,"x","meshgrid",t instanceof Jr?t.dtype:"float32");if(r===void 0)return[o];let i=J(r,"y","meshgrid",r instanceof Jr?r.dtype:"float32"),s=rn(o.shape),a=rn(i.shape);return n==="xy"?(o=Se(o,[1,-1]),i=Se(i,[-1,1]),[zr($i([a,1],o.dtype),o),zr(i,$i([1,s],i.dtype))]):(o=Se(o,[-1,1]),i=Se(i,[1,-1]),[zr(o,$i([1,a],o.dtype)),zr($i([s,1],i.dtype),i)])}var CDe=D(()=>{"use strict";mm();SC();Ht();Je();je();Bs();});function zIt(t,r){let n=J(t,"a","minimum"),o=J(r,"b","minimum");[n,o]=nn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(jg,i)}var Hf,f3=D(()=>{"use strict";$e();Ee();ri();je();Ao();fn();De();Hf=se({minimum_:zIt})});function UIt(t,r,n){de(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let o=J(t,"x","mirrorPad");if(o.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");de(r.length===o.rank,()=>`Padding doesn't match input. Must be ${o.rank}. Got ${r.length}.`);let i=n==="reflect"?1:0;for(let l=0;l<o.rank;l++)de(r[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),de(r[l][0]>=0&&r[l][0]<=o.shape[l]-i&&r[l][1]>=0&&r[l][1]<=o.shape[l]-i,()=>`Padding in dimension ${l} cannot be greater than or equal to ${o.shape[l]-i} or less than 0 for input of shape ${o.shape}`);let s={paddings:r,mode:n},a={x:o};return ue.runKernel($b,a,s)}var Y8,Woe=D(()=>{"use strict";$e();Ee();je();Ze();De();Y8=se({mirrorPad_:UIt})});function VIt(t,r){let n=J(t,"a","mod"),o=J(r,"b","mod");[n,o]=nn(n,o);let i={a:n,b:o};return ue.runKernel(Pg,i)}var X8,qoe=D(()=>{"use strict";$e();Ee();ri();je();De();X8=se({mod_:VIt})});function GIt(t,r=null,n=!1){t=J(t,"x","moments");let o=as(r,t.shape),i=yo(t,o,n),s=i.shape;n||(s=Hd(i.shape,o));let a=Gr(wt(rt(t,"float32"),Se(i,s))),l=yo(a,o,n);return{mean:i,variance:l}}var CC,EDe=D(()=>{"use strict";je();Ze();gm();fn();c3();De();Ht();ls();oo();CC=se({moments_:GIt})});function WIt(t,r,n,o){let i=J(r,"data","multiRNNCell"),s=lx(n,"c","multiRNNCell"),a=lx(o,"h","multiRNNCell"),l=i,u=[];for(let d=0;d<t.length;d++){let p=t[d](l,s[d],a[d]);u.push(p[0]),u.push(p[1]),l=p[1]}let c=[],f=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),f.push(u[d+1]);return[c,f]}var TDe,ADe=D(()=>{"use strict";je();De();TDe=se({multiRNNCell_:WIt})});function qIt(t,r,n,o=!1){let i=J(t,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();let u={logits:a===1?Se(i,[1,-1]):i},c={numSamples:r,seed:n,normalized:o},f=ue.runKernel(DS,u,c);return a===1?Se(f,[f.size]):f}var kDe,IDe=D(()=>{"use strict";$e();Ee();je();De();Ht();kDe=se({multinomial_:qIt})});function HIt(t,r){let n=J(t,"a","notEqual","string_or_numeric"),o=J(r,"b","notEqual","string_or_numeric");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(w1,i)}var xm,K8=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();xm=se({notEqual_:HIt})});function YIt(t,r,n=1,o=0,i="int32"){if(r<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${r}`);let a={indices:J(t,"indices","oneHot","int32")},l={dtype:i,depth:r,onValue:n,offValue:o};return ue.runKernel(Vb,a,l)}var h0,Z8=D(()=>{"use strict";$e();Ee();je();De();h0=se({oneHot_:YIt})});function XIt(t){let n={x:J(t,"x","onesLike")};return ue.runKernel(Ub,n)}var Cs,DDe=D(()=>{"use strict";$e();Ee();je();De();Cs=se({onesLike_:XIt})});function KIt(t,r){let n=J(t,"v1","outerProduct"),o=J(r,"v2","outerProduct");de(n.rank===1&&o.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${o.rank}.`);let i=Se(n,[-1,1]),s=Se(o,[1,-1]);return zr(i,s)}var NDe,FDe=D(()=>{"use strict";je();Ze();mm();De();Ht();NDe=se({outerProduct_:KIt})});function ZIt(t,r,n=0){let o=J(t,"x","pad");if(o.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:r,constantValue:n},s={x:o};return ue.runKernel(Wb,s,i)}var eu,q1=D(()=>{"use strict";$e();Ee();je();De();eu=se({pad_:ZIt})});function QIt(t,r,n=0){return de(r.length===2,()=>"Invalid number of paddings. Must be length of 2."),eu(t,[r],n)}var ODe,MDe=D(()=>{"use strict";Ze();De();q1();ODe=se({pad1d_:QIt})});function JIt(t,r,n=0){return de(r.length===2&&r[0].length===2&&r[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),eu(t,r,n)}var RDe,jDe=D(()=>{"use strict";Ze();De();q1();RDe=se({pad2d_:JIt})});function eDt(t,r,n=0){return de(r.length===3&&r[0].length===2&&r[1].length===2&&r[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),eu(t,r,n)}var PDe,LDe=D(()=>{"use strict";Ze();De();q1();PDe=se({pad3d_:eDt})});function tDt(t,r,n=0){return de(r.length===4&&r[0].length===2&&r[1].length===2&&r[2].length===2&&r[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),eu(t,r,n)}var BDe,$De=D(()=>{"use strict";Ze();De();q1();BDe=se({pad4d_:tDt})});function rDt(t,r,n){let o=J(t,"x","spaceToBatchND");de(o.rank>=1+r.length,()=>`input rank ${o.rank} should be > than [blockShape] ${r.length}`),de(n.length===r.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${r.length}`),de(o.shape.reduce((a,l,u)=>u>0&&u<=r.length?a&&(l+n[u-1][0]+n[u-1][1])%r[u-1]===0:a,!0),()=>`input spatial dimensions ${o.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${r.toString()}`);let i={x:o},s={blockShape:r,paddings:n};return ue.runKernel(tx,i,s)}var H1,d3=D(()=>{"use strict";$e();Ee();je();Ze();De();H1=se({spaceToBatchND_:rDt})});function nDt(t,r,n,o,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),o===0&&(o="valid");let l=J(t,"x","maxPool"),u=l,c=!1;l.rank===3&&(c=!0,u=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),de(ga(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);let f=_oe(u.shape,r,s,i,o),d=[f.dilationHeight,f.dilationWidth],p;o==="same"?p=iDt([f.filterHeight,f.filterWidth],d):p=[[0,0],[0,0]];let m=d[0]===1&&d[1]===1,[h,g]=oDt([f.inHeight,f.inWidth],d,p),y=m?o:"valid",b=m?u:H1(u,d,h),v=(n==="avg"?()=>M1(b,r,s,y,a):()=>W1(b,r,s,y,a))(),w=m?v:R1(v,d,g);return c?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function oDt(t,r,n){let o=n.map(f=>f[0]),i=n.map(f=>f[1]),s=t.concat(o,i),a=r.map((f,d)=>(f-s[d]%f)%f),l=i.map((f,d)=>f+a[d]),u=r.map((f,d)=>[o[d],l[d]]),c=r.map((f,d)=>[0,a[d]]);return[u,c]}function iDt(t,r){let o=t.map((a,l)=>a+(a-1)*(r[l]-1)).map(a=>a-1),i=o.map(a=>Math.floor(a/2)),s=o.map((a,l)=>a-i[l]);return o.map((a,l)=>[i[l],s[l]])}var Q8,Hoe=D(()=>{"use strict";je();Ze();s8();ZR();Ss();q8();De();Ht();d3();Q8=se({pool_:nDt})});function sDt(t,r){let n=J(t,"x","prelu"),o=J(r,"alpha","prelu"),i={x:n,alpha:o};return ue.runKernel(qb,i)}var Y1,J8=D(()=>{"use strict";$e();Ee();je();De();Y1=se({prelu_:sDt})});function aDt(t,r=null,n=!1){let o=J(t,"x","prod");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(Hb,i,s)}var eU,Yoe=D(()=>{"use strict";$e();Ee();je();fn();De();eU=se({prod_:aDt})});function lDt(t,r,n,o){let i=t.map((f,d)=>J(f,`tensors${d}`,"raggedGather","int32")),s=J(r,"paramsDenseValues","raggedGather"),a=J(n,"indices","raggedGather","int32"),l={paramsNestedSplits:i,paramsDenseValues:s,indices:a},u={outputRaggedRank:o},c=ue.runKernel(MS,l,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var zDe,UDe=D(()=>{"use strict";$e();Ee();je();De();zDe=se({raggedGather_:lDt})});function uDt(t,r,n){let o=J(t,"starts","raggedRange"),i=J(r,"limits","raggedRange",o.dtype),s=J(n,"deltas","raggedRange",o.dtype),a={starts:o,limits:i,deltas:s},l=ue.runKernel(RS,a);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}var VDe,GDe=D(()=>{"use strict";$e();Ee();je();De();VDe=se({raggedRange_:uDt})});function cDt(t,r,n,o,i){let s=J(t,"shape","raggedTensorToTensor","int32"),a=J(r,"values","raggedTensorToTensor"),l=J(n,"defaultValue","raggedTensorToTensor",a.dtype),u=o.map((d,p)=>J(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:s,values:a,defaultValue:l,rowPartitionTensors:u},f={rowPartitionTypes:i};return ue.runKernel(jS,c,f)}var WDe,qDe=D(()=>{"use strict";$e();Ee();je();De();WDe=se({raggedTensorToTensor_:cDt})});function fDt(t,r,n){ei(t);let o=rn(t),i=null;if(n==null||n==="float32")i=new Float32Array(o);else if(n==="int32")i=new Int32Array(o);else if(n==="bool")i=new Uint8Array(o);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<o;s++)i[s]=r();return ue.makeTensor(i,t,n)}var HDe,YDe=D(()=>{"use strict";$e();Ze();Bs();De();HDe=se({rand_:fDt})});var KDe=gt((XDe,Xoe)=>{"use strict";(function(t,r,n){function o(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new o(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(XDe,typeof Xoe=="object"&&Xoe,typeof define=="function"&&define)});var QDe=gt((ZDe,Koe)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(ZDe,typeof Koe=="object"&&Koe,typeof define=="function"&&define)});var eNe=gt((JDe,Zoe)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(JDe,typeof Zoe=="object"&&Zoe,typeof define=="function"&&define)});var rNe=gt((tNe,Qoe)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,p,m;return d=c[f],d^=d>>>7,p=d^d<<24,d=c[f+1&7],p^=d^d>>>10,d=c[f+3&7],p^=d^d>>>3,d=c[f+4&7],p^=d^d<<7,d=c[f+7&7],d=d^d<<13,p^=d^d<<9,c[f]=p,l.i=f+1&7,p};function u(c,f){var d,p,m=[];if(f===(f|0))p=m[0]=f;else for(f=""+f,d=0;d<f.length;++d)m[d&7]=m[d&7]<<15^f.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?p=m[7]=-1:p=m[d],c.x=m,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(tNe,typeof Qoe=="object"&&Qoe,typeof define=="function"&&define)});var oNe=gt((nNe,Joe)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,p,m;return l.w=c=c+1640531527|0,m=f[d+34&127],p=f[d=d+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=f[d]=m^p,l.i=d,m+(c^c>>>16)|0};function u(c,f){var d,p,m,h,g,y=[],b=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,b=Math.max(b,f.length)),m=0,h=-32;h<b;++h)f&&(p^=f.charCodeAt((h+32)%f.length)),h===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,h>=0&&(g=g+1640531527|0,d=y[h&127]^=p+g,m=d==0?m+1:0);for(m>=128&&(y[(f&&f.length||0)&127]=-1),m=127,h=4*128;h>0;--h)p=y[m+34&127],d=y[m=m+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,y[m]=p^d;c.w=g,c.X=y,c.i=m}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})(nNe,typeof Joe=="object"&&Joe,typeof define=="function"&&define)});var sNe=gt((iNe,eie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,p=l.d,m=l.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^m,m=m-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-p|0,l.d=p<<16^d>>>16^m,l.a=m-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(iNe,typeof eie=="object"&&eie,typeof define=="function"&&define)});var aNe=gt(()=>{"use strict"});var uNe=gt((lNe,tU)=>{"use strict";(function(t,r,n){var o=256,i=6,s=52,a="random",l=n.pow(o,i),u=n.pow(2,s),c=u*2,f=o-1,d;function p(v,w,_){var C=[];w=w==!0?{entropy:!0}:w||{};var S=y(g(w.entropy?[v,x(r)]:v??b(),3),C),E=new m(C),A=function(){for(var N=E.g(i),k=l,M=0;N<u;)N=(N+M)*o,k*=o,M=E.g(1);for(;N>=c;)N/=2,k/=2,M>>>=1;return(N+M)/k};return A.int32=function(){return E.g(4)|0},A.quick=function(){return E.g(4)/4294967296},A.double=A,y(x(E.S),r),(w.pass||_||function(N,k,M,I){return I&&(I.S&&h(I,E),N.state=function(){return h(E,{})}),M?(n[a]=N,k):N})(A,S,"global"in w?w.global:this==n,w.state)}function m(v){var w,_=v.length,C=this,S=0,E=C.i=C.j=0,A=C.S=[];for(_||(v=[_++]);S<o;)A[S]=S++;for(S=0;S<o;S++)A[S]=A[E=f&E+v[S%_]+(w=A[S])],A[E]=w;(C.g=function(N){for(var k,M=0,I=C.i,L=C.j,P=C.S;N--;)k=P[I=f&I+1],M=M*o+P[f&(P[I]=P[L=f&L+k])+(P[L]=k)];return C.i=I,C.j=L,M})(o)}function h(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function g(v,w){var _=[],C=typeof v,S;if(w&&C=="object")for(S in v)try{_.push(g(v[S],w-1))}catch{}return _.length?_:C=="string"?v:v+"\0"}function y(v,w){for(var _=v+"",C,S=0;S<_.length;)w[f&S]=f&(C^=w[f&S]*19)+_.charCodeAt(S++);return x(w)}function b(){try{var v;return d&&(v=d.randomBytes)?v=v(o):(v=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(v)),x(v)}catch{var w=t.navigator,_=w&&w.plugins;return[+new Date,t,_,t.screen,x(r)]}}function x(v){return String.fromCharCode.apply(0,v)}if(y(n.random(),r),typeof tU=="object"&&tU.exports){tU.exports=p;try{d=aNe()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+a]=p})(typeof self<"u"?self:lNe,[],Math)});var p3=gt((Dqr,cNe)=>{"use strict";var dDt=KDe(),pDt=QDe(),mDt=eNe(),hDt=rNe(),gDt=oNe(),yDt=sNe(),EC=uNe();EC.alea=dDt;EC.xor128=pDt;EC.xorwow=mDt;EC.xorshift7=hDt;EC.xor4096=gDt;EC.tychei=yDt;cNe.exports=EC});var oie={};cn(oie,{TEST_EPSILON_FLOAT16:()=>fNe,createVideoElement:()=>EDt,encodeStrings:()=>dNe,expectArrayBuffersEqual:()=>CDt,expectArraysClose:()=>xDt,expectArraysEqual:()=>wDt,expectNumbersClose:()=>_Dt,expectPromiseToFail:()=>vDt,expectValuesInRange:()=>SDt,play:()=>TDt,testEpsilon:()=>rie});function xDt(t,r,n){return n==null&&(n=rie()),tie(t,r,(o,i)=>nie(o,i,n))}function rie(){return ue.backend.floatPrecision()===32?bDt:fNe}function tie(t,r,n){let o=!0;if((Li(t)||Li(r))&&(o=!1),Li(t)&&Li(r)&&(o=!0),o){let a=t.constructor.name,l=r.constructor.name;if(a!==l)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${l}`)}if(Array.isArray(t)&&Array.isArray(r)){let a=Pa(t),l=Pa(r);if(!Kl(a,l))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${l}]`)}let i=Li(t)?t:fm(t),s=Li(r)?r:fm(r);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){let l=i[a],u=s[a];if(!n(l,u))throw new Error(`Arrays differ: actual[${a}] = ${l}, expected[${a}] = ${u}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function vDt(t,r){t().then(()=>r.fail(),()=>r()),typeof expect<"u"&&expect().nothing()}function wDt(t,r){let n=typeof r=="string"||typeof r=="number"||typeof r=="boolean"?[r]:r;return im(t)||im(t[0])||im(r)||im(r[0])?tie(t,n,(o,i)=>o==i):tie(t,r,(o,i)=>nie(o,i,0))}function _Dt(t,r,n){if(n==null&&(n=rie()),!nie(t,r,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${r}`);typeof expect<"u"&&expect().nothing()}function nie(t,r,n){return!isFinite(t)&&!isFinite(r)?!0:!(isNaN(t)||isNaN(r)||Math.abs(t-r)>n)}function SDt(t,r,n){for(let o=0;o<t.length;o++)if(t[o]<r||t[o]>n)throw new Error(`Value out of range:${t[o]} low: ${r}, high: ${n}`)}function CDt(t,r){let n=new Float32Array(t),o=new Float32Array(r);if(n.length!==o.length)throw new Error(`Expected ArrayBuffer to be of length ${o.length}, but it was ${n.length}`);for(let i=0;i<o.length;i++)if(n[i]!==o[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${o[i]} but got ${n[i]} instead`)}function dNe(t){for(let r=0;r<t.length;r++){let n=t[r];Array.isArray(n)?dNe(n):t[r]=A1(n)}return t}function EDt(t){let r=document.createElement("video");return"playsInline"in r&&(r.playsInline=!0),r.muted=!0,r.loop=!0,r.style.position="fixed",r.style.left="0px",r.style.top="0px",r.preload="auto",r.appendChild(t),new Promise(n=>{r.addEventListener("loadeddata",o=>n(r)),r.load()})}function TDt(t){return Be(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(r=>{t.requestVideoFrameCallback(r)}))})}var bDt,fNe,pNe=D(()=>{"use strict";$e();je();Ze();bDt=.001,fNe=.1});var oU,TC,rU,nU,m3=D(()=>{"use strict";oU=jf(p3());TC=class{constructor(r,n,o,i,s){this.mean=r,this.stdDev=n,this.dtype=o,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let a=s||Math.random();this.random=oU.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let i=this.nextVal;return this.nextVal=NaN,i}let r,n,o=!1;for(;!o;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);let l=Math.sqrt(-2*Math.log(a)/a);r=this.mean+this.stdDev*i*l,n=this.mean+this.stdDev*s*l,(!this.truncated||this.isValidTruncated(r))&&(o=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(r)}convertValue(r){return this.dtype==null||this.dtype==="float32"?r:Math.round(r)}isValidTruncated(r){return r<=this.upper&&r>=this.lower}},rU=class{constructor(r,n,o,i){this.alpha=r,this.beta=1/n,this.dtype=o;let s=i||Math.random();this.randu=oU.alea(s.toString()),this.randn=new TC(0,1,o,!1,this.randu()),r<1?this.d=r+2/3:this.d=r-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let r,n,o,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,r=i*i,n=1-.331*r*r,o=.5*r+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<o)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(r){return this.dtype==="float32"?r:Math.round(r)}},nU=class{constructor(r=0,n=1,o,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=r,this.range=n-r,this.dtype=o,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${r} - ${n} <= 1 and dtype is not float`);this.random=oU.alea(i)}convertValue(r){return this.canReturnFloat()?r:Math.round(r)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function ADt(t,r,n=1,o="float32",i){if(ei(t),n==null&&(n=1),o==null&&(o="float32"),o!=="float32"&&o!=="int32")throw new Error(`Unsupported data type ${o}`);let s=new rU(r,n,o,i),a=Qt(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var mNe,hNe=D(()=>{"use strict";Bs();dx();De();m3();mNe=se({randomGamma_:ADt})});function kDt(t,r=0,n=1,o,i){if(ei(t),o!=null&&o==="bool")throw new Error(`Unsupported data type ${o}`);let s=new TC(r,n,o,!1,i),a=Qt(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var AC,iie=D(()=>{"use strict";Bs();dx();De();m3();AC=se({randomNormal_:kDt})});function IDt(t,r,n){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);return AC(t,0,1,r,n)}var gNe,yNe=D(()=>{"use strict";De();iie();gNe=se({randomStandardNormal_:IDt})});function DDt(t,r=0,n=1,o="float32",i){ei(t);let s=Qt(t,o),a=new nU(r,n,null,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}var Mc,iU=D(()=>{"use strict";Bs();dx();De();m3();Mc=se({randomUniform_:DDt})});function NDt(t,r,n,o){return Mc(t,r,n,"int32",o)}var bNe,xNe=D(()=>{"use strict";De();iU();bNe=se({randomUniformInt_:NDt})});function g0(t,r,n=1,o="float32"){if(n===0)throw new Error("Cannot have a step of zero");let i={start:t,stop:r,step:n,dtype:o};return ue.runKernel(PS,{},i)}var sU=D(()=>{"use strict";$e();Ee();});function FDt(t){let n={input:J(t,"input","real")};return ue.runKernel(LS,n)}var yx,h3=D(()=>{"use strict";$e();Ee();je();De();yx=se({real_:FDt})});function ODt(t){let n={x:J(t,"x","reciprocal")};return ue.runKernel($g,n)}var aU,vNe=D(()=>{"use strict";$e();Ee();je();De();aU=se({reciprocal_:ODt})});function MDt(t){let n={x:J(t,"x","relu")};return ue.runKernel(zg,n)}var ba,gI=D(()=>{"use strict";$e();Ee();je();De();ba=se({relu_:MDt})});function RDt(t){let n={x:J(t,"x","relu6")};return ue.runKernel(Ug,n)}var yI,lU=D(()=>{"use strict";$e();Ee();je();De();yI=se({relu6_:RDt})});function jDt(t,r){let o={x:J(t,"x","reverse")},i={dims:r};return ue.runKernel(Zb,o,i)}var us,bx=D(()=>{"use strict";$e();Ee();je();De();us=se({reverse_:jDt})});function PDt(t){let r=J(t,"x","reverse");return de(r.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${r.rank}.`),us(r,0)}var wNe,_Ne=D(()=>{"use strict";je();Ze();De();bx();wNe=se({reverse1d_:PDt})});function LDt(t,r){let n=J(t,"x","reverse");return de(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),us(n,r)}var SNe,CNe=D(()=>{"use strict";je();Ze();De();bx();SNe=se({reverse2d_:LDt})});function BDt(t,r){let n=J(t,"x","reverse");return de(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),us(n,r)}var ENe,TNe=D(()=>{"use strict";je();Ze();De();bx();ENe=se({reverse3d_:BDt})});function $Dt(t,r){let n=J(t,"x","reverse");return de(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),us(n,r)}var ANe,kNe=D(()=>{"use strict";je();Ze();De();bx();ANe=se({reverse4d_:$Dt})});function zDt(t){let n={x:J(t,"x","round")};return ue.runKernel(Vg,n)}var bI,sie=D(()=>{"use strict";$e();Ee();je();De();bI=se({round_:zDt})});function UDt(t){let n={x:J(t,"x","rsqrt","float32")};return ue.runKernel(Gg,n)}var xI,aie=D(()=>{"use strict";$e();Ee();je();De();xI=se({rsqrt_:UDt})});function VDt(t){let n={x:J(t,"x","selu")};return ue.runKernel(Wg,n)}var vI,lie=D(()=>{"use strict";$e();Ee();je();De();vI=se({selu_:VDt})});function GDt(t,r,n,o,i,s=[1,1],a="NHWC"){let l=J(t,"x","separableConv2d"),u=J(r,"depthwiseFilter","separableConv2d"),c=J(n,"pointwiseFilter","separableConv2d"),f=l,d=!1;if(l.rank===3&&(d=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");de(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),de(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),de(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),de(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),de(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],m=u.shape[3];de(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let h=u0(f,u,o,i,a,s),y=Vu(h,c,1,"valid",a);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var wI,uie=D(()=>{"use strict";je();Ze();bC();JR();De();Ht();wI=se({separableConv2d_:GDt})});function WDt(t,r){return Be(this,null,function*(){let n=J(t,"x","setdiff1d"),o=J(r,"y","setdiff1d");de(n.dtype===o.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${o.dtype}).`),de(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),de(o.rank===1,()=>`y should be 1D tensor, but got y (${o.shape}).`);let i=yield n.data(),s=yield o.data(),a=new Set(s),l=0;for(let f=0;f<i.length;f++)a.has(i[f])||l++;let u=new wn([l],n.dtype),c=new wn([l],"int32");for(let f=0,d=0;f<i.length;f++)a.has(i[f])||(u.values[d]=i[f],c.values[d]=f,d++);return[u.toTensor(),c.toTensor()]})}var INe,DNe=D(()=>{"use strict";Je();je();Ze();INe=WDt});function qDt(t){let n={x:J(t,"x","sign")};return ue.runKernel(Yg,n)}var uU,NNe=D(()=>{"use strict";$e();Ee();je();De();uU=se({sign_:qDt})});function HDt(t){let n={x:J(t,"x","sin","float32")};return ue.runKernel(qg,n)}var _I,cie=D(()=>{"use strict";$e();Ee();je();De();_I=se({sin_:HDt})});function YDt(t){let n={x:J(t,"x","sinh")};return ue.runKernel(Hg,n)}var SI,fie=D(()=>{"use strict";$e();Ee();je();De();SI=se({sinh_:YDt})});function XDt(t,r,n){let o=J(t,"x","slice1d");return de(o.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${o.rank} tensor`),Br(o,[r],[n])}var CI,FNe=D(()=>{"use strict";je();Ze();De();Uu();CI=se({slice1d_:XDt})});function KDt(t,r,n){let o=J(t,"x","slice2d");return de(o.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${o.rank} tensor`),Br(o,r,n)}var g3,ONe=D(()=>{"use strict";je();Ze();De();Uu();g3=se({slice2d_:KDt})});function ZDt(t,r,n){let o=J(t,"x","slice3d");return de(o.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${o.rank} tensor`),Br(o,r,n)}var EI,MNe=D(()=>{"use strict";je();Ze();De();Uu();EI=se({slice3d_:ZDt})});function QDt(t,r,n){let o=J(t,"x","slice4d");return de(o.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${o.rank} tensor`),Br(o,r,n)}var kC,RNe=D(()=>{"use strict";je();Ze();De();Uu();kC=se({slice4d_:QDt})});function JDt(t,r=-1){let n=J(t,"logits","softmax","float32");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${r}`);let o={logits:n},i={dim:r};return ue.runKernel(nx,o,i)}var X1,jNe=D(()=>{"use strict";$e();Ee();je();De();X1=se({softmax_:JDt})});function eNt(t){de(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(xS,r)}var K1,cU=D(()=>{"use strict";$e();Ee();Ze();De();K1=se({fft_:eNt})});function tNt(t){de(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(SS,r)}var xx,fU=D(()=>{"use strict";$e();Ee();Ze();De();xx=se({ifft_:tNt})});function rNt(t){let r=t.shape[t.shape.length-1],n=t.size/r,o;if(r<=2){let i=Se(t,[n,r]);o=xx(i)}else{let i=[n,2*(r-1)],s=Se(yx(t),[n,r]),a=Se(B1(t),[n,r]),l=us(Br(s,[0,1],[n,r-2]),1),u=we(us(Br(a,[0,1],[n,r-2]),1),Mt(-1)),c=Nn([s,l],1),f=Nn([a,u],1),d=Se($u(c,f),[i[0],i[1]]);o=xx(d)}if(o=yx(o),t.rank===3&&t.shape[0]!==0){let i=o,s=t.shape[0];o=Se(o,[s,o.shape[0]/s,o.shape[1]]),i.dispose()}return o}var TI,die=D(()=>{"use strict";I1();Wf();o3();cr();De();h3();Ht();bx();Uo();Uu();fU();TI=se({irfft_:rNt})});function nNt(t,r,n=0){let i={x:J(t,"x","split")},s={numOrSizeSplits:r,axis:n};return ue.runKernel(rx,i,s)}var cs,IC=D(()=>{"use strict";$e();Ee();je();De();cs=se({split_:nNt})});function oNt(t,r){de(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],o=t.size/n,i;if(r!=null&&r<n){let h=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=r,i=Br(t,h,g),n=r}else if(r!=null&&r>n){let h=t.shape.map(g=>g);h[t.shape.length-1]=r-n,i=Nn([t,bo(h)],t.shape.length-1),n=r}else i=t;let s=ir(i),a=Se($u(i,s),[o,n]),l=K1(a),u=Math.floor(n/2)+1,c=yx(l),f=B1(l),d=cs(c,[u,n-u],c.shape.length-1),p=cs(f,[u,n-u],f.shape.length-1),m=i.shape.slice();return m[i.shape.length-1]=u,Se($u(d[0],p[0]),m)}var Z1,dU=D(()=>{"use strict";Ze();I1();Wf();o3();De();h3();Ht();Uu();IC();hI();zo();cU();Z1=se({rfft_:oNt})});function iNt(t,r){let n=J(t,"a","squaredDifference"),o=J(r,"b","squaredDifference");[n,o]=nn(n,o),Rr(n.shape,o.shape);let i={a:n,b:o},s={};return ue.runKernel(Qg,i,s)}var AI,pU=D(()=>{"use strict";$e();Ee();ri();je();Ao();De();AI=se({squaredDifference_:iNt})});function sNt(t,r){let n=J(t,"x","squeeze","string_or_numeric");return Se(n,kne(n.shape,r).newShape)}var Rc,y3=D(()=>{"use strict";je();Ze();De();Ht();Rc=se({squeeze_:sNt})});function aNt(t,r=0){let n=lx(t,"tensors","stack","string_or_numeric");de(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&de(r<=n[0].rank,()=>"Axis must be <= rank of the tensor");let o=n,i={axis:r};return ue.runKernel(Gb,o,i)}var Qi,Q1=D(()=>{"use strict";$e();Ee();je();Ze();De();Qi=se({stack_:aNt})});function lNt(t,r=0){let o={x:J(t,"x","step")},i={alpha:r};return ue.runKernel(r0,o,i)}var Yd,kI=D(()=>{"use strict";$e();Ee();je();De();Yd=se({step_:lNt})});function uNt(t,r,n,o,i=0,s=0,a=0,l=0,u=0){let f={x:J(t,"x","stridedSlice","string_or_numeric")},d={begin:r,end:n,strides:o,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};return ue.runKernel(KS,f,d)}var mU,PNe=D(()=>{"use strict";$e();Ee();je();De();mU=se({stridedSlice_:uNt})});function cNt(t){let n={x:J(t,"x","tan","float32")};return ue.runKernel(e0,n)}var hU,LNe=D(()=>{"use strict";$e();Ee();je();De();hU=se({tan_:cNt})});function No(t,r){zf(t);let n=Pa(t,r);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ql(t,null,n,r)}var J1=D(()=>{"use strict";je();Ze();ux();});function vm(t,r,n){if(zf(t),r!=null&&r.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let o=Pa(t,n);if(o.length!==2&&o.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ql(t,r,o,n)}var gU=D(()=>{"use strict";je();Ze();ux();});function yU(t,r,n){if(zf(t),r!=null&&r.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let o=Pa(t,n);if(o.length!==3&&o.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ql(t,r,o,n)}var pie=D(()=>{"use strict";je();Ze();ux();});function BNe(t,r,n){if(zf(t),r!=null&&r.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let o=Pa(t,n);if(o.length!==4&&o.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ql(t,r,o,n)}var $Ne=D(()=>{"use strict";je();Ze();ux();});function zNe(t,r,n){if(zf(t),r!=null&&r.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let o=Pa(t,n);if(o.length!==5&&o.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ql(t,r,o,n)}var UNe=D(()=>{"use strict";je();Ze();ux();});function VNe(t,r,n){if(zf(t),r!=null&&r.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let o=Pa(t,n);if(o.length!==6&&o.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return r=r||o,Ql(t,r,o,n)}var GNe=D(()=>{"use strict";je();Ze();ux();});var b3={};cn(b3,{calculateShapes:()=>WNe,validateInput:()=>II,validateUpdateShape:()=>mie});function mie(t,r,n){let o=r.rank>1?r.shape[r.rank-1]:1,i=r.rank>1?r.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${r.shape}, shape: ${t}, sliceDim: ${o}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<o+(n.rank-i))throw new Error(s+` Output shape length < ${o+(n.rank-i)}`);if(n.rank!==i+t.length-o)throw new Error(s+` update.rank != ${i+t.length-o}`);for(let a=0;a<i;++a)if(n.shape[a]!==r.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${r.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+o])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function II(t,r,n){if(r.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${r.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(r.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(r.size===0)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}mie(n,r,t)}function WNe(t,r,n){let o=r.shape.length,i=o>1?r.shape[o-1]:1,s=n.length,a=1;for(let d=i;d<s;++d)a*=n[d];let l=i<1?1:i,u=rn(r.shape)/l,c=[...cg(n.slice(0,i)),1],f=rn(n);return{sliceRank:i,numUpdates:u,sliceSize:a,strides:c,outputSize:f}}var x3=D(()=>{"use strict";Ze()});function fNt(t,r,n){let o=J(t,"tensor","tensorScatterupdate"),i=J(r,"indices","tensorScatterupdate","int32"),s=J(n,"updates","tensorScatterupdate");if(II(s,i,o.shape),o.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${o.dtype} and ${s.dtype}.`);let a={tensor:o,indices:i,updates:s},l={};return ue.runKernel(US,a,l)}var qNe,HNe=D(()=>{"use strict";$e();Ee();je();De();x3();qNe=se({tensorScatterUpdate_:fNt})});function dNt(t,r=1,n=!0){let o=J(t,"x","topk");if(o.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let i=o.shape[o.shape.length-1];if(r<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${r}`);if(r>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${r}`);let s={x:o},a={k:r,sorted:n},[l,u]=ue.runKernel(eC,s,a);return{values:l,indices:u}}var bU,hie=D(()=>{"use strict";$e();Ee();je();De();bU=se({topk_:dNt})});function pNt(t,r=0,n=1,o,i){if(ei(t),o!=null&&o==="bool")throw new Error("Unsupported data type $ { dtype }");let s=new TC(r,n,o,!0,i),a=Qt(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var DI,YNe=D(()=>{"use strict";Bs();dx();De();m3();DI=se({truncatedNormal_:pNt})});function mNt(t,r=0){let n=J(t,"x","unique","string_or_numeric");de(n.rank>0,()=>"The input tensor must be at least 1D");let o={x:n},i={axis:r},[s,a]=ue.runKernel(rC,o,i);return{values:s,indices:a}}var xU,gie=D(()=>{"use strict";$e();Ee();je();Ze();De();xU=se({unique_:mNt})});function hNt(t,r,n){let o=J(t,"x","unsortedSegmentSum"),i=J(r,"segmentIds","unsortedSegmentSum","int32");de(pb(n),()=>"numSegments must be of dtype int");let s={x:o,segmentIds:i},a={numSegments:n};return ue.runKernel(ix,s,a)}var NI,vU=D(()=>{"use strict";$e();Ee();je();Ze();De();NI=se({unsortedSegmentSum_:hNt})});function gNt(t,r=0){let n=J(t,"x","unstack","string_or_numeric");de(r>=-n.shape.length&&r<n.shape.length,()=>`Axis = ${r} is not in [-${n.shape.length}, ${n.shape.length})`);let o={value:n},i={axis:r};return ue.runKernel(ox,o,i)}var Ua,FI=D(()=>{"use strict";$e();Ee();je();Ze();De();Ua=se({unstack_:gNt})});function XNe(t,r){return l3(t,r,"right")}var KNe=D(()=>{"use strict";W8();});function wU(t,r=!0,n,o){return ue.makeVariable(t,r,n,o)}var ZNe=D(()=>{"use strict";$e();});function _U(t,r){let n=[];for(let s=0;s<r.length;s++)r[s]&&n.push(s);let o=Qt(t,"int32"),i=Qt([n.length,t.length],"int32");for(let s=0;s<n.length;s++){let a=o.indexToLoc(n[s]),l=s*t.length;i.values.set(a,l)}return i.toTensor()}var yie=D(()=>{"use strict";dx();});function yNt(t){return Be(this,null,function*(){let r=J(t,"condition","whereAsync","bool"),n=yield r.data(),o=_U(r.shape,n);return t!==r&&r.dispose(),o})}var SU,bie=D(()=>{"use strict";yie();je();SU=yNt});function bNt(t,r,n){return Be(this,null,function*(){let o=J(t,"tensor","boolMask"),i=J(r,"mask","boolMask","bool"),s=n??0,a=i.rank,l=o.shape;de(a>0,()=>"mask cannot be scalar"),Bo(l.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let g=s;g<s+a;g++)u*=l[g];let c=l.slice(0,s).concat([u],l.slice(s+a)),f=Se(o,c),d=Se(i,[-1]),p=yield SU(d),m=Rc(p,[1]),h=p0(f,m,s);return t!==o&&o.dispose(),r!==i&&i.dispose(),m.dispose(),f.dispose(),d.dispose(),p.dispose(),h})}var xNt,QNe=D(()=>{"use strict";je();Ze();n3();Ht();y3();bie();xNt=bNt});function vNt(t,r,n){let o=J(t,"x","transpose");if(r==null&&(r=o.shape.map((a,l)=>l).reverse()),de(o.rank===r.length,()=>`Error in transpose: rank of input ${o.rank} must match length of perm ${r}.`),r.forEach(a=>{de(a>=0&&a<o.rank,()=>`All entries in 'perm' must be between 0 and ${o.rank-1} but got ${r}`)}),o.rank<=1)return o.clone();let i={x:o},s={perm:r};return o.dtype==="complex64"?Pe(()=>{let a=yx(o),l=B1(o);return a=ue.runKernel(um,{x:a},s),l=ue.runKernel(um,{x:l},s),n&&(l=Xr(l)),$u(a,l)}):ue.runKernel(um,i,s)}var Ur,vx=D(()=>{"use strict";$e();Fc();Ee();je();Ze();I1();o3();Gs();De();h3();Ur=se({transpose_:vNt})});function wNt(t,r,n,o,i=!0){let s=J(t,"v","movingAverage"),a=J(r,"x","movingAverage"),l=J(n,"decay","movingAverage");Hne(s,a),de(Kl(s.shape,a.shape),()=>"Shape mismatch in v and x");let u=Mt(1),c=wt(u,l),f=we(wt(a,s),c);if(i){de(o!=null,()=>"When using zeroDebias: true, step is required.");let d=J(o,"step","movingAverage");f=Ct(f,wt(u,$a(l,d)))}return Ke(s,f)}var _Nt,JNe=D(()=>{"use strict";ri();je();Ze();$o();Yn();cr();De();L1();Uo();oo();_Nt=se({movingAverage_:wNt})});function SNt(t,r,n){ei(n);let o=J(t,"indices","scatterND","int32"),i=J(r,"updates","scatterND");II(i,o,n);let s={indices:o,updates:i},a={shape:n};return ue.runKernel(zS,s,a)}var CNt,eFe=D(()=>{"use strict";$e();Ee();je();Bs();De();x3();CNt=se({scatterND_:SNt})});function tFe(t,r,n,o){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);let a=r.size;if(!(r.rank===0||r.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${r.shape}, should be [] or [${i}]`);if(r.dtype!==o.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var rFe=D(()=>{"use strict"});function TNt(t,r,n,o=0){ei(n);let i=J(t,"sparseIndices","sparseToDense","int32"),s=J(r,"sparseValues","sparseToDense","string_or_numeric"),a=J(o,"defaultValue","sparseToDense",s.dtype);tFe(i,s,n,a);let l={sparseIndices:i,sparseValues:s,defaultValue:a},u={outputShape:n};return ue.runKernel(YS,l,u)}var ANt,nFe=D(()=>{"use strict";$e();Ee();rFe();je();Bs();De();ANt=se({sparseToDense_:TNt})});function kNt(t,r){let n=J(r,"indices","gatherND","int32"),i={params:J(t,"x","gatherND","string_or_numeric"),indices:n};return ue.runKernel(_S,i)}var INt,oFe=D(()=>{"use strict";$e();Ee();je();De();INt=se({gatherND_:kNt})});function iFe(t,r){if(r==null)return t.shape.slice();if(Kl(t.shape,r))return r;if(t.shape.length===r.length){let n=[];for(let o=0;o<t.shape.length;o++)r[o]==null&&t.shape[o]!=null?n.push(t.shape[o]):n.push(r[o]);return n}return r}var sFe=D(()=>{"use strict";Ze();});function DNt(t,r,n,o){let i=J(t,"x","dropout");if(de(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),de(r>=0&&r<1,()=>`rate must be a float in the range [0, 1), but got ${r}.`),r===0)return t instanceof Jr?i.clone():i;let s=iFe(i,n),a=1-r,l=Ct(d0(Ke(Mc(s,0,1,"float32",o),a)),a);return we(i,l)}var xie,aFe=D(()=>{"use strict";Je();je();Ze();$o();Yn();sFe();O8();cr();De();iU();xie=se({dropout_:DNt})});function vie(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function v3(t,r,n){let o=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){let a=2*Math.PI*s/(t+o-1);i[s]=r-n*Math.cos(a)}return No(i,"float32")}var w3=D(()=>{"use strict";J1();});function NNt(t,r,n=1){return Be(this,null,function*(){let o=J(t,"predictions","inTopK"),i=J(r,"targets","inTopK");de(o.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${o.rank}`),de(o.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${o.rank} and targets rank ${i.rank}`),Bo(o.shape.slice(0,o.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=o.shape[o.shape.length-1];de(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);let a=yield o.data(),l=yield i.data(),[u,c]=[a.length/s,s],f=Ine("bool",u);for(let d=0;d<u;d++){let p=d*c,m=a.subarray(p,p+c),h=[];for(let g=0;g<m.length;g++)h.push({value:m[g],index:g});h.sort((g,y)=>y.value-g.value),f[d]=0;for(let g=0;g<n;g++)if(h[g].index===l[d]){f[d]=1;break}}return t!==o&&o.dispose(),r!==i&&i.dispose(),La(f,i.shape,"bool")})}var FNt,lFe=D(()=>{"use strict";je();Ze();WR();FNt=NNt});function ONt(t,r,n,o,i,s="NHWC",a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),de(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),de(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),de(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=s==="NHWC"?l.shape[3]:l.shape[1],f=s==="NHWC"?u.shape[3]:u.shape[1];de(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),de(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),ho("conv2dDerFilter",i,a);let d={x:l,dy:u},p={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return ue.runKernel(aS,d,p)}var OI,CU=D(()=>{"use strict";$e();Ee();Ze();Ss();De();Ht();OI=se({conv2DBackpropFilter_:ONt})});function DC(t,r,n){if(n==null||n==="linear")return t;if(n==="relu")return we(t,Yd(r));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function NC(t,r){let n=r,o=no(t.shape,r.shape);return o.length>0&&(n=kt(n,o)),Se(n,t.shape)}function FC(t,r,n,o){if(r==="linear")return t;if(r==="relu")return ba(t);if(r==="elu")return c0(t);if(r==="relu6")return yI(t);if(r==="prelu")return Y1(t,n);if(r==="leakyrelu")return $1(t,o);if(r==="sigmoid")return _l(t);throw new Error(`Unknown fused activation ${r}.`)}var OC,MI=D(()=>{"use strict";Ao();I8();P8();cr();J8();gI();lU();Ht();eI();kI();Si();OC=(t,r)=>!(t>0)||r==="linear"});function MNt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(u=u||"linear",OC(ue.state.gradientDepth,u)===!1){de(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Vu(t,r,n,o,i,s,a);return l!=null&&(C=Ke(C,l)),FC(C,u,c,f)}let d=J(t,"x","conv2d","float32"),p=J(r,"filter","conv2d","float32"),m=d,h=!1;d.rank===3&&(h=!0,m=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),de(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),ho("fused conv2d",o,a);let g=i==="NHWC"?m.shape[3]:m.shape[1];de(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),de(ga(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let y=yC(m.shape,p.shape,n,s,o,a),b;l!=null&&(b=J(l,"bias","fused conv2d"),[b]=nn(b,d),i==="NHWC"?Rr(y.outShape,b.shape):(de(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),de(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(c!=null){let C=c.shape;if(de(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)de(C[0]===1||C[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${y.outChannels}).`);else if(C.length===3)try{Rr(C,y.outShape)}catch{let E=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(E)}x=J(c,"prelu weights","fused conv2d")}let v=(C,S)=>{de(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[E,A,N,k]=S,M=DC(C,N,u);de(Vf(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let I=oI(A.shape,M,E,n,o),L=OI(A,M,E.shape,n,o),P=[I,L];if(k!=null){let R=NC(k,M);P.push(R)}return P},w={x:m,filter:p,bias:b,preluActivationWeights:x},_={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Cl((S,E,A)=>{let N=ue.runKernel(C1,w,_);return A([E,S,N]),h&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:v}})(m,p):Cl((S,E,A,N)=>{let k=ue.runKernel(C1,w,_);return N([E,S,k,A]),h&&(k=Se(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(m,p,b)}var uFe,cFe=D(()=>{"use strict";$e();gx();Ee();ri();je();Ze();$o();Ao();bC();CU();b8();Ss();MI();De();Ht();uFe=se({fusedConv2d_:MNt})});function RNt(t,r,n,o,i,s=[1,1],a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={x:l,dy:u},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return ue.runKernel(mS,c,f)}var EU,wie=D(()=>{"use strict";$e();Ee();De();Ht();EU=se({depthwiseConv2dNativeBackpropFilter_:RNt})});function jNt(t,r,n,o,i,s=[1,1],a){let l=r,u=!1;r.rank===3&&(u=!0,l=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={dy:l,filter:n},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},d=ue.runKernel(hS,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var TU,_ie=D(()=>{"use strict";$e();Ee();De();Ht();TU=se({depthwiseConv2dNativeBackpropInput_:jNt})});function PNt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(OC(ue.state.gradientDepth,u)===!1){let _=u0(t,r,n,o,i,s,a);return l!=null&&(_=Ke(_,l)),FC(_,u,c,f)}let d=J(t,"x","depthwiseConv2d","float32"),p=J(r,"filter","depthwiseConv2d","float32"),m=d,h=!1;d.rank===3&&(h=!0,m=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),de(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),de(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),s==null&&(s=[1,1]),de(ga(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ho("fused depthwiseConv2d",o,a);let g=yC(m.shape,p.shape,n,s,o,a,!0),y;l!=null&&(y=J(l,"bias","fused conv2d"),[y]=nn(y,d),Rr(g.outShape,y.shape));let b;c!=null&&(b=J(c,"prelu weights","fused depthwiseConv2d"));let x=(_,C)=>{de(Vf(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[S,E,A,N]=C,k=DC(_,A,u),M=TU(E.shape,k,S,n,o,s,a),I=EU(E,k,S.shape,n,o,s,a);if(N!=null){let L=NC(y,k);return[M,I,L]}return[M,I]},v={x:m,filter:p,bias:y,preluActivationWeights:b},w={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Cl((C,S,E)=>{let A=ue.runKernel(E1,v,w);return E([S,C,A]),h&&(A=Se(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:x}})(m,p):Cl((C,S,E,A)=>{let N=ue.runKernel(E1,v,w);return A([S,C,N,E]),h&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(m,p,y)}var fFe,dFe=D(()=>{"use strict";$e();gx();Ee();ri();je();Ze();$o();Ao();Ss();JR();wie();_ie();MI();De();Ht();fFe=se({fusedDepthwiseConv2d_:PNt})});function LNt({a:t,b:r,transposeA:n=!1,transposeB:o=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}){if(OC(ue.state.gradientDepth,s)===!1){let k=zr(t,r,n,o);return i!=null&&(k=Ke(k,i)),FC(k,s,a,l)}let u=J(t,"a","fused matMul"),c=J(r,"b","fused matMul");[u,c]=nn(u,c);let f=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=o?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?u.shape[u.rank-1]:u.shape[u.rank-2],m=o?c.shape[c.rank-2]:c.shape[c.rank-1],h=u.shape.slice(0,-2),g=c.shape.slice(0,-2),y=rn(h),b=rn(g);de(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${o} must match.`);let v=Rr(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),w=n?Se(u,[y,f,p]):Se(u,[y,p,f]),_=o?Se(c,[b,m,d]):Se(c,[b,d,m]),C;i!=null&&(C=J(i,"bias","fused matMul"),[C]=nn(C,u),Rr(v,C.shape));let S;a!=null&&(S=J(a,"prelu weights","fused matMul"));let E=(k,M)=>{let[I,L,P,R]=M,V=DC(Se(k,P.shape),P,s),G,U;if(!n&&!o?(G=zr(V,L,!1,!0),U=zr(I,V,!0,!1)):!n&&o?(G=zr(V,L,!1,!1),U=zr(V,I,!0,!1)):n&&!o?(G=zr(L,V,!1,!0),U=zr(I,V,!1,!1)):(G=zr(L,V,!0,!0),U=zr(V,I,!0,!0)),i!=null){let Y=NC(R,V);return[G,U,Y]}else return[G,U]},A={a:w,b:_,bias:C,preluActivationWeights:S},N={transposeA:n,transposeB:o,activation:s,leakyreluAlpha:l};return i==null?Cl((M,I,L)=>{let P=ue.runKernel(S1,A,N);return L([M,I,P]),{value:Se(P,v),gradFunc:E}})(w,_):Cl((M,I,L,P)=>{let R=ue.runKernel(S1,A,N);return P([M,I,R,L]),{value:Se(R,v),gradFunc:E}})(w,_,C)}var pFe,mFe=D(()=>{"use strict";$e();gx();Ee();ri();je();Ze();$o();Ao();MI();mm();De();Ht();pFe=se({fusedMatMul_:LNt})});var ew={};cn(ew,{conv2d:()=>uFe,depthwiseConv2d:()=>fFe,matMul:()=>pFe});var hFe=D(()=>{"use strict";cFe();dFe();mFe();});function BNt(t){return v3(t,.54,.46)}var gFe,yFe=D(()=>{"use strict";De();w3();gFe=se({hammingWindow_:BNt})});function $Nt(t){return v3(t,.5,.5)}var AU,Sie=D(()=>{"use strict";De();w3();AU=se({hannWindow_:$Nt})});function zNt(t,r,n,o=!1,i=0){let s=0,a=[];for(;s+r<=t.size;)a.push(Br(t,s,r)),s+=n;if(o)for(;s<t.size;){let l=s+r-t.size,u=Nn([Br(t,s,r-l),qd([l],i)]);a.push(u),s+=n}return a.length===0?vm([],[0,r]):Se(Nn(a),[a.length,r])}var kU,Cie=D(()=>{"use strict";Wf();rI();De();Ht();Uu();gU();kU=se({frame_:zNt})});function UNt(t,r,n,o,i=AU){o==null&&(o=vie(r));let s=kU(t,r,n),a=we(s,i(r));return Z1(a,o)}var bFe,xFe=D(()=>{"use strict";cr();De();w3();dU();Cie();Sie();bFe=se({stft_:UNt})});function VNt(t,r,n,o,i="bilinear",s=0){let a=J(t,"image","cropAndResize"),l=J(r,"boxes","cropAndResize","float32"),u=J(n,"boxInd","cropAndResize","int32"),c=l.shape[0];de(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),de(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${l.shape}.`),de(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${l.shape}.`),de(o.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${o.length}.`),de(o[0]>=1&&o[1]>=1,()=>`cropSize must be atleast [1,1], but was ${o}`),de(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);let f={image:a,boxes:l,boxInd:u},d={method:i,extrapolationValue:s,cropSize:o};return ue.runKernel(fS,f,d)}var vFe,wFe=D(()=>{"use strict";$e();Ee();je();Ze();De();vFe=se({cropAndResize_:VNt})});function GNt(t){let r=J(t,"image","flipLeftRight","float32");de(r.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${r.rank}.`);let n={image:r};return ue.runKernel(wS,n,{})}var _Fe,SFe=D(()=>{"use strict";$e();Ee();je();Ze();De();_Fe=se({flipLeftRight_:GNt})});function WNt(t){let r=J(t,"image","grayscaleToRGB"),n=r.rank-1,o=r.shape[n];de(r.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${r.rank}.`),de(o===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${o}.`);let i=new Array(r.rank);return i.fill(1,0,n),i[n]=3,ya(r,i)}var CFe,EFe=D(()=>{"use strict";je();Ze();De();fI();CFe=se({grayscaleToRGB_:WNt})});function qNt(t){let r=J(t,"image","RGBToGrayscale"),n=r.rank-1,o=r.shape[n];de(r.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${r.rank}.`),de(o===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${o}.`);let i=r.dtype,s=rt(r,"float32"),a=No([.2989,.587,.114]),l;switch(r.rank){case 2:l=P1("ij,j->i",s,a);break;case 3:l=P1("ijk,k->ij",s,a);break;case 4:l=P1("ijkl,l->ijk",s,a);break;case 5:l=P1("ijklm,m->ijkl",s,a);break;case 6:l=P1("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return l=Ci(l,-1),rt(l,i)}var TFe,AFe=D(()=>{"use strict";je();Ze();fn();Moe();cI();De();J1();TFe=se({rgbToGrayscale_:qNt})});function HNt(t,r,n=0,o=.5){let i=J(t,"image","rotateWithOffset","float32");de(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let s={image:i},a={radians:r,fillValue:n,center:o};return ue.runKernel(nC,s,a)}var kFe,IFe=D(()=>{"use strict";$e();Ee();je();Ze();De();kFe=se({rotateWithOffset_:HNt})});function Xd(t,r,n,o,i,s){o==null&&(o=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);let a=t.shape[0];return n=Math.min(n,a),de(0<=o&&o<=1,()=>`iouThreshold must be in [0, 1], but was '${o}'`),de(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),de(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),de(r.rank===1,()=>"scores must be a 1D tensor"),de(r.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${r.shape[0]}`),de(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s}}var MC=D(()=>{"use strict";Ze();});function YNt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let s=J(t,"boxes","nonMaxSuppression","float32"),a=J(r,"scores","nonMaxSuppression","float32"),l=Xd(s,a,n,o,i);n=l.maxOutputSize,o=l.iouThreshold,i=l.scoreThreshold;let u={maxOutputSize:n,iouThreshold:o,scoreThreshold:i};return ue.runKernel(NS,{boxes:s,scores:a},u)}var DFe,NFe=D(()=>{"use strict";$e();Ee();je();MC();De();DFe=se({nonMaxSuppression_:YNt})});function FFe(t,r,n){let o=XNt(t,r,n),i=o<0?-(o+1):o;t.splice(i,0,r)}function XNt(t,r,n){return ZNt(t,r,n||KNt)}function KNt(t,r){return t>r?1:t<r?-1:0}function ZNt(t,r,n){let o=0,i=t.length,s=0,a=!1;for(;o<i;){s=o+(i-o>>>1);let l=n(r,t[s]);l>0?o=s+1:(i=s,a=!l)}return a?o:-o-1}var OFe=D(()=>{"use strict";});function IU(t,r,n,o,i){return Eie(t,r,n,o,i,0)}function DU(t,r,n,o,i,s){return Eie(t,r,n,o,i,0,!1,s,!0)}function NU(t,r,n,o,i,s){return Eie(t,r,n,o,i,s,!0)}function Eie(t,r,n,o,i,s,a=!1,l=!1,u=!1){let c=[];for(let y=0;y<r.length;y++)r[y]>i&&c.push({score:r[y],boxIndex:y,suppressBeginIndex:0});c.sort(MFe);let f=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&c.length>0;){let y=c.pop(),{score:b,boxIndex:x,suppressBeginIndex:v}=y;if(b<i)break;let w=!1;for(let _=d.length-1;_>=v;--_){let C=QNt(t,x,d[_]);if(C>=o){w=!0;break}if(y.score=y.score*JNt(o,f,C),y.score<=i)break}y.suppressBeginIndex=d.length,w||(y.score===b?(d.push(x),p.push(y.score)):y.score>i&&FFe(c,y,MFe))}let m=d.length,h=n-m;l&&h>0&&(d.push(...new Array(h).fill(0)),p.push(...new Array(h).fill(0)));let g={selectedIndices:d};return a&&(g.selectedScores=p),u&&(g.validOutputs=m),g}function QNt(t,r,n){let o=t.subarray(r*4,r*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(o[0],o[2]),a=Math.min(o[1],o[3]),l=Math.max(o[0],o[2]),u=Math.max(o[1],o[3]),c=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),m=(l-s)*(u-a),h=(d-c)*(p-f);if(m<=0||h<=0)return 0;let g=Math.max(s,c),y=Math.max(a,f),b=Math.min(l,d),x=Math.min(u,p),v=Math.max(b-g,0)*Math.max(x-y,0);return v/(m+h-v)}function JNt(t,r,n){let o=Math.exp(r*n*n);return n<=t?o:0}function MFe(t,r){return t.score-r.score||t.score===r.score&&r.boxIndex-t.boxIndex}var _3=D(()=>{"use strict";OFe();});function eFt(s,a,l){return Be(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let u=J(t,"boxes","nonMaxSuppressionAsync"),c=J(r,"scores","nonMaxSuppressionAsync"),f=Xd(u,c,n,o,i);n=f.maxOutputSize,o=f.iouThreshold,i=f.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),p=d[0],m=d[1],{selectedIndices:h}=IU(p,m,n,o,i);return u!==t&&u.dispose(),c!==r&&c.dispose(),No(h,"int32")})}var RFe,jFe=D(()=>{"use strict";_3();je();MC();J1();RFe=eFt});function tFt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=Xd(a,l,n,o,i,s);n=u.maxOutputSize,o=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;let c={boxes:a,scores:l},f={maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s},d=ue.runKernel(OS,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}var PFe,LFe=D(()=>{"use strict";$e();Ee();je();MC();De();PFe=se({nonMaxSuppressionWithScore_:tFt})});function rFt(a,l,u){return Be(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=Xd(c,f,n,o,i,s);n=d.maxOutputSize,o=d.iouThreshold,i=d.scoreThreshold,s=d.softNmsSigma;let p=yield Promise.all([c.data(),f.data()]),m=p[0],h=p[1],{selectedIndices:g,selectedScores:y}=NU(m,h,n,o,i,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:No(g,"int32"),selectedScores:No(y)}})}var BFe,$Fe=D(()=>{"use strict";_3();je();MC();J1();BFe=rFt});function nFt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=Xd(a,l,n,o,i,null),c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p={boxes:a,scores:l},m={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:s},h=ue.runKernel(FS,p,m);return{selectedIndices:h[0],validOutputs:h[1]}}var zFe,UFe=D(()=>{"use strict";$e();Ee();je();MC();De();zFe=se({nonMaxSuppressionPadded_:nFt})});function oFt(a,l,u){return Be(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=Xd(c,f,n,o,i,null),p=d.maxOutputSize,m=d.iouThreshold,h=d.scoreThreshold,[g,y]=yield Promise.all([c.data(),f.data()]),{selectedIndices:b,validOutputs:x}=DU(g,y,p,m,h,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:No(b,"int32"),validOutputs:Mt(x,"int32")}})}var VFe,GFe=D(()=>{"use strict";_3();je();MC();Uo();J1();VFe=oFt});function iFt(t,r,n=!1,o=!1){let i=J(t,"images","resizeBilinear");de(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),de(r.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${r}.`),de(o===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(Kb,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var FU,Tie=D(()=>{"use strict";$e();Ee();je();Ze();De();Ht();FU=se({resizeBilinear_:iFt})});function sFt(t,r,n=!1,o=!1){let i=J(t,"images","resizeNearestNeighbor");de(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),de(r.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${r}.`),de(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),de(o===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(Xb,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var OU,Aie=D(()=>{"use strict";$e();Ee();je();Ze();De();Ht();OU=se({resizeNearestNeighbor_:sFt})});function aFt(t,r="binary",n=!1,o=.5){let i=J(t,"image","threshold"),s=.2989,a=.587,l=.114,u=i.shape[0]*i.shape[1],c=we(No([o]),255),f,d,p,m;if(de(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),de(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),de(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),de(r==="otsu"||r==="binary",()=>`Method must be binary or otsu, but was ${r}`),i.shape[2]===3){[f,d,p]=cs(i,[1,1,1],-1);let y=we(f,s),b=we(d,a),x=we(p,l);m=Ke(Ke(y,b),x)}else m=t;if(r==="otsu"){let y=f8(rt(bI(m),"int32"),La([]),256);c=lFt(y,u)}let h=n?Oc(m,c):ni(m,c);return rt(we(h,255),"int32")}function lFt(t,r){let n=No([-1]),o=No([0]),i=No([0]),s,a,l,u,c,f;for(let d=0;d<t.size-1;d++){s=Br(t,0,d+1),a=Br(t,d+1),c=Ct(kt(s),r),f=Ct(kt(a),r);let p=kt(we(s,g0(0,s.size)));l=Ct(p,kt(s));let m=qd(a.shape,s.size),h=Ke(g0(0,a.size),m),g=we(a,h);u=Ct(kt(g),kt(a));let y=wt(l,u),b=wt(l,u),x=we(c,f);i=we(we(x,y),b);let v=ni(i,o);o=go(v,i,o),n=go(v,No([d]),n)}return n}var WFe,qFe=D(()=>{"use strict";J1();De();fn();IC();Eoe();z1();m0();Si();$o();cr();Yn();oo();sie();qf();rI();Uu();sU();WR();Ze();je();WFe=se({threshold_:aFt})});function uFt(t,r,n="nearest",o="constant",i=0,s){let a=J(t,"image","transform","float32"),l=J(r,"transforms","transform","float32");de(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),de(l.rank===2&&(l.shape[0]===a.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),de(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);let u={image:a,transforms:l},c={interpolation:n,fillMode:o,fillValue:i,outputShape:s};return ue.runKernel(tC,u,c)}var HFe,YFe=D(()=>{"use strict";$e();Ee();je();Ze();De();HFe=se({transform_:uFt})});function cFt(t,r,n){let o=J(t,"a","bandPart");de(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);let i=o.shape,[s,a]=o.shape.slice(-2),l,u;typeof r=="number"?(de(r%1===0,()=>`bandPart(): numLower must be an integer, got ${r}.`),de(r<=s,()=>`bandPart(): numLower (${r}) must not be greater than the number of rows (${s}).`),l=J(r<0?s:r,"numLower","bandPart")):(de(r.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=go(hx(r,0),s,Hf(r,s))),typeof n=="number"?(de(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),de(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),u=J(n<0?a:n,"numUpper","bandPart")):(de(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=go(hx(n,0),a,Hf(n,a)));let c=Se(g0(0,s,1,"int32"),[-1,1]),f=g0(0,a,1,"int32"),d=wt(c,f),p=za(Oc(d,l),Jl(d,Xr(u))),m=bo([s,a],o.dtype);return Se(Qi(Ua(Se(o,[-1,s,a])).map(h=>go(p,h,m))),i)}var XFe,KFe=D(()=>{"use strict";je();Ze();wC();i3();z1();_C();f3();Gs();De();sU();Ht();Q1();oo();FI();qf();hI();XFe=se({bandPart_:cFt})});function fFt(t){let r;if(Array.isArray(t)){r=!1,de(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=t[0].shape[0];for(let s=1;s<t.length;++s)de(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else r=!0,t=cs(t,t.shape[0],0).map(i=>Rc(i,[0]));de(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],o=t;for(let i=0;i<t.length;++i)n.push(ue.tidy(()=>{let s=o[i];if(i>0)for(let a=0;a<i;++a){let l=we(kt(we(n[a],s)),n[a]);s=wt(s,l)}return Ct(s,mx(s,"euclidean"))}));return r?Qi(n,0):n}var ZFe,QFe=D(()=>{"use strict";$e();Ze();Yn();cr();r3();De();IC();y3();Q1();oo();Si();ZFe=se({gramSchmidt_:fFt})});function dFt(t,r=!1){if(de(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return JFe(t,r);{let n=t.shape.slice(0,t.shape.length-2).reduce((u,c)=>u*c),o=Ua(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];o.forEach(u=>{let[c,f]=JFe(u,r);i.push(c),s.push(f)});let a=Se(Qi(i,0),t.shape),l=Se(Qi(s,0),t.shape);return[a,l]}}function JFe(t,r=!1){return ue.tidy(()=>{de(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],o=t.shape[1],i=vC(n),s=zu(t),a=vm([[1]],[1,1]),l=zu(a),u=n>=o?o:n;for(let c=0;c<u;++c){let f=s,d=l,p=i;[l,s,i]=ue.tidy(()=>{let m=Br(s,[c,c],[n-c,1]),h=mx(m),g=Br(s,[c,c],[1,1]),y=go(ni(g,0),vm([[-1]]),vm([[1]])),b=wt(g,we(y,h)),x=Ct(m,b);x.shape[0]===1?l=zu(a):l=Nn([a,Br(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);let v=Xr(Ct(zr(y,b),h)),w=Br(s,[c,0],[n-c,o]),_=we(v,l),C=Ur(l);if(c===0)s=wt(w,zr(_,zr(C,w)));else{let A=wt(w,zr(_,zr(C,w)));s=Nn([Br(s,[0,0],[c,o]),A],0)}let S=Ur(_),E=Br(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=wt(E,zr(zr(E,l),S));else{let A=wt(E,zr(zr(E,l),S));i=Nn([Br(i,[0,0],[n,c]),A],1)}return[l,s,i]}),Cr([f,d,p])}return!r&&n>o&&(i=Br(i,[0,0],[n,o]),s=Br(s,[0,0],[o,o])),[i,s]})}var eOe,tOe=D(()=>{"use strict";$e();Fc();Ze();Kk();Wf();Yn();$oe();m0();mm();cr();Gs();r3();De();Ht();Uu();Q1();oo();gU();vx();FI();qf();eOe=se({qr_:dFt})});var Ei,wm=D(()=>{"use strict";Ei=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Ei||{})});function pFt(t,r,n=Ei.SUM_BY_NONZERO_WEIGHTS){let o=J(t,"losses","computeWeightedLoss"),i=null;r!=null&&(i=J(r,"weights","computeWeightedLoss"));let s=i==null?o:we(o,i);if(n===Ei.NONE)return s;if(n===Ei.SUM)return kt(s);if(n===Ei.MEAN){if(i==null)return yo(s);{let a=o.size/i.size,l=Ct(kt(s),kt(i));return a>1?Ct(l,Mt(a)):l}}if(n===Ei.SUM_BY_NONZERO_WEIGHTS){if(i==null)return Ct(kt(s),Mt(o.size));{let a=we(i,$i(o.shape)),l=rt(kt(xm(a,Mt(0))),"float32");return Ct(kt(s),l)}}throw Error(`Unknown reduction: ${n}`)}var Va,y0=D(()=>{"use strict";je();fn();Yn();wm();c3();cr();K8();SC();De();Uo();Si();Va=se({computeWeightedLoss_:pFt})});function mFt(t,r,n,o=Ei.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","absoluteDifference"),s=J(r,"predictions","absoluteDifference"),a=null;n!=null&&(a=J(n,"weights","absoluteDifference")),Bo(i.shape,s.shape,"Error in absoluteDifference: ");let l=To(wt(i,s));return Va(l,a,o)}var rOe,nOe=D(()=>{"use strict";je();Ze();hC();wm();De();oo();y0();rOe=se({absoluteDifference_:mFt})});function hFt(t,r,n,o,i=Ei.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","cosineDistance"),a=J(r,"predictions","cosineDistance"),l=null;o!=null&&(l=J(o,"weights","cosineDistance")),Bo(s.shape,a.shape,"Error in cosineDistance: ");let u=Mt(1),c=wt(u,kt(we(s,a),n,!0));return Va(c,l,i)}var oOe,iOe=D(()=>{"use strict";je();Ze();wm();cr();De();Uo();oo();Si();y0();oOe=se({cosineDistance_:hFt})});function gFt(t,r,n,o=Ei.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","hingeLoss"),s=J(r,"predictions","hingeLoss"),a=null;n!=null&&(a=J(n,"weights","hingeLoss")),Bo(i.shape,s.shape,"Error in hingeLoss: ");let l=Mt(1);i=wt(we(Mt(2),i),l);let u=ba(wt(l,we(i,s)));return Va(u,a,o)}var sOe,aOe=D(()=>{"use strict";je();Ze();wm();cr();De();gI();Uo();oo();y0();sOe=se({hingeLoss_:gFt})});function yFt(t,r,n,o=1,i=Ei.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","huberLoss"),a=J(r,"predictions","huberLoss"),l=null;n!=null&&(l=J(n,"weights","huberLoss")),Bo(s.shape,a.shape,"Error in huberLoss: ");let u=Mt(o),c=To(wt(a,s)),f=Hf(c,u),d=wt(c,f),p=Ke(we(Mt(.5),Gr(f)),we(u,d));return Va(p,l,i)}var lOe,uOe=D(()=>{"use strict";je();Ze();hC();$o();wm();f3();cr();De();Uo();ls();oo();y0();lOe=se({huberLoss_:yFt})});function bFt(t,r,n,o=1e-7,i=Ei.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","logLoss"),a=J(r,"predictions","logLoss"),l=null;n!=null&&(l=J(n,"weights","logLoss")),Bo(s.shape,a.shape,"Error in logLoss: ");let u=Mt(1),c=Mt(o),f=Xr(we(s,Vs(Ke(a,c)))),d=we(wt(u,s),Vs(Ke(wt(u,a),c))),p=wt(f,d);return Va(p,l,i)}var cOe,fOe=D(()=>{"use strict";je();Ze();$o();dI();wm();cr();Gs();De();Uo();oo();y0();cOe=se({logLoss_:bFt})});function xFt(t,r,n,o=Ei.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","meanSquaredError"),s=J(r,"predictions","meanSquaredError"),a=null;n!=null&&(a=J(n,"weights","meanSquaredError")),Bo(i.shape,s.shape,"Error in meanSquaredError: ");let l=AI(i,s);return Va(l,a,o)}var dOe,pOe=D(()=>{"use strict";je();Ze();wm();De();pU();y0();dOe=se({meanSquaredError_:xFt})});function vFt(t,r){let n=J(t,"labels","sigmoidCrossEntropyWithLogits"),o=J(r,"logits","sigmoidCrossEntropyWithLogits");Bo(n.shape,o.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=ba(o),s=we(o,n),a=U1(yi(Xr(To(o))));return Ke(wt(i,s),a)}function wFt(t,r,n,o=0,i=Ei.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"multiClassLabels","sigmoidCrossEntropy"),a=J(r,"logits","sigmoidCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","sigmoidCrossEntropy")),Bo(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),o>0){let c=Mt(o),f=Mt(1),d=Mt(.5);s=Ke(we(s,wt(f,c)),we(d,c))}let u=vFt(s,a);return Va(u,l,i)}var mOe,hOe=D(()=>{"use strict";je();Ze();hC();$o();f0();Uoe();wm();cr();Gs();De();gI();Uo();oo();y0();mOe=se({sigmoidCrossEntropy_:wFt})});function _Ft(t,r,n=-1){if(n===-1&&(n=r.rank-1),n!==r.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${r.rank} and dim was ${n}`);return Cl((i,s,a)=>{let u=V1(s,[n],!0),c=wt(rt(s,"float32"),u);a([i,c]);let f=Xr(we(c,i));return{value:kt(f,[n]),gradFunc:(m,h)=>{let[g,y]=h,b=Hd(m.shape,[n]);return[we(Se(m,b),wt(rt(g,"float32"),yi(y))),we(Se(m,b),wt(yi(y),rt(g,"float32")))]}}})(t,r)}function SFt(t,r,n,o=0,i=Ei.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"onehotLabels","softmaxCrossEntropy"),a=J(r,"logits","softmaxCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","softmaxCrossEntropy")),Bo(s.shape,a.shape,"Error in softmaxCrossEntropy: "),o>0){let c=Mt(o),f=Mt(1),d=Mt(s.shape[1]);s=Ke(we(s,wt(f,c)),Ct(c,d))}let u=_Ft(s,a);return Va(u,l,i)}var gOe,yOe=D(()=>{"use strict";gx();je();Ze();$o();gm();fn();Yn();f0();z8();wm();cr();Gs();De();Ht();Uo();oo();Si();y0();gOe=se({softmaxCrossEntropy_:SFt})});function CFt(t,r,n,o){let i=J(t,"indices","sparseFillEmptyRows","int32"),s=J(r,"values","sparseFillEmptyRows"),a=J(n,"denseShape","sparseFillEmptyRows","int32"),l=J(o,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);let u={indices:i,values:s,denseShape:a,defaultValue:l},c=ue.runKernel(GS,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var bOe,xOe=D(()=>{"use strict";$e();Ee();je();De();bOe=se({sparseFillEmptyRows_:CFt})});function EFt(t,r,n){let o=J(t,"inputIndices","sparseReshape","int32"),i=J(r,"inputShape","sparseReshape","int32"),s=J(n,"newShape","sparseReshape","int32");if(o.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);let a={inputIndices:o,inputShape:i,newShape:s},l=ue.runKernel(WS,a);return{outputIndices:l[0],outputShape:l[1]}}var vOe,wOe=D(()=>{"use strict";$e();Ee();je();De();vOe=se({sparseReshape_:EFt})});function TFt(t,r,n){let o=J(t,"data","sparseSegmentMean"),i=J(r,"indices","sparseSegmentMean","int32"),s=J(n,"segmentIds","sparseSegmentMean","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(qS,a)}var _Oe,SOe=D(()=>{"use strict";$e();Ee();je();De();_Oe=se({sparseSegmentMean_:TFt})});function AFt(t,r,n){let o=J(t,"data","sparseSegmentSum"),i=J(r,"indices","sparseSegmentSum","int32"),s=J(n,"segmentIds","sparseSegmentSum","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(HS,a)}var COe,EOe=D(()=>{"use strict";$e();Ee();je();De();COe=se({sparseSegmentSum_:AFt})});function kFt(t,r,n,o,i,s,a,l){let u=J(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=J(r,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let f={separator:n,nGramWidths:o,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:l},d={data:u,dataSplits:c},p=ue.runKernel(ZS,d,f);return{nGrams:p[0],nGramsSplits:p[1]}}var TOe,AOe=D(()=>{"use strict";$e();Ee();je();De();TOe=se({stringNGrams_:kFt})});function IFt(t,r,n=!0){let o=J(t,"input","stringSplit","string"),i=J(r,"delimiter","stringSplit","string");if(o.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${o.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);let s={skipEmpty:n},a={input:o,delimiter:i},l=ue.runKernel(QS,a,s);return{indices:l[0],values:l[1],shape:l[2]}}var kOe,IOe=D(()=>{"use strict";$e();Ee();je();De();kOe=se({stringSplit_:IFt})});function DFt(t,r){let n=J(t,"input","stringToHashBucketFast","string"),o={numBuckets:r};if(r<=0)throw new Error("Number of buckets must be at least 1");let i={input:n};return ue.runKernel(JS,i,o)}var DOe,NOe=D(()=>{"use strict";$e();Ee();je();De();DOe=se({stringToHashBucketFast_:DFt})});function NFt(t,r,n,o=!0){let i=J(t,"input","staticRegexReplace","string"),s={pattern:r,rewrite:n,replaceGlobal:o};return ue.runKernel(_1,{x:i},s)}var FOe,OOe=D(()=>{"use strict";$e();Ee();je();De();FOe=se({staticRegexReplace_:NFt})});var FFt,OFt,qu,kie,MFt,RFt,jFt,Dr=D(()=>{"use strict";hC();wIe();_Ie();$o();CIe();goe();yoe();boe();xoe();EIe();TIe();AIe();voe();kIe();s8();NIe();OIe();ZR();tI();jIe();PIe();LIe();Eoe();$Ie();UIe();d8();dx();fn();VIe();GIe();Kk();I1();Wf();WIe();qIe();HIe();YIe();Toe();bC();Aoe();XIe();KIe();_8();Ioe();S8();C8();ZIe();Doe();JR();JIe();Noe();Yn();Foe();Ooe();Moe();I8();rDe();e3();nDe();Boe();f0();cI();sDe();$oe();rI();O8();Zz();n3();m0();wC();o3();aDe();lDe();uDe();P8();i3();z1();fDe();zoe();dI();Uoe();gDe();yDe();z8();_C();a3();U8();Goe();xDe();mm();uI();q8();vDe();_De();u3();c3();CDe();D8();f3();Woe();qoe();EDe();cr();ADe();IDe();Gs();K8();Z8();SC();DDe();FDe();q1();MDe();jDe();LDe();$De();Hoe();L1();J8();hoe();Yoe();UDe();GDe();qDe();YDe();hNe();iie();yNe();iU();xNe();sU();h3();vNe();gI();lU();Ht();bx();_Ne();CNe();TNe();kNe();sie();aie();Uo();lie();uie();DNe();eI();NNe();cie();fie();Uu();FNe();ONe();MNe();RNe();jNe();Voe();d3();cU();fU();die();dU();IC();ym();ls();pU();y3();Q1();kI();PNe();oo();Si();LNe();Coe();WR();J1();gU();pie();$Ne();UNe();GNe();HNe();fI();hie();YNe();gie();vU();FI();KNe();ZNe();qf();bie();hI();zo();QNe();vx();r3();JNe();eFe();W8();nFe();oFe();aFe();w3();lFe();De();dU();cU();fU();die();hFe();yFe();Sie();Cie();xFe();wFe();SFe();EFe();AFe();IFe();NFe();jFe();LFe();$Fe();UFe();GFe();Tie();Aie();qFe();YFe();KFe();QFe();tOe();nOe();y0();iOe();aOe();uOe();fOe();pOe();hOe();yOe();xOe();wOe();SOe();EOe();AOe();IOe();NOe();OOe();FFt={fft:K1,ifft:xx,rfft:Z1,irfft:TI},OFt={hammingWindow:gFe,hannWindow:AU,frame:kU,stft:bFe},qu={flipLeftRight:_Fe,grayscaleToRGB:CFe,resizeNearestNeighbor:OU,resizeBilinear:FU,rgbToGrayscale:TFe,rotateWithOffset:kFe,cropAndResize:vFe,nonMaxSuppression:DFe,nonMaxSuppressionAsync:RFe,nonMaxSuppressionWithScore:PFe,nonMaxSuppressionWithScoreAsync:BFe,nonMaxSuppressionPadded:zFe,nonMaxSuppressionPaddedAsync:VFe,threshold:WFe,transform:HFe},kie={bandPart:XFe,gramSchmidt:ZFe,qr:eOe},MFt={absoluteDifference:rOe,computeWeightedLoss:Va,cosineDistance:oOe,hingeLoss:sOe,huberLoss:lOe,logLoss:cOe,meanSquaredError:dOe,sigmoidCrossEntropy:mOe,softmaxCrossEntropy:gOe},RFt={sparseFillEmptyRows:bOe,sparseReshape:vOe,sparseSegmentMean:_Oe,sparseSegmentSum:COe},jFt={stringNGrams:TOe,stringSplit:kOe,stringToHashBucketFast:DOe,staticRegexReplace:FOe}});var tt={};cn(tt,{Serializable:()=>S3,SerializationMap:()=>MU,getRegisteredName:()=>LFt,registerClass:()=>Die});function Die(t,r,n){de(t.className!=null,()=>"Class being registered does not have the static className property defined."),de(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),de(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof r>"u"&&(r="Custom"),typeof n>"u"&&(n=t.className);let o=n,i=r+">"+o;return MU.register(t),PFt.set(i,t),Iie.set(t,i),t}function LFt(t){return Iie.has(t)?Iie.get(t):t.className}var PFt,Iie,S3,MU,RU=D(()=>{"use strict";Ze();PFt=new Map,Iie=new Map,S3=class{getClassName(){return this.constructor.className}static fromConfig(r,n){return new r(n)}},MU=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(r){t.getMap().classNameMap[r.className]=[r,r.fromConfig]}}});var xa,tw=D(()=>{"use strict";Fc();gx();Dr();RU();xa=class extends S3{minimize(r,n=!1,o){let{value:i,grads:s}=this.computeGradients(r,o);if(o!=null){let a=o.map(l=>({name:l.name,tensor:s[l.name]}));this.applyGradients(a)}else this.applyGradients(s);return Cr(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(r,n){return s3(r,n)}dispose(){this.iterations_!=null&&Cr(this.iterations_)}saveIterations(){return Be(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Mt(this.iterations_,"int32")}})}getWeights(){return Be(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(r){return Be(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(r){return Be(this,null,function*(){return this.iterations_=(yield r[0].tensor.data())[0],r.slice(1)})}};Object.defineProperty(xa,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null})});var rw,jU=D(()=>{"use strict";$e();Fc();$o();Yn();cr();Dr();ls();zo();tw();rw=class extends xa{static get className(){return"Adadelta"}constructor(r,n,o=null){super(),this.learningRate=r,this.rho=n,this.epsilon=o,this.accumulatedGrads=[],this.accumulatedUpdates=[],o==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accum_grad`,variable:Pe(()=>ir(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${o}/accum_var`,variable:Pe(()=>ir(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Pe(()=>{let f=Ke(we(u,this.rho),we(Gr(l),1-this.rho)),d=we(Ct(Xn(Ke(c,this.epsilon)),Xn(Ke(u,this.epsilon))),l),p=Ke(we(c,this.rho),we(Gr(d),1-this.rho));u.assign(f),c.assign(p);let m=Ke(we(d,-this.learningRate),s);s.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Cr(this.accumulatedGrads.map(r=>r.variable)),Cr(this.accumulatedUpdates.map(r=>r.variable)))}getWeights(){return Be(this,null,function*(){let r=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=r.length/2,o=!1;this.accumulatedGrads=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedUpdates=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.rho,n.epsilon)}}});var nw,PU=D(()=>{"use strict";$e();Fc();$o();Yn();rI();cr();ym();ls();tw();nw=class extends xa{static get className(){return"Adagrad"}constructor(r,n=.1){super(),this.learningRate=r,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accumulator`,variable:Pe(()=>qd(s.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(r)?r[i].tensor:r[o];if(a==null)return;let l=this.accumulatedGrads[i].variable;Pe(()=>{let u=Ke(l,Gr(a));l.assign(u);let c=Ke(we(Ct(a,Xn(Ke(u,ue.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Cr(this.accumulatedGrads.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulatedGrads=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(r,n){return new r(n.learningRate,n.initialAccumulatorValue)}}});var ow,LU=D(()=>{"use strict";$e();Fc();$o();Yn();cr();L1();Uo();ym();ls();oo();zo();tw();ow=class extends xa{static get className(){return"Adam"}constructor(r,n,o,i=null){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Pe(()=>{this.accBeta1=Mt(n).variable(),this.accBeta2=Mt(o).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);Pe(()=>{let o=wt(1,this.accBeta1),i=wt(1,this.accBeta2);n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:Pe(()=>ir(l).variable(u))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:Pe(()=>ir(l).variable(u))});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),m=Ke(we(d,this.beta2),we(Gr(c),1-this.beta2)),h=Ct(p,o),g=Ct(m,i);f.assign(p),d.assign(m);let y=Ke(we(Ct(h,Ke(Xn(g),this.epsilon)),-this.learningRate),l);l.assign(y)}),this.accBeta1.assign(we(this.accBeta1,this.beta1)),this.accBeta2.assign(we(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedSecondMoment!=null&&Cr(this.accumulatedSecondMoment.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){let r=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r),Pe(()=>{this.accBeta1.assign($a(this.beta1,this.iterations_+1)),this.accBeta2.assign($a(this.beta2,this.iterations_+1))});let n=r.length/2,o=!1;this.accumulatedFirstMoment=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedSecondMoment=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)}}});var iw,BU=D(()=>{"use strict";$e();Fc();hC();$o();Yn();u3();cr();Uo();oo();zo();tw();iw=class extends xa{static get className(){return"Adamax"}constructor(r,n,o,i=null,s=0){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Pe(()=>{this.iteration=Mt(0).variable(),this.accBeta1=Mt(n).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);Pe(()=>{let o=wt(1,this.accBeta1),i=Ct(-this.learningRate,Ke(we(this.iteration,this.decay),1));n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:ir(l).variable(u)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:ir(l).variable(u)});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),m=we(d,this.beta2),h=To(c),g=Wu(m,h);f.assign(p),d.assign(g);let y=Ke(we(Ct(i,o),Ct(p,Ke(g,this.epsilon))),l);l.assign(y)}),this.iteration.assign(Ke(this.iteration,1)),this.accBeta1.assign(we(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedWeightedInfNorm!=null&&Cr(this.accumulatedWeightedInfNorm.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(r){return Be(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}});var b0,C3=D(()=>{"use strict";$e();Fc();$o();cr();Uo();tw();b0=class extends xa{static get className(){return"SGD"}constructor(r){super(),this.learningRate=r,this.setLearningRate(r)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=Array.isArray(r)?r[i].tensor:r[o];if(s==null)return;let a=ue.registeredVariables[o];Pe(()=>{let l=Ke(we(this.c,s),a);a.assign(l)})}),this.incrementIterations()}setLearningRate(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=_s(Mt(-r))}dispose(){this.c.dispose()}getWeights(){return Be(this,null,function*(){return[yield this.saveIterations()]})}setWeights(r){return Be(this,null,function*(){if(r=yield this.extractIterations(r),r.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(r,n){return new r(n.learningRate)}}});var sw,$U=D(()=>{"use strict";$e();Fc();$o();cr();Uo();zo();C3();sw=class extends b0{static get className(){return"Momentum"}constructor(r,n,o=!1){super(r),this.learningRate=r,this.momentum=n,this.useNesterov=o,this.accumulations=[],this.m=Mt(this.momentum)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${o}/momentum`,variable:Pe(()=>ir(s).variable(!1))});let a=this.accumulations[i].variable,l=Array.isArray(r)?r[i].tensor:r[o];l!=null&&Pe(()=>{let u,c=Ke(we(this.m,a),l);this.useNesterov?u=Ke(we(this.c,Ke(l,we(c,this.m))),s):u=Ke(we(this.c,c),s),a.assign(c),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Cr(this.accumulations.map(r=>r.variable))}setMomentum(r){this.momentum=r}getWeights(){return Be(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulations=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)}}});var aw,zU=D(()=>{"use strict";$e();Fc();$o();Yn();cr();ym();ls();oo();zo();tw();aw=class extends xa{static get className(){return"RMSProp"}constructor(r,n=.9,o=0,i=null,s=!1){if(super(),this.learningRate=r,this.decay=n,this.momentum=o,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=ue.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${o}/rms`,variable:Pe(()=>ir(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${o}/momentum`,variable:Pe(()=>ir(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${o}/mg`,variable:Pe(()=>ir(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Pe(()=>{let f=Ke(we(u,this.decay),we(Gr(l),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[i].variable,p=Ke(we(d,this.decay),we(l,1-this.decay)),m=Ct(we(l,this.learningRate),Xn(wt(f,Ke(Gr(p),this.epsilon)))),h=Ke(we(c,this.momentum),m);u.assign(f),d.assign(p),c.assign(h);let g=wt(s,h);s.assign(g)}else{let d=Ke(we(u,this.decay),we(Gr(l),1-this.decay)),p=Ke(we(c,this.momentum),Ct(we(l,this.learningRate),Xn(Ke(d,this.epsilon))));u.assign(d),c.assign(p);let m=wt(s,p);s.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Cr(this.accumulatedMeanSquares.map(r=>r.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Cr(this.accumulatedMeanGrads.map(r=>r.variable)),this.accumulatedMoments!=null&&Cr(this.accumulatedMoments.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){let r=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&r.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=this.centered?r.length/3:r.length/2,o=!1;this.accumulatedMeanSquares=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedMoments=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.centered&&(this.accumulatedMeanGrads=r.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}});function MOe(){for(let t of BFt)Die(t)}var BFt,ROe=D(()=>{"use strict";jU();PU();LU();BU();$U();zU();C3();RU();BFt=[rw,nw,ow,iw,sw,aw,b0]});function jOe(t){return new Promise(r=>setTimeout(r)).then(t)}function GFt(t="model"){return new Nie(t)}function POe(t){return new Fie(t)}var $Ft,zFt,UFt,Nie,Fie,VFt,LOe=D(()=>{"use strict";Gk();ma();F1();cC();D1();$Ft="model",zFt=".json",UFt=".weights.bin";Nie=(()=>{class t{constructor(n){if(!Fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=$Ft),this.modelJsonFileName=n+zFt,this.weightDataFileName=n+UFt}save(n){return Be(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let o=Ba.join(n.weightData),i=window.URL.createObjectURL(new Blob([o],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a=qz(n,s),l=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=l,yield jOe(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=i,yield jOe(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:i0(n)}}})}}return t.URL_SCHEME="downloads://",t})(),Fie=class{constructor(r){if(r==null||r.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${r}`);this.jsonFile=r[0],this.weightsFiles=r.slice(1)}load(){return Be(this,null,function*(){return new Promise((r,n)=>{let o=new FileReader;o.onload=i=>{let s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){r({modelTopology:a});return}let u=qk(s,c=>this.loadWeights(c));r(u)},o.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),o.readAsText(this.jsonFile)})})}loadWeights(r){let n=[],o=[];for(let a of r)n.push(...a.weights),o.push(...a.paths);let i=this.checkManifestAndWeightFiles(r),s=o.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[n,a])}loadWeightsFile(r,n){return new Promise((o,i)=>{let s=new FileReader;s.onload=a=>{let l=a.target.result;o(l)},s.onerror=a=>i(`Failed to weights data from file of path '${r}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(r){let n=[],o=this.weightsFiles.map(s=>ooe(s.name)),i={};for(let s of r)s.paths.forEach(a=>{let l=ooe(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),o.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);i[a]=this.weightsFiles[o.indexOf(l)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}},VFt=t=>Fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Nie.URL_SCHEME)?GFt(t.slice(Nie.URL_SCHEME.length)):null;$s.registerSaveRouter(VFt)});function Oie(t,r,n,o){a(t),n=n??0,o=o??1,l(n,o);let i=0,s=u=>(u.then(c=>{let f=n+ ++i/t.length*(o-n);return r(f),c}),u);function a(u){de(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function l(u,c){de(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),de(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),de(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(t.map(s))}var BOe=D(()=>{"use strict";Ze();});function Mie(t,r){return Be(this,null,function*(){r==null&&(r={});let n=r.fetchFunc==null?Fe().platform.fetch:r.fetchFunc,o=t.map(d=>n(d,r.requestInit,{isBinary:!0})),l=(r.onProgress==null?yield Promise.all(o):yield Oie(o,r.onProgress,0,.5)).map(d=>d.arrayBuffer());return r.onProgress==null?yield Promise.all(l):yield Oie(l,r.onProgress,.5,1)})}function $Oe(t,r){var n;let o=r.fetchFunc==null?Fe().platform.fetch:r.fetchFunc,i=0,s;return(n=r.onProgress)===null||n===void 0||n.call(r,0),new ReadableStream({pull:a=>Be(this,null,function*(){for(var l;i<t.length;){s||(s=(yield o(t[i],r.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield s.read();if(u){i++,s=void 0,(l=r.onProgress)===null||l===void 0||l.call(r,i/t.length);continue}a.enqueue(c);return}a.close()})})}function zOe(t,r="",n,o){return Be(this,null,function*(){return Rie(a=>Mie(a,{requestInit:o}))(t,r,n)})}function Rie(t){return(r,n="",o)=>Be(this,null,function*(){let i=r.map(()=>!1),s={},a=o!=null?o.map(()=>!1):[],l=[];if(r.forEach((m,h)=>{let g=0;m.weights.forEach(y=>{let b="quantization"in y?y.quantization.dtype:y.dtype,x=cx[b]*rn(y.shape),v=()=>{i[h]=!0,s[h]==null&&(s[h]=[]),s[h].push({manifestEntry:y,groupOffset:g,sizeBytes:x})};o!=null?o.forEach((w,_)=>{w===y.name&&(v(),a[_]=!0)}):v(),l.push(y.name),g+=x})}),!a.every(m=>m)){let m=o.filter((h,g)=>!a[g]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}let u=i.reduce((m,h,g)=>(h&&m.push(g),m),[]),c=[];u.forEach(m=>{r[m].paths.forEach(h=>{let g=n+(n.endsWith("/")?"":"/")+h;c.push(g)})});let f=yield t(c),d={},p=0;return u.forEach(m=>{let h=r[m].paths.length,g=new Ba(f.slice(p,p+h));s[m].forEach(b=>{let x=g.slice(b.groupOffset,b.groupOffset+b.sizeBytes),v=Wz(x,[b.manifestEntry]);for(let w in v)d[w]=v[w]}),p+=h}),d})}var jie=D(()=>{"use strict";ma();Ze();D1();F1();BOe();eoe();});function HFt(t){let r=t.lastIndexOf("/"),n=t.lastIndexOf("?"),o=t.substring(0,r),i=n>r?t.substring(n):"";return[o+"/",i]}function UU(t){return t.match(UOe.URL_SCHEME_REGEX)!=null}function VU(t,r){return new UOe(t,r)}function GOe(t,r){return VU(t,r)}var WFt,qFt,UOe,VOe,WOe=D(()=>{"use strict";ma();Ze();F1();D1();cC();jie();WFt="application/octet-stream",qFt="application/json",UOe=(()=>{class t{constructor(n,o){if(this.DEFAULT_METHOD="POST",o==null&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.weightUrlConverter=o.weightUrlConverter,o.fetchFunc!=null?(de(typeof o.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=Fe().platform.fetch,de(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&de(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,o.requestInit!=null&&o.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{},this.loadOptions=o}save(n){return Be(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let o=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);o.body=new FormData;let i=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],s=qz(n,i);if(o.body.append("model.json",new Blob([JSON.stringify(s)],{type:qFt}),"model.json"),n.weightData!=null){let l=Ba.join(n.weightData);o.body.append("model.weights.bin",new Blob([l],{type:WFt}),"model.weights.bin")}let a=yield this.fetch(this.path,o);if(a.ok)return{modelArtifactsInfo:i0(n),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})}loadModelJSON(){return Be(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let o;try{o=yield n.json()}catch{let l=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?l+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":l+=" Please make sure the server is serving valid JSON for this request.",new Error(l)}let i=o.modelTopology,s=o.weightsManifest;if(i==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return o})}load(){return Be(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return qk(n,o=>this.loadWeights(o))})}loadStream(){return Be(this,null,function*(){let n=yield this.loadModelJSON(),o=yield this.getWeightUrls(n.weightsManifest),i=YR(n.weightsManifest),s=()=>$Oe(o,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:i,getWeightStream:s})})}getWeightUrls(n){return Be(this,null,function*(){let o=Array.isArray(this.path)?this.path[1]:this.path,[i,s]=HFt(o),a=this.weightPathPrefix||i,l=[],u=[];for(let c of n)for(let f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):l.push(a+f+s);return this.weightUrlConverter&&l.push(...yield Promise.all(u)),l})}loadWeights(n){return Be(this,null,function*(){let o=yield this.getWeightUrls(n),i=YR(n),s=yield Mie(o,this.loadOptions);return[i,s]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();VOe=(t,r)=>{if(typeof fetch>"u"&&(r==null||r.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(o=>UU(o)):n=UU(t),n)return VU(t,r)}return null};$s.registerSaveRouter(VOe);$s.registerLoadRouter(VOe)});function qOe(t,r,n,o){let i=arguments;return new Pie(Lie(...i))}function Lie(t,r,n,o){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new E3(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new E3({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new E3({modelTopology:t,weightSpecs:r,weightData:n,trainingConfig:o}))}function HOe(t){return new GU(t)}function YOe(t){return new GU(t)}var E3,GU,Pie,XOe=D(()=>{"use strict";E3=class{constructor(r){this.modelArtifacts=r}load(){return this.modelArtifacts}},GU=class{constructor(r){this.saveHandler=r}save(r){return this.saveHandler(r)}},Pie=class{constructor(r){r.load&&(this.load=()=>Promise.resolve(r.load())),r.save&&(this.save=n=>Promise.resolve(r.save(n)))}}});var x0={};cn(x0,{CompositeArrayBuffer:()=>Ba,browserFiles:()=>POe,browserHTTPRequest:()=>GOe,concatenateArrayBuffers:()=>Jke,copyModel:()=>pIe,decodeWeights:()=>Wz,decodeWeightsStream:()=>roe,encodeWeights:()=>Xke,fromMemory:()=>qOe,fromMemorySync:()=>Lie,getLoadHandlers:()=>nIe,getModelArtifactsForJSON:()=>qk,getModelArtifactsForJSONSync:()=>ioe,getModelArtifactsInfoForJSON:()=>i0,getSaveHandlers:()=>rIe,getWeightSpecs:()=>YR,http:()=>VU,isHTTPScheme:()=>UU,listModels:()=>fIe,loadWeights:()=>zOe,moveModel:()=>mIe,registerLoadRouter:()=>tIe,registerSaveRouter:()=>eIe,removeModel:()=>dIe,weightsLoaderFactory:()=>Rie,withSaveHandler:()=>HOe,withSaveHandlerSync:()=>YOe});var KOe=D(()=>{"use strict";uoe();coe();LOe();WOe();F1();XOe();cC();jie();D1();foe();});function YFt(t,r,n){let o=J(t,"labels","confusionMatrix"),i=J(r,"predictions","confusionMatrix");de(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),de(o.rank===1,()=>`Expected the rank of labels to be 1, but got ${o.rank}`),de(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),de(o.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${o.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),de(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let s=h0(rt(o,"int32"),n),a=h0(rt(i,"int32"),n),l=Ur(s),u=zr(l,a);return rt(u,"int32")}var ZOe,QOe=D(()=>{"use strict";je();Ze();fn();mm();Z8();De();vx();ZOe=se({confusionMatrix_:YFt})});var Bie={};cn(Bie,{confusionMatrix:()=>ZOe});var JOe=D(()=>{"use strict";QOe();});var WU={};cn(WU,{draw:()=>rOt,fromPixels:()=>nOt,fromPixelsAsync:()=>JFt,toPixels:()=>tOt});function tMe(t,r=3){if(r>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,o=!1,i=!1,s=!1,a=!1,l=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)o=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(oC(Rk,ue.backendName)!=null){let h={pixels:t},g={numChannels:r};return ue.runKernel(Rk,h,g)}let[c,f]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(a)d=t.getContext("2d").getImageData(0,0,c,f).data;else if(o||n)d=t.data;else if(s||i||l){if(RC==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")RC=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else RC=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});RC.canvas.width=c,RC.canvas.height=f,RC.drawImage(t,0,0,c,f),d=RC.getImageData(0,0,c,f).data}let p;if(r===4)p=new Int32Array(d);else{let h=c*f;p=new Int32Array(h*r);for(let g=0;g<h;g++)for(let y=0;y<r;++y)p[g*r+y]=d[g*4+y]}return yU(p,[f,c,r],"int32")}function XFt(t){return t!=null&&t.data instanceof Uint8Array}function KFt(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function ZFt(t){return t!=null&&t.width!==0&&t.height!==0}function QFt(t){return KFt()&&!(t instanceof ImageBitmap)&&ZFt(t)&&!XFt(t)}function JFt(t,r=3){return Be(this,null,function*(){let n=null;if(Fe().getBool("WRAP_TO_IMAGEBITMAP")&&QFt(t)){let o;try{o=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{o=null}o!=null&&o.width===t.width&&o.height===t.height?n=o:n=t}else n=t;return tMe(n,r)})}function rMe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let r=t.rank===2?1:t.shape[2];if(r>4||r===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${r}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function eOt(t){let r=t?.alpha||1;if(r>1||r<0)throw new Error(`Alpha value ${r} is suppoed to be in range [0 - 1].`)}function tOt(t,r){return Be(this,null,function*(){let n=J(t,"img","toPixels");if(!(t instanceof Jr)){let c=n;n=rt(c,"int32"),c.dispose()}rMe(n);let[o,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],a=yield n.data(),l=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*o*4);for(let c=0;c<o*i;++c){let f=[0,0,0,255];for(let p=0;p<s;p++){let m=a[c*s+p];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);s===1?(f[0]=m*l,f[1]=m*l,f[2]=m*l):f[p]=m*l}let d=c*4;u[d+0]=Math.round(f[0]),u[d+1]=Math.round(f[1]),u[d+2]=Math.round(f[2]),u[d+3]=Math.round(f[3])}if(r!=null){eMe||oC(Mk,ue.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),eMe=!0),r.width=i,r.height=o;let c=r.getContext("2d"),f=new ImageData(u,i,o);c.putImageData(f,0,0)}return n!==t&&n.dispose(),u})}function rOt(t,r,n){let o=J(t,"img","draw");if(!(t instanceof Jr)){let a=o;o=rt(a,"int32"),a.dispose()}rMe(o),eOt(n?.imageOptions);let i={image:o},s={canvas:r,options:n};ue.runKernel(Mk,i,s)}var RC,eMe,nOt,nMe=D(()=>{"use strict";$e();ma();Ee();BR();Je();je();fn();De();pie();eMe=!1;nOt=se({fromPixels_:tMe})});var $ie={};cn($ie,{prepareAndValidate:()=>oMe});function oMe(t,r){let n=t.shape.length,o=r.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(o<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${o}.`);if(r.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${r.dtype}.`);if(r.shape[o-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${r.shape[o-1]} vs. ${n}`);if(rn(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let i=r.shape,s=i[i.length-1],a=1;for(let d=0;d<i.length-1;++d)a*=i[d];let l=t.shape,u=i.slice();u.pop();let c=1;for(let d=s;d<n;++d)c*=l[d],u.push(l[d]);let f=[...cg(t.shape).map(d=>d/c),1].slice(0,s);return[u,a,c,f]}var zie=D(()=>{"use strict";Ze()});var Es={};cn(Es,{assertParamsValid:()=>iOt,computeFlatOffset:()=>cOt,computeOutShape:()=>aOt,getNormalizedAxes:()=>lOt,isSliceContinous:()=>uOt,maskToAxes:()=>sOt,parseSliceParams:()=>Vie,sliceInfo:()=>fOt,startForAxis:()=>dMe,startIndicesWithElidedDims:()=>uMe,stopForAxis:()=>pMe,stopIndicesWithElidedDims:()=>cMe,stridesForAxis:()=>fMe,stridesWithElidedDims:()=>sMe});function iOt(t,r,n){let o=t.shape.length;de(o===r.length,()=>`Error in slice${o}D: Length of begin ${r} must match the rank of the array (${o}).`),de(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must match the rank of the array (${o}).`);for(let i=0;i<o;++i)de(r[i]+n[i]<=t.shape[i],()=>`Error in slice${o}D: begin[${i}] + size[${i}] (${r[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function sOt(t){let r=[],n=0;for(;t>0;)t&1&&r.push(n),t/=2,n++;return r}function aOt(t,r,n){let o=[];for(let i=0;i<t.length;i++)o[i]=Math.ceil((r[i]-t[i])/n[i]);return o}function sMe(t,r,n,o){let i=[...t];for(let s=i.length;s<o.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[r]=1:(i.splice(r,0,1),i.pop());return i}function aMe(t,r,n){return n<=t?n:n-(r-1)}function lMe(t,r){let n=[];for(let o=0;o<t;o++)n.push(r+o);return n}function lOt(t,r,n,o,i,s,a,l,u){let c=t.length,f=new Array(c),d=new Array(c),p=new Array(c);if(r.length&&n>0){let m=r[0],h=n+1;f=uMe(a,m,h,o,t),d=cMe(l,m,h,i,t),p=sMe(s,m,h,t)}else for(let m=0;m<c;m++)f[m]=dMe(a,o,s,t,m,u),d[m]=pMe(l,i,s,t,m,u),p[m]=fMe(s,m,u);return{begin:f,end:d,strides:p}}function uMe(t,r,n,o,i){let s=[...i],a=lMe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=0;else{let u=aMe(r,n,l),c=o[u];t&1<<u&&(c=0),s[l]=c}return s}function cMe(t,r,n,o,i){let s=[...i],a=lMe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=Number.MAX_SAFE_INTEGER;else{let u=aMe(r,n,l),c=o[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),s[l]=c}for(let l=0;l<s.length;l++){let u=i[l];s[l]<0&&(s[l]+=u),s[l]=Ak(0,s[l],i[l])}return s}function fMe(t,r,n){let o=t[r];return(n&1<<r||o==null)&&(o=1),o}function dMe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),a=Ak(0,a,u-1),a}function pMe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),l>0?a=Ak(0,a,u):a=Ak(-1,a,u-1),a}function uOt(t,r,n){let o=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){o=i;break}for(let i=o+1;i<n.length;i++)if(r[i]>0||n[i]!==t[i])return!1;return!0}function cOt(t,r){let n=t.length>0?t[t.length-1]:1;for(let o=0;o<t.length-1;o++)n+=t[o]*r[o];return n}function Vie(t,r,n){let o,i=t.shape.length;typeof r=="number"?o=[r,...new Array(i-1).fill(0)]:r.length<i?o=r.concat(new Array(i-r.length).fill(0)):o=r.slice(),o.forEach(a=>{de(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,l)=>a>=0?a:(de(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${l}.`),t.shape[l]-o[l])),[o,s]}function fOt(t,r,n,o,i,s,a,l,u){let c;if(o==null?(c=new Array(r.length),c.fill(1)):c=o,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:r.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};for(let v=0;v<d.dims;v++)f&&1<<v&l&&d.numAddAxisAfterEllipsis++,1<<v&a&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};dOt(d,p);let m=!0,h=!0,g=!0,y=[],b=[];for(let v=0;v<t.length;++v){if(p.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);let w=!!(p.shrinkAxisMask&1<<v),_=t[v];if(_===-1){y.push(w?1:-1);continue}let C=[p.beginMask&1<<v,p.endMask&1<<v],S=[p.strides[v]>0?0:-1,p.strides[v]>0?_:_-1];if(w&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[v]===1;let E=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(w){let M=p.begin[v]<0?_+p.begin[v]:p.begin[v];if(p.begin[v]=M,p.end[v]=p.begin[v]+1,M<0||M>=_)throw Error(`slice index ${p.begin[v]} of dimension ${v} out of bounds.`)}else p.begin[v]=iMe(p.begin[v],0,p.strides[v],_,C,S),p.end[v]=iMe(p.end[v],1,p.strides[v],_,C,S);let k=p.strides[v]===1&&p.begin[v]===0&&p.end[v]===_;m=m&&k,h=h&&(v===0&&p.strides[v]===1||k)}else m=m&&p.strides[v]===1&&E,h=h&&(v===0&&p.strides[v]===1||E);let A,N=!1;if(p.beginValid&&p.endValid?(A=p.end[v]-p.begin[v],N=!0):w?(A=1,N=!0):E&&_>=0&&(p.strides[v]<0?A=-_:A=_,N=!0),N){let k;A===0||A<0!=p.strides[v]<0?k=0:k=Math.trunc(A/p.strides[v])+(A%p.strides[v]!==0?1:0),y.push(k)}else y.push(-1)}for(let v=0;v<p.finalShapeGatherIndices.length;++v){let w=p.finalShapeGatherIndices[v];w>=0?b.push(y[w]):w===Uie&&b.push(1)}return{finalShapeSparse:b.filter((v,w)=>p.finalShapeGatherIndices[w]!==Uie),finalShape:b,isIdentity:m,sliceDim0:h,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function dOt(t,r){r.beginMask=0,r.endMask=0,r.shrinkAxisMask=0;let n=0;r.beginValid=t.begin!=null,r.endValid=t.end!=null,r.begin=new Array(r.dims),r.end=new Array(r.dims),r.strides=new Array(r.dims),r.finalShapeGatherIndices=[],r.finalShapeGatherIndicesSparse=[],r.inputShapeGatherIndicesSparse=new Array(r.dims);for(let o=0;o<t.dims;o++)if(1<<o&t.ellipsisMask){let i=Math.min(r.dims-(t.dims-o)+1+t.numAddAxisAfterEllipsis,r.dims);for(;n<i;n++)r.begin[n]=0,r.end[n]=0,r.strides[n]=1,r.beginMask|=1<<n,r.endMask|=1<<n,r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(-1),r.inputShapeGatherIndicesSparse[n]=o}else if(1<<o&t.newAxisMask)r.finalShapeGatherIndices.push(Uie),r.finalShapeGatherIndicesSparse.push(-1);else{if(n===r.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${r.dims} dims, ${r.begin.length}.`);t.begin!=null&&(r.begin[n]=t.begin[o]),t.end!=null&&(r.end[n]=t.end[o]),r.strides[n]=t.strides[o],t.beginMask&1<<o&&(r.beginMask|=1<<n),t.endMask&1<<o&&(r.endMask|=1<<n),t.shrinkAxisMask&1<<o?(r.finalShapeGatherIndices.push(oOt),r.finalShapeGatherIndicesSparse.push(-1),r.shrinkAxisMask|=1<<n):(r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(o)),r.inputShapeGatherIndicesSparse[n]=o,n++}}function iMe(t,r,n,o,i,s){if(i[r])return n>0?s[r]:s[r+1&1];{let a=t<0?o+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}var Uie,oOt,qU=D(()=>{"use strict";Ze();Uie=-2,oOt=-1});var Gie,mMe=D(()=>{"use strict";Gie="4.19.0"});var RI,Wie=D(()=>{"use strict";jU();PU();LU();BU();$U();zU();C3();RI=class{static sgd(r){return new b0(r)}static momentum(r,n,o=!1){return new sw(r,n,o)}static rmsprop(r,n=.9,o=0,i=null,s=!1){return new aw(r,n,o,i,s)}static adam(r=.001,n=.9,o=.999,i=null){return new ow(r,n,o,i)}static adadelta(r=.001,n=.95,o=null){return new rw(r,n,o)}static adamax(r=.002,n=.9,o=.999,i=null,s=0){return new iw(r,n,o,i,s)}static adagrad(r,n=.1){return new nw(r,n)}}});var Kd,hMe=D(()=>{"use strict";Wie();Kd=RI});function jI(){return new Promise(t=>pOt(()=>t()))}var pOt,gMe=D(()=>{"use strict";pOt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t()});function mOt(t,r){let n=t[0].length;t.forEach((i,s)=>{de(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),de(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let o=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)de(a===r||i[a]===o[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${o}) along the non-concatenated axis ${s}.`)})}function hOt(t,r){let n=t[0].slice();for(let o=1;o<t.length;o++)n[r]+=t[o][r];return n}var yMe=D(()=>{"use strict";Ze();});var bMe=D(()=>{"use strict";});function gOt(t,r,n){let o=new Array;if(n==null&&r==null)return o;if(r==null)for(;o.length<t+n.length;)o.push(-1);else o=r.slice();if(n==null)return o;if(t+n.length!==o.length)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${o.length}`);for(let i=1;i<n.length;++i){let s=n[i],a=o[o.length-n.length+i],l=o[a];if(s>=0)if(l>=0){if(l!==s)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${l}`)}else o[a]=s}return o}function yOt(t){let r={FIRST_DIM_SIZE:wx.FIRST_DIM_SIZE,VALUE_ROWIDS:wx.VALUE_ROWIDS,ROW_LENGTHS:wx.ROW_LENGTHS,ROW_SPLITS:wx.ROW_SPLITS,ROW_LIMITS:wx.ROW_LIMITS,ROW_STARTS:wx.ROW_STARTS},n=[];for(let o of t)if(o in r)n.push(r[o]);else break;return n}function bOt(t){return t.length===0?0:t[0]===wx.FIRST_DIM_SIZE?t.length-1:t.length}function xOt(t,r){if(t==null||r==null)return;let n=t.length,o=r.length;if(n>=o)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${r}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${o})`);for(let i=0;i<Math.min(n,o-1);++i){let s=t[i],a=r[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${r} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}var wx,xMe=D(()=>{"use strict";wx=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(wx||{})});function vOt(t){return t<=HU?t:Ik(t,Math.floor(Math.sqrt(t)))}var HU,qie=D(()=>{"use strict";Ze();HU=30});function wOt(t,r,n){let o=n*(typeof t=="number"?t:t[0]),i=r*(typeof t=="number"?t:t[1]);return[o,i]}var vMe=D(()=>{"use strict";});function _Ot(t,r,n,o=!0){let i=[];if(o)i=i.concat(r.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);let s=r.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/r[a],r[a]]);i=i.concat(t.slice(s+1))}return i}function SOt(t,r,n=!0){let o=[];if(n){o.push(r);for(let i=r+1;i<t;++i)i<=2*r?(o.push(i),o.push(i-(r+1))):o.push(i)}else{let i=[],s=[];for(let a=1;a<t;++a)a>=r*2+1||a%2===1?s.push(a):i.push(a);o.push(...i),o.push(0),o.push(...s)}return o}function COt(t,r,n,o=!0){let i=[];o?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=r.length?o?i.push(r[s-1]*t[s]):i.push(t[s]/r[s-1]):i.push(t[s]);return i}function EOt(t,r){let n=[0];for(let o=0;o<r;++o)n.push(t[o][0]);return n}function TOt(t,r,n){let o=t.slice(0,1);for(let i=0;i<n;++i)o.push(t[i+1]-r[i][0]-r[i][1]);return o}var wMe=D(()=>{"use strict";});var Hie,Yie,Xie=D(()=>{"use strict";Hie=1.7580993408473768,Yie=1.0507009873554805});var AOt,kOt,IOt,DOt,NOt,FOt,_Me=D(()=>{"use strict";AOt=.3275911,kOt=.254829592,IOt=-.284496736,DOt=1.421413741,NOt=-1.453152027,FOt=1.061405429});function OOt(t,r){if(t.length!==r.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${r.length}.`);let n=new Float32Array(t.length*2);for(let o=0;o<n.length;o+=2)n[o]=t[o/2],n[o+1]=r[o/2];return n}function MOt(t){let r=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=t[o],n[o/2]=t[o+1];return{real:r,imag:n}}function ROt(t){let r=Math.ceil(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function jOt(t){let r=Math.floor(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function POt(t,r){let n=t[r*2],o=t[r*2+1];return{real:n,imag:o}}function LOt(t,r,n,o){t[o*2]=r,t[o*2+1]=n}function BOt(t,r){let n=new Float32Array(t/2),o=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){let s=(r?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),o[i]=Math.sin(s)}return{real:n,imag:o}}function $Ot(t,r,n){let o=(n?2:-2)*Math.PI*(t/r),i=Math.cos(o),s=Math.sin(o);return{real:i,imag:s}}var SMe=D(()=>{"use strict";});function UOt(t,r){t=t.replace(/\s/g,"");let n=(t.length-t.replace(zOt,"").length)/Kie.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Kie}").`);let[o,i]=t.split(Kie);de(o.indexOf(EMe)===-1,()=>`The ellipsis notation ("${EMe}") is not supported yet.`);let s=o.split(CMe),a=s.length;if(r!==a)throw new Error(`Expected ${a} input tensors, received ${r}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let l=[];for(let p=0;p<i.length;++p){let m=i[p];if(!s.some(h=>h.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);l.indexOf(m)===-1&&l.push(m)}for(let p=0;p<o.length;++p){let m=o[p];l.indexOf(m)===-1&&m!==CMe&&l.push(m)}let u=new Array(s.length);for(let p=0;p<a;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let m=0;m<s[p].length;++m)u[p].push(l.indexOf(s[p][m]))}let c=l.length,f=i.length,d=[];for(let p=f;p<c;++p)d.push(p);return{allDims:l,summedDims:d,idDims:u}}function VOt(t,r){let n=new Array(t);n.fill(-1);for(let i=0;i<r.length;++i)n[r[i]]=i;let o=[];for(let i=0;i<t;++i)n[i]===-1&&o.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:o}}function GOt(t,r,n){let o=new Array(t);for(let i=0;i<n.length;++i){let s=n[i].shape;for(let a=0;a<r[i].length;++a)o[r[i][a]]===void 0?o[r[i][a]]=s[a]:de(o[r[i][a]]===s[a],()=>`Expected dimension ${o[r[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function WOt(t,r){let n=t,o=[],i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)o.push([]);let s=[];for(let a=0;a<n.length;++a){let l=n[a],u=HOt(r,l);for(let c of u)s.indexOf(c)===-1&&(o[a].push(c),s.push(c))}return{path:n,steps:o}}function qOt(t){return t.every((r,n)=>r===n)}function HOt(t,r){let n=[];for(let o=0;o<t.length;++o)(t[o].length===0||t[o].indexOf(r)!==-1||r===-1)&&n.push(o);return n}var Kie,zOt,CMe,EMe,TMe=D(()=>{"use strict";Bs();Kie="->",zOt=/->/g,CMe=",",EMe="..."});function YOt(t,r,n=0){let o=[];if(typeof r=="number")de(t.shape[n]%r===0,()=>"Number of splits must evenly divide the axis."),o=new Array(r).fill(t.shape[n]/r);else{let i=r.reduce((a,l)=>(l===-1&&(a+=1),a),0);de(i<=1,()=>"There should be only one negative value in split array.");let s=r.indexOf(-1);if(s!==-1){let a=r.reduce((l,u)=>u>0?l+u:l);r[s]=t.shape[n]-a}de(t.shape[n]===r.reduce((a,l)=>a+l),()=>"The sum of sizes must match the size of the axis dimension."),o=r}return o}var AMe=D(()=>{"use strict";Ze()});function XOt(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function KOt(t,r){return`indices(${t}, 0) is invalid: ${r} < 0`}function ZOt(t,r,n){return`indices(${t}, 0) is invalid: ${r} >= ${n}`}var kMe=D(()=>{"use strict";});function QOt(t,r){return`only one output dimension may be -1, not both ${t} and ${r}`}function JOt(t,r){return`size ${t} must be non-negative, not ${r}`}function eMt(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function tMt(t,r){let n=rn(t),o=rn(r);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${o}. inputShape=${t} outputShape= ${r}`}function rMt(t,r){let n=rn(t),o=rn(r);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${o}. inputShape=${t} outputShape=${r}`}var IMe=D(()=>{"use strict";Ze();});function nMt(){return"segment ids must be >= 0"}function oMt(){return"segment ids are not increasing"}function iMt(t,r){return`Segment id ${t} out of range [0, ${r}), possibly because segmentIds input is not sorted.`}function sMt(t,r,n){return`Bad: indices[${t}] == ${r} out of range [0, ${n})`}var DMe=D(()=>{"use strict";});var Zie={};cn(Zie,{collectGatherOpShapeInfo:()=>uMt,computeOutShape:()=>lMt,segOpComputeOptimalWindowSize:()=>aMt});function aMt(t,r){let n=!1,o;for(t<=HU?(o=t,n=!0):o=Ik(t,Math.floor(Math.sqrt(t)));!n;)o>r||o===t?n=!0:o=Ik(t,o+1);return o}function lMt(t,r,n){let o=[],i=t.length;for(let s=0;s<i;s++)s!==r?o.push(t[s]):o.push(n);return o}function uMt(t,r,n,o){let i=r.shape.length,s=t.shape.length;if(o!==0&&(o<-i||o>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${o}`);if(o<0&&(o+=i),o>s)throw new Error(`batchDims (${o}) must be less than rank(x) (
    ${s}).`);if(n<o)throw new Error(`batchDims (${o}) must be less than or equal to axis (${n}).`);for(let d=0;d<o;++d)if(t.shape[d]!==r.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${r.shape[d]}.`);let a=t.shape[n],l=[],u=1,c=1,f=1;for(let d=0;d<o;++d)l.push(t.shape[d]),u*=t.shape[d];for(let d=o;d<n;d++)l.push(t.shape[d]),c*=t.shape[d];for(let d=o;d<i;d++)l.push(r.shape[d]);for(let d=n+1;d<s;d++)l.push(t.shape[d]),f*=t.shape[d];return{batchSize:u,sliceSize:f,outerSize:c,dimSize:a,outputShape:l}}var NMe=D(()=>{"use strict";Ze();qie();});var ce={};cn(ce,{ERF_A1:()=>kOt,ERF_A2:()=>IOt,ERF_A3:()=>DOt,ERF_A4:()=>NOt,ERF_A5:()=>FOt,ERF_P:()=>AOt,PARALLELIZE_THRESHOLD:()=>HU,RowPartitionType:()=>wx,SELU_SCALE:()=>Yie,SELU_SCALEALPHA:()=>Hie,applyActivation:()=>FC,assertAndGetBroadcastShape:()=>Rr,assertAxesAreInnerMostDims:()=>Kkt,assertParamsConsistent:()=>mOt,assignToTypedArray:()=>LOt,axesAreInnerMostDims:()=>Roe,calculateShapes:()=>WNe,checkEinsumDimSizes:()=>GOt,checkPadOnDimRoundingMode:()=>ho,combineLocations:()=>oDe,combineRaggedTensorToTensorShapes:()=>gOt,complexWithEvenIndex:()=>ROt,complexWithOddIndex:()=>jOt,computeConv2DInfo:()=>yC,computeConv3DInfo:()=>IIe,computeDefaultPad:()=>Soe,computeDilation2DInfo:()=>XAt,computeOptimalWindowSize:()=>vOt,computeOutAndReduceShapes:()=>joe,computeOutShape:()=>hOt,computePool2DInfo:()=>_oe,computePool3DInfo:()=>KAt,convertConv2DDataFormat:()=>DIe,decodeEinsumEquation:()=>UOt,eitherStridesOrDilationsAreOne:()=>ga,expandShapeToKeepDim:()=>Hd,exponent:()=>$Ot,exponents:()=>BOt,fromStringArrayToUint8:()=>fMt,fromUint8ToStringArray:()=>cMt,getAxesPermutation:()=>Poe,getBroadcastDims:()=>eDe,getComplexWithIndex:()=>POt,getEinsumComputePath:()=>WOt,getEinsumPermutation:()=>VOt,getFusedBiasGradient:()=>NC,getFusedDyActivation:()=>DC,getImageCenter:()=>wOt,getInnerMostAxes:()=>Zkt,getPermuted:()=>SOt,getRaggedRank:()=>bOt,getReductionAxes:()=>no,getReshaped:()=>_Ot,getReshapedPermuted:()=>COt,getRowPartitionTypesHelper:()=>yOt,getSliceBeginCoords:()=>EOt,getSliceSize:()=>TOt,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>XOt,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>KOt,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>ZOt,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>eMt,getSparseReshapeInputOutputMismatchErrorMessage:()=>rMt,getSparseReshapeInputOutputMultipleErrorMessage:()=>tMt,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>QOt,getSparseReshapeNegativeOutputDimErrorMessage:()=>JOt,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>sMt,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>nMt,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>oMt,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>iMt,getUndoAxesPermutation:()=>t3,isIdentityPermutation:()=>qOt,log:()=>ATt,mergeRealAndImagArrays:()=>OOt,prepareAndValidate:()=>oMe,prepareSplitSize:()=>YOt,segment_util:()=>Zie,shouldFuse:()=>OC,slice_util:()=>Es,splitRealAndImagArrays:()=>MOt,stridesOrDilationsArePositive:()=>s0,tupleValuesAreOne:()=>Vf,upcastType:()=>Bi,validateDefaultValueShape:()=>xOt,validateInput:()=>II,validateUpdateShape:()=>mie,warn:()=>n0});function cMt(t){try{return t.map(r=>zk(r))}catch(r){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${r}`)}}function fMt(t){return t.map(r=>A1(r))}var FMe=D(()=>{"use strict";Ze();gm();Ao();yMe();Ss();MI();bMe();xMe();qie();qU();Vk();vMe();wMe();zie();x3();Xie();MI();_Me();Mz();SMe();TMe();AMe();kMe();IMe();DMe();NMe();});var va={};cn(va,{nonMaxSuppressionV3Impl:()=>IU,nonMaxSuppressionV4Impl:()=>DU,nonMaxSuppressionV5Impl:()=>NU,whereImpl:()=>_U});var OMe=D(()=>{"use strict";_3();yie();});var Qie=D(()=>{"use strict";KOe();JOe();Ao();nMe();zie();x3();qU();RU();ri();pNe();Ze();mMe();jU();PU();LU();BU();$U();tw();Wie();zU();C3();Je();Vk();Dr();wm();hMe();Fc();BR();gx();ma();gMe();FMe();Qne();OMe();Tne();Ee();});var Fo={};cn(Fo,{Abs:()=>mb,Acos:()=>fg,Acosh:()=>dg,AdadeltaOptimizer:()=>rw,AdagradOptimizer:()=>nw,AdamOptimizer:()=>ow,AdamaxOptimizer:()=>iw,Add:()=>zd,AddN:()=>hb,All:()=>eS,Any:()=>tS,ArgMax:()=>gb,ArgMin:()=>yb,Asin:()=>pg,Asinh:()=>mg,Atan:()=>hg,Atan2:()=>yg,Atanh:()=>gg,AvgPool:()=>bb,AvgPool3D:()=>xb,AvgPool3DGrad:()=>nS,AvgPoolGrad:()=>rS,BatchMatMul:()=>vb,BatchToSpaceND:()=>wb,Bincount:()=>oS,BitwiseAnd:()=>p1,BroadcastArgs:()=>iS,BroadcastTo:()=>Rne,Cast:()=>sm,Ceil:()=>bg,ClipByValue:()=>xg,Complex:()=>sS,ComplexAbs:()=>_b,Concat:()=>Sb,Conv2D:()=>Cb,Conv2DBackpropFilter:()=>aS,Conv2DBackpropInput:()=>Eb,Conv3D:()=>Tb,Conv3DBackpropFilterV2:()=>lS,Conv3DBackpropInputV2:()=>uS,Cos:()=>vg,Cosh:()=>wg,CropAndResize:()=>fS,Cumprod:()=>cS,Cumsum:()=>Ab,DataStorage:()=>f1,DenseBincount:()=>dS,DepthToSpace:()=>pS,DepthwiseConv2dNative:()=>kb,DepthwiseConv2dNativeBackpropFilter:()=>mS,DepthwiseConv2dNativeBackpropInput:()=>hS,Diag:()=>gS,Dilation2D:()=>Ib,Dilation2DBackpropFilter:()=>Ok,Dilation2DBackpropInput:()=>Fk,Draw:()=>Mk,ENV:()=>Fz,Einsum:()=>yS,Elu:()=>Sg,EluGrad:()=>bS,Environment:()=>Nk,Equal:()=>m1,Erf:()=>Cg,Exp:()=>Eg,ExpandDims:()=>Db,Expm1:()=>Tg,FFT:()=>xS,Fill:()=>vS,FlipLeftRight:()=>wS,Floor:()=>Ag,FloorDiv:()=>kg,FromPixels:()=>Rk,FusedBatchNorm:()=>Nb,FusedConv2D:()=>C1,FusedDepthwiseConv2D:()=>E1,GatherNd:()=>_S,GatherV2:()=>Fb,Greater:()=>h1,GreaterEqual:()=>Ig,IFFT:()=>SS,Identity:()=>am,Imag:()=>CS,IsFinite:()=>Dg,IsInf:()=>Ng,IsNan:()=>Fg,KernelBackend:()=>lg,LRN:()=>Mb,LRNGrad:()=>TS,LeakyRelu:()=>Ob,Less:()=>g1,LessEqual:()=>y1,LinSpace:()=>ES,Log:()=>Og,Log1p:()=>Mg,LogSoftmax:()=>jne,LogicalAnd:()=>b1,LogicalNot:()=>x1,LogicalOr:()=>v1,LogicalXor:()=>_Tt,LowerBound:()=>STt,MatrixBandPart:()=>CTt,Max:()=>Rb,MaxPool:()=>jb,MaxPool3D:()=>Pb,MaxPool3DGrad:()=>kS,MaxPoolGrad:()=>AS,MaxPoolWithArgmax:()=>IS,Maximum:()=>Rg,Mean:()=>Lb,Min:()=>Bb,Minimum:()=>jg,MirrorPad:()=>$b,Mod:()=>Pg,MomentumOptimizer:()=>sw,Multinomial:()=>DS,Multiply:()=>Lg,Neg:()=>zb,NonMaxSuppressionV3:()=>NS,NonMaxSuppressionV4:()=>FS,NonMaxSuppressionV5:()=>OS,NotEqual:()=>w1,OP_SCOPE_SUFFIX:()=>Jne,OneHot:()=>Vb,OnesLike:()=>Ub,Optimizer:()=>xa,OptimizerConstructors:()=>RI,Pack:()=>Gb,PadV2:()=>Wb,Pool:()=>ETt,Pow:()=>Bg,Prelu:()=>qb,Prod:()=>Hb,RMSPropOptimizer:()=>aw,RaggedGather:()=>MS,RaggedRange:()=>RS,RaggedTensorToTensor:()=>jS,Range:()=>PS,Rank:()=>qne,Real:()=>LS,RealDiv:()=>_g,Reciprocal:()=>$g,Reduction:()=>Ei,Relu:()=>zg,Relu6:()=>Ug,Reshape:()=>Yb,ResizeBilinear:()=>Kb,ResizeBilinearGrad:()=>$S,ResizeNearestNeighbor:()=>Xb,ResizeNearestNeighborGrad:()=>BS,Reverse:()=>Zb,RotateWithOffset:()=>nC,Round:()=>Vg,Rsqrt:()=>Gg,SGDOptimizer:()=>b0,ScatterNd:()=>zS,SearchSorted:()=>VS,Select:()=>Qb,Selu:()=>Wg,Sigmoid:()=>Xg,Sign:()=>Yg,Sin:()=>qg,Sinh:()=>Hg,Slice:()=>Jb,Softmax:()=>nx,Softplus:()=>Kg,SpaceToBatchND:()=>tx,SparseFillEmptyRows:()=>GS,SparseReshape:()=>WS,SparseSegmentMean:()=>qS,SparseSegmentSum:()=>HS,SparseToDense:()=>YS,SplitV:()=>rx,Sqrt:()=>Zg,Square:()=>XS,SquaredDifference:()=>Qg,StaticRegexReplace:()=>_1,Step:()=>r0,StridedSlice:()=>KS,StringNGrams:()=>ZS,StringSplit:()=>QS,StringToHashBucketFast:()=>JS,Sub:()=>Jg,Sum:()=>ex,Tan:()=>e0,Tanh:()=>t0,Tensor:()=>Jr,TensorBuffer:()=>wn,TensorScatterUpdate:()=>US,Tile:()=>lm,TopK:()=>eC,Transform:()=>tC,Transpose:()=>um,Unique:()=>rC,Unpack:()=>ox,UnsortedSegmentSum:()=>ix,UpperBound:()=>TTt,Variable:()=>o0,ZerosLike:()=>sx,_FusedMatMul:()=>S1,abs:()=>To,acos:()=>Qz,acosh:()=>Jz,add:()=>Ke,addN:()=>SIe,all:()=>Qk,any:()=>gC,argMax:()=>Wd,argMin:()=>e8,asin:()=>t8,asinh:()=>r8,atan:()=>n8,atan2:()=>o8,atanh:()=>i8,avgPool:()=>M1,avgPool3d:()=>a8,backend:()=>HR,backend_util:()=>ce,basicLSTMCell:()=>FIe,batchNorm:()=>a0,batchNorm2d:()=>l8,batchNorm3d:()=>u8,batchNorm4d:()=>c8,batchToSpaceND:()=>R1,bincount:()=>f8,bitwiseAnd:()=>BIe,booleanMaskAsync:()=>xNt,broadcastArgs:()=>zIe,broadcastTo:()=>l0,broadcast_util:()=>Gu,browser:()=>WU,buffer:()=>Qt,cast:()=>rt,ceil:()=>p8,clipByValue:()=>zs,clone:()=>zu,complex:()=>$u,concat:()=>Nn,concat1d:()=>m8,concat2d:()=>h8,concat3d:()=>g8,concat4d:()=>y8,conv1d:()=>nI,conv2d:()=>Vu,conv2dTranspose:()=>iI,conv3d:()=>x8,conv3dTranspose:()=>w8,copyRegisteredKernels:()=>DTt,cos:()=>j1,cosh:()=>sI,cosineWindow:()=>v3,cumprod:()=>xC,cumsum:()=>aI,customGrad:()=>Cl,denseBincount:()=>QR,deprecationWarn:()=>Wke,depthToSpace:()=>E8,depthwiseConv2d:()=>u0,device_util:()=>ax,diag:()=>QIe,dilation2d:()=>T8,disableDeprecationWarnings:()=>rAt,dispose:()=>Cr,disposeVariables:()=>nAt,div:()=>Ct,divNoNan:()=>A8,dot:()=>k8,dropout:()=>xie,einsum:()=>P1,elu:()=>c0,enableDebugMode:()=>tAt,enableProdMode:()=>eAt,enclosingPowerOfTwo:()=>vie,engine:()=>Uf,ensureShape:()=>tDe,env:()=>Fe,equal:()=>Sl,erf:()=>lI,euclideanNorm:()=>N8,exp:()=>yi,expandDims:()=>Ci,expm1:()=>F8,eye:()=>vC,fft:()=>K1,fill:()=>qd,findBackend:()=>lAt,findBackendFactory:()=>uAt,floor:()=>d0,floorDiv:()=>Zk,fused:()=>ew,gather:()=>p0,gatherND:()=>INt,gather_util:()=>$ie,getBackend:()=>toe,getGradient:()=>Rz,getKernel:()=>oC,getKernelsForBackend:()=>LR,grad:()=>dDe,grads:()=>pDe,greater:()=>ni,greaterEqual:()=>Jl,ifft:()=>xx,imag:()=>B1,image:()=>qu,inTopKAsync:()=>FNt,io:()=>x0,irfft:()=>TI,isFinite:()=>M8,isInf:()=>R8,isNaN:()=>j8,keep:()=>_s,kernel_impls:()=>va,leakyRelu:()=>$1,less:()=>hx,lessEqual:()=>Oc,linalg:()=>kie,linspace:()=>cDe,localResponseNormalization:()=>L8,log:()=>Vs,log1p:()=>U1,logSigmoid:()=>$8,logSoftmax:()=>pI,logSumExp:()=>V1,logicalAnd:()=>za,logicalNot:()=>G1,logicalOr:()=>mI,logicalXor:()=>V8,losses:()=>MFt,lowerBound:()=>bDe,matMul:()=>zr,math:()=>Bie,max:()=>Us,maxPool:()=>W1,maxPool3d:()=>H8,maxPoolWithArgmax:()=>wDe,maximum:()=>Wu,mean:()=>yo,memory:()=>Wk,meshgrid:()=>SDe,min:()=>px,minimum:()=>Hf,mirrorPad:()=>Y8,mod:()=>X8,moments:()=>CC,movingAverage:()=>_Nt,mul:()=>we,multiRNNCell:()=>TDe,multinomial:()=>kDe,neg:()=>Xr,nextFrame:()=>jI,norm:()=>mx,notEqual:()=>xm,oneHot:()=>h0,ones:()=>$i,onesLike:()=>Cs,op:()=>se,outerProduct:()=>NDe,pad:()=>eu,pad1d:()=>ODe,pad2d:()=>RDe,pad3d:()=>PDe,pad4d:()=>BDe,pool:()=>Q8,pow:()=>$a,prelu:()=>Y1,print:()=>Kz,prod:()=>eU,profile:()=>oAt,raggedGather:()=>zDe,raggedRange:()=>VDe,raggedTensorToTensor:()=>WDe,rand:()=>HDe,randomGamma:()=>mNe,randomNormal:()=>AC,randomStandardNormal:()=>gNe,randomUniform:()=>Mc,randomUniformInt:()=>bNe,range:()=>g0,ready:()=>sAt,real:()=>yx,reciprocal:()=>aU,registerBackend:()=>qR,registerGradient:()=>Pne,registerKernel:()=>Pk,relu:()=>ba,relu6:()=>yI,removeBackend:()=>aAt,reshape:()=>Se,reverse:()=>us,reverse1d:()=>wNe,reverse2d:()=>SNe,reverse3d:()=>ENe,reverse4d:()=>ANe,rfft:()=>Z1,round:()=>bI,rsqrt:()=>xI,scalar:()=>Mt,scatterND:()=>CNt,scatter_util:()=>b3,searchSorted:()=>l3,selu:()=>vI,separableConv2d:()=>wI,serialization:()=>tt,setBackend:()=>qke,setPlatform:()=>cAt,setdiff1dAsync:()=>INe,sigmoid:()=>_l,sign:()=>uU,signal:()=>OFt,sin:()=>_I,sinh:()=>SI,slice:()=>Br,slice1d:()=>CI,slice2d:()=>g3,slice3d:()=>EI,slice4d:()=>kC,slice_util:()=>Es,softmax:()=>X1,softplus:()=>bm,spaceToBatchND:()=>H1,sparse:()=>RFt,sparseToDense:()=>ANt,spectral:()=>FFt,split:()=>cs,sqrt:()=>Xn,square:()=>Gr,squaredDifference:()=>AI,squeeze:()=>Rc,stack:()=>Qi,step:()=>Yd,stridedSlice:()=>mU,string:()=>jFt,sub:()=>wt,sum:()=>kt,sumOutType:()=>k1,tan:()=>hU,tanh:()=>hm,tensor:()=>La,tensor1d:()=>No,tensor2d:()=>vm,tensor3d:()=>yU,tensor4d:()=>BNe,tensor5d:()=>zNe,tensor6d:()=>VNe,tensorScatterUpdate:()=>qNe,tensor_util:()=>Vz,test_util:()=>oie,tidy:()=>Pe,tile:()=>ya,time:()=>iAt,topk:()=>bU,train:()=>Kd,transpose:()=>Ur,truncatedNormal:()=>DI,unique:()=>xU,unregisterGradient:()=>ITt,unregisterKernel:()=>kTt,unsortedSegmentSum:()=>NI,unstack:()=>Ua,upcastType:()=>Bi,upperBound:()=>XNe,util:()=>H,valueAndGrad:()=>mDe,valueAndGrads:()=>hDe,variable:()=>wU,variableGrads:()=>s3,version_core:()=>Gie,where:()=>go,whereAsync:()=>SU,zeros:()=>bo,zerosLike:()=>ir});var re=D(()=>{"use strict";vIe();ROe();Qie();MOe()});var MMe=D(()=>{"use strict";Dr();Je();Ce().prototype.abs=function(){return this.throwIfDisposed(),To(this)}});var RMe=D(()=>{"use strict";Dr();Je();Ce().prototype.acos=function(){return this.throwIfDisposed(),Qz(this)}});var jMe=D(()=>{"use strict";Dr();Je();Ce().prototype.acosh=function(){return this.throwIfDisposed(),Jz(this)}});var PMe=D(()=>{"use strict";$o();Je();Ce().prototype.add=function(t){return this.throwIfDisposed(),Ke(this,t)}});var LMe=D(()=>{"use strict";goe();Je();Ce().prototype.all=function(t,r){return this.throwIfDisposed(),Qk(this,t,r)}});var BMe=D(()=>{"use strict";yoe();Je();Ce().prototype.any=function(t,r){return this.throwIfDisposed(),gC(this,t,r)}});var $Me=D(()=>{"use strict";boe();Je();Ce().prototype.argMax=function(t){return this.throwIfDisposed(),Wd(this,t)}});var zMe=D(()=>{"use strict";xoe();Je();Ce().prototype.argMin=function(t){return this.throwIfDisposed(),e8(this,t)}});var UMe=D(()=>{"use strict";Ht();Je();Ze();Ce().prototype.asScalar=function(){return this.throwIfDisposed(),de(this.size===1,()=>"The array must have only 1 element."),Se(this,[])}});var VMe=D(()=>{"use strict";Dr();Je();Ce().prototype.asType=function(t){return this.throwIfDisposed(),rt(this,t)}});var GMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as1D=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var WMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as2D=function(t,r){return this.throwIfDisposed(),Se(this,[t,r])}});var qMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as3D=function(t,r,n){return this.throwIfDisposed(),Se(this,[t,r,n])}});var HMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as4D=function(t,r,n,o){return this.throwIfDisposed(),Se(this,[t,r,n,o])}});var YMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as5D=function(t,r,n,o,i){return this.throwIfDisposed(),Se(this,[t,r,n,o,i])}});var XMe=D(()=>{"use strict";Dr();Je();Ce().prototype.asin=function(){return this.throwIfDisposed(),t8(this)}});var KMe=D(()=>{"use strict";Dr();Je();Ce().prototype.asinh=function(){return this.throwIfDisposed(),r8(this)}});var ZMe=D(()=>{"use strict";Dr();Je();Ce().prototype.atan=function(){return this.throwIfDisposed(),n8(this)}});var QMe=D(()=>{"use strict";voe();Je();Ce().prototype.atan2=function(t){return this.throwIfDisposed(),o8(this,t)}});var JMe=D(()=>{"use strict";Dr();Je();Ce().prototype.atanh=function(){return this.throwIfDisposed(),i8(this)}});var eRe=D(()=>{"use strict";s8();Je();Ce().prototype.avgPool=function(t,r,n,o){return this.throwIfDisposed(),M1(this,t,r,n,o)}});var tRe=D(()=>{"use strict";ZR();Je();Ce().prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),R1(this,t,r)}});var rRe=D(()=>{"use strict";tI();Je();Ce().prototype.batchNorm=function(t,r,n,o,i){return this.throwIfDisposed(),a0(this,t,r,n,o,i)}});var nRe=D(()=>{"use strict";d8();Je();Ce().prototype.broadcastTo=function(t){return this.throwIfDisposed(),l0(this,t)}});var oRe=D(()=>{"use strict";Dr();Je();Ce().prototype.cast=function(t){return this.throwIfDisposed(),rt(this,t)}});var iRe=D(()=>{"use strict";Dr();Je();Ce().prototype.ceil=function(){return this.throwIfDisposed(),p8(this)}});var sRe=D(()=>{"use strict";Dr();Je();Ce().prototype.clipByValue=function(t,r){return this.throwIfDisposed(),zs(this,t,r)}});var aRe=D(()=>{"use strict";Wf();Je();Ce().prototype.concat=function(t,r){return this.throwIfDisposed(),t instanceof Jr&&(t=[t]),Nn([this,...t],r)}});var lRe=D(()=>{"use strict";Toe();Je();Ce().prototype.conv1d=function(t,r,n,o,i,s){return this.throwIfDisposed(),nI(this,t,r,n,o,i,s)}});var uRe=D(()=>{"use strict";Aoe();Je();Ce().prototype.conv2dTranspose=function(t,r,n,o,i){return this.throwIfDisposed(),iI(this,t,r,n,o,i)}});var cRe=D(()=>{"use strict";bC();Je();Ce().prototype.conv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),Vu(this,t,r,n,o,i,s)}});var fRe=D(()=>{"use strict";Dr();Je();Ce().prototype.cos=function(){return this.throwIfDisposed(),j1(this)}});var dRe=D(()=>{"use strict";Dr();Je();Ce().prototype.cosh=function(){return this.throwIfDisposed(),sI(this)}});var pRe=D(()=>{"use strict";S8();Je();Ce().prototype.cumprod=function(t,r,n){return this.throwIfDisposed(),xC(this,t,r,n)}});var mRe=D(()=>{"use strict";C8();Je();Ce().prototype.cumsum=function(t,r,n){return this.throwIfDisposed(),aI(this,t,r,n)}});var hRe=D(()=>{"use strict";Doe();Je();Ce().prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),E8(this,t,r)}});var gRe=D(()=>{"use strict";JR();Je();Ce().prototype.depthwiseConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),u0(this,t,r,n,o,i,s)}});var yRe=D(()=>{"use strict";Noe();Je();Ce().prototype.dilation2d=function(t,r,n,o,i){return this.throwIfDisposed(),T8(this,t,r,n,o,i)}});var bRe=D(()=>{"use strict";Foe();Je();Ce().prototype.divNoNan=function(t){return this.throwIfDisposed(),A8(this,t)}});var xRe=D(()=>{"use strict";Yn();Je();Ce().prototype.div=function(t){return this.throwIfDisposed(),Ct(this,t)}});var vRe=D(()=>{"use strict";Ooe();Je();Ce().prototype.dot=function(t){return this.throwIfDisposed(),k8(this,t)}});var wRe=D(()=>{"use strict";I8();Je();Ce().prototype.elu=function(){return this.throwIfDisposed(),c0(this)}});var _Re=D(()=>{"use strict";e3();Je();Ce().prototype.equal=function(t){return this.throwIfDisposed(),Sl(this,t)}});var SRe=D(()=>{"use strict";Dr();Je();Ce().prototype.erf=function(){return this.throwIfDisposed(),lI(this)}});var CRe=D(()=>{"use strict";Boe();Je();Ce().prototype.euclideanNorm=function(t,r){return this.throwIfDisposed(),N8(this,t,r)}});var ERe=D(()=>{"use strict";Dr();Je();Ce().prototype.exp=function(){return this.throwIfDisposed(),yi(this)}});var TRe=D(()=>{"use strict";cI();Je();Ce().prototype.expandDims=function(t){return this.throwIfDisposed(),Ci(this,t)}});var ARe=D(()=>{"use strict";Dr();Je();Ce().prototype.expm1=function(){return this.throwIfDisposed(),F8(this)}});var kRe=D(()=>{"use strict";Dr();Je();Ce().prototype.fft=function(){return this.throwIfDisposed(),K1(this)}});var IRe=D(()=>{"use strict";Ht();Je();Ce().prototype.flatten=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var DRe=D(()=>{"use strict";Dr();Je();Ce().prototype.floor=function(){return this.throwIfDisposed(),d0(this)}});var NRe=D(()=>{"use strict";Zz();Je();Ce().prototype.floorDiv=function(t){return this.throwIfDisposed(),Zk(this,t)}});var FRe=D(()=>{"use strict";n3();Je();Ce().prototype.gather=function(t,r,n){return this.throwIfDisposed(),p0(this,t,r,n)}});var ORe=D(()=>{"use strict";wC();Je();Ce().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Jl(this,t)}});var MRe=D(()=>{"use strict";m0();Je();Ce().prototype.greater=function(t){return this.throwIfDisposed(),ni(this,t)}});var RRe=D(()=>{"use strict";Dr();Je();Ce().prototype.ifft=function(){return this.throwIfDisposed(),xx(this)}});var jRe=D(()=>{"use strict";Dr();Je();Ce().prototype.irfft=function(){return this.throwIfDisposed(),TI(this)}});var PRe=D(()=>{"use strict";Dr();Je();Ce().prototype.isFinite=function(){return this.throwIfDisposed(),M8(this)}});var LRe=D(()=>{"use strict";Dr();Je();Ce().prototype.isInf=function(){return this.throwIfDisposed(),R8(this)}});var BRe=D(()=>{"use strict";Dr();Je();Ce().prototype.isNaN=function(){return this.throwIfDisposed(),j8(this)}});var $Re=D(()=>{"use strict";P8();Je();Ce().prototype.leakyRelu=function(t){return this.throwIfDisposed(),$1(this,t)}});var zRe=D(()=>{"use strict";z1();Je();Ce().prototype.lessEqual=function(t){return this.throwIfDisposed(),Oc(this,t)}});var URe=D(()=>{"use strict";i3();Je();Ce().prototype.less=function(t){return this.throwIfDisposed(),hx(this,t)}});var VRe=D(()=>{"use strict";zoe();Je();Ce().prototype.localResponseNormalization=function(t,r,n,o){return this.throwIfDisposed(),L8(this,t,r,n,o)}});var GRe=D(()=>{"use strict";Dr();Je();Ce().prototype.logSigmoid=function(){return this.throwIfDisposed(),$8(this)}});var WRe=D(()=>{"use strict";Dr();Je();Ce().prototype.logSoftmax=function(t){return this.throwIfDisposed(),pI(this,t)}});var qRe=D(()=>{"use strict";z8();Je();Ce().prototype.logSumExp=function(t,r){return this.throwIfDisposed(),V1(this,t,r)}});var HRe=D(()=>{"use strict";Dr();Je();Ce().prototype.log=function(){return this.throwIfDisposed(),Vs(this)}});var YRe=D(()=>{"use strict";Dr();Je();Ce().prototype.log1p=function(){return this.throwIfDisposed(),U1(this)}});var XRe=D(()=>{"use strict";_C();Je();Ce().prototype.logicalAnd=function(t){return this.throwIfDisposed(),za(this,t)}});var KRe=D(()=>{"use strict";a3();Je();Ce().prototype.logicalNot=function(){return this.throwIfDisposed(),G1(this)}});var ZRe=D(()=>{"use strict";U8();Je();Ce().prototype.logicalOr=function(t){return this.throwIfDisposed(),mI(this,t)}});var QRe=D(()=>{"use strict";Goe();Je();Ce().prototype.logicalXor=function(t){return this.throwIfDisposed(),V8(this,t)}});var JRe=D(()=>{"use strict";mm();Je();Ce().prototype.matMul=function(t,r,n){return this.throwIfDisposed(),zr(this,t,r,n)}});var e3e=D(()=>{"use strict";q8();Je();Ce().prototype.maxPool=function(t,r,n,o){return this.throwIfDisposed(),W1(this,t,r,n,o)}});var t3e=D(()=>{"use strict";uI();Je();Ce().prototype.max=function(t,r){return this.throwIfDisposed(),Us(this,t,r)}});var r3e=D(()=>{"use strict";u3();Je();Ce().prototype.maximum=function(t){return this.throwIfDisposed(),Wu(this,t)}});var n3e=D(()=>{"use strict";c3();Je();Ce().prototype.mean=function(t,r){return this.throwIfDisposed(),yo(this,t,r)}});var o3e=D(()=>{"use strict";D8();Je();Ce().prototype.min=function(t,r){return this.throwIfDisposed(),px(this,t,r)}});var i3e=D(()=>{"use strict";f3();Je();Ce().prototype.minimum=function(t){return this.throwIfDisposed(),Hf(this,t)}});var s3e=D(()=>{"use strict";Woe();Je();Ce().prototype.mirrorPad=function(t,r){return this.throwIfDisposed(),Y8(this,t,r)}});var a3e=D(()=>{"use strict";qoe();Je();Ce().prototype.mod=function(t){return this.throwIfDisposed(),X8(this,t)}});var l3e=D(()=>{"use strict";cr();Je();Ce().prototype.mul=function(t){return this.throwIfDisposed(),we(this,t)}});var u3e=D(()=>{"use strict";Dr();Je();Ce().prototype.neg=function(){return this.throwIfDisposed(),Xr(this)}});var c3e=D(()=>{"use strict";Dr();Je();Ce().prototype.norm=function(t,r,n){return this.throwIfDisposed(),mx(this,t,r,n)}});var f3e=D(()=>{"use strict";K8();Je();Ce().prototype.notEqual=function(t){return this.throwIfDisposed(),xm(this,t)}});var d3e=D(()=>{"use strict";Z8();Je();Ce().prototype.oneHot=function(t,r=1,n=0){return this.throwIfDisposed(),h0(this,t,r,n)}});var p3e=D(()=>{"use strict";Dr();Je();Ce().prototype.onesLike=function(){return this.throwIfDisposed(),Cs(this)}});var m3e=D(()=>{"use strict";q1();Je();Ce().prototype.pad=function(t,r){return this.throwIfDisposed(),eu(this,t,r)}});var h3e=D(()=>{"use strict";Hoe();Je();Ce().prototype.pool=function(t,r,n,o,i,s){return this.throwIfDisposed(),Q8(this,t,r,n,o,i,s)}});var g3e=D(()=>{"use strict";L1();Je();Ce().prototype.pow=function(t){return this.throwIfDisposed(),$a(this,t)}});var y3e=D(()=>{"use strict";J8();Je();Ce().prototype.prelu=function(t){return this.throwIfDisposed(),Y1(this,t)}});var b3e=D(()=>{"use strict";Yoe();Je();Ce().prototype.prod=function(t,r){return this.throwIfDisposed(),eU(this,t,r)}});var x3e=D(()=>{"use strict";Dr();Je();Ce().prototype.reciprocal=function(){return this.throwIfDisposed(),aU(this)}});var v3e=D(()=>{"use strict";gI();Je();Ce().prototype.relu=function(){return this.throwIfDisposed(),ba(this)}});var w3e=D(()=>{"use strict";lU();Je();Ce().prototype.relu6=function(){return this.throwIfDisposed(),yI(this)}});var _3e=D(()=>{"use strict";Ht();Je();Ce().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Se(this,t.shape)}});var S3e=D(()=>{"use strict";Ht();Je();Ce().prototype.reshape=function(t){return this.throwIfDisposed(),Se(this,t)}});var C3e=D(()=>{"use strict";Tie();Je();Ce().prototype.resizeBilinear=function(t,r,n){return this.throwIfDisposed(),FU(this,t,r,n)}});var E3e=D(()=>{"use strict";Aie();Je();Ce().prototype.resizeNearestNeighbor=function(t,r,n){return this.throwIfDisposed(),OU(this,t,r,n)}});var T3e=D(()=>{"use strict";bx();Je();Ce().prototype.reverse=function(t){return this.throwIfDisposed(),us(this,t)}});var A3e=D(()=>{"use strict";Dr();Je();Ce().prototype.rfft=function(){return this.throwIfDisposed(),Z1(this)}});var k3e=D(()=>{"use strict";Dr();Je();Ce().prototype.round=function(){return this.throwIfDisposed(),bI(this)}});var I3e=D(()=>{"use strict";Dr();Je();Ce().prototype.rsqrt=function(){return this.throwIfDisposed(),xI(this)}});var D3e=D(()=>{"use strict";lie();Je();Ce().prototype.selu=function(){return this.throwIfDisposed(),vI(this)}});var N3e=D(()=>{"use strict";uie();Je();Ce().prototype.separableConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),wI(this,t,r,n,o,i,s)}});var F3e=D(()=>{"use strict";Dr();Je();Ce().prototype.sigmoid=function(){return this.throwIfDisposed(),_l(this)}});var O3e=D(()=>{"use strict";Dr();Je();Ce().prototype.sign=function(){return this.throwIfDisposed(),uU(this)}});var M3e=D(()=>{"use strict";Dr();Je();Ce().prototype.sin=function(){return this.throwIfDisposed(),_I(this)}});var R3e=D(()=>{"use strict";Dr();Je();Ce().prototype.sinh=function(){return this.throwIfDisposed(),SI(this)}});var j3e=D(()=>{"use strict";Dr();Je();Ce().prototype.slice=function(t,r){return this.throwIfDisposed(),Br(this,t,r)}});var P3e=D(()=>{"use strict";Dr();Je();Ce().prototype.softmax=function(t){return this.throwIfDisposed(),X1(this,t)}});var L3e=D(()=>{"use strict";Dr();Je();Ce().prototype.softplus=function(){return this.throwIfDisposed(),bm(this)}});var B3e=D(()=>{"use strict";d3();Je();Ce().prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),H1(this,t,r)}});var $3e=D(()=>{"use strict";IC();Je();Ce().prototype.split=function(t,r){return this.throwIfDisposed(),cs(this,t,r)}});var z3e=D(()=>{"use strict";Dr();Je();Ce().prototype.sqrt=function(){return this.throwIfDisposed(),Xn(this)}});var U3e=D(()=>{"use strict";Dr();Je();Ce().prototype.square=function(){return this.throwIfDisposed(),Gr(this)}});var V3e=D(()=>{"use strict";pU();Je();Ce().prototype.squaredDifference=function(t){return this.throwIfDisposed(),AI(this,t)}});var G3e=D(()=>{"use strict";y3();Je();Ce().prototype.squeeze=function(t){return this.throwIfDisposed(),Rc(this,t)}});var W3e=D(()=>{"use strict";Q1();Je();Ce().prototype.stack=function(t,r){this.throwIfDisposed();let n=t instanceof Jr?[this,t]:[this,...t];return Qi(n,r)}});var q3e=D(()=>{"use strict";Dr();Je();Ce().prototype.step=function(t){return this.throwIfDisposed(),Yd(this,t)}});var H3e=D(()=>{"use strict";Dr();Je();Ce().prototype.stridedSlice=function(t,r,n,o,i,s,a,l){return this.throwIfDisposed(),mU(this,t,r,n,o,i,s,a,l)}});var Y3e=D(()=>{"use strict";oo();Je();Ce().prototype.sub=function(t){return this.throwIfDisposed(),wt(this,t)}});var X3e=D(()=>{"use strict";Si();Je();Ce().prototype.sum=function(t,r){return this.throwIfDisposed(),kt(this,t,r)}});var K3e=D(()=>{"use strict";Dr();Je();Ce().prototype.tan=function(){return this.throwIfDisposed(),hU(this)}});var Z3e=D(()=>{"use strict";Dr();Je();Ce().prototype.tanh=function(){return this.throwIfDisposed(),hm(this)}});var Q3e=D(()=>{"use strict";fI();Je();Ce().prototype.tile=function(t){return this.throwIfDisposed(),ya(this,t)}});var J3e=D(()=>{"use strict";Dr();Je();Ce().prototype.toBool=function(){return this.throwIfDisposed(),rt(this,"bool")}});var eje=D(()=>{"use strict";Dr();Je();Ce().prototype.toFloat=function(){return this.throwIfDisposed(),rt(this,"float32")}});var tje=D(()=>{"use strict";Dr();Je();Ce().prototype.toInt=function(){return this.throwIfDisposed(),rt(this,"int32")}});var rje=D(()=>{"use strict";hie();Je();Ce().prototype.topk=function(t,r){return this.throwIfDisposed(),bU(this,t,r)}});var nje=D(()=>{"use strict";vx();Je();Ce().prototype.transpose=function(t){return this.throwIfDisposed(),Ur(this,t)}});var oje=D(()=>{"use strict";gie();Je();Ce().prototype.unique=function(t){return this.throwIfDisposed(),xU(this,t)}});var ije=D(()=>{"use strict";vU();Je();Ce().prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),NI(this,t,r)}});var sje=D(()=>{"use strict";FI();Je();Ce().prototype.unstack=function(t){return this.throwIfDisposed(),Ua(this,t)}});var aje=D(()=>{"use strict";qf();Je();Ce().prototype.where=function(t,r){return this.throwIfDisposed(),go(t,this,r)}});var lje=D(()=>{"use strict";Dr();Je();Ce().prototype.zerosLike=function(){return this.throwIfDisposed(),ir(this)}});var dMt={};var Jie=D(()=>{"use strict";MMe();RMe();jMe();PMe();LMe();BMe();$Me();zMe();UMe();VMe();GMe();WMe();qMe();HMe();YMe();XMe();KMe();ZMe();QMe();JMe();eRe();tRe();rRe();nRe();oRe();iRe();sRe();aRe();lRe();uRe();cRe();fRe();dRe();pRe();mRe();hRe();gRe();yRe();bRe();xRe();vRe();wRe();_Re();SRe();CRe();ERe();TRe();ARe();kRe();IRe();DRe();NRe();FRe();ORe();MRe();RRe();jRe();PRe();LRe();BRe();$Re();zRe();URe();VRe();GRe();WRe();qRe();HRe();YRe();XRe();KRe();ZRe();QRe();JRe();e3e();t3e();r3e();n3e();o3e();i3e();s3e();a3e();l3e();u3e();c3e();f3e();d3e();p3e();m3e();h3e();g3e();y3e();b3e();x3e();v3e();w3e();_3e();S3e();C3e();E3e();T3e();A3e();k3e();I3e();D3e();N3e();F3e();O3e();M3e();R3e();j3e();P3e();L3e();B3e();$3e();z3e();U3e();V3e();G3e();W3e();q3e();H3e();Y3e();X3e();K3e();Z3e();Q3e();J3e();eje();tje();rje();nje();oje();ije();sje();aje();lje();});function XU(t,r){return mMt.call(t,r)}function KU(t){if(Array.isArray(t)){for(var r=new Array(t.length),n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);var o=[];for(var i in t)XU(t,i)&&o.push(i);return o}function El(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function ZU(t){for(var r=0,n=t.length,o;r<n;){if(o=t.charCodeAt(r),o>=48&&o<=57){r++;continue}return!1}return!0}function v0(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function T3(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function YU(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(YU(t[r]))return!0}else if(typeof t=="object"){for(var o=KU(t),i=o.length,s=0;s<i;s++)if(YU(t[o[s]]))return!0}}return!1}function uje(t,r){var n=[t];for(var o in r){var i=typeof r[o]=="object"?JSON.stringify(r[o],null,2):r[o];typeof i<"u"&&n.push(o+": "+i)}return n.join(`
`)}var pMt,mMt,A3,k3=D(()=>{"use strict";pMt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])},t(r,n)};return function(r,n){t(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mMt=Object.prototype.hasOwnProperty;A3=function(t){pMt(r,t);function r(n,o,i,s,a){var l=this.constructor,u=t.call(this,uje(n,{name:o,index:i,operation:s,tree:a}))||this;return u.name=o,u.index=i,u.operation=s,u.tree=a,Object.setPrototypeOf(u,l.prototype),u.message=uje(n,{name:o,index:i,operation:s,tree:a}),u}return r}(Error)});var ese={};cn(ese,{JsonPatchError:()=>fs,_areEquals:()=>I3,applyOperation:()=>jC,applyPatch:()=>LI,applyReducer:()=>yMt,deepClone:()=>hMt,getValueByPointer:()=>QU,validate:()=>cje,validator:()=>JU});function QU(t,r){if(r=="")return t;var n={op:"_get",path:r};return jC(t,n),n.value}function jC(t,r,n,o,i,s){if(n===void 0&&(n=!1),o===void 0&&(o=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(r,0,t,r.path):JU(r,0)),r.path===""){var a={newDocument:t};if(r.op==="add")return a.newDocument=r.value,a;if(r.op==="replace")return a.newDocument=r.value,a.removed=t,a;if(r.op==="move"||r.op==="copy")return a.newDocument=QU(t,r.from),r.op==="move"&&(a.removed=t),a;if(r.op==="test"){if(a.test=I3(t,r.value),a.test===!1)throw new fs("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a.newDocument=t,a}else{if(r.op==="remove")return a.removed=t,a.newDocument=null,a;if(r.op==="_get")return r.value=t,a;if(n)throw new fs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,r,t);return a}}else{o||(t=El(t));var l=r.path||"",u=l.split("/"),c=t,f=1,d=u.length,p=void 0,m=void 0,h=void 0;for(typeof n=="function"?h=n:h=JU;;){if(m=u[f],m&&m.indexOf("~")!=-1&&(m=T3(m)),i&&(m=="__proto__"||m=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[m]===void 0?p=u.slice(0,f).join("/"):f==d-1&&(p=r.path),p!==void 0&&h(r,0,t,p)),f++,Array.isArray(c)){if(m==="-")m=c.length;else{if(n&&!ZU(m))throw new fs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,r,t);ZU(m)&&(m=~~m)}if(f>=d){if(n&&r.op==="add"&&m>c.length)throw new fs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,r,t);var a=gMt[r.op].call(r,c,m,t);if(a.test===!1)throw new fs("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}}else if(f>=d){var a=PI[r.op].call(r,c,m,t);if(a.test===!1)throw new fs("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}if(c=c[m],n&&f<d&&(!c||typeof c!="object"))throw new fs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,r,t)}}}function LI(t,r,n,o,i){if(o===void 0&&(o=!0),i===void 0&&(i=!0),n&&!Array.isArray(r))throw new fs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(t=El(t));for(var s=new Array(r.length),a=0,l=r.length;a<l;a++)s[a]=jC(t,r[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function yMt(t,r,n){var o=jC(t,r);if(o.test===!1)throw new fs("Test operation failed","TEST_OPERATION_FAILED",n,r,t);return o.newDocument}function JU(t,r,n,o){if(typeof t!="object"||t===null||Array.isArray(t))throw new fs("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,t,n);if(PI[t.op]){if(typeof t.path!="string")throw new fs("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new fs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new fs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new fs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&YU(t.value))throw new fs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=o.split("/").length;if(i!==s+1&&i!==s)throw new fs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==o)throw new fs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},l=cje([a],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new fs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,t,n)}}}else throw new fs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,n)}function cje(t,r,n){try{if(!Array.isArray(t))throw new fs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)LI(El(r),El(t),n||!0);else{n=n||JU;for(var o=0;o<t.length;o++)n(t[o],o,r,void 0)}}catch(i){if(i instanceof fs)return i;throw i}}function I3(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=Array.isArray(t),o=Array.isArray(r),i,s,a;if(n&&o){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!I3(t[i],r[i]))return!1;return!0}if(n!=o)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!r.hasOwnProperty(l[i]))return!1;for(i=s;i--!==0;)if(a=l[i],!I3(t[a],r[a]))return!1;return!0}return t!==t&&r!==r}var fs,hMt,PI,gMt,e7=D(()=>{"use strict";k3();fs=A3,hMt=El,PI={add:function(t,r,n){return t[r]=this.value,{newDocument:n}},remove:function(t,r,n){var o=t[r];return delete t[r],{newDocument:n,removed:o}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:function(t,r,n){var o=QU(n,this.path);o&&(o=El(o));var i=jC(n,{op:"remove",path:this.from}).removed;return jC(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:o}},copy:function(t,r,n){var o=QU(n,this.from);return jC(n,{op:"add",path:this.path,value:El(o)}),{newDocument:n}},test:function(t,r,n){return{newDocument:n,test:I3(t[r],this.value)}},_get:function(t,r,n){return this.value=t[r],{newDocument:n}}},gMt={add:function(t,r,n){return ZU(r)?t.splice(r,0,this.value):t[r]=this.value,{newDocument:n,index:r}},remove:function(t,r,n){var o=t.splice(r,1);return{newDocument:n,removed:o[0]}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:PI.move,copy:PI.copy,test:PI.test,_get:PI._get}});var ose={};cn(ose,{compare:()=>EMt,generate:()=>tse,observe:()=>CMt,unobserve:()=>SMt});function vMt(t){return rse.get(t)}function wMt(t,r){return t.observers.get(r)}function _Mt(t,r){t.observers.delete(r.callback)}function SMt(t,r){r.unobserve()}function CMt(t,r){var n=[],o,i=vMt(t);if(!i)i=new bMt(t),rse.set(t,i);else{var s=wMt(i,r);o=s&&s.observer}if(o)return o;if(o={},i.value=El(t),r){o.callback=r,o.next=null;var a=function(){tse(o)},l=function(){clearTimeout(o.next),o.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return o.patches=n,o.object=t,o.unobserve=function(){tse(o),clearTimeout(o.next),_Mt(i,o),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},i.observers.set(r,new xMt(r,o)),o}function tse(t,r){r===void 0&&(r=!1);var n=rse.get(t.object);nse(n.value,t.object,t.patches,"",r),t.patches.length&&LI(n.value,t.patches);var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function nse(t,r,n,o,i){if(r!==t){typeof r.toJSON=="function"&&(r=r.toJSON());for(var s=KU(r),a=KU(t),l=!1,u=!1,c=a.length-1;c>=0;c--){var f=a[c],d=t[f];if(XU(r,f)&&!(r[f]===void 0&&d!==void 0&&Array.isArray(r)===!1)){var p=r[f];typeof d=="object"&&d!=null&&typeof p=="object"&&p!=null&&Array.isArray(d)===Array.isArray(p)?nse(d,p,n,o+"/"+v0(f),i):d!==p&&(l=!0,i&&n.push({op:"test",path:o+"/"+v0(f),value:El(d)}),n.push({op:"replace",path:o+"/"+v0(f),value:El(p)}))}else Array.isArray(t)===Array.isArray(r)?(i&&n.push({op:"test",path:o+"/"+v0(f),value:El(d)}),n.push({op:"remove",path:o+"/"+v0(f)}),u=!0):(i&&n.push({op:"test",path:o,value:t}),n.push({op:"replace",path:o,value:r}),l=!0)}if(!(!u&&s.length==a.length))for(var c=0;c<s.length;c++){var f=s[c];!XU(t,f)&&r[f]!==void 0&&n.push({op:"add",path:o+"/"+v0(f),value:El(r[f])})}}}function EMt(t,r,n){n===void 0&&(n=!1);var o=[];return nse(t,r,o,"",n),o}var rse,bMt,xMt,ise=D(()=>{"use strict";k3();e7();rse=new WeakMap,bMt=function(){function t(r){this.observers=new Map,this.obj=r}return t}(),xMt=function(){function t(r,n){this.callback=r,this.observer=n}return t}()});var D1n,fje=D(()=>{"use strict";e7();ise();k3();e7();ise();k3();D1n=Object.assign({},ese,ose,{JsonPatchError:A3,deepClone:El,escapePathComponent:v0,unescapePathComponent:T3})});var pje=gt((R1n,dje)=>{"use strict";var TMt=/("(?:[^\\"]|\\.)*")|[:,]/g;dje.exports=function(r,n){var o,i,s;return n=n||{},o=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=o===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function a(l,u,c){var f,d,p,m,h,g,y,b,x,v,w,_;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),w=JSON.stringify(l,s),w===void 0)return w;if(y=i-u.length-c,w.length<=y&&(x=w.replace(TMt,function(C,S){return S||C+" "}),x.length<=y))return x;if(s!=null&&(l=JSON.parse(w),s=void 0),typeof l=="object"&&l!==null){if(b=u+o,p=[],d=0,Array.isArray(l))for(v="[",f="]",y=l.length;d<y;d++)p.push(a(l[d],b,d===y-1?0:1)||"null");else for(v="{",f="}",g=Object.keys(l),y=g.length;d<y;d++)m=g[d],h=JSON.stringify(m)+": ",_=a(l[m],b,h.length+(d===y-1?0:1)),_!==void 0&&p.push(h+_);if(p.length>0)return[v,o+p.join(`,
`+b),f].join(`
`+u)}return w}(r,"",0)}});var D3=gt((j1n,mje)=>{"use strict";var AMt="2.0.0",kMt=Number.MAX_SAFE_INTEGER||9007199254740991,IMt=16,DMt=250,NMt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];mje.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:IMt,MAX_SAFE_BUILD_LENGTH:DMt,MAX_SAFE_INTEGER:kMt,RELEASE_TYPES:NMt,SEMVER_SPEC_VERSION:AMt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var N3=gt((P1n,hje)=>{"use strict";var FMt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};hje.exports=FMt});var BI=gt((_x,gje)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:sse,MAX_SAFE_BUILD_LENGTH:OMt,MAX_LENGTH:MMt}=D3(),RMt=N3();_x=gje.exports={};var jMt=_x.re=[],PMt=_x.safeRe=[],tr=_x.src=[],rr=_x.t={},LMt=0,ase="[a-zA-Z0-9-]",BMt=[["\\s",1],["\\d",MMt],[ase,OMt]],$Mt=t=>{for(let[r,n]of BMt)t=t.split(`${r}*`).join(`${r}{0,${n}}`).split(`${r}+`).join(`${r}{1,${n}}`);return t},mn=(t,r,n)=>{let o=$Mt(r),i=LMt++;RMt(t,i,r),rr[t]=i,tr[i]=r,jMt[i]=new RegExp(r,n?"g":void 0),PMt[i]=new RegExp(o,n?"g":void 0)};mn("NUMERICIDENTIFIER","0|[1-9]\\d*");mn("NUMERICIDENTIFIERLOOSE","\\d+");mn("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ase}*`);mn("MAINVERSION",`(${tr[rr.NUMERICIDENTIFIER]})\\.(${tr[rr.NUMERICIDENTIFIER]})\\.(${tr[rr.NUMERICIDENTIFIER]})`);mn("MAINVERSIONLOOSE",`(${tr[rr.NUMERICIDENTIFIERLOOSE]})\\.(${tr[rr.NUMERICIDENTIFIERLOOSE]})\\.(${tr[rr.NUMERICIDENTIFIERLOOSE]})`);mn("PRERELEASEIDENTIFIER",`(?:${tr[rr.NUMERICIDENTIFIER]}|${tr[rr.NONNUMERICIDENTIFIER]})`);mn("PRERELEASEIDENTIFIERLOOSE",`(?:${tr[rr.NUMERICIDENTIFIERLOOSE]}|${tr[rr.NONNUMERICIDENTIFIER]})`);mn("PRERELEASE",`(?:-(${tr[rr.PRERELEASEIDENTIFIER]}(?:\\.${tr[rr.PRERELEASEIDENTIFIER]})*))`);mn("PRERELEASELOOSE",`(?:-?(${tr[rr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${tr[rr.PRERELEASEIDENTIFIERLOOSE]})*))`);mn("BUILDIDENTIFIER",`${ase}+`);mn("BUILD",`(?:\\+(${tr[rr.BUILDIDENTIFIER]}(?:\\.${tr[rr.BUILDIDENTIFIER]})*))`);mn("FULLPLAIN",`v?${tr[rr.MAINVERSION]}${tr[rr.PRERELEASE]}?${tr[rr.BUILD]}?`);mn("FULL",`^${tr[rr.FULLPLAIN]}$`);mn("LOOSEPLAIN",`[v=\\s]*${tr[rr.MAINVERSIONLOOSE]}${tr[rr.PRERELEASELOOSE]}?${tr[rr.BUILD]}?`);mn("LOOSE",`^${tr[rr.LOOSEPLAIN]}$`);mn("GTLT","((?:<|>)?=?)");mn("XRANGEIDENTIFIERLOOSE",`${tr[rr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);mn("XRANGEIDENTIFIER",`${tr[rr.NUMERICIDENTIFIER]}|x|X|\\*`);mn("XRANGEPLAIN",`[v=\\s]*(${tr[rr.XRANGEIDENTIFIER]})(?:\\.(${tr[rr.XRANGEIDENTIFIER]})(?:\\.(${tr[rr.XRANGEIDENTIFIER]})(?:${tr[rr.PRERELEASE]})?${tr[rr.BUILD]}?)?)?`);mn("XRANGEPLAINLOOSE",`[v=\\s]*(${tr[rr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${tr[rr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${tr[rr.XRANGEIDENTIFIERLOOSE]})(?:${tr[rr.PRERELEASELOOSE]})?${tr[rr.BUILD]}?)?)?`);mn("XRANGE",`^${tr[rr.GTLT]}\\s*${tr[rr.XRANGEPLAIN]}$`);mn("XRANGELOOSE",`^${tr[rr.GTLT]}\\s*${tr[rr.XRANGEPLAINLOOSE]}$`);mn("COERCEPLAIN",`(^|[^\\d])(\\d{1,${sse}})(?:\\.(\\d{1,${sse}}))?(?:\\.(\\d{1,${sse}}))?`);mn("COERCE",`${tr[rr.COERCEPLAIN]}(?:$|[^\\d])`);mn("COERCEFULL",tr[rr.COERCEPLAIN]+`(?:${tr[rr.PRERELEASE]})?(?:${tr[rr.BUILD]})?(?:$|[^\\d])`);mn("COERCERTL",tr[rr.COERCE],!0);mn("COERCERTLFULL",tr[rr.COERCEFULL],!0);mn("LONETILDE","(?:~>?)");mn("TILDETRIM",`(\\s*)${tr[rr.LONETILDE]}\\s+`,!0);_x.tildeTrimReplace="$1~";mn("TILDE",`^${tr[rr.LONETILDE]}${tr[rr.XRANGEPLAIN]}$`);mn("TILDELOOSE",`^${tr[rr.LONETILDE]}${tr[rr.XRANGEPLAINLOOSE]}$`);mn("LONECARET","(?:\\^)");mn("CARETTRIM",`(\\s*)${tr[rr.LONECARET]}\\s+`,!0);_x.caretTrimReplace="$1^";mn("CARET",`^${tr[rr.LONECARET]}${tr[rr.XRANGEPLAIN]}$`);mn("CARETLOOSE",`^${tr[rr.LONECARET]}${tr[rr.XRANGEPLAINLOOSE]}$`);mn("COMPARATORLOOSE",`^${tr[rr.GTLT]}\\s*(${tr[rr.LOOSEPLAIN]})$|^$`);mn("COMPARATOR",`^${tr[rr.GTLT]}\\s*(${tr[rr.FULLPLAIN]})$|^$`);mn("COMPARATORTRIM",`(\\s*)${tr[rr.GTLT]}\\s*(${tr[rr.LOOSEPLAIN]}|${tr[rr.XRANGEPLAIN]})`,!0);_x.comparatorTrimReplace="$1$2$3";mn("HYPHENRANGE",`^\\s*(${tr[rr.XRANGEPLAIN]})\\s+-\\s+(${tr[rr.XRANGEPLAIN]})\\s*$`);mn("HYPHENRANGELOOSE",`^\\s*(${tr[rr.XRANGEPLAINLOOSE]})\\s+-\\s+(${tr[rr.XRANGEPLAINLOOSE]})\\s*$`);mn("STAR","(<|>)?=?\\s*\\*");mn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");mn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var t7=gt((L1n,yje)=>{"use strict";var zMt=Object.freeze({loose:!0}),UMt=Object.freeze({}),VMt=t=>t?typeof t!="object"?zMt:t:UMt;yje.exports=VMt});var lse=gt((B1n,vje)=>{"use strict";var bje=/^[0-9]+$/,xje=(t,r)=>{let n=bje.test(t),o=bje.test(r);return n&&o&&(t=+t,r=+r),t===r?0:n&&!o?-1:o&&!n?1:t<r?-1:1},GMt=(t,r)=>xje(r,t);vje.exports={compareIdentifiers:xje,rcompareIdentifiers:GMt}});var tu=gt(($1n,Cje)=>{"use strict";var r7=N3(),{MAX_LENGTH:wje,MAX_SAFE_INTEGER:n7}=D3(),{safeRe:_je,t:Sje}=BI(),WMt=t7(),{compareIdentifiers:$I}=lse(),use=class t{constructor(r,n){if(n=WMt(n),r instanceof t){if(r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>wje)throw new TypeError(`version is longer than ${wje} characters`);r7("SemVer",r,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let o=r.trim().match(n.loose?_je[Sje.LOOSE]:_je[Sje.FULL]);if(!o)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n7||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n7||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n7||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<n7)return s}return i}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(r7("SemVer.compare",this.version,this.options,r),!(r instanceof t)){if(typeof r=="string"&&r===this.version)return 0;r=new t(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof t||(r=new t(r,this.options)),$I(this.major,r.major)||$I(this.minor,r.minor)||$I(this.patch,r.patch)}comparePre(r){if(r instanceof t||(r=new t(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let n=0;do{let o=this.prerelease[n],i=r.prerelease[n];if(r7("prerelease compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return $I(o,i)}while(++n)}compareBuild(r){r instanceof t||(r=new t(r,this.options));let n=0;do{let o=this.build[n],i=r.build[n];if(r7("build compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return $I(o,i)}while(++n)}inc(r,n,o){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(o)?1:0;if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];o===!1&&(s=[n]),$I(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Cje.exports=use});var PC=gt((z1n,Tje)=>{"use strict";var Eje=tu(),qMt=(t,r,n=!1)=>{if(t instanceof Eje)return t;try{return new Eje(t,r)}catch(o){if(!n)return null;throw o}};Tje.exports=qMt});var kje=gt((U1n,Aje)=>{"use strict";var HMt=PC(),YMt=(t,r)=>{let n=HMt(t,r);return n?n.version:null};Aje.exports=YMt});var Dje=gt((V1n,Ije)=>{"use strict";var XMt=PC(),KMt=(t,r)=>{let n=XMt(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null};Ije.exports=KMt});var Oje=gt((G1n,Fje)=>{"use strict";var Nje=tu(),ZMt=(t,r,n,o,i)=>{typeof n=="string"&&(i=o,o=n,n=void 0);try{return new Nje(t instanceof Nje?t.version:t,n).inc(r,o,i).version}catch{return null}};Fje.exports=ZMt});var jje=gt((W1n,Rje)=>{"use strict";var Mje=PC(),QMt=(t,r)=>{let n=Mje(t,null,!0),o=Mje(r,null,!0),i=n.compare(o);if(i===0)return null;let s=i>0,a=s?n:o,l=s?o:n,u=!!a.prerelease.length;if(!!l.prerelease.length&&!u)return!l.patch&&!l.minor?"major":a.patch?"patch":a.minor?"minor":"major";let f=u?"pre":"";return n.major!==o.major?f+"major":n.minor!==o.minor?f+"minor":n.patch!==o.patch?f+"patch":"prerelease"};Rje.exports=QMt});var Lje=gt((q1n,Pje)=>{"use strict";var JMt=tu(),eRt=(t,r)=>new JMt(t,r).major;Pje.exports=eRt});var $je=gt((H1n,Bje)=>{"use strict";var tRt=tu(),rRt=(t,r)=>new tRt(t,r).minor;Bje.exports=rRt});var Uje=gt((Y1n,zje)=>{"use strict";var nRt=tu(),oRt=(t,r)=>new nRt(t,r).patch;zje.exports=oRt});var Gje=gt((X1n,Vje)=>{"use strict";var iRt=PC(),sRt=(t,r)=>{let n=iRt(t,r);return n&&n.prerelease.length?n.prerelease:null};Vje.exports=sRt});var Zd=gt((K1n,qje)=>{"use strict";var Wje=tu(),aRt=(t,r,n)=>new Wje(t,n).compare(new Wje(r,n));qje.exports=aRt});var Yje=gt((Z1n,Hje)=>{"use strict";var lRt=Zd(),uRt=(t,r,n)=>lRt(r,t,n);Hje.exports=uRt});var Kje=gt((Q1n,Xje)=>{"use strict";var cRt=Zd(),fRt=(t,r)=>cRt(t,r,!0);Xje.exports=fRt});var o7=gt((J1n,Qje)=>{"use strict";var Zje=tu(),dRt=(t,r,n)=>{let o=new Zje(t,n),i=new Zje(r,n);return o.compare(i)||o.compareBuild(i)};Qje.exports=dRt});var ePe=gt((ewn,Jje)=>{"use strict";var pRt=o7(),mRt=(t,r)=>t.sort((n,o)=>pRt(n,o,r));Jje.exports=mRt});var rPe=gt((twn,tPe)=>{"use strict";var hRt=o7(),gRt=(t,r)=>t.sort((n,o)=>hRt(o,n,r));tPe.exports=gRt});var F3=gt((rwn,nPe)=>{"use strict";var yRt=Zd(),bRt=(t,r,n)=>yRt(t,r,n)>0;nPe.exports=bRt});var i7=gt((nwn,oPe)=>{"use strict";var xRt=Zd(),vRt=(t,r,n)=>xRt(t,r,n)<0;oPe.exports=vRt});var cse=gt((own,iPe)=>{"use strict";var wRt=Zd(),_Rt=(t,r,n)=>wRt(t,r,n)===0;iPe.exports=_Rt});var fse=gt((iwn,sPe)=>{"use strict";var SRt=Zd(),CRt=(t,r,n)=>SRt(t,r,n)!==0;sPe.exports=CRt});var s7=gt((swn,aPe)=>{"use strict";var ERt=Zd(),TRt=(t,r,n)=>ERt(t,r,n)>=0;aPe.exports=TRt});var a7=gt((awn,lPe)=>{"use strict";var ARt=Zd(),kRt=(t,r,n)=>ARt(t,r,n)<=0;lPe.exports=kRt});var dse=gt((lwn,uPe)=>{"use strict";var IRt=cse(),DRt=fse(),NRt=F3(),FRt=s7(),ORt=i7(),MRt=a7(),RRt=(t,r,n,o)=>{switch(r){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return IRt(t,n,o);case"!=":return DRt(t,n,o);case">":return NRt(t,n,o);case">=":return FRt(t,n,o);case"<":return ORt(t,n,o);case"<=":return MRt(t,n,o);default:throw new TypeError(`Invalid operator: ${r}`)}};uPe.exports=RRt});var fPe=gt((uwn,cPe)=>{"use strict";var jRt=tu(),PRt=PC(),{safeRe:l7,t:u7}=BI(),LRt=(t,r)=>{if(t instanceof jRt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;r=r||{};let n=null;if(!r.rtl)n=t.match(r.includePrerelease?l7[u7.COERCEFULL]:l7[u7.COERCE]);else{let u=r.includePrerelease?l7[u7.COERCERTLFULL]:l7[u7.COERCERTL],c;for(;(c=u.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(n===null)return null;let o=n[2],i=n[3]||"0",s=n[4]||"0",a=r.includePrerelease&&n[5]?`-${n[5]}`:"",l=r.includePrerelease&&n[6]?`+${n[6]}`:"";return PRt(`${o}.${i}.${s}${a}${l}`,r)};cPe.exports=LRt});var pPe=gt((cwn,dPe)=>{"use strict";var pse=class{constructor(){this.max=1e3,this.map=new Map}get(r){let n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(r,n)}return this}};dPe.exports=pse});var Qd=gt((fwn,yPe)=>{"use strict";var mse=class t{constructor(r,n){if(n=$Rt(n),r instanceof t)return r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease?r:new t(r.raw,n);if(r instanceof hse)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(o=>this.parseRange(o.trim())).filter(o=>o.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let o=this.set[0];if(this.set=this.set.filter(i=>!hPe(i[0])),this.set.length===0)this.set=[o];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&HRt(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(r=>r.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(r){let o=((this.options.includePrerelease&&WRt)|(this.options.loose&&qRt))+":"+r,i=mPe.get(o);if(i)return i;let s=this.options.loose,a=s?jc[Hu.HYPHENRANGELOOSE]:jc[Hu.HYPHENRANGE];r=r.replace(a,n3t(this.options.includePrerelease)),Ti("hyphen replace",r),r=r.replace(jc[Hu.COMPARATORTRIM],URt),Ti("comparator trim",r),r=r.replace(jc[Hu.TILDETRIM],VRt),Ti("tilde trim",r),r=r.replace(jc[Hu.CARETTRIM],GRt),Ti("caret trim",r);let l=r.split(" ").map(d=>YRt(d,this.options)).join(" ").split(/\s+/).map(d=>r3t(d,this.options));s&&(l=l.filter(d=>(Ti("loose invalid filter",d,this.options),!!d.match(jc[Hu.COMPARATORLOOSE])))),Ti("range list",l);let u=new Map,c=l.map(d=>new hse(d,this.options));for(let d of c){if(hPe(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return mPe.set(o,f),f}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Range is required");return this.set.some(o=>gPe(o,n)&&r.set.some(i=>gPe(i,n)&&o.every(s=>i.every(a=>s.intersects(a,n)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new zRt(r,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(o3t(this.set[n],r,this.options))return!0;return!1}};yPe.exports=mse;var BRt=pPe(),mPe=new BRt,$Rt=t7(),hse=O3(),Ti=N3(),zRt=tu(),{safeRe:jc,t:Hu,comparatorTrimReplace:URt,tildeTrimReplace:VRt,caretTrimReplace:GRt}=BI(),{FLAG_INCLUDE_PRERELEASE:WRt,FLAG_LOOSE:qRt}=D3(),hPe=t=>t.value==="<0.0.0-0",HRt=t=>t.value==="",gPe=(t,r)=>{let n=!0,o=t.slice(),i=o.pop();for(;n&&o.length;)n=o.every(s=>i.intersects(s,r)),i=o.pop();return n},YRt=(t,r)=>(Ti("comp",t,r),t=ZRt(t,r),Ti("caret",t),t=XRt(t,r),Ti("tildes",t),t=JRt(t,r),Ti("xrange",t),t=t3t(t,r),Ti("stars",t),t),Yu=t=>!t||t.toLowerCase()==="x"||t==="*",XRt=(t,r)=>t.trim().split(/\s+/).map(n=>KRt(n,r)).join(" "),KRt=(t,r)=>{let n=r.loose?jc[Hu.TILDELOOSE]:jc[Hu.TILDE];return t.replace(n,(o,i,s,a,l)=>{Ti("tilde",t,o,i,s,a,l);let u;return Yu(i)?u="":Yu(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Yu(a)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:l?(Ti("replaceTilde pr",l),u=`>=${i}.${s}.${a}-${l} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,Ti("tilde return",u),u})},ZRt=(t,r)=>t.trim().split(/\s+/).map(n=>QRt(n,r)).join(" "),QRt=(t,r)=>{Ti("caret",t,r);let n=r.loose?jc[Hu.CARETLOOSE]:jc[Hu.CARET],o=r.includePrerelease?"-0":"";return t.replace(n,(i,s,a,l,u)=>{Ti("caret",t,i,s,a,l,u);let c;return Yu(s)?c="":Yu(a)?c=`>=${s}.0.0${o} <${+s+1}.0.0-0`:Yu(l)?s==="0"?c=`>=${s}.${a}.0${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.0${o} <${+s+1}.0.0-0`:u?(Ti("replaceCaret pr",u),s==="0"?a==="0"?c=`>=${s}.${a}.${l}-${u} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}-${u} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l}-${u} <${+s+1}.0.0-0`):(Ti("no pr"),s==="0"?a==="0"?c=`>=${s}.${a}.${l}${o} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l} <${+s+1}.0.0-0`),Ti("caret return",c),c})},JRt=(t,r)=>(Ti("replaceXRanges",t,r),t.split(/\s+/).map(n=>e3t(n,r)).join(" ")),e3t=(t,r)=>{t=t.trim();let n=r.loose?jc[Hu.XRANGELOOSE]:jc[Hu.XRANGE];return t.replace(n,(o,i,s,a,l,u)=>{Ti("xRange",t,o,i,s,a,l,u);let c=Yu(s),f=c||Yu(a),d=f||Yu(l),p=d;return i==="="&&p&&(i=""),u=r.includePrerelease?"-0":"",c?i===">"||i==="<"?o="<0.0.0-0":o="*":i&&p?(f&&(a=0),l=0,i===">"?(i=">=",f?(s=+s+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",f?s=+s+1:a=+a+1),i==="<"&&(u="-0"),o=`${i+s}.${a}.${l}${u}`):f?o=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(o=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),Ti("xRange return",o),o})},t3t=(t,r)=>(Ti("replaceStars",t,r),t.trim().replace(jc[Hu.STAR],"")),r3t=(t,r)=>(Ti("replaceGTE0",t,r),t.trim().replace(jc[r.includePrerelease?Hu.GTE0PRE:Hu.GTE0],"")),n3t=t=>(r,n,o,i,s,a,l,u,c,f,d,p)=>(Yu(o)?n="":Yu(i)?n=`>=${o}.0.0${t?"-0":""}`:Yu(s)?n=`>=${o}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Yu(c)?u="":Yu(f)?u=`<${+c+1}.0.0-0`:Yu(d)?u=`<${c}.${+f+1}.0-0`:p?u=`<=${c}.${f}.${d}-${p}`:t?u=`<${c}.${f}.${+d+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),o3t=(t,r,n)=>{for(let o=0;o<t.length;o++)if(!t[o].test(r))return!1;if(r.prerelease.length&&!n.includePrerelease){for(let o=0;o<t.length;o++)if(Ti(t[o].semver),t[o].semver!==hse.ANY&&t[o].semver.prerelease.length>0){let i=t[o].semver;if(i.major===r.major&&i.minor===r.minor&&i.patch===r.patch)return!0}return!1}return!0}});var O3=gt((dwn,SPe)=>{"use strict";var M3=Symbol("SemVer ANY"),bse=class t{static get ANY(){return M3}constructor(r,n){if(n=bPe(n),r instanceof t){if(r.loose===!!n.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),yse("comparator",r,n),this.options=n,this.loose=!!n.loose,this.parse(r),this.semver===M3?this.value="":this.value=this.operator+this.semver.version,yse("comp",this)}parse(r){let n=this.options.loose?xPe[vPe.COMPARATORLOOSE]:xPe[vPe.COMPARATOR],o=r.match(n);if(!o)throw new TypeError(`Invalid comparator: ${r}`);this.operator=o[1]!==void 0?o[1]:"",this.operator==="="&&(this.operator=""),o[2]?this.semver=new wPe(o[2],this.options.loose):this.semver=M3}toString(){return this.value}test(r){if(yse("Comparator.test",r,this.options.loose),this.semver===M3||r===M3)return!0;if(typeof r=="string")try{r=new wPe(r,this.options)}catch{return!1}return gse(r,this.operator,this.semver,this.options)}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new _Pe(r.value,n).test(this.value):r.operator===""?r.value===""?!0:new _Pe(this.value,n).test(r.semver):(n=bPe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||gse(this.semver,"<",r.semver,n)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||gse(this.semver,">",r.semver,n)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};SPe.exports=bse;var bPe=t7(),{safeRe:xPe,t:vPe}=BI(),gse=dse(),yse=N3(),wPe=tu(),_Pe=Qd()});var R3=gt((pwn,CPe)=>{"use strict";var i3t=Qd(),s3t=(t,r,n)=>{try{r=new i3t(r,n)}catch{return!1}return r.test(t)};CPe.exports=s3t});var TPe=gt((mwn,EPe)=>{"use strict";var a3t=Qd(),l3t=(t,r)=>new a3t(t,r).set.map(n=>n.map(o=>o.value).join(" ").trim().split(" "));EPe.exports=l3t});var kPe=gt((hwn,APe)=>{"use strict";var u3t=tu(),c3t=Qd(),f3t=(t,r,n)=>{let o=null,i=null,s=null;try{s=new c3t(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===-1)&&(o=a,i=new u3t(o,n))}),o};APe.exports=f3t});var DPe=gt((gwn,IPe)=>{"use strict";var d3t=tu(),p3t=Qd(),m3t=(t,r,n)=>{let o=null,i=null,s=null;try{s=new p3t(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===1)&&(o=a,i=new d3t(o,n))}),o};IPe.exports=m3t});var OPe=gt((ywn,FPe)=>{"use strict";var xse=tu(),h3t=Qd(),NPe=F3(),g3t=(t,r)=>{t=new h3t(t,r);let n=new xse("0.0.0");if(t.test(n)||(n=new xse("0.0.0-0"),t.test(n)))return n;n=null;for(let o=0;o<t.set.length;++o){let i=t.set[o],s=null;i.forEach(a=>{let l=new xse(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||NPe(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||NPe(n,s))&&(n=s)}return n&&t.test(n)?n:null};FPe.exports=g3t});var RPe=gt((bwn,MPe)=>{"use strict";var y3t=Qd(),b3t=(t,r)=>{try{return new y3t(t,r).range||"*"}catch{return null}};MPe.exports=b3t});var c7=gt((xwn,BPe)=>{"use strict";var x3t=tu(),LPe=O3(),{ANY:v3t}=LPe,w3t=Qd(),_3t=R3(),jPe=F3(),PPe=i7(),S3t=a7(),C3t=s7(),E3t=(t,r,n,o)=>{t=new x3t(t,o),r=new w3t(r,o);let i,s,a,l,u;switch(n){case">":i=jPe,s=S3t,a=PPe,l=">",u=">=";break;case"<":i=PPe,s=C3t,a=jPe,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_3t(t,r,o))return!1;for(let c=0;c<r.set.length;++c){let f=r.set[c],d=null,p=null;if(f.forEach(m=>{m.semver===v3t&&(m=new LPe(">=0.0.0")),d=d||m,p=p||m,i(m.semver,d.semver,o)?d=m:a(m.semver,p.semver,o)&&(p=m)}),d.operator===l||d.operator===u||(!p.operator||p.operator===l)&&s(t,p.semver))return!1;if(p.operator===u&&a(t,p.semver))return!1}return!0};BPe.exports=E3t});var zPe=gt((vwn,$Pe)=>{"use strict";var T3t=c7(),A3t=(t,r,n)=>T3t(t,r,">",n);$Pe.exports=A3t});var VPe=gt((wwn,UPe)=>{"use strict";var k3t=c7(),I3t=(t,r,n)=>k3t(t,r,"<",n);UPe.exports=I3t});var qPe=gt((_wn,WPe)=>{"use strict";var GPe=Qd(),D3t=(t,r,n)=>(t=new GPe(t,n),r=new GPe(r,n),t.intersects(r,n));WPe.exports=D3t});var YPe=gt((Swn,HPe)=>{"use strict";var N3t=R3(),F3t=Zd();HPe.exports=(t,r,n)=>{let o=[],i=null,s=null,a=t.sort((f,d)=>F3t(f,d,n));for(let f of a)N3t(f,r,n)?(s=f,i||(i=f)):(s&&o.push([i,s]),s=null,i=null);i&&o.push([i,null]);let l=[];for(let[f,d]of o)f===d?l.push(f):!d&&f===a[0]?l.push("*"):d?f===a[0]?l.push(`<=${d}`):l.push(`${f} - ${d}`):l.push(`>=${f}`);let u=l.join(" || "),c=typeof r.raw=="string"?r.raw:String(r);return u.length<c.length?u:r}});var eLe=gt((Cwn,JPe)=>{"use strict";var XPe=Qd(),wse=O3(),{ANY:vse}=wse,j3=R3(),_se=Zd(),O3t=(t,r,n={})=>{if(t===r)return!0;t=new XPe(t,n),r=new XPe(r,n);let o=!1;e:for(let i of t.set){for(let s of r.set){let a=R3t(i,s,n);if(o=o||a!==null,a)continue e}if(o)return!1}return!0},M3t=[new wse(">=0.0.0-0")],KPe=[new wse(">=0.0.0")],R3t=(t,r,n)=>{if(t===r)return!0;if(t.length===1&&t[0].semver===vse){if(r.length===1&&r[0].semver===vse)return!0;n.includePrerelease?t=M3t:t=KPe}if(r.length===1&&r[0].semver===vse){if(n.includePrerelease)return!0;r=KPe}let o=new Set,i,s;for(let m of t)m.operator===">"||m.operator===">="?i=ZPe(i,m,n):m.operator==="<"||m.operator==="<="?s=QPe(s,m,n):o.add(m.semver);if(o.size>1)return null;let a;if(i&&s){if(a=_se(i.semver,s.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let m of o){if(i&&!j3(m,String(i),n)||s&&!j3(m,String(s),n))return null;for(let h of r)if(!j3(m,String(h),n))return!1;return!0}let l,u,c,f,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let m of r){if(f=f||m.operator===">"||m.operator===">=",c=c||m.operator==="<"||m.operator==="<=",i){if(p&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===p.major&&m.semver.minor===p.minor&&m.semver.patch===p.patch&&(p=!1),m.operator===">"||m.operator===">="){if(l=ZPe(i,m,n),l===m&&l!==i)return!1}else if(i.operator===">="&&!j3(i.semver,String(m),n))return!1}if(s){if(d&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===d.major&&m.semver.minor===d.minor&&m.semver.patch===d.patch&&(d=!1),m.operator==="<"||m.operator==="<="){if(u=QPe(s,m,n),u===m&&u!==s)return!1}else if(s.operator==="<="&&!j3(s.semver,String(m),n))return!1}if(!m.operator&&(s||i)&&a!==0)return!1}return!(i&&c&&!s&&a!==0||s&&f&&!i&&a!==0||p||d)},ZPe=(t,r,n)=>{if(!t)return r;let o=_se(t.semver,r.semver,n);return o>0?t:o<0||r.operator===">"&&t.operator===">="?r:t},QPe=(t,r,n)=>{if(!t)return r;let o=_se(t.semver,r.semver,n);return o<0?t:o>0||r.operator==="<"&&t.operator==="<="?r:t};JPe.exports=O3t});var oLe=gt((Ewn,nLe)=>{"use strict";var Sse=BI(),tLe=D3(),j3t=tu(),rLe=lse(),P3t=PC(),L3t=kje(),B3t=Dje(),$3t=Oje(),z3t=jje(),U3t=Lje(),V3t=$je(),G3t=Uje(),W3t=Gje(),q3t=Zd(),H3t=Yje(),Y3t=Kje(),X3t=o7(),K3t=ePe(),Z3t=rPe(),Q3t=F3(),J3t=i7(),ejt=cse(),tjt=fse(),rjt=s7(),njt=a7(),ojt=dse(),ijt=fPe(),sjt=O3(),ajt=Qd(),ljt=R3(),ujt=TPe(),cjt=kPe(),fjt=DPe(),djt=OPe(),pjt=RPe(),mjt=c7(),hjt=zPe(),gjt=VPe(),yjt=qPe(),bjt=YPe(),xjt=eLe();nLe.exports={parse:P3t,valid:L3t,clean:B3t,inc:$3t,diff:z3t,major:U3t,minor:V3t,patch:G3t,prerelease:W3t,compare:q3t,rcompare:H3t,compareLoose:Y3t,compareBuild:X3t,sort:K3t,rsort:Z3t,gt:Q3t,lt:J3t,eq:ejt,neq:tjt,gte:rjt,lte:njt,cmp:ojt,coerce:ijt,Comparator:sjt,Range:ajt,satisfies:ljt,toComparators:ujt,maxSatisfying:cjt,minSatisfying:fjt,minVersion:djt,validRange:pjt,outside:mjt,gtr:hjt,ltr:gjt,intersects:yjt,simplifyRange:bjt,subset:xjt,SemVer:j3t,re:Sse.re,src:Sse.src,tokens:Sse.t,SEMVER_SPEC_VERSION:tLe.SEMVER_SPEC_VERSION,RELEASE_TYPES:tLe.RELEASE_TYPES,compareIdentifiers:rLe.compareIdentifiers,rcompareIdentifiers:rLe.rcompareIdentifiers}});function Yf(t,r,n){return t.fields=r||[],t.fname=n,t}function Ai(t){return t==null?null:t.fname}function wa(t){return t==null?null:t.fields}function sLe(t){return t.length===1?vjt(t[0]):wjt(t)}function pt(t){throw Error(t)}function L3(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||pt("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&pt("Access path missing closing bracket: "+t),o&&pt("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function _m(t,r,n){let o=L3(t);return t=o.length===1?o[0]:t,Yf((n&&n.get||sLe)(o),[t],r||t)}function f7(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function Sjt(t,r){let n=t||aLe;return{level(o){return arguments.length?(n=+o,this):n},error(){return n>=lLe&&f7(r||"error","ERROR",arguments),this},warn(){return n>=uLe&&f7(r||"warn","WARN",arguments),this},info(){return n>=cLe&&f7(r||"log","INFO",arguments),this},debug(){return n>=fLe&&f7(r||"log","DEBUG",arguments),this}}}function ln(t){return t===Object(t)}function zI(...t){return t.reduce((r,n)=>{for(let o in n)if(o==="signals")r.signals=Cjt(r.signals,n.signals);else{let i=o==="legend"?{layout:1}:o==="style"?!0:null;B3(r,o,n[o],i)}return r},{})}function B3(t,r,n,o){if(!iLe(r))return;let i,s;if(ln(n)&&!Wr(n)){s=ln(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?B3(s,i,n[i]):iLe(i)&&(s[i]=n[i])}else t[r]=n}function Cjt(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}function Pn(t){return t[t.length-1]}function Cm(t){return t==null||t===""?null:+t}function m7(t,r,n,o){let i=n(t[0]),s=n(Pn(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function Ejt(t,r){return m7(t,r,Cm,Xu)}function Tjt(t,r){var n=Math.sign(t[0]);return m7(t,r,pLe(n),dLe(n))}function Ajt(t,r,n){return m7(t,r,p7(n),p7(1/n))}function kjt(t,r,n){return m7(t,r,mLe(n),hLe(n))}function h7(t,r,n,o,i){let s=o(t[0]),a=o(Pn(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function Cse(t,r,n){return h7(t,r,n,Cm,Xu)}function Ese(t,r,n){let o=Math.sign(t[0]);return h7(t,r,n,pLe(o),dLe(o))}function g7(t,r,n,o){return h7(t,r,n,p7(o),p7(1/o))}function Tse(t,r,n,o){return h7(t,r,n,mLe(o),hLe(o))}function Ijt(t){return 1+~~(new Date(t).getMonth()/3)}function Djt(t){return 1+~~(new Date(t).getUTCMonth()/3)}function jr(t){return t!=null?Wr(t)?t:[t]:[]}function Njt(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function Tn(t){return typeof t=="function"}function Ase(t,r,n){n=n||{},r=jr(r)||[];let o=[],i=[],s={},a=n.comparator||Ojt;return jr(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===Fjt?-1:1),i.push(l=Tn(l)?l:_m(l,null,n)),(wa(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:Yf(a(i,o),Object.keys(s))}function Ga(t){return Tn(t)?t:()=>t}function kse(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function on(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function Em(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Ise(t,r){let n=t.length,o=-1,i,s,a,l,u;if(r==null){for(;++o<n;)if(s=t[o],s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=t[o],s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}else{for(;++o<n;)if(s=r(t[o],o,t),s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=r(t[o],o,t),s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}return[l,u]}function Or(t,r){return jjt.call(t,r)}function lw(t){let r={},n;function o(s){return Or(r,s)&&r[s]!==d7}let i={size:0,empty:0,object:r,has:o,get(s){return o(s)?r[s]:void 0},set(s,a){return o(s)||(++i.size,r[s]===d7&&--i.empty),r[s]=a,this},delete(s){return o(s)&&(--i.size,++i.empty,r[s]=d7),this},clear(){i.size=i.empty=0,i.object=r={}},test(s){return arguments.length?(n=s,i):n},clean(){let s={},a=0;for(let l in r){let u=r[l];u!==d7&&(!n||!n(u))&&(s[l]=u,++a)}i.size=a,i.empty=0,i.object=r=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function Pjt(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=Pn(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function It(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),on(o,n)}function Ljt(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function Dse(t){return typeof t=="boolean"}function z3(t){return Object.prototype.toString.call(t)==="[object Date]"}function Nse(t){return t&&Tn(t[Symbol.iterator])}function S0(t){return typeof t=="number"}function Bjt(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Kn(t){return typeof t=="string"}function Fse(t,r,n){t&&(t=r?jr(t).map(l=>l.replace(/\\(.)/g,"$1")):jr(t));let o=t&&t.length,i=n&&n.get||sLe,s=l=>i(r?[l]:L3(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return Yf(a,t,"key")}function $jt(t,r){let n=t[0],o=Pn(t),i=+r;return i?i===1?o:n+i*(o-n):n}function Ose(t){t=+t||zjt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>Or(r,a)||Or(n,a),get:a=>Or(r,a)?r[a]:Or(n,a)?s(a,n[a]):void 0,set:(a,l)=>Or(r,a)?r[a]=l:s(a,l)}}function Mse(t,r,n,o){let i=r.length,s=n.length;if(!s)return r;if(!i)return n;let a=o||new r.constructor(i+s),l=0,u=0,c=0;for(;l<i&&u<s;++c)a[c]=t(r[l],n[u])>0?n[u++]:r[l++];for(;l<i;++l,++c)a[c]=r[l];for(;u<s;++u,++c)a[c]=n[u];return a}function P3(t,r){let n="";for(;--r>=0;)n+=t;return n}function Ujt(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?P3(i,a)+s:o==="center"?P3(i,~~(a/2))+s+P3(i,Math.ceil(a/2)):s+P3(i,a)}function LC(t){return t&&Pn(t)-t[0]||0}function Pr(t){return Wr(t)?"["+t.map(Pr)+"]":ln(t)||Kn(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Rse(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function jse(t,r){return r=r||Vjt,t==null||t===""?null:r(t)}function Pse(t){return t==null||t===""?null:t+""}function ru(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function Gjt(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}function Wjt(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var vjt,wjt,_jt,Xu,Sm,w0,_0,Sx,aLe,lLe,uLe,cLe,fLe,Wr,iLe,dLe,pLe,mLe,hLe,p7,Fjt,$3,Ojt,Mjt,Rjt,jjt,d7,zjt,Vjt,Ts=D(()=>{"use strict";vjt=t=>function(r){return r[t]},wjt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};_jt=_m("id"),Xu=Yf(t=>t,[],"identity"),Sm=Yf(()=>0,[],"zero"),w0=Yf(()=>1,[],"one"),_0=Yf(()=>!0,[],"true"),Sx=Yf(()=>!1,[],"false");aLe=0,lLe=1,uLe=2,cLe=3,fLe=4;Wr=Array.isArray;iLe=t=>t!=="__proto__";dLe=t=>r=>t*Math.exp(r),pLe=t=>r=>Math.log(t*r),mLe=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),hLe=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,p7=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);Fjt="descending";$3=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),Ojt=(t,r)=>t.length===1?Mjt(t[0],r[0]):Rjt(t,r,t.length),Mjt=(t,r)=>function(n,o){return $3(t(n),t(o))*r},Rjt=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=$3(s(o),s(i));return a*r[l]});jjt=Object.prototype.hasOwnProperty;d7={};zjt=1e4;Vjt=t=>S0(t)||z3(t)?t:Date.parse(t)});function UI(t,r,n){return t.fields=r||[],t.fname=n,t}function qjt(t){return t.length===1?Hjt(t[0]):Yjt(t)}function Ws(t){throw Error(t)}function Xjt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||Ws("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&Ws("Access path missing closing bracket: "+t),o&&Ws("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Lse(t,r,n){let o=Xjt(t);return t=o.length===1?o[0]:t,UI((n&&n.get||qjt)(o),[t],r||t)}function Qjt(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function gLe(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qjt,o=t||Jjt;return{level(i){return arguments.length?(o=+i,this):o},error(){return o>=Bse&&n(r||"error","ERROR",arguments),this},warn(){return o>=ePt&&n(r||"warn","WARN",arguments),this},info(){return o>=tPt&&n(r||"log","INFO",arguments),this},debug(){return o>=rPt&&n(r||"log","DEBUG",arguments),this}}}function V3(t){return t===Object(t)}function $se(t){return t==null||t===""?null:+t}function GI(t){return t!=null?Jd(t)?t:[t]:[]}function Xf(t){return typeof t=="function"}function G3(t){return Xf(t)?t:()=>t}function yLe(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function C0(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function WI(t,r){return nPt.call(t,r)}function zse(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),C0(o,n)}function oPt(t){return Object.prototype.toString.call(t)==="[object Date]"}function bLe(t){return t&&Xf(t[Symbol.iterator])}function iPt(t){return typeof t=="number"}function b7(t){return typeof t=="string"}function x7(t){return Jd(t)?"["+t.map(x7)+"]":V3(t)||b7(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function xLe(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function vLe(t,r){return r=r||sPt,t==null||t===""?null:r(t)}function wLe(t){return t==null||t===""?null:t+""}function uw(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var Hjt,Yjt,U3,VI,Kjt,Zjt,y7,Awn,Jjt,Bse,ePt,tPt,rPt,Jd,nPt,sPt,W3=D(()=>{"use strict";Hjt=t=>function(r){return r[t]},Yjt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};U3=Lse("id"),VI=UI(t=>t,[],"identity"),Kjt=UI(()=>0,[],"zero"),Zjt=UI(()=>1,[],"one"),y7=UI(()=>!0,[],"true"),Awn=UI(()=>!1,[],"false");Jjt=0,Bse=1,ePt=2,tPt=3,rPt=4;Jd=Array.isArray;nPt=Object.prototype.hasOwnProperty;sPt=t=>iPt(t)||oPt(t)?t:Date.parse(t)});function CLe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function aPt(t,r){var n=CLe(t);return function(o,i){return r(n(o),i,t)}}function SLe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function Pc(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function lPt(t){return t<0?"-"+Pc(-t,6):t>9999?"+"+Pc(t,6):Pc(t,4)}function uPt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":lPt(t.getUTCFullYear(),4)+"-"+Pc(t.getUTCMonth()+1,2)+"-"+Pc(t.getUTCDate(),2)+(i?"T"+Pc(r,2)+":"+Pc(n,2)+":"+Pc(o,2)+"."+Pc(i,3)+"Z":o?"T"+Pc(r,2)+":"+Pc(n,2)+":"+Pc(o,2)+"Z":n||r?"T"+Pc(r,2)+":"+Pc(n,2)+"Z":"")}function Wse(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var m,h,g=i(d,function(y,b){if(m)return m(y,b-1);h=y,m=p?aPt(y,p):CLe(y)});return g.columns=h||[],g}function i(d,p){var m=[],h=d.length,g=0,y=0,b,x=h<=0,v=!1;d.charCodeAt(h-1)===q3&&--h,d.charCodeAt(h-1)===Gse&&--h;function w(){if(x)return Use;if(v)return v=!1,_Le;var C,S=g,E;if(d.charCodeAt(S)===Vse){for(;g++<h&&d.charCodeAt(g)!==Vse||d.charCodeAt(++g)===Vse;);return(C=g)>=h?x=!0:(E=d.charCodeAt(g++))===q3?v=!0:E===Gse&&(v=!0,d.charCodeAt(g)===q3&&++g),d.slice(S+1,C-1).replace(/""/g,'"')}for(;g<h;){if((E=d.charCodeAt(C=g++))===q3)v=!0;else if(E===Gse)v=!0,d.charCodeAt(g)===q3&&++g;else if(E!==n)continue;return d.slice(S,C)}return x=!0,d.slice(S,h)}for(;(b=w())!==Use;){for(var _=[];b!==_Le&&b!==Use;)_.push(b),b=w();p&&(_=p(_,y++))==null||m.push(_)}return m}function s(d,p){return d.map(function(m){return p.map(function(h){return f(m[h])}).join(t)})}function a(d,p){return p==null&&(p=SLe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=SLe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?uPt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var _Le,Use,Vse,q3,Gse,ELe=D(()=>{"use strict";_Le={},Use={},Vse=34,q3=10,Gse=13});var TLe=D(()=>{"use strict";ELe()});function qse(t){return t}var Hse=D(()=>{"use strict"});function v7(t){if(t==null)return qse;var r,n,o=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(l,u){u||(r=n=0);var c=2,f=l.length,d=new Array(f);for(d[0]=(r+=l[0])*o+s,d[1]=(n+=l[1])*i+a;c<f;)d[c]=l[c],++c;return d}}var w7=D(()=>{"use strict";Hse()});var Yse=D(()=>{"use strict";w7()});function ALe(t,r){for(var n,o=t.length,i=o-r;i<--o;)n=t[i],t[i++]=t[o],t[o]=n}var kLe=D(()=>{"use strict"});function BC(t,r){return typeof r=="string"&&(r=t.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(n){return ILe(t,n)})}:ILe(t,r)}function ILe(t,r){var n=r.id,o=r.bbox,i=r.properties==null?{}:r.properties,s=_7(t,r);return n==null&&o==null?{type:"Feature",properties:i,geometry:s}:o==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:o,properties:i,geometry:s}}function _7(t,r){var n=v7(t.transform),o=t.arcs;function i(f,d){d.length&&d.pop();for(var p=o[f<0?~f:f],m=0,h=p.length;m<h;++m)d.push(n(p[m],m));f<0&&ALe(d,h)}function s(f){return n(f)}function a(f){for(var d=[],p=0,m=f.length;p<m;++p)i(f[p],d);return d.length<2&&d.push(d[0]),d}function l(f){for(var d=a(f);d.length<4;)d.push(d[0]);return d}function u(f){return f.map(l)}function c(f){var d=f.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:f.geometries.map(c)};case"Point":p=s(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(s);break;case"LineString":p=a(f.arcs);break;case"MultiLineString":p=f.arcs.map(a);break;case"Polygon":p=u(f.arcs);break;case"MultiPolygon":p=f.arcs.map(u);break;default:return null}return{type:d,coordinates:p}}return c(r)}var S7=D(()=>{"use strict";kLe();w7()});function Xse(t,r){var n={},o={},i={},s=[],a=-1;r.forEach(function(c,f){var d=t.arcs[c<0?~c:c],p;d.length<3&&!d[1][0]&&!d[1][1]&&(p=r[++a],r[a]=c,r[f]=p)}),r.forEach(function(c){var f=l(c),d=f[0],p=f[1],m,h;if(m=i[d])if(delete i[m.end],m.push(c),m.end=p,h=o[p]){delete o[h.start];var g=h===m?m:m.concat(h);o[g.start=m.start]=i[g.end=h.end]=g}else o[m.start]=i[m.end]=m;else if(m=o[p])if(delete o[m.start],m.unshift(c),m.start=d,h=i[d]){delete i[h.end];var y=h===m?m:h.concat(m);o[y.start=h.start]=i[y.end=m.end]=y}else o[m.start]=i[m.end]=m;else m=[c],o[m.start=d]=i[m.end=p]=m});function l(c){var f=t.arcs[c<0?~c:c],d=f[0],p;return t.transform?(p=[0,0],f.forEach(function(m){p[0]+=m[0],p[1]+=m[1]})):p=f[f.length-1],c<0?[p,d]:[d,p]}function u(c,f){for(var d in c){var p=c[d];delete f[p.start],delete p.start,delete p.end,p.forEach(function(m){n[m<0?~m:m]=1}),s.push(p)}}return u(i,o),u(o,i),r.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}var Kse=D(()=>{"use strict"});function $C(t){return _7(t,DLe.apply(this,arguments))}function DLe(t,r,n){var o,i,s;if(arguments.length>1)o=cPt(t,r,n);else for(i=0,o=new Array(s=t.arcs.length);i<s;++i)o[i]=i;return{type:"MultiLineString",arcs:Xse(t,o)}}function cPt(t,r,n){var o=[],i=[],s;function a(d){var p=d<0?~d:d;(i[p]||(i[p]=[])).push({i:d,g:s})}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){d.forEach(u)}function f(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(f);break;case"LineString":l(d.arcs);break;case"MultiLineString":case"Polygon":u(d.arcs);break;case"MultiPolygon":c(d.arcs);break}}return f(r),i.forEach(n==null?function(d){o.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&o.push(d[0].i)}),o}var NLe=D(()=>{"use strict";S7();Kse()});var FLe=D(()=>{"use strict";S7();Kse()});var OLe=D(()=>{"use strict"});var MLe=D(()=>{"use strict";OLe()});var Zse=D(()=>{"use strict";Hse()});var RLe=D(()=>{"use strict";Yse();Zse()});var C7=D(()=>{"use strict";Yse();S7();NLe();FLe();MLe();RLe();w7();Zse()});function Qse({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):n}function jLe({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):(t.set(o,n),n)}function PLe({_intern:t,_key:r},n){let o=r(n);return t.has(o)&&(n=t.get(n),t.delete(o)),n}function LLe(t){return t!==null&&typeof t=="object"?t.valueOf():t}var E0,T0,H3=D(()=>{"use strict";E0=class extends Map{constructor(r,n=LLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let[o,i]of r)this.set(o,i)}get(r){return super.get(Qse(this,r))}has(r){return super.has(Qse(this,r))}set(r,n){return super.set(jLe(this,r),n)}delete(r){return super.delete(PLe(this,r))}},T0=class extends Set{constructor(r,n=LLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let o of r)this.add(o)}has(r){return super.has(Qse(this,r))}add(r){return super.add(jLe(this,r))}delete(r){return super.delete(PLe(this,r))}}});function BLe(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=pPt?10:s>=mPt?5:s>=hPt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?BLe(t,r,n*2):[l,u,c]}function Jse(t,r,n){return r=+r,t=+t,n=+n,BLe(t,r,n)[2]}function eae(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?Jse(r,t,n):Jse(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var pPt,mPt,hPt,$Le=D(()=>{"use strict";pPt=Math.sqrt(50),mPt=Math.sqrt(10),hPt=Math.sqrt(2)});var zLe=D(()=>{"use strict";$Le()});function ULe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function zC(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var Y3=D(()=>{"use strict"});function A0(t){return t=zC(Math.abs(t)),t?t[1]:NaN}var X3=D(()=>{"use strict";Y3()});function VLe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var GLe=D(()=>{"use strict"});function WLe(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var qLe=D(()=>{"use strict"});function Cx(t){if(!(r=gPt.exec(t)))throw new Error("invalid format: "+t);var r;return new E7({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function E7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var gPt,tae=D(()=>{"use strict";gPt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Cx.prototype=E7.prototype;E7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function HLe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var YLe=D(()=>{"use strict"});function XLe(t,r){var n=zC(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(rae=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+zC(t,Math.max(0,r+s-1))[0]}var rae,nae=D(()=>{"use strict";Y3()});function oae(t,r){var n=zC(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var KLe=D(()=>{"use strict";Y3()});var iae,ZLe=D(()=>{"use strict";Y3();nae();KLe();iae={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ULe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>oae(t*100,r),r:oae,s:XLe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function sae(t){return t}var QLe=D(()=>{"use strict"});function K3(t){var r=t.grouping===void 0||t.thousands===void 0?sae:VLe(JLe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?sae:WLe(JLe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Cx(d);var p=d.fill,m=d.align,h=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):iae[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&m==="=")&&(y=!0,p="0",m="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=g==="$"?o:/[%p]/.test(_)?a:"",E=iae[_],A=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(k){var M=C,I=S,L,P,R;if(_==="c")I=E(k)+I,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=HLe(k)),V&&+k==0&&h!=="+"&&(V=!1),M=(V?h==="("?h:l:h==="-"||h==="("?"":h)+M,I=(_==="s"?e4e[8+rae/3]:"")+I+(V&&h==="("?")":""),A){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){I=(R===46?i+k.slice(L+1):k.slice(L))+I,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=M.length+k.length+I.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-I.length:1/0),U=""),m){case"<":k=M+k+I+U;break;case"=":k=M+U+k+I;break;case"^":k=U.slice(0,G=U.length>>1)+M+k+I+U.slice(G);break;default:k=U+M+k+I;break}return s(k)}return N.toString=function(){return d+""},N}function f(d,p){var m=c((d=Cx(d),d.type="f",d)),h=Math.max(-8,Math.min(8,Math.floor(A0(p)/3)))*3,g=Math.pow(10,-h),y=e4e[8+h/3];return function(b){return m(g*b)+y}}return{format:c,formatPrefix:f}}var JLe,e4e,aae=D(()=>{"use strict";X3();GLe();qLe();tae();YLe();ZLe();nae();QLe();JLe=Array.prototype.map,e4e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function lae(t){return T7=K3(t),A7=T7.format,k7=T7.formatPrefix,T7}var T7,A7,k7,t4e=D(()=>{"use strict";aae();lae({thousands:",",grouping:[3],currency:["$",""]})});function uae(t){return Math.max(0,-A0(Math.abs(t)))}var r4e=D(()=>{"use strict";X3()});function cae(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(A0(r)/3)))*3-A0(Math.abs(t)))}var n4e=D(()=>{"use strict";X3()});function fae(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,A0(r)-A0(t))+1}var o4e=D(()=>{"use strict";X3()});var i4e=D(()=>{"use strict";t4e();aae();tae();r4e();n4e();o4e()});function oi(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>oi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(dae.setTime(+s),pae.setTime(+a),t(dae),t(pae),Math.floor(n(dae,pae))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var dae,pae,Ex=D(()=>{"use strict";dae=new Date,pae=new Date});var Tx,s4e,a4e=D(()=>{"use strict";Ex();Tx=oi(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Tx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?oi(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Tx);s4e=Tx.range});var UC,l4e,u4e=D(()=>{"use strict";Ex();UC=oi(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),l4e=UC.range});var I7,yPt,D7,bPt,c4e=D(()=>{"use strict";Ex();I7=oi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),yPt=I7.range,D7=oi(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),bPt=D7.range});var N7,xPt,F7,vPt,f4e=D(()=>{"use strict";Ex();N7=oi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),xPt=N7.range,F7=oi(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),vPt=F7.range});var k0,wPt,I0,_Pt,d4e,SPt,p4e=D(()=>{"use strict";Ex();k0=oi(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),wPt=k0.range,I0=oi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),_Pt=I0.range,d4e=oi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),SPt=d4e.range});function VC(t){return oi(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function GC(t){return oi(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var cw,HI,m4e,h4e,fw,g4e,y4e,b4e,EPt,TPt,APt,kPt,IPt,DPt,dw,YI,x4e,v4e,pw,w4e,_4e,S4e,NPt,FPt,OPt,MPt,RPt,jPt,C4e=D(()=>{"use strict";Ex();cw=VC(0),HI=VC(1),m4e=VC(2),h4e=VC(3),fw=VC(4),g4e=VC(5),y4e=VC(6),b4e=cw.range,EPt=HI.range,TPt=m4e.range,APt=h4e.range,kPt=fw.range,IPt=g4e.range,DPt=y4e.range;dw=GC(0),YI=GC(1),x4e=GC(2),v4e=GC(3),pw=GC(4),w4e=GC(5),_4e=GC(6),S4e=dw.range,NPt=YI.range,FPt=x4e.range,OPt=v4e.range,MPt=pw.range,RPt=w4e.range,jPt=_4e.range});var Z3,PPt,Q3,LPt,E4e=D(()=>{"use strict";Ex();Z3=oi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),PPt=Z3.range,Q3=oi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),LPt=Q3.range});var Tm,BPt,Am,$Pt,T4e=D(()=>{"use strict";Ex();Tm=oi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Tm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:oi(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});BPt=Tm.range,Am=oi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Am.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:oi(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});$Pt=Am.range});var yae=D(()=>{"use strict";a4e();u4e();c4e();f4e();p4e();C4e();E4e();T4e()});function vae(t){return WC.setFullYear(t),WC.setMonth(0),WC.setDate(1),WC.setHours(0,0,0,0),WC}function UPt(t){return k0.count(vae(t.getFullYear())-1,t)}function A4e(t){return cw.count(vae(t.getFullYear())-1,t)}function bae(t){return vae(t).getDay()}function VPt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return I0.count(r-1,t)}function k4e(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return dw.count(r-1,t)}function xae(t){return WC.setTime(Date.UTC(t,0,1)),WC.getUTCDay()}function XI(t,r,n){return r+t*7-(n+6)%7}function N4e(t){return GPt[t]}function F4e(t){return WPt[t]}var Ku,Nm,Kf,Lc,km,D0,KI,Im,Dm,N0,Ax,zPt,L2n,B2n,WC,$2n,z2n,U2n,V2n,GPt,WPt,J3,ej,tj,O7,qPt,I4e,HPt,YPt,rj,nj,oj,XPt,KPt,D4e,ZPt,G2n,O4e=D(()=>{"use strict";W3();yae();Ku="year",Nm="quarter",Kf="month",Lc="week",km="date",D0="day",KI="dayofyear",Im="hours",Dm="minutes",N0="seconds",Ax="milliseconds",zPt=[Ku,Nm,Kf,Lc,km,D0,KI,Im,Dm,N0,Ax],L2n=zPt.reduce((t,r,n)=>(t[r]=1+n,t),{}),B2n={[Ku]:"%Y ",[Nm]:"Q%q ",[Kf]:"%b ",[km]:"%d ",[Lc]:"W%U ",[D0]:"%a ",[KI]:"%j ",[Im]:"%H:00",[Dm]:"00:%M",[N0]:":%S",[Ax]:".%L",[`${Ku}-${Kf}`]:"%Y-%m ",[`${Ku}-${Kf}-${km}`]:"%Y-%m-%d ",[`${Im}-${Dm}`]:"%H:%M"},WC=new Date;$2n={[Ku]:t=>t.getFullYear(),[Nm]:t=>Math.floor(t.getMonth()/3),[Kf]:t=>t.getMonth(),[km]:t=>t.getDate(),[Im]:t=>t.getHours(),[Dm]:t=>t.getMinutes(),[N0]:t=>t.getSeconds(),[Ax]:t=>t.getMilliseconds(),[KI]:t=>UPt(t),[Lc]:t=>A4e(t),[Lc+D0]:(t,r)=>XI(A4e(t),t.getDay(),bae(r)),[D0]:(t,r)=>XI(1,t.getDay(),bae(r))},z2n={[Nm]:t=>3*t,[Lc]:(t,r)=>XI(t,0,bae(r))},U2n={[Ku]:t=>t.getUTCFullYear(),[Nm]:t=>Math.floor(t.getUTCMonth()/3),[Kf]:t=>t.getUTCMonth(),[km]:t=>t.getUTCDate(),[Im]:t=>t.getUTCHours(),[Dm]:t=>t.getUTCMinutes(),[N0]:t=>t.getUTCSeconds(),[Ax]:t=>t.getUTCMilliseconds(),[KI]:t=>VPt(t),[Lc]:t=>k4e(t),[D0]:(t,r)=>XI(1,t.getUTCDay(),xae(r)),[Lc+D0]:(t,r)=>XI(k4e(t),t.getUTCDay(),xae(r))},V2n={[Nm]:t=>3*t,[Lc]:(t,r)=>XI(t,0,xae(r))},GPt={[Ku]:Tm,[Nm]:Z3.every(3),[Kf]:Z3,[Lc]:cw,[km]:k0,[D0]:k0,[KI]:k0,[Im]:N7,[Dm]:I7,[N0]:UC,[Ax]:Tx},WPt={[Ku]:Am,[Nm]:Q3.every(3),[Kf]:Q3,[Lc]:dw,[km]:I0,[D0]:I0,[KI]:I0,[Im]:F7,[Dm]:D7,[N0]:UC,[Ax]:Tx};J3=1e3,ej=J3*60,tj=ej*60,O7=tj*24,qPt=O7*7,I4e=O7*30,HPt=O7*365,YPt=[Ku,Kf,km,Im,Dm,N0,Ax],rj=YPt.slice(0,-1),nj=rj.slice(0,-1),oj=nj.slice(0,-1),XPt=oj.slice(0,-1),KPt=[Ku,Lc],D4e=[Ku,Kf],ZPt=[Ku],G2n=[[rj,1,J3],[rj,5,5*J3],[rj,15,15*J3],[rj,30,30*J3],[nj,1,ej],[nj,5,5*ej],[nj,15,15*ej],[nj,30,30*ej],[oj,1,tj],[oj,3,3*tj],[oj,6,6*tj],[oj,12,12*tj],[XPt,1,O7],[KPt,1,qPt],[D4e,1,I4e],[D4e,3,3*I4e],[ZPt,1,HPt]]});function wae(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _ae(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ij(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function ZI(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=sj(i),f=aj(i),d=sj(s),p=aj(s),m=sj(a),h=aj(a),g=sj(l),y=aj(l),b=sj(u),x=aj(u),v={a:V,A:G,b:U,B:Y,c:null,d:B4e,e:B4e,f:vLt,g:DLt,G:FLt,H:yLt,I:bLt,j:xLt,L:G4e,m:wLt,M:_Lt,p:X,q:pe,Q:U4e,s:V4e,S:SLt,u:CLt,U:ELt,V:TLt,w:ALt,W:kLt,x:null,X:null,y:ILt,Y:NLt,Z:OLt,"%":z4e},w={a:$,A:F,b:z,B:q,c:null,d:$4e,e:$4e,f:PLt,g:HLt,G:XLt,H:MLt,I:RLt,j:jLt,L:q4e,m:LLt,M:BLt,p:ee,q:ae,Q:U4e,s:V4e,S:$Lt,u:zLt,U:ULt,V:VLt,w:GLt,W:WLt,x:null,X:null,y:qLt,Y:YLt,Z:KLt,"%":z4e},_={a:N,A:k,b:M,B:I,c:L,d:P4e,e:P4e,f:pLt,g:j4e,G:R4e,H:L4e,I:L4e,j:uLt,L:dLt,m:lLt,M:cLt,p:A,q:aLt,Q:hLt,s:gLt,S:fLt,u:rLt,U:nLt,V:oLt,w:tLt,W:iLt,x:P,X:R,y:j4e,Y:R4e,Z:sLt,"%":mLt};v.x=C(n,v),v.X=C(o,v),v.c=C(r,v),w.x=C(n,w),w.X=C(o,w),w.c=C(r,w);function C(Q,le){return function(ie){var Z=[],ge=-1,ne=0,ye=Q.length,xe,Ne,Ae;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(Z.push(Q.slice(ne,ge)),(Ne=M4e[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):Ne=xe==="e"?" ":"0",(Ae=le[xe])&&(xe=Ae(ie,Ne)),Z.push(xe),ne=ge+1);return Z.push(Q.slice(ne,ge)),Z.join("")}}function S(Q,le){return function(ie){var Z=ij(1900,void 0,1),ge=E(Z,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ne=_ae(ij(Z.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?YI.ceil(ne):YI(ne),ne=I0.offset(ne,(Z.V-1)*7),Z.y=ne.getUTCFullYear(),Z.m=ne.getUTCMonth(),Z.d=ne.getUTCDate()+(Z.w+6)%7):(ne=wae(ij(Z.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?HI.ceil(ne):HI(ne),ne=k0.offset(ne,(Z.V-1)*7),Z.y=ne.getFullYear(),Z.m=ne.getMonth(),Z.d=ne.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ye="Z"in Z?_ae(ij(Z.y,0,1)).getUTCDay():wae(ij(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ye+5)%7:Z.w+Z.U*7-(ye+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,_ae(Z)):wae(Z)}}function E(Q,le,ie,Z){for(var ge=0,ne=le.length,ye=ie.length,xe,Ne;ge<ne;){if(Z>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),Ne=_[xe in M4e?le.charAt(ge++):xe],!Ne||(Z=Ne(Q,ie,Z))<0)return-1}else if(xe!=ie.charCodeAt(Z++))return-1}return Z}function A(Q,le,ie){var Z=c.exec(le.slice(ie));return Z?(Q.p=f.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function N(Q,le,ie){var Z=m.exec(le.slice(ie));return Z?(Q.w=h.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function k(Q,le,ie){var Z=d.exec(le.slice(ie));return Z?(Q.w=p.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function M(Q,le,ie){var Z=b.exec(le.slice(ie));return Z?(Q.m=x.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function I(Q,le,ie){var Z=g.exec(le.slice(ie));return Z?(Q.m=y.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function Y(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function pe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function F(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=C(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=S(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=C(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=S(Q+="",!0);return le.toString=function(){return Q},le}}}function io(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function eLt(t){return t.replace(JPt,"\\$&")}function sj(t){return new RegExp("^(?:"+t.map(eLt).join("|")+")","i")}function aj(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function tLt(t,r,n){var o=Wa.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function rLt(t,r,n){var o=Wa.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function nLt(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function oLt(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function iLt(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function R4e(t,r,n){var o=Wa.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function j4e(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function sLt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function aLt(t,r,n){var o=Wa.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function lLt(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function P4e(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function uLt(t,r,n){var o=Wa.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function L4e(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function cLt(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function fLt(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function dLt(t,r,n){var o=Wa.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function pLt(t,r,n){var o=Wa.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function mLt(t,r,n){var o=QPt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function hLt(t,r,n){var o=Wa.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function gLt(t,r,n){var o=Wa.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function B4e(t,r){return io(t.getDate(),r,2)}function yLt(t,r){return io(t.getHours(),r,2)}function bLt(t,r){return io(t.getHours()%12||12,r,2)}function xLt(t,r){return io(1+k0.count(Tm(t),t),r,3)}function G4e(t,r){return io(t.getMilliseconds(),r,3)}function vLt(t,r){return G4e(t,r)+"000"}function wLt(t,r){return io(t.getMonth()+1,r,2)}function _Lt(t,r){return io(t.getMinutes(),r,2)}function SLt(t,r){return io(t.getSeconds(),r,2)}function CLt(t){var r=t.getDay();return r===0?7:r}function ELt(t,r){return io(cw.count(Tm(t)-1,t),r,2)}function W4e(t){var r=t.getDay();return r>=4||r===0?fw(t):fw.ceil(t)}function TLt(t,r){return t=W4e(t),io(fw.count(Tm(t),t)+(Tm(t).getDay()===4),r,2)}function ALt(t){return t.getDay()}function kLt(t,r){return io(HI.count(Tm(t)-1,t),r,2)}function ILt(t,r){return io(t.getFullYear()%100,r,2)}function DLt(t,r){return t=W4e(t),io(t.getFullYear()%100,r,2)}function NLt(t,r){return io(t.getFullYear()%1e4,r,4)}function FLt(t,r){var n=t.getDay();return t=n>=4||n===0?fw(t):fw.ceil(t),io(t.getFullYear()%1e4,r,4)}function OLt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+io(r/60|0,"0",2)+io(r%60,"0",2)}function $4e(t,r){return io(t.getUTCDate(),r,2)}function MLt(t,r){return io(t.getUTCHours(),r,2)}function RLt(t,r){return io(t.getUTCHours()%12||12,r,2)}function jLt(t,r){return io(1+I0.count(Am(t),t),r,3)}function q4e(t,r){return io(t.getUTCMilliseconds(),r,3)}function PLt(t,r){return q4e(t,r)+"000"}function LLt(t,r){return io(t.getUTCMonth()+1,r,2)}function BLt(t,r){return io(t.getUTCMinutes(),r,2)}function $Lt(t,r){return io(t.getUTCSeconds(),r,2)}function zLt(t){var r=t.getUTCDay();return r===0?7:r}function ULt(t,r){return io(dw.count(Am(t)-1,t),r,2)}function H4e(t){var r=t.getUTCDay();return r>=4||r===0?pw(t):pw.ceil(t)}function VLt(t,r){return t=H4e(t),io(pw.count(Am(t),t)+(Am(t).getUTCDay()===4),r,2)}function GLt(t){return t.getUTCDay()}function WLt(t,r){return io(YI.count(Am(t)-1,t),r,2)}function qLt(t,r){return io(t.getUTCFullYear()%100,r,2)}function HLt(t,r){return t=H4e(t),io(t.getUTCFullYear()%100,r,2)}function YLt(t,r){return io(t.getUTCFullYear()%1e4,r,4)}function XLt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?pw(t):pw.ceil(t),io(t.getUTCFullYear()%1e4,r,4)}function KLt(){return"+0000"}function z4e(){return"%"}function U4e(t){return+t}function V4e(t){return Math.floor(+t/1e3)}var M4e,Wa,QPt,JPt,Sae=D(()=>{"use strict";yae();M4e={"-":"",_:" ",0:"0"},Wa=/^\s*\d+/,QPt=/^%/,JPt=/[\\^$*+?|[\]().{}]/g});function Cae(t){return QI=ZI(t),M7=QI.format,R7=QI.parse,j7=QI.utcFormat,P7=QI.utcParse,QI}var QI,M7,R7,j7,P7,Y4e=D(()=>{"use strict";Sae();Cae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var X4e=D(()=>{"use strict";Y4e();Sae()});function lj(t){let r={};return n=>r[n]||(r[n]=t(n))}function ZLt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=QLt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function QLt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function J4e(t){let r=lj(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Cx(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return ZLt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Cx(a??",f");let l=eae(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=cae(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=fae(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=uae(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function JLt(){return Eae=J4e({format:A7,formatPrefix:k7})}function e4t(t){return J4e(K3(t))}function K4e(t){return arguments.length?Eae=e4t(t):Eae}function Z4e(t,r,n){n=n||{},V3(n)||Ws(`Invalid time multi-format specifier: ${n}`);let o=r(N0),i=r(Dm),s=r(Im),a=r(km),l=r(Lc),u=r(Kf),c=r(Nm),f=r(Ku),d=t(n[Ax]||".%L"),p=t(n[N0]||":%S"),m=t(n[Dm]||"%I:%M"),h=t(n[Im]||"%I %p"),g=t(n[km]||n[D0]||"%a %d"),y=t(n[Lc]||"%b %d"),b=t(n[Kf]||"%B"),x=t(n[Nm]||"%B"),v=t(n[Ku]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?m:a(w)<w?h:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function e5e(t){let r=lj(t.format),n=lj(t.utcFormat);return{timeFormat:o=>b7(o)?r(o):Z4e(r,N4e,o),utcFormat:o=>b7(o)?n(o):Z4e(n,F4e,o),timeParse:lj(t.parse),utcParse:lj(t.utcParse)}}function t4t(){return Tae=e5e({format:M7,parse:R7,utcFormat:j7,utcParse:P7})}function r4t(t){return e5e(ZI(t))}function L7(t){return arguments.length?Tae=r4t(t):Tae}function t5e(t,r){let n=arguments.length;return n&&n!==2&&Ws("defaultLocale expects either zero or two arguments."),n?Q4e(K4e(t),L7(r)):Q4e(K4e(),L7())}var Eae,Tae,Q4e,Aae=D(()=>{"use strict";zLe();i4e();O4e();W3();X4e();JLt();t4t();Q4e=(t,r)=>C0({},t,r)});function s4t(t,r){return n=>({options:n||{},sanitize:l4t,load:a4t,fileAccess:!!r,file:u4t(r),http:f4t(t)})}function a4t(t,r){return Be(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function l4t(t,r){return Be(this,null,function*(){r=C0({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=o4t.test(t.replace(i4t,""));(t==null||typeof t!="string"||!l)&&Ws("Sanitize failure, invalid URI: "+x7(t));let u=n4t.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(r5e))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(r5e.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function u4t(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):c4t}function c4t(){return Be(this,null,function*(){Ws("No file system access.")})}function f4t(t){return t?function(r,n){return Be(this,null,function*(){let o=C0({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Xf(s[i])?s[i]():s.text():Ws(s.status+""+s.statusText)})}:d4t}function d4t(){return Be(this,null,function*(){Ws("No HTTP fetch method available.")})}function b4t(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=B7.length,i=B7.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&p4t(u)&&!B7[l](u)&&(i[l]=0,++a,a===B7.length))return"string";return y4t[i.reduce((s,a)=>s===0?a:s,0)-1]}function x4t(t,r){return r.reduce((n,o)=>(n[o]=b4t(t,o),n),{})}function o5e(t){let r=function(n,o){let i={delimiter:t};return Iae(n,o?C0(o,i):i)};return r.responseType="text",r}function Iae(t,r){return r.header&&(t=r.header.map(x7).join(r.delimiter)+`
`+t),Wse(r.delimiter).parse(t+"")}function v4t(t){return typeof Buffer=="function"&&Xf(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Dae(t,r){let n=r&&r.property?Lse(r.property):VI;return V3(t)&&!v4t(t)?w4t(n(t),r):n(JSON.parse(t))}function w4t(t,r){return!Jd(t)&&bLe(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function s5e(t,r){let n,o,i,s;return t=Dae(t,r),r&&r.feature?(n=BC,i=r.feature):r&&r.mesh?(n=$C,i=r.mesh,s=_4t[r.filter]):Ws("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):Ws("Invalid TopoJSON object: "+i),o&&o.features||[o]}function a5e(t,r){return arguments.length>1?(kae[t]=r,this):WI(kae,t)?kae[t]:null}function l5e(t){let r=a5e(t);return r&&r.responseType||"text"}function u5e(t,r,n,o){r=r||{};let i=a5e(r.type||"json");return i||Ws("Unknown data format type: "+r.type),t=i(t,r),r.parse&&S4t(t,r.parse,n,o),WI(t,"columns")&&delete t.columns,t}function S4t(t,r,n,o){if(!t.length)return;let i=L7();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=x4t(t,s)),s=Object.keys(r);let p=s.map(m=>{let h=r[m],g,y;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return g=h.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!n5e[h])throw Error("Illegal format pattern: "+m+":"+h);return n5e[h]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var n4t,o4t,i4t,r5e,p4t,m4t,h4t,i5e,g4t,n5e,B7,y4t,_4t,kae,c5e,f5e=D(()=>{"use strict";W3();TLe();C7();Aae();n4t=/^(data:|([A-Za-z]+:)?\/\/)/,o4t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,i4t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,r5e="file://";p4t=t=>t!=null&&t===t,m4t=t=>t==="true"||t==="false"||t===!0||t===!1,h4t=t=>!Number.isNaN(Date.parse(t)),i5e=t=>!Number.isNaN(+t)&&!(t instanceof Date),g4t=t=>i5e(t)&&Number.isInteger(+t),n5e={boolean:xLe,integer:$se,number:$se,date:vLe,string:wLe,unknown:VI},B7=[m4t,g4t,i5e,h4t],y4t=["boolean","integer","number","date"];Iae.responseType="text";Dae.responseType="json";_4t={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};s5e.responseType="json";kae={dsv:Iae,csv:o5e(","),tsv:o5e("	"),json:Dae,topojson:s5e};c5e=s4t(typeof fetch<"u"&&fetch,null)});function V7(t){let r=t||VI,n=[],o={};return n.add=i=>{let s=r(i);return o[s]||(o[s]=1,n.push(i)),n},n.remove=i=>{let s=r(i);if(o[s]){o[s]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function fj(t,r){return Be(this,null,function*(){try{yield r(t)}catch(n){t.error(n)}})}function qC(t){return!!(t&&br(t))}function br(t){return t[b5e]}function x5e(t,r){return t[b5e]=r,t}function An(t){let r=t===Object(t)?t:{data:t};return br(r)?r:x5e(r,C4t++)}function G7(t){return HC(t,An({}))}function HC(t,r){for(let n in t)r[n]=t[n];return r}function W7(t,r){return x5e(r,br(t))}function O0(t,r){return t?r?(n,o)=>t(n,o)||br(r(n))-br(r(o)):(n,o)=>t(n,o)||br(n)-br(o):null}function Fae(t){return t&&t.constructor===Nx}function Nx(){let t=[],r=[],n=[],o=[],i=[],s=null,a=!1;return{constructor:Nx,insert(l){let u=GI(l),c=u.length;for(let f=0;f<c;++f)t.push(u[f]);return this},remove(l){let u=Xf(l)?o:r,c=GI(l),f=c.length;for(let d=0;d<f;++d)u.push(c[d]);return this},modify(l,u,c){let f={field:u,value:G3(c)};return Xf(l)?(f.filter=l,i.push(f)):(f.tuple=l,n.push(f)),this},encode(l,u){return Xf(l)?i.push({filter:l,field:u}):n.push({tuple:l,field:u}),this},clean(l){return s=l,this},reflow(){return a=!0,this},pulse(l,u){let c={},f={},d,p,m,h,g,y;for(d=0,p=u.length;d<p;++d)c[br(u[d])]=1;for(d=0,p=r.length;d<p;++d)g=r[d],c[br(g)]=-1;for(d=0,p=o.length;d<p;++d)h=o[d],u.forEach(x=>{h(x)&&(c[br(x)]=-1)});for(d=0,p=t.length;d<p;++d)g=t[d],y=br(g),c[y]?c[y]=1:l.add.push(An(t[d]));for(d=0,p=u.length;d<p;++d)g=u[d],c[br(g)]<0&&l.rem.push(g);function b(x,v,w){w?x[v]=w(x):l.encode=v,a||(f[br(x)]=x)}for(d=0,p=n.length;d<p;++d)m=n[d],g=m.tuple,h=m.field,y=c[br(g)],y>0&&(b(g,h,m.value),l.modifies(h));for(d=0,p=i.length;d<p;++d)m=i[d],h=m.filter,u.forEach(x=>{h(x)&&c[br(x)]>0&&b(x,m.field,m.value)}),l.modifies(m.field);if(a)l.mod=r.length||o.length?u.filter(x=>c[br(x)]>0):u.slice();else for(y in f)l.mod.push(f[y]);return(s||s==null&&(r.length||o.length))&&l.clean(!0),l}}}function dj(){Object.defineProperty(this,z7,{writable:!0,value:{}})}function Oo(t,r,n,o){this.id=++E4t,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,r&&(this._update=r),n&&this.parameters(n,o)}function d5e(t){return function(r){let n=this.flags;return arguments.length===0?!!(n&t):(this.flags=r?n|t:n&~t,this)}}function D4t(t,r,n,o){let i=1,s;return t instanceof Oo?s=t:t&&t.prototype instanceof Oo?s=new t:Xf(t)?s=new Oo(null,t):(i=0,s=new Oo(t,r)),this.rank(s),i&&(o=n,n=r),n&&this.connect(s,s.parameters(n,o)),this.touch(s),s}function N4t(t,r){let n=t.rank,o=r.length;for(let i=0;i<o;++i)if(n<r[i].rank){this.rerank(t);return}}function eD(t,r,n){this.id=++F4t,this.value=null,n&&(this.receive=n),t&&(this._filter=t),r&&(this._apply=r)}function mw(t,r,n){return new eD(t,r,n)}function O4t(t,r,n,o){let i=this,s=mw(n,o),a=function(c){c.dataflow=i;try{s.receive(c)}catch(f){i.error(f)}finally{i.run()}},l;typeof t=="string"&&typeof document<"u"?l=document.querySelectorAll(t):l=GI(t);let u=l.length;for(let c=0;c<u;++c)l[c].addEventListener(r,a);return s}function M4t(t,r){let n=this.locale();return u5e(t,r,n.timeParse,n.utcParse)}function R4t(t,r,n){return r=this.parse(r,n),this.pulse(t,this.changeset().insert(r))}function j4t(t,r){return Be(this,null,function*(){let n=this,o=0,i;try{i=yield n.loader().load(t,{context:"dataflow",response:l5e(r&&r.type)});try{i=n.parse(i,r)}catch(s){o=-2,n.warn("Data ingestion failed",t,s)}}catch(s){o=-1,n.warn("Loading failed",t,s)}return{data:i,status:o}})}function P4t(t,r,n){return Be(this,null,function*(){let o=this,i=o._pending||L4t(o);i.requests+=1;let s=yield o.request(r,n);return o.pulse(t,o.changeset().remove(y7).insert(s.data||[])),i.done(),s})}function L4t(t){let r,n=new Promise(o=>r=o);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,r(t))},t._pending=n}function $4t(t,r,n,o,i){return(t instanceof Oo?U4t:z4t)(this,t,r,n,o,i),this}function z4t(t,r,n,o,i,s){let a=C0({},s,B4t),l,u;Xf(n)||(n=G3(n)),o===void 0?l=c=>t.touch(n(c)):Xf(o)?(u=new Oo(null,o,i,!1),l=c=>{u.evaluate(c);let f=n(c),d=u.value;Fae(d)?t.pulse(f,d,s):t.update(f,d,a)}):l=c=>t.update(n(c),o,a),r.apply(l)}function U4t(t,r,n,o,i,s){if(o===void 0)r.targets().add(n);else{let a=s||{},l=new Oo(null,V4t(n,o),i,!1);l.modified(a.force),l.rank=r.rank,r.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),t.connect(n,[l]))}}function V4t(t,r){return r=Xf(r)?r:G3(r),t?function(n,o){let i=r(n,o);return t.skip()||(t.skip(i!==this.value).value=i),i}:r}function G4t(t){t.rank=++this._rank}function W4t(t){let r=[t],n,o,i;for(;r.length;)if(this.rank(n=r.pop()),o=n._targets)for(i=o.length;--i>=0;)r.push(n=o[i]),n===t&&Ws("Cycle detected in dataflow graph.")}function Ix(t,r,n){this.dataflow=t,this.stamp=r??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Nae(t,r){let n=[];return uw(t,r,o=>n.push(o)),n}function y5e(t,r){let n={};return t.visit(r,o=>{n[br(o)]=1}),o=>n[br(o)]?null:o}function $7(t,r){return t?(n,o)=>t(n,o)&&r(n,o):r}function q7(t,r,n,o){let i=this,s=0;this.dataflow=t,this.stamp=r,this.fields=null,this.encode=o||null,this.pulses=n;for(let a of n)if(a.stamp===r){if(a.fields){let l=i.fields||(i.fields={});for(let u in a.fields)l[u]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}function H4t(t,r,n){return Be(this,null,function*(){let o=this,i=[];if(o._pulse)return v5e(o);if(o._pending&&(yield o._pending),r&&(yield fj(o,r)),!o._touched.length)return o.debug("Dataflow invoked, but nothing to do."),o;let s=++o._clock;o._pulse=new Ix(o,s,t),o._touched.forEach(f=>o._enqueue(f,!0)),o._touched=V7(U3);let a=0,l,u,c;try{for(;o._heap.size()>0;){if(l=o._heap.pop(),l.rank!==l.qrank){o._enqueue(l,!0);continue}u=l.run(o._getPulse(l,t)),u.then?u=yield u:u.async&&(i.push(u.async),u=U7),u!==U7&&l._targets&&l._targets.forEach(f=>o._enqueue(f)),++a}}catch(f){o._heap.clear(),c=f}if(o._input={},o._pulse=null,o.debug(`Pulse ${s}: ${a} operators`),c&&(o._postrun=[],o.error(c)),o._postrun.length){let f=o._postrun.sort((d,p)=>p.priority-d.priority);o._postrun=[];for(let d=0;d<f.length;++d)yield fj(o,f[d].callback)}return n&&(yield fj(o,n)),i.length&&Promise.all(i).then(f=>o.runAsync(null,()=>{f.forEach(d=>{try{d(o)}catch(p){o.error(p)}})})),o})}function Y4t(t,r,n){return Be(this,null,function*(){for(;this._running;)yield this._running;let o=()=>this._running=null;return(this._running=this.evaluate(t,r,n)).then(o,o),this._running})}function X4t(t,r,n){return this._pulse?v5e(this):(this.evaluate(t,r,n),this)}function K4t(t,r,n){if(this._pulse||r)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(o){this.error(o)}}function v5e(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Z4t(t,r){let n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||r)&&(t.qrank=t.rank,this._heap.push(t))}function Q4t(t,r){let n=t.source,o=this._clock;return n&&Jd(n)?new q7(this,o,n.map(i=>i.pulse),r):this._input[t.id]||J4t(this._pulse,n&&n.pulse)}function J4t(t,r){return r&&r.stamp===t.stamp?r:(t=t.fork(),r&&r!==U7&&(t.source=r.source),t)}function e5t(t,r){let n=r||Oae;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function t5t(t,r,n){let o=n||Oae;return(t.set(r)||o.force)&&this.touch(t,o),this}function r5t(t,r,n){this.touch(t,n||Oae);let o=new Ix(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return o.target=t,this._input[t.id]=r.pulse(o,i),this}function n5t(t){let r=[];return{clear:()=>r=[],size:()=>r.length,peek:()=>r[0],push:n=>(r.push(n),w5e(r,0,r.length-1,t)),pop:()=>{let n=r.pop(),o;return r.length?(o=r[0],r[0]=n,o5t(r,0,t)):o=n,o}}}function w5e(t,r,n,o){let i,s,a=t[n];for(;n>r;){if(s=n-1>>1,i=t[s],o(a,i)<0){t[n]=i,n=s;continue}break}return t[n]=a}function o5t(t,r,n){let o=r,i=t.length,s=t[r],a=(r<<1)+1,l;for(;a<i;)l=a+1,l<i&&n(t[a],t[l])>=0&&(a=l),t[r]=t[a],r=a,a=(r<<1)+1;return t[r]=s,w5e(t,o,r,n)}function gw(){this.logger(gLe()),this.logLevel(Bse),this._clock=0,this._rank=0,this._locale=t5e();try{this._loader=c5e()}catch{}this._touched=V7(U3),this._input={},this._pulse=null,this._heap=n5t((t,r)=>t.qrank-r.qrank),this._postrun=[]}function cj(t){return function(){return this._log[t].apply(this,arguments)}}function et(t,r){Oo.call(this,t,null,r)}function H7(t){let r=Mae(t);return r&&r.Definition||null}function Mae(t){return t=t&&t.toLowerCase(),WI(Dx,t)?Dx[t]:null}var b5e,C4t,z7,E4t,T4t,A4t,k4t,I4t,F4t,B4t,U7,F0,hw,kx,q4t,p5e,JI,m5e,uj,h5e,g5e,Oae,Dx,qa=D(()=>{"use strict";W3();f5e();Aae();b5e=Symbol("vega_id"),C4t=1;z7="_:mod:_";dj.prototype={set(t,r,n,o){let i=this,s=i[t],a=i[z7];return r!=null&&r>=0?(s[r]!==n||o)&&(s[r]=n,a[r+":"+t]=-1,a[t]=-1):(s!==n||o)&&(i[t]=n,a[t]=Jd(n)?1+n.length:-1),i},modified(t,r){let n=this[z7];if(arguments.length){if(Jd(t)){for(let o=0;o<t.length;++o)if(n[t[o]])return!0;return!1}}else{for(let o in n)if(n[o])return!0;return!1}return r!=null&&r>=0?r+1<n[t]||!!n[r+":"+t]:!!n[t]},clear(){return this[z7]={},this}};E4t=0,T4t="pulse",A4t=new dj,k4t=1,I4t=2;Oo.prototype={targets(){return this._targets||(this._targets=V7(U3))},set(t){return this.value!==t?(this.value=t,1):0},skip:d5e(k4t),modified:d5e(I4t),parameters(t,r,n){r=r!==!1;let o=this._argval=this._argval||new dj,i=this._argops=this._argops||[],s=[],a,l,u,c,f=(d,p,m)=>{m instanceof Oo?(m!==this&&(r&&m.targets().add(this),s.push(m)),i.push({op:m,name:d,index:p})):o.set(d,p,m)};for(a in t)if(l=t[a],a===T4t)GI(l).forEach(d=>{d instanceof Oo?d!==this&&(d.targets().add(this),s.push(d)):Ws("Pulse parameters must be operator instances.")}),this.source=l;else if(Jd(l))for(o.set(a,-1,Array(u=l.length)),c=0;c<u;++c)f(a,c,l[c]);else f(a,-1,l);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(t){let r=this._argval||A4t,n=this._argops,o,i,s,a;if(n){let l=n.length;for(i=0;i<l;++i)o=n[i],s=o.op,a=s.modified()&&s.stamp===t,r.set(o.name,o.index,s.value,a);if(n.initonly){for(i=0;i<l;++i)o=n[i],o.op.targets().remove(this);this._argops=null,this._update=null}}return r},detach(){let t=this._argops,r,n,o,i;if(t)for(r=0,n=t.length;r<n;++r)o=t[r],i=o.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let r=this._update;if(r){let n=this.marshall(t.stamp),o=r.call(this,n,t);if(n.clear(),o!==this.value)this.value=o;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?(this.skip(!1),r=0):r=this.evaluate(t),this.pulse=r||t}};F4t=0;eD.prototype={_filter:y7,_apply:VI,targets(){return this._targets||(this._targets=V7(U3))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let r=this.value=this._apply(t),n=this._targets,o=n?n.length:0;for(let i=0;i<o;++i)n[i].receive(r);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let r=mw(t);return this.targets().add(r),r},apply(t){let r=mw(null,t);return this.targets().add(r),r},merge(){let t=mw();this.targets().add(t);for(let r=0,n=arguments.length;r<n;++r)arguments[r].targets().add(t);return t},throttle(t){let r=-1;return this.filter(()=>{let n=Date.now();return n-r>t?(r=n,1):0})},debounce(t){let r=mw();return this.targets().add(mw(null,null,yLe(t,n=>{let o=n.dataflow;r.receive(n),o&&o.run&&o.run()}))),r},between(t,r){let n=!1;return t.targets().add(mw(null,null,()=>n=!0)),r.targets().add(mw(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=y7,this._targets=null}};B4t={skip:!0};U7={},F0=1,hw=2,kx=4,q4t=F0|hw,p5e=F0|kx,JI=F0|hw|kx,m5e=8,uj=16,h5e=32,g5e=64;Ix.prototype={StopPropagation:U7,ADD:F0,REM:hw,MOD:kx,ADD_REM:q4t,ADD_MOD:p5e,ALL:JI,REFLOW:m5e,SOURCE:uj,NO_SOURCE:h5e,NO_FIELDS:g5e,fork(t){return new Ix(this.dataflow).init(this,t)},clone(){let t=this.fork(JI);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(JI|uj)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Ix(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,r){let n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(r&g5e)&&(n.fields=t.fields),r&F0?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),r&hw?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),r&kx?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),r&h5e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){let r=t||JI;return r&F0&&this.add.length||r&hw&&this.rem.length||r&kx&&this.mod.length},reflow(t){if(t)return this.fork(JI).reflow();let r=this.add.length,n=this.source&&this.source.length;return n&&n!==r&&(this.mod=this.source,r&&this.filter(kx,y5e(this,F0))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let r=this.fields||(this.fields={});return Jd(t)?t.forEach(n=>r[n]=!0):r[t]=!0,this},modified(t,r){let n=this.fields;return(r||this.mod.length)&&n?arguments.length?Jd(t)?t.some(o=>n[o]):n[t]:!!n:!1},filter(t,r){let n=this;return t&F0&&(n.addF=$7(n.addF,r)),t&hw&&(n.remF=$7(n.remF,r)),t&kx&&(n.modF=$7(n.modF,r)),t&uj&&(n.srcF=$7(n.srcF,r)),n},materialize(t){t=t||JI;let r=this;return t&F0&&r.addF&&(r.add=Nae(r.add,r.addF),r.addF=null),t&hw&&r.remF&&(r.rem=Nae(r.rem,r.remF),r.remF=null),t&kx&&r.modF&&(r.mod=Nae(r.mod,r.modF),r.modF=null),t&uj&&r.srcF&&(r.source=r.source.filter(r.srcF),r.srcF=null),r},visit(t,r){let n=this,o=r;if(t&uj)return uw(n.source,n.srcF,o),n;t&F0&&uw(n.add,n.addF,o),t&hw&&uw(n.rem,n.remF,o),t&kx&&uw(n.mod,n.modF,o);let i=n.source;if(t&m5e&&i){let s=n.add.length+n.mod.length;s===i.length||(s?uw(i,y5e(n,p5e),o):uw(i,n.srcF,o))}return n}};zse(q7,Ix,{fork(t){let r=new Ix(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&r.ADD&&this.visit(r.ADD,n=>r.add.push(n)),t&r.REM&&this.visit(r.REM,n=>r.rem.push(n)),t&r.MOD&&this.visit(r.MOD,n=>r.mod.push(n))),r},changed(t){return this.changes&t},modified(t){let r=this,n=r.fields;return n&&r.changes&r.MOD?Jd(t)?t.some(o=>n[o]):n[t]:0},filter(){Ws("MultiPulse does not support filtering.")},materialize(){Ws("MultiPulse does not support materialization.")},visit(t,r){let n=this,o=n.pulses,i=o.length,s=0;if(t&n.SOURCE)for(;s<i;++s)o[s].visit(t,r);else for(;s<i;++s)o[s].stamp===n.stamp&&o[s].visit(t,r);return n}});Oae={skip:!1,force:!1};gw.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:cj("error"),warn:cj("warn"),info:cj("info"),debug:cj("debug"),logLevel:cj("level"),cleanThreshold:1e4,add:D4t,connect:N4t,rank:G4t,rerank:W4t,pulse:r5t,touch:e5t,update:t5t,changeset:Nx,ingest:R4t,parse:M4t,preload:P4t,request:j4t,events:O4t,on:$4t,evaluate:H4t,run:X4t,runAsync:Y4t,runAfter:K4t,_enqueue:Z4t,_getPulse:Q4t};zse(et,Oo,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?this.skip(!1):r=this.evaluate(t),r=r||t,r.then?r=r.then(n=>this.pulse=n):r!==t.StopPropagation&&(this.pulse=r),r},evaluate(t){let r=this.marshall(t.stamp),n=this.transform(r,t);return r.clear(),n},transform(){}});Dx={}});function ep(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var pj=D(()=>{"use strict"});function M0(t){let r=t,n=t;t.length===1&&(r=(a,l)=>t(a)-l,n=i5t(t));function o(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}return u}function i(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)>0?c=f:u=f+1}return u}function s(a,l,u,c){u==null&&(u=0),c==null&&(c=a.length);let f=o(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:o,center:s,right:i}}function i5t(t){return(r,n)=>ep(t(r),n)}var Rae=D(()=>{"use strict";pj()});function Y7(t){return t===null?NaN:+t}function*_5e(t,r){if(r===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(o=+o)>=o&&(yield o)}}var jae=D(()=>{"use strict"});var S5e,YC,Pae,s5t,Fm,C5e=D(()=>{"use strict";pj();Rae();jae();S5e=M0(ep),YC=S5e.right,Pae=S5e.left,s5t=M0(Y7).center,Fm=YC});function Lae(t,r){let n=0,o,i=0,s=0;if(r===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(o=a-i,i+=o/++n,s+=o*(a-i));else{let a=-1;for(let l of t)(l=r(l,++a,t))!=null&&(l=+l)>=l&&(o=l-i,i+=o/++n,s+=o*(l-i))}if(n>1)return s/(n-1)}var E5e=D(()=>{"use strict"});function X7(t,r){let n=Lae(t,r);return n&&Math.sqrt(n)}var T5e=D(()=>{"use strict";E5e()});var zi,A5e=D(()=>{"use strict";zi=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(r){let n=this._partials,o=0;for(let i=0;i<this._n&&i<32;i++){let s=n[i],a=r+s,l=Math.abs(r)<Math.abs(s)?r-(a-s):s-(a-r);l&&(n[o++]=l),r=a}return n[o]=r,this._n=o+1,this}valueOf(){let r=this._partials,n=this._n,o,i,s,a=0;if(n>0){for(a=r[--n];n>0&&(o=a,i=r[--n],a=o+i,s=i-(a-o),!s););n>0&&(s<0&&r[n-1]<0||s>0&&r[n-1]>0)&&(i=s*2,o=a+i,i==o-a&&(a=o))}return a}}});function Bae(t,r){return Array.from(r,n=>t[n])}var k5e=D(()=>{"use strict"});function tD(t,r,n){var o,i=-1,s,a,l;if(r=+r,t=+t,n=+n,t===r&&n>0)return[t];if((o=r<t)&&(s=t,t=r,r=s),(l=K7(t,r,n))===0||!isFinite(l))return[];if(l>0){let u=Math.round(t/l),c=Math.round(r/l);for(u*l<t&&++u,c*l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)*l}else{l=-l;let u=Math.round(t*l),c=Math.round(r*l);for(u/l<t&&++u,c/l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)/l}return o&&a.reverse(),a}function K7(t,r,n){var o=(r-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),s=o/Math.pow(10,i);return i>=0?(s>=$ae?10:s>=zae?5:s>=Uae?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=$ae?10:s>=zae?5:s>=Uae?2:1)}function Zu(t,r,n){var o=Math.abs(r-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),s=o/i;return s>=$ae?i*=10:s>=zae?i*=5:s>=Uae&&(i*=2),r<t?-i:i}var $ae,zae,Uae,I5e=D(()=>{"use strict";$ae=Math.sqrt(50),zae=Math.sqrt(10),Uae=Math.sqrt(2)});function tp(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var Vae=D(()=>{"use strict"});function XC(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}var Gae=D(()=>{"use strict"});function Z7(t,r,n=0,o=t.length-1,i=ep){for(;o>n;){if(o-n>600){let u=o-n+1,c=r-n+1,f=Math.log(u),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1),m=Math.max(n,Math.floor(r-c*d/u+p)),h=Math.min(o,Math.floor(r+(u-c)*d/u+p));Z7(t,r,m,h,i)}let s=t[r],a=n,l=o;for(mj(t,n,r),i(t[o],s)>0&&mj(t,n,o);a<l;){for(mj(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?mj(t,n,l):(++l,mj(t,l,o)),l<=r&&(n=l+1),r<=l&&(o=l-1)}return t}function mj(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}var D5e=D(()=>{"use strict";pj()});function KC(t,r,n){if(t=Float64Array.from(_5e(t,n)),!!(o=t.length)){if((r=+r)<=0||o<2)return XC(t);if(r>=1)return tp(t);var o,i=(o-1)*r,s=Math.floor(i),a=tp(Z7(t,s).subarray(0,s+1)),l=XC(t.subarray(s+1));return a+(l-a)*(i-s)}}function hj(t,r,n=Y7){if(o=t.length){if((r=+r)<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var Wae=D(()=>{"use strict";Vae();Gae();D5e();jae()});function Q7(t,r){let n=0,o=0;if(r===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,o+=i);else{let i=-1;for(let s of t)(s=r(s,++i,t))!=null&&(s=+s)>=s&&(++n,o+=s)}if(n)return o/n}var N5e=D(()=>{"use strict"});function gj(t,r){return KC(t,.5,r)}var F5e=D(()=>{"use strict";Wae()});function*a5t(t){for(let r of t)yield*PTe(r)}function rD(t){return Array.from(a5t(t))}var O5e=D(()=>{"use strict"});function qs(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var M5e=D(()=>{"use strict"});function nD(t,r){let n=0;if(r===void 0)for(let o of t)(o=+o)&&(n+=o);else{let o=-1;for(let i of t)(i=+r(i,++o,t))&&(n+=i)}return n}var R5e=D(()=>{"use strict"});var Vo=D(()=>{"use strict";C5e();pj();Rae();T5e();A5e();Vae();N5e();F5e();O5e();Gae();k5e();Wae();M5e();R5e();I5e()});function*L5e(t,r){if(r==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)o=r(o,++n,t),o!=null&&o!==""&&(o=+o)>=o&&(yield o)}}function J7(t,r,n){let o=Float64Array.from(L5e(t,n));return o.sort(ep),r.map(i=>hj(o,i))}function e9(t,r){return J7(t,[.25,.5,.75],r)}function t9(t,r){let n=t.length,o=X7(t,r),i=e9(t,r),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(o,s)||o||Math.abs(i[0])||1)*Math.pow(n,-.2)}function qae(t){let r=t.maxbins||20,n=t.base||10,o=Math.log(n),i=t.divide||[5,2],s=t.extent[0],a=t.extent[1],l,u,c,f,d,p,m=t.span||a-s||Math.abs(s)||1;if(t.step)l=t.step;else if(t.steps){for(f=m/r,d=0,p=t.steps.length;d<p&&t.steps[d]<f;++d);l=t.steps[Math.max(0,d-1)]}else{for(u=Math.ceil(Math.log(r)/o),c=t.minstep||0,l=Math.max(c,Math.pow(n,Math.round(Math.log(m)/o)-u));Math.ceil(m/l)>r;)l*=n;for(d=0,p=i.length;d<p;++d)f=l/i[d],f>=c&&m/f<=r&&(l=f)}f=Math.log(l);let h=f>=0?0:~~(-f/o)+1,g=Math.pow(n,-h-1);return(t.nice||t.nice===void 0)&&(f=Math.floor(s/l+g)*l,s=s<f?f-l:f,a=Math.ceil(a/l)*l),{start:s,stop:a===s?s+l:a,step:l}}function l5t(t){Zf=t}function Hae(t,r,n,o){if(!t.length)return[void 0,void 0];let i=Float64Array.from(L5e(t,o)),s=i.length,a=r,l,u,c,f;for(c=0,f=Array(a);c<a;++c){for(l=0,u=0;u<s;++u)l+=i[~~(Zf()*s)];f[c]=l/s}return f.sort(ep),[KC(f,n/2),KC(f,1-n/2)]}function Yae(t,r,n,o){o=o||(p=>p);let i=t.length,s=new Float64Array(i),a=0,l=1,u=o(t[0]),c=u,f=u+r,d;for(;l<i;++l){if(d=o(t[l]),d>=f){for(c=(u+c)/2;a<l;++a)s[a]=c;f=d+r,u=d}c=d}for(c=(u+c)/2;a<l;++a)s[a]=c;return n?u5t(s,r+r/4):s}function u5t(t,r){let n=t.length,o=0,i=1,s,a;for(;t[o]===t[i];)++i;for(;i<n;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<r){for(a=i+(o+s-i-i>>1);a<i;)t[a++]=t[i];for(;a>i;)t[a--]=t[o]}o=i,i=s}return t}function c5t(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function f5t(t,r){r==null&&(r=t,t=0);let n,o,i,s={min(a){return arguments.length?(n=a||0,i=o-n,s):n},max(a){return arguments.length?(o=a||0,i=o-n,s):o},sample(){return n+Math.floor(i*Zf())},pdf(a){return a===Math.floor(a)&&a>=n&&a<o?1/i:0},cdf(a){let l=Math.floor(a);return l<n?0:l>=o?1:(l-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(t).max(r)}function bj(t,r){t=t||0,r=r??1;let n=0,o=0,i,s;if(yj===yj)n=yj,yj=NaN;else{do n=Zf()*2-1,o=Zf()*2-1,i=n*n+o*o;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,yj=o*s}return t+n*r}function r9(t,r,n){n=n??1;let o=(t-(r||0))/n;return Math.exp(-.5*o*o)/(n*B5e)}function xj(t,r,n){r=r||0,n=n??1;let o=(t-r)/n,i=Math.abs(o),s;if(i>37)s=0;else{let a=Math.exp(-i*i/2),l;i<7.07106781186547?(l=.0352624965998911*i+.700383064443688,l=l*i+6.37396220353165,l=l*i+33.912866078383,l=l*i+112.079291497871,l=l*i+221.213596169931,l=l*i+220.206867912376,s=a*l,l=.0883883476483184*i+1.75566716318264,l=l*i+16.064177579207,l=l*i+86.7807322029461,l=l*i+296.564248779674,l=l*i+637.333633378831,l=l*i+793.826512519948,l=l*i+440.413735824752,s=s/l):(l=i+.65,l=i+4/l,l=i+3/l,l=i+2/l,l=i+1/l,s=a/l/2.506628274631)}return o>0?1-s:s}function vj(t,r,n){return t<0||t>1?NaN:(r||0)+(n??1)*d5t*p5t(2*t-1)}function p5t(t){let r=-Math.log((1-t)*(1+t)),n;return r<6.25?(r-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*r,n=128584807152564e-32+n*r,n=11157877678025181e-33+n*r,n=-1333171662854621e-31+n*r,n=20972767875968562e-33+n*r,n=6637638134358324e-30+n*r,n=-4054566272975207e-29+n*r,n=-8151934197605472e-29+n*r,n=26335093153082323e-28+n*r,n=-12975133253453532e-27+n*r,n=-5415412054294628e-26+n*r,n=10512122733215323e-25+n*r,n=-4112633980346984e-24+n*r,n=-29070369957882005e-24+n*r,n=42347877827932404e-23+n*r,n=-13654692000834679e-22+n*r,n=-13882523362786469e-21+n*r,n=.00018673420803405714+n*r,n=-.000740702534166267+n*r,n=-.006033670871430149+n*r,n=.24015818242558962+n*r,n=1.6536545626831027+n*r):r<16?(r=Math.sqrt(r)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*r,n=-27517406297064545e-23+n*r,n=18239629214389228e-24+n*r,n=15027403968909828e-22+n*r,n=-4013867526981546e-21+n*r,n=29234449089955446e-22+n*r,n=12475304481671779e-21+n*r,n=-47318229009055734e-21+n*r,n=6828485145957318e-20+n*r,n=24031110387097894e-21+n*r,n=-.0003550375203628475+n*r,n=.0009532893797373805+n*r,n=-.0016882755560235047+n*r,n=.002491442096107851+n*r,n=-.003751208507569241+n*r,n=.005370914553590064+n*r,n=1.0052589676941592+n*r,n=3.0838856104922208+n*r):Number.isFinite(r)?(r=Math.sqrt(r)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*r,n=15076572693500548e-25+n*r,n=-3789465440126737e-24+n*r,n=761570120807834e-23+n*r,n=-1496002662714924e-23+n*r,n=2914795345090108e-23+n*r,n=-6771199775845234e-23+n*r,n=22900482228026655e-23+n*r,n=-99298272942317e-20+n*r,n=4526062597223154e-21+n*r,n=-1968177810553167e-20+n*r,n=7599527703001776e-20+n*r,n=-.00021503011930044477+n*r,n=-.00013871931833623122+n*r,n=1.0103004648645344+n*r,n=4.849906401408584+n*r):n=1/0,n*t}function n9(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>bj(n,o),pdf:s=>r9(s,n,o),cdf:s=>xj(s,n,o),icdf:s=>vj(s,n,o)};return i.mean(t).stdev(r)}function o9(t,r){let n=n9(),o=0,i={data(s){return arguments.length?(t=s,o=s?s.length:0,i.bandwidth(r)):t},bandwidth(s){return arguments.length?(r=s,!r&&t&&(r=t9(t)),i):r},sample(){return t[~~(Zf()*o)]+r*n.sample()},pdf(s){let a=0,l=0;for(;l<o;++l)a+=n.pdf((s-t[l])/r);return a/r/o},cdf(s){let a=0,l=0;for(;l<o;++l)a+=n.cdf((s-t[l])/r);return a/o},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function i9(t,r){return t=t||0,r=r??1,Math.exp(t+bj()*r)}function s9(t,r,n){if(t<=0)return 0;r=r||0,n=n??1;let o=(Math.log(t)-r)/n;return Math.exp(-.5*o*o)/(n*B5e*t)}function a9(t,r,n){return xj(Math.log(t),r,n)}function l9(t,r,n){return Math.exp(vj(t,r,n))}function Xae(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>i9(n,o),pdf:s=>s9(s,n,o),cdf:s=>a9(s,n,o),icdf:s=>l9(s,n,o)};return i.mean(t).stdev(r)}function Kae(t,r){let n=0,o;function i(a){let l=[],u=0,c;for(c=0;c<n;++c)u+=l[c]=a[c]==null?1:+a[c];for(c=0;c<n;++c)l[c]/=u;return l}let s={weights(a){return arguments.length?(o=i(r=a||[]),s):r},distributions(a){return arguments.length?(a?(n=a.length,t=a):(n=0,t=[]),s.weights(r)):t},sample(){let a=Zf(),l=t[n-1],u=o[0],c=0;for(;c<n-1;u+=o[++c])if(a<u){l=t[c];break}return l.sample()},pdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].pdf(a);return l},cdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].cdf(a);return l},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(r)}function u9(t,r){return r==null&&(r=t??1,t=0),t+(r-t)*Zf()}function c9(t,r,n){return n==null&&(n=r??1,r=0),t>=r&&t<=n?1/(n-r):0}function f9(t,r,n){return n==null&&(n=r??1,r=0),t<r?0:t>n?1:(t-r)/(n-r)}function d9(t,r,n){return n==null&&(n=r??1,r=0),t>=0&&t<=1?r+t*(n-r):NaN}function Zae(t,r){let n,o,i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(o=s??1,i):o},sample:()=>u9(n,o),pdf:s=>c9(s,n,o),cdf:s=>f9(s,n,o),icdf:s=>d9(s,n,o)};return r==null&&(r=t??1,t=0),i.min(t).max(r)}function wj(t,r,n,o){let i=o-t*t,s=Math.abs(i)<1e-24?0:(n-t*r)/i;return[r-s*t,s]}function p9(t,r,n,o){t=t.filter(m=>{let h=r(m),g=n(m);return h!=null&&(h=+h)>=h&&g!=null&&(g=+g)>=g}),o&&t.sort((m,h)=>r(m)-r(h));let i=t.length,s=new Float64Array(i),a=new Float64Array(i),l=0,u=0,c=0,f,d,p;for(p of t)s[l]=f=+r(p),a[l]=d=+n(p),++l,u+=(f-u)/l,c+=(d-c)/l;for(l=0;l<i;++l)s[l]-=u,a[l]-=c;return[s,a,u,c]}function _j(t,r,n,o){let i=-1,s,a;for(let l of t)s=r(l),a=n(l),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&o(s,a,++i)}function oD(t,r,n,o,i){let s=0,a=0;return _j(t,r,n,(l,u)=>{let c=u-i(l),f=u-o;s+=c*c,a+=f*f}),1-s/a}function m9(t,r,n){let o=0,i=0,s=0,a=0,l=0;_j(t,r,n,(f,d)=>{++l,o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=wj(o,i,s,a),c=f=>u[0]+u[1]*f;return{coef:u,predict:c,rSquared:oD(t,r,n,i,c)}}function Qae(t,r,n){let o=0,i=0,s=0,a=0,l=0;_j(t,r,n,(f,d)=>{++l,f=Math.log(f),o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=wj(o,i,s,a),c=f=>u[0]+u[1]*Math.log(f);return{coef:u,predict:c,rSquared:oD(t,r,n,i,c)}}function Jae(t,r,n){let[o,i,s,a]=p9(t,r,n),l=0,u=0,c=0,f=0,d=0,p,m,h;_j(t,r,n,(x,v)=>{p=o[d++],m=Math.log(v),h=p*v,l+=(v*m-l)/d,u+=(h-u)/d,c+=(h*m-c)/d,f+=(p*h-f)/d});let[g,y]=wj(u/a,l/a,c/a,f/a),b=x=>Math.exp(g+y*(x-s));return{coef:[Math.exp(g-y*s),y],predict:b,rSquared:oD(t,r,n,a,b)}}function ele(t,r,n){let o=0,i=0,s=0,a=0,l=0,u=0;_j(t,r,n,(d,p)=>{let m=Math.log(d),h=Math.log(p);++u,o+=(m-o)/u,i+=(h-i)/u,s+=(m*h-s)/u,a+=(m*m-a)/u,l+=(p-l)/u});let c=wj(o,i,s,a),f=d=>c[0]*Math.pow(d,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:f,rSquared:oD(t,r,n,l,f)}}function h9(t,r,n){let[o,i,s,a]=p9(t,r,n),l=o.length,u=0,c=0,f=0,d=0,p=0,m,h,g,y;for(m=0;m<l;)h=o[m],g=i[m++],y=h*h,u+=(y-u)/m,c+=(y*h-c)/m,f+=(y*y-f)/m,d+=(h*g-d)/m,p+=(y*g-p)/m;let b=f-u*u,x=u*b-c*c,v=(p*u-d*c)/x,w=(d*b-p*c)/x,_=-v*u,C=S=>(S=S-s,v*S*S+w*S+_+a);return{coef:[_-w*s+v*s*s+a,w-2*v*s,v],predict:C,rSquared:oD(t,r,n,a,C)}}function tle(t,r,n,o){if(o===1)return m9(t,r,n);if(o===2)return h9(t,r,n);let[i,s,a,l]=p9(t,r,n),u=i.length,c=[],f=[],d=o+1,p,m,h,g,y;for(p=0;p<d;++p){for(h=0,g=0;h<u;++h)g+=Math.pow(i[h],p)*s[h];for(c.push(g),y=new Float64Array(d),m=0;m<d;++m){for(h=0,g=0;h<u;++h)g+=Math.pow(i[h],p+m);y[m]=g}f.push(y)}f.push(c);let b=h5t(f),x=v=>{v-=a;let w=l+b[0]+b[1]*v+b[2]*v*v;for(p=3;p<d;++p)w+=b[p]*Math.pow(v,p);return w};return{coef:m5t(d,b,-a,l),predict:x,rSquared:oD(t,r,n,l,x)}}function m5t(t,r,n,o){let i=Array(t),s,a,l,u;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(l=r[s],u=1,i[s]+=l,a=1;a<=s;++a)u*=(s+1-a)/a,i[s-a]+=l*Math.pow(n,a)*u;return i[0]+=o,i}function h5t(t){let r=t.length-1,n=[],o,i,s,a,l;for(o=0;o<r;++o){for(a=o,i=o+1;i<r;++i)Math.abs(t[o][i])>Math.abs(t[o][a])&&(a=i);for(s=o;s<r+1;++s)l=t[s][o],t[s][o]=t[s][a],t[s][a]=l;for(i=o+1;i<r;++i)for(s=r;s>=o;s--)t[s][i]-=t[s][o]*t[o][i]/t[o][o]}for(i=r-1;i>=0;--i){for(l=0,s=i+1;s<r;++s)l+=t[s][i]*n[s];n[i]=(t[r][i]-l)/t[i][i]}return n}function rle(t,r,n,o){let[i,s,a,l]=p9(t,r,n,!0),u=i.length,c=Math.max(2,~~(o*u)),f=new Float64Array(u),d=new Float64Array(u),p=new Float64Array(u).fill(1);for(let m=-1;++m<=j5e;){let h=[0,c-1];for(let y=0;y<u;++y){let b=i[y],x=h[0],v=h[1],w=b-i[x]>i[v]-b?x:v,_=0,C=0,S=0,E=0,A=0,N=1/Math.abs(i[w]-b||1);for(let I=x;I<=v;++I){let L=i[I],P=s[I],R=g5t(Math.abs(b-L)*N)*p[I],V=L*R;_+=R,C+=V,S+=P*R,E+=P*V,A+=L*V}let[k,M]=wj(C/_,S/_,E/_,A/_);f[y]=k+M*b,d[y]=Math.abs(s[y]-f[y]),y5t(i,y+1,h)}if(m===j5e)break;let g=gj(d);if(Math.abs(g)<P5e)break;for(let y=0,b,x;y<u;++y)b=d[y]/(6*g),p[y]=b>=1?P5e:(x=1-b*b)*x}return b5t(i,f,a,l)}function g5t(t){return(t=1-t*t*t)*t*t}function y5t(t,r,n){let o=t[r],i=n[0],s=n[1]+1;if(!(s>=t.length))for(;r>i&&t[s]-o<=o-t[i];)n[0]=++i,n[1]=s,++s}function b5t(t,r,n,o){let i=t.length,s=[],a=0,l=0,u=[],c;for(;a<i;++a)c=t[a]+n,u[0]===c?u[1]+=(r[a]-u[1])/++l:(l=0,u[1]+=o,u=[c,r[a]],s.push(u));return u[1]+=o,s}function iD(t,r,n,o){n=n||25,o=Math.max(n,o||200);let i=g=>[g,t(g)],s=r[0],a=r[1],l=a-s,u=l/o,c=[i(s)],f=[];if(n===o){for(let g=1;g<o;++g)c.push(i(s+g/n*l));return c.push(i(a)),c}else{f.push(i(a));for(let g=n;--g>0;)f.push(i(s+g/n*l))}let d=c[0],p=f[f.length-1],m=1/l,h=v5t(d[1],f);for(;p;){let g=i((d[0]+p[0])/2);g[0]-d[0]>=u&&w5t(d,g,p,m,h)>x5t?f.push(g):(d=p,c.push(p),f.pop()),p=f[f.length-1]}return c}function v5t(t,r){let n=t,o=t,i=r.length;for(let s=0;s<i;++s){let a=r[s][1];a<n&&(n=a),a>o&&(o=a)}return 1/(o-n)}function w5t(t,r,n,o,i){let s=Math.atan2(i*(n[1]-t[1]),o*(n[0]-t[0])),a=Math.atan2(i*(r[1]-t[1]),o*(r[0]-t[0]));return Math.abs(s-a)}var Zf,B5e,d5t,yj,j5e,P5e,x5t,sD=D(()=>{"use strict";Vo();Zf=Math.random;B5e=Math.sqrt(2*Math.PI),d5t=Math.SQRT2,yj=NaN;j5e=2,P5e=1e-12;x5t=.5*Math.PI/180});function Zn(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),r(s,1),t(s),s},i.round=function(s){var a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=function(s,a){return r(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,l){var u=[],c;if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=function(s){return Zn(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,l){if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););})},n&&(i.count=function(s,a){return nle.setTime(+s),ole.setTime(+a),t(nle),t(ole),Math.floor(n(nle,ole))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?function(a){return o(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var nle,ole,Qu=D(()=>{"use strict";nle=new Date,ole=new Date});var g9,yw,$5e,ile=D(()=>{"use strict";Qu();g9=Zn(function(){},function(t,r){t.setTime(+t+r)},function(t,r){return r-t});g9.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Zn(function(r){r.setTime(Math.floor(r/t)*t)},function(r,n){r.setTime(+r+n*t)},function(r,n){return(n-r)/t}):g9};yw=g9,$5e=g9.range});var z5e,Ju,U5e,sle=D(()=>{"use strict";Qu();z5e=Zn(function(t){t.setTime(t-t.getMilliseconds())},function(t,r){t.setTime(+t+r*1e3)},function(t,r){return(r-t)/1e3},function(t){return t.getUTCSeconds()}),Ju=z5e,U5e=z5e.range});var V5e,QC,_5t,ale=D(()=>{"use strict";Qu();V5e=Zn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getMinutes()}),QC=V5e,_5t=V5e.range});var G5e,eE,S5t,lle=D(()=>{"use strict";Qu();G5e=Zn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getHours()}),eE=G5e,S5t=G5e.range});var W5e,Qf,C5t,cle=D(()=>{"use strict";Qu();W5e=Zn(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Qf=W5e,C5t=W5e.range});function tE(t){return Zn(function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n*7)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5})}var rp,aD,H5e,Y5e,bw,X5e,K5e,Z5e,E5t,T5t,A5t,k5t,I5t,D5t,fle=D(()=>{"use strict";Qu();rp=tE(0),aD=tE(1),H5e=tE(2),Y5e=tE(3),bw=tE(4),X5e=tE(5),K5e=tE(6),Z5e=rp.range,E5t=aD.range,T5t=H5e.range,A5t=Y5e.range,k5t=bw.range,I5t=X5e.range,D5t=K5e.range});var Q5e,xw,N5t,dle=D(()=>{"use strict";Qu();Q5e=Zn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,r){t.setMonth(t.getMonth()+r)},function(t,r){return r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),xw=Q5e,N5t=Q5e.range});var ple,Jf,F5t,mle=D(()=>{"use strict";Qu();ple=Zn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r)},function(t,r){return r.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});ple.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Zn(function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n*t)})};Jf=ple,F5t=ple.range});var J5e,rE,O5t,hle=D(()=>{"use strict";Qu();J5e=Zn(function(t){t.setUTCSeconds(0,0)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getUTCMinutes()}),rE=J5e,O5t=J5e.range});var eBe,nE,M5t,gle=D(()=>{"use strict";Qu();eBe=Zn(function(t){t.setUTCMinutes(0,0,0)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getUTCHours()}),nE=eBe,M5t=eBe.range});var tBe,ed,R5t,yle=D(()=>{"use strict";Qu();tBe=Zn(function(t){t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r)},function(t,r){return(r-t)/864e5},function(t){return t.getUTCDate()-1}),ed=tBe,R5t=tBe.range});function oE(t){return Zn(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n*7)},function(r,n){return(n-r)/6048e5})}var np,lD,rBe,nBe,vw,oBe,iBe,sBe,j5t,P5t,L5t,B5t,$5t,z5t,ble=D(()=>{"use strict";Qu();np=oE(0),lD=oE(1),rBe=oE(2),nBe=oE(3),vw=oE(4),oBe=oE(5),iBe=oE(6),sBe=np.range,j5t=lD.range,P5t=rBe.range,L5t=nBe.range,B5t=vw.range,$5t=oBe.range,z5t=iBe.range});var aBe,ww,U5t,xle=D(()=>{"use strict";Qu();aBe=Zn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCMonth(t.getUTCMonth()+r)},function(t,r){return r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),ww=aBe,U5t=aBe.range});var vle,td,V5t,wle=D(()=>{"use strict";Qu();vle=Zn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)},function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});vle.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Zn(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n*t)})};td=vle,V5t=vle.range});function uBe(t,r,n,o,i,s){let a=[[Ju,1,1e3],[Ju,5,5*1e3],[Ju,15,15*1e3],[Ju,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let m=d&&typeof d.range=="function"?d:u(c,f,d),h=m?m.range(c,+f+1):[];return p?h.reverse():h}function u(c,f,d){let p=Math.abs(f-c)/d,m=M0(([,,y])=>y).right(a,p);if(m===a.length)return t.every(Zu(c/31536e6,f/31536e6,d));if(m===0)return yw.every(Math.max(Zu(c,f,d),1));let[h,g]=a[p/a[m-1][2]<a[m][2]/p?m-1:m];return h.every(g)}return[l,u]}var _le,Sle,Cle,Ele,cBe=D(()=>{"use strict";Vo();ile();sle();ale();lle();cle();fle();dle();mle();hle();gle();yle();ble();xle();wle();[_le,Sle]=uBe(td,ww,np,ed,nE,rE),[Cle,Ele]=uBe(Jf,xw,rp,Qf,eE,QC)});var Sj=D(()=>{"use strict";ile();sle();ale();lle();cle();fle();dle();mle();hle();gle();yle();ble();xle();wle();cBe()});function b9(t){let r=jr(t).slice(),n={};return r.length||pt("Missing time unit."),r.forEach(i=>{Or(Tle,i)?n[i]=1:pt("Invalid time unit: ".concat(i,"."))}),(n[Hs]||n[Tl]?1:0)+(n[ec]||n[Al]||n[tc]?1:0)+(n[j0]?1:0)>1&&pt("Incompatible time units: ".concat(t)),r.sort((i,s)=>Tle[i]-Tle[s]),r}function Fle(t,r){let n=on({},W5t,r),o=b9(t),i=o.length,s="",a=0,l,u;for(a=0;a<i;)for(l=o.length;l>a;--l)if(u=o.slice(a,l).join("-"),n[u]!=null){s+=n[u],a=l;break}return s.trim()}function Ole(t){return iE.setFullYear(t),iE.setMonth(0),iE.setDate(1),iE.setHours(0,0,0,0),iE}function Mle(t){return pBe(new Date(t))}function Rle(t){return Ale(new Date(t))}function pBe(t){return Qf.count(Ole(t.getFullYear())-1,t)}function Ale(t){return rp.count(Ole(t.getFullYear())-1,t)}function kle(t){return Ole(t).getDay()}function q5t(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(-1,r,n,o,i,s,a);return l.setFullYear(t),l}return new Date(t,r,n,o,i,s,a)}function jle(t){return mBe(new Date(t))}function Ple(t){return Ile(new Date(t))}function mBe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return ed.count(r-1,t)}function Ile(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return np.count(r-1,t)}function Dle(t){return iE.setTime(Date.UTC(t,0,1)),iE.getUTCDay()}function H5t(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(Date.UTC(-1,r,n,o,i,s,a));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(t,r,n,o,i,s,a))}function hBe(t,r,n,o,i){let s=r||1,a=Pn(t),l=(b,x,v)=>(v=v||b,Y5t(n[v],o[v],b===a&&s,x)),u=new Date,c=ru(t),f=c[Ha]?l(Ha):Ga(2012),d=c[Al]?l(Al):c[ec]?l(ec):Sm,p=c[Hs]&&c[Tl]?l(Tl,1,Hs+Tl):c[Hs]?l(Hs,1):c[Tl]?l(Tl,1):c[tc]?l(tc,1):c[j0]?l(j0,1):w0,m=c[Bc]?l(Bc):Sm,h=c[$c]?l($c):Sm,g=c[rd]?l(rd):Sm,y=c[op]?l(op):Sm;return function(b){u.setTime(+b);let x=f(u);return i(x,d(u),p(u,x),m(u),h(u),g(u),y(u))}}function Y5t(t,r,n,o){let i=n<=1?t:o?(s,a)=>o+n*Math.floor((t(s,a)-o)/n):(s,a)=>n*Math.floor(t(s,a)/n);return r?(s,a)=>r(i(s,a),a):i}function uD(t,r,n){return r+t*7-(n+6)%7}function Lle(t,r){return hBe(t,r||1,X5t,K5t,q5t)}function Ble(t,r){return hBe(t,r||1,Z5t,Q5t,H5t)}function Fx(t){return J5t[t]}function Ox(t){return eBt[t]}function gBe(t,r,n){return t?t.offset(r,n):void 0}function $le(t,r,n){return gBe(Fx(t),r,n)}function zle(t,r,n){return gBe(Ox(t),r,n)}function yBe(t,r,n,o){return t?t.range(r,n,o):void 0}function Ule(t,r,n,o){return yBe(Fx(t),r,n,o)}function Vle(t,r,n,o){return yBe(Ox(t),r,n,o)}function Gle(t){let r=t.extent,n=t.maxbins||40,o=Math.abs(LC(r))/n,i=M0(l=>l[2]).right(Cj,o),s,a;return i===Cj.length?(s=xBe,a=Zu(r[0]/Nle,r[1]/Nle,n)):i?(i=Cj[o/Cj[i-1][2]<Cj[i][2]/o?i-1:i],s=i[0],a=i[1]):(s=bBe,a=Math.max(Zu(r[0],r[1],n),1)),{units:s,step:a}}var Ha,ec,Al,Hs,tc,Tl,j0,Bc,$c,rd,op,y9,Tle,W5t,iE,X5t,K5t,Z5t,Q5t,J5t,eBt,Ej,Tj,Aj,x9,tBt,fBe,Nle,bBe,kj,Ij,Dj,rBt,nBt,dBe,xBe,Cj,cD=D(()=>{"use strict";Ts();Sj();Vo();Ha="year",ec="quarter",Al="month",Hs="week",tc="date",Tl="day",j0="dayofyear",Bc="hours",$c="minutes",rd="seconds",op="milliseconds",y9=[Ha,ec,Al,Hs,tc,Tl,j0,Bc,$c,rd,op],Tle=y9.reduce((t,r,n)=>(t[r]=1+n,t),{});W5t={[Ha]:"%Y ",[ec]:"Q%q ",[Al]:"%b ",[tc]:"%d ",[Hs]:"W%U ",[Tl]:"%a ",[j0]:"%j ",[Bc]:"%H:00",[$c]:"00:%M",[rd]:":%S",[op]:".%L",["".concat(Ha,"-").concat(Al)]:"%Y-%m ",["".concat(Ha,"-").concat(Al,"-").concat(tc)]:"%Y-%m-%d ",["".concat(Bc,"-").concat($c)]:"%H:%M"};iE=new Date;X5t={[Ha]:t=>t.getFullYear(),[ec]:t=>Math.floor(t.getMonth()/3),[Al]:t=>t.getMonth(),[tc]:t=>t.getDate(),[Bc]:t=>t.getHours(),[$c]:t=>t.getMinutes(),[rd]:t=>t.getSeconds(),[op]:t=>t.getMilliseconds(),[j0]:t=>pBe(t),[Hs]:t=>Ale(t),[Hs+Tl]:(t,r)=>uD(Ale(t),t.getDay(),kle(r)),[Tl]:(t,r)=>uD(1,t.getDay(),kle(r))},K5t={[ec]:t=>3*t,[Hs]:(t,r)=>uD(t,0,kle(r))};Z5t={[Ha]:t=>t.getUTCFullYear(),[ec]:t=>Math.floor(t.getUTCMonth()/3),[Al]:t=>t.getUTCMonth(),[tc]:t=>t.getUTCDate(),[Bc]:t=>t.getUTCHours(),[$c]:t=>t.getUTCMinutes(),[rd]:t=>t.getUTCSeconds(),[op]:t=>t.getUTCMilliseconds(),[j0]:t=>mBe(t),[Hs]:t=>Ile(t),[Tl]:(t,r)=>uD(1,t.getUTCDay(),Dle(r)),[Hs+Tl]:(t,r)=>uD(Ile(t),t.getUTCDay(),Dle(r))},Q5t={[ec]:t=>3*t,[Hs]:(t,r)=>uD(t,0,Dle(r))};J5t={[Ha]:Jf,[ec]:xw.every(3),[Al]:xw,[Hs]:rp,[tc]:Qf,[Tl]:Qf,[j0]:Qf,[Bc]:eE,[$c]:QC,[rd]:Ju,[op]:yw},eBt={[Ha]:td,[ec]:ww.every(3),[Al]:ww,[Hs]:np,[tc]:ed,[Tl]:ed,[j0]:ed,[Bc]:nE,[$c]:rE,[rd]:Ju,[op]:yw};Ej=1e3,Tj=Ej*60,Aj=Tj*60,x9=Aj*24,tBt=x9*7,fBe=x9*30,Nle=x9*365,bBe=[Ha,Al,tc,Bc,$c,rd,op],kj=bBe.slice(0,-1),Ij=kj.slice(0,-1),Dj=Ij.slice(0,-1),rBt=Dj.slice(0,-1),nBt=[Ha,Hs],dBe=[Ha,Al],xBe=[Ha],Cj=[[kj,1,Ej],[kj,5,5*Ej],[kj,15,15*Ej],[kj,30,30*Ej],[Ij,1,Tj],[Ij,5,5*Tj],[Ij,15,15*Tj],[Ij,30,30*Tj],[Dj,1,Aj],[Dj,3,3*Aj],[Dj,6,6*Aj],[Dj,12,12*Aj],[rBt,1,x9],[nBt,1,tBt],[dBe,1,fBe],[dBe,3,3*fBe],[xBe,1,Nle]]});var xue={};cn(xue,{aggregate:()=>_w,bin:()=>Xle,collect:()=>Kle,compare:()=>ABe,countpattern:()=>Zle,cross:()=>Qle,density:()=>Jle,dotbin:()=>tue,expression:()=>FBe,extent:()=>rue,facet:()=>w9,field:()=>OBe,filter:()=>oue,flatten:()=>iue,fold:()=>sue,formula:()=>aue,generate:()=>MBe,impute:()=>lue,joinaggregate:()=>uue,kde:()=>cue,key:()=>RBe,load:()=>jBe,lookup:()=>fue,multiextent:()=>PBe,multivalues:()=>LBe,params:()=>BBe,pivot:()=>due,prefacet:()=>$Be,project:()=>pue,proxy:()=>zBe,quantile:()=>mue,relay:()=>UBe,sample:()=>hue,sequence:()=>gue,sieve:()=>VBe,subflow:()=>nue,timeunit:()=>yue,tupleindex:()=>WBe,values:()=>qBe,window:()=>bue});function oBt(t){return r=>{let n=t.length,o=1,i=String(t[0](r));for(;o<n;++o)i+="|"+t[o](r);return i}}function Hle(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:oBt(t)}function _Be(t,r,n){return n||t+(r?"_"+r:"")}function sBt(t,r){return n=>on({name:t,out:n||t},iBt,r)}function SBe(t,r){return Nj[t](r)}function CBe(t,r){return t.idx-r.idx}function aBt(t){let r={};t.forEach(o=>r[o.name]=o);let n=o=>{o.req&&o.req.forEach(i=>{r[i]||n(r[i]=Nj[i]())})};return t.forEach(n),Object.values(r).sort(CBe)}function lBt(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function uBt(t,r){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,r)))}function cBt(t,r){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,r)))}function fBt(t){return this._out.forEach(r=>t[r.out]=r.value(this)),t}function EBe(t,r){let n=r||Xu,o=aBt(t),i=t.slice().sort(CBe);function s(a){this._ops=o,this._out=i,this.cell=a,this.init()}return s.prototype.init=lBt,s.prototype.add=uBt,s.prototype.rem=cBt,s.prototype.set=fBt,s.prototype.get=n,s.fields=t.map(a=>a.out),s}function Yle(t){this._key=t?_m(t):br,this.reset()}function _w(t){et.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Xle(t){et.call(this,null,t)}function TBe(t,r,n){let o=t,i=r||[],s=n||[],a={},l=0;return{add:u=>s.push(u),remove:u=>a[o(u)]=++l,size:()=>i.length,data:(u,c)=>(l&&(i=i.filter(f=>!a[o(f)]),a={},l=0),c&&u&&i.sort(u),s.length&&(i=u?Mse(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Kle(t){et.call(this,[],t)}function ABe(t){Oo.call(this,null,pBt,t)}function pBt(t){return this.value&&!t.modified()?this.value:Ase(t.fields,t.orders)}function Zle(t){et.call(this,null,t)}function mBt(t,r,n){switch(r){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}function Qle(t){et.call(this,null,t)}function hBt(t,r,n,o){for(var i=[],s={},a=t.length,l=0,u,c;l<a;++l)for(s[r]=c=t[l],u=0;u<a;++u)s[n]=t[u],o(s)&&(i.push(An(s)),s={},s[r]=c);return i}function kBe(t,r){let n=t[wBe];Or(vBe,n)||pt("Unknown distribution function: "+n);let o=vBe[n]();for(let i in t)i===yBt?o.data((t.from||r()).map(t[i])):i===gBt?o[i](t[i].map(s=>kBe(s,r))):typeof o[i]===wBe&&o[i](t[i]);return o}function Jle(t){et.call(this,null,t)}function xBt(t){return()=>t.materialize(t.SOURCE).source}function DBe(t,r){return t?t.map((n,o)=>r[o]||Ai(n)):null}function eue(t,r,n){let o=[],i=d=>d(u),s,a,l,u,c,f;if(r==null)o.push(t.map(n));else for(s={},a=0,l=t.length;a<l;++a)u=t[a],c=r.map(i),f=s[c],f||(s[c]=f=[],f.dims=c,o.push(f)),f.push(n(u));return o}function tue(t){et.call(this,null,t)}function FBe(t){Oo.call(this,null,wBt,t),this.modified(!0)}function wBt(t){let r=t.expr;return this.value&&!t.modified("expr")?this.value:Yf(n=>r(n,t),wa(r),Ai(r))}function rue(t){et.call(this,[void 0,void 0],t)}function nue(t,r){Oo.call(this,t),this.parent=r,this.count=0}function w9(t){et.call(this,{},t),this._keys=lw();let r=this._targets=[];r.active=0,r.forEach=n=>{for(let o=0,i=r.active;o<i;++o)n(r[o],o,r)}}function OBe(t){Oo.call(this,null,_Bt,t)}function _Bt(t){return this.value&&!t.modified()?this.value:Wr(t.name)?jr(t.name).map(r=>_m(r)):_m(t.name,t.as)}function oue(t){et.call(this,lw(),t)}function iue(t){et.call(this,[],t)}function sue(t){et.call(this,[],t)}function aue(t){et.call(this,null,t)}function MBe(t){et.call(this,[],t)}function lue(t){et.call(this,[],t)}function CBt(t){var r=t.method||v9.value,n;if(v9[r]==null)pt("Unrecognized imputation method: "+r);else return r===v9.value?(n=t.value!==void 0?t.value:0,()=>n):v9[r]}function EBt(t){let r=t.field;return n=>n?r(n):NaN}function TBt(t,r,n,o){var i=b=>b(y),s=[],a=o?o.slice():[],l={},u={},c,f,d,p,m,h,g,y;for(a.forEach((b,x)=>l[b]=x+1),p=0,g=t.length;p<g;++p)y=t[p],h=n(y),m=l[h]||(l[h]=a.push(h)),f=(c=r?r.map(i):SBt)+"",(d=u[f])||(d=u[f]=[],s.push(d),d.values=c),d[m-1]=y;return s.domain=a,s}function uue(t){_w.call(this,t)}function cue(t){et.call(this,null,t)}function RBe(t){Oo.call(this,null,ABt,t)}function ABt(t){return this.value&&!t.modified()?this.value:Fse(t.fields,t.flat)}function jBe(t){et.call(this,[],t),this._pending=null}function kBt(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function qle(t,r,n){n.forEach(An);let o=r.fork(r.NO_FIELDS&r.NO_SOURCE);return o.rem=t.value,t.value=o.source=o.add=n,t._pending=null,o.rem.length&&o.clean(!0),o}function fue(t){et.call(this,{},t)}function PBe(t){Oo.call(this,null,IBt,t)}function IBt(t){if(this.value&&!t.modified())return this.value;let r=t.extents,n=r.length,o=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=r[s],a[0]<o&&(o=a[0]),a[1]>i&&(i=a[1]);return[o,i]}function LBe(t){Oo.call(this,null,DBt,t)}function DBt(t){return this.value&&!t.modified()?this.value:t.values.reduce((r,n)=>r.concat(n),[])}function BBe(t){et.call(this,null,t)}function due(t){_w.call(this,t)}function NBt(t,r){let n=t.field,o=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=wa(n).concat(wa(o)),a=OBt(n,t.limit||0,r);return r.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:a.map(()=>i),fields:a.map(l=>FBt(l,n,o,s)),as:a.map(l=>l+""),modified:t.modified.bind(t)}}function FBt(t,r,n,o){return Yf(i=>r(i)===t?n(i):NaN,o,t+"")}function OBt(t,r,n){let o={},i=[];return n.visit(n.SOURCE,s=>{let a=t(s);o[a]||(o[a]=1,i.push(a))}),i.sort($3),r?i.slice(0,r):i}function $Be(t){w9.call(this,t)}function pue(t){et.call(this,null,t)}function MBt(t,r,n,o){for(let i=0,s=n.length;i<s;++i)r[o[i]]=n[i](t);return r}function zBe(t){et.call(this,null,t)}function mue(t){et.call(this,null,t)}function UBe(t){et.call(this,null,t)}function hue(t){et.call(this,[],t),this.count=0}function gue(t){et.call(this,null,t)}function VBe(t){et.call(this,null,t),this.modified(!0)}function yue(t){et.call(this,null,t)}function WBe(t){et.call(this,lw(),t)}function qBe(t){et.call(this,null,t)}function jBt(t,r,n,o){let i=Fj[t](r,n);return{init:i.init||Sm,update:function(s,a){a[o]=i.next(s)}}}function PBt(t,r,n){for(let o=r.length;n<o;++n)if(t(r[n])!=null)return n;return-1}function HBe(t){let r=jr(t.ops),n=jr(t.fields),o=jr(t.params),i=jr(t.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[],d=!0;function p(m){jr(wa(m)).forEach(h=>l[h]=1)}p(t.sort),r.forEach((m,h)=>{let g=n[h],y=Ai(g),b=_Be(m,y,i[h]);if(p(g),s.push(b),Or(Fj,m))a.push(jBt(m,n[h],o[h],b));else{if(g==null&&m!=="count"&&pt("Null aggregate field specified."),m==="count"){c.push(b);return}d=!1;let x=u[y];x||(x=u[y]=[],x.field=g,f.push(x)),x.push(SBe(m,b))}}),(c.length||f.length)&&(this.cell=BBt(f,c,d)),this.inputs=Object.keys(l)}function BBt(t,r,n){t=t.map(u=>EBe(u,u.field));let o={num:0,agg:null,store:!1,count:r};if(!n)for(var i=t.length,s=o.agg=Array(i),a=0;a<i;++a)s[a]=new t[a](o);if(o.store)var l=o.data=new Yle;return o.add=function(u){if(o.num+=1,!n){l&&l.add(u);for(let c=0;c<i;++c)s[c].add(s[c].get(u),u)}},o.rem=function(u){if(o.num-=1,!n){l&&l.rem(u);for(let c=0;c<i;++c)s[c].rem(s[c].get(u),u)}},o.set=function(u){let c,f;for(l&&l.values(),c=0,f=r.length;c<f;++c)u[r[c]]=o.num;if(!n)for(c=0,f=s.length;c<f;++c)s[c].set(u)},o.init=function(){o.num=0,l&&l.reset();for(let u=0;u<i;++u)s[u].init()},o}function bue(t){et.call(this,{},t),this._mlen=0,this._mods=[]}function $Bt(t,r,n,o){let i=o.sort,s=i&&!o.ignorePeers,a=o.frame||[null,0],l=t.data(n),u=l.length,c=s?M0(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:i||Ga(-1)};r.init();for(let d=0;d<u;++d)zBt(f,a,d,u),s&&UBt(f,c),r.update(f,l[d])}function zBt(t,r,n,o){t.p0=t.i0,t.p1=t.i1,t.i0=r[0]==null?0:Math.max(0,n-Math.abs(r[0])),t.i1=r[1]==null?o:Math.min(o,n+Math.abs(r[1])+1),t.index=n}function UBt(t,r){let n=t.i0,o=t.i1-1,i=t.compare,s=t.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(t.i0=r.left(s,s[n])),o<a&&!i(s[o],s[o+1])&&(t.i1=r.right(s,s[o]))}var Wle,iBt,Nj,Oj,kl,dBt,vBe,gBt,wBe,yBt,IBe,bBt,NBe,vBt,v9,SBt,RBt,GBe,Fj,LBt,YBe,XBe=D(()=>{"use strict";Ts();qa();sD();Vo();cD();Wle=()=>{},iBt={init:Wle,add:Wle,rem:Wle,idx:0},Nj={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,r)=>t.sum+=+r,rem:(t,r)=>t.sum-=r},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,r)=>t.product*=r,rem:(t,r)=>t.product/=r},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,r)=>(t.mean_d=r-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,r)=>(t.mean_d=r-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,r)=>t.dev+=t.mean_d*(r-t.mean),rem:(t,r)=>t.dev-=t.mean_d*(r-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,r)=>{(r<t.min||t.min===void 0)&&(t.min=r)},rem:(t,r)=>{r<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,r)=>{(r>t.max||t.max===void 0)&&(t.max=r)},rem:(t,r)=>{r>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,r,n)=>{r<t.min&&(t.argmin=n)},rem:(t,r)=>{r<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,r,n)=>{r>t.max&&(t.argmax=n)},rem:(t,r)=>{r>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},Oj=Object.keys(Nj);Oj.forEach(t=>{Nj[t]=sBt(t,Nj[t])});kl=Yle.prototype;kl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};kl.add=function(t){this._add.push(t)};kl.rem=function(t){this._rem.push(t)};kl.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,r=this._rem,n=this._key,o=t.length,i=r.length,s=Array(o-i),a={},l,u,c;for(l=0;l<i;++l)a[n(r[l])]=1;for(l=0,u=0;l<o;++l)a[n(c=t[l])]?a[n(c)]=0:s[u++]=c;return this._rem=[],this._add=s};kl.distinct=function(t){let r=this.values(),n={},o=r.length,i=0,s;for(;--o>=0;)s=t(r[o])+"",Or(n,s)||(n[s]=1,++i);return i};kl.extent=function(t){if(this._get!==t||!this._ext){let r=this.values(),n=Ise(r,t);this._ext=[r[n[0]],r[n[1]]],this._get=t}return this._ext};kl.argmin=function(t){return this.extent(t)[0]||{}};kl.argmax=function(t){return this.extent(t)[1]||{}};kl.min=function(t){let r=this.extent(t)[0];return r!=null?t(r):void 0};kl.max=function(t){let r=this.extent(t)[1];return r!=null?t(r):void 0};kl.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=e9(this.values(),t),this._get=t),this._q};kl.q1=function(t){return this.quartile(t)[0]};kl.q2=function(t){return this.quartile(t)[1]};kl.q3=function(t){return this.quartile(t)[2]};kl.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=Hae(this.values(),1e3,.05,t),this._get=t),this._ci};kl.ci0=function(t){return this.ci(t)[0]};kl.ci1=function(t){return this.ci(t)[1]};_w.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Oj},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};It(_w,et,{transform(t,r){let n=this,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.modified();return n.stamp=o.stamp,n.value&&(i||r.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),o.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),r.clean()&&n._drop&&o.clean(!0).runAfter(()=>this.clean()),n.changes(o)},cross(){let t=this,r=t.value,n=t._dnames,o=n.map(()=>({})),i=n.length;function s(l){let u,c,f,d;for(u in l)for(f=l[u].tuple,c=0;c<i;++c)o[c][d=f[n[c]]]=d}s(t._prev),s(r);function a(l,u,c){let f=n[c],d=o[c++];for(let p in d){let m=l?l+"|"+p:p;u[f]=d[p],c<i?a(m,u,c):r[m]||t.cell(m,u)}}a("",{},0)},init(t){let r=this._inputs=[],n=this._outputs=[],o={};function i(y){let b=jr(wa(y)),x=b.length,v=0,w;for(;v<x;++v)o[w=b[v]]||(o[w]=1,r.push(w))}this._dims=jr(t.groupby),this._dnames=this._dims.map(y=>{let b=Ai(y);return i(y),n.push(b),b}),this.cellkey=t.key?t.key:Hle(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let s=t.fields||[null],a=t.ops||["count"],l=t.as||[],u=s.length,c={},f,d,p,m,h,g;for(u!==a.length&&pt("Unmatched number of fields and aggregate ops."),g=0;g<u;++g){if(f=s[g],d=a[g],f==null&&d!=="count"&&pt("Null aggregate field specified."),m=Ai(f),h=_Be(d,m,l[g]),n.push(h),d==="count"){this._counts.push(h);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(SBe(d,h))}return this._measures=this._measures.map(y=>EBe(y,y.field)),{}},cellkey:Hle(),cell(t,r){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,r),this._adds[this._alen++]=n),n},newcell(t,r){let n={key:t,num:0,agg:null,tuple:this.newtuple(r,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let o=this._measures,i=o.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new o[s](n)}return n.store&&(n.data=new Yle),n},newtuple(t,r){let n=this._dnames,o=this._dims,i=o.length,s={};for(let a=0;a<i;++a)s[n[a]]=o[a](t);return r?W7(r.tuple,s):An(s)},clean(){let t=this.value;for(let r in t)t[r].num===0&&delete t[r]},add(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].add(o[i].get(t),t)},rem(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].rem(o[i].get(t),t)},celltuple(t){let r=t.tuple,n=this._counts;t.store&&t.data.values();for(let o=0,i=n.length;o<i;++o)r[n[o]]=t.num;if(!this._countOnly){let o=t.agg;for(let i=0,s=o.length;i<s;++i)o[i].set(r)}return r},changes(t){let r=this._adds,n=this._mods,o=this._prev,i=this._drop,s=t.add,a=t.rem,l=t.mod,u,c,f,d;if(o)for(c in o)u=o[c],(!i||u.num)&&a.push(u.tuple);for(f=0,d=this._alen;f<d;++f)s.push(this.celltuple(r[f])),r[f]=null;for(f=0,d=this._mlen;f<d;++f)u=n[f],(u.num===0&&i?a:l).push(this.celltuple(u)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,t}});dBt=1e-14;Xle.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};It(Xle,et,{transform(t,r){let n=t.interval!==!1,o=this._bins(t),i=o.start,s=o.step,a=t.as||["bin0","bin1"],l=a[0],u=a[1],c;return t.modified()?(r=r.reflow(!0),c=r.SOURCE):c=r.modified(wa(t.field))?r.ADD_MOD:r.ADD,r.visit(c,n?f=>{let d=o(f);f[l]=d,f[u]=d==null?null:i+s*(1+(d-i)/s)}:f=>f[l]=o(f)),r.modifies(n?a:l)},_bins(t){if(this.value&&!t.modified())return this.value;let r=t.field,n=qae(t),o=n.step,i=n.start,s=i+Math.ceil((n.stop-i)/o)*o,a,l;(a=t.anchor)!=null&&(l=a-(i+o*Math.floor((a-i)/o)),i+=l,s+=l);let u=function(c){let f=Cm(r(c));return f==null?null:f<i?-1/0:f>s?1/0:(f=Math.max(i,Math.min(f,s-o)),i+o*Math.floor(dBt+(f-i)/o))};return u.start=i,u.stop=n.stop,u.step=o,this.value=Yf(u,wa(r),t.name||"bin_"+Ai(r))}});Kle.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};It(Kle,et,{transform(t,r){let n=r.fork(r.ALL),o=TBe(br,this.value,n.materialize(n.ADD).add),i=t.sort,s=r.changed()||i&&(t.modified("sort")||r.modified(i.fields));return n.visit(n.REM,o.remove),this.modified(s),this.value=n.source=o.data(O0(i),s),r.source&&r.source.root&&(this.value.root=r.source.root),n}});It(ABe,Oo);Zle.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};It(Zle,et,{transform(t,r){let n=d=>p=>{for(var m=mBt(l(p),t.case,s)||[],h,g=0,y=m.length;g<y;++g)a.test(h=m[g])||d(h)},o=this._parameterCheck(t,r),i=this._counts,s=this._match,a=this._stop,l=t.field,u=t.as||["text","count"],c=n(d=>i[d]=1+(i[d]||0)),f=n(d=>i[d]-=1);return o?r.visit(r.SOURCE,c):(r.visit(r.ADD,c),r.visit(r.REM,f)),this._finish(r,u)},_parameterCheck(t,r){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||r.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,r){let n=this._counts,o=this._tuples||(this._tuples={}),i=r[0],s=r[1],a=t.fork(t.NO_SOURCE|t.NO_FIELDS),l,u,c;for(l in n)u=o[l],c=n[l]||0,!u&&c?(o[l]=u=An({}),u[i]=l,u[s]=c,a.add.push(u)):c===0?(u&&a.rem.push(u),n[l]=null,o[l]=null):u[s]!==c&&(u[s]=c,a.mod.push(u));return a.modifies(r)}});Qle.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};It(Qle,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.as||["a","b"],i=o[0],s=o[1],a=!this.value||r.changed(r.ADD_REM)||t.modified("as")||t.modified("filter"),l=this.value;return a?(l&&(n.rem=l),l=r.materialize(r.SOURCE).source,n.add=this.value=hBt(l,i,s,t.filter||_0)):n.mod=l,n.source=this.value,n.modifies(o)}});vBe={kde:o9,mixture:Kae,normal:n9,lognormal:Xae,uniform:Zae},gBt="distributions",wBe="function",yBt="field";IBe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],bBt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:IBe},{name:"weights",type:"number",array:!0}]};Jle.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:IBe.concat(bBt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};It(Jle,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=kBe(t.distribution,xBt(r)),i=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200,a=t.method||"pdf";a!=="pdf"&&a!=="cdf"&&pt("Invalid density method: "+a),!t.extent&&!o.data&&pt("Missing density extent parameter."),a=o[a];let l=t.as||["value","density"],u=t.extent||Em(o.data()),c=iD(a,u,i,s).map(f=>{let d={};return d[l[0]]=f[0],d[l[1]]=f[1],An(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});NBe="bin";tue.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:NBe}]};vBt=(t,r)=>LC(Em(t,r))/30;It(tue,et,{transform(t,r){if(this.value&&!(t.modified()||r.changed()))return r;let n=r.materialize(r.SOURCE).source,o=eue(r.source,t.groupby,Xu),i=t.smooth||!1,s=t.field,a=t.step||vBt(n,s),l=O0((h,g)=>s(h)-s(g)),u=t.as||NBe,c=o.length,f=1/0,d=-1/0,p=0,m;for(;p<c;++p){let h=o[p].sort(l);m=-1;for(let g of Yae(h,a,i,s))g<f&&(f=g),g>d&&(d=g),h[++m][u]=g}return this.value={start:f,stop:d,step:a},r.reflow(!0).modifies(u)}});It(FBe,Oo);rue.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};It(rue,et,{transform(t,r){let n=this.value,o=t.field,i=r.changed()||r.modified(o.fields)||t.modified("field"),s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),r.visit(i?r.SOURCE:r.ADD,l=>{let u=Cm(o(l));u!=null&&(u<s&&(s=u),u>a&&(a=u))}),!Number.isFinite(s)||!Number.isFinite(a)){let l=Ai(o);l&&(l=` for field "${l}"`),r.dataflow.warn(`Infinite extent${l}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});It(nue,Oo,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});It(w9,et,{activate(t){this._targets[this._targets.active++]=t},subflow(t,r,n,o){let i=this.value,s=Or(i,t)&&i[t],a,l;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(l=o||(l=this._group[t])&&l.tuple,a=n.dataflow,s=new nue(n.fork(n.NO_SOURCE),this),a.add(s).connect(r(a,t,l)),i[t]=s,this.activate(s)),s},clean(){let t=this.value,r=0;for(let n in t)if(t[n].count===0){let o=t[n].detachSubflow;o&&o(),delete t[n],++r}if(r){let n=this._targets.filter(o=>o&&o.count>0);this.initTargets(n)}},initTargets(t){let r=this._targets,n=r.length,o=t?t.length:0,i=0;for(;i<o;++i)r[i]=t[i];for(;i<n&&r[i]!=null;++i)r[i]=null;r.active=o},transform(t,r){let n=r.dataflow,o=t.key,i=t.subflow,s=this._keys,a=t.modified("key"),l=u=>this.subflow(u,i,r);return this._group=t.group||{},this.initTargets(),r.visit(r.REM,u=>{let c=br(u),f=s.get(c);f!==void 0&&(s.delete(c),l(f).rem(u))}),r.visit(r.ADD,u=>{let c=o(u);s.set(br(u),c),l(c).add(u)}),a||r.modified(o.fields)?r.visit(r.MOD,u=>{let c=br(u),f=s.get(c),d=o(u);f===d?l(d).mod(u):(s.set(c,d),l(f).rem(u),l(d).add(u))}):r.changed(r.MOD)&&r.visit(r.MOD,u=>{l(s.get(br(u))).mod(u)}),a&&r.visit(r.REFLOW,u=>{let c=br(u),f=s.get(c),d=o(u);f!==d&&(s.set(c,d),l(f).rem(u),l(d).add(u))}),r.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),r}});It(OBe,Oo);oue.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};It(oue,et,{transform(t,r){let n=r.dataflow,o=this.value,i=r.fork(),s=i.add,a=i.rem,l=i.mod,u=t.expr,c=!0;r.visit(r.REM,d=>{let p=br(d);o.has(p)?o.delete(p):a.push(d)}),r.visit(r.ADD,d=>{u(d,t)?s.push(d):o.set(br(d),1)});function f(d){let p=br(d),m=u(d,t),h=o.get(p);m&&h?(o.delete(p),s.push(d)):!m&&!h?(o.set(p,1),a.push(d)):c&&m&&!h&&l.push(d)}return r.visit(r.MOD,f),t.modified()&&(c=!1,r.visit(r.REFLOW,f)),o.empty>n.cleanThreshold&&n.runAfter(o.clean),i}});iue.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};It(iue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=DBe(o,t.as||[]),s=t.index||null,a=i.length;return n.rem=this.value,r.visit(r.SOURCE,l=>{let u=o.map(h=>h(l)),c=u.reduce((h,g)=>Math.max(h,g.length),0),f=0,d,p,m;for(;f<c;++f){for(p=G7(l),d=0;d<a;++d)p[i[d]]=(m=u[d][f])==null?null:m;s&&(p[s]=f),n.add.push(p)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});sue.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};It(sue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=o.map(Ai),s=t.as||["key","value"],a=s[0],l=s[1],u=o.length;return n.rem=this.value,r.visit(r.SOURCE,c=>{for(let f=0,d;f<u;++f)d=G7(c),d[a]=i[f],d[l]=o[f](c),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});aue.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};It(aue,et,{transform(t,r){let n=t.expr,o=t.as,i=t.modified(),s=t.initonly?r.ADD:i?r.SOURCE:r.modified(n.fields)||r.modified(o)?r.ADD_MOD:r.ADD;return i&&(r=r.materialize().reflow(!0)),t.initonly||r.modifies(o),r.visit(s,a=>a[o]=n(a,t))}});It(MBe,et,{transform(t,r){let n=r.fork(r.ALL),o=t.generator,i=this.value,s=t.size-i.length,a,l,u;if(s>0){for(a=[];--s>=0;)a.push(u=An(o(t))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else l=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,i=i.slice(-s);return n.source=this.value=i,n}});v9={value:"value",median:gj,mean:Q7,min:XC,max:tp},SBt=[];lue.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};It(lue,et,{transform(t,r){var n=r.fork(r.ALL),o=CBt(t),i=EBt(t),s=Ai(t.field),a=Ai(t.key),l=(t.groupby||[]).map(Ai),u=TBt(r.source,t.groupby,t.key,t.keyvals),c=[],f=this.value,d=u.domain.length,p,m,h,g,y,b,x,v,w,_;for(y=0,v=u.length;y<v;++y)for(p=u[y],h=p.values,m=NaN,x=0;x<d;++x)if(p[x]==null){for(g=u.domain[x],_={_impute:!0},b=0,w=h.length;b<w;++b)_[l[b]]=h[b];_[a]=g,_[s]=Number.isNaN(m)?m=o(p,i):m,c.push(An(_))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=c,n}});uue.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Oj},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};It(uue,_w,{transform(t,r){let n=this,o=t.modified(),i;return n.value&&(o||r.modified(n._inputs,!0))?(i=n.value=o?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),n.changes(),r.visit(r.SOURCE,s=>{on(s,i[n.cellkey(s)].tuple)}),r.reflow(o).modifies(this._outputs)},changes(){let t=this._adds,r=this._mods,n,o;for(n=0,o=this._alen;n<o;++n)this.celltuple(t[n]),t[n]=null;for(n=0,o=this._mlen;n<o;++n)this.celltuple(r[n]),r[n]=null;this._alen=this._mlen=0}});cue.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};It(cue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=eue(o,t.groupby,t.field),s=(t.groupby||[]).map(Ai),a=t.bandwidth,l=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[],f=t.extent,d=t.steps||t.minsteps||25,p=t.steps||t.maxsteps||200;l!=="pdf"&&l!=="cdf"&&pt("Invalid density method: "+l),t.resolve==="shared"&&(f||(f=Em(o,t.field)),d=p=t.steps||p),i.forEach(m=>{let h=o9(m,a)[l],g=t.counts?m.length:1,y=f||Em(m);iD(h,y,d,p).forEach(b=>{let x={};for(let v=0;v<s.length;++v)x[s[v]]=m.dims[v];x[u[0]]=b[0],x[u[1]]=b[1]*g,c.push(An(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});It(RBe,Oo);It(jBe,et,{transform(t,r){let n=r.dataflow;return this._pending?qle(this,r,this._pending):kBt(t)?r.StopPropagation:t.values?qle(this,r,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(i=>(this._pending=jr(i.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(o=>qle(this,r,jr(o.data)))}});fue.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};It(fue,et,{transform(t,r){let n=t.fields,o=t.index,i=t.values,s=t.default==null?null:t.default,a=t.modified(),l=n.length,u=a?r.SOURCE:r.ADD,c=r,f=t.as,d,p,m;return i?(p=i.length,l>1&&!f&&pt('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==l*p&&pt('The "as" parameter has too few output field names.'),f=f||i.map(Ai),d=function(h){for(var g=0,y=0,b,x;g<l;++g)if(x=o.get(n[g](h)),x==null)for(b=0;b<p;++b,++y)h[f[y]]=s;else for(b=0;b<p;++b,++y)h[f[y]]=i[b](x)}):(f||pt("Missing output field names."),d=function(h){for(var g=0,y;g<l;++g)y=o.get(n[g](h)),h[f[g]]=y??s}),a?c=r.reflow(!0):(m=n.some(h=>r.modified(h.fields)),u|=m?r.MOD:0),r.visit(u,d),c.modifies(f)}});It(PBe,Oo);It(LBe,Oo);It(BBe,et,{transform(t,r){return this.modified(t.modified()),this.value=t,r.fork(r.NO_SOURCE|r.NO_FIELDS)}});due.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Oj,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};It(due,_w,{_transform:_w.prototype.transform,transform(t,r){return this._transform(NBt(t,r),r)}});It($Be,w9,{transform(t,r){let n=t.subflow,o=t.field,i=s=>this.subflow(br(s),n,r,s);return(t.modified("field")||o&&r.modified(wa(o)))&&pt("PreFacet does not support field modification."),this.initTargets(),o?(r.visit(r.MOD,s=>{let a=i(s);o(s).forEach(l=>a.mod(l))}),r.visit(r.ADD,s=>{let a=i(s);o(s).forEach(l=>a.add(An(l)))}),r.visit(r.REM,s=>{let a=i(s);o(s).forEach(l=>a.rem(l))})):(r.visit(r.MOD,s=>i(s).mod(s)),r.visit(r.ADD,s=>i(s).add(s)),r.visit(r.REM,s=>i(s).rem(s))),r.clean()&&r.runAfter(()=>this.clean()),r}});pue.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};It(pue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=DBe(t.fields,t.as||[]),s=o?(l,u)=>MBt(l,u,o,i):HC,a;return this.value?a=this.value:(r=r.addAll(),a=this.value={}),r.visit(r.REM,l=>{let u=br(l);n.rem.push(a[u]),a[u]=null}),r.visit(r.ADD,l=>{let u=s(l,An({}));a[br(l)]=u,n.add.push(u)}),r.visit(r.MOD,l=>{n.mod.push(s(l,a[br(l)]))}),n}});It(zBe,et,{transform(t,r){return this.value=t.value,t.modified("value")?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});mue.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};RBt=1e-14;It(mue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=t.as||["prob","value"];if(this.value&&!t.modified()&&!r.changed())return n.source=this.value,n;let i=r.materialize(r.SOURCE).source,s=eue(i,t.groupby,t.field),a=(t.groupby||[]).map(Ai),l=[],u=t.step||.01,c=t.probs||qs(u/2,1-RBt,u),f=c.length;return s.forEach(d=>{let p=J7(d,c);for(let m=0;m<f;++m){let h={};for(let g=0;g<a.length;++g)h[a[g]]=d.dims[g];h[o[0]]=c[m],h[o[1]]=p[m],l.push(An(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});It(UBe,et,{transform(t,r){let n,o;return this.value?o=this.value:(n=r=r.addAll(),o=this.value={}),t.derive&&(n=r.fork(r.NO_SOURCE),r.visit(r.REM,i=>{let s=br(i);n.rem.push(o[s]),o[s]=null}),r.visit(r.ADD,i=>{let s=G7(i);o[br(i)]=s,n.add.push(s)}),r.visit(r.MOD,i=>{let s=o[br(i)];for(let a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});hue.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};It(hue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.modified("size"),i=t.size,s=this.value.reduce((f,d)=>(f[br(d)]=1,f),{}),a=this.value,l=this.count,u=0;function c(f){let d,p;a.length<i?a.push(f):(p=~~((l+1)*Zf()),p<a.length&&p>=u&&(d=a[p],s[br(d)]&&n.rem.push(d),a[p]=f)),++l}if(r.rem.length&&(r.visit(r.REM,f=>{let d=br(f);s[d]&&(s[d]=-1,n.rem.push(f)),--l}),a=a.filter(f=>s[br(f)]!==-1)),(r.rem.length||o)&&a.length<i&&r.source&&(u=l=a.length,r.visit(r.SOURCE,f=>{s[br(f)]||c(f)}),u=-1),o&&a.length>i){let f=a.length-i;for(let d=0;d<f;++d)s[br(a[d])]=-1,n.rem.push(a[d]);a=a.slice(f)}return r.mod.length&&r.visit(r.MOD,f=>{s[br(f)]&&n.mod.push(f)}),r.add.length&&r.visit(r.ADD,c),(r.add.length||u<0)&&(n.add=a.filter(f=>!s[br(f)])),this.count=l,this.value=n.source=a,n}});gue.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};It(gue,et,{transform(t,r){if(this.value&&!t.modified())return;let n=r.materialize().fork(r.MOD),o=t.as||"data";return n.rem=this.value?r.rem.concat(this.value):r.rem,this.value=qs(t.start,t.stop,t.step||1).map(i=>{let s={};return s[o]=i,An(s)}),n.add=r.add.concat(this.value),n}});It(VBe,et,{transform(t,r){return this.value=r.source,r.changed()?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});GBe=["unit0","unit1"];yue.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:y9,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:GBe}]};It(yue,et,{transform(t,r){let n=t.field,o=t.interval!==!1,i=t.timezone==="utc",s=this._floor(t,r),a=(i?Ox:Fx)(s.unit).offset,l=t.as||GBe,u=l[0],c=l[1],f=s.step,d=s.start||1/0,p=s.stop||-1/0,m=r.ADD;return(t.modified()||r.modified(wa(n)))&&(r=r.reflow(!0),m=r.SOURCE,d=1/0,p=-1/0),r.visit(m,h=>{let g=n(h),y,b;g==null?(h[u]=null,o&&(h[c]=null)):(h[u]=y=b=s(g),o&&(h[c]=b=a(y,f)),y<d&&(d=y),b>p&&(p=b))}),s.start=d,s.stop=p,r.modifies(o?l:u)},_floor(t,r){let n=t.timezone==="utc",{units:o,step:i}=t.units?{units:t.units,step:t.step||1}:Gle({extent:t.extent||Em(r.materialize(r.SOURCE).source,t.field),maxbins:t.maxbins}),s=b9(o),a=this.value||{},l=(n?Ble:Lle)(s,i);return l.unit=Pn(s),l.units=s,l.step=i,l.start=a.start,l.stop=a.stop,this.value=l}});It(WBe,et,{transform(t,r){let n=r.dataflow,o=t.field,i=this.value,s=l=>i.set(o(l),l),a=!0;return t.modified("field")||r.modified(o.fields)?(i.clear(),r.visit(r.SOURCE,s)):r.changed()?(r.visit(r.REM,l=>i.delete(o(l))),r.visit(r.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r.fork()}});It(qBe,et,{transform(t,r){(!this.value||t.modified("field")||t.modified("sort")||r.changed()||t.sort&&r.modified(t.sort.fields))&&(this.value=(t.sort?r.source.slice().sort(O0(t.sort)):r.source).map(t.field))}});Fj={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?++t:t}}},percent_rank:function(){let t=Fj.rank(),r=t.next;return{init:t.init,next:n=>(r(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:r=>{let n=r.data,o=r.compare,i=r.index;if(t<i){for(;i+1<n.length&&!o(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,r){r=+r,r>0||pt("ntile num must be greater than zero.");let n=Fj.cume_dist(),o=n.next;return{init:n.init,next:i=>Math.ceil(r*o(i))}},lag:function(t,r){return r=+r||1,{next:n=>{let o=n.index-r;return o>=0?t(n.data[o]):null}}},lead:function(t,r){return r=+r||1,{next:n=>{let o=n.index+r,i=n.data;return o<i.length?t(i[o]):null}}},first_value:function(t){return{next:r=>t(r.data[r.i0])}},last_value:function(t){return{next:r=>t(r.data[r.i1-1])}},nth_value:function(t,r){return r=+r,r>0||pt("nth_value nth must be greater than zero."),{next:n=>{let o=n.i0+(r-1);return o<n.i1?t(n.data[o]):null}}},prev_value:function(t){let r;return{init:()=>r=null,next:n=>{let o=t(n.data[n.index]);return o!=null?r=o:r}}},next_value:function(t){let r,n;return{init:()=>(r=null,n=-1),next:o=>{let i=o.data;return o.index<=n?r:(n=PBt(t,i,o.index))<0?(n=i.length,r=null):r=t(i[n])}}}};LBt=Object.keys(Fj);YBe=HBe.prototype;YBe.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};YBe.update=function(t,r){let n=this.cell,o=this.windows,i=t.data,s=o&&o.length,a;if(n){for(a=t.p0;a<t.i0;++a)n.rem(i[a]);for(a=t.p1;a<t.i1;++a)n.add(i[a]);n.set(r)}for(a=0;a<s;++a)o[a].update(t,r)};bue.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:LBt.concat(Oj)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};It(bue,et,{transform(t,r){this.stamp=r.stamp;let n=t.modified(),o=O0(t.sort),i=Hle(t.groupby),s=l=>this.group(i(l)),a=this.state;(!a||n)&&(a=this.state=new HBe(t)),n||r.modified(a.inputs)?(this.value={},r.visit(r.SOURCE,l=>s(l).add(l))):(r.visit(r.REM,l=>s(l).remove(l)),r.visit(r.ADD,l=>s(l).add(l)));for(let l=0,u=this._mlen;l<u;++l)$Bt(this._mods[l],a,o,t);return this._mlen=0,this._mods=[],r.reflow(n).modifies(a.outputs)},group(t){let r=this.value[t];return r||(r=this.value[t]=TBe(br),r.stamp=-1),r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r),r}})});function fD(t,r,n){return t.fields=r||[],t.fname=n,t}function VBt(t){return t.length===1?GBt(t[0]):WBt(t)}function nu(t){throw Error(t)}function qBt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||nu("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&nu("Access path missing closing bracket: "+t),o&&nu("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function vue(t,r,n){let o=qBt(t);return t=o.length===1?o[0]:t,fD((n&&n.get||VBt)(o),[t],r||t)}function Mx(t){return t===Object(t)}function zc(t){return t[t.length-1]}function _ue(t){return t==null||t===""?null:+t}function dD(t){return t!=null?rc(t)?t:[t]:[]}function Sw(t){return typeof t=="function"}function Rx(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function ip(t,r){return XBt.call(t,r)}function jx(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),Rx(o,n)}function ZBe(t){return t&&Sw(t[Symbol.iterator])}function pD(t){return typeof t=="string"}function QBe(t){t=+t||KBt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>ip(r,a)||ip(n,a),get:a=>ip(r,a)?r[a]:ip(n,a)?s(a,n[a]):void 0,set:(a,l)=>ip(r,a)?r[a]=l:s(a,l)}}function _9(t){return rc(t)?"["+t.map(_9)+"]":Mx(t)||pD(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Mj(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var GBt,WBt,kEn,KBe,HBt,YBt,wue,IEn,rc,XBt,KBt,sE=D(()=>{"use strict";GBt=t=>function(r){return r[t]},WBt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};kEn=vue("id"),KBe=fD(t=>t,[],"identity"),HBt=fD(()=>0,[],"zero"),YBt=fD(()=>1,[],"one"),wue=fD(()=>!0,[],"true"),IEn=fD(()=>!1,[],"false"),rc=Array.isArray;XBt=Object.prototype.hasOwnProperty;KBt=1e4});function Ln(t){return function(){return t}}var Rj=D(()=>{"use strict"});function e$e(t){return t>1?0:t<-1?Ew:Math.acos(t)}function Cue(t){return t>=1?jj:t<=-1?-jj:Math.asin(t)}var Sue,Il,Cw,JBe,S9,Om,Px,Ya,Ew,jj,C9,E9=D(()=>{"use strict";Sue=Math.abs,Il=Math.atan2,Cw=Math.cos,JBe=Math.max,S9=Math.min,Om=Math.sin,Px=Math.sqrt,Ya=1e-12,Ew=Math.PI,jj=Ew/2,C9=2*Ew});function t$e(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function QBt(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return t$e;let n=10**r;return function(o){this._+=o[0];for(let i=1,s=o.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+o[i]}}function Pj(){return new lE}var Eue,Tue,aE,ZBt,lE,r$e=D(()=>{"use strict";Eue=Math.PI,Tue=2*Eue,aE=1e-6,ZBt=Tue-aE;lE=class{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?t$e:QBt(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,o,i){this._append`Q${+r},${+n},${this._x1=+o},${this._y1=+i}`}bezierCurveTo(r,n,o,i,s,a){this._append`C${+r},${+n},${+o},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(r,n,o,i,s){if(r=+r,n=+n,o=+o,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=o-r,c=i-n,f=a-r,d=l-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(p>aE)if(!(Math.abs(d*u-c*f)>aE)||!s)this._append`L${this._x1=r},${this._y1=n}`;else{let m=o-a,h=i-l,g=u*u+c*c,y=m*m+h*h,b=Math.sqrt(g),x=Math.sqrt(p),v=s*Math.tan((Eue-Math.acos((g+p-y)/(2*b*x)))/2),w=v/x,_=v/b;Math.abs(w-1)>aE&&this._append`L${r+w*f},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*m>f*h)},${this._x1=r+_*u},${this._y1=n+_*c}`}}arc(r,n,o,i,s,a){if(r=+r,n=+n,o=+o,a=!!a,o<0)throw new Error(`negative radius: ${o}`);let l=o*Math.cos(i),u=o*Math.sin(i),c=r+l,f=n+u,d=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>aE||Math.abs(this._y1-f)>aE)&&this._append`L${c},${f}`,o&&(p<0&&(p=p%Tue+Tue),p>ZBt?this._append`A${o},${o},0,1,${d},${r-l},${n-u}A${o},${o},0,1,${d},${this._x1=c},${this._y1=f}`:p>aE&&this._append`A${o},${o},0,${+(p>=Eue)},${d},${this._x1=r+o*Math.cos(s)},${this._y1=n+o*Math.sin(s)}`)}rect(r,n,o,i){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${o=+o}v${+i}h${-o}Z`}toString(){return this._}};Pj.prototype=lE.prototype});var Aue=D(()=>{"use strict";r$e()});function Tw(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{let o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);r=o}return t},()=>new lE(r)}var Lj=D(()=>{"use strict";Aue()});function JBt(t){return t.innerRadius}function e$t(t){return t.outerRadius}function t$t(t){return t.startAngle}function r$t(t){return t.endAngle}function n$t(t){return t&&t.padAngle}function o$t(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<Ya))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function T9(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/Px(l*l+u*u),f=c*u,d=-c*l,p=t+f,m=r+d,h=n+f,g=o+d,y=(p+h)/2,b=(m+g)/2,x=h-p,v=g-m,w=x*x+v*v,_=i-s,C=p*g-h*m,S=(v<0?-1:1)*Px(JBe(0,_*_*w-C*C)),E=(C*v-x*S)/w,A=(-C*x-v*S)/w,N=(C*v+x*S)/w,k=(-C*x+v*S)/w,M=E-y,I=A-b,L=N-y,P=k-b;return M*M+I*I>L*L+P*P&&(E=N,A=k),{cx:E,cy:A,x01:-f,y01:-d,x11:E*(i/_-1),y11:A*(i/_-1)}}function kue(){var t=JBt,r=e$t,n=Ln(0),o=null,i=t$t,s=r$t,a=n$t,l=null,u=Tw(c);function c(){var f,d,p=+t.apply(this,arguments),m=+r.apply(this,arguments),h=i.apply(this,arguments)-jj,g=s.apply(this,arguments)-jj,y=Sue(g-h),b=g>h;if(l||(l=f=u()),m<p&&(d=m,m=p,p=d),!(m>Ya))l.moveTo(0,0);else if(y>C9-Ya)l.moveTo(m*Cw(h),m*Om(h)),l.arc(0,0,m,h,g,!b),p>Ya&&(l.moveTo(p*Cw(g),p*Om(g)),l.arc(0,0,p,g,h,b));else{var x=h,v=g,w=h,_=g,C=y,S=y,E=a.apply(this,arguments)/2,A=E>Ya&&(o?+o.apply(this,arguments):Px(p*p+m*m)),N=S9(Sue(m-p)/2,+n.apply(this,arguments)),k=N,M=N,I,L;if(A>Ya){var P=Cue(A/p*Om(E)),R=Cue(A/m*Om(E));(C-=P*2)>Ya?(P*=b?1:-1,w+=P,_-=P):(C=0,w=_=(h+g)/2),(S-=R*2)>Ya?(R*=b?1:-1,x+=R,v-=R):(S=0,x=v=(h+g)/2)}var V=m*Cw(x),G=m*Om(x),U=p*Cw(_),Y=p*Om(_);if(N>Ya){var X=m*Cw(v),pe=m*Om(v),$=p*Cw(w),F=p*Om(w),z;if(y<Ew)if(z=o$t(V,G,$,F,X,pe,U,Y)){var q=V-z[0],ee=G-z[1],ae=X-z[0],Q=pe-z[1],le=1/Om(e$e((q*ae+ee*Q)/(Px(q*q+ee*ee)*Px(ae*ae+Q*Q)))/2),ie=Px(z[0]*z[0]+z[1]*z[1]);k=S9(N,(p-ie)/(le-1)),M=S9(N,(m-ie)/(le+1))}else k=M=0}S>Ya?M>Ya?(I=T9($,F,V,G,m,M,b),L=T9(X,pe,U,Y,m,M,b),l.moveTo(I.cx+I.x01,I.cy+I.y01),M<N?l.arc(I.cx,I.cy,M,Il(I.y01,I.x01),Il(L.y01,L.x01),!b):(l.arc(I.cx,I.cy,M,Il(I.y01,I.x01),Il(I.y11,I.x11),!b),l.arc(0,0,m,Il(I.cy+I.y11,I.cx+I.x11),Il(L.cy+L.y11,L.cx+L.x11),!b),l.arc(L.cx,L.cy,M,Il(L.y11,L.x11),Il(L.y01,L.x01),!b))):(l.moveTo(V,G),l.arc(0,0,m,x,v,!b)):l.moveTo(V,G),!(p>Ya)||!(C>Ya)?l.lineTo(U,Y):k>Ya?(I=T9(U,Y,X,pe,p,-k,b),L=T9(V,G,$,F,p,-k,b),l.lineTo(I.cx+I.x01,I.cy+I.y01),k<N?l.arc(I.cx,I.cy,k,Il(I.y01,I.x01),Il(L.y01,L.x01),!b):(l.arc(I.cx,I.cy,k,Il(I.y01,I.x01),Il(I.y11,I.x11),!b),l.arc(0,0,p,Il(I.cy+I.y11,I.cx+I.x11),Il(L.cy+L.y11,L.cx+L.x11),b),l.arc(L.cx,L.cy,k,Il(L.y11,L.x11),Il(L.y01,L.x01),!b))):l.arc(0,0,p,_,w,b)}if(l.closePath(),f)return l=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Ew/2;return[Cw(d)*f,Om(d)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Ln(+f),c):t},c.outerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:Ln(+f),c):r},c.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Ln(+f),c):n},c.padRadius=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Ln(+f),c):o},c.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Ln(+f),c):i},c.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Ln(+f),c):s},c.padAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Ln(+f),c):a},c.context=function(f){return arguments.length?(l=f??null,c):l},c}var n$e=D(()=>{"use strict";Rj();E9();Lj()});function A9(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var VEn,Iue=D(()=>{"use strict";VEn=Array.prototype.slice});function o$e(t){this._context=t}function uE(t){return new o$e(t)}var k9=D(()=>{"use strict";o$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function I9(t){return t[0]}function D9(t){return t[1]}var Due=D(()=>{"use strict"});function Bj(t,r){var n=Ln(!0),o=null,i=uE,s=null,a=Tw(l);t=typeof t=="function"?t:t===void 0?I9:Ln(t),r=typeof r=="function"?r:r===void 0?D9:Ln(r);function l(u){var c,f=(u=A9(u)).length,d,p=!1,m;for(o==null&&(s=i(m=a())),c=0;c<=f;++c)!(c<f&&n(d=u[c],c,u))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,c,u),+r(d,c,u));if(m)return s=null,m+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Ln(+u),l):t},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:Ln(+u),l):r},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ln(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,o!=null&&(s=i(o)),l):i},l.context=function(u){return arguments.length?(u==null?o=s=null:s=i(o=u),l):o},l}var Nue=D(()=>{"use strict";Iue();Rj();k9();Lj();Due()});function N9(t,r,n){var o=null,i=Ln(!0),s=null,a=uE,l=null,u=Tw(c);t=typeof t=="function"?t:t===void 0?I9:Ln(+t),r=typeof r=="function"?r:r===void 0?Ln(0):Ln(+r),n=typeof n=="function"?n:n===void 0?D9:Ln(+n);function c(d){var p,m,h,g=(d=A9(d)).length,y,b=!1,x,v=new Array(g),w=new Array(g);for(s==null&&(l=a(x=u())),p=0;p<=g;++p){if(!(p<g&&i(y=d[p],p,d))===b)if(b=!b)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=p-1;h>=m;--h)l.point(v[h],w[h]);l.lineEnd(),l.areaEnd()}b&&(v[p]=+t(y,p,d),w[p]=+r(y,p,d),l.point(o?+o(y,p,d):v[p],n?+n(y,p,d):w[p]))}if(x)return l=null,x+""||null}function f(){return Bj().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Ln(+d),o=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Ln(+d),c):t},c.x1=function(d){return arguments.length?(o=d==null?null:typeof d=="function"?d:Ln(+d),c):o},c.y=function(d){return arguments.length?(r=typeof d=="function"?d:Ln(+d),n=null,c):r},c.y0=function(d){return arguments.length?(r=typeof d=="function"?d:Ln(+d),c):r},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Ln(+d),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(r)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(o).y(r)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Ln(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(l=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=l=null:l=a(s=d),c):s},c}var i$e=D(()=>{"use strict";Iue();Rj();k9();Nue();Lj();Due()});var s$e,a$e=D(()=>{"use strict";E9();s$e={draw(t,r){let n=Px(r/Ew);t.moveTo(n,0),t.arc(0,0,n,0,C9)}}});function F9(t,r){let n=null,o=Tw(i);t=typeof t=="function"?t:Ln(t||s$e),r=typeof r=="function"?r:Ln(r===void 0?64:+r);function i(){let s;if(n||(n=s=o()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ln(s),i):t},i.size=function(s){return arguments.length?(r=typeof s=="function"?s:Ln(+s),i):r},i.context=function(s){return arguments.length?(n=s??null,i):n},i}var l$e=D(()=>{"use strict";Rj();Lj();a$e()});function sp(){}var $j=D(()=>{"use strict"});function mD(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function zj(t){this._context=t}function Fue(t){return new zj(t)}var Uj=D(()=>{"use strict";zj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mD(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function u$e(t){this._context=t}function Oue(t){return new u$e(t)}var c$e=D(()=>{"use strict";$j();Uj();u$e.prototype={areaStart:sp,areaEnd:sp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:mD(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function f$e(t){this._context=t}function Mue(t){return new f$e(t)}var d$e=D(()=>{"use strict";Uj();f$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:mD(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function p$e(t,r){this._basis=new zj(t),this._beta=r}var Rue,m$e=D(()=>{"use strict";Uj();p$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};Rue=function t(r){function n(o){return r===1?new zj(o):new p$e(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function hD(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function O9(t,r){this._context=t,this._k=(1-r)/6}var jue,Vj=D(()=>{"use strict";O9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:hD(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:hD(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};jue=function t(r){function n(o){return new O9(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function M9(t,r){this._context=t,this._k=(1-r)/6}var Pue,Lue=D(()=>{"use strict";$j();Vj();M9.prototype={areaStart:sp,areaEnd:sp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:hD(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Pue=function t(r){function n(o){return new M9(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function R9(t,r){this._context=t,this._k=(1-r)/6}var Bue,$ue=D(()=>{"use strict";Vj();R9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hD(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Bue=function t(r){function n(o){return new R9(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Gj(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>Ya){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Ya){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function h$e(t,r){this._context=t,this._alpha=r}var zue,j9=D(()=>{"use strict";E9();Vj();h$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:Gj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};zue=function t(r){function n(o){return r?new h$e(o,r):new O9(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function g$e(t,r){this._context=t,this._alpha=r}var Uue,y$e=D(()=>{"use strict";Lue();$j();j9();g$e.prototype={areaStart:sp,areaEnd:sp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:Gj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Uue=function t(r){function n(o){return r?new g$e(o,r):new M9(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function b$e(t,r){this._context=t,this._alpha=r}var Vue,x$e=D(()=>{"use strict";$ue();j9();b$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Vue=function t(r){function n(o){return r?new b$e(o,r):new R9(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function v$e(t){this._context=t}function Gue(t){return new v$e(t)}var w$e=D(()=>{"use strict";$j();v$e.prototype={areaStart:sp,areaEnd:sp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function _$e(t){return t<0?-1:1}function S$e(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(_$e(s)+_$e(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function C$e(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Wue(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function P9(t){this._context=t}function E$e(t){this._context=new T$e(t)}function T$e(t){this._context=t}function que(t){return new P9(t)}function Hue(t){return new E$e(t)}var A$e=D(()=>{"use strict";P9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wue(this,this._t0,C$e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Wue(this,C$e(this,n=S$e(this,t,r)),n);break;default:Wue(this,this._t0,n=S$e(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(E$e.prototype=Object.create(P9.prototype)).point=function(t,r){P9.prototype.point.call(this,r,t)};T$e.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function I$e(t){this._context=t}function k$e(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function Yue(t){return new I$e(t)}var D$e=D(()=>{"use strict";I$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=k$e(t),i=k$e(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function L9(t,r){this._context=t,this._t=r}function Xue(t){return new L9(t,.5)}function Kue(t){return new L9(t,0)}function Zue(t){return new L9(t,1)}var N$e=D(()=>{"use strict";L9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var F$e=D(()=>{"use strict";n$e();i$e();Nue();l$e();c$e();d$e();Uj();m$e();Lue();$ue();Vj();y$e();x$e();j9();w$e();k9();A$e();D$e();N$e()});function Uc(t,r){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=r,n}return null}var B9,gD=D(()=>{"use strict";B9=()=>typeof Image<"u"?Image:null});function R$e(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function s$t(t,r){var n=R$e(t);return function(o,i){return r(n(o),i,t)}}function M$e(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function Vc(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function a$t(t){return t<0?"-"+Vc(-t,6):t>9999?"+"+Vc(t,6):Vc(t,4)}function l$t(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":a$t(t.getUTCFullYear(),4)+"-"+Vc(t.getUTCMonth()+1,2)+"-"+Vc(t.getUTCDate(),2)+(i?"T"+Vc(r,2)+":"+Vc(n,2)+":"+Vc(o,2)+"."+Vc(i,3)+"Z":o?"T"+Vc(r,2)+":"+Vc(n,2)+":"+Vc(o,2)+"Z":n||r?"T"+Vc(r,2)+":"+Vc(n,2)+"Z":"")}function tce(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var m,h,g=i(d,function(y,b){if(m)return m(y,b-1);h=y,m=p?s$t(y,p):R$e(y)});return g.columns=h||[],g}function i(d,p){var m=[],h=d.length,g=0,y=0,b,x=h<=0,v=!1;d.charCodeAt(h-1)===Wj&&--h,d.charCodeAt(h-1)===ece&&--h;function w(){if(x)return Que;if(v)return v=!1,O$e;var C,S=g,E;if(d.charCodeAt(S)===Jue){for(;g++<h&&d.charCodeAt(g)!==Jue||d.charCodeAt(++g)===Jue;);return(C=g)>=h?x=!0:(E=d.charCodeAt(g++))===Wj?v=!0:E===ece&&(v=!0,d.charCodeAt(g)===Wj&&++g),d.slice(S+1,C-1).replace(/""/g,'"')}for(;g<h;){if((E=d.charCodeAt(C=g++))===Wj)v=!0;else if(E===ece)v=!0,d.charCodeAt(g)===Wj&&++g;else if(E!==n)continue;return d.slice(S,C)}return x=!0,d.slice(S,h)}for(;(b=w())!==Que;){for(var _=[];b!==O$e&&b!==Que;)_.push(b),b=w();p&&(_=p(_,y++))==null||m.push(_)}return m}function s(d,p){return d.map(function(m){return p.map(function(h){return f(m[h])}).join(t)})}function a(d,p){return p==null&&(p=M$e(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=M$e(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?l$t(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var O$e,Que,Jue,Wj,ece,j$e=D(()=>{"use strict";O$e={},Que={},Jue=34,Wj=10,ece=13});var P$e=D(()=>{"use strict";j$e()});function P0(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var $9=D(()=>{"use strict"});function rce(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var L$e=D(()=>{"use strict"});function cE(t){let r,n,o;t.length!==2?(r=P0,n=(l,u)=>P0(t(l),u),o=(l,u)=>t(l)-u):(r=t===P0||t===rce?t:u$t,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function u$t(){return 0}var nce=D(()=>{"use strict";$9();L$e()});function qj(t){return t===null?NaN:+t}var oce=D(()=>{"use strict"});var B$e,Hj,c$t,f$t,Mm,$$e=D(()=>{"use strict";$9();nce();oce();B$e=cE(P0),Hj=B$e.right,c$t=B$e.left,f$t=cE(qj).center,Mm=Hj});function z9(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=d$t?10:s>=p$t?5:s>=m$t?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?z9(t,r,n*2):[l,u,c]}function fE(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?z9(r,t,n):z9(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function Yj(t,r,n){return r=+r,t=+t,n=+n,z9(t,r,n)[2]}function Aw(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?Yj(r,t,n):Yj(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var d$t,p$t,m$t,z$e=D(()=>{"use strict";d$t=Math.sqrt(50),p$t=Math.sqrt(10),m$t=Math.sqrt(2)});function ice(t,r,n=qj){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var U$e=D(()=>{"use strict";oce()});function U9(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var V$e=D(()=>{"use strict"});var ap=D(()=>{"use strict";$$e();$9();nce();U$e();V$e();z$e();H3()});function G$e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function dE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var Xj=D(()=>{"use strict"});function L0(t){return t=dE(Math.abs(t)),t?t[1]:NaN}var Kj=D(()=>{"use strict";Xj()});function W$e(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var q$e=D(()=>{"use strict"});function H$e(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var Y$e=D(()=>{"use strict"});function nd(t){if(!(r=h$t.exec(t)))throw new Error("invalid format: "+t);var r;return new V9({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function V9(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var h$t,sce=D(()=>{"use strict";h$t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;nd.prototype=V9.prototype;V9.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function X$e(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var K$e=D(()=>{"use strict"});function Z$e(t,r){var n=dE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(ace=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+dE(t,Math.max(0,r+s-1))[0]}var ace,lce=D(()=>{"use strict";Xj()});function uce(t,r){var n=dE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var Q$e=D(()=>{"use strict";Xj()});var cce,J$e=D(()=>{"use strict";Xj();lce();Q$e();cce={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:G$e,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>uce(t*100,r),r:uce,s:Z$e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function fce(t){return t}var e6e=D(()=>{"use strict"});function dce(t){var r=t.grouping===void 0||t.thousands===void 0?fce:W$e(t6e.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?fce:H$e(t6e.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=nd(d);var p=d.fill,m=d.align,h=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):cce[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&m==="=")&&(y=!0,p="0",m="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=g==="$"?o:/[%p]/.test(_)?a:"",E=cce[_],A=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(k){var M=C,I=S,L,P,R;if(_==="c")I=E(k)+I,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=X$e(k)),V&&+k==0&&h!=="+"&&(V=!1),M=(V?h==="("?h:l:h==="-"||h==="("?"":h)+M,I=(_==="s"?r6e[8+ace/3]:"")+I+(V&&h==="("?")":""),A){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){I=(R===46?i+k.slice(L+1):k.slice(L))+I,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=M.length+k.length+I.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-I.length:1/0),U=""),m){case"<":k=M+k+I+U;break;case"=":k=M+U+k+I;break;case"^":k=U.slice(0,G=U.length>>1)+M+k+I+U.slice(G);break;default:k=U+M+k+I;break}return s(k)}return N.toString=function(){return d+""},N}function f(d,p){var m=c((d=nd(d),d.type="f",d)),h=Math.max(-8,Math.min(8,Math.floor(L0(p)/3)))*3,g=Math.pow(10,-h),y=r6e[8+h/3];return function(b){return m(g*b)+y}}return{format:c,formatPrefix:f}}var t6e,r6e,n6e=D(()=>{"use strict";Kj();q$e();Y$e();sce();K$e();J$e();lce();e6e();t6e=Array.prototype.map,r6e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function pce(t){return G9=dce(t),kw=G9.format,yD=G9.formatPrefix,G9}var G9,kw,yD,o6e=D(()=>{"use strict";n6e();pce({thousands:",",grouping:[3],currency:["$",""]})});function Zj(t){return Math.max(0,-L0(Math.abs(t)))}var i6e=D(()=>{"use strict";Kj()});function Qj(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(L0(r)/3)))*3-L0(Math.abs(t)))}var s6e=D(()=>{"use strict";Kj()});function Jj(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,L0(r)-L0(t))+1}var a6e=D(()=>{"use strict";Kj()});var W9=D(()=>{"use strict";o6e();sce();i6e();s6e();a6e()});function ii(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>ii(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(mce.setTime(+s),hce.setTime(+a),t(mce),t(hce),Math.floor(n(mce,hce))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var mce,hce,Lx=D(()=>{"use strict";mce=new Date,hce=new Date});var Rm,l6e,gce=D(()=>{"use strict";Lx();Rm=ii(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Rm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ii(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Rm);l6e=Rm.range});var ou,u6e,yce=D(()=>{"use strict";Lx();ou=ii(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),u6e=ou.range});var Iw,g$t,Dw,y$t,bce=D(()=>{"use strict";Lx();Iw=ii(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),g$t=Iw.range,Dw=ii(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),y$t=Dw.range});var Nw,b$t,Fw,x$t,xce=D(()=>{"use strict";Lx();Nw=ii(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),b$t=Nw.range,Fw=ii(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),x$t=Fw.range});var Gc,v$t,lp,w$t,q9,_$t,vce=D(()=>{"use strict";Lx();Gc=ii(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),v$t=Gc.range,lp=ii(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),w$t=lp.range,q9=ii(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),_$t=q9.range});function hE(t){return ii(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function gE(t){return ii(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var up,bD,f6e,d6e,Ow,p6e,m6e,h6e,S$t,C$t,E$t,T$t,A$t,k$t,cp,xD,g6e,y6e,Mw,b6e,x6e,v6e,I$t,D$t,N$t,F$t,O$t,M$t,wce=D(()=>{"use strict";Lx();up=hE(0),bD=hE(1),f6e=hE(2),d6e=hE(3),Ow=hE(4),p6e=hE(5),m6e=hE(6),h6e=up.range,S$t=bD.range,C$t=f6e.range,E$t=d6e.range,T$t=Ow.range,A$t=p6e.range,k$t=m6e.range;cp=gE(0),xD=gE(1),g6e=gE(2),y6e=gE(3),Mw=gE(4),b6e=gE(5),x6e=gE(6),v6e=cp.range,I$t=xD.range,D$t=g6e.range,N$t=y6e.range,F$t=Mw.range,O$t=b6e.range,M$t=x6e.range});var Bx,R$t,$x,j$t,_ce=D(()=>{"use strict";Lx();Bx=ii(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),R$t=Bx.range,$x=ii(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),j$t=$x.range});var nc,P$t,oc,L$t,Sce=D(()=>{"use strict";Lx();nc=ii(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());nc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ii(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});P$t=nc.range,oc=ii(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());oc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ii(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});L$t=oc.range});function _6e(t,r,n,o,i,s){let a=[[ou,1,1e3],[ou,5,5*1e3],[ou,15,15*1e3],[ou,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let m=d&&typeof d.range=="function"?d:u(c,f,d),h=m?m.range(c,+f+1):[];return p?h.reverse():h}function u(c,f,d){let p=Math.abs(f-c)/d,m=cE(([,,y])=>y).right(a,p);if(m===a.length)return t.every(Aw(c/31536e6,f/31536e6,d));if(m===0)return Rm.every(Math.max(Aw(c,f,d),1));let[h,g]=a[p/a[m-1][2]<a[m][2]/p?m-1:m];return h.every(g)}return[l,u]}var Cce,Ece,Tce,Ace,S6e=D(()=>{"use strict";ap();gce();yce();bce();xce();vce();wce();_ce();Sce();[Cce,Ece]=_6e(oc,$x,cp,q9,Fw,Dw),[Tce,Ace]=_6e(nc,Bx,up,Gc,Nw,Iw)});var tP=D(()=>{"use strict";gce();yce();bce();xce();vce();wce();_ce();Sce();S6e()});function Dce(t){return yE.setFullYear(t),yE.setMonth(0),yE.setDate(1),yE.setHours(0,0,0,0),yE}function V$t(t){return Gc.count(Dce(t.getFullYear())-1,t)}function C6e(t){return up.count(Dce(t.getFullYear())-1,t)}function kce(t){return Dce(t).getDay()}function G$t(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return lp.count(r-1,t)}function E6e(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return cp.count(r-1,t)}function Ice(t){return yE.setTime(Date.UTC(t,0,1)),yE.getUTCDay()}function vD(t,r,n){return r+t*7-(n+6)%7}function Nce(t){return W$t[t]}function Fce(t){return q$t[t]}var ic,Bm,od,Wc,jm,$0,wD,Pm,Lm,z0,zx,U$t,lIn,uIn,yE,cIn,fIn,dIn,pIn,W$t,q$t,rP,nP,oP,H9,H$t,T6e,Y$t,X$t,iP,sP,aP,K$t,Z$t,A6e,Q$t,mIn,Oce=D(()=>{"use strict";sE();tP();ic="year",Bm="quarter",od="month",Wc="week",jm="date",$0="day",wD="dayofyear",Pm="hours",Lm="minutes",z0="seconds",zx="milliseconds",U$t=[ic,Bm,od,Wc,jm,$0,wD,Pm,Lm,z0,zx],lIn=U$t.reduce((t,r,n)=>(t[r]=1+n,t),{}),uIn={[ic]:"%Y ",[Bm]:"Q%q ",[od]:"%b ",[jm]:"%d ",[Wc]:"W%U ",[$0]:"%a ",[wD]:"%j ",[Pm]:"%H:00",[Lm]:"00:%M",[z0]:":%S",[zx]:".%L",[`${ic}-${od}`]:"%Y-%m ",[`${ic}-${od}-${jm}`]:"%Y-%m-%d ",[`${Pm}-${Lm}`]:"%H:%M"},yE=new Date;cIn={[ic]:t=>t.getFullYear(),[Bm]:t=>Math.floor(t.getMonth()/3),[od]:t=>t.getMonth(),[jm]:t=>t.getDate(),[Pm]:t=>t.getHours(),[Lm]:t=>t.getMinutes(),[z0]:t=>t.getSeconds(),[zx]:t=>t.getMilliseconds(),[wD]:t=>V$t(t),[Wc]:t=>C6e(t),[Wc+$0]:(t,r)=>vD(C6e(t),t.getDay(),kce(r)),[$0]:(t,r)=>vD(1,t.getDay(),kce(r))},fIn={[Bm]:t=>3*t,[Wc]:(t,r)=>vD(t,0,kce(r))},dIn={[ic]:t=>t.getUTCFullYear(),[Bm]:t=>Math.floor(t.getUTCMonth()/3),[od]:t=>t.getUTCMonth(),[jm]:t=>t.getUTCDate(),[Pm]:t=>t.getUTCHours(),[Lm]:t=>t.getUTCMinutes(),[z0]:t=>t.getUTCSeconds(),[zx]:t=>t.getUTCMilliseconds(),[wD]:t=>G$t(t),[Wc]:t=>E6e(t),[$0]:(t,r)=>vD(1,t.getUTCDay(),Ice(r)),[Wc+$0]:(t,r)=>vD(E6e(t),t.getUTCDay(),Ice(r))},pIn={[Bm]:t=>3*t,[Wc]:(t,r)=>vD(t,0,Ice(r))},W$t={[ic]:nc,[Bm]:Bx.every(3),[od]:Bx,[Wc]:up,[jm]:Gc,[$0]:Gc,[wD]:Gc,[Pm]:Nw,[Lm]:Iw,[z0]:ou,[zx]:Rm},q$t={[ic]:oc,[Bm]:$x.every(3),[od]:$x,[Wc]:cp,[jm]:lp,[$0]:lp,[wD]:lp,[Pm]:Fw,[Lm]:Dw,[z0]:ou,[zx]:Rm};rP=1e3,nP=rP*60,oP=nP*60,H9=oP*24,H$t=H9*7,T6e=H9*30,Y$t=H9*365,X$t=[ic,od,jm,Pm,Lm,z0,zx],iP=X$t.slice(0,-1),sP=iP.slice(0,-1),aP=sP.slice(0,-1),K$t=aP.slice(0,-1),Z$t=[ic,Wc],A6e=[ic,od],Q$t=[ic],mIn=[[iP,1,rP],[iP,5,5*rP],[iP,15,15*rP],[iP,30,30*rP],[sP,1,nP],[sP,5,5*nP],[sP,15,15*nP],[sP,30,30*nP],[aP,1,oP],[aP,3,3*oP],[aP,6,6*oP],[aP,12,12*oP],[K$t,1,H9],[Z$t,1,H$t],[A6e,1,T6e],[A6e,3,3*T6e],[Q$t,1,Y$t]]});function Mce(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rce(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lP(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function Y9(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=uP(i),f=cP(i),d=uP(s),p=cP(s),m=uP(a),h=cP(a),g=uP(l),y=cP(l),b=uP(u),x=cP(u),v={a:V,A:G,b:U,B:Y,c:null,d:O6e,e:O6e,f:w6t,g:N6t,G:O6t,H:b6t,I:x6t,j:v6t,L:L6e,m:_6t,M:S6t,p:X,q:pe,Q:j6e,s:P6e,S:C6t,u:E6t,U:T6t,V:A6t,w:k6t,W:I6t,x:null,X:null,y:D6t,Y:F6t,Z:M6t,"%":R6e},w={a:$,A:F,b:z,B:q,c:null,d:M6e,e:M6e,f:L6t,g:Y6t,G:K6t,H:R6t,I:j6t,j:P6t,L:$6e,m:B6t,M:$6t,p:ee,q:ae,Q:j6e,s:P6e,S:z6t,u:U6t,U:V6t,V:G6t,w:W6t,W:q6t,x:null,X:null,y:H6t,Y:X6t,Z:Z6t,"%":R6e},_={a:N,A:k,b:M,B:I,c:L,d:N6e,e:N6e,f:m6t,g:D6e,G:I6e,H:F6e,I:F6e,j:c6t,L:p6t,m:u6t,M:f6t,p:A,q:l6t,Q:g6t,s:y6t,S:d6t,u:n6t,U:o6t,V:i6t,w:r6t,W:s6t,x:P,X:R,y:D6e,Y:I6e,Z:a6t,"%":h6t};v.x=C(n,v),v.X=C(o,v),v.c=C(r,v),w.x=C(n,w),w.X=C(o,w),w.c=C(r,w);function C(Q,le){return function(ie){var Z=[],ge=-1,ne=0,ye=Q.length,xe,Ne,Ae;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(Z.push(Q.slice(ne,ge)),(Ne=k6e[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):Ne=xe==="e"?" ":"0",(Ae=le[xe])&&(xe=Ae(ie,Ne)),Z.push(xe),ne=ge+1);return Z.push(Q.slice(ne,ge)),Z.join("")}}function S(Q,le){return function(ie){var Z=lP(1900,void 0,1),ge=E(Z,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ne=Rce(lP(Z.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?xD.ceil(ne):xD(ne),ne=lp.offset(ne,(Z.V-1)*7),Z.y=ne.getUTCFullYear(),Z.m=ne.getUTCMonth(),Z.d=ne.getUTCDate()+(Z.w+6)%7):(ne=Mce(lP(Z.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?bD.ceil(ne):bD(ne),ne=Gc.offset(ne,(Z.V-1)*7),Z.y=ne.getFullYear(),Z.m=ne.getMonth(),Z.d=ne.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ye="Z"in Z?Rce(lP(Z.y,0,1)).getUTCDay():Mce(lP(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ye+5)%7:Z.w+Z.U*7-(ye+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,Rce(Z)):Mce(Z)}}function E(Q,le,ie,Z){for(var ge=0,ne=le.length,ye=ie.length,xe,Ne;ge<ne;){if(Z>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),Ne=_[xe in k6e?le.charAt(ge++):xe],!Ne||(Z=Ne(Q,ie,Z))<0)return-1}else if(xe!=ie.charCodeAt(Z++))return-1}return Z}function A(Q,le,ie){var Z=c.exec(le.slice(ie));return Z?(Q.p=f.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function N(Q,le,ie){var Z=m.exec(le.slice(ie));return Z?(Q.w=h.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function k(Q,le,ie){var Z=d.exec(le.slice(ie));return Z?(Q.w=p.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function M(Q,le,ie){var Z=b.exec(le.slice(ie));return Z?(Q.m=x.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function I(Q,le,ie){var Z=g.exec(le.slice(ie));return Z?(Q.m=y.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function Y(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function pe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function F(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=C(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=S(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=C(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=S(Q+="",!0);return le.toString=function(){return Q},le}}}function so(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function t6t(t){return t.replace(e6t,"\\$&")}function uP(t){return new RegExp("^(?:"+t.map(t6t).join("|")+")","i")}function cP(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function r6t(t,r,n){var o=Xa.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function n6t(t,r,n){var o=Xa.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function o6t(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function i6t(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function s6t(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function I6e(t,r,n){var o=Xa.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function D6e(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function a6t(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function l6t(t,r,n){var o=Xa.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function u6t(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function N6e(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function c6t(t,r,n){var o=Xa.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function F6e(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function f6t(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function d6t(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function p6t(t,r,n){var o=Xa.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function m6t(t,r,n){var o=Xa.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function h6t(t,r,n){var o=J$t.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function g6t(t,r,n){var o=Xa.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function y6t(t,r,n){var o=Xa.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function O6e(t,r){return so(t.getDate(),r,2)}function b6t(t,r){return so(t.getHours(),r,2)}function x6t(t,r){return so(t.getHours()%12||12,r,2)}function v6t(t,r){return so(1+Gc.count(nc(t),t),r,3)}function L6e(t,r){return so(t.getMilliseconds(),r,3)}function w6t(t,r){return L6e(t,r)+"000"}function _6t(t,r){return so(t.getMonth()+1,r,2)}function S6t(t,r){return so(t.getMinutes(),r,2)}function C6t(t,r){return so(t.getSeconds(),r,2)}function E6t(t){var r=t.getDay();return r===0?7:r}function T6t(t,r){return so(up.count(nc(t)-1,t),r,2)}function B6e(t){var r=t.getDay();return r>=4||r===0?Ow(t):Ow.ceil(t)}function A6t(t,r){return t=B6e(t),so(Ow.count(nc(t),t)+(nc(t).getDay()===4),r,2)}function k6t(t){return t.getDay()}function I6t(t,r){return so(bD.count(nc(t)-1,t),r,2)}function D6t(t,r){return so(t.getFullYear()%100,r,2)}function N6t(t,r){return t=B6e(t),so(t.getFullYear()%100,r,2)}function F6t(t,r){return so(t.getFullYear()%1e4,r,4)}function O6t(t,r){var n=t.getDay();return t=n>=4||n===0?Ow(t):Ow.ceil(t),so(t.getFullYear()%1e4,r,4)}function M6t(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+so(r/60|0,"0",2)+so(r%60,"0",2)}function M6e(t,r){return so(t.getUTCDate(),r,2)}function R6t(t,r){return so(t.getUTCHours(),r,2)}function j6t(t,r){return so(t.getUTCHours()%12||12,r,2)}function P6t(t,r){return so(1+lp.count(oc(t),t),r,3)}function $6e(t,r){return so(t.getUTCMilliseconds(),r,3)}function L6t(t,r){return $6e(t,r)+"000"}function B6t(t,r){return so(t.getUTCMonth()+1,r,2)}function $6t(t,r){return so(t.getUTCMinutes(),r,2)}function z6t(t,r){return so(t.getUTCSeconds(),r,2)}function U6t(t){var r=t.getUTCDay();return r===0?7:r}function V6t(t,r){return so(cp.count(oc(t)-1,t),r,2)}function z6e(t){var r=t.getUTCDay();return r>=4||r===0?Mw(t):Mw.ceil(t)}function G6t(t,r){return t=z6e(t),so(Mw.count(oc(t),t)+(oc(t).getUTCDay()===4),r,2)}function W6t(t){return t.getUTCDay()}function q6t(t,r){return so(xD.count(oc(t)-1,t),r,2)}function H6t(t,r){return so(t.getUTCFullYear()%100,r,2)}function Y6t(t,r){return t=z6e(t),so(t.getUTCFullYear()%100,r,2)}function X6t(t,r){return so(t.getUTCFullYear()%1e4,r,4)}function K6t(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Mw(t):Mw.ceil(t),so(t.getUTCFullYear()%1e4,r,4)}function Z6t(){return"+0000"}function R6e(){return"%"}function j6e(t){return+t}function P6e(t){return Math.floor(+t/1e3)}var k6e,Xa,J$t,e6t,U6e=D(()=>{"use strict";tP();k6e={"-":"",_:" ",0:"0"},Xa=/^\s*\d+/,J$t=/^%/,e6t=/[\\^$*+?|[\]().{}]/g});function jce(t){return _D=Y9(t),SD=_D.format,X9=_D.parse,CD=_D.utcFormat,K9=_D.utcParse,_D}var _D,SD,X9,CD,K9,V6e=D(()=>{"use strict";U6e();jce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var Z9=D(()=>{"use strict";V6e()});function fP(t){let r={};return n=>r[n]||(r[n]=t(n))}function Q6t(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=J6t(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function J6t(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function ezt(t){let r=fP(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=nd(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Q6t(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=nd(a??",f");let l=Aw(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=Qj(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=Jj(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=Zj(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function rzt(){return tzt=ezt({format:kw,formatPrefix:yD})}function G6e(t,r,n){n=n||{},Mx(n)||nu(`Invalid time multi-format specifier: ${n}`);let o=r(z0),i=r(Lm),s=r(Pm),a=r(jm),l=r(Wc),u=r(od),c=r(Bm),f=r(ic),d=t(n[zx]||".%L"),p=t(n[z0]||":%S"),m=t(n[Lm]||"%I:%M"),h=t(n[Pm]||"%I %p"),g=t(n[jm]||n[$0]||"%a %d"),y=t(n[Wc]||"%b %d"),b=t(n[od]||"%B"),x=t(n[Bm]||"%B"),v=t(n[ic]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?m:a(w)<w?h:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function nzt(t){let r=fP(t.format),n=fP(t.utcFormat);return{timeFormat:o=>pD(o)?r(o):G6e(r,Nce,o),utcFormat:o=>pD(o)?n(o):G6e(n,Fce,o),timeParse:fP(t.parse),utcParse:fP(t.utcParse)}}function izt(){return ozt=nzt({format:SD,parse:X9,utcFormat:CD,utcParse:K9})}var tzt,ozt,W6e=D(()=>{"use strict";ap();W9();Oce();sE();Z9();rzt();izt()});function uzt(t,r){return n=>({options:n||{},sanitize:fzt,load:czt,fileAccess:!!r,file:dzt(r),http:mzt(t)})}function czt(t,r){return Be(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function fzt(t,r){return Be(this,null,function*(){r=Rx({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=azt.test(t.replace(lzt,""));(t==null||typeof t!="string"||!l)&&nu("Sanitize failure, invalid URI: "+_9(t));let u=szt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(q6e))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(q6e.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function dzt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):pzt}function pzt(){return Be(this,null,function*(){nu("No file system access.")})}function mzt(t){return t?function(r,n){return Be(this,null,function*(){let o=Rx({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Sw(s[i])?s[i]():s.text():nu(s.status+""+s.statusText)})}:hzt}function hzt(){return Be(this,null,function*(){nu("No HTTP fetch method available.")})}function H6e(t){let r=function(n,o){let i={delimiter:t};return Pce(n,o?Rx(o,i):i)};return r.responseType="text",r}function Pce(t,r){return r.header&&(t=r.header.map(_9).join(r.delimiter)+`
`+t),tce(r.delimiter).parse(t+"")}function gzt(t){return typeof Buffer=="function"&&Sw(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Lce(t,r){let n=r&&r.property?vue(r.property):KBe;return Mx(t)&&!gzt(t)?yzt(n(t),r):n(JSON.parse(t))}function yzt(t,r){return!rc(t)&&ZBe(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function Y6e(t,r){let n,o,i,s;return t=Lce(t,r),r&&r.feature?(n=BC,i=r.feature):r&&r.mesh?(n=$C,i=r.mesh,s=bzt[r.filter]):nu("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):nu("Invalid TopoJSON object: "+i),o&&o.features||[o]}var szt,azt,lzt,q6e,bzt,jIn,Bce,X6e=D(()=>{"use strict";sE();P$e();C7();W6e();szt=/^(data:|([A-Za-z]+:)?\/\/)/,azt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,lzt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,q6e="file://";Pce.responseType="text";Lce.responseType="json";bzt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};Y6e.responseType="json";jIn={dsv:Pce,csv:H6e(","),tsv:H6e("	"),json:Lce,topojson:Y6e},Bce=uzt(typeof fetch<"u"&&fetch,null)});function Ys(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function U0(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var id=D(()=>{"use strict"});function bE(){var t=new E0,r=[],n=[],o=$ce;function i(s){let a=t.get(s);if(a===void 0){if(o!==$ce)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new E0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return bE(r,n).unknown(o)},Ys.apply(i,arguments),i}var $ce,K6e=D(()=>{"use strict";ap();id();$ce=Symbol("implicit")});function Ux(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function Rw(t,r){var n=Object.create(t.prototype);for(var o in r)n[o]=r[o];return n}var Q9=D(()=>{"use strict"});function W0(){}function Q6e(){return this.rgb().formatHex()}function Tzt(){return oze(this).formatHsl()}function J6e(){return this.rgb().formatRgb()}function qc(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=xzt.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?eze(r):n===3?new _a(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?J9(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?J9(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=vzt.exec(t))?new _a(r[1],r[2],r[3],1):(r=wzt.exec(t))?new _a(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=_zt.exec(t))?J9(r[1],r[2],r[3],r[4]):(r=Szt.exec(t))?J9(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Czt.exec(t))?nze(r[1],r[2]/100,r[3]/100,1):(r=Ezt.exec(t))?nze(r[1],r[2]/100,r[3]/100,r[4]):Z6e.hasOwnProperty(t)?eze(Z6e[t]):t==="transparent"?new _a(NaN,NaN,NaN,0):null}function eze(t){return new _a(t>>16&255,t>>8&255,t&255,1)}function J9(t,r,n,o){return o<=0&&(t=r=n=NaN),new _a(t,r,n,o)}function pP(t){return t instanceof W0||(t=qc(t)),t?(t=t.rgb(),new _a(t.r,t.g,t.b,t.opacity)):new _a}function Xs(t,r,n,o){return arguments.length===1?pP(t):new _a(t,r,n,o??1)}function _a(t,r,n,o){this.r=+t,this.g=+r,this.b=+n,this.opacity=+o}function tze(){return"#"+zce(this.r)+zce(this.g)+zce(this.b)}function rze(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function zce(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function nze(t,r,n,o){return o<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new V0(t,r,n,o)}function oze(t){if(t instanceof V0)return new V0(t.h,t.s,t.l,t.opacity);if(t instanceof W0||(t=qc(t)),!t)return new V0;if(t instanceof V0)return t;t=t.rgb();var r=t.r/255,n=t.g/255,o=t.b/255,i=Math.min(r,n,o),s=Math.max(r,n,o),a=NaN,l=s-i,u=(s+i)/2;return l?(r===s?a=(n-o)/l+(n<o)*6:n===s?a=(o-r)/l+2:a=(r-n)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new V0(a,l,u,t.opacity)}function sd(t,r,n,o){return arguments.length===1?oze(t):new V0(t,r,n,o??1)}function V0(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}function Uce(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}var jw,xE,ED,dP,G0,xzt,vzt,wzt,_zt,Szt,Czt,Ezt,Z6e,eV=D(()=>{"use strict";Q9();jw=.7,xE=1/jw,ED="\\s*([+-]?\\d+)\\s*",dP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",G0="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xzt=/^#([0-9a-f]{3,8})$/,vzt=new RegExp("^rgb\\("+[ED,ED,ED]+"\\)$"),wzt=new RegExp("^rgb\\("+[G0,G0,G0]+"\\)$"),_zt=new RegExp("^rgba\\("+[ED,ED,ED,dP]+"\\)$"),Szt=new RegExp("^rgba\\("+[G0,G0,G0,dP]+"\\)$"),Czt=new RegExp("^hsl\\("+[dP,G0,G0]+"\\)$"),Ezt=new RegExp("^hsla\\("+[dP,G0,G0,dP]+"\\)$"),Z6e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ux(W0,qc,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Q6e,formatHex:Q6e,formatHsl:Tzt,formatRgb:J6e,toString:J6e});Ux(_a,Xs,Rw(W0,{brighter:function(t){return t=t==null?xE:Math.pow(xE,t),new _a(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?jw:Math.pow(jw,t),new _a(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tze,formatHex:tze,formatRgb:rze,toString:rze}));Ux(V0,sd,Rw(W0,{brighter:function(t){return t=t==null?xE:Math.pow(xE,t),new V0(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?jw:Math.pow(jw,t),new V0(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*r,i=2*n-o;return new _a(Uce(t>=240?t-240:t+120,i,o),Uce(t,i,o),Uce(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}))});var tV,rV,Vce=D(()=>{"use strict";tV=Math.PI/180,rV=180/Math.PI});function cze(t){if(t instanceof q0)return new q0(t.l,t.a,t.b,t.opacity);if(t instanceof Vx)return fze(t);t instanceof _a||(t=pP(t));var r=Hce(t.r),n=Hce(t.g),o=Hce(t.b),i=Gce((.2225045*r+.7168786*n+.0606169*o)/sze),s,a;return r===n&&n===o?s=a=i:(s=Gce((.4360747*r+.3850649*n+.1430804*o)/ize),a=Gce((.0139322*r+.0971045*n+.7141733*o)/aze)),new q0(116*i-16,500*(s-i),200*(i-a),t.opacity)}function Hc(t,r,n,o){return arguments.length===1?cze(t):new q0(t,r,n,o??1)}function q0(t,r,n,o){this.l=+t,this.a=+r,this.b=+n,this.opacity=+o}function Gce(t){return t>Azt?Math.pow(t,1/3):t/uze+lze}function Wce(t){return t>TD?t*t*t:uze*(t-lze)}function qce(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Hce(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kzt(t){if(t instanceof Vx)return new Vx(t.h,t.c,t.l,t.opacity);if(t instanceof q0||(t=cze(t)),t.a===0&&t.b===0)return new Vx(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var r=Math.atan2(t.b,t.a)*rV;return new Vx(r<0?r+360:r,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ad(t,r,n,o){return arguments.length===1?kzt(t):new Vx(t,r,n,o??1)}function Vx(t,r,n,o){this.h=+t,this.c=+r,this.l=+n,this.opacity=+o}function fze(t){if(isNaN(t.h))return new q0(t.l,0,0,t.opacity);var r=t.h*tV;return new q0(t.l,Math.cos(r)*t.c,Math.sin(r)*t.c,t.opacity)}var nV,ize,sze,aze,lze,TD,uze,Azt,dze=D(()=>{"use strict";Q9();eV();Vce();nV=18,ize=.96422,sze=1,aze=.82521,lze=4/29,TD=6/29,uze=3*TD*TD,Azt=TD*TD*TD;Ux(q0,Hc,Rw(W0,{brighter:function(t){return new q0(this.l+nV*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new q0(this.l-nV*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return r=ize*Wce(r),t=sze*Wce(t),n=aze*Wce(n),new _a(qce(3.1338561*r-1.6168667*t-.4906146*n),qce(-.9787684*r+1.9161415*t+.033454*n),qce(.0719453*r-.2289914*t+1.4052427*n),this.opacity)}}));Ux(Vx,ad,Rw(W0,{brighter:function(t){return new Vx(this.h,this.c,this.l+nV*(t??1),this.opacity)},darker:function(t){return new Vx(this.h,this.c,this.l-nV*(t??1),this.opacity)},rgb:function(){return fze(this).rgb()}}))});function Izt(t){if(t instanceof vE)return new vE(t.h,t.s,t.l,t.opacity);t instanceof _a||(t=pP(t));var r=t.r/255,n=t.g/255,o=t.b/255,i=(hze*o+pze*r-mze*n)/(hze+pze-mze),s=o-i,a=(mP*(n-i)-Xce*s)/oV,l=Math.sqrt(a*a+s*s)/(mP*i*(1-i)),u=l?Math.atan2(a,s)*rV-120:NaN;return new vE(u<0?u+360:u,l,i,t.opacity)}function fp(t,r,n,o){return arguments.length===1?Izt(t):new vE(t,r,n,o??1)}function vE(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}var gze,Yce,Xce,oV,mP,pze,mze,hze,yze=D(()=>{"use strict";Q9();eV();Vce();gze=-.14861,Yce=1.78277,Xce=-.29227,oV=-.90649,mP=1.97294,pze=mP*oV,mze=mP*Yce,hze=Yce*Xce-oV*gze;Ux(vE,fp,Rw(W0,{brighter:function(t){return t=t==null?xE:Math.pow(xE,t),new vE(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?jw:Math.pow(jw,t),new vE(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*tV,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),o=Math.cos(t),i=Math.sin(t);return new _a(255*(r+n*(gze*o+Yce*i)),255*(r+n*(Xce*o+oV*i)),255*(r+n*(mP*o)),this.opacity)}}))});var As=D(()=>{"use strict";eV();dze();yze()});function Kce(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function iV(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return Kce((n-o/r)*r,a,i,s,l)}}var sV=D(()=>{"use strict"});function aV(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return Kce((n-o/r)*r,i,s,a,l)}}var Zce=D(()=>{"use strict";sV()});var AD,Qce=D(()=>{"use strict";AD=t=>()=>t});function bze(t,r){return function(n){return t+n*r}}function Dzt(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function Pw(t,r){var n=r-t;return n?bze(t,n>180||n<-180?n-360*Math.round(n/360):n):AD(isNaN(t)?r:t)}function xze(t){return(t=+t)==1?Ui:function(r,n){return n-r?Dzt(r,n,t):AD(isNaN(r)?n:r)}}function Ui(t,r){var n=r-t;return n?bze(t,n):AD(isNaN(t)?r:t)}var wE=D(()=>{"use strict";Qce()});function vze(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=Xs(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var hP,wze,_ze,Jce=D(()=>{"use strict";As();sV();Zce();wE();hP=function t(r){var n=xze(r);function o(i,s){var a=n((i=Xs(i)).r,(s=Xs(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Ui(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);wze=vze(iV),_ze=vze(aV)});function kD(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function lV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var uV=D(()=>{"use strict"});function Sze(t,r){return(lV(r)?kD:efe)(t,r)}function efe(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=Yc(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var tfe=D(()=>{"use strict";gP();uV()});function cV(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var rfe=D(()=>{"use strict"});function iu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var yP=D(()=>{"use strict"});function fV(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=Yc(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var nfe=D(()=>{"use strict";gP()});function Nzt(t){return function(){return t}}function Fzt(t){return function(r){return t(r)+""}}function dV(t,r){var n=ife.lastIndex=ofe.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=ife.exec(t))&&(i=ofe.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:iu(o,i)})),n=ofe.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?Fzt(u[0].x):Nzt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var ife,ofe,sfe=D(()=>{"use strict";yP();ife=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ofe=new RegExp(ife.source,"g")});function Yc(t,r){var n=typeof r,o;return r==null||n==="boolean"?AD(r):(n==="number"?iu:n==="string"?(o=qc(r))?(r=o,hP):dV:r instanceof qc?hP:r instanceof Date?cV:lV(r)?kD:Array.isArray(r)?efe:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?fV:iu)(t,r)}var gP=D(()=>{"use strict";As();Jce();tfe();rfe();yP();nfe();sfe();Qce();uV()});function Cze(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var Eze=D(()=>{"use strict"});function Tze(t,r){var n=Pw(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var Aze=D(()=>{"use strict";wE()});function Lw(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var kze=D(()=>{"use strict"});function afe(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*Ize,skewX:Math.atan(u)*Ize,scaleX:a,scaleY:l}}var Ize,pV,Dze=D(()=>{"use strict";Ize=180/Math.PI,pV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function Nze(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?pV:afe(r.a,r.b,r.c,r.d,r.e,r.f)}function Fze(t){return t==null?pV:(mV||(mV=document.createElementNS("http://www.w3.org/2000/svg","g")),mV.setAttribute("transform",t),(t=mV.transform.baseVal.consolidate())?(t=t.matrix,afe(t.a,t.b,t.c,t.d,t.e,t.f)):pV)}var mV,Oze=D(()=>{"use strict";Dze()});function Mze(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,m,h){if(c!==d||f!==p){var g=m.push("translate(",null,r,null,n);h.push({i:g-4,x:iu(c,d)},{i:g-2,x:iu(f,p)})}else(d||p)&&m.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:iu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:iu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,m,h){if(c!==d||f!==p){var g=m.push(i(m)+"scale(",null,",",null,")");h.push({i:g-4,x:iu(c,d)},{i:g-2,x:iu(f,p)})}else(d!==1||p!==1)&&m.push(i(m)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(m){for(var h=-1,g=p.length,y;++h<g;)d[(y=p[h]).i]=y.x(m);return d.join("")}}}var Rze,jze,Pze=D(()=>{"use strict";yP();Oze();Rze=Mze(Nze,"px, ","px)","deg)"),jze=Mze(Fze,", ",")",")")});function Lze(t){return((t=Math.exp(t))+1/t)/2}function Mzt(t){return((t=Math.exp(t))-1/t)/2}function Rzt(t){return((t=Math.exp(2*t))-1)/(t+1)}var Ozt,Bze,$ze=D(()=>{"use strict";Ozt=1e-12;Bze=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],m=f-l,h=d-u,g=m*m+h*h,y,b;if(g<Ozt)b=Math.log(p/c)/r,y=function(S){return[l+S*m,u+S*h,c*Math.exp(r*S*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-_)/r,y=function(S){var E=S*b,A=Lze(_),N=c/(n*x)*(A*Rzt(r*E+_)-Mzt(_));return[l+N*m,u+N*h,c*A/Lze(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function zze(t){return function(r,n){var o=t((r=sd(r)).h,(n=sd(n)).h),i=Ui(r.s,n.s),s=Ui(r.l,n.l),a=Ui(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var Uze,Vze,Gze=D(()=>{"use strict";As();wE();Uze=zze(Pw),Vze=zze(Ui)});function lfe(t,r){var n=Ui((t=Hc(t)).l,(r=Hc(r)).l),o=Ui(t.a,r.a),i=Ui(t.b,r.b),s=Ui(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var Wze=D(()=>{"use strict";As();wE()});function qze(t){return function(r,n){var o=t((r=ad(r)).h,(n=ad(n)).h),i=Ui(r.c,n.c),s=Ui(r.l,n.l),a=Ui(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var Hze,Yze,Xze=D(()=>{"use strict";As();wE();Hze=qze(Pw),Yze=qze(Ui)});function Kze(t){return function r(n){n=+n;function o(i,s){var a=t((i=fp(i)).h,(s=fp(s)).h),l=Ui(i.s,s.s),u=Ui(i.l,s.l),c=Ui(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var Zze,Qze,Jze=D(()=>{"use strict";As();wE();Zze=Kze(Pw),Qze=Kze(Ui)});function _E(t,r){r===void 0&&(r=t,t=Yc);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var e8e=D(()=>{"use strict";gP()});function t8e(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var r8e=D(()=>{"use strict"});var ufe={};cn(ufe,{interpolate:()=>Yc,interpolateArray:()=>Sze,interpolateBasis:()=>iV,interpolateBasisClosed:()=>aV,interpolateCubehelix:()=>Zze,interpolateCubehelixLong:()=>Qze,interpolateDate:()=>cV,interpolateDiscrete:()=>Cze,interpolateHcl:()=>Hze,interpolateHclLong:()=>Yze,interpolateHsl:()=>Uze,interpolateHslLong:()=>Vze,interpolateHue:()=>Tze,interpolateLab:()=>lfe,interpolateNumber:()=>iu,interpolateNumberArray:()=>kD,interpolateObject:()=>fV,interpolateRgb:()=>hP,interpolateRgbBasis:()=>wze,interpolateRgbBasisClosed:()=>_ze,interpolateRound:()=>Lw,interpolateString:()=>dV,interpolateTransformCss:()=>Rze,interpolateTransformSvg:()=>jze,interpolateZoom:()=>Bze,piecewise:()=>_E,quantize:()=>t8e});var bP=D(()=>{"use strict";gP();tfe();sV();Zce();rfe();Eze();Aze();yP();uV();nfe();kze();sfe();Pze();$ze();Jce();Gze();Wze();Xze();Jze();e8e();r8e()});function cfe(t){return function(){return t}}var n8e=D(()=>{"use strict"});function ID(t){return+t}var ffe=D(()=>{"use strict"});function Dl(t){return t}function dfe(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:cfe(isNaN(r)?NaN:.5)}function jzt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function Pzt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=dfe(i,o),s=n(a,s)):(o=dfe(o,i),s=n(s,a)),function(l){return s(o(l))}}function Lzt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=dfe(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=Mm(t,l,1,o)-1;return s[u](i[u](l))}}function H0(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function SE(){var t=o8e,r=o8e,n=Yc,o,i,s,a=Dl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Dl&&(a=jzt(t[0],t[p-1])),l=p>2?Lzt:Pzt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),iu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,ID),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=Lw,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Dl,f()):a!==Dl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,m){return o=p,i=m,f()}}function xP(){return SE()(Dl,Dl)}var o8e,Bw=D(()=>{"use strict";ap();bP();n8e();ffe();o8e=[0,1]});function DD(t,r,n,o){var i=Aw(t,r,n),s;switch(o=nd(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=Qj(i,a))&&(o.precision=s),yD(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=Jj(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=Zj(i))&&(o.precision=s-(o.type==="%")*2);break}}return kw(o)}var pfe=D(()=>{"use strict";ap();W9()});function ld(t){var r=t.domain;return t.ticks=function(n){var o=r();return fE(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return DD(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=Yj(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function vP(){var t=xP();return t.copy=function(){return H0(t,vP())},Ys.apply(t,arguments),ld(t)}var $w=D(()=>{"use strict";ap();Bw();id();pfe()});function wP(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,ID),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return wP(t).unknown(r)},t=arguments.length?Array.from(t,ID):[0,1],ld(n)}var i8e=D(()=>{"use strict";$w();ffe()});function _P(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var mfe=D(()=>{"use strict"});function s8e(t){return Math.log(t)}function a8e(t){return Math.exp(t)}function Bzt(t){return-Math.log(-t)}function $zt(t){return-Math.exp(-t)}function zzt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Uzt(t){return t===10?zzt:t===Math.E?Math.exp:r=>Math.pow(t,r)}function Vzt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function l8e(t){return(r,n)=>-t(-r,n)}function SP(t){let r=t(s8e,a8e),n=r.domain,o=10,i,s;function a(){return i=Vzt(o),s=Uzt(o),n()[0]<0?(i=l8e(i),s=l8e(s),t(Bzt,$zt)):t(s8e,a8e),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),m=i(f),h,g,y=l==null?10:+l,b=[];if(!(o%1)&&m-p<y){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(h=1;h<o;++h)if(g=p<0?h/s(-p):h*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=m;++p)for(h=o-1;h>=1;--h)if(g=p>0?h/s(-p):h*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=fE(c,f,y))}else b=fE(p,m,Math.min(m-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=nd(u)).precision==null&&(u.trim=!0),u=kw(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(_P(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function CP(){let t=SP(SE()).domain([1,10]);return t.copy=()=>H0(t,CP()).base(t.base()),Ys.apply(t,arguments),t}var hV=D(()=>{"use strict";ap();W9();mfe();Bw();id()});function u8e(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function c8e(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function EP(t){var r=1,n=t(u8e(r),c8e(r));return n.constant=function(o){return arguments.length?t(u8e(r=+o),c8e(r)):r},ld(n)}function TP(){var t=EP(SE());return t.copy=function(){return H0(t,TP()).constant(t.constant())},Ys.apply(t,arguments)}var gV=D(()=>{"use strict";$w();Bw();id()});function f8e(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function Gzt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Wzt(t){return t<0?-t*t:t*t}function AP(t){var r=t(Dl,Dl),n=1;function o(){return n===1?t(Dl,Dl):n===.5?t(Gzt,Wzt):t(f8e(n),f8e(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},ld(r)}function ND(){var t=AP(SE());return t.copy=function(){return H0(t,ND()).exponent(t.exponent())},Ys.apply(t,arguments),t}function hfe(){return ND.apply(null,arguments).exponent(.5)}var yV=D(()=>{"use strict";$w();Bw();id()});function kP(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=ice(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[Mm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(P0),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return kP().domain(t).range(r).unknown(o)},Ys.apply(s,arguments)}var d8e=D(()=>{"use strict";ap();id()});function IP(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Mm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return IP().domain([t,r]).range(i).unknown(s)},Ys.apply(ld(a),arguments)}var p8e=D(()=>{"use strict";ap();$w();id()});function DP(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[Mm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return DP().domain(t).range(r).unknown(n)},Ys.apply(i,arguments)}var m8e=D(()=>{"use strict";ap();id()});function qzt(t){return new Date(t)}function Hzt(t){return t instanceof Date?+t:+new Date(+t)}function bV(t,r,n,o,i,s,a,l,u,c){var f=xP(),d=f.invert,p=f.domain,m=c(".%L"),h=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(C){return(u(C)<C?m:l(C)<C?h:a(C)<C?g:s(C)<C?y:o(C)<C?i(C)<C?b:x:n(C)<C?v:w)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,Hzt)):p().map(qzt)},f.ticks=function(C){var S=p();return t(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?_:c(S)},f.nice=function(C){var S=p();return(!C||typeof C.range!="function")&&(C=r(S[0],S[S.length-1],C??10)),C?p(_P(S,C)):f},f.copy=function(){return H0(f,bV(t,r,n,o,i,s,a,l,u,c))},f}function xV(){return Ys.apply(bV(Tce,Ace,nc,Bx,up,Gc,Nw,Iw,ou,SD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var gfe=D(()=>{"use strict";tP();Z9();Bw();id();mfe()});function vV(){return Ys.apply(bV(Cce,Ece,oc,$x,cp,lp,Fw,Dw,ou,CD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var h8e=D(()=>{"use strict";tP();Z9();gfe();id()});function wV(){var t=0,r=1,n,o,i,s,a=Dl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var m,h;return arguments.length?([m,h]=p,a=d(m,h),c):[a(0),a(1)]}}return c.range=f(Yc),c.rangeRound=f(Lw),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function Gx(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function FD(){var t=ld(wV()(Dl));return t.copy=function(){return Gx(t,FD())},U0.apply(t,arguments)}function _V(){var t=SP(wV()).domain([1,10]);return t.copy=function(){return Gx(t,_V()).base(t.base())},U0.apply(t,arguments)}function SV(){var t=EP(wV());return t.copy=function(){return Gx(t,SV()).constant(t.constant())},U0.apply(t,arguments)}function NP(){var t=AP(wV());return t.copy=function(){return Gx(t,NP()).exponent(t.exponent())},U0.apply(t,arguments)}function yfe(){return NP.apply(null,arguments).exponent(.5)}var bfe=D(()=>{"use strict";bP();Bw();id();$w();hV();gV();yV()});function CV(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Dl,f,d=!1,p;function m(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,m):[t,r,n]},m.clamp=function(g){return arguments.length?(d=!!g,m):d},m.interpolator=function(g){return arguments.length?(c=g,m):c};function h(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=_E(g,[b,x,v]),m):[c(0),c(.5),c(1)]}}return m.range=h(Yc),m.rangeRound=h(Lw),m.unknown=function(g){return arguments.length?(p=g,m):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,m}}function FP(){var t=ld(CV()(Dl));return t.copy=function(){return Gx(t,FP())},U0.apply(t,arguments)}function EV(){var t=SP(CV()).domain([.1,1,10]);return t.copy=function(){return Gx(t,EV()).base(t.base())},U0.apply(t,arguments)}function TV(){var t=EP(CV());return t.copy=function(){return Gx(t,TV()).constant(t.constant())},U0.apply(t,arguments)}function OP(){var t=AP(CV());return t.copy=function(){return Gx(t,OP()).exponent(t.exponent())},U0.apply(t,arguments)}function xfe(){return OP.apply(null,arguments).exponent(.5)}var g8e=D(()=>{"use strict";bP();Bw();id();$w();hV();bfe();gV();yV()});var vfe=D(()=>{"use strict";i8e();$w();hV();gV();K6e();yV();d8e();p8e();m8e();gfe();h8e();bfe();g8e();pfe()});function Ks(t){for(var r=t.length/6|0,n=new Array(r),o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}var $m=D(()=>{"use strict"});var MP,y8e=D(()=>{"use strict";$m();MP=Ks("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")});var RP,b8e=D(()=>{"use strict";$m();RP=Ks("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")});var jP,x8e=D(()=>{"use strict";$m();jP=Ks("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")});var PP,v8e=D(()=>{"use strict";$m();PP=Ks("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0")});var LP,w8e=D(()=>{"use strict";$m();LP=Ks("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")});var BP,_8e=D(()=>{"use strict";$m();BP=Ks("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")});var $P,S8e=D(()=>{"use strict";$m();$P=Ks("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")});var zP,C8e=D(()=>{"use strict";$m();zP=Ks("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")});var UP,E8e=D(()=>{"use strict";$m();UP=Ks("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")});var VP,T8e=D(()=>{"use strict";$m();VP=Ks("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")});function wfe(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function AV(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return wfe((n-o/r)*r,a,i,s,l)}}var kV=D(()=>{"use strict"});function IV(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return wfe((n-o/r)*r,i,s,a,l)}}var _fe=D(()=>{"use strict";kV()});var OD,Sfe=D(()=>{"use strict";OD=t=>()=>t});function A8e(t,r){return function(n){return t+n*r}}function Xzt(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function zw(t,r){var n=r-t;return n?A8e(t,n>180||n<-180?n-360*Math.round(n/360):n):OD(isNaN(t)?r:t)}function k8e(t){return(t=+t)==1?Vi:function(r,n){return n-r?Xzt(r,n,t):OD(isNaN(r)?n:r)}}function Vi(t,r){var n=r-t;return n?A8e(t,n):OD(isNaN(t)?r:t)}var CE=D(()=>{"use strict";Sfe()});function I8e(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=Xs(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var GP,D8e,N8e,Cfe=D(()=>{"use strict";As();kV();_fe();CE();GP=function t(r){var n=k8e(r);function o(i,s){var a=n((i=Xs(i)).r,(s=Xs(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Vi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);D8e=I8e(AV),N8e=I8e(IV)});function MD(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function DV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var NV=D(()=>{"use strict"});function F8e(t,r){return(DV(r)?MD:Efe)(t,r)}function Efe(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=su(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var Tfe=D(()=>{"use strict";WP();NV()});function FV(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var Afe=D(()=>{"use strict"});function au(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var qP=D(()=>{"use strict"});function OV(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=su(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var kfe=D(()=>{"use strict";WP()});function Kzt(t){return function(){return t}}function Zzt(t){return function(r){return t(r)+""}}function MV(t,r){var n=Dfe.lastIndex=Ife.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=Dfe.exec(t))&&(i=Ife.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:au(o,i)})),n=Ife.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?Zzt(u[0].x):Kzt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var Dfe,Ife,Nfe=D(()=>{"use strict";qP();Dfe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ife=new RegExp(Dfe.source,"g")});function su(t,r){var n=typeof r,o;return r==null||n==="boolean"?OD(r):(n==="number"?au:n==="string"?(o=qc(r))?(r=o,GP):MV:r instanceof qc?GP:r instanceof Date?FV:DV(r)?MD:Array.isArray(r)?Efe:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?OV:au)(t,r)}var WP=D(()=>{"use strict";As();Cfe();Tfe();Afe();qP();kfe();Nfe();Sfe();NV()});function O8e(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var M8e=D(()=>{"use strict"});function R8e(t,r){var n=zw(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var j8e=D(()=>{"use strict";CE()});function Y0(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var P8e=D(()=>{"use strict"});function Ffe(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*L8e,skewX:Math.atan(u)*L8e,scaleX:a,scaleY:l}}var L8e,RV,B8e=D(()=>{"use strict";L8e=180/Math.PI,RV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function $8e(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?RV:Ffe(r.a,r.b,r.c,r.d,r.e,r.f)}function z8e(t){return t==null?RV:(jV||(jV=document.createElementNS("http://www.w3.org/2000/svg","g")),jV.setAttribute("transform",t),(t=jV.transform.baseVal.consolidate())?(t=t.matrix,Ffe(t.a,t.b,t.c,t.d,t.e,t.f)):RV)}var jV,U8e=D(()=>{"use strict";B8e()});function V8e(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,m,h){if(c!==d||f!==p){var g=m.push("translate(",null,r,null,n);h.push({i:g-4,x:au(c,d)},{i:g-2,x:au(f,p)})}else(d||p)&&m.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:au(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:au(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,m,h){if(c!==d||f!==p){var g=m.push(i(m)+"scale(",null,",",null,")");h.push({i:g-4,x:au(c,d)},{i:g-2,x:au(f,p)})}else(d!==1||p!==1)&&m.push(i(m)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(m){for(var h=-1,g=p.length,y;++h<g;)d[(y=p[h]).i]=y.x(m);return d.join("")}}}var G8e,W8e,q8e=D(()=>{"use strict";qP();U8e();G8e=V8e($8e,"px, ","px)","deg)"),W8e=V8e(z8e,", ",")",")")});function H8e(t){return((t=Math.exp(t))+1/t)/2}function Jzt(t){return((t=Math.exp(t))-1/t)/2}function e8t(t){return((t=Math.exp(2*t))-1)/(t+1)}var Qzt,Y8e,X8e=D(()=>{"use strict";Qzt=1e-12;Y8e=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],m=f-l,h=d-u,g=m*m+h*h,y,b;if(g<Qzt)b=Math.log(p/c)/r,y=function(S){return[l+S*m,u+S*h,c*Math.exp(r*S*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-_)/r,y=function(S){var E=S*b,A=H8e(_),N=c/(n*x)*(A*e8t(r*E+_)-Jzt(_));return[l+N*m,u+N*h,c*A/H8e(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function K8e(t){return function(r,n){var o=t((r=sd(r)).h,(n=sd(n)).h),i=Vi(r.s,n.s),s=Vi(r.l,n.l),a=Vi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var Z8e,Q8e,J8e=D(()=>{"use strict";As();CE();Z8e=K8e(zw),Q8e=K8e(Vi)});function Ofe(t,r){var n=Vi((t=Hc(t)).l,(r=Hc(r)).l),o=Vi(t.a,r.a),i=Vi(t.b,r.b),s=Vi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var eUe=D(()=>{"use strict";As();CE()});function tUe(t){return function(r,n){var o=t((r=ad(r)).h,(n=ad(n)).h),i=Vi(r.c,n.c),s=Vi(r.l,n.l),a=Vi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var rUe,nUe,oUe=D(()=>{"use strict";As();CE();rUe=tUe(zw),nUe=tUe(Vi)});function iUe(t){return function r(n){n=+n;function o(i,s){var a=t((i=fp(i)).h,(s=fp(s)).h),l=Vi(i.s,s.s),u=Vi(i.l,s.l),c=Vi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var sUe,aUe,lUe=D(()=>{"use strict";As();CE();sUe=iUe(zw),aUe=iUe(Vi)});function EE(t,r){r===void 0&&(r=t,t=su);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var uUe=D(()=>{"use strict";WP()});function cUe(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var fUe=D(()=>{"use strict"});var Mfe={};cn(Mfe,{interpolate:()=>su,interpolateArray:()=>F8e,interpolateBasis:()=>AV,interpolateBasisClosed:()=>IV,interpolateCubehelix:()=>sUe,interpolateCubehelixLong:()=>aUe,interpolateDate:()=>FV,interpolateDiscrete:()=>O8e,interpolateHcl:()=>rUe,interpolateHclLong:()=>nUe,interpolateHsl:()=>Z8e,interpolateHslLong:()=>Q8e,interpolateHue:()=>R8e,interpolateLab:()=>Ofe,interpolateNumber:()=>au,interpolateNumberArray:()=>MD,interpolateObject:()=>OV,interpolateRgb:()=>GP,interpolateRgbBasis:()=>D8e,interpolateRgbBasisClosed:()=>N8e,interpolateRound:()=>Y0,interpolateString:()=>MV,interpolateTransformCss:()=>G8e,interpolateTransformSvg:()=>W8e,interpolateZoom:()=>Y8e,piecewise:()=>EE,quantize:()=>cUe});var TE=D(()=>{"use strict";WP();Tfe();kV();_fe();Afe();M8e();j8e();qP();NV();kfe();P8e();Nfe();q8e();X8e();Cfe();J8e();eUe();oUe();lUe();uUe();fUe()});var Rfe=D(()=>{"use strict";y8e();b8e();x8e();v8e();w8e();_8e();S8e();C8e();E8e();T8e()});function r8t(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function l8t(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function u8t(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function Vfe(){let t=bE().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],m=o[1-p],h=r8t(d,l,u),g=o[p-0];i=(m-g)/(h||1),a&&(i=Math.floor(i)),g+=(m-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=U9(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],m=p?n().reverse():n(),h=m.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<m[0]||g>o[1-p])))return b=Math.max(0,Hj(m,g)-1),x=g===y?b:Hj(m,y)-1,g-m[b]>s+1e-10&&++b,p&&(v=b,b=h-x,x=h-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return Vfe().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function gUe(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return gUe(r())},t}function c8t(){return gUe(Vfe().paddingInner(1))}function d8t(t){return f8t.call(t,_ue)}function yUe(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(Mm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=d8t(o),n):t.slice()},n.range=function(o){return arguments.length?(r=p8t.call(o),n):r.slice()},n.tickFormat=function(o,i){return DD(t[0],zc(t),o??10,i)},n.copy=function(){return yUe().domain(n.domain()).range(n.range())},n}function h8t(t){return t[m8t]=!0,t}function g8t(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?l8t(s):s.invertExtent?u8t(s):void 0),s.type=t,h8t(s)};return o.metadata=Mj(dD(n)),o}function bi(t,r,n){return arguments.length>1?(LV.set(t,g8t(t,r,n)),this):y8t(t)?LV.get(t):void 0}function y8t(t){return LV.has(t)}function BV(t,r){let n=LV.get(t);return n&&n.metadata[r]}function Gfe(t){return BV(t,KP)}function b8t(t){return BV(t,ZP)}function x8t(t){return BV(t,Uw)}function v8t(t){return BV(t,Ufe)}function w8t(t,r,n){return _E(_8t(r||"rgb",n),t)}function _8t(t,r){let n=ufe[S8t(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function S8t(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function bUe(t){if(rc(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function xUe(t,r){for(let n in t)T8t(n,r(t[n]))}function T8t(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(dUe[t]=r,this):dUe[t]}function F8t(t,r,n){let o=t.range(),i=o[0],s=zc(o),a=D8t;if(i>s&&(o=s,s=i,i=o,a=N8t),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],zc(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function vUe(t,r){return t.bins?F8t(t,t.bins,r):t.ticks?t.ticks(r):t.domain()}function O8t(t,r,n,o,i,s){let a=r.type,l=I8t;if(a===HP||i===HP)l=t.timeFormat(o);else if(a===YP||i===YP)l=t.utcFormat(o);else if(x8t(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=wUe(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function wUe(t,r,n){let o=vUe(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function M8t(t,r){return t.bins?P8t(t.bins):t.type===Uw?wUe(t,r,!0):jfe[t.type]?j8t(t[jfe[t.type]]()):vUe(t,r)}function R8t(t,r,n){let o=r[_Ue[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function j8t(t){let r=[-1/0].concat(t);return r.max=1/0,r}function P8t(t){let r=t.slice(0,-1);return r.max=zc(t),r}function B8t(t,r,n,o,i,s,a){let l=_Ue[r.type]&&s!==HP&&s!==YP?R8t(t,r,i):O8t(t,r,n,i,s,a);return o===A8t&&L8t(r)?$8t(l):o===k8t?z8t(l):U8t(l)}function V8t(t,r,n,o){let i=o||r.type;return pD(n)&&v8t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===HP?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===YP?t.utcFormat("%A, %d %B %Y, %X UTC"):B8t(t,r,5,null,n,o,!0)}function Wfe(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=V8t(t,r,n.format,n.formatType);if(b8t(r.type)){let s=M8t(r).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(Gfe(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${l}`}else{let s=r.domain();return`values from ${i(s[0])} to ${i(zc(s))}`}}var n8t,Pfe,Uw,Lfe,Bfe,$fe,HP,YP,RD,XP,PV,zfe,hUe,o8t,i8t,s8t,a8t,Ka,KP,ZP,zm,Ufe,f8t,p8t,LV,m8t,C8t,E8t,dUe,A8t,k8t,I8t,D8t,N8t,jfe,_Ue,L8t,$8t,pUe,z8t,U8t,mUe,SUe=D(()=>{"use strict";sE();ap();vfe();vfe();bP();Rfe();Oce();n8t="identity",Pfe="linear",Uw="log",Lfe="pow",Bfe="sqrt",$fe="symlog",HP="time",YP="utc",RD="sequential",XP="diverging",PV="quantile",zfe="quantize",hUe="threshold",o8t="ordinal",i8t="point",s8t="band",a8t="bin-ordinal",Ka="continuous",KP="discrete",ZP="discretizing",zm="interpolating",Ufe="temporal";f8t=Array.prototype.map;p8t=Array.prototype.slice;LV=new Map,m8t=Symbol("vega_scale");bi(n8t,wP);bi(Pfe,vP,Ka);bi(Uw,CP,[Ka,Uw]);bi(Lfe,ND,Ka);bi(Bfe,hfe,Ka);bi($fe,TP,Ka);bi(HP,xV,[Ka,Ufe]);bi(YP,vV,[Ka,Ufe]);bi(RD,FD,[Ka,zm]);bi(`${RD}-${Pfe}`,FD,[Ka,zm]);bi(`${RD}-${Uw}`,_V,[Ka,zm,Uw]);bi(`${RD}-${Lfe}`,NP,[Ka,zm]);bi(`${RD}-${Bfe}`,yfe,[Ka,zm]);bi(`${RD}-${$fe}`,SV,[Ka,zm]);bi(`${XP}-${Pfe}`,FP,[Ka,zm]);bi(`${XP}-${Uw}`,EV,[Ka,zm,Uw]);bi(`${XP}-${Lfe}`,OP,[Ka,zm]);bi(`${XP}-${Bfe}`,xfe,[Ka,zm]);bi(`${XP}-${$fe}`,TV,[Ka,zm]);bi(PV,kP,[ZP,PV]);bi(zfe,IP,ZP);bi(hUe,DP,ZP);bi(a8t,yUe,[KP,ZP]);bi(o8t,bE,KP);bi(s8t,Vfe,KP);bi(i8t,c8t,KP);C8t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},E8t={accent:RP,category10:MP,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:jP,observable10:PP,paired:LP,pastel1:BP,pastel2:$P,set1:zP,set2:UP,set3:VP,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};dUe={};xUe(E8t,bUe);xUe(C8t,t=>w8t(bUe(t)));A8t="symbol",k8t="discrete",I8t=t=>rc(t)?t.map(r=>String(r)):String(t),D8t=(t,r)=>t[1]-r[1],N8t=(t,r)=>r[1]-t[1];jfe={[PV]:"quantiles",[zfe]:"thresholds",[hUe]:"domain"},_Ue={[PV]:"quantiles",[zfe]:"domain"};L8t=t=>jfe[t.type]||t.bins;$8t=t=>(r,n,o)=>{let i=pUe(o[n+1],pUe(o.max,1/0)),s=mUe(r,t),a=mUe(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},pUe=(t,r)=>t??r,z8t=t=>(r,n)=>n?t(r):null,U8t=t=>r=>t(r),mUe=(t,r)=>Number.isFinite(t)?r(t):null});function pde(t){return t&&t.gradient}function qUe(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?XV:"";return i||(i=t.id="gradient_"+G8t++,o==="radial"?(t.x1=X0(t.x1,.5),t.y1=X0(t.y1,.5),t.r1=X0(t.r1,0),t.x2=X0(t.x2,.5),t.y2=X0(t.y2,.5),t.r2=X0(t.r2,.5),s=XV):(t.x1=X0(t.x1,0),t.y1=X0(t.y1,0),t.x2=X0(t.x2,1),t.y2=X0(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function X0(t,r){return t??r}function HUe(t,r,n){var o=ip(CUe,t)&&CUe[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function YUe(t){let r=[];return(t.match(q8t)||[]).forEach(o=>{let i=o[0],s=i.toLowerCase(),a=W8t[s],l=K8t(s,a,o.slice(1).trim()),u=l.length;if(u<a||u&&u%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(r.push([i,...l.slice(0,a)]),u!==a){s==="m"&&(i=i==="M"?"L":"l");for(let c=a;c<u;c+=a)r.push([i,...l.slice(c,c+a)])}}),r}function K8t(t,r,n){let o=[];for(let i=0;r&&i<n.length;)for(let s=0;s<r;++s){let a=t==="a"&&(s===3||s===4)?X8t:H8t,l=n.slice(i).match(a);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");i+=l[0].length,o.push(+l[0]);let u=n.slice(i).match(Y8t);u!==null&&(i+=u[0].length)}return o}function Q8t(t,r,n,o,i,s,a,l,u){let c=XUe.call(arguments);if(qfe[c])return qfe[c];let f=a*Yw,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let m=p*(l-t)*.5+d*(u-r)*.5,h=p*(u-r)*.5-d*(l-t)*.5,g=m*m/(n*n)+h*h/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,C=y*t+b*r,S=x*t+v*r,A=1/((C-w)*(C-w)+(S-_)*(S-_))-.25;A<0&&(A=0);let N=Math.sqrt(A);s==i&&(N=-N);let k=.5*(w+C)-N*(S-_),M=.5*(_+S)+N*(C-w),I=Math.atan2(_-M,w-k),P=Math.atan2(S-M,C-k)-I;P<0&&s===1?P+=K0:P>0&&s===0&&(P-=K0);let R=Math.ceil(Math.abs(P/(AE+.001))),V=[];for(let G=0;G<R;++G){let U=I+G*P/R,Y=I+(G+1)*P/R;V[G]=[k,M,U,Y,n,o,d,p]}return qfe[c]=V}function J8t(t){let r=XUe.call(t);if(Hfe[r])return Hfe[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,m=c*l,h=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+h-w*g,C=o+g+w*h,S=n+y,E=o+b,A=S+w*b,N=E-w*y;return Hfe[r]=[f*_+d*C,p*_+m*C,f*A+d*N,p*A+m*N,f*S+d*E,p*S+m*E]}function eUt(t,r,n){let o=dp[0]=t[0];if(o==="a"||o==="A")dp[1]=r*t[1],dp[2]=n*t[2],dp[3]=t[3],dp[4]=t[4],dp[5]=t[5],dp[6]=r*t[6],dp[7]=n*t[7];else if(o==="h"||o==="H")dp[1]=r*t[1];else if(o==="v"||o==="V")dp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)dp[i]=(i%2==1?r:n)*t[i];return dp}function Jfe(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,m,h,g,y=0,b=0;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var x=0,v=r.length;x<v;++x){switch(a=r[x],(i!==1||s!==1)&&(a=eUt(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"c":p=u+a[5],m=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,m+o),u=p,c=m;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],m=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,m+o),f=u+a[1],d=c+a[2],u=p,c=m;break;case"S":p=a[3],m=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,m+o),u=p,c=m,f=a[1],d=a[2];break;case"q":p=u+a[3],m=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,m+o),u=p,c=m;break;case"Q":p=a[3],m=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,m+o),u=p,c=m,f=a[1],d=a[2];break;case"t":p=u+a[1],m=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-h,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),h=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,m+o),u=p,c=m,f=u+a[1],d=c+a[2];break;case"T":p=a[1],m=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,m+o),u=p,c=m;break;case"a":EUe(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":EUe(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":u=y,c=b,t.closePath();break}l=a}}function EUe(t,r,n,o){let i=Q8t(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=J8t(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function tUt(t){return ip(AUe,t)?AUe[t]:rUt(t)}function rUt(t){if(!ip(Yfe,t)){let r=YUe(t);Yfe[t]={draw:function(n,o){Jfe(n,r,0,0,Math.sqrt(o)/2)}}}return Yfe[t]}function nUt(t){return t.x}function oUt(t){return t.y}function iUt(t){return t.width}function sUt(t){return t.height}function Wx(t){return typeof t=="function"?t:()=>+t}function $V(t,r,n){return Math.max(r,Math.min(t,n))}function aUt(){var t=nUt,r=oUt,n=iUt,o=sUt,i=Wx(0),s=i,a=i,l=i,u=null;function c(f,d,p){var m,h=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=$V(+i.call(this,f),0,x),w=$V(+s.call(this,f),0,x),_=$V(+a.call(this,f),0,x),C=$V(+l.call(this,f),0,x);if(u||(u=m=Pj()),v<=0&&w<=0&&_<=0&&C<=0)u.rect(h,g,y,b);else{var S=h+y,E=g+b;u.moveTo(h+v,g),u.lineTo(S-w,g),u.bezierCurveTo(S-Vw*w,g,S,g+Vw*w,S,g+w),u.lineTo(S,E-C),u.bezierCurveTo(S,E-Vw*C,S-Vw*C,E,S-C,E),u.lineTo(h+_,E),u.bezierCurveTo(h+Vw*_,E,h,E-Vw*_,h,E-_),u.lineTo(h,g+v),u.bezierCurveTo(h,g+Vw*v,h+Vw*v,g,h+v,g),u.closePath()}if(m)return u=null,m+""||null}return c.x=function(f){return arguments.length?(t=Wx(f),c):t},c.y=function(f){return arguments.length?(r=Wx(f),c):r},c.width=function(f){return arguments.length?(n=Wx(f),c):n},c.height=function(f){return arguments.length?(o=Wx(f),c):o},c.cornerRadius=function(f,d,p,m){return arguments.length?(i=Wx(f),s=d!=null?Wx(d):i,l=p!=null?Wx(p):i,a=m!=null?Wx(m):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function lUt(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,m){let h=m/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.hypot(g,y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*h,p-y*h),i.arc(d,p,h,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,h,0,K0);i.closePath()}else s=1;a=d,l=p,u=h}function f(d){var p,m=d.length,h,g=!1,y;for(i==null&&(i=y=Pj()),p=0;p<=m;++p)!(p<m&&o(h=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(h,p,d),+r(h,p,d),+n(h,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function uL(t,r){return t??r}function mde(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function OUt(t,r){return TUt.context(t)(r)}function MUt(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?kUt:AUt).curve(HUe(o,n.orient,n.tension)).context(t)(r)}function RUt(t,r){let n=r[0],o=n.interpolate||"linear";return IUt.curve(HUe(o,n.orient,n.tension)).context(t)(r)}function $D(t,r,n,o){return DUt.context(t)(r,n,o)}function jUt(t,r){return(r.mark.shape||r.shape).context(t)(r)}function PUt(t,r){return NUt.context(t)(r)}function LUt(t,r){return FUt.context(t)(r)}function hde(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+BUt++),a=i.clipping[s]||(i.clipping[s]={id:s});return Sw(o)?a.path=o(null):mde(n)?a.path=$D(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Xc(t){this.clear(),t&&this.union(t)}function fG(t){this.mark=t,this.bounds=this.bounds||new Xc}function gde(t){fG.call(this,t),this.items=this.items||[]}function kUe(t){t._pending+=1}function QP(t){t._pending-=1}function Hx(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?$Ut(r,o):0))}return t}function $Ut(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function pG(t,r){return dG=t,r?(DE=r*Yw,tde=nde=Math.cos(DE),VV=Math.sin(DE),rde=-VV):(tde=nde=1,DE=VV=rde=0),UUt}function NUe(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function FUe(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>Z8t?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(OUe(u,t,r,n,o)),0<c&&c<1&&i(OUe(c,t,r,n,o))}function OUe(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function KUe(t){return function(r,n){if(!Hw)return!0;t(Hw,r),ode.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=ode;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(Hw.isPointInPath(u,l))return!0;return!1}}function ZUe(t,r){return r.contains(t.x||0,t.y||0)}function QUe(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(ode.set(n,o,n+i,o+s))}function VUt(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return eL(r,n,o,i,s)}function eL(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,m,h,g,y;for(y=0;y<4;++y){if(y===0&&(m=-c,h=-(s-r)),y===1&&(m=c,h=l-r),y===2&&(m=-f,h=-(a-n)),y===3&&(m=f,h=u-n),Math.abs(m)<1e-10&&h<0)return!1;if(g=h/m,m<0){if(g>p)return!1;g>d&&(d=g)}else if(m>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function PD(t,r){t.globalCompositeOperation=r.blend||"source-over"}function Um(t,r){return t??r}function MUe(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function GUt(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+Um(r.x1,.5)*o,n.y1+Um(r.y1,.5)*i,Math.max(o,i)*Um(r.r1,0),n.x1+Um(r.x2,.5)*o,n.y1+Um(r.y2,.5)*i,Math.max(o,i)*Um(r.r2,.5));else{let a=Um(r.x1,0),l=Um(r.y1,0),u=Um(r.x2,1),c=Um(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=Uc(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=MUe(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return MUe(s,r.stops)}function JUe(t,r,n){return pde(n)?GUt(t,n,r.bounds):n}function KV(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=JUe(t,r,r.fill),!0):!1}function LD(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=JUe(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||WUt),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function qUt(t,r){return t.zindex-r.zindex||t.index-r.index}function e7e(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(qUt)}function Z0(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=e7e(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function ide(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=e7e(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function yde(t){return function(r,n,o){Z0(n,i=>{(!o||o.intersects(i.bounds))&&t7e(t,r,i,i)})}}function HUt(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&t7e(t,r,n.items[0],n.items)}}function t7e(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(PD(r,n),n.fill&&KV(r,n,i)&&r.fill(),n.stroke&&LD(r,n,i)&&r.stroke()))}function mG(t){return t=t||wue,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,ide(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function dL(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function bde(t){return mG(dL(t))}function FE(t,r){return"translate("+t+","+r+")"}function xde(t){return"rotate("+t+")"}function YUt(t,r){return"scale("+t+","+r+")"}function r7e(t){return FE(t.x||0,t.y||0)}function XUt(t){return FE(t.x||0,t.y||0)+(t.angle?" "+xde(t.angle):"")}function KUt(t){return FE(t.x||0,t.y||0)+(t.angle?" "+xde(t.angle):"")+(t.scaleX||t.scaleY?" "+YUt(t.scaleX||1,t.scaleY||1):"")}function vde(t,r,n){function o(a,l){a("transform",XUt(l)),a("d",r(null,l))}function i(a,l){return r(pG(a,l.angle),l),Hx(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=Yw),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:yde(s),pick:bde(s),isect:n||KUe(s)}}function QUt(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function JUt(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function e7t(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function wde(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(pG(u),f),Hx(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=dL(s);function l(u,c,f,d,p,m){var h=c.items,g=c.bounds;return!h||!h.length||g&&!g.contains(p,m)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,h,f,d)?h[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:HUt(s),pick:l,isect:ZUe,tip:n}}function r7t(t,r){var n=r.clip;t.save(),Sw(n)?(t.beginPath(),n(t),t.clip()):n7e(t,r.group)}function n7e(t,r){t.beginPath(),mde(r)?$D(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function o7e(t){let r=Um(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function n7t(t,r){t("transform",r7e(r))}function i7e(t,r){let n=o7e(r);t("d",$D(null,r,n,n))}function o7t(t,r){t("class","background"),t("aria-hidden",!0),i7e(t,r)}function i7t(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?i7e(t,r):t("d","")}function s7t(t,r,n){let o=r.clip?hde(n,r,r):null;t("clip-path",o)}function a7t(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),Hx(t,r),t.translate(r.x||0,r.y||0)}function iL(t,r,n,o){let i=o7e(r);t.beginPath(),$D(t,r,(n||0)+i,(o||0)+i)}function f7t(t,r,n,o){Z0(r,i=>{let s=i.x||0,a=i.y||0,l=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(iL(t,i,s,a),PD(t,i),i.fill&&KV(t,i,u)&&t.fill(),i.stroke&&!l&&LD(t,i,u)&&t.stroke()),t.save(),t.translate(s,a),i.clip&&n7e(t,i),n&&n.translate(-s,-a),Z0(i,c=>{(c.marktype==="group"||o==null||o.includes(c.marktype))&&this.draw(t,c,n,o)}),n&&n.translate(s,a),t.restore(),l&&i.stroke&&u&&(iL(t,i,s,a),PD(t,i),LD(t,i,u)&&t.stroke())})}function d7t(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return ide(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let m=f+(u.width||0),h=d+(u.height||0),g=u.clip;if(g&&(i<f||i>m||s<d||s>h))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&mde(u)&&!c7t(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&u7t(t,u,a,l)?(t.restore(),u):(c=ide(u,x=>p7t(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&l7t(t,u,a,l)&&(c=u),t.restore(),c||null)})}function p7t(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function _de(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function Sde(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function Cde(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function hG(t,r){return t==="center"?r/2:t==="right"?r:0}function gG(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function h7t(t,r,n){let o=_de(r,n),i=Sde(r,o),s=Cde(r,o),a=(r.x||0)-hG(r.align,i),l=(r.y||0)-gG(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,sL["xmlns:xlink"],"xlink:href"),t("transform",FE(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function g7t(t,r){let n=r.image,o=Sde(r,n),i=Cde(r,n),s=(r.x||0)-hG(r.align,o),a=(r.y||0)-gG(r.baseline,i);return t.set(s,a,s+o,a+i)}function y7t(t,r,n){Z0(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=_de(o,this),s=Sde(o,i),a=Cde(o,i);if(s===0||a===0)return;let l=(o.x||0)-hG(o.align,s),u=(o.y||0)-gG(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(PD(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function v7t(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",KUt(r)),t("d",r.path)}function WV(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*Yw,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=YUe(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),Jfe(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):Jfe(t,u,o,i,s,a)}function w7t(t,r){return WV(pG(t,r.angle),r)?t.set(0,0,0,0):Hx(t,r,!0)}function S7t(t,r){t("d",$D(null,r))}function C7t(t,r){var n,o;return Hx(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function RUe(t,r){t.beginPath(),$D(t,r)}function T7t(t,r){t("transform",r7e(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function A7t(t,r){var n,o;return Hx(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function s7e(t,r,n){var o,i,s,a;return r.stroke&&LD(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function k7t(t,r,n){Z0(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&s7e(t,o,i)&&(PD(t,o),t.stroke())}})}function I7t(t,r,n,o){return t.isPointInStroke?s7e(t,r,1)&&t.isPointInStroke(n,o):!1}function a7e(t){OE.width=t&&Hw?Ede:ZV}function ZV(t,r){return l7e(Xw(t,r),Yx(t))}function l7e(t,r){return~~(.8*t.length*r)}function Ede(t,r){return Yx(t)<=0||!(r=Xw(t,r))?0:u7e(r,Ade(t))}function u7e(t,r){let n=`(${r}) ${t}`,o=jUe.get(n);return o===void 0&&(Hw.font=r,o=Hw.measureText(t).width,jUe.set(n,o)),o}function Yx(t){return t.fontSize!=null?+t.fontSize||0:11}function ME(t){return t.lineHeight!=null?t.lineHeight:Yx(t)+2}function O7t(t){return rc(t)?t.length>1?t:t[0]:t}function pL(t){return O7t(t.lineBreak&&t.text&&!rc(t.text)?t.text.split(t.lineBreak):t.text)}function Tde(t){let r=pL(t);return(rc(r)?r.length-1:0)*ME(t)}function Xw(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?R7t(t,n):n}function M7t(t){if(OE.width===Ede){let r=Ade(t);return n=>u7e(n,r)}else if(OE.width===ZV){let r=Yx(t);return n=>l7e(n,r)}else return r=>OE.width(t,r)}function R7t(t,r){var n=+t.limit,o=M7t(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function yG(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Ade(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Yx(t)+"px "+yG(t,r)}function kde(t){var r=t.baseline,n=Yx(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*ME(t):r==="line-bottom"?.29*n-.5*ME(t):0)}function bG(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-AE,r+=o*Math.cos(i),n+=o*Math.sin(i)),rL.x1=r,rL.y1=n,rL}function P7t(t,r){var n=r.dx||0,o=(r.dy||0)+kde(r),i=bG(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",j7t[r.align]||"start"),l?(u=FE(s,a)+" "+xde(l),(n||o)&&(u+=" "+FE(n,o))):u=FE(s+n,a+o),t("transform",u)}function Ide(t,r,n){var o=OE.height(r),i=r.align,s=bG(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+kde(r)-Math.round(.8*o),f=pL(r),d;if(rc(f)?(o+=ME(r)*(f.length-1),d=f.reduce((p,m)=>Math.max(p,OE.width(r,m)),0)):d=OE.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*Yw,a,l);else if(n===2)return t.rotatedPoints(r.angle*Yw,a,l);return t}function L7t(t,r,n){Z0(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=Ade(o),t.textAlign=o.align||"left",s=bG(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*Yw),a=l=0),a+=o.dx||0,l+=(o.dy||0)+kde(o),f=pL(o),PD(t,o),rc(f))for(c=ME(o),u=0;u<f.length;++u)d=Xw(o,f[u]),o.fill&&KV(t,o,i)&&t.fillText(d,a,l),o.stroke&&LD(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=Xw(o,f),o.fill&&KV(t,o,i)&&t.fillText(d,a,l),o.stroke&&LD(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function B7t(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=bG(r),l=a.x1,u=a.y1,c=Ide(rL,r,1),f=-r.angle*Yw,d=Math.cos(f),p=Math.sin(f),m=d*i-p*s+(l-d*l+p*u),h=p*i+d*s+(u-p*l-d*u);return c.contains(m,h)}function $7t(t,r){let n=Ide(rL,t,2);return eL(r,n[0],n[1],n[2],n[3])||eL(r,n[0],n[1],n[4],n[5])||eL(r,n[4],n[5],n[6],n[7])||eL(r,n[2],n[3],n[6],n[7])}function NE(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function c7e(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function Za(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=NE(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function Vm(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function f7e(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function d7e(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function V7t(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=Kw[i.marktype]).tip){for(a=d7e(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function G7t(t,r,n,o){t.element().setAttribute("title",o||"")}function PUe(t,r){J7t(r).forEach(n=>e9t(t,n))}function e9t(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function tL(t,r,n){r.forEach(o=>t.fire(o,n))}function LUe(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?tL(this,t,o):((!i||!i.exit)&&tL(this,n,o),this._active=s,tL(this,r,o),tL(this,t,o))}}function BUe(t){return function(r){tL(this,t,r),this._active=null}}function t9t(){return typeof window<"u"&&window.devicePixelRatio||1}function r9t(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?t9t():i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function o9t(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function _7e(t,r){let n=r.aria===!1;if(t(x7e,n||void 0),n||r.description==null)for(let o in zUe)t(zUe[o],void 0);else{let o=r.mark.marktype;t(Dde,r.description),t(Nde,r.ariaRole||(o==="group"?v7e:Ode)),t(Fde,r.ariaRoleDescription||`${o} mark`)}}function S7e(t){return t.aria===!1?{[x7e]:!0}:i9t[t.role]?null:$Ue[t.role]?a9t(t,$Ue[t.role]):s9t(t)}function s9t(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return w7e(n?v7e:Ode,`${r} mark container`,t.description)}function a9t(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return w7e(r.role||Ode,r.desc,n.description||o(n))}catch{return null}}function UUe(t){return dD(t.text).join(" ")}function l9t(t){let r=t.datum,n=t.orient,o=r.title?C7e(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${Gfe(l)?"discrete":l} scale with ${Wfe(a,s,t)}`}function u9t(t){let r=t.datum,n=r.title?C7e(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return f9t(o)+(n?` titled '${n}'`:"")+` for ${c9t(s)} with ${Wfe(u,l,t)}`}function C7e(t){try{return dD(zc(t.items).items[0].text).join(" ")}catch{return null}}function c9t(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+zc(t)}function f9t(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function T7e(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${d9t(c)}"`),l),l={open(u){s(u),r="<"+u;for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];for(let p of f)for(let m in p)a(m,p[m]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=E7e(u),l),toString:()=>t};return l}function A7e(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes;for(let o of n)o.nodeType===3?t.text(o.nodeValue):A7e(t,o)}return t.close()}function GUe(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function m9t(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=Za(t,n++,"pattern",Sa);qw(a,{id:XV+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Za(a,0,"rect",Sa),qw(a,{width:1,height:1,fill:`url(${I7e()}#${r.id})`}),t=Za(t,n++,"radialGradient",Sa),qw(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=Za(t,n++,"linearGradient",Sa),qw(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=Za(t,o,"stop",Sa),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return Vm(t,o),n}function h9t(t,r,n){let o;return t=Za(t,n,"clipPath",Sa),t.setAttribute("id",r.id),r.path?(o=Za(t,0,"path",Sa),o.setAttribute("d",r.path)):(o=Za(t,0,"rect",Sa),qw(o,{x:0,y:0,width:r.width,height:r.height})),Vm(t,1),n+1}function g9t(t,r,n,o){r=r.lastChild.previousSibling;let i,s=0;Z0(n,a=>{i=t.mark(r,a,i,o),++s}),Vm(r,1+s)}function WUe(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=NE(a,o,Sa),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=NE(a,"path",Sa);s.appendChild(l),l.__data__=t;let u=NE(a,"g",Sa);s.appendChild(u),u.__data__=t;let c=NE(a,"path",Sa);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||y9t(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function y9t(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function oL(t,r,n){r!==lu[t]&&(n?x9t(qx,t,r,n):sc(qx,t,r),lu[t]=r)}function YV(t,r,n){n!==lu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),lu[r]=n)}function qw(t,r){for(let n in r)sc(t,n,r[n])}function sc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function x9t(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function I7e(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function v9t(t,r,n,o,i){let s;if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),o==="text"&&(t["font-family"]=yG(r),t["font-size"]=Yx(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let a in sG){let l=r[a],u=sG[a];l==="transparent"&&(u==="fill"||u==="stroke")||l!=null&&(pde(l)&&(l=qUe(l,i.gradient,"")),t[u]=l)}for(let a in aG){let l=r[a];l!=null&&(s=s||[],s.push(`${aG[a]}: ${l};`))}return s&&(t.style=s.join(" ")),t}function D7e(t){let r=t.clip;if(Sw(r))r(pG(Qfe.clear()));else if(r)Qfe.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(Qfe)}var G8t,XV,CUe,W8t,q8t,H8t,Y8t,X8t,Yw,Z8t,AE,K0,jD,qfe,Hfe,XUe,dp,TUe,AUe,Yfe,Vw,cL,fL,uUt,cUt,fUt,dUt,pUt,mUt,hUt,gUt,yUt,bUt,xUt,vUt,wUt,_Ut,SUt,CUt,cG,EUt,TUt,AUt,kUt,IUt,DUt,NUt,FUt,BUt,ede,zUt,dG,zV,UV,DE,tde,VV,rde,nde,Ww,GV,IUe,DUe,kE,IE,Xfe,Kfe,UUt,Hw,ode,WUt,ZUt,t7t,l7t,u7t,c7t,m7t,sL,b7t,x7t,_7t,E7t,D7t,N7t,F7t,jUe,OE,j7t,rL,z7t,U7t,Kw,QV,BD,W7t,q7t,H7t,p7e,qV,m7e,sde,Y7t,JV,HV,h7e,ade,X7t,g7e,eG,y7e,tG,K7t,Z7t,b7e,rG,nG,oG,Q7t,lde,nL,ude,iG,J7t,aL,n9t,cde,Zfe,x7e,Dde,Nde,Fde,v7e,Ode,w7e,i9t,$Ue,zUe,E7e,d9t,p9t,sG,aG,k7e,JP,VUe,Sa,lG,qx,lu,b9t,fde,Gw,uG,dde,w9t,_9t,S9t,C9t,E9t,lL,Qfe,N7e=D(()=>{"use strict";sE();F$e();Aue();gD();X6e();SUe();G8t=0,XV="p_";CUe={basis:{curve:Fue},"basis-closed":{curve:Oue},"basis-open":{curve:Mue},bundle:{curve:Rue,tension:"beta",value:.85},cardinal:{curve:jue,tension:"tension",value:0},"cardinal-open":{curve:Bue,tension:"tension",value:0},"cardinal-closed":{curve:Pue,tension:"tension",value:0},"catmull-rom":{curve:zue,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Uue,tension:"alpha",value:.5},"catmull-rom-open":{curve:Vue,tension:"alpha",value:.5},linear:{curve:uE},"linear-closed":{curve:Gue},monotone:{horizontal:Hue,vertical:que},natural:{curve:Yue},step:{curve:Xue},"step-after":{curve:Zue},"step-before":{curve:Kue}};W8t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},q8t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,H8t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Y8t=/^((\s+,?\s*)|(,\s*))/,X8t=/^[01]/;Yw=Math.PI/180,Z8t=1e-14,AE=Math.PI/2,K0=Math.PI*2,jD=Math.sqrt(3)/2,qfe={},Hfe={},XUe=[].join;dp=["l",0,0,0,0,0,0,0];TUe=.5773502691896257,AUe={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,K0)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=jD*n,i=o-n*TUe,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=jD*n,i=o-n*TUe;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=jD*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=jD*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=jD*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=jD*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};Yfe={};Vw=.448084975506;cL=t=>t.x||0,fL=t=>t.y||0,uUt=t=>t.width||0,cUt=t=>t.height||0,fUt=t=>(t.x||0)+(t.width||0),dUt=t=>(t.y||0)+(t.height||0),pUt=t=>t.startAngle||0,mUt=t=>t.endAngle||0,hUt=t=>t.padAngle||0,gUt=t=>t.innerRadius||0,yUt=t=>t.outerRadius||0,bUt=t=>t.cornerRadius||0,xUt=t=>uL(t.cornerRadiusTopLeft,t.cornerRadius)||0,vUt=t=>uL(t.cornerRadiusTopRight,t.cornerRadius)||0,wUt=t=>uL(t.cornerRadiusBottomRight,t.cornerRadius)||0,_Ut=t=>uL(t.cornerRadiusBottomLeft,t.cornerRadius)||0,SUt=t=>uL(t.size,64),CUt=t=>t.size||1,cG=t=>t.defined!==!1,EUt=t=>tUt(t.shape||"circle"),TUt=kue().startAngle(pUt).endAngle(mUt).padAngle(hUt).innerRadius(gUt).outerRadius(yUt).cornerRadius(bUt),AUt=N9().x(cL).y1(fL).y0(dUt).defined(cG),kUt=N9().y(fL).x1(cL).x0(fUt).defined(cG),IUt=Bj().x(cL).y(fL).defined(cG),DUt=aUt().x(cL).y(fL).width(uUt).height(cUt).cornerRadius(xUt,vUt,wUt,_Ut),NUt=F9().type(EUt).size(SUt),FUt=lUt().x(cL).y(fL).defined(cG).size(CUt);BUt=1;Xc.prototype={clone(){return new Xc(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};jx(gde,fG);ede=class{constructor(r){this._pending=0,this._loader=r||Bce()}pending(){return this._pending}sanitizeURL(r){let n=this;return kUe(n),n._loader.sanitize(r,{context:"href"}).then(o=>(QP(n),o)).catch(()=>(QP(n),null))}loadImage(r){let n=this,o=B9();return kUe(n),n._loader.sanitize(r,{context:"image"}).then(i=>{let s=i.href;if(!s||!o)throw{url:s};let a=new o,l=ip(i,"crossOrigin")?i.crossOrigin:"anonymous";return l!=null&&(a.crossOrigin=l),a.onload=()=>QP(n),a.onerror=()=>QP(n),a.src=s,a}).catch(i=>(QP(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){let r=this;return new Promise(n=>{function o(i){r.pending()?setTimeout(()=>{o(!0)},10):n(i)}o(!1)})}};zUt=K0-1e-8,Ww=(t,r)=>dG.add(t,r),GV=(t,r)=>Ww(zV=t,UV=r),IUe=t=>Ww(t,dG.y1),DUe=t=>Ww(dG.x1,t),kE=(t,r)=>tde*t+rde*r,IE=(t,r)=>VV*t+nde*r,Xfe=(t,r)=>Ww(kE(t,r),IE(t,r)),Kfe=(t,r)=>GV(kE(t,r),IE(t,r));UUt={beginPath(){},closePath(){},moveTo:Kfe,lineTo:Kfe,rect(t,r,n,o){DE?(Xfe(t+n,r),Xfe(t+n,r+o),Xfe(t,r+o),Kfe(t,r)):(Ww(t+n,r+o),GV(t,r))},quadraticCurveTo(t,r,n,o){let i=kE(t,r),s=IE(t,r),a=kE(n,o),l=IE(n,o);NUe(zV,i,a,IUe),NUe(UV,s,l,DUe),GV(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=kE(t,r),l=IE(t,r),u=kE(n,o),c=IE(n,o),f=kE(i,s),d=IE(i,s);FUe(zV,a,u,f,IUe),FUe(UV,l,c,d,DUe),GV(f,d)},arc(t,r,n,o,i,s){if(o+=DE,i+=DE,zV=n*Math.cos(i)+t,UV=n*Math.sin(i)+r,Math.abs(i-o)>zUt)Ww(t-n,r-n),Ww(t+n,r+n);else{let a=c=>Ww(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%K0,o<0&&(o+=K0),i=i%K0,i<0&&(i+=K0),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=K0,l=o-o%AE,u=0;u<4&&l>i;++u,l-=AE)a(l);else for(l=o-o%AE+AE,u=0;u<4&&l<i;++u,l=l+AE)a(l)}}};Hw=(Hw=Uc(1,1))?Hw.getContext("2d"):null,ode=new Xc;WUt=[];ZUt=vde("arc",OUt);t7t=wde("area",MUt,QUt);l7t=dL(iL),u7t=dL(iL,!1),c7t=dL(iL,!0);m7t={type:"group",tag:"g",nested:!1,attr:n7t,bound:a7t,draw:f7t,pick:d7t,isect:QUe,content:s7t,background:o7t,foreground:i7t},sL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};b7t={type:"image",tag:"image",nested:!1,attr:h7t,bound:g7t,draw:y7t,pick:mG(),isect:wue,get:_de,xOffset:hG,yOffset:gG},x7t=wde("line",RUt,JUt);_7t={type:"path",tag:"path",nested:!1,attr:v7t,bound:w7t,draw:yde(WV),pick:bde(WV),isect:KUe(WV)};E7t={type:"rect",tag:"path",nested:!1,attr:S7t,bound:C7t,draw:yde(RUe),pick:bde(RUe),isect:QUe};D7t={type:"rule",tag:"line",nested:!1,attr:T7t,bound:A7t,draw:k7t,pick:mG(I7t),isect:VUt},N7t=vde("shape",jUt),F7t=vde("symbol",PUt,ZUe),jUe=QBe(),OE={height:Yx,measureWidth:Ede,estimateWidth:ZV,width:ZV,canvas:a7e};a7e(!0);j7t={left:"start",center:"middle",right:"end"},rL=new Xc;z7t={type:"text",tag:"text",nested:!1,attr:P7t,bound:Ide,draw:L7t,pick:mG(B7t),isect:$7t},U7t=wde("trail",LUt,e7t),Kw={arc:ZUt,area:t7t,group:m7t,image:b7t,line:x7t,path:_7t,rect:E7t,rule:D7t,shape:N7t,symbol:F7t,text:z7t,trail:U7t};QV=class{constructor(r,n){this._active=null,this._handlers={},this._loader=r||Bce(),this._tooltip=n||G7t}initialize(r,n,o){return this._el=r,this._obj=o||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(r){return arguments.length?(this._origin=r||[0,0],this):this._origin.slice()}scene(r){return arguments.length?(this._scene=r,this):this._scene}on(){}off(){}_handlerIndex(r,n,o){for(let i=r?r.length:0;--i>=0;)if(r[i].type===n&&(!o||r[i].handler===o))return i;return-1}handlers(r){let n=this._handlers,o=[];if(r)o.push(...n[this.eventName(r)]);else for(let i in n)o.push(...n[i]);return o}eventName(r){let n=r.indexOf(".");return n<0?r:r.slice(0,n)}handleHref(r,n,o){this._loader.sanitize(o,{context:"href"}).then(i=>{let s=new MouseEvent(r.type,r),a=NE(null,"a");for(let l in i)a.setAttribute(l,i[l]);a.dispatchEvent(s)}).catch(()=>{})}handleTooltip(r,n,o){if(n&&n.tooltip!=null){n=V7t(n,r,this.canvas(),this._origin);let i=o&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,r,n,i)}}getItemBoundingClientRect(r){let n=this.canvas();if(!n)return;let o=n.getBoundingClientRect(),i=this._origin,s=r.bounds,a=s.width(),l=s.height(),u=s.x1+i[0]+o.left,c=s.y1+i[1]+o.top;for(;r.mark&&(r=r.mark.group);)u+=r.x||0,c+=r.y||0;return{x:u,y:c,width:a,height:l,left:u,top:c,right:u+a,bottom:c+l}}};BD=class{constructor(r){this._el=null,this._bgcolor=null,this._loader=new ede(r)}initialize(r,n,o,i,s){return this._el=r,this.resize(n,o,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(r){return arguments.length===0?this._bgcolor:(this._bgcolor=r,this)}resize(r,n,o,i){return this._width=r,this._height=n,this._origin=o||[0,0],this._scale=i||1,this}dirty(){}render(r,n){let o=this;return o._call=function(){o._render(r,n)},o._call(),o._call=null,o}_render(){}renderAsync(r,n){let o=this.render(r,n);return this._ready?this._ready.then(()=>o):Promise.resolve(o)}_load(r,n){var o=this,i=o._loader[r](n);if(!o._ready){let s=o._call;o._ready=o._loader.ready().then(a=>{a&&s(),o._ready=null})}return i}sanitizeURL(r){return this._load("sanitizeURL",r)}loadImage(r){return this._load("loadImage",r)}},W7t="keydown",q7t="keypress",H7t="keyup",p7e="dragenter",qV="dragleave",m7e="dragover",sde="pointerdown",Y7t="pointerup",JV="pointermove",HV="pointerout",h7e="pointerover",ade="mousedown",X7t="mouseup",g7e="mousemove",eG="mouseout",y7e="mouseover",tG="click",K7t="dblclick",Z7t="wheel",b7e="mousewheel",rG="touchstart",nG="touchmove",oG="touchend",Q7t=[W7t,q7t,H7t,p7e,qV,m7e,sde,Y7t,JV,HV,h7e,ade,X7t,g7e,eG,y7e,tG,K7t,Z7t,b7e,rG,nG,oG],lde=JV,nL=eG,ude=tG,iG=class extends QV{constructor(r,n){super(r,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Q7t,this.pointermove=LUe([JV,g7e],[h7e,y7e],[HV,eG]),this.dragover=LUe([m7e],[p7e],[qV]),this.pointerout=BUe([HV,eG]),this.dragleave=BUe([qV])}initialize(r,n,o){return this._canvas=r&&c7e(r,"canvas"),[tG,ade,sde,JV,HV,qV].forEach(i=>PUe(this,i)),super.initialize(r,n,o)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(r){this.fire(b7e,r)}pointerdown(r){this._down=this._active,this.fire(sde,r)}mousedown(r){this._down=this._active,this.fire(ade,r)}click(r){this._down===this._active&&(this.fire(tG,r),this._down=null)}touchstart(r){this._touch=this.pickEvent(r.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(rG,r,!0)}touchmove(r){this.fire(nG,r,!0)}touchend(r){this.fire(oG,r,!0),this._touch=null}fire(r,n,o){let i=o?this._touch:this._active,s=this._handlers[r];if(n.vegaType=r,r===ude&&i&&i.href?this.handleHref(n,i,i.href):(r===lde||r===nL)&&this.handleTooltip(n,i,r!==nL),s)for(let a=0,l=s.length;a<l;++a)s[a].handler.call(this._obj,n,i)}on(r,n){let o=this.eventName(r),i=this._handlers;return this._handlerIndex(i[o],r,n)<0&&(PUe(this,r),(i[o]||(i[o]=[])).push({type:r,handler:n})),this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&i.splice(s,1),this}pickEvent(r){let n=d7e(r,this._canvas),o=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-o[0],n[1]-o[1])}pick(r,n,o,i,s){let a=this.context();return Kw[r.marktype].pick.call(this,a,r,n,o,i,s)}},J7t=t=>t===rG||t===nG||t===oG?[rG,nG,oG]:[t];aL=class extends BD{constructor(r){super(r),this._options={},this._redraw=!1,this._dirty=new Xc,this._tempb=new Xc}initialize(r,n,o,i,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Uc(1,1,this._options.type),r&&this._canvas&&(Vm(r,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(r,n,o,i,s)}resize(r,n,o,i){if(super.resize(r,n,o,i),this._canvas)r9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let s=this._options.externalContext;s||nu("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(r){let n=this._tempb.clear().union(r.bounds),o=r.mark.group;for(;o;)n.translate(o.x||0,o.y||0),o=o.mark.group;this._dirty.union(n)}_render(r,n){let o=this.context(),i=this._origin,s=this._width,a=this._height,l=this._dirty,u=n9t(i,s,a);o.save();let c=this._redraw||l.empty()?(this._redraw=!1,u.expand(1)):o9t(o,u.intersect(l),i);return this.clear(-i[0],-i[1],s,a),this.draw(o,r,c,n),o.restore(),l.clear(),this}draw(r,n,o,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;let s=Kw[n.marktype];n.clip&&r7t(r,n),s.draw.call(this,r,n,o,i),n.clip&&r.restore()}clear(r,n,o,i){let s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(r,n,o,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(r,n,o,i))}},n9t=(t,r,n)=>new Xc().set(0,0,r,n).translate(-t[0],-t[1]);cde=class extends QV{constructor(r,n){super(r,n);let o=this;o._hrefHandler=Zfe(o,(i,s)=>{s&&s.href&&o.handleHref(i,s,s.href)}),o._tooltipHandler=Zfe(o,(i,s)=>{o.handleTooltip(i,s,i.type!==nL)})}initialize(r,n,o){let i=this._svg;return i&&(i.removeEventListener(ude,this._hrefHandler),i.removeEventListener(lde,this._tooltipHandler),i.removeEventListener(nL,this._tooltipHandler)),this._svg=i=r&&c7e(r,"svg"),i&&(i.addEventListener(ude,this._hrefHandler),i.addEventListener(lde,this._tooltipHandler),i.addEventListener(nL,this._tooltipHandler)),super.initialize(r,n,o)}canvas(){return this._svg}on(r,n){let o=this.eventName(r),i=this._handlers;if(this._handlerIndex(i[o],r,n)<0){let a={type:r,handler:n,listener:Zfe(this,n)};(i[o]||(i[o]=[])).push(a),this._svg&&this._svg.addEventListener(o,a.listener)}return this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&(this._svg&&this._svg.removeEventListener(o,i[s].listener),i.splice(s,1)),this}},Zfe=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)},x7e="aria-hidden",Dde="aria-label",Nde="role",Fde="aria-roledescription",v7e="graphics-object",Ode="graphics-symbol",w7e=(t,r,n)=>({[Nde]:t,[Fde]:r,[Dde]:n||void 0}),i9t=Mj(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),$Ue={axis:{desc:"axis",caption:l9t},legend:{desc:"legend",caption:u9t},"title-text":{desc:"title",caption:t=>`Title text '${UUe(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${UUe(t)}'`}},zUe={ariaRole:Nde,ariaRoleDescription:Fde,description:Dde};E7e=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),d9t=t=>E7e(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");p9t=t=>A7e(T7e(),t)+"";sG={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},aG={blend:"mix-blend-mode"},k7e={fill:"none","stroke-miterlimit":10},JP=0,VUe="http://www.w3.org/2000/xmlns/",Sa=sL.xmlns,lG=class extends BD{constructor(r){super(r),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(r,n,o,i,s){return this._defs={},this._clearDefs(),r&&(this._svg=Za(r,0,"svg",Sa),this._svg.setAttributeNS(VUe,"xmlns",Sa),this._svg.setAttributeNS(VUe,"xmlns:xlink",sL["xmlns:xlink"]),this._svg.setAttribute("version",sL.version),this._svg.setAttribute("class","marks"),Vm(r,1),this._root=Za(this._svg,JP,"g",Sa),qw(this._root,k7e),Vm(this._svg,JP+1)),this.background(this._bgcolor),super.initialize(r,n,o,i,s)}background(r){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",r),super.background(...arguments)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svg&&(qw(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let r=this._svg,n=this._bgcolor;if(!r)return null;let o;n&&(r.removeAttribute("style"),o=Za(r,JP,"rect",Sa),qw(o,{width:this._width,height:this._height,fill:n}));let i=p9t(r);return n&&(r.removeChild(o),this._svg.style.setProperty("background-color",n)),i}_render(r,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,r,void 0,n),Vm(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(r){r.dirty!==this._dirtyID&&(r.dirty=this._dirtyID,this._dirty.push(r))}isDirty(r){return this._dirtyAll||!r._svg||!r._svg.ownerSVGElement||r.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let r=this._dirty;if(!r.length||!this._dirtyID)return!0;let n=++this._dirtyID,o,i,s,a,l,u,c;for(l=0,u=r.length;l<u;++l)if(o=r[l],i=o.mark,i.marktype!==s&&(s=i.marktype,a=Kw[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,GUe(o,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(o.exit){a.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(a,c._svg,c)):o._svg&&(c=o._svg.parentNode,c&&c.removeChild(o._svg)),o._svg=null;continue}o=a.nested?i.items[0]:o,o._update!==n&&(!o._svg||!o._svg.ownerSVGElement?(this._dirtyAll=!1,GUe(o,n)):this._update(a,o._svg,o),o._update=n)}return!this._dirtyAll}mark(r,n,o,i){if(!this.isDirty(n))return n._svg;let s=this._svg,a=n.marktype,l=Kw[a],u=n.interactive===!1?"none":null,c=l.tag==="g",f=WUe(n,r,o,"g",s);if(a!=="group"&&i!=null&&!i.includes(a))return Vm(f,0),n._svg;f.setAttribute("class",f7e(n));let d=S7e(n);for(let g in d)sc(f,g,d[g]);c||sc(f,"pointer-events",u),sc(f,"clip-path",n.clip?hde(this,n,n.group):null);let p=null,m=0,h=g=>{let y=this.isDirty(g),b=WUe(g,f,p,l.tag,s);y&&(this._update(l,b,g),c&&g9t(this,b,g,i)),p=b,++m};return l.nested?n.items.length&&h(n.items[0]):Z0(n,h),Vm(f,m),f}_update(r,n,o){qx=n,lu=n.__values__,_7e(oL,o),r.attr(oL,o,this);let i=b9t[r.type];i&&i.call(this,r,n,o),qx&&this.style(qx,o)}style(r,n){if(n!=null){for(let o in sG){let i=o==="font"?yG(n):n[o];if(i===lu[o])continue;let s=sG[o];i==null?r.removeAttribute(s):(pde(i)&&(i=qUe(i,this._defs.gradient,I7e())),r.setAttribute(s,i+"")),lu[o]=i}for(let o in aG)YV(r,aG[o],n[o])}}defs(){let r=this._svg,n=this._defs,o=n.el,i=0;for(let s in n.gradient)o||(n.el=o=Za(r,JP+1,"defs",Sa)),i=m9t(o,n.gradient[s],i);for(let s in n.clipping)o||(n.el=o=Za(r,JP+1,"defs",Sa)),i=h9t(o,n.clipping[s],i);o&&(i===0?(r.removeChild(o),n.el=null):Vm(o,i))}_clearDefs(){let r=this._defs;r.gradient={},r.clipping={}}};qx=null,lu=null,b9t={group(t,r,n){let o=qx=r.childNodes[2];lu=o.__values__,t.foreground(oL,n,this),lu=r.__values__,qx=r.childNodes[1],t.content(oL,n,this);let i=qx=r.childNodes[0];t.background(oL,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==lu.events&&(sc(o,"pointer-events",s),sc(i,"pointer-events",s),lu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;sc(o,"display",null),this.style(i,n),sc(i,"stroke",null),a&&(n.fill=null),lu=o.__values__,this.style(o,n),a&&(n.fill=a),qx=null}else sc(o,"display","none")},image(t,r,n){n.smooth===!1?(YV(r,"image-rendering","optimizeSpeed"),YV(r,"image-rendering","pixelated")):YV(r,"image-rendering",null)},text(t,r,n){let o=pL(n),i,s,a,l;rc(o)?(s=o.map(u=>Xw(n,u)),i=s.join(`
`),i!==lu.text&&(Vm(r,0),a=r.ownerDocument,l=ME(n),s.forEach((u,c)=>{let f=NE(a,"tspan",Sa);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),lu.text=i)):(s=Xw(n,o),s!==lu.text&&(r.textContent=s,lu.text=s)),sc(r,"font-family",yG(n)),sc(r,"font-size",Yx(n)+"px"),sc(r,"font-style",n.fontStyle),sc(r,"font-variant",n.fontVariant),sc(r,"font-weight",n.fontWeight)}};fde=class extends BD{constructor(r){super(r),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(r){let n=T7e();n.open("svg",Rx({},sL,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let o=this._bgcolor;return o&&o!=="transparent"&&o!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:o}).close(),n.open("g",k7e,{transform:"translate("+this._origin+")"}),this.mark(n,r),n.close(),this.defs(n),this._text=n.close()+"",this}mark(r,n){let o=Kw[n.marktype],i=o.tag,s=[_7e,o.attr];r.open("g",{class:f7e(n),"clip-path":n.clip?hde(this,n,n.group):null},S7e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});let a=l=>{let u=this.href(l);if(u&&r.open("a",u),r.open(i,this.attr(n,l,s,i!=="g"?i:null)),i==="text"){let c=pL(l);if(rc(c)){let f={x:0,dy:ME(l)};for(let d=0;d<c.length;++d)r.open("tspan",d?f:null).text(Xw(l,c[d])).close()}else r.text(Xw(l,c))}else if(i==="g"){let c=l.strokeForeground,f=l.fill,d=l.stroke;c&&d&&(l.stroke=null),r.open("path",this.attr(n,l,o.background,"bgrect")).close(),r.open("g",this.attr(n,l,o.content)),Z0(l,p=>this.mark(r,p)),r.close(),c&&d?(f&&(l.fill=null),l.stroke=d,r.open("path",this.attr(n,l,o.foreground,"bgrect")).close(),f&&(l.fill=f)):r.open("path",this.attr(n,l,o.foreground,"bgfore")).close()}r.close(),u&&r.close()};return o.nested?n.items&&n.items.length&&a(n.items[0]):Z0(n,a),r.close()}href(r){let n=r.href,o;if(n){if(o=this._hrefs&&this._hrefs[n])return o;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(r,n,o,i){let s={},a=(l,u,c,f)=>{s[f||l]=u};return Array.isArray(o)?o.forEach(l=>l(a,n,this)):o(a,n,this),i&&v9t(s,n,r,i,this._defs),s}defs(r){let n=this._defs.gradient,o=this._defs.clipping;if(Object.keys(n).length+Object.keys(o).length!==0){r.open("defs");for(let s in n){let a=n[s],l=a.stops;a.gradient==="radial"?(r.open("pattern",{id:XV+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),r.close(),r.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):r.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let u=0;u<l.length;++u)r.open("stop",{offset:l[u].offset,"stop-color":l[u].color}).close();r.close()}for(let s in o){let a=o[s];r.open("clipPath",{id:s}),a.path?r.open("path",{d:a.path}).close():r.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),r.close()}r.close()}}};Gw={svgMarkTypes:["text"],svgOnTop:!0,debug:!1},uG=class extends BD{constructor(r){super(r),this._svgRenderer=new lG(r),this._canvasRenderer=new aL(r)}initialize(r,n,o,i,s){this._root_el=Za(r,0,"div");let a=Za(this._root_el,0,"div"),l=Za(this._root_el,1,"div");return this._root_el.style.position="relative",Gw.debug||(a.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=Gw.svgOnTop?l:a,this._canvasEl=Gw.svgOnTop?a:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,o,i,s),this._svgRenderer.initialize(this._svgEl,n,o,i,s),super.initialize(r,n,o,i,s)}dirty(r){return Gw.svgMarkTypes.includes(r.mark.marktype)?this._svgRenderer.dirty(r):this._canvasRenderer.dirty(r),this}_render(r,n){let i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Gw.svgMarkTypes.includes(s));this._svgRenderer.render(r,Gw.svgMarkTypes),this._canvasRenderer.render(r,i)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svgRenderer.resize(r,n,o,i),this._canvasRenderer.resize(r,n,o,i),this}background(r){return Gw.svgOnTop?this._canvasRenderer.background(r):this._svgRenderer.background(r),this}},dde=class extends iG{constructor(r,n){super(r,n)}initialize(r,n,o){let i=Za(Za(r,0,"div"),Gw.svgOnTop?0:1,"div");return super.initialize(i,n,o)}},w9t="canvas",_9t="hybrid",S9t="png",C9t="svg",E9t="none",lL={};lL[w9t]=lL[S9t]={renderer:aL,headless:aL,handler:iG};lL[C9t]={renderer:lG,headless:fde,handler:cde};lL[_9t]={renderer:uG,headless:uG,handler:dde};lL[E9t]={};Qfe=new Xc});var Vde={};cn(Vde,{bound:()=>K7e,identifier:()=>Ude,mark:()=>Z7e,overlap:()=>Q7e,render:()=>e9e,viewlayout:()=>r9e});function K7e(t){et.call(this,null,t)}function vG(t,r,n){return r(t.bounds.clear(),t,n)}function Ude(t){et.call(this,0,t)}function P9t(t){return t._signals[F7e]||(t._signals[F7e]=t.add(0))}function Z7e(t){et.call(this,null,t)}function L9t(t){let r=t.groups,n=t.parent;return r&&r.size===1?r.get(Object.keys(r.object)[0]):r&&n?r.lookup(n):null}function Q7e(t){et.call(this,null,t)}function e9e(t){et.call(this,null,t)}function UD(t,r,n){return t[r]===n?0:(t[r]=n,1)}function z9t(t){var r=t.items[0].orient;return r===Gm||r===Wm}function U9t(t){let r=+t.grid;return[t.ticks?r++:-1,t.labels?r++:-1,r+ +t.domain]}function V9t(t,r,n,o){var i=r.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,l=i.orient,u=U9t(s),c=i.range,f=i.offset,d=i.position,p=i.minExtent,m=i.maxExtent,h=s.title&&i.items[u[2]].items[0],g=i.titlePadding,y=i.bounds,b=h&&Tde(h),x=0,v=0,w,_;switch(uu.clear().union(y),y.clear(),(w=u[0])>-1&&y.union(i.items[w].bounds),(w=u[1])>-1&&y.union(i.items[w].bounds),l){case VD:x=d||0,v=-f,_=Math.max(p,Math.min(m,-y.y1)),y.add(0,-_).add(c,0),h&&wG(t,h,_,g,b,0,-1,y);break;case Gm:x=-f,v=d||0,_=Math.max(p,Math.min(m,-y.x1)),y.add(-_,0).add(0,c),h&&wG(t,h,_,g,b,1,-1,y);break;case Wm:x=n+f,v=d||0,_=Math.max(p,Math.min(m,y.x2)),y.add(0,0).add(_,c),h&&wG(t,h,_,g,b,1,1,y);break;case Jw:x=d||0,v=o+f,_=Math.max(p,Math.min(m,y.y2)),y.add(0,0).add(c,_),h&&wG(t,h,_,g,0,0,1,y);break;default:x=i.x,v=i.y}return Hx(y.translate(x,v),i),UD(i,"x",x+a)|UD(i,"y",v+a)&&(i.bounds=uu,t.dirty(i),i.bounds=y,t.dirty(i)),i.mark.bounds.clear().union(y)}function wG(t,r,n,o,i,s,a,l){let u=r.bounds;if(r.auto){let c=a*(n+i+o),f=0,d=0;t.dirty(r),s?f=(r.x||0)-(r.x=c):d=(r.y||0)-(r.y=c),r.mark.bounds.clear().union(u.translate(-f,-d)),t.dirty(r)}l.union(u)}function G9t(t){var r=t.items,n=r.length,o=0,i,s;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<n;++o)if(i=r[o],s=i.items,i.marktype===SG)switch(i.role){case Pde:case Bde:case Lde:break;case z7e:a.rowheaders.push(...s);break;case U7e:a.rowfooters.push(...s);break;case G7e:a.colheaders.push(...s);break;case W7e:a.colfooters.push(...s);break;case V7e:a.rowtitle=s[0];break;case q7e:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function W9t(t){return new Xc().set(0,0,t.width||0,t.height||0)}function q9t(t){let r=t.bounds.clone();return r.empty()?r.set(0,0,0,0):r.translate(-(t.x||0),-(t.y||0))}function Gi(t,r,n){let o=Mx(t)?t[r]:t;return o??(n!==void 0?n:0)}function B7e(t){return t<0?Math.ceil(-t):0}function t9e(t,r,n){var o=!n.nodirty,i=n.bounds===zde?W9t:q9t,s=uu.set(0,0,0,0),a=Gi(n.align,Zw),l=Gi(n.align,Qw),u=Gi(n.padding,Zw),c=Gi(n.padding,Qw),f=n.columns||r.length,d=f<=0?1:Math.ceil(r.length/f),p=r.length,m=Array(p),h=Array(f),g=0,y=Array(p),b=Array(d),x=0,v=Array(p),w=Array(p),_=Array(p),C,S,E,A,N,k,M,I,L,P,R;for(S=0;S<f;++S)h[S]=0;for(S=0;S<d;++S)b[S]=0;for(S=0;S<p;++S)k=r[S],N=_[S]=i(k),k.x=k.x||0,v[S]=0,k.y=k.y||0,w[S]=0,E=S%f,A=~~(S/f),g=Math.max(g,M=Math.ceil(N.x2)),x=Math.max(x,I=Math.ceil(N.y2)),h[E]=Math.max(h[E],M),b[A]=Math.max(b[A],I),m[S]=u+B7e(N.x1),y[S]=c+B7e(N.y1),o&&t.dirty(r[S]);for(S=0;S<p;++S)S%f===0&&(m[S]=0),S<f&&(y[S]=0);if(a===Rde)for(E=1;E<f;++E){for(R=0,S=E;S<p;S+=f)R<m[S]&&(R=m[S]);for(S=E;S<p;S+=f)m[S]=R+h[E-1]}else if(a===xG){for(R=0,S=0;S<p;++S)S%f&&R<m[S]&&(R=m[S]);for(S=0;S<p;++S)S%f&&(m[S]=R+g)}else for(a=!1,E=1;E<f;++E)for(S=E;S<p;S+=f)m[S]+=h[E-1];if(l===Rde)for(A=1;A<d;++A){for(R=0,S=A*f,C=S+f;S<C;++S)R<y[S]&&(R=y[S]);for(S=A*f;S<C;++S)y[S]=R+b[A-1]}else if(l===xG){for(R=0,S=f;S<p;++S)R<y[S]&&(R=y[S]);for(S=f;S<p;++S)y[S]=R+x}else for(l=!1,A=1;A<d;++A)for(S=A*f,C=S+f;S<C;++S)y[S]+=b[A-1];for(L=0,S=0;S<p;++S)L=m[S]+(S%f?L:0),v[S]+=L-r[S].x;for(E=0;E<f;++E)for(P=0,S=E;S<p;S+=f)P+=y[S],w[S]+=P-r[S].y;if(a&&Gi(n.center,Zw)&&d>1)for(S=0;S<p;++S)N=a===xG?g:h[S%f],L=N-_[S].x2-r[S].x-v[S],L>0&&(v[S]+=L/2);if(l&&Gi(n.center,Qw)&&f!==1)for(S=0;S<p;++S)N=l===xG?x:b[~~(S/f)],P=N-_[S].y2-r[S].y-w[S],P>0&&(w[S]+=P/2);for(S=0;S<p;++S)s.union(_[S].translate(v[S],w[S]));switch(L=Gi(n.anchor,D9t),P=Gi(n.anchor,N9t),Gi(n.anchor,Zw)){case ac:L-=s.width();break;case Mde:L-=s.width()/2}switch(Gi(n.anchor,Qw)){case ac:P-=s.height();break;case Mde:P-=s.height()/2}for(L=Math.round(L),P=Math.round(P),s.clear(),S=0;S<p;++S)r[S].mark.bounds.clear();for(S=0;S<p;++S)k=r[S],k.x+=v[S]+=L,k.y+=w[S]+=P,s.union(k.mark.bounds.union(k.bounds.translate(v[S],w[S]))),o&&t.dirty(k);return s}function H9t(t,r,n){var o=G9t(r),i=o.marks,s=n.bounds===zde?Y9t:X9t,a=n.offset,l=n.columns||i.length,u=l<=0?1:Math.ceil(i.length/l),c=u*l,f,d,p,m,h,g,y;let b=t9e(t,i,n);b.empty()&&b.set(0,0,0,0),o.rowheaders&&(g=Gi(n.headerBand,Qw,null),f=_G(t,o.rowheaders,i,l,u,-Gi(a,"rowHeader"),P7e,0,s,"x1",0,l,1,g)),o.colheaders&&(g=Gi(n.headerBand,Zw,null),d=_G(t,o.colheaders,i,l,l,-Gi(a,"columnHeader"),P7e,1,s,"y1",0,1,l,g)),o.rowfooters&&(g=Gi(n.footerBand,Qw,null),p=_G(t,o.rowfooters,i,l,u,Gi(a,"rowFooter"),L7e,0,s,"x2",l-1,l,1,g)),o.colfooters&&(g=Gi(n.footerBand,Zw,null),m=_G(t,o.colfooters,i,l,l,Gi(a,"columnFooter"),L7e,1,s,"y2",c-l,1,l,g)),o.rowtitle&&(h=Gi(n.titleAnchor,Qw),y=Gi(a,"rowTitle"),y=h===ac?p+y:f-y,g=Gi(n.titleBand,Qw,.5),$7e(t,o.rowtitle,y,0,b,g)),o.coltitle&&(h=Gi(n.titleAnchor,Zw),y=Gi(a,"columnTitle"),y=h===ac?m+y:d-y,g=Gi(n.titleBand,Zw,.5),$7e(t,o.coltitle,y,1,b,g))}function Y9t(t,r){return r==="x1"?t.x||0:r==="y1"?t.y||0:r==="x2"?(t.x||0)+(t.width||0):r==="y2"?(t.y||0)+(t.height||0):void 0}function X9t(t,r){return t.bounds[r]}function _G(t,r,n,o,i,s,a,l,u,c,f,d,p,m){var h=n.length,g=0,y=0,b,x,v,w,_,C,S,E,A;if(!h)return g;for(b=f;b<h;b+=d)n[b]&&(g=a(g,u(n[b],c)));if(!r.length)return g;for(r.length>i&&(t.warn("Grid headers exceed limit: "+i),r=r.slice(0,i)),g+=s,x=0,w=r.length;x<w;++x)t.dirty(r[x]),r[x].mark.bounds.clear();for(b=f,x=0,w=r.length;x<w;++x,b+=d){for(C=r[x],_=C.mark.bounds,v=b;v>=0&&(S=n[v])==null;v-=p);l?(E=m==null?S.x:Math.round(S.bounds.x1+m*S.bounds.width()),A=g):(E=g,A=m==null?S.y:Math.round(S.bounds.y1+m*S.bounds.height())),_.union(C.bounds.translate(E-(C.x||0),A-(C.y||0))),C.x=E,C.y=A,t.dirty(C),y=a(y,_[c])}return y}function $7e(t,r,n,o,i,s){if(r){t.dirty(r);var a=n,l=n;o?a=Math.round(i.x1+s*i.width()):l=Math.round(i.y1+s*i.height()),r.bounds.translate(a-(r.x||0),l-(r.y||0)),r.mark.bounds.clear().union(r.bounds),r.x=a,r.y=l,t.dirty(r)}}function K9t(t,r){let n=t[r]||{};return(o,i)=>n[o]!=null?n[o]:t[o]!=null?t[o]:i}function Z9t(t,r){let n=-1/0;return t.forEach(o=>{o.offset!=null&&(n=Math.max(n,o.offset))}),n>-1/0?n:r}function Q9t(t,r,n,o,i,s,a){let l=K9t(n,r),u=Z9t(t,l("offset",0)),c=l("anchor",jde),f=c===ac?1:c===Mde?.5:0,d={align:Rde,bounds:l("bounds",zde),columns:l("direction")==="vertical"?1:t.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(r){case Gm:d.anchor={x:Math.floor(o.x1)-u,column:ac,y:f*(a||o.height()+2*o.y1),row:c};break;case Wm:d.anchor={x:Math.ceil(o.x2)+u,y:f*(a||o.height()+2*o.y1),row:c};break;case VD:d.anchor={y:Math.floor(i.y1)-u,row:ac,x:f*(s||i.width()+2*i.x1),column:c};break;case Jw:d.anchor={y:Math.ceil(i.y2)+u,x:f*(s||i.width()+2*i.x1),column:c};break;case T9t:d.anchor={x:u,y:u};break;case A9t:d.anchor={x:s-u,y:u,column:ac};break;case k9t:d.anchor={x:u,y:a-u,row:ac};break;case I9t:d.anchor={x:s-u,y:a-u,column:ac,row:ac};break}return d}function J9t(t,r){var n=r.items[0],o=n.datum,i=n.orient,s=n.bounds,a=n.x,l=n.y,u,c;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),tVt(t,n,n.items[0].items[0]),s=eVt(n,s),u=2*n.padding,c=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),c=Math.ceil(s.height()+c)),o.type===R9t&&rVt(n.items[0].items[0].items[0].items),i!==$de&&(n.x=a=0,n.y=l=0),n.width=u,n.height=c,Hx(s.set(a,l,a+u,l+c),n),n.mark.bounds.clear().union(s),n}function eVt(t,r){return t.items.forEach(n=>r.union(n.bounds)),r.x1=t.padding,r.y1=t.padding,r}function tVt(t,r,n){var o=r.padding,i=o-n.x,s=o-n.y;if(!r.datum.title)(i||s)&&mL(t,n,i,s);else{var a=r.items[1].items[0],l=a.anchor,u=r.titlePadding||0,c=o-a.x,f=o-a.y;switch(a.orient){case Gm:i+=Math.ceil(a.bounds.width())+u;break;case Wm:case Jw:break;default:s+=a.bounds.height()+u}switch((i||s)&&mL(t,n,i,s),a.orient){case Gm:f+=zD(r,n,a,l,1,1);break;case Wm:c+=zD(r,n,a,ac,0,0)+u,f+=zD(r,n,a,l,1,1);break;case Jw:c+=zD(r,n,a,l,0,0),f+=zD(r,n,a,ac,-1,0,1)+u;break;default:c+=zD(r,n,a,l,0,0)}(c||f)&&mL(t,a,c,f),(c=Math.round(a.bounds.x1-o))<0&&(mL(t,n,-c,0),mL(t,a,-c,0))}}function zD(t,r,n,o,i,s,a){let l=t.datum.type!=="symbol",u=n.datum.vgrad,c=l&&(s||!u)&&!a?r.items[0]:r,f=c.bounds[i?"y2":"x2"]-t.padding,d=u&&s?f:0,p=u&&s?0:f,m=i<=0?0:Tde(n);return Math.round(o===jde?d:o===ac?p-m:.5*(f-m))}function mL(t,r,n,o){r.x+=n,r.y+=o,r.bounds.translate(n,o),r.mark.bounds.translate(n,o),t.dirty(r)}function rVt(t){let r=t.reduce((n,o)=>(n[o.column]=Math.max(o.bounds.x2-o.x,n[o.column]||0),n),{});t.forEach(n=>{n.width=r[n.column],n.height=n.bounds.y2-n.y})}function nVt(t,r,n,o,i){var s=r.items[0],a=s.frame,l=s.orient,u=s.anchor,c=s.offset,f=s.padding,d=s.items[0].items[0],p=s.items[1]&&s.items[1].items[0],m=l===Gm||l===Wm?o:n,h=0,g=0,y=0,b=0,x=0,v;if(a!==SG?l===Gm?(h=i.y2,m=i.y1):l===Wm?(h=i.y1,m=i.y2):(h=i.x1,m=i.x2):l===Gm&&(h=o,m=0),v=u===jde?h:u===ac?m:(h+m)/2,p&&p.text){switch(l){case VD:case Jw:x=d.bounds.height()+f;break;case Gm:b=d.bounds.width()+f;break;case Wm:b=-d.bounds.width()-f;break}uu.clear().union(p.bounds),uu.translate(b-(p.x||0),x-(p.y||0)),UD(p,"x",b)|UD(p,"y",x)&&(t.dirty(p),p.bounds.clear().union(uu),p.mark.bounds.clear().union(uu),t.dirty(p)),uu.clear().union(p.bounds)}else uu.clear();switch(uu.union(d.bounds),l){case VD:g=v,y=i.y1-uu.height()-c;break;case Gm:g=i.x1-uu.width()-c,y=v;break;case Wm:g=i.x2+uu.width()+c,y=v;break;case Jw:g=v,y=i.y2+c;break;default:g=s.x,y=s.y}return UD(s,"x",g)|UD(s,"y",y)&&(uu.translate(g,y),t.dirty(s),s.bounds.clear().union(uu),r.bounds.clear().union(uu),t.dirty(s)),s.bounds}function r9e(t){et.call(this,null,t)}function oVt(t){return t&&t.mark.role!=="legend-entry"}function iVt(t,r,n){var o=r.items,i=Math.max(0,r.width||0),s=Math.max(0,r.height||0),a=new Xc().set(0,0,i,s),l=a.clone(),u=a.clone(),c=[],f,d,p,m,h,g;for(h=0,g=o.length;h<g;++h)switch(d=o[h],d.role){case Pde:m=z9t(d)?l:u,m.union(V9t(t,d,i,s));break;case Lde:f=d;break;case Bde:c.push(J9t(t,d));break;case F9t:case O9t:case z7e:case U7e:case V7e:case G7e:case W7e:case q7e:l.union(d.bounds),u.union(d.bounds);break;default:a.union(d.bounds)}if(c.length){let y={};c.forEach(b=>{p=b.orient||Wm,p!==$de&&(y[p]||(y[p]=[])).push(b)});for(let b in y){let x=y[b];t9e(t,x,Q9t(x,b,n.legends,l,u,i,s))}c.forEach(b=>{let x=b.bounds;if(x.equals(b._bounds)||(b.bounds=b._bounds,t.dirty(b),b.bounds=x,t.dirty(b)),n.autosize&&(n.autosize.type===H7e||n.autosize.type===Y7e||n.autosize.type===X7e))switch(b.orient){case Gm:case Wm:a.add(x.x1,0).add(x.x2,0);break;case VD:case Jw:a.add(0,x.y1).add(0,x.y2)}else a.union(x)})}a.union(l).union(u),f&&a.union(nVt(t,f,i,s,a)),r.clip&&a.set(0,0,r.width||0,r.height||0),sVt(t,r,a,n)}function sVt(t,r,n,o){let i=o.autosize||{},s=i.type;if(t._autosize<1||!s)return;let a=t._width,l=t._height,u=Math.max(0,r.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,r.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.x2-u)),m=Math.max(0,Math.ceil(n.y2-f));if(i.contains===M9t){let h=t.padding();a-=h.left+h.right,l-=h.top+h.bottom}s===$de?(c=0,d=0,u=a,f=l):s===H7e?(u=Math.max(0,a-c-p),f=Math.max(0,l-d-m)):s===Y7e?(u=Math.max(0,a-c-p),l=f+d+m):s===X7e?(a=u+c+p,f=Math.max(0,l-d-m)):s===j9t&&(a=u+c+p,l=f+d+m),t._resizeView(a,l,u,f,[c,d],i.resize)}var VD,Gm,Wm,Jw,T9t,A9t,k9t,I9t,jde,Mde,ac,D9t,N9t,SG,Pde,Lde,F9t,O9t,Bde,z7e,U7e,V7e,G7e,W7e,q7e,M9t,R9t,H7e,Y7e,X7e,j9t,$de,xG,Rde,zde,Zw,Qw,F7e,O7e,J7e,M7e,B9t,$9t,R7e,j7e,uu,P7e,L7e,n9e=D(()=>{"use strict";qa();N7e();sE();VD="top",Gm="left",Wm="right",Jw="bottom",T9t="top-left",A9t="top-right",k9t="bottom-left",I9t="bottom-right",jde="start",Mde="middle",ac="end",D9t="x",N9t="y",SG="group",Pde="axis",Lde="title",F9t="frame",O9t="scope",Bde="legend",z7e="row-header",U7e="row-footer",V7e="row-title",G7e="column-header",W7e="column-footer",q7e="column-title",M9t="padding",R9t="symbol",H7e="fit",Y7e="fit-x",X7e="fit-y",j9t="pad",$de="none",xG="all",Rde="each",zde="flush",Zw="column",Qw="row";jx(K7e,et,{transform(t,r){let n=r.dataflow,o=t.mark,i=o.marktype,s=Kw[i],a=s.bound,l=o.bounds,u;if(s.nested)o.items.length&&n.dirty(o.items[0]),l=vG(o,a),o.items.forEach(c=>{c.bounds.clear().union(l)});else if(i===SG||t.modified())switch(r.visit(r.MOD,c=>n.dirty(c)),l.clear(),o.items.forEach(c=>l.union(vG(c,a))),o.role){case Pde:case Bde:case Lde:r.reflow()}else u=r.changed(r.REM),r.visit(r.ADD,c=>{l.union(vG(c,a))}),r.visit(r.MOD,c=>{u=u||l.alignsWith(c.bounds),n.dirty(c),l.union(vG(c,a))}),u&&(l.clear(),o.items.forEach(c=>l.union(c.bounds)));return D7e(o),r.modifies("bounds")}});F7e=":vega_identifier:";Ude.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};jx(Ude,et,{transform(t,r){let n=P9t(r.dataflow),o=t.as,i=n.value;return r.visit(r.ADD,s=>s[o]=s[o]||++i),n.set(this.value=i),r}});jx(Z7e,et,{transform(t,r){let n=this.value;n||(n=r.dataflow.scenegraph().mark(t.markdef,L9t(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);let o=n.marktype===SG?gde:fG;return r.visit(r.ADD,i=>o.call(i,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,r.reflow()),n.items=r.source,r}});O7e={parity:t=>t.filter((r,n)=>n%2?r.opacity=0:1),greedy:(t,r)=>{let n;return t.filter((o,i)=>!i||!J7e(n.bounds,o.bounds,r)?(n=o,1):o.opacity=0)}},J7e=(t,r,n)=>n>Math.max(r.x1-t.x2,t.x1-r.x2,r.y1-t.y2,t.y1-r.y2),M7e=(t,r)=>{for(var n=1,o=t.length,i=t[0].bounds,s;n<o;i=s,++n)if(J7e(i,s=t[n].bounds,r))return!0},B9t=t=>{let r=t.bounds;return r.width()>1&&r.height()>1},$9t=(t,r,n)=>{var o=t.range(),i=new Xc;return r===VD||r===Jw?i.set(o[0],-1/0,o[1],1/0):i.set(-1/0,o[0],1/0,o[1]),i.expand(n||1),s=>i.encloses(s.bounds)},R7e=t=>(t.forEach(r=>r.opacity=1),t),j7e=(t,r)=>t.reflow(r.modified()).modifies("opacity");jx(Q7e,et,{transform(t,r){let n=O7e[t.method]||O7e.parity,o=t.separation||0,i=r.materialize(r.SOURCE).source,s,a;if(!i||!i.length)return;if(!t.method)return t.modified("method")&&(R7e(i),r=j7e(r,t)),r;if(i=i.filter(B9t),!i.length)return;if(t.sort&&(i=i.slice().sort(t.sort)),s=R7e(i),r=j7e(r,t),s.length>=3&&M7e(s,o)){do s=n(s,o);while(s.length>=3&&M7e(s,o));s.length<3&&!zc(i).opacity&&(s.length>1&&(zc(s).opacity=0),zc(i).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(a=$9t(t.boundScale,t.boundOrient,+t.boundTolerance),i.forEach(u=>{a(u)||(u.opacity=0)}));let l=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&l.union(u.bounds)}),r}});jx(e9e,et,{transform(t,r){let n=r.dataflow;if(r.visit(r.ALL,o=>n.dirty(o)),r.fields&&r.fields.zindex){let o=r.source&&r.source[0];o&&(o.mark.zdirty=!0)}}});uu=new Xc;P7e=(t,r)=>Math.floor(Math.min(t,r)),L7e=(t,r)=>Math.ceil(Math.max(t,r));jx(r9e,et,{transform(t,r){let n=r.dataflow;return t.mark.items.forEach(o=>{t.layout&&H9t(n,o,t.layout),iVt(n,o,t)}),oVt(t.mark.group)?r.reflow():r}})});function Zs(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Q0(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var ud=D(()=>{"use strict"});function WD(){var t=new Map,r=[],n=[],o=GD;function i(s){var a=s+"",l=t.get(a);if(!l){if(o!==GD)return o;t.set(a,l=r.push(s))}return n[(l-1)%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Map;for(let a of s){let l=a+"";t.has(l)||t.set(l,r.push(a))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return WD(r,n).unknown(o)},Zs.apply(i,arguments),i}var GD,o9e=D(()=>{"use strict";ud();GD=Symbol("implicit")});function Gde(t){return function(){return t}}var i9e=D(()=>{"use strict"});function qD(t){return+t}var Wde=D(()=>{"use strict"});function Nl(t){return t}function qde(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:Gde(isNaN(r)?NaN:.5)}function aVt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function lVt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=qde(i,o),s=n(a,s)):(o=qde(o,i),s=n(s,a)),function(l){return s(o(l))}}function uVt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=qde(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=Fm(t,l,1,o)-1;return s[u](i[u](l))}}function J0(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function RE(){var t=s9e,r=s9e,n=su,o,i,s,a=Nl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Nl&&(a=aVt(t[0],t[p-1])),l=p>2?uVt:lVt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),au)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,qD),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=Y0,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Nl,f()):a!==Nl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,m){return o=p,i=m,f()}}function hL(){return RE()(Nl,Nl)}var s9e,e_=D(()=>{"use strict";Vo();TE();i9e();Wde();s9e=[0,1]});function jE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var CG=D(()=>{"use strict"});function ey(t){return t=jE(Math.abs(t)),t?t[1]:NaN}var gL=D(()=>{"use strict";CG()});function a9e(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var l9e=D(()=>{"use strict"});function u9e(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var c9e=D(()=>{"use strict"});function cd(t){return new Hde(t)}function Hde(t){if(!(r=cVt.exec(t)))throw new Error("invalid format: "+t);var r;this.fill=r[1]||" ",this.align=r[2]||">",this.sign=r[3]||"-",this.symbol=r[4]||"",this.zero=!!r[5],this.width=r[6]&&+r[6],this.comma=!!r[7],this.precision=r[8]&&+r[8].slice(1),this.trim=!!r[9],this.type=r[10]||""}var cVt,Yde=D(()=>{"use strict";cVt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;cd.prototype=Hde.prototype;Hde.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function f9e(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(o>0){if(!+t[n])break e;o=0}break}return o>0?t.slice(0,o)+t.slice(i+1):t}var d9e=D(()=>{"use strict"});function p9e(t,r){var n=jE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(Xde=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+jE(t,Math.max(0,r+s-1))[0]}var Xde,Kde=D(()=>{"use strict";CG()});function Zde(t,r){var n=jE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var m9e=D(()=>{"use strict";CG()});var Qde,h9e=D(()=>{"use strict";Kde();m9e();Qde={"%":function(t,r){return(t*100).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return Zde(t*100,r)},r:Zde,s:p9e,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}});function Jde(t){return t}var g9e=D(()=>{"use strict"});function EG(t){var r=t.grouping&&t.thousands?a9e(t.grouping,t.thousands):Jde,n=t.currency,o=t.decimal,i=t.numerals?u9e(t.numerals):Jde,s=t.percent||"%";function a(u){u=cd(u);var c=u.fill,f=u.align,d=u.sign,p=u.symbol,m=u.zero,h=u.width,g=u.comma,y=u.precision,b=u.trim,x=u.type;x==="n"?(g=!0,x="g"):Qde[x]||(y==null&&(y=12),b=!0,x="g"),(m||c==="0"&&f==="=")&&(m=!0,c="0",f="=");var v=p==="$"?n[0]:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w=p==="$"?n[1]:/[%p]/.test(x)?s:"",_=Qde[x],C=/[defgprs%]/.test(x);y=y==null?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function S(E){var A=v,N=w,k,M,I;if(x==="c")N=_(E)+N,E="";else{E=+E;var L=E<0;if(E=_(Math.abs(E),y),b&&(E=f9e(E)),L&&+E==0&&(L=!1),A=(L?d==="("?d:"-":d==="-"||d==="("?"":d)+A,N=(x==="s"?y9e[8+Xde/3]:"")+N+(L&&d==="("?")":""),C){for(k=-1,M=E.length;++k<M;)if(I=E.charCodeAt(k),48>I||I>57){N=(I===46?o+E.slice(k+1):E.slice(k))+N,E=E.slice(0,k);break}}}g&&!m&&(E=r(E,1/0));var P=A.length+E.length+N.length,R=P<h?new Array(h-P+1).join(c):"";switch(g&&m&&(E=r(R+E,R.length?h-N.length:1/0),R=""),f){case"<":E=A+E+N+R;break;case"=":E=A+R+E+N;break;case"^":E=R.slice(0,P=R.length>>1)+A+E+N+R.slice(P);break;default:E=R+A+E+N;break}return i(E)}return S.toString=function(){return u+""},S}function l(u,c){var f=a((u=cd(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(ey(c)/3)))*3,p=Math.pow(10,-d),m=y9e[8+d/3];return function(h){return f(p*h)+m}}return{format:a,formatPrefix:l}}var y9e,epe=D(()=>{"use strict";gL();l9e();c9e();Yde();d9e();h9e();Kde();g9e();y9e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function AG(t){return TG=EG(t),qm=TG.format,PE=TG.formatPrefix,TG}var TG,qm,PE,b9e=D(()=>{"use strict";epe();AG({decimal:".",thousands:",",grouping:[3],currency:["$",""]})});function HD(t){return Math.max(0,-ey(Math.abs(t)))}var x9e=D(()=>{"use strict";gL()});function YD(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ey(r)/3)))*3-ey(Math.abs(t)))}var v9e=D(()=>{"use strict";gL()});function XD(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,ey(r)-ey(t))+1}var w9e=D(()=>{"use strict";gL()});var tpe={};cn(tpe,{format:()=>qm,formatDefaultLocale:()=>AG,formatLocale:()=>EG,formatPrefix:()=>PE,formatSpecifier:()=>cd,precisionFixed:()=>HD,precisionPrefix:()=>YD,precisionRound:()=>XD});var LE=D(()=>{"use strict";b9e();epe();Yde();x9e();v9e();w9e()});function KD(t,r,n,o){var i=Zu(t,r,n),s;switch(o=cd(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=YD(i,a))&&(o.precision=s),PE(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=XD(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=HD(i))&&(o.precision=s-(o.type==="%")*2);break}}return qm(o)}var rpe=D(()=>{"use strict";Vo();LE()});function fd(t){var r=t.domain;return t.ticks=function(n){var o=r();return tD(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return KD(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=K7(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function yL(){var t=hL();return t.copy=function(){return J0(t,yL())},Zs.apply(t,arguments),fd(t)}var t_=D(()=>{"use strict";Vo();e_();ud();rpe()});function bL(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,qD),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return bL(t).unknown(r)},t=arguments.length?Array.from(t,qD):[0,1],fd(n)}var _9e=D(()=>{"use strict";t_();Wde()});function xL(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var npe=D(()=>{"use strict"});function S9e(t){return Math.log(t)}function C9e(t){return Math.exp(t)}function fVt(t){return-Math.log(-t)}function dVt(t){return-Math.exp(-t)}function pVt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function mVt(t){return t===10?pVt:t===Math.E?Math.exp:function(r){return Math.pow(t,r)}}function hVt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(r){return Math.log(r)/t})}function E9e(t){return function(r){return-t(-r)}}function vL(t){var r=t(S9e,C9e),n=r.domain,o=10,i,s;function a(){return i=hVt(o),s=mVt(o),n()[0]<0?(i=E9e(i),s=E9e(s),t(fVt,dVt)):t(S9e,C9e),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=function(l){var u=n(),c=u[0],f=u[u.length-1],d;(d=f<c)&&(p=c,c=f,f=p);var p=i(c),m=i(f),h,g,y,b=l==null?10:+l,x=[];if(!(o%1)&&m-p<b){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(g=1,h=s(p);g<o;++g)if(y=h*g,!(y<c)){if(y>f)break;x.push(y)}}else for(;p<=m;++p)for(g=o-1,h=s(p);g>=1;--g)if(y=h*g,!(y<c)){if(y>f)break;x.push(y)}x.length*2<b&&(x=tD(c,f,b))}else x=tD(p,m,Math.min(m-p,b)).map(s);return d?x.reverse():x},r.tickFormat=function(l,u){if(u==null&&(u=o===10?".0e":","),typeof u!="function"&&(u=qm(u)),l===1/0)return u;l==null&&(l=10);var c=Math.max(1,o*l/r.ticks().length);return function(f){var d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=function(){return n(xL(n(),{floor:function(l){return s(Math.floor(i(l)))},ceil:function(l){return s(Math.ceil(i(l)))}}))},r}function wL(){var t=vL(RE()).domain([1,10]);return t.copy=function(){return J0(t,wL()).base(t.base())},Zs.apply(t,arguments),t}var kG=D(()=>{"use strict";Vo();LE();npe();e_();ud()});function T9e(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function A9e(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function _L(t){var r=1,n=t(T9e(r),A9e(r));return n.constant=function(o){return arguments.length?t(T9e(r=+o),A9e(r)):r},fd(n)}function SL(){var t=_L(RE());return t.copy=function(){return J0(t,SL()).constant(t.constant())},Zs.apply(t,arguments)}var IG=D(()=>{"use strict";t_();e_();ud()});function k9e(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function gVt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function yVt(t){return t<0?-t*t:t*t}function CL(t){var r=t(Nl,Nl),n=1;function o(){return n===1?t(Nl,Nl):n===.5?t(gVt,yVt):t(k9e(n),k9e(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},fd(r)}function ZD(){var t=CL(RE());return t.copy=function(){return J0(t,ZD()).exponent(t.exponent())},Zs.apply(t,arguments),t}function ope(){return ZD.apply(null,arguments).exponent(.5)}var DG=D(()=>{"use strict";t_();e_();ud()});function EL(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=hj(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[Fm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ep),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return EL().domain(t).range(r).unknown(o)},Zs.apply(s,arguments)}var I9e=D(()=>{"use strict";Vo();ud()});function TL(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Fm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return TL().domain([t,r]).range(i).unknown(s)},Zs.apply(fd(a),arguments)}var D9e=D(()=>{"use strict";Vo();t_();ud()});function AL(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[Fm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return AL().domain(t).range(r).unknown(n)},Zs.apply(i,arguments)}var N9e=D(()=>{"use strict";Vo();ud()});function ipe(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function spe(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kL(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function QD(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=IL(i),f=DL(i),d=IL(s),p=DL(s),m=IL(a),h=DL(a),g=IL(l),y=DL(l),b=IL(u),x=DL(u),v={a:V,A:G,b:U,B:Y,c:null,d:P9e,e:P9e,f:$Vt,g:KVt,G:QVt,H:PVt,I:LVt,j:BVt,L:U9e,m:zVt,M:UVt,p:X,q:pe,Q:$9e,s:z9e,S:VVt,u:GVt,U:WVt,V:qVt,w:HVt,W:YVt,x:null,X:null,y:XVt,Y:ZVt,Z:JVt,"%":B9e},w={a:$,A:F,b:z,B:q,c:null,d:L9e,e:L9e,f:nGt,g:pGt,G:hGt,H:eGt,I:tGt,j:rGt,L:G9e,m:oGt,M:iGt,p:ee,q:ae,Q:$9e,s:z9e,S:sGt,u:aGt,U:lGt,V:uGt,w:cGt,W:fGt,x:null,X:null,y:dGt,Y:mGt,Z:gGt,"%":B9e},_={a:N,A:k,b:M,B:I,c:L,d:R9e,e:R9e,f:OVt,g:M9e,G:O9e,H:j9e,I:j9e,j:IVt,L:FVt,m:kVt,M:DVt,p:A,q:AVt,Q:RVt,s:jVt,S:NVt,u:_Vt,U:SVt,V:CVt,w:wVt,W:EVt,x:P,X:R,y:M9e,Y:O9e,Z:TVt,"%":MVt};v.x=C(n,v),v.X=C(o,v),v.c=C(r,v),w.x=C(n,w),w.X=C(o,w),w.c=C(r,w);function C(Q,le){return function(ie){var Z=[],ge=-1,ne=0,ye=Q.length,xe,Ne,Ae;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(Z.push(Q.slice(ne,ge)),(Ne=F9e[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):Ne=xe==="e"?" ":"0",(Ae=le[xe])&&(xe=Ae(ie,Ne)),Z.push(xe),ne=ge+1);return Z.push(Q.slice(ne,ge)),Z.join("")}}function S(Q,le){return function(ie){var Z=kL(1900,void 0,1),ge=E(Z,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ne=spe(kL(Z.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?lD.ceil(ne):lD(ne),ne=ed.offset(ne,(Z.V-1)*7),Z.y=ne.getUTCFullYear(),Z.m=ne.getUTCMonth(),Z.d=ne.getUTCDate()+(Z.w+6)%7):(ne=ipe(kL(Z.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?aD.ceil(ne):aD(ne),ne=Qf.offset(ne,(Z.V-1)*7),Z.y=ne.getFullYear(),Z.m=ne.getMonth(),Z.d=ne.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ye="Z"in Z?spe(kL(Z.y,0,1)).getUTCDay():ipe(kL(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ye+5)%7:Z.w+Z.U*7-(ye+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,spe(Z)):ipe(Z)}}function E(Q,le,ie,Z){for(var ge=0,ne=le.length,ye=ie.length,xe,Ne;ge<ne;){if(Z>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),Ne=_[xe in F9e?le.charAt(ge++):xe],!Ne||(Z=Ne(Q,ie,Z))<0)return-1}else if(xe!=ie.charCodeAt(Z++))return-1}return Z}function A(Q,le,ie){var Z=c.exec(le.slice(ie));return Z?(Q.p=f.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function N(Q,le,ie){var Z=m.exec(le.slice(ie));return Z?(Q.w=h.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function k(Q,le,ie){var Z=d.exec(le.slice(ie));return Z?(Q.w=p.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function M(Q,le,ie){var Z=b.exec(le.slice(ie));return Z?(Q.m=x.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function I(Q,le,ie){var Z=g.exec(le.slice(ie));return Z?(Q.m=y.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function Y(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function pe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function F(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=C(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=S(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=C(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=S(Q+="",!0);return le.toString=function(){return Q},le}}}function ao(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function vVt(t){return t.replace(xVt,"\\$&")}function IL(t){return new RegExp("^(?:"+t.map(vVt).join("|")+")","i")}function DL(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function wVt(t,r,n){var o=Qa.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function _Vt(t,r,n){var o=Qa.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function SVt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function CVt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function EVt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function O9e(t,r,n){var o=Qa.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function M9e(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function TVt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function AVt(t,r,n){var o=Qa.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function kVt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function R9e(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function IVt(t,r,n){var o=Qa.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function j9e(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function DVt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function NVt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function FVt(t,r,n){var o=Qa.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function OVt(t,r,n){var o=Qa.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function MVt(t,r,n){var o=bVt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function RVt(t,r,n){var o=Qa.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function jVt(t,r,n){var o=Qa.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function P9e(t,r){return ao(t.getDate(),r,2)}function PVt(t,r){return ao(t.getHours(),r,2)}function LVt(t,r){return ao(t.getHours()%12||12,r,2)}function BVt(t,r){return ao(1+Qf.count(Jf(t),t),r,3)}function U9e(t,r){return ao(t.getMilliseconds(),r,3)}function $Vt(t,r){return U9e(t,r)+"000"}function zVt(t,r){return ao(t.getMonth()+1,r,2)}function UVt(t,r){return ao(t.getMinutes(),r,2)}function VVt(t,r){return ao(t.getSeconds(),r,2)}function GVt(t){var r=t.getDay();return r===0?7:r}function WVt(t,r){return ao(rp.count(Jf(t)-1,t),r,2)}function V9e(t){var r=t.getDay();return r>=4||r===0?bw(t):bw.ceil(t)}function qVt(t,r){return t=V9e(t),ao(bw.count(Jf(t),t)+(Jf(t).getDay()===4),r,2)}function HVt(t){return t.getDay()}function YVt(t,r){return ao(aD.count(Jf(t)-1,t),r,2)}function XVt(t,r){return ao(t.getFullYear()%100,r,2)}function KVt(t,r){return t=V9e(t),ao(t.getFullYear()%100,r,2)}function ZVt(t,r){return ao(t.getFullYear()%1e4,r,4)}function QVt(t,r){var n=t.getDay();return t=n>=4||n===0?bw(t):bw.ceil(t),ao(t.getFullYear()%1e4,r,4)}function JVt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+ao(r/60|0,"0",2)+ao(r%60,"0",2)}function L9e(t,r){return ao(t.getUTCDate(),r,2)}function eGt(t,r){return ao(t.getUTCHours(),r,2)}function tGt(t,r){return ao(t.getUTCHours()%12||12,r,2)}function rGt(t,r){return ao(1+ed.count(td(t),t),r,3)}function G9e(t,r){return ao(t.getUTCMilliseconds(),r,3)}function nGt(t,r){return G9e(t,r)+"000"}function oGt(t,r){return ao(t.getUTCMonth()+1,r,2)}function iGt(t,r){return ao(t.getUTCMinutes(),r,2)}function sGt(t,r){return ao(t.getUTCSeconds(),r,2)}function aGt(t){var r=t.getUTCDay();return r===0?7:r}function lGt(t,r){return ao(np.count(td(t)-1,t),r,2)}function W9e(t){var r=t.getUTCDay();return r>=4||r===0?vw(t):vw.ceil(t)}function uGt(t,r){return t=W9e(t),ao(vw.count(td(t),t)+(td(t).getUTCDay()===4),r,2)}function cGt(t){return t.getUTCDay()}function fGt(t,r){return ao(lD.count(td(t)-1,t),r,2)}function dGt(t,r){return ao(t.getUTCFullYear()%100,r,2)}function pGt(t,r){return t=W9e(t),ao(t.getUTCFullYear()%100,r,2)}function mGt(t,r){return ao(t.getUTCFullYear()%1e4,r,4)}function hGt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?vw(t):vw.ceil(t),ao(t.getUTCFullYear()%1e4,r,4)}function gGt(){return"+0000"}function B9e(){return"%"}function $9e(t){return+t}function z9e(t){return Math.floor(+t/1e3)}var F9e,Qa,bVt,xVt,ape=D(()=>{"use strict";Sj();F9e={"-":"",_:" ",0:"0"},Qa=/^\s*\d+/,bVt=/^%/,xVt=/[\\^$*+?|[\]().{}]/g});function lpe(t){return JD=QD(t),r_=JD.format,NG=JD.parse,n_=JD.utcFormat,FG=JD.utcParse,JD}var JD,r_,NG,n_,FG,q9e=D(()=>{"use strict";ape();lpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var eN=D(()=>{"use strict";q9e();ape()});function yGt(t){return new Date(t)}function bGt(t){return t instanceof Date?+t:+new Date(+t)}function OG(t,r,n,o,i,s,a,l,u,c){var f=hL(),d=f.invert,p=f.domain,m=c(".%L"),h=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(C){return(u(C)<C?m:l(C)<C?h:a(C)<C?g:s(C)<C?y:o(C)<C?i(C)<C?b:x:n(C)<C?v:w)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,bGt)):p().map(yGt)},f.ticks=function(C){var S=p();return t(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?_:c(S)},f.nice=function(C){var S=p();return(!C||typeof C.range!="function")&&(C=r(S[0],S[S.length-1],C??10)),C?p(xL(S,C)):f},f.copy=function(){return J0(f,OG(t,r,n,o,i,s,a,l,u,c))},f}function MG(){return Zs.apply(OG(Cle,Ele,Jf,xw,rp,Qf,eE,QC,Ju,r_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var upe=D(()=>{"use strict";Sj();eN();e_();ud();npe()});function RG(){return Zs.apply(OG(_le,Sle,td,ww,np,ed,nE,rE,Ju,n_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var H9e=D(()=>{"use strict";Sj();eN();upe();ud()});function jG(){var t=0,r=1,n,o,i,s,a=Nl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var m,h;return arguments.length?([m,h]=p,a=d(m,h),c):[a(0),a(1)]}}return c.range=f(su),c.rangeRound=f(Y0),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function Xx(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function tN(){var t=fd(jG()(Nl));return t.copy=function(){return Xx(t,tN())},Q0.apply(t,arguments)}function PG(){var t=vL(jG()).domain([1,10]);return t.copy=function(){return Xx(t,PG()).base(t.base())},Q0.apply(t,arguments)}function LG(){var t=_L(jG());return t.copy=function(){return Xx(t,LG()).constant(t.constant())},Q0.apply(t,arguments)}function NL(){var t=CL(jG());return t.copy=function(){return Xx(t,NL()).exponent(t.exponent())},Q0.apply(t,arguments)}function cpe(){return NL.apply(null,arguments).exponent(.5)}var fpe=D(()=>{"use strict";TE();e_();ud();t_();kG();IG();DG()});function BG(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Nl,f,d=!1,p;function m(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,m):[t,r,n]},m.clamp=function(g){return arguments.length?(d=!!g,m):d},m.interpolator=function(g){return arguments.length?(c=g,m):c};function h(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=EE(g,[b,x,v]),m):[c(0),c(.5),c(1)]}}return m.range=h(su),m.rangeRound=h(Y0),m.unknown=function(g){return arguments.length?(p=g,m):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,m}}function FL(){var t=fd(BG()(Nl));return t.copy=function(){return Xx(t,FL())},Q0.apply(t,arguments)}function $G(){var t=vL(BG()).domain([.1,1,10]);return t.copy=function(){return Xx(t,$G()).base(t.base())},Q0.apply(t,arguments)}function zG(){var t=_L(BG());return t.copy=function(){return Xx(t,zG()).constant(t.constant())},Q0.apply(t,arguments)}function OL(){var t=CL(BG());return t.copy=function(){return Xx(t,OL()).exponent(t.exponent())},Q0.apply(t,arguments)}function dpe(){return OL.apply(null,arguments).exponent(.5)}var Y9e=D(()=>{"use strict";TE();e_();ud();t_();kG();fpe();IG();DG()});var ppe=D(()=>{"use strict";_9e();t_();kG();IG();o9e();DG();I9e();D9e();N9e();upe();H9e();fpe();Y9e();rpe()});function ML(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function vGt(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function wGt(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function ype(){let t=WD().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],m=o[1-p],h=ML(d,l,u),g=o[p-0];i=(m-g)/(h||1),a&&(i=Math.floor(i)),g+=(m-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=qs(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],m=p?n().reverse():n(),h=m.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<m[0]||g>o[1-p])))return b=Math.max(0,YC(m,g)-1),x=g===y?b:YC(m,y)-1,g-m[b]>s+1e-10&&++b,p&&(v=b,b=h-x,x=h-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return ype().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function Q9e(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Q9e(r())},t}function _Gt(){return Q9e(ype().paddingInner(1))}function CGt(t){return SGt.call(t,Cm)}function J9e(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(Fm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=CGt(o),n):t.slice()},n.range=function(o){return arguments.length?(r=EGt.call(o),n):r.slice()},n.tickFormat=function(o,i){return KD(t[0],Pn(t),o??10,i)},n.copy=function(){return J9e().domain(n.domain()).range(n.range())},n}function TGt(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?vGt(s):s.invertExtent?wGt(s):void 0),s.type=t,s};return o.metadata=ru(jr(n)),o}function Bn(t,r,n){return arguments.length>1?(UG[t]=TGt(t,r,n),this):bpe(t)?UG[t]:void 0}function bpe(t){return Or(UG,t)}function UE(t,r){let n=UG[t];return n&&n.metadata[r]}function $L(t){return UE(t,Ca)}function s_(t){return UE(t,LL)}function qG(t){return UE(t,BL)}function xpe(t){return UE(t,ty)}function AGt(t){return UE(t,gpe)}function vpe(t){return UE(t,pp)}function wpe(t){return UE(t,BE)}function HG(t,r){let n=r[0],o=Pn(r)-n;return function(i){return t(n+i*o)}}function oN(t,r,n){return EE(zL(r||"rgb",n),t)}function YG(t,r){let n=new Array(r),o=r+1;for(let i=0;i<r;)n[i]=t(++i/o);return n}function XG(t,r,n){let o=n-r,i,s,a;return!o||!Number.isFinite(o)?Ga(.5):(i=(s=t.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=Bn(s)().domain([r,n]).range([0,1]),kGt.forEach(l=>t[l]?a[l](t[l]()):0),a)}function zL(t,r){let n=Mfe[IGt(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function IGt(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function eVe(t){let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function tVe(t,r){for(let n in t)UL(n,r(t[n]))}function UL(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(X9e[t]=r,this):X9e[t]}function KG(t,r,n){let o;return S0(r)&&(t.bins&&(r=Math.max(r,t.bins.length)),n!=null&&(r=Math.min(r,Math.floor(LC(t.domain())/n||1)))),ln(r)&&(o=r.step,r=r.interval),Kn(r)&&(r=t.type===o_?Fx(r):t.type==i_?Ox(r):pt("Only time and utc scales accept interval strings."),o&&(r=r.every(o))),r}function _pe(t,r,n){let o=t.range(),i=o[0],s=Pn(o),a=MGt;if(i>s&&(o=s,s=i,i=o,a=RGt),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],Pn(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function ZG(t,r){return t.bins?_pe(t,t.bins):t.ticks?t.ticks(r):t.domain()}function Spe(t,r,n,o,i,s){let a=r.type,l=OGt;if(a===o_||i===o_)l=t.timeFormat(o);else if(a===i_||i===i_)l=t.utcFormat(o);else if(xpe(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=nVe(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function nVe(t,r,n){let o=ZG(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function Cpe(t,r){return t.bins?LGt(t.bins):t.type===ty?nVe(t,r,!0):mpe[t.type]?PGt(t[mpe[t.type]]()):ZG(t,r)}function jGt(t,r,n){let o=r[oVe[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function PGt(t){let r=[-1/0].concat(t);return r.max=1/0,r}function LGt(t){let r=t.slice(0,-1);return r.max=Pn(t),r}function Epe(t,r,n,o,i,s,a){let l=oVe[r.type]&&s!==o_&&s!==i_?jGt(t,r,i):Spe(t,r,n,i,s,a);return o===VL&&BGt(r)?$Gt(l):o===FGt?zGt(l):UGt(l)}function iVe(t){let r=t.domain(),n=r.length-1,o=+r[0],i=+Pn(r),s=i-o;if(t.type===PL){let a=n?s/n:.1;o-=a,i+=a,s=i-o}return a=>(a-o)/s}function VGt(t,r,n,o){let i=o||r.type;return Kn(n)&&AGt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===o_?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===i_?t.utcFormat("%A, %d %B %Y, %X UTC"):Epe(t,r,5,null,n,o,!0)}function Tpe(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=VGt(t,r,n.format,n.formatType);if(qG(r.type)){let s=Cpe(r).slice(1).map(i),a=s.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(s.join(", "))}else if(s_(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(l)}else{let s=r.domain();return"values from ".concat(i(s[0])," to ").concat(i(Pn(s)))}}var xGt,$E,ty,rN,nN,RL,o_,i_,Hm,zE,BE,jL,PL,VG,GG,hpe,WG,Ca,LL,BL,pp,gpe,SGt,EGt,UG,kGt,DGt,NGt,X9e,VL,FGt,rVe,OGt,MGt,RGt,mpe,oVe,BGt,$Gt,K9e,zGt,UGt,Z9e,iN=D(()=>{"use strict";Ts();Vo();ppe();ppe();TE();TE();cD();xGt="identity",$E="linear",ty="log",rN="pow",nN="sqrt",RL="symlog",o_="time",i_="utc",Hm="sequential",zE="diverging",BE="quantile",jL="quantize",PL="threshold",VG="ordinal",GG="point",hpe="band",WG="bin-ordinal",Ca="continuous",LL="discrete",BL="discretizing",pp="interpolating",gpe="temporal";SGt=Array.prototype.map;EGt=Array.prototype.slice;UG={};Bn(xGt,bL);Bn($E,yL,Ca);Bn(ty,wL,[Ca,ty]);Bn(rN,ZD,Ca);Bn(nN,ope,Ca);Bn(RL,SL,Ca);Bn(o_,MG,[Ca,gpe]);Bn(i_,RG,[Ca,gpe]);Bn(Hm,tN,[Ca,pp]);Bn("".concat(Hm,"-").concat($E),tN,[Ca,pp]);Bn("".concat(Hm,"-").concat(ty),PG,[Ca,pp,ty]);Bn("".concat(Hm,"-").concat(rN),NL,[Ca,pp]);Bn("".concat(Hm,"-").concat(nN),cpe,[Ca,pp]);Bn("".concat(Hm,"-").concat(RL),LG,[Ca,pp]);Bn("".concat(zE,"-").concat($E),FL,[Ca,pp]);Bn("".concat(zE,"-").concat(ty),$G,[Ca,pp,ty]);Bn("".concat(zE,"-").concat(rN),OL,[Ca,pp]);Bn("".concat(zE,"-").concat(nN),dpe,[Ca,pp]);Bn("".concat(zE,"-").concat(RL),zG,[Ca,pp]);Bn(BE,EL,[BL,BE]);Bn(jL,TL,BL);Bn(PL,AL,BL);Bn(WG,J9e,[LL,BL]);Bn(VG,WD,LL);Bn(hpe,ype,LL);Bn(GG,_Gt,LL);kGt=["clamp","base","constant","exponent"];DGt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},NGt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};X9e={};tVe(NGt,eVe);tVe(DGt,t=>oN(eVe(t)));VL="symbol",FGt="discrete",rVe="gradient",OGt=t=>Wr(t)?t.map(r=>String(r)):String(t),MGt=(t,r)=>t[1]-r[1],RGt=(t,r)=>r[1]-t[1];mpe={[BE]:"quantiles",[jL]:"thresholds",[PL]:"domain"},oVe={[BE]:"quantiles",[jL]:"domain"};BGt=t=>mpe[t.type]||t.bins;$Gt=t=>(r,n,o)=>{let i=K9e(o[n+1],K9e(o.max,1/0)),s=Z9e(r,t),a=Z9e(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},K9e=(t,r)=>t??r,zGt=t=>(r,n)=>n?t(r):null,UGt=t=>r=>t(r),Z9e=(t,r)=>Number.isFinite(t)?r(t):null});var Npe={};cn(Npe,{axisticks:()=>uVe,datajoin:()=>cVe,encode:()=>fVe,legendentries:()=>dVe,linkpath:()=>kpe,pie:()=>Ipe,scale:()=>yVe,sortitems:()=>xVe,stack:()=>Dpe});function uVe(t){et.call(this,null,t)}function cVe(t){et.call(this,null,t)}function GGt(){return An({})}function WGt(t){let r=lw().test(n=>n.exit);return r.lookup=n=>r.get(t(n)),r}function fVe(t){et.call(this,null,t)}function dVe(t){et.call(this,[],t)}function kpe(t){et.call(this,{},t)}function Ipe(t){et.call(this,null,t)}function sWt(t){let r=t.type;return!t.bins&&(r===$E||r===rN||r===nN)}function gVe(t){return $L(t)&&t!==Hm}function yVe(t){et.call(this,null,t),this.modified(!0)}function lWt(t){var r=t.type,n="",o;return r===Hm?Hm+"-"+$E:(uWt(t)&&(o=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=o===2?Hm+"-":o===3?zE+"-":""),(n+r||$E).toLowerCase())}function uWt(t){let r=t.type;return $L(r)&&r!==o_&&r!==i_&&(t.scheme||t.range&&t.range.length&&t.range.every(Kn))}function cWt(t,r,n){let o=fWt(t,r.domainRaw,n);if(o>-1)return o;var i=r.domain,s=t.type,a=r.zero||r.zero===void 0&&sWt(t),l,u;if(!i)return 0;if(gVe(s)&&r.padding&&i[0]!==Pn(i)&&(i=dWt(s,i,r.range,r.padding,r.exponent,r.constant)),(a||r.domainMin!=null||r.domainMax!=null||r.domainMid!=null)&&(l=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[l]<0&&(i[l]=0)),r.domainMin!=null&&(i[0]=r.domainMin),r.domainMax!=null&&(i[l]=r.domainMax),r.domainMid!=null)){u=r.domainMid;let c=u>i[l]?l+1:u<i[0]?0:l;c!==l&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(c,0,u)}return t.domain(bVe(s,i,n)),s===VG&&t.unknown(r.domainImplicit?GD:void 0),r.nice&&t.nice&&t.nice(r.nice!==!0&&KG(t,r.nice)||null),i.length}function fWt(t,r,n){return r?(t.domain(bVe(t.type,r,n)),r.length):-1}function dWt(t,r,n,o,i,s){var a=Math.abs(Pn(n)-n[0]),l=a/(a-2*o),u=t===ty?Ese(r,null,l):t===nN?g7(r,null,l,.5):t===rN?g7(r,null,l,i||1):t===RL?Tse(r,null,l,s||1):Cse(r,null,l);return r=r.slice(),r[0]=u[0],r[r.length-1]=u[1],r}function bVe(t,r,n){if(xpe(t)){var o=Math.abs(r.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));o!==r.length&&n.warn("Log scale domain includes zero: "+Pr(r))}return r}function pWt(t,r,n){let o=r.bins;if(o&&!Wr(o)){let i=t.domain(),s=i[0],a=Pn(i),l=o.step,u=o.start==null?s:o.start,c=o.stop==null?a:o.stop;l||pt("Scale bins parameter missing step property."),u<s&&(u=l*Math.ceil(s/l)),c>a&&(c=l*Math.floor(a/l)),o=qs(u,c+l/2,l)}return o?t.bins=o:t.bins&&delete t.bins,t.type===WG&&(o?!r.domain&&!r.domainRaw&&(t.domain(o),n=o.length):t.bins=t.domain()),n}function mWt(t,r,n){var o=t.type,i=r.round||!1,s=r.range;if(r.rangeStep!=null)s=hWt(o,r,n);else if(r.scheme&&(s=gWt(o,r,n),Tn(s))){if(t.interpolator)return t.interpolator(s);pt("Scale type ".concat(o," does not support interpolating color schemes."))}if(s&&vpe(o))return t.interpolator(oN(Ape(s,r.reverse),r.interpolate,r.interpolateGamma));s&&r.interpolate&&t.interpolate?t.interpolate(zL(r.interpolate,r.interpolateGamma)):Tn(t.round)?t.round(i):Tn(t.rangeRound)&&t.interpolate(i?Y0:su),s&&t.range(Ape(s,r.reverse))}function hWt(t,r,n){t!==hpe&&t!==GG&&pt("Only band and point scales support rangeStep.");var o=(r.paddingOuter!=null?r.paddingOuter:r.padding)||0,i=t===GG?1:(r.paddingInner!=null?r.paddingInner:r.padding)||0;return[0,r.rangeStep*ML(n,i,o)]}function gWt(t,r,n){var o=r.schemeExtent,i,s;return Wr(r.scheme)?s=oN(r.scheme,r.interpolate,r.interpolateGamma):(i=r.scheme.toLowerCase(),s=UL(i),s||pt("Unrecognized scheme name: ".concat(r.scheme))),n=t===PL?n+1:t===WG?n-1:t===BE||t===jL?+r.schemeCount||iWt:n,vpe(t)?aVe(s,o,r.reverse):Tn(s)?YG(aVe(s,o),n):t===VG?s:s.slice(0,n)}function aVe(t,r,n){return Tn(t)&&(r||n)?HG(t,Ape(r||[0,1],n)):t}function Ape(t,r){return r?t.slice().reverse():t}function xVe(t){et.call(this,null,t)}function Dpe(t){et.call(this,null,t)}function yWt(t,r,n,o,i){for(var s=(r-t.sum)/2,a=t.length,l=0,u;l<a;++l)u=t[l],u[o]=s,u[i]=s+=Math.abs(n(u))}function bWt(t,r,n,o,i){for(var s=1/t.sum,a=0,l=t.length,u=0,c=0,f;u<l;++u)f=t[u],f[o]=a,f[i]=a=s*(c+=Math.abs(n(f)))}function xWt(t,r,n,o,i){for(var s=0,a=0,l=t.length,u=0,c,f;u<l;++u)f=t[u],c=+n(f),c<0?(f[o]=a,f[i]=a+=c):(f[o]=s,f[i]=s+=c)}function vWt(t,r,n,o){var i=[],s=g=>g(f),a,l,u,c,f,d,p,m,h;if(r==null)i.push(t.slice());else for(a={},l=0,u=t.length;l<u;++l)f=t[l],d=r.map(s),p=a[d],p||(a[d]=p=[],i.push(p)),p.push(f);for(d=0,h=0,c=i.length;d<c;++d){for(p=i[d],l=0,m=0,u=p.length;l<u;++l)m+=Math.abs(o(p[l]));p.sum=m,m>h&&(h=m),n&&p.sort(n)}return i.max=h,i}var qGt,HGt,YGt,XGt,pVe,KGt,mVe,ZGt,hVe,QGt,JGt,eWt,tWt,rWt,nWt,oWt,sVe,iWt,aWt,lVe,vVe,wVe,_Ve,SVe=D(()=>{"use strict";qa();iN();Ts();Vo();TE();It(uVe,et,{transform(t,r){if(this.value&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.scale,a=t.count==null?t.values?t.values.length:10:t.count,l=KG(s,a,t.minstep),u=t.format||Spe(n,s,l,t.formatSpecifier,t.formatType,!!t.values),c=t.values?_pe(s,t.values,l):ZG(s,l);return i&&(o.rem=i),i=c.map((f,d)=>An({index:d/(c.length-1||1),value:f,label:u(f)})),t.extra&&i.length&&i.push(An({index:-1,extra:{value:i[0].value},label:""})),o.source=i,o.add=i,this.value=i,o}});It(cVe,et,{transform(t,r){var n=r.dataflow,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.item||GGt,s=t.key||br,a=this.value;return Wr(o.encode)&&(o.encode=null),a&&(t.modified("key")||r.modified(s))&&pt("DataJoin does not support modified key function or fields."),a||(r=r.addAll(),this.value=a=WGt(s)),r.visit(r.ADD,l=>{let u=s(l),c=a.get(u);c?c.exit?(a.empty--,o.add.push(c)):o.mod.push(c):(c=i(l),a.set(u,c),o.add.push(c)),c.datum=l,c.exit=!1}),r.visit(r.MOD,l=>{let u=s(l),c=a.get(u);c&&(c.datum=l,o.mod.push(c))}),r.visit(r.REM,l=>{let u=s(l),c=a.get(u);l===c.datum&&!c.exit&&(o.rem.push(c),c.exit=!0,++a.empty)}),r.changed(r.ADD_MOD)&&o.modifies("datum"),(r.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),o}});It(fVe,et,{transform(t,r){var n=r.fork(r.ADD_REM),o=t.mod||!1,i=t.encoders,s=r.encode;if(Wr(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return r.StopPropagation;var a=s==="enter",l=i.update||Sx,u=i.enter||Sx,c=i.exit||Sx,f=(s&&!a?i[s]:l)||Sx;if(r.changed(r.ADD)&&(r.visit(r.ADD,d=>{u(d,t),l(d,t)}),n.modifies(u.output),n.modifies(l.output),f!==Sx&&f!==l&&(r.visit(r.ADD,d=>{f(d,t)}),n.modifies(f.output))),r.changed(r.REM)&&c!==Sx&&(r.visit(r.REM,d=>{c(d,t)}),n.modifies(c.output)),a||f!==Sx){let d=r.MOD|(t.modified()?r.REFLOW:0);a?(r.visit(d,p=>{let m=u(p,t)||o;(f(p,t)||m)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):r.visit(d,p=>{(f(p,t)||o)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:r.StopPropagation}});It(dVe,et,{transform(t,r){if(this.value!=null&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.type||VL,a=t.scale,l=+t.limit,u=KG(a,t.count==null?5:t.count,t.minstep),c=!!t.values||s===VL,f=t.format||Epe(n,a,u,s,t.formatSpecifier,t.formatType,c),d=t.values||Cpe(a,u),p,m,h,g,y;return i&&(o.rem=i),s===VL?(l&&d.length>l?(r.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,l-1),y=!0):i=d,Tn(h=t.size)?(!t.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((b,x)=>Math.max(b,h(x,t)),0)):h=Ga(g=h||8),i=i.map((b,x)=>An({index:x,label:f(b,x,i),value:b,offset:g,size:h(b,t)})),y&&(y=d[i.length],i.push(An({index:i.length,label:"\u2026".concat(d.length-i.length," entries"),value:y,offset:g,size:h(y,t)})))):s===rVe?(p=a.domain(),m=XG(a,p[0],Pn(p)),d.length<3&&!t.values&&p[0]!==Pn(p)&&(d=[p[0],Pn(p)]),i=d.map((b,x)=>An({index:x,label:f(b,x,d),value:b,perc:m(b)}))):(h=d.length-1,m=iVe(a),i=d.map((b,x)=>An({index:x,label:f(b,x,d),value:b,perc:x?m(b):0,perc2:x===h?1:m(d[x+1])}))),o.source=i,o.add=i,this.value=i,o}});qGt=t=>t.source.x,HGt=t=>t.source.y,YGt=t=>t.target.x,XGt=t=>t.target.y;kpe.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};It(kpe,et,{transform(t,r){var n=t.sourceX||qGt,o=t.sourceY||HGt,i=t.targetX||YGt,s=t.targetY||XGt,a=t.as||"path",l=t.orient||"vertical",u=t.shape||"line",c=sVe.get(u+"-"+l)||sVe.get(u);return c||pt("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),r.visit(r.SOURCE,f=>{f[a]=c(n(f),o(f),i(f),s(f))}),r.reflow(t.modified()).modifies(a)}});pVe=(t,r,n,o)=>"M"+t+","+r+"L"+n+","+o,KGt=(t,r,n,o)=>pVe(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),mVe=(t,r,n,o)=>{var i=n-t,s=o-r,a=Math.sqrt(i*i+s*s)/2,l=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+r+"A"+a+","+a+" "+l+" 0 1 "+n+","+o},ZGt=(t,r,n,o)=>mVe(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),hVe=(t,r,n,o)=>{let i=n-t,s=o-r,a=.2*(i+s),l=.2*(s-i);return"M"+t+","+r+"C"+(t+a)+","+(r+l)+" "+(n+l)+","+(o-a)+" "+n+","+o},QGt=(t,r,n,o)=>hVe(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),JGt=(t,r,n,o)=>"M"+t+","+r+"V"+o+"H"+n,eWt=(t,r,n,o)=>"M"+t+","+r+"H"+n+"V"+o,tWt=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+r*i+","+r*s+"A"+r+","+r+" 0 0,"+(u?1:0)+" "+r*a+","+r*l+"L"+o*a+","+o*l},rWt=(t,r,n,o)=>{let i=(t+n)/2;return"M"+t+","+r+"C"+i+","+r+" "+i+","+o+" "+n+","+o},nWt=(t,r,n,o)=>{let i=(r+o)/2;return"M"+t+","+r+"C"+t+","+i+" "+n+","+i+" "+n+","+o},oWt=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=(r+o)/2;return"M"+r*i+","+r*s+"C"+u*i+","+u*s+" "+u*a+","+u*l+" "+o*a+","+o*l},sVe=lw({line:pVe,"line-radial":KGt,arc:mVe,"arc-radial":ZGt,curve:hVe,"curve-radial":QGt,"orthogonal-horizontal":JGt,"orthogonal-vertical":eWt,"orthogonal-radial":tWt,"diagonal-horizontal":rWt,"diagonal-vertical":nWt,"diagonal-radial":oWt});Ipe.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};It(Ipe,et,{transform(t,r){var n=t.as||["startAngle","endAngle"],o=n[0],i=n[1],s=t.field||w0,a=t.startAngle||0,l=t.endAngle!=null?t.endAngle:2*Math.PI,u=r.source,c=u.map(s),f=c.length,d=a,p=(l-a)/nD(c),m=qs(f),h,g,y;for(t.sort&&m.sort((b,x)=>c[b]-c[x]),h=0;h<f;++h)y=c[m[h]],g=u[m[h]],g[o]=d,g[i]=d+=y*p;return this.value=c,r.reflow(t.modified()).modifies(n)}});iWt=5;aWt=ru(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);It(yVe,et,{transform(t,r){var n=r.dataflow,o=this.value,i=lWt(t);(!o||i!==o.type)&&(this.value=o=Bn(i)());for(i in t)if(!aWt[i]){if(i==="padding"&&gVe(o.type))continue;Tn(o[i])?o[i](t[i]):n.warn("Unsupported scale property: "+i)}return mWt(o,t,pWt(o,t,cWt(o,t,n))),r.fork(r.NO_SOURCE|r.NO_FIELDS)}});It(xVe,et,{transform(t,r){let n=t.modified("sort")||r.changed(r.ADD)||r.modified(t.sort.fields)||r.modified("datum");return n&&r.source.sort(O0(t.sort)),this.modified(n),r}});lVe="zero",vVe="center",wVe="normalize",_Ve=["y0","y1"];Dpe.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:lVe,values:[lVe,vVe,wVe]},{name:"as",type:"string",array:!0,length:2,default:_Ve}]};It(Dpe,et,{transform(t,r){var n=t.as||_Ve,o=n[0],i=n[1],s=O0(t.sort),a=t.field||w0,l=t.offset===vVe?yWt:t.offset===wVe?bWt:xWt,u,c,f,d;for(u=vWt(r.source,t.groupby,s,a),c=0,f=u.length,d=u.max;c<f;++c)l(u[c],d,a,o,i);return r.reflow(t.modified()).modifies(n)}})});function tW(t){return t>1?0:t<-1?Kr:Math.acos(t)}function ki(t){return t>1?Go:t<-1?-Go:Math.asin(t)}var Zt,VE,Kr,Go,sN,ks,Wo,Hr,Yr,mp,ds,Kt,GL,QG,JG,GE,eW,Yt,cu,qo,aN,_n=D(()=>{"use strict";Zt=1e-6,VE=1e-12,Kr=Math.PI,Go=Kr/2,sN=Kr/4,ks=Kr*2,Wo=180/Kr,Hr=Kr/180,Yr=Math.abs,mp=Math.atan,ds=Math.atan2,Kt=Math.cos,GL=Math.ceil,QG=Math.exp,JG=Math.hypot,GE=Math.log,eW=Math.pow,Yt=Math.sin,cu=Math.sign||function(t){return t>0?1:t<0?-1:0},qo=Math.sqrt,aN=Math.tan});function Ii(){}var a_=D(()=>{"use strict"});function rW(t,r){t&&EVe.hasOwnProperty(t.type)&&EVe[t.type](t,r)}function Fpe(t,r,n){var o=-1,i=t.length-n,s;for(r.lineStart();++o<i;)s=t[o],r.point(s[0],s[1],s[2]);r.lineEnd()}function TVe(t,r){var n=-1,o=t.length;for(r.polygonStart();++n<o;)Fpe(t[n],r,1);r.polygonEnd()}function Kc(t,r){t&&CVe.hasOwnProperty(t.type)?CVe[t.type](t,r):rW(t,r)}var CVe,EVe,lN=D(()=>{"use strict";CVe={Feature:function(t,r){rW(t.geometry,r)},FeatureCollection:function(t,r){for(var n=t.features,o=-1,i=n.length;++o<i;)rW(n[o].geometry,r)}},EVe={Sphere:function(t,r){r.sphere()},Point:function(t,r){t=t.coordinates,r.point(t[0],t[1],t[2])},MultiPoint:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],r.point(t[0],t[1],t[2])},LineString:function(t,r){Fpe(t.coordinates,r,0)},MultiLineString:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)Fpe(n[o],r,0)},Polygon:function(t,r){TVe(t.coordinates,r)},MultiPolygon:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)TVe(n[o],r)},GeometryCollection:function(t,r){for(var n=t.geometries,o=-1,i=n.length;++o<i;)rW(n[o],r)}}});function wWt(){Ym.point=SWt}function _Wt(){IVe(AVe,kVe)}function SWt(t,r){Ym.point=IVe,AVe=t,kVe=r,t*=Hr,r*=Hr,Ope=t,Mpe=Kt(r=r/2+sN),Rpe=Yt(r)}function IVe(t,r){t*=Hr,r*=Hr,r=r/2+sN;var n=t-Ope,o=n>=0?1:-1,i=o*n,s=Kt(r),a=Yt(r),l=Rpe*a,u=Mpe*s+l*Kt(i),c=l*o*Yt(i);WL.add(ds(c,u)),Ope=t,Mpe=s,Rpe=a}function jpe(t){return nW=new zi,Kc(t,Ym),nW*2}var WL,nW,AVe,kVe,Ope,Mpe,Rpe,Ym,Ppe=D(()=>{"use strict";Vo();_n();a_();lN();WL=new zi,nW=new zi,Ym={point:Ii,lineStart:Ii,lineEnd:Ii,polygonStart:function(){WL=new zi,Ym.lineStart=wWt,Ym.lineEnd=_Wt},polygonEnd:function(){var t=+WL;nW.add(t<0?ks+t:t),this.lineStart=this.lineEnd=this.point=Ii},sphere:function(){nW.add(ks)}}});function WE(t){return[ds(t[1],t[0]),ki(t[2])]}function hp(t){var r=t[0],n=t[1],o=Kt(n);return[o*Kt(r),o*Yt(r),Yt(n)]}function qL(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function Kx(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}function oW(t,r){t[0]+=r[0],t[1]+=r[1],t[2]+=r[2]}function HL(t,r){return[t[0]*r,t[1]*r,t[2]*r]}function qE(t){var r=qo(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=r,t[1]/=r,t[2]/=r}var uN=D(()=>{"use strict";_n()});function Lpe(t,r){l_.push(Qx=[Ji=t,ps=t]),r<Zc&&(Zc=r),r>pd&&(pd=r)}function RVe(t,r){var n=hp([t*Hr,r*Hr]);if(cN){var o=Kx(cN,n),i=[o[1],-o[0],0],s=Kx(i,o);qE(s),s=WE(s);var a=t-HE,l=a>0?1:-1,u=s[0]*Wo*l,c,f=Yr(a)>180;f^(l*HE<u&&u<l*t)?(c=s[1]*Wo,c>pd&&(pd=c)):(u=(u+360)%360-180,f^(l*HE<u&&u<l*t)?(c=-s[1]*Wo,c<Zc&&(Zc=c)):(r<Zc&&(Zc=r),r>pd&&(pd=r))),f?t<HE?dd(Ji,t)>dd(Ji,ps)&&(ps=t):dd(t,ps)>dd(Ji,ps)&&(Ji=t):ps>=Ji?(t<Ji&&(Ji=t),t>ps&&(ps=t)):t>HE?dd(Ji,t)>dd(Ji,ps)&&(ps=t):dd(t,ps)>dd(Ji,ps)&&(Ji=t)}else l_.push(Qx=[Ji=t,ps=t]);r<Zc&&(Zc=r),r>pd&&(pd=r),cN=n,HE=t}function DVe(){Zx.point=RVe}function NVe(){Qx[0]=Ji,Qx[1]=ps,Zx.point=Lpe,cN=null}function jVe(t,r){if(cN){var n=t-HE;YL.add(Yr(n)>180?n+(n>0?360:-360):n)}else OVe=t,MVe=r;Ym.point(t,r),RVe(t,r)}function CWt(){Ym.lineStart()}function EWt(){jVe(OVe,MVe),Ym.lineEnd(),Yr(YL)>Zt&&(Ji=-(ps=180)),Qx[0]=Ji,Qx[1]=ps,cN=null}function dd(t,r){return(r-=t)<0?r+360:r}function TWt(t,r){return t[0]-r[0]}function FVe(t,r){return t[0]<=t[1]?t[0]<=r&&r<=t[1]:r<t[0]||t[1]<r}function Bpe(t){var r,n,o,i,s,a,l;if(pd=ps=-(Ji=Zc=1/0),l_=[],Kc(t,Zx),n=l_.length){for(l_.sort(TWt),r=1,o=l_[0],s=[o];r<n;++r)i=l_[r],FVe(o,i[0])||FVe(o,i[1])?(dd(o[0],i[1])>dd(o[0],o[1])&&(o[1]=i[1]),dd(i[0],o[1])>dd(o[0],o[1])&&(o[0]=i[0])):s.push(o=i);for(a=-1/0,n=s.length-1,r=0,o=s[n];r<=n;o=i,++r)i=s[r],(l=dd(o[1],i[0]))>a&&(a=l,Ji=i[0],ps=o[1])}return l_=Qx=null,Ji===1/0||Zc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ji,Zc],[ps,pd]]}var Ji,Zc,ps,pd,HE,OVe,MVe,cN,YL,l_,Qx,Zx,PVe=D(()=>{"use strict";Vo();Ppe();uN();_n();lN();Zx={point:Lpe,lineStart:DVe,lineEnd:NVe,polygonStart:function(){Zx.point=jVe,Zx.lineStart=CWt,Zx.lineEnd=EWt,YL=new zi,Ym.polygonStart()},polygonEnd:function(){Ym.polygonEnd(),Zx.point=Lpe,Zx.lineStart=DVe,Zx.lineEnd=NVe,WL<0?(Ji=-(ps=180),Zc=-(pd=90)):YL>Zt?pd=90:YL<-Zt&&(Zc=-90),Qx[0]=Ji,Qx[1]=ps},sphere:function(){Ji=-(ps=180),Zc=-(pd=90)}}});function Vpe(t,r){t*=Hr,r*=Hr;var n=Kt(r);KL(n*Kt(t),n*Yt(t),Yt(r))}function KL(t,r,n){++XL,sW+=(t-sW)/XL,aW+=(r-aW)/XL,lW+=(n-lW)/XL}function LVe(){Xm.point=AWt}function AWt(t,r){t*=Hr,r*=Hr;var n=Kt(r);lc=n*Kt(t),uc=n*Yt(t),cc=Yt(r),Xm.point=kWt,KL(lc,uc,cc)}function kWt(t,r){t*=Hr,r*=Hr;var n=Kt(r),o=n*Kt(t),i=n*Yt(t),s=Yt(r),a=ds(qo((a=uc*s-cc*i)*a+(a=cc*o-lc*s)*a+(a=lc*i-uc*o)*a),lc*o+uc*i+cc*s);iW+=a,uW+=a*(lc+(lc=o)),cW+=a*(uc+(uc=i)),fW+=a*(cc+(cc=s)),KL(lc,uc,cc)}function BVe(){Xm.point=Vpe}function IWt(){Xm.point=NWt}function DWt(){UVe($Ve,zVe),Xm.point=Vpe}function NWt(t,r){$Ve=t,zVe=r,t*=Hr,r*=Hr,Xm.point=UVe;var n=Kt(r);lc=n*Kt(t),uc=n*Yt(t),cc=Yt(r),KL(lc,uc,cc)}function UVe(t,r){t*=Hr,r*=Hr;var n=Kt(r),o=n*Kt(t),i=n*Yt(t),s=Yt(r),a=uc*s-cc*i,l=cc*o-lc*s,u=lc*i-uc*o,c=JG(a,l,u),f=ki(c),d=c&&-f/c;$pe.add(d*a),zpe.add(d*l),Upe.add(d*u),iW+=f,uW+=f*(lc+(lc=o)),cW+=f*(uc+(uc=i)),fW+=f*(cc+(cc=s)),KL(lc,uc,cc)}function Gpe(t){XL=iW=sW=aW=lW=uW=cW=fW=0,$pe=new zi,zpe=new zi,Upe=new zi,Kc(t,Xm);var r=+$pe,n=+zpe,o=+Upe,i=JG(r,n,o);return i<VE&&(r=uW,n=cW,o=fW,iW<Zt&&(r=sW,n=aW,o=lW),i=JG(r,n,o),i<VE)?[NaN,NaN]:[ds(n,r)*Wo,ki(o/i)*Wo]}var XL,iW,sW,aW,lW,uW,cW,fW,$pe,zpe,Upe,$Ve,zVe,lc,uc,cc,Xm,VVe=D(()=>{"use strict";Vo();_n();a_();lN();Xm={sphere:Ii,point:Vpe,lineStart:LVe,lineEnd:BVe,polygonStart:function(){Xm.lineStart=IWt,Xm.lineEnd=DWt},polygonEnd:function(){Xm.lineStart=LVe,Xm.lineEnd=BVe}}});function ZL(t,r){function n(o,i){return o=t(o,i),r(o[0],o[1])}return t.invert&&r.invert&&(n.invert=function(o,i){return o=r.invert(o,i),o&&t.invert(o[0],o[1])}),n}var Wpe=D(()=>{"use strict"});function qpe(t,r){return[Yr(t)>Kr?t+Math.round(-t/ks)*ks:t,r]}function Hpe(t,r,n){return(t%=ks)?r||n?ZL(WVe(t),qVe(r,n)):WVe(t):r||n?qVe(r,n):qpe}function GVe(t){return function(r,n){return r+=t,[r>Kr?r-ks:r<-Kr?r+ks:r,n]}}function WVe(t){var r=GVe(t);return r.invert=GVe(-t),r}function qVe(t,r){var n=Kt(t),o=Yt(t),i=Kt(r),s=Yt(r);function a(l,u){var c=Kt(u),f=Kt(l)*c,d=Yt(l)*c,p=Yt(u),m=p*n+f*o;return[ds(d*i-m*s,f*n-p*o),ki(m*i+d*s)]}return a.invert=function(l,u){var c=Kt(u),f=Kt(l)*c,d=Yt(l)*c,p=Yt(u),m=p*i-d*s;return[ds(d*i+p*s,f*n+m*o),ki(m*n-f*o)]},a}function HVe(t){t=Hpe(t[0]*Hr,t[1]*Hr,t.length>2?t[2]*Hr:0);function r(n){return n=t(n[0]*Hr,n[1]*Hr),n[0]*=Wo,n[1]*=Wo,n}return r.invert=function(n){return n=t.invert(n[0]*Hr,n[1]*Hr),n[0]*=Wo,n[1]*=Wo,n},r}var Ype=D(()=>{"use strict";Wpe();_n();qpe.invert=qpe});function XVe(t,r,n,o,i,s){if(n){var a=Kt(r),l=Yt(r),u=o*n;i==null?(i=r+o*ks,s=r-u/2):(i=YVe(a,i),s=YVe(a,s),(o>0?i<s:i>s)&&(i+=o*ks));for(var c,f=i;o>0?f>s:f<s;f-=u)c=WE([a,-l*Kt(f),-l*Yt(f)]),t.point(c[0],c[1])}}function YVe(t,r){r=hp(r),r[0]-=t,qE(r);var n=tW(-r[1]);return((-r[2]<0?-n:n)+ks-Zt)%ks}var KVe=D(()=>{"use strict";uN();_n()});function dW(){var t=[],r;return{point:function(n,o,i){r.push([n,o,i])},lineStart:function(){t.push(r=[])},lineEnd:Ii,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],r=null,n}}}var Xpe=D(()=>{"use strict";a_()});function fN(t,r){return Yr(t[0]-r[0])<Zt&&Yr(t[1]-r[1])<Zt}var Kpe=D(()=>{"use strict";_n()});function pW(t,r,n,o){this.x=t,this.z=r,this.o=n,this.e=o,this.v=!1,this.n=this.p=null}function mW(t,r,n,o,i){var s=[],a=[],l,u;if(t.forEach(function(h){if(!((g=h.length-1)<=0)){var g,y=h[0],b=h[g],x;if(fN(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),l=0;l<g;++l)i.point((y=h[l])[0],y[1]);i.lineEnd();return}b[0]+=2*Zt}s.push(x=new pW(y,h,null,!0)),a.push(x.o=new pW(y,null,x,!1)),s.push(x=new pW(b,h,null,!1)),a.push(x.o=new pW(b,null,x,!0))}}),!!s.length){for(a.sort(r),ZVe(s),ZVe(a),l=0,u=a.length;l<u;++l)a[l].e=n=!n;for(var c=s[0],f,d;;){for(var p=c,m=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(l=0,u=f.length;l<u;++l)i.point((d=f[l])[0],d[1]);else o(p.x,p.n.x,1,i);p=p.n}else{if(m)for(f=p.p.z,l=f.length-1;l>=0;--l)i.point((d=f[l])[0],d[1]);else o(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,m=!m}while(!p.v);i.lineEnd()}}}function ZVe(t){if(r=t.length){for(var r,n=0,o=t[0],i;++n<r;)o.n=i=t[n],i.p=o,o=i;o.n=i=t[0],i.p=o}}var Zpe=D(()=>{"use strict";Kpe();_n()});function Qpe(t){return Yr(t[0])<=Kr?t[0]:cu(t[0])*((Yr(t[0])+Kr)%ks-Kr)}function QVe(t,r){var n=Qpe(r),o=r[1],i=Yt(o),s=[Yt(n),-Kt(n),0],a=0,l=0,u=new zi;i===1?o=Go+Zt:i===-1&&(o=-Go-Zt);for(var c=0,f=t.length;c<f;++c)if(p=(d=t[c]).length)for(var d,p,m=d[p-1],h=Qpe(m),g=m[1]/2+sN,y=Yt(g),b=Kt(g),x=0;x<p;++x,h=w,y=C,b=S,m=v){var v=d[x],w=Qpe(v),_=v[1]/2+sN,C=Yt(_),S=Kt(_),E=w-h,A=E>=0?1:-1,N=A*E,k=N>Kr,M=y*C;if(u.add(ds(M*A*Yt(N),b*S+M*Kt(N))),a+=k?E+A*ks:E,k^h>=n^w>=n){var I=Kx(hp(m),hp(v));qE(I);var L=Kx(s,I);qE(L);var P=(k^E>=0?-1:1)*ki(L[2]);(o>P||o===P&&(I[0]||I[1]))&&(l+=k^E>=0?1:-1)}}return(a<-Zt||a<Zt&&u<-VE)^l&1}var JVe=D(()=>{"use strict";Vo();uN();_n()});function hW(t,r,n,o){return function(i){var s=r(i),a=dW(),l=r(a),u=!1,c,f,d,p={point:m,lineStart:g,lineEnd:y,polygonStart:function(){p.point=b,p.lineStart=x,p.lineEnd=v,f=[],c=[]},polygonEnd:function(){p.point=m,p.lineStart=g,p.lineEnd=y,f=rD(f);var w=QVe(c,o);f.length?(u||(i.polygonStart(),u=!0),mW(f,OWt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),f=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(w,_){t(w,_)&&i.point(w,_)}function h(w,_){s.point(w,_)}function g(){p.point=h,s.lineStart()}function y(){p.point=m,s.lineEnd()}function b(w,_){d.push([w,_]),l.point(w,_)}function x(){l.lineStart(),d=[]}function v(){b(d[0][0],d[0][1]),l.lineEnd();var w=l.clean(),_=a.result(),C,S=_.length,E,A,N;if(d.pop(),c.push(d),d=null,!!S){if(w&1){if(A=_[0],(E=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<E;++C)i.point((N=A[C])[0],N[1]);i.lineEnd()}return}S>1&&w&2&&_.push(_.pop().concat(_.shift())),f.push(_.filter(FWt))}}return p}}function FWt(t){return t.length>1}function OWt(t,r){return((t=t.x)[0]<0?t[1]-Go-Zt:Go-t[1])-((r=r.x)[0]<0?r[1]-Go-Zt:Go-r[1])}var Jpe=D(()=>{"use strict";Xpe();Zpe();_n();JVe();Vo()});function MWt(t){var r=NaN,n=NaN,o=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var l=s>0?Kr:-Kr,u=Yr(s-r);Yr(u-Kr)<Zt?(t.point(r,n=(n+a)/2>0?Go:-Go),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(s,n),i=0):o!==l&&u>=Kr&&(Yr(r-o)<Zt&&(r-=o*Zt),Yr(s-l)<Zt&&(s-=l*Zt),n=RWt(r,n,s,a),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(r=s,n=a),o=l},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-i}}}function RWt(t,r,n,o){var i,s,a=Yt(t-n);return Yr(a)>Zt?mp((Yt(r)*(s=Kt(o))*Yt(n)-Yt(o)*(i=Kt(r))*Yt(t))/(i*s*a)):(r+o)/2}function jWt(t,r,n,o){var i;if(t==null)i=n*Go,o.point(-Kr,i),o.point(0,i),o.point(Kr,i),o.point(Kr,0),o.point(Kr,-i),o.point(0,-i),o.point(-Kr,-i),o.point(-Kr,0),o.point(-Kr,i);else if(Yr(t[0]-r[0])>Zt){var s=t[0]<r[0]?Kr:-Kr;i=n*s/2,o.point(-s,i),o.point(0,i),o.point(s,i)}else o.point(r[0],r[1])}var eme,eGe=D(()=>{"use strict";Jpe();_n();eme=hW(function(){return!0},MWt,jWt,[-Kr,-Go])});function tGe(t){var r=Kt(t),n=6*Hr,o=r>0,i=Yr(r)>Zt;function s(f,d,p,m){XVe(m,t,n,p,f,d)}function a(f,d){return Kt(f)*Kt(d)>r}function l(f){var d,p,m,h,g;return{lineStart:function(){h=m=!1,g=1},point:function(y,b){var x=[y,b],v,w=a(y,b),_=o?w?0:c(y,b):w?c(y+(y<0?Kr:-Kr),b):0;if(!d&&(h=m=w)&&f.lineStart(),w!==m&&(v=u(d,x),(!v||fN(d,v)||fN(x,v))&&(x[2]=1)),w!==m)g=0,w?(f.lineStart(),v=u(x,d),f.point(v[0],v[1])):(v=u(d,x),f.point(v[0],v[1],2),f.lineEnd()),d=v;else if(i&&d&&o^w){var C;!(_&p)&&(C=u(x,d,!0))&&(g=0,o?(f.lineStart(),f.point(C[0][0],C[0][1]),f.point(C[1][0],C[1][1]),f.lineEnd()):(f.point(C[1][0],C[1][1]),f.lineEnd(),f.lineStart(),f.point(C[0][0],C[0][1],3)))}w&&(!d||!fN(d,x))&&f.point(x[0],x[1]),d=x,m=w,p=_},lineEnd:function(){m&&f.lineEnd(),d=null},clean:function(){return g|(h&&m)<<1}}}function u(f,d,p){var m=hp(f),h=hp(d),g=[1,0,0],y=Kx(m,h),b=qL(y,y),x=y[0],v=b-x*x;if(!v)return!p&&f;var w=r*b/v,_=-r*x/v,C=Kx(g,y),S=HL(g,w),E=HL(y,_);oW(S,E);var A=C,N=qL(S,A),k=qL(A,A),M=N*N-k*(qL(S,S)-1);if(!(M<0)){var I=qo(M),L=HL(A,(-N-I)/k);if(oW(L,S),L=WE(L),!p)return L;var P=f[0],R=d[0],V=f[1],G=d[1],U;R<P&&(U=P,P=R,R=U);var Y=R-P,X=Yr(Y-Kr)<Zt,pe=X||Y<Zt;if(!X&&G<V&&(U=V,V=G,G=U),pe?X?V+G>0^L[1]<(Yr(L[0]-P)<Zt?V:G):V<=L[1]&&L[1]<=G:Y>Kr^(P<=L[0]&&L[0]<=R)){var $=HL(A,(-N+I)/k);return oW($,S),[L,WE($)]}}}function c(f,d){var p=o?t:Kr-t,m=0;return f<-p?m|=1:f>p&&(m|=2),d<-p?m|=4:d>p&&(m|=8),m}return hW(a,l,s,o?[0,-t]:[-Kr,t-Kr])}var rGe=D(()=>{"use strict";uN();KVe();_n();Kpe();Jpe()});function nGe(t,r,n,o,i,s){var a=t[0],l=t[1],u=r[0],c=r[1],f=0,d=1,p=u-a,m=c-l,h;if(h=n-a,!(!p&&h>0)){if(h/=p,p<0){if(h<f)return;h<d&&(d=h)}else if(p>0){if(h>d)return;h>f&&(f=h)}if(h=i-a,!(!p&&h<0)){if(h/=p,p<0){if(h>d)return;h>f&&(f=h)}else if(p>0){if(h<f)return;h<d&&(d=h)}if(h=o-l,!(!m&&h>0)){if(h/=m,m<0){if(h<f)return;h<d&&(d=h)}else if(m>0){if(h>d)return;h>f&&(f=h)}if(h=s-l,!(!m&&h<0)){if(h/=m,m<0){if(h>d)return;h>f&&(f=h)}else if(m>0){if(h<f)return;h<d&&(d=h)}return f>0&&(t[0]=a+f*p,t[1]=l+f*m),d<1&&(r[0]=a+d*p,r[1]=l+d*m),!0}}}}}var oGe=D(()=>{"use strict"});function JL(t,r,n,o){function i(c,f){return t<=c&&c<=n&&r<=f&&f<=o}function s(c,f,d,p){var m=0,h=0;if(c==null||(m=a(c,d))!==(h=a(f,d))||u(c,f)<0^d>0)do p.point(m===0||m===3?t:n,m>1?o:r);while((m=(m+d+4)%4)!==h);else p.point(f[0],f[1])}function a(c,f){return Yr(c[0]-t)<Zt?f>0?0:3:Yr(c[0]-n)<Zt?f>0?2:1:Yr(c[1]-r)<Zt?f>0?1:0:f>0?3:2}function l(c,f){return u(c.x,f.x)}function u(c,f){var d=a(c,1),p=a(f,1);return d!==p?d-p:d===0?f[1]-c[1]:d===1?c[0]-f[0]:d===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,d=dW(),p,m,h,g,y,b,x,v,w,_,C,S={point:E,lineStart:M,lineEnd:I,polygonStart:N,polygonEnd:k};function E(P,R){i(P,R)&&f.point(P,R)}function A(){for(var P=0,R=0,V=m.length;R<V;++R)for(var G=m[R],U=1,Y=G.length,X=G[0],pe,$,F=X[0],z=X[1];U<Y;++U)pe=F,$=z,X=G[U],F=X[0],z=X[1],$<=o?z>o&&(F-pe)*(o-$)>(z-$)*(t-pe)&&++P:z<=o&&(F-pe)*(o-$)<(z-$)*(t-pe)&&--P;return P}function N(){f=d,p=[],m=[],C=!0}function k(){var P=A(),R=C&&P,V=(p=rD(p)).length;(R||V)&&(c.polygonStart(),R&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),V&&mW(p,l,P,s,c),c.polygonEnd()),f=c,p=m=h=null}function M(){S.point=L,m&&m.push(h=[]),_=!0,w=!1,x=v=NaN}function I(){p&&(L(g,y),b&&w&&d.rejoin(),p.push(d.result())),S.point=E,w&&f.lineEnd()}function L(P,R){var V=i(P,R);if(m&&h.push([P,R]),_)g=P,y=R,b=V,_=!1,V&&(f.lineStart(),f.point(P,R));else if(V&&w)f.point(P,R);else{var G=[x=Math.max(gW,Math.min(QL,x)),v=Math.max(gW,Math.min(QL,v))],U=[P=Math.max(gW,Math.min(QL,P)),R=Math.max(gW,Math.min(QL,R))];nGe(G,U,t,r,n,o)?(w||(f.lineStart(),f.point(G[0],G[1])),f.point(U[0],U[1]),V||f.lineEnd(),C=!1):V&&(f.lineStart(),f.point(P,R),C=!1)}x=P,v=R,w=V}return S}}var QL,gW,tme=D(()=>{"use strict";_n();Xpe();oGe();Zpe();Vo();QL=1e9,gW=-QL});function iGe(t,r,n){var o=qs(t,r-Zt,n).concat(r);return function(i){return o.map(function(s){return[i,s]})}}function sGe(t,r,n){var o=qs(t,r-Zt,n).concat(r);return function(i){return o.map(function(s){return[s,i]})}}function yW(){var t,r,n,o,i,s,a,l,u=10,c=u,f=90,d=360,p,m,h,g,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return qs(GL(o/f)*f,n,f).map(h).concat(qs(GL(l/d)*d,a,d).map(g)).concat(qs(GL(r/u)*u,t,u).filter(function(v){return Yr(v%f)>Zt}).map(p)).concat(qs(GL(s/c)*c,i,c).filter(function(v){return Yr(v%d)>Zt}).map(m))}return b.lines=function(){return x().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(g(a).slice(1),h(n).reverse().slice(1),g(l).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(o=+v[0][0],n=+v[1][0],l=+v[0][1],a=+v[1][1],o>n&&(v=o,o=n,n=v),l>a&&(v=l,l=a,a=v),b.precision(y)):[[o,l],[n,a]]},b.extentMinor=function(v){return arguments.length?(r=+v[0][0],t=+v[1][0],s=+v[0][1],i=+v[1][1],r>t&&(v=r,r=t,t=v),s>i&&(v=s,s=i,i=v),b.precision(y)):[[r,s],[t,i]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(f=+v[0],d=+v[1],b):[f,d]},b.stepMinor=function(v){return arguments.length?(u=+v[0],c=+v[1],b):[u,c]},b.precision=function(v){return arguments.length?(y=+v,p=iGe(s,i,90),m=sGe(r,t,y),h=iGe(l,a,90),g=sGe(o,n,y),b):y},b.extentMajor([[-180,-90+Zt],[180,90-Zt]]).extentMinor([[-180,-80-Zt],[180,80+Zt]])}var aGe=D(()=>{"use strict";Vo();_n()});var u_,bW=D(()=>{"use strict";u_=t=>t});function PWt(){c_.point=LWt}function LWt(t,r){c_.point=cGe,lGe=ome=t,uGe=ime=r}function cGe(t,r){nme.add(ime*t-ome*r),ome=t,ime=r}function BWt(){cGe(lGe,uGe)}var rme,nme,lGe,uGe,ome,ime,c_,sme,fGe=D(()=>{"use strict";Vo();_n();a_();rme=new zi,nme=new zi,c_={point:Ii,lineStart:Ii,lineEnd:Ii,polygonStart:function(){c_.lineStart=PWt,c_.lineEnd=BWt},polygonEnd:function(){c_.lineStart=c_.lineEnd=c_.point=Ii,rme.add(Yr(nme)),nme=new zi},result:function(){var t=rme/2;return rme=new zi,t}};sme=c_});function zWt(t,r){t<dN&&(dN=t),t>e4&&(e4=t),r<xW&&(xW=r),r>vW&&(vW=r)}var dN,xW,e4,vW,$Wt,pN,ame=D(()=>{"use strict";a_();dN=1/0,xW=dN,e4=-dN,vW=e4,$Wt={point:zWt,lineStart:Ii,lineEnd:Ii,polygonStart:Ii,polygonEnd:Ii,result:function(){var t=[[dN,xW],[e4,vW]];return e4=vW=-(xW=dN=1/0),t}};pN=$Wt});function YE(t,r){lme+=t,ume+=r,++t4}function dGe(){Km.point=UWt}function UWt(t,r){Km.point=VWt,YE(ry=t,ny=r)}function VWt(t,r){var n=t-ry,o=r-ny,i=qo(n*n+o*o);wW+=i*(ry+t)/2,_W+=i*(ny+r)/2,mN+=i,YE(ry=t,ny=r)}function pGe(){Km.point=YE}function GWt(){Km.point=qWt}function WWt(){gGe(mGe,hGe)}function qWt(t,r){Km.point=gGe,YE(mGe=ry=t,hGe=ny=r)}function gGe(t,r){var n=t-ry,o=r-ny,i=qo(n*n+o*o);wW+=i*(ry+t)/2,_W+=i*(ny+r)/2,mN+=i,i=ny*t-ry*r,cme+=i*(ry+t),fme+=i*(ny+r),r4+=i*3,YE(ry=t,ny=r)}var lme,ume,t4,wW,_W,mN,cme,fme,r4,mGe,hGe,ry,ny,Km,dme,yGe=D(()=>{"use strict";_n();lme=0,ume=0,t4=0,wW=0,_W=0,mN=0,cme=0,fme=0,r4=0,Km={point:YE,lineStart:dGe,lineEnd:pGe,polygonStart:function(){Km.lineStart=GWt,Km.lineEnd=WWt},polygonEnd:function(){Km.point=YE,Km.lineStart=dGe,Km.lineEnd=pGe},result:function(){var t=r4?[cme/r4,fme/r4]:mN?[wW/mN,_W/mN]:t4?[lme/t4,ume/t4]:[NaN,NaN];return lme=ume=t4=wW=_W=mN=cme=fme=r4=0,t}};dme=Km});function SW(t){this._context=t}var bGe=D(()=>{"use strict";_n();a_();SW.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._context.moveTo(t,r),this._point=1;break}case 1:{this._context.lineTo(t,r);break}default:{this._context.moveTo(t+this._radius,r),this._context.arc(t,r,this._radius,0,ks);break}}},result:Ii}});function HWt(t,r){CW.point=wGe,xGe=n4=t,vGe=o4=r}function wGe(t,r){n4-=t,o4-=r,mme.add(qo(n4*n4+o4*o4)),n4=t,o4=r}var mme,pme,xGe,vGe,n4,o4,CW,hme,_Ge=D(()=>{"use strict";Vo();_n();a_();mme=new zi,CW={point:Ii,lineStart:function(){CW.point=HWt},lineEnd:function(){pme&&wGe(xGe,vGe),CW.point=Ii},polygonStart:function(){pme=!0},polygonEnd:function(){pme=null},result:function(){var t=+mme;return mme=new zi,t}};hme=CW});function EW(){this._string=[]}function SGe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var CGe=D(()=>{"use strict";EW.prototype={_radius:4.5,_circle:SGe(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._string.push("M",t,",",r),this._point=1;break}case 1:{this._string.push("L",t,",",r);break}default:{this._circle==null&&(this._circle=SGe(this._radius)),this._string.push("M",t,",",r,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}}});function TW(t,r){var n=4.5,o,i;function s(a){return a&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Kc(a,o(i))),i.result()}return s.area=function(a){return Kc(a,o(sme)),sme.result()},s.measure=function(a){return Kc(a,o(hme)),hme.result()},s.bounds=function(a){return Kc(a,o(pN)),pN.result()},s.centroid=function(a){return Kc(a,o(dme)),dme.result()},s.projection=function(a){return arguments.length?(o=a==null?(t=null,u_):(t=a).stream,s):t},s.context=function(a){return arguments.length?(i=a==null?(r=null,new EW):new SW(r=a),typeof n!="function"&&i.pointRadius(n),s):r},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(i.pointRadius(+a),+a),s):n},s.projection(t).context(r)}var EGe=D(()=>{"use strict";bW();lN();fGe();ame();yGe();bGe();_Ge();CGe()});function XE(t){return function(r){var n=new gme;for(var o in t)n[o]=t[o];return n.stream=r,n}}function gme(){}var AW=D(()=>{"use strict";gme.prototype={constructor:gme,point:function(t,r){this.stream.point(t,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}});function yme(t,r,n){var o=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),o!=null&&t.clipExtent(null),Kc(n,t.stream(pN)),r(pN.result()),o!=null&&t.clipExtent(o),t}function KE(t,r,n){return yme(t,function(o){var i=r[1][0]-r[0][0],s=r[1][1]-r[0][1],a=Math.min(i/(o[1][0]-o[0][0]),s/(o[1][1]-o[0][1])),l=+r[0][0]+(i-a*(o[1][0]+o[0][0]))/2,u=+r[0][1]+(s-a*(o[1][1]+o[0][1]))/2;t.scale(150*a).translate([l,u])},n)}function hN(t,r,n){return KE(t,[[0,0],r],n)}function gN(t,r,n){return yme(t,function(o){var i=+r,s=i/(o[1][0]-o[0][0]),a=(i-s*(o[1][0]+o[0][0]))/2,l=-s*o[0][1];t.scale(150*s).translate([a,l])},n)}function yN(t,r,n){return yme(t,function(o){var i=+r,s=i/(o[1][1]-o[0][1]),a=-s*o[0][0],l=(i-s*(o[1][1]+o[0][1]))/2;t.scale(150*s).translate([a,l])},n)}var kW=D(()=>{"use strict";lN();ame()});function bme(t,r){return+r?KWt(t,r):XWt(t)}function XWt(t){return XE({point:function(r,n){r=t(r,n),this.stream.point(r[0],r[1])}})}function KWt(t,r){function n(o,i,s,a,l,u,c,f,d,p,m,h,g,y){var b=c-o,x=f-i,v=b*b+x*x;if(v>4*r&&g--){var w=a+p,_=l+m,C=u+h,S=qo(w*w+_*_+C*C),E=ki(C/=S),A=Yr(Yr(C)-1)<Zt||Yr(s-d)<Zt?(s+d)/2:ds(_,w),N=t(A,E),k=N[0],M=N[1],I=k-o,L=M-i,P=x*I-b*L;(P*P/v>r||Yr((b*I+x*L)/v-.5)>.3||a*p+l*m+u*h<YWt)&&(n(o,i,s,a,l,u,k,M,A,w/=S,_/=S,C,g,y),y.point(k,M),n(k,M,A,w,_,C,c,f,d,p,m,h,g,y))}}return function(o){var i,s,a,l,u,c,f,d,p,m,h,g,y={point:b,lineStart:x,lineEnd:w,polygonStart:function(){o.polygonStart(),y.lineStart=_},polygonEnd:function(){o.polygonEnd(),y.lineStart=x}};function b(E,A){E=t(E,A),o.point(E[0],E[1])}function x(){d=NaN,y.point=v,o.lineStart()}function v(E,A){var N=hp([E,A]),k=t(E,A);n(d,p,f,m,h,g,d=k[0],p=k[1],f=E,m=N[0],h=N[1],g=N[2],TGe,o),o.point(d,p)}function w(){y.point=b,o.lineEnd()}function _(){x(),y.point=C,y.lineEnd=S}function C(E,A){v(i=E,A),s=d,a=p,l=m,u=h,c=g,y.point=v}function S(){n(d,p,f,m,h,g,s,a,i,l,u,c,TGe,o),y.lineEnd=w,w()}return y}}var TGe,YWt,AGe=D(()=>{"use strict";uN();_n();AW();TGe=16,YWt=Kt(30*Hr)});function QWt(t){return XE({point:function(r,n){var o=t(r,n);return this.stream.point(o[0],o[1])}})}function JWt(t,r,n,o,i){function s(a,l){return a*=o,l*=i,[r+t*a,n-t*l]}return s.invert=function(a,l){return[(a-r)/t*o,(n-l)/t*i]},s}function kGe(t,r,n,o,i,s){if(!s)return JWt(t,r,n,o,i);var a=Kt(s),l=Yt(s),u=a*t,c=l*t,f=a/t,d=l/t,p=(l*n-a*r)/t,m=(l*r+a*n)/t;function h(g,y){return g*=o,y*=i,[u*g-c*y+r,n-c*g-u*y]}return h.invert=function(g,y){return[o*(f*g-d*y+p),i*(m-d*g-f*y)]},h}function ms(t){return IW(function(){return t})()}function IW(t){var r,n=150,o=480,i=250,s=0,a=0,l=0,u=0,c=0,f,d=0,p=1,m=1,h=null,g=eme,y=null,b,x,v,w=u_,_=.5,C,S,E,A,N;function k(P){return E(P[0]*Hr,P[1]*Hr)}function M(P){return P=E.invert(P[0],P[1]),P&&[P[0]*Wo,P[1]*Wo]}k.stream=function(P){return A&&N===P?A:A=ZWt(QWt(f)(g(C(w(N=P)))))},k.preclip=function(P){return arguments.length?(g=P,h=void 0,L()):g},k.postclip=function(P){return arguments.length?(w=P,y=b=x=v=null,L()):w},k.clipAngle=function(P){return arguments.length?(g=+P?tGe(h=P*Hr):(h=null,eme),L()):h*Wo},k.clipExtent=function(P){return arguments.length?(w=P==null?(y=b=x=v=null,u_):JL(y=+P[0][0],b=+P[0][1],x=+P[1][0],v=+P[1][1]),L()):y==null?null:[[y,b],[x,v]]},k.scale=function(P){return arguments.length?(n=+P,I()):n},k.translate=function(P){return arguments.length?(o=+P[0],i=+P[1],I()):[o,i]},k.center=function(P){return arguments.length?(s=P[0]%360*Hr,a=P[1]%360*Hr,I()):[s*Wo,a*Wo]},k.rotate=function(P){return arguments.length?(l=P[0]%360*Hr,u=P[1]%360*Hr,c=P.length>2?P[2]%360*Hr:0,I()):[l*Wo,u*Wo,c*Wo]},k.angle=function(P){return arguments.length?(d=P%360*Hr,I()):d*Wo},k.reflectX=function(P){return arguments.length?(p=P?-1:1,I()):p<0},k.reflectY=function(P){return arguments.length?(m=P?-1:1,I()):m<0},k.precision=function(P){return arguments.length?(C=bme(S,_=P*P),L()):qo(_)},k.fitExtent=function(P,R){return KE(k,P,R)},k.fitSize=function(P,R){return hN(k,P,R)},k.fitWidth=function(P,R){return gN(k,P,R)},k.fitHeight=function(P,R){return yN(k,P,R)};function I(){var P=kGe(n,0,0,p,m,d).apply(null,r(s,a)),R=kGe(n,o-P[0],i-P[1],p,m,d);return f=Hpe(l,u,c),S=ZL(r,R),E=ZL(f,S),C=bme(S,_),L()}function L(){return A=N=null,k}return function(){return r=t.apply(this,arguments),k.invert=r.invert&&M,I()}}var ZWt,gp=D(()=>{"use strict";eGe();rGe();tme();Wpe();bW();_n();Ype();AW();kW();AGe();ZWt=XE({point:function(t,r){this.stream.point(t*Hr,r*Hr)}})});function bN(t){var r=0,n=Kr/3,o=IW(t),i=o(r,n);return i.parallels=function(s){return arguments.length?o(r=s[0]*Hr,n=s[1]*Hr):[r*Wo,n*Wo]},i}var DW=D(()=>{"use strict";_n();gp()});function IGe(t){var r=Kt(t);function n(o,i){return[o*r,Yt(i)/r]}return n.invert=function(o,i){return[o/r,ki(i*r)]},n}var DGe=D(()=>{"use strict";_n()});function NGe(t,r){var n=Yt(t),o=(n+Yt(r))/2;if(Yr(o)<Zt)return IGe(t);var i=1+n*(2*o-n),s=qo(i)/o;function a(l,u){var c=qo(i-2*o*Yt(u))/o;return[c*Yt(l*=o),s-c*Kt(l)]}return a.invert=function(l,u){var c=s-u,f=ds(l,Yr(c))*cu(c);return c*o<0&&(f-=Kr*cu(l)*cu(c)),[f/o,ki((i-(l*l+c*c)*o*o)/(2*o))]},a}function f_(){return bN(NGe).scale(155.424).center([0,33.6442])}var NW=D(()=>{"use strict";_n();DW();DGe()});function i4(){return f_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var xme=D(()=>{"use strict";NW()});function eqt(t){var r=t.length;return{point:function(n,o){for(var i=-1;++i<r;)t[i].point(n,o)},sphere:function(){for(var n=-1;++n<r;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<r;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<r;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<r;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<r;)t[n].polygonEnd()}}}function vme(){var t,r,n=i4(),o,i=f_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=f_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,c={point:function(p,m){u=[p,m]}};function f(p){var m=p[0],h=p[1];return u=null,o.point(m,h),u||(s.point(m,h),u)||(l.point(m,h),u)}f.invert=function(p){var m=n.scale(),h=n.translate(),g=(p[0]-h[0])/m,y=(p[1]-h[1])/m;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(p)},f.stream=function(p){return t&&r===p?t:t=eqt([n.stream(r=p),i.stream(p),a.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),a.precision(p),d()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),a.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var m=n.scale(),h=+p[0],g=+p[1];return o=n.translate(p).clipExtent([[h-.455*m,g-.238*m],[h+.455*m,g+.238*m]]).stream(c),s=i.translate([h-.307*m,g+.201*m]).clipExtent([[h-.425*m+Zt,g+.12*m+Zt],[h-.214*m-Zt,g+.234*m-Zt]]).stream(c),l=a.translate([h-.205*m,g+.212*m]).clipExtent([[h-.214*m+Zt,g+.166*m+Zt],[h-.115*m-Zt,g+.234*m-Zt]]).stream(c),d()},f.fitExtent=function(p,m){return KE(f,p,m)},f.fitSize=function(p,m){return hN(f,p,m)},f.fitWidth=function(p,m){return gN(f,p,m)},f.fitHeight=function(p,m){return yN(f,p,m)};function d(){return t=r=null,f}return f.scale(1070)}var FGe=D(()=>{"use strict";_n();xme();NW();kW()});function FW(t){return function(r,n){var o=Kt(r),i=Kt(n),s=t(o*i);return s===1/0?[2,0]:[s*i*Yt(r),s*Yt(n)]}}function oy(t){return function(r,n){var o=qo(r*r+n*n),i=t(o),s=Yt(i),a=Kt(i);return[ds(r*s,o*a),ki(o&&n*s/o)]}}var xN=D(()=>{"use strict";_n()});function _me(){return ms(wme).scale(124.75).clipAngle(180-.001)}var wme,OGe=D(()=>{"use strict";_n();xN();gp();wme=FW(function(t){return qo(2/(1+t))});wme.invert=oy(function(t){return 2*ki(t/2)})});function Cme(){return ms(Sme).scale(79.4188).clipAngle(180-.001)}var Sme,MGe=D(()=>{"use strict";_n();xN();gp();Sme=FW(function(t){return(t=tW(t))&&t/Yt(t)});Sme.invert=oy(function(t){return t})});function vN(t,r){return[t,GE(aN((Go+r)/2))]}function Eme(){return Tme(vN).scale(961/ks)}function Tme(t){var r=ms(t),n=r.center,o=r.scale,i=r.translate,s=r.clipExtent,a=null,l,u,c;r.scale=function(d){return arguments.length?(o(d),f()):o()},r.translate=function(d){return arguments.length?(i(d),f()):i()},r.center=function(d){return arguments.length?(n(d),f()):n()},r.clipExtent=function(d){return arguments.length?(d==null?a=l=u=c=null:(a=+d[0][0],l=+d[0][1],u=+d[1][0],c=+d[1][1]),f()):a==null?null:[[a,l],[u,c]]};function f(){var d=Kr*o(),p=r(HVe(r.rotate()).invert([0,0]));return s(a==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:t===vN?[[Math.max(p[0]-d,a),l],[Math.min(p[0]+d,u),c]]:[[a,Math.max(p[1]-d,l)],[u,Math.min(p[1]+d,c)]])}return f()}var OW=D(()=>{"use strict";_n();Ype();gp();vN.invert=function(t,r){return[t,2*mp(QG(r))-Go]}});function MW(t){return aN((Go+t)/2)}function RGe(t,r){var n=Kt(t),o=t===r?Yt(t):GE(n/Kt(r))/GE(MW(r)/MW(t)),i=n*eW(MW(t),o)/o;if(!o)return vN;function s(a,l){i>0?l<-Go+Zt&&(l=-Go+Zt):l>Go-Zt&&(l=Go-Zt);var u=i/eW(MW(l),o);return[u*Yt(o*a),i-u*Kt(o*a)]}return s.invert=function(a,l){var u=i-l,c=cu(o)*qo(a*a+u*u),f=ds(a,Yr(u))*cu(u);return u*o<0&&(f-=Kr*cu(a)*cu(u)),[f/o,2*mp(eW(i/c,1/o))-Go]},s}function Ame(){return bN(RGe).scale(109.5).parallels([30,30])}var jGe=D(()=>{"use strict";_n();DW();OW()});function wN(t,r){return[t,r]}function kme(){return ms(wN).scale(152.63)}var Ime=D(()=>{"use strict";gp();wN.invert=wN});function PGe(t,r){var n=Kt(t),o=t===r?Yt(t):(n-Kt(r))/(r-t),i=n/o+t;if(Yr(o)<Zt)return wN;function s(a,l){var u=i-l,c=o*a;return[u*Yt(c),i-u*Kt(c)]}return s.invert=function(a,l){var u=i-l,c=ds(a,Yr(u))*cu(u);return u*o<0&&(c-=Kr*cu(a)*cu(u)),[c/o,i-cu(o)*qo(a*a+u*u)]},s}function Dme(){return bN(PGe).scale(131.154).center([0,13.9389])}var LGe=D(()=>{"use strict";_n();DW();Ime()});function Nme(t,r){var n=ki(RW*Yt(r)),o=n*n,i=o*o*o;return[t*Kt(n)/(RW*(s4+3*a4*o+i*(7*l4+9*u4*o))),n*(s4+a4*o+i*(l4+u4*o))]}function Fme(){return ms(Nme).scale(177.158)}var s4,a4,l4,u4,RW,tqt,BGe=D(()=>{"use strict";gp();_n();s4=1.340264,a4=-.081106,l4=893e-6,u4=.003796,RW=qo(3)/2,tqt=12;Nme.invert=function(t,r){for(var n=r,o=n*n,i=o*o*o,s=0,a,l,u;s<tqt&&(l=n*(s4+a4*o+i*(l4+u4*o))-r,u=s4+3*a4*o+i*(7*l4+9*u4*o),n-=a=l/u,o=n*n,i=o*o*o,!(Yr(a)<VE));++s);return[RW*t*(s4+3*a4*o+i*(7*l4+9*u4*o))/Kt(n),ki(Yt(n)/RW)]}});function Ome(t,r){var n=Kt(r),o=Kt(t)*n;return[n*Yt(t)/o,Yt(r)/o]}function Mme(){return ms(Ome).scale(144.049).clipAngle(60)}var $Ge=D(()=>{"use strict";_n();xN();gp();Ome.invert=oy(mp)});function Rme(){var t=1,r=0,n=0,o=1,i=1,s=0,a,l,u=null,c,f,d,p=1,m=1,h=XE({point:function(w,_){var C=v([w,_]);this.stream.point(C[0],C[1])}}),g=u_,y,b;function x(){return p=t*o,m=t*i,y=b=null,v}function v(w){var _=w[0]*p,C=w[1]*m;if(s){var S=C*a-_*l;_=_*a+C*l,C=S}return[_+r,C+n]}return v.invert=function(w){var _=w[0]-r,C=w[1]-n;if(s){var S=C*a+_*l;_=_*a-C*l,C=S}return[_/p,C/m]},v.stream=function(w){return y&&b===w?y:y=h(g(b=w))},v.postclip=function(w){return arguments.length?(g=w,u=c=f=d=null,x()):g},v.clipExtent=function(w){return arguments.length?(g=w==null?(u=c=f=d=null,u_):JL(u=+w[0][0],c=+w[0][1],f=+w[1][0],d=+w[1][1]),x()):u==null?null:[[u,c],[f,d]]},v.scale=function(w){return arguments.length?(t=+w,x()):t},v.translate=function(w){return arguments.length?(r=+w[0],n=+w[1],x()):[r,n]},v.angle=function(w){return arguments.length?(s=w%360*Hr,l=Yt(s),a=Kt(s),x()):s*Wo},v.reflectX=function(w){return arguments.length?(o=w?-1:1,x()):o<0},v.reflectY=function(w){return arguments.length?(i=w?-1:1,x()):i<0},v.fitExtent=function(w,_){return KE(v,w,_)},v.fitSize=function(w,_){return hN(v,w,_)},v.fitWidth=function(w,_){return gN(v,w,_)},v.fitHeight=function(w,_){return yN(v,w,_)},v}var zGe=D(()=>{"use strict";tme();bW();AW();kW();_n()});function jme(t,r){var n=r*r,o=n*n;return[t*(.8707-.131979*n+o*(-.013791+o*(.003971*n-.001529*o))),r*(1.007226+n*(.015085+o*(-.044475+.028874*n-.005916*o)))]}function Pme(){return ms(jme).scale(175.295)}var UGe=D(()=>{"use strict";gp();_n();jme.invert=function(t,r){var n=r,o=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-r)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Yr(i)>Zt&&--o>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]}});function Lme(t,r){return[Kt(r)*Yt(t),Yt(r)]}function Bme(){return ms(Lme).scale(249.5).clipAngle(90+Zt)}var VGe=D(()=>{"use strict";_n();xN();gp();Lme.invert=oy(ki)});function $me(t,r){var n=Kt(r),o=1+Kt(t)*n;return[n*Yt(t)/o,Yt(r)/o]}function zme(){return ms($me).scale(250).clipAngle(142)}var GGe=D(()=>{"use strict";_n();xN();gp();$me.invert=oy(function(t){return 2*mp(t)})});function Ume(t,r){return[GE(aN((Go+r)/2)),-t]}function Vme(){var t=Tme(Ume),r=t.center,n=t.rotate;return t.center=function(o){return arguments.length?r([-o[1],o[0]]):(o=r(),[o[1],-o[0]])},t.rotate=function(o){return arguments.length?n([o[0],o[1],o.length>2?o[2]+90:90]):(o=n(),[o[0],o[1],o[2]-90])},n([0,0,90]).scale(159.155)}var WGe=D(()=>{"use strict";_n();OW();Ume.invert=function(t,r){return[-r,2*mp(QG(t))-Go]}});var c4=D(()=>{"use strict";Ppe();PVe();VVe();aGe();EGe();xme();FGe();OGe();MGe();jGe();NW();LGe();BGe();Ime();$Ge();zGe();gp();OW();UGe();VGe();GGe();WGe()});function Wme(t){return t>1?jW:t<-1?-jW:Math.asin(t)}function YGe(t){return t>0?Math.sqrt(t):0}var qGe,PW,f4,HGe,d_,jW,Y5n,Gme,X5n,K5n,Z5n,Q5n,XGe=D(()=>{"use strict";qGe=Math.abs,PW=Math.cos,f4=Math.sin,HGe=1e-6,d_=Math.PI,jW=d_/2,Y5n=d_/4,Gme=YGe(2),X5n=YGe(d_),K5n=d_*2,Z5n=180/d_,Q5n=d_/180});function rqt(t,r){var n=t*f4(r),o=30,i;do r-=i=(r+f4(r)-n)/(1+PW(r));while(qGe(i)>HGe&&--o>0);return r/2}function nqt(t,r,n){function o(i,s){return[t*i*PW(s=rqt(n,s)),r*f4(s)]}return o.invert=function(i,s){return s=Wme(s/r),[i/(t*PW(s)),Wme((2*s+f4(2*s))/n)]},o}function qme(){return ms(KGe).scale(169.529)}var KGe,ZGe=D(()=>{"use strict";c4();XGe();KGe=nqt(Gme/jW,Gme,d_)});var QGe=D(()=>{"use strict";ZGe()});function iqt(t,r){return function n(){let o=r();return o.type=t,o.path=TW().projection(o),o.copy=o.copy||function(){let i=n();return BW.forEach(s=>{o[s]&&i[s](o[s]())}),i.path.pointRadius(o.path.pointRadius()),i},o}}function d4(t,r){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(LW[t]=iqt(t,r),this):LW[t]||null}function Hme(t){return t&&t.path||oqt}var oqt,BW,LW,Yme=D(()=>{"use strict";c4();QGe();oqt=TW(),BW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];LW={albers:i4,albersusa:vme,azimuthalequalarea:_me,azimuthalequidistant:Cme,conicconformal:Ame,conicequalarea:f_,conicequidistant:Dme,equalEarth:Fme,equirectangular:kme,gnomonic:Mme,identity:Rme,mercator:Eme,mollweide:qme,naturalEarth1:Pme,orthographic:Bme,stereographic:zme,transversemercator:Vme};for(let t in LW)d4(t,LW[t])});var ahe={};cn(ahe,{contour:()=>Jme,geojson:()=>the,geopath:()=>rhe,geopoint:()=>nhe,geoshape:()=>ohe,graticule:()=>ihe,heatmap:()=>she,isocontour:()=>Zme,kde2d:()=>Qme,projection:()=>aWe});function sqt(){}function tWe(){var t=1,r=1,n=l;function o(u,c){return c.map(f=>i(u,f))}function i(u,c){var f=[],d=[];return s(u,c,p=>{n(p,u,c),aqt(p)>0?f.push([p]):d.push(p)}),d.forEach(p=>{for(var m=0,h=f.length,g;m<h;++m)if(lqt((g=f[m])[0],p)!==-1){g.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:f}}function s(u,c,f){var d=new Array,p=new Array,m,h,g,y,b,x;for(m=h=-1,y=u[0]>=c,Jx[y<<1].forEach(v);++m<t-1;)g=y,y=u[m+1]>=c,Jx[g|y<<1].forEach(v);for(Jx[y<<0].forEach(v);++h<r-1;){for(m=-1,y=u[h*t+t]>=c,b=u[h*t]>=c,Jx[y<<1|b<<2].forEach(v);++m<t-1;)g=y,y=u[h*t+t+m+1]>=c,x=b,b=u[h*t+m+1]>=c,Jx[g|y<<1|b<<2|x<<3].forEach(v);Jx[y|b<<3].forEach(v)}for(m=-1,b=u[h*t]>=c,Jx[b<<2].forEach(v);++m<t-1;)x=b,b=u[h*t+m+1]>=c,Jx[b<<2|x<<3].forEach(v);Jx[b<<3].forEach(v);function v(w){var _=[w[0][0]+m,w[0][1]+h],C=[w[1][0]+m,w[1][1]+h],S=a(_),E=a(C),A,N;(A=p[S])?(N=d[E])?(delete p[A.end],delete d[N.start],A===N?(A.ring.push(C),f(A.ring)):d[A.start]=p[N.end]={start:A.start,end:N.end,ring:A.ring.concat(N.ring)}):(delete p[A.end],A.ring.push(C),p[A.end=E]=A):(A=d[E])?(N=p[S])?(delete d[A.start],delete p[N.end],A===N?(A.ring.push(C),f(A.ring)):d[N.start]=p[A.end]={start:N.start,end:A.end,ring:N.ring.concat(A.ring)}):(delete d[A.start],A.ring.unshift(_),d[A.start=S]=A):d[S]=p[E]={start:S,end:E,ring:[_,C]}}}function a(u){return u[0]*2+u[1]*(t+1)*4}function l(u,c,f){u.forEach(d=>{var p=d[0],m=d[1],h=p|0,g=m|0,y,b=c[g*t+h];p>0&&p<t&&h===p&&(y=c[g*t+h-1],d[0]=p+(f-y)/(b-y)-.5),m>0&&m<r&&g===m&&(y=c[(g-1)*t+h],d[1]=m+(f-y)/(b-y)-.5)})}return o.contour=i,o.size=function(u){if(!arguments.length)return[t,r];var c=Math.floor(u[0]),f=Math.floor(u[1]);return c>=0&&f>=0||pt("invalid size"),t=c,r=f,o},o.smooth=function(u){return arguments.length?(n=u?l:sqt,o):n===l},o}function aqt(t){for(var r=0,n=t.length,o=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++r<n;)o+=t[r-1][1]*t[r][0]-t[r-1][0]*t[r][1];return o}function lqt(t,r){for(var n=-1,o=r.length,i;++n<o;)if(i=uqt(t,r[n]))return i;return 0}function uqt(t,r){for(var n=r[0],o=r[1],i=-1,s=0,a=t.length,l=a-1;s<a;l=s++){var u=t[s],c=u[0],f=u[1],d=t[l],p=d[0],m=d[1];if(cqt(u,d,r))return 0;f>o!=m>o&&n<(p-c)*(o-f)/(m-f)+c&&(i=-i)}return i}function cqt(t,r,n){var o;return fqt(t,r,n)&&dqt(t[o=+(t[0]===r[0])],n[o],r[o])}function fqt(t,r,n){return(r[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(r[1]-t[1])}function dqt(t,r,n){return t<=r&&r<=n||n<=r&&r<=t}function rWe(t,r,n){return function(o){var i=Em(o),s=n?Math.min(i[0],0):i[0],a=i[1],l=a-s,u=r?Zu(s,a,t):l/(t+1);return qs(s+u,a,u)}}function Zme(t){et.call(this,null,t)}function pqt(t,r,n){let o=rWe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?o:o(t.map(i=>tp(r(i).values)))}function mqt(t,r,n,o){let i=o.scale||r.scale,s=o.translate||r.translate;if(Tn(i)&&(i=i(n,o)),Tn(s)&&(s=s(n,o)),(i===1||i==null)&&!s)return;let a=(S0(i)?i:i[0])||1,l=(S0(i)?i:i[1])||1,u=s&&s[0]||0,c=s&&s[1]||0;t.forEach(nWe(r,a,l,u,c))}function nWe(t,r,n,o,i){let s=t.x1||0,a=t.y1||0,l=r*n<0;function u(d){d.forEach(c)}function c(d){l&&d.reverse(),d.forEach(f)}function f(d){d[0]=(d[0]-s)*r+o,d[1]=(d[1]-a)*n+i}return function(d){return d.coordinates.forEach(u),d}}function JGe(t,r,n){let o=t>=0?t:t9(r,n);return Math.round((Math.sqrt(4*o*o+1)-1)/2)}function Xme(t){return Tn(t)?t:Ga(+t)}function oWe(){var t=u=>u[0],r=u=>u[1],n=w0,o=[-1,-1],i=960,s=500,a=2;function l(u,c){let f=JGe(o[0],u,t)>>a,d=JGe(o[1],u,r)>>a,p=f?f+2:0,m=d?d+2:0,h=2*p+(i>>a),g=2*m+(s>>a),y=new Float32Array(h*g),b=new Float32Array(h*g),x=y;u.forEach(w=>{let _=p+(+t(w)>>a),C=m+(+r(w)>>a);_>=0&&_<h&&C>=0&&C<g&&(y[_+C*h]+=+n(w))}),f>0&&d>0?(_N(h,g,y,b,f),SN(h,g,b,y,d),_N(h,g,y,b,f),SN(h,g,b,y,d),_N(h,g,y,b,f),SN(h,g,b,y,d)):f>0?(_N(h,g,y,b,f),_N(h,g,b,y,f),_N(h,g,y,b,f),x=b):d>0&&(SN(h,g,y,b,d),SN(h,g,b,y,d),SN(h,g,y,b,d),x=b);let v=c?Math.pow(2,-2*a):1/nD(x);for(let w=0,_=h*g;w<_;++w)x[w]*=v;return{values:x,scale:1<<a,width:h,height:g,x1:p,y1:m,x2:p+(i>>a),y2:m+(s>>a)}}return l.x=function(u){return arguments.length?(t=Xme(u),l):t},l.y=function(u){return arguments.length?(r=Xme(u),l):r},l.weight=function(u){return arguments.length?(n=Xme(u),l):n},l.size=function(u){if(!arguments.length)return[i,s];var c=+u[0],f=+u[1];return c>=0&&f>=0||pt("invalid size"),i=c,s=f,l},l.cellSize=function(u){return arguments.length?((u=+u)>=1||pt("invalid cell size"),a=Math.floor(Math.log(u)/Math.LN2),l):1<<a},l.bandwidth=function(u){return arguments.length?(u=jr(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&pt("invalid bandwidth"),o=u,l):o},l}function _N(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<r;++a)for(let l=0,u=0;l<t+i;++l)l<t&&(u+=n[l+a*t]),l>=i&&(l>=s&&(u-=n[l-s+a*t]),o[l-i+a*t]=u/Math.min(l+1,t-1+s-l,s))}function SN(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<t;++a)for(let l=0,u=0;l<r+i;++l)l<r&&(u+=n[a+l*t]),l>=i&&(l>=s&&(u-=n[a+(l-s)*t]),o[a+(l-i)*t]=u/Math.min(l+1,r-1+s-l,s))}function Qme(t){et.call(this,null,t)}function iWe(t,r){return hqt.forEach(n=>r[n]!=null?t[n](r[n]):0),t}function gqt(t,r){var n=[],o=f=>f(l),i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function Jme(t){et.call(this,null,t)}function the(t){et.call(this,null,t)}function rhe(t){et.call(this,null,t)}function bqt(t,r){let n=t.pointRadius();return t.context(null),r!=null&&t.pointRadius(r),n}function nhe(t){et.call(this,null,t)}function ohe(t){et.call(this,null,t)}function xqt(t,r,n){let o=n==null?i=>t(r(i)):i=>{var s=t.pointRadius(),a=t.pointRadius(n)(r(i));return t.pointRadius(s),a};return o.context=i=>(t.context(i),o),o}function ihe(t){et.call(this,[],t),this.generator=yW()}function she(t){et.call(this,null,t)}function vqt(t,r){let n;return Tn(t)?(n=o=>Xs(t(o,r)),n.dep=sWe(t)):n=Ga(Xs(t||"#888")),n}function wqt(t,r){let n;return Tn(t)?(n=o=>t(o,r),n.dep=sWe(t)):t?n=Ga(t):(n=o=>o.$value/o.$max||0,n.dep=!0),n}function sWe(t){if(!Tn(t))return!1;let r=ru(wa(t));return r.$x||r.$y||r.$value||r.$max}function _qt(t,r,n,o){let i=t.width,s=t.height,a=t.x1||0,l=t.y1||0,u=t.x2||i,c=t.y2||s,f=t.values,d=f?y=>f[y]:Sm,p=Uc(u-a,c-l),m=p.getContext("2d"),h=m.getImageData(0,0,u-a,c-l),g=h.data;for(let y=l,b=0;y<c;++y){r.$y=y-l;for(let x=a,v=y*i;x<u;++x,b+=4){r.$x=x-a,r.$value=d(x+v);let w=n(r);g[b+0]=w.r,g[b+1]=w.g,g[b+2]=w.b,g[b+3]=~~(255*o(r))}}return m.putImageData(h,0,0),p}function aWe(t){et.call(this,null,t),this.modified(!0)}function Sqt(t,r){let n=Eqt(r.fit);r.extent?t.fitExtent(r.extent,n):r.size&&t.fitSize(r.size,n)}function Cqt(t){let r=d4((t||"mercator").toLowerCase());return r||pt("Unrecognized projection type: "+t),r()}function eWe(t,r,n){Tn(t[r])&&t[r](n)}function Eqt(t){return t=jr(t),t.length===1?t[0]:{type:ehe,features:t.reduce((r,n)=>r.concat(Tqt(n)),[])}}function Tqt(t){return t.type===ehe?t.features:jr(t).filter(r=>r!=null).map(r=>r.type===Kme?r:{type:Kme,geometry:r})}var Jx,hqt,Kme,ehe,yqt,lWe=D(()=>{"use strict";qa();Ts();Vo();sD();Yme();c4();As();gD();Jx=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];Zme.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};It(Zme,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=t.field||Xu,s=tWe().smooth(t.smooth!==!1),a=t.thresholds||pqt(o,i,t),l=t.as===null?null:t.as||"contour",u=[];return o.forEach(c=>{let f=i(c),d=s.size([f.width,f.height])(f.values,Wr(a)?a:a(f.values));mqt(d,f,c,t),d.forEach(p=>{u.push(HC(c,An(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});Qme.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};hqt=["x","y","weight","size","cellSize","bandwidth"];It(Qme,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=gqt(o,t.groupby),s=(t.groupby||[]).map(Ai),a=iWe(oWe(),t),l=t.as||"grid",u=[];function c(f,d){for(let p=0;p<s.length;++p)f[s[p]]=d[p];return f}return u=i.map(f=>An(c({[l]:a(f,t.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});Jme.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};It(Jme,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=tWe().smooth(t.smooth!==!1),i=t.values,s=t.thresholds||rWe(t.count||10,t.nice,!!i),a=t.size,l,u;return i||(i=r.materialize(r.SOURCE).source,l=iWe(oWe(),t)(i,!0),u=nWe(l,l.scale||1,l.scale||1,0,0),a=[l.width,l.height],i=l.values),s=Wr(s)?s:s(i),i=o.size(a)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(An),n}});Kme="Feature",ehe="FeatureCollection",yqt="MultiPoint";the.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};It(the,et,{transform(t,r){var n=this._features,o=this._points,i=t.fields,s=i&&i[0],a=i&&i[1],l=t.geojson||!i&&Xu,u=r.ADD,c;c=t.modified()||r.changed(r.REM)||r.modified(wa(l))||s&&r.modified(wa(s))||a&&r.modified(wa(a)),(!this.value||c)&&(u=r.SOURCE,this._features=n=[],this._points=o=[]),l&&r.visit(u,f=>n.push(l(f))),s&&a&&(r.visit(u,f=>{var d=s(f),p=a(f);d!=null&&p!=null&&(d=+d)===d&&(p=+p)===p&&o.push([d,p])}),n=n.concat({type:Kme,geometry:{type:yqt,coordinates:o}})),this.value={type:ehe,features:n}}});rhe.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};It(rhe,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.field||Xu,s=t.as||"path",a=n.SOURCE;!o||t.modified()?(this.value=o=Hme(t.projection),n.materialize().reflow()):a=i===Xu||r.modified(i.fields)?n.ADD_MOD:n.ADD;let l=bqt(o,t.pointRadius);return n.visit(a,u=>u[s]=o(i(u))),o.pointRadius(l),n.modifies(s)}});nhe.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};It(nhe,et,{transform(t,r){var n=t.projection,o=t.fields[0],i=t.fields[1],s=t.as||["x","y"],a=s[0],l=s[1],u;function c(f){let d=n([o(f),i(f)]);d?(f[a]=d[0],f[l]=d[1]):(f[a]=void 0,f[l]=void 0)}return t.modified()?r=r.materialize().reflow(!0).visit(r.SOURCE,c):(u=r.modified(o.fields)||r.modified(i.fields),r.visit(u?r.ADD_MOD:r.ADD,c)),r.modifies(s)}});ohe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};It(ohe,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.as||"shape",s=n.ADD;return(!o||t.modified())&&(this.value=o=xqt(Hme(t.projection),t.field||_m("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=o),n.modifies(i)}});ihe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};It(ihe,et,{transform(t,r){var n=this.value,o=this.generator,i;if(!n.length||t.modified())for(let s in t)Tn(o[s])&&o[s](t[s]);return i=o(),n.length?r.mod.push(W7(n[0],i)):r.add.push(An(i)),n[0]=i,r}});she.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};It(she,et,{transform(t,r){if(!r.changed()&&!t.modified())return r.StopPropagation;var n=r.materialize(r.SOURCE).source,o=t.resolve==="shared",i=t.field||Xu,s=wqt(t.opacity,t),a=vqt(t.color,t),l=t.as||"image",u={$x:0,$y:0,$value:0,$max:o?tp(n.map(c=>tp(i(c).values))):0};return n.forEach(c=>{let f=i(c),d=on({},c,u);o||(d.$max=tp(f.values||[])),c[l]=_qt(f,d,a.dep?a:Ga(a(d)),s.dep?s:Ga(s(d)))}),r.reflow(!0).modifies(l)}});It(aWe,et,{transform(t,r){let n=this.value;return!n||t.modified("type")?(this.value=n=Cqt(t.type),BW.forEach(o=>{t[o]!=null&&eWe(n,o,t[o])})):BW.forEach(o=>{t.modified(o)&&eWe(n,o,t[o])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&Sqt(n,t),r.fork(r.NO_SOURCE|r.NO_FIELDS)}})});function lhe(t,r){var n,o=1;t==null&&(t=0),r==null&&(r=0);function i(){var s,a=n.length,l,u=0,c=0;for(s=0;s<a;++s)l=n[s],u+=l.x,c+=l.y;for(u=(u/a-t)*o,c=(c/a-r)*o,s=0;s<a;++s)l=n[s],l.x-=u,l.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(r=+s,i):r},i.strength=function(s){return arguments.length?(o=+s,i):o},i}var uWe=D(()=>{"use strict"});function cWe(t){let r=+this._x.call(null,t),n=+this._y.call(null,t);return fWe(this.cover(r,n),r,n,t)}function fWe(t,r,n,o){if(isNaN(r)||isNaN(n))return t;var i,s=t._root,a={data:o},l=t._x0,u=t._y0,c=t._x1,f=t._y1,d,p,m,h,g,y,b,x;if(!s)return t._root=a,t;for(;s.length;)if((g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p,i=s,!(s=s[b=y<<1|g]))return i[b]=a,t;if(m=+t._x.call(null,s.data),h=+t._y.call(null,s.data),r===m&&n===h)return a.next=s,i?i[b]=a:t._root=a,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p;while((b=y<<1|g)===(x=(h>=p)<<1|m>=d));return i[x]=s,i[b]=a,t}function dWe(t){var r,n,o=t.length,i,s,a=new Array(o),l=new Array(o),u=1/0,c=1/0,f=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,r=t[n]))||isNaN(s=+this._y.call(null,r))||(a[n]=i,l[n]=s,i<u&&(u=i),i>f&&(f=i),s<c&&(c=s),s>d&&(d=s));if(u>f||c>d)return this;for(this.cover(u,c).cover(f,d),n=0;n<o;++n)fWe(this,a[n],l[n],t[n]);return this}var pWe=D(()=>{"use strict"});function mWe(t,r){if(isNaN(t=+t)||isNaN(r=+r))return this;var n=this._x0,o=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(o=Math.floor(r))+1;else{for(var a=i-n||1,l=this._root,u,c;n>t||t>=i||o>r||r>=s;)switch(c=(r<o)<<1|t<n,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:i=n+a,s=o+a;break;case 1:n=i-a,s=o+a;break;case 2:i=n+a,o=s-a;break;case 3:n=i-a,o=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=o,this._x1=i,this._y1=s,this}var hWe=D(()=>{"use strict"});function gWe(){var t=[];return this.visit(function(r){if(!r.length)do t.push(r.data);while(r=r.next)}),t}var yWe=D(()=>{"use strict"});function bWe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}var xWe=D(()=>{"use strict"});function Ja(t,r,n,o,i){this.node=t,this.x0=r,this.y0=n,this.x1=o,this.y1=i}var $W=D(()=>{"use strict"});function vWe(t,r,n){var o,i=this._x0,s=this._y0,a,l,u,c,f=this._x1,d=this._y1,p=[],m=this._root,h,g;for(m&&p.push(new Ja(m,i,s,f,d)),n==null?n=1/0:(i=t-n,s=r-n,f=t+n,d=r+n,n*=n);h=p.pop();)if(!(!(m=h.node)||(a=h.x0)>f||(l=h.y0)>d||(u=h.x1)<i||(c=h.y1)<s))if(m.length){var y=(a+u)/2,b=(l+c)/2;p.push(new Ja(m[3],y,b,u,c),new Ja(m[2],a,b,y,c),new Ja(m[1],y,l,u,b),new Ja(m[0],a,l,y,b)),(g=(r>=b)<<1|t>=y)&&(h=p[p.length-1],p[p.length-1]=p[p.length-1-g],p[p.length-1-g]=h)}else{var x=t-+this._x.call(null,m.data),v=r-+this._y.call(null,m.data),w=x*x+v*v;if(w<n){var _=Math.sqrt(n=w);i=t-_,s=r-_,f=t+_,d=r+_,o=m.data}}return o}var wWe=D(()=>{"use strict";$W()});function _We(t){if(isNaN(f=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var r,n=this._root,o,i,s,a=this._x0,l=this._y0,u=this._x1,c=this._y1,f,d,p,m,h,g,y,b;if(!n)return this;if(n.length)for(;;){if((h=f>=(p=(a+u)/2))?a=p:u=p,(g=d>=(m=(l+c)/2))?l=m:c=m,r=n,!(n=n[y=g<<1|h]))return this;if(!n.length)break;(r[y+1&3]||r[y+2&3]||r[y+3&3])&&(o=r,b=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):r?(s?r[y]=s:delete r[y],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(o?o[b]=n:this._root=n),this):(this._root=s,this)}function SWe(t){for(var r=0,n=t.length;r<n;++r)this.remove(t[r]);return this}var CWe=D(()=>{"use strict"});function EWe(){return this._root}var TWe=D(()=>{"use strict"});function AWe(){var t=0;return this.visit(function(r){if(!r.length)do++t;while(r=r.next)}),t}var kWe=D(()=>{"use strict"});function IWe(t){var r=[],n,o=this._root,i,s,a,l,u;for(o&&r.push(new Ja(o,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!t(o=n.node,s=n.x0,a=n.y0,l=n.x1,u=n.y1)&&o.length){var c=(s+l)/2,f=(a+u)/2;(i=o[3])&&r.push(new Ja(i,c,f,l,u)),(i=o[2])&&r.push(new Ja(i,s,f,c,u)),(i=o[1])&&r.push(new Ja(i,c,a,l,f)),(i=o[0])&&r.push(new Ja(i,s,a,c,f))}return this}var DWe=D(()=>{"use strict";$W()});function NWe(t){var r=[],n=[],o;for(this._root&&r.push(new Ja(this._root,this._x0,this._y0,this._x1,this._y1));o=r.pop();){var i=o.node;if(i.length){var s,a=o.x0,l=o.y0,u=o.x1,c=o.y1,f=(a+u)/2,d=(l+c)/2;(s=i[0])&&r.push(new Ja(s,a,l,f,d)),(s=i[1])&&r.push(new Ja(s,f,l,u,d)),(s=i[2])&&r.push(new Ja(s,a,d,f,c)),(s=i[3])&&r.push(new Ja(s,f,d,u,c))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}var FWe=D(()=>{"use strict";$W()});function OWe(t){return t[0]}function MWe(t){return arguments.length?(this._x=t,this):this._x}var RWe=D(()=>{"use strict"});function jWe(t){return t[1]}function PWe(t){return arguments.length?(this._y=t,this):this._y}var LWe=D(()=>{"use strict"});function ZE(t,r,n){var o=new uhe(r??OWe,n??jWe,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function uhe(t,r,n,o,i,s){this._x=t,this._y=r,this._x0=n,this._y0=o,this._x1=i,this._y1=s,this._root=void 0}function BWe(t){for(var r={data:t.data},n=r;t=t.next;)n=n.next={data:t.data};return r}var fc,$We=D(()=>{"use strict";pWe();hWe();yWe();xWe();wWe();CWe();TWe();kWe();DWe();FWe();RWe();LWe();fc=ZE.prototype=uhe.prototype;fc.copy=function(){var t=new uhe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,o;if(!r)return t;if(!r.length)return t._root=BWe(r),t;for(n=[{source:r,target:t._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(o=r.source[i])&&(o.length?n.push({source:o,target:r.target[i]=new Array(4)}):r.target[i]=BWe(o));return t};fc.add=cWe;fc.addAll=dWe;fc.cover=mWe;fc.data=gWe;fc.extent=bWe;fc.find=vWe;fc.remove=_We;fc.removeAll=SWe;fc.root=EWe;fc.size=AWe;fc.visit=IWe;fc.visitAfter=NWe;fc.x=MWe;fc.y=PWe});var che=D(()=>{"use strict";$We()});function Qs(t){return function(){return t}}var CN=D(()=>{"use strict"});function Zm(t){return(t()-.5)*1e-6}var zW=D(()=>{"use strict"});function Aqt(t){return t.x+t.vx}function kqt(t){return t.y+t.vy}function fhe(t){var r,n,o,i=1,s=1;typeof t!="function"&&(t=Qs(t==null?1:+t));function a(){for(var c,f=r.length,d,p,m,h,g,y,b=0;b<s;++b)for(d=ZE(r,Aqt,kqt).visitAfter(l),c=0;c<f;++c)p=r[c],g=n[p.index],y=g*g,m=p.x+p.vx,h=p.y+p.vy,d.visit(x);function x(v,w,_,C,S){var E=v.data,A=v.r,N=g+A;if(E){if(E.index>p.index){var k=m-E.x-E.vx,M=h-E.y-E.vy,I=k*k+M*M;I<N*N&&(k===0&&(k=Zm(o),I+=k*k),M===0&&(M=Zm(o),I+=M*M),I=(N-(I=Math.sqrt(I)))/I*i,p.vx+=(k*=I)*(N=(A*=A)/(y+A)),p.vy+=(M*=I)*N,E.vx-=k*(N=1-N),E.vy-=M*N)}return}return w>m+N||C<m-N||_>h+N||S<h-N}}function l(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(r){var c,f=r.length,d;for(n=new Array(f),c=0;c<f;++c)d=r[c],n[d.index]=+t(d,c,r)}}return a.initialize=function(c,f){r=c,o=f,u()},a.iterations=function(c){return arguments.length?(s=+c,a):s},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Qs(+c),u(),a):t},a}var zWe=D(()=>{"use strict";che();CN();zW()});function Iqt(t){return t.index}function UWe(t,r){var n=t.get(r);if(!n)throw new Error("node not found: "+r);return n}function dhe(t){var r=Iqt,n=d,o,i=Qs(30),s,a,l,u,c,f=1;t==null&&(t=[]);function d(y){return 1/Math.min(l[y.source.index],l[y.target.index])}function p(y){for(var b=0,x=t.length;b<f;++b)for(var v=0,w,_,C,S,E,A,N;v<x;++v)w=t[v],_=w.source,C=w.target,S=C.x+C.vx-_.x-_.vx||Zm(c),E=C.y+C.vy-_.y-_.vy||Zm(c),A=Math.sqrt(S*S+E*E),A=(A-s[v])/A*y*o[v],S*=A,E*=A,C.vx-=S*(N=u[v]),C.vy-=E*N,_.vx+=S*(N=1-N),_.vy+=E*N}function m(){if(a){var y,b=a.length,x=t.length,v=new Map(a.map((_,C)=>[r(_,C,a),_])),w;for(y=0,l=new Array(b);y<x;++y)w=t[y],w.index=y,typeof w.source!="object"&&(w.source=UWe(v,w.source)),typeof w.target!="object"&&(w.target=UWe(v,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(y=0,u=new Array(x);y<x;++y)w=t[y],u[y]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);o=new Array(x),h(),s=new Array(x),g()}}function h(){if(a)for(var y=0,b=t.length;y<b;++y)o[y]=+n(t[y],y,t)}function g(){if(a)for(var y=0,b=t.length;y<b;++y)s[y]=+i(t[y],y,t)}return p.initialize=function(y,b){a=y,c=b,m()},p.links=function(y){return arguments.length?(t=y,m(),p):t},p.id=function(y){return arguments.length?(r=y,p):r},p.iterations=function(y){return arguments.length?(f=+y,p):f},p.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Qs(+y),h(),p):n},p.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Qs(+y),g(),p):i},p}var VWe=D(()=>{"use strict";CN();zW()});function WWe(){for(var t=0,r=arguments.length,n={},o;t<r;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new UW(n)}function UW(t){this._=t}function Nqt(t,r){return t.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}function Fqt(t,r){for(var n=0,o=t.length,i;n<o;++n)if((i=t[n]).name===r)return i.value}function GWe(t,r,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===r){t[o]=Dqt,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:r,value:n}),t}var Dqt,phe,qWe=D(()=>{"use strict";Dqt={value:()=>{}};UW.prototype=WWe.prototype={constructor:UW,on:function(t,r){var n=this._,o=Nqt(t+"",n),i,s=-1,a=o.length;if(arguments.length<2){for(;++s<a;)if((i=(t=o[s]).type)&&(i=Fqt(n[i],t.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++s<a;)if(i=(t=o[s]).type)n[i]=GWe(n[i],t.name,r);else if(r==null)for(i in n)n[i]=GWe(n[i],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new UW(t)},call:function(t,r){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,s;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],o=0,i=s.length;o<i;++o)s[o].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(r,n)}};phe=WWe});var HWe=D(()=>{"use strict";qWe()});function b4(){return QE||(KWe(Oqt),QE=g4.now()+WW)}function Oqt(){QE=0}function y4(){this._call=this._time=this._next=null}function qW(t,r,n){var o=new y4;return o.restart(t,r,n),o}function ZWe(){b4(),++EN;for(var t=VW,r;t;)(r=QE-t._time)>=0&&t._call.call(null,r),t=t._next;--EN}function YWe(){QE=(GW=g4.now())+WW,EN=m4=0;try{ZWe()}finally{EN=0,Rqt(),QE=0}}function Mqt(){var t=g4.now(),r=t-GW;r>XWe&&(WW-=r,GW=t)}function Rqt(){for(var t,r=VW,n,o=1/0;r;)r._call?(o>r._time&&(o=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:VW=n);h4=t,mhe(o)}function mhe(t){if(!EN){m4&&(m4=clearTimeout(m4));var r=t-QE;r>24?(t<1/0&&(m4=setTimeout(YWe,t-g4.now()-WW)),p4&&(p4=clearInterval(p4))):(p4||(GW=g4.now(),p4=setInterval(Mqt,XWe)),EN=1,KWe(YWe))}}var EN,m4,p4,XWe,VW,h4,GW,QE,WW,g4,KWe,hhe=D(()=>{"use strict";EN=0,m4=0,p4=0,XWe=1e3,GW=0,QE=0,WW=0,g4=typeof performance=="object"&&performance.now?performance:Date,KWe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};y4.prototype=qW.prototype={constructor:y4,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?b4():+n)+(r==null?0:+r),!this._next&&h4!==this&&(h4?h4._next=this:VW=this,h4=this),this._call=t,this._time=n,mhe()},stop:function(){this._call&&(this._call=null,this._time=1/0,mhe())}}});function ghe(t,r,n){var o=new y4,i=r;return r==null?(o.restart(t,r,n),o):(o._restart=o.restart,o.restart=function(s,a,l){a=+a,l=l==null?b4():+l,o._restart(function u(c){c+=i,o._restart(u,i+=a,l),s(c)},a,l)},o.restart(t,r,n),o)}var QWe=D(()=>{"use strict";hhe()});var yhe=D(()=>{"use strict";hhe();QWe()});function JWe(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var eqe=D(()=>{"use strict"});function tqe(t){return t.x}function rqe(t){return t.y}function bhe(t){var r,n=1,o=.001,i=1-Math.pow(o,1/300),s=0,a=.6,l=new Map,u=qW(d),c=phe("tick","end"),f=JWe();t==null&&(t=[]);function d(){p(),c.call("tick",r),n<o&&(u.stop(),c.call("end",r))}function p(g){var y,b=t.length,x;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*i,l.forEach(function(w){w(n)}),y=0;y<b;++y)x=t[y],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return r}function m(){for(var g=0,y=t.length,b;g<y;++g){if(b=t[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var x=jqt*Math.sqrt(.5+g),v=g*Pqt;b.x=x*Math.cos(v),b.y=x*Math.sin(v)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function h(g){return g.initialize&&g.initialize(t,f),g}return m(),r={tick:p,restart:function(){return u.restart(d),r},stop:function(){return u.stop(),r},nodes:function(g){return arguments.length?(t=g,m(),l.forEach(h),r):t},alpha:function(g){return arguments.length?(n=+g,r):n},alphaMin:function(g){return arguments.length?(o=+g,r):o},alphaDecay:function(g){return arguments.length?(i=+g,r):+i},alphaTarget:function(g){return arguments.length?(s=+g,r):s},velocityDecay:function(g){return arguments.length?(a=1-g,r):1-a},randomSource:function(g){return arguments.length?(f=g,l.forEach(h),r):f},force:function(g,y){return arguments.length>1?(y==null?l.delete(g):l.set(g,h(y)),r):l.get(g)},find:function(g,y,b){var x=0,v=t.length,w,_,C,S,E;for(b==null?b=1/0:b*=b,x=0;x<v;++x)S=t[x],w=g-S.x,_=y-S.y,C=w*w+_*_,C<b&&(E=S,b=C);return E},on:function(g,y){return arguments.length>1?(c.on(g,y),r):c.on(g)}}}var jqt,Pqt,xhe=D(()=>{"use strict";HWe();yhe();eqe();jqt=10,Pqt=Math.PI*(3-Math.sqrt(5))});function vhe(){var t,r,n,o,i=Qs(-30),s,a=1,l=1/0,u=.81;function c(m){var h,g=t.length,y=ZE(t,tqe,rqe).visitAfter(d);for(o=m,h=0;h<g;++h)r=t[h],y.visit(p)}function f(){if(t){var m,h=t.length,g;for(s=new Array(h),m=0;m<h;++m)g=t[m],s[g.index]=+i(g,m,t)}}function d(m){var h=0,g,y,b=0,x,v,w;if(m.length){for(x=v=w=0;w<4;++w)(g=m[w])&&(y=Math.abs(g.value))&&(h+=g.value,b+=y,x+=y*g.x,v+=y*g.y);m.x=x/b,m.y=v/b}else{g=m,g.x=g.data.x,g.y=g.data.y;do h+=s[g.data.index];while(g=g.next)}m.value=h}function p(m,h,g,y){if(!m.value)return!0;var b=m.x-r.x,x=m.y-r.y,v=y-h,w=b*b+x*x;if(v*v/u<w)return w<l&&(b===0&&(b=Zm(n),w+=b*b),x===0&&(x=Zm(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)),r.vx+=b*m.value*o/w,r.vy+=x*m.value*o/w),!0;if(m.length||w>=l)return;(m.data!==r||m.next)&&(b===0&&(b=Zm(n),w+=b*b),x===0&&(x=Zm(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)));do m.data!==r&&(v=s[m.data.index]*o/w,r.vx+=b*v,r.vy+=x*v);while(m=m.next)}return c.initialize=function(m,h){t=m,n=h,f()},c.strength=function(m){return arguments.length?(i=typeof m=="function"?m:Qs(+m),f(),c):i},c.distanceMin=function(m){return arguments.length?(a=m*m,c):Math.sqrt(a)},c.distanceMax=function(m){return arguments.length?(l=m*m,c):Math.sqrt(l)},c.theta=function(m){return arguments.length?(u=m*m,c):Math.sqrt(u)},c}var nqe=D(()=>{"use strict";che();CN();zW();xhe()});function whe(t){var r=Qs(.1),n,o,i;typeof t!="function"&&(t=Qs(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(i[u]-f.x)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:Qs(+l),a(),s):r},s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Qs(+l),a(),s):t},s}var oqe=D(()=>{"use strict";CN()});function _he(t){var r=Qs(.1),n,o,i;typeof t!="function"&&(t=Qs(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(i[u]-f.y)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:Qs(+l),a(),s):r},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Qs(+l),a(),s):t},s}var iqe=D(()=>{"use strict";CN()});var sqe=D(()=>{"use strict";uWe();zWe();VWe();nqe();xhe();oqe();iqe()});var Ehe={};cn(Ehe,{force:()=>Che});function Che(t){et.call(this,null,t)}function Bqt(t,r){return()=>t.touch(r).run()}function $qt(t,r){let n=bhe(t),o=n.stop,i=n.restart,s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,o()),uqe(n,r,!0).on("end",()=>s=!0)}function uqe(t,r,n,o){var i=jr(r.forces),s,a,l,u;for(s=0,a=She.length;s<a;++s)l=She[s],l!==x4&&r.modified(l)&&t[l](r[l]);for(s=0,a=i.length;s<a;++s)u=x4+s,l=n||r.modified(x4,s)?Uqt(i[s]):o&&zqt(i[s],o)?t.force(u):null,l&&t.force(u,l);for(a=t.numForces||0;s<a;++s)t.force(x4+s,null);return t.numForces=i.length,t}function zqt(t,r){var n,o;for(n in t)if(Tn(o=t[n])&&r.modified(wa(o)))return 1;return 0}function Uqt(t){var r,n;Or(aqe,t.force)||pt("Unrecognized force: "+t.force),r=aqe[t.force]();for(n in t)Tn(r[n])&&Vqt(r[n],t[n],t);return r}function Vqt(t,r,n){t(Tn(r)?o=>r(o,n):r)}var aqe,x4,She,Lqt,lqe,cqe=D(()=>{"use strict";qa();Ts();sqe();aqe={center:lhe,collide:fhe,nbody:vhe,link:dhe,x:whe,y:_he},x4="forces",She=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Lqt=["static","iterations"],lqe=["x","y","vx","vy"];Che.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:lqe}]};It(Che,et,{transform(t,r){var n=this.value,o=r.changed(r.ADD_REM),i=t.modified(She),s=t.iterations||300;if(n?(o&&(r.modifies("index"),n.nodes(r.source)),(i||r.changed(r.MOD))&&uqe(n,t,0,r)):(this.value=n=$qt(r.source,t),n.on("tick",Bqt(r.dataflow,this)),t.static||(o=!0,n.tick()),r.modifies("index")),i||o||t.modified(Lqt)||r.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!o)return r.StopPropagation}return this.finish(t,r)},finish(t,r){let n=r.dataflow;for(let l=this._argops,u=0,c=l.length,f;u<c;++u)if(f=l[u],!(f.name!==x4||f.op._argval.force!=="link")){for(var o=f.op._argops,i=0,s=o.length,a;i<s;++i)if(o[i].name==="links"&&(a=o[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return r.reflow(t.modified()).modifies(lqe)}})});function Gqt(t,r){return t.parent===r.parent?1:2}function Wqt(t){return t.reduce(qqt,0)/t.length}function qqt(t,r){return t+r.x}function Hqt(t){return 1+t.reduce(Yqt,0)}function Yqt(t,r){return Math.max(t,r.y)}function Xqt(t){for(var r;r=t.children;)t=r[0];return t}function Kqt(t){for(var r;r=t.children;)t=r[r.length-1];return t}function The(){var t=Gqt,r=1,n=1,o=!1;function i(s){var a,l=0;s.eachAfter(function(p){var m=p.children;m?(p.x=Wqt(m),p.y=Hqt(m)):(p.x=a?l+=t(p,a):0,p.y=0,a=p)});var u=Xqt(s),c=Kqt(s),f=u.x-t(u,c)/2,d=c.x+t(c,u)/2;return s.eachAfter(o?function(p){p.x=(p.x-s.x)*r,p.y=(s.y-p.y)*n}:function(p){p.x=(p.x-f)/(d-f)*r,p.y=(1-(s.y?p.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(o=!1,r=+s[0],n=+s[1],i):o?null:[r,n]},i.nodeSize=function(s){return arguments.length?(o=!0,r=+s[0],n=+s[1],i):o?[r,n]:null},i}var fqe=D(()=>{"use strict"});function Zqt(t){var r=0,n=t.children,o=n&&n.length;if(!o)r=1;else for(;--o>=0;)r+=n[o].value;t.value=r}function dqe(){return this.eachAfter(Zqt)}var pqe=D(()=>{"use strict"});function mqe(t,r){let n=-1;for(let o of this)t.call(r,o,++n,this);return this}var hqe=D(()=>{"use strict"});function gqe(t,r){for(var n=this,o=[n],i,s,a=-1;n=o.pop();)if(t.call(r,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)o.push(i[s]);return this}var yqe=D(()=>{"use strict"});function bqe(t,r){for(var n=this,o=[n],i=[],s,a,l,u=-1;n=o.pop();)if(i.push(n),s=n.children)for(a=0,l=s.length;a<l;++a)o.push(s[a]);for(;n=i.pop();)t.call(r,n,++u,this);return this}var xqe=D(()=>{"use strict"});function vqe(t,r){let n=-1;for(let o of this)if(t.call(r,o,++n,this))return o}var wqe=D(()=>{"use strict"});function _qe(t){return this.eachAfter(function(r){for(var n=+t(r.data)||0,o=r.children,i=o&&o.length;--i>=0;)n+=o[i].value;r.value=n})}var Sqe=D(()=>{"use strict"});function Cqe(t){return this.eachBefore(function(r){r.children&&r.children.sort(t)})}var Eqe=D(()=>{"use strict"});function Tqe(t){for(var r=this,n=Qqt(r,t),o=[r];r!==n;)r=r.parent,o.push(r);for(var i=o.length;t!==n;)o.splice(i,0,t),t=t.parent;return o}function Qqt(t,r){if(t===r)return t;var n=t.ancestors(),o=r.ancestors(),i=null;for(t=n.pop(),r=o.pop();t===r;)i=t,t=n.pop(),r=o.pop();return i}var Aqe=D(()=>{"use strict"});function kqe(){for(var t=this,r=[t];t=t.parent;)r.push(t);return r}var Iqe=D(()=>{"use strict"});function Dqe(){return Array.from(this)}var Nqe=D(()=>{"use strict"});function Fqe(){var t=[];return this.eachBefore(function(r){r.children||t.push(r)}),t}var Oqe=D(()=>{"use strict"});function Mqe(){var t=this,r=[];return t.each(function(n){n!==t&&r.push({source:n.parent,target:n})}),r}var Rqe=D(()=>{"use strict"});function*jqe(){var t=this,r,n=[t],o,i,s;do for(r=n.reverse(),n=[];t=r.pop();)if(yield t,o=t.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);while(n.length)}var Pqe=D(()=>{"use strict"});function TN(t,r){t instanceof Map?(t=[void 0,t],r===void 0&&(r=tHt)):r===void 0&&(r=eHt);for(var n=new p_(t),o,i=[n],s,a,l,u;o=i.pop();)if((a=r(o.data))&&(u=(a=Array.from(a)).length))for(o.children=a,l=u-1;l>=0;--l)i.push(s=a[l]=new p_(a[l])),s.parent=o,s.depth=o.depth+1;return n.eachBefore(Ahe)}function Jqt(){return TN(this).eachBefore(rHt)}function eHt(t){return t.children}function tHt(t){return Array.isArray(t)?t[1]:null}function rHt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Ahe(t){var r=0;do t.height=r;while((t=t.parent)&&t.height<++r)}function p_(t){this.data=t,this.depth=this.height=0,this.parent=null}var HW=D(()=>{"use strict";pqe();hqe();yqe();xqe();wqe();Sqe();Eqe();Aqe();Iqe();Nqe();Oqe();Rqe();Pqe();p_.prototype=TN.prototype={constructor:p_,count:dqe,each:mqe,eachAfter:bqe,eachBefore:gqe,find:vqe,sum:_qe,sort:Cqe,path:Tqe,ancestors:kqe,descendants:Dqe,leaves:Fqe,links:Mqe,copy:Jqt,[Symbol.iterator]:jqe}});function Lqe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bqe(t){for(var r=t.length,n,o;r;)o=Math.random()*r--|0,n=t[r],t[r]=t[o],t[o]=n;return t}var khe=D(()=>{"use strict"});function $qe(t){for(var r=0,n=(t=Bqe(Array.from(t))).length,o=[],i,s;r<n;)i=t[r],s&&zqe(s,i)?++r:(s=oHt(o=nHt(o,i)),r=0);return s}function nHt(t,r){var n,o;if(Ihe(r,t))return[r];for(n=0;n<t.length;++n)if(YW(r,t[n])&&Ihe(v4(t[n],r),t))return[t[n],r];for(n=0;n<t.length-1;++n)for(o=n+1;o<t.length;++o)if(YW(v4(t[n],t[o]),r)&&YW(v4(t[n],r),t[o])&&YW(v4(t[o],r),t[n])&&Ihe(Uqe(t[n],t[o],r),t))return[t[n],t[o],r];throw new Error}function YW(t,r){var n=t.r-r.r,o=r.x-t.x,i=r.y-t.y;return n<0||n*n<o*o+i*i}function zqe(t,r){var n=t.r-r.r+Math.max(t.r,r.r,1)*1e-9,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function Ihe(t,r){for(var n=0;n<r.length;++n)if(!zqe(t,r[n]))return!1;return!0}function oHt(t){switch(t.length){case 1:return iHt(t[0]);case 2:return v4(t[0],t[1]);case 3:return Uqe(t[0],t[1],t[2])}}function iHt(t){return{x:t.x,y:t.y,r:t.r}}function v4(t,r){var n=t.x,o=t.y,i=t.r,s=r.x,a=r.y,l=r.r,u=s-n,c=a-o,f=l-i,d=Math.sqrt(u*u+c*c);return{x:(n+s+u/d*f)/2,y:(o+a+c/d*f)/2,r:(d+i+l)/2}}function Uqe(t,r,n){var o=t.x,i=t.y,s=t.r,a=r.x,l=r.y,u=r.r,c=n.x,f=n.y,d=n.r,p=o-a,m=o-c,h=i-l,g=i-f,y=u-s,b=d-s,x=o*o+i*i-s*s,v=x-a*a-l*l+u*u,w=x-c*c-f*f+d*d,_=m*h-p*g,C=(h*w-g*v)/(_*2)-o,S=(g*y-h*b)/_,E=(m*v-p*w)/(_*2)-i,A=(p*b-m*y)/_,N=S*S+A*A-1,k=2*(s+C*S+E*A),M=C*C+E*E-s*s,I=-(N?(k+Math.sqrt(k*k-4*N*M))/(2*N):M/k);return{x:o+C+S*I,y:i+E+A*I,r:I}}var Vqe=D(()=>{"use strict";khe()});function Gqe(t,r,n){var o=t.x-r.x,i,s,a=t.y-r.y,l,u,c=o*o+a*a;c?(s=r.r+n.r,s*=s,u=t.r+n.r,u*=u,s>u?(i=(c+u-s)/(2*c),l=Math.sqrt(Math.max(0,u/c-i*i)),n.x=t.x-i*o-l*a,n.y=t.y-i*a+l*o):(i=(c+s-u)/(2*c),l=Math.sqrt(Math.max(0,s/c-i*i)),n.x=r.x+i*o-l*a,n.y=r.y+i*a+l*o)):(n.x=r.x+n.r,n.y=r.y)}function Wqe(t,r){var n=t.r+r.r-1e-6,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function qqe(t){var r=t._,n=t.next._,o=r.r+n.r,i=(r.x*n.r+n.x*r.r)/o,s=(r.y*n.r+n.y*r.r)/o;return i*i+s*s}function XW(t){this._=t,this.next=null,this.previous=null}function Hqe(t){if(!(i=(t=Lqe(t)).length))return 0;var r,n,o,i,s,a,l,u,c,f,d;if(r=t[0],r.x=0,r.y=0,!(i>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(i>2))return r.r+n.r;Gqe(n,r,o=t[2]),r=new XW(r),n=new XW(n),o=new XW(o),r.next=o.previous=n,n.next=r.previous=o,o.next=n.previous=r;e:for(l=3;l<i;++l){Gqe(r._,n._,o=t[l]),o=new XW(o),u=n.next,c=r.previous,f=n._.r,d=r._.r;do if(f<=d){if(Wqe(u._,o._)){n=u,r.next=n,n.previous=r,--l;continue e}f+=u._.r,u=u.next}else{if(Wqe(c._,o._)){r=c,r.next=n,n.previous=r,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(o.previous=r,o.next=n,r.next=n.previous=n=o,s=qqe(r);(o=o.next)!==n;)(a=qqe(o))<s&&(r=o,s=a);n=r.next}for(r=[n._],o=n;(o=o.next)!==n;)r.push(o._);for(o=$qe(r),l=0;l<i;++l)r=t[l],r.x-=o.x,r.y-=o.y;return o.r}var Yqe=D(()=>{"use strict";khe();Vqe()});function Xqe(t){return t==null?null:AN(t)}function AN(t){if(typeof t!="function")throw new Error;return t}var KW=D(()=>{"use strict"});function ev(){return 0}function m_(t){return function(){return t}}var Dhe=D(()=>{"use strict"});function sHt(t){return Math.sqrt(t.value)}function Fhe(){var t=null,r=1,n=1,o=ev;function i(s){return s.x=r/2,s.y=n/2,t?s.eachBefore(Kqe(t)).eachAfter(Nhe(o,.5)).eachBefore(Zqe(1)):s.eachBefore(Kqe(sHt)).eachAfter(Nhe(ev,1)).eachAfter(Nhe(o,s.r/Math.min(r,n))).eachBefore(Zqe(Math.min(r,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=Xqe(s),i):t},i.size=function(s){return arguments.length?(r=+s[0],n=+s[1],i):[r,n]},i.padding=function(s){return arguments.length?(o=typeof s=="function"?s:m_(+s),i):o},i}function Kqe(t){return function(r){r.children||(r.r=Math.max(0,+t(r)||0))}}function Nhe(t,r){return function(n){if(o=n.children){var o,i,s=o.length,a=t(n)*r||0,l;if(a)for(i=0;i<s;++i)o[i].r+=a;if(l=Hqe(o),a)for(i=0;i<s;++i)o[i].r-=a;n.r=l+a}}}function Zqe(t){return function(r){var n=r.parent;r.r*=t,n&&(r.x=n.x+t*r.x,r.y=n.y+t*r.y)}}var Qqe=D(()=>{"use strict";Yqe();KW();Dhe()});function ZW(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}var Ohe=D(()=>{"use strict"});function Qm(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(o-r)/t.value;++l<u;)a=s[l],a.y0=n,a.y1=i,a.x0=r,a.x1=r+=a.value*c}var kN=D(()=>{"use strict"});function Mhe(){var t=1,r=1,n=0,o=!1;function i(a){var l=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=r/l,a.eachBefore(s(r,l)),o&&a.eachBefore(ZW),a}function s(a,l){return function(u){u.children&&Qm(u,u.x0,a*(u.depth+1)/l,u.x1,a*(u.depth+2)/l);var c=u.x0,f=u.y0,d=u.x1-n,p=u.y1-n;d<c&&(c=d=(c+d)/2),p<f&&(f=p=(f+p)/2),u.x0=c,u.y0=f,u.x1=d,u.y1=p}}return i.round=function(a){return arguments.length?(o=!!a,i):o},i.size=function(a){return arguments.length?(t=+a[0],r=+a[1],i):[t,r]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var Jqe=D(()=>{"use strict";Ohe();kN()});function lHt(t){return t.id}function uHt(t){return t.parentId}function QW(){var t=lHt,r=uHt;function n(o){var i=Array.from(o),s=i.length,a,l,u,c,f,d,p,m=new Map;for(l=0;l<s;++l)a=i[l],f=i[l]=new p_(a),(d=t(a,l,o))!=null&&(d+="")&&(p=f.id=d,m.set(p,m.has(p)?eHe:f)),(d=r(a,l,o))!=null&&(d+="")&&(f.parent=d);for(l=0;l<s;++l)if(f=i[l],d=f.parent){if(c=m.get(d),!c)throw new Error("missing: "+d);if(c===eHe)throw new Error("ambiguous: "+d);c.children?c.children.push(f):c.children=[f],f.parent=c}else{if(u)throw new Error("multiple roots");u=f}if(!u)throw new Error("no root");if(u.parent=aHt,u.eachBefore(function(h){h.depth=h.parent.depth+1,--s}).eachBefore(Ahe),u.parent=null,s>0)throw new Error("cycle");return u}return n.id=function(o){return arguments.length?(t=AN(o),n):t},n.parentId=function(o){return arguments.length?(r=AN(o),n):r},n}var aHt,eHe,tHe=D(()=>{"use strict";KW();HW();aHt={depth:-1},eHe={}});function cHt(t,r){return t.parent===r.parent?1:2}function Rhe(t){var r=t.children;return r?r[0]:t.t}function jhe(t){var r=t.children;return r?r[r.length-1]:t.t}function fHt(t,r,n){var o=n/(r.i-t.i);r.c-=o,r.s+=n,t.c+=o,r.z+=n,r.m+=n}function dHt(t){for(var r=0,n=0,o=t.children,i=o.length,s;--i>=0;)s=o[i],s.z+=r,s.m+=r,r+=s.s+(n+=s.c)}function pHt(t,r,n){return t.a.parent===r.parent?t.a:n}function JW(t,r){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function mHt(t){for(var r=new JW(t,0),n,o=[r],i,s,a,l;n=o.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),a=l-1;a>=0;--a)o.push(i=n.children[a]=new JW(s[a],a)),i.parent=n;return(r.parent=new JW(null,0)).children=[r],r}function Phe(){var t=cHt,r=1,n=1,o=null;function i(c){var f=mHt(c);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(a),o)c.eachBefore(u);else{var d=c,p=c,m=c;c.eachBefore(function(x){x.x<d.x&&(d=x),x.x>p.x&&(p=x),x.depth>m.depth&&(m=x)});var h=d===p?1:t(d,p)/2,g=h-d.x,y=r/(p.x+h+g),b=n/(m.depth||1);c.eachBefore(function(x){x.x=(x.x+g)*y,x.y=x.depth*b})}return c}function s(c){var f=c.children,d=c.parent.children,p=c.i?d[c.i-1]:null;if(f){dHt(c);var m=(f[0].z+f[f.length-1].z)/2;p?(c.z=p.z+t(c._,p._),c.m=c.z-m):c.z=m}else p&&(c.z=p.z+t(c._,p._));c.parent.A=l(c,p,c.parent.A||d[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,f,d){if(f){for(var p=c,m=c,h=f,g=p.parent.children[0],y=p.m,b=m.m,x=h.m,v=g.m,w;h=jhe(h),p=Rhe(p),h&&p;)g=Rhe(g),m=jhe(m),m.a=c,w=h.z+x-p.z-y+t(h._,p._),w>0&&(fHt(pHt(h,c,d),c,w),y+=w,b+=w),x+=h.m,y+=p.m,v+=g.m,b+=m.m;h&&!jhe(m)&&(m.t=h,m.m+=x-b),p&&!Rhe(g)&&(g.t=p,g.m+=y-v,d=c)}return d}function u(c){c.x*=r,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(o=!1,r=+c[0],n=+c[1],i):o?null:[r,n]},i.nodeSize=function(c){return arguments.length?(o=!0,r=+c[0],n=+c[1],i):o?[r,n]:null},i}var rHe=D(()=>{"use strict";HW();JW.prototype=Object.create(p_.prototype)});function tv(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(i-n)/t.value;++l<u;)a=s[l],a.x0=r,a.x1=o,a.y0=n,a.y1=n+=a.value*c}var w4=D(()=>{"use strict"});function Bhe(t,r,n,o,i,s){for(var a=[],l=r.children,u,c,f=0,d=0,p=l.length,m,h,g=r.value,y,b,x,v,w,_,C;f<p;){m=i-n,h=s-o;do y=l[d++].value;while(!y&&d<p);for(b=x=y,_=Math.max(h/m,m/h)/(g*t),C=y*y*_,w=Math.max(x/C,C/b);d<p;++d){if(y+=c=l[d].value,c<b&&(b=c),c>x&&(x=c),C=y*y*_,v=Math.max(x/C,C/b),v>w){y-=c;break}w=v}a.push(u={value:y,dice:m<h,children:l.slice(f,d)}),u.dice?Qm(u,n,o,i,g?o+=h*y/g:s):tv(u,n,o,g?n+=m*y/g:i,s),g-=y,f=d}return a}var Lhe,_4,eq=D(()=>{"use strict";kN();w4();Lhe=(1+Math.sqrt(5))/2;_4=function t(r){function n(o,i,s,a,l){Bhe(r,o,i,s,a,l)}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(Lhe)});function $he(){var t=_4,r=!1,n=1,o=1,i=[0],s=ev,a=ev,l=ev,u=ev,c=ev;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=o,p.eachBefore(d),i=[0],r&&p.eachBefore(ZW),p}function d(p){var m=i[p.depth],h=p.x0+m,g=p.y0+m,y=p.x1-m,b=p.y1-m;y<h&&(h=y=(h+y)/2),b<g&&(g=b=(g+b)/2),p.x0=h,p.y0=g,p.x1=y,p.y1=b,p.children&&(m=i[p.depth+1]=s(p)/2,h+=c(p)-m,g+=a(p)-m,y-=l(p)-m,b-=u(p)-m,y<h&&(h=y=(h+y)/2),b<g&&(g=b=(g+b)/2),t(p,h,g,y,b))}return f.round=function(p){return arguments.length?(r=!!p,f):r},f.size=function(p){return arguments.length?(n=+p[0],o=+p[1],f):[n,o]},f.tile=function(p){return arguments.length?(t=AN(p),f):t},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(s=typeof p=="function"?p:m_(+p),f):s},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:m_(+p),f):a},f.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:m_(+p),f):l},f.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:m_(+p),f):u},f.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:m_(+p),f):c},f}var nHe=D(()=>{"use strict";Ohe();eq();KW();Dhe()});function zhe(t,r,n,o,i){var s=t.children,a,l=s.length,u,c=new Array(l+1);for(c[0]=u=a=0;a<l;++a)c[a+1]=u+=s[a].value;f(0,l,t.value,r,n,o,i);function f(d,p,m,h,g,y,b){if(d>=p-1){var x=s[d];x.x0=h,x.y0=g,x.x1=y,x.y1=b;return}for(var v=c[d],w=m/2+v,_=d+1,C=p-1;_<C;){var S=_+C>>>1;c[S]<w?_=S+1:C=S}w-c[_-1]<c[_]-w&&d+1<_&&--_;var E=c[_]-v,A=m-E;if(y-h>b-g){var N=m?(h*A+y*E)/m:y;f(d,_,E,h,g,N,b),f(_,p,A,N,g,y,b)}else{var k=m?(g*A+b*E)/m:b;f(d,_,E,h,g,y,k),f(_,p,A,h,k,y,b)}}}var oHe=D(()=>{"use strict"});function Uhe(t,r,n,o,i){(t.depth&1?tv:Qm)(t,r,n,o,i)}var iHe=D(()=>{"use strict";kN();w4()});var Vhe,sHe=D(()=>{"use strict";kN();w4();eq();Vhe=function t(r){function n(o,i,s,a,l){if((u=o._squarify)&&u.ratio===r)for(var u,c,f,d,p=-1,m,h=u.length,g=o.value;++p<h;){for(c=u[p],f=c.children,d=c.value=0,m=f.length;d<m;++d)c.value+=f[d].value;c.dice?Qm(c,i,s,a,g?s+=(l-s)*c.value/g:l):tv(c,i,s,g?i+=(a-i)*c.value/g:a,l),g-=c.value}else o._squarify=u=Bhe(r,o,i,s,a,l),u.ratio=r}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(Lhe)});var aHe=D(()=>{"use strict";fqe();HW();Qqe();Jqe();tHe();rHe();nHe();oHe();kN();w4();iHe();eq();sHe()});var rge={};cn(rge,{nest:()=>Xhe,pack:()=>Khe,partition:()=>Zhe,stratify:()=>Qhe,tree:()=>Jhe,treelinks:()=>ege,treemap:()=>tge});function Ghe(t,r,n){let o={};return t.each(i=>{let s=i.data;n(s)&&(o[r(s)]=i)}),t.lookup=o,t}function Xhe(t){et.call(this,null,t)}function gHt(){let t=[],r={entries:i=>o(n(i,0),0),key:i=>(t.push(i),r)};function n(i,s){if(s>=t.length)return i;let a=i.length,l=t[s++],u={},c={},f=-1,d,p,m;for(;++f<a;)d=l(p=i[f])+"",(m=u[d])?m.push(p):u[d]=[p];for(d in u)c[d]=n(u[d],s);return c}function o(i,s){if(++s>t.length)return i;let a=[];for(let l in i)a.push({key:l,values:o(i[l],s)});return a}return r}function rv(t){et.call(this,null,t)}function bHt(t,r,n){for(let o,i=0,s=r.length;i<s;++i)o=r[i],o in n&&t[o](n[o])}function xHt(t,r,n){let o=t.data,i=r.length-1;for(let s=0;s<i;++s)o[n[s]]=t[r[s]];o[n[i]]=t.children?t.children.length:0}function Khe(t){rv.call(this,t)}function Zhe(t){rv.call(this,t)}function Qhe(t){et.call(this,null,t)}function Jhe(t){rv.call(this,t)}function ege(t){et.call(this,[],t)}function tge(t){rv.call(this,t)}var hHt,yHt,Whe,qhe,lHe,Hhe,uHe,Yhe,cHe=D(()=>{"use strict";qa();Ts();aHe();Xhe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};hHt=t=>t.values;It(Xhe,et,{transform(t,r){r.source||pt("Nest transform requires an upstream data source.");var n=t.generate,o=t.modified(),i=r.clone(),s=this.value;return(!s||o||r.changed())&&(s&&s.each(a=>{a.children&&qC(a.data)&&i.rem.push(a.data)}),this.value=s=TN({values:jr(t.keys).reduce((a,l)=>(a.key(l),a),gHt()).entries(i.source)},hHt),n&&s.each(a=>{a.children&&(a=An(a.data),i.add.push(a),i.source.push(a))}),Ghe(s,br,br)),i.source.root=s,i}});yHt=(t,r)=>t.parent===r.parent?1:2;It(rv,et,{transform(t,r){(!r.source||!r.source.root)&&pt(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(t.method),o=this.fields,i=r.source.root,s=t.as||o;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(O0(t.sort,a=>a.data)),bHt(n,this.params,t),n.separation&&n.separation(t.separation!==!1?yHt:w0);try{this.value=n(i)}catch(a){pt(a)}return i.each(a=>xHt(a,o,s)),r.reflow(t.modified()).modifies(s).modifies("leaf")}});Whe=["x","y","r","depth","children"];Khe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Whe.length,default:Whe}]};It(Khe,rv,{layout:Fhe,params:["radius","size","padding"],fields:Whe});qhe=["x0","y0","x1","y1","depth","children"];Zhe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qhe.length,default:qhe}]};It(Zhe,rv,{layout:Mhe,params:["size","round","padding"],fields:qhe});Qhe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};It(Qhe,et,{transform(t,r){r.source||pt("Stratify transform requires an upstream data source.");let n=this.value,o=t.modified(),i=r.fork(r.ALL).materialize(r.SOURCE),s=!n||o||r.changed(r.ADD_REM)||r.modified(t.key.fields)||r.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Ghe(QW().id(t.key).parentId(t.parentKey)(i.source),t.key,_0):Ghe(QW()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});lHe={tidy:Phe,cluster:The},Hhe=["x","y","depth","children"];Jhe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Hhe.length,default:Hhe}]};It(Jhe,rv,{layout(t){let r=t||"tidy";if(Or(lHe,r))return lHe[r]();pt("Unrecognized Tree layout method: "+r)},params:["size","nodeSize"],fields:Hhe});ege.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};It(ege,et,{transform(t,r){let n=this.value,o=r.source&&r.source.root,i=r.fork(r.NO_SOURCE),s={};return o||pt("TreeLinks transform requires a tree data source."),r.changed(r.ADD_REM)?(i.rem=n,r.visit(r.SOURCE,a=>s[br(a)]=1),o.each(a=>{let l=a.data,u=a.parent&&a.parent.data;u&&s[br(l)]&&s[br(u)]&&i.add.push(An({source:u,target:l}))}),this.value=i.add):r.changed(r.MOD)&&(r.visit(r.MOD,a=>s[br(a)]=1),n.forEach(a=>{(s[br(a.source)]||s[br(a.target)])&&i.mod.push(a)})),i}});uHe={binary:zhe,dice:Qm,slice:tv,slicedice:Uhe,squarify:_4,resquarify:Vhe},Yhe=["x0","y0","x1","y1","depth","children"];tge.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Yhe.length,default:Yhe}]};It(tge,rv,{layout(){let t=$he();return t.ratio=r=>{let n=t.tile();n.ratio&&t.tile(n.ratio(r))},t.method=r=>{Or(uHe,r)?t.tile(uHe[r]):pt("Unrecognized Treemap layout method: "+r)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Yhe})});function ige(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function fHe(){return new ige}var nge,oge,JE,vHt,yp,dHe=D(()=>{"use strict";nge=Math.PI,oge=2*nge,JE=1e-6,vHt=oge-JE;ige.prototype=fHe.prototype={constructor:ige,moveTo:function(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function(t,r,n,o){this._+="Q"+ +t+","+ +r+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(t,r,n,o,i,s){this._+="C"+ +t+","+ +r+","+ +n+","+ +o+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,r,n,o,i){t=+t,r=+r,n=+n,o=+o,i=+i;var s=this._x1,a=this._y1,l=n-t,u=o-r,c=s-t,f=a-r,d=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=r);else if(d>JE)if(!(Math.abs(f*l-u*c)>JE)||!i)this._+="L"+(this._x1=t)+","+(this._y1=r);else{var p=n-s,m=o-a,h=l*l+u*u,g=p*p+m*m,y=Math.sqrt(h),b=Math.sqrt(d),x=i*Math.tan((nge-Math.acos((h+d-g)/(2*y*b)))/2),v=x/b,w=x/y;Math.abs(v-1)>JE&&(this._+="L"+(t+v*c)+","+(r+v*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>c*m)+","+(this._x1=t+w*l)+","+(this._y1=r+w*u)}},arc:function(t,r,n,o,i,s){t=+t,r=+r,n=+n,s=!!s;var a=n*Math.cos(o),l=n*Math.sin(o),u=t+a,c=r+l,f=1^s,d=s?o-i:i-o;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+c:(Math.abs(this._x1-u)>JE||Math.abs(this._y1-c)>JE)&&(this._+="L"+u+","+c),n&&(d<0&&(d=d%oge+oge),d>vHt?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(r-l)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c):d>JE&&(this._+="A"+n+","+n+",0,"+ +(d>=nge)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=r+n*Math.sin(i))))},rect:function(t,r,n,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};yp=fHe});var IN=D(()=>{"use strict";dHe()});function $n(t){return function(){return t}}var S4=D(()=>{"use strict"});function mHe(t){return t>1?0:t<-1?g_:Math.acos(t)}function age(t){return t>=1?C4:t<=-1?-C4:Math.asin(t)}var sge,Fl,h_,pHe,tq,Jm,eT,el,g_,C4,rq,nq=D(()=>{"use strict";sge=Math.abs,Fl=Math.atan2,h_=Math.cos,pHe=Math.max,tq=Math.min,Jm=Math.sin,eT=Math.sqrt,el=1e-12,g_=Math.PI,C4=g_/2,rq=2*g_});function wHt(t){return t.innerRadius}function _Ht(t){return t.outerRadius}function SHt(t){return t.startAngle}function CHt(t){return t.endAngle}function EHt(t){return t&&t.padAngle}function THt(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<el))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function oq(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/eT(l*l+u*u),f=c*u,d=-c*l,p=t+f,m=r+d,h=n+f,g=o+d,y=(p+h)/2,b=(m+g)/2,x=h-p,v=g-m,w=x*x+v*v,_=i-s,C=p*g-h*m,S=(v<0?-1:1)*eT(pHe(0,_*_*w-C*C)),E=(C*v-x*S)/w,A=(-C*x-v*S)/w,N=(C*v+x*S)/w,k=(-C*x+v*S)/w,M=E-y,I=A-b,L=N-y,P=k-b;return M*M+I*I>L*L+P*P&&(E=N,A=k),{cx:E,cy:A,x01:-f,y01:-d,x11:E*(i/_-1),y11:A*(i/_-1)}}function lge(){var t=wHt,r=_Ht,n=$n(0),o=null,i=SHt,s=CHt,a=EHt,l=null;function u(){var c,f,d=+t.apply(this,arguments),p=+r.apply(this,arguments),m=i.apply(this,arguments)-C4,h=s.apply(this,arguments)-C4,g=sge(h-m),y=h>m;if(l||(l=c=yp()),p<d&&(f=p,p=d,d=f),!(p>el))l.moveTo(0,0);else if(g>rq-el)l.moveTo(p*h_(m),p*Jm(m)),l.arc(0,0,p,m,h,!y),d>el&&(l.moveTo(d*h_(h),d*Jm(h)),l.arc(0,0,d,h,m,y));else{var b=m,x=h,v=m,w=h,_=g,C=g,S=a.apply(this,arguments)/2,E=S>el&&(o?+o.apply(this,arguments):eT(d*d+p*p)),A=tq(sge(p-d)/2,+n.apply(this,arguments)),N=A,k=A,M,I;if(E>el){var L=age(E/d*Jm(S)),P=age(E/p*Jm(S));(_-=L*2)>el?(L*=y?1:-1,v+=L,w-=L):(_=0,v=w=(m+h)/2),(C-=P*2)>el?(P*=y?1:-1,b+=P,x-=P):(C=0,b=x=(m+h)/2)}var R=p*h_(b),V=p*Jm(b),G=d*h_(w),U=d*Jm(w);if(A>el){var Y=p*h_(x),X=p*Jm(x),pe=d*h_(v),$=d*Jm(v),F;if(g<g_&&(F=THt(R,V,pe,$,Y,X,G,U))){var z=R-F[0],q=V-F[1],ee=Y-F[0],ae=X-F[1],Q=1/Jm(mHe((z*ee+q*ae)/(eT(z*z+q*q)*eT(ee*ee+ae*ae)))/2),le=eT(F[0]*F[0]+F[1]*F[1]);N=tq(A,(d-le)/(Q-1)),k=tq(A,(p-le)/(Q+1))}}C>el?k>el?(M=oq(pe,$,R,V,p,k,y),I=oq(Y,X,G,U,p,k,y),l.moveTo(M.cx+M.x01,M.cy+M.y01),k<A?l.arc(M.cx,M.cy,k,Fl(M.y01,M.x01),Fl(I.y01,I.x01),!y):(l.arc(M.cx,M.cy,k,Fl(M.y01,M.x01),Fl(M.y11,M.x11),!y),l.arc(0,0,p,Fl(M.cy+M.y11,M.cx+M.x11),Fl(I.cy+I.y11,I.cx+I.x11),!y),l.arc(I.cx,I.cy,k,Fl(I.y11,I.x11),Fl(I.y01,I.x01),!y))):(l.moveTo(R,V),l.arc(0,0,p,b,x,!y)):l.moveTo(R,V),!(d>el)||!(_>el)?l.lineTo(G,U):N>el?(M=oq(G,U,Y,X,d,-N,y),I=oq(R,V,pe,$,d,-N,y),l.lineTo(M.cx+M.x01,M.cy+M.y01),N<A?l.arc(M.cx,M.cy,N,Fl(M.y01,M.x01),Fl(I.y01,I.x01),!y):(l.arc(M.cx,M.cy,N,Fl(M.y01,M.x01),Fl(M.y11,M.x11),!y),l.arc(0,0,d,Fl(M.cy+M.y11,M.cx+M.x11),Fl(I.cy+I.y11,I.cx+I.x11),y),l.arc(I.cx,I.cy,N,Fl(I.y11,I.x11),Fl(I.y01,I.x01),!y))):l.arc(0,0,d,w,v,y)}if(l.closePath(),c)return l=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-g_/2;return[h_(f)*c,Jm(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:$n(+c),u):t},u.outerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:$n(+c),u):r},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:$n(+c),u):n},u.padRadius=function(c){return arguments.length?(o=c==null?null:typeof c=="function"?c:$n(+c),u):o},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:$n(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:$n(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:$n(+c),u):a},u.context=function(c){return arguments.length?(l=c??null,u):l},u}var hHe=D(()=>{"use strict";IN();S4();nq()});function iq(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var _zn,uge=D(()=>{"use strict";_zn=Array.prototype.slice});function gHe(t){this._context=t}function tT(t){return new gHe(t)}var sq=D(()=>{"use strict";gHe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function aq(t){return t[0]}function lq(t){return t[1]}var cge=D(()=>{"use strict"});function E4(t,r){var n=$n(!0),o=null,i=tT,s=null;t=typeof t=="function"?t:t===void 0?aq:$n(t),r=typeof r=="function"?r:r===void 0?lq:$n(r);function a(l){var u,c=(l=iq(l)).length,f,d=!1,p;for(o==null&&(s=i(p=yp())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(f,u,l),+r(f,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:$n(+l),a):t},a.y=function(l){return arguments.length?(r=typeof l=="function"?l:$n(+l),a):r},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:$n(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,o!=null&&(s=i(o)),a):i},a.context=function(l){return arguments.length?(l==null?o=s=null:s=i(o=l),a):o},a}var fge=D(()=>{"use strict";IN();uge();S4();sq();cge()});function uq(t,r,n){var o=null,i=$n(!0),s=null,a=tT,l=null;t=typeof t=="function"?t:t===void 0?aq:$n(+t),r=typeof r=="function"?r:r===void 0?$n(0):$n(+r),n=typeof n=="function"?n:n===void 0?lq:$n(+n);function u(f){var d,p,m,h=(f=iq(f)).length,g,y=!1,b,x=new Array(h),v=new Array(h);for(s==null&&(l=a(b=yp())),d=0;d<=h;++d){if(!(d<h&&i(g=f[d],d,f))===y)if(y=!y)p=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=d-1;m>=p;--m)l.point(x[m],v[m]);l.lineEnd(),l.areaEnd()}y&&(x[d]=+t(g,d,f),v[d]=+r(g,d,f),l.point(o?+o(g,d,f):x[d],n?+n(g,d,f):v[d]))}if(b)return l=null,b+""||null}function c(){return E4().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:$n(+f),o=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:$n(+f),u):t},u.x1=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:$n(+f),u):o},u.y=function(f){return arguments.length?(r=typeof f=="function"?f:$n(+f),n=null,u):r},u.y0=function(f){return arguments.length?(r=typeof f=="function"?f:$n(+f),u):r},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:$n(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(r)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(o).y(r)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:$n(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}var yHe=D(()=>{"use strict";IN();uge();S4();sq();fge();cge()});var bHe,xHe=D(()=>{"use strict";nq();bHe={draw:function(t,r){var n=Math.sqrt(r/g_);t.moveTo(n,0),t.arc(0,0,n,0,rq)}}});function dge(t,r){var n=null;t=typeof t=="function"?t:$n(t||bHe),r=typeof r=="function"?r:$n(r===void 0?64:+r);function o(){var i;if(n||(n=i=yp()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(i){return arguments.length?(t=typeof i=="function"?i:$n(i),o):t},o.size=function(i){return arguments.length?(r=typeof i=="function"?i:$n(+i),o):r},o.context=function(i){return arguments.length?(n=i??null,o):n},o}var vHe=D(()=>{"use strict";IN();xHe();S4()});function bp(){}var T4=D(()=>{"use strict"});function DN(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function A4(t){this._context=t}function pge(t){return new A4(t)}var k4=D(()=>{"use strict";A4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:DN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:DN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function wHe(t){this._context=t}function mge(t){return new wHe(t)}var _He=D(()=>{"use strict";T4();k4();wHe.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:DN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function SHe(t){this._context=t}function hge(t){return new SHe(t)}var CHe=D(()=>{"use strict";k4();SHe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:DN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function EHe(t,r){this._basis=new A4(t),this._beta=r}var gge,THe=D(()=>{"use strict";k4();EHe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};gge=function t(r){function n(o){return r===1?new A4(o):new EHe(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function NN(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function cq(t,r){this._context=t,this._k=(1-r)/6}var yge,I4=D(()=>{"use strict";cq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:NN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:NN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};yge=function t(r){function n(o){return new cq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function fq(t,r){this._context=t,this._k=(1-r)/6}var bge,xge=D(()=>{"use strict";T4();I4();fq.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:NN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};bge=function t(r){function n(o){return new fq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function dq(t,r){this._context=t,this._k=(1-r)/6}var vge,wge=D(()=>{"use strict";I4();dq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:NN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};vge=function t(r){function n(o){return new dq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function D4(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>el){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>el){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function AHe(t,r){this._context=t,this._alpha=r}var _ge,pq=D(()=>{"use strict";nq();I4();AHe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:D4(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};_ge=function t(r){function n(o){return r?new AHe(o,r):new cq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function kHe(t,r){this._context=t,this._alpha=r}var Sge,IHe=D(()=>{"use strict";xge();T4();pq();kHe.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:D4(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Sge=function t(r){function n(o){return r?new kHe(o,r):new fq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function DHe(t,r){this._context=t,this._alpha=r}var Cge,NHe=D(()=>{"use strict";wge();pq();DHe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:D4(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Cge=function t(r){function n(o){return r?new DHe(o,r):new dq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function FHe(t){this._context=t}function Ege(t){return new FHe(t)}var OHe=D(()=>{"use strict";T4();FHe.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function MHe(t){return t<0?-1:1}function RHe(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(MHe(s)+MHe(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function jHe(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Tge(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function mq(t){this._context=t}function PHe(t){this._context=new LHe(t)}function LHe(t){this._context=t}function Age(t){return new mq(t)}function kge(t){return new PHe(t)}var BHe=D(()=>{"use strict";mq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tge(this,this._t0,jHe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Tge(this,jHe(this,n=RHe(this,t,r)),n);break;default:Tge(this,this._t0,n=RHe(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(PHe.prototype=Object.create(mq.prototype)).point=function(t,r){mq.prototype.point.call(this,r,t)};LHe.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function zHe(t){this._context=t}function $He(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function Ige(t){return new zHe(t)}var UHe=D(()=>{"use strict";zHe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=$He(t),i=$He(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function hq(t,r){this._context=t,this._t=r}function Dge(t){return new hq(t,.5)}function Nge(t){return new hq(t,0)}function Fge(t){return new hq(t,1)}var VHe=D(()=>{"use strict";hq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var GHe=D(()=>{"use strict";hHe();yHe();fge();vHe();_He();CHe();k4();THe();xge();wge();I4();IHe();NHe();pq();OHe();sq();BHe();UHe();VHe()});function HHe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function AHt(t,r){var n=HHe(t);return function(o,i){return r(n(o),i,t)}}function qHe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function Qc(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function kHt(t){return t<0?"-"+Qc(-t,6):t>9999?"+"+Qc(t,6):Qc(t,4)}function IHt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":kHt(t.getUTCFullYear(),4)+"-"+Qc(t.getUTCMonth()+1,2)+"-"+Qc(t.getUTCDate(),2)+(i?"T"+Qc(r,2)+":"+Qc(n,2)+":"+Qc(o,2)+"."+Qc(i,3)+"Z":o?"T"+Qc(r,2)+":"+Qc(n,2)+":"+Qc(o,2)+"Z":n||r?"T"+Qc(r,2)+":"+Qc(n,2)+"Z":"")}function jge(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var m,h,g=i(d,function(y,b){if(m)return m(y,b-1);h=y,m=p?AHt(y,p):HHe(y)});return g.columns=h||[],g}function i(d,p){var m=[],h=d.length,g=0,y=0,b,x=h<=0,v=!1;d.charCodeAt(h-1)===N4&&--h,d.charCodeAt(h-1)===Rge&&--h;function w(){if(x)return Oge;if(v)return v=!1,WHe;var C,S=g,E;if(d.charCodeAt(S)===Mge){for(;g++<h&&d.charCodeAt(g)!==Mge||d.charCodeAt(++g)===Mge;);return(C=g)>=h?x=!0:(E=d.charCodeAt(g++))===N4?v=!0:E===Rge&&(v=!0,d.charCodeAt(g)===N4&&++g),d.slice(S+1,C-1).replace(/""/g,'"')}for(;g<h;){if((E=d.charCodeAt(C=g++))===N4)v=!0;else if(E===Rge)v=!0,d.charCodeAt(g)===N4&&++g;else if(E!==n)continue;return d.slice(S,C)}return x=!0,d.slice(S,h)}for(;(b=w())!==Oge;){for(var _=[];b!==WHe&&b!==Oge;)_.push(b),b=w();p&&(_=p(_,y++))==null||m.push(_)}return m}function s(d,p){return d.map(function(m){return p.map(function(h){return f(m[h])}).join(t)})}function a(d,p){return p==null&&(p=qHe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=qHe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?IHt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var WHe,Oge,Mge,N4,Rge,YHe=D(()=>{"use strict";WHe={},Oge={},Mge=34,N4=10,Rge=13});var XHe=D(()=>{"use strict";YHe()});function KHe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rT(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var F4=D(()=>{"use strict"});function iy(t){return t=rT(Math.abs(t)),t?t[1]:NaN}var O4=D(()=>{"use strict";F4()});function ZHe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var QHe=D(()=>{"use strict"});function JHe(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var eYe=D(()=>{"use strict"});function nv(t){if(!(r=DHt.exec(t)))throw new Error("invalid format: "+t);var r;return new gq({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function gq(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var DHt,Pge=D(()=>{"use strict";DHt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;nv.prototype=gq.prototype;gq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function tYe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var rYe=D(()=>{"use strict"});function nYe(t,r){var n=rT(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(Lge=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+rT(t,Math.max(0,r+s-1))[0]}var Lge,Bge=D(()=>{"use strict";F4()});function $ge(t,r){var n=rT(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var oYe=D(()=>{"use strict";F4()});var zge,iYe=D(()=>{"use strict";F4();Bge();oYe();zge={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:KHe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>$ge(t*100,r),r:$ge,s:nYe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function Uge(t){return t}var sYe=D(()=>{"use strict"});function M4(t){var r=t.grouping===void 0||t.thousands===void 0?Uge:ZHe(aYe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Uge:JHe(aYe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=nv(d);var p=d.fill,m=d.align,h=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):zge[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&m==="=")&&(y=!0,p="0",m="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=g==="$"?o:/[%p]/.test(_)?a:"",E=zge[_],A=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(k){var M=C,I=S,L,P,R;if(_==="c")I=E(k)+I,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=tYe(k)),V&&+k==0&&h!=="+"&&(V=!1),M=(V?h==="("?h:l:h==="-"||h==="("?"":h)+M,I=(_==="s"?lYe[8+Lge/3]:"")+I+(V&&h==="("?")":""),A){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){I=(R===46?i+k.slice(L+1):k.slice(L))+I,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=M.length+k.length+I.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-I.length:1/0),U=""),m){case"<":k=M+k+I+U;break;case"=":k=M+U+k+I;break;case"^":k=U.slice(0,G=U.length>>1)+M+k+I+U.slice(G);break;default:k=U+M+k+I;break}return s(k)}return N.toString=function(){return d+""},N}function f(d,p){var m=c((d=nv(d),d.type="f",d)),h=Math.max(-8,Math.min(8,Math.floor(iy(p)/3)))*3,g=Math.pow(10,-h),y=lYe[8+h/3];return function(b){return m(g*b)+y}}return{format:c,formatPrefix:f}}var aYe,lYe,Vge=D(()=>{"use strict";O4();QHe();eYe();Pge();rYe();iYe();Bge();sYe();aYe=Array.prototype.map,lYe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function Gge(t){return yq=M4(t),bq=yq.format,xq=yq.formatPrefix,yq}var yq,bq,xq,uYe=D(()=>{"use strict";Vge();Gge({thousands:",",grouping:[3],currency:["$",""]})});function Wge(t){return Math.max(0,-iy(Math.abs(t)))}var cYe=D(()=>{"use strict";O4()});function qge(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iy(r)/3)))*3-iy(Math.abs(t)))}var fYe=D(()=>{"use strict";O4()});function Hge(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,iy(r)-iy(t))+1}var dYe=D(()=>{"use strict";O4()});var pYe=D(()=>{"use strict";uYe();Vge();Pge();cYe();fYe();dYe()});function R4(t){let r={};return n=>r[n]||(r[n]=t(n))}function NHt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=FHt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function FHt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function hYe(t){let r=R4(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=nv(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return NHt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=nv(a??",f");let l=Zu(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=qge(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=Hge(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=Wge(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function gYe(){return Yge=hYe({format:bq,formatPrefix:xq})}function yYe(t){return hYe(M4(t))}function j4(t){return arguments.length?Yge=yYe(t):Yge}function mYe(t,r,n){n=n||{},ln(n)||pt("Invalid time multi-format specifier: ".concat(n));let o=r(rd),i=r($c),s=r(Bc),a=r(tc),l=r(Hs),u=r(Al),c=r(ec),f=r(Ha),d=t(n[op]||".%L"),p=t(n[rd]||":%S"),m=t(n[$c]||"%I:%M"),h=t(n[Bc]||"%I %p"),g=t(n[tc]||n[Tl]||"%a %d"),y=t(n[Hs]||"%b %d"),b=t(n[Al]||"%B"),x=t(n[ec]||"%B"),v=t(n[Ha]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?m:a(w)<w?h:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function bYe(t){let r=R4(t.format),n=R4(t.utcFormat);return{timeFormat:o=>Kn(o)?r(o):mYe(r,Fx,o),utcFormat:o=>Kn(o)?n(o):mYe(n,Ox,o),timeParse:R4(t.parse),utcParse:R4(t.utcParse)}}function xYe(){return Xge=bYe({format:r_,parse:NG,utcFormat:n_,utcParse:FG})}function vYe(t){return bYe(QD(t))}function nT(t){return arguments.length?Xge=vYe(t):Xge}function vq(t,r){let n=t?yYe(t):j4(),o=r?vYe(r):nT();return Kge(n,o)}function Zge(t,r){let n=arguments.length;return n&&n!==2&&pt("defaultLocale expects either zero or two arguments."),n?Kge(j4(t),nT(r)):Kge(j4(),nT())}function wYe(){return gYe(),xYe(),Zge()}var Yge,Xge,Kge,wq=D(()=>{"use strict";Vo();pYe();cD();Ts();eN();gYe();xYe();Kge=(t,r)=>on({},t,r)});function jHt(t,r){return n=>({options:n||{},sanitize:LHt,load:PHt,fileAccess:!!r,file:BHt(r),http:zHt(t)})}function PHt(t,r){return Be(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function LHt(t,r){return Be(this,null,function*(){r=on({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=MHt.test(t.replace(RHt,""));(t==null||typeof t!="string"||!l)&&pt("Sanitize failure, invalid URI: "+Pr(t));let u=OHt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(_Ye))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(_Ye.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function BHt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):$Ht}function $Ht(){return Be(this,null,function*(){pt("No file system access.")})}function zHt(t){return t?function(r,n){return Be(this,null,function*(){let o=on({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Tn(s[i])?s[i]():s.text():pt(s.status+""+s.statusText)})}:UHt}function UHt(){return Be(this,null,function*(){pt("No HTTP fetch method available.")})}function EYe(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=_q.length,i=_q.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&VHt(u)&&!_q[l](u)&&(i[l]=0,++a,a===_q.length))return"string";return HHt[i.reduce((s,a)=>s===0?a:s,0)-1]}function TYe(t,r){return r.reduce((n,o)=>(n[o]=EYe(t,o),n),{})}function SYe(t){let r=function(n,o){let i={delimiter:t};return Jge(n,o?on(o,i):i)};return r.responseType="text",r}function Jge(t,r){return r.header&&(t=r.header.map(Pr).join(r.delimiter)+`
`+t),jge(r.delimiter).parse(t+"")}function YHt(t){return typeof Buffer=="function"&&Tn(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function e0e(t,r){let n=r&&r.property?_m(r.property):Xu;return ln(t)&&!YHt(t)?XHt(n(t),r):n(JSON.parse(t))}function XHt(t,r){return!Wr(t)&&Nse(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function AYe(t,r){let n,o,i,s;return t=e0e(t,r),r&&r.feature?(n=BC,i=r.feature):r&&r.mesh?(n=$C,i=r.mesh,s=KHt[r.filter]):pt("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):pt("Invalid TopoJSON object: "+i),o&&o.features||[o]}function t0e(t,r){return arguments.length>1?(Sq[t]=r,this):Or(Sq,t)?Sq[t]:null}function ZHt(t){let r=t0e(t);return r&&r.responseType||"text"}function QHt(t,r,n,o){r=r||{};let i=t0e(r.type||"json");return i||pt("Unknown data format type: "+r.type),t=i(t,r),r.parse&&JHt(t,r.parse,n,o),Or(t,"columns")&&delete t.columns,t}function JHt(t,r,n,o){if(!t.length)return;let i=nT();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=TYe(t,s)),s=Object.keys(r);let p=s.map(m=>{let h=r[m],g,y;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return g=h.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!Qge[h])throw Error("Illegal format pattern: "+m+":"+h);return Qge[h]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var OHt,MHt,RHt,_Ye,VHt,GHt,WHt,CYe,qHt,Qge,_q,HHt,KHt,Sq,Cq,r0e=D(()=>{"use strict";Ts();XHe();C7();wq();OHt=/^(data:|([A-Za-z]+:)?\/\/)/,MHt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,RHt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_Ye="file://";VHt=t=>t!=null&&t===t,GHt=t=>t==="true"||t==="false"||t===!0||t===!1,WHt=t=>!Number.isNaN(Date.parse(t)),CYe=t=>!Number.isNaN(+t)&&!(t instanceof Date),qHt=t=>CYe(t)&&Number.isInteger(+t),Qge={boolean:Rse,integer:Cm,number:Cm,date:jse,string:Pse,unknown:Xu},_q=[GHt,qHt,CYe,WHt],HHt=["boolean","integer","number","date"];Jge.responseType="text";e0e.responseType="json";KHt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};AYe.responseType="json";Sq={dsv:Jge,csv:SYe(","),tsv:SYe("	"),json:e0e,topojson:AYe};Cq=jHt(typeof fetch<"u"&&fetch,null)});function eYt(){QYe=0}function w0e(t){return t&&t.gradient}function JYe(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?Fq:"";return i||(i=t.id="gradient_"+QYe++,o==="radial"?(t.x1=sy(t.x1,.5),t.y1=sy(t.y1,.5),t.r1=sy(t.r1,0),t.x2=sy(t.x2,.5),t.y2=sy(t.y2,.5),t.r2=sy(t.r2,.5),s=Fq):(t.x1=sy(t.x1,0),t.y1=sy(t.y1,0),t.x2=sy(t.x2,1),t.y2=sy(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function sy(t,r){return t??r}function _0e(t,r){var n=[],o;return o={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:r?r[0]:1,y2:r?r[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),o}}}function S0e(t,r,n){var o=Or(kYe,t)&&kYe[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function uT(t){let r=[],n,o,i,s,a,l,u,c,f,d,p=t.slice().replace(P4[0],"###$1").split(P4[1]).slice(1);for(u=0,f=p.length;u<f;++u){for(n=p[u],o=n.slice(1).trim().replace(P4[2],"$1###$2").replace(P4[3],"$1###$2").split(P4[4]),a=n.charAt(0),i=[a],c=0,d=o.length;c<d;++c)(s=+o[c])===s&&i.push(s);if(l=tYt[a.toLowerCase()],i.length-1>l){let m=i.length;for(c=1,r.push([a].concat(i.slice(c,c+=l))),a=a==="M"?"L":a==="m"?"l":a;c<m;c+=l)r.push([a].concat(i.slice(c,c+l)))}else r.push(i)}return r}function nYt(t,r,n,o,i,s,a,l,u){let c=eXe.call(arguments);if(n0e[c])return n0e[c];let f=a*__,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let m=p*(l-t)*.5+d*(u-r)*.5,h=p*(u-r)*.5-d*(l-t)*.5,g=m*m/(n*n)+h*h/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,C=y*t+b*r,S=x*t+v*r,A=1/((C-w)*(C-w)+(S-_)*(S-_))-.25;A<0&&(A=0);let N=Math.sqrt(A);s==i&&(N=-N);let k=.5*(w+C)-N*(S-_),M=.5*(_+S)+N*(C-w),I=Math.atan2(_-M,w-k),P=Math.atan2(S-M,C-k)-I;P<0&&s===1?P+=ay:P>0&&s===0&&(P-=ay);let R=Math.ceil(Math.abs(P/(oT+.001))),V=[];for(let G=0;G<R;++G){let U=I+G*P/R,Y=I+(G+1)*P/R;V[G]=[k,M,U,Y,n,o,d,p]}return n0e[c]=V}function oYt(t){let r=eXe.call(t);if(o0e[r])return o0e[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,m=c*l,h=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+h-w*g,C=o+g+w*h,S=n+y,E=o+b,A=S+w*b,N=E-w*y;return o0e[r]=[f*_+d*C,p*_+m*C,f*A+d*N,p*A+m*N,f*S+d*E,p*S+m*E]}function iYt(t,r,n){let o=xp[0]=t[0];if(o==="a"||o==="A")xp[1]=r*t[1],xp[2]=n*t[2],xp[3]=t[3],xp[4]=t[4],xp[5]=t[5],xp[6]=r*t[6],xp[7]=n*t[7];else if(o==="h"||o==="H")xp[1]=r*t[1];else if(o==="v"||o==="V")xp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)xp[i]=(i%2==1?r:n)*t[i];return xp}function MN(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,m,h,g;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var y=0,b=r.length;y<b;++y){switch(a=r[y],(i!==1||s!==1)&&(a=iYt(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],t.moveTo(u+n,c+o);break;case"c":p=u+a[5],m=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,m+o),u=p,c=m;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],m=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,m+o),f=u+a[1],d=c+a[2],u=p,c=m;break;case"S":p=a[3],m=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,m+o),u=p,c=m,f=a[1],d=a[2];break;case"q":p=u+a[3],m=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,m+o),u=p,c=m;break;case"Q":p=a[3],m=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,m+o),u=p,c=m,f=a[1],d=a[2];break;case"t":p=u+a[1],m=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-h,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),h=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,m+o),u=p,c=m,f=u+a[1],d=c+a[2];break;case"T":p=a[1],m=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,m+o),u=p,c=m;break;case"a":IYe(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":IYe(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":t.closePath();break}l=a}}function IYe(t,r,n,o){let i=nYt(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=oYt(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function tXe(t){return Or(NYe,t)?NYe[t]:sYt(t)}function sYt(t){if(!Or(i0e,t)){let r=uT(t);i0e[t]={draw:function(n,o){MN(n,r,0,0,Math.sqrt(o)/2)}}}return i0e[t]}function aYt(t){return t.x}function lYt(t){return t.y}function uYt(t){return t.width}function cYt(t){return t.height}function ov(t){return typeof t=="function"?t:()=>+t}function Eq(t,r,n){return Math.max(r,Math.min(t,n))}function rXe(){var t=aYt,r=lYt,n=uYt,o=cYt,i=ov(0),s=i,a=i,l=i,u=null;function c(f,d,p){var m,h=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=Eq(+i.call(this,f),0,x),w=Eq(+s.call(this,f),0,x),_=Eq(+a.call(this,f),0,x),C=Eq(+l.call(this,f),0,x);if(u||(u=m=yp()),v<=0&&w<=0&&_<=0&&C<=0)u.rect(h,g,y,b);else{var S=h+y,E=g+b;u.moveTo(h+v,g),u.lineTo(S-w,g),u.bezierCurveTo(S-y_*w,g,S,g+y_*w,S,g+w),u.lineTo(S,E-C),u.bezierCurveTo(S,E-y_*C,S-y_*C,E,S-C,E),u.lineTo(h+_,E),u.bezierCurveTo(h+y_*_,E,h,E-y_*_,h,E-_),u.lineTo(h,g+v),u.bezierCurveTo(h,g+y_*v,h+y_*v,g,h+v,g),u.closePath()}if(m)return u=null,m+""||null}return c.x=function(f){return arguments.length?(t=ov(f),c):t},c.y=function(f){return arguments.length?(r=ov(f),c):r},c.width=function(f){return arguments.length?(n=ov(f),c):n},c.height=function(f){return arguments.length?(o=ov(f),c):o},c.cornerRadius=function(f,d,p,m){return arguments.length?(i=ov(f),s=d!=null?ov(d):i,l=p!=null?ov(p):i,a=m!=null?ov(m):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function nXe(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,m){let h=m/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.sqrt(g*g+y*y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*h,p-y*h),i.arc(d,p,h,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,h,0,ay);i.closePath()}else s=1;a=d,l=p,u=h}function f(d){var p,m=d.length,h,g=!1,y;for(i==null&&(i=y=yp()),p=0;p<=m;++p)!(p<m&&o(h=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(h,p,d),+r(h,p,d),+n(h,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function q4(t,r){return t??r}function C0e(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function RYt(t,r){return kYt.context(t)(r)}function jYt(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?DYt:IYt).curve(S0e(o,n.orient,n.tension)).context(t)(r)}function PYt(t,r){let n=r[0],o=n.interpolate||"linear";return NYt.curve(S0e(o,n.orient,n.tension)).context(t)(r)}function LN(t,r,n,o){return FYt.context(t)(r,n,o)}function LYt(t,r){return(r.mark.shape||r.shape).context(t)(r)}function BYt(t,r){return OYt.context(t)(r)}function $Yt(t,r){return MYt.context(t)(r)}function iXe(){oXe=1}function E0e(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+oXe++),a=i.clipping[s]||(i.clipping[s]={id:s});return Tn(o)?a.path=o(null):C0e(n)?a.path=LN(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function du(t){this.clear(),t&&this.union(t)}function T0e(t){this.mark=t,this.bounds=this.bounds||new du}function A0e(t){T0e.call(this,t),this.items=this.items||[]}function k0e(t){this._pending=0,this._loader=t||Cq()}function FYe(t){t._pending+=1}function L4(t){t._pending-=1}function cT(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?zYt(r,o):0))}return t}function zYt(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function X4(t,r){return Vq=t,r?(aT=r*__,f0e=p0e=Math.cos(aT),kq=Math.sin(aT),d0e=-kq):(f0e=p0e=1,aT=kq=d0e=0),VYt}function RYe(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function jYe(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>rYt?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(PYe(u,t,r,n,o)),0<c&&c<1&&i(PYe(c,t,r,n,o))}function PYe(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function I0e(t){return function(r,n){if(!w_)return!0;t(w_,r),m0e.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=m0e;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(w_.isPointInPath(u,l))return!0;return!1}}function D0e(t,r){return r.contains(t.x||0,t.y||0)}function sXe(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(m0e.set(n,o,n+i,o+s))}function aXe(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return ON(r,n,o,i,s)}function ON(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,m,h,g,y;for(y=0;y<4;++y){if(y===0&&(m=-c,h=-(s-r)),y===1&&(m=c,h=l-r),y===2&&(m=-f,h=-(a-n)),y===3&&(m=f,h=u-n),Math.abs(m)<1e-10&&h<0)return!1;if(g=h/m,m<0){if(g>p)return!1;g>d&&(d=g)}else if(m>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function RN(t,r){t.globalCompositeOperation=r.blend||"source-over"}function eh(t,r){return t??r}function LYe(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function GYt(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+eh(r.x1,.5)*o,n.y1+eh(r.y1,.5)*i,Math.max(o,i)*eh(r.r1,0),n.x1+eh(r.x2,.5)*o,n.y1+eh(r.y2,.5)*i,Math.max(o,i)*eh(r.r2,.5));else{let a=eh(r.x1,0),l=eh(r.y1,0),u=eh(r.x2,1),c=eh(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=Uc(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=LYe(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return LYe(s,r.stops)}function lXe(t,r,n){return w0e(n)?GYt(t,n,r.bounds):n}function Oq(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=lXe(t,r,r.fill),!0):!1}function jN(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=lXe(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||WYt),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function qYt(t,r){return t.zindex-r.zindex||t.index-r.index}function N0e(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(qYt)}function nh(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=N0e(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function Mq(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=N0e(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function F0e(t){return function(r,n,o){nh(n,i=>{(!o||o.intersects(i.bounds))&&uXe(t,r,i,i)})}}function HYt(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&uXe(t,r,n.items[0],n.items)}}function uXe(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(RN(r,n),n.fill&&Oq(r,n,i)&&r.fill(),n.stroke&&jN(r,n,i)&&r.stroke()))}function Gq(t){return t=t||_0,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,Mq(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function K4(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function O0e(t){return Gq(K4(t))}function lT(t,r){return"translate("+t+","+r+")"}function M0e(t){return"rotate("+t+")"}function YYt(t,r){return"scale("+t+","+r+")"}function cXe(t){return lT(t.x||0,t.y||0)}function XYt(t){return lT(t.x||0,t.y||0)+(t.angle?" "+M0e(t.angle):"")}function KYt(t){return lT(t.x||0,t.y||0)+(t.angle?" "+M0e(t.angle):"")+(t.scaleX||t.scaleY?" "+YYt(t.scaleX||1,t.scaleY||1):"")}function R0e(t,r,n){function o(a,l){a("transform",XYt(l)),a("d",r(null,l))}function i(a,l){return r(X4(a,l.angle),l),cT(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=__),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:F0e(s),pick:O0e(s),isect:n||I0e(s)}}function QYt(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function JYt(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function eXt(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function j0e(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(X4(u),f),cT(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=K4(s);function l(u,c,f,d,p,m){var h=c.items,g=c.bounds;return!h||!h.length||g&&!g.contains(p,m)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,h,f,d)?h[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:HYt(s),pick:l,isect:D0e,tip:n}}function rXt(t,r){var n=r.clip;t.save(),Tn(n)?(t.beginPath(),n(t),t.clip()):fXe(t,r.group)}function fXe(t,r){t.beginPath(),C0e(r)?LN(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function dXe(t){let r=eh(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function nXt(t,r){t("transform",cXe(r))}function pXe(t,r){let n=dXe(r);t("d",LN(null,r,n,n))}function oXt(t,r){t("class","background"),t("aria-hidden",!0),pXe(t,r)}function iXt(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?pXe(t,r):t("d","")}function sXt(t,r,n){let o=r.clip?E0e(n,r,r):null;t("clip-path",o)}function aXt(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),cT(t,r),t.translate(r.x||0,r.y||0)}function V4(t,r,n,o){let i=dXe(r);t.beginPath(),LN(t,r,(n||0)+i,(o||0)+i)}function fXt(t,r,n){nh(r,o=>{let i=o.x||0,s=o.y||0,a=o.strokeForeground,l=o.opacity==null?1:o.opacity;(o.stroke||o.fill)&&l&&(V4(t,o,i,s),RN(t,o),o.fill&&Oq(t,o,l)&&t.fill(),o.stroke&&!a&&jN(t,o,l)&&t.stroke()),t.save(),t.translate(i,s),o.clip&&fXe(t,o),n&&n.translate(-i,-s),nh(o,u=>{this.draw(t,u,n)}),n&&n.translate(i,s),t.restore(),a&&o.stroke&&l&&(V4(t,o,i,s),RN(t,o),jN(t,o,l)&&t.stroke())})}function dXt(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return Mq(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let m=f+(u.width||0),h=d+(u.height||0),g=u.clip;if(g&&(i<f||i>m||s<d||s>h))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&C0e(u)&&!cXt(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&uXt(t,u,a,l)?(t.restore(),u):(c=Mq(u,x=>pXt(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&lXt(t,u,a,l)&&(c=u),t.restore(),c||null)})}function pXt(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function P0e(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function L0e(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function B0e(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function Wq(t,r){return t==="center"?r/2:t==="right"?r:0}function qq(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function hXt(t,r,n){let o=P0e(r,n),i=L0e(r,o),s=B0e(r,o),a=(r.x||0)-Wq(r.align,i),l=(r.y||0)-qq(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,G4["xmlns:xlink"],"xlink:href"),t("transform",lT(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function gXt(t,r){let n=r.image,o=L0e(r,n),i=B0e(r,n),s=(r.x||0)-Wq(r.align,o),a=(r.y||0)-qq(r.baseline,i);return t.set(s,a,s+o,a+i)}function yXt(t,r,n){nh(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=P0e(o,this),s=L0e(o,i),a=B0e(o,i);if(s===0||a===0)return;let l=(o.x||0)-Wq(o.align,s),u=(o.y||0)-qq(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(RN(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function vXt(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",KYt(r)),t("d",r.path)}function Dq(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*__,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=uT(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),MN(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):MN(t,u,o,i,s,a)}function wXt(t,r){return Dq(X4(t,r.angle),r)?t.set(0,0,0,0):cT(t,r,!0)}function SXt(t,r){t("d",LN(null,r))}function CXt(t,r){var n,o;return cT(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function BYe(t,r){t.beginPath(),LN(t,r)}function TXt(t,r){t("transform",cXe(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function AXt(t,r){var n,o;return cT(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function mXe(t,r,n){var o,i,s,a;return r.stroke&&jN(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function kXt(t,r,n){nh(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&mXe(t,o,i)&&(RN(t,o),t.stroke())}})}function IXt(t,r,n,o){return t.isPointInStroke?mXe(t,r,1)&&t.isPointInStroke(n,o):!1}function hXe(t){rh.width=t&&w_?$0e:h0e}function h0e(t,r){return gXe(C_(t,r),ly(t))}function gXe(t,r){return~~(.8*t.length*r)}function $0e(t,r){return ly(t)<=0||!(r=C_(t,r))?0:yXe(r,Hq(t))}function yXe(t,r){let n=`(${r}) ${t}`,o=$Ye.get(n);return o===void 0&&(w_.font=r,o=w_.measureText(t).width,$Ye.set(n,o)),o}function ly(t){return t.fontSize!=null?+t.fontSize||0:11}function S_(t){return t.lineHeight!=null?t.lineHeight:ly(t)+2}function OXt(t){return Wr(t)?t.length>1?t:t[0]:t}function Z4(t){return OXt(t.lineBreak&&t.text&&!Wr(t.text)?t.text.split(t.lineBreak):t.text)}function MXt(t){let r=Z4(t);return(Wr(r)?r.length-1:0)*S_(t)}function C_(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?jXt(t,n):n}function RXt(t){if(rh.width===$0e){let r=Hq(t);return n=>yXe(n,r)}else{let r=ly(t);return n=>gXe(n,r)}}function jXt(t,r){var n=+t.limit,o=RXt(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function Q4(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Hq(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+ly(t)+"px "+Q4(t,r)}function z0e(t){var r=t.baseline,n=ly(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*S_(t):r==="line-bottom"?.29*n-.5*S_(t):0)}function Yq(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-oT,r+=o*Math.cos(i),n+=o*Math.sin(i)),$4.x1=r,$4.y1=n,$4}function LXt(t,r){var n=r.dx||0,o=(r.dy||0)+z0e(r),i=Yq(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",PXt[r.align]||"start"),l?(u=lT(s,a)+" "+M0e(l),(n||o)&&(u+=" "+lT(n,o))):u=lT(s+n,a+o),t("transform",u)}function U0e(t,r,n){var o=rh.height(r),i=r.align,s=Yq(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+z0e(r)-Math.round(.8*o),f=Z4(r),d;if(Wr(f)?(o+=S_(r)*(f.length-1),d=f.reduce((p,m)=>Math.max(p,rh.width(r,m)),0)):d=rh.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*__,a,l);else if(n===2)return t.rotatedPoints(r.angle*__,a,l);return t}function BXt(t,r,n){nh(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=Hq(o),t.textAlign=o.align||"left",s=Yq(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*__),a=l=0),a+=o.dx||0,l+=(o.dy||0)+z0e(o),f=Z4(o),RN(t,o),Wr(f))for(c=S_(o),u=0;u<f.length;++u)d=C_(o,f[u]),o.fill&&Oq(t,o,i)&&t.fillText(d,a,l),o.stroke&&jN(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=C_(o,f),o.fill&&Oq(t,o,i)&&t.fillText(d,a,l),o.stroke&&jN(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function $Xt(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=Yq(r),l=a.x1,u=a.y1,c=U0e($4,r,1),f=-r.angle*__,d=Math.cos(f),p=Math.sin(f),m=d*i-p*s+(l-d*l+p*u),h=p*i+d*s+(u-p*l-d*u);return c.contains(m,h)}function zXt(t,r){let n=U0e($4,t,2);return ON(r,n[0],n[1],n[2],n[3])||ON(r,n[0],n[1],n[4],n[5])||ON(r,n[4],n[5],n[6],n[7])||ON(r,n[2],n[3],n[6],n[7])}function g0e(t,r,n){var o=md[t.mark.marktype],i=r||o.bound;return o.nested&&(t=t.mark),i(t.bounds||(t.bounds=new du),t,n)}function bXe(t,r,n){var o=md[t.marktype],i=o.bound,s=t.items,a=s&&s.length,l,u,c,f;if(o.nested)return a?c=s[0]:(zYe.mark=t,c=zYe),f=g0e(c,i,n),r=r&&r.union(f)||f,r;if(r=r||t.bounds&&t.bounds.clear()||new du,a)for(l=0,u=s.length;l<u;++l)r.union(g0e(s[l],i,n));return t.bounds=r}function xXe(t,r){return JSON.stringify(t,GXt,r)}function vXe(t){let r=typeof t=="string"?JSON.parse(t):t;return wXe(r)}function wXe(t){var r=t.marktype,n=t.items,o,i,s;if(n)for(i=0,s=n.length;i<s;++i)o=r?"mark":"group",n[i][o]=t,n[i].zindex&&(n[i][o].zdirty=!0),(r||o)==="group"&&wXe(n[i]);return r&&bXe(t),t}function Xq(t){arguments.length?this.root=vXe(t):(this.root=_Xe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new A0e(this.root)])}function _Xe(t,r){let n={bounds:new du,clip:!!t.clip,group:r,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function x_(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function V0e(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function Jc(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=x_(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function th(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function SXe(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function J4(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function WXt(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=md[i.marktype]).tip){for(a=J4(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function E_(t,r){this._active=null,this._handlers={},this._loader=t||Cq(),this._tooltip=r||qXt}function qXt(t,r,n,o){t.element().setAttribute("title",o||"")}function uy(t){this._el=null,this._bgcolor=null,this._loader=new k0e(t)}function BN(t,r){E_.call(this,t,r),this._down=null,this._touch=null,this._first=!0,this._events={}}function UYe(t,r){eKt(r).forEach(n=>tKt(t,n))}function tKt(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function VYe(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?this.fire(t,o):((!i||!i.exit)&&this.fire(n,o),this._active=s,this.fire(r,o),this.fire(t,o))}}function GYe(t){return function(r){this.fire(t,r),this._active=null}}function rKt(){return typeof window<"u"&&window.devicePixelRatio||1}function oKt(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?nKt:i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function $q(t){uy.call(this,t),this._options={},this._redraw=!1,this._dirty=new du,this._tempb=new du}function sKt(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function G0e(t,r){E_.call(this,t,r);let n=this;n._hrefHandler=v0e(n,(o,i)=>{i&&i.href&&n.handleHref(o,i,i.href)}),n._tooltipHandler=v0e(n,(o,i)=>{n.handleTooltip(o,i,o.type!==W4)})}function NXe(t,r){let n=r.aria===!1;if(t(kXe,n||void 0),n||r.description==null)for(let o in HYe)t(HYe[o],void 0);else{let o=r.mark.marktype;t(W0e,r.description),t(q0e,r.ariaRole||(o==="group"?IXe:Y0e)),t(H0e,r.ariaRoleDescription||`${o} mark`)}}function FXe(t){return t.aria===!1?{[kXe]:!0}:aKt[t.role]?null:qYe[t.role]?uKt(t,qYe[t.role]):lKt(t)}function lKt(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return DXe(n?IXe:Y0e,`${r} mark container`,t.description)}function uKt(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return DXe(r.role||Y0e,r.desc,n.description||o(n))}catch{return null}}function YYe(t){return jr(t.text).join(" ")}function cKt(t){let r=t.datum,n=t.orient,o=r.title?OXe(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${s_(l)?"discrete":l} scale with ${Tpe(a,s,t)}`}function fKt(t){let r=t.datum,n=r.title?OXe(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return pKt(o)+(n?` titled '${n}'`:"")+` for ${dKt(s)} with ${Tpe(u,l,t)}`}function OXe(t){try{return jr(Pn(t.items).items[0].text).join(" ")}catch{return null}}function dKt(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Pn(t)}function pKt(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function X0e(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${mKt(c)}"`),l),l={open(u,...c){s(u),r="<"+u;for(let f of c)for(let d in f)a(d,f[d]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=MXe(u),l),toString:()=>t};return l}function jXe(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes,o=n.length;for(let i=0;i<o;i++){let s=n[i];s.nodeType===3?t.text(s.nodeValue):jXe(t,s)}}return t.close()}function K0e(t){uy.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function KYe(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function hKt(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=Jc(t,n++,"pattern",Ea);v_(a,{id:Fq+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Jc(a,0,"rect",Ea),v_(a,{width:1,height:1,fill:`url(${LXe()}#${r.id})`}),t=Jc(t,n++,"radialGradient",Ea),v_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=Jc(t,n++,"linearGradient",Ea),v_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=Jc(t,o,"stop",Ea),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return th(t,o),n}function gKt(t,r,n){let o;return t=Jc(t,n,"clipPath",Ea),t.setAttribute("id",r.id),r.path?(o=Jc(t,0,"path",Ea),o.setAttribute("d",r.path)):(o=Jc(t,0,"rect",Ea),v_(o,{x:0,y:0,width:r.width,height:r.height})),th(t,1),n+1}function yKt(t,r,n){r=r.lastChild.previousSibling;let o,i=0;nh(n,s=>{o=t.mark(r,s,o),++i}),th(r,1+i)}function ZYe(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=x_(a,o,Ea),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=x_(a,"path",Ea);s.appendChild(l),l.__data__=t;let u=x_(a,"g",Ea);s.appendChild(u),u.__data__=t;let c=x_(a,"path",Ea);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||bKt(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function bKt(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function U4(t,r,n){r!==fu[t]&&(n?vKt(iv,t,r,n):dc(iv,t,r),fu[t]=r)}function u0e(t,r,n){n!==fu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),fu[r]=n)}function v_(t,r){for(let n in r)dc(t,n,r[n])}function dc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function vKt(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function LXe(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Z0e(t){uy.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function wKt(t,r,n,o,i){if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),o==="text"&&(t["font-family"]=Q4(r),t["font-size"]=ly(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let s in zq){let a=r[s],l=zq[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(w0e(a)&&(a=JYe(a,i.gradient,"")),t[l]=a)}return t}function e5(t,r){return t=String(t||"").toLowerCase(),arguments.length>1?(PN[t]=r,this):PN[t]}function Q0e(t,r,n){let o=[],i=new du().union(r),s=t.marktype;return s?VXe(t,i,n,o):s==="group"?GXe(t,i,n,o):pt("Intersect scene must be mark node or group item.")}function VXe(t,r,n,o){if(_Kt(t,r,n)){let i=t.items,s=t.marktype,a=i.length,l=0;if(s==="group")for(;l<a;++l)GXe(i[l],r,n,o);else for(let u=md[s].isect;l<a;++l){let c=i[l];WXe(c,r,u)&&o.push(c)}}return o}function _Kt(t,r,n){return t.bounds&&r.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function GXe(t,r,n,o){n&&n(t.mark)&&WXe(t,r,md.group.isect)&&o.push(t);let i=t.items,s=i&&i.length;if(s){let a=t.x||0,l=t.y||0;r.translate(-a,-l);for(let u=0;u<s;++u)VXe(i[u],r,n,o);r.translate(a,l)}return o}function WXe(t,r,n){let o=t.bounds;return r.encloses(o)||r.intersects(o)&&n(t,r)}function SKt(t){let r=t.clip;if(Tn(r))r(X4(c0e.clear()));else if(r)c0e.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(c0e)}function J0e(t,r,n){return t===r?!0:n==="path"?qXe(t,r):t instanceof Date&&r instanceof Date?+t==+r:S0(t)&&S0(r)?Math.abs(t-r)<=CKt:!t||!r||!ln(t)&&!ln(r)?t==r:EKt(t,r)}function qXe(t,r){return J0e(uT(t),uT(r))}function EKt(t,r){var n=Object.keys(t),o=Object.keys(r),i,s;if(n.length!==o.length)return!1;for(n.sort(),o.sort(),s=n.length-1;s>=0;s--)if(n[s]!=o[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!J0e(t[i],r[i],i))return!1;return typeof t==typeof r}function TKt(){iXe(),eYt()}var QYe,Fq,kYe,tYt,P4,__,rYt,oT,ay,FN,n0e,o0e,eXe,xp,DYe,NYe,i0e,y_,H4,Y4,fYt,dYt,pYt,mYt,hYt,gYt,yYt,bYt,xYt,vYt,wYt,_Yt,SYt,CYt,EYt,TYt,Uq,AYt,kYt,IYt,DYt,NYt,FYt,OYt,MYt,oXe,UYt,Vq,Tq,Aq,aT,f0e,kq,d0e,p0e,b_,Iq,OYe,MYe,iT,sT,s0e,a0e,VYt,w_,m0e,WYt,ZYt,tXt,lXt,uXt,cXt,mXt,G4,bXt,xXt,_Xt,EXt,DXt,NXt,FXt,$Ye,rh,PXt,$4,UXt,VXt,md,zYe,GXt,HXt,YXt,XXt,CXe,Nq,EXe,y0e,KXt,Rq,z4,TXe,jq,ZXt,QXt,AXe,Pq,Lq,Bq,JXt,b0e,W4,x0e,eKt,nKt,WYe,iKt,v0e,kXe,W0e,q0e,H0e,IXe,Y0e,DXe,aKt,qYe,HYe,MXe,mKt,RXe,zq,PXe,B4,XYe,Ea,l0e,iv,fu,xKt,BXe,$Xe,zXe,UXe,sv,PN,c0e,CKt,t5=D(()=>{"use strict";Ts();GHe();IN();gD();r0e();iN();QYe=0;Fq="p_";kYe={basis:{curve:pge},"basis-closed":{curve:mge},"basis-open":{curve:hge},bundle:{curve:gge,tension:"beta",value:.85},cardinal:{curve:yge,tension:"tension",value:0},"cardinal-open":{curve:vge,tension:"tension",value:0},"cardinal-closed":{curve:bge,tension:"tension",value:0},"catmull-rom":{curve:_ge,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Sge,tension:"alpha",value:.5},"catmull-rom-open":{curve:Cge,tension:"alpha",value:.5},linear:{curve:tT},"linear-closed":{curve:Ege},monotone:{horizontal:kge,vertical:Age},natural:{curve:Ige},step:{curve:Dge},"step-after":{curve:Fge},"step-before":{curve:Nge}};tYt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},P4=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];__=Math.PI/180,rYt=1e-14,oT=Math.PI/2,ay=Math.PI*2,FN=Math.sqrt(3)/2,n0e={},o0e={},eXe=[].join;xp=["l",0,0,0,0,0,0,0];DYe=.5773502691896257,NYe={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,ay)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=FN*n,i=o-n*DYe,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=FN*n,i=o-n*DYe;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=FN*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=FN*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=FN*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=FN*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};i0e={};y_=.448084975506;H4=t=>t.x||0,Y4=t=>t.y||0,fYt=t=>t.width||0,dYt=t=>t.height||0,pYt=t=>(t.x||0)+(t.width||0),mYt=t=>(t.y||0)+(t.height||0),hYt=t=>t.startAngle||0,gYt=t=>t.endAngle||0,yYt=t=>t.padAngle||0,bYt=t=>t.innerRadius||0,xYt=t=>t.outerRadius||0,vYt=t=>t.cornerRadius||0,wYt=t=>q4(t.cornerRadiusTopLeft,t.cornerRadius)||0,_Yt=t=>q4(t.cornerRadiusTopRight,t.cornerRadius)||0,SYt=t=>q4(t.cornerRadiusBottomRight,t.cornerRadius)||0,CYt=t=>q4(t.cornerRadiusBottomLeft,t.cornerRadius)||0,EYt=t=>q4(t.size,64),TYt=t=>t.size||1,Uq=t=>t.defined!==!1,AYt=t=>tXe(t.shape||"circle"),kYt=lge().startAngle(hYt).endAngle(gYt).padAngle(yYt).innerRadius(bYt).outerRadius(xYt).cornerRadius(vYt),IYt=uq().x(H4).y1(Y4).y0(mYt).defined(Uq),DYt=uq().y(Y4).x1(H4).x0(pYt).defined(Uq),NYt=E4().x(H4).y(Y4).defined(Uq),FYt=rXe().x(H4).y(Y4).width(fYt).height(dYt).cornerRadius(wYt,_Yt,SYt,CYt),OYt=dge().type(AYt).size(EYt),MYt=nXe().x(H4).y(Y4).defined(Uq).size(TYt);oXe=1;du.prototype={clone(){return new du(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};It(A0e,T0e);k0e.prototype={pending(){return this._pending},sanitizeURL(t){let r=this;return FYe(r),r._loader.sanitize(t,{context:"href"}).then(n=>(L4(r),n)).catch(()=>(L4(r),null))},loadImage(t){let r=this,n=B9();return FYe(r),r._loader.sanitize(t,{context:"image"}).then(o=>{let i=o.href;if(!i||!n)throw{url:i};let s=new n,a=Or(o,"crossOrigin")?o.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>L4(r),s.onerror=()=>L4(r),s.src=i,s}).catch(o=>(L4(r),{complete:!1,width:0,height:0,src:o&&o.url||""}))},ready(){let t=this;return new Promise(r=>{function n(o){t.pending()?setTimeout(()=>{n(!0)},10):r(o)}n(!1)})}};UYt=ay-1e-8,b_=(t,r)=>Vq.add(t,r),Iq=(t,r)=>b_(Tq=t,Aq=r),OYe=t=>b_(t,Vq.y1),MYe=t=>b_(Vq.x1,t),iT=(t,r)=>f0e*t+d0e*r,sT=(t,r)=>kq*t+p0e*r,s0e=(t,r)=>b_(iT(t,r),sT(t,r)),a0e=(t,r)=>Iq(iT(t,r),sT(t,r));VYt={beginPath(){},closePath(){},moveTo:a0e,lineTo:a0e,rect(t,r,n,o){aT?(s0e(t+n,r),s0e(t+n,r+o),s0e(t,r+o),a0e(t,r)):(b_(t+n,r+o),Iq(t,r))},quadraticCurveTo(t,r,n,o){let i=iT(t,r),s=sT(t,r),a=iT(n,o),l=sT(n,o);RYe(Tq,i,a,OYe),RYe(Aq,s,l,MYe),Iq(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=iT(t,r),l=sT(t,r),u=iT(n,o),c=sT(n,o),f=iT(i,s),d=sT(i,s);jYe(Tq,a,u,f,OYe),jYe(Aq,l,c,d,MYe),Iq(f,d)},arc(t,r,n,o,i,s){if(o+=aT,i+=aT,Tq=n*Math.cos(i)+t,Aq=n*Math.sin(i)+r,Math.abs(i-o)>UYt)b_(t-n,r-n),b_(t+n,r+n);else{let a=c=>b_(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%ay,o<0&&(o+=ay),i=i%ay,i<0&&(i+=ay),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=ay,l=o-o%oT,u=0;u<4&&l>i;++u,l-=oT)a(l);else for(l=o-o%oT+oT,u=0;u<4&&l<i;++u,l=l+oT)a(l)}}};w_=(w_=Uc(1,1))?w_.getContext("2d"):null,m0e=new du;WYt=[];ZYt=R0e("arc",RYt);tXt=j0e("area",jYt,QYt);lXt=K4(V4),uXt=K4(V4,!1),cXt=K4(V4,!0);mXt={type:"group",tag:"g",nested:!1,attr:nXt,bound:aXt,draw:fXt,pick:dXt,isect:sXe,content:sXt,background:oXt,foreground:iXt},G4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};bXt={type:"image",tag:"image",nested:!1,attr:hXt,bound:gXt,draw:yXt,pick:Gq(),isect:_0,get:P0e,xOffset:Wq,yOffset:qq},xXt=j0e("line",PYt,JYt);_Xt={type:"path",tag:"path",nested:!1,attr:vXt,bound:wXt,draw:F0e(Dq),pick:O0e(Dq),isect:I0e(Dq)};EXt={type:"rect",tag:"path",nested:!1,attr:SXt,bound:CXt,draw:F0e(BYe),pick:O0e(BYe),isect:sXe};DXt={type:"rule",tag:"line",nested:!1,attr:TXt,bound:AXt,draw:kXt,pick:Gq(IXt),isect:aXe},NXt=R0e("shape",LYt),FXt=R0e("symbol",BYt,D0e),$Ye=Ose(),rh={height:ly,measureWidth:$0e,estimateWidth:h0e,width:h0e,canvas:hXe};hXe(!0);PXt={left:"start",center:"middle",right:"end"},$4=new du;UXt={type:"text",tag:"text",nested:!1,attr:LXt,bound:U0e,draw:BXt,pick:Gq($Xt),isect:zXt},VXt=j0e("trail",$Yt,eXt),md={arc:ZYt,area:tXt,group:mXt,image:bXt,line:xXt,path:_Xt,rect:EXt,rule:DXt,shape:NXt,symbol:FXt,text:UXt,trail:VXt};zYe={mark:null};GXt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];Xq.prototype={toJSON(t){return xXe(this.root,t||0)},mark(t,r,n){r=r||this.root.items[0];let o=_Xe(t,r);return r.items[n]=o,o.zindex&&(o.group.zdirty=!0),o}};E_.prototype={initialize(t,r,n){return this._el=t,this._obj=n||null,this.origin(r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,r,n){for(let o=t?t.length:0;--o>=0;)if(t[o].type===r&&(!n||t[o].handler===n))return o;return-1},handlers(t){let r=this._handlers,n=[];if(t)n.push(...r[this.eventName(t)]);else for(let o in r)n.push(...r[o]);return n},eventName(t){let r=t.indexOf(".");return r<0?t:t.slice(0,r)},handleHref(t,r,n){this._loader.sanitize(n,{context:"href"}).then(o=>{let i=new MouseEvent(t.type,t),s=x_(null,"a");for(let a in o)s.setAttribute(a,o[a]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(t,r,n){if(r&&r.tooltip!=null){r=WXt(r,t,this.canvas(),this._origin);let o=n&&r&&r.tooltip||null;this._tooltip.call(this._obj,this,t,r,o)}},getItemBoundingClientRect(t){let r=this.canvas();if(!r)return;let n=r.getBoundingClientRect(),o=this._origin,i=t.bounds,s=i.width(),a=i.height(),l=i.x1+o[0]+n.left,u=i.y1+o[1]+n.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};uy.prototype={initialize(t,r,n,o,i){return this._el=t,this.resize(r,n,o,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,r,n,o){return this._width=t,this._height=r,this._origin=n||[0,0],this._scale=o||1,this},dirty(){},render(t){let r=this;return r._call=function(){r._render(t)},r._call(),r._call=null,r},_render(){},renderAsync(t){let r=this.render(t);return this._ready?this._ready.then(()=>r):Promise.resolve(r)},_load(t,r){var n=this,o=n._loader[t](r);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return o},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};HXt="keydown",YXt="keypress",XXt="keyup",CXe="dragenter",Nq="dragleave",EXe="dragover",y0e="mousedown",KXt="mouseup",Rq="mousemove",z4="mouseout",TXe="mouseover",jq="click",ZXt="dblclick",QXt="wheel",AXe="mousewheel",Pq="touchstart",Lq="touchmove",Bq="touchend",JXt=[HXt,YXt,XXt,CXe,Nq,EXe,y0e,KXt,Rq,z4,TXe,jq,ZXt,QXt,AXe,Pq,Lq,Bq],b0e=Rq,W4=z4,x0e=jq;eKt=t=>t===Pq||t===Lq||t===Bq?[Pq,Lq,Bq]:[t];It(BN,E_,{initialize(t,r,n){return this._canvas=t&&V0e(t,"canvas"),[jq,y0e,Rq,z4,Nq].forEach(o=>UYe(this,o)),E_.prototype.initialize.call(this,t,r,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:JXt,DOMMouseScroll(t){this.fire(AXe,t)},mousemove:VYe(Rq,TXe,z4),dragover:VYe(EXe,CXe,Nq),mouseout:GYe(z4),dragleave:GYe(Nq),mousedown(t){this._down=this._active,this.fire(y0e,t)},click(t){this._down===this._active&&(this.fire(jq,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Pq,t,!0)},touchmove(t){this.fire(Lq,t,!0)},touchend(t){this.fire(Bq,t,!0),this._touch=null},fire(t,r,n){let o=n?this._touch:this._active,i=this._handlers[t];if(r.vegaType=t,t===x0e&&o&&o.href?this.handleHref(r,o,o.href):(t===b0e||t===W4)&&this.handleTooltip(r,o,t!==W4),i)for(let s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,r,o)},on(t,r){let n=this.eventName(t),o=this._handlers;return this._handlerIndex(o[n],t,r)<0&&(UYe(this,t),(o[n]||(o[n]=[])).push({type:t,handler:r})),this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&o.splice(i,1),this},pickEvent(t){let r=J4(t,this._canvas),n=this._origin;return this.pick(this._scene,r[0],r[1],r[0]-n[0],r[1]-n[1])},pick(t,r,n,o,i){let s=this.context();return md[t.marktype].pick.call(this,s,t,r,n,o,i)}});nKt=rKt();WYe=uy.prototype,iKt=(t,r,n)=>new du().set(0,0,r,n).translate(-t[0],-t[1]);It($q,uy,{initialize(t,r,n,o,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Uc(1,1,this._options.type),t&&this._canvas&&(th(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),WYe.initialize.call(this,t,r,n,o,i)},resize(t,r,n,o){if(WYe.resize.call(this,t,r,n,o),this._canvas)oKt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||pt("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){let r=this._tempb.clear().union(t.bounds),n=t.mark.group;for(;n;)r.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(r)},_render(t){let r=this.context(),n=this._origin,o=this._width,i=this._height,s=this._dirty,a=iKt(n,o,i);r.save();let l=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):sKt(r,a.intersect(s),n);return this.clear(-n[0],-n[1],o,i),this.draw(r,t,l),r.restore(),s.clear(),this},draw(t,r,n){let o=md[r.marktype];r.clip&&rXt(t,r),o.draw.call(this,t,r,n),r.clip&&t.restore()},clear(t,r,n,o){let i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(t,r,n,o),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,r,n,o))}});v0e=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)};It(G0e,E_,{initialize(t,r,n){let o=this._svg;return o&&(o.removeEventListener(x0e,this._hrefHandler),o.removeEventListener(b0e,this._tooltipHandler),o.removeEventListener(W4,this._tooltipHandler)),this._svg=o=t&&V0e(t,"svg"),o&&(o.addEventListener(x0e,this._hrefHandler),o.addEventListener(b0e,this._tooltipHandler),o.addEventListener(W4,this._tooltipHandler)),E_.prototype.initialize.call(this,t,r,n)},canvas(){return this._svg},on(t,r){let n=this.eventName(t),o=this._handlers;if(this._handlerIndex(o[n],t,r)<0){let s={type:t,handler:r,listener:v0e(this,r)};(o[n]||(o[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&(this._svg&&this._svg.removeEventListener(n,o[i].listener),o.splice(i,1)),this}});kXe="aria-hidden",W0e="aria-label",q0e="role",H0e="aria-roledescription",IXe="graphics-object",Y0e="graphics-symbol",DXe=(t,r,n)=>({[q0e]:t,[H0e]:r,[W0e]:n||void 0}),aKt=ru(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),qYe={axis:{desc:"axis",caption:cKt},legend:{desc:"legend",caption:fKt},"title-text":{desc:"title",caption:t=>`Title text '${YYe(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${YYe(t)}'`}},HYe={ariaRole:q0e,ariaRoleDescription:H0e,description:W0e};MXe=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mKt=t=>MXe(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");RXe=t=>jXe(X0e(),t)+"";zq={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},PXe={fill:"none","stroke-miterlimit":10},B4=0,XYe="http://www.w3.org/2000/xmlns/",Ea=G4.xmlns;l0e=uy.prototype;It(K0e,uy,{initialize(t,r,n,o,i){return this._defs={},this._clearDefs(),t&&(this._svg=Jc(t,0,"svg",Ea),this._svg.setAttributeNS(XYe,"xmlns",Ea),this._svg.setAttributeNS(XYe,"xmlns:xlink",G4["xmlns:xlink"]),this._svg.setAttribute("version",G4.version),this._svg.setAttribute("class","marks"),th(t,1),this._root=Jc(this._svg,B4,"g",Ea),v_(this._root,PXe),th(this._svg,B4+1)),this.background(this._bgcolor),l0e.initialize.call(this,t,r,n,o,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),l0e.background.apply(this,arguments)},resize(t,r,n,o){return l0e.resize.call(this,t,r,n,o),this._svg&&(v_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let t=this._svg,r=this._bgcolor;if(!t)return null;let n;r&&(t.removeAttribute("style"),n=Jc(t,B4,"rect",Ea),v_(n,{width:this._width,height:this._height,fill:r}));let o=RXe(t);return r&&(t.removeChild(n),this._svg.style.setProperty("background-color",r)),o},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),th(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let t=this._dirty;if(!t.length||!this._dirtyID)return!0;let r=++this._dirtyID,n,o,i,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(n=t[a],o=n.mark,o.marktype!==i&&(i=o.marktype,s=md[i]),o.zdirty&&o.dirty!==r&&(this._dirtyAll=!1,KYe(n,r),o.items.forEach(c=>{c.dirty=r})),!o.zdirty){if(n.exit){s.nested&&o.items.length?(u=o.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?o.items[0]:n,n._update!==r&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,KYe(n,r)):this._update(s,n._svg,n),n._update=r)}return!this._dirtyAll},mark(t,r,n){if(!this.isDirty(r))return r._svg;let o=this._svg,i=md[r.marktype],s=r.interactive===!1?"none":null,a=i.tag==="g",l=null,u=0,c=ZYe(r,t,n,"g",o);c.setAttribute("class",SXe(r));let f=FXe(r);for(let p in f)dc(c,p,f[p]);a||dc(c,"pointer-events",s),dc(c,"clip-path",r.clip?E0e(this,r,r.group):null);let d=p=>{let m=this.isDirty(p),h=ZYe(p,c,l,i.tag,o);m&&(this._update(i,h,p),a&&yKt(this,h,p)),l=h,++u};return i.nested?r.items.length&&d(r.items[0]):nh(r,d),th(c,u),c},_update(t,r,n){iv=r,fu=r.__values__,NXe(U4,n),t.attr(U4,n,this);let o=xKt[t.type];o&&o.call(this,t,r,n),iv&&this.style(iv,n)},style(t,r){if(r!=null)for(let n in zq){let o=n==="font"?Q4(r):r[n];if(o===fu[n])continue;let i=zq[n];o==null?t.removeAttribute(i):(w0e(o)&&(o=JYe(o,this._defs.gradient,LXe())),t.setAttribute(i,o+"")),fu[n]=o}},defs(){let t=this._svg,r=this._defs,n=r.el,o=0;for(let i in r.gradient)n||(r.el=n=Jc(t,B4+1,"defs",Ea)),o=hKt(n,r.gradient[i],o);for(let i in r.clipping)n||(r.el=n=Jc(t,B4+1,"defs",Ea)),o=gKt(n,r.clipping[i],o);n&&(o===0?(t.removeChild(n),r.el=null):th(n,o))},_clearDefs(){let t=this._defs;t.gradient={},t.clipping={}}});iv=null,fu=null,xKt={group(t,r,n){let o=iv=r.childNodes[2];fu=o.__values__,t.foreground(U4,n,this),fu=r.__values__,iv=r.childNodes[1],t.content(U4,n,this);let i=iv=r.childNodes[0];t.background(U4,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==fu.events&&(dc(o,"pointer-events",s),dc(i,"pointer-events",s),fu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;dc(o,"display",null),this.style(i,n),dc(i,"stroke",null),a&&(n.fill=null),fu=o.__values__,this.style(o,n),a&&(n.fill=a),iv=null}else dc(o,"display","none")},image(t,r,n){n.smooth===!1?(u0e(r,"image-rendering","optimizeSpeed"),u0e(r,"image-rendering","pixelated")):u0e(r,"image-rendering",null)},text(t,r,n){let o=Z4(n),i,s,a,l;Wr(o)?(s=o.map(u=>C_(n,u)),i=s.join(`
`),i!==fu.text&&(th(r,0),a=r.ownerDocument,l=S_(n),s.forEach((u,c)=>{let f=x_(a,"tspan",Ea);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),fu.text=i)):(s=C_(n,o),s!==fu.text&&(r.textContent=s,fu.text=s)),dc(r,"font-family",Q4(n)),dc(r,"font-size",ly(n)+"px"),dc(r,"font-style",n.fontStyle),dc(r,"font-variant",n.fontVariant),dc(r,"font-weight",n.fontWeight)}};It(Z0e,uy,{svg(){return this._text},_render(t){let r=X0e();r.open("svg",on({},G4,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&r.open("rect",{width:this._width,height:this._height,fill:n}).close(),r.open("g",PXe,{transform:"translate("+this._origin+")"}),this.mark(r,t),r.close(),this.defs(r),this._text=r.close()+"",this},mark(t,r){let n=md[r.marktype],o=n.tag,i=[NXe,n.attr];t.open("g",{class:SXe(r),"clip-path":r.clip?E0e(this,r,r.group):null},FXe(r),{"pointer-events":o!=="g"&&r.interactive===!1?"none":null});let s=a=>{let l=this.href(a);if(l&&t.open("a",l),t.open(o,this.attr(r,a,i,o!=="g"?o:null)),o==="text"){let u=Z4(a);if(Wr(u)){let c={x:0,dy:S_(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(C_(a,u[f])).close()}else t.text(C_(a,u))}else if(o==="g"){let u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(r,a,n.background,"bgrect")).close(),t.open("g",this.attr(r,a,n.content)),nh(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(r,a,n.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(r,a,n.foreground,"bgfore")).close()}t.close(),l&&t.close()};return n.nested?r.items&&r.items.length&&s(r.items[0]):nh(r,s),t.close()},href(t){let r=t.href,n;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then(o=>{o["xlink:href"]=o.href,o.href=null,(this._hrefs||(this._hrefs={}))[r]=o})}return null},attr(t,r,n,o){let i={},s=(a,l,u,c)=>{i[c||a]=l};return Array.isArray(n)?n.forEach(a=>a(s,r,this)):n(s,r,this),o&&wKt(i,r,t,o,this._defs),i},defs(t){let r=this._defs.gradient,n=this._defs.clipping;if(Object.keys(r).length+Object.keys(n).length!==0){t.open("defs");for(let i in r){let s=r[i],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Fq+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),t.close(),t.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(let i in n){let s=n[i];t.open("clipPath",{id:i}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});BXe="canvas",$Xe="png",zXe="svg",UXe="none",sv={Canvas:BXe,PNG:$Xe,SVG:zXe,None:UXe},PN={};PN[BXe]=PN[$Xe]={renderer:$q,headless:$q,handler:BN};PN[zXe]={renderer:K0e,headless:Z0e,handler:G0e};PN[UXe]={};c0e=new du;CKt=1e-9});var lye={};cn(lye,{label:()=>aye});function DKt(t,r){let n=t.bitmap();return(r||[]).forEach(o=>n.set(t(o.boundary[0]),t(o.boundary[3]))),[n,void 0]}function NKt(t,r,n,o){let i=t.width,s=t.height,a=n||o,l=Uc(i,s).getContext("2d");r.forEach(y=>YXe(l,y,a));let u=new Uint32Array(l.getImageData(0,0,i,s).data.buffer),c=t.bitmap(),f=a&&t.bitmap(),d,p,m,h,g;for(p=0;p<s;++p)for(d=0;d<i;++d)g=u[p*i+d]&AKt,g&&(m=t(d),h=t(p),o||c.set(m,h),a&&g^kKt&&f.set(m,h));return[c,f]}function YXe(t,r,n){if(!r.length)return;let o=r[0].mark.marktype;o==="group"?r.forEach(i=>{i.items.forEach(s=>YXe(t,s.items,n))}):md[o].draw(t,{items:n?r.map(FKt):r})}function FKt(t){let r=HC(t,{});return r.stroke&&(r.strokeOpacity=1),r.fill&&(r.fillOpacity=IKt,r.stroke="#000",r.strokeOpacity=1,r.strokeWidth=2),r}function OKt(t,r){let n=new Uint32Array(~~((t*r+r5)/r5));function o(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{let l=a*t+s;return n[l>>>av]&1<<(l&pc)},set:(s,a)=>{let l=a*t+s;o(l>>>av,1<<(l&pc))},clear:(s,a)=>{let l=a*t+s;i(l>>>av,~(1<<(l&pc)))},getRange:(s,a,l,u)=>{let c=u,f,d,p,m;for(;c>=a;--c)if(f=c*t+s,d=c*t+l,p=f>>>av,m=d>>>av,p===m){if(n[p]&T_[f&pc]&oh[(d&pc)+1])return!0}else{if(n[p]&T_[f&pc]||n[m]&oh[(d&pc)+1])return!0;for(let h=p+1;h<m;++h)if(n[h])return!0}return!1},setRange:(s,a,l,u)=>{let c,f,d,p,m;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>av,p=f>>>av,d===p)o(d,T_[c&pc]&oh[(f&pc)+1]);else for(o(d,T_[c&pc]),o(p,oh[(f&pc)+1]),m=d+1;m<p;++m)o(m,4294967295)},clearRange:(s,a,l,u)=>{let c,f,d,p,m;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>av,p=f>>>av,d===p)i(d,oh[c&pc]|T_[(f&pc)+1]);else for(i(d,oh[c&pc]),i(p,T_[(f&pc)+1]),m=d+1;m<p;++m)i(m,0)},outOfBounds:(s,a,l,u)=>s<0||a<0||u>=r||l>=t}}function MKt(t,r,n){let o=Math.max(1,Math.sqrt(t*r/1e6)),i=~~((t+2*n+o)/o),s=~~((r+2*n+o)/o),a=l=>~~((l+n)/o);return a.invert=l=>l*o-n,a.bitmap=()=>OKt(i,s),a.ratio=o,a.padding=n,a.width=t,a.height=r,a}function RKt(t,r,n,o){let i=t.width,s=t.height;return function(a){let l=a.datum.datum.items[o].items,u=l.length,c=a.datum.fontSize,f=rh.width(a.datum,a.datum.text),d=0,p,m,h,g,y,b,x;for(let v=0;v<u;++v)p=l[v].x,h=l[v].y,m=l[v].x2===void 0?p:l[v].x2,g=l[v].y2===void 0?h:l[v].y2,y=(p+m)/2,b=(h+g)/2,x=Math.abs(m-p+g-h),x>=d&&(d=x,a.x=y,a.y=b);return y=f/2,b=c/2,p=a.x-y,m=a.x+y,h=a.y-b,g=a.y+b,a.align="center",p<0&&m<=i?a.align="left":0<=p&&i<m&&(a.align="right"),a.baseline="middle",h<0&&g<=s?a.baseline="top":0<=h&&s<g&&(a.baseline="bottom"),!0}}function Kq(t,r,n,o,i,s){let a=n/2;return t-a<0||t+a>i||r-(a=o/2)<0||r+a>s}function A_(t,r,n,o,i,s,a,l){let u=i*s/(o*2),c=t(r-u),f=t(r+u),d=t(n-(s=s/2)),p=t(n+s);return a.outOfBounds(c,d,f,p)||a.getRange(c,d,f,p)||l&&l.getRange(c,d,f,p)}function jKt(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1];function u(c,f,d,p,m){let h=t.invert(c),g=t.invert(f),y=d,b=s,x;if(!Kq(h,g,p,m,i,s)&&!A_(t,h,g,m,p,y,a,l)&&!A_(t,h,g,m,p,m,a,null)){for(;b-y>=1;)x=(y+b)/2,A_(t,h,g,m,p,x,a,l)?b=x:y=x;if(y>d)return[h,g,y,!0]}}return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,m=rh.width(c.datum,c.datum.text),h=n?p:0,g=!1,y=!1,b=0,x,v,w,_,C,S,E,A,N,k,M,I,L,P,R,V,G;for(let U=0;U<d;++U){for(x=f[U].x,w=f[U].y,v=f[U].x2===void 0?x:f[U].x2,_=f[U].y2===void 0?w:f[U].y2,x>v&&(G=x,x=v,v=G),w>_&&(G=w,w=_,_=G),N=t(x),M=t(v),k=~~((N+M)/2),I=t(w),P=t(_),L=~~((I+P)/2),E=k;E>=N;--E)for(A=L;A>=I;--A)V=u(E,A,h,m,p),V&&([c.x,c.y,h,g]=V);for(E=k;E<=M;++E)for(A=L;A<=P;++A)V=u(E,A,h,m,p),V&&([c.x,c.y,h,g]=V);!g&&!n&&(R=Math.abs(v-x+_-w),C=(x+v)/2,S=(w+_)/2,R>=b&&!Kq(C,S,m,p,i,s)&&!A_(t,C,S,p,m,p,a,null)&&(b=R,c.x=C,c.y=S,y=!0))}return g||y?(C=m/2,S=p/2,a.setRange(t(c.x-C),t(c.y-S),t(c.x+C),t(c.y+S)),c.align="center",c.baseline="middle",!0):!1}}function BKt(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=t.bitmap();return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,m=rh.width(c.datum,c.datum.text),h=[],g=n?p:0,y=!1,b=!1,x=0,v,w,_,C,S,E,A,N,k,M,I,L;for(let P=0;P<d;++P){for(v=f[P].x,_=f[P].y,w=f[P].x2===void 0?v:f[P].x2,C=f[P].y2===void 0?_:f[P].y2,h.push([t((v+w)/2),t((_+C)/2)]);h.length;)if([A,N]=h.pop(),!(a.get(A,N)||l.get(A,N)||u.get(A,N))){u.set(A,N);for(let R=0;R<4;++R)S=A+PKt[R],E=N+LKt[R],u.outOfBounds(S,E,S,E)||h.push([S,E]);if(S=t.invert(A),E=t.invert(N),k=g,M=s,!Kq(S,E,m,p,i,s)&&!A_(t,S,E,p,m,k,a,l)&&!A_(t,S,E,p,m,p,a,null)){for(;M-k>=1;)I=(k+M)/2,A_(t,S,E,p,m,I,a,l)?M=I:k=I;k>g&&(c.x=S,c.y=E,g=k,y=!0)}}!y&&!n&&(L=Math.abs(w-v+C-_),S=(v+w)/2,E=(_+C)/2,L>=x&&!Kq(S,E,m,p,i,s)&&!A_(t,S,E,p,m,p,a,null)&&(x=L,c.x=S,c.y=E,b=!0))}return y||b?(S=m/2,E=p/2,a.setRange(t(c.x-S),t(c.y-E),t(c.x+S),t(c.y+E)),c.align="center",c.baseline="middle",!0):!1}}function UKt(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=o.length;return function(c){let f=c.boundary,d=c.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let p=0,m,h,g,y,b,x,v,w,_,C,S,E,A,N,k;for(let M=0;M<u;++M){if(m=(n[M]&3)-1,h=(n[M]>>>2&3)-1,g=m===0&&h===0||o[M]<0,y=m&&h?Math.SQRT1_2:1,b=o[M]<0?-1:1,x=f[1+m]+o[M]*m*y,S=f[4+h]+b*d*h/2+o[M]*h*y,w=S-d/2,_=S+d/2,E=t(x),N=t(w),k=t(_),!p)if(HXe(E,E,N,k,a,l,x,x,w,_,f,g))p=rh.width(c.datum,c.datum.text);else continue;if(C=x+b*p*m/2,x=C-p/2,v=C+p/2,E=t(x),A=t(v),HXe(E,A,N,k,a,l,x,v,w,_,f,g))return c.x=m?m*b<0?v:x:C,c.y=h?h*b<0?_:w:S,c.align=$Kt[m*b+1],c.baseline=zKt[h*b+1],a.setRange(E,N,A,k),!0}return!1}}function HXe(t,r,n,o,i,s,a,l,u,c,f,d){return!(i.outOfBounds(t,n,r,o)||(d&&s?s.getRange(t,n,r,o)||!VKt(a,u,l,c,f):i.getRange(t,n,r,o)))}function VKt(t,r,n,o,i){return i[0]<=t&&n<=i[2]&&i[3]<=r&&o<=i[5]}function qKt(t,r,n,o,i,s,a,l,u,c,f){if(!t.length)return t;let d=Math.max(o.length,i.length),p=HKt(o,d),m=YKt(i,d),h=XKt(t[0].datum),g=h==="group"&&t[0].datum.items[u].marktype,y=g==="area",b=KKt(h,g,l,u),x=MKt(r[0],r[1],c),v=y&&f==="naive",w=t.map(S=>({datum:S,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(S)})),_;if(!v){n&&w.sort((E,A)=>n(E.datum,A.datum));let S=!1;for(let E=0;E<m.length&&!S;++E)S=m[E]===5||p[E]<0;h&&(a||y)&&(s=[t.map(E=>E.datum)].concat(s)),_=s.length?NKt(x,s,S,y):DKt(x,a&&w)}let C=y?WKt[f](x,_,a,u):UKt(x,_,m,p);return w.forEach(S=>S.opacity=+C(S)),w}function HKt(t,r){let n=new Float64Array(r),o=t.length;for(let i=0;i<o;++i)n[i]=t[i]||0;for(let i=o;i<r;++i)n[i]=n[o-1];return n}function YKt(t,r){let n=new Int8Array(r),o=t.length;for(let i=0;i<o;++i)n[i]|=GKt[t[i]];for(let i=o;i<r;++i)n[i]=n[o-1];return n}function XKt(t){return t&&t.mark&&t.mark.marktype}function KKt(t,r,n,o){let i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>i(s.datum):r==="line"?s=>{let a=s.datum.items[o].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{let a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}function aye(t){et.call(this,null,t)}var AKt,kKt,IKt,av,pc,r5,T_,oh,PKt,LKt,$Kt,zKt,eye,tye,rye,nye,oye,iye,GKt,WKt,sye,XXe,KXe=D(()=>{"use strict";gD();qa();t5();Ts();AKt=4278190080,kKt=268435456,IKt=.0625;av=5,pc=31,r5=32,T_=new Uint32Array(r5+1),oh=new Uint32Array(r5+1);oh[0]=0;T_[0]=~oh[0];for(let t=1;t<=r5;++t)oh[t]=oh[t-1]<<1|1,T_[t]=~oh[t];PKt=[-1,-1,1,1],LKt=[-1,1,-1,1];$Kt=["right","center","left"],zKt=["bottom","middle","top"];eye=0,tye=4,rye=8,nye=0,oye=1,iye=2,GKt={"top-left":eye+nye,top:eye+oye,"top-right":eye+iye,left:tye+nye,middle:tye+oye,right:tye+iye,"bottom-left":rye+nye,bottom:rye+oye,"bottom-right":rye+iye},WKt={naive:RKt,"reduced-search":jKt,floodfill:BKt};sye=["x","y","opacity","align","baseline"],XXe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];aye.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:XXe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:sye.length,default:sye}]};It(aye,et,{transform(t,r){function n(s){let a=t[s];return Tn(a)&&r.modified(a.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&pt("Size parameter should be specified as a [width, height] array.");let i=t.as||sye;return qKt(r.materialize(r.SOURCE).source,t.size,t.sort,jr(t.offset||1),jr(t.anchor||XXe),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(s=>{let a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),r.reflow(o).modifies(i)}})});var dye={};cn(dye,{loess:()=>cye,regression:()=>fye});function ZXe(t,r){var n=[],o=function(f){return f(l)},i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function cye(t){et.call(this,null,t)}function fye(t){et.call(this,null,t)}var uye,ZKt,QXe=D(()=>{"use strict";sD();qa();Ts();cye.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};It(cye,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=ZXe(o,t.groupby),s=(t.groupby||[]).map(Ai),a=s.length,l=t.as||[Ai(t.x),Ai(t.y)],u=[];i.forEach(c=>{rle(c,t.x,t.y,t.bandwidth||.3).forEach(f=>{let d={};for(let p=0;p<a;++p)d[s[p]]=c.dims[p];d[l[0]]=f[0],d[l[1]]=f[1],u.push(An(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});uye={linear:m9,log:Qae,exp:Jae,pow:ele,quad:h9,poly:tle},ZKt=(t,r)=>t==="poly"?r:t==="quad"?2:1;fye.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(uye)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};It(fye,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=ZXe(o,t.groupby),s=(t.groupby||[]).map(Ai),a=t.method||"linear",l=t.order||3,u=ZKt(a,l),c=t.as||[Ai(t.x),Ai(t.y)],f=uye[a],d=[],p=t.extent;Or(uye,a)||pt("Invalid regression method: "+a),p!=null&&a==="log"&&p[0]<=0&&(r.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(m=>{if(m.length<=u){r.dataflow.warn("Skipping regression with more parameters than data points.");return}let g=f(m,t.x,t.y,l);if(t.params){d.push(An({keys:m.dims,coef:g.coef,rSquared:g.rSquared}));return}let y=p||Em(m,t.x),b=x=>{let v={};for(let w=0;w<s.length;++w)v[s[w]]=m.dims[w];v[c[0]]=x[0],v[c[1]]=x[1],d.push(An(v))};a==="linear"?y.forEach(x=>b([x,g.predict(x)])):iD(g.predict,y,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}})});function QKt(t,r){let n=t/(Math.abs(t)+Math.abs(r));return(r>0?3-n:1+n)/4}function pye(t,r,n,o){let i=t-n,s=r-o;return i*i+s*s}function mye(t,r,n,o,i,s){let a=(o-r)*(i-t),l=(n-t)*(s-r);return Math.abs(a-l)>=33306690738754716e-32*Math.abs(a+l)?a-l:0}function Qq(t,r,n,o,i,s){return(mye(i,s,t,r,n,o)||mye(t,r,n,o,i,s)||mye(n,o,i,s,t,r))<0}function JKt(t,r,n,o,i,s,a,l){let u=t-a,c=r-l,f=n-a,d=o-l,p=i-a,m=s-l,h=u*u+c*c,g=f*f+d*d,y=p*p+m*m;return u*(d*y-g*m)-c*(f*y-g*p)+h*(f*m-d*p)<0}function eZt(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),m=(c*f-l*d)*p,h=(a*d-u*f)*p;return m*m+h*h}function tZt(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),m=t+(c*f-l*d)*p,h=r+(a*d-u*f)*p;return{x:m,y:h}}function $N(t,r,n,o){if(o-n<=20)for(let i=n+1;i<=o;i++){let s=t[i],a=r[s],l=i-1;for(;l>=n&&r[t[l]]>a;)t[l+1]=t[l--];t[l+1]=s}else{let i=n+o>>1,s=n+1,a=o;n5(t,i,s),r[t[n]]>r[t[o]]&&n5(t,n,o),r[t[s]]>r[t[o]]&&n5(t,s,o),r[t[n]]>r[t[s]]&&n5(t,n,s);let l=t[s],u=r[l];for(;;){do s++;while(r[t[s]]<u);do a--;while(r[t[a]]>u);if(a<s)break;n5(t,s,a)}t[n+1]=t[a],t[a]=l,o-s+1>=a-n?($N(t,r,s,o),$N(t,r,n,a-1)):($N(t,r,n,a-1),$N(t,r,s,o))}}function n5(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function rZt(t){return t[0]}function nZt(t){return t[1]}var JXe,Zq,o5,eKe=D(()=>{"use strict";JXe=Math.pow(2,-52),Zq=new Uint32Array(512),o5=class t{static from(r,n=rZt,o=nZt){let i=r.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){let l=r[a];s[2*a]=n(l),s[2*a+1]=o(l)}return new t(s)}constructor(r){let n=r.length>>1;if(n>0&&typeof r[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=r;let o=Math.max(2*n-5,0);this._triangles=new Uint32Array(o*3),this._halfedges=new Int32Array(o*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:r,_hullPrev:n,_hullNext:o,_hullTri:i,_hullHash:s}=this,a=r.length>>1,l=1/0,u=1/0,c=-1/0,f=-1/0;for(let N=0;N<a;N++){let k=r[2*N],M=r[2*N+1];k<l&&(l=k),M<u&&(u=M),k>c&&(c=k),M>f&&(f=M),this._ids[N]=N}let d=(l+c)/2,p=(u+f)/2,m=1/0,h,g,y;for(let N=0;N<a;N++){let k=pye(d,p,r[2*N],r[2*N+1]);k<m&&(h=N,m=k)}let b=r[2*h],x=r[2*h+1];m=1/0;for(let N=0;N<a;N++){if(N===h)continue;let k=pye(b,x,r[2*N],r[2*N+1]);k<m&&k>0&&(g=N,m=k)}let v=r[2*g],w=r[2*g+1],_=1/0;for(let N=0;N<a;N++){if(N===h||N===g)continue;let k=eZt(b,x,v,w,r[2*N],r[2*N+1]);k<_&&(y=N,_=k)}let C=r[2*y],S=r[2*y+1];if(_===1/0){for(let M=0;M<a;M++)this._dists[M]=r[2*M]-r[0]||r[2*M+1]-r[1];$N(this._ids,this._dists,0,a-1);let N=new Uint32Array(a),k=0;for(let M=0,I=-1/0;M<a;M++){let L=this._ids[M];this._dists[L]>I&&(N[k++]=L,I=this._dists[L])}this.hull=N.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Qq(b,x,v,w,C,S)){let N=g,k=v,M=w;g=y,v=C,w=S,y=N,C=k,S=M}let E=tZt(b,x,v,w,C,S);this._cx=E.x,this._cy=E.y;for(let N=0;N<a;N++)this._dists[N]=pye(r[2*N],r[2*N+1],E.x,E.y);$N(this._ids,this._dists,0,a-1),this._hullStart=h;let A=3;o[h]=n[y]=g,o[g]=n[h]=y,o[y]=n[g]=h,i[h]=0,i[g]=1,i[y]=2,s.fill(-1),s[this._hashKey(b,x)]=h,s[this._hashKey(v,w)]=g,s[this._hashKey(C,S)]=y,this.trianglesLen=0,this._addTriangle(h,g,y,-1,-1,-1);for(let N=0,k,M;N<this._ids.length;N++){let I=this._ids[N],L=r[2*I],P=r[2*I+1];if(N>0&&Math.abs(L-k)<=JXe&&Math.abs(P-M)<=JXe||(k=L,M=P,I===h||I===g||I===y))continue;let R=0;for(let X=0,pe=this._hashKey(L,P);X<this._hashSize&&(R=s[(pe+X)%this._hashSize],!(R!==-1&&R!==o[R]));X++);R=n[R];let V=R,G;for(;G=o[V],!Qq(L,P,r[2*V],r[2*V+1],r[2*G],r[2*G+1]);)if(V=G,V===R){V=-1;break}if(V===-1)continue;let U=this._addTriangle(V,I,o[V],-1,-1,i[V]);i[I]=this._legalize(U+2),i[V]=U,A++;let Y=o[V];for(;G=o[Y],Qq(L,P,r[2*Y],r[2*Y+1],r[2*G],r[2*G+1]);)U=this._addTriangle(Y,I,G,i[I],-1,i[Y]),i[I]=this._legalize(U+2),o[Y]=Y,A--,Y=G;if(V===R)for(;G=n[V],Qq(L,P,r[2*G],r[2*G+1],r[2*V],r[2*V+1]);)U=this._addTriangle(G,I,V,-1,i[V],i[G]),this._legalize(U+2),i[G]=U,o[V]=V,A--,V=G;this._hullStart=n[I]=V,o[V]=n[Y]=I,o[I]=Y,s[this._hashKey(L,P)]=I,s[this._hashKey(r[2*V],r[2*V+1])]=V}this.hull=new Uint32Array(A);for(let N=0,k=this._hullStart;N<A;N++)this.hull[N]=k,k=o[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(r,n){return Math.floor(QKt(r-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(r){let{_triangles:n,_halfedges:o,coords:i}=this,s=0,a=0;for(;;){let l=o[r],u=r-r%3;if(a=u+(r+2)%3,l===-1){if(s===0)break;r=Zq[--s];continue}let c=l-l%3,f=u+(r+1)%3,d=c+(l+2)%3,p=n[a],m=n[r],h=n[f],g=n[d];if(JKt(i[2*p],i[2*p+1],i[2*m],i[2*m+1],i[2*h],i[2*h+1],i[2*g],i[2*g+1])){n[r]=g,n[l]=p;let b=o[d];if(b===-1){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=r;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(r,b),this._link(l,o[a]),this._link(a,d);let x=c+(l+1)%3;s<Zq.length&&(Zq[s++]=x)}else{if(s===0)break;r=Zq[--s]}}return a}_link(r,n){this._halfedges[r]=n,n!==-1&&(this._halfedges[n]=r)}_addTriangle(r,n,o,i,s,a){let l=this.trianglesLen;return this._triangles[l]=r,this._triangles[l+1]=n,this._triangles[l+2]=o,this._link(l,i),this._link(l+1,s),this._link(l+2,a),this.trianglesLen+=3,l}}});var ih,hye=D(()=>{"use strict";ih=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(r,n){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(r,n){this._+=`L${this._x1=+r},${this._y1=+n}`}arc(r,n,o){r=+r,n=+n,o=+o;let i=r+o,s=n;if(o<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),o&&(this._+=`A${o},${o},0,1,1,${r-o},${n}A${o},${o},0,1,1,${this._x1=i},${this._y1=s}`)}rect(r,n,o,i){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${+o}v${+i}h${-o}Z`}value(){return this._||null}}});var fT,gye=D(()=>{"use strict";fT=class{constructor(){this._=[]}moveTo(r,n){this._.push([r,n])}closePath(){this._.push(this._[0].slice())}lineTo(r,n){this._.push([r,n])}value(){return this._.length?this._:null}}});var Jq,tKe=D(()=>{"use strict";hye();gye();Jq=class{constructor(r,[n,o,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=r,this._circumcenters=new Float64Array(r.points.length*2),this.vectors=new Float64Array(r.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=o,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:r,hull:n,triangles:o},vectors:i}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let m=0,h=0,g=o.length,y,b;m<g;m+=3,h+=2){let x=o[m]*2,v=o[m+1]*2,w=o[m+2]*2,_=r[x],C=r[x+1],S=r[v],E=r[v+1],A=r[w],N=r[w+1],k=S-_,M=E-C,I=A-_,L=N-C,P=k*k+M*M,R=I*I+L*L,V=(k*L-M*I)*2;if(!V)y=(_+A)/2-1e8*L,b=(C+N)/2+1e8*I;else if(Math.abs(V)<1e-8)y=(_+A)/2,b=(C+N)/2;else{let G=1/V;y=_+(L*P-M*R)*G,b=C+(k*R-I*P)*G}s[h]=y,s[h+1]=b}let a=n[n.length-1],l,u=a*4,c,f=r[2*a],d,p=r[2*a+1];i.fill(0);for(let m=0;m<n.length;++m)a=n[m],l=u,c=f,d=p,u=a*4,f=r[2*a],p=r[2*a+1],i[l+2]=i[u]=d-p,i[l+3]=i[u+1]=f-c}render(r){let n=r==null?r=new ih:void 0,{delaunay:{halfedges:o,inedges:i,hull:s},circumcenters:a,vectors:l}=this;if(s.length<=1)return null;for(let f=0,d=o.length;f<d;++f){let p=o[f];if(p<f)continue;let m=Math.floor(f/3)*2,h=Math.floor(p/3)*2,g=a[m],y=a[m+1],b=a[h],x=a[h+1];this._renderSegment(g,y,b,x,r)}let u,c=s[s.length-1];for(let f=0;f<s.length;++f){u=c,c=s[f];let d=Math.floor(i[c]/3)*2,p=a[d],m=a[d+1],h=u*4,g=this._project(p,m,l[h+2],l[h+3]);g&&this._renderSegment(p,m,g[0],g[1],r)}return n&&n.value()}renderBounds(r){let n=r==null?r=new ih:void 0;return r.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(r,n){let o=n==null?n=new ih:void 0,i=this._clip(r);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),o&&o.value()}*cellPolygons(){let{delaunay:{points:r}}=this;for(let n=0,o=r.length/2;n<o;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(r){let n=new fT;return this.renderCell(r,n),n.value()}_renderSegment(r,n,o,i,s){let a,l=this._regioncode(r,n),u=this._regioncode(o,i);l===0&&u===0?(s.moveTo(r,n),s.lineTo(o,i)):(a=this._clipSegment(r,n,o,i,l,u))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(r,n,o){return n=+n,n!==n||(o=+o,o!==o)?!1:this.delaunay._step(r,n,o)===r}*neighbors(r){let n=this._clip(r);if(n)for(let o of this.delaunay.neighbors(r)){let i=this._clip(o);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let l=0,u=i.length;l<u;l+=2)if(n[s]==i[l]&&n[s+1]==i[l+1]&&n[(s+2)%a]==i[(l+u-2)%u]&&n[(s+3)%a]==i[(l+u-1)%u]){yield o;break e}}}}_cell(r){let{circumcenters:n,delaunay:{inedges:o,halfedges:i,triangles:s}}=this,a=o[r];if(a===-1)return null;let l=[],u=a;do{let c=Math.floor(u/3);if(l.push(n[c*2],n[c*2+1]),u=u%3===2?u-2:u+1,s[u]!==r)break;u=i[u]}while(u!==a&&u!==-1);return l}_clip(r){if(r===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(r);if(n===null)return null;let{vectors:o}=this,i=r*4;return o[i]||o[i+1]?this._clipInfinite(r,n,o[i],o[i+1],o[i+2],o[i+3]):this._clipFinite(r,n)}_clipFinite(r,n){let o=n.length,i=null,s,a,l=n[o-2],u=n[o-1],c,f=this._regioncode(l,u),d,p;for(let m=0;m<o;m+=2)if(s=l,a=u,l=n[m],u=n[m+1],c=f,f=this._regioncode(l,u),c===0&&f===0)d=p,p=0,i?i.push(l,u):i=[l,u];else{let h,g,y,b,x;if(c===0){if((h=this._clipSegment(s,a,l,u,c,f))===null)continue;[g,y,b,x]=h}else{if((h=this._clipSegment(l,u,s,a,f,c))===null)continue;[b,x,g,y]=h,d=p,p=this._edgecode(g,y),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(g,y):i=[g,y]}d=p,p=this._edgecode(b,x),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(b,x):i=[b,x]}if(i)d=p,p=this._edgecode(i[0],i[1]),d&&p&&this._edge(r,d,p,i,i.length);else if(this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(r,n,o,i,s,a){for(;;){if(s===0&&a===0)return[r,n,o,i];if(s&a)return null;let l,u,c=s||a;c&8?(l=r+(o-r)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=r+(o-r)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-r)/(o-r),l=this.xmax):(u=n+(i-n)*(this.xmin-r)/(o-r),l=this.xmin),s?(r=l,n=u,s=this._regioncode(r,n)):(o=l,i=u,a=this._regioncode(o,i))}}_clipInfinite(r,n,o,i,s,a){let l=Array.from(n),u;if((u=this._project(l[0],l[1],o,i))&&l.unshift(u[0],u[1]),(u=this._project(l[l.length-2],l[l.length-1],s,a))&&l.push(u[0],u[1]),l=this._clipFinite(r,l))for(let c=0,f=l.length,d,p=this._edgecode(l[f-2],l[f-1]);c<f;c+=2)d=p,p=this._edgecode(l[c],l[c+1]),d&&p&&(c=this._edge(r,d,p,l,c),f=l.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(r,n,o,i,s){for(;n!==o;){let a,l;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,l=this.ymin;break}(i[s]!==a||i[s+1]!==l)&&this.contains(r,a,l)&&(i.splice(s,0,a,l),s+=2)}if(i.length>4)for(let a=0;a<i.length;a+=2){let l=(a+2)%i.length,u=(a+4)%i.length;(i[a]===i[l]&&i[l]===i[u]||i[a+1]===i[l+1]&&i[l+1]===i[u+1])&&(i.splice(l,2),a-=2)}return s}_project(r,n,o,i){let s=1/0,a,l,u;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(u=this.ymin,l=r+(s=a)*o)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(u=this.ymax,l=r+(s=a)*o)}if(o>0){if(r>=this.xmax)return null;(a=(this.xmax-r)/o)<s&&(l=this.xmax,u=n+(s=a)*i)}else if(o<0){if(r<=this.xmin)return null;(a=(this.xmin-r)/o)<s&&(l=this.xmin,u=n+(s=a)*i)}return[l,u]}_edgecode(r,n){return(r===this.xmin?1:r===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(r,n){return(r<this.xmin?1:r>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}});function iZt(t){return t[0]}function sZt(t){return t[1]}function aZt(t){let{triangles:r,coords:n}=t;for(let o=0;o<r.length;o+=3){let i=2*r[o],s=2*r[o+1],a=2*r[o+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function lZt(t,r,n){return[t+Math.sin(t+r)*n,r+Math.cos(t-r)*n]}function uZt(t,r,n,o){let i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){let l=t[a];s[a*2]=r.call(o,l,a,t),s[a*2+1]=n.call(o,l,a,t)}return s}function*cZt(t,r,n,o){let i=0;for(let s of t)yield r.call(o,s,i,t),yield n.call(o,s,i,t),++i}var oZt,zN,i5,rKe=D(()=>{"use strict";eKe();hye();gye();tKe();oZt=2*Math.PI,zN=Math.pow;i5=class t{static from(r,n=iZt,o=sZt,i){return new t("length"in r?uZt(r,n,o,i):Float64Array.from(cZt(r,n,o,i)))}constructor(r){this._delaunator=new o5(r),this.inedges=new Int32Array(r.length/2),this._hullIndex=new Int32Array(r.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let r=this._delaunator,n=this.points;if(r.hull&&r.hull.length>2&&aZt(r)){this.collinear=Int32Array.from({length:n.length/2},(p,m)=>m).sort((p,m)=>n[2*p]-n[2*m]||n[2*p+1]-n[2*m+1]);let u=this.collinear[0],c=this.collinear[this.collinear.length-1],f=[n[2*u],n[2*u+1],n[2*c],n[2*c+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,m=n.length/2;p<m;++p){let h=lZt(n[2*p],n[2*p+1],d);n[2*p]=h[0],n[2*p+1]=h[1]}this._delaunator=new o5(n)}else delete this.collinear;let o=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let u=0,c=o.length;u<c;++u){let f=s[u%3===2?u-2:u+1];(o[u]===-1||a[f]===-1)&&(a[f]=u)}for(let u=0,c=i.length;u<c;++u)l[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],a[i[0]]=1,i.length===2&&(a[i[1]]=0))}voronoi(r){return new Jq(this,r)}*neighbors(r){let{inedges:n,hull:o,_hullIndex:i,halfedges:s,triangles:a,collinear:l}=this;if(l){let d=l.indexOf(r);d>0&&(yield l[d-1]),d<l.length-1&&(yield l[d+1]);return}let u=n[r];if(u===-1)return;let c=u,f=-1;do{if(yield f=a[c],c=c%3===2?c-2:c+1,a[c]!==r)return;if(c=s[c],c===-1){let d=o[(i[r]+1)%o.length];d!==f&&(yield d);return}}while(c!==u)}find(r,n,o=0){if(r=+r,r!==r||(n=+n,n!==n))return-1;let i=o,s;for(;(s=this._step(o,r,n))>=0&&s!==o&&s!==i;)o=s;return s}_step(r,n,o){let{inedges:i,hull:s,_hullIndex:a,halfedges:l,triangles:u,points:c}=this;if(i[r]===-1||!c.length)return(r+1)%(c.length>>1);let f=r,d=zN(n-c[r*2],2)+zN(o-c[r*2+1],2),p=i[r],m=p;do{let h=u[m],g=zN(n-c[h*2],2)+zN(o-c[h*2+1],2);if(g<d&&(d=g,f=h),m=m%3===2?m-2:m+1,u[m]!==r)break;if(m=l[m],m===-1){if(m=s[(a[r]+1)%s.length],m!==h&&zN(n-c[m*2],2)+zN(o-c[m*2+1],2)<d)return m;break}}while(m!==p);return f}render(r){let n=r==null?r=new ih:void 0,{points:o,halfedges:i,triangles:s}=this;for(let a=0,l=i.length;a<l;++a){let u=i[a];if(u<a)continue;let c=s[a]*2,f=s[u]*2;r.moveTo(o[c],o[c+1]),r.lineTo(o[f],o[f+1])}return this.renderHull(r),n&&n.value()}renderPoints(r,n=2){let o=r==null?r=new ih:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){let l=i[s],u=i[s+1];r.moveTo(l+n,u),r.arc(l,u,n,0,oZt)}return o&&o.value()}renderHull(r){let n=r==null?r=new ih:void 0,{hull:o,points:i}=this,s=o[0]*2,a=o.length;r.moveTo(i[s],i[s+1]);for(let l=1;l<a;++l){let u=2*o[l];r.lineTo(i[u],i[u+1])}return r.closePath(),n&&n.value()}hullPolygon(){let r=new fT;return this.renderHull(r),r.value()}renderTriangle(r,n){let o=n==null?n=new ih:void 0,{points:i,triangles:s}=this,a=s[r*=3]*2,l=s[r+1]*2,u=s[r+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.lineTo(i[u],i[u+1]),n.closePath(),o&&o.value()}*trianglePolygons(){let{triangles:r}=this;for(let n=0,o=r.length/3;n<o;++n)yield this.trianglePolygon(n)}trianglePolygon(r){let n=new fT;return this.renderTriangle(r,n),n.value()}}});var nKe=D(()=>{"use strict";rKe()});var bye={};cn(bye,{voronoi:()=>yye});function yye(t){et.call(this,null,t)}function dZt(t){let r=t[0][0],n=t[0][1],o=t.length-1;for(;t[o][0]===r&&t[o][1]===n;--o);return"M"+t.slice(0,o+1).join("L")+"Z"}var fZt,oKe=D(()=>{"use strict";qa();Ts();nKe();yye.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};fZt=[-1e5,-1e5,1e5,1e5];It(yye,et,{transform(t,r){let n=t.as||"path",o=r.source;if(!o||!o.length)return r;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:fZt;let s=this.value=i5.from(o,t.x,t.y).voronoi(i);for(let a=0,l=o.length;a<l;++a){let u=s.cellPolygon(a);o[a][n]=u?dZt(u):null}return r.reflow(t.modified()).modifies(n)}})});function UN(t,r,n){return t.fields=r||[],t.fname=n,t}function pZt(t){return t.length===1?mZt(t[0]):hZt(t)}function dT(t){throw Error(t)}function gZt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||dT("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&dT("Access path missing closing bracket: "+t),o&&dT("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function yZt(t,r,n){let o=gZt(t);return t=o.length===1?o[0]:t,UN((n&&n.get||pZt)(o),[t],r||t)}function vye(t){return t[t.length-1]}function iKe(t){return t==null||t===""?null:+t}function wye(t){return t!=null?xye(t)?t:[t]:[]}function eH(t){return typeof t=="function"}function tH(t){return eH(t)?t:()=>t}function sKe(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function aKe(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function lKe(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),sKe(o,n)}function _ye(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var mZt,hZt,x7n,v7n,bZt,xZt,w7n,_7n,xye,rH=D(()=>{"use strict";mZt=t=>function(r){return r[t]},hZt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};x7n=yZt("id"),v7n=UN(t=>t,[],"identity"),bZt=UN(()=>0,[],"zero"),xZt=UN(()=>1,[],"one"),w7n=UN(()=>!0,[],"true"),_7n=UN(()=>!1,[],"false"),xye=Array.isArray});function cy(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var nH=D(()=>{"use strict"});function Sye(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var uKe=D(()=>{"use strict"});function pT(t){let r,n,o;t.length!==2?(r=cy,n=(l,u)=>cy(t(l),u),o=(l,u)=>t(l)-u):(r=t===cy||t===Sye?t:vZt,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function vZt(){return 0}var Cye=D(()=>{"use strict";nH();uKe()});function s5(t){return t===null?NaN:+t}var Eye=D(()=>{"use strict"});var cKe,a5,wZt,_Zt,sh,fKe=D(()=>{"use strict";nH();Cye();Eye();cKe=pT(cy),a5=cKe.right,wZt=cKe.left,_Zt=pT(s5).center,sh=a5});function oH(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=SZt?10:s>=CZt?5:s>=EZt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?oH(t,r,n*2):[l,u,c]}function mT(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?oH(r,t,n):oH(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function l5(t,r,n){return r=+r,t=+t,n=+n,oH(t,r,n)[2]}function VN(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?l5(r,t,n):l5(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var SZt,CZt,EZt,dKe=D(()=>{"use strict";SZt=Math.sqrt(50),CZt=Math.sqrt(10),EZt=Math.sqrt(2)});function Tye(t,r,n=s5){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var pKe=D(()=>{"use strict";Eye()});function iH(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var mKe=D(()=>{"use strict"});var ah=D(()=>{"use strict";fKe();nH();Cye();pKe();mKe();dKe();H3()});function Js(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function fy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var hd=D(()=>{"use strict"});function hT(){var t=new E0,r=[],n=[],o=Aye;function i(s){let a=t.get(s);if(a===void 0){if(o!==Aye)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new E0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return hT(r,n).unknown(o)},Js.apply(i,arguments),i}var Aye,hKe=D(()=>{"use strict";ah();hd();Aye=Symbol("implicit")});function kye(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function sH(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return kye((n-o/r)*r,a,i,s,l)}}var aH=D(()=>{"use strict"});function lH(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return kye((n-o/r)*r,i,s,a,l)}}var Iye=D(()=>{"use strict";aH()});var GN,Dye=D(()=>{"use strict";GN=t=>()=>t});function gKe(t,r){return function(n){return t+n*r}}function TZt(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function k_(t,r){var n=r-t;return n?gKe(t,n>180||n<-180?n-360*Math.round(n/360):n):GN(isNaN(t)?r:t)}function yKe(t){return(t=+t)==1?Wi:function(r,n){return n-r?TZt(r,n,t):GN(isNaN(r)?n:r)}}function Wi(t,r){var n=r-t;return n?gKe(t,n):GN(isNaN(t)?r:t)}var gT=D(()=>{"use strict";Dye()});function bKe(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=Xs(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var u5,xKe,vKe,Nye=D(()=>{"use strict";As();aH();Iye();gT();u5=function t(r){var n=yKe(r);function o(i,s){var a=n((i=Xs(i)).r,(s=Xs(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Wi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);xKe=bKe(sH),vKe=bKe(lH)});function WN(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function uH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var cH=D(()=>{"use strict"});function wKe(t,r){return(uH(r)?WN:Fye)(t,r)}function Fye(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=ef(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var Oye=D(()=>{"use strict";c5();cH()});function fH(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var Mye=D(()=>{"use strict"});function pu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var f5=D(()=>{"use strict"});function dH(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=ef(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var Rye=D(()=>{"use strict";c5()});function AZt(t){return function(){return t}}function kZt(t){return function(r){return t(r)+""}}function pH(t,r){var n=Pye.lastIndex=jye.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=Pye.exec(t))&&(i=jye.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:pu(o,i)})),n=jye.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?kZt(u[0].x):AZt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var Pye,jye,Lye=D(()=>{"use strict";f5();Pye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jye=new RegExp(Pye.source,"g")});function ef(t,r){var n=typeof r,o;return r==null||n==="boolean"?GN(r):(n==="number"?pu:n==="string"?(o=qc(r))?(r=o,u5):pH:r instanceof qc?u5:r instanceof Date?fH:uH(r)?WN:Array.isArray(r)?Fye:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?dH:pu)(t,r)}var c5=D(()=>{"use strict";As();Nye();Oye();Mye();f5();Rye();Lye();Dye();cH()});function _Ke(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var SKe=D(()=>{"use strict"});function CKe(t,r){var n=k_(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var EKe=D(()=>{"use strict";gT()});function I_(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var TKe=D(()=>{"use strict"});function Bye(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*AKe,skewX:Math.atan(u)*AKe,scaleX:a,scaleY:l}}var AKe,mH,kKe=D(()=>{"use strict";AKe=180/Math.PI,mH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function IKe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?mH:Bye(r.a,r.b,r.c,r.d,r.e,r.f)}function DKe(t){return t==null?mH:(hH||(hH=document.createElementNS("http://www.w3.org/2000/svg","g")),hH.setAttribute("transform",t),(t=hH.transform.baseVal.consolidate())?(t=t.matrix,Bye(t.a,t.b,t.c,t.d,t.e,t.f)):mH)}var hH,NKe=D(()=>{"use strict";kKe()});function FKe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,m,h){if(c!==d||f!==p){var g=m.push("translate(",null,r,null,n);h.push({i:g-4,x:pu(c,d)},{i:g-2,x:pu(f,p)})}else(d||p)&&m.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:pu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:pu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,m,h){if(c!==d||f!==p){var g=m.push(i(m)+"scale(",null,",",null,")");h.push({i:g-4,x:pu(c,d)},{i:g-2,x:pu(f,p)})}else(d!==1||p!==1)&&m.push(i(m)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(m){for(var h=-1,g=p.length,y;++h<g;)d[(y=p[h]).i]=y.x(m);return d.join("")}}}var OKe,MKe,RKe=D(()=>{"use strict";f5();NKe();OKe=FKe(IKe,"px, ","px)","deg)"),MKe=FKe(DKe,", ",")",")")});function jKe(t){return((t=Math.exp(t))+1/t)/2}function DZt(t){return((t=Math.exp(t))-1/t)/2}function NZt(t){return((t=Math.exp(2*t))-1)/(t+1)}var IZt,PKe,LKe=D(()=>{"use strict";IZt=1e-12;PKe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],m=f-l,h=d-u,g=m*m+h*h,y,b;if(g<IZt)b=Math.log(p/c)/r,y=function(S){return[l+S*m,u+S*h,c*Math.exp(r*S*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-_)/r,y=function(S){var E=S*b,A=jKe(_),N=c/(n*x)*(A*NZt(r*E+_)-DZt(_));return[l+N*m,u+N*h,c*A/jKe(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function BKe(t){return function(r,n){var o=t((r=sd(r)).h,(n=sd(n)).h),i=Wi(r.s,n.s),s=Wi(r.l,n.l),a=Wi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var $Ke,zKe,UKe=D(()=>{"use strict";As();gT();$Ke=BKe(k_),zKe=BKe(Wi)});function $ye(t,r){var n=Wi((t=Hc(t)).l,(r=Hc(r)).l),o=Wi(t.a,r.a),i=Wi(t.b,r.b),s=Wi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var VKe=D(()=>{"use strict";As();gT()});function GKe(t){return function(r,n){var o=t((r=ad(r)).h,(n=ad(n)).h),i=Wi(r.c,n.c),s=Wi(r.l,n.l),a=Wi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var WKe,qKe,HKe=D(()=>{"use strict";As();gT();WKe=GKe(k_),qKe=GKe(Wi)});function YKe(t){return function r(n){n=+n;function o(i,s){var a=t((i=fp(i)).h,(s=fp(s)).h),l=Wi(i.s,s.s),u=Wi(i.l,s.l),c=Wi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var XKe,KKe,ZKe=D(()=>{"use strict";As();gT();XKe=YKe(k_),KKe=YKe(Wi)});function yT(t,r){r===void 0&&(r=t,t=ef);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var QKe=D(()=>{"use strict";c5()});function JKe(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var eZe=D(()=>{"use strict"});var zye={};cn(zye,{interpolate:()=>ef,interpolateArray:()=>wKe,interpolateBasis:()=>sH,interpolateBasisClosed:()=>lH,interpolateCubehelix:()=>XKe,interpolateCubehelixLong:()=>KKe,interpolateDate:()=>fH,interpolateDiscrete:()=>_Ke,interpolateHcl:()=>WKe,interpolateHclLong:()=>qKe,interpolateHsl:()=>$Ke,interpolateHslLong:()=>zKe,interpolateHue:()=>CKe,interpolateLab:()=>$ye,interpolateNumber:()=>pu,interpolateNumberArray:()=>WN,interpolateObject:()=>dH,interpolateRgb:()=>u5,interpolateRgbBasis:()=>xKe,interpolateRgbBasisClosed:()=>vKe,interpolateRound:()=>I_,interpolateString:()=>pH,interpolateTransformCss:()=>OKe,interpolateTransformSvg:()=>MKe,interpolateZoom:()=>PKe,piecewise:()=>yT,quantize:()=>JKe});var d5=D(()=>{"use strict";c5();Oye();aH();Iye();Mye();SKe();EKe();f5();cH();Rye();TKe();Lye();RKe();LKe();Nye();UKe();VKe();HKe();ZKe();QKe();eZe()});function Uye(t){return function(){return t}}var tZe=D(()=>{"use strict"});function qN(t){return+t}var Vye=D(()=>{"use strict"});function Ol(t){return t}function Gye(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:Uye(isNaN(r)?NaN:.5)}function FZt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function OZt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=Gye(i,o),s=n(a,s)):(o=Gye(o,i),s=n(s,a)),function(l){return s(o(l))}}function MZt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=Gye(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=sh(t,l,1,o)-1;return s[u](i[u](l))}}function dy(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bT(){var t=rZe,r=rZe,n=ef,o,i,s,a=Ol,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Ol&&(a=FZt(t[0],t[p-1])),l=p>2?MZt:OZt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),pu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,qN),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=I_,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Ol,f()):a!==Ol},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,m){return o=p,i=m,f()}}function p5(){return bT()(Ol,Ol)}var rZe,D_=D(()=>{"use strict";ah();d5();tZe();Vye();rZe=[0,1]});function HN(t,r,n,o){var i=VN(t,r,n),s;switch(o=cd(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=YD(i,a))&&(o.precision=s),PE(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=XD(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=HD(i))&&(o.precision=s-(o.type==="%")*2);break}}return qm(o)}var Wye=D(()=>{"use strict";ah();LE()});function gd(t){var r=t.domain;return t.ticks=function(n){var o=r();return mT(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return HN(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=l5(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function m5(){var t=p5();return t.copy=function(){return dy(t,m5())},Js.apply(t,arguments),gd(t)}var N_=D(()=>{"use strict";ah();D_();hd();Wye()});function h5(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,qN),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return h5(t).unknown(r)},t=arguments.length?Array.from(t,qN):[0,1],gd(n)}var nZe=D(()=>{"use strict";N_();Vye()});function g5(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var qye=D(()=>{"use strict"});function oZe(t){return Math.log(t)}function iZe(t){return Math.exp(t)}function RZt(t){return-Math.log(-t)}function jZt(t){return-Math.exp(-t)}function PZt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function LZt(t){return t===10?PZt:t===Math.E?Math.exp:r=>Math.pow(t,r)}function BZt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function sZe(t){return(r,n)=>-t(-r,n)}function y5(t){let r=t(oZe,iZe),n=r.domain,o=10,i,s;function a(){return i=BZt(o),s=LZt(o),n()[0]<0?(i=sZe(i),s=sZe(s),t(RZt,jZt)):t(oZe,iZe),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),m=i(f),h,g,y=l==null?10:+l,b=[];if(!(o%1)&&m-p<y){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(h=1;h<o;++h)if(g=p<0?h/s(-p):h*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=m;++p)for(h=o-1;h>=1;--h)if(g=p>0?h/s(-p):h*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=mT(c,f,y))}else b=mT(p,m,Math.min(m-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=cd(u)).precision==null&&(u.trim=!0),u=qm(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(g5(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function b5(){let t=y5(bT()).domain([1,10]);return t.copy=()=>dy(t,b5()).base(t.base()),Js.apply(t,arguments),t}var gH=D(()=>{"use strict";ah();LE();qye();D_();hd()});function aZe(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function lZe(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function x5(t){var r=1,n=t(aZe(r),lZe(r));return n.constant=function(o){return arguments.length?t(aZe(r=+o),lZe(r)):r},gd(n)}function v5(){var t=x5(bT());return t.copy=function(){return dy(t,v5()).constant(t.constant())},Js.apply(t,arguments)}var yH=D(()=>{"use strict";N_();D_();hd()});function uZe(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function $Zt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function zZt(t){return t<0?-t*t:t*t}function w5(t){var r=t(Ol,Ol),n=1;function o(){return n===1?t(Ol,Ol):n===.5?t($Zt,zZt):t(uZe(n),uZe(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},gd(r)}function YN(){var t=w5(bT());return t.copy=function(){return dy(t,YN()).exponent(t.exponent())},Js.apply(t,arguments),t}function Hye(){return YN.apply(null,arguments).exponent(.5)}var bH=D(()=>{"use strict";N_();D_();hd()});function _5(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=Tye(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[sh(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(cy),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return _5().domain(t).range(r).unknown(o)},Js.apply(s,arguments)}var cZe=D(()=>{"use strict";ah();hd()});function S5(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[sh(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return S5().domain([t,r]).range(i).unknown(s)},Js.apply(gd(a),arguments)}var fZe=D(()=>{"use strict";ah();N_();hd()});function C5(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[sh(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return C5().domain(t).range(r).unknown(n)},Js.apply(i,arguments)}var dZe=D(()=>{"use strict";ah();hd()});function si(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>si(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(Yye.setTime(+s),Xye.setTime(+a),t(Yye),t(Xye),Math.floor(n(Yye,Xye))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var Yye,Xye,lv=D(()=>{"use strict";Yye=new Date,Xye=new Date});var lh,pZe,Kye=D(()=>{"use strict";lv();lh=si(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);lh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?si(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):lh);pZe=lh.range});var mu,mZe,Zye=D(()=>{"use strict";lv();mu=si(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),mZe=mu.range});var F_,UZt,O_,VZt,Qye=D(()=>{"use strict";lv();F_=si(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),UZt=F_.range,O_=si(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),VZt=O_.range});var M_,GZt,R_,WZt,Jye=D(()=>{"use strict";lv();M_=si(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),GZt=M_.range,R_=si(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),WZt=R_.range});var uh,qZt,uv,HZt,xH,YZt,ebe=D(()=>{"use strict";lv();uh=si(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),qZt=uh.range,uv=si(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),HZt=uv.range,xH=si(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),YZt=xH.range});function wT(t){return si(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function _T(t){return si(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var my,gZe,yZe,bZe,xZe,vZe,wZe,_Ze,XZt,KZt,ZZt,QZt,JZt,eQt,hy,SZe,CZe,EZe,TZe,AZe,kZe,IZe,tQt,rQt,nQt,oQt,iQt,sQt,tbe=D(()=>{"use strict";lv();my=wT(0),gZe=wT(1),yZe=wT(2),bZe=wT(3),xZe=wT(4),vZe=wT(5),wZe=wT(6),_Ze=my.range,XZt=gZe.range,KZt=yZe.range,ZZt=bZe.range,QZt=xZe.range,JZt=vZe.range,eQt=wZe.range;hy=_T(0),SZe=_T(1),CZe=_T(2),EZe=_T(3),TZe=_T(4),AZe=_T(5),kZe=_T(6),IZe=hy.range,tQt=SZe.range,rQt=CZe.range,nQt=EZe.range,oQt=TZe.range,iQt=AZe.range,sQt=kZe.range});var cv,aQt,fv,lQt,rbe=D(()=>{"use strict";lv();cv=si(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),aQt=cv.range,fv=si(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),lQt=fv.range});var dv,uQt,pv,cQt,nbe=D(()=>{"use strict";lv();dv=si(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());dv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:si(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});uQt=dv.range,pv=si(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());pv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:si(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});cQt=pv.range});function NZe(t,r,n,o,i,s){let a=[[mu,1,1e3],[mu,5,5*1e3],[mu,15,15*1e3],[mu,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let m=d&&typeof d.range=="function"?d:u(c,f,d),h=m?m.range(c,+f+1):[];return p?h.reverse():h}function u(c,f,d){let p=Math.abs(f-c)/d,m=pT(([,,y])=>y).right(a,p);if(m===a.length)return t.every(VN(c/31536e6,f/31536e6,d));if(m===0)return lh.every(Math.max(VN(c,f,d),1));let[h,g]=a[p/a[m-1][2]<a[m][2]/p?m-1:m];return h.every(g)}return[l,u]}var obe,ibe,sbe,abe,FZe=D(()=>{"use strict";ah();Kye();Zye();Qye();Jye();ebe();tbe();rbe();nbe();[obe,ibe]=NZe(pv,fv,hy,xH,R_,O_),[sbe,abe]=NZe(dv,cv,my,uh,M_,F_)});var vH=D(()=>{"use strict";Kye();Zye();Qye();Jye();ebe();tbe();rbe();nbe();FZe()});function dQt(t){return new Date(t)}function pQt(t){return t instanceof Date?+t:+new Date(+t)}function wH(t,r,n,o,i,s,a,l,u,c){var f=p5(),d=f.invert,p=f.domain,m=c(".%L"),h=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(C){return(u(C)<C?m:l(C)<C?h:a(C)<C?g:s(C)<C?y:o(C)<C?i(C)<C?b:x:n(C)<C?v:w)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,pQt)):p().map(dQt)},f.ticks=function(C){var S=p();return t(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?_:c(S)},f.nice=function(C){var S=p();return(!C||typeof C.range!="function")&&(C=r(S[0],S[S.length-1],C??10)),C?p(g5(S,C)):f},f.copy=function(){return dy(f,wH(t,r,n,o,i,s,a,l,u,c))},f}function _H(){return Js.apply(wH(sbe,abe,dv,cv,my,uh,M_,F_,mu,r_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var lbe=D(()=>{"use strict";vH();eN();D_();hd();qye()});function SH(){return Js.apply(wH(obe,ibe,pv,fv,hy,uv,R_,O_,mu,n_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var OZe=D(()=>{"use strict";vH();eN();lbe();hd()});function CH(){var t=0,r=1,n,o,i,s,a=Ol,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var m,h;return arguments.length?([m,h]=p,a=d(m,h),c):[a(0),a(1)]}}return c.range=f(ef),c.rangeRound=f(I_),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function mv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function XN(){var t=gd(CH()(Ol));return t.copy=function(){return mv(t,XN())},fy.apply(t,arguments)}function EH(){var t=y5(CH()).domain([1,10]);return t.copy=function(){return mv(t,EH()).base(t.base())},fy.apply(t,arguments)}function TH(){var t=x5(CH());return t.copy=function(){return mv(t,TH()).constant(t.constant())},fy.apply(t,arguments)}function T5(){var t=w5(CH());return t.copy=function(){return mv(t,T5()).exponent(t.exponent())},fy.apply(t,arguments)}function ube(){return T5.apply(null,arguments).exponent(.5)}var cbe=D(()=>{"use strict";d5();D_();hd();N_();gH();yH();bH()});function AH(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Ol,f,d=!1,p;function m(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,m):[t,r,n]},m.clamp=function(g){return arguments.length?(d=!!g,m):d},m.interpolator=function(g){return arguments.length?(c=g,m):c};function h(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=yT(g,[b,x,v]),m):[c(0),c(.5),c(1)]}}return m.range=h(ef),m.rangeRound=h(I_),m.unknown=function(g){return arguments.length?(p=g,m):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,m}}function A5(){var t=gd(AH()(Ol));return t.copy=function(){return mv(t,A5())},fy.apply(t,arguments)}function kH(){var t=y5(AH()).domain([.1,1,10]);return t.copy=function(){return mv(t,kH()).base(t.base())},fy.apply(t,arguments)}function IH(){var t=x5(AH());return t.copy=function(){return mv(t,IH()).constant(t.constant())},fy.apply(t,arguments)}function k5(){var t=w5(AH());return t.copy=function(){return mv(t,k5()).exponent(t.exponent())},fy.apply(t,arguments)}function fbe(){return k5.apply(null,arguments).exponent(.5)}var MZe=D(()=>{"use strict";d5();D_();hd();N_();gH();cbe();yH();bH()});var dbe=D(()=>{"use strict";nZe();N_();gH();yH();hKe();bH();cZe();fZe();dZe();lbe();OZe();cbe();MZe();Wye()});function hbe(t){return ST.setFullYear(t),ST.setMonth(0),ST.setDate(1),ST.setHours(0,0,0,0),ST}function yQt(t){return uh.count(hbe(t.getFullYear())-1,t)}function RZe(t){return my.count(hbe(t.getFullYear())-1,t)}function pbe(t){return hbe(t).getDay()}function bQt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return uv.count(r-1,t)}function jZe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return hy.count(r-1,t)}function mbe(t){return ST.setTime(Date.UTC(t,0,1)),ST.getUTCDay()}function KN(t,r,n){return r+t*7-(n+6)%7}var vp,$_,gy,ch,j_,P_,ZN,L_,B_,CT,ET,gQt,$Wn,zWn,ST,UWn,VWn,GWn,WWn,qWn,HWn,I5,D5,N5,DH,xQt,PZe,vQt,wQt,F5,O5,M5,_Qt,SQt,LZe,CQt,YWn,BZe=D(()=>{"use strict";rH();vH();vp="year",$_="quarter",gy="month",ch="week",j_="date",P_="day",ZN="dayofyear",L_="hours",B_="minutes",CT="seconds",ET="milliseconds",gQt=[vp,$_,gy,ch,j_,P_,ZN,L_,B_,CT,ET],$Wn=gQt.reduce((t,r,n)=>(t[r]=1+n,t),{}),zWn={[vp]:"%Y ",[$_]:"Q%q ",[gy]:"%b ",[j_]:"%d ",[ch]:"W%U ",[P_]:"%a ",[ZN]:"%j ",[L_]:"%H:00",[B_]:"00:%M",[CT]:":%S",[ET]:".%L",[`${vp}-${gy}`]:"%Y-%m ",[`${vp}-${gy}-${j_}`]:"%Y-%m-%d ",[`${L_}-${B_}`]:"%H:%M"},ST=new Date;UWn={[vp]:t=>t.getFullYear(),[$_]:t=>Math.floor(t.getMonth()/3),[gy]:t=>t.getMonth(),[j_]:t=>t.getDate(),[L_]:t=>t.getHours(),[B_]:t=>t.getMinutes(),[CT]:t=>t.getSeconds(),[ET]:t=>t.getMilliseconds(),[ZN]:t=>yQt(t),[ch]:t=>RZe(t),[ch+P_]:(t,r)=>KN(RZe(t),t.getDay(),pbe(r)),[P_]:(t,r)=>KN(1,t.getDay(),pbe(r))},VWn={[$_]:t=>3*t,[ch]:(t,r)=>KN(t,0,pbe(r))},GWn={[vp]:t=>t.getUTCFullYear(),[$_]:t=>Math.floor(t.getUTCMonth()/3),[gy]:t=>t.getUTCMonth(),[j_]:t=>t.getUTCDate(),[L_]:t=>t.getUTCHours(),[B_]:t=>t.getUTCMinutes(),[CT]:t=>t.getUTCSeconds(),[ET]:t=>t.getUTCMilliseconds(),[ZN]:t=>bQt(t),[ch]:t=>jZe(t),[P_]:(t,r)=>KN(1,t.getUTCDay(),mbe(r)),[ch+P_]:(t,r)=>KN(jZe(t),t.getUTCDay(),mbe(r))},WWn={[$_]:t=>3*t,[ch]:(t,r)=>KN(t,0,mbe(r))},qWn={[vp]:dv,[$_]:cv.every(3),[gy]:cv,[ch]:my,[j_]:uh,[P_]:uh,[ZN]:uh,[L_]:M_,[B_]:F_,[CT]:mu,[ET]:lh},HWn={[vp]:pv,[$_]:fv.every(3),[gy]:fv,[ch]:hy,[j_]:uv,[P_]:uv,[ZN]:uv,[L_]:R_,[B_]:O_,[CT]:mu,[ET]:lh},I5=1e3,D5=I5*60,N5=D5*60,DH=N5*24,xQt=DH*7,PZe=DH*30,vQt=DH*365,wQt=[vp,gy,j_,L_,B_,CT,ET],F5=wQt.slice(0,-1),O5=F5.slice(0,-1),M5=O5.slice(0,-1),_Qt=M5.slice(0,-1),SQt=[vp,ch],LZe=[vp,gy],CQt=[vp],YWn=[[F5,1,I5],[F5,5,5*I5],[F5,15,15*I5],[F5,30,30*I5],[O5,1,D5],[O5,5,5*D5],[O5,15,15*D5],[O5,30,30*D5],[M5,1,N5],[M5,3,3*N5],[M5,6,6*N5],[M5,12,12*N5],[_Qt,1,DH],[SQt,1,xQt],[LZe,1,PZe],[LZe,3,3*PZe],[CQt,1,vQt]]});function EQt(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function OQt(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function MQt(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function _be(){let t=hT().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],m=o[1-p],h=EQt(d,l,u),g=o[p-0];i=(m-g)/(h||1),a&&(i=Math.floor(i)),g+=(m-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=iH(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],m=p?n().reverse():n(),h=m.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<m[0]||g>o[1-p])))return b=Math.max(0,a5(m,g)-1),x=g===y?b:a5(m,y)-1,g-m[b]>s+1e-10&&++b,p&&(v=b,b=h-x,x=h-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return _be().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function VZe(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return VZe(r())},t}function RQt(){return VZe(_be().paddingInner(1))}function PQt(t){return jQt.call(t,iKe)}function GZe(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(sh(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=PQt(o),n):t.slice()},n.range=function(o){return arguments.length?(r=LQt.call(o),n):r.slice()},n.tickFormat=function(o,i){return HN(t[0],vye(t),o??10,i)},n.copy=function(){return GZe().domain(n.domain()).range(n.range())},n}function $Qt(t){return t[BQt]=!0,t}function zQt(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?OQt(s):s.invertExtent?MQt(s):void 0),s.type=t,$Qt(s)};return o.metadata=_ye(wye(n)),o}function Ho(t,r,n){return arguments.length>1?(gbe.set(t,zQt(t,r,n)),this):UQt(t)?gbe.get(t):void 0}function UQt(t){return gbe.has(t)}function VQt(t,r,n){return yT(GQt(r||"rgb",n),t)}function GQt(t,r){let n=zye[WQt(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function WQt(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function WZe(t){if(xye(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function qZe(t,r){for(let n in t)YQt(n,r(t[n]))}function YQt(t,r){return t=t&&t.toLowerCase(),arguments.length>1?($Ze[t]=r,this):$Ze[t]}var TQt,ybe,QN,bbe,xbe,vbe,AQt,kQt,JN,R5,NH,wbe,zZe,IQt,DQt,NQt,FQt,tl,FH,OH,fh,UZe,jQt,LQt,gbe,BQt,qQt,HQt,$Ze,sqn,aqn,HZe=D(()=>{"use strict";rH();ah();dbe();dbe();d5();Rfe();BZe();TQt="identity",ybe="linear",QN="log",bbe="pow",xbe="sqrt",vbe="symlog",AQt="time",kQt="utc",JN="sequential",R5="diverging",NH="quantile",wbe="quantize",zZe="threshold",IQt="ordinal",DQt="point",NQt="band",FQt="bin-ordinal",tl="continuous",FH="discrete",OH="discretizing",fh="interpolating",UZe="temporal";jQt=Array.prototype.map;LQt=Array.prototype.slice;gbe=new Map,BQt=Symbol("vega_scale");Ho(TQt,h5);Ho(ybe,m5,tl);Ho(QN,b5,[tl,QN]);Ho(bbe,YN,tl);Ho(xbe,Hye,tl);Ho(vbe,v5,tl);Ho(AQt,_H,[tl,UZe]);Ho(kQt,SH,[tl,UZe]);Ho(JN,XN,[tl,fh]);Ho(`${JN}-${ybe}`,XN,[tl,fh]);Ho(`${JN}-${QN}`,EH,[tl,fh,QN]);Ho(`${JN}-${bbe}`,T5,[tl,fh]);Ho(`${JN}-${xbe}`,ube,[tl,fh]);Ho(`${JN}-${vbe}`,TH,[tl,fh]);Ho(`${R5}-${ybe}`,A5,[tl,fh]);Ho(`${R5}-${QN}`,kH,[tl,fh,QN]);Ho(`${R5}-${bbe}`,k5,[tl,fh]);Ho(`${R5}-${xbe}`,fbe,[tl,fh]);Ho(`${R5}-${vbe}`,IH,[tl,fh]);Ho(NH,_5,[OH,NH]);Ho(wbe,S5,OH);Ho(zZe,C5,OH);Ho(FQt,GZe,[FH,OH]);Ho(IQt,hT,FH);Ho(NQt,_be,FH);Ho(DQt,RQt,FH);qQt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},HQt={accent:RP,category10:MP,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:jP,observable10:PP,paired:LP,pastel1:BP,pastel2:$P,set1:zP,set2:UP,set3:VP,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};$Ze={};qZe(HQt,WZe);qZe(qQt,t=>VQt(WZe(t)));sqn={[NH]:"quantiles",[wbe]:"thresholds",[zZe]:"domain"},aqn={[NH]:"quantiles",[wbe]:"domain"}});var YZe,uqn,cqn,XZe=D(()=>{"use strict";YZe=Math.random,uqn=Math.sqrt(2*Math.PI),cqn=.5*Math.PI/180});var Ebe={};cn(Ebe,{wordcloud:()=>Cbe});function XQt(){var t=[256,256],r,n,o,i,s,a,l,u=KZe,c=[],f=Math.random,d={};d.layout=function(){for(var h=p(Uc()),g=tJt((t[0]>>5)*t[1]),y=null,b=c.length,x=-1,v=[],w=c.map(C=>({text:r(C),font:n(C),style:i(C),weight:s(C),rotate:a(C),size:~~(o(C)+1e-14),padding:l(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,S)=>S.size-C.size);++x<b;){var _=w[x];_.x=t[0]*(f()+.5)>>1,_.y=t[1]*(f()+.5)>>1,KQt(h,_,w,x),_.hasText&&m(g,_,y)&&(v.push(_),y?QQt(y,_):y=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=t[0]>>1,_.y-=t[1]>>1)}return v};function p(h){h.width=h.height=1;var g=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(j5<<5)/g,h.height=MH/g;var y=h.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function m(h,g,y){for(var b=g.x,x=g.y,v=Math.sqrt(t[0]*t[0]+t[1]*t[1]),w=u(t),_=f()<.5?1:-1,C=-_,S,E,A;(S=w(C+=_))&&(E=~~S[0],A=~~S[1],!(Math.min(Math.abs(E),Math.abs(A))>=v));)if(g.x=b+E,g.y=x+A,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!y||!ZQt(g,h,t[0]))&&(!y||JQt(g,y))){for(var N=g.sprite,k=g.width>>5,M=t[0]>>5,I=g.x-(k<<4),L=I&127,P=32-L,R=g.y1-g.y0,V=(g.y+g.y0)*M+(I>>5),G,U=0;U<R;U++){G=0;for(var Y=0;Y<=k;Y++)h[V+Y]|=G<<P|(Y<k?(G=N[U*k+Y])>>>L:0);V+=M}return g.sprite=null,!0}return!1}return d.words=function(h){return arguments.length?(c=h,d):c},d.size=function(h){return arguments.length?(t=[+h[0],+h[1]],d):t},d.font=function(h){return arguments.length?(n=TT(h),d):n},d.fontStyle=function(h){return arguments.length?(i=TT(h),d):i},d.fontWeight=function(h){return arguments.length?(s=TT(h),d):s},d.rotate=function(h){return arguments.length?(a=TT(h),d):a},d.text=function(h){return arguments.length?(r=TT(h),d):r},d.spiral=function(h){return arguments.length?(u=rJt[h]||h,d):u},d.fontSize=function(h){return arguments.length?(o=TT(h),d):o},d.padding=function(h){return arguments.length?(l=TT(h),d):l},d.random=function(h){return arguments.length?(f=h,d):f},d}function KQt(t,r,n,o){if(!r.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(j5<<5)/s,MH/s);var a=0,l=0,u=0,c=n.length,f,d,p,m,h;for(--o;++o<c;){if(r=n[o],i.save(),i.font=r.style+" "+r.weight+" "+~~((r.size+1)/s)+"px "+r.font,f=i.measureText(r.text+"m").width*s,p=r.size<<1,r.rotate){var g=Math.sin(r.rotate*Sbe),y=Math.cos(r.rotate*Sbe),b=f*y,x=f*g,v=p*y,w=p*g;f=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,p=~~Math.max(Math.abs(x+v),Math.abs(x-v))}else f=f+31>>5<<5;if(p>u&&(u=p),a+f>=j5<<5&&(a=0,l+=u,u=0),l+p>=MH)break;i.translate((a+(f>>1))/s,(l+(p>>1))/s),r.rotate&&i.rotate(r.rotate*Sbe),i.fillText(r.text,0,0),r.padding&&(i.lineWidth=2*r.padding,i.strokeText(r.text,0,0)),i.restore(),r.width=f,r.height=p,r.xoff=a,r.yoff=l,r.x1=f>>1,r.y1=p>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,a+=f}for(var _=i.getImageData(0,0,(j5<<5)/s,MH/s).data,C=[];--o>=0;)if(r=n[o],!!r.hasText){for(f=r.width,d=f>>5,p=r.y1-r.y0,m=0;m<p*d;m++)C[m]=0;if(a=r.xoff,a==null)return;l=r.yoff;var S=0,E=-1;for(h=0;h<p;h++){for(m=0;m<f;m++){var A=d*h+(m>>5),N=_[(l+h)*(j5<<5)+(a+m)<<2]?1<<31-m%32:0;C[A]|=N,S|=N}S?E=h:(r.y0++,p--,h--,l++)}r.y1=r.y0+E,r.sprite=C.slice(0,(r.y1-r.y0)*d)}}}function ZQt(t,r,n){n>>=5;for(var o=t.sprite,i=t.width>>5,s=t.x-(i<<4),a=s&127,l=32-a,u=t.y1-t.y0,c=(t.y+t.y0)*n+(s>>5),f,d=0;d<u;d++){f=0;for(var p=0;p<=i;p++)if((f<<l|(p<i?(f=o[d*i+p])>>>a:0))&r[c+p])return!0;c+=n}return!1}function QQt(t,r){var n=t[0],o=t[1];r.x+r.x0<n.x&&(n.x=r.x+r.x0),r.y+r.y0<n.y&&(n.y=r.y+r.y0),r.x+r.x1>o.x&&(o.x=r.x+r.x1),r.y+r.y1>o.y&&(o.y=r.y+r.y1)}function JQt(t,r){return t.x+t.x1>r[0].x&&t.x+t.x0<r[1].x&&t.y+t.y1>r[0].y&&t.y+t.y0<r[1].y}function KZe(t){var r=t[0]/t[1];return function(n){return[r*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function eJt(t){var r=4,n=r*t[0]/t[1],o=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:o+=n;break;case 1:i+=r;break;case 2:o-=n;break;default:i-=r;break}return[o,i]}}function tJt(t){for(var r=[],n=-1;++n<t;)r[n]=0;return r}function TT(t){return typeof t=="function"?t:function(){return t}}function Cbe(t){et.call(this,XQt(),t)}var Sbe,j5,MH,rJt,ZZe,nJt,QZe=D(()=>{"use strict";gD();qa();rH();HZe();XZe();Sbe=Math.PI/180,j5=64,MH=2048;rJt={archimedean:KZe,rectangular:eJt},ZZe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],nJt=["text","font","rotate","fontSize","fontStyle","fontWeight"];Cbe.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:ZZe}]};lKe(Cbe,et,{transform(t,r){t.size&&!(t.size[0]&&t.size[1])&&dT("Wordcloud size dimensions must be non-zero.");function n(h){let g=t[h];return eH(g)&&r.modified(g.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||nJt.some(n)))return;let i=r.materialize(r.SOURCE).source,s=this.value,a=t.as||ZZe,l=t.fontSize||14,u;if(eH(l)?u=t.fontSizeRange:l=tH(l),u){let h=l,g=Ho("sqrt")().domain(aKe(i,h)).range(u);l=y=>g(h(y))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let c=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(l).random(YZe).layout(),f=s.size(),d=f[0]>>1,p=f[1]>>1,m=c.length;for(let h=0,g,y;h<m;++h)g=c[h],y=g.datum,y[a[0]]=g.x+d,y[a[1]]=g.y+p,y[a[2]]=g.font,y[a[3]]=g.size,y[a[4]]=g.style,y[a[5]]=g.weight,y[a[6]]=g.rotate;return r.reflow(o).modifies(a)}})});var kbe={};cn(kbe,{crossfilter:()=>Tbe,resolvefilter:()=>Abe});function sJt(){let t=8,r=[],n=P5(0),o=RH(0,t),i=RH(0,t);return{data:()=>r,seen:()=>n=aJt(n,r.length),add(s){for(let a=0,l=r.length,u=s.length,c;a<u;++a)c=s[a],c._index=l++,r.push(c)},remove(s,a){let l=r.length,u=Array(l-s),c=r,f,d,p;for(d=0;!a[d]&&d<l;++d)u[d]=r[d],c[d]=d;for(p=d;d<l;++d)f=r[d],a[d]?c[d]=-1:(c[d]=p,o[p]=o[d],i[p]=i[d],u[p]=f,f._index=p++),o[d]=0;return r=u,c},size:()=>r.length,curr:()=>o,prev:()=>i,reset:s=>i[s]=o[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,a){o[s]|=a},clear(s,a){o[s]&=~a},resize(s,a){let l=o.length;(s>l||a>t)&&(t=Math.max(a,t),o=RH(s,t,o),i=RH(s,t))}}}function aJt(t,r,n){return t.length>=r?t:(n=n||new t.constructor(r),n.set(t),n)}function RH(t,r,n){let o=(r<257?oJt:r<65537?iJt:P5)(t);return n&&o.set(n),o}function JZe(t,r,n){let o=1<<r;return{one:o,zero:~o,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(i,s){let a=this,l=a.bisect(a.range,i.value),u=i.index,c=l[0],f=l[1],d=u.length,p;for(p=0;p<c;++p)s[u[p]]|=o;for(p=f;p<d;++p)s[u[p]]|=o;return a}}}function eQe(){let t=P5(0),r=[],n=0;function o(l,u,c){if(!u.length)return[];let f=n,d=u.length,p=P5(d),m=Array(d),h,g,y;for(y=0;y<d;++y)m[y]=l(u[y]),p[y]=y;if(m=lJt(m,p),f)h=r,g=t,r=Array(f+d),t=P5(f+d),uJt(c,h,g,f,m,p,d,r,t);else{if(c>0)for(y=0;y<d;++y)p[y]+=c;r=m,t=p}return n=f+d,{index:p,value:m}}function i(l,u){let c=n,f,d,p;for(d=0;!u[t[d]]&&d<c;++d);for(p=d;d<c;++d)u[f=t[d]]||(t[p]=f,r[p]=r[d],++p);n=c-l}function s(l){for(let u=0,c=n;u<c;++u)t[u]=l[t[u]]}function a(l,u){let c;return u?c=u.length:(u=r,c=n),[Pae(u,l[0],0,c),YC(u,l[1],0,c)]}return{insert:o,remove:i,bisect:a,reindex:s,index:()=>t,size:()=>n}}function lJt(t,r){return t.sort.call(r,(n,o)=>{let i=t[n],s=t[o];return i<s?-1:i>s?1:0}),Bae(t,r)}function uJt(t,r,n,o,i,s,a,l,u){let c=0,f=0,d;for(d=0;c<o&&f<a;++d)r[c]<i[f]?(l[d]=r[c],u[d]=n[c++]):(l[d]=i[f],u[d]=s[f++]+t);for(;c<o;++c,++d)l[d]=r[c],u[d]=n[c];for(;f<a;++f,++d)l[d]=i[f],u[d]=s[f]+t}function Tbe(t){et.call(this,sJt(),t),this._indices=null,this._dims=null}function Abe(t){et.call(this,null,t)}var oJt,iJt,P5,tQe=D(()=>{"use strict";Vo();qa();Ts();oJt=t=>new Uint8Array(t),iJt=t=>new Uint16Array(t),P5=t=>new Uint32Array(t);Tbe.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};It(Tbe,et,{transform(t,r){if(this._dims){var n=t.modified("fields")||t.fields.some(o=>r.modified(o.fields));return n?this.reinit(t,r):this.eval(t,r)}else return this.init(t,r)},init(t,r){let n=t.fields,o=t.query,i=this._indices={},s=this._dims=[],a=o.length,l=0,u,c;for(;l<a;++l)u=n[l].fname,c=i[u]||(i[u]=eQe()),s.push(JZe(c,l,o[l]));return this.eval(t,r)},reinit(t,r){let n=r.materialize().fork(),o=t.fields,i=t.query,s=this._indices,a=this._dims,l=this.value,u=l.curr(),c=l.prev(),f=l.all(),d=n.rem=n.add,p=n.mod,m=i.length,h={},g,y,b,x,v,w,_,C,S;if(c.set(u),r.rem.length&&(v=this.remove(t,r,n)),r.add.length&&l.add(r.add),r.mod.length)for(w={},x=r.mod,_=0,C=x.length;_<C;++_)w[x[_]._index]=1;for(_=0;_<m;++_)S=o[_],(!a[_]||t.modified("fields",_)||r.modified(S.fields))&&(b=S.fname,(g=h[b])||(s[b]=y=eQe(),h[b]=g=y.insert(S,r.source,0)),a[_]=JZe(y,_,i[_]).onAdd(g,u));for(_=0,C=l.data().length;_<C;++_)v[_]||(c[_]!==u[_]?d.push(_):w[_]&&u[_]!==f&&p.push(_));return l.mask=(1<<m)-1,n},eval(t,r){let n=r.materialize().fork(),o=this._dims.length,i=0;return r.rem.length&&(this.remove(t,r,n),i|=(1<<o)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,r,n)),r.add.length&&(this.insert(t,r,n),i|=(1<<o)-1),r.mod.length&&(this.modify(r,n),i|=(1<<o)-1),this.value.mask=i,n},insert(t,r,n){let o=r.add,i=this.value,s=this._dims,a=this._indices,l=t.fields,u={},c=n.add,f=i.size()+o.length,d=s.length,p=i.size(),m,h,g;i.resize(f,d),i.add(o);let y=i.curr(),b=i.prev(),x=i.all();for(m=0;m<d;++m)h=l[m].fname,g=u[h]||(u[h]=a[h].insert(l[m],o,p)),s[m].onAdd(g,y);for(;p<f;++p)b[p]=x,y[p]!==x&&c.push(p)},modify(t,r){let n=r.mod,o=this.value,i=o.curr(),s=o.all(),a=t.mod,l,u,c;for(l=0,u=a.length;l<u;++l)c=a[l]._index,i[c]!==s&&n.push(c)},remove(t,r,n){let o=this._indices,i=this.value,s=i.curr(),a=i.prev(),l=i.all(),u={},c=n.rem,f=r.rem,d,p,m,h;for(d=0,p=f.length;d<p;++d)m=f[d]._index,u[m]=1,a[m]=h=s[m],s[m]=l,h!==l&&c.push(m);for(m in o)o[m].remove(p,u);return this.reindex(r,p,u),u},reindex(t,r,n){let o=this._indices,i=this.value;t.runAfter(()=>{let s=i.remove(r,n);for(let a in o)o[a].reindex(s)})},update(t,r,n){let o=this._dims,i=t.query,s=r.stamp,a=o.length,l=0,u,c;for(n.filters=0,c=0;c<a;++c)t.modified("query",c)&&(u=c,++l);if(l===1)l=o[u].one,this.incrementOne(o[u],i[u],n.add,n.rem);else for(c=0,l=0;c<a;++c)t.modified("query",c)&&(l|=o[c].one,this.incrementAll(o[c],i[c],s,n.add),n.rem=n.add);return l},incrementAll(t,r,n,o){let i=this.value,s=i.seen(),a=i.curr(),l=i.prev(),u=t.index(),c=t.bisect(t.range),f=t.bisect(r),d=f[0],p=f[1],m=c[0],h=c[1],g=t.one,y,b,x;if(d<m)for(y=d,b=Math.min(m,p);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(d>m)for(y=m,b=Math.min(d,h);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;if(p>h)for(y=Math.max(d,h),b=p;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(p<h)for(y=Math.max(m,p),b=h;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;t.range=r.slice()},incrementOne(t,r,n,o){let i=this.value,s=i.curr(),a=t.index(),l=t.bisect(t.range),u=t.bisect(r),c=u[0],f=u[1],d=l[0],p=l[1],m=t.one,h,g,y;if(c<d)for(h=c,g=Math.min(d,f);h<g;++h)y=a[h],s[y]^=m,n.push(y);else if(c>d)for(h=d,g=Math.min(c,p);h<g;++h)y=a[h],s[y]^=m,o.push(y);if(f>p)for(h=Math.max(c,p),g=f;h<g;++h)y=a[h],s[y]^=m,n.push(y);else if(f<p)for(h=Math.max(d,f),g=p;h<g;++h)y=a[h],s[y]^=m,o.push(y);t.range=r.slice()}});Abe.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};It(Abe,et,{transform(t,r){let n=~(t.ignore||0),o=t.filter,i=o.mask;if(!(i&n))return r.StopPropagation;let s=r.fork(r.ALL),a=o.data(),l=o.curr(),u=o.prev(),c=f=>l[f]&n?null:a[f];return s.filter(s.MOD,c),i&i-1?(s.filter(s.ADD,f=>{let d=l[f]&n;return!d&&d^u[f]&n?a[f]:null}),s.filter(s.REM,f=>{let d=l[f]&n;return d&&!(d^(d^u[f]&n))?a[f]:null})):(s.filter(s.ADD,c),s.filter(s.REM,f=>(l[f]&n)===i?a[f]:null)),s.filter(s.SOURCE,f=>c(f._index))}})});function eF(t,r,n){return t.fields=r||[],t.fname=n,t}function cJt(t){return t.length===1?fJt(t[0]):dJt(t)}function rl(t){throw Error(t)}function pJt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||rl("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&rl("Access path missing closing bracket: "+t),o&&rl("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Ibe(t,r,n){let o=pJt(t);return t=o.length===1?o[0]:t,eF((n&&n.get||cJt)(o),[t],r||t)}function L5(t){return t===Object(t)}function hv(t){return t[t.length-1]}function BH(t){return t==null||t===""?null:+t}function $H(t,r,n,o){let i=n(t[0]),s=n(hv(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function sQe(t,r){return $H(t,r,BH,LH)}function aQe(t,r){var n=Math.sign(t[0]);return $H(t,r,nQe(n),rQe(n))}function lQe(t,r,n){return $H(t,r,PH(n),PH(1/n))}function uQe(t,r,n){return $H(t,r,oQe(n),iQe(n))}function zH(t,r,n,o,i){let s=o(t[0]),a=o(hv(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function cQe(t,r,n){return zH(t,r,n,BH,LH)}function fQe(t,r,n){let o=Math.sign(t[0]);return zH(t,r,n,nQe(o),rQe(o))}function dQe(t,r,n,o){return zH(t,r,n,PH(o),PH(1/o))}function pQe(t,r,n,o){return zH(t,r,n,oQe(o),iQe(o))}function mQe(t){return 1+~~(new Date(t).getMonth()/3)}function hQe(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Nbe(t){return t!=null?yy(t)?t:[t]:[]}function gQe(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function tF(t){return typeof t=="function"}function UH(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function yQe(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function by(t,r){return mJt.call(t,r)}function bQe(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=hv(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function xQe(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function vQe(t){return typeof t=="boolean"}function Fbe(t){return Object.prototype.toString.call(t)==="[object Date]"}function Obe(t){return typeof t=="number"}function wQe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function z_(t){return typeof t=="string"}function _Qe(t,r){let n=t[0],o=hv(t),i=+r;return i?i===1?o:n+i*(o-n):n}function jH(t,r){let n="";for(;--r>=0;)n+=t;return n}function SQe(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?jH(i,a)+s:o==="center"?jH(i,~~(a/2))+s+jH(i,Math.ceil(a/2)):s+jH(i,a)}function CQe(t){return t&&hv(t)-t[0]||0}function rF(t){return yy(t)?"["+t.map(rF)+"]":L5(t)||z_(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function EQe(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function TQe(t,r){return r=r||hJt,t==null||t===""?null:r(t)}function AQe(t){return t==null||t===""?null:t+""}function Mbe(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function kQe(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}var fJt,dJt,vqn,LH,wqn,_qn,Dbe,Sqn,yy,rQe,nQe,oQe,iQe,PH,mJt,hJt,Rbe=D(()=>{"use strict";fJt=t=>function(r){return r[t]},dJt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};vqn=Ibe("id"),LH=eF(t=>t,[],"identity"),wqn=eF(()=>0,[],"zero"),_qn=eF(()=>1,[],"one"),Dbe=eF(()=>!0,[],"true"),Sqn=eF(()=>!1,[],"false"),yy=Array.isArray;rQe=t=>r=>t*Math.exp(r),nQe=t=>r=>Math.log(t*r),oQe=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),iQe=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,PH=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);mJt=Object.prototype.hasOwnProperty;hJt=t=>Obe(t)||Fbe(t)?t:Date.parse(t)});function dh(t){this.type=t}function TJt(t){switch(t.type){case xJt:return t.elements;case vJt:case _Jt:return[t.left,t.right];case zbe:return[t.callee].concat(t.arguments);case wJt:return[t.test,t.consequent,t.alternate];case SJt:return[t.object,t.property];case CJt:return t.properties;case yJt:return[t.key,t.value];case EJt:return[t.argument];case bJt:case IT:case gJt:default:return[]}}function HH(t,r){if(!t)throw new Error("ASSERT: "+r)}function gv(t){return t>=48&&t<=57}function Ube(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function $5(t){return"01234567".indexOf(t)>=0}function qJt(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function U5(t){return t===10||t===13||t===8232||t===8233}function W5(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&GJt.test(String.fromCharCode(t))}function GH(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&WJt.test(String.fromCharCode(t))}function LQe(){for(;ct<hu;){let t=pr.charCodeAt(ct);if(qJt(t)||U5(t))++ct;else break}}function $be(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ct<hu&&Ube(pr[ct])?(o=pr[ct++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):lo({},nl,Ml);return String.fromCharCode(i)}function YJt(){var t,r,n,o;for(t=pr[ct],r=0,t==="}"&&lo({},nl,Ml);ct<hu&&(t=pr[ct++],!!Ube(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&lo({},nl,Ml),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function BQe(){var t,r;for(t=pr.charCodeAt(ct++),r=String.fromCharCode(t),t===92&&(pr.charCodeAt(ct)!==117&&lo({},nl,Ml),++ct,t=$be("u"),(!t||t==="\\"||!W5(t.charCodeAt(0)))&&lo({},nl,Ml),r=t);ct<hu&&(t=pr.charCodeAt(ct),!!GH(t));)++ct,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),pr.charCodeAt(ct)!==117&&lo({},nl,Ml),++ct,t=$be("u"),(!t||t==="\\"||!GH(t.charCodeAt(0)))&&lo({},nl,Ml),r+=t);return r}function XJt(){var t,r;for(t=ct++;ct<hu;){if(r=pr.charCodeAt(ct),r===92)return ct=t,BQe();if(GH(r))++ct;else break}return pr.slice(t,ct)}function KJt(){var t,r,n;return t=ct,r=pr.charCodeAt(ct)===92?BQe():XJt(),r.length===1?n=AT:HJt.hasOwnProperty(r)?n=U_:r==="null"?n=qH:r==="true"||r==="false"?n=WH:n=AT,{type:n,value:r,start:t,end:ct}}function Pbe(){var t=ct,r=pr.charCodeAt(ct),n,o=pr[ct],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ct,{type:tf,value:String.fromCharCode(r),start:t,end:ct};default:if(n=pr.charCodeAt(ct+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ct+=2,{type:tf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ct};case 33:case 61:return ct+=2,pr.charCodeAt(ct)===61&&++ct,{type:tf,value:pr.slice(t,ct),start:t,end:ct}}}if(a=pr.substr(ct,4),a===">>>=")return ct+=4,{type:tf,value:a,start:t,end:ct};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ct+=3,{type:tf,value:s,start:t,end:ct};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ct+=2,{type:tf,value:i,start:t,end:ct};if(i==="//"&&lo({},nl,Ml),"<>=!+-*%&|^/".indexOf(o)>=0)return++ct,{type:tf,value:o,start:t,end:ct};lo({},nl,Ml)}function ZJt(t){let r="";for(;ct<hu&&Ube(pr[ct]);)r+=pr[ct++];return r.length===0&&lo({},nl,Ml),W5(pr.charCodeAt(ct))&&lo({},nl,Ml),{type:DT,value:parseInt("0x"+r,16),start:t,end:ct}}function QJt(t){let r="0"+pr[ct++];for(;ct<hu&&$5(pr[ct]);)r+=pr[ct++];return(W5(pr.charCodeAt(ct))||gv(pr.charCodeAt(ct)))&&lo({},nl,Ml),{type:DT,value:parseInt(r,8),octal:!0,start:t,end:ct}}function IQe(){var t,r,n;if(n=pr[ct],HH(gv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ct,t="",n!=="."){if(t=pr[ct++],n=pr[ct],t==="0"){if(n==="x"||n==="X")return++ct,ZJt(r);if($5(n))return QJt(r);n&&gv(n.charCodeAt(0))&&lo({},nl,Ml)}for(;gv(pr.charCodeAt(ct));)t+=pr[ct++];n=pr[ct]}if(n==="."){for(t+=pr[ct++];gv(pr.charCodeAt(ct));)t+=pr[ct++];n=pr[ct]}if(n==="e"||n==="E")if(t+=pr[ct++],n=pr[ct],(n==="+"||n==="-")&&(t+=pr[ct++]),gv(pr.charCodeAt(ct)))for(;gv(pr.charCodeAt(ct));)t+=pr[ct++];else lo({},nl,Ml);return W5(pr.charCodeAt(ct))&&lo({},nl,Ml),{type:DT,value:parseFloat(t),start:r,end:ct}}function JJt(){var t="",r,n,o,i,s=!1;for(r=pr[ct],HH(r==="'"||r==='"',"String literal must starts with a quote"),n=ct,++ct;ct<hu;)if(o=pr[ct++],o===r){r="";break}else if(o==="\\")if(o=pr[ct++],!o||!U5(o.charCodeAt(0)))switch(o){case"u":case"x":pr[ct]==="{"?(++ct,t+=YJt()):t+=$be(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:$5(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ct<hu&&$5(pr[ct])&&(s=!0,i=i*8+"01234567".indexOf(pr[ct++]),"0123".indexOf(o)>=0&&ct<hu&&$5(pr[ct])&&(i=i*8+"01234567".indexOf(pr[ct++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&pr[ct]===`
`&&++ct;else{if(U5(o.charCodeAt(0)))break;t+=o}return r!==""&&lo({},nl,Ml),{type:G5,value:t,octal:s,start:n,end:ct}}function eer(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";lo({},Bbe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{lo({},Bbe)}try{return new RegExp(t,r)}catch{return null}}function ter(){var t,r,n,o,i;for(t=pr[ct],HH(t==="/","Regular expression literal must start with a slash"),r=pr[ct++],n=!1,o=!1;ct<hu;)if(t=pr[ct++],r+=t,t==="\\")t=pr[ct++],U5(t.charCodeAt(0))&&lo({},jbe),r+=t;else if(U5(t.charCodeAt(0)))lo({},jbe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||lo({},jbe),i=r.substr(1,r.length-2),{value:i,literal:r}}function rer(){var t,r,n;for(r="",n="";ct<hu&&(t=pr[ct],!!GH(t.charCodeAt(0)));)++ct,t==="\\"&&ct<hu?lo({},nl,Ml):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&lo({},Bbe,n),{value:n,literal:r}}function ner(){var t,r,n,o;return Mo=null,LQe(),t=ct,r=ter(),n=rer(),o=eer(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ct}}function oer(t){return t.type===AT||t.type===U_||t.type===WH||t.type===qH}function $Qe(){if(LQe(),ct>=hu)return{type:V5,start:ct,end:ct};let t=pr.charCodeAt(ct);return W5(t)?KJt():t===40||t===41||t===59?Pbe():t===39||t===34?JJt():t===46?gv(pr.charCodeAt(ct+1))?IQe():Pbe():gv(t)?IQe():Pbe()}function rf(){let t=Mo;return ct=t.end,Mo=$Qe(),ct=t.end,t}function zQe(){let t=ct;Mo=$Qe(),ct=t}function ier(t){let r=new dh(kJt);return r.elements=t,r}function DQe(t,r,n){let o=new dh(t==="||"||t==="&&"?OJt:IJt);return o.operator=t,o.left=r,o.right=n,o}function ser(t,r){let n=new dh(DJt);return n.callee=t,n.arguments=r,n}function aer(t,r,n){let o=new dh(NJt);return o.test=t,o.consequent=r,o.alternate=n,o}function Vbe(t){let r=new dh(jQe);return r.name=t,r}function B5(t){let r=new dh(FJt);return r.value=t.value,r.raw=pr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function NQe(t,r,n){let o=new dh(MJt);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function ler(t){let r=new dh(RJt);return r.properties=t,r}function FQe(t,r,n){let o=new dh(jJt);return o.key=r,o.value=n,o.kind=t,o}function uer(t,r){let n=new dh(PJt);return n.operator=t,n.argument=r,n.prefix=!0,n}function lo(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(HH(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ct,n.description=i,n}function YH(t){t.type===V5&&lo(t,UJt),t.type===DT&&lo(t,LJt),t.type===G5&&lo(t,BJt),t.type===AT&&lo(t,$Jt),t.type===U_&&lo(t,zJt),lo(t,nl,t.value)}function gu(t){let r=rf();(r.type!==tf||r.value!==t)&&YH(r)}function Di(t){return Mo.type===tf&&Mo.value===t}function Lbe(t){return Mo.type===U_&&Mo.value===t}function cer(){let t=[];for(ct=Mo.start,gu("[");!Di("]");)Di(",")?(rf(),t.push(null)):(t.push(kT()),Di("]")||gu(","));return rf(),ier(t)}function OQe(){ct=Mo.start;let t=rf();return t.type===G5||t.type===DT?(t.octal&&lo(t,PQe),B5(t)):Vbe(t.value)}function fer(){var t,r,n,o;if(ct=Mo.start,t=Mo,t.type===AT)return n=OQe(),gu(":"),o=kT(),FQe("init",n,o);if(t.type===V5||t.type===tf)YH(t);else return r=OQe(),gu(":"),o=kT(),FQe("init",r,o)}function der(){var t=[],r,n,o,i={},s=String;for(ct=Mo.start,gu("{");!Di("}");)r=fer(),r.key.type===jQe?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?lo({},VJt):i[o]=!0,t.push(r),Di("}")||gu(",");return gu("}"),ler(t)}function per(){gu("(");let t=Gbe();return gu(")"),t}function her(){var t,r,n;if(Di("("))return per();if(Di("["))return cer();if(Di("{"))return der();if(t=Mo.type,ct=Mo.start,t===AT||mer[Mo.value])n=Vbe(rf().value);else if(t===G5||t===DT)Mo.octal&&lo(Mo,PQe),n=B5(rf());else{if(t===U_)throw new Error(z5);t===WH?(r=rf(),r.value=r.value==="true",n=B5(r)):t===qH?(r=rf(),r.value=null,n=B5(r)):Di("/")||Di("/=")?(n=B5(ner()),zQe()):YH(rf())}return n}function ger(){let t=[];if(gu("("),!Di(")"))for(;ct<hu&&(t.push(kT()),!Di(")"));)gu(",");return gu(")"),t}function yer(){ct=Mo.start;let t=rf();return oer(t)||YH(t),Vbe(t.value)}function ber(){return gu("."),yer()}function xer(){gu("[");let t=Gbe();return gu("]"),t}function ver(){var t,r,n;for(t=her();;)if(Di("."))n=ber(),t=NQe(".",t,n);else if(Di("("))r=ger(),t=ser(t,r);else if(Di("["))n=xer(),t=NQe("[",t,n);else break;return t}function MQe(){let t=ver();if(Mo.type===tf&&(Di("++")||Di("--")))throw new Error(z5);return t}function VH(){var t,r;if(Mo.type!==tf&&Mo.type!==U_)r=MQe();else{if(Di("++")||Di("--"))throw new Error(z5);if(Di("+")||Di("-")||Di("~")||Di("!"))t=rf(),r=VH(),r=uer(t.value,r);else{if(Lbe("delete")||Lbe("void")||Lbe("typeof"))throw new Error(z5);r=MQe()}}return r}function RQe(t){let r=0;if(t.type!==tf&&t.type!==U_)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function wer(){var t,r,n,o,i,s,a,l,u,c;if(t=Mo,u=VH(),o=Mo,i=RQe(o),i===0)return u;for(o.prec=i,rf(),r=[t,Mo],a=VH(),s=[u,o,a];(i=RQe(Mo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=DQe(l,u,a),s.push(n);o=rf(),o.prec=i,s.push(o),r.push(Mo),n=VH(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=DQe(s[c-1].value,s[c-2],n),c-=2;return n}function kT(){var t,r,n;return t=wer(),Di("?")&&(rf(),r=kT(),gu(":"),n=kT(),t=aer(t,r,n)),t}function Gbe(){let t=kT();if(Di(","))throw new Error(z5);return t}function UQe(t){pr=t,ct=0,hu=pr.length,Mo=null,zQe();let r=Gbe();if(Mo.type!==V5)throw new Error("Unexpect token after expression.");return r}function qbe(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&rl("Missing arguments to clamp function."),a.length>3&&rl("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&rl("Missing arguments to if function."),a.length>3&&rl("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function _er(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function VQe(t){t=t||{};let r=t.allowed?Mbe(t.allowed):{},n=t.forbidden?Mbe(t.forbidden):{},o=t.constants||Wbe,i=(t.functions||qbe)(d),s=t.globalvar,a=t.fieldvar,l=tF(s)?s:h=>`${s}["${h}"]`,u={},c={},f=0;function d(h){if(z_(h))return h;let g=p[h.type];return g==null&&rl("Unsupported type: "+h.type),g(h)}let p={Literal:h=>h.raw,Identifier:h=>{let g=h.name;return f>0?g:by(n,g)?rl("Illegal identifier: "+g):by(o,g)?o[g]:by(r,g)?g:(u[g]=1,l(g))},MemberExpression:h=>{let g=!h.computed,y=d(h.object);g&&(f+=1);let b=d(h.property);return y===a&&(c[_er(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&rl("Illegal callee type: "+h.callee.type);let g=h.callee.name,y=h.arguments,b=by(i,g)&&i[g];return b||rl("Unrecognized function: "+g),tF(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(d).join(",")+"]",BinaryExpression:h=>"("+d(h.left)+" "+h.operator+" "+d(h.right)+")",UnaryExpression:h=>"("+h.operator+d(h.argument)+")",ConditionalExpression:h=>"("+d(h.test)+"?"+d(h.consequent)+":"+d(h.alternate)+")",LogicalExpression:h=>"("+d(h.left)+h.operator+d(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(d).join(",")+"}",Property:h=>{f+=1;let g=d(h.key);return f-=1,g+":"+d(h.value)}};function m(h){let g={code:d(h),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return m.functions=i,m.constants=o,m}var gJt,IT,yJt,bJt,xJt,vJt,zbe,wJt,_Jt,SJt,CJt,EJt,xy,pr,ct,hu,Mo,WH,V5,AT,U_,qH,DT,tf,G5,AJt,kJt,IJt,DJt,NJt,jQe,FJt,OJt,MJt,RJt,jJt,PJt,nl,LJt,BJt,$Jt,zJt,UJt,Bbe,jbe,PQe,VJt,Ml,z5,GJt,WJt,HJt,mer,Wbe,GQe=D(()=>{"use strict";Rbe();gJt="RawCode",IT="Literal",yJt="Property",bJt="Identifier",xJt="ArrayExpression",vJt="BinaryExpression",zbe="CallExpression",wJt="ConditionalExpression",_Jt="LogicalExpression",SJt="MemberExpression",CJt="ObjectExpression",EJt="UnaryExpression";dh.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=TJt(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};WH=1,V5=2,AT=3,U_=4,qH=5,DT=6,tf=7,G5=8,AJt=9;xy={};xy[WH]="Boolean";xy[V5]="<end>";xy[AT]="Identifier";xy[U_]="Keyword";xy[qH]="Null";xy[DT]="Numeric";xy[tf]="Punctuator";xy[G5]="String";xy[AJt]="RegularExpression";kJt="ArrayExpression",IJt="BinaryExpression",DJt="CallExpression",NJt="ConditionalExpression",jQe="Identifier",FJt="Literal",OJt="LogicalExpression",MJt="MemberExpression",RJt="ObjectExpression",jJt="Property",PJt="UnaryExpression",nl="Unexpected token %0",LJt="Unexpected number",BJt="Unexpected string",$Jt="Unexpected identifier",zJt="Unexpected reserved word",UJt="Unexpected end of input",Bbe="Invalid regular expression",jbe="Invalid regular expression: missing /",PQe="Octal literals are not allowed in strict mode.",VJt="Duplicate data property in object literal not allowed in strict mode",Ml="ILLEGAL",z5="Disabled.",GJt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),WJt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");HJt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};mer={if:1};Wbe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function q5(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var WQe=D(()=>{"use strict"});function Hbe(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var qQe=D(()=>{"use strict"});function XH(t){let r,n,o;t.length!==2?(r=q5,n=(l,u)=>q5(t(l),u),o=(l,u)=>t(l)-u):(r=t===q5||t===Hbe?t:Ser,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function Ser(){return 0}var HQe=D(()=>{"use strict";WQe();qQe()});function KH(t,...r){t=new T0(t),r=r.map(Cer);e:for(let n of t)for(let o of r)if(!o.has(n)){t.delete(n);continue e}return t}function Cer(t){return t instanceof T0?t:new T0(t)}var YQe=D(()=>{"use strict";H3()});function ZH(...t){let r=new T0;for(let n of t)for(let o of n)r.add(o);return r}var XQe=D(()=>{"use strict";H3()});var KQe=D(()=>{"use strict";HQe();YQe();XQe()});function oF(t,r,n){return t.fields=r||[],t.fname=n,t}function Eer(t){return t.length===1?Ter(t[0]):Aer(t)}function nF(t){throw Error(t)}function ker(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||nF("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&nF("Access path missing closing bracket: "+t),o&&nF("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function QH(t,r,n){let o=ker(t);return t=o.length===1?o[0]:t,oF((n&&n.get||Eer)(o),[t],r||t)}function ZQe(t){return t[t.length-1]}function V_(t){return t==null||t===""?null:+t}function Ybe(t){return t!=null?JH(t)?t:[t]:[]}function QQe(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function eY(t,r){return Ier.call(t,r)}function H5(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function tY(t){return Object.prototype.toString.call(t)==="[object Date]"}var Ter,Aer,$qn,zqn,Uqn,Vqn,Gqn,Wqn,JH,Ier,Xbe=D(()=>{"use strict";Ter=t=>function(r){return r[t]},Aer=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};$qn=QH("id"),zqn=oF(t=>t,[],"identity"),Uqn=oF(()=>0,[],"zero"),Vqn=oF(()=>1,[],"one"),Gqn=oF(()=>!0,[],"true"),Wqn=oF(()=>!1,[],"false"),JH=Array.isArray;Ier=Object.prototype.hasOwnProperty});function zer(t){this.type=t}function Uer(t){switch(t.type){case Oer:return t.elements;case Mer:case Per:return[t.left,t.right];case Rer:return[t.callee].concat(t.arguments);case jer:return[t.test,t.consequent,t.alternate];case Ler:return[t.object,t.property];case Ber:return t.properties;case Ner:return[t.key,t.value];case $er:return[t.argument];case Fer:case Kbe:case Der:default:return[]}}var Der,Kbe,Ner,Fer,Oer,Mer,Rer,jer,Per,Ler,Ber,$er,vy,Ver,Ger,Wer,qer,Her,Yer,Xer,Ker,Zer,Zqn,Qqn,JQe=D(()=>{"use strict";Xbe();Der="RawCode",Kbe="Literal",Ner="Property",Fer="Identifier",Oer="ArrayExpression",Mer="BinaryExpression",Rer="CallExpression",jer="ConditionalExpression",Per="LogicalExpression",Ler="MemberExpression",Ber="ObjectExpression",$er="UnaryExpression";zer.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=Uer(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};Ver=1,Ger=2,Wer=3,qer=4,Her=5,Yer=6,Xer=7,Ker=8,Zer=9;vy={};vy[Ver]="Boolean";vy[Ger]="<end>";vy[Wer]="Identifier";vy[qer]="Keyword";vy[Her]="Null";vy[Yer]="Numeric";vy[Xer]="Punctuator";vy[Ker]="String";vy[Zer]="RegularExpression";Zqn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Qqn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")});function oJe(t){return(!t.getter||!t.getter[eJe])&&(t.getter=QH(t.field),t.getter[eJe]=!0),t.getter}function nJe(t,r){for(var n=r.fields,o=r.values,i=n.length,s=0,a,l;s<i;++s)if(l=n[s],a=oJe(l)(t),tY(a)&&(a=V_(a)),tY(o[s])&&(o[s]=V_(o[s])),JH(o[s])&&tY(o[s][0])&&(o[s]=o[s].map(V_)),l.type===ttr){if(JH(o[s])?o[s].indexOf(a)<0:a!==o[s])return!1}else if(l.type===rtr){if(!H5(a,o[s]))return!1}else if(l.type===itr){if(!H5(a,o[s],!0,!1))return!1}else if(l.type===ntr){if(!H5(a,o[s],!1,!1))return!1}else if(l.type===otr&&!H5(a,o[s],!1,!0))return!1;return!0}function iJe(t,r,n){for(var o=this.context.data[t],i=o?o.values.value:[],s=o?o[rY]&&o[rY].value:void 0,a=n===Qbe,l=i.length,u=0,c,f,d,p,m;u<l;++u)if(c=i[u],s&&a){if(f=f||{},d=f[p=c.unit]||0,d===-1)continue;if(m=nJe(r,c),f[p]=m?-1:++d,m&&s.size===1)return!0;if(!m&&d===s.get(p).count)return!1}else if(m=nJe(r,c),a^m)return m;return l&&a}function aJe(t,r,n){let o=this.context.data[t],i=o?o.values.value:[],s=o?o[rY]&&o[rY].value:void 0,a=n===Qbe,l=Y5(r),u=str(i,l);if(u===i.length||Y5(i[u])!==l)return!1;if(s&&a){if(s.size===1)return!0;if(atr(i,l)-u<s.size)return!1}return!0}function lJe(t,r){return t.map(n=>QQe(r.fields?{values:r.fields.map(o=>oJe(o)(n.datum))}:{[wy]:Y5(n.datum)},r))}function uJe(t,r,n,o){for(var i=this.context.data[t],s=i?i.values.value:[],a={},l={},u={},c,f,d,p,m,h,g,y,b,x,v=s.length,w=0,_,C;w<v;++w)if(c=s[w],p=c.unit,f=c.fields,d=c.values,f&&d){for(_=0,C=f.length;_<C;++_)m=f[_],g=a[m.field]||(a[m.field]={}),y=g[p]||(g[p]=[]),u[m.field]=b=m.type.charAt(0),x=Zbe[`${b}_union`],g[p]=x(y,Ybe(d[_]));n&&(y=l[p]||(l[p]=[]),y.push(Ybe(d).reduce((S,E,A)=>(S[f[A].field]=E,S),{})))}else m=wy,h=Y5(c),g=a[m]||(a[m]={}),y=g[p]||(g[p]=[]),y.push(h),n&&(y=l[p]||(l[p]=[]),y.push({[wy]:h}));if(r=r||tJe,a[wy]?a[wy]=Zbe[`${wy}_${r}`](...Object.values(a[wy])):Object.keys(a).forEach(S=>{a[S]=Object.keys(a[S]).map(E=>a[S][E]).reduce((E,A)=>E===void 0?A:Zbe[`${u[S]}_${r}`](E,A))}),s=Object.keys(l),n&&s.length){let S=o?Jer:Qer;a[S]=r===tJe?{[rJe]:s.reduce((E,A)=>(E.push(...l[A]),E),[])}:{[etr]:s.map(E=>({[rJe]:l[E]}))}}return a}function nY(t,r,n,o){r[0].type!==Kbe&&nF("First argument to selection functions must be a string literal.");let i=r[0].value,s=r.length>=2&&ZQe(r).value,a="unit",l=utr+a,u=ltr+i;s===Qbe&&!eY(o,l)&&(o[l]=n.getData(i).indataRef(n,a)),eY(o,u)||(o[u]=n.getData(i).tuplesRef())}var eJe,Qbe,tJe,Qer,Jer,rJe,etr,wy,Y5,ttr,rtr,ntr,otr,itr,rY,sJe,str,atr,Zbe,ltr,utr,cJe=D(()=>{"use strict";KQe();Xbe();JQe();eJe=Symbol("vega_selection_getter");Qbe="intersect",tJe="union",Qer="vlMulti",Jer="vlPoint",rJe="or",etr="and",wy="_vgsid_",Y5=QH(wy),ttr="E",rtr="R",ntr="R-E",otr="R-LE",itr="R-RE",rY="index:unit";sJe=XH(Y5),str=sJe.left,atr=sJe.right;Zbe={[`${wy}_union`]:ZH,[`${wy}_intersect`]:KH,E_union:function(t,r){if(!t.length)return r;for(var n=0,o=r.length;n<o;++n)t.indexOf(r[n])<0&&t.push(r[n]);return t},E_intersect:function(t,r){return t.length?t.filter(n=>r.indexOf(n)>=0):r},R_union:function(t,r){var n=V_(r[0]),o=V_(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<o&&(t[1]=o),t):[n,o]},R_intersect:function(t,r){var n=V_(r[0]),o=V_(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?o<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>o&&(t[1]=o),t):[n,o]}},ltr=":",utr="@"});function mJe(t){let r=this.context.data[t];return r?r.values.value:[]}function ctr(t,r,n){let o=this.context.data[t]["index:"+r],i=o?o.value.get(n):void 0;return i&&i.count}function ftr(t,r){let n=this.context.dataflow,o=this.context.data[t],i=o.input;return n.pulse(i,n.changeset().remove(Dbe).insert(r)),1}function dtr(t,r,n){if(t){let o=this.context.dataflow,i=t.mark.source;o.pulse(i,o.changeset().encode(t,r))}return n!==void 0?n:t}function iY(t,r,n){return!Number.isInteger(t)||!Number.isInteger(r)?"":(oY.setYear(2e3),oY.setMonth(t),oY.setDate(r),hJe.call(this,oY,n))}function ytr(t){return iY.call(this,t,1,"%B")}function btr(t){return iY.call(this,t,1,"%b")}function xtr(t){return iY.call(this,0,2+t,"%A")}function vtr(t){return iY.call(this,0,2+t,"%a")}function nxe(t,r,n,o){r[0].type!==IT&&rl("First argument to data functions must be a string literal.");let i=r[0].value,s=wtr+i;if(!by(s,o))try{o[s]=n.getData(i).tuplesRef()}catch{}}function Str(t,r,n,o){r[0].type!==IT&&rl("First argument to indata must be a string literal."),r[1].type!==IT&&rl("Second argument to indata must be a string literal.");let i=r[0].value,s=r[1].value,a=_tr+s;by(a,o)||(o[a]=n.getData(i).indataRef(n,s))}function nf(t,r,n,o){if(r[0].type===IT)fJe(n,o,r[0].value);else for(t in n.scales)fJe(n,o,t)}function fJe(t,r,n){let o=exe+n;if(!by(r,o))try{r[o]=t.scaleRef(n)}catch{}}function yv(t,r){let n;return tF(t)?t:z_(t)?(n=r.scales[t])&&n.value:void 0}function Ctr(t,r,n){r.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=nf,n._range=nf,n._scale=nf;let o=i=>"_["+(i.type===IT?rF(exe+i.value):rF(exe)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${o(i[0])})`,_range:i=>`${o(i[0])}.range()`,_scale:i=>`${o(i[0])}(${t(i[1])})`}}function oxe(t,r){return function(n,o,i){if(n){let s=yv(n,(i||this).context);return s&&s.path[t](o)}else return r(o)}}function ktr(t){let r=this.context.group,n=!1;if(r)for(;t;){if(t===r){n=!0;break}t=t.mark.group}return n}function ixe(t,r,n){try{t[r].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(o){t.warn(o)}return n[n.length-1]}function Itr(){return ixe(this.context.dataflow,"warn",arguments)}function Dtr(){return ixe(this.context.dataflow,"info",arguments)}function Ntr(){return ixe(this.context.dataflow,"debug",arguments)}function Jbe(t){let r=t/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}function txe(t){let r=Xs(t),n=Jbe(r.r),o=Jbe(r.g),i=Jbe(r.b);return .2126*n+.7152*o+.0722*i}function Ftr(t,r){let n=txe(t),o=txe(r),i=Math.max(n,o),s=Math.min(n,o);return(i+.05)/(s+.05)}function Otr(){let t=[].slice.call(arguments);return t.unshift({}),UH(...t)}function yJe(t,r){return t===r||t!==t&&r!==r?!0:yy(t)?yy(r)&&t.length===r.length?Mtr(t,r):!1:L5(t)&&L5(r)?bJe(t,r):!1}function Mtr(t,r){for(let n=0,o=t.length;n<o;++n)if(!yJe(t[n],r[n]))return!1;return!0}function bJe(t,r){for(let n in t)if(!yJe(t[n],r[n]))return!1;return!0}function dJe(t){return r=>bJe(t,r)}function Rtr(t,r,n,o,i,s){let a=this.context.dataflow,l=this.context.data[t],u=l.input,c=a.stamp(),f=l.changes,d,p;if(a._trigger===!1||!(u.value.length||r||o))return 0;if((!f||f.stamp<c)&&(l.changes=f=a.changeset(),f.stamp=c,a.runAfter(()=>{l.modified=!0,a.pulse(u,f).run()},!0,1)),n&&(d=n===!0?Dbe:yy(n)||qC(n)?n:dJe(n),f.remove(d)),r&&f.insert(r),o&&(d=dJe(o),u.value.some(d)?f.remove(d):f.insert(o)),i)for(p in s)f.modify(i,p,s[p]);return 1}function jtr(t){let r=t.touches,n=r[0].clientX-r[1].clientX,o=r[0].clientY-r[1].clientY;return Math.sqrt(n*n+o*o)}function Ptr(t){let r=t.touches;return Math.atan2(r[0].clientY-r[1].clientY,r[0].clientX-r[1].clientX)}function Ltr(t,r){let n=pJe[r]||(pJe[r]=Ibe(r));return yy(t)?t.map(n):n(t)}function sxe(t){return yy(t)||ArrayBuffer.isView(t)?t:null}function axe(t){return sxe(t)||(z_(t)?t:null)}function Btr(t,...r){return sxe(t).join(...r)}function $tr(t,...r){return axe(t).indexOf(...r)}function ztr(t,...r){return axe(t).lastIndexOf(...r)}function Utr(t,...r){return axe(t).slice(...r)}function Vtr(t,r,n){return tF(n)&&rl("Function argument passed to replace."),String(t).replace(r,n)}function Gtr(t){return sxe(t).slice().reverse()}function Wtr(t,r,n){return ML(t||0,r||0,n||0)}function qtr(t,r){let n=yv(t,(r||this).context);return n&&n.bandwidth?n.bandwidth():0}function Htr(t,r){let n=yv(t,(r||this).context);return n?n.copy():void 0}function Ytr(t,r){let n=yv(t,(r||this).context);return n?n.domain():[]}function Xtr(t,r,n){let o=yv(t,(n||this).context);return o?yy(r)?(o.invertRange||o.invert)(r):(o.invert||o.invertExtent)(r):void 0}function Ktr(t,r){let n=yv(t,(r||this).context);return n&&n.range?n.range():[]}function Ztr(t,r,n){let o=yv(t,(n||this).context);return o?o(r):void 0}function Qtr(t,r,n,o,i){t=yv(t,(i||this).context);let s=_0e(r,n),a=t.domain(),l=a[0],u=hv(a),c=LH;return u-l?c=XG(t,l,u):t=(t.interpolator?Bn("sequential")().interpolator(t.interpolator()):Bn("linear")().interpolate(t.interpolate()).range(t.range())).domain([l=0,u=1]),t.ticks&&(a=t.ticks(+o||15),l!==a[0]&&a.unshift(l),u!==hv(a)&&a.push(u)),a.forEach(f=>s.stop(c(f),t(f))),s}function Jtr(t,r,n){let o=yv(t,(n||this).context);return function(i){return o?o.path.context(i)(r):""}}function err(t){let r=null;return function(n){return n?MN(n,r=r||uT(t)):t}}function vJe(t,r){let n=mJe.call(r,t);return n.root&&n.root.lookup||{}}function trr(t,r,n){let o=vJe(t,this),i=o[r],s=o[n];return i&&s?i.path(s).map(xJe):void 0}function rrr(t,r){let n=vJe(t,this)[r];return n?n.ancestors().map(xJe):void 0}function nrr(){let t=wJe();return t?t.screen:{}}function orr(){let t=wJe();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function irr(){let t=this.context.dataflow,r=t.container&&t.container();return r?[r.clientWidth,r.clientHeight]:[void 0,void 0]}function srr(t,r,n){if(!t)return[];let[o,i]=t,s=new du().set(o[0],o[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return Q0e(a,s,arr(r))}function arr(t){let r=null;if(t){let n=Nbe(t.marktype),o=Nbe(t.markname);r=i=>(!n.length||n.some(s=>i.marktype===s))&&(!o.length||o.some(s=>i.name===s))}return r}function crr(t){let r=qbe(t);lrr.forEach(n=>r[n]=urr+n);for(let n in iF)r[n]=_Je+n;return UH(r,Ctr(t,iF,lxe)),r}function Is(t,r,n){return arguments.length===1?iF[t]:(iF[t]=r,n&&(lxe[t]=n),rxe&&(rxe.functions[t]=_Je+t),this)}function ph(t,r){let n={},o;try{t=z_(t)?t:rF(t)+"",o=UQe(t)}catch{rl("Expression parse error: "+t)}o.visit(s=>{if(s.type!==zbe)return;let a=s.callee.name,l=SJe.visitors[a];l&&l(a,s.arguments,r,n)});let i=rxe(o);return i.globals.forEach(s=>{let a=gJe+s;!by(n,a)&&r.getSignal(s)&&(n[a]=r.signalRef(s))}),{$expr:UH({code:i.code},r.options.ast?{ast:o}:null),$fields:i.fields,$params:n}}var X5,ptr,hJe,mtr,htr,gtr,oY,wtr,_tr,exe,gJe,Etr,Ttr,Atr,pJe,xJe,wJe,iF,lrr,urr,_Je,lxe,SJe,rxe,sY=D(()=>{"use strict";Rbe();GQe();c4();As();qa();iN();t5();cJe();sD();cD();Vo();X5=t=>function(r,n){return this.context.dataflow.locale()[t](n)(r)},ptr=X5("format"),hJe=X5("timeFormat"),mtr=X5("utcFormat"),htr=X5("timeParse"),gtr=X5("utcParse"),oY=new Date(2e3,0,1);wtr=":",_tr="@",exe="%",gJe="$";Etr=oxe("area",jpe),Ttr=oxe("bounds",Bpe),Atr=oxe("centroid",Gpe);pJe={};xJe=t=>t.data;wJe=()=>typeof window<"u"&&window||null;iF={random(){return Zf()},cumulativeNormal:xj,cumulativeLogNormal:a9,cumulativeUniform:f9,densityNormal:r9,densityLogNormal:s9,densityUniform:c9,quantileNormal:vj,quantileLogNormal:l9,quantileUniform:d9,sampleNormal:bj,sampleLogNormal:i9,sampleUniform:u9,isArray:yy,isBoolean:vQe,isDate:Fbe,isDefined(t){return t!==void 0},isNumber:Obe,isObject:L5,isRegExp:wQe,isString:z_,isTuple:qC,isValid(t){return t!=null&&t===t},toBoolean:EQe,toDate:TQe,toNumber:BH,toString:AQe,indexof:$tr,join:Btr,lastindexof:ztr,replace:Vtr,reverse:Gtr,slice:Utr,flush:bQe,lerp:_Qe,merge:Otr,pad:SQe,peek:hv,pluck:Ltr,span:CQe,inrange:xQe,truncate:kQe,rgb:Xs,lab:Hc,hcl:ad,hsl:sd,luminance:txe,contrast:Ftr,sequence:qs,format:ptr,utcFormat:mtr,utcParse:gtr,utcOffset:zle,utcSequence:Vle,timeFormat:hJe,timeParse:htr,timeOffset:$le,timeSequence:Ule,timeUnitSpecifier:Fle,monthFormat:ytr,monthAbbrevFormat:btr,dayFormat:xtr,dayAbbrevFormat:vtr,quarter:mQe,utcquarter:hQe,week:Rle,utcweek:Ple,dayofyear:Mle,utcdayofyear:jle,warn:Itr,info:Dtr,debug:Ntr,extent:yQe,inScope:ktr,intersect:srr,clampRange:gQe,pinchDistance:jtr,pinchAngle:Ptr,screen:nrr,containerSize:irr,windowSize:orr,bandspace:Wtr,setdata:ftr,pathShape:err,panLinear:sQe,panLog:aQe,panPow:lQe,panSymlog:uQe,zoomLinear:cQe,zoomLog:fQe,zoomPow:dQe,zoomSymlog:pQe,encode:dtr,modify:Rtr},lrr=["view","item","group","xy","x","y"],urr="event.vega.",_Je="this.",lxe={},SJe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${rF(gJe+t)}]`,functions:crr,constants:Wbe,visitors:lxe},rxe=VQe(SJe);Is("bandwidth",qtr,nf);Is("copy",Htr,nf);Is("domain",Ytr,nf);Is("range",Ktr,nf);Is("invert",Xtr,nf);Is("scale",Ztr,nf);Is("gradient",Qtr,nf);Is("geoArea",Etr,nf);Is("geoBounds",Ttr,nf);Is("geoCentroid",Atr,nf);Is("geoShape",Jtr,nf);Is("indata",ctr,Str);Is("data",mJe,nxe);Is("treePath",trr,nxe);Is("treeAncestors",rrr,nxe);Is("vlSelectionTest",iJe,nY);Is("vlSelectionIdTest",aJe,nY);Is("vlSelectionResolve",uJe,nY);Is("vlSelectionTuples",lJe)});function mh(t,r,n){return t.fields=r||[],t.fname=n,t}function frr(t){return t==null?null:t.fields}function CJe(t){return t.length===1?drr(t[0]):prr(t)}function G_(t){throw Error(t)}function EJe(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||G_("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&G_("Access path missing closing bracket: "+t),o&&G_("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function aY(t,r,n){let o=EJe(t);return t=o.length===1?o[0]:t,mh((n&&n.get||CJe)(o),[t],r||t)}function uY(t){return t===Object(t)}function sF(t){return t!=null?lY(t)?t:[t]:[]}function mrr(t){return typeof t=="function"}function AJe(t,r,n){n=n||{},r=sF(r)||[];let o=[],i=[],s={},a=n.comparator||grr;return sF(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===hrr?-1:1),i.push(l=mrr(l)?l:aY(l,null,n)),(frr(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:mh(a(i,o),Object.keys(s))}function IJe(t,r){return xrr.call(t,r)}function vrr(t){return typeof t=="string"}function DJe(t,r,n){t&&(t=r?sF(t).map(l=>l.replace(/\\(.)/g,"$1")):sF(t));let o=t&&t.length,i=n&&n.get||CJe,s=l=>i(r?[l]:EJe(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return mh(a,t,"key")}function cY(t){return lY(t)?"["+t.map(cY)+"]":uY(t)||vrr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function uxe(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var drr,prr,gHn,yHn,bHn,xHn,TJe,vHn,lY,hrr,kJe,grr,yrr,brr,xrr,NJe=D(()=>{"use strict";drr=t=>function(r){return r[t]},prr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};gHn=aY("id"),yHn=mh(t=>t,[],"identity"),bHn=mh(()=>0,[],"zero"),xHn=mh(()=>1,[],"one"),TJe=mh(()=>!0,[],"true"),vHn=mh(()=>!1,[],"false"),lY=Array.isArray;hrr="descending";kJe=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),grr=(t,r)=>t.length===1?yrr(t[0],r[0]):brr(t,r,t.length),yrr=(t,r)=>function(n,o){return kJe(t(n),t(o))*r},brr=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=kJe(s(o),s(i));return a*r[l]}),xrr=Object.prototype.hasOwnProperty});function wrr(t){let r=this,n=t.operators||[];return t.background&&(r.background=t.background),t.eventConfig&&(r.eventConfig=t.eventConfig),t.locale&&(r.locale=t.locale),n.forEach(o=>r.parseOperator(o)),n.forEach(o=>r.parseOperatorParameters(o)),(t.streams||[]).forEach(o=>r.parseStream(o)),(t.updates||[]).forEach(o=>r.parseUpdate(o)),r.resolve()}function Srr(t,r){let n="";return _rr[r]||(t.x2&&(t.x?(FJe[r]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(FJe[r]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function cxe(t){return(t+"").toLowerCase()}function Crr(t){return cxe(t)==="operator"}function Err(t){return cxe(t)==="collect"}function K5(t,r,n){n.endsWith(";")||(n="return("+n+");");let o=Function(...r.concat(n));return t&&t.functions?o.bind(t.functions):o}function Trr(t,r,n,o){return`((u = ${t}) < (v = ${r}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${o}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${o} : `}function krr(t){let r=this;Crr(t.type)||!t.type?r.operator(t,t.update?r.operatorExpression(t.update):null):r.transform(t,t.type)}function Irr(t){let r=this;if(t.params){let n=r.get(t.id);n||G_("Invalid operator id: "+t.id),r.dataflow.connect(n,n.parameters(r.parseParameters(t.params),t.react,t.initonly))}}function Drr(t,r){r=r||{};let n=this;for(let o in t){let i=t[o];r[o]=lY(i)?i.map(s=>OJe(s,n,r)):OJe(i,n,r)}return r}function OJe(t,r,n){if(!t||!uY(t))return t;for(let o=0,i=MJe.length,s;o<i;++o)if(s=MJe[o],IJe(t,s.key))return s.parse(t,r,n);return t}function Nrr(t,r){return r.get(t.$ref)||G_("Operator not defined: "+t.$ref)}function Frr(t,r,n){t.$params&&r.parseParameters(t.$params,n);let o="e:"+t.$expr.code;return r.fn[o]||(r.fn[o]=mh(r.parameterExpression(t.$expr),t.$fields))}function Orr(t,r){let n="k:"+t.$key+"_"+!!t.$flat;return r.fn[n]||(r.fn[n]=DJe(t.$key,t.$flat,r.expr.codegen))}function Mrr(t,r){if(!t.$field)return null;let n="f:"+t.$field+"_"+t.$name;return r.fn[n]||(r.fn[n]=aY(t.$field,t.$name,r.expr.codegen))}function Rrr(t,r){let n="c:"+t.$compare+"_"+t.$order,o=sF(t.$compare).map(i=>i&&i.$tupleid?br:i);return r.fn[n]||(r.fn[n]=AJe(o,t.$order,r.expr.codegen))}function jrr(t,r){let n=t.$encode,o={};for(let i in n){let s=n[i];o[i]=mh(r.encodeExpression(s.$expr),s.$fields),o[i].output=s.$output}return o}function Prr(t,r){return r}function Lrr(t,r){let n=t.$subflow;return function(o,i,s){let a=r.fork().parse(n),l=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(s),l.detachSubflow=()=>r.detach(a),l}}function Brr(){return br}function $rr(t){var r=this,n=t.filter!=null?r.eventExpression(t.filter):void 0,o=t.stream!=null?r.get(t.stream):void 0,i;t.source?o=r.events(t.source,t.type,n):t.merge&&(i=t.merge.map(s=>r.get(s)),o=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(s=>r.get(s)),o=o.between(i[0],i[1])),t.filter&&(o=o.filter(n)),t.throttle!=null&&(o=o.throttle(+t.throttle)),t.debounce!=null&&(o=o.debounce(+t.debounce)),o==null&&G_("Invalid stream definition: "+JSON.stringify(t)),t.consume&&o.consume(!0),r.stream(t,o)}function zrr(t){var r=this,n=uY(n=t.source)?n.$ref:n,o=r.get(n),i=null,s=t.update,a=void 0;o||G_("Source not defined: "+t.source),i=t.target&&t.target.$expr?r.eventExpression(t.target.$expr):r.get(t.target),s&&s.$expr&&(s.$params&&(a=r.parseParameters(s.$params)),s=r.handlerExpression(s.$expr)),r.update(t,o,i,s,a)}function Vrr(t){var r=this,n={};if(t.signals){var o=n.signals={};Object.keys(r.signals).forEach(s=>{let a=r.signals[s];t.signals(s,a)&&(o[s]=a.value)})}if(t.data){var i=n.data={};Object.keys(r.data).forEach(s=>{let a=r.data[s];t.data(s,a)&&(i[s]=a.input.value)})}return r.subcontext&&t.recurse!==!1&&(n.subcontext=r.subcontext.map(s=>s.getState(t))),n}function Grr(t){var r=this,n=r.dataflow,o=t.data,i=t.signals;Object.keys(i||{}).forEach(s=>{n.update(r.signals[s],i[s],Urr)}),Object.keys(o||{}).forEach(s=>{n.pulse(r.data[s].input,n.changeset().remove(TJe).insert(o[s]))}),(t.subcontext||[]).forEach((s,a)=>{let l=r.subcontext[a];l&&l.setState(s)})}function fY(t,r,n,o){return new jJe(t,r,n,o)}function jJe(t,r,n,o){this.dataflow=t,this.transforms=r,this.events=t.events.bind(t),this.expr=o||Arr,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function RJe(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}var _rr,FJe,Arr,MJe,Urr,fxe=D(()=>{"use strict";NJe();qa();_rr=uxe(["rule"]),FJe=uxe(["group","image","rect"]);Arr={operator:(t,r)=>K5(t,["_"],r.code),parameter:(t,r)=>K5(t,["datum","_"],r.code),event:(t,r)=>K5(t,["event"],r.code),handler:(t,r)=>{let n=`var datum=event.item&&event.item.datum;return ${r.code};`;return K5(t,["_","event"],n)},encode:(t,r)=>{let{marktype:n,channels:o}=r,i="var o=item,datum=o.datum,m=0,$;";for(let s in o){let a="o["+cY(s)+"]";i+=`$=${o[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=Srr(o,n),i+="return m;",K5(t,["item","_"],i)},codegen:{get(t){let r=`[${t.map(cY).join("][")}]`,n=Function("_",`return _${r};`);return n.path=r,n},comparator(t,r){let n,o=(s,a)=>{let l=r[a],u,c;return s.path?(u=`a${s.path}`,c=`b${s.path}`):((n=n||{})["f"+a]=s,u=`this.f${a}(a)`,c=`this.f${a}(b)`),Trr(u,c,-l,l)},i=Function("a","b","var u, v; return "+t.map(o).join("")+"0;");return n?i.bind(n):i}}};MJe=[{key:"$ref",parse:Nrr},{key:"$key",parse:Orr},{key:"$expr",parse:Frr},{key:"$field",parse:Mrr},{key:"$encode",parse:jrr},{key:"$compare",parse:Rrr},{key:"$context",parse:Prr},{key:"$subflow",parse:Lrr},{key:"$tupleid",parse:Brr}];Urr={skip:!0};jJe.prototype=RJe.prototype={fork(){let t=new RJe(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);let r=Object.keys(t.nodes);for(let n of r)t.nodes[n]._targets=null;for(let n of r)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,r){return this.nodes[t]=r},add(t,r){let n=this,o=n.dataflow,i=t.value;if(n.set(t.id,r),Err(t.type)&&i&&(i.$ingest?o.ingest(r,i.$ingest,i.$format):i.$request?o.preload(r,i.$request,i.$format):o.pulse(r,o.changeset().insert(i))),t.root&&(n.root=r),t.parent){let s=n.get(t.parent.$ref);s?(o.connect(s,[r]),r.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),o.connect(s,[r]),r.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=r),t.scale&&(n.scales[t.scale]=r),t.data)for(let s in t.data){let a=n.data[s]||(n.data[s]={});t.data[s].forEach(l=>a[l]=r)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,r){this.add(t,this.dataflow.add(t.value,r))},transform(t,r){this.add(t,this.dataflow.add(this.transforms[cxe(r)]))},stream(t,r){this.set(t.id,r)},update(t,r,n,o,i){this.dataflow.on(r,n,o,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:wrr,parseOperator:krr,parseOperatorParameters:Irr,parseParameters:Drr,parseStream:$rr,parseUpdate:zrr,getState:Vrr,setState:Grr}});function Wrr(t){let r=t.container();r&&(r.setAttribute("role","graphics-document"),r.setAttribute("aria-roleDescription","visualization"),WJe(r,t.description()))}function WJe(t,r){t&&(r==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",r))}function qrr(t){t.add(null,r=>(t._background=r.bg,t._resize=1,r.bg),{bg:t._signals.background})}function Hrr(t){let r=t._signals.cursor||(t._signals.cursor=t.add({user:dxe,item:null}));t.on(t.events("view","mousemove"),r,(n,o)=>{let i=r.value,s=i?Kn(i)?i:i.user:dxe,a=o.item&&o.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),t.add(null,function(n){let o=n.cursor,i=this.value;return Kn(o)||(i=o.item,o=o.user),mxe(t,o&&o!==dxe?o:i||o),i},{cursor:r})}function mxe(t,r){let n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return r==null?n.style.removeProperty("cursor"):n.style.cursor=r}function mY(t,r){var n=t._runtime.data;return Or(n,r)||pt("Unrecognized data set: "+r),n[r]}function Yrr(t,r){return arguments.length<2?mY(this,t).values.value:gY.call(this,t,Nx().remove(_0).insert(r))}function gY(t,r){Fae(r)||pt("Second argument to changes must be a changeset.");let n=mY(this,t);return n.modified=!0,this.pulse(n.input,r)}function Xrr(t,r){return gY.call(this,t,Nx().insert(r))}function Krr(t,r){return gY.call(this,t,Nx().remove(r))}function qJe(t){var r=t.padding();return Math.max(0,t._viewWidth+r.left+r.right)}function HJe(t){var r=t.padding();return Math.max(0,t._viewHeight+r.top+r.bottom)}function yY(t){var r=t.padding(),n=t._origin;return[r.left+n[0],r.top+n[1]]}function Zrr(t){var r=yY(t),n=qJe(t),o=HJe(t);t._renderer.background(t.background()),t._renderer.resize(n,o,r),t._handler.origin(r),t._resizeListeners.forEach(i=>{try{i(n,o)}catch(s){t.error(s)}})}function Qrr(t,r,n){var o=t._renderer,i=o&&o.canvas(),s,a,l;return i&&(l=yY(t),a=r.changedTouches?r.changedTouches[0]:r,s=J4(a,i),s[0]-=l[0],s[1]-=l[1]),r.dataflow=t,r.item=n,r.vega=Jrr(t,n,s),r}function Jrr(t,r,n){let o=r?r.mark.marktype==="group"?r:r.mark.group:null;function i(a){var l=o,u;if(a){for(u=r;u;u=u.mark.group)if(u.mark.name===a){l=u;break}}return l&&l.mark&&l.mark.interactive?l:{}}function s(a){if(!a)return n;Kn(a)&&(a=i(a));let l=n.slice();for(;a;)l[0]-=a.x||0,l[1]-=a.y||0,a=a.mark&&a.mark.group;return l}return{view:Ga(t),item:Ga(r||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}function nnr(t){let r=on({defaults:{}},t),n=(o,i)=>{i.forEach(s=>{Wr(o[s])&&(o[s]=ru(o[s]))})};return n(r.defaults,["prevent","allow"]),n(r,["view","window","selector"]),r}function YJe(t,r,n,o){t._eventListeners.push({type:n,sources:jr(r),handler:o})}function onr(t,r){var n=t._eventConfig.defaults,o=n.prevent,i=n.allow;return o===!1||i===!0?!1:o===!0||i===!1?!0:o?o[r]:i?!i[r]:t.preventDefault()}function dY(t,r,n){let o=t._eventConfig&&t._eventConfig[r];return o===!1||ln(o)&&!o[n]?(t.warn(`Blocked ${r} ${n} event listener.`),!1):!0}function inr(t,r,n){var o=this,i=new eD(n),s=function(c,f){o.runAsync(null,()=>{t===PJe&&onr(o,r)&&c.preventDefault(),i.receive(Qrr(o,c,f))})},a;if(t===enr)dY(o,"timer",r)&&o.timer(s,r);else if(t===PJe)dY(o,"view",r)&&o.addEventListener(r,s,rnr);else if(t===tnr?dY(o,"window",r)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&dY(o,"selector",r)&&(a=document.querySelectorAll(t)),!a)o.warn("Can not resolve event source: "+t);else{for(var l=0,u=a.length;l<u;++l)a[l].addEventListener(r,s);YJe(o,a,r,s)}return i}function LJe(t){return t.item}function BJe(t){return t.item.mark.source}function $Je(t){return function(r,n){return n.vega.view().changeset().encode(n.item,t)}}function snr(t,r){return t=[t||"hover"],r=[r||"update",t[0]],this.on(this.events("view","mouseover",LJe),BJe,$Je(t)),this.on(this.events("view","mouseout",LJe),BJe,$Je(r)),this}function anr(){var t=this._tooltip,r=this._timers,n=this._eventListeners,o,i,s;for(o=r.length;--o>=0;)r[o].stop();for(o=n.length;--o>=0;)for(s=n[o],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function yd(t,r,n){let o=document.createElement(t);for(let i in r)o.setAttribute(i,r[i]);return n!=null&&(o.textContent=n),o}function fnr(t,r,n){if(!r)return;let o=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=t.signal(o.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(o.signal,a)})}},o.debounce&&(i.update=kse(o.debounce,i.update))),(o.input==null&&o.element?dnr:mnr)(i,r,o,t),i.active||(t.on(t._signals[o.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(o.signal))}),i.active=!0),i}function dnr(t,r,n,o){let i=n.event||"input",s=()=>t.update(r.value);o.signal(n.signal,r.value),r.addEventListener(i,s),YJe(o,r,i,s),t.set=a=>{r.value=a,r.dispatchEvent(pnr(i))}}function pnr(t){return typeof Event<"u"?new Event(t):{type:t}}function mnr(t,r,n,o){let i=o.signal(n.signal),s=yd("div",{class:lnr}),a=n.input==="radio"?s:s.appendChild(yd("label"));a.appendChild(yd("span",{class:unr},n.name||n.signal)),r.appendChild(s);let l=hnr;switch(n.input){case"checkbox":l=gnr;break;case"select":l=ynr;break;case"radio":l=bnr;break;case"range":l=xnr;break}l(t,a,n,i)}function hnr(t,r,n,o){let i=yd("input");for(let s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=o,r.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=s=>i.value=s}function gnr(t,r,n,o){let i={type:"checkbox",name:n.signal};o&&(i.checked=!0);let s=yd("input",i);r.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=a=>s.checked=!!a||null}function ynr(t,r,n,o){let i=yd("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,l)=>{let u={value:a};hY(a,o)&&(u.selected=!0),i.appendChild(yd("option",u,(s[l]||a)+""))}),r.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=a=>{for(let l=0,u=n.options.length;l<u;++l)if(hY(n.options[l],a)){i.selectedIndex=l;return}}}function bnr(t,r,n,o){let i=yd("span",{class:cnr}),s=n.labels||[];r.appendChild(i),t.elements=n.options.map((a,l)=>{let u={type:"radio",name:n.signal,value:a};hY(a,o)&&(u.checked=!0);let c=yd("input",u);c.addEventListener("change",()=>t.update(a));let f=yd("label",{},(s[l]||a)+"");return f.prepend(c),i.appendChild(f),c}),t.set=a=>{let l=t.elements,u=l.length;for(let c=0;c<u;++c)hY(l[c].value,a)&&(l[c].checked=!0)}}function xnr(t,r,n,o){o=o!==void 0?o:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+o)||100,s=n.min||Math.min(0,i,+o)||0,a=n.step||Zu(s,i,100),l=yd("input",{type:"range",name:n.signal,min:s,max:i,step:a});l.value=o;let u=yd("span",{},+o);r.appendChild(l),r.appendChild(u);let c=()=>{u.textContent=l.value,t.update(+l.value)};l.addEventListener("input",c),l.addEventListener("change",c),t.elements=[l],t.set=f=>{l.value=f,u.textContent=f}}function hY(t,r){return t===r||t+""==r+""}function XJe(t,r,n,o,i,s){return r=r||new o(t.loader()),r.initialize(n,qJe(t),HJe(t),yY(t),i,s).background(t.background())}function hxe(t,r){return r?function(){try{r.apply(this,arguments)}catch(n){t.error(n)}}:null}function vnr(t,r,n,o){let i=new o(t.loader(),hxe(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,yY(t),t);return r&&r.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function wnr(t,r){let n=this,o=n._renderType,i=n._eventConfig.bind,s=e5(o);t=n._el=t?pxe(n,t,!0):null,Wrr(n),s||n.error("Unrecognized renderer type: "+o);let a=s.handler||BN,l=t?s.renderer:s.headless;return n._renderer=l?XJe(n,n._renderer,t,l):null,n._handler=vnr(n,n._handler,t,a),n._redraw=!0,t&&i!=="none"&&(r=r?n._elBind=pxe(n,r,!0):t.appendChild(yd("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=pxe(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{fnr(n,u.element||r,u)})),n}function pxe(t,r,n){if(typeof r=="string")if(typeof document<"u"){if(r=document.querySelector(r),!r)return t.error("Signal bind element not found: "+r),null}else return t.error("DOM document instance not found."),null;if(r&&n)try{r.innerHTML=""}catch(o){r=null,t.error(o)}return r}function zJe(t){return ln(t)?{top:Z5(t.top),bottom:Z5(t.bottom),left:Z5(t.left),right:Z5(t.right)}:_nr(Z5(t))}function gxe(t,r,n,o){return Be(this,null,function*(){let i=e5(r),s=i&&i.headless;return s||pt("Unrecognized renderer type: "+r),yield t.runAsync(),XJe(t,null,null,s,n,o).renderAsync(t._scenegraph.root)})}function Snr(t,r){return Be(this,null,function*(){t!==sv.Canvas&&t!==sv.SVG&&t!==sv.PNG&&pt("Unrecognized image type: "+t);let n=yield gxe(this,t,r);return t===sv.SVG?Cnr(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function Cnr(t,r){let n=new Blob([t],{type:r});return window.URL.createObjectURL(n)}function Enr(t,r){return Be(this,null,function*(){return(yield gxe(this,sv.Canvas,t,r)).canvas()})}function Tnr(t){return Be(this,null,function*(){return(yield gxe(this,sv.SVG,t)).svg()})}function Anr(t,r,n){return fY(t,Dx,iF,n).parse(r)}function knr(t){var r=this._runtime.scales;return Or(r,t)||pt("Unrecognized scale or projection: "+t),r[t].value}function QJe(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===yxe?o.left+o.right:0)}function JJe(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===yxe?o.top+o.bottom:0)}function Inr(t){var r=t._signals,n=r[KJe],o=r[ZJe],i=r[yxe];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,l=>{t._width=l.size,t._viewWidth=QJe(t,l.size),s()},{size:n}),t._resizeHeight=t.add(null,l=>{t._height=l.size,t._viewHeight=JJe(t,l.size),s()},{size:o});let a=t.add(null,s,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=o.rank+1,a.rank=i.rank+1}function Dnr(t,r,n,o,i,s){this.runAfter(a=>{let l=0;a._autosize=0,a.width()!==n&&(l=1,a.signal(KJe,n,UJe),a._resizeWidth.skip(!0)),a.height()!==o&&(l=1,a.signal(ZJe,o,UJe),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==r&&(a._resize=1,a._viewHeight=r),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),l&&a.run("enter"),s&&a.runAfter(u=>u.resize())},!1,1)}function Nnr(t){return this._runtime.getState(t||{data:Fnr,signals:Onr,recurse:!0})}function Fnr(t,r){return r.modified&&Wr(r.input.value)&&t.indexOf("_:vega:_")}function Onr(t,r){return!(t==="parent"||r instanceof Dx.proxy)}function Mnr(t){return this.runAsync(null,r=>{r._trigger=!1,r._runtime.setState(t)},r=>{r._trigger=!0}),this}function Rnr(t,r){function n(o){t({timestamp:Date.now(),elapsed:o})}this._timers.push(ghe(n,r))}function jnr(t,r,n,o){let i=t.element();i&&i.setAttribute("title",Pnr(o))}function Pnr(t){return t==null?"":Wr(t)?eet(t):ln(t)&&!z3(t)?Lnr(t):t+""}function Lnr(t){return Object.keys(t).map(r=>{let n=t[r];return r+": "+(Wr(n)?eet(n):tet(n))}).join(`
`)}function eet(t){return"["+t.map(tet).join(", ")+"]"}function tet(t){return Wr(t)?"[\u2026]":ln(t)&&!z3(t)?"{\u2026}":t}function bxe(t,r){let n=this;if(r=r||{},gw.call(n),r.loader&&n.loader(r.loader),r.logger&&n.logger(r.logger),r.logLevel!=null&&n.logLevel(r.logLevel),r.locale||t.locale){let s=on({},t.locale,r.locale);n.locale(vq(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=r.renderer||sv.Canvas,n._scenegraph=new Xq;let o=n._scenegraph.root;n._renderer=null,n._tooltip=r.tooltip||jnr,n._redraw=!0,n._handler=new BN().scene(o),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=nnr(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=Anr(n,t,r.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:on({},s)})),i.root&&i.root.set(o),o.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(o.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=QJe(n,n._width),n._viewHeight=JJe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Inr(n),qrr(n),Hrr(n),n.description(t.description),r.hover&&n.hover(),r.container&&n.initialize(r.container,r.bind)}function pY(t,r){return Or(t._signals,r)?t._signals[r]:pt("Unrecognized signal name: "+Pr(r))}function ret(t,r){let n=(t._targets||[]).filter(o=>o._update&&o._update.handler===r);return n.length?n[0]:null}function VJe(t,r,n,o){let i=ret(n,o);return i||(i=hxe(t,()=>o(r,n.value)),i.handler=o,t.on(n,null,i)),t}function GJe(t,r,n){let o=ret(r,n);return o&&r._targets.remove(o),t}var dxe,PJe,enr,tnr,rnr,lnr,unr,cnr,Z5,_nr,KJe,ZJe,yxe,UJe,net=D(()=>{"use strict";Ts();qa();t5();Vo();sY();fxe();yhe();wq();dxe="default";PJe="view",enr="timer",tnr="window",rnr={trap:!1};lnr="vega-bind",unr="vega-bind-name",cnr="vega-bind-radio";Z5=t=>+t||0,_nr=t=>({top:t,bottom:t,left:t,right:t});KJe="width",ZJe="height",yxe="padding",UJe={skip:!0};It(bxe,gw,{evaluate(t,r,n){return Be(this,null,function*(){if(yield gw.prototype.evaluate.call(this,t,r),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Zrr(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(o){this.error(o)}return n&&fj(this,n),this})},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let r=t!=null?t+"":null;return r!==this._desc&&WJe(this._el,this._desc=r),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,r,n){let o=pY(this,t);return arguments.length===1?o.value:this.update(o,r,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",zJe(t)):zJe(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(e5(t)||pt("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(gw.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(pY(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dnr,addEventListener(t,r,n){let o=r;return n&&n.trap===!1||(o=hxe(this,r),o.raw=r),this._handler.on(t,o),this},removeEventListener(t,r){for(var n=this._handler.handlers(t),o=n.length,i,s;--o>=0;)if(s=n[o].type,i=n[o].handler,t===s&&(r===i||r===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(t){let r=this._resizeListeners;return r.indexOf(t)<0&&r.push(t),this},removeResizeListener(t){var r=this._resizeListeners,n=r.indexOf(t);return n>=0&&r.splice(n,1),this},addSignalListener(t,r){return VJe(this,t,pY(this,t),r)},removeSignalListener(t,r){return GJe(this,pY(this,t),r)},addDataListener(t,r){return VJe(this,t,mY(this,t).values,r)},removeDataListener(t,r){return GJe(this,mY(this,t).values,r)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let r=mxe(this,null);this._globalCursor=!!t,r&&mxe(this,r)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:Rnr,events:inr,finalize:anr,hover:snr,data:Yrr,change:gY,insert:Xrr,remove:Krr,scale:knr,initialize:wnr,toImageURL:Snr,toCanvas:Enr,toSVG:Tnr,getState:Nnr,setState:Mnr})});function cet(t,r,n){return aet=r||Bnr,uet=n||Gnr,fet(t.trim()).map(xxe)}function Wnr(t){return uet[t]}function Q5(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function fet(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=Q5(t,i,set,bY+oet,xY+iet),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function xxe(t){return t[0]==="["?qnr(t):Hnr(t)}function qnr(t){let r=t.length,n=1,o;if(n=Q5(t,n,xY,bY,xY),n===r)throw"Empty between selector: "+t;if(o=fet(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==Unr)throw"Expected '>' after between selector: "+t;o=o.map(xxe);let i=xxe(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function Hnr(t){let r={source:aet},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===iet){if(l=t.lastIndexOf(oet),l>=0){try{o=Ynr(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===znr&&(i=++l),u=Q5(t,l,$nr),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=Q5(t,l,bY),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=Q5(t,l,xY),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==bY)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||Vnr.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):Wnr(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function Ynr(t){let r=t.split(set);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var Bnr,bY,xY,oet,iet,$nr,set,znr,Unr,Vnr,Gnr,aet,uet,det=D(()=>{"use strict";Bnr="view",bY="[",xY="]",oet="{",iet="}",$nr=":",set=",",znr="@",Unr=">",Vnr=/[[\]{}]/,Gnr={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});function Xnr(t){return ln(t)?t:{type:t||"pad"}}function Znr(t){return ln(t)?t.signal?t:{top:J5(t.top),bottom:J5(t.bottom),left:J5(t.left),right:J5(t.right)}:Knr(J5(t))}function pet(t,r,n,o){return n!=null?(ln(n)&&!Wr(n)||Wr(n)&&n.length&&ln(n[0])?t.update[r]=n:t[o||"enter"][r]={value:n},1):0}function Rl(t,r,n){for(let o in r)pet(t,o,r[o]);for(let o in n)pet(t,o,n[o],"update")}function dF(t,r,n){for(let o in r)n&&Or(n,o)||(t[o]=on(t[o]||{},r[o]));return t}function lF(t,r){return r&&(r.enter&&r.enter[t]||r.update&&r.update[t])}function mor(t,r,n,o,i){let s={},a={},l,u,c,f;u="lineBreak",r==="text"&&i[u]!=null&&!lF(u,t)&&vxe(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===Nxe?i.group:n===Dxe?on({},i.mark,i[r]):null;for(u in f)c=lF(u,t)||(u==="fill"||u==="stroke")&&(lF("fill",t)||lF("stroke",t)),c||vxe(s,u,f[u]);jr(o).forEach(d=>{let p=i.style&&i.style[d];for(let m in p)lF(m,t)||vxe(s,m,p[m])}),t=on({},t);for(u in s)f=s[u],f.signal?(l=l||{})[u]=f:a[u]=f;return t.enter=on(a,t.enter),l&&(t.update=on(l,t.update)),t}function vxe(t,r,n){t[r]=n&&n.signal?{signal:n.signal}:{value:n}}function AY(t){if(t.gradient!=null)return gor(t);let r=t.signal?`(${t.signal})`:t.color?hor(t.color):t.field!=null?Ret(t.field):t.value!==void 0?Pr(t.value):void 0;return t.scale!=null&&(r=yor(t,r)),r===void 0&&(r=null),t.exponent!=null&&(r=`pow(${r},${wY(t.exponent)})`),t.mult!=null&&(r+=`*${wY(t.mult)}`),t.offset!=null&&(r+=`+${wY(t.offset)}`),t.round&&(r=`round(${r})`),r}function hor(t){return t.c?vY("hcl",t.h,t.c,t.l):t.h||t.s?vY("hsl",t.h,t.s,t.l):t.l||t.a?vY("lab",t.l,t.a,t.b):t.r||t.g||t.b?vY("rgb",t.r,t.g,t.b):null}function gor(t){let r=[t.start,t.stop,t.count].map(n=>n==null?null:Pr(n));for(;r.length&&Pn(r)==null;)r.pop();return r.unshift(Met(t.gradient)),`gradient(${r.join(",")})`}function wY(t){return ln(t)?"("+AY(t)+")":t}function Ret(t){return jet(ln(t)?t:{datum:t})}function jet(t){let r,n,o;if(t.signal)r="datum",o=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),r="item";n-- >0;)r+=".mark.group";t.parent?(o=t.parent,r+=".datum"):o=t.group}else t.datum?(r="datum",o=t.datum):pt("Invalid field reference: "+Pr(t));return t.signal||(o=Kn(o)?L3(o).map(Pr).join("]["):jet(o)),r+"["+o+"]"}function yor(t,r){let n=Met(t.scale);return t.range!=null?r=`lerp(_range(${n}), ${+t.range})`:(r!==void 0&&(r=`_scale(${n}, ${r})`),t.band&&(r=(r?r+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+wY(t.band)),t.extra&&(r=`(datum.extra ? _scale(${n}, datum.extra.value) : ${r})`)),r==null&&(r="0")),r}function bor(t){let r="";return t.forEach(n=>{let o=AY(n);r+=n.test?`(${n.test})?${o}:`:o}),Pn(r)===":"&&(r+="null"),r}function Pet(t,r,n,o,i,s){let a={};s=s||{},s.encoders={$encode:a},t=mor(t,r,n,o,i.config);for(let l in t)a[l]=xor(t[l],r,s,i);return s}function xor(t,r,n,o){let i={},s={};for(let a in t)t[a]!=null&&(i[a]=wor(vor(t[a]),o,n,s));return{$expr:{marktype:r,channels:i},$fields:Object.keys(s),$output:Object.keys(t)}}function vor(t){return Wr(t)?bor(t):AY(t)}function wor(t,r,n,o){let i=ph(t,r);return i.$fields.forEach(s=>o[s]=1),on(n,i.$params),i.$expr}function met(t,r){pt(t+' for "outer" push: '+Pr(r))}function Let(t,r){let n=t.name;if(t.push===_or)r.signals[n]||met("No prior signal definition",n),Sor.forEach(o=>{t[o]!==void 0&&met("Invalid property ",o)});else{let o=r.addSignal(n,t.value);t.react===!1&&(o.react=!1),t.bind&&r.addBinding(n,t.bind)}}function Sxe(t,r,n,o){this.id=-1,this.type=t,this.value=r,this.params=n,o&&(this.parent=o)}function kY(t,r,n,o){return new Sxe(t,r,n,o)}function TY(t,r){return kY("operator",t,r)}function Ar(t){let r={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(r),r}function rB(t,r){return r?{$field:t,$name:r}:{$field:t}}function het(t,r){return{$compare:t,$order:r}}function Cor(t,r){let n={$key:t};return r&&(n.$flat=!0),n}function Aor(t){return ln(t)?(t.order===Tor?"-":"+")+IY(t.op,t.field):""}function IY(t,r){return(t&&t.signal?"$"+t.signal:t||"")+(t&&r?"_":"")+(r&&r.signal?"$"+r.signal:r||"")}function Ta(t){return t&&t.signal}function kor(t){return t&&t.expr}function _Y(t){if(Ta(t))return!0;if(ln(t)){for(let r in t)if(_Y(t[r]))return!0}return!1}function hh(t,r){return t??r}function FT(t){return t&&t.signal||t}function nB(t,r){return(t.merge?Dor:t.stream?Nor:t.type?For:pt("Invalid stream specification: "+Pr(t)))(t,r)}function Ior(t){return t===Oxe?Exe:t||Exe}function Dor(t,r){let n=t.merge.map(i=>nB(i,r)),o=Mxe({merge:n},t,r);return r.addStream(o).id}function Nor(t,r){let n=nB(t.stream,r),o=Mxe({stream:n},t,r);return r.addStream(o).id}function For(t,r){let n;t.type===get?(n=r.event(get,t.throttle),t={between:t.between,filter:t.filter}):n=r.event(Ior(t.source),t.type);let o=Mxe({stream:n},t,r);return Object.keys(o).length===1?n:r.addStream(o).id}function Mxe(t,r,n){let o=r.between;return o&&(o.length!==2&&pt('Stream "between" parameter must have 2 entries: '+Pr(r)),t.between=[nB(o[0],n),nB(o[1],n)]),o=r.filter?[].concat(r.filter):[],(r.marktype||r.markname||r.markrole)&&o.push(Oor(r.marktype,r.markname,r.markrole)),r.source===Oxe&&o.push("inScope(event.item)"),o.length&&(t.filter=ph("("+o.join(")&&(")+")",n).$expr),(o=r.throttle)!=null&&(t.throttle=+o),(o=r.debounce)!=null&&(t.debounce=+o),r.consume&&(t.consume=!0),t}function Oor(t,r,n){let o="event.item";return o+(t&&t!=="*"?"&&"+o+".mark.marktype==='"+t+"'":"")+(n?"&&"+o+".mark.role==='"+n+"'":"")+(r?"&&"+o+".mark.name==='"+r+"'":"")}function Ror(t,r,n){let o=t.encode,i={target:n},s=t.events,a=t.update,l=[];s||pt("Signal update missing events specification."),Kn(s)&&(s=cet(s,r.isSubscope()?Oxe:Exe)),s=jr(s).filter(u=>u.signal||u.scale?(l.push(u),0):1),l.length>1&&(l=[Por(l)]),s.length&&l.push(s.length>1?{merge:s}:s[0]),o!=null&&(a&&pt("Signal encode and update are mutually exclusive."),a="encode(item(),"+Pr(o)+")"),i.update=Kn(a)?ph(a,r):a.expr!=null?ph(a.expr,r):a.value!=null?a.value:a.signal!=null?{$expr:Mor,$params:{$value:r.signalRef(a.signal)}}:pt("Invalid signal update specification."),t.force&&(i.options={force:!0}),l.forEach(u=>r.addUpdate(on(jor(u,r),i)))}function jor(t,r){return{source:t.signal?r.signalRef(t.signal):t.scale?r.scaleRef(t.scale):nB(t,r)}}function Por(t){return{signal:"["+t.map(r=>r.scale?'scale("'+r.scale+'")':r.signal)+"]"}}function Lor(t,r){let n=r.getSignal(t.name),o=t.update;t.init&&(o?pt("Signals can not include both init and update expressions."):(o=t.init,n.initonly=!0)),o&&(o=ph(o,r),n.update=o.$expr,n.params=o.$params),t.on&&t.on.forEach(i=>Ror(i,r,n.id))}function iir(t,r){let n=t.type||"linear";bpe(n)||pt("Unrecognized scale type: "+Pr(n)),r.addScale(t.name,{type:n,domain:void 0})}function sir(t,r){let n=r.getScale(t.name).params,o;n.domain=qet(t.domain,t,r),t.range!=null&&(n.range=Yet(t,r,n)),t.interpolate!=null&&gir(t.interpolate,n),t.nice!=null&&(n.nice=hir(t.nice)),t.bins!=null&&(n.bins=mir(t.bins,r));for(o in t)Or(n,o)||o==="name"||(n[o]=wp(t[o],r))}function wp(t,r){return ln(t)?t.signal?r.signalRef(t.signal):pt("Unsupported object: "+Pr(t)):t}function SY(t,r){return t.signal?r.signalRef(t.signal):t.map(n=>wp(n,r))}function DY(t){pt("Can not find data set: "+Pr(t))}function qet(t,r,n){if(!t){(r.domainMin!=null||r.domainMax!=null)&&pt("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(Wr(t)?air:t.fields?uir:lir)(t,r,n)}function air(t,r,n){return t.map(o=>wp(o,n))}function lir(t,r,n){let o=n.getData(t.data);return o||DY(t.data),s_(r.type)?o.valuesRef(n,t.field,Het(t.sort,!1)):wpe(r.type)?o.domainRef(n,t.field):o.extentRef(n,t.field)}function uir(t,r,n){let o=t.data,i=t.fields.reduce((s,a)=>(a=Kn(a)?{data:o,field:a}:Wr(a)||a.signal?cir(a,n):a,s.push(a),s),[]);return(s_(r.type)?fir:wpe(r.type)?dir:pir)(t,n,i)}function cir(t,r){let n="_:vega:_"+oir++,o=yh({});if(Wr(t))o.value={$ingest:t};else if(t.signal){let i="setdata("+Pr(n)+","+t.signal+")";o.params.input=r.signalRef(i)}return r.addDataPipeline(n,[o,MT({})]),{data:n,field:"data"}}function fir(t,r,n){let o=Het(t.sort,!0),i,s,a=n.map(c=>{let f=r.getData(c.data);return f||DY(c.data),f.countsRef(r,c.field,o)}),l={groupby:Cxe,pulse:a};o&&(i=o.op||"count",s=o.field?IY(i,o.field):"count",l.ops=[Wet[i]],l.fields=[r.fieldRef(s)],l.as=[s]),i=r.add(Bet(l));let u=r.add(yh({pulse:Ar(i)}));return s=r.add(nir({field:Cxe,sort:r.sortRef(o),pulse:Ar(u)})),Ar(s)}function Het(t,r){return t&&(!t.field&&!t.op?ln(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?pt("No field provided for sort aggregate op: "+t.op):r&&t.field&&t.op&&!Wet[t.op]&&pt("Multiple domain scales can not be sorted using "+t.op)),t}function dir(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||DY(i.data),s.domainRef(r,i.field)});return Ar(r.add(Xor({values:o})))}function pir(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||DY(i.data),s.extentRef(r,i.field)});return Ar(r.add(Yor({extents:o})))}function mir(t,r){return t.signal||Wr(t)?SY(t,r):r.objectProperty(t)}function hir(t){return ln(t)?{interval:wp(t.interval),step:wp(t.step)}:wp(t)}function gir(t,r){r.interpolate=wp(t.type||t),t.gamma!=null&&(r.interpolateGamma=wp(t.gamma))}function Yet(t,r,n){let o=r.config.range,i=t.range;if(i.signal)return r.signalRef(i.signal);if(Kn(i)){if(o&&Or(o,i))return t=on({},t,{range:o[i]}),Yet(t,r,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=s_(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:pt("Unrecognized scale range value: "+Pr(i))}else if(i.scheme){n.scheme=Wr(i.scheme)?SY(i.scheme,r):wp(i.scheme,r),i.extent&&(n.schemeExtent=SY(i.extent,r)),i.count&&(n.schemeCount=wp(i.count,r));return}else if(i.step){n.rangeStep=wp(i.step,r);return}else{if(s_(t.type)&&!Wr(i))return qet(i,t,r);Wr(i)||pt("Unsupported range type: "+Pr(i))}return i.map(s=>(Wr(s)?SY:wp)(s,r))}function yir(t,r){let n=r.config.projection||{},o={};for(let i in t)i!=="name"&&(o[i]=Txe(t[i],i,r));for(let i in n)o[i]==null&&(o[i]=Txe(n[i],i,r));r.addProjection(t.name,o)}function Txe(t,r,n){return Wr(t)?t.map(o=>Txe(o,r,n)):ln(t)?t.signal?n.signalRef(t.signal):r==="fit"?t:pt("Unsupported parameter object: "+Pr(t)):t}function oB(t){return t.type=NY,t.interactive=t.interactive||!1,t}function of(t,r){let n=(o,i)=>hh(t[o],hh(r[o],i));return n.isVertical=o=>bir===hh(t.direction,r.direction||(o?r.symbolDirection:r.gradientDirection)),n.gradientLength=()=>hh(t.gradientLength,r.gradientLength||r.gradientWidth),n.gradientThickness=()=>hh(t.gradientThickness,r.gradientThickness||r.gradientHeight),n.entryColumns=()=>hh(t.columns,hh(r.columns,+n.isVertical(!0))),n}function Zet(t,r){let n=r&&(r.update&&r.update[t]||r.enter&&r.enter[t]);return n&&n.signal?n:n?n.value:null}function Oir(t,r,n){let o=r.config.style[n];return o&&o[t]}function FY(t,r,n){return`item.anchor === '${xir}' ? ${t} : item.anchor === '${wir}' ? ${r} : ${n}`}function Mir(t){let r=t("tickBand"),n=t("tickOffset"),o,i;return r?r.signal?(o={signal:`(${r.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${r.signal}) === 'extent'`},ln(n)||(n={signal:`(${r.signal}) === 'extent' ? 0 : ${n}`})):r==="extent"?(o=1,i=!0,n=0):(o=.5,i=!1):(o=t("bandPosition"),i=t("tickExtra")),{extra:i,band:o,offset:n}}function Qet(t,r){return r?t?ln(t)?Object.assign({},t,{offset:Qet(t.offset,r)}):{value:t,offset:r}:r:t}function bd(t,r){return r?(t.name=r.name,t.style=r.style||t.style,t.interactive=!!r.interactive,t.encode=dF(t.encode,r,sB)):t.interactive=!1,t}function Rir(t,r,n,o){let i=of(t,n),s=i.isVertical(),a=i.gradientThickness(),l=i.gradientLength(),u,c,f,d,p;s?(c=[0,1],f=[0,0],d=a,p=l):(c=[0,0],f=[1,0],d=l,p=a);let m={enter:u={opacity:zn,x:zn,y:zn,width:ol(d),height:ol(p)},update:on({},u,{opacity:Sp,fill:{gradient:r,start:c,stop:f}}),exit:{opacity:zn}};return Rl(m,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),bd({type:Ket,role:aor,encode:m},o)}function jir(t,r,n,o,i){let s=of(t,n),a=s.isVertical(),l=s.gradientThickness(),u=s.gradientLength(),c,f,d,p,m="";a?(c="y",d="y2",f="x",p="width",m="1-"):(c="x",d="x2",f="y",p="height");let h={opacity:zn,fill:{scale:r,field:_p}};h[c]={signal:m+"datum."+fF,mult:u},h[f]=zn,h[d]={signal:m+"datum."+Sir,mult:u},h[p]=ol(l);let g={enter:h,update:on({},h,{opacity:Sp}),exit:{opacity:zn}};return Rl(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),bd({type:Ket,role:ior,key:_p,from:i,encode:g},o)}function xet(t,r,n,o){let i=of(t,r),s=i.isVertical(),a=ol(i.gradientThickness()),l=i.gradientLength(),u=i("labelOverlap"),c,f,d,p,m="",h={enter:c={opacity:zn},update:f={opacity:Sp,text:{field:Rxe}},exit:{opacity:zn}};return Rl(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:hh(t.labelLimit,r.gradientLabelLimit)}),s?(c.align={value:"left"},c.baseline=f.baseline={signal:Lir},d="y",p="x",m="1-"):(c.align=f.align={signal:Pir},c.baseline={value:"top"},d="x",p="y"),c[d]=f[d]={signal:m+"datum."+fF,mult:l},c[p]=f[p]=a,a.offset=hh(t.labelOffset,r.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+Axe}:void 0,bd({type:RT,role:Oet,style:iB,key:_p,from:o,encode:h,overlap:u},n)}function Bir(t,r,n,o,i){let s=of(t,r),a=n.entries,l=!!(a&&a.interactive),u=a?a.name:void 0,c=s("clipHeight"),f=s("symbolOffset"),d={data:"value"},p=`(${i}) ? datum.${_ir} : datum.${Ixe}`,m=c?ol(c):{field:Ixe},h=`datum.${Axe}`,g=`max(1, ${i})`,y,b,x,v,w;m.mult=.5,y={enter:b={opacity:zn,x:{signal:p,mult:.5,offset:f},y:m},update:x={opacity:Sp,x:b.x,y:b.y},exit:{opacity:zn}};let _=null,C=null;t.fill||(_=r.symbolBaseFillColor,C=r.symbolBaseStrokeColor),Rl(y,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Pxe.forEach(N=>{t[N]&&(x[N]=b[N]={scale:t[N],field:_p})});let S=bd({type:Fir,role:lor,key:_p,from:d,clip:c?!0:void 0,encode:y},n.symbols),E=ol(f);E.offset=s("labelOffset"),y={enter:b={opacity:zn,x:{signal:p,offset:E},y:m},update:x={opacity:Sp,text:{field:Rxe},x:b.x,y:b.y},exit:{opacity:zn}},Rl(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});let A=bd({type:RT,role:Oet,style:iB,key:_p,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!c},width:zn,height:c?ol(c):zn,opacity:zn},exit:{opacity:zn},update:x={opacity:Sp,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,x.row.signal=`${h}%${v}`,x.column.signal=`floor(${h} / ${v})`,w={field:["row",h]}):(x.row.signal=`floor(${h} / ${g})`,x.column.signal=`${h} % ${g}`,w={field:h}),x.column.signal=`(${i})?${x.column.signal}:${h}`,o={facet:{data:o,name:"value",groupby:Axe}},oB({role:Fxe,from:o,encode:dF(y,a,sB),marks:[S,A],name:u,interactive:l,sort:w})}function $ir(t,r){let n=of(t,r);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}function Yir(t,r,n,o){let i=of(t,r),s={enter:{opacity:zn},update:{opacity:Sp,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:zn}};return Rl(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Wir},angle:{signal:qir},align:{signal:Gir},baseline:{signal:Hir},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),bd({type:RT,role:uor,style:jxe,from:o,encode:s},n)}function Xir(t,r){let n;return ln(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+vet(t.path)+")":t.sphere&&(n="geoShape("+vet(t.sphere)+', {type: "Sphere"})')),n?r.signalRef(n):!!t}function vet(t){return ln(t)&&t.signal?t.signal:Pr(t)}function Jet(t){let r=t.role||"";return!r.indexOf("axis")||!r.indexOf("legend")||!r.indexOf("title")?r:t.type===NY?Fxe:r||Dxe}function Kir(t){return{marktype:t.type,name:t.name||void 0,role:t.role||Jet(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function Zir(t,r){return t&&t.signal?r.signalRef(t.signal):t!==!1}function Uxe(t,r){let n=H7(t.type);n||pt("Unrecognized transform type: "+Pr(t.type));let o=kY(n.type.toLowerCase(),null,ett(n,t,r));return t.signal&&r.addSignal(t.signal,r.proxy(o)),o.metadata=n.metadata||{},o}function ett(t,r,n){let o={},i=t.params.length;for(let s=0;s<i;++s){let a=t.params[s];o[a.name]=Qir(a,r,n)}return o}function Qir(t,r,n){let o=t.type,i=r[t.name];if(o==="index")return Jir(t,r,n);if(i===void 0){t.required&&pt("Missing required "+Pr(r.type)+" parameter: "+Pr(t.name));return}else{if(o==="param")return esr(t,r,n);if(o==="projection")return n.projectionRef(r[t.name])}return t.array&&!Ta(i)?i.map(s=>wet(t,s,n)):wet(t,i,n)}function wet(t,r,n){let o=t.type;if(Ta(r))return Cet(o)?pt("Expression references can not be signals."):wxe(o)?n.fieldRef(r):Eet(o)?n.compareRef(r):n.signalRef(r.signal);{let i=t.expr||wxe(o);return i&&tsr(r)?n.exprRef(r.expr,r.as):i&&rsr(r)?rB(r.field,r.as):Cet(o)?ph(r,n):nsr(o)?Ar(n.getData(r).values):wxe(o)?rB(r):Eet(o)?n.compareRef(r):r}}function Jir(t,r,n){return Kn(r.from)||pt('Lookup "from" parameter must be a string literal.'),n.getData(r.from).lookupRef(n,r.key)}function esr(t,r,n){let o=r[t.name];return t.array?(Wr(o)||pt("Expected an array of sub-parameters. Instead: "+Pr(o)),o.map(i=>_et(t,i,n))):_et(t,o,n)}function _et(t,r,n){let o=t.params.length,i;for(let a=0;a<o;++a){i=t.params[a];for(let l in i.key)if(i.key[l]!==r[l]){i=null;break}if(i)break}i||pt("Unsupported parameter: "+Pr(r));let s=on(ett(i,r,n),i.key);return Ar(n.add(Zor(s)))}function osr(t,r,n){let o,i,s,a,l;return t?(o=t.facet)&&(r||pt("Only group marks can be faceted."),o.field!=null?a=l=EY(o,n):(t.data?l=Ar(n.getData(t.data).aggregate):(s=Uxe(on({type:"aggregate",groupby:jr(o.groupby)},o.aggregate),n),s.params.key=n.keyRef(o.groupby),s.params.pulse=EY(o,n),a=l=Ar(n.add(s))),i=n.keyRef(o.groupby,!0))):a=Ar(n.add(yh(null,[{}]))),a||(a=EY(t,n)),{key:i,pulse:a,parent:l}}function EY(t,r){return t.$ref?t:t.data&&t.data.$ref?t.data:Ar(r.getData(t.data).output)}function OT(t,r,n,o,i){this.scope=t,this.input=r,this.output=n,this.values=o,this.aggregate=i,this.index={}}function ttt(t){return Kn(t)?t:null}function Tet(t,r,n){let o=IY(n.op,n.field),i;if(r.ops){for(let s=0,a=r.as.length;s<a;++s)if(r.as[s]===o)return}else r.ops=["count"],r.fields=[null],r.as=["count"];n.op&&(r.ops.push((i=n.op.signal)?t.signalRef(i):n.op),r.fields.push(t.fieldRef(n.field)),r.as.push(o))}function eB(t,r,n,o,i,s,a){let l=r[n]||(r[n]={}),u=Aor(s),c=ttt(i),f,d;if(c!=null&&(t=r.scope,c=c+(u?"|"+u:""),f=l[c]),!f){let p=s?{field:Cxe,pulse:r.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:Ar(r.output)};u&&(p.sort=t.sortRef(s)),d=t.add(kY(o,void 0,p)),a&&(r.index[i]=d),f=Ar(d),c!=null&&(l[c]=f)}return f}function isr(t,r,n){let o=t.from.facet,i=o.name,s=EY(o,r),a;o.name||pt("Facet must have a name: "+Pr(o)),o.data||pt("Facet must reference a data set: "+Pr(o)),o.field?a=r.add(Uet({field:r.fieldRef(o.field),pulse:s})):o.groupby?a=r.add(Uor({key:r.keyRef(o.groupby),group:Ar(r.proxy(n.parent)),pulse:s})):pt("Facet must specify groupby or field: "+Pr(o));let l=r.fork(),u=l.add(yh()),c=l.add(MT({pulse:Ar(u)}));l.addData(i,new OT(l,u,u,c)),l.addSignal("parent",null),a.params.subflow={$subflow:l.parse(t).toRuntime()}}function ssr(t,r,n){let o=r.add(Uet({pulse:n.pulse})),i=r.fork();i.add(MT()),i.addSignal("parent",null),o.params.subflow={$subflow:i.parse(t).toRuntime()}}function rtt(t,r,n){let o=t.remove,i=t.insert,s=t.toggle,a=t.modify,l=t.values,u=r.add(TY()),c="if("+t.trigger+',modify("'+n+'",'+[i,o,s,a,l].map(d=>d??"null").join(",")+"),0)",f=ph(c,r);u.update=f.$expr,u.params=f.$params}function MY(t,r){let n=Jet(t),o=t.type===NY,i=t.from&&t.from.facet,s=t.overlap,a=t.layout||n===Fxe||n===Nxe,l,u,c,f,d,p,m,h=n===Dxe||a||i,g=osr(t.from,o,r);u=r.add($or({key:g.key||(t.key?rB(t.key):void 0),pulse:g.pulse,clean:!o}));let y=Ar(u);u=c=r.add(yh({pulse:y})),u=r.add(Hor({markdef:Kir(t),interactive:Zir(t.interactive,r),clip:Xir(t.clip,r),context:{$context:!0},groups:r.lookup(),parent:r.signals.parent?r.signalRef("parent"):null,index:r.markpath(),pulse:Ar(u)}));let b=Ar(u);u=f=r.add(zet(Pet(t.encode,t.type,n,t.style,r,{mod:!1,pulse:b}))),u.params.parent=r.encode(),t.transform&&t.transform.forEach(C=>{let S=Uxe(C,r),E=S.metadata;(E.generates||E.changes)&&pt("Mark transforms should not generate new data."),E.nomod||(f.params.mod=!0),S.params.pulse=Ar(u),r.add(u=S)}),t.sort&&(u=r.add(rir({sort:r.compareRef(t.sort),pulse:Ar(u)})));let x=Ar(u);(i||a)&&(a=r.add(Get({layout:r.objectProperty(t.layout),legends:r.legends,mark:b,pulse:x})),p=Ar(a));let v=r.add($et({mark:b,pulse:p||x}));m=Ar(v),o&&(h&&(l=r.operators,l.pop(),a&&l.pop()),r.pushState(x,p||m,y),i?isr(t,r,g):h?ssr(t,r,g):r.parse(t),r.popState(),h&&(a&&l.push(a),l.push(v))),s&&(m=asr(s,m,r));let w=r.add(Vet({pulse:m})),_=r.add(MT({pulse:Ar(w)},void 0,r.parent()));t.name!=null&&(d=t.name,r.addData(d,new OT(r,c,w,_)),t.on&&t.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&pt("Marks only support modify triggers."),rtt(C,r,d)}))}function asr(t,r,n){let o=t.method,i=t.bound,s=t.separation,a={separation:Ta(s)?n.signalRef(s.signal):s,method:Ta(o)?n.signalRef(o.signal):o,pulse:r};if(t.order&&(a.sort=n.compareRef({field:t.order})),i){let l=i.tolerance;a.boundTolerance=Ta(l)?n.signalRef(l.signal):+l,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ar(n.add(Kor(a)))}function lsr(t,r){let n=r.config.legend,o=t.encode||{},i=of(t,n),s=o.legend||{},a=s.name||void 0,l=s.interactive,u=s.style,c={},f=0,d,p,m;Pxe.forEach(v=>t[v]?(c[v]=t[v],f=f||t[v]):0),f||pt("Missing valid scale for legend.");let h=usr(t,r.scaleType(f)),g={title:t.title!=null,scales:c,type:h,vgrad:h!=="symbol"&&i.isVertical()},y=Ar(r.add(yh(null,[g]))),b={enter:{x:{value:0},y:{value:0}}},x=Ar(r.add(Wor(p={type:h,scale:r.scaleRef(f),count:r.objectProperty(i("tickCount")),limit:r.property(i("symbolLimit")),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)})));return h===CY?(m=[Rir(t,f,n,o.gradient),xet(t,n,o.labels,x)],p.count=p.count||r.signalRef(`max(2,2*floor((${FT(i.gradientLength())})/100))`)):h===kxe?m=[jir(t,f,n,o.gradient,x),xet(t,n,o.labels,x)]:(d=$ir(t,n),m=[Bir(t,n,o,x,FT(d.columns))],p.size=dsr(t,r,m[0].marks)),m=[oB({role:sor,from:y,encode:b,marks:m,layout:d,interactive:l})],g.title&&m.push(Yir(t,n,o.title,y)),MY(oB({role:oor,from:y,encode:dF(fsr(i,t,n),s,sB),marks:m,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:l,style:u}),r)}function usr(t,r){let n=t.type||bet;return!t.type&&csr(t)===1&&(t.fill||t.stroke)&&(n=$L(r)?CY:qG(r)?kxe:bet),n!==CY?n:qG(r)?kxe:CY}function csr(t){return Pxe.reduce((r,n)=>r+(t[n]?1:0),0)}function fsr(t,r,n){let o={enter:{},update:{}};return Rl(o,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:r.format,formatType:r.formatType}),o}function dsr(t,r,n){let o=FT(Aet("size",t,n)),i=FT(Aet("strokeWidth",t,n)),s=FT(psr(n[1].encode,r,iB));return ph(`max(ceil(sqrt(${o})+${i}),${s})`,r)}function Aet(t,r,n){return r[t]?`scale("${r[t]}",datum)`:Zet(t,n[0].encode)}function psr(t,r,n){return Zet("fontSize",t)||Oir("fontSize",r,n)}function hsr(t,r){t=Kn(t)?{text:t}:t;let n=of(t,r.config.title),o=t.encode||{},i=o.group||{},s=i.name||void 0,a=i.interactive,l=i.style,u=[],c={},f=Ar(r.add(yh(null,[c])));return u.push(bsr(t,n,gsr(t),f)),t.subtitle&&u.push(xsr(t,n,o.subtitle,f)),MY(oB({role:cor,from:f,encode:ysr(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:l}),r)}function gsr(t){let r=t.encode;return r&&r.title||on({name:t.name,interactive:t.interactive,style:t.style},r)}function ysr(t,r){let n={enter:{},update:{}};return Rl(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:Bxe},angle:{signal:msr},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),dF(n,r,sB)}function bsr(t,r,n,o){let i={value:0},s=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Rl(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("color"),font:r("font"),fontSize:r("fontSize"),fontStyle:r("fontStyle"),fontWeight:r("fontWeight"),lineHeight:r("lineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),bd({type:RT,role:dor,style:Cir,from:o,encode:a},n)}function xsr(t,r,n,o){let i={value:0},s=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Rl(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("subtitleColor"),font:r("subtitleFont"),fontSize:r("subtitleFontSize"),fontStyle:r("subtitleFontStyle"),fontWeight:r("subtitleFontWeight"),lineHeight:r("subtitleLineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),bd({type:RT,role:por,style:Eir,from:o,encode:a},n)}function vsr(t,r){let n=[];t.transform&&t.transform.forEach(o=>{n.push(Uxe(o,r))}),t.on&&t.on.forEach(o=>{rtt(o,r,t.name)}),r.addDataPipeline(t.name,wsr(t,r,n))}function wsr(t,r,n){let o=[],i=null,s=!1,a=!1,l,u,c,f,d;for(t.values?Ta(t.values)||_Y(t.format)?(o.push(ket(r,t)),o.push(i=NT())):o.push(i=NT({$ingest:t.values,$format:t.format})):t.url?_Y(t.url)||_Y(t.format)?(o.push(ket(r,t)),o.push(i=NT())):o.push(i=NT({$request:t.url,$format:t.format})):t.source&&(i=l=jr(t.source).map(p=>Ar(r.getData(p).output)),o.push(null)),u=0,c=n.length;u<c;++u)f=n[u],d=f.metadata,!i&&!d.source&&o.push(i=NT()),o.push(f),d.generates&&(a=!0),d.modifies&&!a&&(s=!0),d.source?i=f:d.changes&&(i=null);return l&&(c=l.length-1,o[0]=eir({derive:s,pulse:c?l:l[0]}),(s||c)&&o.splice(1,0,NT())),i||o.push(NT()),o.push(MT({})),o}function NT(t){let r=yh({},t);return r.metadata={source:!0},r}function ket(t,r){return qor({url:r.url?t.property(r.url):void 0,async:r.async?t.property(r.async):void 0,values:r.values?t.property(r.values):void 0,format:t.objectProperty(r.format)})}function aF(t,r,n,o){let i;if(r&&Or(r,t))return r[t];if(Or(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return o[jxe][i]}else if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return o[iB][i]}return null}function Det(t){let r={};for(let n of t)if(n)for(let o in n)r[o]=1;return Object.keys(r)}function Dsr(t,r){var n=r.config,o=n.style,i=n.axis,s=r.scaleType(t.scale)==="band"&&n.axisBand,a=t.orient,l,u,c;if(Ta(a)){let d=Det([n.axisX,n.axisY]),p=Det([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(c of d)l[c]=il(a,aF(c,n.axisX,i,o),aF(c,n.axisY,i,o));u={};for(c of p)u[c]=ksr(a.signal,aF(c,n.axisTop,i,o),aF(c,n.axisBottom,i,o),aF(c,n.axisLeft,i,o),aF(c,n.axisRight,i,o))}else l=a===bh||a===W_?n.axisX:n.axisY,u=n["axis"+a[0].toUpperCase()+a.slice(1)];return l||u||s?on({},i,l,u,s):i}function Nsr(t,r,n,o){let i=of(t,r),s=t.orient,a,l,u={enter:a={opacity:zn},update:l={opacity:Sp},exit:{opacity:zn}};Rl(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let c=Net(t,0),f=Net(t,1);return a.x=l.x=il(s,c,zn),a.x2=l.x2=il(s,f),a.y=l.y=gh(s,c,zn),a.y2=l.y2=gh(s,f),bd({type:Lxe,role:Jnr,from:o,encode:u},n)}function Net(t,r){return{scale:t.scale,range:r}}function Fsr(t,r,n,o,i){let s=of(t,r),a=t.orient,l=t.gridScale,u=RY(a,1,-1),c=Osr(t.offset,u),f,d,p,m={enter:f={opacity:zn},update:p={opacity:Sp},exit:d={opacity:zn}};Rl(m,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});let h={scale:t.scale,field:_p,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=il(a,{signal:"height"},{signal:"width"}),y=l?{scale:l,range:0,mult:u,offset:c}:{value:0,offset:c},b=l?{scale:l,range:1,mult:u,offset:c}:on(g,{mult:u,offset:c});return f.x=p.x=il(a,h,y),f.y=p.y=gh(a,h,y),f.x2=p.x2=gh(a,b),f.y2=p.y2=il(a,b),d.x=il(a,h),d.y=gh(a,h),bd({type:Lxe,role:eor,key:_p,from:o,encode:m},n)}function Osr(t,r){if(r!==1)if(!ln(t))t=Ta(r)?{signal:`(${r.signal}) * (${t||0})`}:r*(t||0);else{let n=t=on({},t);for(;n.mult!=null;)if(ln(n.mult))n=n.mult=on({},n.mult);else return n.mult=Ta(r)?{signal:`(${n.mult}) * (${r.signal})`}:n.mult*r,t;n.mult=r}return t}function Msr(t,r,n,o,i,s){let a=of(t,r),l=t.orient,u=RY(l,-1,1),c,f,d,p={enter:c={opacity:zn},update:d={opacity:Sp},exit:f={opacity:zn}};Rl(p,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let m=ol(i);m.mult=u;let h={scale:t.scale,field:_p,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return d.y=c.y=il(l,zn,h),d.y2=c.y2=il(l,m),f.x=il(l,h),d.x=c.x=gh(l,zn,h),d.x2=c.x2=gh(l,m),f.y=gh(l,h),bd({type:Lxe,role:ror,key:_p,from:o,encode:p},n)}function _xe(t,r,n,o,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+r+","+n+","+o+","+i+")"}}function Rsr(t,r,n,o,i,s){let a=of(t,r),l=t.orient,u=t.scale,c=RY(l,-1,1),f=FT(a("labelFlush")),d=FT(a("labelFlushOffset")),p=a("labelAlign"),m=a("labelBaseline"),h=f===0||!!f,g,y=ol(i);y.mult=c,y.offset=ol(a("labelPadding")||0),y.offset.mult=c;let b={scale:u,field:_p,band:.5,offset:Qet(s.offset,a("labelOffset"))},x=il(l,h?_xe(u,f,'"left"','"right"','"center"'):{value:"center"},_sr(l,"left","right")),v=il(l,ott(l,"bottom","top"),h?_xe(u,f,'"top"','"bottom"','"middle"'):{value:"middle"}),w=_xe(u,f,`-(${d})`,d,0);h=h&&d;let _={opacity:zn,x:il(l,b,y),y:gh(l,b,y)},C={enter:_,update:g={opacity:Sp,text:{field:Rxe},x:_.x,y:_.y,align:x,baseline:v},exit:{opacity:zn,x:_.x,y:_.y}};Rl(C,{dx:!p&&h?il(l,w):null,dy:!m&&h?gh(l,w):null}),Rl(C,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:p,baseline:m});let S=a("labelBound"),E=a("labelOverlap");return E=E||S?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:S?{scale:u,orient:l,tolerance:S}:null}:void 0,g.align!==x&&(g.align=cF(g.align,x)),g.baseline!==v&&(g.baseline=cF(g.baseline,v)),bd({type:RT,role:tor,style:iB,key:_p,from:o,encode:C,overlap:E},n)}function jsr(t,r,n,o){let i=of(t,r),s=t.orient,a=RY(s,-1,1),l,u,c={enter:l={opacity:zn,anchor:ol(i("titleAnchor",null)),align:{signal:Bxe}},update:u=on({},l,{opacity:Sp,text:ol(t.title)}),exit:{opacity:zn}},f={signal:`lerp(range("${t.scale}"), ${FY(0,1,.5)})`};return u.x=il(s,f),u.y=gh(s,f),l.angle=il(s,zn,Isr(a,90)),l.baseline=il(s,ott(s,W_,bh),{value:W_}),u.angle=l.angle,u.baseline=l.baseline,Rl(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Psr(i,s,c,n),c.update.align=cF(c.update.align,l.align),c.update.angle=cF(c.update.angle,l.angle),c.update.baseline=cF(c.update.baseline,l.baseline),bd({type:RT,role:nor,style:jxe,from:o,encode:c},n)}function Psr(t,r,n,o){let i=(l,u)=>l!=null?(n.update[u]=cF(ol(l),n.update[u]),!1):!lF(u,o),s=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===s?ol(a):il(r,ol(a),ol(s))}function Lsr(t,r){let n=Dsr(t,r),o=t.encode||{},i=o.axis||{},s=i.name||void 0,a=i.interactive,l=i.style,u=of(t,n),c=Mir(u),f={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:t.title!=null},d=Ar(r.add(yh({},[f]))),p=Ar(r.add(Bor({scale:r.scaleRef(t.scale),extra:r.property(c.extra),count:r.objectProperty(t.tickCount),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)}))),m=[],h;return f.grid&&m.push(Fsr(t,n,o.grid,p,c)),f.ticks&&(h=u("tickSize"),m.push(Msr(t,n,o.ticks,p,h,c))),f.labels&&(h=f.ticks?h:0,m.push(Rsr(t,n,o.labels,p,h,c))),f.domain&&m.push(Nsr(t,n,o.domain,d)),f.title&&m.push(jsr(t,n,o.title,d)),MY(oB({role:Qnr,from:d,encode:dF(Bsr(u,t),i,sB),marks:m,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:a,style:l}),r)}function Bsr(t,r){let n={enter:{},update:{}};return Rl(n,{orient:t("orient"),offset:t("offset")||0,position:hh(r.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${r.scale}")))`},translate:t("translate"),format:r.format,formatType:r.formatType}),n}function stt(t,r,n){let o=jr(t.signals),i=jr(t.scales);return n||o.forEach(s=>Let(s,r)),jr(t.projections).forEach(s=>yir(s,r)),i.forEach(s=>iir(s,r)),jr(t.data).forEach(s=>vsr(s,r)),i.forEach(s=>sir(s,r)),(n||o).forEach(s=>Lor(s,r)),jr(t.axes).forEach(s=>Lsr(s,r)),jr(t.marks).forEach(s=>MY(s,r)),jr(t.legends).forEach(s=>lsr(s,r)),t.title&&hsr(t.title,r),r.parseLambdas(),r}function zsr(t,r){let n=r.config,o=Ar(r.root=r.add(TY())),i=Usr(t,n);i.forEach(c=>Let(c,r)),r.description=t.description||n.description,r.eventConfig=n.events,r.legends=r.objectProperty(n.legend&&n.legend.layout),r.locale=n.locale;let s=r.add(yh()),a=r.add(zet(Pet($sr(t.encode),NY,Nxe,t.style,r,{pulse:Ar(s)}))),l=r.add(Get({layout:r.objectProperty(t.layout),legends:r.legends,autosize:r.signalRef("autosize"),mark:o,pulse:Ar(a)}));r.operators.pop(),r.pushState(Ar(a),Ar(l),null),stt(t,r,i),r.operators.push(l);let u=r.add($et({mark:o,pulse:Ar(l)}));return u=r.add(Vet({pulse:Ar(u)})),u=r.add(MT({pulse:Ar(u)})),r.addData("root",new OT(r,s,s,u)),r}function tB(t,r){return r&&r.signal?{name:t,update:r.signal}:{name:t,value:r}}function Usr(t,r){let n=a=>hh(t[a],r[a]),o=[tB("background",n("background")),tB("autosize",Xnr(n("autosize"))),tB("padding",Znr(n("padding"))),tB("width",n("width")||0),tB("height",n("height")||0)],i=o.reduce((a,l)=>(a[l.name]=l,a),{}),s={};return jr(t.signals).forEach(a=>{Or(i,a.name)?a=on(i[a.name],a):o.push(a),s[a.name]=a}),jr(r.signals).forEach(a=>{!Or(s,a.name)&&!Or(i,a.name)&&o.push(a)}),o}function att(t,r){this.config=t||{},this.options=r||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Fet(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function Gxe(t){return(Wr(t)?Vsr:Gsr)(t)}function Vsr(t){let r=t.length,n="[";for(let o=0;o<r;++o){let i=t[o];n+=(o>0?",":"")+(ln(i)?i.signal||Gxe(i):Pr(i))}return n+"]"}function Gsr(t){let r="{",n=0,o,i;for(o in t)i=t[o],r+=(++n>1?",":"")+Pr(o)+":"+(ln(i)?i.signal||Gxe(i):Pr(i));return r+"}"}function Wsr(){let t="sans-serif",o="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:o},area:{fill:o},image:null,line:{stroke:o,strokeWidth:2},path:{stroke:o},rect:{fill:o},rule:{stroke:i},shape:{stroke:o},symbol:{fill:o,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:o,size:2},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function ltt(t,r,n){return ln(t)||pt("Input Vega specification must be an object."),r=zI(Wsr(),r,t.config),zsr(t,new att(r,n)).toRuntime()}var J5,Knr,ol,Dxe,Nxe,Fxe,Qnr,Jnr,eor,tor,ror,nor,oor,ior,sor,aor,Oet,lor,uor,cor,dor,por,Met,vY,_or,Sor,Cxe,Eor,Tor,Oxe,Exe,get,Mor,Yo,Bet,Bor,$et,yh,yet,$or,zet,zor,Uor,Vor,Gor,Wor,qor,Hor,Yor,Xor,Kor,Zor,Uet,Qor,Jor,eir,Vet,tir,MT,rir,Get,nir,oir,Wet,bh,pF,mF,W_,Xet,bir,xir,vir,wir,Axe,Rxe,_ir,fF,Sir,_p,iB,jxe,Cir,Eir,bet,CY,kxe,Ixe,Tir,Air,kir,Iir,Dir,Nir,Pxe,sB,zn,Sp,NY,Ket,Lxe,Fir,RT,Bxe,Pir,Lir,$xe,zxe,OY,zir,Uir,Vir,Gir,Wir,qir,Hir,tsr,rsr,nsr,Cet,wxe,Eet,msr,ntt,RY,il,gh,ott,_sr,Ssr,Csr,Esr,Tsr,Asr,itt,Iet,Vxe,ksr,uF,Isr,cF,$sr,utt=D(()=>{"use strict";Ts();sY();det();iN();qa();J5=t=>+t||0,Knr=t=>({top:t,bottom:t,left:t,right:t});ol=t=>ln(t)&&!Wr(t)?on({},t):{value:t};Dxe="mark",Nxe="frame",Fxe="scope",Qnr="axis",Jnr="axis-domain",eor="axis-grid",tor="axis-label",ror="axis-tick",nor="axis-title",oor="legend",ior="legend-band",sor="legend-entry",aor="legend-gradient",Oet="legend-label",lor="legend-symbol",uor="legend-title",cor="title",dor="title-text",por="title-subtitle";Met=t=>Kn(t)?Pr(t):t.signal?`(${t.signal})`:Ret(t);vY=(t,r,n,o)=>`(${t}(${[r,n,o].map(AY).join(",")})+'')`;_or="outer",Sor=["value","update","init","react","bind"];Cxe=rB("key");Eor="ascending",Tor="descending";Oxe="scope",Exe="view";get="timer";Mor={code:"_.$value",ast:{type:"Identifier",value:"value"}};Yo=t=>(r,n,o)=>kY(t,n,r||void 0,o),Bet=Yo("aggregate"),Bor=Yo("axisticks"),$et=Yo("bound"),yh=Yo("collect"),yet=Yo("compare"),$or=Yo("datajoin"),zet=Yo("encode"),zor=Yo("expression"),Uor=Yo("facet"),Vor=Yo("field"),Gor=Yo("key"),Wor=Yo("legendentries"),qor=Yo("load"),Hor=Yo("mark"),Yor=Yo("multiextent"),Xor=Yo("multivalues"),Kor=Yo("overlap"),Zor=Yo("params"),Uet=Yo("prefacet"),Qor=Yo("projection"),Jor=Yo("proxy"),eir=Yo("relay"),Vet=Yo("render"),tir=Yo("scale"),MT=Yo("sieve"),rir=Yo("sortitems"),Get=Yo("viewlayout"),nir=Yo("values"),oir=0,Wet={min:"min",max:"max",count:"sum"};bh="top",pF="left",mF="right",W_="bottom",Xet="center",bir="vertical",xir="start",vir="middle",wir="end",Axe="index",Rxe="label",_ir="offset",fF="perc",Sir="perc2",_p="value",iB="guide-label",jxe="guide-title",Cir="group-title",Eir="group-subtitle",bet="symbol",CY="gradient",kxe="discrete",Ixe="size",Tir="shape",Air="fill",kir="stroke",Iir="strokeWidth",Dir="strokeDash",Nir="opacity",Pxe=[Ixe,Tir,Air,kir,Iir,Dir,Nir],sB={name:1,style:1,interactive:1},zn={value:0},Sp={value:1},NY="group",Ket="rect",Lxe="rule",Fir="symbol",RT="text";Bxe=FY(Pr(pF),Pr(mF),Pr(Xet));Pir=`datum.${fF}<=0?"${pF}":datum.${fF}>=1?"${mF}":"${Xet}"`,Lir=`datum.${fF}<=0?"${W_}":datum.${fF}>=1?"${bh}":"${vir}"`;$xe='item.orient === "left"',zxe='item.orient === "right"',OY=`(${$xe} || ${zxe})`,zir=`datum.vgrad && ${OY}`,Uir=FY('"top"','"bottom"','"middle"'),Vir=FY('"right"','"left"','"center"'),Gir=`datum.vgrad && ${zxe} ? (${Vir}) : (${OY} && !(datum.vgrad && ${$xe})) ? "left" : ${Bxe}`,Wir=`item._anchor || (${OY} ? "middle" : "start")`,qir=`${zir} ? (${$xe} ? -90 : 90) : 0`,Hir=`${OY} ? (datum.vgrad ? (${zxe} ? "bottom" : "top") : ${Uir}) : "top"`;tsr=t=>t&&t.expr,rsr=t=>t&&t.field,nsr=t=>t==="data",Cet=t=>t==="expr",wxe=t=>t==="field",Eet=t=>t==="compare";OT.fromEntries=function(t,r){let n=r.length,o=r[n-1],i=r[n-2],s=r[0],a=null,l=1;for(s&&s.type==="load"&&(s=r[1]),t.add(r[0]);l<n;++l)r[l].params.pulse=Ar(r[l-1]),t.add(r[l]),r[l].type==="aggregate"&&(a=r[l]);return new OT(t,s,i,o,a)};OT.prototype={countsRef(t,r,n){let o=this,i=o.counts||(o.counts={}),s=ttt(r),a,l,u;return s!=null&&(t=o.scope,a=i[s]),a?n&&n.field&&Tet(t,a.agg.params,n):(u={groupby:t.fieldRef(r,"key"),pulse:Ar(o.output)},n&&n.field&&Tet(t,u,n),l=t.add(Bet(u)),a=t.add(yh({pulse:Ar(l)})),a={agg:l,ref:Ar(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Ar(this.values)},extentRef(t,r){return eB(t,this,"extent","extent",r,!1)},domainRef(t,r){return eB(t,this,"domain","values",r,!1)},valuesRef(t,r,n){return eB(t,this,"vals","values",r,n||!0)},lookupRef(t,r){return eB(t,this,"lookup","tupleindex",r,!1)},indataRef(t,r){return eB(t,this,"indata","tupleindex",r,!0,!0)}};msr=`item.orient==="${pF}"?-90:item.orient==="${mF}"?90:0`;ntt=t=>t===W_||t===bh,RY=(t,r,n)=>Ta(t)?Esr(t.signal,r,n):t===pF||t===bh?r:n,il=(t,r,n)=>Ta(t)?Ssr(t.signal,r,n):ntt(t)?r:n,gh=(t,r,n)=>Ta(t)?Csr(t.signal,r,n):ntt(t)?n:r,ott=(t,r,n)=>Ta(t)?Tsr(t.signal,r,n):t===bh?{value:r}:{value:n},_sr=(t,r,n)=>Ta(t)?Asr(t.signal,r,n):t===mF?{value:r}:{value:n},Ssr=(t,r,n)=>itt(`${t} === '${bh}' || ${t} === '${W_}'`,r,n),Csr=(t,r,n)=>itt(`${t} !== '${bh}' && ${t} !== '${W_}'`,r,n),Esr=(t,r,n)=>Vxe(`${t} === '${pF}' || ${t} === '${bh}'`,r,n),Tsr=(t,r,n)=>Vxe(`${t} === '${bh}'`,r,n),Asr=(t,r,n)=>Vxe(`${t} === '${mF}'`,r,n),itt=(t,r,n)=>(r=r!=null?ol(r):r,n=n!=null?ol(n):n,Iet(r)&&Iet(n)?(r=r?r.signal||Pr(r.value):null,n=n?n.signal||Pr(n.value):null,{signal:`${t} ? (${r}) : (${n})`}):[on({test:t},r)].concat(n||[])),Iet=t=>t==null||Object.keys(t).length===1,Vxe=(t,r,n)=>({signal:`${t} ? (${uF(r)}) : (${uF(n)})`}),ksr=(t,r,n,o,i)=>({signal:(o!=null?`${t} === '${pF}' ? (${uF(o)}) : `:"")+(n!=null?`${t} === '${W_}' ? (${uF(n)}) : `:"")+(i!=null?`${t} === '${mF}' ? (${uF(i)}) : `:"")+(r!=null?`${t} === '${bh}' ? (${uF(r)}) : `:"")+"(null)"}),uF=t=>Ta(t)?t.signal:t==null?null:Pr(t),Isr=(t,r)=>r===0?0:Ta(t)?{signal:`(${t.signal}) * ${r}`}:{value:t*r},cF=(t,r)=>{let n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+r.signal}:t};$sr=t=>dF({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);att.prototype=Fet.prototype={parse(t){return stt(t,this)},fork(){return new Fet(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(r=>{r.$ref=t.id}),t.refs=null),t},proxy(t){let r=t instanceof Sxe?Ar(t):t;return this.add(Jor({value:r}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,r;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(o,i,s){let a,l;o&&(a=o.data||(o.data={}),l=a[i]||(a[i]=[]),l.push(s))}for(t in this.data){r=this.data[t],n(r.input,t,"input"),n(r.output,t,"output"),n(r.values,t,"values");for(let o in r.index)n(r.index[o],t,"index:"+o)}return this},pushState(t,r,n){this._encode.push(Ar(this.add(MT({pulse:t})))),this._parent.push(r),this._lookup.push(n?Ar(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Pn(this._parent)},encode(){return Pn(this._encode)},lookup(){return Pn(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,r){if(Kn(t))return rB(t,r);t.signal||pt("Unsupported field reference: "+Pr(t));let n=t.signal,o=this.field[n];if(!o){let i={name:this.signalRef(n)};r&&(i.as=r),this.field[n]=o=Ar(this.add(Vor(i)))}return o},compareRef(t){let r=!1,n=s=>Ta(s)?(r=!0,this.signalRef(s.signal)):kor(s)?(r=!0,this.exprRef(s.expr)):s,o=jr(t.field).map(n),i=jr(t.order).map(n);return r?Ar(this.add(yet({fields:o,orders:i}))):het(o,i)},keyRef(t,r){let n=!1,o=s=>Ta(s)?(n=!0,Ar(i[s.signal])):s,i=this.signals;return t=jr(t).map(o),n?Ar(this.add(Gor({fields:t,flat:r}))):Cor(t,r)},sortRef(t){if(!t)return t;let r=IY(t.op,t.field),n=t.order||Eor;return n.signal?Ar(this.add(yet({fields:r,orders:this.signalRef(n.signal)}))):het(r,n)},event(t,r){let n=t+":"+r;if(!this.events[n]){let o=this.id();this.streams.push({id:o,source:t,type:r}),this.events[n]=o}return this.events[n]},hasOwnSignal(t){return Or(this.signals,t)},addSignal(t,r){this.hasOwnSignal(t)&&pt("Duplicate signal name: "+Pr(t));let n=r instanceof Sxe?r:this.add(TY(r));return this.signals[t]=n},getSignal(t){return this.signals[t]||pt("Unrecognized signal name: "+Pr(t)),this.signals[t]},signalRef(t){return this.signals[t]?Ar(this.signals[t]):(Or(this.lambdas,t)||(this.lambdas[t]=this.add(TY(null))),Ar(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let r=0,n=t.length;r<n;++r){let o=t[r],i=ph(o,this),s=this.lambdas[o];s.params=i.$params,s.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!ln(t)?t:this.signalRef(t.signal||Gxe(t))},exprRef(t,r){let n={expr:ph(t,this)};return r&&(n.expr.$name=r),Ar(this.add(zor(n)))},addBinding(t,r){this.bindings||pt("Nested signals do not support binding: "+Pr(t)),this.bindings.push(on({signal:t},r))},addScaleProj(t,r){Or(this.scales,t)&&pt("Duplicate scale or projection name: "+Pr(t)),this.scales[t]=this.add(r)},addScale(t,r){this.addScaleProj(t,tir(r))},addProjection(t,r){this.addScaleProj(t,Qor(r))},getScale(t){return this.scales[t]||pt("Unrecognized scale name: "+Pr(t)),this.scales[t]},scaleRef(t){return Ar(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,r){return Or(this.data,t)&&pt("Duplicate data set name: "+Pr(t)),this.data[t]=r},getData(t){return this.data[t]||pt("Undefined data set name: "+Pr(t)),this.data[t]},addDataPipeline(t,r){return Or(this.data,t)&&pt("Duplicate data set name: "+Pr(t)),this.addData(t,OT.fromEntries(this,r))}}});function xh(t){this.type=t}function oar(t){switch(t.type){case Ksr:return t.elements;case Zsr:case ear:return[t.left,t.right];case Qsr:return[t.callee].concat(t.arguments);case Jsr:return[t.test,t.consequent,t.alternate];case tar:return[t.object,t.property];case rar:return t.properties;case Ysr:return[t.key,t.value];case nar:return[t.argument];case Xsr:case Hsr:case qsr:default:return[]}}function $Y(t,r){if(!t)throw new Error("ASSERT: "+r)}function bv(t){return t>=48&&t<=57}function Kxe(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function lB(t){return"01234567".indexOf(t)>=0}function Ear(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function cB(t){return t===10||t===13||t===8232||t===8233}function pB(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Sar.test(String.fromCharCode(t))}function PY(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Car.test(String.fromCharCode(t))}function xtt(){for(;ft<yu;){let t=mr.charCodeAt(ft);if(Ear(t)||cB(t))++ft;else break}}function Xxe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ft<yu&&Kxe(mr[ft])?(o=mr[ft++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):uo({},sl,jl);return String.fromCharCode(i)}function Aar(){var t,r,n,o;for(t=mr[ft],r=0,t==="}"&&uo({},sl,jl);ft<yu&&(t=mr[ft++],!!Kxe(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&uo({},sl,jl),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function vtt(){var t,r;for(t=mr.charCodeAt(ft++),r=String.fromCharCode(t),t===92&&(mr.charCodeAt(ft)!==117&&uo({},sl,jl),++ft,t=Xxe("u"),(!t||t==="\\"||!pB(t.charCodeAt(0)))&&uo({},sl,jl),r=t);ft<yu&&(t=mr.charCodeAt(ft),!!PY(t));)++ft,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),mr.charCodeAt(ft)!==117&&uo({},sl,jl),++ft,t=Xxe("u"),(!t||t==="\\"||!PY(t.charCodeAt(0)))&&uo({},sl,jl),r+=t);return r}function kar(){var t,r;for(t=ft++;ft<yu;){if(r=mr.charCodeAt(ft),r===92)return ft=t,vtt();if(PY(r))++ft;else break}return mr.slice(t,ft)}function Iar(){var t,r,n;return t=ft,r=mr.charCodeAt(ft)===92?vtt():kar(),r.length===1?n=jT:Tar.hasOwnProperty(r)?n=q_:r==="null"?n=BY:r==="true"||r==="false"?n=LY:n=jT,{type:n,value:r,start:t,end:ft}}function qxe(){var t=ft,r=mr.charCodeAt(ft),n,o=mr[ft],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ft,{type:sf,value:String.fromCharCode(r),start:t,end:ft};default:if(n=mr.charCodeAt(ft+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ft+=2,{type:sf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ft};case 33:case 61:return ft+=2,mr.charCodeAt(ft)===61&&++ft,{type:sf,value:mr.slice(t,ft),start:t,end:ft}}}if(a=mr.substr(ft,4),a===">>>=")return ft+=4,{type:sf,value:a,start:t,end:ft};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ft+=3,{type:sf,value:s,start:t,end:ft};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ft+=2,{type:sf,value:i,start:t,end:ft};if(i==="//"&&uo({},sl,jl),"<>=!+-*%&|^/".indexOf(o)>=0)return++ft,{type:sf,value:o,start:t,end:ft};uo({},sl,jl)}function Dar(t){let r="";for(;ft<yu&&Kxe(mr[ft]);)r+=mr[ft++];return r.length===0&&uo({},sl,jl),pB(mr.charCodeAt(ft))&&uo({},sl,jl),{type:LT,value:parseInt("0x"+r,16),start:t,end:ft}}function Nar(t){let r="0"+mr[ft++];for(;ft<yu&&lB(mr[ft]);)r+=mr[ft++];return(pB(mr.charCodeAt(ft))||bv(mr.charCodeAt(ft)))&&uo({},sl,jl),{type:LT,value:parseInt(r,8),octal:!0,start:t,end:ft}}function ctt(){var t,r,n;if(n=mr[ft],$Y(bv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ft,t="",n!=="."){if(t=mr[ft++],n=mr[ft],t==="0"){if(n==="x"||n==="X")return++ft,Dar(r);if(lB(n))return Nar(r);n&&bv(n.charCodeAt(0))&&uo({},sl,jl)}for(;bv(mr.charCodeAt(ft));)t+=mr[ft++];n=mr[ft]}if(n==="."){for(t+=mr[ft++];bv(mr.charCodeAt(ft));)t+=mr[ft++];n=mr[ft]}if(n==="e"||n==="E")if(t+=mr[ft++],n=mr[ft],(n==="+"||n==="-")&&(t+=mr[ft++]),bv(mr.charCodeAt(ft)))for(;bv(mr.charCodeAt(ft));)t+=mr[ft++];else uo({},sl,jl);return pB(mr.charCodeAt(ft))&&uo({},sl,jl),{type:LT,value:parseFloat(t),start:r,end:ft}}function Far(){var t="",r,n,o,i,s=!1;for(r=mr[ft],$Y(r==="'"||r==='"',"String literal must starts with a quote"),n=ft,++ft;ft<yu;)if(o=mr[ft++],o===r){r="";break}else if(o==="\\")if(o=mr[ft++],!o||!cB(o.charCodeAt(0)))switch(o){case"u":case"x":mr[ft]==="{"?(++ft,t+=Aar()):t+=Xxe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:lB(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ft<yu&&lB(mr[ft])&&(s=!0,i=i*8+"01234567".indexOf(mr[ft++]),"0123".indexOf(o)>=0&&ft<yu&&lB(mr[ft])&&(i=i*8+"01234567".indexOf(mr[ft++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&mr[ft]===`
`&&++ft;else{if(cB(o.charCodeAt(0)))break;t+=o}return r!==""&&uo({},sl,jl),{type:dB,value:t,octal:s,start:n,end:ft}}function Oar(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";uo({},Yxe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{uo({},Yxe)}try{return new RegExp(t,r)}catch{return null}}function Mar(){var t,r,n,o,i;for(t=mr[ft],$Y(t==="/","Regular expression literal must start with a slash"),r=mr[ft++],n=!1,o=!1;ft<yu;)if(t=mr[ft++],r+=t,t==="\\")t=mr[ft++],cB(t.charCodeAt(0))&&uo({},Wxe),r+=t;else if(cB(t.charCodeAt(0)))uo({},Wxe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||uo({},Wxe),i=r.substr(1,r.length-2),{value:i,literal:r}}function Rar(){var t,r,n;for(r="",n="";ft<yu&&(t=mr[ft],!!PY(t.charCodeAt(0)));)++ft,t==="\\"&&ft<yu?uo({},sl,jl):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&uo({},Yxe,n),{value:n,literal:r}}function jar(){var t,r,n,o;return Ro=null,xtt(),t=ft,r=Mar(),n=Rar(),o=Oar(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ft}}function Par(t){return t.type===jT||t.type===q_||t.type===LY||t.type===BY}function wtt(){if(xtt(),ft>=yu)return{type:fB,start:ft,end:ft};let t=mr.charCodeAt(ft);return pB(t)?Iar():t===40||t===41||t===59?qxe():t===39||t===34?Far():t===46?bv(mr.charCodeAt(ft+1))?ctt():qxe():bv(t)?ctt():qxe()}function af(){let t=Ro;return ft=t.end,Ro=wtt(),ft=t.end,t}function _tt(){let t=ft;Ro=wtt(),ft=t}function Lar(t){let r=new xh(sar);return r.elements=t,r}function ftt(t,r,n){let o=new xh(t==="||"||t==="&&"?far:aar);return o.operator=t,o.left=r,o.right=n,o}function Bar(t,r){let n=new xh(lar);return n.callee=t,n.arguments=r,n}function $ar(t,r,n){let o=new xh(uar);return o.test=t,o.consequent=r,o.alternate=n,o}function Zxe(t){let r=new xh(ytt);return r.name=t,r}function aB(t){let r=new xh(car);return r.value=t.value,r.raw=mr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function dtt(t,r,n){let o=new xh(dar);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function zar(t){let r=new xh(par);return r.properties=t,r}function ptt(t,r,n){let o=new xh(mar);return o.key=r,o.value=n,o.kind=t,o}function Uar(t,r){let n=new xh(har);return n.operator=t,n.argument=r,n.prefix=!0,n}function uo(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>($Y(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ft,n.description=i,n}function zY(t){t.type===fB&&uo(t,war),t.type===LT&&uo(t,gar),t.type===dB&&uo(t,yar),t.type===jT&&uo(t,bar),t.type===q_&&uo(t,xar),uo(t,sl,t.value)}function bu(t){let r=af();(r.type!==sf||r.value!==t)&&zY(r)}function Ni(t){return Ro.type===sf&&Ro.value===t}function Hxe(t){return Ro.type===q_&&Ro.value===t}function Var(){let t=[];for(ft=Ro.start,bu("[");!Ni("]");)Ni(",")?(af(),t.push(null)):(t.push(PT()),Ni("]")||bu(","));return af(),Lar(t)}function mtt(){ft=Ro.start;let t=af();return t.type===dB||t.type===LT?(t.octal&&uo(t,btt),aB(t)):Zxe(t.value)}function Gar(){var t,r,n,o;if(ft=Ro.start,t=Ro,t.type===jT)return n=mtt(),bu(":"),o=PT(),ptt("init",n,o);if(t.type===fB||t.type===sf)zY(t);else return r=mtt(),bu(":"),o=PT(),ptt("init",r,o)}function War(){var t=[],r,n,o,i={},s=String;for(ft=Ro.start,bu("{");!Ni("}");)r=Gar(),r.key.type===ytt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?uo({},_ar):i[o]=!0,t.push(r),Ni("}")||bu(",");return bu("}"),zar(t)}function qar(){bu("(");let t=Qxe();return bu(")"),t}function Yar(){var t,r,n;if(Ni("("))return qar();if(Ni("["))return Var();if(Ni("{"))return War();if(t=Ro.type,ft=Ro.start,t===jT||Har[Ro.value])n=Zxe(af().value);else if(t===dB||t===LT)Ro.octal&&uo(Ro,btt),n=aB(af());else{if(t===q_)throw new Error(uB);t===LY?(r=af(),r.value=r.value==="true",n=aB(r)):t===BY?(r=af(),r.value=null,n=aB(r)):Ni("/")||Ni("/=")?(n=aB(jar()),_tt()):zY(af())}return n}function Xar(){let t=[];if(bu("("),!Ni(")"))for(;ft<yu&&(t.push(PT()),!Ni(")"));)bu(",");return bu(")"),t}function Kar(){ft=Ro.start;let t=af();return Par(t)||zY(t),Zxe(t.value)}function Zar(){return bu("."),Kar()}function Qar(){bu("[");let t=Qxe();return bu("]"),t}function Jar(){var t,r,n;for(t=Yar();;)if(Ni("."))n=Zar(),t=dtt(".",t,n);else if(Ni("("))r=Xar(),t=Bar(t,r);else if(Ni("["))n=Qar(),t=dtt("[",t,n);else break;return t}function htt(){let t=Jar();if(Ro.type===sf&&(Ni("++")||Ni("--")))throw new Error(uB);return t}function jY(){var t,r;if(Ro.type!==sf&&Ro.type!==q_)r=htt();else{if(Ni("++")||Ni("--"))throw new Error(uB);if(Ni("+")||Ni("-")||Ni("~")||Ni("!"))t=af(),r=jY(),r=Uar(t.value,r);else{if(Hxe("delete")||Hxe("void")||Hxe("typeof"))throw new Error(uB);r=htt()}}return r}function gtt(t){let r=0;if(t.type!==sf&&t.type!==q_)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function elr(){var t,r,n,o,i,s,a,l,u,c;if(t=Ro,u=jY(),o=Ro,i=gtt(o),i===0)return u;for(o.prec=i,af(),r=[t,Ro],a=jY(),s=[u,o,a];(i=gtt(Ro))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=ftt(l,u,a),s.push(n);o=af(),o.prec=i,s.push(o),r.push(Ro),n=jY(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=ftt(s[c-1].value,s[c-2],n),c-=2;return n}function PT(){var t,r,n;return t=elr(),Ni("?")&&(af(),r=PT(),bu(":"),n=PT(),t=$ar(t,r,n)),t}function Qxe(){let t=PT();if(Ni(","))throw new Error(uB);return t}function Stt(t){mr=t,ft=0,yu=mr.length,Ro=null,_tt();let r=Qxe();if(Ro.type!==fB)throw new Error("Unexpect token after expression.");return r}function rlr(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&pt("Missing arguments to clamp function."),a.length>3&&pt("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&pt("Missing arguments to if function."),a.length>3&&pt("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function nlr(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function Ctt(t){t=t||{};let r=t.allowed?ru(t.allowed):{},n=t.forbidden?ru(t.forbidden):{},o=t.constants||tlr,i=(t.functions||rlr)(d),s=t.globalvar,a=t.fieldvar,l=Tn(s)?s:h=>"".concat(s,'["').concat(h,'"]'),u={},c={},f=0;function d(h){if(Kn(h))return h;let g=p[h.type];return g==null&&pt("Unsupported type: "+h.type),g(h)}let p={Literal:h=>h.raw,Identifier:h=>{let g=h.name;return f>0?g:Or(n,g)?pt("Illegal identifier: "+g):Or(o,g)?o[g]:Or(r,g)?g:(u[g]=1,l(g))},MemberExpression:h=>{let g=!h.computed,y=d(h.object);g&&(f+=1);let b=d(h.property);return y===a&&(c[nlr(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&pt("Illegal callee type: "+h.callee.type);let g=h.callee.name,y=h.arguments,b=Or(i,g)&&i[g];return b||pt("Unrecognized function: "+g),Tn(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(d).join(",")+"]",BinaryExpression:h=>"("+d(h.left)+" "+h.operator+" "+d(h.right)+")",UnaryExpression:h=>"("+h.operator+d(h.argument)+")",ConditionalExpression:h=>"("+d(h.test)+"?"+d(h.consequent)+":"+d(h.alternate)+")",LogicalExpression:h=>"("+d(h.left)+h.operator+d(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(d).join(",")+"}",Property:h=>{f+=1;let g=d(h.key);return f-=1,g+":"+d(h.value)}};function m(h){let g={code:d(h),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return m.functions=i,m.constants=o,m}var qsr,Hsr,Ysr,Xsr,Ksr,Zsr,Qsr,Jsr,ear,tar,rar,nar,_y,mr,ft,yu,Ro,LY,fB,jT,q_,BY,LT,sf,dB,iar,sar,aar,lar,uar,ytt,car,far,dar,par,mar,har,sl,gar,yar,bar,xar,war,Yxe,Wxe,btt,_ar,jl,uB,Sar,Car,Tar,Har,tlr,Ett=D(()=>{"use strict";Ts();qsr="RawCode",Hsr="Literal",Ysr="Property",Xsr="Identifier",Ksr="ArrayExpression",Zsr="BinaryExpression",Qsr="CallExpression",Jsr="ConditionalExpression",ear="LogicalExpression",tar="MemberExpression",rar="ObjectExpression",nar="UnaryExpression";xh.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=oar(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};LY=1,fB=2,jT=3,q_=4,BY=5,LT=6,sf=7,dB=8,iar=9;_y={};_y[LY]="Boolean";_y[fB]="<end>";_y[jT]="Identifier";_y[q_]="Keyword";_y[BY]="Null";_y[LT]="Numeric";_y[sf]="Punctuator";_y[dB]="String";_y[iar]="RegularExpression";sar="ArrayExpression",aar="BinaryExpression",lar="CallExpression",uar="ConditionalExpression",ytt="Identifier",car="Literal",far="LogicalExpression",dar="MemberExpression",par="ObjectExpression",mar="Property",har="UnaryExpression",sl="Unexpected token %0",gar="Unexpected number",yar="Unexpected string",bar="Unexpected identifier",xar="Unexpected reserved word",war="Unexpected end of input",Yxe="Invalid regular expression",Wxe="Invalid regular expression: missing /",btt="Octal literals are not allowed in strict mode.",_ar="Duplicate data property in object literal not allowed in strict mode",jl="ILLEGAL",uB="Disabled.",Sar=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Car=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");Tar={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};Har={if:1};tlr={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function lf(t,r,n){return Itt=r||olr,Dtt=n||ulr,Ntt(t.trim()).map(Jxe)}function clr(t){return Dtt[t]}function mB(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function Ntt(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=mB(t,i,ktt,UY+Ttt,VY+Att),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function Jxe(t){return t[0]==="["?flr(t):dlr(t)}function flr(t){let r=t.length,n=1,o;if(n=mB(t,n,VY,UY,VY),n===r)throw"Empty between selector: "+t;if(o=Ntt(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==alr)throw"Expected '>' after between selector: "+t;o=o.map(Jxe);let i=Jxe(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function dlr(t){let r={source:Itt},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===Att){if(l=t.lastIndexOf(Ttt),l>=0){try{o=plr(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===slr&&(i=++l),u=mB(t,l,ilr),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=mB(t,l,UY),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=mB(t,l,VY),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==UY)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||llr.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):clr(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function plr(t){let r=t.split(ktt);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var olr,UY,VY,Ttt,Att,ilr,ktt,slr,alr,llr,ulr,Itt,Dtt,H_=D(()=>{"use strict";olr="view",UY="[",VY="]",Ttt="{",Att="}",ilr=":",ktt=",",slr="@",alr=">",llr=/[[\]{}]/,ulr={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});var eve={};cn(eve,{Bounds:()=>du,CanvasHandler:()=>BN,CanvasRenderer:()=>$q,DATE:()=>tc,DAY:()=>Tl,DAYOFYEAR:()=>j0,Dataflow:()=>gw,Debug:()=>fLe,Error:()=>lLe,EventStream:()=>eD,Gradient:()=>_0e,GroupItem:()=>A0e,HOURS:()=>Bc,Handler:()=>E_,Info:()=>cLe,Item:()=>T0e,MILLISECONDS:()=>op,MINUTES:()=>$c,MONTH:()=>Al,Marks:()=>md,MultiPulse:()=>q7,None:()=>aLe,Operator:()=>Oo,Parameters:()=>dj,Pulse:()=>Ix,QUARTER:()=>ec,RenderType:()=>sv,Renderer:()=>uy,ResourceLoader:()=>k0e,SECONDS:()=>rd,SVGHandler:()=>G0e,SVGRenderer:()=>K0e,SVGStringRenderer:()=>Z0e,Scenegraph:()=>Xq,TIME_UNITS:()=>y9,Transform:()=>et,View:()=>bxe,WEEK:()=>Hs,Warn:()=>uLe,YEAR:()=>Ha,accessor:()=>Yf,accessorFields:()=>wa,accessorName:()=>Ai,array:()=>jr,ascending:()=>$3,bandwidthNRD:()=>t9,bin:()=>qae,bootstrapCI:()=>Hae,boundClip:()=>SKt,boundContext:()=>X4,boundItem:()=>g0e,boundMark:()=>bXe,boundStroke:()=>cT,changeset:()=>Nx,clampRange:()=>Njt,codegenExpression:()=>Ctt,compare:()=>Ase,constant:()=>Ga,cumulativeLogNormal:()=>a9,cumulativeNormal:()=>xj,cumulativeUniform:()=>f9,dayofyear:()=>Mle,debounce:()=>kse,defaultLocale:()=>Zge,definition:()=>H7,densityLogNormal:()=>s9,densityNormal:()=>r9,densityUniform:()=>c9,domChild:()=>Jc,domClear:()=>th,domCreate:()=>x_,domFind:()=>V0e,dotbin:()=>Yae,error:()=>pt,expressionFunction:()=>Is,extend:()=>on,extent:()=>Em,extentIndex:()=>Ise,falsy:()=>Sx,fastmap:()=>lw,field:()=>_m,flush:()=>Pjt,font:()=>Hq,fontFamily:()=>Q4,fontSize:()=>ly,format:()=>Sq,formatLocale:()=>j4,formats:()=>t0e,hasOwnProperty:()=>Or,id:()=>_jt,identity:()=>Xu,inferType:()=>EYe,inferTypes:()=>TYe,ingest:()=>An,inherits:()=>It,inrange:()=>Ljt,interpolate:()=>zL,interpolateColors:()=>oN,interpolateRange:()=>HG,intersect:()=>Q0e,intersectBoxLine:()=>ON,intersectPath:()=>I0e,intersectPoint:()=>D0e,intersectRule:()=>aXe,isArray:()=>Wr,isBoolean:()=>Dse,isDate:()=>z3,isFunction:()=>Tn,isIterable:()=>Nse,isNumber:()=>S0,isObject:()=>ln,isRegExp:()=>Bjt,isString:()=>Kn,isTuple:()=>qC,key:()=>Fse,lerp:()=>$jt,lineHeight:()=>S_,loader:()=>Cq,locale:()=>vq,logger:()=>Sjt,lruCache:()=>Ose,markup:()=>X0e,merge:()=>Mse,mergeConfig:()=>zI,multiLineOffset:()=>MXt,one:()=>w0,pad:()=>Ujt,panLinear:()=>Ejt,panLog:()=>Tjt,panPow:()=>Ajt,panSymlog:()=>kjt,parse:()=>ltt,parseExpression:()=>Stt,parseSelector:()=>lf,pathCurves:()=>S0e,pathEqual:()=>qXe,pathParse:()=>uT,pathRectangle:()=>rXe,pathRender:()=>MN,pathSymbols:()=>tXe,pathTrail:()=>nXe,peek:()=>Pn,point:()=>J4,projection:()=>d4,quantileLogNormal:()=>l9,quantileNormal:()=>vj,quantileUniform:()=>d9,quantiles:()=>J7,quantizeInterpolator:()=>YG,quarter:()=>Ijt,quartiles:()=>e9,random:()=>Zf,randomInteger:()=>f5t,randomKDE:()=>o9,randomLCG:()=>c5t,randomLogNormal:()=>Xae,randomMixture:()=>Kae,randomNormal:()=>n9,randomUniform:()=>Zae,read:()=>QHt,regressionExp:()=>Jae,regressionLinear:()=>m9,regressionLoess:()=>rle,regressionLog:()=>Qae,regressionPoly:()=>tle,regressionPow:()=>ele,regressionQuad:()=>h9,renderModule:()=>e5,repeat:()=>P3,resetDefaultLocale:()=>wYe,resetSVGClipId:()=>iXe,resetSVGDefIds:()=>TKt,responseType:()=>ZHt,runtimeContext:()=>fY,sampleCurve:()=>iD,sampleLogNormal:()=>i9,sampleNormal:()=>bj,sampleUniform:()=>u9,scale:()=>Bn,sceneEqual:()=>J0e,sceneFromJSON:()=>vXe,scenePickVisit:()=>Mq,sceneToJSON:()=>xXe,sceneVisit:()=>nh,sceneZOrder:()=>N0e,scheme:()=>UL,serializeXML:()=>RXe,setRandom:()=>l5t,span:()=>LC,splitAccessPath:()=>L3,stringValue:()=>Pr,textMetrics:()=>rh,timeBin:()=>Gle,timeFloor:()=>Lle,timeFormatLocale:()=>nT,timeInterval:()=>Fx,timeOffset:()=>$le,timeSequence:()=>Ule,timeUnitSpecifier:()=>Fle,timeUnits:()=>b9,toBoolean:()=>Rse,toDate:()=>jse,toNumber:()=>Cm,toSet:()=>ru,toString:()=>Pse,transform:()=>Mae,transforms:()=>Dx,truncate:()=>Gjt,truthy:()=>_0,tupleid:()=>br,typeParsers:()=>Qge,utcFloor:()=>Ble,utcInterval:()=>Ox,utcOffset:()=>zle,utcSequence:()=>Vle,utcdayofyear:()=>jle,utcquarter:()=>Djt,utcweek:()=>Ple,version:()=>Nlr,visitArray:()=>Wjt,week:()=>Rle,writeConfig:()=>B3,zero:()=>Sm,zoomLinear:()=>Cse,zoomLog:()=>Ese,zoomPow:()=>g7,zoomSymlog:()=>Tse});var mlr,hlr,glr,ylr,blr,xlr,vlr,wlr,_lr,Slr,Clr,Elr,Tlr,Alr,klr,Ilr,Dlr,Nlr,tve=D(()=>{"use strict";Ts();Ts();qa();qa();XBe();n9e();SVe();lWe();cqe();cHe();KXe();QXe();oKe();QZe();tQe();sD();cD();r0e();t5();iN();Yme();net();wq();sY();utt();fxe();Ett();H_();mlr="vega",hlr="5.20.0",glr="The Vega visualization grammar.",ylr=["vega","visualization","interaction","dataflow","library","data","d3"],blr="BSD-3-Clause",xlr="UW Interactive Data Lab (http://idl.cs.washington.edu)",vlr="build/vega-node.js",wlr="build/vega.module.js",_lr="build/vega.min.js",Slr="build/vega.min.js",Clr="index.d.ts",Elr="vega/vega",Tlr={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},Alr={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.20.0","vega-util":"~1.16.1","vega-view":"~5.10.0","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},klr={"vega-schema":"*"},Ilr="f262105e75449760b0f35fda70e6b576a31d68a4",Dlr={name:mlr,version:hlr,description:glr,keywords:ylr,license:blr,author:xlr,main:vlr,module:wlr,unpkg:_lr,jsdelivr:Slr,types:Clr,repository:Elr,scripts:Tlr,dependencies:Alr,devDependencies:klr,gitHead:Ilr};on(Dx,xue,Vde,Npe,ahe,Ehe,lye,rge,dye,bye,Ebe,kbe);Nlr=Dlr.version});var Ott,Ftt=D(()=>{Ott={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"4.13.1",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{changelog:"conventional-changelog -p angular -r 2",build:"yarn build:only","build:only":"yarn tsc:src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"find build ! -name 'vega-lite-schema.json' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",test:"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup 'yarn tsc:src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'yarn tsc:site -w' 'rollup -c site/rollup.config.js -w'","watch:test":"jest --watch"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2",ajv:"^6.12.2",chai:"^4.2.0",cheerio:"^1.0.0-rc.3",codecov:"^3.7.0",concurrently:"^5.2.0","conventional-changelog-cli":"^2.0.34",d3:"^5.16.0",eslint:"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3",jest:"^26.0.1","jest-puppeteer":"^4.4.0",mkdirp:"^1.0.4",prettier:"^2.0.5",puppeteer:"^3.1.0",rollup:"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7",terser:"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1",typescript:"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},dependencies:{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0",yargs:"~15.3.1"},peerDependencies:{vega:"^5.12.1"},jest:{preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],coverageDirectory:"./coverage/",collectCoverage:!1}}});function vh(t,r,n){return t.fields=r||[],t.fname=n,t}var hF=D(()=>{"use strict"});function rve(t){return t.length===1?Olr(t[0]):Mlr(t)}var Olr,Mlr,nve=D(()=>{"use strict";Olr=t=>function(r){return r[t]},Mlr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}}});function hB(t){throw Error(t)}var ove=D(()=>{"use strict"});function wh(t){var r=[],n=null,o=0,i=t.length,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<i;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===n)c(),n=null,o=-1;else{if(n)continue;a===o&&u==='"'||a===o&&u==="'"?(a=l+1,n=u):u==="."&&!o?l>a?c():a=l+1:u==="["?(l>a&&c(),o=a=l+1):u==="]"&&(o||hB("Access path missing open bracket: "+t),o>0&&c(),o=0,a=l+1)}return o&&hB("Access path missing closing bracket: "+t),n&&hB("Access path missing closing quote: "+t),l>a&&(l++,c()),r}var GY=D(()=>{"use strict";ove()});function WY(t,r,n){let o=wh(t);return t=o.length===1?o[0]:t,vh((n&&n.get||rve)(o),[t],r||t)}var qY=D(()=>{"use strict";hF();nve();GY()});var gB,Rlr,HY,jlr,Plr,Llr,Blr,ive=D(()=>{"use strict";hF();qY();gB=[],Rlr=WY("id"),HY=vh(function(t){return t},gB,"identity"),jlr=vh(function(){return 0},gB,"zero"),Plr=vh(function(){return 1},gB,"one"),Llr=vh(function(){return!0},gB,"true"),Blr=vh(function(){return!1},gB,"false")});function YY(t,r,n){var o=[r].concat([].slice.call(n));console[t].apply(console,o)}function sve(t,r){var n=t||Mtt;return{level:function(o){return arguments.length?(n=+o,this):n},error:function(){return n>=Rtt&&YY(r||"error","ERROR",arguments),this},warn:function(){return n>=XY&&YY(r||"warn","WARN",arguments),this},info:function(){return n>=jtt&&YY(r||"log","INFO",arguments),this},debug:function(){return n>=Ptt&&YY(r||"log","DEBUG",arguments),this}}}var Mtt,Rtt,XY,jtt,Ptt,Ltt=D(()=>{"use strict";Mtt=0,Rtt=1,XY=2,jtt=3,Ptt=4});var Lt,yB=D(()=>{"use strict";Lt=Array.isArray});function xo(t){return t===Object(t)}var KY=D(()=>{"use strict"});function bB(...t){return t.reduce((r,n)=>{for(var o in n)if(o==="signals")r.signals=$lr(r.signals,n.signals);else{var i=o==="legend"?{layout:1}:o==="style"?!0:null;xB(r,o,n[o],i)}return r},{})}function xB(t,r,n,o){if(Btt(r)){var i,s;if(xo(n)&&!Lt(n)){s=xo(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?xB(s,i,n[i]):Btt(i)&&(s[i]=n[i])}else t[r]=n}}function $lr(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}var Btt,$tt=D(()=>{"use strict";yB();KY();Btt=t=>t!=="__proto__"});var gF=D(()=>{"use strict"});var ave=D(()=>{"use strict"});var ztt=D(()=>{"use strict";ive();gF();ave()});var Utt=D(()=>{"use strict"});function kn(t){return t!=null?Lt(t)?t:[t]:[]}var QY=D(()=>{"use strict";yB()});var Vtt=D(()=>{"use strict"});function vB(t){return typeof t=="function"}var JY=D(()=>{"use strict"});var Gtt=D(()=>{"use strict";hF();QY();qY();JY()});var Wtt=D(()=>{"use strict";JY()});var qtt=D(()=>{"use strict"});var Htt=D(()=>{"use strict"});var Ytt=D(()=>{"use strict"});var Xtt=D(()=>{"use strict"});function xd(t,r){return Vlr.call(t,r)}var Vlr,eX=D(()=>{"use strict";Vlr=Object.prototype.hasOwnProperty});var Ktt=D(()=>{"use strict";eX()});var Ztt=D(()=>{"use strict";gF()});var Qtt=D(()=>{"use strict"});var Jtt=D(()=>{"use strict"});function Sy(t){return typeof t=="boolean"}var ert=D(()=>{"use strict"});var lve=D(()=>{"use strict"});function vo(t){return typeof t=="number"}var uve=D(()=>{"use strict"});var trt=D(()=>{"use strict"});function fr(t){return typeof t=="string"}var cve=D(()=>{"use strict"});var rrt=D(()=>{"use strict";hF();QY();nve();GY()});var nrt=D(()=>{"use strict";gF()});var ort=D(()=>{"use strict";eX()});var irt=D(()=>{"use strict"});var fve=D(()=>{"use strict"});var srt=D(()=>{"use strict";fve()});var art=D(()=>{"use strict";gF()});function Zr(t){return Lt(t)?"["+t.map(Zr)+"]":xo(t)||fr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var lrt=D(()=>{"use strict";yB();KY();cve()});var urt=D(()=>{"use strict"});var crt=D(()=>{"use strict";lve();uve()});var frt=D(()=>{"use strict"});function _h(t){for(var r={},n=0,o=t.length;n<o;++n)r[t[n]]=!0;return r}var drt=D(()=>{"use strict"});var prt=D(()=>{"use strict"});var mrt=D(()=>{"use strict"});var nr=D(()=>{"use strict";hF();ive();Ltt();$tt();ztt();Utt();QY();Vtt();Gtt();Wtt();qtt();ove();Htt();Ytt();Xtt();Ktt();qY();Ztt();eX();Qtt();Jtt();yB();ert();lve();JY();uve();KY();trt();cve();rrt();nrt();ort();irt();srt();gF();fve();art();GY();lrt();urt();crt();ave();frt();drt();prt();mrt()});function jt(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}var wo=D(()=>{"use strict";});var hrt=D(()=>{"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var r=isNaN(arguments[0])?1:Number(arguments[0]);return r?Array.prototype.reduce.call(this,function(n,o){return Array.isArray(o)?n.push.apply(n,t.call(o,r-1)):n.push(o),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})});var grt=gt((lZn,tX)=>{"use strict";var qlr=function(){"use strict";function t(f,d){return d!=null&&f instanceof d}var r;try{r=Map}catch{r=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function i(f,d,p,m,h){typeof d=="object"&&(p=d.depth,m=d.prototype,h=d.includeNonEnumerable,d=d.circular);var g=[],y=[],b=typeof Buffer<"u";typeof d>"u"&&(d=!0),typeof p>"u"&&(p=1/0);function x(v,w){if(v===null)return null;if(w===0)return v;var _,C;if(typeof v!="object")return v;if(t(v,r))_=new r;else if(t(v,n))_=new n;else if(t(v,o))_=new o(function(P,R){v.then(function(V){P(x(V,w-1))},function(V){R(x(V,w-1))})});else if(i.__isArray(v))_=[];else if(i.__isRegExp(v))_=new RegExp(v.source,c(v)),v.lastIndex&&(_.lastIndex=v.lastIndex);else if(i.__isDate(v))_=new Date(v.getTime());else{if(b&&Buffer.isBuffer(v))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(v.length):_=new Buffer(v.length),v.copy(_),_;t(v,Error)?_=Object.create(v):typeof m>"u"?(C=Object.getPrototypeOf(v),_=Object.create(C)):(_=Object.create(m),C=m)}if(d){var S=g.indexOf(v);if(S!=-1)return y[S];g.push(v),y.push(_)}t(v,r)&&v.forEach(function(P,R){var V=x(R,w-1),G=x(P,w-1);_.set(V,G)}),t(v,n)&&v.forEach(function(P){var R=x(P,w-1);_.add(R)});for(var E in v){var A;C&&(A=Object.getOwnPropertyDescriptor(C,E)),!(A&&A.set==null)&&(_[E]=x(v[E],w-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(v),E=0;E<N.length;E++){var k=N[E],M=Object.getOwnPropertyDescriptor(v,k);M&&!M.enumerable&&!h||(_[k]=x(v[k],w-1),M.enumerable||Object.defineProperty(_,k,{enumerable:!1}))}if(h)for(var I=Object.getOwnPropertyNames(v),E=0;E<I.length;E++){var L=I[E],M=Object.getOwnPropertyDescriptor(v,L);M&&M.enumerable||(_[L]=x(v[L],w-1),Object.defineProperty(_,L,{enumerable:!1}))}return _}return x(f,p)}i.clonePrototype=function(d){if(d===null)return null;var p=function(){};return p.prototype=d,new p};function s(f){return Object.prototype.toString.call(f)}i.__objToStr=s;function a(f){return typeof f=="object"&&s(f)==="[object Date]"}i.__isDate=a;function l(f){return typeof f=="object"&&s(f)==="[object Array]"}i.__isArray=l;function u(f){return typeof f=="object"&&s(f)==="[object RegExp]"}i.__isRegExp=u;function c(f){var d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),d}return i.__getRegExpFlags=c,i}();typeof tX=="object"&&tX.exports&&(tX.exports=qlr)});var brt=gt((uZn,yrt)=>{"use strict";yrt.exports=function t(r,n){if(r===n)return!0;if(r&&n&&typeof r=="object"&&typeof n=="object"){if(r.constructor!==n.constructor)return!1;var o,i,s;if(Array.isArray(r)){if(o=r.length,o!=n.length)return!1;for(i=o;i--!==0;)if(!t(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if(s=Object.keys(r),o=s.length,o!==Object.keys(n).length)return!1;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=o;i--!==0;){var a=s[i];if(!t(r[a],n[a]))return!1}return!0}return r!==r&&n!==n}});var dve=gt((cZn,xrt)=>{"use strict";xrt.exports=function(t,r){r||(r={}),typeof r=="function"&&(r={cmp:r});var n=typeof r.cycles=="boolean"?r.cycles:!1,o=r.cmp&&function(s){return function(a){return function(l,u){var c={key:l,value:a[l]},f={key:u,value:a[u]};return s(c,f)}}}(r.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=s(a[l])||"null";return u+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(a)-1,f=Object.keys(a).sort(o&&o(a));for(u="",l=0;l<f.length;l++){var d=f[l],p=s(a[d]);p&&(u&&(u+=","),u+=JSON.stringify(d)+":"+p)}return i.splice(c,1),"{"+u+"}"}}(t)}});function rX(t){return!!t.or}function nX(t){return!!t.and}function oX(t){return!!t.not}function wB(t,r){if(oX(t))wB(t.not,r);else if(nX(t))for(let n of t.and)wB(n,r);else if(rX(t))for(let n of t.or)wB(n,r);else r(t)}function _B(t,r){return oX(t)?{not:_B(t.not,r)}:nX(t)?{and:t.and.map(n=>_B(n,r))}:rX(t)?{or:t.or.map(n=>_B(n,r))}:r(t)}var iX=D(()=>{"use strict"});function Y_(t,r){let n={};for(let o of r)xd(t,o)&&(n[o]=t[o]);return n}function uf(t,r){let n=Object.assign({},t);for(let o of r)delete n[o];return n}function wr(t){if(vo(t))return t;let r=fr(t)?t:(0,sX.default)(t);if(r.length<250)return r;let n=0;for(let o=0;o<r.length;o++){let i=r.charCodeAt(o);n=(n<<5)-n+i,n=n&n}return n}function pve(t){return t===!1||t===null}function Gt(t,r){return t.indexOf(r)>-1}function X_(t,r){let n=0;for(let[o,i]of t.entries())if(r(i,o,n++))return!0;return!1}function mve(t,r){let n=0;for(let[o,i]of t.entries())if(!r(i,o,n++))return!1;return!0}function Srt(t,...r){for(let n of r)Hlr(t,n??{});return t}function Hlr(t,r){for(let n of nt(r))xB(t,n,r[n],!0)}function vd(t,r){let n=[],o={},i;for(let s of t)i=r(s),!(i in o)&&(o[i]=1,n.push(s));return n}function Crt(t,r){if(t.size!==r.size)return!1;for(let n of t)if(!r.has(n))return!1;return!0}function hve(t,r){for(let n of t)if(r.has(n))return!0;return!1}function vrt(t){let r=new Set;for(let n of t){let i=wh(n).map((a,l)=>l===0?a:`[${a}]`),s=i.map((a,l)=>i.slice(0,l+1).join(""));for(let a of s)r.add(a)}return r}function gve(t,r){return t===void 0||r===void 0?!0:hve(vrt(t),vrt(r))}function hn(t){return nt(t).length===0}function SB(t){let r=[];for(let n in t)xd(t,n)&&r.push({key:n,value:t[n]});return r}function CB(t){return t===!0||t===!1}function Sn(t){let r=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+r}function BT(t,r){return oX(t)?"!("+BT(t.not,r)+")":nX(t)?"("+t.and.map(n=>BT(n,r)).join(") && (")+")":rX(t)?"("+t.or.map(n=>BT(n,r)).join(") || (")+")":r(t)}function aX(t,r){if(r.length===0)return!0;let n=r.shift();return n in t&&aX(t[n],r)&&delete t[n],hn(t)}function $T(t){return t.charAt(0).toUpperCase()+t.substr(1)}function lX(t,r="datum"){let n=wh(t),o=[];for(let i=1;i<=n.length;i++){let s=`[${n.slice(0,i).map(Zr).join("][")}]`;o.push(`${r}${s}`)}return o.join(" && ")}function Ert(t,r="datum"){return`${r}[${Zr(wh(t).join("."))}]`}function Ylr(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function cf(t){return`${wh(t).map(Ylr).join("\\.")}`}function Cy(t,r,n){return t.replace(new RegExp(r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function uX(t){return`${wh(t).join(".")}`}function yF(t){return t?wh(t).length:0}function In(...t){for(let r of t)if(r!==void 0)return r}function yve(t){let r=++Xlr;return t?String(t)+r:r}function Trt(t){return Klr(t)?t:`__${t}`}function Klr(t){return t.indexOf("__")===0}function zT(t){if(t!==void 0)return(t%360+360)%360}function cX(t){return vo(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var wrt,_rt,sX,xv,or,ai,nt,Cp,Xlr,bt=D(()=>{"use strict";hrt();wrt=jf(grt()),_rt=jf(brt()),sX=jf(dve());nr();iX();xv=_rt.default,or=wrt.default;Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>(0,sX.default)(t)).join(",")})`};ai=sX.default;nt=Object.keys,Cp=Object.values;Xlr=42});function bF(t){return t&&t.condition}function vve(t){return!!krt[t]}var bve,dX,Art,xve,krt,gZn,EB=D(()=>{"use strict";bt();bve={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};dX=["domain","grid","labels","ticks","title"],Art={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},xve={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},krt=Object.assign(Object.assign({},xve),{style:1,labelExpr:1,encoding:1});gZn=nt(krt)});function ff(t){return Gt(["line","area","trail"],t)}function _ve(t){return Gt(["rect","bar","image","arc"],t)}function Pl(t){return t.type}function $rt(t){return Pl(t)?t.type:t}var mc,wve,UT,VT,Irt,GT,xF,Drt,vF,pX,TB,Nrt,AB,kB,mX,Sve,vZn,Zlr,Qlr,Frt,Jlr,Cve,Ort,Mrt,Rrt,jrt,Prt,Lrt,Brt,ea=D(()=>{"use strict";nr();bt();mc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},wve=mc.arc,UT=mc.area,VT=mc.bar,Irt=mc.image,GT=mc.line,xF=mc.point,Drt=mc.rect,vF=mc.rule,pX=mc.text,TB=mc.tick,Nrt=mc.trail,AB=mc.circle,kB=mc.square,mX=mc.geoshape;Sve=nt(mc);vZn=_h(Sve),Zlr=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Qlr=["fill","fillOpacity"],Frt=[...Zlr,...Qlr],Jlr={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},Cve=nt(Jlr),Ort={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},Mrt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},Rrt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},jrt=5,Prt={binSpacing:1,continuousBandSize:jrt,timeUnitBandPosition:.5},Lrt={binSpacing:0,continuousBandSize:jrt,timeUnitBandPosition:.5},Brt={thickness:1}});function Aa(t){return"mark"in t}var K_=D(()=>{"use strict"});var Ey,IB=D(()=>{"use strict";ea();K_();Ey=class{constructor(r,n){this.name=r,this.run=n}hasMatchingType(r){return Aa(r)?$rt(r.mark)===this.name:!1}}});function Ep(t){return!!t&&!!t.argmin}function Sh(t){return!!t&&!!t.argmax}function wF(t){return fr(t)&&!!zrt[t]}function hX(t){return fr(t)&&Gt(tur,t)}function Vrt(t){return fr(t)&&Gt(["min","max"],t)}var zrt,Urt,AZn,tur,Grt,rur,Wrt,vv=D(()=>{"use strict";nr();bt();zrt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Urt={count:1,min:1,max:1};AZn=nt(zrt);tur=["count","valid","missing","distinct"];Grt=["count","sum","distinct","valid","missing"],rur=["mean","average","median","q1","q3","min","max"],Wrt=_h(rur)});function Eve(t){return t in qrt}function Hrt(t){switch(t){case gc:return"y";case xu:return"y2";case yc:return"x";case Ll:return"x2"}}function Yrt(t){return t in Tve}function _v(t){return t===hs||t===vu||t===wu}function Qrt(t){return!!Zrt[t]}function xX(t){return!!yX[t]}function vX(t){return Td(t)!==t}function Td(t){switch(t){case mf:return Qn;case wd:return li;case xu:return gc;case Ll:return yc;case Eh:return hc;case Ch:return hf}return t}function Tp(t){if(Eve(t))switch(t){case hc:return"startAngle";case Eh:return"endAngle";case hf:return"outerRadius";case Ch:return"innerRadius"}return t}function ll(t){switch(t){case Qn:return mf;case li:return wd;case gc:return xu;case yc:return Ll;case hc:return Eh;case hf:return Ch}}function Bl(t){switch(t){case Qn:case mf:return"width";case li:case wd:return"height"}}function ent(t){switch(t){case Qn:return"xOffset";case li:return"yOffset";case mf:return"x2Offset";case wd:return"y2Offset";case hc:return"thetaOffset";case hf:return"radiusOffset";case Eh:return"theta2Offset";case Ch:return"radius2Offset"}}function ul(t){return t in Ty}function Z_(t){return t==="width"?Qn:li}function int(t){return!!wX[t]}function snt(t){switch(t){case hs:case vu:case wu:case gf:case es:case bc:case Cd:case Ed:return!0;case _d:case Sd:case Th:return!1}}function _u(t){return!!ant[t]}function lnt(t,r){return iur(t)[r]}function iur(t){switch(t){case hs:case vu:case wu:case TF:case HT:case SF:case wv:case CF:case qT:case bc:case _d:case Sd:case Cd:case _F:case df:case pf:return kve;case Qn:case li:case gc:case yc:return our;case mf:case wd:case xu:case Ll:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case gf:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ed:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case es:return{point:"always",geoshape:"always"};case WT:return{text:"always"};case Th:return{point:"always",square:"always",text:"always"};case EF:return{image:"always"};case hc:return{text:"always",arc:"always"};case hf:return{text:"always",arc:"always"};case Eh:case Ch:return{arc:"always"}}}function AF(t){switch(t){case Qn:case li:case hc:case hf:case gf:case Th:case Cd:case bc:case _d:case Sd:case mf:case wd:case Eh:case Ch:return;case _F:case df:case pf:case es:case Ed:case WT:case wv:case CF:case EF:case TF:return"discrete";case hs:case vu:case wu:return"flexible";case gc:case yc:case xu:case Ll:case HT:case SF:case qT:return}}var df,pf,_F,Qn,li,mf,wd,hf,Ch,hc,Eh,gc,yc,xu,Ll,hs,vu,wu,es,gf,Th,bc,_d,Sd,Cd,Ed,WT,qT,HT,SF,wv,CF,EF,TF,nur,qrt,Tve,Xrt,gX,Krt,al,yX,bX,NZn,FZn,OZn,Ave,MZn,RZn,jZn,Zrt,PZn,LZn,Jrt,BZn,$Zn,zZn,UZn,VZn,GZn,WZn,qZn,HZn,YZn,XZn,KZn,ZZn,wX,tnt,Ty,gs,_X,rnt,QZn,JZn,eQn,tQn,rQn,nQn,oQn,iQn,nnt,ont,ant,Q_,kve,sQn,our,Er=D(()=>{"use strict";wo();bt();df="row",pf="column",_F="facet",Qn="x",li="y",mf="x2",wd="y2",hf="radius",Ch="radius2",hc="theta",Eh="theta2",gc="latitude",yc="longitude",xu="latitude2",Ll="longitude2",hs="color",vu="fill",wu="stroke",es="shape",gf="size",Th="angle",bc="opacity",_d="fillOpacity",Sd="strokeOpacity",Cd="strokeWidth",Ed="strokeDash",WT="text",qT="order",HT="detail",SF="key",wv="tooltip",CF="href",EF="url",TF="description",nur={x:1,y:1,x2:1,y2:1},qrt={theta:1,theta2:1,radius:1,radius2:1};Tve={longitude:1,longitude2:1,latitude:1,latitude2:1};Xrt=nt(Tve),gX=Object.assign(Object.assign(Object.assign(Object.assign({},nur),qrt),Tve),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});Krt={row:1,column:1,facet:1},al=nt(Krt),yX=Object.assign(Object.assign({},gX),Krt),bX=nt(yX),{order:NZn,detail:FZn,tooltip:OZn}=yX,Ave=jt(yX,["order","detail","tooltip"]),{row:MZn,column:RZn,facet:jZn}=Ave,Zrt=jt(Ave,["row","column","facet"]),PZn=nt(Ave),LZn=nt(Zrt);Jrt=[mf,wd,xu,Ll,Eh,Ch];BZn=nt(gX),{x:$Zn,y:zZn,x2:UZn,y2:VZn,latitude:GZn,longitude:WZn,latitude2:qZn,longitude2:HZn,theta:YZn,theta2:XZn,radius:KZn,radius2:ZZn}=gX,wX=jt(gX,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),tnt=nt(wX),Ty={x:1,y:1},gs=nt(Ty);_X={theta:1,radius:1},rnt=nt(_X);({text:QZn,tooltip:JZn,href:eQn,url:tQn,description:rQn,detail:nQn,key:oQn,order:iQn}=wX),nnt=jt(wX,["text","tooltip","href","url","description","detail","key","order"]),ont=nt(nnt);ant=Object.assign(Object.assign(Object.assign({},Ty),_X),nnt),Q_=nt(ant);kve={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:sQn}=kve,our=jt(kve,["geoshape"])});function SX(t){return Sy(t)&&(t=IF(t,void 0)),"bin"+nt(t).map(r=>kF(t[r])?Sn(`_${r}_${Object.entries(t[r])}`):Sn(`_${r}_${t[r]}`)).join("")}function xn(t){return t===!0||J_(t)&&!t.binned}function qi(t){return t==="binned"||J_(t)&&t.binned===!0}function J_(t){return xo(t)}function kF(t){return t?.selection}function Ive(t){switch(t){case df:case pf:case gf:case hs:case vu:case wu:case Cd:case bc:case _d:case Sd:case es:return 6;case Ed:return 4;default:return 10}}var $l=D(()=>{"use strict";nr();Er();kr();bt()});var it={};cn(it,{CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>Hur,CONCAT_CANNOT_SHARE_AXIS:()=>_ur,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>ccr,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>fcr,FACETED_INDEPENDENT_SAME_SOURCE:()=>dcr,FIT_NON_SINGLE:()=>lur,INVALID_CHANNEL_FOR_AXIS:()=>pcr,LEGEND_BINDINGS_PROJECT_LENGTH:()=>bur,LINE_WITH_VARYING_SIZE:()=>Bur,MORE_THAN_ONE_SORT:()=>ucr,NO_FIELDS_NEEDS_AS:()=>Tur,RANGE_STEP_DEPRECATED:()=>Yur,REPLACE_ANGLE_WITH_THETA:()=>Dur,SCALE_BINDINGS_CONTINUOUS:()=>yur,cannotApplySizeToNonOrientedMark:()=>Jur,cannotProjectAggregate:()=>pur,cannotProjectOnChannelWithoutField:()=>dur,cannotStackNonLinearScale:()=>hcr,cannotStackRangedMark:()=>mcr,cannotUseScalePropertyWithNonColor:()=>Xur,channelRequiredForBinned:()=>Ccr,columnsNotSupportByRowCol:()=>wur,containerSizeNonSingle:()=>uur,containerSizeNotCompatibleWithAutosize:()=>cur,customFormatTypeNotAllowed:()=>Aur,differentParse:()=>Cur,discreteChannelCannotEncode:()=>Gur,domainRequiredForThresholdScale:()=>Ecr,domainSortDropped:()=>lcr,droppedDay:()=>bcr,droppingColor:()=>jur,droppingFit:()=>fur,emptyFieldDef:()=>Pur,encodingOverridden:()=>kur,errorBand1DNotSupport:()=>Scr,errorBarCenterAndExtentAreNotNeeded:()=>xcr,errorBarCenterIsNotNeeded:()=>_cr,errorBarCenterIsUsedWithWrongExtent:()=>vcr,errorBarContinuousAxisHasCustomizedAggregate:()=>wcr,facetChannelDropped:()=>Vur,facetChannelShouldBeDiscrete:()=>Uur,incompatibleChannel:()=>$ur,independentScaleMeansIndependentGuide:()=>acr,invalidAggregate:()=>Mur,invalidEncodingChannel:()=>zur,invalidFieldType:()=>Fur,invalidFieldTypeForCountAggregate:()=>Our,invalidSpec:()=>aur,invalidTimeUnit:()=>ycr,invalidTransformIgnored:()=>Eur,latLongDeprecated:()=>Lur,lineWithRange:()=>Wur,mergeConflictingDomainProperty:()=>scr,mergeConflictingProperty:()=>icr,missingFieldType:()=>Rur,nearestNotSupportForContinuous:()=>mur,noSameUnitLookup:()=>xur,noSuchRepeatedValue:()=>vur,orientOverridden:()=>qur,primitiveChannelDef:()=>Nur,projectionOverridden:()=>Iur,scalePropertyNotWorkWithScaleType:()=>rcr,scaleTypeNotWorkWithChannel:()=>ecr,scaleTypeNotWorkWithFieldDef:()=>tcr,scaleTypeNotWorkWithMark:()=>ncr,selectionNotFound:()=>gur,selectionNotSupported:()=>hur,stackNonSummativeAggregate:()=>gcr,stepDropped:()=>ocr,unaggregateDomainHasNoEffectForRawField:()=>Kur,unaggregateDomainWithNonSharedDomainOp:()=>Zur,unaggregatedDomainWithLogScale:()=>Qur,unrecognizedParse:()=>Sur});function aur(t){return`Invalid specification ${JSON.stringify(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function uur(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function cur(t){let r=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${r} "container" only works well with autosize "fit" or "fit-${n}".`}function fur(t){return t?`Dropping "fit-${t}" because spec has discrete ${Bl(t)}.`:'Dropping "fit" because spec has discrete size.'}function dur(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function pur(t,r){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${r}").`}function mur(t){return`The "nearest" transform is not supported for ${t} marks.`}function hur(t){return`Selection not supported for ${t} yet.`}function gur(t){return`Cannot find a selection named "${t}".`}function xur(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}function vur(t){return`Unknown repeated value "${t}".`}function wur(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}function Sur(t){return`Unrecognized parse "${t}".`}function Cur(t,r,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${r}.`}function Eur(t){return`Ignoring an invalid transform: ${ai(t)}.`}function Aur(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function kur(t){return`Layer's shared ${t.join(",")} channel ${t.length===1?"is":"are"} overriden.`}function Iur(t){let{parentProjection:r,projection:n}=t;return`Layer's shared projection ${ai(r)} is overridden by a child projection ${ai(n)}.`}function Nur(t,r,n){return`Channel ${t} is a ${r}. Converted to {value: ${ai(n)}}.`}function Fur(t){return`Invalid field type "${t}".`}function Our(t,r){return`Invalid field type "${t}" for aggregate: "${r}", using "quantitative" instead.`}function Mur(t){return`Invalid aggregation operator "${t}".`}function Rur(t,r){return`Missing type for channel "${t}", using "${r}" instead.`}function jur(t,r){let{fill:n,stroke:o}=r;return`Dropping color ${t} as the plot also has ${n&&o?"fill and stroke":n?"fill":"stroke"}.`}function Pur(t,r){return`Dropping ${ai(t)} from channel "${r}" since it does not contain any data field, datum, value, or signal.`}function Lur(t,r,n){return`${t}-encoding with type ${r} is deprecated. Replacing with ${n}-encoding.`}function $ur(t,r,n){return`${t} dropped as it is incompatible with "${r}"${n?` when ${n}`:""}.`}function zur(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function Uur(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function Vur(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function Gur(t,r){return`Using discrete channel "${t}" to encode "${r}" field can be misleading as it does not encode ${r==="ordinal"?"order":"magnitude"}.`}function Wur(t,r){return`Line mark is for continuous lines and thus cannot be used with ${t&&r?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function qur(t,r){return`Specified orient "${t}" overridden with "${r}".`}function Xur(t){return`Cannot use the scale property "${t}" with non-color channel.`}function Kur(t){return`Using unaggregated domain with raw field has no effect (${ai(t)}).`}function Zur(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function Qur(t){return`Unaggregated domain is currently unsupported for log scale (${ai(t)}).`}function Jur(t){return`Cannot apply size to non-oriented mark "${t}".`}function ecr(t,r,n){return`Channel "${t}" does not work with "${r}" scale. We are using "${n}" scale instead.`}function tcr(t,r){return`FieldDef does not work with "${t}" scale. We are using "${r}" scale instead.`}function rcr(t,r,n){return`${n}-scale's "${r}" is dropped as it does not work with ${t} scale.`}function ncr(t,r){return`Scale type "${r}" does not work with mark "${t}".`}function ocr(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function icr(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${ai(n)} and ${ai(o)}). Using ${ai(n)}.`}function scr(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${ai(n)} and ${ai(o)}). Using the union of the two domains.`}function acr(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function lcr(t){return`Dropping sort property ${ai(t)} as unioned domains only support boolean or op "count", "min", and "max".`}function mcr(t){return`Cannot stack "${t}" if there is already "${t}2".`}function hcr(t){return`Cannot stack non-linear scale (${t}).`}function gcr(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function ycr(t,r){return`Invalid ${t}: ${ai(r)}.`}function bcr(t){return`Dropping day from datetime ${ai(t)} as day cannot be combined with other units.`}function xcr(t,r){return`${r?"extent ":""}${r&&t?"and ":""}${t?"center ":""}${r&&t?"are ":"is "}not needed when data are aggregated.`}function vcr(t,r,n){return`${t} is not usually used with ${r} for ${n}.`}function wcr(t,r){return`Continuous axis should not have customized aggregation function ${t}; ${r} already agregates the axis.`}function _cr(t,r){return`Center is not needed to be specified in ${r} when extent is ${t}.`}function Scr(t){return`1D error band does not support ${t}.`}function Ccr(t){return`Channel ${t} is required for "binned" bin.`}function Ecr(t){return`Domain for ${t} is required for threshold scale.`}var lur,yur,bur,_ur,Tur,Dur,Bur,Hur,Yur,ucr,ccr,fcr,dcr,pcr,unt=D(()=>{"use strict";Er();bt();lur='Autosize "fit" only works for single views and layered views.';yur="Scale bindings are currently only supported for scales with unbinned, continuous domains.",bur="Legend bindings are only supported for selections over an individual field or encoding channel.";_ur="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";Tur='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';Dur="Arc marks uses theta channel rather than angle, replacing angle with theta.";Bur="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";Hur="Custom domain scale cannot be unioned with default field-based domain.",Yur=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;ucr="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",ccr="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",fcr="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",dcr="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",pcr="Invalid channel for axis."});function fnt(t){return DF=t,DF}function dnt(){return DF=cnt,DF}function st(...t){DF.warn(...t)}function pnt(...t){DF.debug(...t)}var cnt,DF,un=D(()=>{"use strict";nr();unt();cnt=sve(XY),DF=cnt});function Ay(t){if(t&&xo(t)){for(let r of CX)if(r in t)return!0}return!1}function kcr(t){if(cX(t)&&(t=+t),vo(t))return t>4&&st(it.invalidTimeUnit("quarter",t)),t-1;throw new Error(it.invalidTimeUnit("quarter",t))}function Icr(t){if(cX(t)&&(t=+t),vo(t))return t-1;{let r=t.toLowerCase(),n=mnt.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=Tcr.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("month",t))}}function Dcr(t){if(cX(t)&&(t=+t),vo(t))return t%7;{let r=t.toLowerCase(),n=hnt.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=Acr.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("day",t))}}function Dve(t,r){let n=[];if(r&&t.day!==void 0&&nt(t).length>1&&(st(it.droppedDay(t)),t=or(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){let o=r?Icr(t.month):t.month;n.push(o)}else if(t.quarter!==void 0){let o=r?kcr(t.quarter):t.quarter;n.push(vo(o)?o*3:o+"*3")}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){let o=r?Dcr(t.day):t.day;n.push(vo(o)?o+1:o+"+1")}else n.push(1);for(let o of["hours","minutes","seconds","milliseconds"]){let i=t[o];n.push(typeof i>"u"?0:i)}return n}function e2(t){let n=Dve(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function gnt(t){let n=Dve(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function ynt(t){let r=Dve(t,!0);return t.utc?+new Date(Date.UTC(...r)):+new Date(...r)}var mnt,Tcr,hnt,Acr,NF=D(()=>{"use strict";nr();un();ky();bt();mnt=["january","february","march","april","may","june","july","august","september","october","november","december"],Tcr=mnt.map(t=>t.substr(0,3)),hnt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Acr=hnt.map(t=>t.substr(0,3))});function xnt(t){return!!bnt[t]}function Fve(t){return t.startsWith("utc")}function Ncr(t){return t.substr(3)}function DB(t){let r=[];for(let n of CX)vnt(t,n)&&r.push(n);return r}function vnt(t,r){let n=t.indexOf(r);return!(n<0||n>0&&r==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&r==="day"&&t.charAt(n+3)==="o"||n>0&&r==="year"&&t.charAt(n-1)==="f")}function wnt(t,r,{end:n}={end:!1}){let o=lX(r),i=Fve(t)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${o})-1)`:`${i}${u}(${o})`}let a,l={};for(let u of CX)vnt(t,u)&&(l[u]=s(u),a=u);return n&&(l[a]+="+1"),gnt(l)}function Ove(t){if(!t)return;let r=DB(t);return`timeUnitSpecifier(${(0,Nve.default)(r)}, ${(0,Nve.default)(Fcr)})`}function _nt(t,r,n){if(!t)return;let o=Ove(t);return`${n||Fve(t)?"utc":"time"}Format(${r}, ${o})`}function ts(t){if(!t)return;let r;return fr(t)?r={unit:t}:xo(t)&&(r=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),Fve(r.unit)&&(r.utc=!0,r.unit=Ncr(r.unit)),r}function Snt(t){let r=ts(t),{utc:n}=r,o=jt(r,["utc"]);return o.unit?(n?"utc":"")+nt(o).map(i=>Sn(`${i==="unit"?"":`_${i}_`}${o[i]}`)).join(""):(n?"utc":"")+"timeunit"+nt(o).map(i=>Sn(`_${i}_${o[i]}`)).join("")}var Nve,bnt,CX,Fcr,ky=D(()=>{"use strict";wo();Nve=jf(dve());nr();NF();bt();bnt={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},CX=nt(bnt);Fcr={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "}});function er(t){return t&&!!t.signal}function Su(t){return!!t.step}function Cnt(t){return Lt(t)?!1:"fields"in t&&!("data"in t)}function Ent(t){return Lt(t)?!1:"fields"in t&&"data"in t}function Sv(t){return Lt(t)?!1:"field"in t&&"data"in t}var Ocr,Tnt,Ant,EX,co=D(()=>{"use strict";nr();bt();Ocr={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},Tnt=nt(Ocr),Ant={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},EX=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"]});function knt(t){return t?.selection}function TX(t){return t&&!!t.field&&t.equal!==void 0}function Int(t){return t&&!!t.field&&t.lt!==void 0}function Dnt(t){return t&&!!t.field&&t.lte!==void 0}function Nnt(t){return t&&!!t.field&&t.gt!==void 0}function Fnt(t){return t&&!!t.field&&t.gte!==void 0}function AX(t){if(t&&t.field){if(Lt(t.range)&&t.range.length===2)return!0;if(er(t.range))return!0}return!1}function kX(t){return t&&!!t.field&&(Lt(t.oneOf)||Lt(t.in))}function Mcr(t){return t&&!!t.field&&t.valid!==void 0}function Mve(t){return kX(t)||TX(t)||AX(t)||Int(t)||Nnt(t)||Dnt(t)||Fnt(t)}function Iy(t,r){return FB(t,{timeUnit:r,wrapTime:!0})}function Rcr(t,r){return t.map(n=>Iy(n,r))}function IX(t,r=!0){var n;let{field:o}=t,i=(n=ts(t.timeUnit))===null||n===void 0?void 0:n.unit,s=i?"time("+wnt(i,o)+")":vt(t,{expr:"datum"});if(TX(t))return s+"==="+Iy(t.equal,i);if(Int(t)){let a=t.lt;return`${s}<${Iy(a,i)}`}else if(Nnt(t)){let a=t.gt;return`${s}>${Iy(a,i)}`}else if(Dnt(t)){let a=t.lte;return`${s}<=${Iy(a,i)}`}else if(Fnt(t)){let a=t.gte;return`${s}>=${Iy(a,i)}`}else{if(kX(t))return`indexof([${Rcr(t.oneOf,i).join(",")}], ${s}) !== -1`;if(Mcr(t))return NB(s,t.valid);if(AX(t)){let{range:a}=t,l=er(a)?{signal:`${a.signal}[0]`}:a[0],u=er(a)?{signal:`${a.signal}[1]`}:a[1];if(l!==null&&u!==null&&r)return"inrange("+s+", ["+Iy(l,i)+", "+Iy(u,i)+"])";let c=[];return l!==null&&c.push(`${s} >= ${Iy(l,i)}`),u!==null&&c.push(`${s} <= ${Iy(u,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(t)}`)}function NB(t,r=!0){return r?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function Ont(t){var r;return Mve(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(r=ts(t.timeUnit))===null||r===void 0?void 0:r.unit}):t}var YT=D(()=>{"use strict";nr();kr();ky();co()});function Rnt(t){if(t)switch(t=t.toLowerCase(),t){case"q":case Ap:return"quantitative";case"t":case Dy:return"temporal";case"o":case OB:return"ordinal";case"n":case MB:return"nominal";case Ah:return"geojson"}}var FF,Ap,OB,Dy,MB,Ah,Mnt,Ad=D(()=>{"use strict";bt();FF={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},Ap=FF.quantitative,OB=FF.ordinal,Dy=FF.temporal,MB=FF.nominal,Ah=FF.geojson,Mnt=nt(FF)});function jnt(t,r){let n=Rve[t],o=Rve[r];return n===o||n==="ordinal-position"&&o==="time"||o==="ordinal-position"&&n==="time"}function jve(t){return Pcr[t]}function Lnt(t){return t in $cr}function Hi(t){return t in qcr}function ta(t){return t in Gcr}function yf(t){return t in Lcr}function OF(t){return t in Ucr}function $nt(t){return!fr(t)&&!!t.name}function Pve(t){return t?.selection}function znt(t){return t&&t.unionWith}function DX(t,r){switch(r){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!Gt(["point","band","identity"],t);case"bins":return!Gt(["point","band","identity","ordinal"],t);case"round":return yf(t)||t==="band"||t==="point";case"padding":return yf(t)||Gt(["point","band"],t);case"paddingOuter":case"align":return Gt(["point","band"],t);case"paddingInner":return t==="band";case"domainMid":case"clamp":return yf(t);case"nice":return yf(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return ta(t)&&!Gt(["log","time","utc","threshold","quantile"],t)}}function NX(t,r){switch(r){case"interpolate":case"scheme":case"domainMid":return _v(t)?void 0:it.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function Bve(t,r){return Gt([OB,MB],r)?t===void 0||Hi(t):r===Dy?Gt([Fi.TIME,Fi.UTC,void 0],t):r===Ap?Gt([Fi.LOG,Fi.POW,Fi.SQRT,Fi.SYMLOG,Fi.QUANTILE,Fi.QUANTIZE,Fi.THRESHOLD,Fi.LINEAR,void 0],t):!0}function $ve(t,r){if(!_u(t))return!1;switch(t){case Qn:case li:case hc:case hf:return yf(r)||Gt(["band","point"],r);case gf:case Cd:case bc:case _d:case Sd:case Th:return yf(r)||OF(r)||Gt(["band","point","ordinal"],r);case hs:case vu:case wu:return r!=="band";case Ed:return r==="ordinal"||OF(r);case es:return r==="ordinal"}}function Ycr(){var t;let r={};for(let n of bX)for(let o of Mnt)for(let i of jcr){let s=Xcr(n,o);$ve(n,i)&&Bve(i,o)&&(r[s]=(t=r[s])!==null&&t!==void 0?t:[],r[s].push(i))}return r}function Xcr(t,r){return t+"_"+r}var Fi,Rve,jcr,Pcr,Pnt,Lcr,Bcr,$cr,zcr,Ucr,Vcr,Gcr,Wcr,qcr,Bnt,Lve,BQn,$Qn,zQn,UQn,VQn,Hcr,Unt,GQn,xi=D(()=>{"use strict";wo();nr();Er();Er();un();Ad();bt();Fi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Rve={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},jcr=nt(Rve);Pcr={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};Pnt=["linear","log","pow","sqrt","symlog","time","utc"],Lcr=_h(Pnt),Bcr=["linear","log","pow","sqrt","symlog"],$cr=_h(Bcr);zcr=["quantile","quantize","threshold"],Ucr=_h(zcr),Vcr=Pnt.concat(["quantile","quantize","threshold","sequential","identity"]),Gcr=_h(Vcr),Wcr=["ordinal","bin-ordinal","point","band"],qcr=_h(Wcr);Bnt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};Lve={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},BQn=nt(Lve),{type:$Qn,domain:zQn,range:UQn,scheme:VQn}=Lve,Hcr=jt(Lve,["type","domain","range","scheme"]),Unt=nt(Hcr),GQn=Ycr()});function RF(t){let{channel:r,channelDef:n,markDef:o,scale:i,config:s}=t,a=Uve(t);return Et(n)&&!hX(n.aggregate)&&i&&yf(i.get("type"))&&i.get("zero")===!1?zve({fieldDef:n,channel:r,markDef:o,ref:a,config:s}):a}function zve({fieldDef:t,channel:r,markDef:n,ref:o,config:i}){return ff(n.type)||sn("invalid",n,i)===null?o:[Kcr(t,r),o]}function Kcr(t,r){let n=RB(t,!0),i=Td(r)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function RB(t,r=!0){return NB(fr(t)?t:vt(t,{expr:"datum"}),!r)}function Vnt(t){let{datum:r}=t;return Ay(r)?e2(r):`${JSON.stringify(r)}`}function Ny(t,r,n,o){let i={};if(r&&(i.scale=r),bf(t)){let{datum:s}=t;Ay(s)?i.signal=e2(s):er(s)?i.signal=s.signal:i.value=s}else i.field=vt(t,n);if(o){let{offset:s,band:a}=o;s&&(i.offset=s),a&&(i.band=a)}return i}function MF({scaleName:t,fieldOrDatumDef:r,fieldOrDatumDef2:n,offset:o,startSuffix:i,band:s=.5}){let a=0<s&&s<1?"datum":void 0,l=vt(r,{expr:a,suffix:i}),u=n!==void 0?vt(n,{expr:a}):vt(r,{suffix:"end",expr:a}),c={};if(s===0||s===1){c.scale=t;let f=s===0?l:u;c.field=f}else{let f=`${s} * ${l} + ${1-s} * ${u}`;c.signal=`scale("${t}", ${f})`}return o&&(c.offset=o),c}function Uve({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c,band:f}){var d;if(r){if(Nr(r)){if(ra(r)){f=f??r2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:l,config:i,isMidPoint:!0});let{bin:m,timeUnit:h,type:g}=r;if(xn(m)||f&&h&&g===Dy)return l&&l.impute?Ny(r,s,{binSuffix:"mid"},{offset:u}):f?MF({scaleName:s,fieldOrDatumDef:r,band:f,offset:u}):Ny(r,s,Fy(r,t)?{binSuffix:"range"}:{},{offset:u});if(qi(m)){if(Et(n))return MF({scaleName:s,fieldOrDatumDef:r,fieldOrDatumDef2:n,band:f,offset:u});{let y=t===Qn?mf:wd;st(it.channelRequiredForBinned(y))}}}let p=a?.get("type");return Ny(r,s,Hi(p)?{binSuffix:"range"}:{},{offset:u,band:p==="band"?(d=f??r.band)!==null&&d!==void 0?d:.5:void 0})}else if(Cu(r)){let p=r.value,m=u?{offset:u}:{};return Object.assign(Object.assign({},XT(t,p)),m)}}return vB(c)&&(c=c()),c&&Object.assign(Object.assign({},c),u?{offset:u}:{})}function XT(t,r){return Gt(["x","x2"],t)&&r==="width"?{field:{group:"width"}}:Gt(["y","y2"],t)&&r==="height"?{field:{group:"height"}}:fo(r)}var t2=D(()=>{"use strict";nr();vv();$l();Er();kr();NF();un();ea();YT();xi();Ad();bt();co();jo()});function My(t){return t&&t!=="number"&&t!=="time"}function Wnt(t,r,n){return`${t}(${r}${n?`, ${JSON.stringify(n)}`:""})`}function jF({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s}){var a,l;if(My(n))return jB({fieldOrDatumDef:t,format:r,formatType:n,expr:o,config:s});let u=qnt(t,o,i);if(BF(t)){let c=Jcr(u,Et(t)?(a=ts(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0,r,s.timeFormat,LF(t)&&((l=t.scale)===null||l===void 0?void 0:l.type)===Fi.UTC);return c?{signal:c}:void 0}if(r=Hnt(Oy(t),r,s),Et(t)&&xn(t.bin)){let c=vt(t,{expr:o,binSuffix:"end"});return{signal:PF(u,c,r,n,s)}}else return r||Oy(t)==="quantitative"?{signal:`${Ynt(u,r)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function qnt(t,r,n){return Et(t)?n?`${vt(t,{expr:r,suffix:"end"})}-${vt(t,{expr:r,suffix:"start"})}`:vt(t,{expr:r}):Vnt(t)}function jB({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s,field:a}){if(a=a??qnt(t,o,i),Et(t)&&xn(t.bin)){let l=vt(t,{expr:o,binSuffix:"end"});return{signal:PF(a,l,r,n,s)}}return{signal:Wnt(n,a,r)}}function OX(t,r,n,o,i,s){var a;if(!My(o)){if(BF(t)){let l=Et(t)?(a=ts(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return Qcr(n,l,i,s)}return Hnt(r,n,i)}}function MX(t,r,n){if(t&&(er(t)||t==="number"||t==="time"))return t;if(BF(r)&&n!=="time"&&n!=="utc")return"time"}function Hnt(t,r,n){if(fr(r))return r;if(t===Ap)return n.numberFormat}function Qcr(t,r,n,o){return t||(r?{signal:Ove(r)}:o?void 0:n.timeFormat)}function Ynt(t,r){return`format(${t}, "${r||""}")`}function Gnt(t,r,n,o){var i;return My(n)?Wnt(n,t,r):Ynt(t,(i=fr(r)?r:void 0)!==null&&i!==void 0?i:o.numberFormat)}function PF(t,r,n,o,i){let s=Gnt(t,n,o,i),a=Gnt(r,n,o,i);return`${NB(t,!1)} ? "null" : ${s} + "${Zcr}" + ${a}`}function Jcr(t,r,n,o,i){return!r||n?(n=fr(n)?n:o,`${i?"utc":"time"}Format(${t}, '${n}')`):_nt(r,t,i)}var Zcr,Ry=D(()=>{"use strict";nr();$l();kr();YT();xi();ky();Ad();co();t2();Zcr=" \u2013 "});function Vve(t){return t in efr}function RX(t){return!!t&&!!t.encoding}function cl(t){return!!t&&(t.op==="count"||!!t.field)}function jX(t){return!!t&&Lt(t)}var n2,efr,kh=D(()=>{"use strict";nr();n2="min",efr={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1}});function jy(t){return"row"in t||"column"in t}function PX(t){return!!t&&"header"in t}function Cv(t){return"facet"in t}var Ev=D(()=>{"use strict"});function Xnt(t){return t.selection}function Knt(t){return t&&!fr(t)&&"repeat"in t}function Gve(t){let{field:r,timeUnit:n,bin:o,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),o?{bin:o}:{}),i?{aggregate:i}:{}),{field:r})}function Wve(t){return ra(t)&&"sort"in t}function r2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:i,config:s,isMidPoint:a}){if(Nr(r)&&r.band!==void 0)return r.band;if(Et(r)){let{timeUnit:l,bin:u}=r;if(l&&!n)return a?Py("timeUnitBandPosition",o,s):_ve(o.type)?Py("timeUnitBand",o,s):0;if(xn(u))return _ve(o.type)&&!a?1:.5}if(i?.fieldChannel===t&&a)return .5}function $F(t,r,n,o,i,s){return xn(r.bin)||r.timeUnit&&ra(r)&&r.type==="temporal"?!!r2({channel:t,fieldDef:r,fieldDef2:n,stack:o,markDef:i,config:s}):!1}function zF(t){return!!t&&"condition"in t}function UF(t){let r=t&&t.condition;return!!r&&!Lt(r)&&Et(r)}function BX(t){let r=t&&t.condition;return!!r&&!Lt(r)&&Nr(r)}function Znt(t){let r=t&&t.condition;return!!r&&(Lt(r)||Cu(r))}function Et(t){return!!t&&(!!t.field||t.aggregate==="count")}function Oy(t){return t&&t.type}function bf(t){return!!t&&"datum"in t}function xf(t){return ra(t)&&eot(t)||$X(t)}function $X(t){return bf(t)&&vo(t.datum)}function Nr(t){return Et(t)||bf(t)}function ra(t){return!!t&&("field"in t&&"type"in t||t.aggregate==="count")}function Cu(t){return t&&"value"in t&&"value"in t}function LF(t){return!!t&&("scale"in t||"sort"in t)}function zX(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function Qnt(t){return!!t&&"legend"in t}function Jnt(t){return!!t&&("format"in t||"formatType"in t)}function tfr(t){return"op"in t}function vt(t,r={}){var n,o,i;let s=t.field,a=r.prefix,l=r.suffix,u="";if(rfr(t))s=Trt("count");else{let c;if(!r.nofn)if(tfr(t))c=t.op;else{let{bin:f,aggregate:d,timeUnit:p}=t;xn(f)?(c=SX(f),l=((n=r.binSuffix)!==null&&n!==void 0?n:"")+((o=r.suffix)!==null&&o!==void 0?o:"")):d?Sh(d)?(u=`["${s}"]`,s=`argmax_${d.argmax}`):Ep(d)?(u=`["${s}"]`,s=`argmin_${d.argmin}`):c=String(d):p&&(c=Snt(p),l=(!Gt(["range","mid"],r.binSuffix)&&r.binSuffix||"")+((i=r.suffix)!==null&&i!==void 0?i:""))}c&&(s=s?`${c}_${s}`:c)}return l&&(s=`${s}_${l}`),a&&(s=`${a}_${s}`),r.forAs?uX(s):r.expr?Ert(s,r.expr)+u:cf(s)+u}function qve(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Et(t)&&!!t.bin;case"temporal":return!1}throw new Error(it.invalidFieldType(t.type))}function eot(t){return!qve(t)}function rfr(t){return t.aggregate==="count"}function nfr(t,r){var n;let{field:o,bin:i,timeUnit:s,aggregate:a}=t;if(a==="count")return r.countTitle;if(xn(i))return`${o} (binned)`;if(s){let l=(n=ts(s))===null||n===void 0?void 0:n.unit;if(l)return`${o} (${DB(l).join("-")})`}else if(a)return Sh(a)?`${o} for max ${a.argmax}`:Ep(a)?`${o} for min ${a.argmin}`:`${$T(a)} of ${o}`;return o}function ofr(t){let{aggregate:r,bin:n,timeUnit:o,field:i}=t;if(Sh(r))return`${i} for argmax(${r.argmax})`;if(Ep(r))return`${i} for argmin(${r.argmin})`;let s=ts(o),a=r||s?.unit||s?.maxbins&&"timeunit"||xn(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}function Hve(t){rot=t}function not(){Hve(tot)}function kp(t,r,{allowDisabling:n,includeDefault:o=!0}){var i,s;let l=((i=UX(t))!==null&&i!==void 0?i:{}).title;if(!Et(t))return l;let u=t,c=o?Yve(u,r):void 0;return n?In(l,u.title,c):(s=l??u.title)!==null&&s!==void 0?s:c}function UX(t){if(zX(t)&&t.axis)return t.axis;if(Qnt(t)&&t.legend)return t.legend;if(PX(t)&&t.header)return t.header}function Yve(t,r){return rot(t,r)}function VF(t){var r;if(Jnt(t)){let{format:n,formatType:o}=t;return{format:n,formatType:o}}else{let n=(r=UX(t))!==null&&r!==void 0?r:{},{format:o,formatType:i}=n;return{format:o,formatType:i}}}function ifr(t,r){if(t.timeUnit)return"temporal";if(xn(t.bin))return"quantitative";switch(AF(r)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function zl(t){if(Et(t))return t;if(UF(t))return t.condition}function ko(t){if(Nr(t))return t;if(BX(t))return t.condition}function PB(t,r,n){if(fr(t)||vo(t)||Sy(t)){let o=fr(t)?"string":vo(t)?"number":"boolean";return st(it.primitiveChannelDef(r,o,t)),{value:t}}return Nr(t)?LX(t,r,n):BX(t)?Object.assign(Object.assign({},t),{condition:LX(t.condition,r,n)}):t}function LX(t,r,n){if(Jnt(t)){let{format:o,formatType:i}=t,s=jt(t,["format","formatType"]);if(My(i)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),LX(s,r,n)}else{let o=zX(t)?"axis":Qnt(t)?"legend":PX(t)?"header":null;if(o&&t[o]){let i=t[o],{format:s,formatType:a}=i,l=jt(i,["format","formatType"]);if(My(a)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),LX(Object.assign(Object.assign({},t),{[o]:l}),r,n)}}return Et(t)?Xve(t,r):sfr(t)}function sfr(t){let r=t.type;if(r)return t;let{datum:n}=t;return r=vo(n)?"quantitative":fr(n)?"nominal":Ay(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:r})}function Xve(t,r){let{aggregate:n,timeUnit:o,bin:i,field:s}=t,a=Object.assign({},t);if(n&&!wF(n)&&!Sh(n)&&!Ep(n)&&(st(it.invalidAggregate(n)),delete a.aggregate),o&&(a.timeUnit=ts(o)),s&&(a.field=`${s}`),xn(i)&&(a.bin=IF(i,r)),qi(i)&&!ul(r)&&st(`Channel ${r} should not be used with "binned" bin.`),ra(a)){let{type:l}=a,u=Rnt(l);l!==u&&(a.type=u),l!=="quantitative"&&hX(n)&&(st(it.invalidFieldTypeForCountAggregate(l,n)),a.type="quantitative")}else if(!vX(r)){let l=ifr(a,r);st(it.missingFieldType(r,l)),a.type=l}if(ra(a)){let{compatible:l,warning:u}=afr(a,r);l||st(u)}if(Wve(a)&&fr(a.sort)){let{sort:l}=a;if(Vve(l))return Object.assign(Object.assign({},a),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&Vve(u))return Object.assign(Object.assign({},a),{sort:{encoding:u,order:"descending"}})}if(PX(a)){let{header:l}=a,{orient:u}=l,c=jt(l,["orient"]);if(u)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}return a}function IF(t,r){return Sy(t)?{maxbins:Ive(r)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:Ive(r)}):t}function afr(t,r){let n=t.type;if(n==="geojson"&&r!=="shape")return{compatible:!1,warning:`Channel ${r} should not be used with a geojson data.`};switch(r){case df:case pf:case _F:return eot(t)?{compatible:!1,warning:it.facetChannelShouldBeDiscrete(r)}:KT;case Qn:case li:case hs:case vu:case wu:case WT:case HT:case SF:case wv:case CF:case EF:case Th:case hc:case hf:case TF:return KT;case yc:case Ll:case gc:case xu:return n!==Ap?{compatible:!1,warning:`Channel ${r} should be used with a quantitative field only, not ${t.type} field.`}:KT;case bc:case _d:case Sd:case Cd:case gf:case Eh:case Ch:case mf:case wd:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${r} should not be used with an unsorted discrete field.`}:KT;case Ed:return Gt(["ordinal","nominal"],t.type)?KT:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case es:return Gt(["ordinal","nominal","geojson"],t.type)?KT:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case qT:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:KT}}function BF(t){let{formatType:r}=VF(t);return r==="time"||!r&&lfr(t)}function lfr(t){return t&&(t.type==="temporal"||Et(t)&&!!t.timeUnit)}function FB(t,{timeUnit:r,type:n,wrapTime:o,undefinedIfExprNotRequired:i}){var s;let a=r&&((s=ts(r))===null||s===void 0?void 0:s.unit),l=a||n==="temporal",u;return er(t)?u=t.signal:Ay(t)?(l=!0,u=e2(t)):(fr(t)||vo(t))&&l&&(u=`datetime(${JSON.stringify(t)})`,xnt(a)&&(vo(t)&&t<1e4||fr(t)&&isNaN(Date.parse(t)))&&(u=e2({[a]:t}))),u?o&&l?`time(${u})`:u:i?void 0:JSON.stringify(t)}function VX(t,r){let{type:n}=t;return r.map(o=>{let i=FB(o,{timeUnit:Et(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:o})}function Fy(t,r){return xn(t.bin)?_u(r)&&Gt(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}var tot,rot,KT,kr=D(()=>{"use strict";wo();nr();vv();$l();Er();jo();Ry();NF();un();ea();kh();Ev();ky();Ad();bt();co();tot=(t,r)=>{switch(r.fieldTitle){case"plain":return t.field;case"functional":return ofr(t);default:return nfr(t,r)}},rot=tot;KT={compatible:!0}});function GX(t){let{anchor:r,frame:n,offset:o,orient:i,color:s,subtitleColor:a,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:f,subtitleLineHeight:d,subtitlePadding:p}=t,m=jt(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),h=Object.assign(Object.assign({},m),s?{fill:s}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},r?{anchor:r}:{}),n?{frame:n}:{}),o?{offset:o}:{}),i?{orient:i}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),f?{subtitleFontWeight:f}:{}),d?{subtitleLineHeight:d}:{}),p?{subtitlePadding:p}:{}),b=Y_(h,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:h,subtitleMarkConfig:b,nonMark:g,subtitle:y}}function Ih(t){return fr(t)||Lt(t)&&fr(t[0])}var LB=D(()=>{"use strict";wo();nr();bt()});function fo(t){return er(t)?t:t!==void 0?{value:t}:void 0}function Kve(t){return er(t)?t.signal:Zr(t.value)}function o2(t){return er(t)?t.signal:t==null?null:Zr(t)}function oot(t,r,n){for(let o of n){let i=Py(o,r.markDef,r.config);i!==void 0&&(t[o]=fo(i))}return t}function Zve(t){var r;return[].concat(t.type,(r=t.style)!==null&&r!==void 0?r:[])}function sn(t,r,n,o={}){let{vgChannel:i,ignoreVgConfig:s}=o;return i&&r[i]!==void 0?r[i]:r[t]!==void 0?r[t]:s&&(!i||i===t)?void 0:Py(t,r,n,o)}function Py(t,r,n,{vgChannel:o}={}){return In(o?BB(t,r,n.style):void 0,BB(t,r,n.style),o?n[r.type][o]:void 0,n[r.type][t],o?n.mark[o]:n.mark[t])}function BB(t,r,n){return Qve(t,Zve(r),n)}function Qve(t,r,n){r=kn(r);let o;for(let i of r){let s=n[i];s&&s[t]!==void 0&&(o=s[t])}return o}function WX(t,r){return kn(t).reduce((n,o)=>{var i;return n.field.push(vt(o,r)),n.order.push((i=o.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function Jve(t,r){let n=[...t];return r.forEach(o=>{for(let i of n)if(xv(i,o))return;n.push(o)}),n}function e1e(t,r){return xv(t,r)||!r?t:t?[...kn(t),...kn(r)].join(", "):r}function qX(t,r){let n=t.value,o=r.value;if(n==null||o===null)return{explicit:t.explicit,value:null};if((Ih(n)||er(n))&&(Ih(o)||er(o)))return{explicit:t.explicit,value:e1e(n,o)};if(Ih(n)||er(n))return{explicit:t.explicit,value:n};if(Ih(o)||er(o))return{explicit:t.explicit,value:o};if(!Ih(n)&&!er(n)&&!Ih(o)&&!er(o))return{explicit:t.explicit,value:Jve(n,o)};throw new Error("It should never reach here")}var jo=D(()=>{"use strict";nr();kr();LB();bt();co()});function Ly(t,r){let n=t&&t[r];return n?Lt(n)?X_(n,o=>!!o.field):Et(n)||UF(n):!1}function GF(t){return X_(bX,r=>{if(Ly(t,r)){let n=t[r];if(Lt(n))return X_(n,o=>!!o.aggregate);{let o=zl(n);return o&&!!o.aggregate}}return!1})}function WF(t,r){let n=[],o=[],i=[],s=[],a={};return $B(t,(l,u)=>{if(Et(l)){let{field:c,aggregate:f,bin:d,timeUnit:p}=l,m=jt(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let h=UX(l),g=h&&h.title,y=vt(l,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},g?[]:{title:kp(l,r,{allowDisabling:!0})}),m),{field:y});if(f){let x;if(Sh(f)?(x="argmax",y=vt({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${y}.${c}`):Ep(f)?(x="argmin",y=vt({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${y}.${c}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(x=f),x){let v={op:x,as:y};c&&(v.field=c),s.push(v)}}else if(n.push(y),ra(l)&&xn(d)){if(o.push({bin:d,field:c,as:y}),n.push(vt(l,{binSuffix:"end"})),Fy(l,u)&&n.push(vt(l,{binSuffix:"range"})),ul(u)){let x={field:y+"_end"};a[u+"2"]=x}b.bin="binned",vX(u)||(b.type=Ap)}else if(p){i.push({timeUnit:p,field:c,as:y});let x=ra(l)&&l.type!==Dy&&"time";x&&(u===WT||u===wv?b.formatType=x:int(u)?b.legend=Object.assign({formatType:x},b.legend):ul(u)&&(b.axis=Object.assign({formatType:x},b.axis)))}a[u]=b}else n.push(c),a[u]=t[u]}else a[u]=t[u]}),{bins:o,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function cfr(t,r,n){let o=lnt(r,n);if(o){if(o==="binned"){let i=t[r===mf?Qn:li];return!!(Et(i)&&Et(t[r])&&qi(i.bin))}}else return!1;return!0}function iot(t,r,n){let o=r.type;return nt(t).reduce((i,s)=>{if(!xX(s))return st(it.invalidEncodingChannel(s)),i;let a=t[s];if(s==="angle"&&o==="arc"&&!t.theta&&(st(it.REPLACE_ANGLE_WITH_THETA),s=hc),!cfr(t,s,o))return st(it.incompatibleChannel(s,o)),i;if(s===gf&&o==="line"){let l=zl(t[s]);if(l?.aggregate)return st(it.LINE_WITH_VARYING_SIZE),i}if(s===hs&&(r.filled?"fill"in t:"stroke"in t))return st(it.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if(s===HT||s===qT&&!Lt(a)&&!Cu(a)||s===wv&&Lt(a))a&&(i[s]=kn(a).reduce((l,u)=>(Et(u)?l.push(Xve(u,s)):st(it.emptyFieldDef(u,s)),l),[]));else{if(s===wv&&a===null)i[s]=null;else if(!Et(a)&&!bf(a)&&!Cu(a)&&!zF(a)&&!er(a))return st(it.emptyFieldDef(a,s)),i;i[s]=PB(a,s,n)}return i},{})}function sot(t){let r=[];for(let n of nt(t))if(Ly(t,n)){let o=t[n],i=kn(o);for(let s of i)Et(s)?r.push(s):UF(s)&&r.push(s.condition)}return r}function $B(t,r,n){if(t)for(let o of nt(t)){let i=t[o];if(Lt(i))for(let s of i)r.call(n,s,o);else r.call(n,i,o)}}function HX(t,r,n,o){return t?nt(t).reduce((i,s)=>{let a=t[s];return Lt(a)?a.reduce((l,u)=>r.call(o,l,u,s),i):r.call(o,i,a,s)},n):n}function YX(t,r){return nt(r).reduce((n,o)=>{switch(o){case Qn:case li:case CF:case TF:case EF:case mf:case wd:case hc:case Eh:case hf:case Ch:case gc:case yc:case xu:case Ll:case WT:case es:case Th:case wv:return n;case qT:if(t==="line"||t==="trail")return n;case HT:case SF:{let i=r[o];if(Lt(i)||Et(i))for(let s of kn(i))s.aggregate||n.push(vt(s,{}));return n}case gf:if(t==="trail")return n;case hs:case vu:case wu:case bc:case _d:case Sd:case Ed:case Cd:{let i=zl(r[o]);return i&&!i.aggregate&&n.push(vt(i,{})),n}}},[])}var xc=D(()=>{"use strict";wo();nr();vv();$l();Er();kr();un();Ad();bt();co()});function aot(t){let{tooltip:r}=t,n=jt(t,["tooltip"]);if(!r)return{filteredEncoding:t};let o,i;if(Lt(r)){for(let s of r)s.aggregate?(o||(o=[]),o.push(s)):(i||(i=[]),i.push(s));o&&(n.tooltip=o)}else r.aggregate?n.tooltip=r:i=r;return Lt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function zB(t,r,n,o=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...t.map(({fieldPrefix:s,titlePrefix:a})=>{let l=o?` of ${r.field}`:"";return{field:s+r.field,type:r.type,title:er(a)?{signal:a+`"${escape(l)}"`}:a+l}}),...sot(n)]}}function t1e(t){let{axis:r,title:n,field:o}=t;return r&&r.title!==void 0?void 0:In(n,o)}function qF(t,r,n,o,i){let{scale:s,axis:a}=n;return({partName:l,mark:u,positionPrefix:c,endPositionPrefix:f=void 0,aria:d,extraEncoding:p={}})=>{let m=t1e(n);return r1e(t,l,i,d,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[r]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},m!==void 0?{title:m}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},fr(f)?{[r+"2"]:{field:f+"_"+n.field}}:{}),o),p)})}}function r1e(t,r,n,o,i){let{clip:s,color:a,opacity:l}=t,u=t.type;return t[r]||t[r]===void 0&&n[r]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[r]),s?{clip:s}:{}),a?{color:a}:{}),l?{opacity:l}:{}),Pl(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${r}`}),Sy(t[r])?{}:t[r]),o===!1?{aria:o}:{})})]:[]}function KX(t,r,n){let{encoding:o}=t,i=r==="vertical"?"y":"x",s=o[i],a=o[i+"2"],l=o[i+"Error"],u=o[i+"Error2"];return{continuousAxisChannelDef:XX(s,n),continuousAxisChannelDef2:XX(a,n),continuousAxisChannelDefError:XX(l,n),continuousAxisChannelDefError2:XX(u,n),continuousAxis:i}}function XX(t,r){if(t&&t.aggregate){let{aggregate:n}=t,o=jt(t,["aggregate"]);return n!==r&&st(it.errorBarContinuousAxisHasCustomizedAggregate(n,r)),o}else return t}function ZX(t,r){let{mark:n,encoding:o}=t,{x:i,y:s}=o;if(xf(i)){if(xf(s)){let a=Et(i)&&i.aggregate,l=Et(s)&&s.aggregate;if(!a&&l===r)return"vertical";if(!l&&a===r)return"horizontal";if(a===r&&l===r)throw new Error("Both x and y cannot have aggregate");return Pl(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(xf(s))return"vertical";throw new Error("Need a valid continuous axis for "+r+"s")}}var QX=D(()=>{"use strict";wo();nr();kr();xc();un();ea();bt();co()});function cot(t){return vo(t)?"tukey":t}function n1e(t,{config:r}){var n,o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=jt(t,["mark","encoding","selection","projection"]),c=Pl(i)?i:{type:i};a&&st(it.selectionNotSupported("boxplot"));let f=(n=c.extent)!==null&&n!==void 0?n:r.boxplot.extent,d=sn("size",c,r),p=cot(f),{transform:m,continuousAxisChannelDef:h,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:v,boxOrient:w,customTooltipWithoutAggregatedField:_}=dfr(t,f,r),{color:C,size:S}=x,E=jt(x,["color","size"]),A=U=>qF(c,g,h,U,r.boxplot),N=A(E),k=A(x),M=A(Object.assign(Object.assign({},E),S?{size:S}:{})),I=zB([{fieldPrefix:p==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:p==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],h,x),L={type:"tick",color:"black",opacity:1,orient:v,invalid:null},P=p==="min-max"?I:zB([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],h,x),R=[...N({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:P}),...N({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:P}),...N({partName:"ticks",mark:L,positionPrefix:"lower_whisker",aria:!1,extraEncoding:P}),...N({partName:"ticks",mark:L,positionPrefix:"upper_whisker",aria:!1,extraEncoding:P})],V=[...p!=="tukey"?R:[],...k({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:I}),...M({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},xo(r.boxplot.median)&&r.boxplot.median.color?{color:r.boxplot.median.color}:{}),d?{size:d}:{}),{orient:v,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:I})],G;if(p!=="min-max"){let U=`datum["lower_box_${h.field}"]`,Y=`datum["upper_box_${h.field}"]`,X=`(${Y} - ${U})`,pe=`${U} - ${f} * ${X}`,$=`${Y} + ${f} * ${X}`,F=`datum["${h.field}"]`,z={joinaggregate:fot(h.field),groupby:y},q;p==="tukey"&&(q={transform:[{filter:`(${pe} <= ${F}) && (${F} <= ${$})`},{aggregate:[{op:"min",field:h.field,as:"lower_whisker_"+h.field},{op:"max",field:h.field,as:"upper_whisker_"+h.field},{op:"min",field:"lower_box_"+h.field,as:"lower_box_"+h.field},{op:"max",field:"upper_box_"+h.field,as:"upper_box_"+h.field},...b],groupby:y}],layer:R});let{tooltip:ee}=E,ae=jt(E,["tooltip"]),{scale:Q,axis:le}=h,ie=t1e(h),Z=r1e(c,"outliers",r.boxplot,!0,{transform:[{filter:`(${F} < ${pe}) || (${F} > ${$})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:h.field,type:h.type},ie!==void 0?{title:ie}:{}),Q!==void 0?{scale:Q}:{}),le!==void 0?{axis:le}:{})},ae),_?{tooltip:_}:{})})[0];Z&&q?G={transform:[z],layer:[Z,q]}:Z?(G=Z,G.transform.unshift(z)):q&&(G=q,G.transform.unshift(z))}return G?Object.assign(Object.assign({},u),{layer:[G,{transform:m,layer:V}]}):Object.assign(Object.assign({},u),{transform:((o=u.transform)!==null&&o!==void 0?o:[]).concat(m),layer:V})}function fot(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function dfr(t,r,n){let o=ZX(t,UB),{continuousAxisChannelDef:i,continuousAxis:s}=KX(t,o,UB),a=i.field,l=cot(r),u=[...fot(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${r}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${r}, datum["min_${a}"])`,as:"lower_whisker_"+a}],f=t.encoding,d=s,p=f[d],m=jt(f,[typeof d=="symbol"?d:d+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:g}=aot(m),{bins:y,timeUnits:b,aggregate:x,groupby:v,encoding:w}=WF(g,n),_=o==="vertical"?"horizontal":"vertical",C=o;return{transform:[...y,...b,{aggregate:[...x,...u],groupby:v},...c],groupby:v,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:C,customTooltipWithoutAggregatedField:h}}var UB,lot,uot,o1e=D(()=>{"use strict";wo();nr();jo();xc();un();ea();IB();QX();UB="boxplot",lot=["box","median","outliers","rule","ticks"],uot=new Ey(UB,n1e)});function i1e(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:l,outerSpec:u,tooltipEncoding:c}=s1e(t,JX,r),f=qF(l,i,o,s,r.errorbar),d={type:"tick",orient:a},p=[...f({partName:"ticks",mark:d,positionPrefix:"lower",aria:!1,extraEncoding:c}),...f({partName:"ticks",mark:d,positionPrefix:"upper",aria:!1,extraEncoding:c}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function pfr(t,r){let{encoding:n}=t;if(mfr(n))return{orient:ZX(t,r),inputType:"raw"};let o=hfr(n),i=gfr(n),s=n.x,a=n.y;if(o){if(i)throw new Error(`${r} cannot be both type aggregated-upper-lower and aggregated-error`);let l=n.x2,u=n.y2;if(Nr(l)&&Nr(u))throw new Error(`${r} cannot have both x2 and y2`);if(Nr(l)){if(xf(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${r}`)}else if(Nr(u)){if(xf(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${r}`)}throw new Error("No ranged axis")}else{let l=n.xError,u=n.xError2,c=n.yError,f=n.yError2;if(Nr(u)&&!Nr(l))throw new Error(`${r} cannot have xError2 without xError`);if(Nr(f)&&!Nr(c))throw new Error(`${r} cannot have yError2 without yError`);if(Nr(l)&&Nr(c))throw new Error(`${r} cannot have both xError and yError with both are quantiative`);if(Nr(l)){if(xf(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Nr(c)){if(xf(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function mfr(t){return(Nr(t.x)||Nr(t.y))&&!Nr(t.x2)&&!Nr(t.y2)&&!Nr(t.xError)&&!Nr(t.xError2)&&!Nr(t.yError)&&!Nr(t.yError2)}function hfr(t){return Nr(t.x2)||Nr(t.y2)}function gfr(t){return Nr(t.xError)||Nr(t.xError2)||Nr(t.yError)||Nr(t.yError2)}function s1e(t,r,n){var o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=jt(t,["mark","encoding","selection","projection"]),c=Pl(i)?i:{type:i};a&&st(it.selectionNotSupported(r));let{orient:f,inputType:d}=pfr(t,r),{continuousAxisChannelDef:p,continuousAxisChannelDef2:m,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:g,continuousAxis:y}=KX(t,f,r),{errorBarSpecificAggregate:b,postAggregateCalculates:x,tooltipSummary:v,tooltipTitleWithFieldName:w}=yfr(c,p,m,h,g,d,r,n),_=s,C=y,S=_[C],E=y==="x"?"x2":"y2",A=_[E],N=y==="x"?"xError":"yError",k=_[N],M=y==="x"?"xError2":"yError2",I=_[M],L=jt(_,[typeof C=="symbol"?C:C+"",typeof E=="symbol"?E:E+"",typeof N=="symbol"?N:N+"",typeof M=="symbol"?M:M+""]),{bins:P,timeUnits:R,aggregate:V,groupby:G,encoding:U}=WF(L,n),Y=[...V,...b],X=d!=="raw"?[]:G,pe=zB(v,p,U,w);return{transform:[...(o=u.transform)!==null&&o!==void 0?o:[],...P,...R,...Y.length===0?[]:[{aggregate:Y,groupby:X}],...x],groupby:X,continuousAxisChannelDef:p,continuousAxis:y,encodingWithoutContinuousAxis:U,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:pe}}function yfr(t,r,n,o,i,s,a,l){let u=[],c=[],f=r.field,d,p=!1;if(s==="raw"){let m=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":l.errorbar.center,h=t.extent?t.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(h==="iqr")&&st(it.errorBarCenterIsUsedWithWrongExtent(m,h,a)),h==="stderr"||h==="stdev")u=[{op:h,field:f,as:"extent_"+f},{op:m,field:f,as:"center_"+f}],c=[{calculate:`datum["center_${f}"] + datum["extent_${f}"]`,as:"upper_"+f},{calculate:`datum["center_${f}"] - datum["extent_${f}"]`,as:"lower_"+f}],d=[{fieldPrefix:"center_",titlePrefix:$T(m)},{fieldPrefix:"upper_",titlePrefix:dot(m,h,"+")},{fieldPrefix:"lower_",titlePrefix:dot(m,h,"-")}],p=!0;else{t.center&&t.extent&&st(it.errorBarCenterIsNotNeeded(t.extent,a));let g,y,b;h==="ci"?(g="mean",y="ci0",b="ci1"):(g="median",y="q1",b="q3"),u=[{op:y,field:f,as:"lower_"+f},{op:b,field:f,as:"upper_"+f},{op:g,field:f,as:"center_"+f}],d=[{fieldPrefix:"upper_",titlePrefix:kp({field:f,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:kp({field:f,aggregate:y,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:kp({field:f,aggregate:g,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&st(it.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?(d=[],c=[{calculate:`datum["${n.field}"]`,as:"upper_"+f},{calculate:`datum["${f}"]`,as:"lower_"+f}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:`datum["${f}"] + datum["${o.field}"]`,as:"upper_"+f}],i?c.push({calculate:`datum["${f}"] + datum["${i.field}"]`,as:"lower_"+f}):c.push({calculate:`datum["${f}"] - datum["${o.field}"]`,as:"lower_"+f}));for(let m of c)d.push({fieldPrefix:m.as.substring(0,6),titlePrefix:Cy(Cy(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:u,tooltipSummary:d,tooltipTitleWithFieldName:p}}function dot(t,r,n){return $T(t)+" "+n+" "+r}var JX,pot,mot,eK=D(()=>{"use strict";wo();kr();xc();un();ea();bt();IB();QX();JX="errorbar",pot=["ticks","rule"],mot=new Ey(JX,i1e)});function a1e(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:l,tooltipEncoding:u}=s1e(t,tK,r),c=a,f=qF(c,i,o,s,r.errorband),d=t.encoding.x!==void 0&&t.encoding.y!==void 0,p={type:d?"area":"rect"},m={type:d?"line":"rule"},h=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return d?(p=Object.assign(Object.assign(Object.assign({},p),h),{ariaRoleDescription:"errorband"}),m=Object.assign(Object.assign({},m),h)):c.interpolate?st(it.errorBand1DNotSupport("interpolate")):c.tension&&st(it.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},l),{transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...f({partName:"borders",mark:m,positionPrefix:"lower",aria:!1,extraEncoding:u}),...f({partName:"borders",mark:m,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}var tK,hot,got,l1e=D(()=>{"use strict";un();IB();QX();eK();tK="errorband",hot=["band","borders"],got=new Ey(tK,a1e)});function u1e(t,r,n){let o=new Ey(t,r);yot[t]={normalizer:o,parts:n}}function bot(){return nt(yot)}var yot,xot=D(()=>{"use strict";bt();IB();o1e();l1e();eK();yot={};u1e(UB,n1e,lot);u1e(JX,i1e,pot);u1e(tK,a1e,hot)});var vot,wot=D(()=>{"use strict";vot=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"]});var rK,_ot,Sot,c1e,Meo,VB=D(()=>{"use strict";bt();rK=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],_ot={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},Sot={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},c1e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Meo=nt(c1e)});function GB(t){return!!t&&(t==="legend"||!!t.legend)}function nK(t){return GB(t)&&xo(t)}var Tv,Cot,HF=D(()=>{"use strict";nr();Tv="_vgsid_",Cot={single:{on:"click",fields:[Tv],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Tv],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}}});function f1e(t){return i2(t)||YF(t)||WB(t)}function WB(t){return"concat"in t}function i2(t){return"vconcat"in t}function YF(t){return"hconcat"in t}var oK=D(()=>{"use strict"});function vf(t){return xo(t)&&t.step!==void 0}function d1e(t){return t.view||t.width||t.height}function Eot(t,r,n){var o,i;let s=n[r],a={},{spacing:l,columns:u}=s;l!==void 0&&(a.spacing=l),u!==void 0&&(Cv(t)&&!jy(t.facet)||WB(t))&&(a.columns=u),i2(t)&&(a.columns=1);for(let c of xfr)if(t[c]!==void 0)if(c==="spacing"){let f=t[c];a[c]=vo(f)?f:{row:(o=f.row)!==null&&o!==void 0?o:l,column:(i=f.column)!==null&&i!==void 0?i:l}}else a[c]=t[c];return a}var p1e,bfr,xfr,ZT=D(()=>{"use strict";nr();bt();oK();Ev();p1e=20,bfr={align:1,bounds:1,center:1,columns:1,spacing:1},xfr=nt(bfr)});function qB(t,r){var n;return(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"continuousWidth":"continuousHeight"]}function QT(t,r){let n=JT(t,r);return vf(n)?n.step:iK}function JT(t,r){var n;let o=(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"discreteWidth":"discreteHeight"];return In(o,{step:t.step})}function _fr(t={}){return{signals:[{name:"color",value:xo(t)?Object.assign(Object.assign({},Aot),t):Aot}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Sfr(t){return{signals:[{name:"fontSize",value:xo(t)?Object.assign(Object.assign({},Tot),t):Tot}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Cfr(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function sK(t={}){let{color:r,font:n,fontSize:o}=t,i=jt(t,["color","font","fontSize"]);return bB({},wfr,n?Cfr(n):{},r?_fr(r):{},o?Sfr(o):{},i||{})}function kot(t){t=or(t);for(let r of Tfr)delete t[r];if(t.axis)for(let r in t.axis)bF(t.axis[r])&&delete t.axis[r];if(t.legend)for(let r of vot)delete t.legend[r];if(t.mark){for(let r of Cve)delete t.mark[r];t.mark.tooltip&&xo(t.mark.tooltip)&&delete t.mark.tooltip}for(let r of Efr){for(let o of Cve)delete t[r][o];let n=Afr[r];if(n)for(let o of n)delete t[r][o];Ifr(t,r)}for(let r of bot())delete t[r];kfr(t);for(let r in t)xo(t[r])&&hn(t[r])&&delete t[r];return hn(t)?void 0:t}function kfr(t){let{titleMarkConfig:r,subtitleMarkConfig:n,subtitle:o}=GX(t.title);hn(r)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),r)),hn(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),hn(o)?delete t.title:t.title=o}function Ifr(t,r,n,o){let i=o?t[r][o]:t[r];r==="view"&&(n="cell");let s=Object.assign(Object.assign({},i),t.style[n??r]);hn(s)||(t.style[n??r]=s),o||delete t[r]}var iK,vfr,wfr,Av,Tot,Aot,Efr,Tfr,Afr,s2=D(()=>{"use strict";wo();nr();EB();xot();wot();VB();ea();ea();xi();HF();ZT();LB();bt();iK=20,vfr={continuousWidth:200,continuousHeight:200,step:iK},wfr={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:vfr,mark:Mrt,arc:{},area:{},bar:Prt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Lrt,rule:{color:"black"},square:{},text:{color:"black"},tick:Brt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Bnt,projection:{},legend:Sot,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Cot,style:{},title:{},facet:{spacing:p1e},concat:{spacing:p1e}},Av=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Tot={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Aot={blue:Av[0],orange:Av[1],red:Av[2],teal:Av[3],green:Av[4],yellow:Av[5],purple:Av[6],pink:Av[7],brown:Av[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};Efr=["view",...Sve],Tfr=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Afr=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Ort)});function kv(t){return"layer"in t}var m1e=D(()=>{"use strict"});function h1e(t){return"repeat"in t}function Iot(t){return!Lt(t.repeat)&&t.repeat.layer}var aK=D(()=>{"use strict";nr()});var XF=D(()=>{"use strict";oK();Ev();m1e();aK();K_()});var KF,g1e=D(()=>{"use strict";wo();un();oK();Ev();m1e();aK();K_();KF=class{map(r,n){return Cv(r)?this.mapFacet(r,n):h1e(r)?this.mapRepeat(r,n):YF(r)?this.mapHConcat(r,n):i2(r)?this.mapVConcat(r,n):WB(r)?this.mapConcat(r,n):this.mapLayerOrUnit(r,n)}mapLayerOrUnit(r,n){if(kv(r))return this.mapLayer(r,n);if(Aa(r))return this.mapUnit(r,n);throw new Error(it.invalidSpec(r))}mapLayer(r,n){return Object.assign(Object.assign({},r),{layer:r.layer.map(o=>this.mapLayerOrUnit(o,n))})}mapHConcat(r,n){return Object.assign(Object.assign({},r),{hconcat:r.hconcat.map(o=>this.map(o,n))})}mapVConcat(r,n){return Object.assign(Object.assign({},r),{vconcat:r.vconcat.map(o=>this.map(o,n))})}mapConcat(r,n){let{concat:o}=r,i=jt(r,["concat"]);return Object.assign(Object.assign({},i),{concat:o.map(s=>this.map(s,n))})}mapFacet(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}mapRepeat(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}}});function Nfr(t){return t in Dfr}function Dot(t,r){var n,o;let i=r==="x"?"y":"radius",s=t[r],a=t[i];if(Et(s)&&Et(a))if(Oy(s)==="quantitative"&&Oy(a)==="quantitative"){if(s.stack)return r;if(a.stack)return i;let l=Et(s)&&!!s.aggregate,u=Et(a)&&!!a.aggregate;if(l!==u)return l?r:i;{let c=(n=s.scale)===null||n===void 0?void 0:n.type,f=(o=a.scale)===null||o===void 0?void 0:o.type;if(c&&c!=="linear")return i;if(f&&f!=="linear")return r}}else{if(Oy(s)==="quantitative")return r;if(Oy(a)==="quantitative")return i}else{if(Oy(s)==="quantitative")return r;if(Oy(a)==="quantitative")return i}}function Mfr(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function lK(t,r,n={}){let o=Pl(t)?t.type:t;if(!Ffr.has(o))return null;let i=Dot(r,"x")||Dot(r,"theta");if(!i)return null;let s=r[i],a=Et(s)?vt(s,{}):void 0,l=Mfr(i),u=r[l],c=Et(u)?vt(u,{}):void 0;c===a&&(c=void 0,u=void 0,l=void 0);let f=tnt.reduce((p,m)=>{if(m!=="tooltip"&&Ly(r,m)){let h=r[m];for(let g of kn(h)){let y=zl(g);if(y.aggregate)continue;let b=vt(y,{});(!b||b!==c)&&p.push({channel:m,fieldDef:y})}}return p},[]),d;if(s.stack!==void 0?Sy(s.stack)?d=s.stack?"zero":null:d=s.stack:f.length>0&&Ofr.has(o)&&(d="zero"),!d||!Nfr(d)||GF(r)&&f.length===0)return null;if(s.scale&&s.scale.type&&s.scale.type!==Fi.LINEAR){if(n.disallowNonLinearStack)return null;st(it.cannotStackNonLinearScale(s.scale.type))}return Nr(r[ll(i)])?(s.stack!==void 0&&st(it.cannotStackRangedMark(i)),null):(Et(s)&&s.aggregate&&!Gt(Grt,s.aggregate)&&st(it.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:u?l:void 0,groupbyField:c,fieldChannel:i,impute:s.impute===null?!1:ff(o),stackBy:f,offset:d})}var Dfr,Ffr,Ofr,y1e=D(()=>{"use strict";nr();vv();Er();kr();xc();un();ea();xi();bt();Dfr={zero:1,center:1,normalize:1};Ffr=new Set([wve,VT,UT,vF,xF,AB,kB,GT,pX,TB]),Ofr=new Set([VT,UT,wve])});function Rfr(t){let{point:r,line:n}=t,o=jt(t,["point","line"]);return nt(o).length>1?o:o.type}function jfr(t){for(let r of["line","area","rule","trail"])t[r]&&(t=Object.assign(Object.assign({},t),{[r]:uf(t[r],["point","line"])}));return t}function b1e(t,r={},n){return t.point==="transparent"?{opacity:0}:t.point?xo(t.point)?t.point:{}:t.point!==void 0?null:r.point||n.shape?xo(r.point)?r.point:{}:void 0}function Not(t,r={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:r.line?r.line===!0?{}:r.line:void 0}var uK,Fot=D(()=>{"use strict";wo();nr();ea();K_();y1e();bt();uK=class{constructor(){this.name="path-overlay"}hasMatchingType(r,n){if(Aa(r)){let{mark:o,encoding:i}=r,s=Pl(o)?o:{type:o};switch(s.type){case"line":case"rule":case"trail":return!!b1e(s,n[s.type],i);case"area":return!!b1e(s,n[s.type],i)||!!Not(s,n[s.type])}}return!1}run(r,n,o){let{config:i}=n,{selection:s,projection:a,encoding:l,mark:u}=r,c=jt(r,["selection","projection","encoding","mark"]),f=Pl(u)?u:{type:u},d=b1e(f,i[f.type],l),p=f.type==="area"&&Not(f,i[f.type]),m=[Object.assign(Object.assign({},s?{selection:s}:{}),{mark:Rfr(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:uf(l,["shape"])})],h=lK(f,l),g=l;if(h){let{fieldChannel:y,offset:b}=h;g=Object.assign(Object.assign({},l),{[y]:Object.assign(Object.assign({},l[y]),b?{stack:b}:{})})}return p&&m.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},Y_(f,["clip","interpolate","tension","tooltip"])),p),encoding:g})),d&&m.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Y_(f,["clip","tooltip"])),d),encoding:g})),o(Object.assign(Object.assign({},c),{layer:m}),Object.assign(Object.assign({},n),{config:jfr(i)}))}}});var cK,Oot=D(()=>{"use strict";wo();Er();kr();un();K_();bt();cK=class{constructor(){this.name="RangeStep"}hasMatchingType(r){var n;if(Aa(r)&&r.encoding)for(let o of gs){let i=r.encoding[o];if(i&&Nr(i)&&!((n=i?.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(r){var n;let o={},i=Object.assign({},r.encoding);for(let s of gs){let a=Bl(s),l=i[s];if(l&&Nr(l)&&!((n=l?.scale)===null||n===void 0)&&n.rangeStep){let{scale:u}=l,c=jt(l,["scale"]),f=u,{rangeStep:d}=f,p=jt(f,["rangeStep"]);o[a]={step:u.rangeStep},st(it.RANGE_STEP_DEPRECATED),i=Object.assign(Object.assign({},i),{[s]:Object.assign(Object.assign({},c),hn(p)?{}:{scale:p})})}}return Object.assign(Object.assign(Object.assign({},o),r),{encoding:i})}}});function jot(t,r){return r?jy(t)?Lot(t,r):Pot(t,r):t}function fK(t,r){return r?Lot(t,r):t}function x1e(t,r,n){let o=r[t];if(Knt(o)){if(o.repeat in n)return Object.assign(Object.assign({},r),{[t]:n[o.repeat]});st(it.noSuchRepeatedValue(o.repeat));return}return r}function Pot(t,r){if(t=x1e("field",t,r),t!==void 0){if(t===null)return null;if(Wve(t)&&cl(t.sort)){let n=x1e("field",t.sort,r);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function Mot(t,r){if(Et(t))return Pot(t,r);{let n=x1e("datum",t,r);return n!==t&&!n.type&&(n.type="nominal"),n}}function Rot(t,r){if(Nr(t)){let n=Mot(t,r);if(n)return n;if(zF(t))return{condition:t.condition}}else{if(BX(t)){let n=Mot(t.condition,r);if(n)return Object.assign(Object.assign({},t),{condition:n});{let{condition:o}=t;return jt(t,["condition"])}}return t}}function Lot(t,r){let n={};for(let o in t)if(xd(t,o)){let i=t[o];if(Lt(i))n[o]=i.map(s=>Rot(s,r)).filter(s=>s);else{let s=Rot(i,r);s!==void 0&&(n[o]=s)}}return n}var Bot=D(()=>{"use strict";wo();nr();kr();un();kh();Ev()});var dK,$ot=D(()=>{"use strict";$l();Er();kr();un();K_();dK=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(r){if(Aa(r)){let{encoding:n,mark:o}=r;if(o==="line")for(let i of Jrt){let s=Td(i),a=n[s];if(n[i]&&(Et(a)&&!qi(a.bin)||bf(a)))return!0}}return!1}run(r,n,o){let{encoding:i}=r;return st(it.lineWithRange(!!i.x2,!!i.y2)),o(Object.assign(Object.assign({},r),{mark:"rule"}),n)}}});function zot(t){let{parentEncoding:r,encoding:n}=t;if(r&&n){let i=nt(r).reduce((s,a)=>(n[a]&&s.push(a),s),[]);i.length>0&&st(it.encodingOverridden(i))}let o=Object.assign(Object.assign({},r??{}),n??{});return hn(o)?void 0:o}function Uot(t){let{parentProjection:r,projection:n}=t;return r&&n&&st(it.projectionOverridden({parentProjection:r,projection:n})),n??r}var pK,Vot=D(()=>{"use strict";wo();nr();Er();o1e();l1e();eK();xc();un();Ev();g1e();aK();K_();bt();Fot();Oot();Bot();$ot();pK=class extends KF{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[uot,mot,got,new uK,new dK,new cK]}map(r,n){if(Aa(r)){let o=Ly(r.encoding,df),i=Ly(r.encoding,pf),s=Ly(r.encoding,_F);if(o||i||s)return this.mapFacetedUnit(r,n)}return super.map(r,n)}mapUnit(r,n){let{parentEncoding:o,parentProjection:i}=n,s=Object.assign(Object.assign({},r),{encoding:fK(r.encoding,n.repeater)});if(o||i)return this.mapUnitWithParentEncodingOrProjection(s,n);let a=this.mapLayerOrUnit.bind(this);for(let l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(r,n){return Iot(r)?this.mapLayerRepeat(r,n):this.mapNonLayerRepeat(r,n)}mapLayerRepeat(r,n){let{repeat:o,spec:i}=r,s=jt(r,["repeat","spec"]),{row:a,column:l,layer:u}=o,{repeater:c={},repeaterPrefix:f=""}=n;return a||l?this.mapRepeat(Object.assign(Object.assign({},r),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),l?{column:l}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},s),{layer:u.map(d=>{let p=Object.assign(Object.assign({},c),{layer:d}),m=(i.name||"")+f+`child__layer_${Sn(d)}`,h=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:p,repeaterPrefix:m}));return h.name=m,h})})}mapNonLayerRepeat(r,n){var o;let{repeat:i,spec:s,data:a}=r,l=jt(r,["repeat","spec","data"]);!Lt(i)&&r.columns&&(r=uf(r,["columns"]),st(it.columnsNotSupportByRowCol("repeat")));let u=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!Lt(i)&&i.row||[c?c.row:null],p=!Lt(i)&&i.column||[c?c.column:null],m=Lt(i)&&i||[c?c.repeat:null];for(let g of m)for(let y of d)for(let b of p){let x={repeat:g,row:y,column:b,layer:c.layer},v=(s.name||"")+f+"child__"+(Lt(i)?`${Sn(g)}`:(i.row?`row_${Sn(y)}`:"")+(i.column?`column_${Sn(b)}`:"")),w=this.map(s,Object.assign(Object.assign({},n),{repeater:x,repeaterPrefix:v}));w.name=v,u.push(uf(w,["data"]))}let h=Lt(i)?r.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(o=s.data)!==null&&o!==void 0?o:a,align:"all"},l),{columns:h,concat:u})}mapFacet(r,n){let{facet:o}=r;return jy(o)&&r.columns&&(r=uf(r,["columns"]),st(it.columnsNotSupportByRowCol("facet"))),super.mapFacet(r,n)}mapUnitWithParentEncodingOrProjection(r,n){let{encoding:o,projection:i}=r,{parentEncoding:s,parentProjection:a,config:l}=n,u=Uot({parentProjection:a,projection:i}),c=zot({parentEncoding:s,encoding:fK(o,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},r),u?{projection:u}:{}),c?{encoding:c}:{}),{config:l})}mapFacetedUnit(r,n){let o=r.encoding,{row:i,column:s,facet:a}=o,l=jt(o,["row","column","facet"]),{mark:u,width:c,projection:f,height:d,view:p,selection:m,encoding:h}=r,g=jt(r,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:y,layout:b}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),x=fK(l,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),b),{facet:y,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{width:c}:{}),d?{height:d}:{}),p?{view:p}:{}),f?{projection:f}:{}),{mark:u,encoding:x}),m?{selection:m}:{})}),n)}getFacetMappingAndLayout(r,n){var o;let{row:i,column:s,facet:a}=r;if(i||s){a&&st(it.facetChannelDropped([...i?[df]:[],...s?[pf]:[]]));let l={},u={};for(let c of[df,pf]){let f=r[c];if(f){let{align:d,center:p,spacing:m,columns:h}=f,g=jt(f,["align","center","spacing","columns"]);l[c]=g;for(let y of["align","center","spacing"])f[y]!==void 0&&(u[y]=(o=u[y])!==null&&o!==void 0?o:{},u[y][c]=f[y])}}return{facetMapping:l,layout:u}}else{let{align:l,center:u,spacing:c,columns:f}=a,d=jt(a,["align","center","spacing","columns"]);return{facetMapping:jot(d,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},l?{align:l}:{}),u?{center:u}:{}),c?{spacing:c}:{}),f?{columns:f}:{})}}}mapLayer(r,n){var{parentEncoding:o,parentProjection:i}=n,s=jt(n,["parentEncoding","parentProjection"]);let{encoding:a,projection:l}=r,u=jt(r,["encoding","projection"]),c=Object.assign(Object.assign({},s),{parentEncoding:zot({parentEncoding:o,encoding:a}),parentProjection:Uot({parentProjection:i,projection:l})});return super.mapLayer(u,c)}}});function mK(t,r){r===void 0&&(r=sK(t.config));let n=Lfr(t,r),{width:o,height:i}=t,s=Bfr(n,{width:o,height:i,autosize:t.autosize},r);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}function Lfr(t,r={}){return Pfr.map(t,{config:r})}function Got(t){return fr(t)?{type:t}:t??{}}function Bfr(t,r,n){let{width:o,height:i}=r,s=Aa(t)||kv(t),a={};s?o=="container"&&i=="container"?(a.type="fit",a.contains="padding"):o=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(o=="container"&&(st(it.containerSizeNonSingle("width")),o=void 0),i=="container"&&(st(it.containerSizeNonSingle("height")),i=void 0));let l=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?Got(n.autosize):{}),Got(t.autosize));if(l.type==="fit"&&!s&&(st(it.FIT_NON_SINGLE),l.type="pad"),o=="container"&&!(l.type=="fit"||l.type=="fit-x")&&st(it.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(l.type=="fit"||l.type=="fit-y")&&st(it.containerSizeNotCompatibleWithAutosize("height")),!xv(l,{type:"pad"}))return l}var Pfr,v1e=D(()=>{"use strict";nr();s2();un();XF();bt();Vot();Pfr=new pK});function Wot(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function qot(t){return t?`fit-${Z_(t)}`:"fit"}function w1e(t){return $fr.reduce((r,n)=>(t&&t[n]!==void 0&&(r[n]=t[n]),r),{})}var $fr,Hot=D(()=>{"use strict";Er();$fr=["background","padding"]});function Iv(t){return{explicit:!0,value:t}}function Tu(t){return{explicit:!1,value:t}}function hK(t){return(r,n,o,i)=>{let s=t(r.value,n.value);return s>0?r:s<0?n:ZF(r,n,o,i)}}function ZF(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingProperty(n,o,t.value,r.value)),t}function wf(t,r,n,o,i=ZF){return t===void 0||t.value===void 0?r:t.explicit&&!r.explicit?t:r.explicit&&!t.explicit?r:xv(t.value,r.value)?t:i(t,r,n,o)}var Eu,vc=D(()=>{"use strict";un();bt();Eu=class t{constructor(r={},n={}){this.explicit=r,this.implicit=n}clone(){return new t(or(this.explicit),or(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(r){return In(this.explicit[r],this.implicit[r])}getWithExplicit(r){return this.explicit[r]!==void 0?{explicit:!0,value:this.explicit[r]}:this.implicit[r]!==void 0?{explicit:!1,value:this.implicit[r]}:{explicit:!1,value:void 0}}setWithExplicit(r,n){n.value!==void 0&&this.set(r,n.value,n.explicit)}set(r,n,o){return delete this[o?"implicit":"explicit"][r],this[o?"explicit":"implicit"][r]=n,this}copyKeyFromSplit(r,n){n.explicit[r]!==void 0?this.set(r,n.explicit[r],!0):n.implicit[r]!==void 0&&this.set(r,n.implicit[r],!1)}copyKeyFromObject(r,n){n[r]!==void 0&&this.set(r,n[r],!0)}copyAll(r){for(let n of nt(r.combine())){let o=r.getWithExplicit(n);this.setWithExplicit(n,o)}}}});var gK,Yot=D(()=>{"use strict";vc();gK=class extends Eu{constructor(r={},n={},o=!1){super(r,n),this.explicit=r,this.implicit=n,this.parseNothing=o}clone(){let r=super.clone();return r.parseNothing=this.parseNothing,r}}});function a2(t){return"url"in t}function QF(t){return"values"in t}function yK(t){return"name"in t&&!a2(t)&&!QF(t)&&!By(t)}function By(t){return t&&(_1e(t)||S1e(t)||HB(t))}function _1e(t){return"sequence"in t}function S1e(t){return"sphere"in t}function HB(t){return"graticule"in t}var Ds,JF,$y=D(()=>{"use strict";Ds="main",JF="raw"});function C1e(t){return"filter"in t}function Xot(t){return t?.stop!==void 0}function Kot(t){return"lookup"in t}function Zot(t){return"data"in t}function Qot(t){return"selection"in t}function Jot(t){return"pivot"in t}function eit(t){return"density"in t}function tit(t){return"quantile"in t}function rit(t){return"regression"in t}function nit(t){return"loess"in t}function oit(t){return"sample"in t}function iit(t){return"window"in t}function sit(t){return"joinaggregate"in t}function ait(t){return"flatten"in t}function lit(t){return"calculate"in t}function uit(t){return"bin"in t}function cit(t){return"impute"in t}function fit(t){return"timeUnit"in t}function dit(t){return"aggregate"in t}function pit(t){return"stack"in t}function mit(t){return"fold"in t}function hit(t){return t.map(r=>C1e(r)?{filter:_B(r.filter,Ont)}:r)}var YB=D(()=>{"use strict";iX();YT()});function Ip(t,r,n,o){let i=zF(r)&&r.condition,s=o(r);if(i){let l=kn(i).map(u=>{let c=o(u),f=Xnt(u)?bK(t,u.selection):rA(t,u.test);return Object.assign({test:f},c)});return{[n]:[...l,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}var eA=D(()=>{"use strict";nr();kr();xK();tA()});function l2(t,r="text"){let n=t.encoding[r];return Ip(t,n,r,o=>eO(o,t.config))}function eO(t,r,n="datum"){if(t){if(Cu(t))return fo(t.value);if(Nr(t)){let{format:o,formatType:i}=VF(t);return jF({fieldOrDatumDef:t,format:o,formatType:i,expr:n,config:r})}}}var tO=D(()=>{"use strict";kr();jo();Ry();eA()});function rO(t,r={}){let{encoding:n,markDef:o,config:i,stack:s}=t,a=n.tooltip;if(Lt(a))return{tooltip:E1e({tooltip:a},s,i,r)};{let l=r.reactiveGeom?"datum.datum":"datum";return Ip(t,a,"tooltip",u=>{let c=eO(u,i,l);if(c)return c;if(u===null)return;let f=sn("tooltip",o,i);if(f===!0&&(f={content:"encoding"}),fr(f))return{value:f};if(xo(f))return f.content==="encoding"?E1e(n,s,i,r):{signal:l}})}}function T1e(t,r,n,{reactiveGeom:o}={}){let i={},s=o?"datum.datum":"datum",a=[];function l(c,f){let d=Td(f),p=ra(c)?c:Object.assign(Object.assign({},c),{type:t[d].type}),m=kn(kp(p,n,{allowDisabling:!1})).join(", "),h;if(ul(f)){let g=f==="x"?"x2":"y2",y=zl(t[g]);if(qi(p.bin)&&y){let b=vt(p,{expr:s}),x=vt(y,{expr:s}),{format:v,formatType:w}=VF(p);h=PF(b,x,v,w,n),i[g]=!0}else if(r&&r.fieldChannel===f&&r.offset==="normalize"){let{format:b,formatType:x}=VF(p);h=jF({fieldOrDatumDef:p,format:b,formatType:x,expr:s,config:n,normalizeStack:!0}).signal}}h=h??eO(p,n,s).signal,a.push({channel:f,key:m,value:h})}$B(t,(c,f)=>{Et(c)?l(c,f):UF(c)&&l(c.condition,f)});let u={};for(let{channel:c,key:f,value:d}of a)!i[c]&&!u[f]&&(u[Zr(f)]=d);return u}function E1e(t,r,n,{reactiveGeom:o}={}){let i=T1e(t,r,n,{reactiveGeom:o}),s=SB(i).map(({key:a,value:l})=>`${a}: ${l}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}var XB=D(()=>{"use strict";nr();$l();Er();kr();xc();bt();jo();Ry();eA();tO()});function A1e(t){let{markDef:r,config:n}=t,o=sn("aria",r,n);return o===!1?{}:Object.assign(Object.assign(Object.assign({},o?{aria:o}:{}),zfr(t)),Ufr(t))}function zfr(t){let{mark:r,markDef:n,config:o}=t;if(o.aria===!1)return{};let i=sn("ariaRoleDescription",n,o);return i!=null?{ariaRoleDescription:{value:i}}:r in Ant?{}:{ariaRoleDescription:{value:r}}}function Ufr(t){let{encoding:r,markDef:n,config:o,stack:i}=t,s=r.description;if(s)return Ip(t,s,"description",u=>eO(u,t.config));let a=sn("description",n,o);if(a!=null)return{description:fo(a)};if(o.aria===!1)return{};let l=T1e(r,i,o);if(!hn(l))return{description:{signal:SB(l).map(({key:u,value:c})=>`${u} + ": " + (${c})`).join(' + "; " + ')}}}var k1e=D(()=>{"use strict";bt();jo();co();eA();tO();XB()});function Xo(t,r,n={}){let{markDef:o,encoding:i,config:s}=r,{vgChannel:a}=n,{defaultRef:l,defaultValue:u}=n;l===void 0&&(u=u??sn(t,o,s,{vgChannel:a,ignoreVgConfig:!0}),u!==void 0&&(l=fo(u)));let c=i[t];return Ip(r,c,a??t,f=>Uve({channel:t,channelDef:f,markDef:o,config:s,scaleName:r.scaleName(t),scale:r.getScaleComponent(t),stack:null,defaultRef:l}))}var nO=D(()=>{"use strict";jo();eA();t2()});function oO(t,r={filled:void 0}){var n,o,i,s;let{markDef:a,encoding:l,config:u}=t,{type:c}=a,f=(n=r.filled)!==null&&n!==void 0?n:sn("filled",a,u),d=Gt(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,p=(i=(o=sn(f===!0?"color":void 0,a,u,{vgChannel:"fill"}))!==null&&o!==void 0?o:u.mark[f===!0&&"color"])!==null&&i!==void 0?i:d,m=(s=sn(f===!1?"color":void 0,a,u,{vgChannel:"stroke"}))!==null&&s!==void 0?s:u.mark[f===!1&&"color"],h=f?"fill":"stroke",g=Object.assign(Object.assign({},p?{fill:fo(p)}:{}),m?{stroke:fo(m)}:{});return a.color&&(f?a.fill:a.stroke)&&st(it.droppingColor("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Xo("color",t,{vgChannel:h,defaultValue:f?p:m})),Xo("fill",t,{defaultValue:l.fill?p:void 0})),Xo("stroke",t,{defaultValue:l.stroke?m:void 0}))}var vK=D(()=>{"use strict";un();bt();jo();nO()});function u2(t,r){let n=ent(t),o=r[n];if(o)return o}var wK=D(()=>{"use strict";Er()});function Yi(t,r,{defaultPos:n,vgChannel:o,isMidPoint:i}){let{encoding:s,markDef:a,config:l,stack:u}=r,c=s[t],f=s[ll(t)],d=r.scaleName(t),p=r.getScaleComponent(t),m=u2(t,a),h=KB({model:r,defaultPos:n,channel:t,scaleName:d,scale:p}),g=!c&&ul(t)&&(s.latitude||s.longitude)?{field:r.getName(t)}:Vfr({channel:t,channelDef:c,channel2Def:f,markDef:a,config:l,isMidPoint:i,scaleName:d,scale:p,stack:u,offset:m,defaultRef:h});return g?{[o||t]:g}:void 0}function Vfr(t){let{channel:r,channelDef:n,isMidPoint:o,scaleName:i,stack:s,offset:a,markDef:l,config:u}=t;if(Nr(n)&&s&&r===s.fieldChannel){if(Et(n)){let c=r2({channel:r,fieldDef:n,isMidPoint:o,markDef:l,stack:s,config:u});if(c!==void 0)return MF({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:a})}return Ny(n,i,{suffix:"end"},{offset:a})}return RF(t)}function KB({model:t,defaultPos:r,channel:n,scaleName:o,scale:i}){let{markDef:s,config:a}=t;return()=>{let l=Td(n),u=Tp(n),c=sn(n,s,a,{vgChannel:u});if(c!==void 0)return XT(n,c);switch(r){case"zeroOrMin":case"zeroOrMax":if(o){let f=i.get("type");if(!Gt([Fi.LOG,Fi.TIME,Fi.UTC],f)){if(i.domainDefinitelyIncludesZero())return{scale:o,value:0}}}if(r==="zeroOrMin")return l==="y"?{field:{group:"height"}}:{value:0};switch(l){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let f=t[Bl(n)];return Object.assign(Object.assign({},f),{mult:.5})}}}}var ZB=D(()=>{"use strict";Er();kr();xi();bt();jo();wK();t2()});function _K(t,r,n,o="middle"){if(t==="radius"||t==="theta")return Tp(t);let s=sn(t==="x"?"align":"baseline",r,n);return t==="x"?Gfr[s||(o==="top"?"left":"center")]:Wfr[s||o]}var Gfr,Wfr,I1e=D(()=>{"use strict";Er();jo();Gfr={left:"x",center:"xc",right:"x2"},Wfr={top:"y",middle:"yc",bottom:"y2"}});function c2(t,r,{defaultPos:n,defaultPos2:o,range:i}){return i?QB(t,r,{defaultPos:n,defaultPos2:o}):Yi(t,r,{defaultPos:n})}function QB(t,r,{defaultPos:n,defaultPos2:o}){let{markDef:i,config:s}=r,a=ll(t),l=Bl(t),u=qfr(r,o,a),c=u[l]?_K(t,i,s):Tp(t);return Object.assign(Object.assign({},Yi(t,r,{defaultPos:n,vgChannel:c})),u)}function qfr(t,r,n){let{encoding:o,mark:i,markDef:s,stack:a,config:l}=t,u=Td(n),c=Bl(n),f=Tp(n),d=o[u],p=t.scaleName(u),m=t.getScaleComponent(u),h=n in o||n in s?u2(n,t.markDef):u2(u,t.markDef);if(!d&&(n==="x2"||n==="y2")&&(o.latitude||o.longitude))return{[f]:{field:t.getName(n)}};let g=Hfr({channel:n,channelDef:d,channel2Def:o[n],markDef:s,config:l,scaleName:p,scale:m,stack:a,offset:h,defaultRef:void 0});return g!==void 0?{[f]:g}:SK(n,s)||SK(n,{[n]:BB(n,s,l.style),[c]:BB(c,s,l.style)})||SK(n,l[i])||SK(n,l.mark)||{[f]:KB({model:t,defaultPos:r,channel:n,scaleName:p,scale:m})()}}function Hfr({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c}){return Nr(r)&&l&&t.charAt(0)===l.fieldChannel.charAt(0)?Ny(r,s,{suffix:"start"},{offset:u}):RF({channel:t,channelDef:n,scaleName:s,scale:a,stack:l,markDef:o,config:i,offset:u,defaultRef:c})}function SK(t,r){let n=Bl(t),o=Tp(t);if(r[o]!==void 0)return{[o]:XT(t,r[o])};if(r[t]!==void 0)return{[o]:XT(t,r[t])};if(r[n])return{[n]:XT(t,r[n])}}var CK=D(()=>{"use strict";Er();kr();jo();wK();I1e();ZB();t2()});function _f(t,r,n){var o,i,s,a;let{config:l,encoding:u,markDef:c,stack:f}=t,d=ll(r),p=Bl(r),m=u[r],h=u[d],g=t.getScaleComponent(r),y=g?g.get("type"):void 0,b=t.scaleName(r),x=c.orient,v=(i=(o=u[p])!==null&&o!==void 0?o:u.size)!==null&&i!==void 0?i:sn("size",c,l,{vgChannel:p}),w=n==="bar"&&(r==="x"?x==="vertical":x==="horizontal");if(Et(m)&&(xn(m.bin)||qi(m.bin)||m.timeUnit&&!h)&&!v&&!Hi(y)){let _=r2({channel:r,fieldDef:m,stack:f,markDef:c,config:l}),C=(s=t.component.axes[r])===null||s===void 0?void 0:s[0],S=(a=C?.get("translate"))!==null&&a!==void 0?a:.5;return yit({fieldDef:m,fieldDef2:h,channel:r,markDef:c,scaleName:b,band:_,axisTranslate:S,spacing:ul(r)?sn("binSpacing",c,l):void 0,reverse:g.get("reverse"),config:l})}else return(Nr(m)&&Hi(y)||w)&&!h?Xfr(n,m,r,t):QB(r,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Yfr(t,r,n,o,i,s){if(o){let u=o.get("type");if(u==="point"||u==="band"){if(i[t].discreteBandSize!==void 0)return{value:i[t].discreteBandSize};if(u===Fi.POINT){let c=o.get("range");return Su(c)&&vo(c.step)?{value:c.step-2}:{value:iK-2}}else return{scale:n,band:s}}else return{value:i[t].continuousBandSize}}let a=QT(i.view,r),l=In(i[t].discreteBandSize,a-2);return l!==void 0?{value:l}:void 0}function Xfr(t,r,n,o){var i;let{markDef:s,encoding:a,config:l,stack:u}=o,c=s.orient,f=o.scaleName(n),d=o.getScaleComponent(n),p=Bl(n),m=ll(n),h=c==="horizontal"&&n==="y"||c==="vertical"&&n==="x",g=sn(h?"size":p,s,l,{vgChannel:p}),y;(a.size||g!==void 0)&&(h?y=Xo("size",o,{vgChannel:p,defaultValue:g}):st(it.cannotApplySizeToNonOrientedMark(s.type)));let b=(i=Nr(r)?r2({channel:n,fieldDef:r,markDef:s,stack:u,config:l}):void 0)!==null&&i!==void 0?i:1;y=y||{[p]:Yfr(t,p,f,d,l,b)};let x=d?.get("type")!=="band"||!("band"in y[p]),v=_K(n,s,l,x?"middle":"top"),w=u2(n,s),_=RF({channel:n,channelDef:r,markDef:s,config:l,scaleName:f,scale:d,stack:u,offset:w,defaultRef:KB({model:o,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:x?.5:(1-b)/2});if(p)return Object.assign({[v]:_},y);{let C=Tp(m),S=y[p],E=w?Object.assign(Object.assign({},S),{offset:w}):S;return{[v]:_,[C]:Lt(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:E})]:Object.assign(Object.assign({},_),{offset:E})}}}function JB(t,r,n,o,i){if(Eve(t))return 0;let s=t==="x"||t==="y2"?-r/2:r/2;if(er(n)){let a=o2(i);return{signal:`${n.signal} ? ${o-s}${a?"-"+a:""} : ${o+s}${a?"+"+a:""}`}}else{if(er(i)){let a=o+(n?-s:s);return{signal:`${a||""}${n?" - ":a?" + ":""}${i.signal}`}}return i=i||0,o+(n?-i-s:+i+s)}}function yit({fieldDef:t,fieldDef2:r,channel:n,band:o,scaleName:i,markDef:s,spacing:a=0,axisTranslate:l,reverse:u,config:c}){let f=ll(n),d=Tp(n),p=Tp(f),m=u2(n,s);if(xn(t.bin)||t.timeUnit)return{[p]:git({channel:n,fieldDef:t,scaleName:i,markDef:s,band:(1-o)/2,offset:JB(f,a,u,l,m),config:c}),[d]:git({channel:n,fieldDef:t,scaleName:i,markDef:s,band:1-(1-o)/2,offset:JB(n,a,u,l,m),config:c})};if(qi(t.bin)){let h=Ny(t,i,{},{offset:JB(f,a,u,l,m)});if(Et(r))return{[p]:h,[d]:Ny(r,i,{},{offset:JB(n,a,u,l,m)})};if(J_(t.bin)&&t.bin.step)return{[p]:h,[d]:{signal:`scale("${i}", ${vt(t,{expr:"datum"})} + ${t.bin.step})`,offset:JB(n,a,u,l,m)}}}st(it.channelRequiredForBinned(f))}function git({channel:t,fieldDef:r,scaleName:n,markDef:o,band:i,offset:s,config:a}){let l=MF({scaleName:n,fieldOrDatumDef:r,band:i,offset:s});return zve({fieldDef:r,channel:t,markDef:o,ref:l,config:a})}var D1e=D(()=>{"use strict";nr();$l();Er();kr();s2();un();xi();bt();co();jo();nO();wK();I1e();ZB();CK();t2()});function Xi(t,r){let{fill:n=void 0,stroke:o=void 0}=r.color==="include"?oO(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zfr(t.markDef,r)),bit(t,"fill",n)),bit(t,"stroke",o)),Xo("opacity",t)),Xo("fillOpacity",t)),Xo("strokeOpacity",t)),Xo("strokeWidth",t)),Xo("strokeDash",t)),rO(t)),l2(t,"href")),A1e(t))}function bit(t,r,n){let{config:o,mark:i,markDef:s}=t;if(sn("invalid",s,o)==="hide"&&n&&!ff(i)){let l=Qfr(t,{invalid:!0,channels:Q_});if(l)return{[r]:[{test:l,value:null},...kn(n)]}}return n?{[r]:n}:{}}function Zfr(t,r){return Tnt.reduce((n,o)=>(!Kfr.has(o)&&t[o]!==void 0&&r[o]!=="ignore"&&(n[o]=fo(t[o])),n),{})}function Qfr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&ta(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>RB(a,r)).join(` ${s} `)}}var Kfr,xit=D(()=>{"use strict";nr();Er();ea();xi();bt();co();jo();k1e();vK();nO();tO();XB();t2();vK();eA();nO();ZB();CK();D1e();tO();XB();Kfr=new Set(["aria"])});function iO(t){let{config:r,markDef:n}=t;if(sn("invalid",n,r)){let i=Jfr(t,{channels:gs});if(i)return{defined:{signal:i}}}return{}}function Jfr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&ta(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>RB(a,r)).join(` ${s} `)}}function EK(t,r){if(r!==void 0)return{[t]:fo(r)}}var vit=D(()=>{"use strict";Er();xi();bt();jo();t2()});var wc=D(()=>{"use strict";xit();vK();eA();vit();nO();ZB();CK();D1e();tO();XB();k1e()});var N1e,edr,TK,F1e=D(()=>{"use strict";un();ea();wc();N1e="voronoi",edr={has:t=>t.type!=="interval"&&t.nearest,parse:(t,r)=>{if(r.events)for(let n of r.events)n.markname=t.getName(N1e)},marks:(t,r,n)=>{let{x:o,y:i}=r.project.hasChannel,s=t.mark;if(ff(s))return st(it.nearestNotSupportForContinuous(s)),n;let a={name:t.getName(N1e),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},rO(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:o||!i?"datum.datum.x || 0":"0"},y:{expr:i||!o?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},l=0,u=!1;return n.forEach((c,f)=>{var d;let p=(d=c.name)!==null&&d!==void 0?d:"";p===t.component.mark[0].name?l=f:p.indexOf(N1e)>=0&&(u=!0)}),u||n.splice(l+1,0,a),n}},TK=edr});var Tr,rs,Jn=D(()=>{"use strict";bt();Tr=class{constructor(r,n){this.debugName=n,this._children=[],this._parent=null,r&&(this.parent=r)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(r){this._parent=r,r&&r.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(r,n){if(this._children.indexOf(r)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,r):this._children.push(r)}removeChild(r){let n=this._children.indexOf(r);return this._children.splice(n,1),n}remove(){let r=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,r++)}insertAsParentOf(r){let n=r.parent;n.removeChild(this),this.parent=n,r.parent=this}swapWithParent(){let r=this._parent,n=r.parent;for(let o of this._children)o.parent=r;this._children=[],r.removeChild(this),r.parent.removeChild(r),this.parent=n,r.parent=this}},rs=class extends Tr{constructor(r,n,o,i){super(r,n),this.type=o,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){let r=new this.constructor;return r.debugName="clone_"+this.debugName,r._source=this._source,r._name="clone_"+this._name,r.type=this.type,r.refCounts=this.refCounts,r.refCounts[r._name]=0,r}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${yve()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(r){this._source=r}}});var Np,e$=D(()=>{"use strict";wo();Er();kr();ky();bt();ns();Jn();Np=class t extends Tr{constructor(r,n){super(r),this.formula=n}clone(){return new t(null,or(this.formula))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{let{field:l,timeUnit:u}=s,c=eo(n)?n.encoding[ll(a)]:void 0,f=eo(n)&&$F(a,s,c,n.stack,n.markDef,n.config);if(u){let d=vt(s,{forAs:!0});i[wr({as:d,field:l,timeUnit:u})]=Object.assign({as:d,field:l,timeUnit:u},f?{band:!0}:{})}return i},{});return hn(o)?null:new t(r,o)}static makeFromTransform(r,n){let o=Object.assign({},n),{timeUnit:i}=o,s=jt(o,["timeUnit"]),a=ts(i),l=Object.assign(Object.assign({},s),{timeUnit:a});return new t(r,{[wr(l)]:l})}merge(r){this.formula=Object.assign({},this.formula);for(let n in r.formula)(!this.formula[n]||r.formula[n].band)&&(this.formula[n]=r.formula[n]);for(let n of r.children)r.removeChild(n),n.parent=this;r.remove()}producedFields(){return new Set(Cp(this.formula).map(r=>r.as))}dependentFields(){return new Set(Cp(this.formula).map(r=>r.field))}hash(){return`TimeUnit ${wr(this.formula)}`}assemble(){let r=[];for(let n of Cp(this.formula)){let{field:o,as:i,timeUnit:s}=n,a=ts(s),{unit:l,utc:u}=a,c=jt(a,["unit","utc"]);r.push(Object.assign(Object.assign(Object.assign(Object.assign({field:cf(o),type:"timeunit"},l?{units:DB(l)}:{}),u?{timezone:"utc"}:{}),c),{as:[i,`${i}_end`]}))}return r}}});var Dv,O1e,tdr,wit,sO=D(()=>{"use strict";wo();nr();Er();un();xi();bt();e$();Dv="_tuple_fields",O1e=class{constructor(...r){this.items=r,this.hasChannel={},this.hasField={}}},tdr={has:()=>!0,parse:(t,r,n)=>{var o,i,s;let a=r.name,l=(o=r.project)!==null&&o!==void 0?o:r.project=new O1e,u={},c={},f=new Set,d=(p,m)=>{let h=m==="visual"?p.channel:p.field,g=Sn(`${a}_${h}`);for(let y=1;f.has(g);y++)g=Sn(`${a}_${h}_${y}`);return f.add(g),{[m]:g}};if(!n.fields&&!n.encodings){let p=t.config.selection[n.type];if(n.init)for(let m of kn(n.init))for(let h of nt(m))Qrt(h)?(n.encodings||(n.encodings=[])).push(h):n.type==="interval"?(st('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=p.encodings):(n.fields||(n.fields=[])).push(h);else n.encodings=p.encodings,n.fields=p.fields}for(let p of(i=n.fields)!==null&&i!==void 0?i:[]){let m={type:"E",field:p};m.signals=Object.assign({},d(m,"data")),l.items.push(m),l.hasField[p]=m}for(let p of(s=n.encodings)!==null&&s!==void 0?s:[]){let m=t.fieldDef(p);if(m){let h=m.field;if(m.aggregate){st(it.cannotProjectAggregate(p,m.aggregate));continue}else if(!h){st(it.cannotProjectOnChannelWithoutField(p));continue}if(m.timeUnit){h=t.vgField(p);let g={timeUnit:m.timeUnit,as:h,field:m.field};c[wr(g)]=g}if(!u[h]){let g="E";if(r.type==="interval"){let b=t.getScaleComponent(p).get("type");ta(b)&&(g="R")}else m.bin&&(g="R-RE");let y={field:h,channel:p,type:g};y.signals=Object.assign(Object.assign({},d(y,"data")),d(y,"visual")),l.items.push(u[h]=y),l.hasField[h]=l.hasChannel[p]=u[h]}}else st(it.cannotProjectOnChannelWithoutField(p))}if(n.init){let p=m=>l.items.map(h=>m[h.channel]!==void 0?m[h.channel]:m[h.field]);if(n.type==="interval")r.init=p(n.init);else{let m=kn(n.init);r.init=m.map(p)}}hn(c)||(l.timeUnit=new Np(null,c))},signals:(t,r,n)=>{let o=r.name+Dv;return n.filter(s=>s.name===o).length>0?n:n.concat({name:o,value:r.project.items.map(s=>{let{signals:a,hasLegend:l}=s,u=jt(s,["signals","hasLegend"]);return u.field=cf(u.field),u})})}},wit=tdr});var rdr,AK,M1e=D(()=>{"use strict";nr();Sf();bt();nA();F1e();sO();HF();rdr={has:t=>t.type==="single"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!GB(t.bind),parse:(t,r,n,o)=>{o.on||delete r.events,o.clear||delete r.clear},topLevelSignals:(t,r,n)=>{let o=r.name,i=r.project,s=r.bind,a=r.init&&r.init[0],l=TK.has(r)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,c)=>{var f,d;let p=Sn(`${o}_${u.field}`);n.filter(h=>h.name===p).length||n.unshift(Object.assign(Object.assign({name:p},a?{init:f2(a[c])}:{value:null}),{on:r.events?[{events:r.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${Zr(u.field)}] : null`}]:[],bind:(d=(f=s[u.field])!==null&&f!==void 0?f:s[u.channel])!==null&&d!==void 0?d:s}))}),n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.filter(c=>c.name===o+fl)[0],a=o+Dv,l=i.items.map(c=>Sn(`${o}_${c.field}`)),u=l.map(c=>`${c} !== null`).join(" && ");return l.length&&(s.update=`${u} ? {fields: ${a}, values: [${l.join(", ")}]} : null`),delete s.value,delete s.on,n}},AK=rdr});var aO,ndr,kK,IK=D(()=>{"use strict";Sf();aO="_toggle",ndr={has:t=>t.type==="multi"&&!!t.toggle,signals:(t,r,n)=>n.concat({name:r.name+aO,value:!1,on:[{events:r.events,update:r.toggle}]}),modifyExpr:(t,r)=>{let n=r.name+fl,o=r.name+aO;return`${o} ? null : ${n}, `+(r.resolve==="global"?`${o} ? null : true, `:`${o} ? null : {unit: ${Cf(t)}}, `)+`${o} ? ${n} : null`}},kK=ndr});var odr,_it,Sit=D(()=>{"use strict";H_();nr();Sf();bt();M1e();IK();odr={has:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,r,n)=>{n.clear&&(r.clear=fr(n.clear)?lf(n.clear,"scope"):n.clear)},topLevelSignals:(t,r,n)=>{if(AK.has(r))for(let o of r.project.items){let i=n.findIndex(s=>s.name===Sn(`${r.name}_${o.field}`));i!==-1&&n[i].on.push({events:r.clear,update:"null"})}return n},signals:(t,r,n)=>{function o(i,s){i!==-1&&n[i].on&&n[i].on.push({events:r.clear,update:s})}if(r.type==="interval")for(let i of r.project.items){let s=n.findIndex(a=>a.name===i.signals.visual);if(o(s,"[0, 0]"),s===-1){let a=n.findIndex(l=>l.name===i.signals.data);o(a,"null")}}else{let i=n.findIndex(s=>s.name===r.name+fl);o(i,"null"),kK.has(r)&&(i=n.findIndex(s=>s.name===r.name+aO),o(i,"false"))}return n}},_it=odr});function t$(t,r){return`domain(${Zr(t.scaleName(r))})`}function R1e(t){var r;return t.parent&&Op(t.parent)&&((r=!t.parent.parent)!==null&&r!==void 0?r:R1e(t.parent.parent))}var idr,Fp,r$=D(()=>{"use strict";nr();Sf();Er();un();xi();ns();idr={has:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,r)=>{let n=r.scales=[];for(let o of r.project.items){let i=o.channel;if(!_u(i))continue;let s=t.getScaleComponent(i),a=s?s.get("type"):void 0;if(!s||!ta(a)){st(it.SCALE_BINDINGS_CONTINUOUS);continue}let l={selection:r.name,field:o.field};s.set("selectionExtent",l,!0),n.push(o)}},topLevelSignals:(t,r,n)=>{let o=r.scales.filter(a=>n.filter(l=>l.name===a.signals.data).length===0);if(!t.parent||R1e(t)||o.length===0)return n;let i=n.filter(a=>a.name===r.name)[0],s=i.update;if(s.indexOf(DK)>=0)i.update=`{${o.map(a=>`${Zr(a.field)}: ${a.signals.data}`).join(", ")}}`;else{for(let a of o){let l=`${Zr(a.field)}: ${a.signals.data}`;s.indexOf(l)<0&&(s=`${s.substring(0,s.length-1)}, ${l}}`)}i.update=s}return n.concat(o.map(a=>({name:a.signals.data})))},signals:(t,r,n)=>{if(t.parent&&!R1e(t))for(let o of r.scales){let i=n.filter(s=>s.name===o.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},Fp=idr});function Tit(t,r,n){var o;let i=(o=t.fieldDef(r))===null||o===void 0?void 0:o.field;zy(t,s=>{var a,l;let u=(a=s.project.hasField[i])!==null&&a!==void 0?a:s.project.hasChannel[r];if(u&&Cit.has(s)){let c=(l=n.get("selections"))!==null&&l!==void 0?l:[];c.push(s.name),n.set("selections",c,!1),u.hasLegend=!0}})}var Cit,Eit,j1e=D(()=>{"use strict";H_();nr();Sf();un();HF();bt();sO();IK();Cit={has:t=>{let r=t.resolve==="global"&&t.bind&&GB(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==Tv;return r&&!n&&st(it.LEGEND_BINDINGS_PROJECT_LENGTH),r&&n},parse:(t,r,n,o)=>{var i;if(o.on||delete r.events,o.clear||delete r.clear,o.on||o.clear){let l='event.item && indexof(event.item.mark.role, "legend") < 0';for(let u of r.events)u.filter=kn((i=u.filter)!==null&&i!==void 0?i:[]),u.filter.indexOf(l)<0&&u.filter.push(l)}let s=nK(r.bind)?r.bind.legend:"click",a=fr(s)?lf(s,"view"):kn(s);r.bind={legend:{merge:a}}},topLevelSignals:(t,r,n)=>{let o=r.name,i=nK(r.bind)&&r.bind.legend,s=a=>l=>{let u=or(l);return u.markname=a,u};for(let a of r.project.items){if(!a.hasLegend)continue;let l=`${Sn(a.field)}_legend`,u=`${o}_${l}`;if(n.filter(f=>f.name===u).length===0){let f=i.merge.map(s(`${l}_symbols`)).concat(i.merge.map(s(`${l}_labels`))).concat(i.merge.map(s(`${l}_entries`)));n.unshift(Object.assign(Object.assign({name:u},r.init?{}:{value:null}),{on:[{events:f,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.find(p=>p.name===o+fl),a=o+Dv,l=i.items.filter(p=>p.hasLegend).map(p=>Sn(`${o}_${Sn(p.field)}_legend`)),c=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${a}, values: [${l.join(", ")}]} : null`;r.events&&l.length>0?s.on.push({events:l.map(p=>({signal:p})),update:c}):l.length>0&&(s.update=c,delete s.value,delete s.on);let f=n.find(p=>p.name===o+aO),d=nK(r.bind)&&r.bind.legend;return f&&(r.events?f.on.push(Object.assign(Object.assign({},f.on[0]),{events:d})):f.on[0].events=d),n}},Eit=Cit});function Ait(t,r,n,o,i){var s;let a=r.name,l=a+kit,u=a+Iit,c=n.channel,f=Fp.has(r),d=i.filter(w=>w.name===n.signals[f?"data":"visual"])[0],p=t.getSizeSignalRef(o).signal,m=t.getScaleComponent(c),h=m.get("type"),g=f&&c===Qn?"-":"",y=`${l}.extent_${c}`,b=`${g}${u}.${c} / `+(f?`${p}`:`span(${y})`),v=`${f?h==="log"?"panLog":h==="pow"?"panPow":"panLinear":"panLinear"}(${y}, ${b}`+(f&&h==="pow"?`, ${(s=m.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";d.on.push({events:{signal:u},update:f?v:`clampRange(${v}, 0, ${p})`})}var kit,Iit,sdr,Dit,Nit=D(()=>{"use strict";H_();Er();NK();r$();kit="_translate_anchor",Iit="_translate_delta",sdr={has:t=>t.type==="interval"&&t.translate,signals:(t,r,n)=>{let o=r.name,i=Fp.has(r),s=o+kit,{x:a,y:l}=r.project.hasChannel,u=lf(r.translate,"scope");return i||(u=u.map(c=>(c.between[0].markname=o+oA,c))),n.push({name:s,value:{},on:[{events:u.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?", extent_x: "+(i?t$(t,Qn):`slice(${a.signals.visual})`):"")+(l!==void 0?", extent_y: "+(i?t$(t,li):`slice(${l.signals.visual})`):"")+"}"}]},{name:o+Iit,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&Ait(t,r,a,"width",n),l!==void 0&&Ait(t,r,l,"height",n),n}},Dit=sdr});function Fit(t,r,n,o,i){var s;let a=r.name,l=n.channel,u=Fp.has(r),c=i.filter(x=>x.name===n.signals[u?"data":"visual"])[0],f=t.getSizeSignalRef(o).signal,d=t.getScaleComponent(l),p=d.get("type"),m=u?t$(t,l):c.name,h=a+Mit,g=`${a}${Oit}.${l}`,b=`${u?p==="log"?"zoomLog":p==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${m}, ${g}, ${h}`+(u&&p==="pow"?`, ${(s=d.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";c.on.push({events:{signal:h},update:u?b:`clampRange(${b}, 0, ${f})`})}var Oit,Mit,adr,Rit,jit=D(()=>{"use strict";H_();nr();Er();NK();r$();Oit="_zoom_anchor",Mit="_zoom_delta",adr={has:t=>t.type==="interval"&&t.zoom,signals:(t,r,n)=>{let o=r.name,i=Fp.has(r),s=o+Mit,{x:a,y:l}=r.project.hasChannel,u=Zr(t.scaleName(Qn)),c=Zr(t.scaleName(li)),f=lf(r.zoom,"scope");return i||(f=f.map(d=>(d.markname=o+oA,d))),n.push({name:o+Oit,on:[{events:f,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(d=>!!d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&Fit(t,r,a,"width",n),l!==void 0&&Fit(t,r,l,"height",n),n}},Rit=adr});function lO(t,r){for(let n of ldr)n.has(t)&&r(n)}var ldr,P1e=D(()=>{"use strict";Sit();M1e();F1e();sO();r$();j1e();IK();Nit();jit();ldr=[wit,kK,Fp,Eit,Dit,Rit,AK,TK,_it]});function f2(t,r=!0,n=HY){if(Lt(t)){let o=t.map(i=>f2(i,r,n));return r?`[${o.join(", ")}]`:o}else if(Ay(t))return n(r?e2(t):ynt(t));return r?n(JSON.stringify(t)):t}function Pit(t,r){return zy(t,(n,o)=>{let i=n.name,s=o.modifyExpr(t,n);r.push(...o.signals(t,n)),lO(n,a=>{a.signals&&(r=a.signals(t,n,r)),a.modifyExpr&&(s=a.modifyExpr(t,n,s))}),r.push({name:i+Vit,on:[{events:{signal:n.name+fl},update:`modify(${Zr(n.name+Dh)}, ${s})`}]})}),B1e(r)}function Lit(t,r){if(t.component.selection&&nt(t.component.selection).length){let n=Zr(t.getName("cell"));r.unshift({name:"facet",value:{},on:[{events:lf("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return B1e(r)}function Bit(t,r){let n=!1;return zy(t,(o,i)=>{let s=o.name,a=Zr(s+Dh);if(r.filter(u=>u.name===s).length===0){let u=o.resolve==="global"?"union":o.resolve,c=o.type==="multi"?", true)":")";r.push({name:o.name,update:`${DK}(${a}, ${Zr(u)}${c}`})}n=!0,i.topLevelSignals&&(r=i.topLevelSignals(t,o,r)),lO(o,u=>{u.topLevelSignals&&(r=u.topLevelSignals(t,o,r))})}),n&&r.filter(i=>i.name==="unit").length===0&&r.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),B1e(r)}function $it(t,r){let n=[...r];return zy(t,o=>{let i={name:o.name+Dh};if(o.init){let a=o.project.items.map(u=>{let{signals:c}=u;return jt(u,["signals"])}),l=o.init.map(u=>f2(u,!1));i.values=o.type==="interval"?[{unit:Cf(t,{escape:!1}),fields:a,values:l}]:l.map(u=>({unit:Cf(t,{escape:!1}),fields:a,values:u}))}n.filter(a=>a.name===o.name+Dh).length||n.push(i)}),n}function L1e(t,r){return zy(t,(n,o)=>{r=o.marks?o.marks(t,n,r):r,lO(n,i=>{i.marks&&(r=i.marks(t,n,r))})}),r}function zit(t,r){for(let n of t.children)eo(n)&&(r=L1e(n,r));return r}function Uit(t,r){let n=r.selection,o=t.getSelectionComponent(n,Sn(n));return{signal:FK(o,r)}}function B1e(t){return t.map(r=>(r.on&&!r.on.length&&delete r.on,r))}var nA=D(()=>{"use strict";wo();H_();nr();Sf();NF();bt();ns();P1e();tA()});function cdr(t,r,n,o){let i=n.channel,s=n.signals.visual,a=n.signals.data,l=Fp.has(r),u=Zr(t.scaleName(i)),c=t.getScaleComponent(i),f=c?c.get("type"):void 0,d=g=>`scale(${u}, ${g})`,p=t.getSizeSignalRef(i===Qn?"width":"height").signal,m=`${i}(unit)`,h=Wit(r,(g,y)=>[...g,{events:y.between[0],update:`[${m}, ${m}]`},{events:y,update:`[${s}[0], clamp(${m}, 0, ${p})]`}]);return h.push({events:{signal:r.name+$1e},update:ta(f)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),l?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},o?{init:f2(o,!0,d)}:{value:[]}),{on:h}),Object.assign(Object.assign({name:a},o?{init:f2(o)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]})]}function Wit(t,r){return t.events.reduce((n,o)=>o.between?r(n,o):(st(`${o} is not an ordered event stream for interval selections.`),n),[])}var oA,$1e,udr,Git,NK=D(()=>{"use strict";wo();nr();Sf();Er();un();xi();bt();nA();sO();r$();oA="_brush",$1e="_scale_trigger",udr={signals:(t,r)=>{let n=r.name,o=n+Dv,i=Fp.has(r),s=[],a=[],l=[];if(r.translate&&!i){let f=`!event.item || event.item.mark.name !== ${Zr(n+oA)}`;Wit(r,(d,p)=>{var m;let h=kn((m=p.between[0].filter)!==null&&m!==void 0?m:p.between[0].filter=[]);return h.indexOf(f)<0&&h.push(f),d})}r.project.items.forEach((f,d)=>{let p=f.channel;if(p!==Qn&&p!==li){st("Interval selections only support x and y encoding channels.");return}let m=r.init?r.init[d]:null,h=cdr(t,r,f,m),g=f.signals.data,y=f.signals.visual,b=Zr(t.scaleName(p)),x=t.getScaleComponent(p).get("type"),v=ta(x)?"+":"";s.push(...h),a.push(g),l.push({scaleName:t.scaleName(p),expr:`(!isArray(${g}) || (${v}invert(${b}, ${y})[0] === ${v}${g}[0] && ${v}invert(${b}, ${y})[1] === ${v}${g}[1]))`})}),i||s.push({name:n+$1e,value:{},on:[{events:l.map(f=>({scale:f.scaleName})),update:l.map(f=>f.expr).join(" && ")+` ? ${n+$1e} : {}`}]});let u=r.init,c=`unit: ${Cf(t)}, fields: ${o}, values`;return s.concat(Object.assign(Object.assign({name:n+fl},u?{init:`{${c}: ${f2(u)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+` ? {${c}: [${a}]} : null`}]}))},modifyExpr:(t,r)=>r.name+fl+", "+(r.resolve==="global"?"true":`{unit: ${Cf(t)}}`),marks:(t,r,n)=>{let o=r.name,{x:i,y:s}=r.project.hasChannel,a=i&&i.signals.visual,l=s&&s.signals.visual,u=`data(${Zr(r.name+Dh)})`;if(Fp.has(r))return n;let c={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${l}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(r.resolve==="global")for(let y of nt(c))c[y]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${Cf(t)}`},c[y]),{value:0}];let f=r.mark,{fill:d,fillOpacity:p,cursor:m}=f,h=jt(f,["fill","fillOpacity","cursor"]),g=nt(h).reduce((y,b)=>(y[b]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${l}[0] !== ${l}[1]`].filter(x=>x).join(" && "),value:h[b]},{value:null}],y),{});return[{name:o+oA+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:p}},update:c}},...n,{name:o+oA,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},m?{cursor:{value:m}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),g)}}]}},Git=udr});function z1e(t,r){let n=r.name,o=n+Dv,i=r.project,s="(item().isVoronoi ? datum.datum : datum)",a=i.items.map(c=>{let f=t.fieldDef(c.channel);return f&&f.bin?`[${s}[${Zr(t.vgField(c.channel,{}))}], ${s}[${Zr(t.vgField(c.channel,{binSuffix:"end"}))}]]`:`${s}[${Zr(c.field)}]`}).join(", "),l=`unit: ${Cf(t)}, fields: ${o}, values`,u=r.events;return[{name:n+fl,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${l}: [${a}]} : null`,force:!0}]:[]}]}var fdr,qit,U1e=D(()=>{"use strict";nr();Sf();sO();fdr={signals:z1e,modifyExpr:(t,r)=>r.name+fl+", "+(r.resolve==="global"?"null":`{unit: ${Cf(t)}}`)},qit=fdr});var ddr,Hit,Yit=D(()=>{"use strict";Sf();U1e();ddr={signals:z1e,modifyExpr:(t,r)=>r.name+fl+", "+(r.resolve==="global"?"true":`{unit: ${Cf(t)}}`)},Hit=ddr});function zy(t,r){let n=t.component.selection;if(n){for(let o of Cp(n))if(r(o,pdr[o.type])===!0)break}}function mdr(t){let r=t.parent;for(;r&&!dl(r);)r=r.parent;return r}function Cf(t,{escape:r}={escape:!0}){let n=r?Zr(t.name):t.name,o=mdr(t);if(o){let{facet:i}=o;for(let s of al)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Zr(o.vgField(s))}])`)}return n}function n$(t){let r=!1;return zy(t,n=>{r=r||n.project.items.some(o=>o.field===Tv)}),r}var Dh,fl,Vit,DK,pdr,Sf=D(()=>{"use strict";nr();Er();HF();bt();ns();NK();U1e();Yit();Dh="_store",fl="_tuple",Vit="_modify",DK="vlSelectionResolve",pdr={single:Hit,multi:qit,interval:Git}});function Ef(t){this.type=t}function hdr(t){switch(t.type){case Jit:return t.elements;case est:case nst:return[t.left,t.right];case tst:return[t.callee].concat(t.arguments);case rst:return[t.test,t.consequent,t.alternate];case ost:return[t.object,t.property];case ist:return t.properties;case Zit:return[t.key,t.value];case sst:return[t.argument];case Qit:case Kit:case Xit:default:return[]}}var Xit,Kit,Zit,Qit,Jit,est,tst,rst,nst,ost,ist,sst,V1e=D(()=>{"use strict";Xit="RawCode",Kit="Literal",Zit="Property",Qit="Identifier",Jit="ArrayExpression",est="BinaryExpression",tst="CallExpression",rst="ConditionalExpression",nst="LogicalExpression",ost="MemberExpression",ist="ObjectExpression",sst="UnaryExpression";Ef.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=hdr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1}});function PK(t,r){if(!t)throw new Error("ASSERT: "+r)}function Nv(t){return t>=48&&t<=57}function X1e(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function i$(t){return"01234567".indexOf(t)>=0}function Rdr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function a$(t){return t===10||t===13||t===8232||t===8233}function c$(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Odr.test(String.fromCharCode(t))}function MK(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Mdr.test(String.fromCharCode(t))}function gst(){for(var t;dt<ku&&(t=hr.charCodeAt(dt),Rdr(t)||a$(t));)++dt}function Y1e(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)dt<ku&&X1e(hr[dt])?(o=hr[dt++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):_o({},Ul,Au);return String.fromCharCode(i)}function Pdr(){var t,r,n,o;for(t=hr[dt],r=0,t==="}"&&_o({},Ul,Au);dt<ku&&(t=hr[dt++],!!X1e(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&_o({},Ul,Au),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function yst(){var t,r;for(t=hr.charCodeAt(dt++),r=String.fromCharCode(t),t===92&&(hr.charCodeAt(dt)!==117&&_o({},Ul,Au),++dt,t=Y1e("u"),(!t||t==="\\"||!c$(t.charCodeAt(0)))&&_o({},Ul,Au),r=t);dt<ku&&(t=hr.charCodeAt(dt),!!MK(t));)++dt,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),hr.charCodeAt(dt)!==117&&_o({},Ul,Au),++dt,t=Y1e("u"),(!t||t==="\\"||!MK(t.charCodeAt(0)))&&_o({},Ul,Au),r+=t);return r}function Ldr(){var t,r;for(t=dt++;dt<ku;){if(r=hr.charCodeAt(dt),r===92)return dt=t,yst();if(MK(r))++dt;else break}return hr.slice(t,dt)}function Bdr(){var t,r,n;return t=dt,r=hr.charCodeAt(dt)===92?yst():Ldr(),r.length===1?n=iA:jdr.hasOwnProperty(r)?n=d2:r==="null"?n=jK:r==="true"||r==="false"?n=RK:n=iA,{type:n,value:r,start:t,end:dt}}function W1e(){var t=dt,r=hr.charCodeAt(dt),n,o=hr[dt],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++dt,{type:Tf,value:String.fromCharCode(r),start:t,end:dt};default:if(n=hr.charCodeAt(dt+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return dt+=2,{type:Tf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:dt};case 33:case 61:return dt+=2,hr.charCodeAt(dt)===61&&++dt,{type:Tf,value:hr.slice(t,dt),start:t,end:dt}}}if(a=hr.substr(dt,4),a===">>>=")return dt+=4,{type:Tf,value:a,start:t,end:dt};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return dt+=3,{type:Tf,value:s,start:t,end:dt};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return dt+=2,{type:Tf,value:i,start:t,end:dt};if("<>=!+-*%&|^/".indexOf(o)>=0)return++dt,{type:Tf,value:o,start:t,end:dt};_o({},Ul,Au)}function $dr(t){for(var r="";dt<ku&&X1e(hr[dt]);)r+=hr[dt++];return r.length===0&&_o({},Ul,Au),c$(hr.charCodeAt(dt))&&_o({},Ul,Au),{type:aA,value:parseInt("0x"+r,16),start:t,end:dt}}function zdr(t){for(var r="0"+hr[dt++];dt<ku&&i$(hr[dt]);)r+=hr[dt++];return(c$(hr.charCodeAt(dt))||Nv(hr.charCodeAt(dt)))&&_o({},Ul,Au),{type:aA,value:parseInt(r,8),octal:!0,start:t,end:dt}}function ast(){var t,r,n;if(n=hr[dt],PK(Nv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=dt,t="",n!=="."){if(t=hr[dt++],n=hr[dt],t==="0"){if(n==="x"||n==="X")return++dt,$dr(r);if(i$(n))return zdr(r);n&&Nv(n.charCodeAt(0))&&_o({},Ul,Au)}for(;Nv(hr.charCodeAt(dt));)t+=hr[dt++];n=hr[dt]}if(n==="."){for(t+=hr[dt++];Nv(hr.charCodeAt(dt));)t+=hr[dt++];n=hr[dt]}if(n==="e"||n==="E")if(t+=hr[dt++],n=hr[dt],(n==="+"||n==="-")&&(t+=hr[dt++]),Nv(hr.charCodeAt(dt)))for(;Nv(hr.charCodeAt(dt));)t+=hr[dt++];else _o({},Ul,Au);return c$(hr.charCodeAt(dt))&&_o({},Ul,Au),{type:aA,value:parseFloat(t),start:r,end:dt}}function Udr(){var t="",r,n,o,i,s=!1;for(r=hr[dt],PK(r==="'"||r==='"',"String literal must starts with a quote"),n=dt,++dt;dt<ku;)if(o=hr[dt++],o===r){r="";break}else if(o==="\\")if(o=hr[dt++],!o||!a$(o.charCodeAt(0)))switch(o){case"u":case"x":hr[dt]==="{"?(++dt,t+=Pdr()):t+=Y1e(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:i$(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),dt<ku&&i$(hr[dt])&&(s=!0,i=i*8+"01234567".indexOf(hr[dt++]),"0123".indexOf(o)>=0&&dt<ku&&i$(hr[dt])&&(i=i*8+"01234567".indexOf(hr[dt++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&hr[dt]===`
`&&++dt;else{if(a$(o.charCodeAt(0)))break;t+=o}return r!==""&&_o({},Ul,Au),{type:u$,value:t,octal:s,start:n,end:dt}}function Vdr(t,r){var n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(o,i){if(parseInt(i,16)<=1114111)return"x";_o({},H1e)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{_o({},H1e)}try{return new RegExp(t,r)}catch{return null}}function Gdr(){var t,r,n,o,i;for(t=hr[dt],PK(t==="/","Regular expression literal must start with a slash"),r=hr[dt++],n=!1,o=!1;dt<ku;)if(t=hr[dt++],r+=t,t==="\\")t=hr[dt++],a$(t.charCodeAt(0))&&_o({},G1e),r+=t;else if(a$(t.charCodeAt(0)))_o({},G1e);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||_o({},G1e),i=r.substr(1,r.length-2),{value:i,literal:r}}function Wdr(){var t,r,n;for(r="",n="";dt<ku&&(t=hr[dt],!!MK(t.charCodeAt(0)));)++dt,t==="\\"&&dt<ku?_o({},Ul,Au):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&_o({},H1e,n),{value:n,literal:r}}function qdr(){var t,r,n,o;return Po=null,gst(),t=dt,r=Gdr(),n=Wdr(),o=Vdr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:dt}}function Hdr(t){return t.type===iA||t.type===d2||t.type===RK||t.type===jK}function bst(){var t;return gst(),dt>=ku?{type:l$,start:dt,end:dt}:(t=hr.charCodeAt(dt),c$(t)?Bdr():t===40||t===41||t===59?W1e():t===39||t===34?Udr():t===46?Nv(hr.charCodeAt(dt+1))?ast():W1e():Nv(t)?ast():W1e())}function Af(){var t;return t=Po,dt=t.end,Po=bst(),dt=t.end,t}function xst(){var t;t=dt,Po=bst(),dt=t}function Ydr(t){var r=new Ef(ydr);return r.elements=t,r}function lst(t,r,n){var o=new Ef(t==="||"||t==="&&"?_dr:bdr);return o.operator=t,o.left=r,o.right=n,o}function Xdr(t,r){var n=new Ef(xdr);return n.callee=t,n.arguments=r,n}function Kdr(t,r,n){var o=new Ef(vdr);return o.test=t,o.consequent=r,o.alternate=n,o}function K1e(t){var r=new Ef(mst);return r.name=t,r}function o$(t){var r=new Ef(wdr);return r.value=t.value,r.raw=hr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function ust(t,r,n){var o=new Ef(Sdr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function Zdr(t){var r=new Ef(Cdr);return r.properties=t,r}function cst(t,r,n){var o=new Ef(Edr);return o.key=r,o.value=n,o.kind=t,o}function Qdr(t,r){var n=new Ef(Tdr);return n.operator=t,n.argument=r,n.prefix=!0,n}function _o(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,function(s,a){return PK(a<o.length,"Message reference must be in range"),o[a]});throw n=new Error(i),n.index=dt,n.description=i,n}function LK(t){t.type===l$&&_o(t,Ndr),t.type===aA&&_o(t,Adr),t.type===u$&&_o(t,kdr),t.type===iA&&_o(t,Idr),t.type===d2&&_o(t,Ddr),_o(t,Ul,t.value)}function Iu(t){var r=Af();(r.type!==Tf||r.value!==t)&&LK(r)}function Oi(t){return Po.type===Tf&&Po.value===t}function q1e(t){return Po.type===d2&&Po.value===t}function Jdr(){var t=[];for(dt=Po.start,Iu("[");!Oi("]");)Oi(",")?(Af(),t.push(null)):(t.push(sA()),Oi("]")||Iu(","));return Af(),Ydr(t)}function fst(){var t;return dt=Po.start,t=Af(),t.type===u$||t.type===aA?(t.octal&&_o(t,hst),o$(t)):K1e(t.value)}function epr(){var t,r,n,o;if(dt=Po.start,t=Po,t.type===iA)return n=fst(),Iu(":"),o=sA(),cst("init",n,o);if(t.type===l$||t.type===Tf)LK(t);else return r=fst(),Iu(":"),o=sA(),cst("init",r,o)}function tpr(){var t=[],r,n,o,i={},s=String;for(dt=Po.start,Iu("{");!Oi("}");)r=epr(),r.key.type===mst?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?_o({},Fdr):i[o]=!0,t.push(r),Oi("}")||Iu(",");return Iu("}"),Zdr(t)}function rpr(){var t;return Iu("("),t=Z1e(),Iu(")"),t}function opr(){var t,r,n;if(Oi("("))return rpr();if(Oi("["))return Jdr();if(Oi("{"))return tpr();if(t=Po.type,dt=Po.start,t===iA||npr[Po.value])n=K1e(Af().value);else if(t===u$||t===aA)Po.octal&&_o(Po,hst),n=o$(Af());else{if(t===d2)throw new Error(s$);t===RK?(r=Af(),r.value=r.value==="true",n=o$(r)):t===jK?(r=Af(),r.value=null,n=o$(r)):Oi("/")||Oi("/=")?(n=o$(qdr()),xst()):LK(Af())}return n}function ipr(){var t=[];if(Iu("("),!Oi(")"))for(;dt<ku&&(t.push(sA()),!Oi(")"));)Iu(",");return Iu(")"),t}function spr(){var t;return dt=Po.start,t=Af(),Hdr(t)||LK(t),K1e(t.value)}function apr(){return Iu("."),spr()}function lpr(){var t;return Iu("["),t=Z1e(),Iu("]"),t}function upr(){var t,r,n;for(t=opr();;)if(Oi("."))n=apr(),t=ust(".",t,n);else if(Oi("("))r=ipr(),t=Xdr(t,r);else if(Oi("["))n=lpr(),t=ust("[",t,n);else break;return t}function dst(){var t=upr();if(Po.type===Tf&&(Oi("++")||Oi("--")))throw new Error(s$);return t}function OK(){var t,r;if(Po.type!==Tf&&Po.type!==d2)r=dst();else{if(Oi("++")||Oi("--"))throw new Error(s$);if(Oi("+")||Oi("-")||Oi("~")||Oi("!"))t=Af(),r=OK(),r=Qdr(t.value,r);else{if(q1e("delete")||q1e("void")||q1e("typeof"))throw new Error(s$);r=dst()}}return r}function pst(t){var r=0;if(t.type!==Tf&&t.type!==d2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function cpr(){var t,r,n,o,i,s,a,l,u,c;if(t=Po,u=OK(),o=Po,i=pst(o),i===0)return u;for(o.prec=i,Af(),r=[t,Po],a=OK(),s=[u,o,a];(i=pst(Po))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=lst(l,u,a),s.push(n);o=Af(),o.prec=i,s.push(o),r.push(Po),n=OK(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=lst(s[c-1].value,s[c-2],n),c-=2;return n}function sA(){var t,r,n;return t=cpr(),Oi("?")&&(Af(),r=sA(),Iu(":"),n=sA(),t=Kdr(t,r,n)),t}function Z1e(){var t=sA();if(Oi(","))throw new Error(s$);return t}function Q1e(t){hr=t,dt=0,ku=hr.length,Po=null,xst();var r=Z1e();if(Po.type!==l$)throw new Error("Unexpect token after expression.");return r}var Uy,hr,dt,ku,Po,RK,l$,iA,d2,jK,aA,Tf,u$,gdr,ydr,bdr,xdr,vdr,mst,wdr,_dr,Sdr,Cdr,Edr,Tdr,Ul,Adr,kdr,Idr,Ddr,Ndr,H1e,G1e,hst,Fdr,Au,s$,Odr,Mdr,jdr,npr,vst=D(()=>{"use strict";V1e();RK=1,l$=2,iA=3,d2=4,jK=5,aA=6,Tf=7,u$=8,gdr=9;Uy={};Uy[RK]="Boolean";Uy[l$]="<end>";Uy[iA]="Identifier";Uy[d2]="Keyword";Uy[jK]="Null";Uy[aA]="Numeric";Uy[Tf]="Punctuator";Uy[u$]="String";Uy[gdr]="RegularExpression";ydr="ArrayExpression",bdr="BinaryExpression",xdr="CallExpression",vdr="ConditionalExpression",mst="Identifier",wdr="Literal",_dr="LogicalExpression",Sdr="MemberExpression",Cdr="ObjectExpression",Edr="Property",Tdr="UnaryExpression",Ul="Unexpected token %0",Adr="Unexpected number",kdr="Unexpected string",Idr="Unexpected identifier",Ddr="Unexpected reserved word",Ndr="Unexpected end of input",H1e="Invalid regular expression",G1e="Invalid regular expression: missing /",hst="Octal literals are not allowed in strict mode.",Fdr="Duplicate data property in object literal not allowed in strict mode",Au="ILLEGAL",s$="Disabled.",Odr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Mdr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");jdr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};npr={if:1}});var J1e=D(()=>{"use strict"});function uO(t,r,n){return t.fields=r||[],t.fname=n,t}function fpr(t){return t.length===1?dpr(t[0]):ppr(t)}function f$(t){throw Error(t)}function mpr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||f$("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&f$("Access path missing closing bracket: "+t),o&&f$("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function hpr(t,r,n){let o=mpr(t);return t=o.length===1?o[0]:t,uO((n&&n.get||fpr)(o),[t],r||t)}var dpr,ppr,jso,Pso,Lso,Bso,$so,zso,Uso,ewe=D(()=>{"use strict";dpr=t=>function(r){return r[t]},ppr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};jso=hpr("id"),Pso=uO(t=>t,[],"identity"),Lso=uO(()=>0,[],"zero"),Bso=uO(()=>1,[],"one"),$so=uO(()=>!0,[],"true"),zso=uO(()=>!1,[],"false"),Uso=Array.isArray});var twe=D(()=>{"use strict";ewe()});var wst=D(()=>{"use strict";J1e();twe();ewe()});var _st=D(()=>{"use strict";V1e();vst();wst();twe();J1e()});function rwe(t){let r=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(r.push(...rwe(t.object)),r.push(...rwe(t.property))),r)}function Sst(t){return t.object.type==="MemberExpression"?Sst(t.object):t.object.name==="datum"}function BK(t){let r=Q1e(t),n=new Set;return r.visit(o=>{o.type==="MemberExpression"&&Sst(o)&&n.add(rwe(o).slice(1).join("."))}),n}var nwe=D(()=>{"use strict";_st()});var Vy,d$=D(()=>{"use strict";bt();xK();Jn();nwe();Vy=class t extends Tr{constructor(r,n,o){super(r),this.model=n,this.filter=o,this.expr=rA(this.model,this.filter,this),this._dependentFields=BK(this.expr)}clone(){return new t(null,this.model,or(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}});function Cst(t,r){var n;let o={},i=t.config.selection;for(let s of nt(r??{})){let a=or(r[s]),l=i[a.type],{fields:u,encodings:c}=l,f=jt(l,["fields","encodings"]);for(let m in f)m==="encodings"&&a.fields||m==="fields"&&a.encodings||(m==="mark"&&(a[m]=Object.assign(Object.assign({},f[m]),a[m])),(a[m]===void 0||a[m]===!0)&&(a[m]=(n=f[m])!==null&&n!==void 0?n:a[m]));let d=Sn(s),p=o[d]=Object.assign(Object.assign({},a),{name:d,events:fr(a.on)?lf(a.on,"scope"):or(a.on)});lO(p,m=>{m.has(p)&&m.parse&&m.parse(t,p,a,r[s])})}return o}function bK(t,r,n,o="datum"){let i=[];function s(l){let u=Sn(l),c=t.getSelectionComponent(u,l),f=Zr(u+Dh);if(c.project.timeUnit){let d=n??t.component.data.raw,p=c.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}return c.empty!=="none"&&i.push(f),`vlSelectionTest(${f}, ${o}`+(c.resolve==="global"?")":`, ${Zr(c.resolve)})`)}let a=BT(r,s);return(i.length?"!("+i.map(l=>`length(data(${l}))`).join(" || ")+") || ":"")+`(${a})`}function FK(t,r){let n=r.encoding,o=r.field;if(!n&&!o)o=t.project.items[0].field,t.project.items.length>1&&st(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Zr(o)}.`);else if(n&&!o){let i=t.project.items.filter(s=>s.channel===n);!i.length||i.length>1?(o=t.project.items[0].field,st((i.length?"Multiple ":"No ")+`matching ${Zr(n)} encoding found for selection ${Zr(r.selection)}. Using "field": ${Zr(o)}.`)):o=i[0].field}return`${t.name}[${Zr(o)}]`}function Est(t,r){zy(t,n=>{let o=n.name,i=t.getName(`lookup_${o}`);t.component.data.outputNodes[i]=n.materialized=new rs(new Vy(r,t,{selection:o}),i,"lookup",t.component.data.outputNodeRefCounts)})}var tA=D(()=>{"use strict";wo();H_();nr();Sf();un();bt();Jn();d$();P1e()});function rA(t,r,n){return BT(r,o=>fr(o)?o:knt(o)?bK(t,o.selection,n):IX(o))}var xK=D(()=>{"use strict";nr();YT();bt();tA()});function bpr(t,r){if(t)return Lt(t)&&!Ih(t)?t.map(n=>Yve(n,r)).join(", "):t}function owe(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function cO(t,r,n,o={header:!1}){var i,s;let a=t.combine(),{disable:l,orient:u,scale:c,labelExpr:f,title:d,zindex:p}=a,m=jt(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!l){for(let h in m){let g=Art[h],y=m[h];if(g&&g!==r&&g!=="both")delete m[h];else if(bF(y)){let{condition:b}=y,x=jt(y,["condition"]),v=kn(b),w=bve[h];if(w){let{vgProp:_,part:C}=w,S=[...v.map(E=>{let{test:A}=E,N=jt(E,["test"]);return Object.assign({test:rA(null,A)},N)}),x];owe(m,C,_,S),delete m[h]}else if(w===null){let _={signal:v.map(C=>{let{test:S}=C,E=jt(C,["test"]);return`${rA(null,S)} ? ${Kve(E)} : `}).join("")+Kve(x)};m[h]=_}}else if(er(y)){let b=bve[h];if(b){let{vgProp:x,part:v}=b;owe(m,v,x,y),delete m[h]}}}if(r==="grid"){if(!m.grid)return;if(m.encode){let{grid:h}=m.encode;m.encode=Object.assign({},h?{grid:h}:{}),hn(m.encode)&&delete m.encode}return Object.assign(Object.assign({scale:c,orient:u},m),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:In(p,0)})}else{if(!o.header&&t.mainExtracted)return;if(f!==void 0){let g=f;!((s=(i=m.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&er(m.encode.labels.update.text)&&(g=Cy(f,"datum.label",m.encode.labels.update.text.signal)),owe(m,"labels","text",{signal:g})}if(m.labelAlign===null&&delete m.labelAlign,m.encode){for(let g of dX)t.hasAxisPart(g)||delete m.encode[g];hn(m.encode)&&delete m.encode}let h=bpr(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:u,grid:!1},h?{title:h}:{}),m),n.aria===!1?{aria:!1}:{}),{zindex:In(p,0)})}}}function $K(t){let{axes:r}=t.component,n=[];for(let o of gs)if(r[o]){for(let i of r[o])if(!i.get("disable")&&!i.get("gridScale")){let s=o==="x"?"height":"width",a=t.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function Tst(t,r){let{x:n=[],y:o=[]}=t;return[...n.map(i=>cO(i,"grid",r)),...o.map(i=>cO(i,"grid",r)),...n.map(i=>cO(i,"main",r)),...o.map(i=>cO(i,"main",r))].filter(i=>i)}var p$=D(()=>{"use strict";wo();nr();EB();Er();kr();LB();bt();co();jo();xK()});var iwe,swe,Ast,kst,Ist=D(()=>{"use strict";bt();iwe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},swe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Ast=nt(iwe),kst=nt(swe)});function Dst(t,r,n,o){return Object.assign.apply(null,[{},...t.map(i=>{if(i==="axisOrient"){let s=n==="x"?"bottom":"left",a=r[n==="x"?"axisBottom":"axisLeft"]||{},l=r[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...nt(a),...nt(l)]),c={};for(let f of u.values())c[f]={signal:`${o.signal} === "${s}" ? ${o2(a[f])} : ${o2(l[f])}`};return c}return r[i]})])}function Nst(t,r,n,o){let i=r==="band"?["axisDiscrete","axisBand"]:r==="point"?["axisDiscrete","axisPoint"]:Lnt(r)?["axisQuantitative"]:r==="time"||r==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",a=er(n)?"axisOrient":"axis"+$T(n),l=[...i,...i.map(c=>s+c.substr(4))],u=["axis",a,s];return{vlOnlyAxisConfig:Dst(l,o,t,n),vgAxisConfig:Dst(u,o,t,n),axisConfigStyle:xpr([...u,...l],o)}}function xpr(t,r){var n;let o=[{}];for(let i of t){let s=(n=r[i])===null||n===void 0?void 0:n.style;if(s){s=kn(s);for(let a of s)o.push(r.style[a])}}return Object.assign.apply(null,o)}function m$(t,r,n,o={}){var i;let s=Qve(t,n,r.style);if(s!==void 0)return{configFrom:"style",configValue:s};for(let a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=o[a])===null||i===void 0?void 0:i[t])!==void 0)return{configFrom:a,configValue:o[a][t]};return{}}var awe=D(()=>{"use strict";nr();xi();bt();co();jo()});function vpr(t,r){return!Hi(t)&&Et(r)&&!xn(r?.bin)}function wpr(t,r){let n=r==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function Fst(t,r,n,o,i){let s=r?.labelAngle;if(s!==void 0)return er(s)?s:zT(s);{let{configValue:a}=m$("labelAngle",t.config,r?.style,i);return a!==void 0?zT(a):n===Qn&&Gt([MB,OB],o.type)?270:void 0}}function lwe(t){return`(((${t.signal} % 360) + 360) % 360)`}function cwe(t,r,n,o){if(t!==void 0)if(n==="x"){if(er(t)){let i=lwe(t),s=er(r)?`(${r.signal} === "top")`:r==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(er(r)){let i=t<=45||315<=t?"===":"!==";return{signal:`${r.signal} ${i} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(r==="top")?"bottom":"top"}else{if(er(t)){let i=lwe(t),s=er(r)?`(${r.signal} === "left")`:r==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${o?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return o?"middle":null;if(er(r)){let i=45<=t&&t<=135?"===":"!==";return{signal:`${r.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(r==="left")?"top":"bottom"}}function fwe(t,r,n){if(t===void 0)return;let o=n==="x",i=o?0:90,s=o?"bottom":"left";if(er(t)){let a=lwe(t),l=er(r)?`(${r.signal} === "${s}")`:r===s;return{signal:`(${i?"("+a+" + 90)":a} % 180 === 0) ? ${o?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${l} ? "left" : "right"`}}if((t+i)%180===0)return o?null:"center";if(er(r)){let a=i<t&&t<180+i?"===":"!==";return{signal:`${`${r.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<t&&t<180+i)==(r===s)?"left":"right"}function _pr(t,r){if(r==="x"&&Gt(["quantitative","temporal"],t))return!0}function Spr(t,r){if(t!=="nominal")return r==="log"?"greedy":!0}function Ost(t){return t==="x"?"bottom":"left"}function Cpr({fieldOrDatumDef:t,scaleType:r,size:n,values:o}){var i;if(!o&&!Hi(r)&&r!=="log"){if(Et(t)){if(xn(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&Gt(["month","hours","day","quarter"],(i=ts(t.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function dwe(t,r){let n=r==="x"?"x2":"y2",o=t.fieldDef(r),i=t.fieldDef(n),s=o?o.title:void 0,a=i?i.title:void 0;if(s&&a)return e1e(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function Epr(t,r){let n=t.values;if(Lt(n))return VX(r,n);if(er(n))return n}function Tpr(t,r){return t==="rect"&&qve(r)?1:0}var uwe,pwe=D(()=>{"use strict";nr();$l();Er();kr();xi();ky();Ad();bt();co();jo();Ry();awe();uwe={scale:({model:t,channel:r})=>t.scaleName(r),format:({fieldOrDatumDef:t,config:r,axis:n})=>{let{format:o,formatType:i}=n;return OX(t,t.type,o,i,r,!0)},formatType:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return MX(o,r,n)},grid:({fieldOrDatumDef:t,axis:r,scaleType:n})=>{var o;return Et(t)&&qi(t.bin)?!1:(o=r.grid)!==null&&o!==void 0?o:vpr(n,t)},gridScale:({model:t,channel:r})=>wpr(t,r),labelAlign:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelAlign||fwe(r,n,o),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelBaseline||cwe(r,n,o),labelFlush:({axis:t,fieldOrDatumDef:r,channel:n})=>{var o;return(o=t.labelFlush)!==null&&o!==void 0?o:_pr(r.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{var o;return(o=t.labelOverlap)!==null&&o!==void 0?o:Spr(r.type,n)},orient:({orient:t})=>t,tickCount:({channel:t,model:r,axis:n,fieldOrDatumDef:o,scaleType:i})=>{var s;let a=t==="x"?"width":t==="y"?"height":void 0,l=a?r.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:Cpr({fieldOrDatumDef:o,scaleType:i,size:l,values:n.values})},title:({axis:t,model:r,channel:n})=>{if(t.title!==void 0)return t.title;let o=dwe(r,n);if(o!==void 0)return o;let i=r.typedFieldDef(n),s=n==="x"?"x2":"y2",a=r.fieldDef(s);return Jve(i?[Gve(i)]:[],Et(a)?[Gve(a)]:[])},values:({axis:t,fieldOrDatumDef:r})=>Epr(t,r),zindex:({axis:t,fieldOrDatumDef:r,mark:n})=>{var o;return(o=t.zindex)!==null&&o!==void 0?o:Tpr(n,r)}}});function Gy(t,r,n){return vt(t,Object.assign({prefix:r,suffix:"sort_index"},n??{}))}var lA,uA=D(()=>{"use strict";kr();YT();kh();bt();Jn();nwe();lA=class t extends Tr{constructor(r,n){super(r),this.transform=n,this._dependentFields=BK(this.transform.calculate)}clone(){return new t(null,or(this.transform))}static parseAllForSortIndex(r,n){return n.forEachFieldDef((o,i)=>{if(LF(o)&&jX(o.sort)){let{field:s,timeUnit:a}=o,l=o.sort,u=l.map((c,f)=>`${IX({field:s,timeUnit:a,equal:c})} ? ${f} : `).join("")+l.length;r=new t(r,{calculate:u,as:Gy(o,i,{forAs:!0})})}}),r}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${wr(this.transform)}`}}});function fO(t,r){return Gt(["top","bottom"],r)?"column":Gt(["left","right"],r)||t==="row"?"row":"column"}function Fv(t,r,n,o){let i=o==="row"?n.headerRow:o==="column"?n.headerColumn:n.headerFacet;return In((r?.header||{})[t],i[t],n.header[t])}function h$(t,r,n,o){let i={};for(let s of t){let a=Fv(s,r,n,o);a!==void 0&&(i[s]=a)}return i}var zK=D(()=>{"use strict";bt()});var dO,pO,g$=D(()=>{"use strict";dO=["row","column"],pO=["header","footer"]});function Mst(t,r){let n=t.component.layoutHeaders[r].title,o=t.config?t.config:void 0,i=t.component.layoutHeaders[r].facetFieldDef?t.component.layoutHeaders[r].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:l}=h$(["titleAnchor","titleAngle","titleOrient"],i,o,r),u=fO(r,l),c=zT(a);return{name:`${r}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},r==="row"?{orient:"left"}:{}),{style:"guide-title"}),jst(c,u)),Rst(u,c,s)),Bst(o,i,r,Ast,iwe))}}function Rst(t,r,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let o=fwe(r,t==="row"?"left":"top",t==="row"?"y":"x");return o?{align:o}:{}}function jst(t,r){let n=cwe(t,r==="row"?"left":"top",r==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Pst(t,r){let n=t.component.layoutHeaders[r],o=[];for(let i of pO)if(n[i])for(let s of n[i]){let a=kpr(t,r,i,n,s);a!=null&&o.push(a)}return o}function Apr(t,r){var n;let{sort:o}=t;return cl(o)?{field:vt(o,{expr:"datum"}),order:(n=o.order)!==null&&n!==void 0?n:"ascending"}:Lt(o)?{field:Gy(t,r,{expr:"datum"}),order:"ascending"}:{field:vt(t,{expr:"datum"}),order:o??"ascending"}}function UK(t,r,n){let{format:o,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:l,labelExpr:u}=h$(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,r),c=jF({fieldOrDatumDef:t,format:o,formatType:i,expr:"parent",config:n}).signal,f=fO(r,l);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?Cy(Cy(u,"datum.label",c),"datum.value",vt(t,{expr:"parent"})):c}},r==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),jst(s,f)),Rst(f,s,a)),Bst(n,t,r,kst,swe))}function kpr(t,r,n,o,i){if(i){let s=null,{facetFieldDef:a}=o,l=t.config?t.config:void 0;if(a&&i.labels){let{labelOrient:d}=h$(["labelOrient"],a,l,r);(r==="row"&&!Gt(["top","bottom"],d)||r==="column"&&!Gt(["left","right"],d))&&(s=UK(a,r,l))}let u=dl(t)&&!jy(t.facet),c=i.axes,f=c?.length>0;if(s||f){let d=r==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${r}_${n}`),type:"group",role:`${r}-${n}`},o.facetFieldDef?{from:{data:t.getName(r+"_domain")},sort:Apr(a,r)}:{}),f&&u?{from:{data:t.getName(`facet_domain_${r}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{}),f?{axes:c}:{})}}return null}function Dpr(t,r){return Ipr[r][t]}function Lst(t,r){let n={};for(let o of al){let i=t[o];if(i?.facetFieldDef){let{titleAnchor:s,titleOrient:a}=h$(["titleAnchor","titleOrient"],i.facetFieldDef,r,o),l=fO(o,a),u=Dpr(s,l);u!==void 0&&(n[l]=u)}}return hn(n)?void 0:n}function Bst(t,r,n,o,i){let s={};for(let a of o){if(!i[a])continue;let l=Fv(a,r,t,n);l!==void 0&&(s[i[a]]=l)}return s}var Ipr,mwe=D(()=>{"use strict";nr();Er();kr();Ist();kh();Ev();bt();pwe();uA();Ry();ns();zK();g$();Ipr={column:{start:0,end:1},row:{start:1,end:0}}});function mO(t){return[...VK(t,"width"),...VK(t,"height"),...VK(t,"childWidth"),...VK(t,"childHeight")]}function VK(t,r){let n=r==="width"?"x":"y",o=t.component.layoutSize.get(r);if(!o||o==="merged")return[];let i=t.getSizeSignalRef(r).signal;if(o==="step"){let s=t.getScaleComponent(n);if(s){let a=s.get("type"),l=s.get("range");if(Hi(a)&&Su(l)){let u=t.scaleName(n);return dl(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[$st(u,l)]:[$st(u,l),{name:i,update:hwe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(o=="container"){let s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",l=qB(t.config.view,s?"width":"height"),u=`isFinite(${a}) ? ${a} : ${l}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:o}]}function $st(t,r){return{name:t+"_step",value:r.step}}function hwe(t,r,n){let o=r.get("type"),i=r.get("padding"),s=In(r.get("paddingOuter"),i),a=r.get("paddingInner");return a=o==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${a}, ${s}) * ${t}_step`}var y$=D(()=>{"use strict";s2();xi();bt();co();ns()});function GK(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}var gwe=D(()=>{"use strict"});function WK(t,r){return nt(t).reduce((n,o)=>{let i=t[o];return Object.assign(Object.assign({},n),Ip(r,i,o,s=>er(s)?s:{value:s.value}))},{})}var ywe=D(()=>{"use strict";bt();co();wc()});function zst(t,r){if(Op(r)||dl(r))return"shared";if(gO(r))return ul(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function hO(t,r){let n=t.scale[r],o=ul(r)?"axis":"legend";return n==="independent"?(t[o][r]==="shared"&&st(it.independentScaleMeansIndependentGuide(r)),"independent"):t[o][r]||"shared"}var b$=D(()=>{"use strict";Er();un();ns()});var Npr,bwe,qK,Ust=D(()=>{"use strict";VB();bt();vc();Npr=Object.assign(Object.assign({},c1e),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),bwe=nt(Npr),qK=class extends Eu{}});function Fpr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i,legendType:s}){var a,l,u,c,f;if(s!=="symbol")return;let{markDef:d,encoding:p,config:m,mark:h}=n,g=d.filled&&h!=="trail",y=Object.assign(Object.assign({},oot({},n,Frt)),oO(n,{filled:g})),b=(a=Vst(p.opacity))!==null&&a!==void 0?a:d.opacity;if(y.fill){if(o==="fill"||g&&o===hs)delete y.fill;else if(y.fill.field)i.get("symbolFillColor")?delete y.fill:(y.fill=fo((l=m.legend.symbolBaseFillColor)!==null&&l!==void 0?l:"black"),y.fillOpacity=fo(b??1));else if(Lt(y.fill)){let x=(f=(c=HK((u=p.fill)!==null&&u!==void 0?u:p.color))!==null&&c!==void 0?c:d.fill)!==null&&f!==void 0?f:g&&d.color;x&&(y.fill=fo(x))}}if(y.stroke){if(o==="stroke"||!g&&o===hs)delete y.stroke;else if(y.stroke.field)delete y.stroke;else if(Lt(y.stroke)){let x=In(HK(p.stroke||p.color),d.stroke,g?d.color:void 0);x&&(y.stroke={value:x})}}if(o!==bc){let x=Et(r)&&Wst(n,i,r);x?y.opacity=[Object.assign({test:x},fo(b??1)),fo(m.legend.unselectedOpacity)]:b&&(y.opacity=fo(b))}return y=Object.assign(Object.assign({},y),t),hn(y)?void 0:y}function Opr(t,{model:r,legendType:n}){if(n!=="gradient")return;let o={},i=Vst(r.encoding.opacity)||r.markDef.opacity;return i&&(o.opacity=fo(i)),o=Object.assign(Object.assign({},o),t),hn(o)?void 0:o}function Mpr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i}){let s=n.legend(o)||{},a=n.config,l=Et(r)?Wst(n,i,r):void 0,u=l?[{test:l,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:f}=s,d=My(f)?jB({fieldOrDatumDef:r,field:"datum.value",format:c,formatType:f,config:a}):void 0,p=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),d?{text:d}:{}),t);return hn(p)?void 0:p}function Rpr(t,{legendCmpt:r}){let n=r.get("selections");return n?.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function Vst(t){return Gst(t,(r,n)=>Math.max(r,n.value))}function HK(t){return Gst(t,(r,n)=>In(r,n.value))}function Gst(t,r){if(Znt(t))return kn(t.condition).reduce(r,t.value);if(Cu(t))return t.value}function Wst(t,r,n){let o=r.get("selections");if(!o?.length)return;let i=Zr(n.field);return o.map(s=>`(!length(data(${Zr(Sn(s)+Dh)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}var xwe,vwe=D(()=>{"use strict";nr();Er();kr();ea();bt();jo();Ry();wc();Sf();xwe={symbols:Fpr,gradient:Opr,labels:Mpr,entries:Rpr}});function jpr(t,r){let n=t.values;if(Lt(n))return VX(r,n);if(er(n))return n}function Ppr(t,r,n,o){var i;if(r!=="shape"){let s=(i=HK(n))!==null&&i!==void 0?i:o;if(s)return s}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Hst(t){let{legend:r}=t;return In(r.type,Lpr(t))}function Lpr({channel:t,timeUnit:r,scaleType:n}){if(_v(t)){if(Gt(["quarter","month","day"],r))return"symbol";if(yf(n))return"gradient"}return"symbol"}function Yst({legendConfig:t,legendType:r,orient:n,legend:o}){var i,s;return(s=(i=o.direction)!==null&&i!==void 0?i:t[r?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:Bpr(n,r)}function Bpr(t,r){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return r==="gradient"?"horizontal":void 0}}function $pr({legendConfig:t,model:r,direction:n,orient:o,scaleType:i}){let{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:l,gradientVerticalMinLength:u}=t;if(yf(i))return n==="horizontal"?o==="top"||o==="bottom"?qst(r,"width",a,s):a:qst(r,"height",u,l)}function qst(t,r,n,o){return{signal:`clamp(${t.getSizeSignalRef(r).signal}, ${n}, ${o})`}}function zpr(t){if(Gt(["quantile","threshold","log"],t))return"greedy"}var wwe,Xst=D(()=>{"use strict";nr();Er();kr();xi();bt();co();Ry();vwe();wwe={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:r,config:n})=>{let{format:o,formatType:i}=r;return OX(t,t.type,o,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return MX(o,r,n)},gradientLength:t=>{var r,n;let{legend:o,legendConfig:i}=t;return(n=(r=o.gradientLength)!==null&&r!==void 0?r:i.gradientLength)!==null&&n!==void 0?n:$pr(t)},labelOverlap:({legend:t,legendConfig:r,scaleType:n})=>{var o,i;return(i=(o=t.labelOverlap)!==null&&o!==void 0?o:r.labelOverlap)!==null&&i!==void 0?i:zpr(n)},symbolType:({legend:t,markDef:r,channel:n,encoding:o})=>{var i;return(i=t.symbolType)!==null&&i!==void 0?i:Ppr(r.type,n,o.shape,r.shape)},title:({fieldOrDatumDef:t,config:r})=>kp(t,r,{allowDisabling:!0}),type:({legendType:t,scaleType:r,channel:n})=>{if(_v(n)&&yf(r)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:r})=>jpr(r,t)}});function _we(t){let r=eo(t)?Upr(t):qpr(t);return t.component.legends=r,r}function Upr(t){let{encoding:r}=t,n={};for(let o of[hs,...rK]){let i=ko(r[o]);!i||!t.getScaleComponent(o)||o===es&&Et(i)&&i.type===Ah||(n[o]=Wpr(t,o))}return n}function Vpr(t,r){let n=t.scaleName(r);if(t.mark==="trail"){if(r==="color")return{stroke:n};if(r==="size")return{strokeWidth:n}}return r==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[r]:n}}function Gpr(t,r,n,o){switch(r){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(r==="title"&&t===o?.title)return!0}return t===(n||{})[r]}function Wpr(t,r){var n,o,i;let s=t.legend(r),{markDef:a,encoding:l,config:u}=t,c=u.legend,f=new qK({},Vpr(t,r));Tit(t,r,f);let d=s!==void 0?!s:c.disable;if(f.set("disable",d,s!==void 0),d)return f;s=s||{};let p=t.getScaleComponent(r).get("type"),m=ko(l[r]),h=Et(m)?(n=ts(m.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=s.orient||u.legend.orient||"right",y=Hst({legend:s,channel:r,timeUnit:h,scaleType:p}),b=Yst({legend:s,legendType:y,orient:g,legendConfig:c}),x={legend:s,channel:r,model:t,markDef:a,encoding:l,fieldOrDatumDef:m,legendConfig:c,config:u,scaleType:p,orient:g,legendType:y,direction:b};for(let S of bwe){let E=S in wwe?wwe[S](x):s[S];if(E!==void 0){let A=Gpr(E,S,s,t.fieldDef(r));(A||u.legend[S]===void 0)&&f.set(S,E,A)}}let v=(o=s?.encoding)!==null&&o!==void 0?o:{},w=f.get("selections"),_={},C={fieldOrDatumDef:m,model:t,channel:r,legendCmpt:f,legendType:y};for(let S of["labels","legend","title","symbols","gradient","entries"]){let E=WK((i=v[S])!==null&&i!==void 0?i:{},t),A=S in xwe?xwe[S](E,C):E;A!==void 0&&!hn(A)&&(_[S]=Object.assign(Object.assign(Object.assign({},w?.length&&Et(m)?{name:`${Sn(m.field)}_legend_${S}`}:{}),w?.length?{interactive:!!w}:{}),{update:A}))}return hn(_)||f.set("encode",_,!!s?.encoding),f}function qpr(t){let{legends:r,resolve:n}=t.component;for(let o of t.children){_we(o);for(let i of nt(o.component.legends))n.legend[i]=hO(t.component.resolve,i),n.legend[i]==="shared"&&(r[i]=Swe(r[i],o.component.legends[i]),r[i]||(n.legend[i]="independent",delete r[i]))}for(let o of nt(r))for(let i of t.children)i.component.legends[o]&&n.legend[o]==="shared"&&delete i.component.legends[o];return r}function Swe(t,r){var n,o,i,s;if(!t)return r.clone();let a=t.getWithExplicit("orient"),l=r.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;let u=!1;for(let c of bwe){let f=wf(t.getWithExplicit(c),r.getWithExplicit(c),c,"legend",(d,p)=>{switch(c){case"symbolType":return Hpr(d,p);case"title":return qX(d,p);case"type":return u=!0,Tu("symbol")}return ZF(d,p,c,"legend")});t.setWithExplicit(c,f)}return u&&(!((o=(n=t.implicit)===null||n===void 0?void 0:n.encode)===null||o===void 0)&&o.gradient&&aX(t.implicit,["encode","gradient"]),!((s=(i=t.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&aX(t.explicit,["encode","gradient"])),t}function Hpr(t,r){return r.value==="circle"?r:t}var Cwe=D(()=>{"use strict";Er();kr();VB();ky();Ad();bt();jo();ywe();ns();b$();j1e();vc();Ust();vwe();Xst()});function Kst(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function YK(t){let r=t.component.legends,n={};for(let i of nt(r)){let s=t.getScaleComponent(i),a=ai(s.get("domains"));if(n[a])for(let l of n[a])Swe(l,r[i])||n[a].push(r[i]);else n[a]=[r[i].clone()]}return Cp(n).flat().map(i=>Ypr(i,t.config)).filter(i=>i!==void 0)}function Ypr(t,r){var n,o,i;let s=t.combine(),{disable:a,labelExpr:l,selections:u}=s,c=jt(s,["disable","labelExpr","selections"]);if(!a){if(r.aria===!1&&c.aria==null&&(c.aria=!1),!((n=c.encode)===null||n===void 0)&&n.symbols){let f=c.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!c.stroke&&(f.stroke={value:"transparent"});for(let d of rK)c[d]&&delete f[d]}if(c.title||delete c.title,l!==void 0){let f=l;!((i=(o=c.encode)===null||o===void 0?void 0:o.labels)===null||i===void 0)&&i.update&&er(c.encode.labels.update.text)&&(f=Cy(l,"datum.label",c.encode.labels.update.text.signal)),Kst(c,"labels","text",{signal:f})}for(let f in c){let d=c[f];if(er(d)){let p=_ot[f];if(p){let{vgProp:m,part:h}=p;Kst(c,h,m,d),delete c[f]}}}return c}}var Ewe=D(()=>{"use strict";wo();VB();bt();co();Cwe()});function Zst(t){return Op(t)||gO(t)?Xpr(t):Qst(t)}function Xpr(t){return t.children.reduce((r,n)=>r.concat(n.assembleProjections()),Qst(t))}function Qst(t){let r=t.component.projection;if(!r||r.merged)return[];let n=r.combine(),{name:o}=n;if(r.data){let i={signal:`[${r.size.map(a=>a.signal).join(", ")}]`},s=r.data.reduce((a,l)=>{let u=er(l)?l.signal:`data('${t.lookupDataSource(l)}')`;return Gt(a,u)||a.push(u),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:o,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:o},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var Jst=D(()=>{"use strict";bt();co();ns()});var eat,tat=D(()=>{"use strict";eat=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"]});var x$,rat=D(()=>{"use strict";vc();x$=class extends Eu{constructor(r,n,o,i){super(Object.assign({},n),{name:r}),this.specifiedProjection=n,this.size=o,this.data=i,this.merged=!1}get isFit(){return!!this.data}}});function Twe(t){t.component.projection=eo(t)?Kpr(t):Jpr(t)}function Kpr(t){var r;if(t.hasProjection){let n=t.specifiedProjection,o=!(n&&(n.scale!=null||n.translate!=null)),i=o?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=o?Zpr(t):void 0;return new x$(t.projectionName(!0),Object.assign(Object.assign({},(r=t.config.projection)!==null&&r!==void 0?r:{}),n??{}),i,s)}}function Zpr(t){let r=[],{encoding:n}=t;for(let o of[[yc,gc],[Ll,xu]])(ko(n[o[0]])||ko(n[o[1]]))&&r.push({signal:t.getName(`geojson_${r.length}`)});return t.channelHasField(es)&&t.typedFieldDef(es).type===Ah&&r.push({signal:t.getName(`geojson_${r.length}`)}),r.length===0&&r.push(t.requestDataName(Ds)),r}function Qpr(t,r){let n=mve(eat,i=>!!(!xd(t.explicit,i)&&!xd(r.explicit,i)||xd(t.explicit,i)&&xd(r.explicit,i)&&ai(t.get(i))===ai(r.get(i))));if(ai(t.size)===ai(r.size)){if(n)return t;if(ai(t.explicit)===ai({}))return r;if(ai(r.explicit)===ai({}))return t}return null}function Jpr(t){if(t.children.length===0)return;let r;for(let o of t.children)Twe(o);let n=mve(t.children,o=>{let i=o.component.projection;if(i)if(r){let s=Qpr(r,i);return s&&(r=s),!!s}else return r=i,!0;else return!0});if(r&&n){let o=t.projectionName(!0),i=new x$(o,r.specifiedProjection,r.size,or(r.data));for(let s of t.children){let a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),o),a.merged=!0)}return i}}var nat=D(()=>{"use strict";nr();Er();kr();$y();tat();Ad();bt();ns();rat()});function emr(t,r,n,o){var i,s;if(Fy(r,n)){let a=eo(t)?(s=(i=t.axis(n))!==null&&i!==void 0?i:t.legend(n))!==null&&s!==void 0?s:{}:{},l=vt(r,{expr:"datum"}),u=vt(r,{expr:"datum",binSuffix:"end"});return{formulaAs:vt(r,{binSuffix:"range",forAs:!0}),formula:PF(l,u,a.format,a.formatType,o)}}return{}}function iat(t,r){return`${SX(t)}_${r}`}function tmr(t,r){return{signal:t.getName(`${r}_bins`),extentSignal:t.getName(`${r}_extent`)}}function yO(t,r,n){var o;let i=(o=IF(n,void 0))!==null&&o!==void 0?o:{},s=iat(i,r);return t.getName(`${s}_bins`)}function rmr(t){return"as"in t}function oat(t,r,n){let o,i;rmr(t)?o=fr(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:o=[vt(t,{forAs:!0}),vt(t,{binSuffix:"end",forAs:!0})];let s=Object.assign({},IF(r,void 0)),a=iat(s,t.field),{signal:l,extentSignal:u}=tmr(n,a);if(kF(s.extent)){let f=s.extent,d=f.selection;i=FK(n.getSelectionComponent(Sn(d),d),f),delete s.extent}let c=Object.assign(Object.assign(Object.assign({bin:s,field:t.field,as:[o]},l?{signal:l}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:a,binComponent:c}}var Nh,cA=D(()=>{"use strict";wo();nr();$l();kr();bt();Ry();ns();tA();Jn();Nh=class t extends Tr{constructor(r,n){super(r),this.bins=n}clone(){return new t(null,or(this.bins))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{if(ra(s)&&xn(s.bin)){let{key:l,binComponent:u}=oat(s,s.bin,n);i[l]=Object.assign(Object.assign(Object.assign({},u),i[l]),emr(n,s,a,n.config))}return i},{});return hn(o)?null:new t(r,o)}static makeFromTransform(r,n,o){let{key:i,binComponent:s}=oat(n,n.bin,o);return new t(r,{[i]:s})}merge(r,n){for(let o of nt(r.bins))o in this.bins?(n(r.bins[o].signal,this.bins[o].signal),this.bins[o].as=vd([...this.bins[o].as,...r.bins[o].as],wr)):this.bins[o]=r.bins[o];for(let o of r.children)r.removeChild(o),o.parent=this;r.remove()}producedFields(){return new Set(Cp(this.bins).map(r=>r.as).flat(2))}dependentFields(){return new Set(Cp(this.bins).map(r=>r.field))}hash(){return`Bin ${wr(this.bins)}`}assemble(){return Cp(this.bins).flatMap(r=>{let n=[],[o,...i]=r.as,s=r.bin,{extent:a}=s,l=jt(s,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:cf(r.field),as:o,signal:r.signal},kF(a)?{extent:null}:{extent:a}),r.span?{span:{signal:`span(${r.span})`}}:{}),l);!a&&r.extentSignal&&(n.push({type:"extent",field:cf(r.field),signal:r.extentSignal}),u.extent={signal:r.extentSignal}),n.push(u);for(let c of i)for(let f=0;f<2;f++)n.push({type:"formula",expr:vt({field:o[f]},{expr:"datum"}),as:c[f]});return r.formula&&n.push({type:"formula",expr:r.formula,as:r.formulaAs}),n})}}});var kd,bO=D(()=>{"use strict";$y();bt();Jn();kd=class extends Tr{constructor(r){super(null),r=r??{name:"source"};let n;if(By(r)||(n=r.format?Object.assign({},uf(r.format,["parse"])):{}),QF(r))this._data={values:r.values};else if(a2(r)){if(this._data={url:r.url},!n.type){let o=/(?:\.([^.]+))?$/.exec(r.url)[1];Gt(["json","csv","tsv","dsv","topojson"],o)||(o="json"),n.type=o}}else S1e(r)?this._data={values:[{type:"Sphere"}]}:(yK(r)||By(r))&&(this._data={});this._generator=By(r),r.name&&(this._name=r.name),n&&!hn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(r){this._name=r}set parent(r){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}});function XK(t){for(let r of t){for(let n of r.children)if(n.parent!==r)return console.error("Dataflow graph is inconsistent.",r,n),!1;if(!XK(r.children))return!1}return!0}var sat=D(()=>{"use strict";bt();Jn();bO()});var p2,KK=D(()=>{"use strict";bt();Jn();p2=class t extends Tr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${wr(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}});var m2,ZK=D(()=>{"use strict";bt();Jn();m2=class t extends Tr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){var r;return new Set([(r=this.params.as)!==null&&r!==void 0?r:"data"])}hash(){return`Hash ${wr(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}});function v$(t){return t instanceof kd||t instanceof p2||t instanceof m2}var QK,Id,xO,Awe=D(()=>{"use strict";bO();KK();ZK();QK=class{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}},Id=class extends QK{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:r,mutatedFlag:n}){r&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(r){if(v$(r))return!1;let n=r.parent,{continueFlag:o}=this.run(r);return o&&this.optimizeNextFromLeaves(n),this.mutatedFlag}},xO=class extends QK{}});function nmr(t,r,n,o){let i=eo(o)?o.encoding[ll(r)]:void 0;if(ra(n)&&eo(o)&&$F(r,n,i,o.stack,o.markDef,o.config))t.add(vt(n,{})),t.add(vt(n,{suffix:"end"})),n.bin&&Fy(n,r)&&t.add(vt(n,{binSuffix:"range"}));else if(Yrt(r)){let s=Hrt(r);t.add(o.getName(s))}else t.add(vt(n));return t}function omr(t,r){var n;for(let o of nt(r)){let i=r[o];for(let s of nt(i))o in t?t[o][s]=new Set([...(n=t[o][s])!==null&&n!==void 0?n:[],...i[s]]):t[o]={[s]:i[s]}}}var Mp,JK=D(()=>{"use strict";vv();Er();kr();un();bt();ns();Jn();Mp=class t extends Tr{constructor(r,n,o){super(r),this.dimensions=n,this.measures=o}clone(){return new t(null,new Set(this.dimensions),or(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(r,n){let o=!1;n.forEachFieldDef(a=>{a.aggregate&&(o=!0)});let i={},s=new Set;return!o||(n.forEachFieldDef((a,l)=>{var u,c,f,d;let{aggregate:p,field:m}=a;if(p)if(p==="count")i["*"]=(u=i["*"])!==null&&u!==void 0?u:{},i["*"].count=new Set([vt(a,{forAs:!0})]);else{if(Ep(p)||Sh(p)){let h=Ep(p)?"argmin":"argmax",g=p[h];i[g]=(c=i[g])!==null&&c!==void 0?c:{},i[g][h]=new Set([vt({op:h,field:g},{forAs:!0})])}else i[m]=(f=i[m])!==null&&f!==void 0?f:{},i[m][p]=new Set([vt(a,{forAs:!0})]);_u(l)&&n.scaleDomain(l)==="unaggregated"&&(i[m]=(d=i[m])!==null&&d!==void 0?d:{},i[m].min=new Set([vt({field:m,aggregate:"min"},{forAs:!0})]),i[m].max=new Set([vt({field:m,aggregate:"max"},{forAs:!0})]))}else nmr(s,l,a,n)}),s.size+nt(i).length===0)?null:new t(r,s,i)}static makeFromTransform(r,n){var o,i,s;let a=new Set,l={};for(let u of n.aggregate){let{op:c,field:f,as:d}=u;c&&(c==="count"?(l["*"]=(o=l["*"])!==null&&o!==void 0?o:{},l["*"].count=new Set([d||vt(u,{forAs:!0})])):(l[f]=(i=l[f])!==null&&i!==void 0?i:{},l[f][c]=new Set([d||vt(u,{forAs:!0})])))}for(let u of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(u);return a.size+nt(l).length===0?null:new t(r,a,l)}merge(r){return Crt(this.dimensions,r.dimensions)?(omr(this.measures,r.measures),!0):(pnt("different dimensions, cannot merge"),!1)}addDimensions(r){r.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...nt(this.measures)])}producedFields(){let r=new Set;for(let n of nt(this.measures))for(let o of nt(this.measures[n])){let i=this.measures[n][o];i.size===0?r.add(`${o}_${n}`):i.forEach(r.add,r)}return r}hash(){return`Aggregate ${wr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let r=[],n=[],o=[];for(let s of nt(this.measures))for(let a of nt(this.measures[s]))for(let l of this.measures[s][a])o.push(l),r.push(a),n.push(s==="*"?null:cf(s));return{type:"aggregate",groupby:[...this.dimensions].map(cf),ops:r,fields:n,as:o}}}});var Fh,eZ=D(()=>{"use strict";nr();$l();Er();kr();un();xi();kh();bt();co();g$();wO();uA();Jn();Fh=class extends Tr{constructor(r,n,o,i){super(r),this.model=n,this.name=o,this.data=i;for(let s of al){let a=n.facet[s];if(a){let{bin:l,sort:u}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[vt(a),...xn(l)?[vt(a,{binSuffix:"end"})]:[]]},cl(u)?{sortField:u}:Lt(u)?{sortIndexField:Gy(a,s)}:{})}}this.childModel=n.child}hash(){let r="Facet";for(let n of al)this[n]&&(r+=` ${n.charAt(0)}:${wr(this[n])}`);return r}get fields(){var r;let n=[];for(let o of al)!((r=this[o])===null||r===void 0)&&r.fields&&n.push(...this[o].fields);return n}dependentFields(){let r=new Set(this.fields);for(let n of al)this[n]&&(this[n].sortField&&r.add(this[n].sortField.field),this[n].sortIndexField&&r.add(this[n].sortIndexField));return r}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let r={};for(let n of gs){let o=this.childModel.component.scales[n];if(o&&!o.merged){let i=o.get("type"),s=o.get("range");if(Hi(i)&&Su(s)){let a=h2(this.childModel,n),l=vO(a);l?r[n]=l:st(`Unknown field for ${n}. Cannot calculate view size.`)}}}return r}assembleRowColumnHeaderData(r,n,o){let i={row:"y",column:"x"}[r],s=[],a=[],l=[];o&&o[i]&&(n?(s.push(`distinct_${o[i]}`),a.push("max")):(s.push(o[i]),a.push("distinct")),l.push(`distinct_${o[i]}`));let{sortField:u,sortIndexField:c}=this[r];if(u){let{op:f=n2,field:d}=u;s.push(d),a.push(f),l.push(vt(u,{forAs:!0}))}else c&&(s.push(c),a.push("max"),l.push(c));return{name:this[r].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[r].fields},s.length?{fields:s,ops:a,as:l}:{})]}}assembleFacetHeaderData(r){var n,o;let{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],l={};for(let f of dO){for(let d of pO){let p=(n=s[f]&&s[f][d])!==null&&n!==void 0?n:[];for(let m of p)if(((o=m.axes)===null||o===void 0?void 0:o.length)>0){l[f]=!0;break}}if(l[f]){let d=`length(data("${this.facet.name}"))`,p=f==="row"?i?{signal:`ceil(${d} / ${i})`}:1:i?{signal:`min(${d}, ${i})`}:{signal:d};a.push({name:`${this.facet.name}_${f}`,transform:[{type:"sequence",start:0,stop:p}]})}}let{row:u,column:c}=l;return(u||c)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,r)),a}assemble(){var r,n;let o=[],i=null,s=this.getChildIndependentFieldsWithStep(),{column:a,row:l,facet:u}=this;if(a&&l&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;let c=[].concat((r=s.x)!==null&&r!==void 0?r:[],(n=s.y)!==null&&n!==void 0?n:[]),f=c.map(()=>"distinct");o.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:c,ops:f}]})}for(let c of[pf,df])this[c]&&o.push(this.assembleRowColumnHeaderData(c,i,s));if(u){let c=this.assembleFacetHeaderData(s);c&&o.push(...c)}return o}}});function aat(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.slice(1,-1):t}function imr(t,r){let n=lX(t);if(r==="number")return`toNumber(${n})`;if(r==="boolean")return`toBoolean(${n})`;if(r==="string")return`toString(${n})`;if(r==="date")return`toDate(${n})`;if(r==="flatten")return n;if(r.indexOf("date:")===0){let o=aat(r.slice(5,r.length));return`timeParse(${n},'${o}')`}else if(r.indexOf("utc:")===0){let o=aat(r.slice(4,r.length));return`utcParse(${n},'${o}')`}else return st(it.unrecognizedParse(r)),null}function lat(t){let r={};return wB(t.filter,n=>{var o;if(Mve(n)){let i=null;TX(n)?i=n.equal:AX(n)?i=n.range[0]:kX(n)&&(i=((o=n.oneOf)!==null&&o!==void 0?o:n.in)[0]),i&&(Ay(i)?r[n.field]="date":vo(i)?r[n.field]="number":fr(i)&&(r[n.field]="string")),n.timeUnit&&(r[n.field]="date")}}),r}function uat(t){let r={};function n(o){BF(o)?r[o.field]="date":o.type==="quantitative"&&Vrt(o.aggregate)?r[o.field]="number":yF(o.field)>1?o.field in r||(r[o.field]="flatten"):LF(o)&&cl(o.sort)&&yF(o.sort.field)>1&&(o.sort.field in r||(r[o.sort.field]="flatten"))}if((eo(t)||dl(t))&&t.forEachFieldDef((o,i)=>{if(ra(o))n(o);else{let s=Td(i),a=t.fieldDef(s);n(Object.assign(Object.assign({},o),{type:a.type}))}}),eo(t)){let{mark:o,markDef:i,encoding:s}=t;if(ff(o)&&!t.encoding.order){let a=i.orient==="horizontal"?"y":"x",l=s[a];Et(l)&&l.type==="quantitative"&&!(l.field in r)&&(r[l.field]="number")}}return r}function cat(t){let r={};if(eo(t)&&t.component.selection)for(let n of nt(t.component.selection)){let o=t.component.selection[n];for(let i of o.project.items)!i.channel&&yF(i.field)>1&&(r[i.field]="flatten")}return r}var pl,tZ=D(()=>{"use strict";nr();vv();Er();kr();$y();NF();un();iX();ea();YT();kh();bt();ns();vc();Jn();pl=class t extends Tr{constructor(r,n){super(r),this._parse=n}clone(){return new t(null,or(this._parse))}hash(){return`Parse ${wr(this._parse)}`}static makeExplicit(r,n,o){let i={},s=n.data;return!By(s)&&s&&s.format&&s.format.parse&&(i=s.format.parse),this.makeWithAncestors(r,i,{},o)}static makeWithAncestors(r,n,o,i){for(let l of nt(o)){let u=i.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===o[l]||u.value==="derived"||o[l]==="flatten"?delete o[l]:st(it.differentParse(l,o[l],u.value)))}for(let l of nt(n)){let u=i.get(l);u!==void 0&&(u===n[l]?delete n[l]:st(it.differentParse(l,n[l],u)))}let s=new Eu(n,o);i.copyAll(s);let a={};for(let l of nt(s.combine())){let u=s.get(l);u!==null&&(a[l]=u)}return nt(a).length===0||i.parseNothing?null:new t(r,a)}get parse(){return this._parse}merge(r){this._parse=Object.assign(Object.assign({},this._parse),r.parse),r.remove()}assembleFormatParse(){let r={};for(let n of nt(this._parse)){let o=this._parse[n];yF(n)===1&&(r[n]=o)}return r}producedFields(){return new Set(nt(this._parse))}dependentFields(){return new Set(nt(this._parse))}assembleTransforms(r=!1){return nt(this._parse).filter(n=>r?yF(n)>1:!0).map(n=>{let o=imr(n,this._parse[n]);return o?{type:"formula",expr:o,as:uX(n)}:null}).filter(n=>n!==null)}}});var Oh,rZ=D(()=>{"use strict";HF();Jn();Oh=class t extends Tr{clone(){return new t(null)}constructor(r){super(r)}dependentFields(){return new Set}producedFields(){return new Set([Tv])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Tv}}}});var Mh,w$=D(()=>{"use strict";kr();bt();bt();Jn();Mh=class t extends Tr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,or(this.transform))}addDimensions(r){this.transform.groupby=vd(this.transform.groupby.concat(r),n=>n)}dependentFields(){let r=new Set;return this.transform.groupby&&this.transform.groupby.forEach(r.add,r),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`JoinAggregateTransform ${wr(this.transform)}`}assemble(){let r=[],n=[],o=[];for(let s of this.transform.joinaggregate)n.push(s.op),o.push(this.getDefaultName(s)),r.push(s.field===void 0?null:s.field);let i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:o,ops:n,fields:r},i!==void 0?{groupby:i}:{})}}});function smr(t){return t.stack.stackBy.reduce((r,n)=>{let o=n.fieldDef,i=vt(o);return i&&r.push(i),r},[])}function amr(t){return Lt(t)&&t.every(r=>fr(r))&&t.length>1}var Wy,nZ=D(()=>{"use strict";nr();kr();bt();jo();Jn();Wy=class t extends Tr{constructor(r,n){super(r),this._stack=n}clone(){return new t(null,or(this._stack))}static makeFromTransform(r,n){let{stack:o,groupby:i,as:s,offset:a="zero"}=n,l=[],u=[];if(n.sort!==void 0)for(let d of n.sort)l.push(d.field),u.push(In(d.order,"ascending"));let c={field:l,order:u},f;return amr(s)?f=s:fr(s)?f=[s,s+"_end"]:f=[n.stack+"_start",n.stack+"_end"],new t(r,{stackField:o,groupby:i,offset:a,sort:c,facetby:[],as:f})}static makeFromEncoding(r,n){let o=n.stack,{encoding:i}=n;if(!o)return null;let{groupbyChannel:s,fieldChannel:a,offset:l,impute:u}=o,c;if(s){let m=i[s];c=zl(m)}let f=smr(n),d=n.encoding.order,p;return Lt(d)||Et(d)?p=WX(d):p=f.reduce((m,h)=>(m.field.push(h),m.order.push(a==="y"?"descending":"ascending"),m),{field:[],order:[]}),new t(r,{dimensionFieldDef:c,stackField:n.vgField(a),facetby:[],stackby:f,sort:p,offset:l,impute:u,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(r){this._stack.facetby.push(...r)}dependentFields(){let r=new Set;return r.add(this._stack.stackField),this.getGroupbyFields().forEach(r.add,r),this._stack.facetby.forEach(r.add,r),this._stack.sort.field.forEach(r.add,r),r}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${wr(this._stack)}`}getGroupbyFields(){let{dimensionFieldDef:r,impute:n,groupby:o}=this._stack;return r?r.bin?n?[vt(r,{binSuffix:"mid"})]:[vt(r,{}),vt(r,{binSuffix:"end"})]:[vt(r)]:o??[]}assemble(){let r=[],{facetby:n,dimensionFieldDef:o,stackField:i,stackby:s,sort:a,offset:l,impute:u,as:c}=this._stack;if(u&&o){let{band:f=.5,bin:d}=o;d&&r.push({type:"formula",expr:`${f}*`+vt(o,{expr:"datum"})+`+${1-f}*`+vt(o,{expr:"datum",binSuffix:"end"}),as:vt(o,{binSuffix:"mid",forAs:!0})}),r.push({type:"impute",field:i,groupby:[...s,...n],key:vt(o,{binSuffix:"mid"}),method:"value",value:0})}return r.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:l}),r}}});var Ov,oZ=D(()=>{"use strict";vv();kr();bt();bt();Jn();Ov=class t extends Tr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,or(this.transform))}addDimensions(r){this.transform.groupby=vd(this.transform.groupby.concat(r),n=>n)}dependentFields(){var r,n;let o=new Set;return((r=this.transform.groupby)!==null&&r!==void 0?r:[]).forEach(o.add,o),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>o.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(o.add,o),o}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`WindowTransform ${wr(this.transform)}`}assemble(){var r;let n=[],o=[],i=[],s=[];for(let p of this.transform.window)o.push(p.op),i.push(this.getDefaultName(p)),s.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);let a=this.transform.frame,l=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&o.every(p=>wF(p)))return Object.assign({type:"joinaggregate",as:i,ops:o,fields:n},l!==void 0?{groupby:l}:{});let u=[],c=[];if(this.transform.sort!==void 0)for(let p of this.transform.sort)u.push(p.field),c.push((r=p.order)!==null&&r!==void 0?r:"ascending");let f={field:u,order:c},d=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:o,fields:n,sort:f},d!==void 0?{ignorePeers:d}:{}),l!==void 0?{groupby:l}:{}),a!==void 0?{frame:a}:{})}}});function lmr(t){function r(n){if(!(n instanceof Fh)){let o=n.clone();if(o instanceof rs){let i=_$+o.getSource();o.setSource(i),t.model.component.data.outputNodes[i]=o}else(o instanceof Mp||o instanceof Wy||o instanceof Ov||o instanceof Mh)&&o.addDimensions(t.fields);for(let i of n.children.flatMap(r))i.parent=o;return[o]}return n.children.flatMap(r)}return r}function cZ(t){if(t instanceof Fh)if(t.numChildren()===1&&!(t.children[0]instanceof rs)){let r=t.children[0];(r instanceof Mp||r instanceof Wy||r instanceof Ov||r instanceof Mh)&&r.addDimensions(t.fields),r.swapWithParent(),cZ(t)}else{let r=t.model.component.data.main;fat(r);let n=lmr(t),o=t.children.map(n).flat();for(let i of o)i.parent=r}else t.children.map(cZ)}function fat(t){if(t instanceof rs&&t.type===Ds&&t.numChildren()===1){let r=t.children[0];r instanceof Fh||(r.swapWithParent(),fat(t))}}var iZ,sZ,aZ,lZ,uZ,fZ,dZ,pZ,mZ,hZ,gZ,dat=D(()=>{"use strict";$y();bt();Sf();JK();cA();Jn();eZ();d$();tZ();rZ();w$();yZ();Awe();nZ();e$();oZ();iZ=class extends Id{run(r){let n=r.parent;if(r instanceof pl){if(v$(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof pl)this.setMutated(),n.merge(r);else{if(gve(n.producedFields(),r.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),r.swapWithParent()}}return this.setContinue(),this.flags}},sZ=class extends xO{mergeNodes(r,n){let o=n.shift();for(let i of n)r.removeChild(i),i.parent=o,i.remove()}run(r){let n=r.children.map(i=>i.hash()),o={};for(let i=0;i<n.length;i++)o[n[i]]===void 0?o[n[i]]=[r.children[i]]:o[n[i]].push(r.children[i]);for(let i of nt(o))o[i].length>1&&(this.setMutated(),this.mergeNodes(r,o[i]));for(let i of r.children)this.run(i);return this.mutatedFlag}},aZ=class extends Id{run(r){return r instanceof rs||r.numChildren()>0||r instanceof Fh?this.flags:(this.setMutated(),r.remove(),this.flags)}},lZ=class extends Id{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(r){if(this.setContinue(),r instanceof Np){let n=r.producedFields();hve(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=r}return this.flags}reset(){this.fields.clear()}},uZ=class extends Id{run(r){this.setContinue();let o=r.parent.children.filter(s=>s instanceof Np),i=o.pop();for(let s of o)this.setMutated(),i.merge(s);return this.flags}};fZ=class extends xO{constructor(){super()}run(r){r instanceof rs&&!r.isRequired()&&(this.setMutated(),r.remove());for(let n of r.children)this.run(n);return this.mutatedFlag}},dZ=class extends xO{constructor(r){super(),this.requiresSelectionId=r&&n$(r)}run(r){r instanceof Oh&&(this.requiresSelectionId&&(v$(r.parent)||r.parent instanceof Mp||r.parent instanceof pl)||(this.setMutated(),r.remove()));for(let n of r.children)this.run(n);return this.mutatedFlag}},pZ=class extends Id{run(r){let n=r.parent,o=[...n.children],i=n.children.filter(s=>s instanceof pl);if(n.numChildren()>1&&i.length>=1){let s={},a=new Set;for(let l of i){let u=l.parse;for(let c of nt(u))c in s?s[c]!==u[c]&&a.add(c):s[c]=u[c]}for(let l of a)delete s[l];if(!hn(s)){this.setMutated();let l=new pl(n,s);for(let u of o){if(u instanceof pl)for(let c of nt(s))delete u.parse[c];n.removeChild(u),u.parent=l,u instanceof pl&&nt(u.parse).length===0&&u.remove()}}}return this.setContinue(),this.flags}},mZ=class extends Id{run(r){let n=r.parent,o=n.children.filter(s=>s instanceof Mp),i={};for(let s of o){let a=wr(s.groupBy);a in i||(i[a]=[]),i[a].push(s)}for(let s of nt(i)){let a=i[s];if(a.length>1){let l=a.pop();for(let u of a)l.merge(u)&&(n.removeChild(u),u.parent=l,u.remove(),this.setMutated())}}return this.setContinue(),this.flags}},hZ=class extends Id{constructor(r){super(),this.model=r}run(r){let n=r.parent,o=!(v$(n)||n instanceof Vy||n instanceof pl||n instanceof Oh),i=[],s=[];for(let a of n.children)a instanceof Nh&&(o&&!gve(n.producedFields(),a.dependentFields())?i.push(a):s.push(a));if(i.length>0){let a=i.pop();for(let l of i)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof Nh?n.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){let a=s.pop();for(let l of s)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}},gZ=class extends Id{run(r){let n=r.parent,o=[...n.children];if(!X_(o,l=>l instanceof rs)||n.numChildren()<=1)return this.setContinue(),this.flags;let s=[],a;for(let l of o)if(l instanceof rs){let u=l;for(;u.numChildren()===1;){let c=u.children[0];if(c instanceof rs)u=c;else break}s.push(...u.children),a?(n.removeChild(l),l.parent=a.parent,a.parent.removeChild(a),a.parent=u,this.setMutated()):a=u}else s.push(l);if(s.length){this.setMutated();for(let l of s)l.parent.removeChild(l),l.parent=a}return this.setContinue(),this.flags}}});function g2(t){let r=[];function n(o){if(o.numChildren()===0)r.push(o);else for(let i of o.children)n(i)}for(let o of t)n(o);return r}function cmr(t){return t}function Rh(t,r){return r.map(o=>{if(t instanceof Id){let i=t.optimizeNextFromLeaves(o);return t.reset(),i}else return t.run(o)}).some(cmr)}function pat(t,r){let n=t.sources,o=new Set;return o.add(Rh(new fZ,n)),o.add(Rh(new dZ(r),n)),n=n.filter(i=>i.numChildren()>0),o.add(Rh(new aZ,g2(n))),n=n.filter(i=>i.numChildren()>0),o.add(Rh(new iZ,g2(n))),o.add(Rh(new hZ(r),g2(n))),o.add(Rh(new lZ,g2(n))),o.add(Rh(new pZ,g2(n))),o.add(Rh(new mZ,g2(n))),o.add(Rh(new uZ,g2(n))),o.add(Rh(new sZ,n)),o.add(Rh(new gZ,g2(n))),t.sources=n,o.has(!0)}function mat(t,r){XK(t.sources);let n=0,o=0;for(let i=0;i<bZ&&pat(t,r);i++)n++;t.sources.map(cZ);for(let i=0;i<bZ&&pat(t,r);i++)o++;XK(t.sources),Math.max(n,o)===bZ&&st(`Maximum optimization runs(${bZ}) reached.`)}var _$,bZ,yZ=D(()=>{"use strict";un();sat();Awe();dat();_$="scale_",bZ=5});var Du,xZ=D(()=>{"use strict";Du=class t{constructor(r){Object.defineProperty(this,"signal",{enumerable:!0,get:r})}static fromName(r,n){return new t(()=>r(n))}}});function Nwe(t){eo(t)?fmr(t):dmr(t)}function fmr(t){let r=t.component.scales;for(let n of nt(r)){let o=mmr(t,n);if(r[n].setWithExplicit("domains",o),gmr(t,n),t.component.data.isFaceted){let s=t;for(;!dl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(let l of o.value)Sv(l)&&(l.data=_$+l.data.replace(_$,""))}}}function dmr(t){for(let n of t.children)Nwe(n);let r=t.component.scales;for(let n of nt(r)){let o,i=null;for(let s of t.children){let a=s.component.scales[n];if(a){o===void 0?o=a.getWithExplicit("domains"):o=wf(o,a.getWithExplicit("domains"),"domains","scale",Dwe);let l=a.get("selectionExtent");i&&l&&i.selection!==l.selection&&st("The same selection must be used to override scale domains in a layered view."),i=l}}r[n].setWithExplicit("domains",o),i&&r[n].set("selectionExtent",i,!0)}}function pmr(t,r,n,o){if(t==="unaggregated"){let{valid:i,reason:s}=hat(r,n);if(!i){st(s);return}}else if(t===void 0&&o.useUnaggregatedDomain){let{valid:i}=hat(r,n);if(i)return"unaggregated"}return t}function mmr(t,r){let n=t.getScaleComponent(r).get("type"),{encoding:o}=t,i=pmr(t.scaleDomain(r),t.typedFieldDef(r),n,t.config.scale);return i!==t.scaleDomain(r)&&(t.specifiedScales[r]=Object.assign(Object.assign({},t.specifiedScales[r]),{domain:i})),r==="x"&&ko(o.x2)?ko(o.x)?wf(y2(n,i,t,"x"),y2(n,i,t,"x2"),"domain","scale",Dwe):y2(n,i,t,"x2"):r==="y"&&ko(o.y2)?ko(o.y)?wf(y2(n,i,t,"y"),y2(n,i,t,"y2"),"domain","scale",Dwe):y2(n,i,t,"y2"):y2(n,i,t,r)}function hmr(t,r,n){return t.map(o=>({signal:`{data: ${FB(o,{timeUnit:n,type:r})}}`}))}function kwe(t,r,n){var o;let i=(o=ts(n))===null||o===void 0?void 0:o.unit;return r==="temporal"||i?hmr(t,r,i):[t]}function y2(t,r,n,o){let{encoding:i}=n,s=ko(i[o]),{type:a}=s,l=s.timeUnit;if(znt(r)){let d=y2(t,void 0,n,o),p=kwe(r.unionWith,a,l);return Iv([...d.value,...p])}else{if(er(r))return Iv([r]);if(r&&r!=="unaggregated"&&!Pve(r))return Iv(kwe(r,a,l))}let u=n.stack;if(u&&o===u.fieldChannel){if(u.offset==="normalize")return Tu([[0,1]]);let d=n.requestDataName(Ds);return Tu([{data:d,field:n.vgField(o,{suffix:"start"})},{data:d,field:n.vgField(o,{suffix:"end"})}])}let c=_u(o)&&Et(s)?ymr(n,o,t):void 0;if(bf(s)){let d=kwe([s.datum],a,l);return Tu(d)}let f=s;if(r==="unaggregated"){let d=n.requestDataName(Ds),{field:p}=s;return Tu([{data:d,field:vt({field:p,aggregate:"min"})},{data:d,field:vt({field:p,aggregate:"max"})}])}else if(xn(f.bin)){if(Hi(t))return t==="bin-ordinal"?Tu([]):Tu([{data:CB(c)?n.requestDataName(Ds):n.requestDataName(JF),field:n.vgField(o,Fy(f,o)?{binSuffix:"range"}:{}),sort:c===!0||!xo(c)?{field:n.vgField(o,{}),op:"min"}:c}]);{let{bin:d}=f;if(xn(d)){let p=yO(n,f.field,d);return Tu([new Du(()=>{let m=n.getSignalName(p);return`[${m}.start, ${m}.stop]`})])}else return Tu([{data:n.requestDataName(Ds),field:n.vgField(o,{})}])}}else if(f.timeUnit&&Gt(["time","utc"],t)&&$F(o,f,eo(n)?n.encoding[ll(o)]:void 0,n.stack,n.markDef,n.config)){let d=n.requestDataName(Ds);return Tu([{data:d,field:n.vgField(o)},{data:d,field:n.vgField(o,{suffix:"end"})}])}else return c?Tu([{data:CB(c)?n.requestDataName(Ds):n.requestDataName(JF),field:n.vgField(o),sort:c}]):Tu([{data:n.requestDataName(Ds),field:n.vgField(o)}])}function Iwe(t,r){let{op:n,field:o,order:i}=t;return Object.assign(Object.assign({op:n??(r?"sum":n2)},o?{field:cf(o)}:{}),i?{order:i}:{})}function gmr(t,r){var n;let o=t.component.scales[r],i=t.specifiedScales[r].domain,s=(n=t.fieldDef(r))===null||n===void 0?void 0:n.bin,a=Pve(i)&&i,l=J_(s)&&kF(s.extent)&&s.extent;(a||l)&&o.set("selectionExtent",a??l,!0)}function ymr(t,r,n){if(!Hi(n))return;let o=t.fieldDef(r),i=o.sort;if(jX(i))return{op:"min",field:Gy(o,r),order:"ascending"};let{stack:s}=t,a=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(l=>l.fieldDef.field)]:void 0;if(cl(i)){let l=s&&!Gt(a,i.field);return Iwe(i,l)}else if(RX(i)){let{encoding:l,order:u}=i,c=t.fieldDef(l),{aggregate:f,field:d}=c,p=s&&!Gt(a,d);if(Ep(f)||Sh(f))return Iwe({field:vt(c),order:u},p);if(wF(f)||!f)return Iwe({op:f,field:d,order:u},p)}else{if(i==="descending")return{op:"min",field:t.vgField(r),order:"descending"};if(Gt(["ascending",void 0],i))return!0}}function hat(t,r){let{aggregate:n,type:o}=t;return n?fr(n)&&!Wrt[n]?{valid:!1,reason:it.unaggregateDomainWithNonSharedDomainOp(n)}:o==="quantitative"&&r==="log"?{valid:!1,reason:it.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:it.unaggregateDomainHasNoEffectForRawField(t)}}function Dwe(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingDomainProperty(n,o,t.value,r.value)),{explicit:t.explicit,value:[...t.value,...r.value]}}function bmr(t){let r=vd(t.map(a=>{if(Sv(a)){let{sort:l}=a;return jt(a,["sort"])}return a}),wr),n=vd(t.map(a=>{if(Sv(a)){let l=a.sort;return l!==void 0&&!CB(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(a=>a!==void 0),wr);if(r.length===0)return;if(r.length===1){let a=t[0];if(Sv(a)&&n.length>0){let l=n[0];if(n.length>1)st(it.MORE_THAN_ONE_SORT),l=!0;else if(xo(l)&&"field"in l){let u=l.field;a.field===u&&(l=l.order?{order:l.order}:!0)}return Object.assign(Object.assign({},a),{sort:l})}return a}let o=vd(n.map(a=>CB(a)||!("op"in a)||a.op in Urt?a:(st(it.domainSortDropped(a)),!0)),wr),i;o.length===1?i=o[0]:o.length>1&&(st(it.MORE_THAN_ONE_SORT),i=!0);let s=vd(t.map(a=>Sv(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:r.map(l=>l.field)},i?{sort:i}:{}):Object.assign({fields:r},i?{sort:i}:{})}function vO(t){if(Sv(t)&&fr(t.field))return t.field;if(Cnt(t)){let r;for(let n of t.fields)if(Sv(n)&&fr(n.field)){if(!r)r=n.field;else if(r!==n.field)return st(it.FACETED_INDEPENDENT_DIFFERENT_SOURCES),r}return st(it.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),r}else if(Ent(t)){st(it.FACETED_INDEPENDENT_SAME_SOURCE);let r=t.fields[0];return fr(r)?r:void 0}}function h2(t,r){let o=t.component.scales[r].get("domains").map(i=>(Sv(i)&&(i.data=t.lookupDataSource(i.data)),i));return bmr(o)}var wO=D(()=>{"use strict";wo();nr();vv();$l();Er();kr();$y();un();xi();kh();ky();bt();co();cA();uA();yZ();ns();xZ();vc()});function Fwe(t){return Op(t)||gO(t)?t.children.reduce((r,n)=>r.concat(Fwe(n)),gat(t)):gat(t)}function gat(t){return nt(t.component.scales).reduce((r,n)=>{let o=t.component.scales[n];if(o.merged)return r;let i=o.combine(),{name:s,type:a,selectionExtent:l,domains:u,range:c,reverse:f}=i,d=jt(i,["name","type","selectionExtent","domains","range","reverse"]),p=xmr(i.range,s,n),m;l&&(m=Uit(t,l));let h=h2(t,n);return r.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},h?{domain:h}:{}),m?{domainRaw:m}:{}),{range:p}),f!==void 0?{reverse:f}:{}),d)),r},[])}function xmr(t,r,n){return ul(n)&&Su(t)?{step:{signal:r+"_step"}}:t}var yat=D(()=>{"use strict";wo();Er();bt();co();ns();nA();wO()});var S$,bat=D(()=>{"use strict";nr();bt();vc();S$=class extends Eu{constructor(r,n){super({},{name:r}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:X_(this.get("domains"),r=>Lt(r)&&r.length===2&&r[0]<=0&&r[1]>=0)}}});function _at(t){return t==="x"?"width":t==="y"?"height":void 0}function Sat(t){let r=t.component.scales;for(let n of Q_){let o=r[n];if(!o)continue;let i=wmr(n,t);o.setWithExplicit("range",i)}}function xat(t,r){let n=t.fieldDef(r);if(n&&n.bin&&xn(n.bin)){let o=yO(t,n.field,n.bin),i=_at(r),s=t.getName(i);return new Du(()=>{let a=t.getSignalName(o),l=`(${a}.stop - ${a}.start) / ${a}.step`;return`${t.getSignalName(s)} / (${l})`})}}function wmr(t,r){let n=r.specifiedScales[t],{size:o}=r,s=r.getScaleComponent(t).get("type");for(let a of vmr)if(n[a]!==void 0){let l=DX(s,a),u=NX(t,a);if(!l)st(it.scalePropertyNotWorkWithScaleType(s,a,t));else if(u)st(u);else switch(a){case"range":return Lt(n.range)&&ul(t)?Iv(n.range.map(c=>{if(c==="width"||c==="height"){let f=r.getName(c),d=r.getSignalName.bind(r);return Du.fromName(d,f)}return c})):Iv(n.range);case"scheme":return Iv(_mr(n[a]))}}if(t===Qn||t===li){let a=t===Qn?"width":"height",l=o[a];if(vf(l)){if(Hi(s))return Iv({step:l.step});st(it.stepDropped(a))}}return Tu(Smr(t,r))}function _mr(t){return $nt(t)?Object.assign({scheme:t.name},uf(t,["name"])):{scheme:t}}function Smr(t,r){let{size:n,config:o,mark:i,encoding:s}=r,a=r.getSignalName.bind(r),{type:l}=ko(s[t]),c=r.getScaleComponent(t).get("type"),{domain:f,domainMid:d}=r.specifiedScales[t];switch(t){case Qn:case li:{if(Gt(["point","band"],c)){if(t===Qn&&!n.width){let h=JT(o.view,"width");if(vf(h))return h}else if(t===li&&!n.height){let h=JT(o.view,"height");if(vf(h))return h}}let p=_at(t),m=r.getName(p);return t===li&&ta(c)?[Du.fromName(a,m),0]:[0,Du.fromName(a,m)]}case gf:{let p=r.component.scales[t].get("zero"),m=Cat(i,p,o),h=Tmr(i,n,r,o);return OF(c)?Emr(m,h,Cmr(c,o,f,t)):[m,h]}case hc:return[0,Math.PI*2];case Th:return[0,360];case hf:return[0,new Du(()=>{let p=r.getSignalName("width"),m=r.getSignalName("height");return`min(${p},${m})/2`})];case Cd:return[o.scale.minStrokeWidth,o.scale.maxStrokeWidth];case Ed:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case es:return"symbol";case hs:case vu:case wu:return c==="ordinal"?l==="nominal"?"category":"ordinal":d!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case bc:case _d:case Sd:return[o.scale.minOpacity,o.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${t}`)}function Cmr(t,r,n,o){switch(t){case"quantile":return r.scale.quantileCount;case"quantize":return r.scale.quantizeCount;case"threshold":return n!==void 0&&Lt(n)?n.length+1:(st(it.domainRequiredForThresholdScale(o)),3)}}function Emr(t,r,n){let o=()=>{let i=o2(r),s=o2(t),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return er(r)?new Du(o):{signal:o()}}function Cat(t,r,n){if(r)return er(r)?{signal:`${r.signal} ? 0 : ${Cat(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(it.incompatibleChannel("size",t))}function Tmr(t,r,n,o){let i={x:xat(n,"x"),y:xat(n,"y")};switch(t){case"bar":case"tick":{if(o.scale.maxBandSize!==void 0)return o.scale.maxBandSize;let s=wat(r,i,o.view);return vo(s)?s-1:new Du(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return o.scale.maxStrokeWidth;case"text":return o.scale.maxFontSize;case"point":case"square":case"circle":{if(o.scale.maxSize)return o.scale.maxSize;let s=wat(r,i,o.view);return vo(s)?Math.pow(vat*s,2):new Du(()=>`pow(${vat} * ${s.signal}, 2)`)}}throw new Error(it.incompatibleChannel("size",t))}function wat(t,r,n){let o=vf(t.width)?t.width.step:QT(n,"width"),i=vf(t.height)?t.height.step:QT(n,"height");return r.x||r.y?new Du(()=>`min(${[r.x?r.x.signal:o,r.y?r.y.signal:i].join(", ")})`):Math.min(o,i)}var vmr,vat,Eat=D(()=>{"use strict";nr();$l();Er();kr();s2();un();xi();ZT();bt();co();cA();xZ();vc();jo();vmr=["range","scheme"];vat=.95});function Owe(t,r){eo(t)?Amr(t,r):Aat(t,r)}function Amr(t,r){let n=t.component.scales,{config:o,encoding:i,markDef:s,specifiedScales:a}=t;for(let l of nt(n)){let u=a[l],c=n[l],f=t.getScaleComponent(l),d=ko(i[l]),p=u[r],m=f.get("type"),h=f.get("padding"),g=f.get("paddingInner"),y=DX(m,r),b=NX(l,r);if(p!==void 0&&(y?b&&st(b):st(it.scalePropertyNotWorkWithScaleType(m,r,l))),y&&b===void 0)if(p!==void 0)c.copyKeyFromObject(r,u);else{let x=r in Tat?Tat[r]({model:t,channel:l,fieldOrDatumDef:d,scaleType:m,scalePadding:h,scalePaddingInner:g,domain:u.domain,markDef:s,config:o}):o.scale[r];x!==void 0&&c.set(r,x,!1)}}}function Mwe(t){eo(t)?Sat(t):Aat(t,"range")}function Aat(t,r){let n=t.component.scales;for(let o of t.children)r==="range"?Mwe(o):Owe(o,r);for(let o of nt(n)){let i;for(let s of t.children){let a=s.component.scales[o];if(a){let l=a.getWithExplicit(r);i=wf(i,l,r,"scale",hK((u,c)=>{switch(r){case"range":return u.step&&c.step?u.step-c.step:0}return 0}))}}n[o].setWithExplicit(r,i)}}function kmr(t,r){let n=r.bin;if(xn(n)){let o=yO(t,r.field,n);return new Du(()=>t.getSignalName(o))}else if(qi(n)&&J_(n)&&n.step!==void 0)return{step:n.step}}function Imr(t,r){if(Gt([hs,vu,wu],t)&&r!=="nominal")return"hcl"}function Dmr(t,r,n){var o;if(!(!((o=zl(n))===null||o===void 0)&&o.bin||Gt([Fi.TIME,Fi.UTC],t)))return r in Ty?!0:void 0}function Nmr(t,r,n,o,i,s){if(t in Ty){if(yf(r)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:l}=i;if(a==="bar"&&!(Et(o)&&(o.bin||o.timeUnit))&&(l==="vertical"&&t==="x"||l==="horizontal"&&t==="y"))return s.continuousBandSize}if(r===Fi.POINT)return n.pointPadding}}function Fmr(t,r,n,o){if(t===void 0&&r in Ty){let{bandPaddingInner:i,barBandPaddingInner:s,rectBandPaddingInner:a}=o;return In(i,n==="bar"?s:a)}}function Omr(t,r,n,o,i,s){if(t===void 0&&r in Ty&&n===Fi.BAND){let{bandPaddingOuter:a}=s;return In(a,er(i)?{signal:`${i.signal}/2`}:i/2)}}function Mmr(t,r,n,o){if(n==="x"&&o.xReverse!==void 0)return ta(t)&&r==="descending"?er(o.xReverse)?{signal:`!${o.xReverse.signal}`}:!o.xReverse:o.xReverse;if(ta(t)&&r==="descending")return!0}function Rmr(t,r,n,o,i){if(!!n&&n!=="unaggregated"&&ta(i)){if(Lt(n)){let a=n[0],l=n[n.length-1];if(a<=0&&l>=0)return!0}return!1}if(t==="size"&&r.type==="quantitative"&&!OF(i))return!0;if(!(Et(r)&&r.bin)&&Gt([...gs,...rnt],t)){let{orient:a,type:l}=o;return!(Gt(["bar","area","line","trail"],l)&&(a==="horizontal"&&t==="y"||a==="vertical"&&t==="x"))}return!1}var Tat,kat=D(()=>{"use strict";nr();$l();Er();kr();un();xi();bt();bt();co();cA();ns();xZ();vc();Eat();Tat={bins:({model:t,fieldOrDatumDef:r})=>Et(r)?kmr(t,r):void 0,interpolate:({channel:t,fieldOrDatumDef:r})=>Imr(t,r.type),nice:({scaleType:t,channel:r,fieldOrDatumDef:n})=>Dmr(t,r,n),padding:({channel:t,scaleType:r,fieldOrDatumDef:n,markDef:o,config:i})=>Nmr(t,r,i.scale,n,o,i.bar),paddingInner:({scalePadding:t,channel:r,markDef:n,config:o})=>Fmr(t,r,n.type,o.scale),paddingOuter:({scalePadding:t,channel:r,scaleType:n,markDef:o,scalePaddingInner:i,config:s})=>Omr(t,r,n,o.type,i,s.scale),reverse:({fieldOrDatumDef:t,scaleType:r,channel:n,config:o})=>{let i=Et(t)?t.sort:void 0;return Mmr(r,i,n,o.scale)},zero:({channel:t,fieldOrDatumDef:r,domain:n,markDef:o,scaleType:i})=>Rmr(t,r,n,o,i)}});function Iat(t,r,n,o){let i=jmr(r,n,o),{type:s}=t;return _u(r)?s!==void 0?$ve(r,s)?Et(n)&&!Bve(s,n.type)?(st(it.scaleTypeNotWorkWithFieldDef(s,i)),i):s:(st(it.scaleTypeNotWorkWithChannel(r,s,i)),i):i:null}function jmr(t,r,n){var o;switch(r.type){case"nominal":case"ordinal":if(_v(t)||AF(t)==="discrete")return t==="shape"&&r.type==="ordinal"&&st(it.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in Ty){if(Gt(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&t in _X)return"band";return r.band!==void 0||zX(r)&&(!((o=r.axis)===null||o===void 0)&&o.tickBand)?"band":"point";case"temporal":return _v(t)?"time":AF(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"temporal")),"ordinal"):Et(r)&&r.timeUnit&&ts(r.timeUnit).utc?"utc":"time";case"quantitative":return _v(t)?Et(r)&&xn(r.bin)?"bin-ordinal":"linear":AF(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(it.invalidFieldType(r.type))}var Dat=D(()=>{"use strict";$l();Er();kr();un();xi();ky();bt();Er()});function Nat(t,{ignoreRange:r}={}){Fat(t),Nwe(t);for(let n of Unt)Owe(t,n);r||Mwe(t)}function Fat(t){eo(t)?t.component.scales=Pmr(t):t.component.scales=Bmr(t)}function Pmr(t){let{encoding:r,mark:n}=t;return Q_.reduce((o,i)=>{let s=ko(r[i]);if(s&&n===mX&&i===es&&s.type===Ah)return o;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a=a??{};let l=Iat(a,i,s,n);o[i]=new S$(t.scaleName(i+"",!0),{value:l,explicit:a.type===l})}return o},{})}function Bmr(t){var r;let n=t.component.scales={},o={},i=t.component.resolve;for(let s of t.children){Fat(s);for(let a of nt(s.component.scales))if(i.scale[a]=(r=i.scale[a])!==null&&r!==void 0?r:zst(a,t),i.scale[a]==="shared"){let l=o[a],u=s.component.scales[a].getWithExplicit("type");l?jnt(l.value,u.value)?o[a]=wf(l,u,"type","scale",Lmr):(i.scale[a]="independent",delete o[a]):o[a]=u}}for(let s of nt(o)){let a=t.scaleName(s,!0),l=o[s];n[s]=new S$(a,l);for(let u of t.children){let c=u.component.scales[s];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return n}var Lmr,Oat=D(()=>{"use strict";Er();kr();ea();xi();Ad();bt();ns();b$();vc();bat();wO();kat();Dat();Lmr=hK((t,r)=>jve(t)-jve(r))});function eo(t){return t?.type==="unit"}function dl(t){return t?.type==="facet"}function gO(t){return t?.type==="concat"}function Op(t){return t?.type==="layer"}var C$,fA,_O,ns=D(()=>{"use strict";wo();Er();kr();xc();un();xi();XF();ZT();LB();YB();bt();co();p$();jo();mwe();g$();y$();gwe();Ewe();Cwe();Jst();nat();yat();wO();Oat();vc();C$=class{constructor(){this.nameMap={}}rename(r,n){this.nameMap[r]=n}has(r){return this.nameMap[r]!==void 0}get(r){for(;this.nameMap[r]&&r!==this.nameMap[r];)r=this.nameMap[r];return r}};fA=class{constructor(r,n,o,i,s,a,l){var u,c;this.type=n,this.parent=o,this.config=s,this.view=l,this.children=[],this.correctDataNames=f=>(f.from&&f.from.data&&(f.from.data=this.lookupDataSource(f.from.data)),f.from&&f.from.facet&&f.from.facet.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f),this.parent=o,this.config=s,this.name=(u=r.name)!==null&&u!==void 0?u:i,this.title=Ih(r.title)?{text:r.title}:r.title,this.scaleNameMap=o?o.scaleNameMap:new C$,this.projectionNameMap=o?o.projectionNameMap:new C$,this.signalNameMap=o?o.signalNameMap:new C$,this.data=r.data,this.description=r.description,this.transforms=hit((c=r.transform)!==null&&c!==void 0?c:[]),this.layout=n==="layer"||n==="unit"?{}:Eot(r,n,s),this.component={data:{sources:o?o.component.data.sources:[],outputNodes:o?o.component.data.outputNodes:{},outputNodeRefCounts:o?o.component.data.outputNodeRefCounts:{},isFaceted:Cv(r)||o&&o.component.data.isFaceted&&r.data===void 0},layoutSize:new Eu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?or(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Nat(this)}parseProjection(){Twe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){_we(this)}assembleGroupStyle(){var r,n;if(this.type==="unit"||this.type==="layer")return(n=(r=this.view)===null||r===void 0?void 0:r.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(r){let{style:n}=r,o=jt(r,["style"]),i={};for(let s of nt(o)){let a=o[s];a!==void 0&&(i[s]=fo(a))}return i}assembleGroupEncodeEntry(r){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!r&&(this.description&&(n.description=fo(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):hn(n)?void 0:n}assembleLayout(){if(!this.layout)return;let r=this.layout,{spacing:n}=r,o=jt(r,["spacing"]),{component:i,config:s}=this,a=Lst(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),o),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:r}=this.component,n=[];for(let o of al)r[o].title&&n.push(Mst(this,o));for(let o of dO)n=n.concat(Pst(this,o));return n}assembleAxes(){return Tst(this.component.axes,this.config)}assembleLegends(){return YK(this)}assembleProjections(){return Zst(this)}assembleTitle(){var r,n,o;let i=(r=this.title)!==null&&r!==void 0?r:{},{encoding:s}=i,a=jt(i,["encoding"]),l=Object.assign(Object.assign(Object.assign({},GX(this.config.title).nonMark),a),s?{encode:{update:s}}:{});if(l.text)return Gt(["unit","layer"],this.type)?Gt(["middle",void 0],l.anchor)&&(l.frame=(n=l.frame)!==null&&n!==void 0?n:"group"):l.anchor=(o=l.anchor)!==null&&o!==void 0?o:"start",hn(l)?void 0:l}assembleGroup(r=[]){let n={};r=r.concat(this.assembleSignals()),r.length>0&&(n.signals=r);let o=this.assembleLayout();o&&(n.layout=o),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||dl(this.parent)?Fwe(this):[];i.length>0&&(n.scales=i);let s=this.assembleAxes();s.length>0&&(n.axes=s);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(r){return Sn((this.name?this.name+"_":"")+r)}requestDataName(r){var n;let o=this.getName(r),i=this.component.data.outputNodeRefCounts;return i[o]=((n=i[o])!==null&&n!==void 0?n:0)+1,o}getSizeSignalRef(r){if(dl(this.parent)){let n=GK(r),o=Z_(n),i=this.component.scales[o];if(i&&!i.merged){let s=i.get("type"),a=i.get("range");if(Hi(s)&&Su(a)){let l=i.get("name"),u=h2(this,o),c=vO(u);if(c){let f=vt({aggregate:"distinct",field:c},{expr:"datum"});return{signal:hwe(l,i,f)}}else return st(`Unknown field for ${o}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(r))}}lookupDataSource(r){let n=this.component.data.outputNodes[r];return n?n.getSource():r}getSignalName(r){return this.signalNameMap.get(r)}renameSignal(r,n){this.signalNameMap.rename(r,n)}renameScale(r,n){this.scaleNameMap.rename(r,n)}renameProjection(r,n){this.projectionNameMap.rename(r,n)}scaleName(r,n){if(n)return this.getName(r);if(xX(r)&&_u(r)&&this.component.scales[r]||this.scaleNameMap.has(this.getName(r)))return this.scaleNameMap.get(this.getName(r))}projectionName(r){if(r)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(r){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[r];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(r):void 0}getSelectionComponent(r,n){let o=this.component.selection[r];if(!o&&this.parent&&(o=this.parent.getSelectionComponent(r,n)),!o)throw new Error(it.selectionNotFound(n));return o}hasAxisOrientSignalRef(){var r,n;return((r=this.component.axes.x)===null||r===void 0?void 0:r.some(o=>o.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(o=>o.hasOrientSignalRef()))}},_O=class extends fA{vgField(r,n={}){let o=this.fieldDef(r);if(o)return vt(o,n)}reduceFieldDef(r,n){return HX(this.getMapping(),(o,i,s)=>{let a=zl(i);return a?r(o,a,s):o},n)}forEachFieldDef(r,n){$B(this.getMapping(),(o,i)=>{let s=zl(o);s&&r(s,i)},n)}}});var SO,Rwe=D(()=>{"use strict";wo();bt();Jn();SO=class t extends Tr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=or(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(s=a[1])!==null&&s!==void 0?s:"density"]}clone(){return new t(null,or(this.transform))}dependentFields(){var r;return new Set([this.transform.density,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${wr(this.transform)}`}assemble(){let r=this.transform,{density:n}=r,o=jt(r,["density"]);return Object.assign({type:"kde",field:n},o)}}});var CO,jwe=D(()=>{"use strict";Er();kr();ea();xi();bt();jo();Jn();CO=class t extends Tr{constructor(r,n){super(r),this.filter=n}clone(){return new t(null,Object.assign({},this.filter))}static make(r,n){let{config:o,mark:i,markDef:s}=n;if(sn("invalid",s,o)!=="filter")return null;let l=n.reduceFieldDef((u,c,f)=>{let d=_u(f)&&n.getScaleComponent(f);if(d){let p=d.get("type");ta(p)&&c.aggregate!=="count"&&!ff(i)&&(u[c.field]=c)}return u},{});return nt(l).length?new t(r,l):null}dependentFields(){return new Set(nt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${wr(this.filter)}`}assemble(){let r=nt(this.filter).reduce((n,o)=>{let i=this.filter[o],s=vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return r.length>0?{type:"filter",expr:r.join(" && ")}:null}}});var EO,Pwe=D(()=>{"use strict";bt();Jn();EO=class t extends Tr{constructor(r,n){super(r),this.transform=n,this.transform=or(n);let{flatten:o,as:i=[]}=this.transform;this.transform.as=o.map((s,a)=>{var l;return(l=i[a])!==null&&l!==void 0?l:s})}clone(){return new t(this.parent,or(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${wr(this.transform)}`}assemble(){let{flatten:r,as:n}=this.transform;return{type:"flatten",fields:r,as:n}}}});var TO,Lwe=D(()=>{"use strict";bt();Jn();TO=class t extends Tr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=or(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,or(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${wr(this.transform)}`}assemble(){let{fold:r,as:n}=this.transform;return{type:"fold",fields:r,as:n}}}});var AO,Bwe=D(()=>{"use strict";nr();Er();kr();Ad();bt();Jn();AO=class t extends Tr{constructor(r,n,o,i){super(r),this.fields=n,this.geojson=o,this.signal=i}clone(){return new t(null,or(this.fields),this.geojson,this.signal)}static parseAll(r,n){if(n.component.projection&&!n.component.projection.isFit)return r;let o=0;for(let i of[[yc,gc],[Ll,xu]]){let s=i.map(a=>{let l=ko(n.encoding[a]);return Et(l)?l.field:bf(l)?{expr:`${l.datum}`}:Cu(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(r=new t(r,s,null,n.getName(`geojson_${o++}`)))}if(n.channelHasField(es)){let i=n.typedFieldDef(es);i.type===Ah&&(r=new t(r,null,i.field,n.getName(`geojson_${o++}`)))}return r}dependentFields(){var r;let n=((r=this.fields)!==null&&r!==void 0?r:[]).filter(fr);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${wr(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}});var kO,$we=D(()=>{"use strict";nr();Er();kr();bt();Jn();kO=class t extends Tr{constructor(r,n,o,i){super(r),this.projection=n,this.fields=o,this.as=i}clone(){return new t(null,this.projection,or(this.fields),or(this.as))}static parseAll(r,n){if(!n.projectionName())return r;for(let o of[[yc,gc],[Ll,xu]]){let i=o.map(a=>{let l=ko(n.encoding[a]);return Et(l)?l.field:bf(l)?{expr:`${l.datum}`}:Cu(l)?{expr:`${l.value}`}:void 0}),s=o[0]===Ll?"2":"";(i[0]||i[1])&&(r=new t(r,n.projectionName(),i,[n.getName("x"+s),n.getName("y"+s)]))}return r}dependentFields(){return new Set(this.fields.filter(fr))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${wr(this.fields)} ${wr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}});var dA,zwe=D(()=>{"use strict";kr();xc();YB();bt();Jn();dA=class t extends Tr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,or(this.transform))}dependentFields(){var r;return new Set([this.transform.impute,this.transform.key,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(r){let{start:n=0,stop:o,step:i}=r;return{signal:`sequence(${[n,o,...i?[i]:[]].join(",")})`}}static makeFromTransform(r,n){return new t(r,n)}static makeFromEncoding(r,n){let o=n.encoding,i=o.x,s=o.y;if(Et(i)&&Et(s)){let a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;let l=i.impute?s:s.impute?i:void 0,{method:u,value:c,frame:f,keyvals:d}=a.impute,p=YX(n.mark,o);return new t(r,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:l.field},u?{method:u}:{}),c!==void 0?{value:c}:{}),f?{frame:f}:{}),d!==void 0?{keyvals:d}:{}),p.length?{groupby:p}:{}))}return null}hash(){return`Impute ${wr(this.transform)}`}assemble(){let{impute:r,key:n,keyvals:o,method:i,groupby:s,value:a,frame:l=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:r,key:n},o?{keyvals:Xot(o)?this.processSequence(o):o}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let c=Object.assign({type:"window",as:[`imputed_${r}_value`],ops:[i],fields:[r],frame:l,ignorePeers:!1},s?{groupby:s}:{}),f={type:"formula",expr:`datum.${r} === null ? datum.imputed_${r}_value : datum.${r}`,as:r};return[u,c,f]}else return[u]}}});var IO,Uwe=D(()=>{"use strict";wo();bt();Jn();IO=class t extends Tr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=or(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new t(null,or(this.transform))}dependentFields(){var r;return new Set([this.transform.loess,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${wr(this.transform)}`}assemble(){let r=this.transform,{loess:n,on:o}=r,i=jt(r,["loess","on"]);return Object.assign({type:"loess",x:o,y:n},i)}}});var DO,Vwe=D(()=>{"use strict";nr();un();YB();bt();Jn();NO();bO();DO=class t extends Tr{constructor(r,n,o){super(r),this.transform=n,this.secondary=o}clone(){return new t(null,or(this.transform),this.secondary)}static make(r,n,o,i){let s=n.component.data.sources,{from:a}=o,l=null;if(Zot(a)){let u=Gwe(a.data,s);u||(u=new kd(a.data),s.push(u));let c=n.getName(`lookup_${i}`);l=new rs(u,c,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=l}else if(Qot(a)){let u=a.selection;if(o=Object.assign({as:u},o),l=n.getSelectionComponent(Sn(u),u).materialized,!l)throw new Error(it.noSameUnitLookup(u))}return new t(r,o,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?kn(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${wr({transform:this.transform,secondary:this.secondary})}`}assemble(){let r;if(this.transform.from.fields)r=Object.assign({values:this.transform.from.fields},this.transform.as?{as:kn(this.transform.as)}:{});else{let n=this.transform.as;fr(n)||(st(it.NO_FIELDS_NEEDS_AS),n="_lookup"),r={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},r),this.transform.default?{default:this.transform.default}:{})}}});var FO,Wwe=D(()=>{"use strict";wo();bt();Jn();FO=class t extends Tr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=or(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,or(this.transform))}dependentFields(){var r;return new Set([this.transform.quantile,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${wr(this.transform)}`}assemble(){let r=this.transform,{quantile:n}=r,o=jt(r,["quantile"]);return Object.assign({type:"quantile",field:n},o)}}});var OO,qwe=D(()=>{"use strict";wo();bt();Jn();OO=class t extends Tr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=or(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new t(null,or(this.transform))}dependentFields(){var r;return new Set([this.transform.regression,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${wr(this.transform)}`}assemble(){let r=this.transform,{regression:n,on:o}=r,i=jt(r,["regression","on"]);return Object.assign({type:"regression",x:o,y:n},i)}}});var MO,Hwe=D(()=>{"use strict";bt();Jn();MO=class t extends Tr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,or(this.transform))}addDimensions(r){var n;this.transform.groupby=vd(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(r),o=>o)}producedFields(){}dependentFields(){var r;return new Set([this.transform.pivot,this.transform.value,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}hash(){return`PivotTransform ${wr(this.transform)}`}assemble(){let{pivot:r,value:n,groupby:o,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:r,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),o!==void 0?{groupby:o}:{})}}});var RO,Ywe=D(()=>{"use strict";bt();Jn();RO=class t extends Tr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,or(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${wr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}});function Mat(t){let r=0;function n(o,i){var s;if(o instanceof kd&&!o.isGenerator&&!a2(o.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),o instanceof pl&&(o.parent instanceof kd&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:o.assembleFormatParse()}),i.transform.push(...o.assembleTransforms(!0))):i.transform.push(...o.assembleTransforms())),o instanceof Fh){i.name||(i.name=`data_${r++}`),!i.source||i.transform.length>0?(t.push(i),o.data=i.name):o.data=i.source;for(let a of o.assemble())t.push(a);return}switch((o instanceof p2||o instanceof m2||o instanceof CO||o instanceof Vy||o instanceof lA||o instanceof kO||o instanceof AO||o instanceof Mp||o instanceof DO||o instanceof Ov||o instanceof Mh||o instanceof TO||o instanceof EO||o instanceof SO||o instanceof IO||o instanceof FO||o instanceof OO||o instanceof Oh||o instanceof RO||o instanceof MO)&&i.transform.push(o.assemble()),(o instanceof Nh||o instanceof Np||o instanceof dA||o instanceof Wy)&&i.transform.push(...o.assemble()),o instanceof rs&&(i.source&&i.transform.length===0?o.setSource(i.source):o.parent instanceof rs?o.setSource(i.name):(i.name||(i.name=`data_${r++}`),o.setSource(i.name),o.numChildren()===1&&(t.push(i),i={name:null,source:i.name,transform:[]}))),o.numChildren()){case 0:o instanceof rs&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(o.children[0],i);break;default:{i.name||(i.name=`data_${r++}`);let a=i.name;!i.source||i.transform.length>0?t.push(i):a=i.source;for(let l of o.children)n(l,{name:null,source:a,transform:[]});break}}}return n}function Rat(t){let r=[],n=Mat(r);for(let o of t.children)n(o,{source:t.name,name:null,transform:[]});return r}function jat(t,r){var n,o;let i=[],s=Mat(i),a=0;for(let u of t.sources){u.hasName()||(u.dataName=`source_${a++}`);let c=u.assemble();s(u,c)}for(let u of i)u.transform.length===0&&delete u.transform;let l=0;for(let[u,c]of i.entries())((n=c.transform)!==null&&n!==void 0?n:[]).length===0&&!c.source&&i.splice(l++,0,i.splice(u,1)[0]);for(let u of i)for(let c of(o=u.transform)!==null&&o!==void 0?o:[])c.type==="lookup"&&(c.from=t.outputNodes[c.from].getSource());for(let u of i)u.name in r&&(u.values=r[u.name]);return i}var Xwe=D(()=>{"use strict";$y();JK();cA();uA();Jn();Rwe();eZ();d$();jwe();Pwe();Lwe();tZ();Bwe();$we();KK();rZ();zwe();w$();Uwe();Vwe();Wwe();qwe();Hwe();Ywe();ZK();bO();nZ();e$();oZ()});function $mr(t){return t==="top"||t==="left"||er(t)?"header":"footer"}function Lat(t){for(let r of al)zmr(t,r);Pat(t,"x"),Pat(t,"y")}function zmr(t,r){var n;let{facet:o,config:i,child:s,component:a}=t;if(t.channelHasField(r)){let l=o[r],u=Fv("title",null,i,r),c=kp(l,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});s.component.layoutHeaders[r].title&&(c=Lt(c)?c.join(", "):c,c+=" / "+s.component.layoutHeaders[r].title,s.component.layoutHeaders[r].title=null);let f=Fv("labelOrient",l,i,r),d=(n=l.header)!==null&&n!==void 0?n:{},p=In(d.labels,i.header.labels,!0),m=Gt(["bottom","right"],f)?"footer":"header";a.layoutHeaders[r]={title:c,facetFieldDef:l,[m]:r==="facet"?[]:[Bat(t,r,p)]}}}function Bat(t,r,n){let o=r==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(o)?t.child.getSizeSignalRef(o):void 0,axes:[]}}function Pat(t,r){var n;let{child:o}=t;if(o.component.axes[r]){let{layoutHeaders:i,resolve:s}=t.component;if(s.axis[r]=hO(s,r),s.axis[r]==="shared"){let a=r==="x"?"column":"row",l=i[a];for(let u of o.component.axes[r]){let c=$mr(u.get("orient"));l[c]=(n=l[c])!==null&&n!==void 0?n:[Bat(t,a,!1)];let f=cO(u,"main",t.config,{header:!0});f&&l[c][0].axes.push(f),u.mainExtracted=!0}}}}var $at=D(()=>{"use strict";nr();Er();kr();bt();co();p$();b$();zK()});function zat(t){wZ(t),vZ(t,"width"),vZ(t,"height")}function Uat(t){wZ(t);let r=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";vZ(t,r),vZ(t,n)}function wZ(t){for(let r of t.children)r.parseLayoutSize()}function vZ(t,r){let n=GK(r),o=Z_(n),i=t.component.resolve,s=t.component.layoutSize,a;for(let l of t.children){let u=l.component.layoutSize.getWithExplicit(n),c=i.scale[o];if(c==="independent"&&u.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==u.value){a=void 0;break}a=wf(a,u,n,"")}else a=u}if(a){for(let l of t.children)t.renameSignal(l.getName(n),t.getName(r)),l.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(r,a)}else s.setWithExplicit(r,{explicit:!1,value:void 0})}function Vat(t){let{size:r,component:n}=t;for(let o of gs){let i=Bl(o);if(r[i]){let s=r[i];n.layoutSize.set(i,vf(s)?"step":s,!0)}else{let s=Umr(t,i);n.layoutSize.set(i,s,!1)}}}function Umr(t,r){let n=r==="width"?"x":"y",o=t.config,i=t.getScaleComponent(n);if(i){let s=i.get("type"),a=i.get("range");if(Hi(s)){let l=JT(o.view,r);return Su(a)||vf(l)?"step":l}else return qB(o.view,r)}else{if(t.hasProjection||t.mark==="arc")return qB(o.view,r);{let s=JT(o.view,r);return vf(s)?s.step:s}}}var E$=D(()=>{"use strict";Er();s2();xi();ZT();co();vc();gwe()});function _Z(t,r,n){return vt(r,Object.assign({suffix:`by_${vt(t)}`},n??{}))}var SZ,Kwe=D(()=>{"use strict";nr();$l();Er();kr();xc();un();xi();kh();Ev();bt();co();CZ();Xwe();uA();NO();mwe();zK();g$();$at();E$();ns();wO();nA();SZ=class t extends _O{constructor(r,n,o,i){super(r,"facet",n,o,i,r.resolve),this.child=jO(r.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(r.facet,i)}initFacet(r,n){return jy(r)?HX(r,(o,i,s)=>Gt([df,pf],s)?i.field===void 0?(st(it.emptyFieldDef(i,s)),o):(o[s]=PB(i,s,n),o):(st(it.incompatibleChannel(s,"facet")),o),{}):{facet:PB(r,"facet",n)}}channelHasField(r){return!!this.facet[r]}fieldDef(r){return this.facet[r]}parseData(){this.component.data=b2(this),this.child.parseData()}parseLayoutSize(){wZ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Lat(this)}assembleSelectionTopLevelSignals(r){return this.child.assembleSelectionTopLevelSignals(r)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(r){return this.child.assembleSelectionData(r)}getHeaderLayoutMixins(){var r,n,o;let i={};for(let s of al)for(let a of pO){let l=this.component.layoutHeaders[s],u=l[a],{facetFieldDef:c}=l;if(c){let f=Fv("titleOrient",c,this.config,s);if(Gt(["right","bottom"],f)){let d=fO(s,f);i.titleAnchor=(r=i.titleAnchor)!==null&&r!==void 0?r:{},i.titleAnchor[d]="end"}}if(u?.[0]){let f=s==="row"?"height":"width",d=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(f)&&(i[d]=(n=i[d])!==null&&n!==void 0?n:{},i[d][s]=.5),l.title&&(i.offset=(o=i.offset)!==null&&o!==void 0?o:{},i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){let{column:r,row:n}=this.facet,o=r?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!r&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),o?{columns:o}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof t))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(r){return this.parent&&this.parent instanceof t?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vt(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(r)):super.assembleGroup(r)}getCardinalityAggregateForChild(){let r=[],n=[],o=[];if(this.child instanceof t){if(this.child.channelHasField("column")){let i=vt(this.child.facet.column);r.push(i),n.push("distinct"),o.push(`distinct_${i}`)}}else for(let i of gs){let s=this.child.component.scales[i];if(s&&!s.merged){let a=s.get("type"),l=s.get("range");if(Hi(a)&&Su(l)){let u=h2(this.child,i),c=vO(u);c?(r.push(c),n.push("distinct"),o.push(`distinct_${c}`)):st(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:r,ops:n,as:o}}assembleFacet(){let{name:r,data:n}=this.component.data.facetRoot,{row:o,column:i}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(let f of al){let d=this.facet[f];if(d){u.push(vt(d));let{bin:p,sort:m}=d;if(xn(p)&&u.push(vt(d,{binSuffix:"end"})),cl(m)){let{field:h,op:g=n2}=m,y=_Z(d,m);o&&i?(s.push(y),a.push("max"),l.push(y)):(s.push(h),a.push(g),l.push(y))}else if(Lt(m)){let h=Gy(d,f);s.push(h),a.push("max"),l.push(h)}}}let c=!!o&&!!i;return Object.assign({name:r,data:n,groupby:u},c||s.length>0?{aggregate:Object.assign(Object.assign({},c?{cross:c}:{}),s.length?{fields:s,ops:a,as:l}:{})}:{})}facetSortFields(r){let{facet:n}=this,o=n[r];return o?cl(o.sort)?[_Z(o,o.sort,{expr:"datum"})]:Lt(o.sort)?[Gy(o,r,{expr:"datum"})]:[vt(o,{expr:"datum"})]:[]}facetSortOrder(r){let{facet:n}=this,o=n[r];if(o){let{sort:i}=o;return[(cl(i)?i.order:!Lt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:r,config:n}=this;if(r.facet)return UK(r.facet,"facet",n);let o={row:["top","bottom"],column:["left","right"]};for(let i of dO)if(r[i]){let s=Fv("labelOrient",r[i],n,i);if(Gt(o[i],s))return UK(r[i],i,n)}}assembleMarks(){let{child:r}=this,n=this.component.data.facetRoot,o=Rat(n),i=r.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||r.assembleTitle(),a=r.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:al.map(u=>this.facetSortFields(u)).flat(),order:al.map(u=>this.facetSortOrder(u)).flat()}}),o.length>0?{data:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup(Lit(this,[])))]}getMapping(){return this.facet}}});function Gat(t,r){let{row:n,column:o}=r;if(n&&o){let i=null;for(let s of[n,o])if(cl(s.sort)){let{field:a,op:l=n2}=s.sort;t=i=new Mh(t,{joinaggregate:[{op:l,field:a,as:_Z(s,s.sort,{forAs:!0})}],groupby:[vt(s)]})}return i}return null}var Wat=D(()=>{"use strict";kr();kh();Kwe();w$()});function Gwe(t,r){var n,o,i,s,a,l,u,c,f,d;for(let p of r){let m=p.data;if(!(t.name&&p.hasName()&&t.name!==p.dataName)&&!(!((n=t.format)===null||n===void 0)&&n.mesh&&(!((o=m.format)===null||o===void 0)&&o.feature))&&!((!((i=t.format)===null||i===void 0)&&i.feature||!((s=m.format)===null||s===void 0)&&s.feature)&&((a=t.format)===null||a===void 0?void 0:a.feature)!==((l=m.format)===null||l===void 0?void 0:l.feature))&&!((!((u=t.format)===null||u===void 0)&&u.mesh||!((c=m.format)===null||c===void 0)&&c.mesh)&&((f=t.format)===null||f===void 0?void 0:f.mesh)!==((d=m.format)===null||d===void 0?void 0:d.mesh))){if(QF(t)&&QF(m)){if(xv(t.values,m.values))return p}else if(a2(t)&&a2(m)){if(t.url===m.url)return p}else if(yK(t)&&t.name===p.dataName)return p}}return null}function Vmr(t,r){if(t.data||!t.parent){if(t.data===null){let o=new kd({values:[]});return r.push(o),o}let n=Gwe(t.data,r);if(n)return By(t.data)||(n.data.format=Srt({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{let o=new kd(t.data);return r.push(o),o}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function Gmr(t,r,n){var o,i;let s=0;for(let a of r.transforms){let l,u;if(lit(a))u=t=new lA(t,a),l="derived";else if(C1e(a)){let c=lat(a);u=t=(o=pl.makeWithAncestors(t,{},c,n))!==null&&o!==void 0?o:t,t=new Vy(t,r,a.filter)}else if(uit(a))u=t=Nh.makeFromTransform(t,a,r),l="number";else if(fit(a))l="date",n.getWithExplicit(a.field).value===void 0&&(t=new pl(t,{[a.field]:l}),n.set(a.field,l,!1)),u=t=Np.makeFromTransform(t,a);else if(dit(a))u=t=Mp.makeFromTransform(t,a),l="number",n$(r)&&(t=new Oh(t));else if(Kot(a))u=t=DO.make(t,r,a,s++),l="derived";else if(iit(a))u=t=new Ov(t,a),l="number";else if(sit(a))u=t=new Mh(t,a),l="number";else if(pit(a))u=t=Wy.makeFromTransform(t,a),l="derived";else if(mit(a))u=t=new TO(t,a),l="derived";else if(ait(a))u=t=new EO(t,a),l="derived";else if(Jot(a))u=t=new MO(t,a),l="derived";else if(oit(a))t=new RO(t,a);else if(cit(a))u=t=dA.makeFromTransform(t,a),l="derived";else if(eit(a))u=t=new SO(t,a),l="derived";else if(tit(a))u=t=new FO(t,a),l="derived";else if(rit(a))u=t=new OO(t,a),l="derived";else if(nit(a))u=t=new IO(t,a),l="derived";else{st(it.invalidTransformIgnored(a));continue}if(u&&l!==void 0)for(let c of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(c,l,!1)}return t}function b2(t){var r,n,o,i,s,a,l,u,c,f;let d=Vmr(t,t.component.data.sources),{outputNodes:p,outputNodeRefCounts:m}=t.component.data,h=t.parent?t.parent.component.data.ancestorParse.clone():new gK,g=t.data;By(g)?(_1e(g)?d=new m2(d,g.sequence):HB(g)&&(d=new p2(d,g.graticule)),h.parseNothing=!0):((r=g?.format)===null||r===void 0?void 0:r.parse)===null&&(h.parseNothing=!0),d=(n=pl.makeExplicit(d,t,h))!==null&&n!==void 0?n:d,d=new Oh(d);let y=t.parent&&Op(t.parent);(eo(t)||dl(t))&&y&&(d=(o=Nh.makeFromEncoding(d,t))!==null&&o!==void 0?o:d),t.transforms.length>0&&(d=Gmr(d,t,h));let b=cat(t),x=uat(t);d=(i=pl.makeWithAncestors(d,{},Object.assign(Object.assign({},b),x),h))!==null&&i!==void 0?i:d,eo(t)&&(d=AO.parseAll(d,t),d=kO.parseAll(d,t)),(eo(t)||dl(t))&&(y||(d=(s=Nh.makeFromEncoding(d,t))!==null&&s!==void 0?s:d),d=(a=Np.makeFromEncoding(d,t))!==null&&a!==void 0?a:d,d=lA.parseAllForSortIndex(d,t));let v=t.getName(JF),w=new rs(d,v,JF,m);if(p[v]=w,d=w,eo(t)){let E=Mp.makeFromEncoding(d,t);E&&(d=E,n$(t)&&(d=new Oh(d))),d=(l=dA.makeFromEncoding(d,t))!==null&&l!==void 0?l:d,d=(u=Wy.makeFromEncoding(d,t))!==null&&u!==void 0?u:d}eo(t)&&(d=(c=CO.make(d,t))!==null&&c!==void 0?c:d);let _=t.getName(Ds),C=new rs(d,_,Ds,m);p[_]=C,d=C,eo(t)&&Est(t,C);let S=null;if(dl(t)){let E=t.getName("facet");d=(f=Gat(d,t.facet))!==null&&f!==void 0?f:d,S=new Fh(d,t,E,C.getSource()),p[E]=S}return Object.assign(Object.assign({},t.component.data),{outputNodes:p,outputNodeRefCounts:m,raw:w,main:C,facetRoot:S,ancestorParse:h})}var NO=D(()=>{"use strict";Yot();$y();un();YB();bt();ns();Sf();tA();JK();cA();uA();Jn();Rwe();eZ();d$();jwe();Pwe();Lwe();tZ();Bwe();$we();KK();rZ();zwe();w$();Wat();Uwe();Vwe();Hwe();Wwe();qwe();Ywe();ZK();bO();nZ();e$();oZ()});var EZ,qat=D(()=>{"use strict";un();XF();bt();CZ();NO();y$();E$();ns();EZ=class extends fA{constructor(r,n,o,i){var s,a,l,u;super(r,"concat",n,o,i,r.resolve),(((a=(s=r.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((u=(l=r.resolve)===null||l===void 0?void 0:l.axis)===null||u===void 0?void 0:u.y)==="shared")&&st(it.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(r).map((c,f)=>jO(c,this,this.getName("concat_"+f),void 0,i))}parseData(){this.component.data=b2(this);for(let r of this.children)r.parseData()}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){for(let r of this.children)r.parseAxesAndHeaders()}getChildren(r){return i2(r)?r.vconcat:YF(r)?r.hconcat:r.concat}parseLayoutSize(){Uat(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.forEach(r=>r.assembleSignals()),[]}assembleLayoutSignals(){let r=mO(this);for(let n of this.children)r.push(...n.assembleLayoutSignals());return r}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleMarks(){return this.children.map(r=>{let n=r.assembleTitle(),o=r.assembleGroupStyle(),i=r.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:r.getName("group")},n?{title:n}:{}),o?{style:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup())})}assembleDefaultLayout(){let r=this.layout.columns;return Object.assign(Object.assign({},r!=null?{columns:r}:{}),{bounds:"full",align:"each"})}}});function Wmr(t){return t===!1||t===null}var qmr,Zwe,TZ,Hat=D(()=>{"use strict";EB();bt();vc();co();qmr=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},xve),{labelExpr:1,encode:1}),Zwe=nt(qmr),TZ=class t extends Eu{constructor(r={},n={},o=!1){super(),this.explicit=r,this.implicit=n,this.mainExtracted=o}clone(){return new t(or(this.explicit),or(this.implicit),this.mainExtracted)}hasAxisPart(r){return r==="axis"?!0:r==="grid"||r==="title"?!!this.get(r):!Wmr(this.get(r))}hasOrientSignalRef(){return er(this.explicit.orient)}}});function Yat(t,r,n){var o;let{encoding:i,config:s}=t,a=(o=ko(i[r]))!==null&&o!==void 0?o:ko(i[ll(r)]),l=t.axis(r)||{},{format:u,formatType:c}=l;return My(c)?Object.assign({text:jB({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:s})},n):n}var Xat=D(()=>{"use strict";Er();kr();Ry()});function Kat(t){return gs.reduce((r,n)=>(t.component.scales[n]&&(r[n]=[Jmr(n,t)]),r),{})}function Zat(t){var r;let{axes:n,resolve:o}=t.component,i={top:0,bottom:0,right:0,left:0};for(let s of t.children){s.parseAxesAndHeaders();for(let a of nt(s.component.axes))o.axis[a]=hO(t.component.resolve,a),o.axis[a]==="shared"&&(n[a]=Xmr(n[a],s.component.axes[a]),n[a]||(o.axis[a]="independent",delete n[a]))}for(let s of gs){for(let a of t.children)if(a.component.axes[s]){if(o.axis[s]==="independent"){n[s]=((r=n[s])!==null&&r!==void 0?r:[]).concat(a.component.axes[s]);for(let l of a.component.axes[s]){let{value:u,explicit:c}=l.getWithExplicit("orient");if(!er(u)){if(i[u]>0&&!c){let f=Ymr[u];i[u]>i[f]&&l.set("orient",f,!1)}i[u]++}}}delete a.component.axes[s]}if(o.axis[s]==="independent"&&n[s]&&n[s].length>1)for(let a of n[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function Xmr(t,r){if(t){if(t.length!==r.length)return;let n=t.length;for(let o=0;o<n;o++){let i=t[o],s=r[o];if(!!i!=!!s)return;if(i&&s){let a=i.getWithExplicit("orient"),l=s.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;t[o]=Kmr(i,s)}}}else return r.map(n=>n.clone());return t}function Kmr(t,r){for(let n of Zwe){let o=wf(t.getWithExplicit(n),r.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return qX(i,s);case"gridScale":return{explicit:i.explicit,value:In(i.value,s.value)}}return ZF(i,s,n,"axis")});t.setWithExplicit(n,o)}return t}function Zmr(t,r,n,o,i){if(r==="disable")return n!==void 0;switch(n=n||{},r){case"titleAngle":case"labelAngle":return t===(er(n.labelAngle)?n.labelAngle:zT(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===dwe(o,i))return!0}return t===n[r]}function Jmr(t,r){var n,o,i;let s=r.axis(t),a=new TZ,l=ko(r.encoding[t]),{mark:u,config:c}=r,f=s?.orient||((n=c[t==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((o=c.axis)===null||o===void 0?void 0:o.orient)||Ost(t),d=r.getScaleComponent(t).get("type"),p=Nst(t,d,f,r.config),m=s!==void 0?!s:m$("disable",c,s?.style,p).configValue;if(a.set("disable",m,s!==void 0),m)return a;s=s||{};let h=Fst(r,s,t,l,p),g={fieldOrDatumDef:l,axis:s,channel:t,model:r,scaleType:d,orient:f,labelAngle:h,mark:u,config:c};for(let x of Zwe){let v=x in uwe?uwe[x](g):vve(x)?s[x]:void 0,w=v!==void 0,_=Zmr(v,x,s,r,t);if(w&&_)a.set(x,v,_);else{let{configValue:C=void 0,configFrom:S=void 0}=vve(x)&&x!=="values"?m$(x,r.config,s.style,p):{},E=C!==void 0;w&&!E?a.set(x,v,_):(S!=="vgAxisConfig"||Qmr.has(x)&&E||bF(C)||er(C))&&a.set(x,C,!1)}}let y=(i=s.encoding)!==null&&i!==void 0?i:{},b=dX.reduce((x,v)=>{var w;if(!a.hasAxisPart(v))return x;let _=WK((w=y[v])!==null&&w!==void 0?w:{},r),C=v==="labels"?Yat(r,t,_):_;return C!==void 0&&!hn(C)&&(x[v]={update:C}),x},{});return hn(b)||a.set("encode",b,!!s.encoding||s.labelAngle!==void 0),a}var Ymr,Qmr,Qwe=D(()=>{"use strict";EB();Er();kr();bt();co();jo();ywe();b$();vc();Hat();awe();Xat();pwe();Ymr={bottom:"top",top:"bottom",left:"right",right:"left"};Qmr=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"])});function Qat({encoding:t,size:r}){for(let n of gs){let o=Bl(n);vf(r[o])&&xf(t[n])&&(delete r[o],st(it.stepDropped(o)))}return r}var Jat=D(()=>{"use strict";Er();kr();un();ZT()});function elt(t,r,n,{graticule:o}){let i=Pl(t)?Object.assign({},t):{type:t},s=sn("orient",i,n);if(i.orient=nhr(i.type,r,s),s!==void 0&&s!==i.orient&&st(it.orientOverridden(i.orient,s)),i.type==="bar"&&i.orient){let c=sn("cornerRadiusEnd",i,n);if(c!==void 0){let f=i.orient==="horizontal"&&r.x2||i.orient==="vertical"&&r.y2?["cornerRadius"]:Rrt[i.orient];for(let d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return sn("opacity",i,n)===void 0&&(i.opacity=thr(i.type,r)),i.filled===void 0&&(i.filled=o?!1:rhr(i,n)),sn("cursor",i,n)===void 0&&(i.cursor=ehr(i,r,n)),i}function ehr(t,r,n){return r.href||t.href||sn("href",t,n)?"pointer":t.cursor}function thr(t,r){if(Gt([xF,TB,AB,kB],t)&&!GF(r))return .7}function rhr(t,r){let n=Py("filled",t,r),o=t.type;return In(n,o!==xF&&o!==GT&&o!==vF)}function nhr(t,r,n){switch(t){case xF:case AB:case kB:case pX:case Drt:case Irt:return}let{x:o,y:i,x2:s,y2:a}=r;switch(t){case VT:if(Et(o)&&(qi(o.bin)||Et(i)&&i.aggregate&&!o.aggregate))return"vertical";if(Et(i)&&(qi(i.bin)||Et(o)&&o.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s&&(Et(o)&&o.type===Ap&&!xn(o.bin)||$X(o)))return"horizontal";if(!a&&(Et(i)&&i.type===Ap&&!xn(i.bin)||$X(i)))return"vertical"}case vF:if(s&&!(Et(o)&&qi(o.bin))&&a&&!(Et(i)&&qi(i.bin)))return;case UT:if(a)return Et(i)&&qi(i.bin)?"horizontal":"vertical";if(s)return Et(o)&&qi(o.bin)?"vertical":"horizontal";if(t===vF){if(o&&!i)return"vertical";if(i&&!o)return"horizontal"}case GT:case TB:{let l=xf(o),u=xf(i);if(l&&!u)return t!=="tick"?"horizontal":"vertical";if(!l&&u)return t!=="tick"?"vertical":"horizontal";if(l&&u){let c=o,f=i,d=c.type===Dy,p=f.type===Dy;return d&&!p?t!=="tick"?"vertical":"horizontal":!d&&p?t!=="tick"?"horizontal":"vertical":!c.aggregate&&f.aggregate?t!=="tick"?"vertical":"horizontal":c.aggregate&&!f.aggregate?t!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}var tlt=D(()=>{"use strict";$l();kr();xc();un();ea();Ad();bt();jo()});var rlt,nlt=D(()=>{"use strict";wc();rlt={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Yi("x",t,{defaultPos:"mid"})),Yi("y",t,{defaultPos:"mid"})),_f(t,"radius","arc")),_f(t,"theta","arc"))}});var olt,ilt=D(()=>{"use strict";wc();olt={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),c2("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),c2("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),iO(t))}});var slt,alt=D(()=>{"use strict";wc();slt={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),_f(t,"x","bar")),_f(t,"y","bar"))}});var llt,ult=D(()=>{"use strict";kr();Ad();wc();llt={vgMark:"shape",encodeEntry:t=>Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{let{encoding:r}=t,n=r.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&Et(n)&&n.type===Ah?{field:vt(n,{expr:"datum"})}:{})]}}});var clt,flt=D(()=>{"use strict";wc();clt={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),_f(t,"x","image")),_f(t,"y","image")),l2(t,"url"))}});var dlt,plt,mlt=D(()=>{"use strict";wc();dlt={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Yi("x",t,{defaultPos:"mid"})),Yi("y",t,{defaultPos:"mid"})),Xo("size",t,{vgChannel:"strokeWidth"})),iO(t))},plt={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Yi("x",t,{defaultPos:"mid"})),Yi("y",t,{defaultPos:"mid"})),Xo("size",t)),iO(t))}});function Jwe(t,r){let{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Yi("x",t,{defaultPos:"mid"})),Yi("y",t,{defaultPos:"mid"})),Xo("size",t)),Xo("angle",t)),ohr(t,n,r))}function ohr(t,r,n){return n?{shape:{value:n}}:Xo("shape",t)}var hlt,glt,ylt,blt=D(()=>{"use strict";wc();hlt={vgMark:"symbol",encodeEntry:t=>Jwe(t)},glt={vgMark:"symbol",encodeEntry:t=>Jwe(t,"circle")},ylt={vgMark:"symbol",encodeEntry:t=>Jwe(t,"square")}});var xlt,vlt=D(()=>{"use strict";wc();xlt={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),_f(t,"x","rect")),_f(t,"y","rect"))}});var wlt,_lt=D(()=>{"use strict";wc();wlt={vgMark:"rule",encodeEntry:t=>{let{markDef:r}=t,n=r.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),c2("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),c2("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Xo("size",t,{vgChannel:"strokeWidth"}))}}});function ihr(t,r,n){if(sn("align",t,n)===void 0)return"center"}function shr(t,r,n){if(sn("baseline",t,n)===void 0)return"middle"}var Slt,Clt=D(()=>{"use strict";jo();wc();Slt={vgMark:"text",encodeEntry:t=>{let{config:r,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Yi("x",t,{defaultPos:"mid"})),Yi("y",t,{defaultPos:"mid"})),l2(t)),Xo("size",t,{vgChannel:"fontSize"})),Xo("angle",t)),EK("align",ihr(t.markDef,n,r))),EK("baseline",shr(t.markDef,n,r))),Yi("radius",t,{defaultPos:null,isMidPoint:!0})),Yi("theta",t,{defaultPos:null,isMidPoint:!0}))}}});function ahr(t){var r;let{config:n,markDef:o}=t,{orient:i}=o,s=i==="horizontal"?"width":"height",a=t.getScaleComponent(i==="horizontal"?"x":"y"),l=(r=sn("size",o,n,{vgChannel:s}))!==null&&r!==void 0?r:n.tick.bandSize;if(l!==void 0)return l;{let u=a?a.get("range"):void 0;return u&&Su(u)&&vo(u.step)?u.step*3/4:QT(n.view,s)*3/4}}var Elt,Tlt=D(()=>{"use strict";nr();s2();co();jo();wc();Elt={vgMark:"rect",encodeEntry:t=>{let{config:r,markDef:n}=t,o=n.orient,i=o==="horizontal"?"width":"height",s=o==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Yi("x",t,{defaultPos:"mid",vgChannel:"xc"})),Yi("y",t,{defaultPos:"mid",vgChannel:"yc"})),Xo("size",t,{defaultValue:ahr(t),vgChannel:i})),{[s]:fo(sn("thickness",n,r))})}}});function Ilt(t){return Gt([GT,UT,Nrt],t.mark)?lhr(t):Gt([VT],t.mark)?uhr(t):kZ(t)}function lhr(t){let r=YX(t.mark,t.encoding),n=kZ(t,{fromPrefix:r.length>0?Alt:""});return r.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:Alt+t.requestDataName(Ds),data:t.requestDataName(Ds),groupby:r}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}function uhr(t){let r=EX.some(n=>sn(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&r){let[n]=kZ(t,{fromPrefix:klt}),o=t.scaleName(t.stack.fieldChannel),i=(d={})=>t.vgField(t.stack.fieldChannel,d),s=(d,p)=>{let m=[i({prefix:"min",suffix:"start",expr:p}),i({prefix:"max",suffix:"start",expr:p}),i({prefix:"min",suffix:"end",expr:p}),i({prefix:"max",suffix:"end",expr:p})];return`${d}(${m.map(h=>`scale('${o}',${h})`).join(",")})`},a,l;t.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},Y_(n.encode.update,["y","yc","y2","height",...EX])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),l={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},uf(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},Y_(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),l={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},uf(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let d of EX){let p=Py(d,t.markDef,t.config);n.encode.update[d]?(a[d]=n.encode.update[d],delete n.encode.update[d]):p&&(a[d]=fo(p)),p&&(n.encode.update[d]={value:0})}let u=t.fieldDef(t.stack.groupbyChannel),c=vt(u)?[vt(u)]:[];return(u?.bin||u?.timeUnit)&&c.push(vt(u,{binSuffix:"end"})),a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,p)=>{if(n.encode.update[p])return Object.assign(Object.assign({},d),{[p]:n.encode.update[p]});{let m=Py(p,t.markDef,t.config);return m!==void 0?Object.assign(Object.assign({},d),{[p]:fo(m)}):d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(Ds),name:klt+t.requestDataName(Ds),groupby:c,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:l},marks:[n]}]}]}else return kZ(t)}function chr(t){let{encoding:r,stack:n,mark:o,markDef:i,config:s}=t,a=r.order;if(!(!Lt(a)&&Cu(a)&&pve(a.value)||!a&&pve(sn("order",i,s)))){if((Lt(a)||Et(a))&&!n)return WX(a,{expr:"datum"});if(ff(o)){let l=i.orient==="horizontal"?"y":"x",u=r[l];if(Et(u)){let c=u.sort;if(Lt(c))return{field:vt(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(cl(c))return{field:vt({aggregate:GF(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(RX(c)){let f=t.fieldDef(c.encoding);return{field:vt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:vt(u,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function kZ(t,r={fromPrefix:""}){let{mark:n,markDef:o,config:i}=t,s=In(o.clip,fhr(t),dhr(t)),a=Zve(o),l=t.encoding.key,u=chr(t),c=phr(t),f=sn("aria",o,i),d=AZ[n].postEncodingTransform?AZ[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:AZ[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:r.fromPrefix+t.requestDataName(Ds)},encode:{update:AZ[n].encodeEntry(t)}}),d?{transform:d}:{})]}function fhr(t){let r=t.getScaleComponent("x"),n=t.getScaleComponent("y");return r&&r.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function dhr(t){let r=t.component.projection;return r&&!r.isFit?!0:void 0}function phr(t){if(!t.component.selection)return null;let r=nt(t.component.selection).length,n=r,o=t.parent;for(;o&&n===0;)n=nt(o.component.selection).length,o=o.parent;return n?{interactive:r>0}:null}var AZ,Alt,klt,Dlt=D(()=>{"use strict";nr();kr();$y();xc();ea();kh();bt();co();jo();nlt();ilt();alt();ult();flt();mlt();blt();vlt();_lt();Clt();Tlt();AZ={arc:rlt,area:olt,bar:slt,circle:glt,geoshape:llt,image:clt,line:dlt,point:hlt,rect:xlt,rule:wlt,square:ylt,text:Slt,tick:Elt,trail:plt};Alt="faceted_path_";klt="stack_group_"});var PO,e_e=D(()=>{"use strict";Er();kr();$y();xc();xc();ea();ZT();y1e();p$();Qwe();NO();y$();Jat();E$();tlt();Dlt();ns();nA();tA();PO=class extends _O{constructor(r,n,o,i={},s){var a,l;super(r,"unit",n,o,s,void 0,d1e(r)?r.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];let u=Pl(r.mark)?r.mark.type:r.mark;this.markDef=elt(r.mark,(a=r.encoding)!==null&&a!==void 0?a:{},s,{graticule:r.data&&HB(r.data)});let c=this.encoding=iot((l=r.encoding)!==null&&l!==void 0?l:{},this.markDef,s);this.size=Qat({encoding:c,size:d1e(r)?Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{}):i}),this.stack=lK(u,c),this.specifiedScales=this.initScales(u,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegend(c),this.specifiedProjection=r.projection,this.selection=r.selection}get hasProjection(){let{encoding:r}=this,n=this.mark===mX,o=r&&Xrt.some(i=>Nr(r[i]));return n||o}scaleDomain(r){let n=this.specifiedScales[r];return n?n.domain:void 0}axis(r){return this.specifiedAxes[r]}legend(r){return this.specifiedLegends[r]}initScales(r,n){return Q_.reduce((o,i)=>{var s;let a=ko(n[i]);return a&&(o[i]=(s=a.scale)!==null&&s!==void 0?s:{}),o},{})}initAxes(r){return gs.reduce((n,o)=>{let i=r[o];if(Nr(i)||o===Qn&&Nr(r.x2)||o===li&&Nr(r.y2)){let s=Nr(i)?i.axis:void 0;n[o]=s&&Object.assign({},s)}return n},{})}initLegend(r){return ont.reduce((n,o)=>{let i=ko(r[o]);if(i&&snt(o)){let s=i.legend;n[o]=s&&Object.assign({},s)}return n},{})}parseData(){this.component.data=b2(this)}parseLayoutSize(){Vat(this)}parseSelections(){this.component.selection=Cst(this,this.selection)}parseMarkGroup(){this.component.mark=Ilt(this)}parseAxesAndHeaders(){this.component.axes=Kat(this)}assembleSelectionTopLevelSignals(r){return Bit(this,r)}assembleSignals(){return[...$K(this),...Pit(this,[])]}assembleSelectionData(r){return $it(this,r)}assembleLayout(){return null}assembleLayoutSignals(){return mO(this)}assembleMarks(){var r;let n=(r=this.component.mark)!==null&&r!==void 0?r:[];return(!this.parent||!Op(this.parent))&&(n=L1e(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(r){return Ly(this.encoding,r)}fieldDef(r){let n=this.encoding[r];return zl(n)}typedFieldDef(r){let n=this.fieldDef(r);return ra(n)?n:null}}});var IZ,Nlt=D(()=>{"use strict";un();XF();bt();p$();Qwe();NO();y$();E$();Ewe();ns();nA();e_e();IZ=class t extends fA{constructor(r,n,o,i,s){super(r,"layer",n,o,s,r.resolve,r.view);let a=Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{});this.children=r.layer.map((l,u)=>{if(kv(l))return new t(l,this,this.getName("layer_"+u),a,s);if(Aa(l))return new PO(l,this,this.getName("layer_"+u),a,s);throw new Error(it.invalidSpec(l))})}parseData(){this.component.data=b2(this);for(let r of this.children)r.parseData()}parseLayoutSize(){zat(this)}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){Zat(this)}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleSignals()),$K(this))}assembleLayoutSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleLayoutSignals()),mO(this))}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleTitle(){let r=super.assembleTitle();if(r)return r;for(let n of this.children)if(r=n.assembleTitle(),r)return r}assembleLayout(){return null}assembleMarks(){return zit(this,this.children.flatMap(r=>r.assembleMarks()))}assembleLegends(){return this.children.reduce((r,n)=>r.concat(n.assembleLegends()),YK(this))}}});function jO(t,r,n,o,i){if(Cv(t))return new SZ(t,r,n,i);if(kv(t))return new IZ(t,r,n,o,i);if(Aa(t))return new PO(t,r,n,o,i);if(f1e(t))return new EZ(t,r,n,i);throw new Error(it.invalidSpec(t))}var CZ=D(()=>{"use strict";un();XF();qat();Kwe();Nlt();e_e()});function Flt(t,r={}){r.logger&&fnt(r.logger),r.fieldTitle&&Hve(r.fieldTitle);try{let n=sK(bB(r.config,t.config)),o=mK(t,n),i=jO(o,null,"",void 0,n);return i.parse(),mat(i.component.data,i),{spec:hhr(i,mhr(t,o.autosize,n,i),t.datasets,t.usermeta),normalized:o}}finally{r.logger&&dnt(),r.fieldTitle&&not()}}function mhr(t,r,n,o){let i=o.component.layoutSize.get("width"),s=o.component.layoutSize.get("height");if(r===void 0?(r={type:"pad"},o.hasAxisOrientSignalRef()&&(r.resize=!0)):fr(r)&&(r={type:r}),i&&s&&Wot(r.type)){if(i==="step"&&s==="step")st(it.droppingFit()),r.type="pad";else if(i==="step"||s==="step"){let a=i==="step"?"width":"height";st(it.droppingFit(Z_(a)));let l=a==="width"?"height":"width";r.type=qot(l)}}return Object.assign(Object.assign(Object.assign({},nt(r).length===1&&r.type?r.type==="pad"?{}:{autosize:r.type}:{autosize:r}),w1e(n)),w1e(t))}function hhr(t,r,n={},o){let i=t.config?kot(t.config):void 0,s=[].concat(t.assembleSelectionData([]),jat(t.component.data,n)),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0),f=t.assembleLayoutSignals();return f=f.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(r[d.name]=+d.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),r),l?{title:l}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:s}),a.length>0?{projections:a}:{}),t.assembleGroup([...f,...t.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),o?{usermeta:o}:{})}var Olt=D(()=>{"use strict";nr();Er();kr();s2();un();v1e();Hot();bt();CZ();Xwe();yZ()});function Mlt(t,r){return ghr.map(t,{config:r})}var t_e,ghr,Rlt=D(()=>{"use strict";xc();g1e();t_e=class extends KF{mapUnit(r,{config:n}){if(r.encoding){let{encoding:o,transform:i}=r,{bins:s,timeUnits:a,aggregate:l,groupby:u,encoding:c}=WF(o,n),f=[...i||[],...s,...a,...l.length===0?[]:[{aggregate:l,groupby:u}]];return Object.assign(Object.assign(Object.assign({},r),f.length>0?{transform:f}:{}),{encoding:c})}else return r}},ghr=new t_e});var r_e={};cn(r_e,{compile:()=>Flt,extractTransforms:()=>Mlt,normalize:()=>mK,version:()=>yhr});var yhr,jlt=D(()=>{"use strict";Ftt();v1e();Olt();Rlt();yhr=Ott.version});function bhr(t){let[r,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:r,version:n}}var n_e,Plt=D(()=>{"use strict";n_e=bhr});var c_e={};cn(c_e,{carbong10:()=>ggr,carbong100:()=>bgr,carbong90:()=>ygr,carbonwhite:()=>hgr,dark:()=>Lhr,excel:()=>Bhr,fivethirtyeight:()=>Uhr,ggplot2:()=>Vhr,googlecharts:()=>tgr,latimes:()=>Hhr,powerbi:()=>fgr,quartz:()=>Yhr,urbaninstitute:()=>egr,version:()=>xgr,vox:()=>Xhr});function MZ({theme:t,background:r}){let n=["white","g10"].includes(t)?"light":"dark",o=OZ.gridBg[t],i=OZ.textPrimary[t],s=OZ.textSecondary[t],a=n==="dark"?pgr:mgr,l=n==="dark"?"#d4bbff":"#6929c4";return{background:r,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:o,stroke:o},group:{fill:o},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:a_e,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:dgr,labelFontWeight:l_e,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:OZ.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:a_e,fill:s,fontWeight:l_e},"guide-title":{font:a_e,fill:s,fontWeight:l_e}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var xhr,vhr,whr,_hr,Shr,Chr,Ehr,Thr,Ahr,khr,Ihr,Dhr,Nhr,Fhr,Ohr,Mhr,Rhr,jhr,Phr,LO,Llt,Lhr,pA,Bhr,mA,o_e,$hr,zhr,Blt,$lt,Uhr,hA,Vhr,Ghr,Whr,zlt,Ult,qhr,gA,i_e,Vlt,Glt,T$,Hhr,yA,DZ,Yhr,bA,Xhr,Rp,Wlt,Khr,NZ,s_e,Zhr,Qhr,Jhr,A$,egr,xA,qlt,FZ,tgr,u_e,Hlt,Ylt,Xlt,k$,Klt,Zlt,I$,Qlt,rgr,jh,ngr,ogr,igr,sgr,agr,lgr,ugr,eut,tut,Jlt,cgr,fgr,a_e,dgr,l_e,OZ,pgr,mgr,hgr,ggr,ygr,bgr,xgr,rut=D(()=>{"use strict";xhr="vega-themes",vhr="2.15.0",whr="Themes for stylized Vega and Vega-Lite visualizations.",_hr=["vega","vega-lite","themes","style"],Shr="BSD-3-Clause",Chr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Ehr=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Thr="build/vega-themes.js",Ahr="build/vega-themes.module.js",khr="build/vega-themes.min.js",Ihr="build/vega-themes.min.js",Dhr="build/vega-themes.module.d.ts",Nhr={type:"git",url:"https://github.com/vega/vega-themes.git"},Fhr=["src","build"],Ohr={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Mhr={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Rhr={vega:"*","vega-lite":"*"},jhr={},Phr={name:xhr,version:vhr,description:whr,keywords:_hr,license:Shr,author:Chr,contributors:Ehr,main:Thr,module:Ahr,unpkg:khr,jsdelivr:Ihr,types:Dhr,repository:Nhr,files:Fhr,scripts:Ohr,devDependencies:Mhr,peerDependencies:Rhr,dependencies:jhr},LO="#fff",Llt="#888",Lhr={background:"#333",view:{stroke:Llt},title:{color:LO,subtitleColor:LO},style:{"guide-label":{fill:LO},"guide-title":{fill:LO}},axis:{domainColor:LO,gridColor:Llt,tickColor:LO}},pA="#4572a7",Bhr={background:"#fff",arc:{fill:pA},area:{fill:pA},line:{stroke:pA,strokeWidth:2},path:{stroke:pA},rect:{fill:pA},shape:{stroke:pA},symbol:{fill:pA,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},mA="#30a2da",o_e="#cbcbcb",$hr="#999",zhr="#333",Blt="#f0f0f0",$lt="#333",Uhr={arc:{fill:mA},area:{fill:mA},axis:{domainColor:o_e,grid:!0,gridColor:o_e,gridWidth:1,labelColor:$hr,labelFontSize:10,titleColor:zhr,tickColor:o_e,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Blt,group:{fill:Blt},legend:{labelColor:$lt,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:$lt,titleFontSize:14,titlePadding:10},line:{stroke:mA,strokeWidth:2},path:{stroke:mA,strokeWidth:.5},rect:{fill:mA},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:mA},bar:{binSpacing:2,fill:mA,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},hA="#000",Vhr={group:{fill:"#e5e5e5"},arc:{fill:hA},area:{fill:hA},line:{stroke:hA},path:{stroke:hA},rect:{fill:hA},shape:{stroke:hA},symbol:{fill:hA,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ghr=22,Whr="normal",zlt="Benton Gothic, sans-serif",Ult=11.5,qhr="normal",gA="#82c6df",i_e="Benton Gothic Bold, sans-serif",Vlt="normal",Glt=13,T$={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Hhr={background:"#ffffff",title:{anchor:"start",color:"#000000",font:i_e,fontSize:Ghr,fontWeight:Whr},arc:{fill:gA},area:{fill:gA},line:{stroke:gA,strokeWidth:2},path:{stroke:gA},rect:{fill:gA},shape:{stroke:gA},symbol:{fill:gA,size:30},axis:{labelFont:zlt,labelFontSize:Ult,labelFontWeight:qhr,titleFont:i_e,titleFontSize:Glt,titleFontWeight:Vlt},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:zlt,labelFontSize:Ult,symbolType:"square",titleFont:i_e,titleFontSize:Glt,titleFontWeight:Vlt},range:{category:T$["category-6"],diverging:T$["fireandice-6"],heatmap:T$["fire-7"],ordinal:T$["fire-7"],ramp:T$["fire-7"]}},yA="#ab5787",DZ="#979797",Yhr={background:"#f9f9f9",arc:{fill:yA},area:{fill:yA},line:{stroke:yA},path:{stroke:yA},rect:{fill:yA},shape:{stroke:yA},symbol:{fill:yA,size:30},axis:{domainColor:DZ,domainWidth:.5,gridWidth:.2,labelColor:DZ,tickColor:DZ,tickWidth:.2,titleColor:DZ},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},bA="#3e5c69",Xhr={background:"#fff",arc:{fill:bA},area:{fill:bA},line:{stroke:bA},path:{stroke:bA},rect:{fill:bA},shape:{stroke:bA},symbol:{fill:bA},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Rp="#1696d2",Wlt="#000000",Khr="#FFFFFF",NZ="Lato",s_e="Lato",Zhr="Lato",Qhr="#DEDDDD",Jhr=18,A$={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},egr={background:Khr,title:{anchor:"start",fontSize:Jhr,font:NZ},axisX:{domain:!0,domainColor:Wlt,domainWidth:1,grid:!1,labelFontSize:12,labelFont:s_e,labelAngle:0,tickColor:Wlt,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:NZ},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Qhr,gridWidth:1,labelFontSize:12,labelFont:s_e,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:NZ,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:s_e,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:NZ,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:A$["six-groups-cat-1"],diverging:A$["diverging-colors"],heatmap:A$["diverging-colors"],ordinal:A$["six-groups-seq"],ramp:A$["shades-blue"]},area:{fill:Rp},rect:{fill:Rp},line:{color:Rp,stroke:Rp,strokeWidth:5},trail:{color:Rp,stroke:Rp,strokeWidth:0,size:1},path:{stroke:Rp,strokeWidth:.5},point:{filled:!0},text:{font:Zhr,color:Rp,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Rp,stroke:null}},arc:{fill:Rp},shape:{stroke:Rp},symbol:{fill:Rp,size:30}},xA="#3366CC",qlt="#ccc",FZ="Arial, sans-serif",tgr={arc:{fill:xA},area:{fill:xA},path:{stroke:xA},rect:{fill:xA},shape:{stroke:xA},symbol:{stroke:xA},circle:{fill:xA},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:FZ,fontSize:12},"guide-title":{font:FZ,fontSize:12},"group-title":{font:FZ,fontSize:12}},title:{font:FZ,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:qlt,tickColor:qlt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},u_e=t=>t*(1/3+1),Hlt=u_e(9),Ylt=u_e(10),Xlt=u_e(12),k$="Segoe UI",Klt="wf_standard-font, helvetica, arial, sans-serif",Zlt="#252423",I$="#605E5C",Qlt="transparent",rgr="#C8C6C4",jh="#118DFF",ngr="#12239E",ogr="#E66C37",igr="#6B007B",sgr="#E044A7",agr="#744EC2",lgr="#D9B300",ugr="#D64550",eut=jh,tut="#DEEFFF",Jlt=[tut,eut],cgr=[tut,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",eut],fgr={view:{stroke:Qlt},background:Qlt,font:k$,header:{titleFont:Klt,titleFontSize:Xlt,titleColor:Zlt,labelFont:k$,labelFontSize:Ylt,labelColor:I$},axis:{ticks:!1,grid:!1,domain:!1,labelColor:I$,labelFontSize:Hlt,titleFont:Klt,titleColor:Zlt,titleFontSize:Xlt,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:rgr,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:jh},line:{stroke:jh,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:k$,fontSize:Hlt,fill:I$},arc:{fill:jh},area:{fill:jh,line:!0,opacity:.6},path:{stroke:jh},rect:{fill:jh},point:{fill:jh,filled:!0,size:75},shape:{stroke:jh},symbol:{fill:jh,strokeWidth:1.5,size:50},legend:{titleFont:k$,titleFontWeight:"bold",titleColor:I$,labelFont:k$,labelFontSize:Ylt,labelColor:I$,symbolType:"circle",symbolSize:75},range:{category:[jh,ngr,ogr,igr,sgr,agr,lgr,ugr],diverging:Jlt,heatmap:Jlt,ordinal:cgr}},a_e='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',dgr='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',l_e=400,OZ={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},pgr=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],mgr=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];hgr=MZ({theme:"white",background:"#ffffff"}),ggr=MZ({theme:"g10",background:"#f4f4f4"}),ygr=MZ({theme:"g90",background:"#262626"}),bgr=MZ({theme:"g100",background:"#161616"}),xgr=Phr.version});function Ugr(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Vgr(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return $gr.toString().replace(out,t)}function Ggr(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}function Wgr(t,r,n){if(Wr(t))return`[${t.map(o=>r(Kn(o)?o:nut(o,n))).join(", ")}]`;if(ln(t)){let o="",i=t,{title:s,image:a}=i,l=Ggr(i,["title","image"]);s&&(o+=`<h2>${r(s)}</h2>`),a&&(o+=`<img src="${r(a)}">`);let u=Object.keys(l);if(u.length>0){o+="<table>";for(let c of u){let f=l[c];f!==void 0&&(ln(f)&&(f=nut(f,n)),o+=`<tr><td class="key">${r(c)}:</td><td class="value">${r(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return r(t)}function qgr(t){let r=[];return function(n,o){if(typeof o!="object"||o===null)return o;let i=r.indexOf(this)+1;return r.length=i,r.length>t?"[Object]":r.indexOf(o)>=0?"[Circular]":(r.push(o),o)}}function nut(t,r){return JSON.stringify(t,qgr(r))}function Hgr(t,r,n,o){let i=t.clientX+n;i+r.width>window.innerWidth&&(i=+t.clientX-n-r.width);let s=t.clientY+o;return s+r.height>window.innerHeight&&(s=+t.clientY-o-r.height),{x:i,y:s}}var vgr,wgr,_gr,Sgr,Cgr,Egr,Tgr,Agr,kgr,Igr,Dgr,Ngr,Fgr,Ogr,Mgr,Rgr,jgr,Pgr,Lgr,Bgr,$gr,out,zgr,RZ,kbo,iut=D(()=>{"use strict";Ts();vgr="vega-tooltip",wgr="0.25.1",_gr="A tooltip plugin for Vega-Lite and Vega visualizations.",Sgr=["vega-lite","vega","tooltip"],Cgr={type:"git",url:"https://github.com/vega/vega-tooltip.git"},Egr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Tgr=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],Agr="BSD-3-Clause",kgr={url:"https://github.com/vega/vega-tooltip/issues"},Igr="https://github.com/vega/vega-tooltip#readme",Dgr="build/vega-tooltip.js",Ngr="build/vega-tooltip.module.js",Fgr="build/vega-tooltip.min.js",Ogr="build/vega-tooltip.min.js",Mgr="build/vega-tooltip.module.d.ts",Rgr=["src","build","types"],jgr={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"beemo jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"beemo create-config && yarn copy:data",prettierbase:"beemo prettier '*.{css,scss,html}'",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check"},Pgr={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@wessberg/rollup-plugin-ts":"^1.3.8","browser-sync":"^2.26.14",concurrently:"^6.0.0","gh-pages":"^3.1.0","node-sass":"^5.0.0",path:"^0.12.7",rollup:"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"~4.2.2","vega-datasets":"^2.2.0","vega-lite-dev-config":"^0.16.1","vega-typings":"^0.19.2"},Lgr={"vega-util":"^1.16.0"},Bgr={name:vgr,version:wgr,description:_gr,keywords:Sgr,repository:Cgr,author:Egr,collaborators:Tgr,license:Agr,bugs:kgr,homepage:Igr,main:Dgr,module:Ngr,unpkg:Fgr,jsdelivr:Ogr,types:Mgr,files:Rgr,scripts:jgr,devDependencies:Pgr,dependencies:Lgr},$gr=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,out="vg-tooltip-element",zgr={offsetX:10,offsetY:10,id:out,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Ugr,maxDepth:2};RZ=class{constructor(r){this.options=Object.assign(Object.assign({},zgr),r);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let o=document.createElement("style");o.setAttribute("id",this.options.styleId),o.innerHTML=Vgr(n);let i=document.head;i.childNodes.length>0?i.insertBefore(o,i.childNodes[0]):i.appendChild(o)}}tooltipHandler(r,n,o,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=Wgr(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:a,y:l}=Hgr(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${l}px; left: ${a}px`)}},kbo=Bgr.version});var vA={};cn(vA,{DEFAULT_ACTIONS:()=>fut,default:()=>s0r,guessMode:()=>dut,vega:()=>Mv,vegaLite:()=>BO});function LZ(t,r,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{c(o.next(f))}catch(d){a(d)}}function u(f){try{c(o.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(l,u)}c((o=o.apply(t,r||[])).next())})}function Ygr(t,r,n){let o=t.open(r),i=1e4,s=250,{origin:a}=new URL(r),l=~~(i/s);function u(f){f.source===o&&(l=0,t.removeEventListener("message",u,!1))}t.addEventListener("message",u,!1);function c(){l<=0||(o.postMessage(n,a),setTimeout(c,s),l-=1)}setTimeout(c,s)}function cut(t,...r){for(let n of r)Kgr(t,n);return t}function Kgr(t,r){for(let n of Object.keys(r))B3(t,n,r[n],!0)}function t0r(t){return typeof t=="function"}function sut(t,r,n,o){let i=`<html><head>${r}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+s),a.document.title=`${D$[o]} JSON Source`}function dut(t,r){var n;if(t.$schema){let o=n_e(t.$schema);r&&r!==o.library&&console.warn(`The given visualization spec is written in ${D$[o.library]}, but mode argument sets ${(n=D$[r])!==null&&n!==void 0?n:r}.`);let i=o.library;return(0,d_e.satisfies)(BZ[i],`^${o.version.slice(1)}`)||console.warn(`The input spec uses ${D$[i]} ${o.version}, but the current version of ${D$[i]} is v${BZ[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":r??"vega"}function r0r(t){return!!(t&&"load"in t)}function aut(t){return r0r(t)?t:Mv.loader(t)}function lut(t){var r;return(r=t.usermeta&&t.usermeta.embedOptions)!==null&&r!==void 0?r:{}}function n0r(t,r,n={}){var o,i,s;return LZ(this,void 0,void 0,function*(){let a,l;Kn(r)?(l=aut(n.loader),a=JSON.parse(yield l.load(r))):a=r;let u=lut(a).loader;(!l||u)&&(l=aut((o=n.loader)!==null&&o!==void 0?o:u));let c=yield uut(lut(a),l),f=yield uut(n,l),d=Object.assign(Object.assign({},cut(f,c)),{config:zI((i=f.config)!==null&&i!==void 0?i:{},(s=c.config)!==null&&s!==void 0?s:{})});return yield i0r(t,a,d,l)})}function uut(t,r){var n;return LZ(this,void 0,void 0,function*(){let o=Kn(t.config)?JSON.parse(yield r.load(t.config)):(n=t.config)!==null&&n!==void 0?n:{},i=Kn(t.patch)?JSON.parse(yield r.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),o?{config:o}:{})})}function o0r(t){var r;let n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(r=document.head)!==null&&r!==void 0?r:document.body}}function i0r(t,r,n={},o){var i,s,a,l,u,c;return LZ(this,void 0,void 0,function*(){let f=n.theme?zI(c_e[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,d=Dse(n.actions)?n.actions:cut({},fut,(s=n.actions)!==null&&s!==void 0?s:{}),p=Object.assign(Object.assign({},Zgr),n.i18n),m=(a=n.renderer)!==null&&a!==void 0?a:"canvas",h=(l=n.logLevel)!==null&&l!==void 0?l:Mv.Warn,g=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization",y=typeof t=="string"?document.querySelector(t):t;if(!y)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){let k="vega-embed-style",{root:M,rootContainer:I}=o0r(y);if(!M.getElementById(k)){let L=document.createElement("style");L.id=k,L.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?Xgr.toString():n.defaultStyle,I.appendChild(L)}}let b=dut(r,n.mode),x=Qgr[b](r,f);if(b==="vega-lite"&&x.$schema){let k=n_e(x.$schema);(0,d_e.satisfies)(BZ.vega,`^${k.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${k.version}, but current version is v${BZ.vega}.`)}y.classList.add("vega-embed"),d&&y.classList.add("has-actions"),y.innerHTML="";let v=y;if(d){let k=document.createElement("div");k.classList.add(e0r),y.appendChild(k),v=k}let w=n.patch;w&&(w instanceof Function?x=w(x):x=LI(x,w,!0,!1).newDocument),n.formatLocale&&Mv.formatLocale(n.formatLocale),n.timeFormatLocale&&Mv.timeFormatLocale(n.timeFormatLocale);let{ast:_}=n,C=Mv.parse(x,b==="vega-lite"?{}:f,{ast:_}),S=new(n.viewClass||Mv.View)(C,Object.assign({loader:o,logLevel:h,renderer:m},_?{expr:Mv.expressionInterpreter}:{}));if(n.tooltip!==!1){let k;t0r(n.tooltip)?k=n.tooltip:k=new RZ(n.tooltip===!0?{}:n.tooltip).call,S.tooltip(k)}let{hover:E}=n;if(E===void 0&&(E=b==="vega"),E){let{hoverSet:k,updateSet:M}=typeof E=="boolean"?{}:E;S.hover(k,M)}n&&(n.width!=null&&S.width(n.width),n.height!=null&&S.height(n.height),n.padding!=null&&S.padding(n.padding)),yield S.initialize(v,n.bind).runAsync();let A;if(d!==!1){let k=y;if(n.defaultStyle!==!1){let I=document.createElement("details");I.title=p.CLICK_TO_VIEW_ACTIONS,y.append(I),k=I;let L=document.createElement("summary");L.innerHTML=Jgr,I.append(L),A=P=>{I.contains(P.target)||I.removeAttribute("open")},document.addEventListener("click",A)}let M=document.createElement("div");if(k.append(M),M.classList.add("vega-actions"),d===!0||d.export!==!1){for(let I of["svg","png"])if(d===!0||d.export===!0||d.export[I]){let L=p[`${I.toUpperCase()}_ACTION`],P=document.createElement("a");P.text=L,P.href="#",P.target="_blank",P.download=`${g}.${I}`,P.addEventListener("mousedown",function(R){return LZ(this,void 0,void 0,function*(){R.preventDefault();let V=yield S.toImageURL(I,n.scaleFactor);this.href=V})}),M.append(P)}}if(d===!0||d.source!==!1){let I=document.createElement("a");I.text=p.SOURCE_ACTION,I.href="#",I.addEventListener("click",function(L){var P,R;sut((0,PZ.default)(r),(P=n.sourceHeader)!==null&&P!==void 0?P:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"",b),L.preventDefault()}),M.append(I)}if(b==="vega-lite"&&(d===!0||d.compiled!==!1)){let I=document.createElement("a");I.text=p.COMPILED_ACTION,I.href="#",I.addEventListener("click",function(L){var P,R;sut((0,PZ.default)(x),(P=n.sourceHeader)!==null&&P!==void 0?P:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"","vega"),L.preventDefault()}),M.append(I)}if(d===!0||d.editor!==!1){let I=(c=n.editorUrl)!==null&&c!==void 0?c:"https://vega.github.io/editor/",L=document.createElement("a");L.text=p.EDITOR_ACTION,L.href="#",L.addEventListener("click",function(P){Ygr(window,I,{config:f,mode:b,renderer:m,spec:(0,PZ.default)(r)}),P.preventDefault()}),M.append(L)}}function N(){A&&document.removeEventListener("click",A),S.finalize()}return{view:S,spec:r,vgSpec:x,finalize:N}})}var PZ,d_e,Xgr,f_e,Mv,BO,jZ,fut,Zgr,D$,BZ,Qgr,Jgr,e0r,s0r,wA=D(()=>{"use strict";fje();PZ=jf(pje()),d_e=jf(oLe());tve();tve();jlt();Plt();rut();iut();Xgr=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(t,r){return this.substr(!r||r<0?0:+r,t.length)===t});Mv=eve,BO=r_e,jZ=typeof window<"u"?window:void 0;BO===void 0&&(!((f_e=jZ?.vl)===null||f_e===void 0)&&f_e.compile)&&(BO=jZ.vl);fut={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Zgr={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},D$={vega:"Vega","vega-lite":"Vega-Lite"},BZ={vega:Mv.version,"vega-lite":BO?BO.version:"not available"},Qgr={vega:t=>t,"vega-lite":(t,r)=>BO.compile(t,{config:r}).spec},Jgr=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,e0r="chart-wrapper";s0r=n0r});var $Z=gt((Mbo,mut)=>{"use strict";var put=Object.getOwnPropertySymbols,a0r=Object.prototype.hasOwnProperty,l0r=Object.prototype.propertyIsEnumerable;function u0r(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function c0r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}mut.exports=c0r()?Object.assign:function(t,r){for(var n,o=u0r(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)a0r.call(n,a)&&(o[a]=n[a]);if(put){i=put(n);for(var l=0;l<i.length;l++)l0r.call(n,i[l])&&(o[i[l]]=n[i[l]])}}return o}});var xut=gt(m_e=>{"use strict";Object.defineProperty(m_e,"__esModule",{value:!0});m_e.StyleSheet=but;var f0r=$Z(),d0r=p0r(f0r);function p0r(t){return t&&t.__esModule?t:{default:t}}function m0r(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function p_e(t){return t[t.length-1]}function hut(t){if(t.sheet)return t.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===t)return document.styleSheets[r]}var _A=typeof window<"u",yut=!1,h0r=!1,g0r=function(){if(_A){var t=document.createElement("div");return t.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",t.getElementsByTagName("i").length===1}}();function gut(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function but(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.speedy,n=r===void 0?!yut&&!h0r:r,o=t.maxLength,i=o===void 0?_A&&g0r?4e3:65e3:o;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,d0r.default)(but.prototype,{getSheet:function(){return hut(p_e(this.tags))},inject:function(){var r=this;if(this.injected)throw new Error("already injected stylesheet!");_A?this.tags[0]=gut():this.sheet={cssRules:[],insertRule:function(o){r.sheet.cssRules.push({cssText:o})}},this.injected=!0},speedy:function(r){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+r+") earlier in your app, or call flush() before speedy("+r+")");this.isSpeedy=!!r},_insert:function(r){try{var n=this.getSheet();n.insertRule(r,r.indexOf("@import")!==-1?0:n.cssRules.length)}catch{yut&&console.warn("whoops, illegal rule inserted",r)}},insert:function(r){if(_A)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(r);else if(r.indexOf("@import")!==-1){var n=p_e(this.tags);n.insertBefore(document.createTextNode(r),n.firstChild)}else p_e(this.tags).appendChild(document.createTextNode(r));else this.sheet.insertRule(r,r.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,_A&&this.ctr%this.maxLength===0&&this.tags.push(gut()),this.ctr-1},delete:function(r){return this.replace(r,"")},flush:function(){_A?(this.tags.forEach(function(r){return r.parentNode.removeChild(r)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!_A)return this.sheet.cssRules;var r=[];return this.tags.forEach(function(n){return r.splice.apply(r,[r.length,0].concat(m0r(Array.from(hut(n).cssRules))))}),r}})});var wut=gt((jbo,vut)=>{"use strict";var y0r=/-(.)/g;function b0r(t){return t.replace(y0r,function(r,n){return n.toUpperCase()})}vut.exports=b0r});var Sut=gt((Pbo,_ut)=>{"use strict";var x0r=wut(),v0r=/^-ms-/;function w0r(t){return x0r(t.replace(v0r,"ms-"))}_ut.exports=w0r});var Cut=gt(h_e=>{"use strict";Object.defineProperty(h_e,"__esModule",{value:!0});var zZ={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function _0r(t,r){return t+r.charAt(0).toUpperCase()+r.substring(1)}var S0r=["Webkit","ms","Moz","O"];Object.keys(zZ).forEach(function(t){S0r.forEach(function(r){zZ[_0r(r,t)]=zZ[t]})});var C0r={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},E0r={isUnitlessNumber:zZ,shorthandPropertyExpansions:C0r};h_e.default=E0r});var Tut=gt((Bbo,Eut)=>{"use strict";function UZ(t){return function(){return t}}var SA=function(){};SA.thatReturns=UZ;SA.thatReturnsFalse=UZ(!1);SA.thatReturnsTrue=UZ(!0);SA.thatReturnsNull=UZ(null);SA.thatReturnsThis=function(){return this};SA.thatReturnsArgument=function(t){return t};Eut.exports=SA});var g_e=gt(($bo,Aut)=>{"use strict";var T0r=Tut(),A0r=T0r;Aut.exports=A0r});var Dut=gt(y_e=>{"use strict";Object.defineProperty(y_e,"__esModule",{value:!0});var k0r=Cut(),I0r=Iut(k0r),D0r=g_e(),zbo=Iut(D0r);function Iut(t){return t&&t.__esModule?t:{default:t}}var kut=I0r.default.isUnitlessNumber;function N0r(t,r,n){var o=r==null||typeof r=="boolean"||r==="";if(o)return"";var i=isNaN(r);if(i||r===0||kut.hasOwnProperty(t)&&kut[t])return""+r;if(typeof r=="string"){if(0&&n&&r!=="0"){var s,a,l;if(a)var u}r=r.trim()}return r+"px"}y_e.default=N0r});var Fut=gt((Vbo,Nut)=>{"use strict";var F0r=/([A-Z])/g;function O0r(t){return t.replace(F0r,"-$1").toLowerCase()}Nut.exports=O0r});var Mut=gt((Gbo,Out)=>{"use strict";var M0r=Fut(),R0r=/^ms-/;function j0r(t){return M0r(t).replace(R0r,"-ms-")}Out.exports=j0r});var jut=gt((Wbo,Rut)=>{"use strict";function P0r(t){var r={};return function(n){return r.hasOwnProperty(n)||(r[n]=t.call(this,n)),r[n]}}Rut.exports=P0r});var b_e=gt(F$=>{"use strict";Object.defineProperty(F$,"__esModule",{value:!0});F$.processStyleName=void 0;F$.createMarkupForStyles=H0r;var L0r=Sut(),qbo=N$(L0r),B0r=Dut(),$0r=N$(B0r),z0r=Mut(),U0r=N$(z0r),V0r=jut(),G0r=N$(V0r),W0r=g_e(),Hbo=N$(W0r);function N$(t){return t&&t.__esModule?t:{default:t}}var q0r=F$.processStyleName=(0,G0r.default)(U0r.default);function H0r(t,r){var n="";for(var o in t){var i=o.indexOf("--")===0;if(t.hasOwnProperty(o)&&o!=="label"){var s=t[o];s!=null&&(i?n+=o+":"+s+";":(n+=q0r(o)+":",n+=(0,$0r.default)(o,s,r)+";"))}}return n||null}});var Lut=gt(v_e=>{"use strict";Object.defineProperty(v_e,"__esModule",{value:!0});var Put=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};v_e.default=x_e;function Y0r(t){return t==null||t===!1||(typeof t>"u"?"undefined":Put(t))==="object"&&Object.keys(t).length===0}function X0r(t){if(Y0r(t))return null;if((typeof t>"u"?"undefined":Put(t))!=="object")return t;for(var r={},n=Object.keys(t),o=!1,i=0;i<n.length;i++){var s=t[n[i]],a=x_e(s);(a===null||a!==s)&&(o=!0),a!==null&&(r[n[i]]=a)}return Object.keys(r).length===0?null:o?r:t}function K0r(t){var r=!1,n=[];return t.forEach(function(o){var i=x_e(o);(i===null||i!==o)&&(r=!0),i!==null&&n.push(i)}),n.length==0?null:r?n:t}function x_e(t){return Array.isArray(t)?K0r(t):X0r(t)}});var zut=gt((VZ,$ut)=>{"use strict";Object.defineProperty(VZ,"__esModule",{value:!0});var Xt=["Webkit"],But=["Moz"],Ns=["ms"],Ph=["Webkit","Moz"],qy=["Webkit","ms"],O$=["Webkit","Moz","ms"];VZ.default={plugins:[],prefixMap:{appearance:Ph,userSelect:O$,textEmphasisPosition:Xt,textEmphasis:Xt,textEmphasisStyle:Xt,textEmphasisColor:Xt,boxDecorationBreak:Xt,clipPath:Xt,maskImage:Xt,maskMode:Xt,maskRepeat:Xt,maskPosition:Xt,maskClip:Xt,maskOrigin:Xt,maskSize:Xt,maskComposite:Xt,mask:Xt,maskBorderSource:Xt,maskBorderMode:Xt,maskBorderSlice:Xt,maskBorderWidth:Xt,maskBorderOutset:Xt,maskBorderRepeat:Xt,maskBorder:Xt,maskType:Xt,textDecorationStyle:Xt,textDecorationSkip:Xt,textDecorationLine:Xt,textDecorationColor:Xt,filter:Xt,fontFeatureSettings:Xt,breakAfter:O$,breakBefore:O$,breakInside:O$,columnCount:Ph,columnFill:Ph,columnGap:Ph,columnRule:Ph,columnRuleColor:Ph,columnRuleStyle:Ph,columnRuleWidth:Ph,columns:Ph,columnSpan:Ph,columnWidth:Ph,writingMode:qy,flex:Xt,flexBasis:Xt,flexDirection:Xt,flexGrow:Xt,flexFlow:Xt,flexShrink:Xt,flexWrap:Xt,alignContent:Xt,alignItems:Xt,alignSelf:Xt,justifyContent:Xt,order:Xt,transform:Xt,transformOrigin:Xt,transformOriginX:Xt,transformOriginY:Xt,backfaceVisibility:Xt,perspective:Xt,perspectiveOrigin:Xt,transformStyle:Xt,transformOriginZ:Xt,animation:Xt,animationDelay:Xt,animationDirection:Xt,animationFillMode:Xt,animationDuration:Xt,animationIterationCount:Xt,animationName:Xt,animationPlayState:Xt,animationTimingFunction:Xt,backdropFilter:Xt,fontKerning:Xt,scrollSnapType:qy,scrollSnapPointsX:qy,scrollSnapPointsY:qy,scrollSnapDestination:qy,scrollSnapCoordinate:qy,shapeImageThreshold:Xt,shapeImageMargin:Xt,shapeImageOutside:Xt,hyphens:O$,flowInto:qy,flowFrom:qy,regionFragment:qy,textAlignLast:But,tabSize:But,wrapFlow:Ns,wrapThrough:Ns,wrapMargin:Ns,gridTemplateColumns:Ns,gridTemplateRows:Ns,gridTemplateAreas:Ns,gridTemplate:Ns,gridAutoColumns:Ns,gridAutoRows:Ns,gridAutoFlow:Ns,grid:Ns,gridRowStart:Ns,gridColumnStart:Ns,gridRowEnd:Ns,gridRow:Ns,gridColumn:Ns,gridColumnEnd:Ns,gridColumnGap:Ns,gridRowGap:Ns,gridArea:Ns,gridGap:Ns,textSizeAdjust:qy,borderImage:Xt,borderImageOutset:Xt,borderImageRepeat:Xt,borderImageSlice:Xt,borderImageSource:Xt,borderImageWidth:Xt,transitionDelay:Xt,transitionDuration:Xt,transitionProperty:Xt,transitionTimingFunction:Xt}};$ut.exports=VZ.default});var w_e=gt((GZ,Uut)=>{"use strict";Object.defineProperty(GZ,"__esModule",{value:!0});GZ.default=Z0r;function Z0r(t){return t.charAt(0).toUpperCase()+t.slice(1)}Uut.exports=GZ.default});var Gut=gt((WZ,Vut)=>{"use strict";Object.defineProperty(WZ,"__esModule",{value:!0});WZ.default=tyr;var Q0r=w_e(),J0r=eyr(Q0r);function eyr(t){return t&&t.__esModule?t:{default:t}}function tyr(t,r,n){if(t.hasOwnProperty(r))for(var o=t[r],i=0,s=o.length;i<s;++i)n[o[i]+(0,J0r.default)(r)]=n[r]}Vut.exports=WZ.default});var qut=gt((qZ,Wut)=>{"use strict";Object.defineProperty(qZ,"__esModule",{value:!0});qZ.default=ryr;function ryr(t,r,n,o,i){for(var s=0,a=t.length;s<a;++s){var l=t[s](r,n,o,i);if(l)return l}}Wut.exports=qZ.default});var Yut=gt((HZ,Hut)=>{"use strict";Object.defineProperty(HZ,"__esModule",{value:!0});HZ.default=iyr;var nyr=["-webkit-","-moz-",""],oyr={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function iyr(t,r){if(t==="cursor"&&oyr.hasOwnProperty(r))return nyr.map(function(n){return n+r})}Hut.exports=HZ.default});var $O=gt((YZ,Xut)=>{"use strict";Object.defineProperty(YZ,"__esModule",{value:!0});YZ.default=ayr;var syr=/-webkit-|-moz-|-ms-/;function ayr(t){return typeof t=="string"&&syr.test(t)}Xut.exports=YZ.default});var Zut=gt((XZ,Kut)=>{"use strict";Object.defineProperty(XZ,"__esModule",{value:!0});XZ.default=dyr;var lyr=$O(),uyr=cyr(lyr);function cyr(t){return t&&t.__esModule?t:{default:t}}var fyr=["-webkit-",""];function dyr(t,r){if(typeof r=="string"&&!(0,uyr.default)(r)&&r.indexOf("cross-fade(")>-1)return fyr.map(function(n){return r.replace(/cross-fade\(/g,n+"cross-fade(")})}Kut.exports=XZ.default});var Jut=gt((KZ,Qut)=>{"use strict";Object.defineProperty(KZ,"__esModule",{value:!0});KZ.default=yyr;var pyr=$O(),myr=hyr(pyr);function hyr(t){return t&&t.__esModule?t:{default:t}}var gyr=["-webkit-",""];function yyr(t,r){if(typeof r=="string"&&!(0,myr.default)(r)&&r.indexOf("filter(")>-1)return gyr.map(function(n){return r.replace(/filter\(/g,n+"filter(")})}Qut.exports=KZ.default});var rct=gt((ZZ,tct)=>{"use strict";Object.defineProperty(ZZ,"__esModule",{value:!0});ZZ.default=byr;var ect={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function byr(t,r){if(t==="display"&&ect.hasOwnProperty(r))return ect[r]}tct.exports=ZZ.default});var ict=gt((QZ,oct)=>{"use strict";Object.defineProperty(QZ,"__esModule",{value:!0});QZ.default=vyr;var xyr={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},nct={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function vyr(t,r,n){t==="flexDirection"&&typeof r=="string"&&(r.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",r.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),nct.hasOwnProperty(t)&&(n[nct[t]]=xyr[r]||r)}oct.exports=QZ.default});var act=gt((JZ,sct)=>{"use strict";Object.defineProperty(JZ,"__esModule",{value:!0});JZ.default=Tyr;var wyr=$O(),_yr=Syr(wyr);function Syr(t){return t&&t.__esModule?t:{default:t}}var Cyr=["-webkit-","-moz-",""],Eyr=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function Tyr(t,r){if(typeof r=="string"&&!(0,_yr.default)(r)&&Eyr.test(r))return Cyr.map(function(n){return n+r})}sct.exports=JZ.default});var uct=gt((eQ,lct)=>{"use strict";Object.defineProperty(eQ,"__esModule",{value:!0});eQ.default=Nyr;var Ayr=$O(),kyr=Iyr(Ayr);function Iyr(t){return t&&t.__esModule?t:{default:t}}var Dyr=["-webkit-",""];function Nyr(t,r){if(typeof r=="string"&&!(0,kyr.default)(r)&&r.indexOf("image-set(")>-1)return Dyr.map(function(n){return r.replace(/image-set\(/g,n+"image-set(")})}lct.exports=eQ.default});var fct=gt((tQ,cct)=>{"use strict";Object.defineProperty(tQ,"__esModule",{value:!0});tQ.default=Fyr;function Fyr(t,r){if(t==="position"&&r==="sticky")return["-webkit-sticky","sticky"]}cct.exports=tQ.default});var pct=gt((rQ,dct)=>{"use strict";Object.defineProperty(rQ,"__esModule",{value:!0});rQ.default=jyr;var Oyr=["-webkit-","-moz-",""],Myr={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},Ryr={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function jyr(t,r){if(Myr.hasOwnProperty(t)&&Ryr.hasOwnProperty(r))return Oyr.map(function(n){return n+r})}dct.exports=rQ.default});var mct={};cn(mct,{default:()=>zyr});function Byr(t){return"-"+t.toLowerCase()}function $yr(t){if(__e.hasOwnProperty(t))return __e[t];var r=t.replace(Pyr,Byr);return __e[t]=Lyr.test(r)?"-"+r:r}var Pyr,Lyr,__e,zyr,hct=D(()=>{"use strict";Pyr=/[A-Z]/g,Lyr=/^ms-/,__e={};zyr=$yr});var yct=gt((nQ,gct)=>{"use strict";Object.defineProperty(nQ,"__esModule",{value:!0});nQ.default=Wyr;var Uyr=(hct(),vl(mct)),Vyr=Gyr(Uyr);function Gyr(t){return t&&t.__esModule?t:{default:t}}function Wyr(t){return(0,Vyr.default)(t)}gct.exports=nQ.default});var vct=gt((oQ,xct)=>{"use strict";Object.defineProperty(oQ,"__esModule",{value:!0});oQ.default=ebr;var qyr=yct(),Hyr=S_e(qyr),Yyr=$O(),Xyr=S_e(Yyr),Kyr=w_e(),bct=S_e(Kyr);function S_e(t){return t&&t.__esModule?t:{default:t}}var Zyr={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},Qyr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function Jyr(t,r){if((0,Xyr.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=n.length;o<i;++o){var s=n[o],a=[s];for(var l in r){var u=(0,Hyr.default)(l);if(s.indexOf(u)>-1&&u!=="order")for(var c=r[l],f=0,d=c.length;f<d;++f)a.unshift(s.replace(u,Qyr[c[f]]+u))}n[o]=a.join(",")}return n.join(",")}function ebr(t,r,n,o){if(typeof r=="string"&&Zyr.hasOwnProperty(t)){var i=Jyr(r,o),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-moz-|-ms-/.test(l)}).join(",");if(t.indexOf("Webkit")>-1)return s;var a=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-webkit-|-ms-/.test(l)}).join(",");return t.indexOf("Moz")>-1?a:(n["Webkit"+(0,bct.default)(t)]=s,n["Moz"+(0,bct.default)(t)]=a,i)}}xct.exports=oQ.default});var _ct=gt(C_e=>{"use strict";Object.defineProperty(C_e,"__esModule",{value:!0});C_e.default=kbr;var tbr=zut(),rbr=Dd(tbr),nbr=Gut(),obr=Dd(nbr),ibr=qut(),sbr=Dd(ibr),abr=Yut(),lbr=Dd(abr),ubr=Zut(),cbr=Dd(ubr),fbr=Jut(),dbr=Dd(fbr),pbr=rct(),mbr=Dd(pbr),hbr=ict(),gbr=Dd(hbr),ybr=act(),bbr=Dd(ybr),xbr=uct(),vbr=Dd(xbr),wbr=fct(),_br=Dd(wbr),Sbr=pct(),Cbr=Dd(Sbr),Ebr=vct(),Tbr=Dd(Ebr);function Dd(t){return t&&t.__esModule?t:{default:t}}var Abr=[cbr.default,lbr.default,dbr.default,gbr.default,bbr.default,vbr.default,_br.default,Cbr.default,Tbr.default,mbr.default],wct=rbr.default.prefixMap;function kbr(t){for(var r in t){var n=t[r],o=(0,sbr.default)(Abr,r,n,t,wct);o&&(t[r]=o),(0,obr.default)(wct,r,t)}return t}});var Ect=gt(zO=>{"use strict";Object.defineProperty(zO,"__esModule",{value:!0});var E_e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};zO.PluginSet=Cct;zO.fallbacks=Mbr;zO.contentWrap=jbr;zO.prefixes=Pbr;var Ibr=$Z(),T_e=Sct(Ibr),Dbr=b_e(),Nbr=_ct(),Fbr=Sct(Nbr);function Sct(t){return t&&t.__esModule?t:{default:t}}var Obr=function(t){return t==="development"||!t}("production");function Cct(t){this.fns=t||[]}(0,T_e.default)(Cct.prototype,{add:function(){for(var r=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach(function(s){r.fns.indexOf(s)>=0?Obr&&console.warn("adding the same plugin again, ignoring"):r.fns=[s].concat(r.fns)})},remove:function(r){this.fns=this.fns.filter(function(n){return n!==r})},clear:function(){this.fns=[]},transform:function(r){return this.fns.reduce(function(n,o){return o(n)},r)}});function Mbr(t){var r=Object.keys(t.style).map(function(i){return Array.isArray(t.style[i])}).indexOf(!0)>=0;if(r){var n=t.style,o=Object.keys(n).reduce(function(i,s){return i[s]=Array.isArray(n[s])?n[s].join("; "+(0,Dbr.processStyleName)(s)+": "):n[s],i},{});return(0,T_e.default)({},t,{style:o})}return t}var Rbr=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function jbr(t){if(t.style.content){var r=t.style.content;return Rbr.indexOf(r)>=0||/^(attr|calc|counters?|url)\(/.test(r)||r.charAt(0)===r.charAt(r.length-1)&&(r.charAt(0)==='"'||r.charAt(0)==="'")?t:E_e({},t,{style:E_e({},t.style,{content:'"'+r+'"'})})}return t}function Pbr(t){return(0,T_e.default)({},t,{style:(0,Fbr.default)(E_e({},t.style))})}});var Act=gt(A_e=>{"use strict";Object.defineProperty(A_e,"__esModule",{value:!0});A_e.default=Lbr;function Lbr(t,r){for(var n=1540483477,o=24,i=r^t.length,s=t.length,a=0;s>=4;){var l=Bbr(t,a);l=CA(l,n),l^=l>>>o,l=CA(l,n),i=CA(i,n),i^=l,a+=4,s-=4}switch(s){case 3:i^=Tct(t,a),i^=t.charCodeAt(a+2)<<16,i=CA(i,n);break;case 2:i^=Tct(t,a),i=CA(i,n);break;case 1:i^=t.charCodeAt(a),i=CA(i,n);break}return i^=i>>>13,i=CA(i,n),i^=i>>>15,i>>>0}function Bbr(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)+(t.charCodeAt(r++)<<16)+(t.charCodeAt(r)<<24)}function Tct(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)}function CA(t,r){t=t|0,r=r|0;var n=t&65535,o=t>>>16,i=n*r+((o*r&65535)<<16)|0;return i}});var UO=gt(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.compose=Pt.merge=Pt.$=Pt.style=Pt.presets=Pt.keyframes=Pt.fontFace=Pt.insertGlobal=Pt.insertRule=Pt.plugins=Pt.styleSheet=void 0;Pt.speedy=Hbr;Pt.simulations=Xbr;Pt.simulate=Kbr;Pt.cssLabels=Zbr;Pt.isLikeRule=O_e;Pt.idFor=M_e;Pt.css=ml;Pt.rehydrate=fxr;Pt.flush=dxr;Pt.select=R_e;Pt.parent=mxr;Pt.media=hxr;Pt.pseudo=en;Pt.active=gxr;Pt.any=yxr;Pt.checked=bxr;Pt.disabled=xxr;Pt.empty=vxr;Pt.enabled=wxr;Pt._default=_xr;Pt.first=Sxr;Pt.firstChild=Cxr;Pt.firstOfType=Exr;Pt.fullscreen=Txr;Pt.focus=Axr;Pt.hover=kxr;Pt.indeterminate=Ixr;Pt.inRange=Dxr;Pt.invalid=Nxr;Pt.lastChild=Fxr;Pt.lastOfType=Oxr;Pt.left=Mxr;Pt.link=Rxr;Pt.onlyChild=jxr;Pt.onlyOfType=Pxr;Pt.optional=Lxr;Pt.outOfRange=Bxr;Pt.readOnly=$xr;Pt.readWrite=zxr;Pt.required=Uxr;Pt.right=Vxr;Pt.root=Gxr;Pt.scope=Wxr;Pt.target=qxr;Pt.valid=Hxr;Pt.visited=Yxr;Pt.dir=Xxr;Pt.lang=Kxr;Pt.not=Zxr;Pt.nthChild=Qxr;Pt.nthLastChild=Jxr;Pt.nthLastOfType=evr;Pt.nthOfType=tvr;Pt.after=rvr;Pt.before=nvr;Pt.firstLetter=ovr;Pt.firstLine=ivr;Pt.selection=svr;Pt.backdrop=avr;Pt.placeholder=lvr;Pt.cssFor=uvr;Pt.attribsFor=cvr;var $br=$Z(),zbr=N_e($br),Ubr=xut(),D_e=b_e(),Vbr=Lut(),x2=N_e(Vbr),Rv=Ect(),Gbr=Act(),Wbr=N_e(Gbr);function N_e(t){return t&&t.__esModule?t:{default:t}}function qbr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function R$(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Nd=Pt.styleSheet=new Ubr.StyleSheet;Nd.inject();function Hbr(t){return Nd.speedy(t)}var j$=Pt.plugins=Nd.plugins=new Rv.PluginSet([Rv.prefixes,Rv.contentWrap,Rv.fallbacks]);j$.media=new Rv.PluginSet;j$.fontFace=new Rv.PluginSet;j$.keyframes=new Rv.PluginSet([Rv.prefixes,Rv.fallbacks]);var P$=!1,Ybr=!1,fQ=typeof window<"u",F_e=P$,kct=!1,Ict=!1;function Xbr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;F_e=!!t}function Kbr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,x2.default)(r),r?F_e?r.reduce(function(o,i){return o["data-simulate-"+aQ(i)]="",o},{}):(kct||(console.warn("can't simulate without once calling simulations(true)"),kct=!0),!P$&&!Ybr&&!Ict&&(console.warn("don't use simulation outside dev"),Ict=!0),{}):{}}var L$=P$;function Zbr(t){L$=!!t}function aQ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,r)}function B$(t){var r=JSON.stringify(t),n=(0,Wbr.default)(r).toString(36);return t.label&&t.label.length>0&&P$?aQ(t.label.join("."),"-")+"-"+n:n}function O_e(t){var r=Object.keys(t).filter(function(n){return n!=="toString"});return r.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(r[0])}function M_e(t){var r=Object.keys(t).filter(function(i){return i!=="toString"});if(r.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,o=n.exec(r[0]);if(!o)throw new Error("not a rule");return o[1]}var Qbr=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function k_e(t){if(t.indexOf(",")===-1)return[t];for(var r=[],n=[],o=0,i;i=Qbr.exec(t);)switch(i[0]){case"(":o++;break;case")":o--;break;case",":if(o)break;r.push(i.index)}for(i=r.length;i--;)n.unshift(t.slice(r[i]+1)),t=t.slice(0,r[i]);return n.unshift(t),n}function Dct(t,r){if(!t)return r.replace(/\&/g,"");if(!r)return".css-"+t+",[data-css-"+t+"]";var n=k_e(r).map(function(o){return o.indexOf("&")>=0?[o.replace(/\&/mg,".css-"+t),o.replace(/\&/mg,"[data-css-"+t+"]")].join(","):".css-"+t+o+",[data-css-"+t+"]"+o}).join(",");return F_e&&/^\&\:/.exec(r)&&!/\s/.exec(r)&&(n+=",.css-"+t+"[data-simulate-"+aQ(r)+"],[data-css-"+t+"][data-simulate-"+aQ(r)+"]"),n}function I_e(t){var r=t.selector,n=t.style,o=j$.transform({selector:r,style:n});return o.selector+"{"+(0,D_e.createMarkupForStyles)(o.style)+"}"}function lQ(t){var r=void 0,n=void 0,o=void 0,i=void 0;return Object.keys(t).forEach(function(s){s.indexOf("&")>=0?(n=n||{},n[s]=t[s]):s.indexOf("@media")===0?(o=o||{},o[s]=lQ(t[s])):s.indexOf("@supports")===0?(i=i||{},i[s]=lQ(t[s])):s==="label"?t.label.length>0&&(r=r||{},r.label=L$?t.label.join("."):""):(r=r||{},r[s]=t[s])}),{plain:r,selects:n,medias:o,supports:i}}function uQ(t,r){var n=[],o=r.plain,i=r.selects,s=r.medias,a=r.supports;return o&&n.push(I_e({style:o,selector:Dct(t)})),i&&Object.keys(i).forEach(function(l){return n.push(I_e({style:i[l],selector:Dct(t,l)}))}),s&&Object.keys(s).forEach(function(l){return n.push(l+"{"+uQ(t,s[l]).join("")+"}")}),a&&Object.keys(a).forEach(function(l){return n.push(l+"{"+uQ(t,a[l]).join("")+"}")}),n}var Lh=Nd.inserted={};function Jbr(t){if(!Lh[t.id]){Lh[t.id]=!0;var r=lQ(t.style),n=uQ(t.id,r);Lh[t.id]=fQ?!0:n,n.forEach(function(o){return Nd.insert(o)})}}var M$=Nd.registered={};function dQ(t){M$[t.id]||(M$[t.id]=t)}function exr(t){if(O_e(t)){var r=M$[M_e(t)];if(r==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return r}return t}var sQ={};function txr(t){if(dQ(t),Jbr(t),sQ[t.id])return sQ[t.id];var r=R$({},"data-css-"+t.id,L$&&t.label||"");return Object.defineProperty(r,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),sQ[t.id]=r,r}function rxr(t){for(var r=[":",".","[",">"," "],n=!1,o=t.charAt(0),i=0;i<r.length;i++)if(o===r[i]){n=!0;break}return n||t.indexOf("&")>=0}function Nct(t,r){var n=k_e(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),o=k_e(r).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return o.reduce(function(i,s){return i.concat(n.map(function(a){return s.replace(/\&/g,a)}))},[]).join(",")}function nxr(t,r){return t?"@media "+t.substring(6)+" and "+r.substring(6):r}function oxr(t){return t.indexOf("@media")===0}function ixr(t){return t.indexOf("@supports")===0}function sxr(t,r){return t?"@supports "+t.substring(9)+" and "+r.substring(9):r}function Rct(t){for(var r=[],n=0;n<t.length;n++)Array.isArray(t[n])?r=r.concat(Rct(t[n])):r=r.concat(t[n]);return r}var Fct={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function EA(t,r){var n=r.selector,o=n===void 0?"":n,i=r.mq,s=i===void 0?"":i,a=r.supp,l=a===void 0?"":a,u=r.src,c=u===void 0?{}:u;Array.isArray(c)||(c=[c]),c=Rct(c),c.forEach(function(f){if(O_e(f)){var d=exr(f);if(d.type!=="css")throw new Error("cannot merge this rule");f=d.style}f=(0,x2.default)(f),f&&f.composes&&EA(t,{selector:o,mq:s,supp:l,src:f.composes}),Object.keys(f||{}).forEach(function(p){if(rxr(p))Fct[p]&&Fct[p].forEach(function(h){return EA(t,{selector:Nct(o,h),mq:s,supp:l,src:f[p]})}),EA(t,{selector:Nct(o,p),mq:s,supp:l,src:f[p]});else if(oxr(p))EA(t,{selector:o,mq:nxr(s,p),supp:l,src:f[p]});else if(ixr(p))EA(t,{selector:o,mq:s,supp:sxr(l,p),src:f[p]});else if(p!=="composes"){var m=t;l&&(m[l]=m[l]||{},m=m[l]),s&&(m[s]=m[s]||{},m=m[s]),o&&(m[o]=m[o]||{},m=m[o]),p==="label"?L$&&(t.label=t.label.concat(f.label)):m[p]=f[p]}})})}function Oct(t){var r={label:[]};EA(r,{src:t});var n={id:B$(r),style:r,label:L$?r.label.join("."):"",type:"css"};return txr(n)}var cQ={};Object.defineProperty(cQ,"toString",{enumerable:!1,value:function(){return"css-nil"}});var iQ=typeof WeakMap<"u"?[cQ,new WeakMap,new WeakMap,new WeakMap]:[cQ],Mct=!1;function axr(t){return function(r){if(iQ[r.length]){for(var n=iQ[r.length],o=0;o<r.length-1;)n.has(r[o])||n.set(r[o],new WeakMap),n=n.get(r[o]),o++;if(n.has(r[r.length-1])){var i=n.get(r[o]);if(M$[i.toString().substring(4)])return i}}var s=t(r);if(iQ[r.length]){for(var a=0,l=iQ[r.length];a<r.length-1;)l=l.get(r[a]),a++;try{l.set(r[a],s)}catch{if(P$&&!Mct){var u;Mct=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(qbr(r))),console.warn("this should NOT happen, please file a bug on the github repo.")}}}return s}}var lxr=typeof WeakMap<"u"?axr(Oct):Oct;function ml(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r[0]&&r[0].length&&r[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return r=(0,x2.default)(r),r?lxr(r):cQ}ml.insert=function(t){var r={id:B$(t),css:t,type:"raw"};dQ(r),Lh[r.id]||(Nd.insert(r.css),Lh[r.id]=fQ?!0:[r.css])};var Jbo=Pt.insertRule=ml.insert;ml.global=function(t,r){if(r=(0,x2.default)(r),r)return ml.insert(I_e({selector:t,style:r}))};var exo=Pt.insertGlobal=ml.global;function uxr(t){if(!Lh[t.id]){var r=Object.keys(t.keyframes).map(function(o){var i=j$.keyframes.transform({id:t.id,name:o,style:t.keyframes[o]});return i.name+"{"+(0,D_e.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(o){return"@"+o+"keyframes "+(t.name+"_"+t.id)+"{"+r+"}"});n.forEach(function(o){return Nd.insert(o)}),Lh[t.id]=fQ?!0:n}}ml.keyframes=function(t,r){r||(r=t,t="animation"),r=(0,x2.default)(r)||{};var n={id:B$({name:t,kfs:r}),type:"keyframes",name:t,keyframes:r};return dQ(n),uxr(n),t+"_"+n.id};ml.fontFace=function(t){t=(0,x2.default)(t);var r={id:B$(t),type:"font-face",font:t};return dQ(r),cxr(r),t.fontFamily};var txo=Pt.fontFace=ml.fontFace,rxo=Pt.keyframes=ml.keyframes;function cxr(t){if(!Lh[t.id]){var r="@font-face{"+(0,D_e.createMarkupForStyles)(t.font)+"}";Nd.insert(r),Lh[t.id]=fQ?!0:[r]}}function fxr(t){(0,zbr.default)(Lh,t.reduce(function(r,n){return r[n]=!0,r},{}))}function dxr(){Lh=Nd.inserted={},M$=Nd.registered={},sQ={},Nd.flush(),Nd.inject()}var nxo=Pt.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"},pxr=Pt.style=ml;function R_e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t?ml(R$({},t,n)):pxr(n)}var oxo=Pt.$=R_e;function mxr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return ml(R$({},t+" &",n))}var ixo=Pt.merge=ml,sxo=Pt.compose=ml;function hxr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return ml(R$({},"@media "+t,n))}function en(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return ml(R$({},t,n))}function gxr(t){return en(":active",t)}function yxr(t){return en(":any",t)}function bxr(t){return en(":checked",t)}function xxr(t){return en(":disabled",t)}function vxr(t){return en(":empty",t)}function wxr(t){return en(":enabled",t)}function _xr(t){return en(":default",t)}function Sxr(t){return en(":first",t)}function Cxr(t){return en(":first-child",t)}function Exr(t){return en(":first-of-type",t)}function Txr(t){return en(":fullscreen",t)}function Axr(t){return en(":focus",t)}function kxr(t){return en(":hover",t)}function Ixr(t){return en(":indeterminate",t)}function Dxr(t){return en(":in-range",t)}function Nxr(t){return en(":invalid",t)}function Fxr(t){return en(":last-child",t)}function Oxr(t){return en(":last-of-type",t)}function Mxr(t){return en(":left",t)}function Rxr(t){return en(":link",t)}function jxr(t){return en(":only-child",t)}function Pxr(t){return en(":only-of-type",t)}function Lxr(t){return en(":optional",t)}function Bxr(t){return en(":out-of-range",t)}function $xr(t){return en(":read-only",t)}function zxr(t){return en(":read-write",t)}function Uxr(t){return en(":required",t)}function Vxr(t){return en(":right",t)}function Gxr(t){return en(":root",t)}function Wxr(t){return en(":scope",t)}function qxr(t){return en(":target",t)}function Hxr(t){return en(":valid",t)}function Yxr(t){return en(":visited",t)}function Xxr(t,r){return en(":dir("+t+")",r)}function Kxr(t,r){return en(":lang("+t+")",r)}function Zxr(t,r){var n=t.split(",").map(function(o){return o.trim()}).map(function(o){return":not("+o+")"});return n.length===1?en(":not("+t+")",r):R_e(n.join(""),r)}function Qxr(t,r){return en(":nth-child("+t+")",r)}function Jxr(t,r){return en(":nth-last-child("+t+")",r)}function evr(t,r){return en(":nth-last-of-type("+t+")",r)}function tvr(t,r){return en(":nth-of-type("+t+")",r)}function rvr(t){return en("::after",t)}function nvr(t){return en("::before",t)}function ovr(t){return en("::first-letter",t)}function ivr(t){return en("::first-line",t)}function svr(t){return en("::selection",t)}function avr(t){return en("::backdrop",t)}function lvr(t){return ml({"::placeholder":t})}function uvr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,x2.default)(r),r?r.map(function(o){var i={label:[]};return EA(i,{src:o}),uQ(B$(i),lQ(i)).join("")}).join(""):""}function cvr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r=(0,x2.default)(r);var o=r?r.map(function(i){M_e(i);var s=Object.keys(i)[0],a=i[s];return s+'="'+(a||"")+'"'}).join(" "):"";return o}});var j_e=gt(pQ=>{"use strict";Object.defineProperty(pQ,"__esModule",{value:!0});function fvr(t){return t.name!=null}pQ.isSurfaceInfo=fvr;function dvr(t){return t.drawArea instanceof HTMLElement}pQ.isSurface=dvr});var xQ={};cn(xQ,{Component:()=>$$,cloneElement:()=>Bct,createElement:()=>mQ,default:()=>Evr,h:()=>mQ,options:()=>kf,render:()=>Xct,rerender:()=>$_e});function pvr(){}function mQ(t,r){var n=jct,o,i,s,a;for(a=arguments.length;a-- >2;)VO.push(arguments[a]);for(r&&r.children!=null&&(VO.length||VO.push(r.children),delete r.children);VO.length;)if((i=VO.pop())&&i.pop!==void 0)for(a=i.length;a--;)VO.push(i[a]);else typeof i=="boolean"&&(i=null),(s=typeof t!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&o?n[n.length-1]+=i:n===jct?n=[i]:n.push(i),o=s;var l=new pvr;return l.nodeName=t,l.children=n,l.attributes=r??void 0,l.key=r?.key,kf.vnode!==void 0&&kf.vnode(l),l}function w2(t,r){for(var n in r)t[n]=r[n];return t}function Bct(t,r){return mQ(t.nodeName,w2(w2({},t.attributes),r),arguments.length>2?[].slice.call(arguments,2):t.children)}function $ct(t){!t._dirty&&(t._dirty=!0)&&P_e.push(t)==1&&(kf.debounceRendering||mvr)($_e)}function $_e(){var t,r=P_e;for(P_e=[];t=r.pop();)t._dirty&&yQ(t)}function gvr(t,r,n){return typeof r=="string"||typeof r=="number"?t.splitText!==void 0:typeof r.nodeName=="string"?!t._componentConstructor&&zct(t,r.nodeName):n||t._componentConstructor===r.nodeName}function zct(t,r){return t.normalizedNodeName===r||t.nodeName.toLowerCase()===r.toLowerCase()}function Uct(t){var r=w2({},t.attributes);r.children=t.children;var n=t.nodeName.defaultProps;if(n!==void 0)for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}function yvr(t,r){var n=r?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function z_e(t){var r=t.parentNode;r&&r.removeChild(t)}function Pct(t,r,n,o,i){if(r==="className"&&(r="class"),r!=="key")if(r==="ref")n&&n(null),o&&o(t);else if(r==="class"&&!i)t.className=o||"";else if(r==="style"){if((!o||typeof o=="string"||typeof n=="string")&&(t.style.cssText=o||""),o&&typeof o=="object"){if(typeof n!="string")for(var s in n)s in o||(t.style[s]="");for(var s in o)t.style[s]=typeof o[s]=="number"&&hvr.test(s)===!1?o[s]+"px":o[s]}}else if(r==="dangerouslySetInnerHTML")o&&(t.innerHTML=o.__html||"");else if(r[0]=="o"&&r[1]=="n"){var a=r!==(r=r.replace(/Capture$/,""));r=r.toLowerCase().substring(2),o?n||t.addEventListener(r,Lct,a):t.removeEventListener(r,Lct,a),(t._listeners||(t._listeners={}))[r]=o}else if(r!=="list"&&r!=="type"&&!i&&r in t)bvr(t,r,o??""),(o==null||o===!1)&&t.removeAttribute(r);else{var l=i&&r!==(r=r.replace(/^xlink:?/,""));o==null||o===!1?l?t.removeAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase()):t.removeAttribute(r):typeof o!="function"&&(l?t.setAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase(),o):t.setAttribute(r,o))}}function bvr(t,r,n){try{t[r]=n}catch{}}function Lct(t){return this._listeners[t.type](kf.event&&kf.event(t)||t)}function Gct(){for(var t;t=Vct.pop();)kf.afterMount&&kf.afterMount(t),t.componentDidMount&&t.componentDidMount()}function Wct(t,r,n,o,i,s){L_e++||(v2=i!=null&&i.ownerSVGElement!==void 0,hQ=t!=null&&!("__preactattr_"in t));var a=qct(t,r,n,o,s);return i&&a.parentNode!==i&&i.appendChild(a),--L_e||(hQ=!1,s||Gct()),a}function qct(t,r,n,o,i){var s=t,a=v2;if((r==null||typeof r=="boolean")&&(r=""),typeof r=="string"||typeof r=="number")return t&&t.splitText!==void 0&&t.parentNode&&(!t._component||i)?t.nodeValue!=r&&(t.nodeValue=r):(s=document.createTextNode(r),t&&(t.parentNode&&t.parentNode.replaceChild(s,t),TA(t,!0))),s.__preactattr_=!0,s;var l=r.nodeName;if(typeof l=="function")return Svr(t,r,n,o);if(v2=l==="svg"?!0:l==="foreignObject"?!1:v2,l=String(l),(!t||!zct(t,l))&&(s=yvr(l,v2),t)){for(;t.firstChild;)s.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(s,t),TA(t,!0)}var u=s.firstChild,c=s.__preactattr_,f=r.children;if(c==null){c=s.__preactattr_={};for(var d=s.attributes,p=d.length;p--;)c[d[p].name]=d[p].value}return!hQ&&f&&f.length===1&&typeof f[0]=="string"&&u!=null&&u.splitText!==void 0&&u.nextSibling==null?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||u!=null)&&xvr(s,f,n,o,hQ||c.dangerouslySetInnerHTML!=null),vvr(s,r.attributes,c),v2=a,s}function xvr(t,r,n,o,i){var s=t.childNodes,a=[],l={},u=0,c=0,f=s.length,d=0,p=r?r.length:0,m,h,g,y,b;if(f!==0)for(var x=0;x<f;x++){var v=s[x],w=v.__preactattr_,_=p&&w?v._component?v._component.__key:w.key:null;_!=null?(u++,l[_]=v):(w||(v.splitText!==void 0?!i||v.nodeValue.trim():i))&&(a[d++]=v)}if(p!==0)for(var x=0;x<p;x++){y=r[x],b=null;var _=y.key;if(_!=null)u&&l[_]!==void 0&&(b=l[_],l[_]=void 0,u--);else if(!b&&c<d){for(m=c;m<d;m++)if(a[m]!==void 0&&gvr(h=a[m],y,i)){b=h,a[m]=void 0,m===d-1&&d--,m===c&&c++;break}}b=qct(b,y,n,o),g=s[x],b&&b!==t&&b!==g&&(g==null?t.appendChild(b):b===g.nextSibling?z_e(g):t.insertBefore(b,g))}if(u)for(var x in l)l[x]!==void 0&&TA(l[x],!1);for(;c<=d;)(b=a[d--])!==void 0&&TA(b,!1)}function TA(t,r){var n=t._component;n?bQ(n):(t.__preactattr_!=null&&t.__preactattr_.ref&&t.__preactattr_.ref(null),(r===!1||t.__preactattr_==null)&&z_e(t),Hct(t))}function Hct(t){for(t=t.lastChild;t;){var r=t.previousSibling;TA(t,!0),t=r}}function vvr(t,r,n){var o;for(o in n)!(r&&r[o]!=null)&&n[o]!=null&&Pct(t,o,n[o],n[o]=void 0,v2);for(o in r)o!=="children"&&o!=="innerHTML"&&(!(o in n)||r[o]!==(o==="value"||o==="checked"?t[o]:n[o]))&&Pct(t,o,n[o],n[o]=r[o],v2)}function wvr(t){var r=t.constructor.name;(B_e[r]||(B_e[r]=[])).push(t)}function Yct(t,r,n){var o=B_e[t.name],i;if(t.prototype&&t.prototype.render?(i=new t(r,n),$$.call(i,r,n)):(i=new $$(r,n),i.constructor=t,i.render=_vr),o){for(var s=o.length;s--;)if(o[s].constructor===t){i.nextBase=o[s].nextBase,o.splice(s,1);break}}return i}function _vr(t,r,n){return this.constructor(t,n)}function gQ(t,r,n,o,i){t._disable||(t._disable=!0,(t.__ref=r.ref)&&delete r.ref,(t.__key=r.key)&&delete r.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(r,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=r,t._disable=!1,n!==0&&(n===1||kf.syncComponentUpdates!==!1||!t.base?yQ(t,1,i):$ct(t)),t.__ref&&t.__ref(t))}function yQ(t,r,n,o){if(!t._disable){var i=t.props,s=t.state,a=t.context,l=t.prevProps||i,u=t.prevState||s,c=t.prevContext||a,f=t.base,d=t.nextBase,p=f||d,m=t._component,h=!1,g,y,b;if(f&&(t.props=l,t.state=u,t.context=c,r!==2&&t.shouldComponentUpdate&&t.shouldComponentUpdate(i,s,a)===!1?h=!0:t.componentWillUpdate&&t.componentWillUpdate(i,s,a),t.props=i,t.state=s,t.context=a),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!h){g=t.render(i,s,a),t.getChildContext&&(a=w2(w2({},a),t.getChildContext()));var x=g&&g.nodeName,v,w;if(typeof x=="function"){var _=Uct(g);y=m,y&&y.constructor===x&&_.key==y.__key?gQ(y,_,1,a,!1):(v=y,t._component=y=Yct(x,_,a),y.nextBase=y.nextBase||d,y._parentComponent=t,gQ(y,_,0,a,!1),yQ(y,1,n,!0)),w=y.base}else b=p,v=m,v&&(b=t._component=null),(p||r===1)&&(b&&(b._component=null),w=Wct(b,g,a,n||!f,p&&p.parentNode,!0));if(p&&w!==p&&y!==m){var C=p.parentNode;C&&w!==C&&(C.replaceChild(w,p),v||(p._component=null,TA(p,!1)))}if(v&&bQ(v),t.base=w,w&&!o){for(var S=t,E=t;E=E._parentComponent;)(S=E).base=w;w._component=S,w._componentConstructor=S.constructor}}if(!f||n?Vct.unshift(t):h||(t.componentDidUpdate&&t.componentDidUpdate(l,u,c),kf.afterUpdate&&kf.afterUpdate(t)),t._renderCallbacks!=null)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);!L_e&&!o&&Gct()}}function Svr(t,r,n,o){for(var i=t&&t._component,s=i,a=t,l=i&&t._componentConstructor===r.nodeName,u=l,c=Uct(r);i&&!u&&(i=i._parentComponent);)u=i.constructor===r.nodeName;return i&&u&&(!o||i._component)?(gQ(i,c,3,n,o),t=i.base):(s&&!l&&(bQ(s),t=a=null),i=Yct(r.nodeName,c,n),t&&!i.nextBase&&(i.nextBase=t,a=null),gQ(i,c,1,n,o),t=i.base,a&&t!==a&&(a._component=null,TA(a,!1))),t}function bQ(t){kf.beforeUnmount&&kf.beforeUnmount(t);var r=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?bQ(n):r&&(r.__preactattr_&&r.__preactattr_.ref&&r.__preactattr_.ref(null),t.nextBase=r,z_e(r),wvr(t),Hct(r)),t.__ref&&t.__ref(null)}function $$(t,r){this._dirty=!0,this.context=r,this.props=t,this.state=this.state||{}}function Xct(t,r,n){return Wct(n,t,{},!1,r,!1)}var kf,VO,jct,mvr,hvr,P_e,Vct,L_e,v2,hQ,B_e,Cvr,Evr,vQ=D(()=>{"use strict";kf={},VO=[],jct=[];mvr=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;hvr=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,P_e=[];Vct=[],L_e=0,v2=!1,hQ=!1;B_e={};w2($$.prototype,{setState:function(r,n){var o=this.state;this.prevState||(this.prevState=w2({},o)),w2(o,typeof r=="function"?r(o,this.props):r),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),$ct(this)},forceUpdate:function(r){r&&(this._renderCallbacks=this._renderCallbacks||[]).push(r),yQ(this,2)},render:function(){}});Cvr={h:mQ,createElement:mQ,cloneElement:Bct,Component:$$,render:Xct,rerender:$_e,options:kf},Evr=Cvr});var Kct=gt(V_e=>{"use strict";Object.defineProperty(V_e,"__esModule",{value:!0});var wQ=(vQ(),vl(xQ)),U_e=UO(),Tvr=(()=>{class t extends wQ.Component{componentDidMount(){let{name:n,tab:o}=this.props;this.props.registerSurface(n,o,this)}componentDidUpdate(){return!1}render(){let{name:n,visible:o,styles:i}=this.props,s=Object.assign({},t.defaultStyles,i),{width:a,height:l}=s,{maxHeight:u,maxWidth:c}=s;u=l===t.defaultStyles.height?u:l,c=a===t.defaultStyles.width?c:a;let f=U_e.css({display:o?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:a,maxHeight:u,maxWidth:c,overflow:"auto"}),d=U_e.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),p=U_e.css({boxSizing:"border-box"});return wQ.h("div",{className:`${f} tf-surface`,ref:m=>this.container=m,"data-visible":o},wQ.h("div",{className:`${d} tf-label`,ref:m=>this.label=m},n),wQ.h("div",{className:`${p} tf-draw-area`,ref:m=>this.drawArea=m}))}}return t.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t})();V_e.SurfaceComponent=Tvr});var Qct=gt(q_e=>{"use strict";Object.defineProperty(q_e,"__esModule",{value:!0});var z$=(vQ(),vl(xQ)),Zct=UO(),G_e=class extends z$.Component{render(){let{tabNames:r,activeTab:n,handleClick:o}=this.props,i=r.length>0?r.map(a=>z$.h(W_e,{key:a,id:a,handleClick:o,isActive:a===n},a)):null,s=Zct.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return z$.h("div",{className:`${s} visor-tabs`},i)}};q_e.Tabs=G_e;var W_e=class extends z$.Component{render(){let{children:r,isActive:n,handleClick:o,id:i}=this.props,s=Zct.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return z$.h("a",{className:`${s} tf-tab`,"data-isactive":n,onClick:()=>o(i)},r)}}});var Jct=gt(Y_e=>{"use strict";Object.defineProperty(Y_e,"__esModule",{value:!0});var Bh=(vQ(),vl(xQ)),AA=UO(),Avr=Kct(),kvr=Qct(),H_e=class t extends Bh.Component{static render(r,n,o){return Bh.render(Bh.h(t,Object.assign({},o)),r,n)}constructor(r){super(r),this.surfaces=new Map;let n=r.startOpen==null?!0:r.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(r,n){let o=this.surfaceId(r,n),i;if(this.surfaces.has(o))i=this.surfaces.get(o);else throw Error(`Surface not found with id: ${o}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(r,n){return r+n}setTabs(r){let n=r.map(s=>s.tab),o=this.state.tabs,i;for(let s of n)o.has(s)||(o.add(s),i=s);i!=null&&this.setState({tabs:o,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(r,n,o){let i=this.surfaceId(r,n);this.surfaces.set(i,o)}keyHandler(r){r.keyCode===192&&(r.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(r){this.setState({activeTab:r})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(r){this.setTabs(r.surfaceList)}render(){let{isOpen:r,isFullscreen:n,activeTab:o}=this.state,{surfaceList:i}=this.props,s=Array.from(this.getTabs().values()),u=n?"90vw":"550px",c=AA.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),f=AA.css({right:"0"}),d=AA.css({right:`calc(-${u} - 10px)`}),p=r?f:d,m=AA.css({});return Bh.h("div",{className:`${c} ${p} visor`,"data-isopen":r,"data-isfullscreen":n},Bh.h(Ivr,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),Bh.h(kvr.Tabs,{tabNames:s,activeTab:o,handleClick:this.setActiveTab.bind(this)}),Bh.h("div",{className:`${m} visor-surfaces`},i.map(h=>Bh.h(Avr.SurfaceComponent,{key:h.name+h.tab,name:h.name,tab:h.tab,styles:h.styles,registerSurface:this.registerSurface.bind(this),visible:o===h.tab}))))}};Y_e.VisorComponent=H_e;function Ivr(t){let{isFullScreen:r,fullScreenHandler:n,closeHandler:o}=t,i=AA.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=AA.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),a=AA.css({marginLeft:"auto"});return Bh.h("div",{className:`${i} visor-controls`},Bh.h("button",{className:`${s}`,onClick:n},r?"Minimize":"Maximize"),Bh.h("button",{className:`${s} ${a}`,onClick:o},"Hide"))}});var K_e=gt(CQ=>{"use strict";Object.defineProperty(CQ,"__esModule",{value:!0});var Dvr=Jct(),_Q,Nvr="Visor",X_e="tfjs-visor-container";function Fvr(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(X_e)&&_Q!=null)return _Q;let t=document.getElementById(X_e);t==null&&(t=document.createElement("div"),t.id=X_e,document.body.appendChild(t));let r;function n(s,a){let l=null;return r=Dvr.VisorComponent.render(s,r,{ref:u=>l=u,surfaceList:Array.from(a.values())}),l}let o=new Map,i=n(t,o);return _Q=new SQ(i,t,o,n),_Q}CQ.visor=Fvr;var SQ=class{constructor(r,n,o,i){this.visorComponent=r,this.el=n,this.surfaceList=o,this.renderVisor=i}surface(r){let{name:n}=r,o=r.tab==null?Nvr:r.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");let i=Object.assign({},r,{tab:o}),s=`${n}-${o}`;return this.surfaceList.has(s)||this.surfaceList.set(s,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,o)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(r){if(!this.visorComponent.state.tabs.has(r))throw new Error(`Tab '${r}' does not exist`);this.visorComponent.setState({activeTab:r})}};CQ.Visor=SQ});var jp=gt(kA=>{"use strict";var Ovr=kA&&kA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(kA,"__esModule",{value:!0});var eft=j_e(),Mvr=K_e();function Rvr(t){if(t instanceof HTMLElement)return t;if(eft.isSurface(t))return t.drawArea;if(eft.isSurfaceInfo(t))return Mvr.visor().surface({name:t.name,tab:t.tab,styles:t.styles}).drawArea;throw new Error("Not a drawable")}kA.getDrawArea=Rvr;function jvr(t,r){let n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(r);if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(t[s]!==r[s])return!1}return!0}kA.shallowEquals=jvr;function Pvr(){return Ovr(this,void 0,void 0,function*(){yield new Promise(t=>requestAnimationFrame(t))})}kA.nextFrame=Pvr});var jv=gt(U$=>{"use strict";Object.defineProperty(U$,"__esModule",{value:!0});var tft=UO(),Lvr=jp(),Bvr={prepend:!1};function $vr(t,r,n={}){let o=Lvr.getDrawArea(t),i=tft.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=tft.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),a=Object.assign({},Bvr,n),l=o.querySelector(`div[data-name=${r}]`);if(!l){if(l=document.createElement("div"),l.setAttribute("class",`${i}`),l.dataset.name=r,a.title){let u=document.createElement("div");u.setAttribute("class",`subsurface-title ${s}`),u.innerText=a.title,l.appendChild(u)}a.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l}U$.subSurface=$vr;function zvr(t){let n=0,o=t;for(;o&&o.clientWidth===0;)o=o.parentElement,n=50;return o.clientWidth-n}U$.getDefaultWidth=zvr;function Uvr(t){return t.clientHeight===0?200:t.clientHeight}U$.getDefaultHeight=Uvr});var nft=gt(IA=>{"use strict";var Vvr=IA&&IA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},Gvr=IA&&IA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(IA,"__esModule",{value:!0});var Wvr=Gvr((wA(),vl(vA))),rft=jv(),EQ=jp();function qvr(t,r,n={}){return Vvr(this,void 0,void 0,function*(){let o=EQ.getDrawArea(t),i=r,s=Object.assign({},Hvr,n);if(Z_e.has(o)){let y=Z_e.get(o);if(EQ.shallowEquals(s,y.lastOptions)){yield EQ.nextFrame();let b=y.view,x=b.changeset().remove(()=>!0).insert(i);yield b.change("values",x).runAsync();return}}let{xLabel:a,yLabel:l,xType:u,yType:c}=s,f=null;a!=null&&(f={title:a});let d=null;l!=null&&(d={title:l});let p={actions:!1,mode:"vega-lite",defaultStyle:!1},m;s.color!=null?Array.isArray(s.color)?m={field:"index",type:"nominal",scale:{range:s.color}}:m={value:s.color}:m={value:"#4C78A0"};let h={width:s.width||rft.getDefaultWidth(o),height:s.height||rft.getDefaultHeight(o),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:s.fontSize,titleFontSize:s.fontSize},text:{fontSize:s.fontSize},legend:{labelFontSize:s.fontSize,titleFontSize:s.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:u,axis:f},y:{field:"value",type:c,axis:d},color:m}};yield EQ.nextFrame();let g=yield Wvr.default(o,h,p);Z_e.set(o,{view:g.view,lastOptions:s})})}IA.barchart=qvr;var Hvr={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},Z_e=new Map});var ift=gt(DA=>{"use strict";var Yvr=DA&&DA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},Xvr=DA&&DA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(DA,"__esModule",{value:!0});var Kvr=Xvr((wA(),vl(vA))),oft=jv(),Zvr=jp();function Qvr(t,r,n={}){return Yvr(this,void 0,void 0,function*(){let o=Object.assign({},Jvr,n),i=Zvr.getDrawArea(t),s=[],a=r.values,l=r.tickLabels||[],u=l.length===0,c=!0;for(let m=0;m<a.length;m++){let h=u?`Class ${m}`:l[m];u&&l.push(h);for(let g=0;g<a[m].length;g++){let y=u?`Class ${g}`:l[g],b=a[m][g];m===g&&!o.shadeDiagonal?s.push({label:h,prediction:y,count:b,noFill:!0}):(s.push({label:h,prediction:y,count:b,scaleCount:b}),b!==0&&(c=!1))}}if(!o.shadeDiagonal&&c)for(let m of s)m.noFill===!0&&(m.noFill=!1,m.scaleCount=m.count);let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||oft.getDefaultWidth(i),height:o.height||oft.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:s},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:l}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:l}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};o.shadeDiagonal===!1&&d.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&d.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});let p=typeof o.colorMap=="string"?{scheme:o.colorMap}:o.colorMap;d.layer[0].encoding.color.scale.range=p,yield Kvr.default(i,d,f)})}DA.confusionMatrix=Qvr;var Jvr={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}});var V$=gt(GO=>{"use strict";Object.defineProperty(GO,"__esModule",{value:!0});function sft(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}GO.assert=sft;function e1r(t,r,n=""){sft(aft(t,r),n+` Shapes ${t} and ${r} must match`)}GO.assertShapesMatch=e1r;function aft(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}GO.arraysEqual=aft;GO.DECIMAL_PLACES_TO_CHECK=4});var fft=gt(Pv=>{"use strict";var cft=Pv&&Pv.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},t1r=Pv&&Pv.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r},r1r=Pv&&Pv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pv,"__esModule",{value:!0});var G$=t1r((re(),vl(Fo))),n1r=r1r((wA(),vl(vA))),lft=jv(),W$=V$(),o1r=jp();function i1r(t,r,n={}){return cft(this,void 0,void 0,function*(){let o=Object.assign({},a1r,n),i=o1r.getDrawArea(t),s=r.values;o.rowMajor&&(s=yield s1r(r.values));let{xTickLabels:a,yTickLabels:l}=r;a!=null&&uft(s,a,0),l!=null&&uft(s,l,1);let u="@tfidx@",c=[];if(s instanceof G$.Tensor){W$.assert(s.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let g=yield s.data(),[y,b]=s.shape;for(let x=0;x<y;x++){let v=a?`${a[x]}${u}${x}`:x;for(let w=0;w<b;w++){let _=l?`${l[w]}${u}${w}`:w,C=x*b+w,S=g[C];c.push({x:v,y:_,value:S})}}}else{let g=s;for(let y=0;y<g.length;y++){let b=a?`${a[y]}${u}${y}`:y;for(let x=0;x<g[y].length;x++){let v=l?`${l[x]}${u}${x}`:x,w=g[y][x];c.push({x:b,y:v,value:w})}}}let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||lft.getDefaultWidth(i),height:o.height||lft.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:c},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},p=`${u}\\d+$`,m=new RegExp(p);a&&(d.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),l&&(d.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),(a||l)&&(f.tooltip={sanitize:g=>String(g).replace(m,"")});let h;switch(o.colorMap){case"blues":h=["#f7fbff","#4292c6"];break;case"greyscale":h=["#000000","#ffffff"];break;case"viridis":default:h="viridis";break}if(h!=="viridis"){let g=d.encoding.fill;g.scale={range:h}}if(o.domain){let g=d.encoding.fill;g.scale!=null?g.scale=Object.assign({},g.scale,{domain:o.domain}):g.scale={domain:o.domain}}yield n1r.default(i,d,f)})}Pv.heatmap=i1r;function s1r(t){return cft(this,void 0,void 0,function*(){let r,n;t instanceof G$.Tensor?(r=t.shape,n=t.transpose()):(r=[t.length,t[0].length],n=G$.tidy(()=>G$.tensor2d(t).transpose())),W$.assert(n.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let o=yield n.array();n.dispose();let i=[o.length,o[0].length];return W$.assert(r[0]===i[1]&&r[1]===i[0],`Unexpected transposed shape. Original ${r} : Transposed ${i}`),o})}function uft(t,r,n){let o=t instanceof G$.Tensor?t.shape:[t.length,t[0].length];n===0?W$.assert(o[0]===r.length,`Length of xTickLabels (${r.length}) must match number of rows (${o[0]})`):n===1&&W$.assert(o[1]===r.length,`Length of yTickLabels (${r.length}) must match number of columns (${o[1]})`)}var a1r={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}});var q$=gt(Lv=>{"use strict";var TQ=Lv&&Lv.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(Lv,"__esModule",{value:!0});var NA=(re(),vl(Fo)),_2=V$();function l1r(t){if(!Array.isArray(t))throw new Error("input must be an array");if(t.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};let r=t.length,n=-1/0,o=1/0,i=0,s=0,a=0;for(let u=0;u<r;u++){let c=t[u];c>n&&(n=c),c<o&&(o=c),c===0&&(i+=1),isNaN(c)?s+=1:isFinite(c)||(a+=1)}let l={numVals:r,numZeros:i,numNans:s,max:n,min:o,numInfs:a};return l.max===-1/0&&(l.max=NaN),l.min===1/0&&(l.min=NaN),l}Lv.arrayStats=l1r;function u1r(t){return TQ(this,void 0,void 0,function*(){let[r,n,o]=NA.tidy(()=>{let i=NA.scalar(0,t.dtype),s=t.min(),a=t.max(),l=t.equal(i).sum();return[s,a,l]});return Promise.all([t.data(),r.data(),n.data(),o.data()]).then(([i,s,a,l])=>{let u=i.length,c=0,f=0;for(let h=0;h<u;h++){let g=i[h];isNaN(g)?c+=1:isFinite(g)||(f+=1)}let d=s[0],p=a[0];return c===u&&(d=NaN,p=NaN),{numVals:u,numZeros:l[0],numNans:c,min:d,max:p,numInfs:f}})})}Lv.tensorStats=u1r;function c1r(t,r,n,o){return TQ(this,void 0,void 0,function*(){_2.assert(t.rank===1,"labels must be a 1D tensor"),_2.assert(r.rank===1,"predictions must be a 1D tensor"),_2.assert(t.size===r.size,"labels and predictions must be the same length"),o!=null&&_2.assert(o.size===r.size,"labels and predictions must be the same length");let i=t.cast("int32"),s=r.cast("int32");n==null&&(n=NA.tidy(()=>NA.maximum(i.max(),s.max()).cast("int32").dataSync()[0]+1));let a=Promise.resolve(null);return o!=null&&(a=o.data()),Promise.all([i.data(),s.data(),a]).then(([l,u,c])=>{let f=Array(n).fill(0);for(let d=0;d<n;d++)f[d]=Array(n).fill(0);for(let d=0;d<l.length;d++){let p=l[d],m=u[d];c!=null?f[p][m]+=c[d]:f[p][m]+=1}return f})})}Lv.confusionMatrix=c1r;function f1r(t,r){return TQ(this,void 0,void 0,function*(){_2.assertShapesMatch(t.shape,r.shape,"Error computing accuracy.");let n=t.equal(r),o=n.mean(),i=(yield o.data())[0];return NA.dispose([n,o]),i})}Lv.accuracy=f1r;function d1r(t,r,n){return TQ(this,void 0,void 0,function*(){return _2.assert(t.rank===1,"labels must be a 1D tensor"),_2.assert(r.rank===1,"predictions must be a 1D tensor"),_2.assert(t.size===r.size,"labels and predictions must be the same length"),n==null&&(n=NA.tidy(()=>NA.maximum(t.max(),r.max()).dataSync()[0]+1)),Promise.all([t.data(),r.data()]).then(([o,i])=>{let s=Array(n).fill(0),a=Array(n).fill(0);for(let u=0;u<o.length;u++){let c=o[u],f=i[u];s[c]+=1,c===f&&(a[c]+=1)}let l=[];for(let u=0;u<s.length;u++)l.push({count:s[u],accuracy:s[u]===0?0:a[u]/s[u]});return l})})}Lv.perClassAccuracy=d1r});var AQ,H$,kQ=D(()=>{"use strict";AQ="http://www.w3.org/1999/xhtml",H$={svg:"http://www.w3.org/2000/svg",xhtml:AQ,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}});function WO(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),H$.hasOwnProperty(r)?{space:H$[r],local:t}:t}var IQ=D(()=>{"use strict";kQ()});function p1r(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===AQ&&r.documentElement.namespaceURI===AQ?r.createElement(t):r.createElementNS(n,t)}}function m1r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function S2(t){var r=WO(t);return(r.local?m1r:p1r)(r)}var Y$=D(()=>{"use strict";IQ();kQ()});function h1r(){}function qO(t){return t==null?h1r:function(){return this.querySelector(t)}}var DQ=D(()=>{"use strict"});function dft(t){typeof t!="function"&&(t=qO(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=new Array(a),u,c,f=0;f<a;++f)(u=s[f])&&(c=t.call(u,u.__data__,f,s))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new Mi(o,this._parents)}var pft=D(()=>{"use strict";Pp();DQ()});function g1r(){return[]}function NQ(t){return t==null?g1r:function(){return this.querySelectorAll(t)}}var Q_e=D(()=>{"use strict"});function mft(t){typeof t!="function"&&(t=NQ(t));for(var r=this._groups,n=r.length,o=[],i=[],s=0;s<n;++s)for(var a=r[s],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(o.push(t.call(u,u.__data__,c,a)),i.push(u));return new Mi(o,i)}var hft=D(()=>{"use strict";Pp();Q_e()});var yft,HO,gft,FQ,J_e=D(()=>{"use strict";yft=function(t){return function(){return this.matches(t)}};typeof document<"u"&&(HO=document.documentElement,HO.matches||(gft=HO.webkitMatchesSelector||HO.msMatchesSelector||HO.mozMatchesSelector||HO.oMatchesSelector,yft=function(t){return function(){return gft.call(this,t)}}));FQ=yft});function bft(t){typeof t!="function"&&(t=FQ(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=[],u,c=0;c<a;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&l.push(u);return new Mi(o,this._parents)}var xft=D(()=>{"use strict";Pp();J_e()});function OQ(t){return new Array(t.length)}var e2e=D(()=>{"use strict"});function vft(){return new Mi(this._enter||this._groups.map(OQ),this._parents)}function X$(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}var t2e=D(()=>{"use strict";e2e();Pp();X$.prototype={constructor:X$,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}});function wft(t){return function(){return t}}var _ft=D(()=>{"use strict"});function y1r(t,r,n,o,i,s){for(var a=0,l,u=r.length,c=s.length;a<c;++a)(l=r[a])?(l.__data__=s[a],o[a]=l):n[a]=new X$(t,s[a]);for(;a<u;++a)(l=r[a])&&(i[a]=l)}function b1r(t,r,n,o,i,s,a){var l,u,c={},f=r.length,d=s.length,p=new Array(f),m;for(l=0;l<f;++l)(u=r[l])&&(p[l]=m=Sft+a.call(u,u.__data__,l,r),m in c?i[l]=u:c[m]=u);for(l=0;l<d;++l)m=Sft+a.call(t,s[l],l,s),(u=c[m])?(o[l]=u,u.__data__=s[l],c[m]=null):n[l]=new X$(t,s[l]);for(l=0;l<f;++l)(u=r[l])&&c[p[l]]===u&&(i[l]=u)}function Cft(t,r){if(!t)return m=new Array(this.size()),c=-1,this.each(function(C){m[++c]=C}),m;var n=r?b1r:y1r,o=this._parents,i=this._groups;typeof t!="function"&&(t=wft(t));for(var s=i.length,a=new Array(s),l=new Array(s),u=new Array(s),c=0;c<s;++c){var f=o[c],d=i[c],p=d.length,m=t.call(f,f&&f.__data__,c,o),h=m.length,g=l[c]=new Array(h),y=a[c]=new Array(h),b=u[c]=new Array(p);n(f,d,g,y,b,m,r);for(var x=0,v=0,w,_;x<h;++x)if(w=g[x]){for(x>=v&&(v=x+1);!(_=y[v])&&++v<h;);w._next=_||null}}return a=new Mi(a,o),a._enter=l,a._exit=u,a}var Sft,Eft=D(()=>{"use strict";Pp();t2e();_ft();Sft="$"});function Tft(){return new Mi(this._exit||this._groups.map(OQ),this._parents)}var Aft=D(()=>{"use strict";e2e();Pp()});function kft(t){for(var r=this._groups,n=t._groups,o=r.length,i=n.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var u=r[l],c=n[l],f=u.length,d=a[l]=new Array(f),p,m=0;m<f;++m)(p=u[m]||c[m])&&(d[m]=p);for(;l<o;++l)a[l]=r[l];return new Mi(a,this._parents)}var Ift=D(()=>{"use strict";Pp()});function Dft(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var o=t[r],i=o.length-1,s=o[i],a;--i>=0;)(a=o[i])&&(s&&s!==a.nextSibling&&s.parentNode.insertBefore(a,s),s=a);return this}var Nft=D(()=>{"use strict"});function Fft(t){t||(t=x1r);function r(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s){for(var a=n[s],l=a.length,u=i[s]=new Array(l),c,f=0;f<l;++f)(c=a[f])&&(u[f]=c);u.sort(r)}return new Mi(i,this._parents).order()}function x1r(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var Oft=D(()=>{"use strict";Pp()});function Mft(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}var Rft=D(()=>{"use strict"});function jft(){var t=new Array(this.size()),r=-1;return this.each(function(){t[++r]=this}),t}var Pft=D(()=>{"use strict"});function Lft(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,s=o.length;i<s;++i){var a=o[i];if(a)return a}return null}var Bft=D(()=>{"use strict"});function $ft(){var t=0;return this.each(function(){++t}),t}var zft=D(()=>{"use strict"});function Uft(){return!this.node()}var Vft=D(()=>{"use strict"});function Gft(t){for(var r=this._groups,n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length,l;s<a;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}var Wft=D(()=>{"use strict"});function v1r(t){return function(){this.removeAttribute(t)}}function w1r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _1r(t,r){return function(){this.setAttribute(t,r)}}function S1r(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function C1r(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function E1r(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function qft(t,r){var n=WO(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((r==null?n.local?w1r:v1r:typeof r=="function"?n.local?E1r:C1r:n.local?S1r:_1r)(n,r))}var Hft=D(()=>{"use strict";IQ()});function YO(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}var MQ=D(()=>{"use strict"});function T1r(t){return function(){this.style.removeProperty(t)}}function A1r(t,r,n){return function(){this.style.setProperty(t,r,n)}}function k1r(t,r,n){return function(){var o=r.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Yft(t,r,n){return arguments.length>1?this.each((r==null?T1r:typeof r=="function"?k1r:A1r)(t,r,n??"")):r2e(this.node(),t)}function r2e(t,r){return t.style.getPropertyValue(r)||YO(t).getComputedStyle(t,null).getPropertyValue(r)}var n2e=D(()=>{"use strict";MQ()});function I1r(t){return function(){delete this[t]}}function D1r(t,r){return function(){this[t]=r}}function N1r(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Xft(t,r){return arguments.length>1?this.each((r==null?I1r:typeof r=="function"?N1r:D1r)(t,r)):this.node()[t]}var Kft=D(()=>{"use strict"});function Zft(t){return t.trim().split(/^|\s+/)}function o2e(t){return t.classList||new Qft(t)}function Qft(t){this._node=t,this._names=Zft(t.getAttribute("class")||"")}function Jft(t,r){for(var n=o2e(t),o=-1,i=r.length;++o<i;)n.add(r[o])}function edt(t,r){for(var n=o2e(t),o=-1,i=r.length;++o<i;)n.remove(r[o])}function F1r(t){return function(){Jft(this,t)}}function O1r(t){return function(){edt(this,t)}}function M1r(t,r){return function(){(r.apply(this,arguments)?Jft:edt)(this,t)}}function tdt(t,r){var n=Zft(t+"");if(arguments.length<2){for(var o=o2e(this.node()),i=-1,s=n.length;++i<s;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof r=="function"?M1r:r?F1r:O1r)(n,r))}var rdt=D(()=>{"use strict";Qft.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}});function R1r(){this.textContent=""}function j1r(t){return function(){this.textContent=t}}function P1r(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function ndt(t){return arguments.length?this.each(t==null?R1r:(typeof t=="function"?P1r:j1r)(t)):this.node().textContent}var odt=D(()=>{"use strict"});function L1r(){this.innerHTML=""}function B1r(t){return function(){this.innerHTML=t}}function $1r(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function idt(t){return arguments.length?this.each(t==null?L1r:(typeof t=="function"?$1r:B1r)(t)):this.node().innerHTML}var sdt=D(()=>{"use strict"});function z1r(){this.nextSibling&&this.parentNode.appendChild(this)}function adt(){return this.each(z1r)}var ldt=D(()=>{"use strict"});function U1r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function udt(){return this.each(U1r)}var cdt=D(()=>{"use strict"});function fdt(t){var r=typeof t=="function"?t:S2(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}var ddt=D(()=>{"use strict";Y$()});function V1r(){return null}function pdt(t,r){var n=typeof t=="function"?t:S2(t),o=r==null?V1r:typeof r=="function"?r:qO(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}var mdt=D(()=>{"use strict";Y$();DQ()});function G1r(){var t=this.parentNode;t&&t.removeChild(this)}function hdt(){return this.each(G1r)}var gdt=D(()=>{"use strict"});function W1r(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function q1r(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function ydt(t){return this.select(t?q1r:W1r)}var bdt=D(()=>{"use strict"});function xdt(t){return arguments.length?this.property("__data__",t):this.node().__data__}var vdt=D(()=>{"use strict"});function H1r(t,r,n){return t=Sdt(t,r,n),function(o){var i=o.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,o)}}function Sdt(t,r,n){return function(o){var i=$h;$h=o;try{t.call(this,this.__data__,r,n)}finally{$h=i}}}function Y1r(t){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");return o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),{type:r,name:n}})}function X1r(t){return function(){var r=this.__on;if(r){for(var n=0,o=-1,i=r.length,s;n<i;++n)s=r[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):r[++o]=s;++o?r.length=o:delete this.__on}}}function K1r(t,r,n){var o=_dt.hasOwnProperty(t.type)?H1r:Sdt;return function(i,s,a){var l=this.__on,u,c=o(r,s,a);if(l){for(var f=0,d=l.length;f<d;++f)if((u=l[f]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),u.value=r;return}}this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:r,listener:c,capture:n},l?l.push(u):this.__on=[u]}}function Cdt(t,r,n){var o=Y1r(t+""),i,s=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(i=0,f=l[u];i<s;++i)if((a=o[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=r?K1r:X1r,n==null&&(n=!1),i=0;i<s;++i)this.each(l(o[i],r,n));return this}function Edt(t,r,n,o){var i=$h;t.sourceEvent=$h,$h=t;try{return r.apply(n,o)}finally{$h=i}}var _dt,$h,wdt,RQ=D(()=>{"use strict";_dt={},$h=null;typeof document<"u"&&(wdt=document.documentElement,"onmouseenter"in wdt||(_dt={mouseenter:"mouseover",mouseleave:"mouseout"}))});function Tdt(t,r,n){var o=YO(t),i=o.CustomEvent;typeof i=="function"?i=new i(r,n):(i=o.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),t.dispatchEvent(i)}function Z1r(t,r){return function(){return Tdt(this,t,r)}}function Q1r(t,r){return function(){return Tdt(this,t,r.apply(this,arguments))}}function Adt(t,r){return this.each((typeof r=="function"?Q1r:Z1r)(t,r))}var kdt=D(()=>{"use strict";MQ()});function Mi(t,r){this._groups=t,this._parents=r}function Idt(){return new Mi([[document.documentElement]],K$)}var K$,Ddt,Pp=D(()=>{"use strict";pft();hft();xft();Eft();t2e();Aft();Ift();Nft();Oft();Rft();Pft();Bft();zft();Vft();Wft();Hft();n2e();Kft();rdt();odt();sdt();ldt();cdt();ddt();mdt();gdt();bdt();vdt();RQ();kdt();K$=[null];Mi.prototype=Idt.prototype={constructor:Mi,select:dft,selectAll:mft,filter:bft,data:Cft,enter:vft,exit:Tft,merge:kft,order:Dft,sort:Fft,call:Mft,nodes:jft,node:Lft,size:$ft,empty:Uft,each:Gft,attr:qft,style:Yft,property:Xft,classed:tdt,text:ndt,html:idt,raise:adt,lower:udt,append:fdt,insert:pdt,remove:hdt,clone:ydt,datum:xdt,on:Cdt,dispatch:Adt};Ddt=Idt});function jQ(t){return typeof t=="string"?new Mi([[document.querySelector(t)]],[document.documentElement]):new Mi([[t]],K$)}var i2e=D(()=>{"use strict";Pp()});function Ndt(t){return jQ(S2(t).call(document.documentElement))}var Fdt=D(()=>{"use strict";Y$();i2e()});function PQ(){return new s2e}function s2e(){this._="@"+(++J1r).toString(36)}var J1r,Odt=D(()=>{"use strict";J1r=0;s2e.prototype=PQ.prototype={constructor:s2e,get:function(t){for(var r=this._;!(r in t);)if(!(t=t.parentNode))return;return t[r]},set:function(t,r){return t[this._]=r},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}});function XO(){for(var t=$h,r;r=t.sourceEvent;)t=r;return t}var LQ=D(()=>{"use strict";RQ()});function C2(t,r){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=r.clientX,o.y=r.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}var i=t.getBoundingClientRect();return[r.clientX-i.left-t.clientLeft,r.clientY-i.top-t.clientTop]}var Z$=D(()=>{"use strict"});function Mdt(t){var r=XO();return r.changedTouches&&(r=r.changedTouches[0]),C2(t,r)}var Rdt=D(()=>{"use strict";LQ();Z$()});function jdt(t){return typeof t=="string"?new Mi([document.querySelectorAll(t)],[document.documentElement]):new Mi([t??[]],K$)}var Pdt=D(()=>{"use strict";Pp()});function Ldt(t,r,n){arguments.length<3&&(n=r,r=XO().changedTouches);for(var o=0,i=r?r.length:0,s;o<i;++o)if((s=r[o]).identifier===n)return C2(t,s);return null}var Bdt=D(()=>{"use strict";LQ();Z$()});function $dt(t,r){r==null&&(r=XO().touches);for(var n=0,o=r?r.length:0,i=new Array(o);n<o;++n)i[n]=C2(t,r[n]);return i}var zdt=D(()=>{"use strict";LQ();Z$()});var Udt={};cn(Udt,{clientPoint:()=>C2,create:()=>Ndt,creator:()=>S2,customEvent:()=>Edt,event:()=>$h,local:()=>PQ,matcher:()=>FQ,mouse:()=>Mdt,namespace:()=>WO,namespaces:()=>H$,select:()=>jQ,selectAll:()=>jdt,selection:()=>Ddt,selector:()=>qO,selectorAll:()=>NQ,style:()=>r2e,touch:()=>Ldt,touches:()=>$dt,window:()=>YO});var Vdt=D(()=>{"use strict";Fdt();Y$();Odt();J_e();Rdt();IQ();kQ();Z$();i2e();Pdt();Pp();DQ();Q_e();n2e();Bdt();zdt();MQ();RQ()});var Q$=gt(l2e=>{"use strict";Object.defineProperty(l2e,"__esModule",{value:!0});var ewr=(LE(),vl(tpe)),Gdt=(Vdt(),vl(Udt)),a2e=UO(),twr=jp();function rwr(t,r,n={}){if(r&&r.headers==null)throw new Error('Data to render must have a "headers" property');if(r&&r.values==null)throw new Error('Data to render must have a "values" property');let o=twr.getDrawArea(t),i=Object.assign({},nwr,n),s=Gdt.select(o).select("table.tf-table"),a=a2e.css({fontSize:i.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(s.size()===0&&(s=Gdt.select(o).append("table"),s.attr("class",` ${a} tf-table`),s.append("thead").append("tr"),s.append("tbody")),s.size()!==1)throw new Error("Error inserting table");let l=a2e.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),u=s.select("thead").select("tr").selectAll("th").data(r.headers),c=u.enter().append("th").attr("class",`${l}`);u.merge(c).html(y=>y),u.exit().remove();let f=ewr.format(",.4~f"),d=s.select("tbody").selectAll("tr").data(r.values),p=d.enter().append("tr"),m=a2e.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),h=d.merge(p).selectAll("td").data(y=>y),g=h.enter().append("td").attr("class",`${m}`);h.merge(g).html(y=>typeof y=="number"?f(y):y),h.exit().remove(),d.exit().remove()}l2e.table=rwr;var nwr={fontSize:14}});var $Q=gt(FA=>{"use strict";var owr=FA&&FA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},iwr=FA&&FA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(FA,"__esModule",{value:!0});var Wdt=(LE(),vl(tpe)),swr=iwr((wA(),vl(vA))),BQ=jv(),awr=q$(),lwr=Q$(),uwr={maxBins:12,fontSize:11};function cwr(t,r,n={}){return owr(this,void 0,void 0,function*(){let o=dwr(r),i=Object.assign({},uwr,n),s={actions:!1,mode:"vega-lite",defaultStyle:!1},a=BQ.subSurface(t,"histogram");if(n.stats!==!1){let c=BQ.subSurface(t,"stats",{prepend:!0}),f;n.stats?f=n.stats:f=awr.arrayStats(o.map(d=>d.value)),fwr(f,c,{fontSize:i.fontSize})}if(o.length===0)return;let l=[];for(let c=0;c<o.length;c++){let f=o[c].value;f!=null&&isFinite(f)&&l.push(o[c])}let u={width:i.width||BQ.getDefaultWidth(a),height:i.height||BQ.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:l},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return swr.default(a,u,s)})}FA.histogram=cwr;function fwr(t,r,n){let o=Wdt.format(",.4~f"),i=Wdt.format(".4~p"),s=[],a=[];if(t.numVals!=null&&(s.push("Num Vals"),a.push(o(t.numVals))),t.min!=null&&(s.push("Min"),a.push(o(t.min))),t.max!=null&&(s.push("Max"),a.push(o(t.max))),t.numZeros!=null){s.push("# Zeros");let l="";t.numVals&&(l=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),a.push(`${o(t.numZeros)} ${l}`)}if(t.numNans!=null){s.push("# NaNs");let l="";t.numVals&&(l=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),a.push(`${o(t.numNans)} ${l}`)}if(t.numInfs!=null){s.push("# Infinity");let l="";t.numVals&&(l=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),a.push(`${o(t.numInfs)} ${l}`)}lwr.table(r,{headers:s,values:[a]},n)}function dwr(t){if(t.length==null)throw new Error("input data must be an array");if(t.length===0)return[];if(typeof t[0]=="object"){if(t[0].value==null)throw new Error("input data must have a value field");return t}else{let r=Array(t.length);for(let n=0;n<t.length;n++)r[n]={value:t[n]};return r}}});var u2e=gt(OA=>{"use strict";var pwr=OA&&OA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},mwr=OA&&OA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(OA,"__esModule",{value:!0});var hwr=mwr((wA(),vl(vA))),qdt=jv(),Hdt=V$(),gwr=jp();function ywr(t,r,n={}){return pwr(this,void 0,void 0,function*(){let o=Array.isArray(r.values[0])?r.values:[r.values],i=o[0].length,s=r.series?r.series:o.map((g,y)=>`Series ${y+1}`);Hdt.assert(s.length===o.length,"Must have an equal number of series labels as there are data series"),n.seriesColors!=null&&Hdt.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=[];for(let g=0;g<i;g++){let y={x:g};s.forEach((b,x)=>{let v=o[x][g].y;y[b]=v,y[`${b}-name`]=b}),a.push(y)}let l=Object.assign({},bwr,n),u=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},c={x:{field:"x",type:l.xType,title:l.xLabel},tooltip:[{field:"x",type:"quantitative"},...s.map(g=>({field:g,type:"quantitative"}))]},f=s.map(g=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:g,type:l.yType,title:l.yLabel,scale:u()},color:{field:`${g}-name`,type:"nominal",legend:{values:s,title:null},scale:{range:l.seriesColors}}}})),d={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},p=gwr.getDrawArea(t),m={width:l.width||qdt.getDefaultWidth(p),height:l.height||qdt.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:a},encoding:c,layer:[...f,d]},h={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield hwr.default(p,m,h),Promise.resolve()})}OA.linechart=ywr;var bwr={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var Xdt=gt(MA=>{"use strict";var xwr=MA&&MA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},vwr=MA&&MA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(MA,"__esModule",{value:!0});var wwr=vwr((wA(),vl(vA))),Ydt=jv(),_wr=V$(),Swr=jp();function Cwr(t,r,n={}){return xwr(this,void 0,void 0,function*(){let o=r.values,i=r.series==null?[]:r.series;o=Array.isArray(o[0])?o:[o];let s=[];o.forEach((p,m)=>{let h=i[m]!=null?i[m]:`Series ${m+1}`,g=p.map(y=>Object.assign({},y,{series:h}));s.push(...g)}),n.seriesColors!=null&&_wr.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=Swr.getDrawArea(t),l=Object.assign({},Ewr,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},c=()=>{if(l.zoomToFit)return{zero:!1};if(l.xAxisDomain!=null)return{domain:l.xAxisDomain}},f=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},d={width:l.width||Ydt.getDefaultWidth(a),height:l.height||Ydt.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:s},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:l.xType,title:l.xLabel,scale:c()},y:{field:"y",type:l.yType,title:l.yLabel,scale:f()},color:{field:"series",type:"nominal",scale:{range:l.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield wwr.default(a,d,u),Promise.resolve()})}MA.scatterplot=Cwr;var Ewr={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var tpt=gt(KO=>{"use strict";var Qdt=KO&&KO.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(KO,"__esModule",{value:!0});var Twr=u2e(),c2e=jp(),Jdt=jv();function ept(t,r,n,o={}){return Qdt(this,void 0,void 0,function*(){let i=c2e.getDrawArea(t),s={};for(let c of n)if(/val_/.test(c)){let f=c.replace("val_","");Kdt(s,f);let d=Zdt(r,c,n.indexOf(c));s[f].series.push(c),s[f].values.push(d)}else{let f=Zdt(r,c,n.indexOf(c));Kdt(s,c),s[c].series.push(c),s[c].values.push(f)}let a=Object.keys(s),l=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},o),u=[];for(let c of a){let f=Jdt.subSurface(i,c),d=s[c].series,p=s[c].values;d.every(h=>!!h.match("acc"))&&(l.zoomToFitAccuracy?l.zoomToFit=!0:(l.yAxisDomain=[0,1],delete l.zoomToFit));let m=Twr.linechart(f,{values:p,series:d},l);u.push(m)}yield Promise.all(u)})}KO.history=ept;function Kdt(t,r){t[r]==null&&(t[r]={series:[],values:[]})}function Zdt(t,r,n){if(Array.isArray(t)){let o=Array.isArray(t[0])?t[n]:t,i=[];for(let s=0;s<o.length;s++){let a=o[s];i.push({x:s,y:a[r]})}return i}else return t.history[r].map((o,i)=>({x:i,y:o}))}function Awr(t,r,n={}){let o={},i=n.callbacks||["onEpochEnd","onBatchEnd"],s=c2e.getDrawArea(t),a=Object.assign({},n);delete a.callbacks;function l(c){return(f,d)=>Qdt(this,void 0,void 0,function*(){/batch/i.test(c)?a.xLabel="Batch":/epoch/i.test(c)&&(a.xLabel="Epoch");let p=[],m=[];for(let g of r)if(d[g]!=null){m.push(g);let y=kwr(o,c,g);y.push({[g]:d[g]}),p.push(y)}let h=Jdt.subSurface(s,c,{title:c});ept(h,p,m,a),yield c2e.nextFrame()})}let u={};return i.forEach(c=>{u[c]=l(c)}),u}KO.fitCallbacks=Awr;function kwr(t,r,n){return t[r]==null&&(t[r]={}),t[r][n]==null&&(t[r][n]=[]),t[r][n]}});var opt=gt(ZO=>{"use strict";var zQ=ZO&&ZO.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(ZO,"__esModule",{value:!0});var Iwr=$Q(),rpt=jp(),npt=Q$(),f2e=jv(),Dwr=q$();function Nwr(t,r){return zQ(this,void 0,void 0,function*(){let n=rpt.getDrawArea(t),o=Owr(r),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=o.layers.map(a=>[a.name,a.outputShape,a.parameters,a.trainable]);npt.table(n,{headers:i,values:s})})}ZO.modelSummary=Nwr;function Fwr(t,r){return zQ(this,void 0,void 0,function*(){let n=rpt.getDrawArea(t),o=yield Rwr(r),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],s=f2e.subSurface(n,"layer-weights-info"),a=o.map(f=>[f.name,f.shape,f.stats.min,f.stats.max,f.weight.size,f.stats.numZeros,f.stats.numNans,f.stats.numInfs]);npt.table(s,{headers:i,values:a});let l=f2e.subSurface(n,"select-layer"),u=f2e.subSurface(n,"param-distribution"),c=f=>zQ(this,void 0,void 0,function*(){let p=yield o.filter(m=>m.name===f)[0].weight.data();Iwr.histogram(u,p,{height:150,width:460,stats:!1})});jwr(o.map(f=>f.name),l,c)})}ZO.layer=Fwr;function Owr(t){return{layers:t.layers.map(Mwr)}}function Mwr(t){let r;return Array.isArray(t.outputShape[0])?r=`[${t.outputShape.map(o=>d2e(o)).join(", ")}]`:r=d2e(t.outputShape),{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:r}}function Rwr(t){return zQ(this,void 0,void 0,function*(){let r=t.getWeights(),n=t.weights,o=r.map(Dwr.tensorStats),i=yield Promise.all(o),s=r.map(a=>a.shape);return r.map((a,l)=>({name:n[l].name,stats:i[l],shape:d2e(s[l]),weight:a}))})}function d2e(t){let r=t.slice();return r.length===0?"Scalar":(r[0]===null&&(r[0]="batch"),`[${r.join(",")}]`)}function jwr(t,r,n){let s=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${t.map(u=>`<option value=${u}>${u}</option>`)}
    </select>
  `}</div>`;r.innerHTML=s;let a=r.querySelector("button"),l=r.querySelector("select");a.addEventListener("click",()=>{n(l.selectedOptions[0].label)})}});var ipt=gt(J$=>{"use strict";var Pwr=J$&&J$.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(J$,"__esModule",{value:!0});var Lwr=jp(),Bwr=Q$();function $wr(t,r,n){return Pwr(this,void 0,void 0,function*(){let o=Lwr.getDrawArea(t),i=["Class","Accuracy","# Samples"],s=[];for(let a=0;a<r.length;a++){let l=n?n[a]:a.toString(),u=r[a];s.push([l,u.accuracy,u.count])}return Bwr.table(o,{headers:i,values:s})})}J$.perClassAccuracy=$wr});var spt=gt(e6=>{"use strict";var zwr=e6&&e6.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(e6,"__esModule",{value:!0});var Uwr=$Q(),Vwr=jp(),Gwr=q$();function Wwr(t,r){return zwr(this,void 0,void 0,function*(){let n=Vwr.getDrawArea(t),o=yield Gwr.tensorStats(r),i=yield r.data();Uwr.histogram(n,i,{height:150,stats:o})})}e6.valuesDistribution=Wwr});var apt=gt(p2e=>{"use strict";Object.defineProperty(p2e,"__esModule",{value:!0});var qwr="1.5.1";p2e.version=qwr});var cpt=gt(Bv=>{"use strict";function Hwr(t){for(var r in t)Bv.hasOwnProperty(r)||(Bv[r]=t[r])}Object.defineProperty(Bv,"__esModule",{value:!0});re();Jie();var Ywr=nft(),Xwr=ift(),Kwr=fft(),Zwr=$Q(),Qwr=u2e(),Jwr=Xdt(),e_r=Q$(),lpt=tpt(),upt=opt(),t_r=ipt(),r_r=spt(),m2e=q$(),n_r=apt();Bv.version_vis=n_r.version;var o_r={barchart:Ywr.barchart,table:e_r.table,histogram:Zwr.histogram,linechart:Qwr.linechart,scatterplot:Jwr.scatterplot,confusionMatrix:Xwr.confusionMatrix,heatmap:Kwr.heatmap};Bv.render=o_r;var i_r={accuracy:m2e.accuracy,perClassAccuracy:m2e.perClassAccuracy,confusionMatrix:m2e.confusionMatrix};Bv.metrics=i_r;var s_r={history:lpt.history,fitCallbacks:lpt.fitCallbacks,perClassAccuracy:t_r.perClassAccuracy,valuesDistribution:r_r.valuesDistribution,layer:upt.layer,modelSummary:upt.modelSummary};Bv.show=s_r;var a_r=K_e();Bv.visor=a_r.visor;Hwr(j_e())});var I2t=gt((k2t,TEe)=>{"use strict";(function(t){typeof k2t=="object"&&typeof TEe<"u"?TEe.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).p5=t()})(function(){var t,r,n;return function o(i,s,a){function l(f,d){if(!s[f]){if(!i[f]){var p=typeof KM=="function"&&KM;if(!d&&p)return p(f,!0);if(u)return u(f,!0);throw(d=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",d}p=s[f]={exports:{}},i[f][0].call(p.exports,function(m){return l(i[f][1][m]||m)},p,p.exports,o,i,s,a)}return s[f].exports}for(var u=typeof KM=="function"&&KM,c=0;c<a.length;c++)l(a[c]);return l}({1:[function(o,i,s){"use strict";s.byteLength=function(g){var g=p(g),h=g[0],g=g[1];return 3*(h+g)/4-g},s.toByteArray=function(m){var h,g,b=p(m),y=b[0],b=b[1],x=new u(function(_,C){return 3*(_+C)/4-C}(y,b)),v=0,w=0<b?y-4:y;for(g=0;g<w;g+=4)h=l[m.charCodeAt(g)]<<18|l[m.charCodeAt(g+1)]<<12|l[m.charCodeAt(g+2)]<<6|l[m.charCodeAt(g+3)],x[v++]=h>>16&255,x[v++]=h>>8&255,x[v++]=255&h;return b===2&&(h=l[m.charCodeAt(g)]<<2|l[m.charCodeAt(g+1)]>>4,x[v++]=255&h),b===1&&(h=l[m.charCodeAt(g)]<<10|l[m.charCodeAt(g+1)]<<4|l[m.charCodeAt(g+2)]>>2,x[v++]=h>>8&255,x[v++]=255&h),x},s.fromByteArray=function(m){for(var h,g=m.length,y=g%3,b=[],x=0,v=g-y;x<v;x+=16383)b.push(function(w,_,C){for(var S,E=[],A=_;A<C;A+=3)S=(w[A]<<16&16711680)+(w[A+1]<<8&65280)+(255&w[A+2]),E.push(function(N){return a[N>>18&63]+a[N>>12&63]+a[N>>6&63]+a[63&N]}(S));return E.join("")}(m,x,v<x+16383?v:x+16383));return y==1?(h=m[g-1],b.push(a[h>>2]+a[h<<4&63]+"==")):y==2&&(h=(m[g-2]<<8)+m[g-1],b.push(a[h>>10]+a[h>>4&63]+a[h<<2&63]+"=")),b.join("")};for(var a=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=c.length;f<d;++f)a[f]=c[f],l[c.charCodeAt(f)]=f;function p(m){var h=m.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return m=m.indexOf("="),h=(m=m===-1?h:m)===h?0:4-m%4,[m,h]}l[45]=62,l[95]=63},{}],2:[function(o,i,s){},{}],3:[function(o,i,s){},{}],4:[function(o,i,s){(function(p){"use strict";var l=o("base64-js"),u=o("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(s.Buffer=p,s.SlowBuffer=function($){return+$!=$&&($=0),p.alloc(+$)},s.INSPECT_MAX_BYTES=50,2147483647);function d($){if(f<$)throw new RangeError('The value "'+$+'" is invalid for option "size"');return $=new Uint8Array($),Object.setPrototypeOf($,p.prototype),$}function p($,F,z){if(typeof $!="number")return m($,F,z);if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g($)}function m($,F,z){if(typeof $=="string"){var q=$,ee=F;if(p.isEncoding(ee=typeof ee=="string"&&ee!==""?ee:"utf8"))return ae=0|x(q,ee),Q=d(ae),Q=(q=Q.write(q,ee))!==ae?Q.slice(0,q):Q;throw new TypeError("Unknown encoding: "+ee)}if(ArrayBuffer.isView($))return y($);if($!=null){if(Y($,ArrayBuffer)||$&&Y($.buffer,ArrayBuffer)){var ae=$,q=F,Q=z;if(q<0||ae.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<q+(Q||0))throw new RangeError('"length" is outside of buffer bounds');return ae=q===void 0&&Q===void 0?new Uint8Array(ae):Q===void 0?new Uint8Array(ae,q):new Uint8Array(ae,q,Q),Object.setPrototypeOf(ae,p.prototype),ae}if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ee=$.valueOf&&$.valueOf(),ee!=null&&ee!==$)return p.from(ee,F,z);var le=function(ie){{var Z,ge;if(p.isBuffer(ie))return Z=0|b(ie.length),(ge=d(Z)).length!==0&&ie.copy(ge,0,0,Z),ge}if(ie.length!==void 0)return typeof ie.length!="number"||X(ie.length)?d(0):y(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return y(ie.data)}($);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return p.from($[Symbol.toPrimitive]("string"),F,z)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function h($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function g($){return h($),d($<0?0:0|b($))}function y($){for(var F=$.length<0?0:0|b($.length),z=d(F),q=0;q<F;q+=1)z[q]=255&$[q];return z}function b($){if(f<=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|$}function x($,F){if(p.isBuffer($))return $.length;if(ArrayBuffer.isView($)||Y($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var z=$.length,q=2<arguments.length&&arguments[2]===!0;if(!q&&z===0)return 0;for(var ee=!1;;)switch(F){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return V($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return G($).length;default:if(ee)return q?-1:V($).length;F=(""+F).toLowerCase(),ee=!0}}function v($,F,z){var q,ee=!1;if((F=F===void 0||F<0?0:F)>this.length||(z=z===void 0||z>this.length?this.length:z)<=0||(z>>>=0)<=(F>>>=0))return"";for($=$||"utf8";;)switch($){case"hex":var ae=this,Ae=F,Q=z,ge=ae.length;(!Q||Q<0||ge<Q)&&(Q=ge);for(var le="",ie=Ae=!Ae||Ae<0?0:Ae;ie<Q;++ie)le+=pe[ae[ie]];return le;case"utf8":case"utf-8":return A(this,F,z);case"ascii":var Z=this,ge=F,ne=z,ye="";ne=Math.min(Z.length,ne);for(var xe=ge;xe<ne;++xe)ye+=String.fromCharCode(127&Z[xe]);return ye;case"latin1":case"binary":var Ne=this,Ae=F,Me=z,ze="";Me=Math.min(Ne.length,Me);for(var lt=Ae;lt<Me;++lt)ze+=String.fromCharCode(Ne[lt]);return ze;case"base64":return We=this,q=z,(Bt=F)===0&&q===We.length?l.fromByteArray(We):l.fromByteArray(We.slice(Bt,q));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var We=F,Bt=z,Tt=this.slice(We,Bt),At="",Rt=0;Rt<Tt.length;Rt+=2)At+=String.fromCharCode(Tt[Rt]+256*Tt[Rt+1]);return At;default:if(ee)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),ee=!0}}function w($,F,z){var q=$[F];$[F]=$[z],$[z]=q}function _($,F,z,q,ee){if($.length===0)return-1;if(typeof z=="string"?(q=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),(z=(z=X(z=+z)?ee?0:$.length-1:z)<0?$.length+z:z)>=$.length){if(ee)return-1;z=$.length-1}else if(z<0){if(!ee)return-1;z=0}if(typeof F=="string"&&(F=p.from(F,q)),p.isBuffer(F))return F.length===0?-1:C($,F,z,q,ee);if(typeof F=="number")return F&=255,typeof Uint8Array.prototype.indexOf=="function"?(ee?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call($,F,z):C($,[F],z,q,ee);throw new TypeError("val must be string, number or Buffer")}function C($,F,z,q,ee){var ae=1,Q=$.length,le=F.length;if(q!==void 0&&((q=String(q).toLowerCase())==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if($.length<2||F.length<2)return-1;Q/=ae=2,le/=2,z/=2}function ie(xe,Ne){return ae===1?xe[Ne]:xe.readUInt16BE(Ne*ae)}if(ee)for(var Z=-1,ge=z;ge<Q;ge++)if(ie($,ge)===ie(F,Z===-1?0:ge-Z)){if(ge-(Z=Z===-1?ge:Z)+1===le)return Z*ae}else Z!==-1&&(ge-=ge-Z),Z=-1;else for(ge=z=Q<z+le?Q-le:z;0<=ge;ge--){for(var ne=!0,ye=0;ye<le;ye++)if(ie($,ge+ye)!==ie(F,ye)){ne=!1;break}if(ne)return ge}return-1}function S($,F,z,q){return U(function(ee){for(var ae=[],Q=0;Q<ee.length;++Q)ae.push(255&ee.charCodeAt(Q));return ae}(F),$,z,q)}function E($,F,z,q){return U(function(ee,ae){for(var Q,le,ie=[],Z=0;Z<ee.length&&!((ae-=2)<0);++Z)le=ee.charCodeAt(Z),Q=le>>8,le=le%256,ie.push(le),ie.push(Q);return ie}(F,$.length-z),$,z,q)}function A($,F,z){z=Math.min($.length,z);for(var q=[],ee=F;ee<z;){var ae,Q,le,ie,Z=$[ee],ge=null,ne=239<Z?4:223<Z?3:191<Z?2:1;if(ee+ne<=z)switch(ne){case 1:Z<128&&(ge=Z);break;case 2:(192&(ae=$[ee+1]))==128&&127<(ie=(31&Z)<<6|63&ae)&&(ge=ie);break;case 3:ae=$[ee+1],Q=$[ee+2],(192&ae)==128&&(192&Q)==128&&2047<(ie=(15&Z)<<12|(63&ae)<<6|63&Q)&&(ie<55296||57343<ie)&&(ge=ie);break;case 4:ae=$[ee+1],Q=$[ee+2],le=$[ee+3],(192&ae)==128&&(192&Q)==128&&(192&le)==128&&65535<(ie=(15&Z)<<18|(63&ae)<<12|(63&Q)<<6|63&le)&&ie<1114112&&(ge=ie)}ge===null?(ge=65533,ne=1):65535<ge&&(ge-=65536,q.push(ge>>>10&1023|55296),ge=56320|1023&ge),q.push(ge),ee+=ne}var ye=q,xe=ye.length;if(xe<=N)return String.fromCharCode.apply(String,ye);for(var Ne="",Ae=0;Ae<xe;)Ne+=String.fromCharCode.apply(String,ye.slice(Ae,Ae+=N));return Ne}s.kMaxLength=f,(p.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf($,F),$.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=m,Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function($,F,z){return F=F,z=z,h($=$),!($<=0)&&F!==void 0?typeof z=="string"?d($).fill(F,z):d($).fill(F):d($)},p.allocUnsafe=g,p.allocUnsafeSlow=g,p.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==p.prototype},p.compare=function($,F){if(Y($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),Y(F,Uint8Array)&&(F=p.from(F,F.offset,F.byteLength)),!p.isBuffer($)||!p.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===F)return 0;for(var z=$.length,q=F.length,ee=0,ae=Math.min(z,q);ee<ae;++ee)if($[ee]!==F[ee]){z=$[ee],q=F[ee];break}return z<q?-1:q<z?1:0},p.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function($,F){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return p.alloc(0);if(F===void 0)for(ee=F=0;ee<$.length;++ee)F+=$[ee].length;for(var z=p.allocUnsafe(F),q=0,ee=0;ee<$.length;++ee){var ae=$[ee];if(Y(ae,Uint8Array)&&(ae=p.from(ae)),!p.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(z,q),q+=ae.length}return z},p.byteLength=x,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<$;F+=2)w(this,F,F+1);return this},p.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<$;F+=4)w(this,F,F+3),w(this,F+1,F+2);return this},p.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<$;F+=8)w(this,F,F+7),w(this,F+1,F+6),w(this,F+2,F+5),w(this,F+3,F+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?A(this,0,$):v.apply(this,arguments)},p.prototype.equals=function($){if(p.isBuffer($))return this===$||p.compare(this,$)===0;throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var F="",$=s.INSPECT_MAX_BYTES,F=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim();return this.length>$&&(F+=" ... "),"<Buffer "+F+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function($,F,z,q,ee){if(Y($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),!p.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(z===void 0&&(z=$?$.length:0),q===void 0&&(q=0),ee===void 0&&(ee=this.length),(F=F===void 0?0:F)<0||z>$.length||q<0||ee>this.length)throw new RangeError("out of range index");if(ee<=q&&z<=F)return 0;if(ee<=q)return-1;if(z<=F)return 1;if(this===$)return 0;for(var ae=(ee>>>=0)-(q>>>=0),Q=(z>>>=0)-(F>>>=0),le=Math.min(ae,Q),ie=this.slice(q,ee),Z=$.slice(F,z),ge=0;ge<le;++ge)if(ie[ge]!==Z[ge]){ae=ie[ge],Q=Z[ge];break}return ae<Q?-1:Q<ae?1:0},p.prototype.includes=function($,F,z){return this.indexOf($,F,z)!==-1},p.prototype.indexOf=function($,F,z){return _(this,$,F,z,!0)},p.prototype.lastIndexOf=function($,F,z){return _(this,$,F,z,!1)},p.prototype.write=function($,F,z,q){if(F===void 0)q="utf8",z=this.length,F=0;else if(z===void 0&&typeof F=="string")q=F,z=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(z)?(z>>>=0,q===void 0&&(q="utf8")):(q=z,z=void 0)}var ee=this.length-F;if((z===void 0||ee<z)&&(z=ee),0<$.length&&(z<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");q=q||"utf8";for(var ae,Q,le,ie=!1;;)switch(q){case"hex":var Z=this,ge=$,ne=F,ye=z,xe=(ne=Number(ne)||0,Z.length-ne);(!ye||xe<(ye=Number(ye)))&&(ye=xe),(xe=ge.length)/2<ye&&(ye=xe/2);for(var Ne=0;Ne<ye;++Ne){var Ae=parseInt(ge.substr(2*Ne,2),16);if(X(Ae))return Ne;Z[ne+Ne]=Ae}return Ne;case"utf8":case"utf-8":return xe=F,le=z,U(V($,(Q=this).length-xe),Q,xe,le);case"ascii":return S(this,$,F,z);case"latin1":case"binary":return S(this,$,F,z);case"base64":return Q=this,le=F,ae=z,U(G($),Q,le,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,$,F,z);default:if(ie)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),ie=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function k($,F,z){if($%1!=0||$<0)throw new RangeError("offset is not uint");if(z<$+F)throw new RangeError("Trying to access beyond buffer length")}function M($,F,z,q,ee,ae){if(!p.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee<F||F<ae)throw new RangeError('"value" argument is out of bounds');if(z+q>$.length)throw new RangeError("Index out of range")}function I($,F,z,q){if(z+q>$.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function L($,F,z,q,ee){return F=+F,z>>>=0,ee||I($,0,z,4),u.write($,F,z,q,23,4),z+4}function P($,F,z,q,ee){return F=+F,z>>>=0,ee||I($,0,z,8),u.write($,F,z,q,52,8),z+8}p.prototype.slice=function($,F){var z=this.length,z=(($=~~$)<0?($+=z)<0&&($=0):z<$&&($=z),(F=F===void 0?z:~~F)<0?(F+=z)<0&&(F=0):z<F&&(F=z),F<$&&(F=$),this.subarray($,F));return Object.setPrototypeOf(z,p.prototype),z},p.prototype.readUIntLE=function($,F,z){$>>>=0,F>>>=0,z||k($,F,this.length);for(var q=this[$],ee=1,ae=0;++ae<F&&(ee*=256);)q+=this[$+ae]*ee;return q},p.prototype.readUIntBE=function($,F,z){$>>>=0,F>>>=0,z||k($,F,this.length);for(var q=this[$+--F],ee=1;0<F&&(ee*=256);)q+=this[$+--F]*ee;return q},p.prototype.readUInt8=function($,F){return $>>>=0,F||k($,1,this.length),this[$]},p.prototype.readUInt16LE=function($,F){return $>>>=0,F||k($,2,this.length),this[$]|this[$+1]<<8},p.prototype.readUInt16BE=function($,F){return $>>>=0,F||k($,2,this.length),this[$]<<8|this[$+1]},p.prototype.readUInt32LE=function($,F){return $>>>=0,F||k($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},p.prototype.readUInt32BE=function($,F){return $>>>=0,F||k($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},p.prototype.readIntLE=function($,F,z){$>>>=0,F>>>=0,z||k($,F,this.length);for(var q=this[$],ee=1,ae=0;++ae<F&&(ee*=256);)q+=this[$+ae]*ee;return(ee*=128)<=q&&(q-=Math.pow(2,8*F)),q},p.prototype.readIntBE=function($,F,z){$>>>=0,F>>>=0,z||k($,F,this.length);for(var q=F,ee=1,ae=this[$+--q];0<q&&(ee*=256);)ae+=this[$+--q]*ee;return(ee*=128)<=ae&&(ae-=Math.pow(2,8*F)),ae},p.prototype.readInt8=function($,F){return $>>>=0,F||k($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},p.prototype.readInt16LE=function($,F){return $>>>=0,F||k($,2,this.length),F=this[$]|this[$+1]<<8,32768&F?4294901760|F:F},p.prototype.readInt16BE=function($,F){return $>>>=0,F||k($,2,this.length),F=this[$+1]|this[$]<<8,32768&F?4294901760|F:F},p.prototype.readInt32LE=function($,F){return $>>>=0,F||k($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},p.prototype.readInt32BE=function($,F){return $>>>=0,F||k($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},p.prototype.readFloatLE=function($,F){return $>>>=0,F||k($,4,this.length),u.read(this,$,!0,23,4)},p.prototype.readFloatBE=function($,F){return $>>>=0,F||k($,4,this.length),u.read(this,$,!1,23,4)},p.prototype.readDoubleLE=function($,F){return $>>>=0,F||k($,8,this.length),u.read(this,$,!0,52,8)},p.prototype.readDoubleBE=function($,F){return $>>>=0,F||k($,8,this.length),u.read(this,$,!1,52,8)},p.prototype.writeUIntLE=function($,F,z,q){$=+$,F>>>=0,z>>>=0,q||M(this,$,F,z,Math.pow(2,8*z)-1,0);var ee=1,ae=0;for(this[F]=255&$;++ae<z&&(ee*=256);)this[F+ae]=$/ee&255;return F+z},p.prototype.writeUIntBE=function($,F,z,q){$=+$,F>>>=0,z>>>=0,q||M(this,$,F,z,Math.pow(2,8*z)-1,0);var ee=z-1,ae=1;for(this[F+ee]=255&$;0<=--ee&&(ae*=256);)this[F+ee]=$/ae&255;return F+z},p.prototype.writeUInt8=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,1,255,0),this[F]=255&$,F+1},p.prototype.writeUInt16LE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,2,65535,0),this[F]=255&$,this[F+1]=$>>>8,F+2},p.prototype.writeUInt16BE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,2,65535,0),this[F]=$>>>8,this[F+1]=255&$,F+2},p.prototype.writeUInt32LE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,4,4294967295,0),this[F+3]=$>>>24,this[F+2]=$>>>16,this[F+1]=$>>>8,this[F]=255&$,F+4},p.prototype.writeUInt32BE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,4,4294967295,0),this[F]=$>>>24,this[F+1]=$>>>16,this[F+2]=$>>>8,this[F+3]=255&$,F+4},p.prototype.writeIntLE=function($,F,z,q){$=+$,F>>>=0,q||M(this,$,F,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=0,ae=1,Q=0;for(this[F]=255&$;++ee<z&&(ae*=256);)$<0&&Q===0&&this[F+ee-1]!==0&&(Q=1),this[F+ee]=($/ae>>0)-Q&255;return F+z},p.prototype.writeIntBE=function($,F,z,q){$=+$,F>>>=0,q||M(this,$,F,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=z-1,ae=1,Q=0;for(this[F+ee]=255&$;0<=--ee&&(ae*=256);)$<0&&Q===0&&this[F+ee+1]!==0&&(Q=1),this[F+ee]=($/ae>>0)-Q&255;return F+z},p.prototype.writeInt8=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,1,127,-128),this[F]=255&($=$<0?255+$+1:$),F+1},p.prototype.writeInt16LE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,2,32767,-32768),this[F]=255&$,this[F+1]=$>>>8,F+2},p.prototype.writeInt16BE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,2,32767,-32768),this[F]=$>>>8,this[F+1]=255&$,F+2},p.prototype.writeInt32LE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,4,2147483647,-2147483648),this[F]=255&$,this[F+1]=$>>>8,this[F+2]=$>>>16,this[F+3]=$>>>24,F+4},p.prototype.writeInt32BE=function($,F,z){return $=+$,F>>>=0,z||M(this,$,F,4,2147483647,-2147483648),this[F]=($=$<0?4294967295+$+1:$)>>>24,this[F+1]=$>>>16,this[F+2]=$>>>8,this[F+3]=255&$,F+4},p.prototype.writeFloatLE=function($,F,z){return L(this,$,F,!0,z)},p.prototype.writeFloatBE=function($,F,z){return L(this,$,F,!1,z)},p.prototype.writeDoubleLE=function($,F,z){return P(this,$,F,!0,z)},p.prototype.writeDoubleBE=function($,F,z){return P(this,$,F,!1,z)},p.prototype.copy=function($,F,z,q){if(!p.isBuffer($))throw new TypeError("argument should be a Buffer");if(z=z||0,q||q===0||(q=this.length),F>=$.length&&(F=$.length),(q=0<q&&q<z?z:q)===z||$.length===0||this.length===0)return 0;if((F=F||0)<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length);var ee=(q=$.length-F<q-z?$.length-F+z:q)-z;if(this===$&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(F,z,q);else if(this===$&&z<F&&F<q)for(var ae=ee-1;0<=ae;--ae)$[ae+F]=this[ae+z];else Uint8Array.prototype.set.call($,this.subarray(z,q),F);return ee},p.prototype.fill=function($,F,z,q){if(typeof $=="string"){if(typeof F=="string"?(q=F,F=0,z=this.length):typeof z=="string"&&(q=z,z=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!p.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var ee;$.length===1&&(ee=$.charCodeAt(0),(q==="utf8"&&ee<128||q==="latin1")&&($=ee))}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(F<0||this.length<F||this.length<z)throw new RangeError("Out of range index");var ae;if(!(z<=F))if(F>>>=0,z=z===void 0?this.length:z>>>0,typeof($=$||0)=="number")for(ae=F;ae<z;++ae)this[ae]=$;else{var Q=p.isBuffer($)?$:p.from($,q),le=Q.length;if(le===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ae=0;ae<z-F;++ae)this[ae+F]=Q[ae%le]}return this};var R=/[^+/0-9A-Za-z-_]/g;function V($,F){F=F||1/0;for(var z,q=$.length,ee=null,ae=[],Q=0;Q<q;++Q){if(55295<(z=$.charCodeAt(Q))&&z<57344){if(!ee){if(56319<z){-1<(F-=3)&&ae.push(239,191,189);continue}if(Q+1===q){-1<(F-=3)&&ae.push(239,191,189);continue}ee=z;continue}if(z<56320){-1<(F-=3)&&ae.push(239,191,189),ee=z;continue}z=65536+(ee-55296<<10|z-56320)}else ee&&-1<(F-=3)&&ae.push(239,191,189);if(ee=null,z<128){if(--F<0)break;ae.push(z)}else if(z<2048){if((F-=2)<0)break;ae.push(z>>6|192,63&z|128)}else if(z<65536){if((F-=3)<0)break;ae.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((F-=4)<0)break;ae.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ae}function G($){return l.toByteArray(function(F){if((F=(F=F.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}($))}function U($,F,z,q){for(var ee=0;ee<q&&!(ee+z>=F.length||ee>=$.length);++ee)F[ee+z]=$[ee];return ee}function Y($,F){return $ instanceof F||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===F.name}function X($){return $!=$}var pe=function(){for(var $="0123456789abcdef",F=new Array(256),z=0;z<16;++z)for(var q=16*z,ee=0;ee<16;++ee)F[q+ee]=$[z]+$[ee];return F}()}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(o,i,s){i.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l)||l===null)return l;throw TypeError("Can't set "+String(l)+" as a prototype")}},{"../internals/is-object":75}],7:[function(u,i,s){var a=u("../internals/well-known-symbol"),l=u("../internals/object-create"),u=u("../internals/object-define-property"),c=a("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),i.exports=function(d){f[c][d]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(o,i,s){"use strict";var a=o("../internals/string-multibyte").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},{"../internals/string-multibyte":124}],9:[function(o,i,s){i.exports=function(a,l,u){if(a instanceof l)return a;throw TypeError("Incorrect "+(u?u+" ":"")+"invocation")}},{}],10:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l))return l;throw TypeError(String(l)+" is not an object")}},{"../internals/is-object":75}],11:[function(o,i,s){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(I,i,s){"use strict";function a(P){return d(P)&&p(L,m(P))}var l,u=I("../internals/array-buffer-native"),c=I("../internals/descriptors"),f=I("../internals/global"),d=I("../internals/is-object"),p=I("../internals/has"),m=I("../internals/classof"),h=I("../internals/create-non-enumerable-property"),g=I("../internals/redefine"),y=I("../internals/object-define-property").f,b=I("../internals/object-get-prototype-of"),x=I("../internals/object-set-prototype-of"),N=I("../internals/well-known-symbol"),I=I("../internals/uid"),v=f.Int8Array,w=v&&v.prototype,_=f.Uint8ClampedArray,_=_&&_.prototype,C=v&&b(v),S=w&&b(w),E=Object.prototype,A=E.isPrototypeOf,N=N("toStringTag"),k=I("TYPED_ARRAY_TAG"),M=u&&!!x&&m(f.opera)!=="Opera",I=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(l in L)f[l]||(M=!1);if((!M||typeof C!="function"||C===Function.prototype)&&(C=function(){throw TypeError("Incorrect invocation")},M))for(l in L)f[l]&&x(f[l],C);if((!M||!S||S===E)&&(S=C.prototype,M))for(l in L)f[l]&&x(f[l].prototype,S);if(M&&b(_)!==S&&x(_,S),c&&!p(S,N))for(l in I=!0,y(S,N,{get:function(){return d(this)?this[k]:void 0}}),L)f[l]&&h(f[l],k,l);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:I&&k,aTypedArray:function(P){if(a(P))return P;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(P){if(x){if(A.call(C,P))return P}else for(var R in L)if(p(L,l)&&(R=f[R],R&&(P===R||A.call(R,P))))return P;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(P,R,V){if(c){if(V)for(var G in L)G=f[G],G&&p(G.prototype,P)&&delete G.prototype[P];S[P]&&!V||g(S,P,!V&&M&&w[P]||R)}},exportTypedArrayStaticMethod:function(P,R,V){var G,U;if(c){if(x){if(V)for(G in L)(U=f[G])&&p(U,P)&&delete U[P];if(C[P]&&!V)return;try{return g(C,P,!V&&M&&v[P]||R)}catch{}}for(G in L)!(U=f[G])||U[P]&&!V||g(U,P,R)}},isView:function(P){return P=m(P),P==="DataView"||p(L,P)},isTypedArray:a,TypedArray:C,TypedArrayPrototype:S}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(z,i,s){"use strict";function a(ne){return[255&ne]}function l(ne){return[255&ne,ne>>8&255]}function u(ne){return[255&ne,ne>>8&255,ne>>16&255,ne>>24&255]}function c(ne){return ne[3]<<24|ne[2]<<16|ne[1]<<8|ne[0]}function f(ne){return ae(ne,23,4)}function d(ne){return ae(ne,52,8)}function p(ne,ye){I(ne[Y],ye,{get:function(){return R(this)[ye]}})}function m(ze,ye,Me,Ne){if(Me=E(Me),ze=R(ze),Me+ye>ze.byteLength)throw ee(X);var Ae=R(ze.buffer).bytes,Me=Me+ze.byteOffset,ze=Ae.slice(Me,Me+ye);return Ne?ze:ze.reverse()}function h(ne,ye,xe,Ne,Ae,Me){if(xe=E(xe),ne=R(ne),xe+ye>ne.byteLength)throw ee(X);for(var ze=R(ne.buffer).bytes,lt=xe+ne.byteOffset,We=Ne(+Ae),Bt=0;Bt<ye;Bt++)ze[lt+Bt]=We[Me?Bt:ye-Bt-1]}var g=z("../internals/global"),y=z("../internals/descriptors"),b=z("../internals/array-buffer-native"),x=z("../internals/create-non-enumerable-property"),v=z("../internals/redefine-all"),w=z("../internals/fails"),_=z("../internals/an-instance"),C=z("../internals/to-integer"),S=z("../internals/to-length"),E=z("../internals/to-index"),A=z("../internals/ieee754"),N=z("../internals/object-get-prototype-of"),k=z("../internals/object-set-prototype-of"),M=z("../internals/object-get-own-property-names").f,I=z("../internals/object-define-property").f,L=z("../internals/array-fill"),P=z("../internals/set-to-string-tag"),z=z("../internals/internal-state"),R=z.get,V=z.set,G="ArrayBuffer",U="DataView",Y="prototype",X="Wrong index",pe=g[G],$=pe,F=g[U],z=F&&F[Y],q=Object.prototype,ee=g.RangeError,ae=A.pack,Q=A.unpack;if(b){if(!w(function(){pe(1)})||!w(function(){new pe(-1)})||w(function(){return new pe,new pe(1.5),new pe(NaN),pe.name!=G})){for(var le,g=($=function(xe){return _(this,$),new pe(E(xe))})[Y]=pe[Y],ie=M(pe),Z=0;ie.length>Z;)(le=ie[Z++])in $||x($,le,pe[le]);g.constructor=$}k&&N(z)!==q&&k(z,q);var A=new F(new $(2)),ge=z.setInt8;A.setInt8(0,2147483648),A.setInt8(1,2147483649),!A.getInt8(0)&&A.getInt8(1)||v(z,{setInt8:function(ye,xe){ge.call(this,ye,xe<<24>>24)},setUint8:function(ye,xe){ge.call(this,ye,xe<<24>>24)}},{unsafe:!0})}else $=function(ne){_(this,$,G),ne=E(ne),V(this,{bytes:L.call(new Array(ne),0),byteLength:ne}),y||(this.byteLength=ne)},F=function(ne,Ae,xe){_(this,F,U),_(ne,$,U);var Ne=R(ne).byteLength,Ae=C(Ae);if(Ae<0||Ne<Ae)throw ee("Wrong offset");if(Ne<Ae+(xe=xe===void 0?Ne-Ae:S(xe)))throw ee("Wrong length");V(this,{buffer:ne,byteLength:xe,byteOffset:Ae}),y||(this.buffer=ne,this.byteLength=xe,this.byteOffset=Ae)},y&&(p($,"byteLength"),p(F,"buffer"),p(F,"byteLength"),p(F,"byteOffset")),v(F[Y],{getInt8:function(ne){return m(this,1,ne)[0]<<24>>24},getUint8:function(ne){return m(this,1,ne)[0]},getInt16:function(ne){return ne=m(this,2,ne,1<arguments.length?arguments[1]:void 0),(ne[1]<<8|ne[0])<<16>>16},getUint16:function(ne){return ne=m(this,2,ne,1<arguments.length?arguments[1]:void 0),ne[1]<<8|ne[0]},getInt32:function(ne){return c(m(this,4,ne,1<arguments.length?arguments[1]:void 0))},getUint32:function(ne){return c(m(this,4,ne,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ne){return Q(m(this,4,ne,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ne){return Q(m(this,8,ne,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ne,ye){h(this,1,ne,a,ye)},setUint8:function(ne,ye){h(this,1,ne,a,ye)},setInt16:function(ne,ye){h(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setUint16:function(ne,ye){h(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setInt32:function(ne,ye){h(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setUint32:function(ne,ye){h(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ne,ye){h(this,4,ne,f,ye,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ne,ye){h(this,8,ne,d,ye,2<arguments.length?arguments[2]:void 0)}});P($,G),P(F,U),i.exports={ArrayBuffer:$,DataView:F}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length"),c=Math.min;i.exports=[].copyWithin||function(y,d){var p=a(this),m=u(p.length),h=l(y,m),g=l(d,m),y=2<arguments.length?arguments[2]:void 0,b=c((y===void 0?m:l(y,m))-g,m-h),x=1;for(g<h&&h<g+b&&(x=-1,g+=b-1,h+=b-1);0<b--;)g in p?p[h]=p[g]:delete p[h],h+=x,g+=x;return p}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length");i.exports=function(c){for(var f=a(this),d=u(f.length),m=arguments.length,p=l(1<m?arguments[1]:void 0,d),m=2<m?arguments[2]:void 0,h=m===void 0?d:l(m,d);p<h;)f[p++]=c;return f}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(u,i,s){"use strict";var a=u("../internals/array-iteration").forEach,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("forEach"),u=u("forEach");i.exports=l&&u?[].forEach:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(o,i,s){"use strict";var a=o("../internals/function-bind-context"),l=o("../internals/to-object"),u=o("../internals/call-with-safe-iteration-closing"),c=o("../internals/is-array-iterator-method"),f=o("../internals/to-length"),d=o("../internals/create-property"),p=o("../internals/get-iterator-method");i.exports=function(_){var h,g,y,b,x,v,w=l(_),_=typeof this=="function"?this:Array,C=arguments.length,S=1<C?arguments[1]:void 0,E=S!==void 0,A=p(w),N=0;if(E&&(S=a(S,2<C?arguments[2]:void 0,2)),A==null||_==Array&&c(A))for(g=new _(h=f(w.length));N<h;N++)v=E?S(w[N],N):w[N],d(g,N,v);else for(x=(b=A.call(w)).next,g=new _;!(y=x.call(b)).done;N++)v=E?u(b,S,[y.value,N],!0):y.value,d(g,N,v);return g.length=N,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(o,i,s){function a(f){return function(d,p,m){var h,g=l(d),y=u(g.length),b=c(m,y);if(f&&p!=p){for(;b<y;)if((h=g[b++])!=h)return!0}else for(;b<y;b++)if((f||b in g)&&g[b]===p)return f||b||0;return!f&&-1}}var l=o("../internals/to-indexed-object"),u=o("../internals/to-length"),c=o("../internals/to-absolute-index");i.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(o,i,s){function a(m){var h=m==1,g=m==2,y=m==3,b=m==4,x=m==6,v=m==5||x;return function(w,_,C,S){for(var E,A,N=c(w),k=u(N),M=l(_,C,3),I=f(k.length),L=0,_=S||d,P=h?_(w,I):g?_(w,0):void 0;L<I;L++)if((v||L in k)&&(A=M(E=k[L],L,N),m)){if(h)P[L]=A;else if(A)switch(m){case 3:return!0;case 5:return E;case 6:return L;case 2:p.call(P,E)}else if(b)return!1}return x?-1:y||b?b:P}}var l=o("../internals/function-bind-context"),u=o("../internals/indexed-object"),c=o("../internals/to-object"),f=o("../internals/to-length"),d=o("../internals/array-species-create"),p=[].push;i.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(m,i,s){"use strict";var a=m("../internals/to-indexed-object"),l=m("../internals/to-integer"),u=m("../internals/to-length"),p=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),c=Math.min,f=[].lastIndexOf,d=!!f&&1/[1].lastIndexOf(1,-0)<0,p=p("lastIndexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});i.exports=d||!p||!m?function(h){if(d)return f.apply(this,arguments)||0;var g=a(this),y=u(g.length),b=y-1;for((b=1<arguments.length?c(b,l(arguments[1])):b)<0&&(b=y+b);0<=b;b--)if(b in g&&g[b]===h)return b||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/engine-v8-version"),c=l("species");i.exports=function(f){return 51<=u||!a(function(){var d=[];return(d.constructor={})[c]=function(){return{foo:1}},d[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(o,i,s){"use strict";var a=o("../internals/fails");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(o,i,s){function a(p){throw p}var l=o("../internals/descriptors"),u=o("../internals/fails"),c=o("../internals/has"),f=Object.defineProperty,d={};i.exports=function(p,m){var h,g,y,b;return c(d,p)?d[p]:(h=[][p],g=!!c(m=m||{},"ACCESSORS")&&m.ACCESSORS,y=c(m,0)?m[0]:a,b=c(m,1)?m[1]:void 0,d[p]=!!h&&!u(function(){if(g&&!l)return!0;var x={length:-1};g?f(x,1,{enumerable:!0,get:a}):x[1]=1,h.call(x,y,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(o,i,s){function a(d){return function(p,m,h,g){l(m);var y=u(p),b=c(y),x=f(y.length),v=d?x-1:0,w=d?-1:1;if(h<2)for(;;){if(v in b){g=b[v],v+=w;break}if(v+=w,d?v<0:x<=v)throw TypeError("Reduce of empty array with no initial value")}for(;d?0<=v:v<x;v+=w)v in b&&(g=m(g,b[v],v,y));return g}}var l=o("../internals/a-function"),u=o("../internals/to-object"),c=o("../internals/indexed-object"),f=o("../internals/to-length");i.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/is-array"),u=o("../internals/well-known-symbol")("species");i.exports=function(c,f){var d;return new((d=l(c)&&(typeof(d=c.constructor)=="function"&&(d===Array||l(d.prototype))||a(d)&&(d=d[u])===null)?void 0:d)===void 0?Array:d)(f===0?0:f)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(o,i,s){var a=o("../internals/an-object");i.exports=function(l,u,c,f){try{return f?u(a(c)[0],c[1]):u(c)}catch(d){throw f=l.return,f!==void 0&&a(f.call(l)),d}}},{"../internals/an-object":10}],27:[function(o,i,s){var a=o("../internals/well-known-symbol")("iterator"),l=!1;try{var u=0,c={next:function(){return{done:!!u++}},return:function(){l=!0}};c[a]=function(){return this},Array.from(c,function(){throw 2})}catch{}i.exports=function(f,d){if(!d&&!l)return!1;var p=!1;try{var m={};m[a]=function(){return{next:function(){return{done:p=!0}}}},f(m)}catch{}return p}},{"../internals/well-known-symbol":149}],28:[function(o,i,s){var a={}.toString;i.exports=function(l){return a.call(l).slice(8,-1)}},{}],29:[function(o,i,s){var a=o("../internals/to-string-tag-support"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("toStringTag"),c=l(function(){return arguments}())=="Arguments";i.exports=a?l:function(f){var d;return f===void 0?"Undefined":f===null?"Null":typeof(d=function(p,m){try{return p[m]}catch{}}(f=Object(f),u))=="string"?d:c?l(f):(d=l(f))=="Object"&&typeof f.callee=="function"?"Arguments":d}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(y,i,s){"use strict";var a=y("../internals/object-define-property").f,l=y("../internals/object-create"),u=y("../internals/redefine-all"),c=y("../internals/function-bind-context"),f=y("../internals/an-instance"),d=y("../internals/iterate"),p=y("../internals/define-iterator"),m=y("../internals/set-species"),h=y("../internals/descriptors"),g=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),b=y.set,x=y.getterFor;i.exports={getConstructor:function(v,w,_,C){function S(k,M,I){var L,P=N(k),R=E(k,M);return R?R.value=I:(P.last=R={index:L=g(M,!0),key:M,value:I,previous:M=P.last,next:void 0,removed:!1},P.first||(P.first=R),M&&(M.next=R),h?P.size++:k.size++,L!=="F"&&(P.index[L]=R)),k}function E(L,M){var I,L=N(L),P=g(M);if(P!=="F")return L.index[P];for(I=L.first;I;I=I.next)if(I.key==M)return I}var A=v(function(k,M){f(k,A,w),b(k,{type:w,index:l(null),first:void 0,last:void 0,size:0}),h||(k.size=0),M!=null&&d(M,k[C],k,_)}),N=x(w);return u(A.prototype,{clear:function(){for(var k=N(this),M=k.index,I=k.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=void 0),delete M[I.index],I=I.next;k.first=k.last=void 0,h?k.size=0:this.size=0},delete:function(P){var M,I,L=N(this),P=E(this,P);return P&&(M=P.next,I=P.previous,delete L.index[P.index],P.removed=!0,I&&(I.next=M),M&&(M.previous=I),L.first==P&&(L.first=M),L.last==P&&(L.last=I),h?L.size--:this.size--),!!P},forEach:function(k){for(var M,I=N(this),L=c(k,1<arguments.length?arguments[1]:void 0,3);M=M?M.next:I.first;)for(L(M.value,M.key,this);M&&M.removed;)M=M.previous},has:function(k){return!!E(this,k)}}),u(A.prototype,_?{get:function(k){return k=E(this,k),k&&k.value},set:function(k,M){return S(this,k===0?0:k,M)}}:{add:function(k){return S(this,k=k===0?0:k,k)}}),h&&a(A.prototype,"size",{get:function(){return N(this).size}}),A},setStrong:function(v,w,_){var C=w+" Iterator",S=x(w),E=x(C);p(v,w,function(A,N){b(this,{type:C,target:A,state:S(A),kind:N,last:void 0})},function(){for(var A=E(this),N=A.kind,k=A.last;k&&k.removed;)k=k.previous;return A.target&&(A.last=k=k?k.next:A.state.first)?N=="keys"?{value:k.key,done:!1}:N=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:A.target=void 0,done:!0}},_?"entries":"values",!_,!0),m(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(b,i,s){"use strict";function a(S){return S.frozen||(S.frozen=new l)}function l(){this.entries=[]}function u(S,E){return w(S.entries,function(A){return A[0]===E})}var c=b("../internals/redefine-all"),f=b("../internals/internal-metadata").getWeakData,d=b("../internals/an-object"),p=b("../internals/is-object"),m=b("../internals/an-instance"),h=b("../internals/iterate"),g=b("../internals/array-iteration"),y=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,v=b.getterFor,w=g.find,_=g.findIndex,C=0;l.prototype={get:function(S){if(S=u(this,S),S)return S[1]},has:function(S){return!!u(this,S)},set:function(S,E){var A=u(this,S);A?A[1]=E:this.entries.push([S,E])},delete:function(S){var E=_(this.entries,function(A){return A[0]===S});return~E&&this.entries.splice(E,1),!!~E}},i.exports={getConstructor:function(S,E,A,N){function k(L,P,R){var V=I(L),G=f(d(P),!0);return G===!0?a(V).set(P,R):G[V.id]=R,L}var M=S(function(L,P){m(L,M,E),x(L,{type:E,id:C++,frozen:void 0}),P!=null&&h(P,L[N],L,A)}),I=v(E);return c(M.prototype,{delete:function(L){var P,R=I(this);return!!p(L)&&((P=f(L))===!0?a(R).delete(L):P&&y(P,R.id)&&delete P[R.id])},has:function(L){var P,R=I(this);return!!p(L)&&((P=f(L))===!0?a(R).has(L):P&&y(P,R.id))}}),c(M.prototype,A?{get:function(L){var P,R=I(this);if(p(L))return(P=f(L))===!0?a(R).get(L):P?P[R.id]:void 0},set:function(L,P){return k(this,L,P)}}:{add:function(L){return k(this,L,!0)}}),M}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/redefine"),f=o("../internals/internal-metadata"),d=o("../internals/iterate"),p=o("../internals/an-instance"),m=o("../internals/is-object"),h=o("../internals/fails"),g=o("../internals/check-correctness-of-iteration"),y=o("../internals/set-to-string-tag"),b=o("../internals/inherit-if-required");i.exports=function(x,v,w){function _(G){var U=P[G];c(P,G,G=="add"?function(Y){return U.call(this,Y===0?0:Y),this}:G=="delete"?function(Y){return!(M&&!m(Y))&&U.call(this,Y===0?0:Y)}:G=="get"?function(Y){return M&&!m(Y)?void 0:U.call(this,Y===0?0:Y)}:G=="has"?function(Y){return!(M&&!m(Y))&&U.call(this,Y===0?0:Y)}:function(Y,X){return U.call(this,Y===0?0:Y,X),this})}var C,S,E,A,N,k=x.indexOf("Map")!==-1,M=x.indexOf("Weak")!==-1,I=k?"set":"add",L=l[x],P=L&&L.prototype,R=L,V={};return u(x,typeof L!="function"||!(M||P.forEach&&!h(function(){new L().entries().next()})))?(R=w.getConstructor(v,x,k,I),f.REQUIRED=!0):u(x,!0)&&(S=(C=new R)[I](M?{}:-0,1)!=C,E=h(function(){C.has(1)}),A=g(function(G){new L(G)}),N=!M&&h(function(){for(var G=new L,U=5;U--;)G[I](U,U);return!G.has(-0)}),A||(((R=v(function(G,U){return p(G,R,x),G=b(new L,G,R),U!=null&&d(U,G[I],G,k),G})).prototype=P).constructor=R),(E||N)&&(_("delete"),_("has"),k&&_("get")),(N||S)&&_(I),M&&P.clear&&delete P.clear),V[x]=R,a({global:!0,forced:R!=L},V),y(R,x),M||w.setStrong(R,x,k),R}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/own-keys"),u=o("../internals/object-get-own-property-descriptor"),c=o("../internals/object-define-property");i.exports=function(f,d){for(var p=l(d),m=c.f,h=u.f,g=0;g<p.length;g++){var y=p[g];a(f,y)||m(f,y,h(d,y))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(o,i,s){var a=o("../internals/well-known-symbol")("match");i.exports=function(l){var u=/./;try{"/./"[l](u)}catch{try{return u[a]=!1,"/./"[l](u)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(o,i,s){var a=o("../internals/require-object-coercible"),l=/"/g;i.exports=function(p,c,f,d){var p=String(a(p)),m="<"+c;return f!==""&&(m+=" "+f+'="'+String(d).replace(l,"&quot;")+'"'),m+">"+p+"</"+c+">"}},{"../internals/require-object-coercible":114}],37:[function(o,i,s){"use strict";function a(){return this}var l=o("../internals/iterators-core").IteratorPrototype,u=o("../internals/object-create"),c=o("../internals/create-property-descriptor"),f=o("../internals/set-to-string-tag"),d=o("../internals/iterators");i.exports=function(p,m,h){return m+=" Iterator",p.prototype=u(l,{next:c(1,h)}),f(p,m,!1,!0),d[m]=a,p}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=a?function(c,f,d){return l.f(c,f,u(1,d))}:function(c,f,d){return c[f]=d,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(o,i,s){i.exports=function(a,l){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:l}}},{}],40:[function(o,i,s){"use strict";var a=o("../internals/to-primitive"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=function(c,f,d){f=a(f),f in c?l.f(c,f,u(0,d)):c[f]=d}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(b,i,s){"use strict";function a(){return this}var l=b("../internals/export"),u=b("../internals/create-iterator-constructor"),c=b("../internals/object-get-prototype-of"),f=b("../internals/object-set-prototype-of"),d=b("../internals/set-to-string-tag"),p=b("../internals/create-non-enumerable-property"),m=b("../internals/redefine"),h=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),y=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,v=b.BUGGY_SAFARI_ITERATORS,w=h("iterator"),_="values",C="entries";i.exports=function(S,E,A,V,k,M,I){u(A,E,V);function L($){if($===k&&X)return X;if(!v&&$ in U)return U[$];switch($){case"keys":case _:case C:return function(){return new A(this,$)}}return function(){return new A(this)}}var P,R,V=E+" Iterator",G=!1,U=S.prototype,Y=U[w]||U["@@iterator"]||k&&U[k],X=!v&&Y||L(k),pe=E=="Array"&&U.entries||Y;if(pe&&(pe=c(pe.call(new S)),x!==Object.prototype&&pe.next&&(g||c(pe)===x||(f?f(pe,x):typeof pe[w]!="function"&&p(pe,w,a)),d(pe,V,!0,!0),g&&(y[V]=a))),k==_&&Y&&Y.name!==_&&(G=!0,X=function(){return Y.call(this)}),g&&!I||U[w]===X||p(U,w,X),y[E]=X,k)if(P={values:L(_),keys:M?X:L("keys"),entries:L(C)},I)for(R in P)!v&&!G&&R in U||m(U,R,P[R]);else l({target:E,proto:!0,forced:v||G},P);return P}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(o,i,s){var a=o("../internals/path"),l=o("../internals/has"),u=o("../internals/well-known-symbol-wrapped"),c=o("../internals/object-define-property").f;i.exports=function(f){var d=a.Symbol||(a.Symbol={});l(d,f)||c(d,f,{value:u.f(f)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(l,i,s){var a=l("../internals/global"),l=l("../internals/is-object"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(f){return c?u.createElement(f):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(o,i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(o)},{"../internals/engine-user-agent":47}],47:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(u,i,s){var a,l,c=u("../internals/global"),u=u("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?l=(a=c.split("."))[0]+a[1]:u&&(!(a=u.match(/Edge\/(\d+)/))||74<=a[1])&&(a=u.match(/Chrome\/(\d+)/))&&(l=a[1]),i.exports=l&&+l},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(o,i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/object-get-own-property-descriptor").f,u=o("../internals/create-non-enumerable-property"),c=o("../internals/redefine"),f=o("../internals/set-global"),d=o("../internals/copy-constructor-properties"),p=o("../internals/is-forced");i.exports=function(m,h){var g,y,b,x=m.target,v=m.global,w=m.stat,_=v?a:w?a[x]||f(x,{}):(a[x]||{}).prototype;if(_)for(g in h){if(y=h[g],b=m.noTargetGet?(b=l(_,g))&&b.value:_[g],!p(v?g:x+(w?".":"#")+g,m.forced)&&b!==void 0){if(typeof y==typeof b)continue;d(y,b)}(m.sham||b&&b.sham)&&u(y,"sham",!0),c(_,g,y,m)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(o,i,s){i.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(h,i,s){"use strict";h("../modules/es.regexp.exec");var a=h("../internals/redefine"),l=h("../internals/fails"),u=h("../internals/well-known-symbol"),c=h("../internals/regexp-exec"),f=h("../internals/create-non-enumerable-property"),d=u("species"),p=!l(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),m="a".replace(/./,"$0")==="$0",h=u("replace"),g=!!/./[h]&&/./[h]("a","$0")==="",y=!l(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});i.exports=function(b,x,v,w){var _,C,S=u(b),E=!l(function(){var N={};return N[S]=function(){return 7},""[b](N)!=7}),A=E&&!l(function(){var N=!1,k=/a/;return b==="split"&&((k={constructor:{}}).constructor[d]=function(){return k},k.flags="",k[S]=/./[S]),k.exec=function(){return N=!0,null},k[S](""),!N});E&&A&&(b!=="replace"||p&&m&&!g)&&(b!=="split"||y)||(_=/./[S],v=(A=v(S,""[b],function(N,k,M,I,L){return k.exec===c?E&&!L?{done:!0,value:_.call(k,M,I)}:{done:!0,value:N.call(M,k,I)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],C=A[1],a(String.prototype,b,v),a(RegExp.prototype,S,x==2?function(N,k){return C.call(N,this,k)}:function(N){return C.call(N,this)})),w&&f(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(o,i,s){"use strict";function a(f,d,p,m,h,g,y,b){for(var x,v=h,w=0,_=!!y&&c(y,b,3);w<m;){if(w in p){if(x=_?_(p[w],w,d):p[w],0<g&&l(x))v=a(f,d,x,u(x.length),v,g-1)-1;else{if(9007199254740991<=v)throw TypeError("Exceed the acceptable array length");f[v]=x}v++}w++}return v}var l=o("../internals/is-array"),u=o("../internals/to-length"),c=o("../internals/function-bind-context");i.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(o,i,s){var a=o("../internals/a-function");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,d){return l.call(u,f,d)};case 3:return function(f,d,p){return l.call(u,f,d,p)}}return function(){return l.apply(u,arguments)}}},{"../internals/a-function":5}],56:[function(o,i,s){"use strict";var a=o("../internals/a-function"),l=o("../internals/is-object"),u=[].slice,c={};i.exports=Function.bind||function(f){var d=a(this),p=u.call(arguments,1),m=function(){var h=p.concat(u.call(arguments));if(this instanceof m){var g=d,y=h.length,b=h;if(!(y in c)){for(var x=[],v=0;v<y;v++)x[v]="a["+v+"]";c[y]=Function("C,a","return new C("+x.join(",")+")")}return c[y](g,b)}return d.apply(f,h)};return l(d.prototype)&&(m.prototype=d.prototype),m}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(o,i,s){function a(c){return typeof c=="function"?c:void 0}var l=o("../internals/path"),u=o("../internals/global");i.exports=function(c,f){return arguments.length<2?a(l[c])||a(u[c]):l[c]&&l[c][f]||u[c]&&u[c][f]}},{"../internals/global":60,"../internals/path":105}],58:[function(o,i,s){var a=o("../internals/classof"),l=o("../internals/iterators"),u=o("../internals/well-known-symbol")("iterator");i.exports=function(c){if(c!=null)return c[u]||c["@@iterator"]||l[a(c)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/get-iterator-method");i.exports=function(u){var c=l(u);if(typeof c!="function")throw TypeError(String(u)+" is not iterable");return a(c.call(u))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(o,i,s){(function(a){function l(u){return u&&u.Math==Math&&u}i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(o,i,s){var a={}.hasOwnProperty;i.exports=function(l,u){return a.call(l,u)}},{}],62:[function(o,i,s){i.exports={}},{}],63:[function(o,i,s){var a=o("../internals/global");i.exports=function(l,u){var c=a.console;c&&c.error&&(arguments.length===1?c.error(l):c.error(l,u))}},{"../internals/global":60}],64:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("document","documentElement")},{"../internals/get-built-in":57}],65:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/document-create-element");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(o,i,s){var a=Math.abs,l=Math.pow,u=Math.floor,c=Math.log,f=Math.LN2;i.exports={pack:function(d,p,v){var h,g,y,b=new Array(v),x=8*v-p-1,v=(1<<x)-1,w=v>>1,_=p===23?l(2,-24)-l(2,-77):0,C=d<0||d===0&&1/d<0?1:0,S=0;for((d=a(d))!=d||d===1/0?(g=d!=d?1:0,h=v):(h=u(c(d)/f),d*(y=l(2,-h))<1&&(h--,y*=2),2<=(d+=1<=h+w?_/y:_*l(2,1-w))*y&&(h++,y/=2),v<=h+w?(g=0,h=v):1<=h+w?(g=(d*y-1)*l(2,p),h+=w):(g=d*l(2,w-1)*l(2,p),h=0));8<=p;b[S++]=255&g,g/=256,p-=8);for(h=h<<p|g,x+=p;0<x;b[S++]=255&h,h/=256,x-=8);return b[--S]|=128*C,b},unpack:function(d,p){var m,h=d.length,v=8*h-p-1,g=(1<<v)-1,y=g>>1,b=v-7,x=h-1,v=d[x--],w=127&v;for(v>>=7;0<b;w=256*w+d[x],x--,b-=8);for(m=w&(1<<-b)-1,w>>=-b,b+=p;0<b;m=256*m+d[x],x--,b-=8);if(w===0)w=1-y;else{if(w===g)return m?NaN:v?-1/0:1/0;m+=l(2,p),w-=y}return(v?-1:1)*m*l(2,w-p)}}},{}],67:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/classof-raw"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/object-set-prototype-of");i.exports=function(u,c,f){return l&&typeof(c=c.constructor)=="function"&&c!==f&&a(c=c.prototype)&&c!==f.prototype&&l(u,c),u}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,i,s){var a=a("../internals/shared-store"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},{"../internals/shared-store":120}],70:[function(o,i,s){function a(b){f(b,m,{value:{objectID:"O"+ ++h,weakData:{}}})}var l=o("../internals/hidden-keys"),u=o("../internals/is-object"),c=o("../internals/has"),f=o("../internals/object-define-property").f,d=o("../internals/uid"),p=o("../internals/freezing"),m=d("meta"),h=0,g=Object.isExtensible||function(){return!0},y=i.exports={REQUIRED:!1,fastKey:function(b,x){if(!u(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!c(b,m)){if(!g(b))return"F";if(!x)return"E";a(b)}return b[m].objectID},getWeakData:function(b,x){if(!c(b,m)){if(!g(b))return!0;if(!x)return!1;a(b)}return b[m].weakData},onFreeze:function(b){return p&&y.REQUIRED&&g(b)&&!c(b,m)&&a(b),b}};l[m]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(v,i,s){var a,l,u,c,f,d,p,m,h=v("../internals/native-weak-map"),w=v("../internals/global"),g=v("../internals/is-object"),y=v("../internals/create-non-enumerable-property"),b=v("../internals/has"),x=v("../internals/shared-key"),v=v("../internals/hidden-keys"),w=w.WeakMap;p=h?(a=new w,l=a.get,u=a.has,c=a.set,f=function(_,C){return c.call(a,_,C),C},d=function(_){return l.call(a,_)||{}},function(_){return u.call(a,_)}):(v[m=x("state")]=!0,f=function(_,C){return y(_,m,C),C},d=function(_){return b(_,m)?_[m]:{}},function(_){return b(_,m)}),i.exports={set:f,get:d,has:p,enforce:function(_){return p(_)?d(_):f(_,{})},getterFor:function(_){return function(C){if(g(C)&&(C=d(C)).type===_)return C;throw TypeError("Incompatible receiver, "+_+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(o,i,s){var a=o("../internals/well-known-symbol"),l=o("../internals/iterators"),u=a("iterator"),c=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=Array.isArray||function(l){return a(l)=="Array"}},{"../internals/classof-raw":28}],74:[function(o,i,s){function a(m,h){return(m=f[c(m)])==p||m!=d&&(typeof h=="function"?l(h):!!h)}var l=o("../internals/fails"),u=/#|\.prototype\./,c=a.normalize=function(m){return String(m).replace(u,".").toLowerCase()},f=a.data={},d=a.NATIVE="N",p=a.POLYFILL="P";i.exports=a},{"../internals/fails":51}],75:[function(o,i,s){i.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(o,i,s){i.exports=!1},{}],77:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("match");i.exports=function(c){var f;return a(c)&&((f=c[u])!==void 0?!!f:l(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(o,i,s){function a(m,h){this.stopped=m,this.result=h}var l=o("../internals/an-object"),u=o("../internals/is-array-iterator-method"),c=o("../internals/to-length"),f=o("../internals/function-bind-context"),d=o("../internals/get-iterator-method"),p=o("../internals/call-with-safe-iteration-closing");(i.exports=function(m,h,g,y,b){var x,v,w,_,C,S,E=f(h,g,y?2:1);if(b)x=m;else{if(typeof(h=d(m))!="function")throw TypeError("Target is not iterable");if(u(h)){for(v=0,w=c(m.length);v<w;v++)if((_=y?E(l(S=m[v])[0],S[1]):E(m[v]))&&_ instanceof a)return _;return new a(!1)}x=h.call(m)}for(C=x.next;!(S=C.call(x)).done;)if(typeof(_=p(x,E,S.value,y))=="object"&&_&&_ instanceof a)return _;return new a(!1)}).stop=function(m){return new a(!0,m)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(d,i,s){"use strict";var a,l,u=d("../internals/object-get-prototype-of"),c=d("../internals/create-non-enumerable-property"),f=d("../internals/has"),p=d("../internals/well-known-symbol"),d=d("../internals/is-pure"),p=p("iterator"),m=!1;[].keys&&("next"in(l=[].keys())?(u=u(u(l)))!==Object.prototype&&(a=u):m=!0),a==null&&(a={}),d||f(a,p)||c(a,p,function(){return this}),i.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:m}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(o,i,s){i.exports={}},{}],81:[function(o,i,s){i.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(y,i,s){var a,l,u,c,f,d,p,m,h=y("../internals/global"),C=y("../internals/object-get-own-property-descriptor").f,_=y("../internals/classof-raw"),g=y("../internals/task").set,y=y("../internals/engine-is-ios"),b=h.MutationObserver||h.WebKitMutationObserver,x=h.process,v=h.Promise,w=_(x)=="process",_=C(h,"queueMicrotask"),C=_&&_.value;C||(a=function(){var S,E;for(w&&(S=x.domain)&&S.exit();l;){E=l.fn,l=l.next;try{E()}catch(A){throw l?c():u=void 0,A}}u=void 0,S&&S.enter()},c=w?function(){x.nextTick(a)}:b&&!y?(f=!0,d=document.createTextNode(""),new b(a).observe(d,{characterData:!0}),function(){d.data=f=!f}):v&&v.resolve?(p=v.resolve(void 0),m=p.then,function(){m.call(p,a)}):function(){g.call(h,a)}),i.exports=C||function(S){S={fn:S,next:void 0},u&&(u.next=S),l||(l=S,c()),u=S}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(o,i,s){o=o("../internals/global"),i.exports=o.Promise},{"../internals/global":60}],84:[function(o,i,s){o=o("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/is-pure"),c=l("iterator");i.exports=!a(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),d=f.searchParams,p="";return f.pathname="c%20d",d.forEach(function(m,h){d.delete("b"),p+=h+m}),u&&!f.toJSON||!d.sort||f.href!=="http://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||p!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(a,i,s){var l=a("../internals/global"),a=a("../internals/inspect-source"),l=l.WeakMap;i.exports=typeof l=="function"&&/native code/.test(a(l))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(o,i,s){"use strict";function a(u){var c,f;this.promise=new u(function(d,p){if(c!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");c=d,f=p}),this.resolve=l(c),this.reject=l(f)}var l=o("../internals/a-function");i.exports.f=function(u){return new a(u)}},{"../internals/a-function":5}],88:[function(o,i,s){var a=o("../internals/is-regexp");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":77}],89:[function(o,i,s){var a=o("../internals/global").isFinite;i.exports=Number.isFinite||function(l){return typeof l=="number"&&a(l)}},{"../internals/global":60}],90:[function(o,i,s){"use strict";var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/object-keys"),c=o("../internals/object-get-own-property-symbols"),f=o("../internals/object-property-is-enumerable"),d=o("../internals/to-object"),p=o("../internals/indexed-object"),m=Object.assign,h=Object.defineProperty;i.exports=!m||l(function(){var g,y,b,x;return!(!a||m({b:1},m(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},x="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,x.split("").forEach(function(v){y[v]=v}),m({},g)[b]!=7||u(m({},y)).join("")!=x)})?function(g,y){for(var b=d(g),x=arguments.length,v=1,w=c.f,_=f.f;v<x;)for(var C,S=p(arguments[v++]),E=w?u(S).concat(w(S)):u(S),A=E.length,N=0;N<A;)C=E[N++],a&&!_.call(S,C)||(b[C]=S[C]);return b}:m},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(h,i,s){function a(){}var l,u=h("../internals/an-object"),c=h("../internals/object-define-properties"),f=h("../internals/enum-bug-keys"),d=h("../internals/hidden-keys"),p=h("../internals/html"),m=h("../internals/document-create-element"),h=h("../internals/shared-key"),g="prototype",y="script",b=h("IE_PROTO"),x=function(w){return"<"+y+">"+w+"</"+y+">"},v=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch{}v=l?((w=l).write(x("")),w.close(),_=w.parentWindow.Object,w=null,_):(w=m("iframe"),_="java"+y+":",w.style.display="none",p.appendChild(w),w.src=String(_),(_=w.contentWindow.document).open(),_.write(x("document.F=Object")),_.close(),_.F);for(var w,_,C=f.length;C--;)delete v[g][f[C]];return v()};d[b]=!0,i.exports=Object.create||function(w,_){var C;return w!==null?(a[g]=u(w),C=new a,a[g]=null,C[b]=w):C=v(),_===void 0?C:c(C,_)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/an-object"),c=o("../internals/object-keys");i.exports=a?Object.defineProperties:function(f,d){u(f);for(var p,m=c(d),h=m.length,g=0;g<h;)l.f(f,p=m[g++],d[p]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/ie8-dom-define"),u=o("../internals/an-object"),c=o("../internals/to-primitive"),f=Object.defineProperty;s.f=a?f:function(d,p,m){if(u(d),p=c(p,!0),u(m),l)try{return f(d,p,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(d[p]=m.value),d}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-property-is-enumerable"),u=o("../internals/create-property-descriptor"),c=o("../internals/to-indexed-object"),f=o("../internals/to-primitive"),d=o("../internals/has"),p=o("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;s.f=a?m:function(h,g){if(h=c(h),g=f(g,!0),p)try{return m(h,g)}catch{}if(d(h,g))return u(!l.f.call(h,g),h[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(o,i,s){var a=o("../internals/to-indexed-object"),l=o("../internals/object-get-own-property-names").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(f){if(!c||u.call(f)!="[object Window]")return l(a(f));try{return l(f)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(o,i,s){s.f=Object.getOwnPropertySymbols},{}],98:[function(c,i,s){var a=c("../internals/has"),l=c("../internals/to-object"),u=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),f=u("IE_PROTO"),d=Object.prototype;i.exports=c?Object.getPrototypeOf:function(p){return p=l(p),a(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?d:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/to-indexed-object"),u=o("../internals/array-includes").indexOf,c=o("../internals/hidden-keys");i.exports=function(f,d){var p,m=l(f),h=0,g=[];for(p in m)!a(c,p)&&a(m,p)&&g.push(p);for(;d.length>h;)!a(m,p=d[h++])||~u(g,p)||g.push(p);return g}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys");i.exports=Object.keys||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(o,i,s){"use strict";var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(c){return c=l(this,c),!!c&&c.enumerable}:a},{}],102:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,c=!1,f={};try{(u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),c=f instanceof Array}catch{}return function(d,p){return a(d),l(p),c?u.call(d,p):d.__proto__=p,d}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(o,i,s){"use strict";var a=o("../internals/to-string-tag-support"),l=o("../internals/classof");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(o,i,s){var a=o("../internals/get-built-in"),l=o("../internals/object-get-own-property-names"),u=o("../internals/object-get-own-property-symbols"),c=o("../internals/an-object");i.exports=a("Reflect","ownKeys")||function(f){var d=l.f(c(f)),p=u.f;return p?d.concat(p(f)):d}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(o,i,s){o=o("../internals/global"),i.exports=o},{"../internals/global":60}],106:[function(o,i,s){i.exports=function(a){try{return{error:!1,value:a()}}catch(l){return{error:!0,value:l}}}},{}],107:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/is-object"),u=o("../internals/new-promise-capability");i.exports=function(c,f){return a(c),l(f)&&f.constructor===c?f:((0,(c=u.f(c)).resolve)(f),c.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(o,i,s){var a=o("../internals/redefine");i.exports=function(l,u,c){for(var f in u)a(l,f,u[f],c);return l}},{"../internals/redefine":109}],109:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/create-non-enumerable-property"),u=d("../internals/has"),c=d("../internals/set-global"),f=d("../internals/inspect-source"),d=d("../internals/internal-state"),p=d.get,m=d.enforce,h=String(String).split("String");(i.exports=function(g,y,b,_){var v=!!_&&!!_.unsafe,w=!!_&&!!_.enumerable,_=!!_&&!!_.noTargetGet;typeof b=="function"&&(typeof y!="string"||u(b,"name")||l(b,"name",y),m(b).source=h.join(typeof y=="string"?y:"")),g===a?w?g[y]=b:c(y,b):(v?!_&&g[y]&&(w=!0):delete g[y],w?g[y]=b:l(g,y,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(o,i,s){var a=o("./classof-raw"),l=o("./regexp-exec");i.exports=function(u,c){var f=u.exec;if(typeof f=="function"){if(f=f.call(u,c),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(c,i,s){"use strict";var a,l,u=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),f=RegExp.prototype.exec,d=String.prototype.replace,p=f,m=(a=/a/,l=/b*/g,f.call(a,"a"),f.call(l,"a"),a.lastIndex!==0||l.lastIndex!==0),h=c.UNSUPPORTED_Y||c.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;i.exports=p=m||g||h?function(y){var b,x,v,w,_=this,C=h&&_.sticky,S=u.call(_),E=_.source,A=0,N=y;return C&&((S=S.replace("y","")).indexOf("g")===-1&&(S+="g"),N=String(y).slice(_.lastIndex),0<_.lastIndex&&(!_.multiline||_.multiline&&y[_.lastIndex-1]!==`
`)&&(E="(?: "+E+")",N=" "+N,A++),x=new RegExp("^(?:"+E+")",S)),g&&(x=new RegExp("^"+E+"$(?!\\s)",S)),m&&(b=_.lastIndex),v=f.call(C?x:_,N),C?v?(v.input=v.input.slice(A),v[0]=v[0].slice(A),v.index=_.lastIndex,_.lastIndex+=v[0].length):_.lastIndex=0:m&&v&&(_.lastIndex=_.global?v.index+v[0].length:b),g&&v&&1<v.length&&d.call(v[0],x,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(v[w]=void 0)}),v}:p},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(o,i,s){"use strict";var a=o("../internals/an-object");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},{"../internals/an-object":10}],113:[function(o,i,s){"use strict";o=o("./fails");function a(l,u){return RegExp(l,u)}s.UNSUPPORTED_Y=o(function(){var l=a("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),s.BROKEN_CARET=o(function(){var l=a("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},{"./fails":51}],114:[function(o,i,s){i.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],115:[function(o,i,s){i.exports=Object.is||function(a,l){return a===l?a!==0||1/a==1/l:a!=a&&l!=l}},{}],116:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/create-non-enumerable-property");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(o,i,s){"use strict";var a=o("../internals/get-built-in"),l=o("../internals/object-define-property"),u=o("../internals/well-known-symbol"),c=o("../internals/descriptors"),f=u("species");i.exports=function(p){var p=a(p),m=l.f;c&&p&&!p[f]&&m(p,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(o,i,s){var a=o("../internals/object-define-property").f,l=o("../internals/has"),u=o("../internals/well-known-symbol")("toStringTag");i.exports=function(c,f,d){c&&!l(c=d?c:c.prototype,u)&&a(c,u,{configurable:!0,value:f})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(o,i,s){var a=o("../internals/shared"),l=o("../internals/uid"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(a,i,s){var u=a("../internals/global"),a=a("../internals/set-global"),l="__core-js_shared__",u=u[l]||a(l,{});i.exports=u},{"../internals/global":60,"../internals/set-global":116}],121:[function(o,i,s){var a=o("../internals/is-pure"),l=o("../internals/shared-store");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-function"),u=o("../internals/well-known-symbol")("species");i.exports=function(d,f){var d=a(d).constructor;return d===void 0||(d=a(d)[u])==null?f:l(d)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(o,i,s){var a=o("../internals/fails");i.exports=function(l){return a(function(){var u=""[l]('"');return u!==u.toLowerCase()||3<u.split('"').length})}},{"../internals/fails":51}],124:[function(o,i,s){function a(c){return function(m,h){var p,m=String(u(m)),h=l(h),g=m.length;return h<0||g<=h?c?"":void 0:(p=m.charCodeAt(h))<55296||56319<p||h+1===g||(g=m.charCodeAt(h+1))<56320||57343<g?c?m.charAt(h):p:c?m.slice(h,h+2):g-56320+(p-55296<<10)+65536}}var l=o("../internals/to-integer"),u=o("../internals/require-object-coercible");i.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},{"../internals/engine-user-agent":47}],126:[function(o,i,s){function a(d){return function(g,x,b){var g=String(c(g)),y=g.length,b=b===void 0?" ":String(b),x=l(x);return x<=y||b==""?g:((y=u.call(b,f((x=x-y)/b.length))).length>x&&(y=y.slice(0,x)),d?g+y:y+g)}}var l=o("../internals/to-length"),u=o("../internals/string-repeat"),c=o("../internals/require-object-coercible"),f=Math.ceil;i.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(o,i,s){"use strict";function a(v){return v+22+75*(v<26)}function l(v){var w,_=[],C=(v=function(Y){for(var X=[],pe=0,$=Y.length;pe<$;){var F,z=Y.charCodeAt(pe++);55296<=z&&z<=56319&&pe<$?(64512&(F=Y.charCodeAt(pe++)))==56320?X.push(((1023&z)<<10)+(1023&F)+65536):(X.push(z),pe--):X.push(z)}return X}(v)).length,S=128,E=0,A=72;for(I=0;I<v.length;I++)(w=v[I])<128&&_.push(x(w));var N=_.length,k=N;for(N&&_.push("-");k<C;){for(var M=u,I=0;I<v.length;I++)S<=(w=v[I])&&w<M&&(M=w);var L=k+1;if(M-S>b((u-E)/L))throw RangeError(g);for(E+=(M-S)*L,S=M,I=0;I<v.length;I++){if((w=v[I])<S&&++E>u)throw RangeError(g);if(w==S){for(var P=E,R=c;;R+=c){var V=R<=A?1:A+f<=R?f:R-A;if(P<V)break;var G=P-V,U=c-V;_.push(x(a(V+G%U))),P=b(G/U)}_.push(x(a(P))),A=function(Y,X,pe){var $=0;for(Y=pe?b(Y/p):Y>>1,Y+=b(Y/X);y*f>>1<Y;$+=c)Y=b(Y/y);return b($+(y+1)*Y/(Y+d))}(E,L,k==N),E=0,++k}}++E,++S}return _.join("")}var u=2147483647,c=36,f=26,d=38,p=700,m=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",y=c-1,b=Math.floor,x=String.fromCharCode;i.exports=function(v){for(var w,_=[],C=v.toLowerCase().replace(h,".").split("."),S=0;S<C.length;S++)w=C[S],_.push(m.test(w)?"xn--"+l(w):w);return _.join(".")}},{}],128:[function(o,i,s){"use strict";var a=o("../internals/to-integer"),l=o("../internals/require-object-coercible");i.exports="".repeat||function(u){var c=String(l(this)),f="",d=a(u);if(d<0||d==1/0)throw RangeError("Wrong number of repetitions");for(;0<d;(d>>>=1)&&(c+=c))1&d&&(f+=c);return f}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/whitespaces");i.exports=function(u){return a(function(){return!!l[u]()||"\u200B\x85\u180E"[u]()!="\u200B\x85\u180E"||l[u].name!==u})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(u,i,s){function a(d){return function(p){return p=String(l(p)),1&d&&(p=p.replace(c,"")),p=2&d?p.replace(f,""):p}}var l=u("../internals/require-object-coercible"),u="["+u("../internals/whitespaces")+"]",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$");i.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(y,i,s){function a(k){return function(){N(k)}}function l(k){N(k.data)}function u(k){f.postMessage(k+"",b.protocol+"//"+b.host)}var c,f=y("../internals/global"),d=y("../internals/fails"),p=y("../internals/classof-raw"),m=y("../internals/function-bind-context"),h=y("../internals/html"),g=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),b=f.location,x=f.setImmediate,v=f.clearImmediate,w=f.process,_=f.MessageChannel,C=f.Dispatch,S=0,E={},A="onreadystatechange",N=function(k){var M;E.hasOwnProperty(k)&&(M=E[k],delete E[k],M())};x&&v||(x=function(k){for(var M=[],I=1;I<arguments.length;)M.push(arguments[I++]);return E[++S]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,M)},c(S),S},v=function(k){delete E[k]},p(w)=="process"?c=function(k){w.nextTick(a(k))}:C&&C.now?c=function(k){C.now(a(k))}:_&&!y?(y=(p=new _).port2,p.port1.onmessage=l,c=m(y.postMessage,y,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||d(u)||b.protocol==="file:"?c=A in g("script")?function(k){h.appendChild(g("script"))[A]=function(){h.removeChild(this),N(k)}}:function(k){setTimeout(a(k),0)}:(c=u,f.addEventListener("message",l,!1))),i.exports={set:x,clear:v}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=function(l){if(typeof l!="number"&&a(l)!="Number")throw TypeError("Incorrect invocation");return+l}},{"../internals/classof-raw":28}],133:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.max,u=Math.min;i.exports=function(c,f){return c=a(c),c<0?l(c+f,0):u(c,f)}},{"../internals/to-integer":136}],134:[function(o,i,s){var a=o("../internals/to-integer"),l=o("../internals/to-length");i.exports=function(c){if(c===void 0)return 0;var c=a(c),f=l(c);if(c!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(o,i,s){var a=o("../internals/indexed-object"),l=o("../internals/require-object-coercible");i.exports=function(u){return a(l(u))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(o,i,s){var a=Math.ceil,l=Math.floor;i.exports=function(u){return isNaN(u=+u)?0:(0<u?l:a)(u)}},{}],137:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.min;i.exports=function(u){return 0<u?l(a(u),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(o,i,s){var a=o("../internals/require-object-coercible");i.exports=function(l){return Object(a(l))}},{"../internals/require-object-coercible":114}],139:[function(o,i,s){var a=o("../internals/to-positive-integer");i.exports=function(l,u){if(l=a(l),l%u)throw RangeError("Wrong offset");return l}},{"../internals/to-positive-integer":140}],140:[function(o,i,s){var a=o("../internals/to-integer");i.exports=function(l){if(l=a(l),l<0)throw RangeError("The argument can't be less than 0");return l}},{"../internals/to-integer":136}],141:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l,u){if(!a(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(o,i,s){var a={};a[o("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(o,i,s){"use strict";function a(Ae,Me){for(var ze=0,lt=Me.length,We=new(ne(Ae))(lt);ze<lt;)We[ze]=Me[ze++];return We}function l(Ae,Me){F(Ae,Me,{get:function(){return pe(this)[Me]}})}function u(Ae){return Ae instanceof ae||(Ae=N(Ae))=="ArrayBuffer"||Ae=="SharedArrayBuffer"}function c(Ae,Me){return ye(Ae)&&typeof Me!="symbol"&&Me in Ae&&String(+Me)==String(Me)}function f(Ae,Me){return c(Ae,Me=E(Me,!0))?v(2,Ae[Me]):z(Ae,Me)}function d(Ae,Me,ze){return!(c(Ae,Me=E(Me,!0))&&k(ze)&&A(ze,"value"))||A(ze,"get")||A(ze,"set")||ze.configurable||A(ze,"writable")&&!ze.writable||A(ze,"enumerable")&&!ze.enumerable?F(Ae,Me,ze):(Ae[Me]=ze.value,Ae)}var p=o("../internals/export"),m=o("../internals/global"),h=o("../internals/descriptors"),g=o("../internals/typed-array-constructors-require-wrappers"),y=o("../internals/array-buffer-view-core"),b=o("../internals/array-buffer"),x=o("../internals/an-instance"),v=o("../internals/create-property-descriptor"),w=o("../internals/create-non-enumerable-property"),_=o("../internals/to-length"),C=o("../internals/to-index"),S=o("../internals/to-offset"),E=o("../internals/to-primitive"),A=o("../internals/has"),N=o("../internals/classof"),k=o("../internals/is-object"),M=o("../internals/object-create"),I=o("../internals/object-set-prototype-of"),L=o("../internals/object-get-own-property-names").f,P=o("../internals/typed-array-from"),R=o("../internals/array-iteration").forEach,V=o("../internals/set-species"),G=o("../internals/object-define-property"),U=o("../internals/object-get-own-property-descriptor"),Y=o("../internals/internal-state"),X=o("../internals/inherit-if-required"),pe=Y.get,$=Y.set,F=G.f,z=U.f,q=Math.round,ee=m.RangeError,ae=b.ArrayBuffer,Q=b.DataView,le=y.NATIVE_ARRAY_BUFFER_VIEWS,ie=y.TYPED_ARRAY_TAG,Z=y.TypedArray,ge=y.TypedArrayPrototype,ne=y.aTypedArrayConstructor,ye=y.isTypedArray,xe="BYTES_PER_ELEMENT",Ne="Wrong length";h?(le||(U.f=f,G.f=d,l(ge,"buffer"),l(ge,"byteOffset"),l(ge,"byteLength"),l(ge,"length")),p({target:"Object",stat:!0,forced:!le},{getOwnPropertyDescriptor:f,defineProperty:d}),i.exports=function(Le,Me,ze){function lt(Ge,fe){F(Ge,fe,{get:function(){var he=this,oe=fe;return(he=pe(he)).view[Tt](oe*We+he.byteOffset,!0)},set:function(he){var oe=this,be=fe;oe=pe(oe),ze&&(he=(he=q(he))<0?0:255<he?255:255&he),oe.view[At](be*We+oe.byteOffset,he,!0)},enumerable:!0})}var We=Le.match(/\d+$/)[0]/8,Bt=Le+(ze?"Clamped":"")+"Array",Tt="get"+Le,At="set"+Le,Rt=m[Bt],Nt=Rt,Le=Nt&&Nt.prototype,ut={};le?g&&(Nt=Me(function(Ge,fe,he,oe){return x(Ge,Nt,Bt),X(k(fe)?u(fe)?oe!==void 0?new Rt(fe,S(he,We),oe):he!==void 0?new Rt(fe,S(he,We)):new Rt(fe):ye(fe)?a(Nt,fe):P.call(Nt,fe):new Rt(C(fe)),Ge,Nt)}),I&&I(Nt,Z),R(L(Rt),function(Ge){Ge in Nt||w(Nt,Ge,Rt[Ge])}),Nt.prototype=Le):(Nt=Me(function(Ge,fe,he,oe){x(Ge,Nt,Bt);var be,Oe,Ve=0,Qe=0;if(k(fe)){if(!u(fe))return ye(fe)?a(Nt,fe):P.call(Nt,fe);var _t=fe,Qe=S(he,We),he=fe.byteLength;if(oe===void 0){if(he%We||(be=he-Qe)<0)throw ee(Ne)}else if(he<(be=_(oe)*We)+Qe)throw ee(Ne);Oe=be/We}else Oe=C(fe),_t=new ae(be=Oe*We);for($(Ge,{buffer:_t,byteOffset:Qe,byteLength:be,length:Oe,view:new Q(_t)});Ve<Oe;)lt(Ge,Ve++)}),I&&I(Nt,Z),Le=Nt.prototype=M(ge)),Le.constructor!==Nt&&w(Le,"constructor",Nt),ie&&w(Le,ie,Bt),ut[Bt]=Nt,p({global:!0,forced:Nt!=Rt,sham:!le},ut),xe in Nt||w(Nt,xe,We),xe in Le||w(Le,xe,We),V(Bt)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(c,i,s){var a=c("../internals/global"),l=c("../internals/fails"),u=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=a.ArrayBuffer,d=a.Int8Array;i.exports=!c||!l(function(){d(1)})||!l(function(){new d(-1)})||!u(function(p){new d,new d(null),new d(1.5),new d(p)},!0)||l(function(){return new d(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(o,i,s){var a=o("../internals/to-object"),l=o("../internals/to-length"),u=o("../internals/get-iterator-method"),c=o("../internals/is-array-iterator-method"),f=o("../internals/function-bind-context"),d=o("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(p){var m,h,g,y,b,x,v=a(p),w=arguments.length,_=1<w?arguments[1]:void 0,C=_!==void 0,S=u(v);if(S!=null&&!c(S))for(x=(b=S.call(v)).next,v=[];!(y=x.call(b)).done;)v.push(y.value);for(C&&2<w&&(_=f(_,arguments[2],2)),h=l(v.length),g=new(d(this))(h),m=0;m<h;m++)g[m]=C?_(v[m],m):v[m];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(o,i,s){var a=0,l=Math.random();i.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++a+l).toString(36)}},{}],147:[function(o,i,s){o=o("../internals/native-symbol"),i.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(o,i,s){o=o("../internals/well-known-symbol"),s.f=o},{"../internals/well-known-symbol":149}],149:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/shared"),u=d("../internals/has"),c=d("../internals/uid"),f=d("../internals/native-symbol"),d=d("../internals/use-symbol-as-uid"),p=l("wks"),m=a.Symbol,h=d?m:m&&m.withoutSetter||c;i.exports=function(g){return u(p,g)||(f&&u(m,g)?p[g]=m[g]:p[g]=h("Symbol."+g)),p[g]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(o,i,s){i.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],151:[function(u,i,s){"use strict";var a=u("../internals/export"),l=u("../internals/global"),f=u("../internals/array-buffer"),u=u("../internals/set-species"),c="ArrayBuffer",f=f[c];a({global:!0,forced:l[c]!==f},{ArrayBuffer:f}),u(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(v,i,s){"use strict";var a=v("../internals/export"),l=v("../internals/fails"),u=v("../internals/is-array"),c=v("../internals/is-object"),f=v("../internals/to-object"),d=v("../internals/to-length"),p=v("../internals/create-property"),m=v("../internals/array-species-create"),h=v("../internals/array-method-has-species-support"),x=v("../internals/well-known-symbol"),v=v("../internals/engine-v8-version"),g=x("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",x=51<=v||!l(function(){var w=[];return w[g]=!1,w.concat()[0]!==w}),v=h("concat");a({target:"Array",proto:!0,forced:!x||!v},{concat:function(w){for(var _,C,S,E,A,N=f(this),k=m(N,0),M=0,I=-1,L=arguments.length;I<L;I++)if(A=void 0,!c(E=S=I===-1?N:arguments[I])||((A=E[g])!==void 0?!A:!u(E))){if(y<=M)throw TypeError(b);p(k,M++,S)}else{if(C=d(S.length),y<M+C)throw TypeError(b);for(_=0;_<C;_++,M++)_ in S&&p(k,M,S[_])}return k.length=M,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-copy-within"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:l}),u("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").every,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("every"),c=c("every");a({target:"Array",proto:!0,forced:!u||!c},{every:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-fill"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:l}),u("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").filter,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("filter"),c=c("filter");a({target:"Array",proto:!0,forced:!u||!c},{filter:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-iteration").findIndex,u=d("../internals/add-to-unscopables"),d=d("../internals/array-method-uses-to-length"),c="findIndex",f=!0,d=d(c);c in[]&&Array(1)[c](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!d},{findIndex:function(p){return l(this,p,1<arguments.length?arguments[1]:void 0)}}),u(c)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/a-function"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(p){var m,h=u(this),g=c(h.length);return f(p),(m=d(h,0)).length=l(m,h,h,g,0,1,p,1<arguments.length?arguments[1]:void 0),m}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var p=arguments.length?arguments[0]:void 0,m=u(this),h=c(m.length),g=d(m,0);return g.length=l(g,m,m,h,0,p===void 0?1:f(p)),g}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/array-from");a({target:"Array",stat:!0,forced:!o("../internals/check-correctness-of-iteration")(function(u){Array.from(u)})},{from:l})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/array-includes").includes,u=o("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!o("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return l(this,c,1<arguments.length?arguments[1]:void 0)}}),u("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-includes").indexOf,f=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),u=[].indexOf,c=!!u&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!f||!d},{indexOf:function(p){return c?u.apply(this,arguments)||0:l(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(f,i,s){"use strict";var a=f("../internals/to-indexed-object"),l=f("../internals/add-to-unscopables"),u=f("../internals/iterators"),c=f("../internals/internal-state"),f=f("../internals/define-iterator"),d="Array Iterator",p=c.set,m=c.getterFor(d);i.exports=f(Array,"Array",function(h,g){p(this,{type:d,target:a(h),index:0,kind:g})},function(){var h=m(this),g=h.target,y=h.kind,b=h.index++;return!g||b>=g.length?{value:h.target=void 0,done:!0}:y=="keys"?{value:b,done:!1}:y=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(f,i,s){"use strict";var a=f("../internals/export"),c=f("../internals/indexed-object"),l=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),u=[].join,c=c!=Object,f=f("join",",");a({target:"Array",proto:!0,forced:c||!f},{join:function(d){return u.call(l(this),d===void 0?",":d)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").map,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("map"),c=c("map");a({target:"Array",proto:!0,forced:!u||!c},{map:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(g,i,s){"use strict";var a=g("../internals/export"),l=g("../internals/is-object"),u=g("../internals/is-array"),c=g("../internals/to-absolute-index"),f=g("../internals/to-length"),d=g("../internals/to-indexed-object"),p=g("../internals/create-property"),m=g("../internals/well-known-symbol"),h=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),h=h("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),y=m("species"),b=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!h||!g},{slice:function(v,w){var _,C,S,E=d(this),A=f(E.length),N=c(v,A),k=c(w===void 0?A:w,A);if(u(E)&&((_=typeof(_=E.constructor)=="function"&&(_===Array||u(_.prototype))||l(_)&&(_=_[y])===null?void 0:_)===Array||_===void 0))return b.call(E,N,k);for(C=new(_===void 0?Array:_)(x(k-N,0)),S=0;N<k;N++,S++)N in E&&p(C,S,E[N]);return C.length=S,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").some,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("some"),c=c("some");a({target:"Array",proto:!0,forced:!u||!c},{some:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(h,i,s){"use strict";var a=h("../internals/export"),l=h("../internals/to-absolute-index"),u=h("../internals/to-integer"),c=h("../internals/to-length"),f=h("../internals/to-object"),d=h("../internals/array-species-create"),p=h("../internals/create-property"),m=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),m=m("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,y=Math.min;a({target:"Array",proto:!0,forced:!m||!h},{splice:function(M,x){var v,w,_,C,S,E,A=f(this),N=c(A.length),k=l(M,N),M=arguments.length;if(M===0?v=w=0:w=M===1?(v=0,N-k):(v=M-2,y(g(u(x),0),N-k)),9007199254740991<N+v-w)throw TypeError("Maximum allowed length exceeded");for(_=d(A,w),C=0;C<w;C++)(S=k+C)in A&&p(_,C,A[S]);if(v<(_.length=w)){for(C=k;C<N-w;C++)E=C+v,(S=C+w)in A?A[E]=A[S]:delete A[E];for(C=N;N-w+v<C;C--)delete A[C-1]}else if(w<v)for(C=N-w;k<C;C--)E=C+v-1,(S=C+w-1)in A?A[E]=A[S]:delete A[E];for(C=0;C<v;C++)A[C+k]=arguments[C+2];return A.length=N-w+v,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(o,i,s){o("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(o,i,s){o("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(l,i,s){var a=l("../internals/descriptors"),l=l("../internals/object-define-property").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/;!a||"name"in u||l(u,"name",{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(a,i,s){var a=a("../internals/export"),l=Math.hypot,u=Math.abs,c=Math.sqrt;a({target:"Math",stat:!0,forced:!!l&&l(1/0,NaN)!==1/0},{hypot:function(f,d){for(var p,m,h=0,g=0,y=arguments.length,b=0;g<y;)b<(p=u(arguments[g++]))?(h=h*(m=b/p)*m+1,b=p):h+=0<p?(m=p/b)*m:p;return b===1/0?1/0:b*c(h)}})},{"../internals/export":50}],176:[function(a,i,s){var a=a("../internals/export"),l=Math.log,u=Math.LN2;a({target:"Math",stat:!0},{log2:function(c){return l(c)/u}})},{"../internals/export":50}],177:[function(o,i,s){o("../internals/export")({target:"Math",stat:!0},{sign:o("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(o,i,s){"use strict";function a(I){var L,P,R,V,G,U,Y,X=h(I,!1);if(typeof X=="string"&&2<X.length){if((I=(X=w(X)).charCodeAt(0))===43||I===45){if((L=X.charCodeAt(2))===88||L===120)return NaN}else if(I===48){switch(X.charCodeAt(1)){case 66:case 98:P=2,R=49;break;case 79:case 111:P=8,R=55;break;default:return+X}for(G=(V=X.slice(2)).length,U=0;U<G;U++)if((Y=V.charCodeAt(U))<48||R<Y)return NaN;return parseInt(V,P)}}return+X}var l=o("../internals/descriptors"),u=o("../internals/global"),c=o("../internals/is-forced"),f=o("../internals/redefine"),d=o("../internals/has"),p=o("../internals/classof-raw"),m=o("../internals/inherit-if-required"),h=o("../internals/to-primitive"),g=o("../internals/fails"),y=o("../internals/object-create"),b=o("../internals/object-get-own-property-names").f,x=o("../internals/object-get-own-property-descriptor").f,v=o("../internals/object-define-property").f,w=o("../internals/string-trim").trim,_="Number",C=u[_],S=C.prototype,E=p(y(S))==_;if(c(_,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var A,N=function(L){var L=arguments.length<1?0:L,P=this;return P instanceof N&&(E?g(function(){S.valueOf.call(P)}):p(P)!=_)?m(new C(a(L)),P,N):a(L)},k=l?b(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;k.length>M;M++)d(C,A=k[M])&&!d(N,A)&&v(N,A,x(C,A));(N.prototype=S).constructor=N,f(u,_,N)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(o,i,s){o("../internals/export")({target:"Number",stat:!0},{isFinite:o("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(d,i,s){"use strict";function a(h,g,y){return g===0?y:g%2==1?a(h,g-1,y*h):a(h*h,g/2,y)}var l=d("../internals/export"),u=d("../internals/to-integer"),c=d("../internals/this-number-value"),f=d("../internals/string-repeat"),d=d("../internals/fails"),p=1 .toFixed,m=Math.floor;l({target:"Number",proto:!0,forced:p&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!d(function(){p.call({})})},{toFixed:function(_){function g(A,N){for(var k=-1,M=N;++k<6;)M+=A*C[k],C[k]=M%1e7,M=m(M/1e7)}function y(A){for(var N=6,k=0;0<=--N;)k+=C[N],C[N]=m(k/A),k=k%A*1e7}function b(){for(var A,N=6,k="";0<=--N;)k===""&&N!==0&&C[N]===0||(A=String(C[N]),k=k===""?A:k+f.call("0",7-A.length)+A);return k}var x,v,w=c(this),_=u(_),C=[0,0,0,0,0,0],S="",E="0";if(_<0||20<_)throw RangeError("Incorrect fraction digits");if(w!=w)return"NaN";if(w<=-1e21||1e21<=w)return String(w);if(w<0&&(S="-",w=-w),1e-21<w)if(w=(x=function(A){for(var N=0,k=A;4096<=k;)N+=12,k/=4096;for(;2<=k;)N+=1,k/=2;return N}(w*a(2,69,1))-69)<0?w*a(2,-x,1):w/a(2,x,1),w*=4503599627370496,0<(x=52-x)){for(g(0,w),v=_;7<=v;)g(1e7,0),v-=7;for(g(a(10,v,1),0),v=x-1;23<=v;)y(1<<23),v-=23;y(1<<v),g(1,1),y(2),E=b()}else g(0,w),g(1<<-x,0),E=b()+f.call("0",_);return E=0<_?S+((w=E.length)<=_?"0."+f.call("0",_-w)+E:E.slice(0,w-_)+"."+E.slice(w-_)):S+E}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==l},{assign:l})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/iterate"),u=o("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(c){var f={};return l(c,function(d,p){u(f,d,p)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(c,i,s){var a=c("../internals/export"),f=c("../internals/fails"),l=c("../internals/to-indexed-object"),u=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),f=f(function(){u(1)});a({target:"Object",stat:!0,forced:!c||f,sham:!c},{getOwnPropertyDescriptor:function(d,p){return u(l(d),p)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/fails"),u=u("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:l(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:u})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(f,i,s){var a=f("../internals/export"),l=f("../internals/fails"),u=f("../internals/to-object"),c=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:l(function(){c(1)}),sham:!f},{getPrototypeOf:function(d){return c(u(d))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/to-object"),u=o("../internals/object-keys");a({target:"Object",stat:!0,forced:o("../internals/fails")(function(){u(1)})},{keys:function(c){return u(l(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(u,i,s){var a=u("../internals/to-string-tag-support"),l=u("../internals/redefine"),u=u("../internals/object-to-string");a||l(Object.prototype,"toString",u,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(ze,i,s){"use strict";var a,l,u,c,f=ze("../internals/export"),d=ze("../internals/is-pure"),p=ze("../internals/global"),m=ze("../internals/get-built-in"),h=ze("../internals/native-promise-constructor"),g=ze("../internals/redefine"),y=ze("../internals/redefine-all"),b=ze("../internals/set-to-string-tag"),x=ze("../internals/set-species"),v=ze("../internals/is-object"),w=ze("../internals/a-function"),_=ze("../internals/an-instance"),C=ze("../internals/classof-raw"),S=ze("../internals/inspect-source"),E=ze("../internals/iterate"),A=ze("../internals/check-correctness-of-iteration"),N=ze("../internals/species-constructor"),k=ze("../internals/task").set,M=ze("../internals/microtask"),I=ze("../internals/promise-resolve"),L=ze("../internals/host-report-errors"),P=ze("../internals/new-promise-capability"),R=ze("../internals/perform"),V=ze("../internals/internal-state"),G=ze("../internals/is-forced"),lt=ze("../internals/well-known-symbol"),U=ze("../internals/engine-v8-version"),Y=lt("species"),X="Promise",pe=V.get,$=V.set,F=V.getterFor(X),z=h,q=p.TypeError,ee=p.document,ae=p.process,Q=m("fetch"),le=P.f,ie=le,Z=C(ae)=="process",ge=!!(ee&&ee.createEvent&&p.dispatchEvent),ne="unhandledrejection",ye="rejectionhandled",xe=1,Ne=2,Ae=1,Me=2,ze=G(X,function(){var ut,Ge;return S(z)===String(z)&&(U===66||!Z&&typeof PromiseRejectionEvent!="function")?!0:!(!d||z.prototype.finally)||!(51<=U&&/native code/.test(z))&&(Ge=function(fe){fe(function(){},function(){})},((ut=z.resolve(1)).constructor={})[Y]=Ge,!(ut.then(function(){})instanceof Ge))}),lt=ze||!A(function(ut){z.all(ut).catch(function(){})}),We=function(ut){var Ge;return!(!v(ut)||typeof(Ge=ut.then)!="function")&&Ge},Bt=function(ut,Ge,fe){var he;Ge.notified||(Ge.notified=!0,he=Ge.reactions,M(function(){for(var oe,be,Oe=Ge.value,Ve=Ge.state==xe,Qe=0;he.length>Qe;){var _t,Dt,Ft,Ut=he[Qe++],Qr=Ve?Ut.ok:Ut.fail,Mr=Ut.resolve,lr=Ut.reject,qr=Ut.domain;try{Qr?(Ve||(Ge.rejection===Me&&function(Fr,pi){k.call(p,function(){Z?ae.emit("rejectionHandled",Fr):Tt(ye,Fr,pi.value)})}(ut,Ge),Ge.rejection=Ae),Qr===!0?_t=Oe:(qr&&qr.enter(),_t=Qr(Oe),qr&&(qr.exit(),Ft=!0)),_t===Ut.promise?lr(q("Promise-chain cycle")):(Dt=We(_t))?Dt.call(_t,Mr,lr):Mr(_t)):lr(Oe)}catch(Fr){qr&&!Ft&&qr.exit(),lr(Fr)}}Ge.reactions=[],Ge.notified=!1,fe&&!Ge.rejection&&(oe=ut,be=Ge,k.call(p,function(){var Fr=be.value,pi=At(be);if(pi&&(pi=R(function(){Z?ae.emit("unhandledRejection",Fr,oe):Tt(ne,oe,Fr)}),be.rejection=Z||At(be)?Me:Ae,pi.error))throw pi.value}))}))},Tt=function(ut,Ge,fe){var he;ge?((he=ee.createEvent("Event")).promise=Ge,he.reason=fe,he.initEvent(ut,!1,!0),p.dispatchEvent(he)):he={promise:Ge,reason:fe},(Ge=p["on"+ut])?Ge(he):ut===ne&&L("Unhandled promise rejection",fe)},At=function(ut){return ut.rejection!==Ae&&!ut.parent},Rt=function(ut,Ge,fe,he){return function(oe){ut(Ge,fe,oe,he)}},Nt=function(ut,Ge,fe,he){Ge.done||(Ge.done=!0,(Ge=he||Ge).value=fe,Ge.state=Ne,Bt(ut,Ge,!0))},Le=function(ut,Ge,fe,he){if(!Ge.done){Ge.done=!0,he&&(Ge=he);try{if(ut===fe)throw q("Promise can't be resolved itself");var oe=We(fe);oe?M(function(){var be={done:!1};try{oe.call(fe,Rt(Le,ut,be,Ge),Rt(Nt,ut,be,Ge))}catch(Oe){Nt(ut,be,Oe,Ge)}}):(Ge.value=fe,Ge.state=xe,Bt(ut,Ge,!1))}catch(be){Nt(ut,{done:!1},be,Ge)}}};ze&&(z=function(ut){_(this,z,X),w(ut),a.call(this);var Ge=pe(this);try{ut(Rt(Le,this,Ge),Rt(Nt,this,Ge))}catch(fe){Nt(this,Ge,fe)}},(a=function(ut){$(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(z.prototype,{then:function(ut,Ge){var fe=F(this),he=le(N(this,z));return he.ok=typeof ut!="function"||ut,he.fail=typeof Ge=="function"&&Ge,he.domain=Z?ae.domain:void 0,fe.parent=!0,fe.reactions.push(he),fe.state!=0&&Bt(this,fe,!1),he.promise},catch:function(ut){return this.then(void 0,ut)}}),l=function(){var ut=new a,Ge=pe(ut);this.promise=ut,this.resolve=Rt(Le,ut,Ge),this.reject=Rt(Nt,ut,Ge)},P.f=le=function(ut){return ut===z||ut===u?new l:ie(ut)},d||typeof h!="function"||(c=h.prototype.then,g(h.prototype,"then",function(ut,Ge){var fe=this;return new z(function(he,oe){c.call(fe,he,oe)}).then(ut,Ge)},{unsafe:!0}),typeof Q=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ut){return I(z,Q.apply(p,arguments))}}))),f({global:!0,wrap:!0,forced:ze},{Promise:z}),b(z,X,!1,!0),x(X),u=m(X),f({target:X,stat:!0,forced:ze},{reject:function(ut){var Ge=le(this);return Ge.reject.call(void 0,ut),Ge.promise}}),f({target:X,stat:!0,forced:d||ze},{resolve:function(ut){return I(d&&this===u?z:this,ut)}}),f({target:X,stat:!0,forced:lt},{all:function(ut){var Ge=this,fe=le(Ge),he=fe.resolve,oe=fe.reject,be=R(function(){var Oe=w(Ge.resolve),Ve=[],Qe=0,_t=1;E(ut,function(Dt){var Ft=Qe++,Ut=!1;Ve.push(void 0),_t++,Oe.call(Ge,Dt).then(function(Qr){Ut||(Ut=!0,Ve[Ft]=Qr,--_t||he(Ve))},oe)}),--_t||he(Ve)});return be.error&&oe(be.value),fe.promise},race:function(ut){var Ge=this,fe=le(Ge),he=fe.reject,oe=R(function(){var be=w(Ge.resolve);E(ut,function(Oe){be.call(Ge,Oe).then(fe.resolve,he)})});return oe.error&&he(oe.value),fe.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(p,i,s){var a=p("../internals/export"),y=p("../internals/get-built-in"),l=p("../internals/a-function"),u=p("../internals/an-object"),c=p("../internals/is-object"),f=p("../internals/object-create"),d=p("../internals/function-bind"),p=p("../internals/fails"),m=y("Reflect","construct"),h=p(function(){function b(){}return!(m(function(){},[],b)instanceof b)}),g=!p(function(){m(function(){})}),y=h||g;a({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(b,x){l(b),u(x);var v=arguments.length<3?b:l(arguments[2]);if(g&&!h)return m(b,x,v);if(b==v){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var w=[null];return w.push.apply(w,x),new(d.apply(b,w))}return w=v.prototype,v=f(c(w)?w:Object.prototype),w=Function.apply.call(b,v,x),c(w)?w:v}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/is-object"),u=o("../internals/an-object"),c=o("../internals/has"),f=o("../internals/object-get-own-property-descriptor"),d=o("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function p(m,h){var g,y=arguments.length<3?m:arguments[2];return u(m)===y?m[h]:(g=f.f(m,h))?c(g,"value")?g.value:g.get===void 0?void 0:g.get.call(y):l(g=d(m))?p(g,h,y):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/inherit-if-required"),f=o("../internals/object-define-property").f,d=o("../internals/object-get-own-property-names").f,p=o("../internals/is-regexp"),m=o("../internals/regexp-flags"),h=o("../internals/regexp-sticky-helpers"),g=o("../internals/redefine"),y=o("../internals/fails"),b=o("../internals/internal-state").set,x=o("../internals/set-species"),v=o("../internals/well-known-symbol")("match"),w=l.RegExp,_=w.prototype,C=/a/g,S=/a/g,E=new w(C)!==C,A=h.UNSUPPORTED_Y;if(a&&u("RegExp",!E||A||y(function(){return S[v]=!1,w(C)!=C||w(S)==S||w(C,"i")!="/a/i"}))){for(var N=function(I,L){var P,R=this instanceof N,V=p(I),G=L===void 0;return!R&&V&&I.constructor===N&&G?I:(E?V&&!G&&(I=I.source):I instanceof N&&(G&&(L=m.call(I)),I=I.source),A&&(P=!!L&&-1<L.indexOf("y"))&&(L=L.replace(/y/g,"")),V=c(E?new w(I,L):w(I,L),R?this:_,N),A&&P&&b(V,{sticky:P}),V)},k=d(w),M=0;k.length>M;)(function(I){I in N||f(N,I,{configurable:!0,get:function(){return w[I]},set:function(L){w[I]=L}})})(k[M++]);(_.constructor=N).prototype=_,g(l,"RegExp",N)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(c,i,s){"use strict";var a=c("../internals/redefine"),l=c("../internals/an-object"),p=c("../internals/fails"),u=c("../internals/regexp-flags"),c="toString",f=RegExp.prototype,d=f[c],p=p(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),m=d.name!=c;(p||m)&&a(RegExp.prototype,c,function(){var h=l(this),g=String(h.source),y=h.flags;return"/"+g+"/"+String(y===void 0&&h instanceof RegExp&&!("flags"in f)?u.call(h):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Set",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),h=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".endsWith,m=Math.min,h=h("endsWith");a({target:"String",proto:!0,forced:!!(d||h||!(a=l(String.prototype,"endsWith"))||a.writable)&&!h},{endsWith:function(g){var y=String(f(this)),b=(c(g),1<arguments.length?arguments[1]:void 0),x=u(y.length),b=b===void 0?x:m(u(b),x),x=String(g);return p?p.call(y,x,b):y.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/not-a-regexp"),u=o("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!o("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(u(this)).indexOf(l(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(u,i,s){"use strict";var a=u("../internals/string-multibyte").charAt,l=u("../internals/internal-state"),u=u("../internals/define-iterator"),c="String Iterator",f=l.set,d=l.getterFor(c);u(String,"String",function(p){f(this,{type:c,string:String(p),index:0})},function(){var p=d(this),m=p.string,h=p.index;return h>=m.length?{value:void 0,done:!0}:(m=a(m,h),p.index+=m.length,{value:m,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-length"),c=o("../internals/require-object-coercible"),f=o("../internals/advance-string-index"),d=o("../internals/regexp-exec-abstract");a("match",1,function(p,m,h){return[function(g){var y=c(this),b=g?.[p];return b!==void 0?b.call(g,y):new RegExp(g)[p](String(y))},function(g){var y=h(m,g,this);if(y.done)return y.value;var b=l(g),x=String(this);if(!b.global)return d(b,x);for(var v=b.unicode,w=[],_=b.lastIndex=0;(C=d(b,x))!==null;){var C=String(C[0]);(w[_]=C)===""&&(b.lastIndex=f(x,u(b.lastIndex),v)),_++}return _===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-pad").start;a({target:"String",proto:!0,forced:o("../internals/string-pad-webkit-bug")},{padStart:function(u){return l(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(o,i,s){o("../internals/export")({target:"String",proto:!0},{repeat:o("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/require-object-coercible"),p=o("../internals/advance-string-index"),m=o("../internals/regexp-exec-abstract"),h=Math.max,g=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;a("replace",2,function(v,w,_,C){var S=C.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=C.REPLACE_KEEPS_$0,A=S?"$":"$0";return[function(N,k){var M=d(this),I=N?.[v];return I!==void 0?I.call(N,M,k):w.call(String(M),N,k)},function(N,k){if(!S&&E||typeof k=="string"&&k.indexOf(A)===-1){var M=_(w,N,this,k);if(M.done)return M.value}for(var I,L=l(N),P=String(this),R=typeof k=="function",V=(R||(k=String(k)),L.global),G=(V&&(I=L.unicode,L.lastIndex=0),[]);($=m(L,P))!==null&&(G.push($),V);)String($[0])===""&&(L.lastIndex=p(P,c(L.lastIndex),I));for(var U,Y="",X=0,pe=0;pe<G.length;pe++){for(var $=G[pe],F=String($[0]),z=h(g(f($.index),P.length),0),q=[],ee=1;ee<$.length;ee++)q.push((U=$[ee])===void 0?U:String(U));var ae=$.groups,Q=R?(Q=[F].concat(q,z,P),ae!==void 0&&Q.push(ae),String(k.apply(void 0,Q))):function(le,ie,Z,ge,ne,ye){var xe=Z+le.length,Ne=ge.length,Ae=x;return ne!==void 0&&(ne=u(ne),Ae=b),w.call(ye,Ae,function(Me,ze){var lt;switch(ze.charAt(0)){case"$":return"$";case"&":return le;case"`":return ie.slice(0,Z);case"'":return ie.slice(xe);case"<":lt=ne[ze.slice(1,-1)];break;default:var We,Bt=+ze;if(Bt==0)return Me;if(Ne<Bt)return(We=y(Bt/10))!==0&&We<=Ne?ge[We-1]===void 0?ze.charAt(1):ge[We-1]+ze.charAt(1):Me;lt=ge[Bt-1]}return lt===void 0?"":lt})}(F,P,z,q,ae,k);X<=z&&(Y+=P.slice(X,z)+Q,X=z+F.length)}return Y+P.slice(X)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/require-object-coercible"),c=o("../internals/same-value"),f=o("../internals/regexp-exec-abstract");a("search",1,function(d,p,m){return[function(h){var g=u(this),y=h?.[d];return y!==void 0?y.call(h,g):new RegExp(h)[d](String(g))},function(h){var g,y=m(p,h,this);return y.done?y.value:(y=l(h),h=String(this),g=y.lastIndex,c(g,0)||(y.lastIndex=0),h=f(y,h),c(y.lastIndex,g)||(y.lastIndex=g),h===null?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(g,i,s){"use strict";var a=g("../internals/fix-regexp-well-known-symbol-logic"),l=g("../internals/is-regexp"),u=g("../internals/an-object"),c=g("../internals/require-object-coercible"),f=g("../internals/species-constructor"),d=g("../internals/advance-string-index"),p=g("../internals/to-length"),m=g("../internals/regexp-exec-abstract"),h=g("../internals/regexp-exec"),g=g("../internals/fails"),y=[].push,b=Math.min,x=4294967295,v=!g(function(){return!RegExp(x,"y")});a("split",2,function(w,_,C){var S="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(E,A){var N=String(c(this)),k=A===void 0?x:A>>>0;if(k==0)return[];if(E===void 0)return[N];if(!l(E))return _.call(N,E,k);for(var M,I,L,P=[],A=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),R=0,V=new RegExp(E.source,A+"g");(M=h.call(V,N))&&!(R<(I=V.lastIndex)&&(P.push(N.slice(R,M.index)),1<M.length&&M.index<N.length&&y.apply(P,M.slice(1)),L=M[0].length,R=I,P.length>=k));)V.lastIndex===M.index&&V.lastIndex++;return R===N.length?!L&&V.test("")||P.push(""):P.push(N.slice(R)),P.length>k?P.slice(0,k):P}:"0".split(void 0,0).length?function(E,A){return E===void 0&&A===0?[]:_.call(this,E,A)}:_;return[function(E,A){var N=c(this),k=E?.[w];return k!==void 0?k.call(E,N,A):S.call(String(N),E,A)},function(M,A){var N=C(S,M,this,A,S!==_);if(N.done)return N.value;var N=u(M),k=String(this),M=f(N,RegExp),I=N.unicode,L=(N.ignoreCase?"i":"")+(N.multiline?"m":"")+(N.unicode?"u":"")+(v?"y":"g"),P=new M(v?N:"^(?:"+N.source+")",L),R=A===void 0?x:A>>>0;if(R==0)return[];if(k.length===0)return m(P,k)===null?[k]:[];for(var V=0,G=0,U=[];G<k.length;){P.lastIndex=v?G:0;var Y,X=m(P,v?k:k.slice(G));if(X===null||(Y=b(p(P.lastIndex+(v?0:G)),k.length))===V)G=d(k,G,I);else{if(U.push(k.slice(V,G)),U.length===R)return U;for(var pe=1;pe<=X.length-1;pe++)if(U.push(X[pe]),U.length===R)return U;G=V=Y}}return U.push(k.slice(V)),U}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),h=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".startsWith,m=Math.min,h=h("startsWith");a({target:"String",proto:!0,forced:!!(d||h||!(a=l(String.prototype,"startsWith"))||a.writable)&&!h},{startsWith:function(x){var y=String(f(this)),b=(c(x),u(m(1<arguments.length?arguments[1]:void 0,y.length))),x=String(x);return p?p.call(y,x,b):y.slice(b,b+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/create-html");a({target:"String",proto:!0,forced:o("../internals/string-html-forced")("sub")},{sub:function(){return l(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-trim").trim;a({target:"String",proto:!0,forced:o("../internals/string-trim-forced")("trim")},{trim:function(){return l(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(b,i,s){"use strict";var a,l,u,c,f,d=b("../internals/export"),p=b("../internals/descriptors"),m=b("../internals/global"),h=b("../internals/has"),g=b("../internals/is-object"),y=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=m.Symbol;!p||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(a={},b(l=function(){var v=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof l?new x(v):v===void 0?x():x(v);return v===""&&(a[w]=!0),w},x),(m=l.prototype=x.prototype).constructor=l,u=m.toString,c=String(x("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,y(m,"description",{configurable:!0,get:function(){var v=g(this)?this.valueOf():this,w=u.call(v);return h(a,v)?"":(v=c?w.slice(7,-1):w.replace(f,"$1"))===""?void 0:v}}),d({global:!0,forced:!0},{Symbol:l}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(o,i,s){o("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(ie,i,s){"use strict";function a(oe,be){var Oe=lt[oe]=N(ye[le]);return Z(Oe,{type:Q,tag:oe,description:be}),h||(Oe.description=be),Oe}function l(oe,Ve){_(oe);var Oe=S(Ve),Ve=k(Oe).concat(he(Oe));return ee(Ve,function(Qe){h&&!fe.call(Oe,Qe)||Ge(oe,Qe,Oe[Qe])}),oe}function u(Ve,Qe){var Oe,Ve=S(Ve),Qe=E(Qe,!0);if(Ve!==ne||!x(lt,Qe)||x(We,Qe))return!(Oe=Ne(Ve,Qe))||!x(lt,Qe)||x(Ve,ae)&&Ve[ae][Qe]||(Oe.enumerable=!0),Oe}function c(be){var be=Me(S(be)),Oe=[];return ee(be,function(Ve){x(lt,Ve)||x(X,Ve)||Oe.push(Ve)}),Oe}var f=ie("../internals/export"),d=ie("../internals/global"),p=ie("../internals/get-built-in"),m=ie("../internals/is-pure"),h=ie("../internals/descriptors"),g=ie("../internals/native-symbol"),y=ie("../internals/use-symbol-as-uid"),b=ie("../internals/fails"),x=ie("../internals/has"),v=ie("../internals/is-array"),w=ie("../internals/is-object"),_=ie("../internals/an-object"),C=ie("../internals/to-object"),S=ie("../internals/to-indexed-object"),E=ie("../internals/to-primitive"),A=ie("../internals/create-property-descriptor"),N=ie("../internals/object-create"),k=ie("../internals/object-keys"),M=ie("../internals/object-get-own-property-names"),I=ie("../internals/object-get-own-property-names-external"),L=ie("../internals/object-get-own-property-symbols"),P=ie("../internals/object-get-own-property-descriptor"),R=ie("../internals/object-define-property"),V=ie("../internals/object-property-is-enumerable"),G=ie("../internals/create-non-enumerable-property"),U=ie("../internals/redefine"),Y=ie("../internals/shared"),At=ie("../internals/shared-key"),X=ie("../internals/hidden-keys"),pe=ie("../internals/uid"),$=ie("../internals/well-known-symbol"),F=ie("../internals/well-known-symbol-wrapped"),z=ie("../internals/define-well-known-symbol"),q=ie("../internals/set-to-string-tag"),Rt=ie("../internals/internal-state"),ee=ie("../internals/array-iteration").forEach,ae=At("hidden"),Q="Symbol",le="prototype",ie=$("toPrimitive"),Z=Rt.set,ge=Rt.getterFor(Q),ne=Object[le],ye=d.Symbol,xe=p("JSON","stringify"),Ne=P.f,Ae=R.f,Me=I.f,ze=V.f,lt=Y("symbols"),We=Y("op-symbols"),Bt=Y("string-to-symbol-registry"),Tt=Y("symbol-to-string-registry"),At=Y("wks"),Rt=d.QObject,Nt=!Rt||!Rt[le]||!Rt[le].findChild,Le=h&&b(function(){return N(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(oe,be,Oe){var Ve=Ne(ne,be);Ve&&delete ne[be],Ae(oe,be,Oe),Ve&&oe!==ne&&Ae(ne,be,Ve)}:Ae,ut=y?function(oe){return typeof oe=="symbol"}:function(oe){return Object(oe)instanceof ye},Ge=function(oe,be,Oe){return oe===ne&&Ge(We,be,Oe),_(oe),be=E(be,!0),_(Oe),(x(lt,be)?(Oe.enumerable?(x(oe,ae)&&oe[ae][be]&&(oe[ae][be]=!1),Oe=N(Oe,{enumerable:A(0,!1)})):(x(oe,ae)||Ae(oe,ae,A(1,{})),oe[ae][be]=!0),Le):Ae)(oe,be,Oe)},fe=function(be){var be=E(be,!0),Oe=ze.call(this,be);return!(this===ne&&x(lt,be)&&!x(We,be))&&(!(Oe||!x(this,be)||!x(lt,be)||x(this,ae)&&this[ae][be])||Oe)},he=function(Oe){var be=Oe===ne,Oe=Me(be?We:S(Oe)),Ve=[];return ee(Oe,function(Qe){!x(lt,Qe)||be&&!x(ne,Qe)||Ve.push(lt[Qe])}),Ve};g||(U((ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor");var oe=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,be=pe(oe),Oe=function(Ve){this===ne&&Oe.call(We,Ve),x(this,ae)&&x(this[ae],be)&&(this[ae][be]=!1),Le(this,be,A(1,Ve))};return h&&Nt&&Le(ne,be,{configurable:!0,set:Oe}),a(be,oe)})[le],"toString",function(){return ge(this).tag}),U(ye,"withoutSetter",function(oe){return a(pe(oe),oe)}),V.f=fe,R.f=Ge,P.f=u,M.f=I.f=c,L.f=he,F.f=function(oe){return a($(oe),oe)},h&&(Ae(ye[le],"description",{configurable:!0,get:function(){return ge(this).description}}),m||U(ne,"propertyIsEnumerable",fe,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:ye}),ee(k(At),function(oe){z(oe)}),f({target:Q,stat:!0,forced:!g},{for:function(Oe){var be,Oe=String(Oe);return x(Bt,Oe)?Bt[Oe]:(be=ye(Oe),Bt[Oe]=be,Tt[be]=Oe,be)},keyFor:function(oe){if(!ut(oe))throw TypeError(oe+" is not a symbol");if(x(Tt,oe))return Tt[oe]},useSetter:function(){Nt=!0},useSimple:function(){Nt=!1}}),f({target:"Object",stat:!0,forced:!g,sham:!h},{create:function(oe,be){return be===void 0?N(oe):l(N(oe),be)},defineProperty:Ge,defineProperties:l,getOwnPropertyDescriptor:u}),f({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:c,getOwnPropertySymbols:he}),f({target:"Object",stat:!0,forced:b(function(){L.f(1)})},{getOwnPropertySymbols:function(oe){return L.f(C(oe))}}),xe&&f({target:"JSON",stat:!0,forced:!g||b(function(){var oe=ye();return xe([oe])!="[null]"||xe({a:oe})!="{}"||xe(Object(oe))!="{}"})},{stringify:function(oe,be,Oe){for(var Ve,Qe=[oe],_t=1;_t<arguments.length;)Qe.push(arguments[_t++]);if((w(Ve=be)||oe!==void 0)&&!ut(oe))return v(be)||(be=function(Dt,Ft){if(typeof Ve=="function"&&(Ft=Ve.call(this,Dt,Ft)),!ut(Ft))return Ft}),Qe[1]=be,xe.apply(null,Qe)}}),ye[le][ie]||G(ye[le],ie,ye[le].valueOf),q(ye,Q),X[ae]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-copy-within"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(c,f){return l.call(u(this),c,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").every,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-fill"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").filter,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(d){for(var p=l(c(this),d,1<arguments.length?arguments[1]:void 0),d=u(this,this.constructor),m=0,h=p.length,g=new(f(d))(h);m<h;)g[m]=p[m++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").findIndex,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").find,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(o,i,s){o("../internals/typed-array-constructor")("Float32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],217:[function(o,i,s){o("../internals/typed-array-constructor")("Float64",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],218:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").forEach,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(c){l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").includes,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").indexOf,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(o,i,s){o("../internals/typed-array-constructor")("Int16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],222:[function(o,i,s){o("../internals/typed-array-constructor")("Int32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],223:[function(l,i,s){"use strict";function a(){return u.call(d(this))}var h=l("../internals/global"),m=l("../internals/array-buffer-view-core"),p=l("../modules/es.array.iterator"),l=l("../internals/well-known-symbol")("iterator"),h=h.Uint8Array,u=p.values,c=p.keys,f=p.entries,d=m.aTypedArray,p=m.exportTypedArrayMethod,m=h&&h.prototype[l],h=!!m&&(m.name=="values"||m.name==null);p("entries",function(){return f.call(d(this))}),p("keys",function(){return c.call(d(this))}),p("values",a,!h),p(l,a,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].join;l("join",function(c){return u.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-last-index-of"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").map,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(d){return l(c(this),d,1<arguments.length?arguments[1]:void 0,function(p,m){return new(f(u(p,p.constructor)))(m)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").right,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").left,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=Math.floor;l("reverse",function(){for(var c,f=a(this).length,d=u(f/2),p=0;p<d;)c=this[p],this[p++]=this[--f],this[f]=c;return this})},{"../internals/array-buffer-view-core":12}],230:[function(f,i,s){"use strict";var a=f("../internals/array-buffer-view-core"),l=f("../internals/to-length"),u=f("../internals/to-offset"),c=f("../internals/to-object"),f=f("../internals/fails"),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(p){d(this);var m=u(1<arguments.length?arguments[1]:void 0,1),h=this.length,g=c(p),y=l(g.length),b=0;if(h<y+m)throw RangeError("Wrong length");for(;b<y;)this[m+b]=g[b++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(l,i,s){"use strict";var f=l("../internals/array-buffer-view-core"),a=l("../internals/species-constructor"),l=l("../internals/fails"),u=f.aTypedArray,c=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,d=[].slice;f("slice",function(p,m){for(var h=d.call(u(this),p,m),p=a(this,this.constructor),g=0,y=h.length,b=new(c(p))(y);g<y;)b[g]=h[g++];return b},l(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").some,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].sort;l("sort",function(c){return u.call(a(this),c)})},{"../internals/array-buffer-view-core":12}],234:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/to-length"),u=o("../internals/to-absolute-index"),c=o("../internals/species-constructor"),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(g,p){var m=f(this),h=m.length,g=u(g,h);return new(c(m,m.constructor))(m.buffer,m.byteOffset+g*m.BYTES_PER_ELEMENT,l((p===void 0?h:u(p,h))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(l,i,s){"use strict";var f=l("../internals/global"),a=l("../internals/array-buffer-view-core"),l=l("../internals/fails"),u=f.Int8Array,c=a.aTypedArray,f=a.exportTypedArrayMethod,d=[].toLocaleString,p=[].slice,m=!!u&&l(function(){d.call(new u(1))});f("toLocaleString",function(){return d.apply(m?p.call(c(this)):c(this),arguments)},l(function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()})||!l(function(){u.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(l,i,s){"use strict";var a=l("../internals/array-buffer-view-core").exportTypedArrayMethod,f=l("../internals/fails"),l=l("../internals/global").Uint8Array,l=l&&l.prototype||{},u=[].toString,c=[].join,f=(f(function(){u.call({})})&&(u=function(){return c.call(this)}),l.toString!=u);a("toString",u,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(o,i,s){o("../internals/typed-array-constructor")("Uint16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],238:[function(o,i,s){o("../internals/typed-array-constructor")("Uint32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],239:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],240:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(x,_,s){"use strict";function a(C){return function(){return C(this,arguments.length?arguments[0]:void 0)}}var l,u,c,f,d,v=x("../internals/global"),p=x("../internals/redefine-all"),m=x("../internals/internal-metadata"),h=x("../internals/collection"),g=x("../internals/collection-weak"),y=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),v=!v.ActiveXObject&&"ActiveXObject"in v,w=Object.isExtensible,_=_.exports=h("WeakMap",a,g);x&&v&&(l=g.getConstructor(a,"WeakMap",!0),m.REQUIRED=!0,h=_.prototype,u=h.delete,c=h.has,f=h.get,d=h.set,p(h,{delete:function(C){var S;return y(C)&&!w(C)?((S=b(this)).frozen||(S.frozen=new l),u.call(this,C)||S.frozen.delete(C)):u.call(this,C)},has:function(C){var S;return y(C)&&!w(C)?((S=b(this)).frozen||(S.frozen=new l),c.call(this,C)||S.frozen.has(C)):c.call(this,C)},get:function(C){var S;return!y(C)||w(C)||((S=b(this)).frozen||(S.frozen=new l),c.call(this,C))?f.call(this,C):S.frozen.get(C)},set:function(C,S){var E;return!y(C)||w(C)||((E=b(this)).frozen||(E.frozen=new l),c.call(this,C))?d.call(this,C,S):E.frozen.set(C,S),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(o,i,s){var a,l=o("../internals/global"),u=o("../internals/dom-iterables"),c=o("../internals/array-for-each"),f=o("../internals/create-non-enumerable-property");for(a in u){var d=l[a],d=d&&d.prototype;if(d&&d.forEach!==c)try{f(d,"forEach",c)}catch{d.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(d,i,s){var a,l=d("../internals/global"),u=d("../internals/dom-iterables"),c=d("../modules/es.array.iterator"),f=d("../internals/create-non-enumerable-property"),d=d("../internals/well-known-symbol"),p=d("iterator"),m=d("toStringTag"),h=c.values;for(a in u){var g=l[a],y=g&&g.prototype;if(y){if(y[p]!==h)try{f(y,p,h)}catch{y[p]=h}if(y[m]||f(y,m,a),u[a]){for(var b in c)if(y[b]!==c[b])try{f(y,b,c[b])}catch{y[b]=c[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(ae,i,s){"use strict";ae("../modules/es.array.iterator");function a(Q){try{return decodeURIComponent(Q)}catch{return Q}}function l(Q){return z[Q]}function u(Q){return encodeURIComponent(Q).replace(F,l)}function c(Q){this.entries.length=0,q(this.entries,Q)}function f(Q,le){if(Q<le)throw TypeError("Not enough arguments")}function d(){v(this,d,R);var Q,le,ie,Z,ge,ne,ye,xe,Ne=0<arguments.length?arguments[0]:void 0,Ae=[];if(G(this,{type:R,entries:Ae,updateURL:function(){},updateSearchParams:c}),Ne!==void 0)if(E(Ne))if(typeof(Q=M(Ne))=="function")for(ie=(le=Q.call(Ne)).next;!(Z=ie.call(le)).done;){if((ne=(ge=(Z=k(S(Z.value))).next).call(Z)).done||(ye=ge.call(Z)).done||!ge.call(Z).done)throw TypeError("Expected sequence with length 2");Ae.push({key:ne.value+"",value:ye.value+""})}else for(xe in Ne)w(Ne,xe)&&Ae.push({key:xe,value:Ne[xe]+""});else q(Ae,typeof Ne=="string"?Ne.charAt(0)==="?"?Ne.slice(1):Ne:Ne+"")}var p=ae("../internals/export"),P=ae("../internals/get-built-in"),m=ae("../internals/native-url"),h=ae("../internals/redefine"),g=ae("../internals/redefine-all"),y=ae("../internals/set-to-string-tag"),b=ae("../internals/create-iterator-constructor"),x=ae("../internals/internal-state"),v=ae("../internals/an-instance"),w=ae("../internals/has"),_=ae("../internals/function-bind-context"),C=ae("../internals/classof"),S=ae("../internals/an-object"),E=ae("../internals/is-object"),A=ae("../internals/object-create"),N=ae("../internals/create-property-descriptor"),k=ae("../internals/get-iterator"),M=ae("../internals/get-iterator-method"),ae=ae("../internals/well-known-symbol"),I=P("fetch"),L=P("Headers"),P=ae("iterator"),R="URLSearchParams",V=R+"Iterator",G=x.set,U=x.getterFor(R),Y=x.getterFor(V),X=/\+/g,pe=Array(4),$=function(Q){var le,ie=Q.replace(X," "),Z=4;try{return decodeURIComponent(ie)}catch{for(;Z;)ie=ie.replace((le=Z--,pe[le-1]||(pe[le-1]=RegExp("((?:%[\\da-f]{2}){"+le+"})","gi"))),a);return ie}},F=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},q=function(Q,le){if(le)for(var ie,Z=le.split("&"),ge=0;ge<Z.length;)(ie=Z[ge++]).length&&(ie=ie.split("="),Q.push({key:$(ie.shift()),value:$(ie.join("="))}))},ee=b(function(Q,le){G(this,{type:V,iterator:k(U(Q).entries),kind:le})},"Iterator",function(){var le=Y(this),Q=le.kind,le=le.iterator.next(),ie=le.value;return le.done||(le.value=Q==="keys"?ie.key:Q==="values"?ie.value:[ie.key,ie.value]),le}),ae=d.prototype;g(ae,{append:function(Q,le){f(arguments.length,2);var ie=U(this);ie.entries.push({key:Q+"",value:le+""}),ie.updateURL()},delete:function(Q){f(arguments.length,1);for(var le=U(this),ie=le.entries,Z=Q+"",ge=0;ge<ie.length;)ie[ge].key===Z?ie.splice(ge,1):ge++;le.updateURL()},get:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",Z=0;Z<le.length;Z++)if(le[Z].key===ie)return le[Z].value;return null},getAll:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",Z=[],ge=0;ge<le.length;ge++)le[ge].key===ie&&Z.push(le[ge].value);return Z},has:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",Z=0;Z<le.length;)if(le[Z++].key===ie)return!0;return!1},set:function(Q,le){f(arguments.length,1);for(var ie,Z=U(this),ge=Z.entries,ne=!1,ye=Q+"",xe=le+"",Ne=0;Ne<ge.length;Ne++)(ie=ge[Ne]).key===ye&&(ne?ge.splice(Ne--,1):(ne=!0,ie.value=xe));ne||ge.push({key:ye,value:xe}),Z.updateURL()},sort:function(){for(var Q,le,ie=U(this),Z=ie.entries,ge=Z.slice(),ne=Z.length=0;ne<ge.length;ne++){for(Q=ge[ne],le=0;le<ne;le++)if(Z[le].key>Q.key){Z.splice(le,0,Q);break}le===ne&&Z.push(Q)}ie.updateURL()},forEach:function(Q){for(var le,ie=U(this).entries,Z=_(Q,1<arguments.length?arguments[1]:void 0,3),ge=0;ge<ie.length;)Z((le=ie[ge++]).value,le.key,this)},keys:function(){return new ee(this,"keys")},values:function(){return new ee(this,"values")},entries:function(){return new ee(this,"entries")}},{enumerable:!0}),h(ae,P,ae.entries),h(ae,"toString",function(){for(var Q,le=U(this).entries,ie=[],Z=0;Z<le.length;)Q=le[Z++],ie.push(u(Q.key)+"="+u(Q.value));return ie.join("&")},{enumerable:!0}),y(d,R),p({global:!0,forced:!m},{URLSearchParams:d}),m||typeof I!="function"||typeof L!="function"||p({global:!0,enumerable:!0,forced:!0},{fetch:function(ge){var le,ie,Z,ge=[ge];return 1<arguments.length&&(E(le=arguments[1])&&(ie=le.body,C(ie)===R&&((Z=le.headers?new L(le.headers):new L).has("content-type")||Z.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),le=A(le,{body:N(0,String(ie)),headers:N(0,Z)}))),ge.push(le)),I.apply(this,ge)}}),i.exports={URLSearchParams:d,getState:U}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,i,s){"use strict";k("../modules/es.string.iterator");function a(ke){var St,qt,xt,Cn;if(typeof ke=="number"){for(St=[],qt=0;qt<4;qt++)St.unshift(ke%256),ke=V(ke/256);return St.join(".")}if(typeof ke!="object")return ke;for(St="",xt=ye(ke),qt=0;qt<8;qt++)Cn&&ke[qt]===0||(Cn=Cn&&!1,xt===qt?(St+=qt?":":"::",Cn=!0):(St+=ke[qt].toString(16),qt<7&&(St+=":")));return"["+St+"]"}function l(ke){return!ke.host||ke.cannotBeABaseURL||ke.scheme=="file"}function u(ke,St,qt,xt){var Cn,ht,Gn,zt=qt||ut,Mn=0,Vt="",xs=!1,aa=!1,is=!1;for(qt||(ke.scheme="",ke.username="",ke.password="",ke.host=null,ke.port=null,ke.path=[],ke.query=null,ke.fragment=null,ke.cannotBeABaseURL=!1,St=St.replace(Z,"")),St=St.replace(ge,""),Cn=C(St);Mn<=Cn.length;){switch(ht=Cn[Mn],zt){case ut:if(!ht||!$.test(ht)){if(qt)return Y;zt=fe;continue}Vt+=ht.toLowerCase(),zt=Ge;break;case Ge:if(ht&&(F.test(ht)||ht=="+"||ht=="-"||ht=="."))Vt+=ht.toLowerCase();else{if(ht!=":"){if(qt)return Y;Vt="",zt=fe,Mn=0;continue}if(qt&&(We(ke)!=w(lt,Vt)||Vt=="file"&&(Bt(ke)||ke.port!==null)||ke.scheme=="file"&&!ke.host))return;if(ke.scheme=Vt,qt)return void(We(ke)&&lt[ke.scheme]==ke.port&&(ke.port=null));Vt="",ke.scheme=="file"?zt=Qr:We(ke)&&xt&&xt.scheme==ke.scheme?zt=he:We(ke)?zt=Ve:Cn[Mn+1]=="/"?(zt=oe,Mn++):(ke.cannotBeABaseURL=!0,ke.path.push(""),zt=pi)}break;case fe:if(!xt||xt.cannotBeABaseURL&&ht!="#")return Y;if(xt.cannotBeABaseURL&&ht=="#"){ke.scheme=xt.scheme,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",ke.cannotBeABaseURL=!0,zt=Ms;break}zt=xt.scheme=="file"?Qr:be;continue;case he:if(ht!="/"||Cn[Mn+1]!="/"){zt=be;continue}zt=Qe,Mn++;break;case oe:if(ht=="/"){zt=_t;break}zt=Fr;continue;case be:if(ke.scheme=xt.scheme,ht==d)ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query;else if(ht=="/"||ht=="\\"&&We(ke))zt=Oe;else if(ht=="?")ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query="",zt=ql;else{if(ht!="#"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.path.pop(),zt=Fr;continue}ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=Ms}break;case Oe:if(!We(ke)||ht!="/"&&ht!="\\"){if(ht!="/"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,zt=Fr;continue}zt=_t}else zt=Qe;break;case Ve:if(zt=Qe,ht!="/"||Vt.charAt(Mn+1)!="/")continue;Mn++;break;case Qe:if(ht=="/"||ht=="\\")break;zt=_t;continue;case _t:if(ht=="@"){xs&&(Vt="%40"+Vt);for(var xs=!0,Fa=C(Vt),Jh=0;Jh<Fa.length;Jh++){var Rf=Fa[Jh];Rf!=":"||is?(Rf=ze(Rf,Me),is?ke.password+=Rf:ke.username+=Rf):is=!0}Vt=""}else if(ht==d||ht=="/"||ht=="?"||ht=="#"||ht=="\\"&&We(ke)){if(xs&&Vt=="")return U;Mn-=C(Vt).length+1,Vt="",zt=Dt}else Vt+=ht;break;case Dt:case Ft:if(qt&&ke.scheme=="file"){zt=lr;continue}if(ht!=":"||aa){if(ht==d||ht=="/"||ht=="?"||ht=="#"||ht=="\\"&&We(ke)){if(We(ke)&&Vt=="")return X;if(qt&&Vt==""&&(Bt(ke)||ke.port!==null))return;if(Gn=ne(ke,Vt))return Gn;if(Vt="",zt=qr,qt)return;continue}ht=="["?aa=!0:ht=="]"&&(aa=!1),Vt+=ht}else{if(Vt=="")return X;if(Gn=ne(ke,Vt))return Gn;if(Vt="",zt=Ut,qt==Ft)return}break;case Ut:if(!z.test(ht)){if(ht==d||ht=="/"||ht=="?"||ht=="#"||ht=="\\"&&We(ke)||qt){if(Vt!=""){var eg=parseInt(Vt,10);if(65535<eg)return pe;ke.port=We(ke)&&eg===lt[ke.scheme]?null:eg,Vt=""}if(qt)return;zt=qr;continue}return pe}Vt+=ht;break;case Qr:if(ke.scheme="file",ht=="/"||ht=="\\")zt=Mr;else{if(!xt||xt.scheme!="file"){zt=Fr;continue}if(ht==d)ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query;else if(ht=="?")ke.host=xt.host,ke.path=xt.path.slice(),ke.query="",zt=ql;else{if(ht!="#"){At(Cn.slice(Mn).join(""))||(ke.host=xt.host,ke.path=xt.path.slice(),Rt(ke)),zt=Fr;continue}ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=Ms}}break;case Mr:if(ht=="/"||ht=="\\"){zt=lr;break}xt&&xt.scheme=="file"&&!At(Cn.slice(Mn).join(""))&&(Tt(xt.path[0],!0)?ke.path.push(xt.path[0]):ke.host=xt.host),zt=Fr;continue;case lr:if(ht==d||ht=="/"||ht=="\\"||ht=="?"||ht=="#"){if(!qt&&Tt(Vt))zt=Fr;else{if(Vt==""){if(ke.host="",qt)return}else{if(Gn=ne(ke,Vt))return Gn;if(ke.host=="localhost"&&(ke.host=""),qt)return;Vt=""}zt=qr}continue}Vt+=ht;break;case qr:if(We(ke)){if(zt=Fr,ht!="/"&&ht!="\\")continue}else if(qt||ht!="?")if(qt||ht!="#"){if(ht!=d&&(zt=Fr,ht!="/"))continue}else ke.fragment="",zt=Ms;else ke.query="",zt=ql;break;case Fr:if(ht==d||ht=="/"||ht=="\\"&&We(ke)||!qt&&(ht=="?"||ht=="#")){if(Le(Vt)?(Rt(ke),ht=="/"||ht=="\\"&&We(ke)||ke.path.push("")):Nt(Vt)?ht=="/"||ht=="\\"&&We(ke)||ke.path.push(""):(ke.scheme=="file"&&!ke.path.length&&Tt(Vt)&&(ke.host&&(ke.host=""),Vt=Vt.charAt(0)+":"),ke.path.push(Vt)),Vt="",ke.scheme=="file"&&(ht==d||ht=="?"||ht=="#"))for(;1<ke.path.length&&ke.path[0]==="";)ke.path.shift();ht=="?"?(ke.query="",zt=ql):ht=="#"&&(ke.fragment="",zt=Ms)}else Vt+=ze(ht,Ae);break;case pi:ht=="?"?(ke.query="",zt=ql):ht=="#"?(ke.fragment="",zt=Ms):ht!=d&&(ke.path[0]+=ze(ht,xe));break;case ql:qt||ht!="#"?ht!=d&&(ht=="'"&&We(ke)?ke.query+="%27":ke.query+=ht=="#"?"%23":ze(ht,xe)):(ke.fragment="",zt=Ms);break;case Ms:ht!=d&&(ke.fragment+=ze(ht,Ne))}Mn++}}function c(ht){var St,qt,xt=v(this,c,"URL"),Cn=1<arguments.length?arguments[1]:void 0,ht=String(ht),Gn=P(xt,{type:"URL"});if(Cn!==void 0){if(Cn instanceof c)St=R(Cn);else if(qt=u(St={},String(Cn)))throw TypeError(qt)}if(qt=u(Gn,ht,null,St))throw TypeError(qt);var zt=Gn.searchParams=new I;(Cn=L(zt)).updateSearchParams(Gn.query),Cn.updateURL=function(){Gn.query=String(zt)||null},g||(xt.href=vi.call(xt),xt.origin=Vn.call(xt),xt.protocol=yl.call(xt),xt.username=Na.call(xt),xt.password=Lo.call(xt),xt.host=bl.call(xt),xt.hostname=zM.call(xt),xt.port=UM.call(xt),xt.pathname=VM.call(xt),xt.search=Y6.call(xt),xt.searchParams=GM.call(xt),xt.hash=WM.call(xt))}function f(ke,St){return{get:ke,set:St,configurable:!0,enumerable:!0}}var d,p,m,h=k("../internals/export"),g=k("../internals/descriptors"),y=k("../internals/native-url"),Co=k("../internals/global"),b=k("../internals/object-define-properties"),x=k("../internals/redefine"),v=k("../internals/an-instance"),w=k("../internals/has"),_=k("../internals/object-assign"),C=k("../internals/array-from"),S=k("../internals/string-multibyte").codeAt,E=k("../internals/string-punycode-to-ascii"),A=k("../internals/set-to-string-tag"),N=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),M=Co.URL,I=N.URLSearchParams,L=N.getState,P=k.set,R=k.getterFor("URL"),V=Math.floor,G=Math.pow,U="Invalid authority",Y="Invalid scheme",X="Invalid host",pe="Invalid port",$=/[A-Za-z]/,F=/[\d+-.A-Za-z]/,z=/\d/,q=/^(0x|0X)/,ee=/^[0-7]+$/,ae=/^\d+$/,Q=/^[\dA-Fa-f]+$/,le=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ie=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ge=/[\u0009\u000A\u000D]/g,ne=function(ke,St){var qt,xt,Cn;if(St.charAt(0)=="[")return St.charAt(St.length-1)=="]"&&(qt=function(ht){var Gn=[0,0,0,0,0,0,0,0],zt=0,Mn=null,Vt=0,xs,aa,is,Fa,Jh,Rf,eg,Oa=function(){return ht.charAt(Vt)};if(Oa()==":"){if(ht.charAt(1)!=":")return;Vt+=2,zt++,Mn=zt}for(;Oa();){if(zt==8)return;if(Oa()==":"){if(Mn!==null)return;Vt++,zt++,Mn=zt;continue}for(xs=aa=0;aa<4&&Q.test(Oa());)xs=xs*16+parseInt(Oa(),16),Vt++,aa++;if(Oa()=="."){if(aa==0||(Vt-=aa,zt>6))return;for(is=0;Oa();){if(Fa=null,is>0)if(Oa()=="."&&is<4)Vt++;else return;if(!z.test(Oa()))return;for(;z.test(Oa());){if(Jh=parseInt(Oa(),10),Fa===null)Fa=Jh;else{if(Fa==0)return;Fa=Fa*10+Jh}if(Fa>255)return;Vt++}Gn[zt]=Gn[zt]*256+Fa,is++,(is==2||is==4)&&zt++}if(is!=4)return;break}else if(Oa()==":"){if(Vt++,!Oa())return}else if(Oa())return;Gn[zt++]=xs}if(Mn!==null)for(Rf=zt-Mn,zt=7;zt!=0&&Rf>0;)eg=Gn[zt],Gn[zt--]=Gn[Mn+Rf-1],Gn[Mn+--Rf]=eg;else if(zt!=8)return;return Gn}(St.slice(1,-1)))?void(ke.host=qt):X;if(We(ke))return St=E(St),le.test(St)||(qt=function(ht){var Gn=ht.split("."),zt,Mn,Vt,xs,aa,is,Fa;if(Gn.length&&Gn[Gn.length-1]==""&&Gn.pop(),(zt=Gn.length)>4)return ht;for(Mn=[],Vt=0;Vt<zt;Vt++){if(xs=Gn[Vt],xs=="")return ht;if(aa=10,xs.length>1&&xs.charAt(0)=="0"&&(aa=q.test(xs)?16:8,xs=xs.slice(aa==8?1:2)),xs==="")is=0;else{if(!(aa==10?ae:aa==8?ee:Q).test(xs))return ht;is=parseInt(xs,aa)}Mn.push(is)}for(Vt=0;Vt<zt;Vt++)if(is=Mn[Vt],Vt==zt-1){if(is>=G(256,5-zt))return null}else if(is>255)return null;for(Fa=Mn.pop(),Vt=0;Vt<Mn.length;Vt++)Fa+=Mn[Vt]*G(256,3-Vt);return Fa}(St))===null?X:void(ke.host=qt);if(ie.test(St))return X;for(qt="",xt=C(St),Cn=0;Cn<xt.length;Cn++)qt+=ze(xt[Cn],xe);ke.host=qt},ye=function(ke){for(var St=null,qt=1,xt=null,Cn=0,ht=0;ht<8;ht++)ke[ht]!==0?(qt<Cn&&(St=xt,qt=Cn),xt=null,Cn=0):(xt===null&&(xt=ht),++Cn);return qt<Cn&&(St=xt,qt=Cn),St},xe={},Ne=_({},xe,{" ":1,'"':1,"<":1,">":1,"`":1}),Ae=_({},Ne,{"#":1,"?":1,"{":1,"}":1}),Me=_({},Ae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ze=function(ke,St){var qt=S(ke,0);return 32<qt&&qt<127&&!w(St,ke)?ke:encodeURIComponent(ke)},lt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},We=function(ke){return w(lt,ke.scheme)},Bt=function(ke){return ke.username!=""||ke.password!=""},Tt=function(ke,St){return ke.length==2&&$.test(ke.charAt(0))&&((ke=ke.charAt(1))==":"||!St&&ke=="|")},At=function(ke){return 1<ke.length&&Tt(ke.slice(0,2))&&(ke.length==2||(ke=ke.charAt(2))==="/"||ke==="\\"||ke==="?"||ke==="#")},Rt=function(ke){var St=ke.path,qt=St.length;!qt||ke.scheme=="file"&&qt==1&&Tt(St[0],!0)||St.pop()},Nt=function(ke){return ke==="."||ke.toLowerCase()==="%2e"},Le=function(ke){return(ke=ke.toLowerCase())===".."||ke==="%2e."||ke===".%2e"||ke==="%2e%2e"},ut={},Ge={},fe={},he={},oe={},be={},Oe={},Ve={},Qe={},_t={},Dt={},Ft={},Ut={},Qr={},Mr={},lr={},qr={},Fr={},pi={},ql={},Ms={},Co=c.prototype,vi=function(){var ke=R(this),St=ke.scheme,qt=ke.username,xt=ke.password,Cn=ke.host,ht=ke.port,Gn=ke.path,zt=ke.query,Mn=ke.fragment,Vt=St+":";return Cn!==null?(Vt+="//",Bt(ke)&&(Vt+=qt+(xt?":"+xt:"")+"@"),Vt+=a(Cn),ht!==null&&(Vt+=":"+ht)):St=="file"&&(Vt+="//"),Vt+=ke.cannotBeABaseURL?Gn[0]:Gn.length?"/"+Gn.join("/"):"",zt!==null&&(Vt+="?"+zt),Mn!==null&&(Vt+="#"+Mn),Vt},Vn=function(){var ke=R(this),St=ke.scheme,qt=ke.port;if(St=="blob")try{return new URL(St.path[0]).origin}catch{return"null"}return St!="file"&&We(ke)?St+"://"+a(ke.host)+(qt!==null?":"+qt:""):"null"},yl=function(){return R(this).scheme+":"},Na=function(){return R(this).username},Lo=function(){return R(this).password},bl=function(){var St=R(this),ke=St.host,St=St.port;return ke===null?"":St===null?a(ke):a(ke)+":"+St},zM=function(){var ke=R(this).host;return ke===null?"":a(ke)},UM=function(){var ke=R(this).port;return ke===null?"":String(ke)},VM=function(){var ke=R(this),St=ke.path;return ke.cannotBeABaseURL?St[0]:St.length?"/"+St.join("/"):""},Y6=function(){var ke=R(this).query;return ke?"?"+ke:""},GM=function(){return R(this).searchParams},WM=function(){var ke=R(this).fragment;return ke?"#"+ke:""};g&&b(Co,{href:f(vi,function(qt){var St=R(this),qt=String(qt),qt=u(St,qt);if(qt)throw TypeError(qt);L(St.searchParams).updateSearchParams(St.query)}),origin:f(Vn),protocol:f(yl,function(ke){var St=R(this);u(St,String(ke)+":",ut)}),username:f(Na,function(ke){var St=R(this),qt=C(String(ke));if(!l(St)){St.username="";for(var xt=0;xt<qt.length;xt++)St.username+=ze(qt[xt],Me)}}),password:f(Lo,function(ke){var St=R(this),qt=C(String(ke));if(!l(St)){St.password="";for(var xt=0;xt<qt.length;xt++)St.password+=ze(qt[xt],Me)}}),host:f(bl,function(ke){var St=R(this);St.cannotBeABaseURL||u(St,String(ke),Dt)}),hostname:f(zM,function(ke){var St=R(this);St.cannotBeABaseURL||u(St,String(ke),Ft)}),port:f(UM,function(ke){var St=R(this);l(St)||((ke=String(ke))==""?St.port=null:u(St,ke,Ut))}),pathname:f(VM,function(ke){var St=R(this);St.cannotBeABaseURL||(St.path=[],u(St,ke+"",qr))}),search:f(Y6,function(ke){var St=R(this);(ke=String(ke))==""?St.query=null:(ke.charAt(0)=="?"&&(ke=ke.slice(1)),St.query="",u(St,ke,ql)),L(St.searchParams).updateSearchParams(St.query)}),searchParams:f(GM),hash:f(WM,function(ke){var St=R(this);(ke=String(ke))==""?St.fragment=null:(ke.charAt(0)=="#"&&(ke=ke.slice(1)),St.fragment="",u(St,ke,Ms))})}),x(Co,"toJSON",function(){return vi.call(this)},{enumerable:!0}),x(Co,"toString",function(){return vi.call(this)},{enumerable:!0}),M&&(p=M.createObjectURL,m=M.revokeObjectURL,p&&x(c,"createObjectURL",function(ke){return p.apply(M,arguments)}),m&&x(c,"revokeObjectURL",function(ke){return m.apply(M,arguments)})),A(c,"URL"),h({global:!0,forced:!y,sham:!g},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(o,i,s){"use strict";i.exports=o("./").polyfill()},{"./":247}],247:[function(o,i,s){(function(a,l){var u,c;u=this,c=function(){"use strict";function f(ne){return typeof ne=="function"}var d=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},p=0,m=void 0,h=void 0,g=function(ne,ye){_[p]=ne,_[p+1]=ye,(p+=2)===2&&(h?h(C):I())},y=typeof window<"u"?window:void 0,b=y||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var ne=setTimeout;return function(){return ne(C,1)}}var _=new Array(1e3);function C(){for(var ne=0;ne<p;ne+=2)(0,_[ne])(_[ne+1]),_[ne]=void 0,_[ne+1]=void 0;p=0}function S(){try{var ne=Function("return this")().require("vertx");return(m=ne.runOnLoop||ne.runOnContext)!==void 0?function(){m(C)}:w()}catch{return w()}}var E,A,N,I=void 0;function k(ne,ye){var xe,Ne=this,Ae=new this.constructor(P),Me=(Ae[L]===void 0&&Q(Ae),Ne._state);return Me?(xe=arguments[Me-1],g(function(){return ee(Me,Ae,xe,Ne._result)})):z(Ne,Ae,ne,ye),Ae}function M(ne){var ye;return ne&&typeof ne=="object"&&ne.constructor===this?ne:(X(ye=new this(P),ne),ye)}var I=x?function(){return a.nextTick(C)}:b?(A=0,x=new b(C),N=document.createTextNode(""),x.observe(N,{characterData:!0}),function(){N.data=A=++A%2}):v?((E=new MessageChannel).port1.onmessage=C,function(){return E.port2.postMessage(0)}):(y===void 0&&typeof o=="function"?S:w)(),L=Math.random().toString(36).substring(2);function P(){}var R=void 0,V=1,G=2;function U(ne,ye,xe){g(function(Ne){var Ae=!1,Me=function(ze,lt,We,Bt){try{ze.call(lt,We,Bt)}catch(Tt){return Tt}}(xe,ye,function(ze){Ae||(Ae=!0,(ye!==ze?X:$)(Ne,ze))},function(ze){Ae||(Ae=!0,F(Ne,ze))},Ne._label);!Ae&&Me&&(Ae=!0,F(Ne,Me))},ne)}function Y(ne,ye,xe){var Ne,Ae;ye.constructor===ne.constructor&&xe===k&&ye.constructor.resolve===M?(Ne=ne,(Ae=ye)._state===V?$(Ne,Ae._result):Ae._state===G?F(Ne,Ae._result):z(Ae,void 0,function(Me){return X(Ne,Me)},function(Me){return F(Ne,Me)})):xe!==void 0&&f(xe)?U(ne,ye,xe):$(ne,ye)}function X(ne,ye){if(ne===ye)F(ne,new TypeError("You cannot resolve a promise with itself"));else if(xe=typeof ye,ye===null||xe!="object"&&xe!="function")$(ne,ye);else{xe=void 0;try{xe=ye.then}catch(Ne){return void F(ne,Ne)}Y(ne,ye,xe)}var xe}function pe(ne){ne._onerror&&ne._onerror(ne._result),q(ne)}function $(ne,ye){ne._state===R&&(ne._result=ye,ne._state=V,ne._subscribers.length!==0&&g(q,ne))}function F(ne,ye){ne._state===R&&(ne._state=G,ne._result=ye,g(pe,ne))}function z(ne,ye,xe,Ne){var Ae=ne._subscribers,Me=Ae.length;ne._onerror=null,Ae[Me]=ye,Ae[Me+V]=xe,Ae[Me+G]=Ne,Me===0&&ne._state&&g(q,ne)}function q(ne){var ye=ne._subscribers,xe=ne._state;if(ye.length!==0){for(var Ne,Ae=void 0,Me=ne._result,ze=0;ze<ye.length;ze+=3)Ne=ye[ze],Ae=ye[ze+xe],Ne?ee(xe,Ne,Ae,Me):Ae(Me);ne._subscribers.length=0}}function ee(ne,ye,xe,Ne){var Ae=f(xe),Me=void 0,ze=void 0,lt=!0;if(Ae){try{Me=xe(Ne)}catch(We){lt=!1,ze=We}if(ye===Me)return void F(ye,new TypeError("A promises callback cannot return that same promise."))}else Me=Ne;ye._state===R&&(Ae&&lt?X(ye,Me):lt===!1?F(ye,ze):ne===V?$(ye,Me):ne===G&&F(ye,Me))}var ae=0;function Q(ne){ne[L]=ae++,ne._state=void 0,ne._result=void 0,ne._subscribers=[]}ie.prototype._enumerate=function(ne){for(var ye=0;this._state===R&&ye<ne.length;ye++)this._eachEntry(ne[ye],ye)},ie.prototype._eachEntry=function(ne,ye){var xe=this._instanceConstructor,Ne=xe.resolve;if(Ne===M){var Ae,Me=void 0,ze=void 0,lt=!1;try{Me=ne.then}catch(We){lt=!0,ze=We}Me===k&&ne._state!==R?this._settledAt(ne._state,ye,ne._result):typeof Me!="function"?(this._remaining--,this._result[ye]=ne):xe===Z?(Ae=new xe(P),lt?F(Ae,ze):Y(Ae,ne,Me),this._willSettleAt(Ae,ye)):this._willSettleAt(new xe(function(We){return We(ne)}),ye)}else this._willSettleAt(Ne(ne),ye)},ie.prototype._settledAt=function(ne,ye,xe){var Ne=this.promise;Ne._state===R&&(this._remaining--,ne===G?F(Ne,xe):this._result[ye]=xe),this._remaining===0&&$(Ne,this._result)},ie.prototype._willSettleAt=function(ne,ye){var xe=this;z(ne,void 0,function(Ne){return xe._settledAt(V,ye,Ne)},function(Ne){return xe._settledAt(G,ye,Ne)})};var le=ie;function ie(ne,ye){this._instanceConstructor=ne,this.promise=new ne(P),this.promise[L]||Q(this.promise),d(ye)?(this.length=ye.length,this._remaining=ye.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ye),this._remaining!==0)||$(this.promise,this._result)):F(this.promise,new Error("Array Methods must be provided an Array"))}ge.prototype.catch=function(ne){return this.then(null,ne)},ge.prototype.finally=function(ne){var ye=this.constructor;return f(ne)?this.then(function(xe){return ye.resolve(ne()).then(function(){return xe})},function(xe){return ye.resolve(ne()).then(function(){throw xe})}):this.then(ne,ne)};var Z=ge;function ge(ne){if(this[L]=ae++,this._result=this._state=void 0,this._subscribers=[],P!==ne){if(typeof ne!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ge))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ye=this;try{ne(function(xe){X(ye,xe)},function(xe){F(ye,xe)})}catch(xe){F(ye,xe)}}}return Z.prototype.then=k,Z.all=function(ne){return new le(this,ne).promise},Z.race=function(ne){var ye=this;return d(ne)?new ye(function(xe,Ne){for(var Ae=ne.length,Me=0;Me<Ae;Me++)ye.resolve(ne[Me]).then(xe,Ne)}):new ye(function(xe,Ne){return Ne(new TypeError("You must pass an array to race."))})},Z.resolve=M,Z.reject=function(ne){var ye=new this(P);return F(ye,ne),ye},Z._setScheduler=function(ne){h=ne},Z._setAsap=function(ne){g=ne},Z._asap=g,Z.polyfill=function(){var ne=void 0;if(l!==void 0)ne=l;else if(typeof self<"u")ne=self;else try{ne=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ye=ne.Promise;if(ye){var xe=null;try{xe=Object.prototype.toString.call(ye.resolve())}catch{}if(xe==="[object Promise]"&&!ye.cast)return}ne.Promise=Z},Z.Promise=Z},typeof s=="object"&&i!==void 0?i.exports=c():typeof t=="function"&&t.amd?t(c):u.ES6Promise=c()}).call(this,o("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(o,i,s){var a,l;a=this,l=function(u,c){"use strict";var f=5e3,d="callback";function p(h){try{delete window[h]}catch{window[h]=void 0}}function m(h){h=document.getElementById(h),h&&document.getElementsByTagName("head")[0].removeChild(h)}c.exports=function(h){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=h,b=g.timeout||f,x=g.jsonpCallback||d,v=void 0;return new Promise(function(w,_){var C=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=x+"_"+C,E=(window[C]=function(A){w({ok:!0,json:function(){return Promise.resolve(A)}}),v&&clearTimeout(v),m(S),p(C)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));E.setAttribute("src",""+y+x+"="+C),g.charset&&E.setAttribute("charset",g.charset),E.id=S,document.getElementsByTagName("head")[0].appendChild(E),v=setTimeout(function(){_(new Error("JSONP request to "+h+" timed out")),p(C),m(S),window[C]=function(){p(C)}},b),E.onerror=function(){_(new Error("JSONP request to "+h+" failed")),p(C),m(S),v&&clearTimeout(v)}})}},typeof t=="function"&&t.amd?t(["exports","module"],l):s!==void 0&&i!==void 0?l(0,i):(l(l={exports:{}},l),a.fetchJsonp=l.exports)},{}],249:[function(o,i,s){var a=function(l){"use strict";var u,c,f,d,p,m,h,g,y,b,x;if(!(l===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=l.document,u=function(){return l.URL||l.webkitURL||l},c=x.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in c,d=/constructor/i.test(l.HTMLElement)||l.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent),m=function(v){(l.setImmediate||l.setTimeout)(function(){throw v},0)},h=4e4,g=function(v){setTimeout(function(){typeof v=="string"?u().revokeObjectURL(v):v.remove()},h)},y=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v},x=(b=function(v,w,A){A||(v=y(v));var C,S,E=this,A=v.type==="application/octet-stream",N=function(){for(var k=E,M="writestart progress write writeend".split(" "),I=void 0,L=(M=[].concat(M)).length;L--;){var P=k["on"+M[L]];if(typeof P=="function")try{P.call(k,I||k)}catch(R){m(R)}}};E.readyState=E.INIT,f?(C=u().createObjectURL(v),setTimeout(function(){var k,M;c.href=C,c.download=w,k=c,M=new MouseEvent("click"),k.dispatchEvent(M),N(),g(C),E.readyState=E.DONE})):(p||A&&d)&&l.FileReader?((S=new FileReader).onloadend=function(){var k=p?S.result:S.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(k,"_blank")||(l.location.href=k),k=void 0,E.readyState=E.DONE,N()},S.readAsDataURL(v),E.readyState=E.INIT):(C=C||u().createObjectURL(v),!A&&l.open(C,"_blank")||(l.location.href=C),E.readyState=E.DONE,N(),g(C))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(v,w,_){return w=w||v.name||"download",_||(v=y(v)),navigator.msSaveOrOpenBlob(v,w)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(v,w,_){return new b(v,w||v.name||"download",_)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=a:t!=null&&t.amd!==null&&t("FileSaver.js",function(){return a})},{}],250:[function(o,i,s){var a,l=Object.defineProperty,u=(l(s,"__esModule",{value:!0}),s),c={GIFEncoder:()=>N,applyPalette:()=>function(R,V,G="rgb565"){if(!R||!R.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(R instanceof Uint8Array||R instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<V.length)throw new Error("applyPalette() only works with 256 colors or less");let U=new Uint32Array(R.buffer),Y=U.length,X=G==="rgb444"?4096:65536,pe=new Uint8Array(Y),$=new Array(X);if(G==="rgba4444")for(let ge=0;ge<Y;ge++){var ee=U[ge],F=ee>>24&255,z=ee>>16&255,q=ee>>8&255,ee=255&ee,ae=g(ee,q,z,F),ae=ae in $?$[ae]:$[ae]=function(ne,ye,xe,Ne,Ae){let Me=0,ze=1e100;for(let Tt=0;Tt<Ae.length;Tt++){var lt,We=Ae[Tt],Bt=S(We[3]-Ne);Bt>ze||(lt=We[0],(Bt+=S(lt-ne))>ze||(lt=We[1],(Bt+=S(lt-ye))>ze||(lt=We[2],(Bt+=S(lt-xe))>ze||(ze=Bt,Me=Tt))))}return Me}(ee,q,z,F,V);pe[ge]=ae}else{let ge=G==="rgb444"?y:h;for(let ne=0;ne<Y;ne++){var ie=U[ne],Q=ie>>16&255,le=ie>>8&255,ie=255&ie,Z=ge(ie,le,Q),Z=Z in $?$[Z]:$[Z]=function(ye,xe,Ne,Ae){let Me=0,ze=1e100;for(let Tt=0;Tt<Ae.length;Tt++){var lt,We=Ae[Tt],Bt=S(We[0]-ye);Bt>ze||(lt=We[1],(Bt+=S(lt-xe))>ze||(lt=We[2],(Bt+=S(lt-Ne))>ze||(ze=Bt,Me=Tt)))}return Me}(ie,le,Q,V);pe[ne]=Z}}return pe},default:()=>P,nearestColor:()=>function(R,V,G=_){return R[E(R,V,G)]},nearestColorIndex:()=>E,nearestColorIndexWithDistance:()=>A,prequantize:()=>function(R,{roundRGB:V=5,roundAlpha:G=10,oneBitAlpha:U=null}={}){let Y=new Uint32Array(R.buffer);for(let z=0;z<Y.length;z++){var F=Y[z];let q=F>>24&255;var X,pe=F>>16&255,$=F>>8&255,F=255&F;q=C(q,G),U&&(X=typeof U=="number"?U:127,q=q<=X?0:255),F=C(F,V),$=C($,V),pe=C(pe,V),Y[z]=q<<24|pe<<16|$<<8|F<<0}},quantize:()=>function(R,V,G={}){var{format:U="rgb565",clearAlpha:Y=!0,clearAlphaColor:X=0,clearAlphaThreshold:pe=0,oneBitAlpha:$=!1}=G;if(!R||!R.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(R instanceof Uint8Array||R instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");R=new Uint32Array(R.buffer);let F=G.useSqrt!==!1,z=U==="rgba4444",q=function(At,Rt){let Nt=Rt==="rgb444"?4096:65536,Le=new Array(Nt),ut=At.length;if(Rt==="rgba4444")for(let Mr=0;Mr<ut;++Mr){var oe=At[Mr],Ge=oe>>24&255,fe=oe>>16&255,he=oe>>8&255,oe=255&oe,be=g(oe,he,fe,Ge);let lr=be in Le?Le[be]:Le[be]=w();lr.rc+=oe,lr.gc+=he,lr.bc+=fe,lr.ac+=Ge,lr.cnt++}else if(Rt==="rgb444")for(let Mr=0;Mr<ut;++Mr){var Qe=At[Mr],Oe=Qe>>16&255,Ve=Qe>>8&255,Qe=255&Qe,_t=y(Qe,Ve,Oe);let lr=_t in Le?Le[_t]:Le[_t]=w();lr.rc+=Qe,lr.gc+=Ve,lr.bc+=Oe,lr.cnt++}else for(let Mr=0;Mr<ut;++Mr){var Ut=At[Mr],Dt=Ut>>16&255,Ft=Ut>>8&255,Ut=255&Ut,Qr=h(Ut,Ft,Dt);let lr=Qr in Le?Le[Qr]:Le[Qr]=w();lr.rc+=Ut,lr.gc+=Ft,lr.bc+=Dt,lr.cnt++}return Le}(R,U),ee=q.length,ae=ee-1,Q=new Uint32Array(ee+1);for(var le=0,ie=0;ie<ee;++ie){let At=q[ie];At!=null&&(We=1/At.cnt,z&&(At.ac*=We),At.rc*=We,At.gc*=We,At.bc*=We,q[le++]=At)}x(V)/le<.022&&(F=!1);for(var Z,ge,ne,ie=0;ie<le-1;++ie)q[ie].fw=ie+1,q[ie+1].bk=ie,F&&(q[ie].cnt=Math.sqrt(q[ie].cnt));for(F&&(q[ie].cnt=Math.sqrt(q[ie].cnt)),ie=0;ie<le;++ie){v(q,ie,!1);var ye=q[ie].err;for(ge=++Q[0];1<ge&&(ne=ge>>1,!(q[Z=Q[ne]].err<=ye));ge=ne)Q[ge]=Z;Q[ge]=ie}var xe,Ne=le-V;for(ie=0;ie<Ne;){for(;;){var Ae=Q[1];if((xe=q[Ae]).tm>=xe.mtm&&q[xe.nn].mtm<=xe.tm)break;for(xe.mtm==ae?Ae=Q[1]=Q[Q[0]--]:(v(q,Ae,!1),xe.tm=ie),ye=q[Ae].err,ge=1;(ne=ge+ge)<=Q[0]&&(ne<Q[0]&&q[Q[ne]].err>q[Q[ne+1]].err&&ne++,!(ye<=q[Z=Q[ne]].err));ge=ne)Q[ge]=Z;Q[ge]=Ae}var Me=q[xe.nn],ze=xe.cnt,lt=Me.cnt,We=1/(ze+lt);z&&(xe.ac=We*(ze*xe.ac+lt*Me.ac)),xe.rc=We*(ze*xe.rc+lt*Me.rc),xe.gc=We*(ze*xe.gc+lt*Me.gc),xe.bc=We*(ze*xe.bc+lt*Me.bc),xe.cnt+=Me.cnt,xe.mtm=++ie,q[Me.bk].fw=Me.fw,q[Me.fw].bk=Me.bk,Me.mtm=ae}let Bt=[];for(ie=0;;0){let At=b(Math.round(q[ie].rc),0,255),Rt=b(Math.round(q[ie].gc),0,255),Nt=b(Math.round(q[ie].bc),0,255),Le=255;z&&(Le=b(Math.round(q[ie].ac),0,255),$&&(Tt=typeof $=="number"?$:127,Le=Le<=Tt?0:255),Y&&Le<=pe&&(At=Rt=Nt=X,Le=0));var Tt=z?[At,Rt,Nt,Le]:[At,Rt,Nt];if(function(ut,Ge){for(let oe=0;oe<ut.length;oe++){var he=ut[oe],fe=he[0]===Ge[0]&&he[1]===Ge[1]&&he[2]===Ge[2],he=!(4<=he.length&&4<=Ge.length)||he[3]===Ge[3];if(fe&&he)return!0}return!1}(Bt,Tt)||Bt.push(Tt),(ie=q[ie].fw)==0)break}return Bt},snapColorsToPalette:()=>function(R,V,G=5){if(R.length&&V.length){var U=R.map(F=>F.slice(0,3)),Y=G*G,X=R[0].length;for(let F=0;F<V.length;F++){let z=V[F];z=z.length<X?[z[0],z[1],z[2],255]:z.length>X?z.slice(0,3):z.slice();var $=A(U,z.slice(0,3),_),pe=$[0],$=$[1];0<$&&$<=Y&&(R[pe]=z)}}}};for(a in c)l(u,a,{get:c[a],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function d(R=256){let V=0,G=new Uint8Array(R);return{get buffer(){return G.buffer},reset(){V=0},bytesView(){return G.subarray(0,V)},bytes(){return G.slice(0,V)},writeByte(Y){U(V+1),G[V]=Y,V++},writeBytes(Y,X=0,pe=Y.length){U(V+pe);for(let $=0;$<pe;$++)G[V++]=Y[$+X]},writeBytesView(Y,X=0,pe=Y.byteLength){U(V+pe),G.set(Y.subarray(X,X+pe),V),V+=pe}};function U(Y){var X=G.length;if(!(Y<=X)){Y=Math.max(Y,X*(X<1048576?2:1.125)>>>0),X!=0&&(Y=Math.max(Y,256));let pe=G;G=new Uint8Array(Y),0<V&&G.set(pe.subarray(0,V),0)}}}var p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],m=function(R,V,G,z,Y=d(512),X=new Uint8Array(256),pe=new Int32Array(5003),$=new Int32Array(5003)){var F=pe.length,z=Math.max(2,z);X.fill(0),$.fill(0),pe.fill(-1);let q=0,ee=0;var ae=z+1;let Q=ae,le=!1,ie=Q,Z=(1<<ie)-1;var ge=1<<ae-1;let ne=1+ge,ye=2+ge,xe=0,Ne=G[0],Ae=0;for(let Tt=F;Tt<65536;Tt*=2)++Ae;Ae=8-Ae,Y.writeByte(z),Bt(ge);var Me=G.length;for(let Tt=1;Tt<Me;Tt++)e:{var ze=G[Tt],lt=(ze<<12)+Ne;let At=ze<<Ae^Ne;if(pe[At]===lt)Ne=$[At];else{for(var We=At===0?1:F-At;0<=pe[At];)if((At-=We)<0&&(At+=F),pe[At]===lt){Ne=$[At];break e}Bt(Ne),Ne=ze,ye<4096?($[At]=ye++,pe[At]=lt):(pe.fill(-1),ye=2+ge,le=!0,Bt(ge))}}return Bt(Ne),Bt(ne),Y.writeByte(0),Y.bytesView();function Bt(Tt){for(q&=p[ee],0<ee?q|=Tt<<ee:q=Tt,ee+=ie;8<=ee;)X[xe++]=255&q,254<=xe&&(Y.writeByte(xe),Y.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;if((ye>Z||le)&&(le?(ie=Q,Z=(1<<ie)-1,le=!1):(++ie,Z=ie===12?1<<ie:(1<<ie)-1)),Tt==ne){for(;0<ee;)X[xe++]=255&q,254<=xe&&(Y.writeByte(xe),Y.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;0<xe&&(Y.writeByte(xe),Y.writeBytesView(X,0,xe),xe=0)}}};function h(R,V,G){return R<<8&63488|V<<2&992|G>>3}function g(R,V,G,U){return R>>4|240&V|(240&G)<<4|(240&U)<<8}function y(R,V,G){return R>>4<<8|240&V|G>>4}function b(R,V,G){return R<V?V:G<R?G:R}function x(R){return R*R}function v(R,V,G){var U=0,Y=1e100;let X=R[V];for(var pe=X.cnt,$=X.ac,F=X.rc,z=X.gc,q=X.bc,ee=X.fw;ee!=0;ee=R[ee].fw){var ae,Q=R[ee],le=Q.cnt,le=pe*le/(pe+le);Y<=le||(ae=0,G&&Y<=(ae+=le*x(Q.ac-$))||Y<=(ae+=le*x(Q.rc-F))||Y<=(ae+=le*x(Q.gc-z))||Y<=(ae+=le*x(Q.bc-q))||(Y=ae,U=ee))}X.err=Y,X.nn=U}function w(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function _(R,V){for(var G=0,U=0;U<R.length;U++){var Y=R[U]-V[U];G+=Y*Y}return G}function C(R,V){return 1<V?Math.round(R/V)*V:R}function S(R){return R*R}function E(R,V,G=_){let U=1/0,Y=-1;for(let pe=0;pe<R.length;pe++){var X=G(V,R[pe]);X<U&&(U=X,Y=pe)}return Y}function A(R,V,G=_){let U=1/0,Y=-1;for(let pe=0;pe<R.length;pe++){var X=G(V,R[pe]);X<U&&(U=X,Y=pe)}return[Y,U]}function N(R={}){let{initialCapacity:V=4096,auto:G=!0}=R,U=d(V),Y=new Uint8Array(256),X=new Int32Array(5003),pe=new Int32Array(5003),$=!1;return{reset(){U.reset(),$=!1},finish(){U.writeByte(f.trailer)},bytes(){return U.bytes()},bytesView(){return U.bytesView()},get buffer(){return U.buffer},get stream(){return U},writeHeader:F,writeFrame(z,q,ee,Ne={}){var{transparent:Q=!1,transparentIndex:le=0,delay:We=0,palette:ie=null,repeat:Me=0,colorDepth:Z=8,dispose:ge=-1}=Ne;let ne=!1;if(G?$||(ne=!0,F(),$=!0):ne=!!Ne.first,q=Math.max(0,Math.floor(q)),ee=Math.max(0,Math.floor(ee)),ne){if(!ie)throw new Error("First frame must include a { palette } option");var[Ne,ze,xe,lt,Ae=8]=[U,q,ee,ie,Z];lt=L(lt.length)-1,Ae=128|Ae-1<<4|lt,M(Ne,ze),M(Ne,xe),Ne.writeBytes([Ae,0,0]),k(U,ie),0<=Me&&(lt=U,ze=Me,lt.writeByte(33),lt.writeByte(255),lt.writeByte(11),I(lt,"NETSCAPE2.0"),lt.writeByte(3),lt.writeByte(1),M(lt,ze),lt.writeByte(0))}var ye,xe=Math.round(We/10),Ne=U,Ae=ge,Me=xe,ze=Q,lt=le,We=(Ne.writeByte(33),Ne.writeByte(249),Ne.writeByte(4),lt<0&&(lt=0,ze=!1),ze=ze?(ye=1,2):ye=0,0<=Ae&&(ze=7&Ae),ze<<=2,Ne.writeByte(0|ze|ye),M(Ne,Me),Ne.writeByte(lt||0),Ne.writeByte(0),!!ie&&!ne);ge=U,Q=q,le=ee,ye=We?ie:null,ge.writeByte(44),M(ge,0),M(ge,0),M(ge,Q),M(ge,le),ye?(Q=L(ye.length)-1,ge.writeByte(128|Q)):ge.writeByte(0),We&&k(U,ie),[Me,Ne,le,Q,ge=8,We,ie,z]=[U,z,q,ee,Z,Y,X,pe],m(le,Q,Ne,ge,Me,We,ie,z)}};function F(){I(U,"GIF89a")}}function k(R,V){var G=1<<L(V.length);for(let U=0;U<G;U++){let Y=[0,0,0];U<V.length&&(Y=V[U]),R.writeByte(Y[0]),R.writeByte(Y[1]),R.writeByte(Y[2])}}function M(R,V){R.writeByte(255&V),R.writeByte(V>>8&255)}function I(R,V){for(var G=0;G<V.length;G++)R.writeByte(V.charCodeAt(G))}function L(R){return Math.max(Math.ceil(Math.log2(R)),1)}var P=N},{}],251:[function(o,i,s){s.read=function(a,l,u,c,v){var d,p,m=8*v-c-1,h=(1<<m)-1,g=h>>1,y=-7,b=u?v-1:0,x=u?-1:1,v=a[l+b];for(b+=x,d=v&(1<<-y)-1,v>>=-y,y+=m;0<y;d=256*d+a[l+b],b+=x,y-=8);for(p=d&(1<<-y)-1,d>>=-y,y+=c;0<y;p=256*p+a[l+b],b+=x,y-=8);if(d===0)d=1-g;else{if(d===h)return p?NaN:1/0*(v?-1:1);p+=Math.pow(2,c),d-=g}return(v?-1:1)*p*Math.pow(2,d-c)},s.write=function(a,l,u,c,f,w){var p,m,h=8*w-f-1,g=(1<<h)-1,y=g>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:w-1,v=c?1:-1,w=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(m=isNaN(l)?1:0,p=g):(p=Math.floor(Math.log(l)/Math.LN2),l*(c=Math.pow(2,-p))<1&&(p--,c*=2),2<=(l+=1<=p+y?b/c:b*Math.pow(2,1-y))*c&&(p++,c/=2),g<=p+y?(m=0,p=g):1<=p+y?(m=(l*c-1)*Math.pow(2,f),p+=y):(m=l*Math.pow(2,y-1)*Math.pow(2,f),p=0));8<=f;a[u+x]=255&m,x+=v,m/=256,f-=8);for(p=p<<f|m,h+=f;0<h;a[u+x]=255&p,x+=v,p/=256,h-=8);a[u+x-v]|=128*w}},{}],252:[function(o,i,s){"use strict";var a;function l(fe,he){return fe.b===he.b&&fe.a===he.a}function u(fe,he){return fe.b<he.b||fe.b===he.b&&fe.a<=he.a}function c(fe,he,oe){var be=he.b-fe.b,Oe=oe.b-he.b;return 0<be+Oe?be<Oe?he.a-fe.a+be/(be+Oe)*(fe.a-oe.a):he.a-oe.a+Oe/(be+Oe)*(oe.a-fe.a):0}function f(fe,he,oe){var be=he.b-fe.b,Oe=oe.b-he.b;return 0<be+Oe?(he.a-oe.a)*be+(he.a-fe.a)*Oe:0}function d(fe,he){return fe.a<he.a||fe.a===he.a&&fe.b<=he.b}function p(fe,he,oe){var be=he.a-fe.a,Oe=oe.a-he.a;return 0<be+Oe?be<Oe?he.b-fe.b+be/(be+Oe)*(fe.b-oe.b):he.b-oe.b+Oe/(be+Oe)*(oe.b-fe.b):0}function m(fe,he,oe){var be=he.a-fe.a,Oe=oe.a-he.a;return 0<be+Oe?(he.b-oe.b)*be+(he.b-fe.b)*Oe:0}function h(fe,he,oe,be){return(fe=fe<0?0:fe)<=(oe=oe<0?0:oe)?oe===0?(he+be)/2:he+fe/(fe+oe)*(be-he):be+oe/(fe+oe)*(he-be)}function g(fe){var he=w(fe.b);return C(he,fe.c),C(he.b,fe.c),S(he,fe.a),he}function y(fe,he){var oe=!1,be=!1;fe!==he&&(he.a!==fe.a&&(be=!0,A(he.a,fe.a)),he.d!==fe.d&&(oe=!0,N(he.d,fe.d)),_(he,fe),be||(C(he,fe.a),fe.a.c=fe),oe||(S(he,fe.d),fe.d.a=fe))}function b(fe){var he=fe.b,oe=!1;fe.d!==fe.b.d&&(oe=!0,N(fe.d,fe.b.d)),fe.c===fe?A(fe.a,null):(fe.b.d.a=fe.b.e,fe.a.c=fe.c,_(fe,fe.b.e),oe||S(fe,fe.d)),he.c===he?(A(he.a,null),N(he.d,null)):(fe.d.a=he.b.e,he.a.c=he.c,_(he,he.b.e)),E(fe)}function x(fe){var he=w(fe),oe=he.b;return _(he,fe.e),he.a=fe.b.a,C(oe,he.a),he.d=oe.d=fe.d,he=he.b,_(fe.b,fe.b.b.e),_(fe.b,he),fe.b.a=he.a,he.b.a.c=he.b,he.b.d=fe.b.d,he.f=fe.f,he.b.f=fe.b.f,he}function v(fe,he){var oe=!1,be=w(fe),Oe=be.b;return he.d!==fe.d&&(oe=!0,N(he.d,fe.d)),_(be,fe.e),_(Oe,he),be.a=fe.b.a,Oe.a=he.a,be.d=Oe.d=fe.d,fe.d.a=Oe,oe||S(be,fe.d),be}function w(fe){var he=new xe,oe=new xe,be=fe.b.h;return(((oe.h=be).b.h=he).h=fe).b.h=oe,he.b=oe,((he.c=he).e=oe).b=he,(oe.c=oe).e=he}function _(fe,he){var oe=fe.c,be=he.c;oe.b.e=he,(be.b.e=fe).c=be,he.c=oe}function C(fe,he){var oe=he.f,be=new Ae(he,oe);for(oe.e=be,oe=(he.f=be).c=fe;oe.a=be,(oe=oe.c)!==fe;);}function S(fe,he){var oe=he.d,be=new ye(he,oe);for(oe.b=be,(he.d=be).a=fe,be.c=he.c,oe=fe;oe.d=be,(oe=oe.e)!==fe;);}function E(fe){var he=fe.h;fe=fe.b.h,(he.b.h=fe).b.h=he}function A(fe,he){for(var oe=fe.c,be=oe;be.a=he,(be=be.c)!==oe;);oe=fe.f,((be=fe.e).f=oe).e=be}function N(fe,he){for(var oe=fe.a,be=oe;be.d=he,(be=be.e)!==oe;);oe=fe.d,((be=fe.b).d=oe).b=be}function k(fe){var he=0;return Math.abs(fe[1])>Math.abs(fe[0])&&(he=1),he=Math.abs(fe[2])>Math.abs(fe[he])?2:he}function M(fe,he){fe.f+=he.f,fe.b.f+=he.b.f}function I(fe,he,oe){return fe=fe.a,he=he.a,oe=oe.a,he.b.a===fe?oe.b.a===fe?u(he.a,oe.a)?f(oe.b.a,he.a,oe.a)<=0:0<=f(he.b.a,oe.a,he.a):f(oe.b.a,fe,oe.a)<=0:oe.b.a===fe?0<=f(he.b.a,fe,he.a):(he=c(he.b.a,fe,he.a),(fe=c(oe.b.a,fe,oe.a))<=he)}function L(fe){fe.a.i=null;var he=fe.e;he.a.c=he.c,he.c.a=he.a,fe.e=null}function P(fe,he){b(fe.a),fe.c=!1,(fe.a=he).i=fe}function R(fe){for(var he=fe.a.a;(fe=Ge(fe)).a.a===he;);return fe.c&&(P(fe,he=v(ut(fe).a.b,fe.a.e)),fe=Ge(fe)),fe}function V(fe,he,oe){var be=new Le;return be.a=oe,be.e=le(fe.f,he.e,be),oe.i=be}function G(fe,he){switch(fe.s){case 100130:return(1&he)!=0;case 100131:return he!==0;case 100132:return 0<he;case 100133:return he<0;case 100134:return 2<=he||he<=-2}return!1}function U(fe){var he=fe.a,oe=he.d;oe.c=fe.d,oe.a=he,L(fe)}function Y(fe,he,oe){for(he=(fe=he).a;fe!==oe;){fe.c=!1;var be=ut(fe),Oe=be.a;if(Oe.a!==he.a){if(!be.c){U(fe);break}P(be,Oe=v(he.c.b,Oe.b))}he.c!==Oe&&(y(Oe.b.e,Oe),y(he,Oe)),U(fe),he=be.a,fe=be}return he}function X(fe,he,oe,be,Oe,Ve){for(var Qe=!0;V(fe,he,oe.b),(oe=oe.c)!==be;);for(Oe===null&&(Oe=ut(he).a.b.c);(oe=(be=ut(he)).a.b).a===Oe.a;)oe.c!==Oe&&(y(oe.b.e,oe),y(Oe.b.e,oe)),be.f=he.f-oe.f,be.d=G(fe,be.f),he.b=!0,!Qe&&z(fe,he)&&(M(oe,Oe),L(he),b(Oe)),Qe=!1,he=be,Oe=oe;he.b=!0,Ve&&ee(fe,he)}function pe(fe,he,oe,be,Oe){var Ve=[he.g[0],he.g[1],he.g[2]];he.d=null,he.d=fe.o&&fe.o(Ve,oe,be,fe.c)||null,he.d===null&&(Oe?fe.n||(ne(fe,100156),fe.n=!0):he.d=oe[0])}function $(fe,he,oe){var be=[null,null,null,null];be[0]=he.a.d,be[1]=oe.a.d,pe(fe,he.a,be,[.5,.5,0,0],!1),y(he,oe)}function F(fe,he,oe,be,Oe){var Ve=Math.abs(he.b-fe.b)+Math.abs(he.a-fe.a),Qe=Math.abs(oe.b-fe.b)+Math.abs(oe.a-fe.a),_t=Oe+1;be[Oe]=.5*Qe/(Ve+Qe),be[_t]=.5*Ve/(Ve+Qe),fe.g[0]+=be[Oe]*he.g[0]+be[_t]*oe.g[0],fe.g[1]+=be[Oe]*he.g[1]+be[_t]*oe.g[1],fe.g[2]+=be[Oe]*he.g[2]+be[_t]*oe.g[2]}function z(fe,he){var oe=ut(he),be=he.a,Oe=oe.a;if(u(be.a,Oe.a)){if(0<f(Oe.b.a,be.a,Oe.a))return;if(l(be.a,Oe.a)){if(be.a!==Oe.a){var oe=fe.e,Ve=be.a.h;if(0<=Ve){var Qe=(oe=oe.b).d,_t=oe.e,Dt=oe.c,Ft=Dt[Ve];Qe[Ft]=Qe[oe.a],(Dt[Qe[Ft]]=Ft)<=--oe.a&&(Ft<=1||u(_t[Qe[Ft>>1]],_t[Qe[Ft]])?Rt:Nt)(oe,Ft),_t[Ve]=null,Dt[Ve]=oe.b,oe.b=Ve}else for(oe.c[-(Ve+1)]=null;0<oe.a&&oe.c[oe.d[oe.a-1]]===null;)--oe.a;$(fe,Oe.b.e,be)}}else x(Oe.b),y(be,Oe.b.e),he.b=oe.b=!0}else{if(f(be.b.a,Oe.a,be.a)<0)return;Ge(he).b=he.b=!0,x(be.b),y(Oe.b.e,be)}return 1}function q(fe,he){var oe=ut(he),be=he.a,Oe=oe.a,Ve=be.a,Qe=Oe.a,_t=be.b.a,Dt=Oe.b.a,Ft=new Ae;if(f(_t,fe.a,Ve),f(Dt,fe.a,Qe),!(Ve===Qe||Math.min(Ve.a,_t.a)>Math.max(Qe.a,Dt.a))){if(u(Ve,Qe)){if(0<f(Dt,Ve,Qe))return}else if(f(_t,Qe,Ve)<0)return;var Ut,Qr,Mr=_t,lr=Ve,qr=Dt,Fr=Qe;if(u(Mr,lr)||(Ut=Mr,Mr=lr,lr=Ut),u(qr,Fr)||(Ut=qr,qr=Fr,Fr=Ut),u(Mr,qr)||(Ut=Mr,Mr=qr,qr=Ut,Ut=lr,lr=Fr,Fr=Ut),u(qr,lr)?u(lr,Fr)?((Ut=c(Mr,qr,lr))+(Qr=c(qr,lr,Fr))<0&&(Ut=-Ut,Qr=-Qr),Ft.b=h(Ut,qr.b,Qr,lr.b)):((Ut=f(Mr,qr,lr))+(Qr=-f(Mr,Fr,lr))<0&&(Ut=-Ut,Qr=-Qr),Ft.b=h(Ut,qr.b,Qr,Fr.b)):Ft.b=(qr.b+lr.b)/2,d(Mr,lr)||(Ut=Mr,Mr=lr,lr=Ut),d(qr,Fr)||(Ut=qr,qr=Fr,Fr=Ut),d(Mr,qr)||(Ut=Mr,Mr=qr,qr=Ut,Ut=lr,lr=Fr,Fr=Ut),d(qr,lr)?d(lr,Fr)?((Ut=p(Mr,qr,lr))+(Qr=p(qr,lr,Fr))<0&&(Ut=-Ut,Qr=-Qr),Ft.a=h(Ut,qr.a,Qr,lr.a)):((Ut=m(Mr,qr,lr))+(Qr=-m(Mr,Fr,lr))<0&&(Ut=-Ut,Qr=-Qr),Ft.a=h(Ut,qr.a,Qr,Fr.a)):Ft.a=(qr.a+lr.a)/2,u(Ft,fe.a)&&(Ft.b=fe.a.b,Ft.a=fe.a.a),Mr=u(Ve,Qe)?Ve:Qe,u(Mr,Ft)&&(Ft.b=Mr.b,Ft.a=Mr.a),l(Ft,Ve)||l(Ft,Qe))return z(fe,he),0;if(!l(_t,fe.a)&&0<=f(_t,fe.a,Ft)||!l(Dt,fe.a)&&f(Dt,fe.a,Ft)<=0){if(Dt===fe.a)x(be.b),y(Oe.b,be),be=ut(he=R(he)).a,Y(fe,ut(he),oe),X(fe,he,be.b.e,be,be,!0);else{if(_t!==fe.a)return 0<=f(_t,fe.a,Ft)&&(Ge(he).b=he.b=!0,x(be.b),be.a.b=fe.a.b,be.a.a=fe.a.a),void(f(Dt,fe.a,Ft)<=0&&(he.b=oe.b=!0,x(Oe.b),Oe.a.b=fe.a.b,Oe.a.a=fe.a.a));for(x(Oe.b),y(be.e,Oe.b.e),Qe=(Ve=oe=he).a.b.a;(Ve=Ge(Ve)).a.b.a===Qe;);Ve=ut(he=Ve).a.b.c,oe.a=Oe.b.e,X(fe,he,(Oe=Y(fe,oe,null)).c,be.b.c,Ve,!0)}return 1}x(be.b),x(Oe.b),y(Oe.b.e,be),be.a.b=Ft.b,be.a.a=Ft.a,be.a.h=ze(fe.e,be.a),be=be.a,Oe=[0,0,0,0],Ft=[Ve.d,_t.d,Qe.d,Dt.d],be.g[0]=be.g[1]=be.g[2]=0,F(be,Ve,_t,Oe,0),F(be,Qe,Dt,Oe,2),pe(fe,be,Ft,Oe,!0),Ge(he).b=he.b=oe.b=!0}}function ee(fe,he){for(var oe=ut(he);;){for(;oe.b;)oe=ut(he=oe);if(!he.b&&((he=Ge(oe=he))===null||!he.b))break;he.b=!1;var be=he.a,Oe=oe.a;if(Ve=be.b.a!==Oe.b.a)e:{var Ve,Qe=ut(Ve=he),_t=Ve.a,Dt=Qe.a,Ft=void 0;if(u(_t.b.a,Dt.b.a)){if(f(_t.b.a,Dt.b.a,_t.a)<0){Ve=!1;break e}Ge(Ve).b=Ve.b=!0,Ft=x(_t),y(Dt.b,Ft),Ft.d.c=Ve.d}else{if(0<f(Dt.b.a,_t.b.a,Dt.a)){Ve=!1;break e}Ve.b=Qe.b=!0,Ft=x(Dt),y(_t.e,Dt.b),Ft.b.d.c=Ve.d}Ve=!0}if(Ve&&(oe.c?(L(oe),b(Oe),Oe=(oe=ut(he)).a):he.c&&(L(he),b(be),be=(he=Ge(oe)).a)),be.a!==Oe.a){if(be.b.a===Oe.b.a||he.c||oe.c||be.b.a!==fe.a&&Oe.b.a!==fe.a)z(fe,he);else if(q(fe,he))break}be.a===Oe.a&&be.b.a===Oe.b.a&&(M(Oe,be),L(he),b(be),he=Ge(oe))}}function ae(fe,he){var oe=new Le,be=g(fe.b);be.a.b=4e150,be.a.a=he,be.b.a.b=-4e150,be.b.a.a=he,fe.a=be.b.a,oe.a=be,oe.f=0,oe.d=!1,oe.c=!1,oe.h=!0,oe.b=!1,be=le(be=fe.f,be.a,oe),oe.e=be}function Q(fe){this.a=new ie,this.b=fe,this.c=I}function le(fe,he,oe){for(;(he=he.c).b!==null&&!fe.c(fe.b,he.b,oe););return fe=new ie(oe,he.a,he),he.a.c=fe,he.a=fe}function ie(fe,he,oe){this.b=fe||null,this.a=he||this,this.c=oe||this}function Z(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ge(fe,he){if(fe.d!==he)for(;fe.d!==he;)if(fe.d<he)switch(fe.d){case 0:ne(fe,100151),fe.u(null);break;case 1:ne(fe,100152),fe.t()}else switch(fe.d){case 2:ne(fe,100154),fe.v();break;case 1:ne(fe,100153),fe.w()}}function ne(fe,he){fe.p&&fe.p(he,fe.c)}function ye(fe,he){this.b=fe||this,this.d=he||this,this.a=null,this.c=!1}function xe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ne(){this.c=new Ae,this.a=new ye,this.b=new xe,this.d=new xe,this.b.b=this.d,this.d.b=this.b}function Ae(fe,he){this.e=fe||this,this.f=he||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Me(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new We}function ze(fe,he){var oe,be,Oe;return fe.e?(2*(be=++(oe=fe.b).a)>oe.f&&(oe.f*=2,oe.c=Bt(oe.c,oe.f+1)),oe.b===0?Oe=be:(Oe=oe.b,oe.b=oe.c[oe.b]),oe.e[Oe]=he,oe.c[Oe]=be,oe.d[be]=Oe,oe.h&&Nt(oe,be),Oe):(oe=fe.a++,fe.c[oe]=he,-(oe+1))}function lt(fe){if(fe.a===0)return At(fe.b);var he=fe.c[fe.d[fe.a-1]];if(fe.b.a!==0&&u(Tt(fe.b),he))return At(fe.b);for(;--fe.a,0<fe.a&&fe.c[fe.d[fe.a-1]]===null;);return he}function We(){this.d=Bt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Bt(fe,he){for(var oe=Array(he),be=0;be<fe.length;be++)oe[be]=fe[be];for(;be<he;be++)oe[be]=0;return oe}function Tt(fe){return fe.e[fe.d[1]]}function At(fe){var he=fe.d,oe=fe.e,be=fe.c,Oe=he[1],Ve=oe[Oe];return 0<fe.a&&(he[1]=he[fe.a],be[he[1]]=1,oe[Oe]=null,be[Oe]=fe.b,fe.b=Oe,0<--fe.a&&Rt(fe,1)),Ve}function Rt(fe,he){for(var oe=fe.d,be=fe.e,Oe=fe.c,Ve=he,Qe=oe[Ve];;){var _t=Ve<<1,Dt=(_t<fe.a&&u(be[oe[_t+1]],be[oe[_t]])&&(_t+=1),oe[_t]);if(_t>fe.a||u(be[Qe],be[Dt])){Oe[oe[Ve]=Qe]=Ve;break}Oe[oe[Ve]=Dt]=Ve,Ve=_t}}function Nt(fe,he){for(var oe=fe.d,be=fe.e,Oe=fe.c,Ve=he,Qe=oe[Ve];;){var _t=Ve>>1,Dt=oe[_t];if(_t==0||u(be[Dt],be[Qe])){Oe[oe[Ve]=Qe]=Ve;break}Oe[oe[Ve]=Dt]=Ve,Ve=_t}}function Le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ut(fe){return fe.e.c.b}function Ge(fe){return fe.e.a.b}(a=Z.prototype).x=function(){ge(this,0)},a.B=function(fe,he){switch(fe){case 100142:return;case 100140:switch(he){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=he)}break;case 100141:return void(this.m=!!he);default:return void ne(this,100900)}ne(this,100901)},a.y=function(fe){switch(fe){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ne(this,100900)}return!1},a.A=function(fe,he,oe){this.j[0]=fe,this.j[1]=he,this.j[2]=oe},a.z=function(fe,he){var oe=he||null;switch(fe){case 100100:case 100106:this.h=oe;break;case 100104:case 100110:this.l=oe;break;case 100101:case 100107:this.k=oe;break;case 100102:case 100108:this.i=oe;break;case 100103:case 100109:this.p=oe;break;case 100105:case 100111:this.o=oe;break;case 100112:this.r=oe;break;default:ne(this,100900)}},a.C=function(fe,he){var oe=!1,be=[0,0,0];ge(this,2);for(var Oe=0;Oe<3;++Oe){var Ve=fe[Oe];Ve<-1e150&&(Ve=-1e150,oe=!0),1e150<Ve&&(Ve=1e150,oe=!0),be[Oe]=Ve}oe&&ne(this,100155),(oe=this.q)===null?y(oe=g(this.b),oe.b):(x(oe),oe=oe.e),oe.a.d=he,oe.a.g[0]=be[0],oe.a.g[1]=be[1],oe.a.g[2]=be[2],oe.f=1,oe.b.f=-1,this.q=oe},a.u=function(fe){ge(this,0),this.d=1,this.b=new Ne,this.c=fe},a.t=function(){ge(this,1),this.d=2,this.q=null},a.v=function(){ge(this,2),this.d=1},a.w=function(){ge(this,1),this.d=0;var fe,he,oe=this.j[0],be=this.j[1],Oe=this.j[2],Ve=!1,Qe=[oe,be,Oe];if(oe===0&&be===0&&Oe===0){for(var be=[-2e150,-2e150,-2e150],_t=[2e150,2e150,2e150],Oe=[],Dt=[],oe=(Ve=this.b.c).e;oe!==Ve;oe=oe.e)for(var Ft=0;Ft<3;++Ft){var Ut=oe.g[Ft];Ut<_t[Ft]&&(_t[Ft]=Ut,Dt[Ft]=oe),Ut>be[Ft]&&(be[Ft]=Ut,Oe[Ft]=oe)}if(be[1]-_t[1]>be[oe=0]-_t[0]&&(oe=1),_t[oe=be[2]-_t[2]>be[oe]-_t[oe]?2:oe]>=be[oe])Qe[0]=0,Qe[1]=0,Qe[2]=1;else{for(_t=Dt[oe],Oe=Oe[oe],Dt=[be=0,0,0],_t=[_t.g[0]-Oe.g[0],_t.g[1]-Oe.g[1],_t.g[2]-Oe.g[2]],Ft=[0,0,0],oe=Ve.e;oe!==Ve;oe=oe.e)Ft[0]=oe.g[0]-Oe.g[0],Ft[1]=oe.g[1]-Oe.g[1],Ft[2]=oe.g[2]-Oe.g[2],Dt[0]=_t[1]*Ft[2]-_t[2]*Ft[1],Dt[1]=_t[2]*Ft[0]-_t[0]*Ft[2],Dt[2]=_t[0]*Ft[1]-_t[1]*Ft[0],be<(Ut=Dt[0]*Dt[0]+Dt[1]*Dt[1]+Dt[2]*Dt[2])&&(be=Ut,Qe[0]=Dt[0],Qe[1]=Dt[1],Qe[2]=Dt[2]);be<=0&&(Qe[0]=Qe[1]=Qe[2]=0,Qe[k(_t)]=1)}Ve=!0}for(Dt=k(Qe),oe=this.b.c,be=(Dt+1)%3,Oe=(Dt+2)%3,Dt=0<Qe[Dt]?1:-1,Qe=oe.e;Qe!==oe;Qe=Qe.e)Qe.b=Qe.g[be],Qe.a=Dt*Qe.g[Oe];if(Ve){for(Qe=0,oe=(Ve=this.b.a).b;oe!==Ve;oe=oe.b)if(!((be=oe.a).f<=0))for(;Qe+=(be.a.b-be.b.a.b)*(be.a.a+be.b.a.a),(be=be.e)!==oe.a;);if(Qe<0)for(Ve=(Qe=this.b.c).e;Ve!==Qe;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,Qe=this.b.b,oe=Qe.h;oe!==Qe;oe=Ve)Ve=oe.h,be=oe.e,l(oe.a,oe.b.a)&&oe.e.e!==oe&&($(this,be,oe),b(oe),be=(oe=be).e),be.e===oe&&(be!==oe&&(be!==Ve&&be!==Ve.b||(Ve=Ve.h),b(be)),oe!==Ve&&oe!==Ve.b||(Ve=Ve.h),b(oe));for(this.e=Qe=new Me,Ve=this.b.c,oe=Ve.e;oe!==Ve;oe=oe.e)oe.h=ze(Qe,oe);var Qr=Qe;Qr.d=[];for(var Mr=0;Mr<Qr.a;Mr++)Qr.d[Mr]=Mr;Qr.d.sort(function(Fr){return function(pi,ql){return u(Fr[pi],Fr[ql])?1:-1}}(Qr.c)),Qr.e=!0;for(var lr=Qr.b,qr=lr.a;1<=qr;--qr)Rt(lr,qr);for(lr.h=!0,this.f=new Q(this),ae(this,-4e150),ae(this,4e150);(Qe=lt(this.e))!==null;){for(;;){e:if((oe=this.e).a===0)Ve=Tt(oe.b);else if(Ve=oe.c[oe.d[oe.a-1]],oe.b.a!==0&&u(oe=Tt(oe.b),Ve)){Ve=oe;break e}if(Ve===null||!l(Ve,Qe))break;Ve=lt(this.e),$(this,Qe.c,Ve.c)}(function Fr(pi,ql){for(var Ms,Co=(pi.a=ql).c;Co.i===null;)if((Co=Co.c)===ql.c){var Co=pi,vi=ql;(Lo=new Le).a=vi.c.b;for(var bl=(Vn=Co.f).a;(bl=bl.a).b!==null&&!Vn.c(Vn.b,Lo,bl.b););var Vn,yl,Na=ut(Vn=bl.b),Lo=Vn.a,bl=Na.a;return void(f(Lo.b.a,vi,Lo.a)===0?l((Lo=Vn.a).a,vi)||l(Lo.b.a,vi)||(x(Lo.b),Vn.c&&(b(Lo.c),Vn.c=!1),y(vi.c,Lo),Fr(Co,vi)):(yl=u(bl.b.a,Lo.b.a)?Vn:Na,Na=void 0,Vn.d||yl.c?(Na=yl===Vn?v(vi.c.b,Lo.e):v(bl.b.c.b,vi.c).b,yl.c?P(yl,Na):((Vn=V(Lo=Co,Vn,Na)).f=Ge(Vn).f+Vn.a.f,Vn.d=G(Lo,Vn.f)),Fr(Co,vi)):X(Co,Vn,vi.c,vi.c,null,!0)))}Vn=(Lo=ut(Co=R(Co.i))).a,(Lo=Y(pi,Lo,null)).c===Vn?(Lo=(Vn=Lo).c,bl=ut(Co),Na=Co.a,yl=bl.a,Ms=!1,Na.b.a!==yl.b.a&&q(pi,Co),l(Na.a,pi.a)&&(y(Lo.b.e,Na),Lo=ut(Co=R(Co)).a,Y(pi,ut(Co),bl),Ms=!0),l(yl.a,pi.a)&&(y(Vn,yl.b.e),Vn=Y(pi,bl,null),Ms=!0),Ms?X(pi,Co,Vn.c,Lo,Lo,!0):(vi=u(yl.a,Na.a)?yl.b.e:Na,X(pi,Co,vi=v(Vn.c.b,vi),vi.c,vi.c,!1),vi.b.i.c=!0,ee(pi,Co))):X(pi,Co,Lo.c,Vn,Vn,!0)})(this,Qe)}for(this.a=this.f.a.a.b.a.a,Qe=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++Qe,L(Ve);for(this.f=null,(Qe=this.e).b=null,Qe.d=null,this.e=Qe.c=null,Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)Ve=oe.b,(oe=oe.a).e.e===oe&&(M(oe.c,oe),b(oe));if(!this.n){if(Qe=this.b,this.m)for(oe=Qe.b.h;oe!==Qe.b;oe=Ve)Ve=oe.h,oe.b.d.c!==oe.d.c?oe.f=oe.d.c?1:-1:b(oe);else for(oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,oe.c){for(oe=oe.a;u(oe.b.a,oe.a);oe=oe.c.b);for(;u(oe.a,oe.b.a);oe=oe.e);for(be=oe.c.b,Oe=void 0;oe.e!==be;)if(u(oe.b.a,be.a)){for(;be.e!==oe&&(u((he=be.e).b.a,he.a)||f(be.a,be.b.a,be.e.b.a)<=0);)be=(Oe=v(be.e,be)).b;be=be.c.b}else{for(;be.e!==oe&&(u((fe=oe.c.b).a,fe.b.a)||0<=f(oe.b.a,oe.a,oe.c.b.a));)oe=(Oe=v(oe,oe.c.b)).b;oe=oe.e}for(;be.e.e!==oe;)Oe=v(be.e,be),be=Oe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=(Qe=this.b).a.b;Ve!==Qe.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),oe=Ve.a;this.k&&this.k(oe.a.d,this.c),(oe=oe.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for(Qe=this.b,Ve=!!this.l,oe=!1,be=-1,Oe=Qe.a.d;Oe!==Qe.a;Oe=Oe.d)if(Oe.c)for(oe||(this.h&&this.h(4,this.c),oe=!0),Dt=Oe.a;Ve&&(_t=Dt.b.d.c?0:1,be!==_t&&(be=_t,this.l&&this.l(!!be,this.c))),this.k&&this.k(Dt.a.d,this.c),(Dt=Dt.e)!==Oe.a;);oe&&this.i&&this.i(this.c)}if(this.r){for(Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,!oe.c){for(Oe=(be=oe.a).e,Dt=void 0;Oe=(Dt=Oe).e,(Dt.d=null)===Dt.b.d&&(Dt.c===Dt?A(Dt.a,null):(Dt.a.c=Dt.c,_(Dt,Dt.b.e)),(_t=Dt.b).c===_t?A(_t.a,null):(_t.a.c=_t.c,_(_t,_t.b.e)),E(Dt)),Dt!==be;);be=oe.d,((oe=oe.b).d=be).b=oe}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Z,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Z.prototype.gluDeleteTess=Z.prototype.x,Z.prototype.gluTessProperty=Z.prototype.B,Z.prototype.gluGetTessProperty=Z.prototype.y,Z.prototype.gluTessNormal=Z.prototype.A,Z.prototype.gluTessCallback=Z.prototype.z,Z.prototype.gluTessVertex=Z.prototype.C,Z.prototype.gluTessBeginPolygon=Z.prototype.u,Z.prototype.gluTessBeginContour=Z.prototype.t,Z.prototype.gluTessEndContour=Z.prototype.v,Z.prototype.gluTessEndPolygon=Z.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(o,i,s){"use strict";function a(u,c,f,d){var p=0,m=(d=d===void 0?{}:d).loop===void 0?null:d.loop,h=d.palette===void 0?null:d.palette;if(c<=0||f<=0||65535<c||65535<f)throw new Error("Width/Height invalid.");function g(S){if(S=S.length,S<2||256<S||S&S-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return S}u[p++]=71,u[p++]=73,u[p++]=70,u[p++]=56,u[p++]=57,u[p++]=97;var y=0,b=0;if(h!==null){for(var x=g(h);x>>=1;)++y;if(x=1<<y,--y,d.background!==void 0){if(x<=(b=d.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(u[p++]=255&c,u[p++]=c>>8&255,u[p++]=255&f,u[p++]=f>>8&255,u[p++]=(h!==null?128:0)|y,u[p++]=b,u[p++]=0,h!==null)for(var v=0,w=h.length;v<w;++v){var _=h[v];u[p++]=_>>16&255,u[p++]=_>>8&255,u[p++]=255&_}if(m!==null){if(m<0||65535<m)throw new Error("Loop count invalid.");u[p++]=33,u[p++]=255,u[p++]=11,u[p++]=78,u[p++]=69,u[p++]=84,u[p++]=83,u[p++]=67,u[p++]=65,u[p++]=80,u[p++]=69,u[p++]=50,u[p++]=46,u[p++]=48,u[p++]=3,u[p++]=1,u[p++]=255&m,u[p++]=m>>8&255,u[p++]=0}var C=!1;this.addFrame=function(S,E,A,N,k,M){if(C===!0&&(--p,C=!1),M=M===void 0?{}:M,S<0||E<0||65535<S||65535<E)throw new Error("x/y invalid.");if(A<=0||N<=0||65535<A||65535<N)throw new Error("Width/Height invalid.");if(k.length<A*N)throw new Error("Not enough pixels for the frame size.");var I=!0,L=M.palette;if(L==null&&(I=!1,L=h),L==null)throw new Error("Must supply either a local or global palette.");for(var R=g(L),P=0;R>>=1;)++P;var R=1<<P,V=M.delay===void 0?0:M.delay,G=M.disposal===void 0?0:M.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var U=!1,Y=0;if(M.transparent!==void 0&&M.transparent!==null&&(U=!0,(Y=M.transparent)<0||R<=Y))throw new Error("Transparent color index.");if(G===0&&!U&&V===0||(u[p++]=33,u[p++]=249,u[p++]=4,u[p++]=G<<2|(U===!0?1:0),u[p++]=255&V,u[p++]=V>>8&255,u[p++]=Y,u[p++]=0),u[p++]=44,u[p++]=255&S,u[p++]=S>>8&255,u[p++]=255&E,u[p++]=E>>8&255,u[p++]=255&A,u[p++]=A>>8&255,u[p++]=255&N,u[p++]=N>>8&255,u[p++]=I===!0?128|P-1:0,I===!0)for(var X=0,pe=L.length;X<pe;++X){var $=L[X];u[p++]=$>>16&255,u[p++]=$>>8&255,u[p++]=255&$}return p=function(F,z,q,ee){F[z++]=q;var ae=z++,Q=1<<q,le=Q-1,ie=1+Q,Z=1+ie,ge=q+1,ne=0,ye=0;function xe(At){for(;At<=ne;)F[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(F[ae]=255,ae=z++)}function Ne(At){ye|=At<<ne,ne+=ge,xe(8)}var Ae=ee[0]&le,Me={};Ne(Q);for(var ze=1,lt=ee.length;ze<lt;++ze){var We=ee[ze]&le,Bt=Ae<<8|We,Tt=Me[Bt];if(Tt===void 0){for(ye|=Ae<<ne,ne+=ge;8<=ne;)F[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(F[ae]=255,ae=z++);Z===4096?(Ne(Q),Z=1+ie,ge=q+1,Me={}):(1<<ge<=Z&&++ge,Me[Bt]=Z++),Ae=We}else Ae=Tt}return Ne(Ae),Ne(ie),xe(1),ae+1===z?F[ae]=0:(F[ae]=z-ae-1,F[z++]=0),z}(u,p,P<2?2:P,k)},this.end=function(){return C===!1&&(u[p++]=59,C=!0),p},this.getOutputBuffer=function(){return u},this.setOutputBuffer=function(S){u=S},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(S){p=S}}function l(u,c,f,d){for(var p=u[c++],m=1<<p,h=1+m,g=1+h,y=p+1,b=(1<<y)-1,x=0,v=0,w=0,_=u[c++],C=new Int32Array(4096),S=null;;){for(;x<16&&_!==0;)v|=u[c++]<<x,x+=8,_===1?_=u[c++]:--_;if(x<y)break;var E=v&b;if(v>>=y,x-=y,E==m)g=1+h,b=(1<<(y=p+1))-1,S=null;else{if(E==h)break;for(var A=E<g?E:S,N=0,k=A;m<k;)k=C[k]>>8,++N;var M=k;if(d<w+N+(A!==E?1:0))return void console.log("Warning, gif stream longer than expected.");f[w++]=M;var I=w+=N;for(A!==E&&(f[w++]=M),k=A;N--;)k=C[k],f[--I]=255&k,k>>=8;S!==null&&g<4096&&(C[g++]=S<<8|M,b+1<=g&&y<12&&(++y,b=b<<1|1)),S=E}}w!==d&&console.log("Warning, gif stream shorter than expected.")}try{s.GifWriter=a,s.GifReader=function(u){var c=0;if(u[c++]!==71||u[c++]!==73||u[c++]!==70||u[c++]!==56||(u[c++]+1&253)!=56||u[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=u[c++]|u[c++]<<8,d=u[c++]|u[c++]<<8,p=u[c++],m=1<<1+(7&p),h=(u[c++],u[c++],null),g=null,y=(p>>7&&(h=c,c+=3*(g=m)),!0),b=[],x=0,v=null,w=0,_=null;for(this.width=f,this.height=d;y&&c<u.length;)switch(u[c++]){case 33:switch(u[c++]){case 255:if(u[c]!==11||u[c+1]==78&&u[c+2]==69&&u[c+3]==84&&u[c+4]==83&&u[c+5]==67&&u[c+6]==65&&u[c+7]==80&&u[c+8]==69&&u[c+9]==50&&u[c+10]==46&&u[c+11]==48&&u[c+12]==3&&u[c+13]==1&&u[c+16]==0)c+=14,_=u[c++]|u[c++]<<8,c++;else for(c+=12;;){if(!(0<=(S=u[c++])))throw Error("Invalid block size");if(S===0)break;c+=S}break;case 249:if(u[c++]!==4||u[c+4]!==0)throw new Error("Invalid graphics extension block.");var C=u[c++],x=u[c++]|u[c++]<<8,v=u[c++];!(1&C)&&(v=null),w=C>>2&7,c++;break;case 254:for(;;){if(!(0<=(S=u[c++])))throw Error("Invalid block size");if(S===0)break;c+=S}break;default:throw new Error("Unknown graphic control label: 0x"+u[c-1].toString(16))}break;case 44:var S,E=u[c++]|u[c++]<<8,A=u[c++]|u[c++]<<8,N=u[c++]|u[c++]<<8,k=u[c++]|u[c++]<<8,V=u[c++],M=V>>6&1,I=1<<1+(7&V),L=h,P=g,R=!1,V=(V>>7&&(R=!0,L=c,c+=3*(P=I)),c);for(c++;;){if(!(0<=(S=u[c++])))throw Error("Invalid block size");if(S===0)break;c+=S}b.push({x:E,y:A,width:N,height:k,has_local_palette:R,palette_offset:L,palette_size:P,data_offset:V,data_length:c-V,transparent_index:v,interlaced:!!M,delay:x,disposal:w});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+u[c-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return _},this.frameInfo=function(G){if(G<0||G>=b.length)throw new Error("Frame index out of range.");return b[G]},this.decodeAndBlitFrameBGRA=function(G,U){for(var G=this.frameInfo(G),Y=G.width*G.height,X=new Uint8Array(Y),pe=(l(u,G.data_offset,X,Y),G.palette_offset),$=G.transparent_index,F=($===null&&($=256),G.width),z=f-F,q=F,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),Z=0,ge=X.length;Z<ge;++Z){var ne,ye,xe=X[Z];q===0&&(q=F,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(F+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[pe+3*xe],ye=u[pe+3*xe+1],xe=u[pe+3*xe+2],U[Q++]=xe,U[Q++]=ye,U[Q++]=ne,U[Q++]=255),--q}},this.decodeAndBlitFrameRGBA=function(G,U){for(var G=this.frameInfo(G),Y=G.width*G.height,X=new Uint8Array(Y),pe=(l(u,G.data_offset,X,Y),G.palette_offset),$=G.transparent_index,F=($===null&&($=256),G.width),z=f-F,q=F,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),Z=0,ge=X.length;Z<ge;++Z){var ne,ye,xe=X[Z];q===0&&(q=F,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(F+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[pe+3*xe],ye=u[pe+3*xe+1],xe=u[pe+3*xe+2],U[Q++]=ne,U[Q++]=ye,U[Q++]=xe,U[Q++]=255),--q}}}}catch{}},{}],254:[function(o,i,s){(function(a){var l,u;l=this,u=function(c){"use strict";function f(W){if(this==null)throw TypeError();var O,j=String(this),B=j.length,W=W?Number(W):0;if(!((W=W!=W?0:W)<0||B<=W))return 55296<=(O=j.charCodeAt(W))&&O<=56319&&W+1<B&&56320<=(B=j.charCodeAt(W+1))&&B<=57343?1024*(O-55296)+B-56320+65536:O}String.prototype.codePointAt||((d=function(){try{var T={},O=Object.defineProperty,j=O(T,T,T)&&O}catch{}return j}())?d(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var d,p=0,m=-3;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(T,O){this.source=T,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=O,this.destLen=0,this.ltree=new h,this.dtree=new h}var y=new h,b=new h,x=new Uint8Array(30),v=new Uint16Array(30),w=new Uint8Array(30),_=new Uint16Array(30),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new h,E=new Uint8Array(320);function A(T,O,j,B){for(var W,K=0;K<j;++K)T[K]=0;for(K=0;K<30-j;++K)T[K+j]=K/j|0;for(W=B,K=0;K<30;++K)O[K]=W,W+=1<<T[K]}var N=new Uint16Array(16);function k(T,O,j,B){for(var W,K=0;K<16;++K)T.table[K]=0;for(K=0;K<B;++K)T.table[O[j+K]]++;for(K=W=T.table[0]=0;K<16;++K)N[K]=W,W+=T.table[K];for(K=0;K<B;++K)O[j+K]&&(T.trans[N[O[j+K]]++]=K)}function M(T,O,j){if(!O)return j;for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;var B=T.tag&65535>>>16-O;return T.tag>>>=O,T.bitcount-=O,B+j}function I(T,O){for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;for(var j=0,B=0,W=0,K=T.tag;B=2*B+(1&K),K>>>=1,j+=O.table[++W],0<=(B-=O.table[W]););return T.tag=K,T.bitcount-=W,O.trans[j+B]}function L(T,O,j){for(;;){var B=I(T,O);if(B===256)return p;if(B<256)T.dest[T.destLen++]=B;else for(var W,K=M(T,x[B-=257],v[B]),B=I(T,j),te=W=T.destLen-M(T,w[B],_[B]);te<W+K;++te)T.dest[T.destLen++]=T.dest[te]}}for(var P=y,R=b,V=0;V<7;++V)P.table[V]=0;for(P.table[7]=24,P.table[8]=152,P.table[9]=112,V=0;V<24;++V)P.trans[V]=256+V;for(V=0;V<144;++V)P.trans[24+V]=V;for(V=0;V<8;++V)P.trans[168+V]=280+V;for(V=0;V<112;++V)P.trans[176+V]=144+V;for(V=0;V<5;++V)R.table[V]=0;for(R.table[5]=32,V=0;V<32;++V)R.trans[V]=V;A(x,v,4,3),A(w,_,2,1),x[28]=0,v[28]=258;var G=function(T,O){var j,B,W,K=new g(T,O);do{switch(W=void 0,(B=K).bitcount--||(B.tag=B.source[B.sourceIndex++],B.bitcount=7),W=1&B.tag,B.tag>>>=1,B=W,M(K,2,0)){case 0:j=function(Ye){for(var yr,tn;8<Ye.bitcount;)Ye.sourceIndex--,Ye.bitcount-=8;if((yr=256*Ye.source[Ye.sourceIndex+1]+Ye.source[Ye.sourceIndex])!==(65535&~(256*Ye.source[Ye.sourceIndex+3]+Ye.source[Ye.sourceIndex+2])))return m;for(Ye.sourceIndex+=4,tn=yr;tn;--tn)Ye.dest[Ye.destLen++]=Ye.source[Ye.sourceIndex++];return Ye.bitcount=0,p}(K);break;case 1:j=L(K,y,b);break;case 2:ot=Xe=mt=He=te=Te=Ue=qe=Re=ve=_e=me=void 0;for(var te,me=K,_e=K.ltree,ve=K.dtree,Re=M(me,5,257),qe=M(me,5,1),Ue=M(me,4,4),Te=0;Te<19;++Te)E[Te]=0;for(Te=0;Te<Ue;++Te){var mt=M(me,3,0);E[C[Te]]=mt}for(k(S,E,0,19),te=0;te<Re+qe;){var Xe=I(me,S);switch(Xe){case 16:for(var ot=E[te-1],He=M(me,2,3);He;--He)E[te++]=ot;break;case 17:for(He=M(me,3,3);He;--He)E[te++]=0;break;case 18:for(He=M(me,7,11);He;--He)E[te++]=0;break;default:E[te++]=Xe}}k(_e,E,0,Re),k(ve,E,Re,qe),j=L(K,K.ltree,K.dtree);break;default:j=m}if(j!==p)throw new Error("Data error")}while(!B);return K.destLen<K.dest.length?typeof K.dest.slice=="function"?K.dest.slice(0,K.destLen):K.dest.subarray(0,K.destLen):K.dest};function U(T,O,j,B,W){return Math.pow(1-W,3)*T+3*Math.pow(1-W,2)*W*O+3*(1-W)*Math.pow(W,2)*j+Math.pow(W,3)*B}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function X(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function pe(T){throw new Error(T)}function $(T,O){T||pe(O)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(T,O){typeof T=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=T,this.x2=T),T<this.x1&&(this.x1=T),T>this.x2&&(this.x2=T)),typeof O=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=O,this.y2=O),O<this.y1&&(this.y1=O),O>this.y2&&(this.y2=O))},Y.prototype.addX=function(T){this.addPoint(T,null)},Y.prototype.addY=function(T){this.addPoint(null,T)},Y.prototype.addBezier=function(T,O,j,B,W,K,te,me){var _e=[T,O],ve=[j,B],Re=[W,K],qe=[te,me];this.addPoint(T,O),this.addPoint(te,me);for(var Ue=0;Ue<=1;Ue++){var Te,mt=6*_e[Ue]-12*ve[Ue]+6*Re[Ue],Xe=-3*_e[Ue]+9*ve[Ue]-9*Re[Ue]+3*qe[Ue],ot=3*ve[Ue]-3*_e[Ue];Xe==0?mt==0||0<(Te=-ot/mt)&&Te<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],Te)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],Te))):(Te=Math.pow(mt,2)-4*ot*Xe)<0||(0<(ot=(-mt+Math.sqrt(Te))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot))),0<(ot=(-mt-Math.sqrt(Te))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot))))}},Y.prototype.addQuad=function(T,O,j,B,W,K){j=T+2/3*(j-T),B=O+2/3*(B-O),this.addBezier(T,O,j,B,j+1/3*(W-T),B+1/3*(K-O),W,K)},X.prototype.moveTo=function(T,O){this.commands.push({type:"M",x:T,y:O})},X.prototype.lineTo=function(T,O){this.commands.push({type:"L",x:T,y:O})},X.prototype.curveTo=X.prototype.bezierCurveTo=function(T,O,j,B,W,K){this.commands.push({type:"C",x1:T,y1:O,x2:j,y2:B,x:W,y:K})},X.prototype.quadTo=X.prototype.quadraticCurveTo=function(T,O,j,B){this.commands.push({type:"Q",x1:T,y1:O,x:j,y:B})},X.prototype.close=X.prototype.closePath=function(){this.commands.push({type:"Z"})},X.prototype.extend=function(T){var O;if(T.commands)T=T.commands;else if(T instanceof Y)return O=T,this.moveTo(O.x1,O.y1),this.lineTo(O.x2,O.y1),this.lineTo(O.x2,O.y2),this.lineTo(O.x1,O.y2),void this.close();Array.prototype.push.apply(this.commands,T)},X.prototype.getBoundingBox=function(){for(var T=new Y,O=0,j=0,B=0,W=0,K=0;K<this.commands.length;K++){var te=this.commands[K];switch(te.type){case"M":T.addPoint(te.x,te.y),O=B=te.x,j=W=te.y;break;case"L":T.addPoint(te.x,te.y),B=te.x,W=te.y;break;case"Q":T.addQuad(B,W,te.x1,te.y1,te.x,te.y),B=te.x,W=te.y;break;case"C":T.addBezier(B,W,te.x1,te.y1,te.x2,te.y2,te.x,te.y),B=te.x,W=te.y;break;case"Z":B=O,W=j;break;default:throw new Error("Unexpected path command "+te.type)}}return T.isEmpty()&&T.addPoint(0,0),T},X.prototype.draw=function(T){T.beginPath();for(var O=0;O<this.commands.length;O+=1){var j=this.commands[O];j.type==="M"?T.moveTo(j.x,j.y):j.type==="L"?T.lineTo(j.x,j.y):j.type==="C"?T.bezierCurveTo(j.x1,j.y1,j.x2,j.y2,j.x,j.y):j.type==="Q"?T.quadraticCurveTo(j.x1,j.y1,j.x,j.y):j.type==="Z"&&T.closePath()}this.fill&&(T.fillStyle=this.fill,T.fill()),this.stroke&&(T.strokeStyle=this.stroke,T.lineWidth=this.strokeWidth,T.stroke())},X.prototype.toPathData=function(T){function O(){for(var K=arguments,te="",me=0;me<arguments.length;me+=1){var _e=K[me];0<=_e&&0<me&&(te+=" "),te+=(_e=_e,Math.round(_e)===_e?""+Math.round(_e):_e.toFixed(T))}return te}T=T!==void 0?T:2;for(var j="",B=0;B<this.commands.length;B+=1){var W=this.commands[B];W.type==="M"?j+="M"+O(W.x,W.y):W.type==="L"?j+="L"+O(W.x,W.y):W.type==="C"?j+="C"+O(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"?j+="Q"+O(W.x1,W.y1,W.x,W.y):W.type==="Z"&&(j+="Z")}return j},X.prototype.toSVG=function(T){var O=(O='<path d="')+this.toPathData(T)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?O+=' fill="none"':O+=' fill="'+this.fill+'"'),this.stroke&&(O+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),O+="/>"},X.prototype.toDOMElement=function(O){var O=this.toPathData(O),j=document.createElementNS("http://www.w3.org/2000/svg","path");return j.setAttribute("d",O),j};var F={fail:pe,argument:$,assert:$},z={},q={},ee={};function ae(T){return function(){return T}}q.BYTE=function(T){return F.argument(0<=T&&T<=255,"Byte value should be between 0 and 255."),[T]},ee.BYTE=ae(1),q.CHAR=function(T){return[T.charCodeAt(0)]},ee.CHAR=ae(1),q.CHARARRAY=function(T){for(var O=[],j=0;j<T.length;j+=1)O[j]=T.charCodeAt(j);return O},ee.CHARARRAY=function(T){return T.length},q.USHORT=function(T){return[T>>8&255,255&T]},ee.USHORT=ae(2),q.SHORT=function(T){return[(T=32768<=T?-(65536-T):T)>>8&255,255&T]},ee.SHORT=ae(2),q.UINT24=function(T){return[T>>16&255,T>>8&255,255&T]},ee.UINT24=ae(3),q.ULONG=function(T){return[T>>24&255,T>>16&255,T>>8&255,255&T]},ee.ULONG=ae(4),q.LONG=function(T){return[(T=2147483648<=T?-(4294967296-T):T)>>24&255,T>>16&255,T>>8&255,255&T]},ee.LONG=ae(4),q.FIXED=q.ULONG,ee.FIXED=ee.ULONG,q.FWORD=q.SHORT,ee.FWORD=ee.SHORT,q.UFWORD=q.USHORT,ee.UFWORD=ee.USHORT,q.LONGDATETIME=function(T){return[0,0,0,0,T>>24&255,T>>16&255,T>>8&255,255&T]},ee.LONGDATETIME=ae(8),q.TAG=function(T){return F.argument(T.length===4,"Tag should be exactly 4 ASCII characters."),[T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2),T.charCodeAt(3)]},ee.TAG=ae(4),q.Card8=q.BYTE,ee.Card8=ee.BYTE,q.Card16=q.USHORT,ee.Card16=ee.USHORT,q.OffSize=q.BYTE,ee.OffSize=ee.BYTE,q.SID=q.USHORT,ee.SID=ee.USHORT,q.NUMBER=function(T){return-107<=T&&T<=107?[T+139]:108<=T&&T<=1131?[247+((T-=108)>>8),255&T]:-1131<=T&&T<=-108?[251+((T=-T-108)>>8),255&T]:-32768<=T&&T<=32767?q.NUMBER16(T):q.NUMBER32(T)},ee.NUMBER=function(T){return q.NUMBER(T).length},q.NUMBER16=function(T){return[28,T>>8&255,255&T]},ee.NUMBER16=ae(3),q.NUMBER32=function(T){return[29,T>>24&255,T>>16&255,T>>8&255,255&T]},ee.NUMBER32=ae(5),q.REAL=function(T){for(var O=T.toString(),j=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(O),B=(j&&(j=parseFloat("1e"+((j[2]?+j[2]:0)+j[1].length)),O=(Math.round(T*j)/j).toString()),""),W=0,K=O.length;W<K;W+=1){var te=O[W];B+=te==="e"?O[++W]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var me=[30],_e=0,ve=(B+=1&B.length?"f":"ff").length;_e<ve;_e+=2)me.push(parseInt(B.substr(_e,2),16));return me},ee.REAL=function(T){return q.REAL(T).length},q.NAME=q.CHARARRAY,ee.NAME=ee.CHARARRAY,q.STRING=q.CHARARRAY,ee.STRING=ee.CHARARRAY,z.UTF8=function(T,O,j){for(var B=[],W=j,K=0;K<W;K++,O+=1)B[K]=T.getUint8(O);return String.fromCharCode.apply(null,B)},z.UTF16=function(T,O,j){for(var B=[],W=j/2,K=0;K<W;K++,O+=2)B[K]=T.getUint16(O);return String.fromCharCode.apply(null,B)},q.UTF16=function(T){for(var O=[],j=0;j<T.length;j+=1){var B=T.charCodeAt(j);O[O.length]=B>>8&255,O[O.length]=255&B}return O},ee.UTF16=function(T){return 2*T.length};var Q,le={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"},ie=(z.MACSTRING=function(T,O,j,B){var W=le[B];if(W!==void 0){for(var K="",te=0;te<j;te++){var me=T.getUint8(O+te);K+=me<=127?String.fromCharCode(me):W[127&me]}return K}},typeof WeakMap=="function"&&new WeakMap);function Z(T){return-128<=T&&T<=127}q.MACSTRING=function(T,O){var j=function(te){if(!Q)for(var me in Q={},le)Q[me]=new String(me);var _e=Q[te];if(_e!==void 0){if(ie){var ve=ie.get(_e);if(ve!==void 0)return ve}var Re=le[te];if(Re!==void 0){for(var qe={},Ue=0;Ue<Re.length;Ue++)qe[Re.charCodeAt(Ue)]=Ue+128;return ie&&ie.set(_e,qe),qe}}}(O);if(j!==void 0){for(var B=[],W=0;W<T.length;W++){var K=T.charCodeAt(W);if(128<=K&&(K=j[K])===void 0)return;B[W]=K}return B}},ee.MACSTRING=function(T,O){return T=q.MACSTRING(T,O),T!==void 0?T.length:0},q.VARDELTAS=function(T){for(var B=0,O=[];B<T.length;)var j=T[B],B=(j===0?function(W,K,te){for(var me=0,_e=W.length;K<_e&&me<64&&W[K]===0;)++K,++me;return te.push(128|me-1),K}:-128<=j&&j<=127?function(W,K,te){for(var me=0,_e=W.length,ve=K;ve<_e&&me<64;){var Re=W[ve];if(!Z(Re)||Re===0&&ve+1<_e&&W[ve+1]===0)break;++ve,++me}te.push(me-1);for(var qe=K;qe<ve;++qe)te.push(W[qe]+256&255);return ve}:function(W,K,te){for(var me=0,_e=W.length,ve=K;ve<_e&&me<64;){var Re=W[ve];if(Re===0||Z(Re)&&ve+1<_e&&Z(W[ve+1]))break;++ve,++me}te.push(64|me-1);for(var qe=K;qe<ve;++qe){var Ue=W[qe];te.push(Ue+65536>>8&255,Ue+256&255)}return ve})(T,B,O);return O},q.INDEX=function(T){for(var O=1,j=[O],B=[],W=0;W<T.length;W+=1){var K=q.OBJECT(T[W]);Array.prototype.push.apply(B,K),O+=K.length,j.push(O)}if(B.length===0)return[0,0];for(var te=[],me=1+Math.floor(Math.log(O)/Math.log(2))/8|0,_e=[void 0,q.BYTE,q.USHORT,q.UINT24,q.ULONG][me],ve=0;ve<j.length;ve+=1){var Re=_e(j[ve]);Array.prototype.push.apply(te,Re)}return Array.prototype.concat(q.Card16(T.length),q.OffSize(me),te,B)},ee.INDEX=function(T){return q.INDEX(T).length},q.DICT=function(T){for(var O=[],j=Object.keys(T),B=j.length,W=0;W<B;W+=1){var K=parseInt(j[W],0),te=T[K];O=(O=O.concat(q.OPERAND(te.value,te.type))).concat(q.OPERATOR(K))}return O},ee.DICT=function(T){return q.DICT(T).length},q.OPERATOR=function(T){return T<1200?[T]:[12,T-1200]},q.OPERAND=function(T,O){var j=[];if(Array.isArray(O))for(var B=0;B<O.length;B+=1)F.argument(T.length===O.length,"Not enough arguments given for type"+O),j=j.concat(q.OPERAND(T[B],O[B]));else if(O==="SID")j=j.concat(q.NUMBER(T));else if(O==="offset")j=j.concat(q.NUMBER32(T));else if(O==="number")j=j.concat(q.NUMBER(T));else{if(O!=="real")throw new Error("Unknown operand type "+O);j=j.concat(q.REAL(T))}return j},q.OP=q.BYTE,ee.OP=ee.BYTE;var ge=typeof WeakMap=="function"&&new WeakMap;function ne(T,O,j){for(var B=0;B<O.length;B+=1){var W=O[B];this[W.name]=W.value}if(this.tableName=T,this.fields=O,j)for(var K=Object.keys(j),te=0;te<K.length;te+=1){var me=K[te],_e=j[me];this[me]!==void 0&&(this[me]=_e)}}function ye(T,O,j){j===void 0&&(j=O.length);var B=new Array(O.length+1);B[0]={name:T+"Count",type:"USHORT",value:j};for(var W=0;W<O.length;W++)B[W+1]={name:T+W,type:"USHORT",value:O[W]};return B}function xe(T,O,j){var B=O.length,W=new Array(B+1);W[0]={name:T+"Count",type:"USHORT",value:B};for(var K=0;K<B;K++)W[K+1]={name:T+K,type:"TABLE",value:j(O[K],K)};return W}function Ne(T,O,j){var B=O.length,W=[];W[0]={name:T+"Count",type:"USHORT",value:B};for(var K=0;K<B;K++)W=W.concat(j(O[K],K));return W}function Ae(T){T.format===1?ne.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ye("glyph",T.glyphs))):F.assert(!1,"Can't create coverage table format 2 yet.")}function Me(T){ne.call(this,"scriptListTable",Ne("scriptRecord",T,function(O,j){var B=O.script,W=B.defaultLangSys;return F.assert(!!W,"Unable to write GSUB: script "+O.tag+" has no default language system."),[{name:"scriptTag"+j,type:"TAG",value:O.tag},{name:"script"+j,type:"TABLE",value:new ne("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ne("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:W.reqFeatureIndex}].concat(ye("featureIndex",W.featureIndexes)))}].concat(Ne("langSys",B.langSysRecords,function(K,te){var me=K.langSys;return[{name:"langSysTag"+te,type:"TAG",value:K.tag},{name:"langSys"+te,type:"TABLE",value:new ne("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:me.reqFeatureIndex}].concat(ye("featureIndex",me.featureIndexes)))}]})))}]}))}function ze(T){ne.call(this,"featureListTable",Ne("featureRecord",T,function(O,j){var B=O.feature;return[{name:"featureTag"+j,type:"TAG",value:O.tag},{name:"feature"+j,type:"TABLE",value:new ne("featureTable",[{name:"featureParams",type:"USHORT",value:B.featureParams}].concat(ye("lookupListIndex",B.lookupListIndexes)))}]}))}function lt(T,O){ne.call(this,"lookupListTable",xe("lookup",T,function(j){var B=O[j.lookupType];return F.assert(!!B,"Unable to write GSUB lookup type "+j.lookupType+" tables."),new ne("lookupTable",[{name:"lookupType",type:"USHORT",value:j.lookupType},{name:"lookupFlag",type:"USHORT",value:j.lookupFlag}].concat(xe("subtable",j.subtables,B)))}))}q.CHARSTRING=function(T){if(ge){var O=ge.get(T);if(O!==void 0)return O}for(var K=[],j=T.length,B=0;B<j;B+=1)var W=T[B],K=K.concat(q[W.type](W.value));return ge&&ge.set(T,K),K},ee.CHARSTRING=function(T){return q.CHARSTRING(T).length},q.OBJECT=function(T){var O=q[T.type];return F.argument(O!==void 0,"No encoding function for type "+T.type),O(T.value)},ee.OBJECT=function(T){var O=ee[T.type];return F.argument(O!==void 0,"No sizeOf function for type "+T.type),O(T.value)},q.TABLE=function(T){for(var O=[],j=T.fields.length,B=[],W=[],K=0;K<j;K+=1){var te=T.fields[K],_e=q[te.type],me=(F.argument(_e!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),T[te.name]),_e=_e(me=me===void 0?te.value:me);te.type==="TABLE"?(W.push(O.length),O=O.concat([0,0]),B.push(_e)):O=O.concat(_e)}for(var ve=0;ve<B.length;ve+=1){var Re=W[ve],qe=O.length;F.argument(qe<65536,"Table "+T.tableName+" too big."),O[Re]=qe>>8,O[Re+1]=255&qe,O=O.concat(B[ve])}return O},ee.TABLE=function(T){for(var O=0,j=T.fields.length,B=0;B<j;B+=1){var W=T.fields[B],K=ee[W.type],te=(F.argument(K!==void 0,"No sizeOf function for field type "+W.type+" ("+W.name+")"),T[W.name]);O+=K(te=te===void 0?W.value:te),W.type==="TABLE"&&(O+=2)}return O},q.RECORD=q.TABLE,ee.RECORD=ee.TABLE,q.LITERAL=function(T){return T},ee.LITERAL=function(T){return T.length},ne.prototype.encode=function(){return q.TABLE(this)},ne.prototype.sizeOf=function(){return ee.TABLE(this)};var We={Table:ne,Record:ne,Coverage:(Ae.prototype=Object.create(ne.prototype)).constructor=Ae,ScriptList:(Me.prototype=Object.create(ne.prototype)).constructor=Me,FeatureList:(ze.prototype=Object.create(ne.prototype)).constructor=ze,LookupList:(lt.prototype=Object.create(ne.prototype)).constructor=lt,ushortList:ye,tableList:xe,recordList:Ne};function Bt(T,O){return T.getUint8(O)}function Tt(T,O){return T.getUint16(O,!1)}function At(T,O){return T.getUint32(O,!1)}function Rt(T,O){return T.getInt16(O,!1)+T.getUint16(O+2,!1)/65535}var Nt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Le(T,O){this.data=T,this.offset=O,this.relativeOffset=0}Le.prototype.parseByte=function(){var T=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},Le.prototype.parseChar=function(){var T=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},Le.prototype.parseCard8=Le.prototype.parseByte,Le.prototype.parseCard16=Le.prototype.parseUShort=function(){var T=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},Le.prototype.parseSID=Le.prototype.parseUShort,Le.prototype.parseOffset16=Le.prototype.parseUShort,Le.prototype.parseShort=function(){var T=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},Le.prototype.parseF2Dot14=function(){var T=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,T},Le.prototype.parseOffset32=Le.prototype.parseULong=function(){var T=At(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},Le.prototype.parseFixed=function(){var T=Rt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},Le.prototype.parseString=function(T){var O=this.data,j=this.offset+this.relativeOffset,B="";this.relativeOffset+=T;for(var W=0;W<T;W++)B+=String.fromCharCode(O.getUint8(j+W));return B},Le.prototype.parseTag=function(){return this.parseString(4)},Le.prototype.parseLongDateTime=function(){var T=At(this.data,this.offset+this.relativeOffset+4);return T-=2082844800,this.relativeOffset+=8,T},Le.prototype.parseVersion=function(T){var O=Tt(this.data,this.offset+this.relativeOffset),j=Tt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,O+j/(T=T===void 0?4096:T)/10},Le.prototype.skip=function(T,O){this.relativeOffset+=Nt[T]*(O=O===void 0?1:O)},Le.prototype.parseULongList=function(T){T===void 0&&(T=this.parseULong());for(var O=new Array(T),j=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)O[W]=j.getUint32(B),B+=4;return this.relativeOffset+=4*T,O},Le.prototype.parseOffset16List=Le.prototype.parseUShortList=function(T){T===void 0&&(T=this.parseUShort());for(var O=new Array(T),j=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)O[W]=j.getUint16(B),B+=2;return this.relativeOffset+=2*T,O},Le.prototype.parseShortList=function(T){for(var O=new Array(T),j=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)O[W]=j.getInt16(B),B+=2;return this.relativeOffset+=2*T,O},Le.prototype.parseByteList=function(T){for(var O=new Array(T),j=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)O[W]=j.getUint8(B++);return this.relativeOffset+=T,O},Le.prototype.parseList=function(T,O){O||(O=T,T=this.parseUShort());for(var j=new Array(T),B=0;B<T;B++)j[B]=O.call(this);return j},Le.prototype.parseList32=function(T,O){O||(O=T,T=this.parseULong());for(var j=new Array(T),B=0;B<T;B++)j[B]=O.call(this);return j},Le.prototype.parseRecordList=function(T,O){O||(O=T,T=this.parseUShort());for(var j=new Array(T),B=Object.keys(O),W=0;W<T;W++){for(var K={},te=0;te<B.length;te++){var me=B[te],_e=O[me];K[me]=_e.call(this)}j[W]=K}return j},Le.prototype.parseRecordList32=function(T,O){O||(O=T,T=this.parseULong());for(var j=new Array(T),B=Object.keys(O),W=0;W<T;W++){for(var K={},te=0;te<B.length;te++){var me=B[te],_e=O[me];K[me]=_e.call(this)}j[W]=K}return j},Le.prototype.parseStruct=function(T){if(typeof T=="function")return T.call(this);for(var O=Object.keys(T),j={},B=0;B<O.length;B++){var W=O[B],K=T[W];j[W]=K.call(this)}return j},Le.prototype.parseValueRecord=function(T){var O;if((T=T===void 0?this.parseUShort():T)!==0)return O={},1&T&&(O.xPlacement=this.parseShort()),2&T&&(O.yPlacement=this.parseShort()),4&T&&(O.xAdvance=this.parseShort()),8&T&&(O.yAdvance=this.parseShort()),16&T&&(O.xPlaDevice=void 0,this.parseShort()),32&T&&(O.yPlaDevice=void 0,this.parseShort()),64&T&&(O.xAdvDevice=void 0,this.parseShort()),128&T&&(O.yAdvDevice=void 0,this.parseShort()),O},Le.prototype.parseValueRecordList=function(){for(var T=this.parseUShort(),O=this.parseUShort(),j=new Array(O),B=0;B<O;B++)j[B]=this.parseValueRecord(T);return j},Le.prototype.parsePointer=function(T){var O=this.parseOffset16();if(0<O)return new Le(this.data,this.offset+O).parseStruct(T)},Le.prototype.parsePointer32=function(T){var O=this.parseOffset32();if(0<O)return new Le(this.data,this.offset+O).parseStruct(T)},Le.prototype.parseListOfLists=function(T){for(var O=this.parseOffset16List(),j=O.length,B=this.relativeOffset,W=new Array(j),K=0;K<j;K++){var te=O[K];if(te===0)W[K]=void 0;else if(this.relativeOffset=te,T){for(var me=this.parseOffset16List(),_e=new Array(me.length),ve=0;ve<me.length;ve++)this.relativeOffset=te+me[ve],_e[ve]=T.call(this);W[K]=_e}else W[K]=this.parseUShortList()}return this.relativeOffset=B,W},Le.prototype.parseCoverage=function(){var T=this.offset+this.relativeOffset,O=this.parseUShort(),j=this.parseUShort();if(O===1)return{format:1,glyphs:this.parseUShortList(j)};if(O!==2)throw new Error("0x"+T.toString(16)+": Coverage format must be 1 or 2.");for(var B=new Array(j),W=0;W<j;W++)B[W]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:B}},Le.prototype.parseClassDef=function(){var T=this.offset+this.relativeOffset,O=this.parseUShort();if(O===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(O===2)return{format:2,ranges:this.parseRecordList({start:Le.uShort,end:Le.uShort,classId:Le.uShort})};throw new Error("0x"+T.toString(16)+": ClassDef format must be 1 or 2.")},Le.list=function(T,O){return function(){return this.parseList(T,O)}},Le.list32=function(T,O){return function(){return this.parseList32(T,O)}},Le.recordList=function(T,O){return function(){return this.parseRecordList(T,O)}},Le.recordList32=function(T,O){return function(){return this.parseRecordList32(T,O)}},Le.pointer=function(T){return function(){return this.parsePointer(T)}},Le.pointer32=function(T){return function(){return this.parsePointer32(T)}},Le.tag=Le.prototype.parseTag,Le.byte=Le.prototype.parseByte,Le.uShort=Le.offset16=Le.prototype.parseUShort,Le.uShortList=Le.prototype.parseUShortList,Le.uLong=Le.offset32=Le.prototype.parseULong,Le.uLongList=Le.prototype.parseULongList,Le.struct=Le.prototype.parseStruct,Le.coverage=Le.prototype.parseCoverage,Le.classDef=Le.prototype.parseClassDef;var ut={reserved:Le.uShort,reqFeatureIndex:Le.uShort,featureIndexes:Le.uShortList},Ge=(Le.prototype.parseScriptList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,script:Le.pointer({defaultLangSys:Le.pointer(ut),langSysRecords:Le.recordList({tag:Le.tag,langSys:Le.pointer(ut)})})}))||[]},Le.prototype.parseFeatureList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,feature:Le.pointer({featureParams:Le.offset16,lookupListIndexes:Le.uShortList})}))||[]},Le.prototype.parseLookupList=function(T){return this.parsePointer(Le.list(Le.pointer(function(){var O=this.parseUShort(),j=(F.argument(1<=O&&O<=9,"GPOS/GSUB lookup type "+O+" unknown."),this.parseUShort()),B=16&j;return{lookupType:O,lookupFlag:j,subtables:this.parseList(Le.pointer(T[O])),markFilteringSet:B?this.parseUShort():void 0}})))||[]},Le.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var T=this.parseUShort(),O=this.parseUShort();return F.argument(T===1&&O<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Le.offset32,featureTableSubstitutionOffset:Le.offset32})})||[]},{getByte:Bt,getCard8:Bt,getUShort:Tt,getCard16:Tt,getShort:function(T,O){return T.getInt16(O,!1)},getULong:At,getFixed:Rt,getTag:function(T,O){for(var j="",B=O;B<O+4;B+=1)j+=String.fromCharCode(T.getInt8(B));return j},getOffset:function(T,O,j){for(var B=0,W=0;W<j;W+=1)B=(B<<=8)+T.getUint8(O+W);return B},getBytes:function(T,O,j){for(var B=[],W=O;W<j;W+=1)B.push(T.getUint8(W));return B},bytesToString:function(T){for(var O="",j=0;j<T.length;j+=1)O+=String.fromCharCode(T[j]);return O},Parser:Le}),fe={parse:function(T,O){for(var j={},B=(j.version=Ge.getUShort(T,O),F.argument(j.version===0,"cmap table version should be 0."),j.numTables=Ge.getUShort(T,O+2),-1),W=j.numTables-1;0<=W;--W){var K=Ge.getUShort(T,O+4+8*W),te=Ge.getUShort(T,O+4+8*W+2);if(K===3&&(te===0||te===1||te===10)||K===0&&(te===0||te===1||te===2||te===3||te===4)){B=Ge.getULong(T,O+4+8*W+4);break}}if(B===-1)throw new Error("No valid cmap sub-tables found.");var me=new Ge.Parser(T,O+B);if(j.format=me.parseUShort(),j.format===12){var _e,ve=j,Re=me;Re.parseUShort(),ve.length=Re.parseULong(),ve.language=Re.parseULong(),ve.groupCount=_e=Re.parseULong(),ve.glyphIndexMap={};for(var qe=0;qe<_e;qe+=1)for(var Ue=Re.parseULong(),Te=Re.parseULong(),mt=Re.parseULong(),Xe=Ue;Xe<=Te;Xe+=1)ve.glyphIndexMap[Xe]=mt,mt++}else{if(j.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+j.format+").");var ot=j,He=T,Ye=O,yr=B;ot.length=me.parseUShort(),ot.language=me.parseUShort(),ot.segCount=tn=me.parseUShort()>>1,me.skip("uShort",3),ot.glyphIndexMap={};for(var tn,vr=new Ge.Parser(He,Ye+yr+14),Sr=new Ge.Parser(He,Ye+yr+16+2*tn),bn=new Ge.Parser(He,Ye+yr+16+4*tn),mi=new Ge.Parser(He,Ye+yr+16+6*tn),ss=Ye+yr+16+8*tn,js=0;js<tn-1;js+=1)for(var Hl=void 0,Yl=vr.parseUShort(),Jp=Sr.parseUShort(),Jo=bn.parseShort(),wi=mi.parseUShort(),Io=Jp;Io<=Yl;Io+=1)wi!==0?(ss=(ss=mi.offset+mi.relativeOffset-2)+wi+2*(Io-Jp),(Hl=Ge.getUShort(He,ss))!==0&&(Hl=Hl+Jo&65535)):Hl=Io+Jo&65535,ot.glyphIndexMap[Io]=Hl}return j},make:function(T){for(var O=!0,j=T.length-1;0<j;--j)if(65535<T.get(j).unicode){console.log("Adding CMAP format 12 (needed!)"),O=!1;break}var B,W,K=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:O?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:O?12:20}],te=(K=(K=O?K:K.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new We.Table("cmap",K));for(te.segments=[],j=0;j<T.length;j+=1){for(var me=T.get(j),_e=0;_e<me.unicodes.length;_e+=1)B=me.unicodes[_e],W=j,te.segments.push({end:B,start:B,delta:-(B-W),offset:0,glyphIndex:W});te.segments=te.segments.sort(function(Ye,yr){return Ye.start-yr.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var ve=te.segments.length,Re=0,qe=[],Ue=[],Te=[],mt=[],Xe=[],ot=[];for(j=0;j<ve;j+=1){var He=te.segments[j];He.end<=65535&&He.start<=65535?(qe=qe.concat({name:"end_"+j,type:"USHORT",value:He.end}),Ue=Ue.concat({name:"start_"+j,type:"USHORT",value:He.start}),Te=Te.concat({name:"idDelta_"+j,type:"SHORT",value:He.delta}),mt=mt.concat({name:"idRangeOffset_"+j,type:"USHORT",value:He.offset}),He.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+j,type:"USHORT",value:He.glyphId}))):Re+=1,O||He.glyphIndex===void 0||(ot=(ot=(ot=ot.concat({name:"cmap12Start_"+j,type:"ULONG",value:He.start})).concat({name:"cmap12End_"+j,type:"ULONG",value:He.end})).concat({name:"cmap12Glyph_"+j,type:"ULONG",value:He.glyphIndex}))}return te.segCountX2=2*(ve-Re),te.searchRange=2*Math.pow(2,Math.floor(Math.log(ve-Re)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(qe),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Ue),te.fields=te.fields.concat(Te),te.fields=te.fields.concat(mt),te.fields=te.fields.concat(Xe),te.cmap4Length=14+2*qe.length+2+2*Ue.length+2*Te.length+2*mt.length+2*Xe.length,O||(K=16+4*ot.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:K},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ot.length/3}]),te.fields=te.fields.concat(ot)),te}},he=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],be=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Oe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(T){this.font=T}function Qe(T){this.cmap=T}function _t(T,O){this.encoding=T,this.charset=O}function Dt(T){switch(T.version){case 1:this.names=Oe.slice();break;case 2:this.names=new Array(T.numberOfGlyphs);for(var O=0;O<T.numberOfGlyphs;O++)T.glyphNameIndex[O]<Oe.length?this.names[O]=Oe[T.glyphNameIndex[O]]:this.names[O]=T.names[T.glyphNameIndex[O]-Oe.length];break;case 2.5:this.names=new Array(T.numberOfGlyphs);for(var j=0;j<T.numberOfGlyphs;j++)this.names[j]=Oe[j+T.glyphNameIndex[j]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(T){var O=T.codePointAt(0),j=this.font.glyphs;if(j){for(var B=0;B<j.length;B+=1)for(var W=j.get(B),K=0;K<W.unicodes.length;K+=1)if(W.unicodes[K]===O)return B}return null},Qe.prototype.charToGlyphIndex=function(T){return this.cmap.glyphIndexMap[T.codePointAt(0)]||0},_t.prototype.charToGlyphIndex=function(T){return T=T.codePointAt(0),T=this.encoding[T],this.charset.indexOf(T)},Dt.prototype.nameToGlyphIndex=function(T){return this.names.indexOf(T)},Dt.prototype.glyphIndexToName=function(T){return this.names[T]};var Ft={line:function(T,O,j,B,W){T.beginPath(),T.moveTo(O,j),T.lineTo(B,W),T.stroke()}};function Ut(T){this.bindConstructorValues(T)}function Qr(T,O,j){Object.defineProperty(T,O,{get:function(){return T.path,T[j]},set:function(B){T[j]=B},enumerable:!0,configurable:!0})}function Mr(T,O){if(this.font=T,this.glyphs={},Array.isArray(O))for(var j=0;j<O.length;j++)this.glyphs[j]=O[j];this.length=O&&O.length||0}Ut.prototype.bindConstructorValues=function(T){var O;this.index=T.index||0,this.name=T.name||null,this.unicode=T.unicode||void 0,this.unicodes=T.unicodes||T.unicode!==void 0?[T.unicode]:[],T.xMin&&(this.xMin=T.xMin),T.yMin&&(this.yMin=T.yMin),T.xMax&&(this.xMax=T.xMax),T.yMax&&(this.yMax=T.yMax),T.advanceWidth&&(this.advanceWidth=T.advanceWidth),Object.defineProperty(this,"path",(T=T.path,O=T||new X,{configurable:!0,get:function(){return O=typeof O=="function"?O():O},set:function(j){O=j}}))},Ut.prototype.addUnicode=function(T){this.unicodes.length===0&&(this.unicode=T),this.unicodes.push(T)},Ut.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ut.prototype.getPath=function(T,O,j,B,W){T=T!==void 0?T:0,O=O!==void 0?O:0,j=j!==void 0?j:72;for(var K,te,me=(B=B||{}).xScale,_e=B.yScale,ve=((K=B.hinting&&W&&W.hinting?this.path&&W.hinting.exec(this,j):K)?(te=W.hinting.getCommands(K),T=Math.round(T),O=Math.round(O),me=_e=1):(te=this.path.commands,B=1/this.path.unitsPerEm*j,me===void 0&&(me=B),_e===void 0&&(_e=B)),new X),Re=0;Re<te.length;Re+=1){var qe=te[Re];qe.type==="M"?ve.moveTo(T+qe.x*me,O+-qe.y*_e):qe.type==="L"?ve.lineTo(T+qe.x*me,O+-qe.y*_e):qe.type==="Q"?ve.quadraticCurveTo(T+qe.x1*me,O+-qe.y1*_e,T+qe.x*me,O+-qe.y*_e):qe.type==="C"?ve.curveTo(T+qe.x1*me,O+-qe.y1*_e,T+qe.x2*me,O+-qe.y2*_e,T+qe.x*me,O+-qe.y*_e):qe.type==="Z"&&ve.closePath()}return ve},Ut.prototype.getContours=function(){if(this.points===void 0)return[];for(var T=[],O=[],j=0;j<this.points.length;j+=1){var B=this.points[j];O.push(B),B.lastPointOfContour&&(T.push(O),O=[])}return F.argument(O.length===0,"There are still points left in the current contour."),T},Ut.prototype.getMetrics=function(){for(var T=this.path.commands,O=[],j=[],B=0;B<T.length;B+=1){var W=T[B];W.type!=="Z"&&(O.push(W.x),j.push(W.y)),W.type!=="Q"&&W.type!=="C"||(O.push(W.x1),j.push(W.y1)),W.type==="C"&&(O.push(W.x2),j.push(W.y2))}var K={xMin:Math.min.apply(null,O),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,O),yMax:Math.max.apply(null,j),leftSideBearing:this.leftSideBearing};return isFinite(K.xMin)||(K.xMin=0),isFinite(K.xMax)||(K.xMax=this.advanceWidth),isFinite(K.yMin)||(K.yMin=0),isFinite(K.yMax)||(K.yMax=0),K.rightSideBearing=this.advanceWidth-K.leftSideBearing-(K.xMax-K.xMin),K},Ut.prototype.draw=function(T,O,j,B,W){this.getPath(O,j,B,W).draw(T)},Ut.prototype.drawPoints=function(T,O,j,B){function W(Re,qe,Ue,Te){var mt=2*Math.PI;T.beginPath();for(var Xe=0;Xe<Re.length;Xe+=1)T.moveTo(qe+Re[Xe].x*Te,Ue+Re[Xe].y*Te),T.arc(qe+Re[Xe].x*Te,Ue+Re[Xe].y*Te,2,0,mt,!1);T.closePath(),T.fill()}O=O!==void 0?O:0,j=j!==void 0?j:0;for(var B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),K=[],te=[],me=this.path,_e=0;_e<me.commands.length;_e+=1){var ve=me.commands[_e];ve.x!==void 0&&K.push({x:ve.x,y:-ve.y}),ve.x1!==void 0&&te.push({x:ve.x1,y:-ve.y1}),ve.x2!==void 0&&te.push({x:ve.x2,y:-ve.y2})}T.fillStyle="blue",W(K,O,j,B),T.fillStyle="red",W(te,O,j,B)},Ut.prototype.drawMetrics=function(T,O,j,B){O=O!==void 0?O:0,j=j!==void 0?j:0,B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),T.lineWidth=1,T.strokeStyle="black",Ft.line(T,O,-1e4,O,1e4),Ft.line(T,-1e4,j,1e4,j);var W=this.xMin||0,K=this.yMin||0,te=this.xMax||0,me=this.yMax||0,_e=this.advanceWidth||0;T.strokeStyle="blue",Ft.line(T,O+W*B,-1e4,O+W*B,1e4),Ft.line(T,O+te*B,-1e4,O+te*B,1e4),Ft.line(T,-1e4,j+-K*B,1e4,j+-K*B),Ft.line(T,-1e4,j+-me*B,1e4,j+-me*B),T.strokeStyle="green",Ft.line(T,O+_e*B,-1e4,O+_e*B,1e4)},Mr.prototype.get=function(T){return typeof this.glyphs[T]=="function"&&(this.glyphs[T]=this.glyphs[T]()),this.glyphs[T]},Mr.prototype.push=function(T,O){this.glyphs[T]=O,this.length++};var lr={GlyphSet:Mr,glyphLoader:function(T,O){return new Ut({index:O,font:T})},ttfGlyphLoader:function(T,O,j,B,W,K){return function(){var te=new Ut({index:O,font:T});return te.path=function(){j(te,B,W);var me=K(T.glyphs,te);return me.unitsPerEm=T.unitsPerEm,me},Qr(te,"xMin","_xMin"),Qr(te,"xMax","_xMax"),Qr(te,"yMin","_yMin"),Qr(te,"yMax","_yMax"),te}},cffGlyphLoader:function(T,O,j,B){return function(){var W=new Ut({index:O,font:T});return W.path=function(){var K=j(T,W,B);return K.unitsPerEm=T.unitsPerEm,K},W}}};function qr(T){return T=T.length<1240?107:T.length<33900?1131:32768,T}function Fr(T,O,j){var B,W=[],K=[],te=Ge.getCard16(T,O);if(te!==0){for(var me=Ge.getByte(T,O+2),_e=O+(te+1)*me+2,ve=O+3,Re=0;Re<te+1;Re+=1)W.push(Ge.getOffset(T,ve,me)),ve+=me;B=_e+W[te]}else B=O+2;for(var qe=0;qe<W.length-1;qe+=1){var Ue=Ge.getBytes(T,_e+W[qe],_e+W[qe+1]);j&&(Ue=j(Ue)),K.push(Ue)}return{objects:K,startOffset:O,endOffset:B}}function pi(T,O){if(O===28)return T.parseByte()<<8|T.parseByte();if(O===29)return T.parseByte()<<24|T.parseByte()<<16|T.parseByte()<<8|T.parseByte();if(O===30){for(var j=T,B="",W=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var te=j.parseByte(),K=te>>4,te=15&te;if(K==15||(B+=W[K],te==15))break;B+=W[te]}return parseFloat(B)}if(32<=O&&O<=246)return O-139;if(247<=O&&O<=250)return 256*(O-247)+T.parseByte()+108;if(251<=O&&O<=254)return 256*-(O-251)-T.parseByte()-108;throw new Error("Invalid b0 "+O)}function ql(T,O,j){var B=new Ge.Parser(T,O=O!==void 0?O:0),W=[],K=[];for(j=j!==void 0?j:T.length;B.relativeOffset<j;){var te=B.parseByte();te<=21?(te===12&&(te=1200+B.parseByte()),W.push([te,K]),K=[]):K.push(pi(B,te))}for(var me=W,_e={},ve=0;ve<me.length;ve+=1){var Re=me[ve][0],qe=me[ve][1],Ue=void 0,Ue=qe.length===1?qe[0]:qe;if(_e.hasOwnProperty(Re)&&!isNaN(_e[Re]))throw new Error("Object "+_e+" already has key "+Re);_e[Re]=Ue}return _e}function Ms(T,O){return O=O<=390?he[O]:T[O-391]}function Co(T,O,j){for(var B,W={},K=0;K<O.length;K+=1){var te=O[K];if(Array.isArray(te.type)){var me=[];me.length=te.type.length;for(var _e=0;_e<te.type.length;_e++)(B=T[te.op]!==void 0?T[te.op][_e]:void 0)===void 0&&(B=te.value!==void 0&&te.value[_e]!==void 0?te.value[_e]:null),te.type[_e]==="SID"&&(B=Ms(j,B)),me[_e]=B;W[te.name]=me}else(B=T[te.op])===void 0&&(B=te.value!==void 0?te.value:null),te.type==="SID"&&(B=Ms(j,B)),W[te.name]=B}return W}var vi=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Vn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function yl(T,O,j,B){return Co(ql(T,O,j),Vn,B)}function Na(T,O,j,B){for(var W=[],K=0;K<j.length;K+=1){var te=new DataView(new Uint8Array(j[K]).buffer),te=(me=B,Co(ql(te,0,te.byteLength),vi,me)),me=(te._subrs=[],te._subrsBias=0,te.private[0]),_e=te.private[1];me!==0&&_e!==0&&(me=yl(T,_e+O,me,B),te._defaultWidthX=me.defaultWidthX,te._nominalWidthX=me.nominalWidthX,me.subrs!==0&&(_e=Fr(T,_e+me.subrs+O),te._subrs=_e.objects,te._subrsBias=qr(te._subrs)),te._privateDict=me),W.push(te)}return W}function Lo(T,O,j){var B,W,K,te,me,_e,ve,Re,qe,Ue=new X,Te=[],mt=0,Xe=!1,ot=!1,He=0,Ye=0,yr=(qe=(T.isCIDFont?(me=T.tables.cff.topDict._fdSelect[O.index],me=T.tables.cff.topDict._fdArray[me],_e=me._subrs,ve=me._subrsBias,Re=me._defaultWidthX,me):(_e=T.tables.cff.topDict._subrs,ve=T.tables.cff.topDict._subrsBias,Re=T.tables.cff.topDict._defaultWidthX,T.tables.cff.topDict))._nominalWidthX,Re);function tn(Sr,bn){ot&&Ue.closePath(),Ue.moveTo(Sr,bn),ot=!0}function vr(){Te.length%2==0||Xe||(yr=Te.shift()+qe),mt+=Te.length>>1,Te.length=0,Xe=!0}return function Sr(bn){for(var mi,ss,js,Hl,Yl,Jp,Jo,wi,Io,Xl,Ki,xl,_i=0;_i<bn.length;){var Ma=bn[_i];switch(_i+=1,Ma){case 1:case 3:vr();break;case 4:1<Te.length&&!Xe&&(yr=Te.shift()+qe,Xe=!0),Ye+=Te.pop(),tn(He,Ye);break;case 5:for(;0<Te.length;)He+=Te.shift(),Ye+=Te.shift(),Ue.lineTo(He,Ye);break;case 6:for(;0<Te.length&&(He+=Te.shift(),Ue.lineTo(He,Ye),Te.length!==0);)Ye+=Te.shift(),Ue.lineTo(He,Ye);break;case 7:for(;0<Te.length&&(Ye+=Te.shift(),Ue.lineTo(He,Ye),Te.length!==0);)He+=Te.shift(),Ue.lineTo(He,Ye);break;case 8:for(;0<Te.length;)B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);break;case 10:Yl=Te.pop()+ve,(Jp=_e[Yl])&&Sr(Jp);break;case 11:return;case 12:switch(Ma=bn[_i],_i+=1,Ma){case 35:B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),wi=te+Te.shift(),Io=Jo+Te.shift(),Xl=wi+Te.shift(),Ki=Io+Te.shift(),xl=Xl+Te.shift(),He=Ki+Te.shift(),Ye=xl+Te.shift(),Te.shift(),Ue.curveTo(B,W,K,te,Jo,wi),Ue.curveTo(Io,Xl,Ki,xl,He,Ye);break;case 34:B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),wi=te,Io=Jo+Te.shift(),Xl=te,Ki=Io+Te.shift(),xl=Ye,He=Ki+Te.shift(),Ue.curveTo(B,W,K,te,Jo,wi),Ue.curveTo(Io,Xl,Ki,xl,He,Ye);break;case 36:B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),wi=te,Io=Jo+Te.shift(),Xl=te,Ki=Io+Te.shift(),xl=Xl+Te.shift(),He=Ki+Te.shift(),Ue.curveTo(B,W,K,te,Jo,wi),Ue.curveTo(Io,Xl,Ki,xl,He,Ye);break;case 37:B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),wi=te+Te.shift(),Io=Jo+Te.shift(),Xl=wi+Te.shift(),Ki=Io+Te.shift(),xl=Xl+Te.shift(),Math.abs(Ki-He)>Math.abs(xl-Ye)?He=Ki+Te.shift():Ye=xl+Te.shift(),Ue.curveTo(B,W,K,te,Jo,wi),Ue.curveTo(Io,Xl,Ki,xl,He,Ye);break;default:console.log("Glyph "+O.index+": unknown operator 1200"+Ma),Te.length=0}break;case 14:0<Te.length&&!Xe&&(yr=Te.shift()+qe,Xe=!0),ot&&(Ue.closePath(),ot=!1);break;case 18:vr();break;case 19:case 20:vr(),_i+=mt+7>>3;break;case 21:2<Te.length&&!Xe&&(yr=Te.shift()+qe,Xe=!0),Ye+=Te.pop(),tn(He+=Te.pop(),Ye);break;case 22:1<Te.length&&!Xe&&(yr=Te.shift()+qe,Xe=!0),tn(He+=Te.pop(),Ye);break;case 23:vr();break;case 24:for(;2<Te.length;)B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);He+=Te.shift(),Ye+=Te.shift(),Ue.lineTo(He,Ye);break;case 25:for(;6<Te.length;)He+=Te.shift(),Ye+=Te.shift(),Ue.lineTo(He,Ye);B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);break;case 26:for(Te.length%2&&(He+=Te.shift());0<Te.length;)B=He,W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K,Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);break;case 27:for(Te.length%2&&(Ye+=Te.shift());0<Te.length;)B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te,Ue.curveTo(B,W,K,te,He,Ye);break;case 28:mi=bn[_i],ss=bn[_i+1],Te.push((mi<<24|ss<<16)>>16),_i+=2;break;case 29:Yl=Te.pop()+T.gsubrsBias,(Jp=T.gsubrs[Yl])&&Sr(Jp);break;case 30:for(;0<Te.length&&(B=He,W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye),Te.length!==0);)B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),Ye=te+Te.shift(),He=K+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye);break;case 31:for(;0<Te.length&&(B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),Ye=te+Te.shift(),He=K+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye),Te.length!==0);)B=He,W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye);break;default:Ma<32?console.log("Glyph "+O.index+": unknown operator "+Ma):Ma<247?Te.push(Ma-139):Ma<251?(mi=bn[_i],_i+=1,Te.push(256*(Ma-247)+mi+108)):Ma<255?(mi=bn[_i],_i+=1,Te.push(256*-(Ma-251)-mi-108)):(mi=bn[_i],ss=bn[_i+1],js=bn[_i+2],Hl=bn[_i+3],_i+=4,Te.push((mi<<24|ss<<16|js<<8|Hl)/65536))}}}(j),O.advanceWidth=yr,Ue}function bl(T,O){var j,B=he.indexOf(T);return 0<=B&&(j=B),0<=(B=O.indexOf(T))?j=B+he.length:(j=he.length+O.length,O.push(T)),j}function zM(T,O,j){for(var B={},W=0;W<T.length;W+=1){var K=T[W],te=O[K.name];te===void 0||function me(_e,ve){if(_e===ve)return 1;if(Array.isArray(_e)&&Array.isArray(ve)&&_e.length===ve.length){for(var Re=0;Re<_e.length;Re+=1)if(!me(_e[Re],ve[Re]))return;return 1}}(te,K.value)||(K.type==="SID"&&(te=bl(te,j)),B[K.op]={name:K.name,type:K.type,value:te})}return B}function UM(T,O){var j=new We.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return j.dict=zM(vi,T,O),j}function VM(T){var O=new We.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return O.topDicts=[{name:"topDict_0",type:"TABLE",value:T}],O}function Y6(T){for(var O=new We.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),j=0;j<T.length;j+=1){var B=T.get(j),W=function(K){for(var te=[],me=K.path,_e=(te.push({name:"width",type:"NUMBER",value:K.advanceWidth}),0),ve=0,Re=0;Re<me.commands.length;Re+=1){var qe,Ue,Te,mt,Xe=void 0,ot=void 0,He=me.commands[Re];(He=He.type==="Q"?{type:"C",x:He.x,y:He.y,x1:1/3*_e+2/3*He.x1,y1:1/3*ve+2/3*He.y1,x2:1/3*He.x+2/3*He.x1,y2:1/3*He.y+2/3*He.y1}:He).type==="M"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rmoveto",type:"OP",value:21}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="L"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rlineto",type:"OP",value:5}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="C"&&(qe=Math.round(He.x1-_e),Ue=Math.round(He.y1-ve),Te=Math.round(He.x2-He.x1),mt=Math.round(He.y2-He.y1),Xe=Math.round(He.x-He.x2),ot=Math.round(He.y-He.y2),te.push({name:"dx1",type:"NUMBER",value:qe}),te.push({name:"dy1",type:"NUMBER",value:Ue}),te.push({name:"dx2",type:"NUMBER",value:Te}),te.push({name:"dy2",type:"NUMBER",value:mt}),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rrcurveto",type:"OP",value:8}),_e=Math.round(He.x),ve=Math.round(He.y))}return te.push({name:"endchar",type:"OP",value:14}),te}(B);O.charStrings.push({name:B.name,type:"CHARSTRING",value:W})}return O}var GM={parse:function(T,O,j){j.tables.cff={},me=T,B=O,(W={}).formatMajor=Ge.getCard8(me,B),W.formatMinor=Ge.getCard8(me,B+1),W.size=Ge.getCard8(me,B+2),W.offsetSize=Ge.getCard8(me,B+3),W.startOffset=B,W.endOffset=B+4;var me=Fr(T,W.endOffset,Ge.bytesToString),B=Fr(T,me.endOffset),W=Fr(T,B.endOffset,Ge.bytesToString),me=Fr(T,W.endOffset);if(j.gsubrs=me.objects,j.gsubrsBias=qr(j.gsubrs),(me=Na(T,O,B.objects,W.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+me.length);if(B=me[0],(j.tables.cff.topDict=B)._privateDict&&(j.defaultWidthX=B._privateDict.defaultWidthX,j.nominalWidthX=B._privateDict.nominalWidthX),B.ros[0]!==void 0&&B.ros[1]!==void 0&&(j.isCIDFont=!0),j.isCIDFont){var me=B.fdArray,K=B.fdSelect;if(me===0||K===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");me=Na(T,O,Fr(T,me+=O).objects,W.objects),B._fdArray=me,B._fdSelect=function(Ue,Te,mt,Xe){var ot,He=[],Ye=new Ge.Parser(Ue,Te);if((Ue=Ye.parseCard8())===0)for(var yr=0;yr<mt;yr++){if(Xe<=(ot=Ye.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");He.push(ot)}else{if(Ue!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ue);var tn,vr=Ye.parseCard16(),Sr=Ye.parseCard16();if(Sr!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Sr);for(var bn=0;bn<vr;bn++){if(ot=Ye.parseCard8(),tn=Ye.parseCard16(),Xe<=ot)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");if(mt<tn)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+tn);for(;Sr<tn;Sr++)He.push(ot);Sr=tn}if(tn!==mt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+tn)}return He}(T,K+=O,j.numGlyphs,me.length)}var K=O+B.private[1],me=yl(T,K,B.private[0],W.objects),te=(j.defaultWidthX=me.defaultWidthX,j.nominalWidthX=me.nominalWidthX,me.subrs!==0?(K=Fr(T,K+me.subrs),j.subrs=K.objects,j.subrsBias=qr(j.subrs)):(j.subrs=[],j.subrsBias=0),Fr(T,O+B.charStrings)),me=(j.nGlyphs=te.objects.length,function(Re,qe,Ue,Te){var mt=new Ge.Parser(Re,qe),Xe=(--Ue,[".notdef"]);if((Re=mt.parseCard8())===0)for(var ot=0;ot<Ue;ot+=1)He=mt.parseSID(),Xe.push(Ms(Te,He));else if(Re===1)for(;Xe.length<=Ue;)for(var He=mt.parseSID(),Ye=mt.parseCard8(),yr=0;yr<=Ye;yr+=1)Xe.push(Ms(Te,He)),He+=1;else{if(Re!==2)throw new Error("Unknown charset format "+Re);for(;Xe.length<=Ue;){He=mt.parseSID(),Ye=mt.parseCard16();for(var tn=0;tn<=Ye;tn+=1)Xe.push(Ms(Te,He)),He+=1}}return Xe}(T,O+B.charset,j.nGlyphs,W.objects));B.encoding===0?j.cffEncoding=new _t(oe,me):B.encoding===1?j.cffEncoding=new _t(be,me):j.cffEncoding=function(Re,qe,Ue){var Te={},mt=new Ge.Parser(Re,qe);if((Re=mt.parseCard8())===0)for(var Xe=mt.parseCard8(),ot=0;ot<Xe;ot+=1)Te[Ye=mt.parseCard8()]=ot;else{if(Re!==1)throw new Error("Unknown encoding format "+Re);for(var He=mt.parseCard8(),Ye=1,yr=0;yr<He;yr+=1)for(var tn=mt.parseCard8(),vr=mt.parseCard8(),Sr=tn;Sr<=tn+vr;Sr+=1)Te[Sr]=Ye,Ye+=1}return new _t(Te,Ue)}(T,O+B.encoding,me),j.encoding=j.encoding||j.cffEncoding,j.glyphs=new lr.GlyphSet(j);for(var _e=0;_e<j.nGlyphs;_e+=1){var ve=te.objects[_e];j.glyphs.push(_e,lr.cffGlyphLoader(j,_e,Lo,ve))}},make:function(T,Re){for(var j,B=new We.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),W=1/Re.unitsPerEm,W={version:Re.version,fullName:Re.fullName,familyName:Re.familyName,weight:Re.weightName,fontBBox:Re.fontBBox||[0,0,0,0],fontMatrix:[W,0,0,W,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},K=[],te=1;te<T.length;te+=1)j=T.get(te),K.push(j.name);var me,_e,ve=[],Re=(B.header=new We.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),B.nameIndex=function(Ue){var Te=new We.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Te.names=[];for(var mt=0;mt<Ue.length;mt+=1)Te.names.push({name:"name_"+mt,type:"NAME",value:Ue[mt]});return Te}([Re.postScriptName]),UM(W,ve)),qe=(B.topDictIndex=VM(Re),B.globalSubrIndex=new We.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),B.charsets=function(Ue,Te){for(var mt=new We.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Ue.length;Xe+=1){var ot=bl(Ue[Xe],Te);mt.fields.push({name:"glyph_"+Xe,type:"SID",value:ot})}return mt}(K,ve),B.charStringsIndex=Y6(T),B.privateDict=(qe={},me=ve,(_e=new We.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=zM(Vn,qe,me),_e),B.stringIndex=function(Ue){var Te=new We.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Te.strings=[];for(var mt=0;mt<Ue.length;mt+=1)Te.strings.push({name:"string_"+mt,type:"STRING",value:Ue[mt]});return Te}(ve),B.header.sizeOf()+B.nameIndex.sizeOf()+B.topDictIndex.sizeOf()+B.stringIndex.sizeOf()+B.globalSubrIndex.sizeOf());return W.charset=qe,W.encoding=0,W.charStrings=W.charset+B.charsets.sizeOf(),W.private[1]=W.charStrings+B.charStringsIndex.sizeOf(),Re=UM(W,ve),B.topDictIndex=VM(Re),B}},WM={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.fontRevision=Math.round(1e3*B.parseFixed())/1e3,j.checkSumAdjustment=B.parseULong(),j.magicNumber=B.parseULong(),F.argument(j.magicNumber===1594834165,"Font header has wrong magic number."),j.flags=B.parseUShort(),j.unitsPerEm=B.parseUShort(),j.created=B.parseLongDateTime(),j.modified=B.parseLongDateTime(),j.xMin=B.parseShort(),j.yMin=B.parseShort(),j.xMax=B.parseShort(),j.yMax=B.parseShort(),j.macStyle=B.parseUShort(),j.lowestRecPPEM=B.parseUShort(),j.fontDirectionHint=B.parseShort(),j.indexToLocFormat=B.parseShort(),j.glyphDataFormat=B.parseShort(),j},make:function(T){var O=Math.round(new Date().getTime()/1e3)+2082844800,j=O;return T.createdTimestamp&&(j=T.createdTimestamp+2082844800),new We.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:j},{name:"modified",type:"LONGDATETIME",value:O},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],T)}},ke={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.ascender=B.parseShort(),j.descender=B.parseShort(),j.lineGap=B.parseShort(),j.advanceWidthMax=B.parseUShort(),j.minLeftSideBearing=B.parseShort(),j.minRightSideBearing=B.parseShort(),j.xMaxExtent=B.parseShort(),j.caretSlopeRise=B.parseShort(),j.caretSlopeRun=B.parseShort(),j.caretOffset=B.parseShort(),B.relativeOffset+=8,j.metricDataFormat=B.parseShort(),j.numberOfHMetrics=B.parseUShort(),j},make:function(T){return new We.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],T)}},St={parse:function(T,O,j,B,W){for(var K,te,me=new Ge.Parser(T,O),_e=0;_e<B;_e+=1){_e<j&&(K=me.parseUShort(),te=me.parseShort());var ve=W.get(_e);ve.advanceWidth=K,ve.leftSideBearing=te}},make:function(T){for(var O=new We.Table("hmtx",[]),j=0;j<T.length;j+=1){var W=T.get(j),B=W.advanceWidth||0,W=W.leftSideBearing||0;O.fields.push({name:"advanceWidth_"+j,type:"USHORT",value:B}),O.fields.push({name:"leftSideBearing_"+j,type:"SHORT",value:W})}return O}},qt={make:function(T){for(var O=new We.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:T.length}]),j="",B=12+4*T.length,W=0;W<T.length;++W){var K=j.indexOf(T[W]);K<0&&(K=j.length,j+=T[W]),O.fields.push({name:"offset "+W,type:"USHORT",value:B+K}),O.fields.push({name:"length "+W,type:"USHORT",value:T[W].length})}return O.fields.push({name:"stringPool",type:"CHARARRAY",value:j}),O},parse:function(T,O){for(var j=new Ge.Parser(T,O),B=j.parseULong(),W=(F.argument(B===1,"Unsupported ltag table version."),j.skip("uLong",1),j.parseULong()),K=[],te=0;te<W;te++){for(var me="",_e=O+j.parseUShort(),ve=j.parseUShort(),Re=_e;Re<_e+ve;++Re)me+=String.fromCharCode(T.getInt8(Re));K.push(me)}return K}},xt={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.numGlyphs=B.parseUShort(),j.version===1&&(j.maxPoints=B.parseUShort(),j.maxContours=B.parseUShort(),j.maxCompositePoints=B.parseUShort(),j.maxCompositeContours=B.parseUShort(),j.maxZones=B.parseUShort(),j.maxTwilightPoints=B.parseUShort(),j.maxStorage=B.parseUShort(),j.maxFunctionDefs=B.parseUShort(),j.maxInstructionDefs=B.parseUShort(),j.maxStackElements=B.parseUShort(),j.maxSizeOfInstructions=B.parseUShort(),j.maxComponentElements=B.parseUShort(),j.maxComponentDepth=B.parseUShort()),j},make:function(T){return new We.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:T}])}},Cn=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],ht={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Gn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},zt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Mn="utf-16",Vt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},xs={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function aa(T,O,j){switch(T){case 0:return Mn;case 1:return xs[j]||Vt[O];case 3:if(O===1||O===10)return Mn}}function is(T){var O,j={};for(O in T)j[T[O]]=parseInt(O);return j}function Fa(T,O,j,B,W,K){return new We.Record("NameRecord",[{name:"platformID",type:"USHORT",value:T},{name:"encodingID",type:"USHORT",value:O},{name:"languageID",type:"USHORT",value:j},{name:"nameID",type:"USHORT",value:B},{name:"length",type:"USHORT",value:W},{name:"offset",type:"USHORT",value:K}])}function Jh(T,O){if((j=function(K,te){var me=K.length,_e=te.length-me+1;e:for(var ve=0;ve<_e;ve++)for(;ve<_e;ve++){for(var Re=0;Re<me;Re++)if(te[ve+Re]!==K[Re])continue e;return ve}return-1}(T,O))<0)for(var j=O.length,B=0,W=T.length;B<W;++B)O.push(T[B]);return j}var Rf={parse:function(T,O,j){for(var B={},W=new Ge.Parser(T,O),O=W.parseUShort(),K=W.parseUShort(),te=W.offset+W.parseUShort(),me=0;me<K;me++){var mt=W.parseUShort(),_e=W.parseUShort(),ve=W.parseUShort(),Re=W.parseUShort(),Re=Cn[Re]||Re,qe=W.parseUShort(),Ue=W.parseUShort(),Te=function(ot,He,Ye){switch(ot){case 0:if(He===65535)return"und";if(Ye)return Ye[He];break;case 1:return ht[He];case 3:return zt[He]}}(mt,ve,j),mt=aa(mt,_e,ve);mt!==void 0&&Te!==void 0&&(_e=void 0,(_e=mt===Mn?z.UTF16(T,te+Ue,qe):z.MACSTRING(T,te+Ue,qe,mt))&&((ve=(ve=B[Re])===void 0?B[Re]={}:ve)[Te]=_e))}return O===1&&W.parseUShort(),B},make:function(T,O){var j,B=[],W={},K=is(Cn);for(j in T){var te=K[j];if(te===void 0&&(te=j),Ue=parseInt(te),isNaN(Ue))throw new Error('Name table entry "'+j+'" does not exist, see nameTableNames for complete list.');W[Ue]=T[j],B.push(Ue)}for(var me=is(ht),_e=is(zt),ve=[],Re=[],qe=0;qe<B.length;qe++){var Ue,Te,mt=W[Ue=B[qe]];for(Te in mt){var Xe=mt[Te],tn=1,ot=me[Te],He=Gn[ot],Ye=aa(tn,He,ot),Ye=q.MACSTRING(Xe,Ye),yr=(Ye===void 0&&(tn=0,(ot=O.indexOf(Te))<0&&(ot=O.length,O.push(Te)),He=4,Ye=q.UTF16(Xe)),Jh(Ye,Re)),tn=(ve.push(Fa(tn,He,ot,Ue,Ye.length,yr)),_e[Te]);tn!==void 0&&(ot=Jh(He=q.UTF16(Xe),Re),ve.push(Fa(3,1,tn,Ue,He.length,ot)))}}ve.sort(function(bn,mi){return bn.platformID-mi.platformID||bn.encodingID-mi.encodingID||bn.languageID-mi.languageID||bn.nameID-mi.nameID});for(var vr=new We.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ve.length},{name:"stringOffset",type:"USHORT",value:6+12*ve.length}]),Sr=0;Sr<ve.length;Sr++)vr.fields.push({name:"record_"+Sr,type:"RECORD",value:ve[Sr]});return vr.fields.push({name:"strings",type:"LITERAL",value:Re}),vr}},eg=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Oa={parse:function(T,O){var j={},B=new Ge.Parser(T,O);j.version=B.parseUShort(),j.xAvgCharWidth=B.parseShort(),j.usWeightClass=B.parseUShort(),j.usWidthClass=B.parseUShort(),j.fsType=B.parseUShort(),j.ySubscriptXSize=B.parseShort(),j.ySubscriptYSize=B.parseShort(),j.ySubscriptXOffset=B.parseShort(),j.ySubscriptYOffset=B.parseShort(),j.ySuperscriptXSize=B.parseShort(),j.ySuperscriptYSize=B.parseShort(),j.ySuperscriptXOffset=B.parseShort(),j.ySuperscriptYOffset=B.parseShort(),j.yStrikeoutSize=B.parseShort(),j.yStrikeoutPosition=B.parseShort(),j.sFamilyClass=B.parseShort(),j.panose=[];for(var W=0;W<10;W++)j.panose[W]=B.parseByte();return j.ulUnicodeRange1=B.parseULong(),j.ulUnicodeRange2=B.parseULong(),j.ulUnicodeRange3=B.parseULong(),j.ulUnicodeRange4=B.parseULong(),j.achVendID=String.fromCharCode(B.parseByte(),B.parseByte(),B.parseByte(),B.parseByte()),j.fsSelection=B.parseUShort(),j.usFirstCharIndex=B.parseUShort(),j.usLastCharIndex=B.parseUShort(),j.sTypoAscender=B.parseShort(),j.sTypoDescender=B.parseShort(),j.sTypoLineGap=B.parseShort(),j.usWinAscent=B.parseUShort(),j.usWinDescent=B.parseUShort(),1<=j.version&&(j.ulCodePageRange1=B.parseULong(),j.ulCodePageRange2=B.parseULong()),2<=j.version&&(j.sxHeight=B.parseShort(),j.sCapHeight=B.parseShort(),j.usDefaultChar=B.parseUShort(),j.usBreakChar=B.parseUShort(),j.usMaxContent=B.parseUShort()),j},make:function(T){return new We.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],T)},unicodeRanges:eg,getUnicodeRange:function(T){for(var O=0;O<eg.length;O+=1){var j=eg[O];if(T>=j.begin&&T<j.end)return O}return-1}},eTe={parse:function(T,O){var j={},B=new Ge.Parser(T,O);switch(j.version=B.parseVersion(),j.italicAngle=B.parseFixed(),j.underlinePosition=B.parseShort(),j.underlineThickness=B.parseShort(),j.isFixedPitch=B.parseULong(),j.minMemType42=B.parseULong(),j.maxMemType42=B.parseULong(),j.minMemType1=B.parseULong(),j.maxMemType1=B.parseULong(),j.version){case 1:j.names=Oe.slice();break;case 2:j.numberOfGlyphs=B.parseUShort(),j.glyphNameIndex=new Array(j.numberOfGlyphs);for(var W=0;W<j.numberOfGlyphs;W++)j.glyphNameIndex[W]=B.parseUShort();j.names=[];for(var K,te=0;te<j.numberOfGlyphs;te++)j.glyphNameIndex[te]>=Oe.length&&(K=B.parseChar(),j.names.push(B.parseString(K)));break;case 2.5:j.numberOfGlyphs=B.parseUShort(),j.offset=new Array(j.numberOfGlyphs);for(var me=0;me<j.numberOfGlyphs;me++)j.offset[me]=B.parseChar()}return j},make:function(){return new We.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Zp=new Array(9),ik=(Zp[1]=function(){var T=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),deltaGlyphId:this.parseUShort()}:O===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),substitute:this.parseOffset16List()}:void F.assert(!1,"0x"+T.toString(16)+": lookup type 1 format must be 1 or 2.")},Zp[2]=function(){var T=this.parseUShort();return F.argument(T===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),sequences:this.parseListOfLists()}},Zp[3]=function(){var T=this.parseUShort();return F.argument(T===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),alternateSets:this.parseListOfLists()}},Zp[4]=function(){var T=this.parseUShort();return F.argument(T===1,"GSUB ligature table identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Le.uShort,lookupListIndex:Le.uShort});Zp[5]=function(){var T,O,j=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:B,coverage:this.parsePointer(Le.coverage),ruleSets:this.parseListOfLists(function(){var W=this.parseUShort(),K=this.parseUShort();return{input:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(K,ik)}})}:B===2?{substFormat:B,coverage:this.parsePointer(Le.coverage),classDef:this.parsePointer(Le.classDef),classSets:this.parseListOfLists(function(){var W=this.parseUShort(),K=this.parseUShort();return{classes:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(K,ik)}})}:B===3?(T=this.parseUShort(),O=this.parseUShort(),{substFormat:B,coverages:this.parseList(T,Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(O,ik)}):void F.assert(!1,"0x"+j.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Zp[6]=function(){var T=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ik)}})}:O===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),backtrackClassDef:this.parsePointer(Le.classDef),inputClassDef:this.parsePointer(Le.classDef),lookaheadClassDef:this.parsePointer(Le.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ik)}})}:O===3?{substFormat:3,backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),inputCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(ik)}:void F.assert(!1,"0x"+T.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Zp[7]=function(){var T=this.parseUShort(),T=(F.argument(T===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),O=new Le(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:T,extension:Zp[T].call(O)}},Zp[8]=function(){var T=this.parseUShort();return F.argument(T===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),substitutes:this.parseUShortList()}};var X6=new Array(9);X6[1]=function(T){return T.substFormat===1?new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)},{name:"deltaGlyphID",type:"USHORT",value:T.deltaGlyphId}]):new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)}].concat(We.ushortList("substitute",T.substitute)))},X6[3]=function(T){return F.assert(T.substFormat===1,"Lookup type 3 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)}].concat(We.tableList("altSet",T.alternateSets,function(O){return new We.Table("alternateSetTable",We.ushortList("alternate",O))})))},X6[4]=function(T){return F.assert(T.substFormat===1,"Lookup type 4 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)}].concat(We.tableList("ligSet",T.ligatureSets,function(O){return new We.Table("ligatureSetTable",We.tableList("ligature",O,function(j){return new We.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:j.ligGlyph}].concat(We.ushortList("component",j.components,j.components.length+1)))}))})))};var tTe={parse:function(T,O){return O=(T=new Le(T,O=O||0)).parseVersion(1),F.argument(O===1||O===1.1,"Unsupported GSUB table version."),O===1?{version:O,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Zp)}:{version:O,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Zp),variations:T.parseFeatureVariationsList()}},make:function(T){return new We.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(T.lookups,X6)}])}},rTe={parse:function(T,O){for(var j=new Ge.Parser(T,O),B=j.parseULong(),W=(F.argument(B===1,"Unsupported META table version."),j.parseULong(),j.parseULong(),j.parseULong()),K={},te=0;te<W;te++){var me=j.parseTag(),ve=j.parseULong(),_e=j.parseULong(),ve=z.UTF8(T,O+ve,_e);K[me]=ve}return K},make:function(T){var O,j=Object.keys(T).length,B="",W=16+12*j,K=new We.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:W},{name:"numTags",type:"ULONG",value:j}]);for(O in T){var te=B.length;B+=T[O],K.fields.push({name:"tag "+O,type:"TAG",value:O}),K.fields.push({name:"offset "+O,type:"ULONG",value:W+te}),K.fields.push({name:"length "+O,type:"ULONG",value:T[O].length})}return K.fields.push({name:"stringPool",type:"CHARARRAY",value:B}),K}};function nTe(T){return Math.log(T)/Math.log(2)|0}function pre(T){for(;T.length%4!=0;)T.push(0);for(var O=0,j=0;j<T.length;j+=4)O+=(T[j]<<24)+(T[j+1]<<16)+(T[j+2]<<8)+T[j+3];return O%=Math.pow(2,32)}function oTe(T,O,j,B){return new We.Record("Table Record",[{name:"tag",type:"TAG",value:T!==void 0?T:""},{name:"checkSum",type:"ULONG",value:O!==void 0?O:0},{name:"offset",type:"ULONG",value:j!==void 0?j:0},{name:"length",type:"ULONG",value:B!==void 0?B:0}])}function iTe(T){for(var O=new We.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),j=(O.tables=T,O.numTables=T.length,Math.pow(2,nTe(O.numTables))),B=(O.searchRange=16*j,O.entrySelector=nTe(j),O.rangeShift=16*O.numTables-O.searchRange,[]),W=[],K=O.sizeOf()+oTe().sizeOf()*O.numTables;K%4!=0;)K+=1,W.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<T.length;te+=1){var me=T[te],_e=(F.argument(me.tableName.length===4,"Table name"+me.tableName+" is invalid."),me.sizeOf()),ve=oTe(me.tableName,pre(me.encode()),K,_e);for(B.push({name:ve.tag+" Table Record",type:"RECORD",value:ve}),W.push({name:me.tableName+" table",type:"RECORD",value:me}),K+=_e,F.argument(!isNaN(K),"Something went wrong calculating the offset.");K%4!=0;)K+=1,W.push({name:"padding",type:"BYTE",value:0})}return B.sort(function(Re,qe){return Re.value.tag>qe.value.tag?1:-1}),O.fields=O.fields.concat(B),O.fields=O.fields.concat(W),O}function sTe(T,O,j){for(var B=0;B<O.length;B+=1){var W=T.charToGlyphIndex(O[B]);if(0<W)return T.glyphs.get(W).getMetrics()}return j}var SSt={make:iTe,fontToTable:function(T){for(var O,j=[],B=[],W=[],K=[],te=[],me=[],_e=[],ve=0,Re=0,qe=0,Ue=0,Te=0,mt=0;mt<T.glyphs.length;mt+=1){var Xe=T.glyphs.get(mt),ot=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+mt+"): advanceWidth is not a number.");(ot<O||O===void 0)&&0<ot&&(O=ot),ve<ot&&(ve=ot);var ot=Oa.getUnicodeRange(ot);if(ot<32)Re|=1<<ot;else if(ot<64)qe|=1<<ot-32;else if(ot<96)Ue|=1<<ot-64;else{if(!(ot<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Te|=1<<ot-96}Xe.name!==".notdef"&&(ot=Xe.getMetrics(),j.push(ot.xMin),B.push(ot.yMin),W.push(ot.xMax),K.push(ot.yMax),me.push(ot.leftSideBearing),_e.push(ot.rightSideBearing),te.push(Xe.advanceWidth))}var He,Ye={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,B),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,K),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(Ma){for(var XM=0,lk=0;lk<Ma.length;lk+=1)XM+=Ma[lk];return XM/Ma.length}(te),minLeftSideBearing:Math.min.apply(null,me),maxLeftSideBearing:Math.max.apply(null,me),minRightSideBearing:Math.min.apply(null,_e)},yr=(Ye.ascender=T.ascender,Ye.descender=T.descender,WM.make({flags:3,unitsPerEm:T.unitsPerEm,xMin:Ye.xMin,yMin:Ye.yMin,xMax:Ye.xMax,yMax:Ye.yMax,lowestRecPPEM:3,createdTimestamp:T.createdTimestamp})),tn=ke.make({ascender:Ye.ascender,descender:Ye.descender,advanceWidthMax:Ye.advanceWidthMax,minLeftSideBearing:Ye.minLeftSideBearing,minRightSideBearing:Ye.minRightSideBearing,xMaxExtent:Ye.maxLeftSideBearing+(Ye.xMax-Ye.xMin),numberOfHMetrics:T.glyphs.length}),vr=xt.make(T.glyphs.length),Sr=Oa.make({xAvgCharWidth:Math.round(Ye.advanceWidthAvg),usWeightClass:T.tables.os2.usWeightClass,usWidthClass:T.tables.os2.usWidthClass,usFirstCharIndex:O,usLastCharIndex:ve,ulUnicodeRange1:Re,ulUnicodeRange2:qe,ulUnicodeRange3:Ue,ulUnicodeRange4:Te,fsSelection:T.tables.os2.fsSelection,sTypoAscender:Ye.ascender,sTypoDescender:Ye.descender,sTypoLineGap:0,usWinAscent:Ye.yMax,usWinDescent:Math.abs(Ye.yMin),ulCodePageRange1:1,sxHeight:sTe(T,"xyvw",{yMax:Math.round(Ye.ascender/2)}).yMax,sCapHeight:sTe(T,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ye).yMax,usDefaultChar:T.hasChar(" ")?32:0,usBreakChar:T.hasChar(" ")?32:0}),bn=St.make(T.glyphs),mi=fe.make(T.glyphs),wi=T.getEnglishName("fontFamily"),Io=T.getEnglishName("fontSubfamily"),Jo=wi+" "+Io,ss=(ss=T.getEnglishName("postScriptName"))||wi.replace(/\s/g,"")+"-"+Io,js={};for(He in T.names)js[He]=T.names[He];js.uniqueID||(js.uniqueID={en:T.getEnglishName("manufacturer")+":"+Jo}),js.postScriptName||(js.postScriptName={en:ss}),js.preferredFamily||(js.preferredFamily=T.names.fontFamily),js.preferredSubfamily||(js.preferredSubfamily=T.names.fontSubfamily);var Yl=[],Hl=Rf.make(js,Yl),Yl=0<Yl.length?qt.make(Yl):void 0,Jp=eTe.make(),Jo=GM.make(T.glyphs,{version:T.getEnglishName("version"),fullName:Jo,familyName:wi,weightName:Io,postScriptName:ss,unitsPerEm:T.unitsPerEm,fontBBox:[0,Ye.yMin,Ye.ascender,Ye.advanceWidthMax]}),wi=T.metas&&0<Object.keys(T.metas).length?rTe.make(T.metas):void 0,Io=[yr,tn,vr,Sr,Hl,mi,Jp,Jo,bn];Yl&&Io.push(Yl),T.tables.gsub&&Io.push(tTe.make(T.tables.gsub)),wi&&Io.push(wi);for(var Xl=pre((ss=iTe(Io)).encode()),Ki=ss.fields,xl=!1,_i=0;_i<Ki.length;_i+=1)if(Ki[_i].name==="head table"){Ki[_i].value.checkSumAdjustment=2981146554-Xl,xl=!0;break}if(xl)return ss;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:pre};function mre(T,O){for(var j=0,B=T.length-1;j<=B;){var W=j+B>>>1,K=T[W].tag;if(K===O)return W;K<O?j=1+W:B=W-1}return-j-1}function aTe(T,O){for(var j=0,B=T.length-1;j<=B;){var W=j+B>>>1,K=T[W];if(K===O)return W;K<O?j=1+W:B=W-1}return-j-1}function lTe(T,O){for(var j=0,B=T.length-1;j<=B;){var W,K=j+B>>>1,te=(W=T[K]).start;if(te===O)return W;te<O?j=1+K:B=K-1}if(0<j)return O>(W=T[j-1]).end?0:W}function K6(T,O){this.font=T,this.tableName=O}function Z6(T){K6.call(this,T,"gpos")}function tg(T){K6.call(this,T,"gsub")}function uTe(T,O,j){for(var B=T.subtables,W=0;W<B.length;W++){var K=B[W];if(K.substFormat===O)return K}if(j)return B.push(j),j}function cTe(T){for(var O=new ArrayBuffer(T.length),j=new Uint8Array(O),B=0;B<T.length;++B)j[B]=T[B];return O}function sk(T,O){if(!T)throw O}function fTe(T,O,j,B,W){var K=0<(O&B)?(K=T.parseByte(),j+(K=O&W?K:-K)):0<(O&W)?j:j+T.parseShort();return K}function CSt(T,O,j){var B,W=new Ge.Parser(O,j);if(T.numberOfContours=W.parseShort(),T._xMin=W.parseShort(),T._yMin=W.parseShort(),T._xMax=W.parseShort(),T._yMax=W.parseShort(),0<T.numberOfContours){for(var K=T.endPointIndices=[],te=0;te<T.numberOfContours;te+=1)K.push(W.parseUShort());T.instructionLength=W.parseUShort(),T.instructions=[];for(var me=0;me<T.instructionLength;me+=1)T.instructions.push(W.parseByte());for(var _e=K[K.length-1]+1,ve=[],Re=0;Re<_e;Re+=1)if(B=W.parseByte(),ve.push(B),0<(8&B))for(var qe=W.parseByte(),Ue=0;Ue<qe;Ue+=1)ve.push(B),Re+=1;if(F.argument(ve.length===_e,"Bad flags."),0<K.length){var Te,mt=[];if(0<_e){for(var Xe=0;Xe<_e;Xe+=1)B=ve[Xe],(Te={}).onCurve=!!(1&B),Te.lastPointOfContour=0<=K.indexOf(Xe),mt.push(Te);for(var ot=0,He=0;He<_e;He+=1)B=ve[He],(Te=mt[He]).x=fTe(W,B,ot,2,16),ot=Te.x;for(var Ye=0,yr=0;yr<_e;yr+=1)B=ve[yr],(Te=mt[yr]).y=fTe(W,B,Ye,4,32),Ye=Te.y}T.points=mt}else T.points=[]}else if(T.numberOfContours===0)T.points=[];else{T.isComposite=!0,T.points=[],T.components=[];for(var tn=!0;tn;){ve=W.parseUShort();var vr={glyphIndex:W.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ve)?0<(2&ve)?(vr.dx=W.parseShort(),vr.dy=W.parseShort()):vr.matchedPoints=[W.parseUShort(),W.parseUShort()]:0<(2&ve)?(vr.dx=W.parseChar(),vr.dy=W.parseChar()):vr.matchedPoints=[W.parseByte(),W.parseByte()],0<(8&ve)?vr.xScale=vr.yScale=W.parseF2Dot14():0<(64&ve)?(vr.xScale=W.parseF2Dot14(),vr.yScale=W.parseF2Dot14()):0<(128&ve)&&(vr.xScale=W.parseF2Dot14(),vr.scale01=W.parseF2Dot14(),vr.scale10=W.parseF2Dot14(),vr.yScale=W.parseF2Dot14()),T.components.push(vr),tn=!!(32&ve)}if(256&ve){T.instructionLength=W.parseUShort(),T.instructions=[];for(var Sr=0;Sr<T.instructionLength;Sr+=1)T.instructions.push(W.parseByte())}}}function hre(T,O){for(var j=[],B=0;B<T.length;B+=1){var W=T[B],W={x:O.xScale*W.x+O.scale01*W.y+O.dx,y:O.scale10*W.x+O.yScale*W.y+O.dy,onCurve:W.onCurve,lastPointOfContour:W.lastPointOfContour};j.push(W)}return j}function dTe(T){var O=new X;if(T)for(var j=function(qe){for(var Ue=[],Te=[],mt=0;mt<qe.length;mt+=1){var Xe=qe[mt];Te.push(Xe),Xe.lastPointOfContour&&(Ue.push(Te),Te=[])}return F.argument(Te.length===0,"There are still points left in the current contour."),Ue}(T),B=0;B<j.length;++B){var W,K=j[B],te=K[K.length-1],me=K[0];te.onCurve?O.moveTo(te.x,te.y):me.onCurve?O.moveTo(me.x,me.y):(W={x:.5*(te.x+me.x),y:.5*(te.y+me.y)},O.moveTo(W.x,W.y));for(var _e=0;_e<K.length;++_e){var ve,Re=te,te=me,me=K[(_e+1)%K.length];te.onCurve?O.lineTo(te.x,te.y):(ve=me,Re.onCurve||(te.x,Re.x,te.y,Re.y),me.onCurve||(ve={x:.5*(te.x+me.x),y:.5*(te.y+me.y)}),O.quadraticCurveTo(te.x,te.y,ve.x,ve.y))}O.closePath()}return O}function ESt(T,O){if(O.isComposite)for(var j=0;j<O.components.length;j+=1){var B=O.components[j],W=T.get(B.glyphIndex);if(W.getPath(),W.points){var K=void 0;if(B.matchedPoints===void 0)K=hre(W.points,B);else{if(B.matchedPoints[0]>O.points.length-1||B.matchedPoints[1]>W.points.length-1)throw Error("Matched points out of range in "+O.name);var te=O.points[B.matchedPoints[0]],me=W.points[B.matchedPoints[1]],B={xScale:B.xScale,scale01:B.scale01,scale10:B.scale10,yScale:B.yScale,dx:0,dy:0},me=hre([me],B)[0];B.dx=te.x-me.x,B.dy=te.y-me.y,K=hre(W.points,B)}O.points=O.points.concat(K)}}return dTe(O.points)}(Z6.prototype=K6.prototype={searchTag:mre,binSearch:aTe,getTable:function(T){var O=this.font.tables[this.tableName];return O=!O&&T?this.font.tables[this.tableName]=this.createDefaultTable():O},getScriptNames:function(){var T=this.getTable();return T?T.scripts.map(function(O){return O.tag}):[]},getDefaultScriptName:function(){var T=this.getTable();if(T){for(var O=!1,j=0;j<T.scripts.length;j++){var B=T.scripts[j].tag;if(B==="DFLT")return B;B==="latn"&&(O=!0)}return O?"latn":void 0}},getScriptTable:function(T,O){var j,B=this.getTable(O);if(B)return j=B.scripts,0<=(B=mre(B.scripts,T=T||"DFLT"))?j[B].script:O?(j.splice(-1-B,0,O={tag:T,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),O.script):void 0},getLangSysTable:function(W,O,j){var B,W=this.getScriptTable(W,j);if(W)return O&&O!=="dflt"&&O!=="DFLT"?0<=(B=mre(W.langSysRecords,O))?W.langSysRecords[B].langSys:j?(W.langSysRecords.splice(-1-B,0,j={tag:O,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),j.langSys):void 0:W.defaultLangSys},getFeatureTable:function(T,O,j,B){if(T=this.getLangSysTable(T,O,B),T){for(var W,K=T.featureIndexes,te=this.font.tables[this.tableName].features,me=0;me<K.length;me++)if((W=te[K[me]]).tag===j)return W.feature;if(B)return O=te.length,F.assert(O===0||j>=te[O-1].tag,"Features must be added in alphabetical order."),te.push(W={tag:j,feature:{params:0,lookupListIndexes:[]}}),K.push(O),W.feature}},getLookupTables:function(K,O,j,B,W){var K=this.getFeatureTable(K,O,j,W),te=[];if(K){for(var me,_e=K.lookupListIndexes,ve=this.font.tables[this.tableName].lookups,Re=0;Re<_e.length;Re++)(me=ve[_e[Re]]).lookupType===B&&te.push(me);if(te.length===0&&W)return O=ve.length,ve.push(me={lookupType:B,lookupFlag:0,subtables:[],markFilteringSet:void 0}),_e.push(O),[me]}return te},getGlyphClass:function(T,O){switch(T.format){case 1:return T.startGlyph<=O&&O<T.startGlyph+T.classes.length?T.classes[O-T.startGlyph]:0;case 2:var j=lTe(T.ranges,O);return j?j.classId:0}},getCoverageIndex:function(T,O){switch(T.format){case 1:var j=aTe(T.glyphs,O);return 0<=j?j:-1;case 2:return j=lTe(T.ranges,O),j?j.index+O-j.start:-1}},expandCoverage:function(T){if(T.format===1)return T.glyphs;for(var O=[],j=T.ranges,B=0;B<j.length;B++)for(var W=j[B],K=W.start,te=W.end,me=K;me<=te;me++)O.push(me);return O}}).init=function(){var T=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(T)},Z6.prototype.getKerningValue=function(T,O,j){for(var B=0;B<T.length;B++)for(var W=T[B].subtables,K=0;K<W.length;K++){var te=W[K],me=this.getCoverageIndex(te.coverage,O);if(!(me<0))switch(te.posFormat){case 1:for(var _e=te.pairSets[me],ve=0;ve<_e.length;ve++){var Re=_e[ve];if(Re.secondGlyph===j)return Re.value1&&Re.value1.xAdvance||0}break;case 2:var Ue=this.getGlyphClass(te.classDef1,O),qe=this.getGlyphClass(te.classDef2,j),Ue=te.classRecords[Ue][qe];return Ue.value1&&Ue.value1.xAdvance||0}}return 0},Z6.prototype.getKerningTables=function(T,O){if(this.font.tables.gpos)return this.getLookupTables(T,O,"kern",2)},(tg.prototype=K6.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},tg.prototype.getSingle=function(T,O,j){for(var B=[],W=this.getLookupTables(O,j,T,1),K=0;K<W.length;K++)for(var te=W[K].subtables,me=0;me<te.length;me++){var _e=te[me],ve=this.expandCoverage(_e.coverage),Re=void 0;if(_e.substFormat===1)for(var qe=_e.deltaGlyphId,Re=0;Re<ve.length;Re++){var Ue=ve[Re];B.push({sub:Ue,by:Ue+qe})}else{var Te=_e.substitute;for(Re=0;Re<ve.length;Re++)B.push({sub:ve[Re],by:Te[Re]})}}return B},tg.prototype.getAlternates=function(T,O,j){for(var B=[],W=this.getLookupTables(O,j,T,3),K=0;K<W.length;K++)for(var te=W[K].subtables,me=0;me<te.length;me++)for(var _e=te[me],ve=this.expandCoverage(_e.coverage),Re=_e.alternateSets,qe=0;qe<ve.length;qe++)B.push({sub:ve[qe],by:Re[qe]});return B},tg.prototype.getLigatures=function(T,O,j){for(var B=[],W=this.getLookupTables(O,j,T,4),K=0;K<W.length;K++)for(var te=W[K].subtables,me=0;me<te.length;me++)for(var _e=te[me],ve=this.expandCoverage(_e.coverage),Re=_e.ligatureSets,qe=0;qe<ve.length;qe++)for(var Ue=ve[qe],Te=Re[qe],mt=0;mt<Te.length;mt++){var Xe=Te[mt];B.push({sub:[Ue].concat(Xe.components),by:Xe.ligGlyph})}return B},tg.prototype.addSingle=function(T,O,j,B){j=uTe(this.getLookupTables(j,B,T,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),F.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format),B=O.sub,T=this.binSearch(j.coverage.glyphs,B),T<0&&(j.coverage.glyphs.splice(T=-1-T,0,B),j.substitute.splice(T,0,0)),j.substitute[T]=O.by},tg.prototype.addAlternate=function(T,O,j,B){j=uTe(this.getLookupTables(j,B,T,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),F.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format),B=O.sub,T=this.binSearch(j.coverage.glyphs,B),T<0&&(j.coverage.glyphs.splice(T=-1-T,0,B),j.alternateSets.splice(T,0,0)),j.alternateSets[T]=O.by},tg.prototype.addLigature=function(K,_e,me,W){var me=this.getLookupTables(me,W,K,4,!0)[0],W=me.subtables[0],K=(W||(me.subtables[0]=W={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),F.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),_e.sub[0]),te=_e.sub.slice(1),me={ligGlyph:_e.by,components:te},_e=this.binSearch(W.coverage.glyphs,K);if(0<=_e){for(var ve=W.ligatureSets[_e],Re=0;Re<ve.length;Re++)if(function(qe,Ue){var Te=qe.length;if(Te===Ue.length){for(var mt=0;mt<Te;mt++)if(qe[mt]!==Ue[mt])return;return 1}}(ve[Re].components,te))return;ve.push(me)}else W.coverage.glyphs.splice(_e=-1-_e,0,K),W.ligatureSets.splice(_e,0,[me])},tg.prototype.getFeature=function(T,O,j){if(/ss\d\d/.test(T))return this.getSingle(T,O,j);switch(T){case"aalt":case"salt":return this.getSingle(T,O,j).concat(this.getAlternates(T,O,j));case"dlig":case"liga":case"rlig":return this.getLigatures(T,O,j)}},tg.prototype.add=function(T,O,j,B){if(/ss\d\d/.test(T))return this.addSingle(T,O,j,B);switch(T){case"aalt":case"salt":return typeof O.by=="number"?this.addSingle(T,O,j,B):this.addAlternate(T,O,j,B);case"dlig":case"liga":case"rlig":return this.addLigature(T,O,j,B)}};var pTe={getPath:dTe,parse:function(T,O,j,B){for(var W=new lr.GlyphSet(B),K=0;K<j.length-1;K+=1){var te=j[K];te!==j[K+1]?W.push(K,lr.ttfGlyphLoader(B,K,CSt,T,O+te,ESt)):W.push(K,lr.glyphLoader(B,K))}return W}};function mTe(T){this.font=T,this.getCommands=function(O){return pTe.getPath(O).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function TSt(T){return T}function hTe(T){return Math.sign(T)*Math.round(Math.abs(T))}function ASt(T){return Math.sign(T)*Math.round(Math.abs(2*T))/2}function kSt(T){return Math.sign(T)*(Math.round(Math.abs(T)+.5)-.5)}function ISt(T){return Math.sign(T)*Math.ceil(Math.abs(T))}function DSt(T){return Math.sign(T)*Math.floor(Math.abs(T))}function gTe(T){var O=this.srPeriod,j=this.srPhase,B=1;return T<0&&(T=-T,B=-1),T+=this.srThreshold-j,T=Math.trunc(T/O)*O,(T+=j)<0?j*B:T*B}var rg={x:1,y:0,axis:"x",distance:function(T,O,j,B){return(j?T.xo:T.x)-(B?O.xo:O.x)},interpolate:function(T,O,j,B){var W,K,te,me,_e,ve,Re;if(!B||B===this)return W=T.xo-O.xo,K=T.xo-j.xo,_e=O.x-O.xo,ve=j.x-j.xo,(Re=(te=Math.abs(W))+(me=Math.abs(K)))===0?void(T.x=T.xo+(_e+ve)/2):void(T.x=T.xo+(_e*me+ve*te)/Re);W=B.distance(T,O,!0,!0),K=B.distance(T,j,!0,!0),_e=B.distance(O,O,!1,!0),ve=B.distance(j,j,!1,!0),(Re=(te=Math.abs(W))+(me=Math.abs(K)))===0?rg.setRelative(T,T,(_e+ve)/2,B,!0):rg.setRelative(T,T,(_e*me+ve*te)/Re,B,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(T,O,j,B,W){var K,te;B&&B!==this?(K=W?O.xo:O.x,te=W?O.yo:O.y,K+=j*B.x,te+=j*B.y,T.x=K+(T.y-te)/B.normalSlope):T.x=(W?O.xo:O.x)+j},slope:0,touch:function(T){T.xTouched=!0},touched:function(T){return T.xTouched},untouch:function(T){T.xTouched=!1}},rb={x:0,y:1,axis:"y",distance:function(T,O,j,B){return(j?T.yo:T.y)-(B?O.yo:O.y)},interpolate:function(T,O,j,B){var W,K,te,me,_e,ve,Re;if(!B||B===this)return W=T.yo-O.yo,K=T.yo-j.yo,_e=O.y-O.yo,ve=j.y-j.yo,(Re=(te=Math.abs(W))+(me=Math.abs(K)))===0?void(T.y=T.yo+(_e+ve)/2):void(T.y=T.yo+(_e*me+ve*te)/Re);W=B.distance(T,O,!0,!0),K=B.distance(T,j,!0,!0),_e=B.distance(O,O,!1,!0),ve=B.distance(j,j,!1,!0),(Re=(te=Math.abs(W))+(me=Math.abs(K)))===0?rb.setRelative(T,T,(_e+ve)/2,B,!0):rb.setRelative(T,T,(_e*me+ve*te)/Re,B,!0)},normalSlope:0,setRelative:function(T,O,j,B,W){var K,te;B&&B!==this?(K=W?O.xo:O.x,te=W?O.yo:O.y,K+=j*B.x,te+=j*B.y,T.y=te+B.normalSlope*(T.x-K)):T.y=(W?O.yo:O.y)+j},slope:Number.POSITIVE_INFINITY,touch:function(T){T.yTouched=!0},touched:function(T){return T.yTouched},untouch:function(T){T.yTouched=!1}};function qM(T,O){this.x=T,this.y=O,this.axis=void 0,this.slope=O/T,this.normalSlope=-T/O,Object.freeze(this)}function HM(T,O){var j=Math.sqrt(T*T+O*O);return O/=j,(T/=j)===1&&O===0?rg:T===0&&O===1?rb:new qM(T,O)}function nb(T,O,j,B){this.x=this.xo=Math.round(64*T)/64,this.y=this.yo=Math.round(64*O)/64,this.lastPointOfContour=j,this.onCurve=B,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(rg),Object.freeze(rb),qM.prototype.distance=function(T,O,j,B){return this.x*rg.distance(T,O,j,B)+this.y*rb.distance(T,O,j,B)},qM.prototype.interpolate=function(T,W,K,B){var te=B.distance(T,W,!0,!0),me=B.distance(T,K,!0,!0),W=B.distance(W,W,!1,!0),K=B.distance(K,K,!1,!0),te=Math.abs(te),me=Math.abs(me),_e=te+me;_e===0?this.setRelative(T,T,(W+K)/2,B,!0):this.setRelative(T,T,(W*me+K*te)/_e,B,!0)},qM.prototype.setRelative=function(T,K,_e,ve,me){var te=me?K.xo:K.x,me=me?K.yo:K.y,K=te+_e*(ve=ve||this).x,te=me+_e*ve.y,me=ve.normalSlope,_e=this.slope,ve=T.x,Re=T.y;T.x=(_e*ve-me*K+te-Re)/(_e-me),T.y=_e*(T.x-ve)+Re},qM.prototype.touch=function(T){T.xTouched=!0,T.yTouched=!0},nb.prototype.nextTouched=function(T){for(var O=this.nextPointOnContour;!T.touched(O)&&O!==this;)O=O.nextPointOnContour;return O},nb.prototype.prevTouched=function(T){for(var O=this.prevPointOnContour;!T.touched(O)&&O!==this;)O=O.prevPointOnContour;return O};var YM=Object.freeze(new nb(0,0)),NSt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function n1(T,O){switch(this.env=T,this.stack=[],this.prog=O,T){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=rg,this.round=hTe}}function Q6(T){for(var O=T.tZone=new Array(T.gZone.length),j=0;j<O.length;j++)O[j]=new nb(0,0)}function yTe(T,O){var j,B=T.prog,W=T.ip,K=1;do if((j=B[++W])===88)K++;else if(j===89)K--;else if(j===64)W+=B[W+1]+1;else if(j===65)W+=2*B[W+1]+1;else if(176<=j&&j<=183)W+=j-176+1;else if(184<=j&&j<=191)W+=2*(j-184+1);else if(O&&K===1&&j===27)break;while(0<K);T.ip=W}function bTe(T,O){c.DEBUG&&console.log(O.step,"SVTCA["+T.axis+"]"),O.fv=O.pv=O.dpv=T}function xTe(T,O){c.DEBUG&&console.log(O.step,"SPVTCA["+T.axis+"]"),O.pv=O.dpv=T}function vTe(T,O){c.DEBUG&&console.log(O.step,"SFVTCA["+T.axis+"]"),O.fv=T}function wTe(T,O){var j,W=O.stack,B=W.pop(),W=W.pop(),K=O.z2[B],te=O.z1[W];c.DEBUG&&console.log("SPVTL["+T+"]",B,W),B=T?(j=K.y-te.y,te.x-K.x):(j=te.x-K.x,te.y-K.y),O.pv=O.dpv=HM(j,B)}function _Te(T,O){var j,W=O.stack,B=W.pop(),W=W.pop(),K=O.z2[B],te=O.z1[W];c.DEBUG&&console.log("SFVTL["+T+"]",B,W),B=T?(j=K.y-te.y,te.x-K.x):(j=te.x-K.x,te.y-K.y),O.fv=HM(j,B)}function gre(T){c.DEBUG&&console.log(T.step,"POP[]"),T.stack.pop()}function STe(T,O){var j=O.stack.pop(),B=O.z0[j],W=O.fv,K=O.pv,te=(c.DEBUG&&console.log(O.step,"MDAP["+T+"]",j),K.distance(B,YM));T&&(te=O.round(te)),W.setRelative(B,YM,te,K),W.touch(B),O.rp0=O.rp1=j}function CTe(T,O){var j,B,W,K=O.z2,te=K.length-2;c.DEBUG&&console.log(O.step,"IUP["+T.axis+"]");for(var me=0;me<te;me++)j=K[me],T.touched(j)||(B=j.prevTouched(T))!==j&&(B===(W=j.nextTouched(T))&&T.setRelative(j,j,T.distance(B,B,!1,!0),T,!0),T.interpolate(j,B,W,T))}function ETe(T,O){for(var j=O.stack,B=T?O.rp1:O.rp2,W=(T?O.z0:O.z1)[B],K=O.fv,te=O.pv,me=O.loop,_e=O.z2;me--;){var ve=j.pop(),Re=_e[ve],qe=te.distance(W,W,!1,!0);K.setRelative(Re,Re,qe,te),K.touch(Re),c.DEBUG&&console.log(O.step,(1<O.loop?"loop "+(O.loop-me)+": ":"")+"SHP["+(T?"rp1":"rp2")+"]",ve)}O.loop=1}function TTe(T,O){for(var j=O.stack,te=T?O.rp1:O.rp2,B=(T?O.z0:O.z1)[te],W=O.fv,K=O.pv,te=j.pop(),me=O.z2[O.contours[te]],_e=me,ve=(c.DEBUG&&console.log(O.step,"SHC["+T+"]",te),K.distance(B,B,!1,!0));_e!==B&&W.setRelative(_e,_e,ve,K),(_e=_e.nextPointOnContour)!==me;);}function ATe(T,O){var j,B,me=O.stack,W=T?O.rp1:O.rp2,W=(T?O.z0:O.z1)[W],K=O.fv,te=O.pv,me=me.pop();switch(c.DEBUG&&console.log(O.step,"SHZ["+T+"]",me),me){case 0:j=O.tZone;break;case 1:j=O.gZone;break;default:throw new Error("Invalid zone")}for(var _e=te.distance(W,W,!1,!0),ve=j.length-2,Re=0;Re<ve;Re++)B=j[Re],K.setRelative(B,B,_e,te)}function kTe(T,O){var B=O.stack,j=B.pop()/64,B=B.pop(),W=O.z1[B],K=O.z0[O.rp0],te=O.fv,me=O.pv;te.setRelative(W,K,j,me),te.touch(W),c.DEBUG&&console.log(O.step,"MSIRP["+T+"]",j,B),O.rp1=O.rp0,O.rp2=B,T&&(O.rp0=B)}function ITe(T,O){var j=O.stack,me=j.pop(),j=j.pop(),B=O.z0[j],W=O.fv,K=O.pv,te=O.cvt[me],me=(c.DEBUG&&console.log(O.step,"MIAP["+T+"]",me,"(",te,")",j),K.distance(B,YM));T&&(Math.abs(me-te)<O.cvCutIn&&(me=te),me=O.round(me)),W.setRelative(B,YM,me,K),O.zp0===0&&(B.xo=B.x,B.yo=B.y),W.touch(B),O.rp0=O.rp1=j}function DTe(T,O){var j=O.stack,B=j.pop(),W=O.z2[B];c.DEBUG&&console.log(O.step,"GC["+T+"]",B),j.push(64*O.dpv.distance(W,YM,T,!1))}function NTe(T,O){var B=O.stack,j=B.pop(),B=B.pop(),W=O.z1[j],K=O.z0[B],K=O.dpv.distance(K,W,T,T);c.DEBUG&&console.log(O.step,"MD["+T+"]",j,B,"->",K),O.stack.push(Math.round(64*K))}function yre(T,O){var j=O.stack,B=j.pop(),W=O.fv,K=O.pv,te=O.ppem,me=O.deltaBase+16*(T-1),_e=O.deltaShift,ve=O.z0;c.DEBUG&&console.log(O.step,"DELTAP["+T+"]",B,j);for(var Re=0;Re<B;Re++){var qe=j.pop(),Ue=j.pop();me+((240&Ue)>>4)===te&&(0<=(Ue=(15&Ue)-8)&&Ue++,c.DEBUG&&console.log(O.step,"DELTAPFIX",qe,"by",Ue*_e),qe=ve[qe],W.setRelative(qe,qe,Ue*_e,K))}}function J6(T,O){var j=O.stack,B=j.pop();c.DEBUG&&console.log(O.step,"ROUND[]"),j.push(64*O.round(B/64))}function bre(T,O){var j=O.stack,B=j.pop(),W=O.ppem,K=O.deltaBase+16*(T-1),te=O.deltaShift;c.DEBUG&&console.log(O.step,"DELTAC["+T+"]",B,j);for(var me=0;me<B;me++){var _e=j.pop(),ve=j.pop();K+((240&ve)>>4)===W&&(0<=(ve=(15&ve)-8)&&ve++,ve=ve*te,c.DEBUG&&console.log(O.step,"DELTACFIX",_e,"by",ve),O.cvt[_e]+=ve)}}function FTe(T,O){var j,W=O.stack,B=W.pop(),W=W.pop(),K=O.z2[B],te=O.z1[W];c.DEBUG&&console.log(O.step,"SDPVTL["+T+"]",B,W),B=T?(j=K.y-te.y,te.x-K.x):(j=te.x-K.x,te.y-K.y),O.dpv=HM(j,B)}function o1(T,O){var j=O.stack,B=O.prog,W=O.ip;c.DEBUG&&console.log(O.step,"PUSHB["+T+"]");for(var K=0;K<T;K++)j.push(B[++W]);O.ip=W}function i1(T,O){var j=O.ip,B=O.prog,W=O.stack;c.DEBUG&&console.log(O.ip,"PUSHW["+T+"]");for(var K=0;K<T;K++){var te=B[++j]<<8|B[++j];32768&te&&(te=-(1+(65535^te))),W.push(te)}O.ip=j}function ur(T,O,j,B,W,K){var te,me,ve=K.stack,_e=T&&ve.pop(),ve=ve.pop(),Re=K.rp0,Re=K.z0[Re],qe=K.z1[ve],Ue=K.minDis,Te=K.fv,mt=K.dpv,Xe=te=mt.distance(qe,Re,!0,!0),ot=0<=Xe?1:-1;Xe=Math.abs(Xe),T&&(me=K.cvt[_e],B&&Math.abs(Xe-me)<K.cvCutIn&&(Xe=me)),j&&Xe<Ue&&(Xe=Ue),B&&(Xe=K.round(Xe)),Te.setRelative(qe,Re,ot*Xe,mt),Te.touch(qe),c.DEBUG&&console.log(K.step,(T?"MIRP[":"MDRP[")+(O?"M":"m")+(j?">":"_")+(B?"R":"_")+(W===0?"Gr":W===1?"Bl":W===2?"Wh":"")+"]",T?_e+"("+K.cvt[_e]+","+me+")":"",ve,"(d =",te,"->",ot*Xe,")"),K.rp1=K.rp0,K.rp2=ve,O&&(K.rp0=ve)}mTe.prototype.exec=function(T,O){if(typeof O!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var j=this.font,B=this._prepState;if(!B||B.ppem!==O){var W=this._fpgmState;if(!W){n1.prototype=NSt,(W=this._fpgmState=new n1("fpgm",j.tables.fpgm)).funcs=[],W.font=j,c.DEBUG&&(console.log("---EXEC FPGM---"),W.step=-1);try{ak(W)}catch(ve){return console.log("Hinting error in FPGM:"+ve),void(this._errorState=3)}}n1.prototype=W,(B=this._prepState=new n1("prep",j.tables.prep)).ppem=O;var K=j.tables.cvt;if(K)for(var te=B.cvt=new Array(K.length),me=O/j.unitsPerEm,_e=0;_e<K.length;_e++)te[_e]=K[_e]*me;else B.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),B.step=-1);try{ak(B)}catch(ve){this._errorState<2&&console.log("Hinting error in PREP:"+ve),this._errorState=2}}if(!(1<this._errorState))try{return FSt(T,B)}catch(ve){this._errorState<1&&(console.log("Hinting error:"+ve),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var FSt=function(T,O){var j=O.ppem/O.font.unitsPerEm,B=j,W=T.components;if(n1.prototype=O,W){for(var K=O.font,te=[],me=[],_e=0;_e<W.length;_e++){var ve=W[_e],Re=K.glyphs.get(ve.glyphIndex),qe=new n1("glyf",Re.instructions);c.DEBUG&&(console.log("---EXEC COMP "+_e+"---"),qe.step=-1),OTe(Re,qe,j,B);for(var Ue=Math.round(ve.dx*j),Te=Math.round(ve.dy*B),mt=qe.gZone,Xe=qe.contours,ot=0;ot<mt.length;ot++){var He=mt[ot];He.xTouched=He.yTouched=!1,He.xo=He.x=He.x+Ue,He.yo=He.y=He.y+Te}var Ye=te.length;te.push.apply(te,mt);for(var yr=0;yr<Xe.length;yr++)me.push(Xe[yr]+Ye)}T.instructions&&!qe.inhibitGridFit&&((qe=new n1("glyf",T.instructions)).gZone=qe.z0=qe.z1=qe.z2=te,qe.contours=me,te.push(new nb(0,0),new nb(Math.round(T.advanceWidth*j),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),qe.step=-1),ak(qe),te.length-=2)}else qe=new n1("glyf",T.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),qe.step=-1),OTe(T,qe,j,B),te=qe.gZone;return te},OTe=function(T,O,j,B){for(var W,K,te,me=T.points||[],_e=me.length,ve=O.gZone=O.z0=O.z1=O.z2=[],Re=O.contours=[],qe=0;qe<_e;qe++)W=me[qe],ve[qe]=new nb(W.x*j,W.y*B,W.lastPointOfContour,W.onCurve);for(var Ue=0;Ue<_e;Ue++)W=ve[Ue],K||(K=W,Re.push(Ue)),W.lastPointOfContour?((W.nextPointOnContour=K).prevPointOnContour=W,K=void 0):(te=ve[Ue+1],(W.nextPointOnContour=te).prevPointOnContour=W);if(!O.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",O.stack);for(var Te=0;Te<_e;Te++)console.log(Te,ve[Te].x,ve[Te].y)}if(ve.push(new nb(0,0),new nb(Math.round(T.advanceWidth*j),0)),ak(O),ve.length-=2,c.DEBUG){console.log("FINISHED GLYPH",O.stack);for(var mt=0;mt<_e;mt++)console.log(mt,ve[mt].x,ve[mt].y)}}},ak=function(T){var O=T.prog;if(O){var j,B=O.length;for(T.ip=0;T.ip<B;T.ip++){if(c.DEBUG&&T.step++,!(j=OSt[O[T.ip]]))throw new Error("unknown instruction: 0x"+Number(O[T.ip]).toString(16));j(T)}}},OSt=[bTe.bind(void 0,rb),bTe.bind(void 0,rg),xTe.bind(void 0,rb),xTe.bind(void 0,rg),vTe.bind(void 0,rb),vTe.bind(void 0,rg),wTe.bind(void 0,0),wTe.bind(void 0,1),_Te.bind(void 0,0),_Te.bind(void 0,1),function(T){var O=(j=T.stack).pop(),j=j.pop();c.DEBUG&&console.log(T.step,"SPVFS[]",O,j),T.pv=T.dpv=HM(j,O)},function(T){var O=(j=T.stack).pop(),j=j.pop();c.DEBUG&&console.log(T.step,"SPVFS[]",O,j),T.fv=HM(j,O)},function(T){var O=T.stack,j=T.pv;c.DEBUG&&console.log(T.step,"GPV[]"),O.push(16384*j.x),O.push(16384*j.y)},function(T){var O=T.stack,j=T.fv;c.DEBUG&&console.log(T.step,"GFV[]"),O.push(16384*j.x),O.push(16384*j.y)},function(T){T.fv=T.pv,c.DEBUG&&console.log(T.step,"SFVTPV[]")},function(O){var j=(te=O.stack).pop(),B=te.pop(),W=te.pop(),K=te.pop(),te=te.pop(),_e=O.z0,Re=O.z1,me=_e[j],_e=_e[B],ve=Re[W],Re=Re[K],O=O.z2[te],j=(c.DEBUG&&console.log("ISECT[], ",j,B,W,K,te),me.x),B=me.y,W=_e.x,K=_e.y,te=ve.x,me=ve.y,_e=Re.x,ve=Re.y,Re=(j-W)*(me-ve)-(B-K)*(te-_e),qe=j*K-B*W,Ue=te*ve-me*_e;O.x=(qe*(te-_e)-Ue*(j-W))/Re,O.y=(qe*(me-ve)-Ue*(B-K))/Re},function(T){T.rp0=T.stack.pop(),c.DEBUG&&console.log(T.step,"SRP0[]",T.rp0)},function(T){T.rp1=T.stack.pop(),c.DEBUG&&console.log(T.step,"SRP1[]",T.rp1)},function(T){T.rp2=T.stack.pop(),c.DEBUG&&console.log(T.step,"SRP2[]",T.rp2)},function(T){var O=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZP0[]",O),T.zp0=O){case 0:T.tZone||Q6(T),T.z0=T.tZone;break;case 1:T.z0=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var O=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZP1[]",O),T.zp1=O){case 0:T.tZone||Q6(T),T.z1=T.tZone;break;case 1:T.z1=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var O=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZP2[]",O),T.zp2=O){case 0:T.tZone||Q6(T),T.z2=T.tZone;break;case 1:T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var O=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZPS[]",O),T.zp0=T.zp1=T.zp2=O){case 0:T.tZone||Q6(T),T.z0=T.z1=T.z2=T.tZone;break;case 1:T.z0=T.z1=T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){T.loop=T.stack.pop(),c.DEBUG&&console.log(T.step,"SLOOP[]",T.loop)},function(T){c.DEBUG&&console.log(T.step,"RTG[]"),T.round=hTe},function(T){c.DEBUG&&console.log(T.step,"RTHG[]"),T.round=kSt},function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"SMD[]",O),T.minDis=O/64},function(T){c.DEBUG&&console.log(T.step,"ELSE[]"),yTe(T,!1)},function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"JMPR[]",O),T.ip+=O-1},function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"SCVTCI[]",O),T.cvCutIn=O/64},void 0,void 0,function(T){var O=T.stack;c.DEBUG&&console.log(T.step,"DUP[]"),O.push(O[O.length-1])},gre,function(T){c.DEBUG&&console.log(T.step,"CLEAR[]"),T.stack.length=0},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"SWAP[]"),O.push(j),O.push(B)},function(T){var O=T.stack;c.DEBUG&&console.log(T.step,"DEPTH[]"),O.push(O.length)},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"CINDEX[]",j),O.push(O[O.length-j])},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"MINDEX[]",j),O.push(O.splice(O.length-j,1)[0])},void 0,void 0,void 0,function(T){var O=(B=T.stack).pop(),j=B.pop(),B=(c.DEBUG&&console.log(T.step,"LOOPCALL[]",O,j),T.ip),W=T.prog;T.prog=T.funcs[O];for(var K=0;K<j;K++)ak(T),c.DEBUG&&console.log(++T.step,K+1<j?"next loopcall":"done loopcall",K);T.ip=B,T.prog=W},function(T){var O=T.stack.pop(),j=(c.DEBUG&&console.log(T.step,"CALL[]",O),T.ip),B=T.prog;T.prog=T.funcs[O],ak(T),T.ip=j,T.prog=B,c.DEBUG&&console.log(++T.step,"returning from",O)},function(T){if(T.env!=="fpgm")throw new Error("FDEF not allowed here");var B=T.stack,O=T.prog,j=T.ip,B=B.pop(),W=j;for(c.DEBUG&&console.log(T.step,"FDEF[]",B);O[++j]!==45;);T.ip=j,T.funcs[B]=O.slice(W+1,j)},void 0,STe.bind(void 0,0),STe.bind(void 0,1),CTe.bind(void 0,rb),CTe.bind(void 0,rg),ETe.bind(void 0,0),ETe.bind(void 0,1),TTe.bind(void 0,0),TTe.bind(void 0,1),ATe.bind(void 0,0),ATe.bind(void 0,1),function(T){for(var O=T.stack,j=T.loop,B=T.fv,W=O.pop()/64,K=T.z2;j--;){var te=O.pop(),me=K[te];c.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-j)+": ":"")+"SHPIX[]",te,W),B.setRelative(me,me,W),B.touch(me)}T.loop=1},function(T){for(var O=T.stack,j=T.rp1,B=T.rp2,W=T.loop,K=T.z0[j],te=T.z1[B],me=T.fv,_e=T.dpv,ve=T.z2;W--;){var Re=O.pop(),qe=ve[Re];c.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-W)+": ":"")+"IP[]",Re,j,"<->",B),me.interpolate(qe,K,te,_e),me.touch(qe)}T.loop=1},kTe.bind(void 0,0),kTe.bind(void 0,1),function(T){for(var O=T.stack,j=T.rp0,B=T.z0[j],W=T.loop,K=T.fv,te=T.pv,me=T.z1;W--;){var _e=O.pop(),ve=me[_e];c.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-W)+": ":"")+"ALIGNRP[]",_e),K.setRelative(ve,B,0,te),K.touch(ve)}T.loop=1},function(T){c.DEBUG&&console.log(T.step,"RTDG[]"),T.round=ASt},ITe.bind(void 0,0),ITe.bind(void 0,1),function(T){var O=T.prog,j=T.ip,B=T.stack,W=O[++j];c.DEBUG&&console.log(T.step,"NPUSHB[]",W);for(var K=0;K<W;K++)B.push(O[++j]);T.ip=j},function(T){var O=T.ip,j=T.prog,B=T.stack,W=j[++O];c.DEBUG&&console.log(T.step,"NPUSHW[]",W);for(var K=0;K<W;K++){var te=j[++O]<<8|j[++O];32768&te&&(te=-(1+(65535^te))),B.push(te)}T.ip=O},function(T){var B=T.stack,O=(O=T.store)||(T.store=[]),j=B.pop(),B=B.pop();c.DEBUG&&console.log(T.step,"WS",j,B),O[B]=j},function(W){var O=W.stack,j=W.store,B=O.pop(),W=(c.DEBUG&&console.log(W.step,"RS",B),j&&j[B]||0);O.push(W)},function(T){var O=(j=T.stack).pop(),j=j.pop();c.DEBUG&&console.log(T.step,"WCVTP",O,j),T.cvt[j]=O/64},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"RCVT",j),O.push(64*T.cvt[j])},DTe.bind(void 0,0),DTe.bind(void 0,1),void 0,NTe.bind(void 0,0),NTe.bind(void 0,1),function(T){c.DEBUG&&console.log(T.step,"MPPEM[]"),T.stack.push(T.ppem)},void 0,function(T){c.DEBUG&&console.log(T.step,"FLIPON[]"),T.autoFlip=!0},void 0,void 0,function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"LT[]",j,B),O.push(B<j?1:0)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"LTEQ[]",j,B),O.push(B<=j?1:0)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"GT[]",j,B),O.push(j<B?1:0)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"GTEQ[]",j,B),O.push(j<=B?1:0)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"EQ[]",j,B),O.push(j===B?1:0)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"NEQ[]",j,B),O.push(j!==B?1:0)},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"ODD[]",j),O.push(Math.trunc(j)%2?1:0)},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"EVEN[]",j),O.push(Math.trunc(j)%2?0:1)},function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"IF[]",O),O||(yTe(T,!0),c.DEBUG&&console.log(T.step,"EIF[]"))},function(T){c.DEBUG&&console.log(T.step,"EIF[]")},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"AND[]",j,B),O.push(j&&B?1:0)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"OR[]",j,B),O.push(j||B?1:0)},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"NOT[]",j),O.push(j?0:1)},yre.bind(void 0,1),function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"SDB[]",O),T.deltaBase=O},function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"SDS[]",O),T.deltaShift=Math.pow(.5,O)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"ADD[]",j,B),O.push(B+j)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"SUB[]",j,B),O.push(B-j)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"DIV[]",j,B),O.push(64*B/j)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"MUL[]",j,B),O.push(B*j/64)},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"ABS[]",j),O.push(Math.abs(j))},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"NEG[]",j),O.push(-j)},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"FLOOR[]",j),O.push(64*Math.floor(j/64))},function(T){var O=T.stack,j=O.pop();c.DEBUG&&console.log(T.step,"CEILING[]",j),O.push(64*Math.ceil(j/64))},J6.bind(void 0,0),J6.bind(void 0,1),J6.bind(void 0,2),J6.bind(void 0,3),void 0,void 0,void 0,void 0,function(T){var O=(j=T.stack).pop(),j=j.pop();c.DEBUG&&console.log(T.step,"WCVTF[]",O,j),T.cvt[j]=O*T.ppem/T.font.unitsPerEm},yre.bind(void 0,2),yre.bind(void 0,3),bre.bind(void 0,1),bre.bind(void 0,2),bre.bind(void 0,3),function(T){var O,j=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SROUND[]",j),T.round=gTe,192&j){case 0:O=.5;break;case 64:O=1;break;case 128:O=2;break;default:throw new Error("invalid SROUND value")}switch(T.srPeriod=O,48&j){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*O;break;case 32:T.srPhase=.5*O;break;case 48:T.srPhase=.75*O;break;default:throw new Error("invalid SROUND value")}T.srThreshold=(j&=15)===0?0:(j/8-.5)*O},function(T){var O,j=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"S45ROUND[]",j),T.round=gTe,192&j){case 0:O=Math.sqrt(2)/2;break;case 64:O=Math.sqrt(2);break;case 128:O=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(T.srPeriod=O,48&j){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*O;break;case 32:T.srPhase=.5*O;break;case 48:T.srPhase=.75*O;break;default:throw new Error("invalid S45ROUND value")}T.srThreshold=(j&=15)===0?0:(j/8-.5)*O},void 0,void 0,function(T){c.DEBUG&&console.log(T.step,"ROFF[]"),T.round=TSt},void 0,function(T){c.DEBUG&&console.log(T.step,"RUTG[]"),T.round=ISt},function(T){c.DEBUG&&console.log(T.step,"RDTG[]"),T.round=DSt},gre,gre,void 0,void 0,void 0,void 0,void 0,function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"SCANCTRL[]",O)},FTe.bind(void 0,0),FTe.bind(void 0,1),function(T){var O=T.stack,j=O.pop(),B=0;c.DEBUG&&console.log(T.step,"GETINFO[]",j),1&j&&(B=35),32&j&&(B|=4096),O.push(B)},void 0,function(T){var O=T.stack,j=O.pop(),B=O.pop(),W=O.pop();c.DEBUG&&console.log(T.step,"ROLL[]"),O.push(B),O.push(j),O.push(W)},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"MAX[]",j,B),O.push(Math.max(B,j))},function(T){var O=T.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(T.step,"MIN[]",j,B),O.push(Math.min(B,j))},function(T){var O=T.stack.pop();c.DEBUG&&console.log(T.step,"SCANTYPE[]",O)},function(T){var O=T.stack.pop(),j=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"INSTCTRL[]",O,j),O){case 1:return void(T.inhibitGridFit=!!j);case 2:return void(T.ignoreCvt=!!j);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,o1.bind(void 0,1),o1.bind(void 0,2),o1.bind(void 0,3),o1.bind(void 0,4),o1.bind(void 0,5),o1.bind(void 0,6),o1.bind(void 0,7),o1.bind(void 0,8),i1.bind(void 0,1),i1.bind(void 0,2),i1.bind(void 0,3),i1.bind(void 0,4),i1.bind(void 0,5),i1.bind(void 0,6),i1.bind(void 0,7),i1.bind(void 0,8),ur.bind(void 0,0,0,0,0,0),ur.bind(void 0,0,0,0,0,1),ur.bind(void 0,0,0,0,0,2),ur.bind(void 0,0,0,0,0,3),ur.bind(void 0,0,0,0,1,0),ur.bind(void 0,0,0,0,1,1),ur.bind(void 0,0,0,0,1,2),ur.bind(void 0,0,0,0,1,3),ur.bind(void 0,0,0,1,0,0),ur.bind(void 0,0,0,1,0,1),ur.bind(void 0,0,0,1,0,2),ur.bind(void 0,0,0,1,0,3),ur.bind(void 0,0,0,1,1,0),ur.bind(void 0,0,0,1,1,1),ur.bind(void 0,0,0,1,1,2),ur.bind(void 0,0,0,1,1,3),ur.bind(void 0,0,1,0,0,0),ur.bind(void 0,0,1,0,0,1),ur.bind(void 0,0,1,0,0,2),ur.bind(void 0,0,1,0,0,3),ur.bind(void 0,0,1,0,1,0),ur.bind(void 0,0,1,0,1,1),ur.bind(void 0,0,1,0,1,2),ur.bind(void 0,0,1,0,1,3),ur.bind(void 0,0,1,1,0,0),ur.bind(void 0,0,1,1,0,1),ur.bind(void 0,0,1,1,0,2),ur.bind(void 0,0,1,1,0,3),ur.bind(void 0,0,1,1,1,0),ur.bind(void 0,0,1,1,1,1),ur.bind(void 0,0,1,1,1,2),ur.bind(void 0,0,1,1,1,3),ur.bind(void 0,1,0,0,0,0),ur.bind(void 0,1,0,0,0,1),ur.bind(void 0,1,0,0,0,2),ur.bind(void 0,1,0,0,0,3),ur.bind(void 0,1,0,0,1,0),ur.bind(void 0,1,0,0,1,1),ur.bind(void 0,1,0,0,1,2),ur.bind(void 0,1,0,0,1,3),ur.bind(void 0,1,0,1,0,0),ur.bind(void 0,1,0,1,0,1),ur.bind(void 0,1,0,1,0,2),ur.bind(void 0,1,0,1,0,3),ur.bind(void 0,1,0,1,1,0),ur.bind(void 0,1,0,1,1,1),ur.bind(void 0,1,0,1,1,2),ur.bind(void 0,1,0,1,1,3),ur.bind(void 0,1,1,0,0,0),ur.bind(void 0,1,1,0,0,1),ur.bind(void 0,1,1,0,0,2),ur.bind(void 0,1,1,0,0,3),ur.bind(void 0,1,1,0,1,0),ur.bind(void 0,1,1,0,1,1),ur.bind(void 0,1,1,0,1,2),ur.bind(void 0,1,1,0,1,3),ur.bind(void 0,1,1,1,0,0),ur.bind(void 0,1,1,1,0,1),ur.bind(void 0,1,1,1,0,2),ur.bind(void 0,1,1,1,0,3),ur.bind(void 0,1,1,1,1,0),ur.bind(void 0,1,1,1,1,1),ur.bind(void 0,1,1,1,1,2),ur.bind(void 0,1,1,1,1,3)],MSt=Array.from||function(T){return T.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Qo(T){(T=T||{}).empty||(sk(T.familyName,"When creating a new Font object, familyName is required."),sk(T.styleName,"When creating a new Font object, styleName is required."),sk(T.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),sk(T.ascender,"When creating a new Font object, ascender is required."),sk(T.descender,"When creating a new Font object, descender is required."),sk(T.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:T.familyName||" "},fontSubfamily:{en:T.styleName||" "},fullName:{en:T.fullName||T.familyName+" "+T.styleName},postScriptName:{en:T.postScriptName||(T.familyName+T.styleName).replace(/\s/g,"")},designer:{en:T.designer||" "},designerURL:{en:T.designerURL||" "},manufacturer:{en:T.manufacturer||" "},manufacturerURL:{en:T.manufacturerURL||" "},license:{en:T.license||" "},licenseURL:{en:T.licenseURL||" "},version:{en:T.version||"Version 0.1"},description:{en:T.description||" "},copyright:{en:T.copyright||" "},trademark:{en:T.trademark||" "}},this.unitsPerEm=T.unitsPerEm||1e3,this.ascender=T.ascender,this.descender=T.descender,this.createdTimestamp=T.createdTimestamp,this.tables={os2:{usWeightClass:T.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:T.widthClass||this.usWidthClasses.MEDIUM,fsSelection:T.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new lr.GlyphSet(this,T.glyphs||[]),this.encoding=new Ve(this),this.position=new Z6(this),this.substitution=new tg(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new mTe(this):void 0)}})}function MTe(T,O){var j,B=JSON.stringify(T),W=256;for(j in O){var K=parseInt(j);if(K&&!(K<256)){if(JSON.stringify(O[j])===B)return K;W<=K&&(W=K+1)}}return O[W]=T,W}Qo.prototype.hasChar=function(T){return this.encoding.charToGlyphIndex(T)!==null},Qo.prototype.charToGlyphIndex=function(T){return this.encoding.charToGlyphIndex(T)},Qo.prototype.charToGlyph=function(T){return T=this.charToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},Qo.prototype.stringToGlyphs=function(T,O){O=O||this.defaultRenderOptions;for(var j=MSt(T),B=[],W=0;W<j.length;W+=1){var K=j[W];B.push(this.charToGlyphIndex(K))}var te=B.length;if(O.features){var T=O.script||this.substitution.getDefaultScriptName(),me=[];O.features.liga&&(me=me.concat(this.substitution.getFeature("liga",T,O.language))),O.features.rlig&&(me=me.concat(this.substitution.getFeature("rlig",T,O.language)));for(var _e=0;_e<te;_e+=1)for(var ve=0;ve<me.length;ve++){for(var Re=me[ve],qe=Re.sub,Ue=qe.length,Te=0;Te<Ue&&qe[Te]===B[_e+Te];)Te++;Te===Ue&&(B.splice(_e,Ue,Re.by),te=te-Ue+1)}}for(var mt=new Array(te),Xe=this.glyphs.get(0),ot=0;ot<te;ot+=1)mt[ot]=this.glyphs.get(B[ot])||Xe;return mt},Qo.prototype.nameToGlyphIndex=function(T){return this.glyphNames.nameToGlyphIndex(T)},Qo.prototype.nameToGlyph=function(T){return T=this.nameToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},Qo.prototype.glyphIndexToName=function(T){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(T):""},Qo.prototype.getKerningValue=function(T,O){T=T.index||T,O=O.index||O;var j=this.position.defaultKerningTables;return j?this.position.getKerningValue(j,T,O):this.kerningPairs[T+","+O]||0},Qo.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Qo.prototype.forEachGlyph=function(T,O,j,B,W,K){O=O!==void 0?O:0,j=j!==void 0?j:0,W=W||this.defaultRenderOptions;var te,me=1/this.unitsPerEm*(B=B!==void 0?B:72),_e=this.stringToGlyphs(T,W);W.kerning&&(T=W.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(T,W.language));for(var ve=0;ve<_e.length;ve+=1){var Re=_e[ve];K.call(this,Re,O,j,B,W),Re.advanceWidth&&(O+=Re.advanceWidth*me),W.kerning&&ve<_e.length-1&&(O+=(te?this.position.getKerningValue(te,Re.index,_e[ve+1].index):this.getKerningValue(Re,_e[ve+1]))*me),W.letterSpacing?O+=W.letterSpacing*B:W.tracking&&(O+=W.tracking/1e3*B)}return O},Qo.prototype.getPath=function(T,O,j,B,W){var K=new X;return this.forEachGlyph(T,O,j,B,W,function(te,me,_e,ve){te=te.getPath(me,_e,ve,W,this),K.extend(te)}),K},Qo.prototype.getPaths=function(T,O,j,B,W){var K=[];return this.forEachGlyph(T,O,j,B,W,function(te,me,_e,ve){te=te.getPath(me,_e,ve,W,this),K.push(te)}),K},Qo.prototype.getAdvanceWidth=function(T,O,j){return this.forEachGlyph(T,0,0,O,j,function(){})},Qo.prototype.draw=function(T,O,j,B,W,K){this.getPath(O,j,B,W,K).draw(T)},Qo.prototype.drawPoints=function(T,O,j,B,W,K){this.forEachGlyph(O,j,B,W,K,function(te,me,_e,ve){te.drawPoints(T,me,_e,ve)})},Qo.prototype.drawMetrics=function(T,O,j,B,W,K){this.forEachGlyph(O,j,B,W,K,function(te,me,_e,ve){te.drawMetrics(T,me,_e,ve)})},Qo.prototype.getEnglishName=function(T){if(T=this.names[T],T)return T.en},Qo.prototype.validate=function(){var T=this;function O(j){j=T.getEnglishName(j),j&&j.trim().length}O("fontFamily"),O("weightName"),O("manufacturer"),O("copyright"),O("version"),this.unitsPerEm},Qo.prototype.toTables=function(){return SSt.fontToTable(this)},Qo.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Qo.prototype.toArrayBuffer=function(){for(var T=this.toTables().encode(),O=new ArrayBuffer(T.length),j=new Uint8Array(O),B=0;B<T.length;B++)j[B]=T[B];return O},Qo.prototype.download=function(T){var O=this.getEnglishName("fontFamily"),j=this.getEnglishName("fontSubfamily"),B=(T=T||O.replace(/\s/g,"")+"-"+j+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,B.byteLength,function(W){W.root.getFile(T,{create:!0},function(K){K.createWriter(function(te){var me=new DataView(B),me=new Blob([me],{type:"font/opentype"});te.write(me),te.addEventListener("writeend",function(){location.href=K.toURL()},!1)})})},function(W){throw new Error(W.name+": "+W.message)})):(O=o("fs"),j=function(W){for(var K=new a(W.byteLength),te=new Uint8Array(W),me=0;me<K.length;++me)K[me]=te[me];return K}(B),O.writeFileSync(T,j))},Qo.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Qo.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Qo.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var RSt={make:function(T,O){var j=new We.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:T.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:T.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*T.axes.length}]);j.offsetToData=j.sizeOf();for(var B,W,K,te=0;te<T.axes.length;te++)j.fields=j.fields.concat((B=te,W=T.axes[te],K=O,K=MTe(W.name,O),[{name:"tag_"+B,type:"TAG",value:W.tag},{name:"minValue_"+B,type:"FIXED",value:W.minValue<<16},{name:"defaultValue_"+B,type:"FIXED",value:W.defaultValue<<16},{name:"maxValue_"+B,type:"FIXED",value:W.maxValue<<16},{name:"flags_"+B,type:"USHORT",value:0},{name:"nameID_"+B,type:"USHORT",value:K}]));for(var me=0;me<T.instances.length;me++)j.fields=j.fields.concat(function(_e,ve,Re,qe){for(var Ue=[{name:"nameID_"+_e,type:"USHORT",value:MTe(ve.name,qe)},{name:"flags_"+_e,type:"USHORT",value:0}],Te=0;Te<Re.length;++Te){var mt=Re[Te].tag;Ue.push({name:"axis_"+_e+" "+mt,type:"FIXED",value:ve.coordinates[mt]<<16})}return Ue}(me,T.instances[me],T.axes,O));return j},parse:function(T,O,j){for(var B,W,K,te,me=new Ge.Parser(T,O),_e=me.parseULong(),ve=(F.argument(_e===65536,"Unsupported fvar table version."),me.parseOffset16()),Re=(me.skip("uShort",1),me.parseUShort()),qe=me.parseUShort(),Ue=me.parseUShort(),Te=me.parseUShort(),mt=[],Xe=0;Xe<Re;Xe++)mt.push((B=T,W=O+ve+Xe*qe,K=j,te={},B=new Ge.Parser(B,W),te.tag=B.parseTag(),te.minValue=B.parseFixed(),te.defaultValue=B.parseFixed(),te.maxValue=B.parseFixed(),B.skip("uShort",1),te.name=K[B.parseUShort()]||{},te));for(var ot=[],He=O+ve+Re*qe,Ye=0;Ye<Ue;Ye++)ot.push(function(yr,tn,vr,Sr){var bn={},mi=new Ge.Parser(yr,tn);bn.name=Sr[mi.parseUShort()]||{},mi.skip("uShort",1),bn.coordinates={};for(var ss=0;ss<vr.length;++ss)bn.coordinates[vr[ss].tag]=mi.parseFixed();return bn}(T,He+Ye*Te,mt,j));return{axes:mt,instances:ot}}},Qp=new Array(10);Qp[1]=function(){var T=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{posFormat:1,coverage:this.parsePointer(Le.coverage),value:this.parseValueRecord()}:O===2?{posFormat:2,coverage:this.parsePointer(Le.coverage),values:this.parseValueRecordList()}:void F.assert(!1,"0x"+T.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Qp[2]=function(){var T,O,j,B,K=this.offset+this.relativeOffset,W=this.parseUShort(),K=(F.assert(W===1||W===2,"0x"+K.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Le.coverage)),te=this.parseUShort(),me=this.parseUShort();return W===1?{posFormat:W,coverage:K,valueFormat1:te,valueFormat2:me,pairSets:this.parseList(Le.pointer(Le.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(me)}})))}:W===2?(T=this.parsePointer(Le.classDef),O=this.parsePointer(Le.classDef),j=this.parseUShort(),B=this.parseUShort(),{posFormat:W,coverage:K,valueFormat1:te,valueFormat2:me,classDef1:T,classDef2:O,class1Count:j,class2Count:B,classRecords:this.parseList(j,Le.list(B,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(me)}}))}):void 0},Qp[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Qp[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Qp[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Qp[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Qp[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Qp[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Qp[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var jSt=new Array(10),PSt={parse:function(T,O){return O=(T=new Le(T,O=O||0)).parseVersion(1),F.argument(O===1||O===1.1,"Unsupported GPOS table version "+O),O===1?{version:O,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Qp)}:{version:O,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Qp),variations:T.parseFeatureVariationsList()}},make:function(T){return new We.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(T.lookups,jSt)}])}},LSt={parse:function(T,O){if(T=new Ge.Parser(T,O),(O=T.parseUShort())===0){var j=T,B={},qe=(j.skip("uShort"),j.parseUShort()),W=(F.argument(qe===0,"Unsupported kern sub-table version."),j.skip("uShort",2),j.parseUShort());j.skip("uShort",3);for(var K=0;K<W;K+=1){var te=j.parseUShort(),me=j.parseUShort(),_e=j.parseShort();B[te+","+me]=_e}return B}if(O!==1)throw new Error("Unsupported kern table version ("+O+").");var ve=T,Re={},qe=(ve.skip("uShort"),1<ve.parseULong()&&console.warn("Only the first kern subtable is supported."),ve.skip("uLong"),255&ve.parseUShort());if(ve.skip("uShort"),qe==0){var Ue=ve.parseUShort();ve.skip("uShort",3);for(var Te=0;Te<Ue;Te+=1){var mt=ve.parseUShort(),Xe=ve.parseUShort(),ot=ve.parseShort();Re[mt+","+Xe]=ot}}return Re}},BSt={parse:function(T,O,j,B){for(var W=new Ge.Parser(T,O),K=B?W.parseUShort:W.parseULong,te=[],me=0;me<j+1;me+=1){var _e=K.call(W);B&&(_e*=2),te.push(_e)}return te}};function $St(T,O){o("fs").readFile(T,function(j,B){if(j)return O(j.message);O(null,cTe(B))})}function zSt(T,O){var j=new XMLHttpRequest;j.open("get",T,!0),j.responseType="arraybuffer",j.onload=function(){return j.response?O(null,j.response):O("Font could not be loaded: "+j.statusText)},j.onerror=function(){O("Font could not be loaded")},j.send()}function RTe(T,O){for(var j=[],B=12,W=0;W<O;W+=1){var K=Ge.getTag(T,B),te=Ge.getULong(T,B+4),me=Ge.getULong(T,B+8),_e=Ge.getULong(T,B+12);j.push({tag:K,checksum:te,offset:me,length:_e,compression:!1}),B+=16}return j}function Rs(j,O){if(O.compression!=="WOFF")return{data:j,offset:O.offset};var j=new Uint8Array(j.buffer,O.offset+2,O.compressedLength-2),B=new Uint8Array(O.length);if(G(j,B),B.byteLength!==O.length)throw new Error("Decompression error: "+O.tag+" decompressed length doesn't match recorded length");return{data:new DataView(B.buffer,0),offset:0}}function xre(Ye){var O,j,B,W,K,te,me,_e,ve,Re,qe,Ue,Te,mt,Xe=new Qo({empty:!0}),ot=new DataView(Ye,0),He=[],Ye=Ge.getTag(ot,0);if(Ye==="\0\0\0"||Ye==="true"||Ye==="typ1")Xe.outlinesFormat="truetype",He=RTe(ot,B=Ge.getUShort(ot,4));else if(Ye==="OTTO")Xe.outlinesFormat="cff",He=RTe(ot,B=Ge.getUShort(ot,4));else{if(Ye!=="wOFF")throw new Error("Unsupported OpenType signature "+Ye);var yr=Ge.getTag(ot,4);if(yr==="\0\0\0")Xe.outlinesFormat="truetype";else{if(yr!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ye);Xe.outlinesFormat="cff"}He=function(wi,Io){for(var Xl=[],Ki=44,xl=0;xl<Io;xl+=1){var _i=Ge.getTag(wi,Ki),Ma=Ge.getULong(wi,Ki+4),XM=Ge.getULong(wi,Ki+8),lk=Ge.getULong(wi,Ki+12),jTe=void 0,jTe=XM<lk&&"WOFF";Xl.push({tag:_i,offset:Ma,compression:jTe,compressedLength:XM,length:lk}),Ki+=20}return Xl}(ot,B=Ge.getUShort(ot,12))}for(var tn=0;tn<B;tn+=1){var vr=He[tn],Sr=void 0;switch(vr.tag){case"cmap":Sr=Rs(ot,vr),Xe.tables.cmap=fe.parse(Sr.data,Sr.offset),Xe.encoding=new Qe(Xe.tables.cmap);break;case"cvt ":Sr=Rs(ot,vr),mt=new Ge.Parser(Sr.data,Sr.offset),Xe.tables.cvt=mt.parseShortList(vr.length/2);break;case"fvar":K=vr;break;case"fpgm":Sr=Rs(ot,vr),mt=new Ge.Parser(Sr.data,Sr.offset),Xe.tables.fpgm=mt.parseByteList(vr.length);break;case"head":Sr=Rs(ot,vr),Xe.tables.head=WM.parse(Sr.data,Sr.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,O=Xe.tables.head.indexToLocFormat;break;case"hhea":Sr=Rs(ot,vr),Xe.tables.hhea=ke.parse(Sr.data,Sr.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":ve=vr;break;case"ltag":Sr=Rs(ot,vr),j=qt.parse(Sr.data,Sr.offset);break;case"maxp":Sr=Rs(ot,vr),Xe.tables.maxp=xt.parse(Sr.data,Sr.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Ue=vr;break;case"OS/2":Sr=Rs(ot,vr),Xe.tables.os2=Oa.parse(Sr.data,Sr.offset);break;case"post":Sr=Rs(ot,vr),Xe.tables.post=eTe.parse(Sr.data,Sr.offset),Xe.glyphNames=new Dt(Xe.tables.post);break;case"prep":Sr=Rs(ot,vr),mt=new Ge.Parser(Sr.data,Sr.offset),Xe.tables.prep=mt.parseByteList(vr.length);break;case"glyf":te=vr;break;case"loca":qe=vr;break;case"CFF ":W=vr;break;case"kern":Re=vr;break;case"GPOS":me=vr;break;case"GSUB":_e=vr;break;case"meta":Te=vr}}if(yr=Rs(ot,Ue),Xe.tables.name=Rf.parse(yr.data,yr.offset,j),Xe.names=Xe.tables.name,te&&qe)Ye=O===0,yr=Rs(ot,qe),yr=BSt.parse(yr.data,yr.offset,Xe.numGlyphs,Ye),Ye=Rs(ot,te),Xe.glyphs=pTe.parse(Ye.data,Ye.offset,yr,Xe);else{if(!W)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ye=Rs(ot,W),GM.parse(Ye.data,Ye.offset,Xe)}for(var yr=Rs(ot,ve),bn=(St.parse(yr.data,yr.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),mi=bn.tables.cmap.glyphIndexMap,ss=Object.keys(mi),js=0;js<ss.length;js+=1){var Hl,Yl=ss[js],Jp=mi[Yl];(Hl=bn.glyphs.get(Jp)).addUnicode(parseInt(Yl))}for(var Jo=0;Jo<bn.glyphs.length;Jo+=1)Hl=bn.glyphs.get(Jo),bn.cffEncoding?bn.isCIDFont?Hl.name="gid"+Jo:Hl.name=bn.cffEncoding.charset[Jo]:bn.glyphNames.names&&(Hl.name=bn.glyphNames.glyphIndexToName(Jo));return Re?(Ye=Rs(ot,Re),Xe.kerningPairs=LSt.parse(Ye.data,Ye.offset)):Xe.kerningPairs={},me&&(yr=Rs(ot,me),Xe.tables.gpos=PSt.parse(yr.data,yr.offset),Xe.position.init()),_e&&(Ye=Rs(ot,_e),Xe.tables.gsub=tTe.parse(Ye.data,Ye.offset)),K&&(yr=Rs(ot,K),Xe.tables.fvar=RSt.parse(yr.data,yr.offset,Xe.names)),Te&&(Ye=Rs(ot,Te),Xe.tables.meta=rTe.parse(Ye.data,Ye.offset),Xe.metas=Xe.tables.meta),Xe}c.Font=Qo,c.Glyph=Ut,c.Path=X,c.BoundingBox=Y,c._parse=Ge,c.parse=xre,c.load=function(T,O){(typeof window>"u"?$St:zSt)(T,function(j,B){if(j)return O(j);var W;try{W=xre(B)}catch(K){return O(K,null)}return O(null,W)})},c.loadSync=function(T){return xre(cTe(o("fs").readFileSync(T)))},Object.defineProperty(c,"__esModule",{value:!0})},typeof s=="object"&&i!==void 0?u(s):typeof t=="function"&&t.amd?t(["exports"],u):u(l.opentype={})}).call(this,o("buffer").Buffer)},{buffer:4,fs:2}],255:[function(o,i,s){(function(a){function l(f,d){for(var p=0,m=f.length-1;0<=m;m--){var h=f[m];h==="."?f.splice(m,1):h===".."?(f.splice(m,1),p++):p&&(f.splice(m,1),p--)}if(d)for(;p--;)f.unshift("..");return f}function u(f,d){if(f.filter)return f.filter(d);for(var p=[],m=0;m<f.length;m++)d(f[m],m,f)&&p.push(f[m]);return p}s.resolve=function(){for(var f="",d=!1,p=arguments.length-1;-1<=p&&!d;p--){var m=0<=p?arguments[p]:a.cwd();if(typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");m&&(f=m+"/"+f,d=m.charAt(0)==="/")}return(d?"/":"")+(f=l(u(f.split("/"),function(h){return!!h}),!d).join("/"))||"."},s.normalize=function(f){var d=s.isAbsolute(f),p=c(f,-1)==="/";return(f=(f=l(u(f.split("/"),function(m){return!!m}),!d).join("/"))||d?f:".")&&p&&(f+="/"),(d?"/":"")+f},s.isAbsolute=function(f){return f.charAt(0)==="/"},s.join=function(){var f=Array.prototype.slice.call(arguments,0);return s.normalize(u(f,function(d,p){if(typeof d!="string")throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))},s.relative=function(f,d){function p(v){for(var w=0;w<v.length&&v[w]==="";w++);for(var _=v.length-1;0<=_&&v[_]==="";_--);return _<w?[]:v.slice(w,_-w+1)}f=s.resolve(f).substr(1),d=s.resolve(d).substr(1);for(var m=p(f.split("/")),h=p(d.split("/")),g=Math.min(m.length,h.length),y=g,b=0;b<g;b++)if(m[b]!==h[b]){y=b;break}for(var x=[],b=y;b<m.length;b++)x.push("..");return(x=x.concat(h.slice(y))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var d=f.charCodeAt(0)===47,p=-1,m=!0,h=f.length-1;1<=h;--h)if(f.charCodeAt(h)===47){if(!m){p=h;break}}else m=!1;return p===-1?d?"/":".":d&&p===1?"/":f.slice(0,p)},s.basename=function(f,d){return f=function(p){typeof p!="string"&&(p+="");for(var m=0,h=-1,g=!0,y=p.length-1;0<=y;--y)if(p.charCodeAt(y)===47){if(!g){m=y+1;break}}else h===-1&&(g=!1,h=y+1);return h===-1?"":p.slice(m,h)}(f),f=d&&f.substr(-1*d.length)===d?f.substr(0,f.length-d.length):f},s.extname=function(f){typeof f!="string"&&(f+="");for(var d=-1,p=0,m=-1,h=!0,g=0,y=f.length-1;0<=y;--y){var b=f.charCodeAt(y);if(b===47){if(h)continue;p=y+1;break}m===-1&&(h=!1,m=y+1),b===46?d===-1?d=y:g!==1&&(g=1):d!==-1&&(g=-1)}return d===-1||m===-1||g===0||g===1&&d===m-1&&d===p+1?"":f.slice(d,m)};var c="ab".substr(-1)==="b"?function(f,d,p){return f.substr(d,p)}:function(f,d,p){return d<0&&(d=f.length+d),f.substr(d,p)}}).call(this,o("_process"))},{_process:256}],256:[function(o,u,s){var a,l,u=u.exports={};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:c}catch{a=c}try{l=typeof clearTimeout=="function"?clearTimeout:f}catch{l=f}function d(w){if(a===setTimeout)return setTimeout(w,0);if((a===c||!a)&&setTimeout)return(a=setTimeout)(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this,w,0)}}}var p,m=[],h=!1,g=-1;function y(){h&&p&&(h=!1,p.length?m=p.concat(m):g=-1,m.length&&b())}function b(){if(!h){for(var w=d(y),_=(h=!0,m.length);_;){for(p=m,m=[];++g<_;)p&&p[g].run();g=-1,_=m.length}p=null,h=!1,function(C){if(l===clearTimeout)return clearTimeout(C);if((l===f||!l)&&clearTimeout)return(l=clearTimeout)(C);try{l(C)}catch{try{return l.call(null,C)}catch{return l.call(this,C)}}}(w)}}function x(w,_){this.fun=w,this.array=_}function v(){}u.nextTick=function(w){var _=new Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)_[C-1]=arguments[C];m.push(new x(w,_)),m.length!==1||h||d(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=v,u.addListener=v,u.once=v,u.off=v,u.removeListener=v,u.removeAllListeners=v,u.emit=v,u.prependListener=v,u.prependOnceListener=v,u.listeners=function(w){return[]},u.binding=function(w){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(w){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],257:[function(o,i,s){i=function(a){"use strict";var l,u=Object.prototype,c=u.hasOwnProperty,S=typeof Symbol=="function"?Symbol:{},f=S.iterator||"@@iterator",d=S.asyncIterator||"@@asyncIterator",p=S.toStringTag||"@@toStringTag";function m(V,z,U,q){var X,pe,$,F,z=z&&z.prototype instanceof w?z:w,z=Object.create(z.prototype),q=new L(q||[]);return z._invoke=(X=V,pe=U,$=q,F=g,function(ee,ae){if(F===b)throw new Error("Generator is already running");if(F===x){if(ee==="throw")throw ae;return R()}for($.method=ee,$.arg=ae;;){var Q=$.delegate;if(Q&&(Q=function le(ie,Z){var ge=ie.iterator[Z.method];if(ge===l){if(Z.delegate=null,Z.method==="throw"){if(ie.iterator.return&&(Z.method="return",Z.arg=l,le(ie,Z),Z.method==="throw"))return v;Z.method="throw",Z.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}if(ge=h(ge,ie.iterator,Z.arg),ge.type==="throw")return Z.method="throw",Z.arg=ge.arg,Z.delegate=null,v;if(ge=ge.arg,!ge)return Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,v;{if(!ge.done)return ge;Z[ie.resultName]=ge.value,Z.next=ie.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=l)}return Z.delegate=null,v}(Q,$),Q)){if(Q===v)continue;return Q}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(F===g)throw F=x,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);if(F=b,Q=h(X,pe,$),Q.type==="normal"){if(F=$.done?x:y,Q.arg!==v)return{value:Q.arg,done:$.done}}else Q.type==="throw"&&(F=x,$.method="throw",$.arg=Q.arg)}}),z}function h(V,G,U){try{return{type:"normal",arg:V.call(G,U)}}catch(Y){return{type:"throw",arg:Y}}}a.wrap=m;var g="suspendedStart",y="suspendedYield",b="executing",x="completed",v={};function w(){}function _(){}function C(){}var S={},E=(S[f]=function(){return this},Object.getPrototypeOf),E=E&&E(E(P([]))),A=(E&&E!==u&&c.call(E,f)&&(S=E),C.prototype=w.prototype=Object.create(S));function N(V){["next","throw","return"].forEach(function(G){V[G]=function(U){return this._invoke(G,U)}})}function k(V){var G;this._invoke=function(U,Y){function X(){return new Promise(function(pe,$){(function F(le,q,ee,ae){var Q,le=h(V[le],V,q);if(le.type!=="throw")return(q=(Q=le.arg).value)&&typeof q=="object"&&c.call(q,"__await")?Promise.resolve(q.__await).then(function(ie){F("next",ie,ee,ae)},function(ie){F("throw",ie,ee,ae)}):Promise.resolve(q).then(function(ie){Q.value=ie,ee(Q)},function(ie){return F("throw",ie,ee,ae)});ae(le.arg)})(U,Y,pe,$)})}return G=G?G.then(X,X):X()}}function M(V){var G={tryLoc:V[0]};1 in V&&(G.catchLoc=V[1]),2 in V&&(G.finallyLoc=V[2],G.afterLoc=V[3]),this.tryEntries.push(G)}function I(V){var G=V.completion||{};G.type="normal",delete G.arg,V.completion=G}function L(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(M,this),this.reset(!0)}function P(V){if(V){var G,U=V[f];if(U)return U.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length))return G=-1,(U=function Y(){for(;++G<V.length;)if(c.call(V,G))return Y.value=V[G],Y.done=!1,Y;return Y.value=l,Y.done=!0,Y}).next=U}return{next:R}}function R(){return{value:l,done:!0}}return(_.prototype=A.constructor=C).constructor=_,C[p]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(V){return V=typeof V=="function"&&V.constructor,!!V&&(V===_||(V.displayName||V.name)==="GeneratorFunction")},a.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,C):(V.__proto__=C,p in V||(V[p]="GeneratorFunction")),V.prototype=Object.create(A),V},a.awrap=function(V){return{__await:V}},N(k.prototype),k.prototype[d]=function(){return this},a.AsyncIterator=k,a.async=function(V,G,U,Y){var X=new k(m(V,G,U,Y));return a.isGeneratorFunction(G)?X:X.next().then(function(pe){return pe.done?pe.value:X.next()})},N(A),A[p]="Generator",A[f]=function(){return this},A.toString=function(){return"[object Generator]"},a.keys=function(V){var G,U=[];for(G in V)U.push(G);return U.reverse(),function Y(){for(;U.length;){var X=U.pop();if(X in V)return Y.value=X,Y.done=!1,Y}return Y.done=!0,Y}},a.values=P,L.prototype={constructor:L,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(I),!V)for(var G in this)G.charAt(0)==="t"&&c.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=l)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var G=this;function U(z,q){return pe.type="throw",pe.arg=V,G.next=z,q&&(G.method="next",G.arg=l),!!q}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var X=this.tryEntries[Y],pe=X.completion;if(X.tryLoc==="root")return U("end");if(X.tryLoc<=this.prev){var $=c.call(X,"catchLoc"),F=c.call(X,"finallyLoc");if($&&F){if(this.prev<X.catchLoc)return U(X.catchLoc,!0);if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else if($){if(this.prev<X.catchLoc)return U(X.catchLoc,!0)}else{if(!F)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return U(X.finallyLoc)}}}},abrupt:function(V,G){for(var U=this.tryEntries.length-1;0<=U;--U){var Y=this.tryEntries[U];if(Y.tryLoc<=this.prev&&c.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var X=Y;break}}var pe=(X=X&&(V==="break"||V==="continue")&&X.tryLoc<=G&&G<=X.finallyLoc?null:X)?X.completion:{};return pe.type=V,pe.arg=G,X?(this.method="next",this.next=X.finallyLoc,v):this.complete(pe)},complete:function(V,G){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&G&&(this.next=G),v},finish:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U=this.tryEntries[G];if(U.finallyLoc===V)return this.complete(U.completion,U.afterLoc),I(U),v}},catch:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U,Y,X=this.tryEntries[G];if(X.tryLoc===V)return(U=X.completion).type==="throw"&&(Y=U.arg,I(X)),Y}throw new Error("illegal catch attempt")},delegateYield:function(V,G,U){return this.delegate={iterator:P(V),resultName:G,nextLoc:U},this.method==="next"&&(this.arg=l),v}},a}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(o,i,s){(function(a){"use strict";var l,u,c,f,d,p,m,h,g,y;function b(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function x(I){return I=typeof I!="string"?String(I):I}function v(I){var L={next:function(){var P=I.shift();return{done:P===void 0,value:P}}};return u&&(L[Symbol.iterator]=function(){return L}),L}function w(I){this.map={},I instanceof w?I.forEach(function(L,P){this.append(P,L)},this):Array.isArray(I)?I.forEach(function(L){this.append(L[0],L[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(L){this.append(L,I[L])},this)}function _(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function C(I){return new Promise(function(L,P){I.onload=function(){L(I.result)},I.onerror=function(){P(I.error)}})}function S(I){var L=new FileReader,P=C(L);return L.readAsArrayBuffer(I),P}function E(I){var L;return I.slice?I.slice(0):((L=new Uint8Array(I.byteLength)).set(new Uint8Array(I)),L.buffer)}function A(){return this.bodyUsed=!1,this._initBody=function(I){if(this._bodyInit=I)if(typeof I=="string")this._bodyText=I;else if(c&&Blob.prototype.isPrototypeOf(I))this._bodyBlob=I;else if(f&&FormData.prototype.isPrototypeOf(I))this._bodyFormData=I;else if(l&&URLSearchParams.prototype.isPrototypeOf(I))this._bodyText=I.toString();else if(d&&c&&m(I))this._bodyArrayBuffer=E(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d||!ArrayBuffer.prototype.isPrototypeOf(I)&&!h(I))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=E(I)}else this._bodyText="";this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var I=_(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var I,L,P=_(this);if(P)return P;if(this._bodyBlob)return P=this._bodyBlob,I=new FileReader,L=C(I),I.readAsText(P),L;if(this._bodyArrayBuffer)return Promise.resolve(function(R){for(var V=new Uint8Array(R),G=new Array(V.length),U=0;U<V.length;U++)G[U]=String.fromCharCode(V[U]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function N(I,L){var P,R=(L=L||{}).body;if(I instanceof N){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,L.headers||(this.headers=new w(I.headers)),this.method=I.method,this.mode=I.mode,R||I._bodyInit==null||(R=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=L.credentials||this.credentials||"omit",!L.headers&&this.headers||(this.headers=new w(L.headers)),this.method=(I=L.method||this.method||"GET",P=I.toUpperCase(),-1<g.indexOf(P)?P:I),this.mode=L.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(R)}function k(I){var L=new FormData;return I.trim().split("&").forEach(function(P){var R;P&&(R=(P=P.split("=")).shift().replace(/\+/g," "),P=P.join("=").replace(/\+/g," "),L.append(decodeURIComponent(R),decodeURIComponent(P)))}),L}function M(I,L){L=L||{},this.type="default",this.status=L.status===void 0?200:L.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in L?L.statusText:"OK",this.headers=new w(L.headers),this.url=L.url||"",this._initBody(I)}a.fetch||(l="URLSearchParams"in a,u="Symbol"in a&&"iterator"in Symbol,c="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in a,(d="ArrayBuffer"in a)&&(p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(I){return I&&DataView.prototype.isPrototypeOf(I)},h=ArrayBuffer.isView||function(I){return I&&-1<p.indexOf(Object.prototype.toString.call(I))}),w.prototype.append=function(I,L){I=b(I),L=x(L);var P=this.map[I];this.map[I]=P?P+","+L:L},w.prototype.delete=function(I){delete this.map[b(I)]},w.prototype.get=function(I){return I=b(I),this.has(I)?this.map[I]:null},w.prototype.has=function(I){return this.map.hasOwnProperty(b(I))},w.prototype.set=function(I,L){this.map[b(I)]=x(L)},w.prototype.forEach=function(I,L){for(var P in this.map)this.map.hasOwnProperty(P)&&I.call(L,this.map[P],P,this)},w.prototype.keys=function(){var I=[];return this.forEach(function(L,P){I.push(P)}),v(I)},w.prototype.values=function(){var I=[];return this.forEach(function(L){I.push(L)}),v(I)},w.prototype.entries=function(){var I=[];return this.forEach(function(L,P){I.push([P,L])}),v(I)},u&&(w.prototype[Symbol.iterator]=w.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],N.prototype.clone=function(){return new N(this,{body:this._bodyInit})},A.call(N.prototype),A.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},M.error=function(){var I=new M(null,{status:0,statusText:""});return I.type="error",I},y=[301,302,303,307,308],M.redirect=function(I,L){if(y.indexOf(L)===-1)throw new RangeError("Invalid status code");return new M(null,{status:L,headers:{location:I}})},a.Headers=w,a.Request=N,a.Response=M,a.fetch=function(I,L){return new Promise(function(P,R){var V=new N(I,L),G=new XMLHttpRequest;G.onload=function(){var U,Y={status:G.status,statusText:G.statusText,headers:(Y=G.getAllResponseHeaders()||"",U=new w,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function($){var $=$.split(":"),F=$.shift().trim();F&&($=$.join(":").trim(),U.append(F,$))}),U)},X=(Y.url="responseURL"in G?G.responseURL:Y.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);P(new M(X,Y))},G.onerror=function(){R(new TypeError("Network request failed"))},G.ontimeout=function(){R(new TypeError("Network request failed"))},G.open(V.method,V.url,!0),V.credentials==="include"?G.withCredentials=!0:V.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&c&&(G.responseType="blob"),V.headers.forEach(function(U,Y){G.setRequestHeader(Y,U)}),G.send(V._bodyInit===void 0?null:V._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(o,i,s){"use strict";o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l=c(o("../core/main")),u=c(o("../color/color_conversion"));function c(p){return p&&p.__esModule?p:{default:p}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],d=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];l.default.prototype._rgbColorName=function(g){var m,h,g=u.default._rgbaToHSBA(g),y=[(a=g)[0],g[1],g[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(g=y[0].toString().split(""))[h=g.length-1]=parseInt(g[h]),g[h]<2.5?g[h]=0:2.5<=g[h]&&g[h]<7.5&&(g[h]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[h]&&(g[h]=0,g[0]=g[0]+1),y[0]=10*g[0]+g[1]):7.5<=g[h]?y[0]=10:y[0]=g[h]),y[2]=y[2]/255;for(var b=y.length-1;1<=b;b--)y[b]<=.25?y[b]=0:.25<y[b]&&y[b]<.75?y[b]=.5:y[b]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var v=0;v<f.length;v++){if(f[v].h===a[0]&&f[v].s===a[1]&&f[v].b===a[2]){m=f[v].name;break}m="white"}}else for(var w=0;w<d.length;w++)if(d[w].h===y[0]&&d[w].s===y[1]&&d[w].b===y[2]){m=d[w].name;break}return m},o=l.default,s.default=o},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o},l="_Description",u="_fallbackDesc",c="_fallbackTable",f="_Label",d="_labelDesc",p="_labelTable";function m(h){if(h==="label"||h==="fallback")throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}a.default.prototype.describe=function(h,g){var y;a.default._validateParameters("describe",arguments),typeof h=="string"&&(y=this.canvas.id,h=m(h),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},a.default.prototype.describeElement=function(h,g,y){var b,x;a.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof h=="string"&&(b=this.canvas.id,g=m(g),x=function(v){if(v==="label"||v==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return v.endsWith(".")||v.endsWith(";")||v.endsWith(",")?v=v.replace(/.$/,":"):v.endsWith(":")||(v+=":"),v}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==x&&(this.descriptions.fallbackElements[h].innerHTML=x):this._describeElementHTML("fallback",h,x),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==x&&(this.descriptions.labelElements[h].innerHTML=x):this._describeElementHTML("label",h,x)))},a.default.prototype._describeHTML=function(h,g){var y,b=this.canvas.id;h==="fallback"?(this.dummyDOM.querySelector("#".concat(b+l))?this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+u,'"></p>')):(y='<div id="'.concat(b).concat(l,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(u,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(b)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(u)),this.descriptions.fallback.innerHTML=g):h==="label"&&(this.dummyDOM.querySelector("#".concat(b+f))?this.dummyDOM.querySelector("#".concat(b+p))&&this.dummyDOM.querySelector("#".concat(b+p)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(d,'"></p>')):(y='<div id="'.concat(b).concat(f,'" class="p5Label"><p id="').concat(b).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+d),this.descriptions.label.innerHTML=g)},a.default.prototype._describeElementHTML=function(h,g,y){var b,x=this.canvas.id;h==="fallback"?(this.dummyDOM.querySelector("#".concat(x+l))?this.dummyDOM.querySelector("#"+x+c)||this.dummyDOM.querySelector("#"+x+u).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(l,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+g,this.dummyDOM.querySelector("#"+x+c).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=y):h==="label"&&(this.dummyDOM.querySelector("#".concat(x+f))?this.dummyDOM.querySelector("#".concat(x+p))||this.dummyDOM.querySelector("#"+x+d).insertAdjacentHTML("afterend",'<table id="'.concat(x+p,'"></table>')):(b='<div id="'.concat(x).concat(f,'" class="p5Label"><table id="').concat(x).concat(p,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(h=document.createElement("tr")).id=x+"_lte_"+g,this.dummyDOM.querySelector("#"+x+p).appendChild(h),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=y)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateGridOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,m,h){return p="".concat(p," canvas, ").concat(m," by ").concat(h," pixels, contains ").concat(d[0]),p=(d[0]===1?"".concat(p," shape: "):"".concat(p," shapes: ")).concat(d[1]),p}((u=function(d,p){var m,h="",g="",y=0;for(m in p){var b,x=0;for(b in p[m]){var v='<li id="'.concat(d,"shape").concat(y,'">').concat(p[m][b].color," ").concat(m,",");m==="line"?v+=" location = ".concat(p[m][b].pos,", length = ").concat(p[m][b].length," pixels"):(v+=" location = ".concat(p[m][b].pos),m!=="point"&&(v+=", area = ".concat(p[m][b].area," %")),v+="</li>"),h+=v,x++,y++}g=1<x?"".concat(g," ").concat(x," ").concat(m,"s"):"".concat(g," ").concat(x," ").concat(m)}return{numShapes:[y,g],details:h}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var m,h,g=0,y="",b=Array.from(Array(10),function(){return Array(10)});for(m in p)for(var x in p[m]){var v=void 0;v=m!=="line"?'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[m][x].color," ").concat(m,"</a>"):'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[m][x].color," ").concat(m," midpoint</a>"),b[p[m][x].loc.locY][p[m][x].loc.locX]?b[p[m][x].loc.locY][p[m][x].loc.locX]=b[p[m][x].loc.locY][p[m][x].loc.locX]+"  "+v:b[p[m][x].loc.locY][p[m][x].loc.locX]=v,g++}for(h in b){var w,_="<tr>";for(w in b[h])_+="<td>",b[h][w]!==void 0&&(_+=b[h][w]),_+="</td>";y=y+_+"</tr>"}return y}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),f!==l.map.innerHTML&&(l.map.innerHTML=f),u.details!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=u.details),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c){return function(f){if(Array.isArray(f)){for(var d=0,p=new Array(f.length);d<f.length;d++)p[d]=f[d];return p}}(c)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(c,f,d){return f=Math.floor(c[0]/f*10),c=Math.floor(c[1]/d*10),f===10&&(f-=1),c===10&&(c-=1),{locX:f,locY:c}}a.default.prototype.textOutput=function(c){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(c){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(c,f){var d,p,m,h=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");f==="Fallback"?(d=h+c,this.dummyDOM.querySelector("#".concat(p=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(d=h+c+(g=f),this.dummyDOM.querySelector("#".concat(p=h+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(p,'"></div>'))),this._accessibleOutputs[d]={},c==="textOutput"?(g="#".concat(h,"gridOutput").concat(g),m='<div id="'.concat(d,'">Text Output<div id="').concat(d,'Summary" aria-label="text output summary"><p id="').concat(d,'_summary"></p><ul id="').concat(d,'_list"></ul></div><table id="').concat(d,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(p)).innerHTML=m,this._accessibleOutputs[d].list=this.dummyDOM.querySelector("#".concat(d,"_list"))):c==="gridOutput"&&(g="#".concat(h,"textOutput").concat(g),m='<div id="'.concat(d,'">Grid Output<p id="').concat(d,'_summary" aria-label="grid output summary"><table id="').concat(d,'_map" summary="grid output content"></table><ul id="').concat(d,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",m):this.dummyDOM.querySelector("#".concat(p)).innerHTML=m,this._accessibleOutputs[d].map=this.dummyDOM.querySelector("#".concat(d,"_map"))),this._accessibleOutputs[d].shapeDetails=this.dummyDOM.querySelector("#".concat(d,"_shapeDetails")),this._accessibleOutputs[d].summary=this.dummyDOM.querySelector("#".concat(d,"_summary"))},a.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},a.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},a.default.prototype._accsCanvasColors=function(c,f){c==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},a.default.prototype._accsOutput=function(c,f){c==="ellipse"&&f[2]===f[3]?c="circle":c==="rectangle"&&f[2]===f[3]&&(c="square");var d,p,m={},h=!0,g=function(b,x){var v;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(v=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(v=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(v=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(v=(x[0]+x[2])/2,(x[1]+x[3])/2):(v=x[0],x[1]),[v,b]}(c,f);if(c==="line"?(m.color=this.ingredients.colors.stroke,m.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),d=this._getPos(f[0],[1]),p=this._getPos(f[2],[3]),m.loc=u(g,this.width,this.height),m.pos=d===p?"at ".concat(d):"from ".concat(d," to ").concat(p)):(c==="point"?m.color=this.ingredients.colors.stroke:(m.color=this.ingredients.colors.fill,m.area=this._getArea(c,f)),m.pos=this._getPos.apply(this,l(g)),m.loc=u(g,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[m]){for(var y in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][y])===JSON.stringify(m)&&(h=!1);h===!0&&this.ingredients.shapes[c].push(m)}}else this.ingredients.shapes[c]=[m]},a.default.prototype._getPos=function(p,d){var p=new DOMPointReadOnly(p,d),d=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),p=p.matrixTransform(d),d=p.x,p=p.y,m=this.width*this._pixelDensity,h=this.height*this._pixelDensity;return d<.4*m?p<.4*h?"top left":.6*h<p?"bottom left":"mid left":.6*m<d?p<.4*h?"top right":.6*h<p?"bottom right":"mid right":p<.4*h?"top middle":.6*h<p?"bottom middle":"middle"},a.default.prototype._getArea=function(c,f){var d,p,m=0,h=(c==="arc"?(m=(d=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(p=f[0],x=f[1],h=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),v=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),y=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),g=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),p=Math.abs(p*(v-g)+h*(g-x)+y*(x-v))/2,d>Math.PI?m+=p:m-=p)):c==="ellipse"||c==="circle"?m=3.14*f[2]/2*f[3]/2:c==="line"||c==="point"?m=0:c==="quadrilateral"?m=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:c==="rectangle"||c==="square"?m=f[2]*f[3]:c==="triangle"&&(m=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),g=this.height*this._pixelDensity,y=[new DOMPoint(0,0),new DOMPoint(h,0),new DOMPoint(h,g),new DOMPoint(0,g)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=y.map(function(w){return w.matrixTransform(b)}),v=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*m/v)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.concat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateTextOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,m,h){return m="Your output is a, ".concat(m," by ").concat(h," pixels, ").concat(p," canvas containing the following"),m=d===1?"".concat(m," shape:"):"".concat(m," ").concat(d," shapes:"),m}((u=function(d,p){var m,h="",g=0;for(m in p)for(var y in p[m]){var b='<li><a href="#'.concat(d,"shape").concat(g,'">').concat(p[m][y].color," ").concat(m,"</a>");m==="line"?b+=", ".concat(p[m][y].pos,", ").concat(p[m][y].length," pixels long.</li>"):(b+=", at ".concat(p[m][y].pos),m!=="point"&&(b+=", covering ".concat(p[m][y].area,"% of the canvas")),b+=".</li>"),h+=b,g++}return{numShapes:g,listShapes:h}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var m,h="",g=0;for(m in p)for(var y in p[m]){var b='<tr id="'.concat(d,"shape").concat(g,'"><th>').concat(p[m][y].color," ").concat(m,"</th>");m==="line"?b+="<td>location = ".concat(p[m][y].pos,"</td><td>length = ").concat(p[m][y].length," pixels</td></tr>"):(b+="<td>location = ".concat(p[m][y].pos,"</td>"),m!=="point"&&(b+="<td> area = ".concat(p[m][y].area,"%</td>")),b+="</tr>"),h+=b,g++}return h}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),u.listShapes!==l.list.innerHTML&&(l.list.innerHTML=u.listShapes),f!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=f),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(o,i,s){"use strict";var a=(a=o("./core/main"))&&a.__esModule?a:{default:a};o("./core/constants"),o("./core/environment"),o("./core/friendly_errors/stacktrace"),o("./core/friendly_errors/validate_params"),o("./core/friendly_errors/file_errors"),o("./core/friendly_errors/fes_core"),o("./core/friendly_errors/sketch_reader"),o("./core/helpers"),o("./core/legacy"),o("./core/preload"),o("./core/p5.Element"),o("./core/p5.Graphics"),o("./core/p5.Renderer"),o("./core/p5.Renderer2D"),o("./core/rendering"),o("./core/shim"),o("./core/structure"),o("./core/transform"),o("./core/shape/2d_primitives"),o("./core/shape/attributes"),o("./core/shape/curves"),o("./core/shape/vertex"),o("./accessibility/outputs"),o("./accessibility/textOutput"),o("./accessibility/gridOutput"),o("./accessibility/color_namer"),o("./color/color_conversion"),o("./color/creating_reading"),o("./color/p5.Color"),o("./color/setting"),o("./data/p5.TypedDict"),o("./data/local_storage.js"),o("./dom/dom"),o("./accessibility/describe"),o("./events/acceleration"),o("./events/keyboard"),o("./events/mouse"),o("./events/touch"),o("./image/filters"),o("./image/image"),o("./image/loading_displaying"),o("./image/p5.Image"),o("./image/pixels"),o("./io/files"),o("./io/p5.Table"),o("./io/p5.TableRow"),o("./io/p5.XML"),o("./math/calculation"),o("./math/math"),o("./math/noise"),o("./math/p5.Vector"),o("./math/random"),o("./math/trigonometry"),o("./typography/attributes"),o("./typography/loading_displaying"),o("./typography/p5.Font"),o("./utilities/array_functions"),o("./utilities/conversion"),o("./utilities/string_functions"),o("./utilities/time_date"),o("./webgl/3d_primitives"),o("./webgl/interaction"),o("./webgl/light"),o("./webgl/loading"),o("./webgl/material"),o("./webgl/p5.Camera"),o("./webgl/p5.DataArray"),o("./webgl/p5.Geometry"),o("./webgl/p5.Matrix"),o("./webgl/p5.RendererGL.Immediate"),o("./webgl/p5.RendererGL"),o("./webgl/p5.RendererGL.Retained"),o("./webgl/p5.Framebuffer"),o("./webgl/p5.Shader"),o("./webgl/p5.RenderBuffer"),o("./webgl/p5.Texture"),o("./webgl/text"),o("./core/init"),i.exports=a.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.ColorConversion={_hsbaToHSLA:function(a){var l=a[0],u=a[1],c=a[2],f=(2-u)*c/2;return f!=0&&(f==1?u=0:f<.5?u/=2-u:u=u*c/(2-2*f)),[l,u,f,a[3]]},_hsbaToRGBA:function(a){var l,u,c,f,d,p=6*a[0],m=a[1],h=a[2];return m===0?[h,h,h,a[3]]:(u=h*(1-m),c=h*(1-m*(p-(l=Math.floor(p)))),m=h*(1-m*(1+l-p)),p=l===1?(f=c,d=h,u):l===2?(f=u,d=h,m):l===3?(f=u,d=c,h):l===4?(f=m,d=u,h):l===5?(f=h,d=u,c):(f=h,d=m,u),[f,d,p,a[3]])},_hslaToHSBA:function(a){var l=a[0],u=a[1],c=a[2],f=c<.5?(1+u)*c:c+u-c*u;return[l,u=2*(f-c)/f,f,a[3]]},_hslaToRGBA:function(a){var l,u=6*a[0],c=a[1],f=a[2];return c===0?[f,f,f,a[3]]:[(l=function(d,p,m){return d<0?d+=6:6<=d&&(d-=6),d<1?p+(m-p)*d:d<3?m:d<4?p+(m-p)*(4-d):p})(2+u,c=2*f-(f=f<.5?(1+c)*f:f+c-f*c),f),l(u,c,f),l(u-2,c,f),a[3]]},_rgbaToHSBA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),m=p-Math.min(c,f,d);return m==0?u=l=0:(u=m/p,c===p?l=(f-d)/m:f===p?l=2+(d-c)/m:d===p&&(l=4+(c-f)/m),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,p,a[3]]},_rgbaToHSLA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),h=Math.min(c,f,d),m=p+h,h=p-h;return h==0?u=l=0:(u=m<1?h/m:h/(2-m),c===p?l=(f-d)/h:f===p?l=2+(d-c)/h:d===p&&(l=4+(c-f)/h),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,m/2,a[3]]}},o=o.default.ColorConversion,s.default=o},{"../core/main":280}],266:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var m=f();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.alpha=function(p){return u.default._validateParameters("alpha",arguments),this.color(p)._getAlpha()},u.default.prototype.blue=function(p){return u.default._validateParameters("blue",arguments),this.color(p)._getBlue()},u.default.prototype.brightness=function(p){return u.default._validateParameters("brightness",arguments),this.color(p)._getBrightness()},u.default.prototype.color=function(){for(var p,m=arguments.length,h=new Array(m),g=0;g<m;g++)h[g]=arguments[g];return u.default._validateParameters("color",h),h[0]instanceof u.default.Color?h[0]:(p=Array.isArray(h[0])?h[0]:h,new u.default.Color(this,p))},u.default.prototype.green=function(p){return u.default._validateParameters("green",arguments),this.color(p)._getGreen()},u.default.prototype.hue=function(p){return u.default._validateParameters("hue",arguments),this.color(p)._getHue()},u.default.prototype.lerpColor=function(p,m,h){u.default._validateParameters("lerpColor",arguments);var g,y,b,x=this._colorMode,v=this._colorMaxes;if(x===c.RGB)y=p.levels.map(function(w){return w/255}),b=m.levels.map(function(w){return w/255});else if(x===c.HSB)p._getBrightness(),m._getBrightness(),y=p.hsba,b=m.hsba;else{if(x!==c.HSL)throw new Error("".concat(x," cannot be used for interpolation."));p._getLightness(),m._getLightness(),y=p.hsla,b=m.hsla}return h=Math.max(Math.min(h,1),0),this.lerp===void 0&&(this.lerp=function(w,_,C){return C*(_-w)+w}),x===c.RGB?g=this.lerp(y[0],b[0],h):(.5<Math.abs(y[0]-b[0])&&(y[0]>b[0]?b[0]+=1:y[0]+=1),1<=(g=this.lerp(y[0],b[0],h))&&--g),p=this.lerp(y[1],b[1],h),m=this.lerp(y[2],b[2],h),y=this.lerp(y[3],b[3],h),g*=v[x][0],p*=v[x][1],m*=v[x][2],y*=v[x][3],this.color(g,p,m,y)},u.default.prototype.lightness=function(p){return u.default._validateParameters("lightness",arguments),this.color(p)._getLightness()},u.default.prototype.red=function(p){return u.default._validateParameters("red",arguments),this.color(p)._getRed()},u.default.prototype.saturation=function(p){return u.default._validateParameters("saturation",arguments),this.color(p)._getSaturation()};var d=u.default;s.default=d},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(g,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}g("core-js/modules/es.symbol"),g("core-js/modules/es.symbol.description"),g("core-js/modules/es.symbol.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.iterator"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.get-own-property-descriptor"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.iterator"),g("core-js/modules/es.string.trim"),g("core-js/modules/es.weak-map"),g("core-js/modules/web.dom-collections.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(g("../core/main")),c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=d();if(_&&_.has(w))return _.get(w);var C,S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in w){var A;Object.prototype.hasOwnProperty.call(w,C)&&((A=E?Object.getOwnPropertyDescriptor(w,C):null)&&(A.get||A.set)?Object.defineProperty(S,C,A):S[C]=w[C])}return S.default=w,_&&_.set(w,S),S}(g("../core/constants")),f=p(g("./color_conversion"));function d(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,d=function(){return w},w)}function p(w){return w&&w.__esModule?w:{default:w}}function m(w,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=/\s*/,v=/(\d{1,3})/,y=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(y.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(g.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),RGBA:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",y.source,"\\)$"].join(g.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSL:new RegExp(["^hsl\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSLA:new RegExp(["^hsla\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSB:new RegExp(["^hsb\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSBA:new RegExp(["^hsba\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i")},v=(u.default.Color=function(){function w(E,A){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(E._colorMode,E._colorMaxes),![c.RGB,c.HSL,c.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=w._parseInputs.apply(this,A),this._calculateLevels()}var _,C,S;return _=w,S=[{key:"_parseInputs",value:function(E,A,N,k){var M,I=arguments.length,L=this.mode,P=this.maxes[L],R=[];if(3<=I){for(R[0]=E/P[0],R[1]=A/P[1],R[2]=N/P[2],R[3]=typeof k=="number"?k/P[3]:1,M=R.length-1;0<=M;--M){var V=R[M];V<0?R[M]=0:1<V&&(R[M]=1)}return L===c.HSL?f.default._hslaToRGBA(R):L===c.HSB?f.default._hsbaToRGBA(R):R}if(I===1&&typeof E=="string"){if(N=E.trim().toLowerCase(),h[N])return w._parseInputs.call(this,h[N]);if(x.HEX3.test(N))return(R=x.HEX3.exec(N).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,R;if(x.HEX6.test(N))return(R=x.HEX6.exec(N).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,R;if(x.HEX4.test(N))return R=x.HEX4.exec(N).slice(1).map(function(G){return parseInt(G+G,16)/255});if(x.HEX8.test(N))return R=x.HEX8.exec(N).slice(1).map(function(G){return parseInt(G,16)/255});if(x.RGB.test(N))return(R=x.RGB.exec(N).slice(1).map(function(G){return G/255}))[3]=1,R;if(x.RGB_PERCENT.test(N))return(R=x.RGB_PERCENT.exec(N).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,R;if(x.RGBA.test(N))return R=x.RGBA.exec(N).slice(1).map(function(G,U){return U===3?parseFloat(G):G/255});if(x.RGBA_PERCENT.test(N))return R=x.RGBA_PERCENT.exec(N).slice(1).map(function(G,U){return U===3?parseFloat(G):parseFloat(G)/100});if(x.HSL.test(N)?(R=x.HSL.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSLA.test(N)&&(R=x.HSLA.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),(R=R.map(function(G){return Math.max(Math.min(G,1),0)})).length)return f.default._hslaToRGBA(R);if(x.HSB.test(N)?(R=x.HSB.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSBA.test(N)&&(R=x.HSBA.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),R.length){for(M=R.length-1;0<=M;--M)R[M]=Math.max(Math.min(R[M],1),0);return f.default._hsbaToRGBA(R)}R=[1,1,1,1]}else{if(I!==1&&I!==2||typeof E!="number")throw new Error("".concat(arguments,"is not a valid color representation."));R[0]=E/P[2],R[1]=E/P[2],R[2]=E/P[2],R[3]=typeof A=="number"?A/P[3]:1,R=R.map(function(G){return Math.max(Math.min(G,1),0)})}return R}}],(C=[{key:"toString",value:function(E){var A=this.levels,N=this._array,k=N[3];switch(E){case"#rrggbb":return"#".concat(A[0]<16?"0".concat(A[0].toString(16)):A[0].toString(16),A[1]<16?"0".concat(A[1].toString(16)):A[1].toString(16),A[2]<16?"0".concat(A[2].toString(16)):A[2].toString(16));case"#rrggbbaa":return"#".concat(A[0]<16?"0".concat(A[0].toString(16)):A[0].toString(16),A[1]<16?"0".concat(A[1].toString(16)):A[1].toString(16),A[2]<16?"0".concat(A[2].toString(16)):A[2].toString(16),A[3]<16?"0".concat(A[3].toString(16)):A[3].toString(16));case"#rgb":return"#".concat(Math.round(15*N[0]).toString(16),Math.round(15*N[1]).toString(16),Math.round(15*N[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*N[0]).toString(16),Math.round(15*N[1]).toString(16),Math.round(15*N[2]).toString(16),Math.round(15*N[3]).toString(16));case"rgb":return"rgb(".concat(A[0],", ",A[1],", ",A[2],")");case"rgb%":return"rgb(".concat((100*N[0]).toPrecision(3),"%, ",(100*N[1]).toPrecision(3),"%, ",(100*N[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*N[0]).toPrecision(3),"%, ",(100*N[1]).toPrecision(3),"%, ",(100*N[2]).toPrecision(3),"%, ",(100*N[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(A[0],",",A[1],",",A[2],",",k,")")}}},{key:"setRed",value:function(E){this._array[0]=E/this.maxes[c.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(E){this._array[1]=E/this.maxes[c.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(E){this._array[2]=E/this.maxes[c.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(E){this._array[3]=E/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var E=this._array,A=this.levels=new Array(E.length),N=E.length-1;0<=N;--N)A[N]=Math.round(255*E[N]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(E,A){this.mode=E,this.maxes=A}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[c.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[c.RGB][1]}},{key:"_getHue",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[c.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])}}])&&m(_.prototype,C),S&&m(_,S),w}(),u.default.Color);s.default=v},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.fill"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var m=f();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),u.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},u.default.prototype.endClip=function(){this._renderer.endClip()},u.default.prototype.clip=function(p,m){this._renderer.beginClip(m),p(),this._renderer.endClip(m)},u.default.prototype.background=function(){var p;return(p=this._renderer).background.apply(p,arguments),this},u.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},u.default.prototype.colorMode=function(p,m,h,g,y){return u.default._validateParameters("colorMode",arguments),p!==c.RGB&&p!==c.HSB&&p!==c.HSL||(this._colorMode=p,p=this._colorMaxes[p],arguments.length===2?(p[0]=m,p[1]=m,p[2]=m,p[3]=m):arguments.length===4?(p[0]=m,p[1]=h,p[2]=g):arguments.length===5&&(p[0]=m,p[1]=h,p[2]=g,p[3]=y)),this},u.default.prototype.fill=function(){var p;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(p=this._renderer).fill.apply(p,arguments),this},u.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},u.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},u.default.prototype.stroke=function(){var p;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(p=this._renderer).stroke.apply(p,arguments),this},u.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},u.default.prototype.noErase=function(){return this._renderer.noErase(),this};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QUADRATIC=s.LINEAR=s._CTX_MIDDLE=s._DEFAULT_LEADMULT=s._DEFAULT_TEXT_FILL=s.WORD=s.CHAR=s.BOLDITALIC=s.BOLD=s.ITALIC=s.NORMAL=s.BLUR=s.ERODE=s.DILATE=s.POSTERIZE=s.INVERT=s.OPAQUE=s.GRAY=s.THRESHOLD=s.BURN=s.DODGE=s.SOFT_LIGHT=s.HARD_LIGHT=s.OVERLAY=s.REPLACE=s.SCREEN=s.MULTIPLY=s.EXCLUSION=s.SUBTRACT=s.DIFFERENCE=s.LIGHTEST=s.DARKEST=s.ADD=s.REMOVE=s.BLEND=s.UP_ARROW=s.TAB=s.SHIFT=s.RIGHT_ARROW=s.RETURN=s.OPTION=s.LEFT_ARROW=s.ESCAPE=s.ENTER=s.DOWN_ARROW=s.DELETE=s.CONTROL=s.BACKSPACE=s.ALT=s.AUTO=s.HSL=s.HSB=s.RGB=s.MITER=s.BEVEL=s.ROUND=s.SQUARE=s.PROJECT=s.PIE=s.CHORD=s.OPEN=s.CLOSE=s.TESS=s.QUAD_STRIP=s.QUADS=s.TRIANGLE_STRIP=s.TRIANGLE_FAN=s.TRIANGLES=s.LINE_LOOP=s.LINE_STRIP=s.LINES=s.POINTS=s.BASELINE=s.BOTTOM=s.TOP=s.CENTER=s.LEFT=s.RIGHT=s.RADIUS=s.CORNERS=s.CORNER=s.RAD_TO_DEG=s.DEG_TO_RAD=s.RADIANS=s.DEGREES=s.TWO_PI=s.TAU=s.QUARTER_PI=s.PI=s.HALF_PI=s.WAIT=s.TEXT=s.MOVE=s.HAND=s.CROSS=s.ARROW=s.WEBGL2=s.WEBGL=s.P2D=s.VERSION=void 0,s.RGBA=s.HALF_FLOAT=s.FLOAT=s.UNSIGNED_INT=s.UNSIGNED_BYTE=s.COVER=s.CONTAIN=s.FALLBACK=s.LABEL=s.AXES=s.GRID=s._DEFAULT_FILL=s._DEFAULT_STROKE=s.PORTRAIT=s.LANDSCAPE=s.SMOOTH=s.FLAT=s.MIRROR=s.CLAMP=s.REPEAT=s.NEAREST=s.IMAGE=s.IMMEDIATE=s.TEXTURE=s.FILL=s.STROKE=s.CURVE=s.BEZIER=void 0;var a=Math.PI,l=(s.VERSION="1.9.4",s.P2D="p2d",s.WEBGL="webgl",s.WEBGL2="webgl2",s.ARROW="default",s.CROSS="crosshair",s.HAND="pointer",s.MOVE="move",s.TEXT="text",s.WAIT="wait",a/2),l=(s.HALF_PI=l,a),l=(s.PI=l,a/4),l=(s.QUARTER_PI=l,2*a),l=(s.TAU=l,2*a),l=(s.TWO_PI=l,s.DEGREES="degrees",s.RADIANS="radians",a/180),l=(s.DEG_TO_RAD=l,180/a);s.RAD_TO_DEG=l,s.CORNER="corner",s.CORNERS="corners",s.RADIUS="radius",s.RIGHT="right",s.LEFT="left",s.CENTER="center",s.TOP="top",s.BOTTOM="bottom",s.BASELINE="alphabetic",s.POINTS=0,s.LINES=1,s.LINE_STRIP=3,s.LINE_LOOP=2,s.TRIANGLES=4,s.TRIANGLE_FAN=6,s.TRIANGLE_STRIP=5,s.QUADS="quads",s.QUAD_STRIP="quad_strip",s.TESS="tess",s.CLOSE="close",s.OPEN="open",s.CHORD="chord",s.PIE="pie",s.PROJECT="square",s.SQUARE="butt",s.ROUND="round",s.BEVEL="bevel",s.MITER="miter",s.RGB="rgb",s.HSB="hsb",s.HSL="hsl",s.AUTO="auto",s.ALT=18,s.BACKSPACE=8,s.CONTROL=17,s.DELETE=46,s.DOWN_ARROW=40,s.ENTER=13,s.ESCAPE=27,s.LEFT_ARROW=37,s.OPTION=18,s.RETURN=13,s.RIGHT_ARROW=39,s.SHIFT=16,s.TAB=9,s.UP_ARROW=38,s.BLEND="source-over",s.REMOVE="destination-out",s.ADD="lighter",s.DARKEST="darken",s.LIGHTEST="lighten",s.DIFFERENCE="difference",s.SUBTRACT="subtract",s.EXCLUSION="exclusion",s.MULTIPLY="multiply",s.SCREEN="screen",s.REPLACE="copy",s.OVERLAY="overlay",s.HARD_LIGHT="hard-light",s.SOFT_LIGHT="soft-light",s.DODGE="color-dodge",s.BURN="color-burn",s.THRESHOLD="threshold",s.GRAY="gray",s.OPAQUE="opaque",s.INVERT="invert",s.POSTERIZE="posterize",s.DILATE="dilate",s.ERODE="erode",s.BLUR="blur",s.NORMAL="normal",s.ITALIC="italic",s.BOLD="bold",s.BOLDITALIC="bold italic",s.CHAR="CHAR",s.WORD="WORD",s._DEFAULT_TEXT_FILL="#000000",s._DEFAULT_LEADMULT=1.25,s._CTX_MIDDLE="middle",s.LINEAR="linear",s.QUADRATIC="quadratic",s.BEZIER="bezier",s.CURVE="curve",s.STROKE="stroke",s.FILL="fill",s.TEXTURE="texture",s.IMMEDIATE="immediate",s.IMAGE="image",s.NEAREST="nearest",s.REPEAT="repeat",s.CLAMP="clamp",s.MIRROR="mirror",s.FLAT="flat",s.SMOOTH="smooth",s.LANDSCAPE="landscape",s.PORTRAIT="portrait",s._DEFAULT_STROKE="#000000",s._DEFAULT_FILL="#FFFFFF",s.GRID="grid",s.AXES="axes",s.LABEL="label",s.FALLBACK="fallback",s.CONTAIN="contain",s.COVER="cover",s.UNSIGNED_BYTE="unsigned-byte",s.UNSIGNED_INT="unsigned-int",s.FLOAT="float",s.HALF_FLOAT="half-float",s.RGBA="rgba"},{}],270:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(c=o("./main"))&&c.__esModule?c:{default:c},c=function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=f();if(b&&b.has(y))return b.get(y);var x,v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var _;Object.prototype.hasOwnProperty.call(y,x)&&((_=w?Object.getOwnPropertyDescriptor(y,x):null)&&(_.get||_.set)?Object.defineProperty(v,x,_):v[x]=y[x])}return v.default=y,b&&b.set(y,v),v}(o("./constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}var d=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],p=(u.default.prototype._frameRate=0,u.default.prototype._lastFrameTime=window.performance.now(),u.default.prototype._targetFrameRate=60,window.print),m=!1;function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}u.default.prototype.print=function(){var y;arguments.length?(y=console).log.apply(y,arguments):m||(p(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(m=!0))},u.default.prototype.frameCount=0,u.default.prototype.deltaTime=0,u.default.prototype.focused=document.hasFocus(),u.default.prototype.cursor=function(y,b,x){var v,w="auto",_=this._curElement.elt;d.includes(y)?w=y:typeof y=="string"&&(v="",b&&x&&typeof b=="number"&&typeof x=="number"&&(v="".concat(b," ").concat(x)),w=y.substring(0,7)==="http://"||y.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(y)?"url(".concat(y,") ").concat(v,", auto"):y),_.style.cursor=w},u.default.prototype.frameRate=function(y){return u.default._validateParameters("frameRate",arguments),typeof y!="number"||y<0?this._frameRate:(this._setProperty("_targetFrameRate",y),y===0&&this._setProperty("_frameRate",y),this)},u.default.prototype.getFrameRate=function(){return this.frameRate()},u.default.prototype.setFrameRate=function(y){return this.frameRate(y)},u.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},u.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},u.default.prototype.webglVersion=c.P2D,u.default.prototype.displayWidth=screen.width,u.default.prototype.displayHeight=screen.height,u.default.prototype.windowWidth=h(),u.default.prototype.windowHeight=g(),u.default.prototype._onresize=function(y){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",g());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(y))===void 0||b||y.preventDefault()},u.default.prototype.width=0,u.default.prototype.height=0,u.default.prototype.fullscreen=function(y){if(u.default._validateParameters("fullscreen",arguments),y===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(y){if(y=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},u.default.prototype.pixelDensity=function(y){var b;return u.default._validateParameters("pixelDensity",arguments),typeof y=="number"?(y!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=y),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},u.default.prototype.displayDensity=function(){return window.devicePixelRatio},u.default.prototype.getURL=function(){return location.href},u.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(y){return y!==""})},u.default.prototype.getURLParams=function(){for(var y,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(y=b.exec(location.search))!=null;)y.index===b.lastIndex&&b.lastIndex++,x[y[1]]=y[2];return x},o=u.default,s.default=o},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(d=o("../main"))&&d.__esModule?d:{default:d};o("../internationalization");function l(p,m){m=m||console.log.bind(console),u||f(),u.some(function(h){var g;if(p.message&&p.message.match("\\W?".concat(h.name,"\\W"))!==null)return g=h.type==="function"?"".concat(h.name,"()"):h.name,m("Did you just try to use p5.js's ".concat(g," ").concat(h.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var u=null,f=null,c=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},u=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function p(h){return Object.getOwnPropertyNames(h).filter(function(g){return g[0]!=="_"&&!(g in m)&&(m[g]=!0)}).map(function(g){var y=typeof h[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:y}})}var m={};(u=[].concat(p(a.default.prototype),p(o("../constants")))).sort(function(h,g){return g.name.length-h.name.length})},d=(a.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)})),a.default);s.default=d},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(a=o("../main"))&&a.__esModule?a:{default:a};o("../internationalization"),a.default._friendlyFileLoadError=function(){},o=a.default,s.default=o},{"../internationalization":278,"../main":280}],273:[function(o,i,s){"use strict";function a(F){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(F)}function l(F){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(z){return a(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":a(z)})(F)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=G(o("../main")),c=o("../internationalization"),f=V(o("../constants")),d,p,m,h,g,y,b,x,v,w,_,C,S,E,A,N,k,M,I,L,P;function R(){var F;return typeof WeakMap!="function"?null:(F=new WeakMap,R=function(){return F},F)}function V(F){if(F&&F.__esModule)return F;if(F===null||l(F)!=="object"&&typeof F!="function")return{default:F};var z=R();if(z&&z.has(F))return z.get(F);var q,ee,ae={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in F)Object.prototype.hasOwnProperty.call(F,q)&&((ee=Q?Object.getOwnPropertyDescriptor(F,q):null)&&(ee.get||ee.set)?Object.defineProperty(ae,q,ee):ae[q]=F[q]);return ae.default=F,z&&z.set(F,ae),ae}function G(F){return F&&F.__esModule?F:{default:F}}function U(F){return pe(F)||X(F)||Y()}function Y(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function X(F){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]")return Array.from(F)}function pe(F){if(Array.isArray(F)){for(var z=0,q=new Array(F.length);z<F.length;z++)q[z]=F[z];return q}}u.default._fesCodeReader=function(){};var $=u.default;s.default=$},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../main"))&&o.__esModule?o:{default:o};function a(){var l=/(^|@)\S+:\d+/,u=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(u)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(u)},this).map(function(d){var p=(d=-1<d.indexOf("(eval ")?d.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):d).replace(/^\s+/,"").replace(/\(eval code/g,"("),m=p.match(/ (\((.+):(\d+):(\d+)\)$)/),p=(p=m?p.replace(m[0],""):p).split(/\s+/).slice(1),m=this.extractLocation(m?m[1]:p.pop());return{functionName:p.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(m[0])?void 0:m[0],lineNumber:m[1],columnNumber:m[2],source:d}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(d){return!d.match(c)},this).map(function(d){var p,m;return(d=-1<d.indexOf(" > eval")?d.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):d).indexOf("@")===-1&&d.indexOf(":")===-1?{functionName:d}:{functionName:(m=d.match(p=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&m[1]?m[1]:void 0,fileName:(m=this.extractLocation(d.replace(p,"")))[0],lineNumber:m[1],columnNumber:m[2],source:d}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)/i,p=f.message.split(`
`),m=[],h=2,g=p.length;h<g;h+=2){var y=d.exec(p[h]);y&&m.push({fileName:y[2],lineNumber:y[1],source:p[h]})}return m},parseOpera10:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,p=f.stacktrace.split(`
`),m=[],h=0,g=p.length;h<g;h+=2){var y=d.exec(p[h]);y&&m.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:p[h]})}return m},parseOpera11:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(l)&&!d.match(/^Error created at/)},this).map(function(d){var p,h=d.split("@"),m=this.extractLocation(h.pop()),h=h.shift()||"";return{functionName:h.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(p=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):p)===void 0||p==="[arguments not available]"?void 0:p.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:d}},this)}}}o.default._getErrorStackParser=function(){return new a},o=o.default,s.default=o},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../main"))&&l.__esModule?l:{default:l};(function(f){if(!(f&&f.__esModule)&&!(f===null||c(f)!=="object"&&typeof f!="function")){var d=u();if(d&&d.has(f))return d.get(f);var p,m={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=h?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(m,p,g):m[p]=f[p])}m.default=f,d&&d.set(f,m)}})(o("../constants")),o("../internationalization");function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default._validateParameters=l.default._clearValidateParamsCache=function(){},o=l.default,s.default=o},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function l(f){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var p,m={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=h?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(m,p,g):m[p]=f[p])}return m.default=f,d&&d.set(f,m),m}(o("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}s.default={modeAdjust:function(f,d,p,m,h){return h===u.CORNER?{x:f,y:d,w:p,h:m}:h===u.CORNERS?{x:f,y:d,w:p-f,h:m-d}:h===u.RADIUS?{x:f-p,y:d-m,w:2*p,h:2*m}:h===u.CENTER?{x:f-.5*p,y:d-.5*m,w:p,h:m}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(l=o("../core/main"))&&l.__esModule?l:{default:l};o("./internationalization");var l=Promise.resolve();Promise.all([new Promise(function(u,c){document.readyState==="complete"?u():window.addEventListener("load",u,!1)}),l]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(o,i,s){"use strict";o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.setTranslatorLanguage=s.currentTranslatorLanguage=s.availableTranslatorLanguages=s.initialize=s.translator=void 0;var a,l,u=f(o("i18next")),c=f(o("i18next-browser-languagedetector"));function f(m){return m&&m.__esModule?m:{default:m}}function d(m,h){for(var g=0;g<h.length;g++){var y=h[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}var p=function(){function m(b,x){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.init(b,x)}var h,g,y;return h=m,(g=[{key:"fetchWithTimeout",value:function(b,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(b,x),new Promise(function(w,_){return setTimeout(function(){return _(new Error("timeout"))},v)})])}},{key:"init",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=b,this.options=x}},{key:"read",value:function(b,x,v){var w=this.options.loadPath;b===this.options.fallback?v(null,a[b][x]):l.includes(b)?(w=this.services.interpolator.interpolate(w,{lng:b,ns:x}),this.loadUrl(w,v)):v("Not found",!1)}},{key:"loadUrl",value:function(b,x){this.fetchWithTimeout(b).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(b))},function(){throw new Error("failed loading ".concat(b))}).then(function(v){return x(null,v)}).catch(x)}}])&&d(h.prototype,g),y&&d(h,y),m}();p.type="backend",s.translator=function(m,h){console.debug("p5.js translator called before translations were loaded"),u.default.t(m,h)},s.initialize=function(){return u.default.use(c.default).use(p).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(m){s.translator=m},function(m){return console.debug("Translations failed to load (".concat(m,")"))})},s.availableTranslatorLanguages=function(){return u.default.languages},s.currentTranslatorLanguage=function(m){return u.default.language},s.setTranslatorLanguage=function(m){return u.default.changeLanguage(m||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},o.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},o.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},o.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},o=o.default,s.default=o},{"./main":280}],280:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("./shim");var u=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var h=c();if(h&&h.has(m))return h.get(m);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var x;Object.prototype.hasOwnProperty.call(m,g)&&((x=b?Object.getOwnPropertyDescriptor(m,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=m[g])}return y.default=m,h&&h.set(m,y),y}(o("./constants"));function c(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,c=function(){return m},m)}function f(m,h){for(var g=0;g<h.length;g++){var y=h[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}var d,p=function(){function m(b,w){var v=this;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(m.prototype._registeredMethods),_=!0,C=!1,S=void 0;try{for(var E,A=w[Symbol.iterator]();!(_=(E=A.next()).done);_=!0){var N=E.value;this._registeredMethods[N]=m.prototype._registeredMethods[N].slice()}}catch(U){C=!0,S=U}finally{try{_||A.return==null||A.return()}finally{if(C)throw S}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),m.prototype.callRegisteredHooksFor=function(U){var Y=this||m.prototype,X=this._isGlobal?window:this;if(Y._registeredMethods.hasOwnProperty(U)){var Y=Y._registeredMethods[U],pe=!0,U=!1,$=void 0;try{for(var F,z=Y[Symbol.iterator]();!(pe=(F=z.next()).done);pe=!0){var q=F.value;typeof q=="function"&&q.call(X)}}catch(Q){U=!0,$=Q}finally{try{pe||z.return==null||z.return()}finally{if(U)throw $}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var U=v._isGlobal?window:v;if(U.preload){v.callRegisteredHooksFor("beforePreload");var Y,X=document.getElementById(v._loadingScreenId),pe=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=v._loadingScreenId,(v._userNode||document.body).appendChild(X)),v._preloadMethods);for(Y in pe){pe[Y]=pe[Y]||m;var $=pe[Y];$!==m.prototype&&$!==m||(v._isGlobal&&(window[Y]=v._wrapPreload(v,Y)),$=v),v._registeredPreloadMethods[Y]=$[Y],$[Y]=v._wrapPreload($,Y)}U.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var U,Y=this._isGlobal?window:this;Y._preloadCount===0&&((U=document.getElementById(Y._loadingScreenId))&&U.parentNode.removeChild(U),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Y._setup(),this._recording||Y._draw()))},this._decrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||typeof U.preload!="function"||(U._setProperty("_preloadCount",U._preloadCount-1),U._runIfPreloadsAreDone())},this._wrapPreload=function(U,Y){var X=this;return function(){X._incrementPreload();for(var pe=arguments.length,$=new Array(pe),F=0;F<pe;F++)$[F]=arguments[F];return X._registeredPreloadMethods[Y].apply(U,$)}},this._incrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||U._setProperty("_preloadCount",U._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var U=v._isGlobal?window:v;if(typeof U.preload=="function")for(var Y in v._preloadMethods)U[Y]=v._preloadMethods[Y][Y],U[Y]&&v&&(U[Y]=U[Y].bind(v));v._millisStart=window.performance.now(),U._preloadDone=!0,typeof U.setup=="function"&&U.setup();var X=document.getElementsByTagName("canvas"),pe=!0,$=!1,F=void 0;try{for(var z,q=X[Symbol.iterator]();!(pe=(z=q.next()).done);pe=!0){var ee=z.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(ae){$=!0,F=ae}finally{try{pe||q.return==null||q.return()}finally{if($)throw F}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(){var U=window.performance.now(),Y=U-v._lastTargetFrameTime,X=1e3/v._targetFrameRate;(!v._loop||X-5<=Y)&&(v.deltaTime=U-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+X,U),v._lastRealFrameTime=U,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(U,Y){v[U]=Y,v._isGlobal&&(window[U]=Y)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var U=document.getElementById(v._loadingScreenId);if(U&&(U.parentNode.removeChild(U),v._incrementPreload()),v._curElement){for(var Y in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(Y,v._events[Y]);var X=!0,U=!1,pe=void 0;try{for(var $,F=v._elements[Symbol.iterator]();!(X=($=F.next()).done);X=!0){var z,q=$.value;for(z in q.elt&&q.elt.parentNode&&q.elt.parentNode.removeChild(q.elt),q._events)q.elt.removeEventListener(z,q._events[z])}}catch(ie){U=!0,pe=ie}finally{try{X||F.return==null||F.return()}finally{if(U)throw pe}}var ee=v;v._registeredMethods.remove.forEach(function(ie){ie!==void 0&&ie.call(ee)})}if(v._isGlobal){for(var ae in m.prototype)try{delete window[ae]}catch{window[ae]=void 0}for(var Q in v)if(v.hasOwnProperty(Q))try{delete window[Q]}catch{window[Q]=void 0}m.instance=null}},this._registeredMethods.init.forEach(function(U){U!==void 0&&U.call(this)},this),this._setupPromisePreloads();var k,M,I=this._createFriendlyGlobalFunctionBinder();if(b)b(this),m._checkForUserDefinedFunctions(this);else{for(var L in this._isGlobal=!0,m.instance=this,m.prototype)typeof m.prototype[L]=="function"?(k=L.substring(2),this._events.hasOwnProperty(k)||(Math.hasOwnProperty(L)&&Math[L]===m.prototype[L]?I(L,m.prototype[L]):I(L,m.prototype[L].bind(this)))):I(L,m.prototype[L]);for(var P in this)this.hasOwnProperty(P)&&I(P,this[P])}for(M in this._events){var R=this["_on".concat(M)];R&&(R=R.bind(this),window.addEventListener(M,R,{passive:!1}),this._events[M]=R)}function V(){v._setProperty("focused",!0)}function G(){v._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",G),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",G)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var h,g,y;return h=m,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=u.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(b,x){m.prototype._preloadMethods.hasOwnProperty(b)||(m.prototype._preloadMethods[b]=x)}},{key:"registerMethod",value:function(b,x){var v=this||m.prototype;v._registeredMethods.hasOwnProperty(b)||(v._registeredMethods[b]=[]),v._registeredMethods[b].push(x)}},{key:"unregisterMethod",value:function(b,x){var v=this||m.prototype;if(v._registeredMethods.hasOwnProperty(b)){for(var w=v._registeredMethods[b],_=[],C=0;C<w.length;C++)w[C]===x&&_.push(C);for(var S=_.length-1;0<=S;S--)w.splice(_[S],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=b.globalObject||window;return b.log||console.log.bind(console),function(v,w){m.disableFriendlyErrors,x[v]=w}}}])&&f(h.prototype,g),y&&f(h,y),m}();for(d in p.instance=null,p.disableFriendlyErrors=!1,u)p.prototype[d]=u[d];p.VERSION=u.VERSION,p.prototype._preloadMethods={loadJSON:p.prototype,loadImage:p.prototype,loadStrings:p.prototype,loadXML:p.prototype,loadBytes:p.prototype,loadTable:p.prototype,loadFont:p.prototype,loadModel:p.prototype,loadShader:p.prototype},p.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},p.prototype._registeredPreloadMethods={},s.default=p},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Element=function(){function u(p,m){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.elt=p,this._pInst=this._pixelsState=m,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var c,f,d;return c=u,d=[{key:"_adjustListener",value:function(p,m,h){return m===!1?a.default.Element._detachListener(p,h):a.default.Element._attachListener(p,m,h),this}},{key:"_attachListener",value:function(p,m,h){h._events[p]&&a.default.Element._detachListener(p,h),m=m.bind(h),h.elt.addEventListener(p,m,!1),h._events[p]=m}},{key:"_detachListener",value:function(p,m){var h=m._events[p];m.elt.removeEventListener(p,h,!1),m._events[p]=null}}],(f=[{key:"parent",value:function(p){return p===void 0?this.elt.parentNode:(typeof p=="string"?(p[0]==="#"&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof a.default.Element&&(p=p.elt),p.appendChild(this.elt),this)}},{key:"id",value:function(p){return p===void 0?this.elt.id:(this.elt.id=p,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(p){return p===void 0?this.elt.className:(this.elt.className=p,this)}},{key:"mousePressed",value:function(p){return a.default.Element._adjustListener("mousedown",function(m){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(m),p.call(this,m)},this),this}},{key:"doubleClicked",value:function(p){return a.default.Element._adjustListener("dblclick",p,this),this}},{key:"mouseWheel",value:function(p){return a.default.Element._adjustListener("wheel",p,this),this}},{key:"mouseReleased",value:function(p){return a.default.Element._adjustListener("mouseup",p,this),this}},{key:"mouseClicked",value:function(p){return a.default.Element._adjustListener("click",p,this),this}},{key:"mouseMoved",value:function(p){return a.default.Element._adjustListener("mousemove",p,this),this}},{key:"mouseOver",value:function(p){return a.default.Element._adjustListener("mouseover",p,this),this}},{key:"mouseOut",value:function(p){return a.default.Element._adjustListener("mouseout",p,this),this}},{key:"touchStarted",value:function(p){return a.default.Element._adjustListener("touchstart",p,this),this}},{key:"touchMoved",value:function(p){return a.default.Element._adjustListener("touchmove",p,this),this}},{key:"touchEnded",value:function(p){return a.default.Element._adjustListener("touchend",p,this),this}},{key:"dragOver",value:function(p){return a.default.Element._adjustListener("dragover",p,this),this}},{key:"dragLeave",value:function(p){return a.default.Element._adjustListener("dragleave",p,this),this}},{key:"_setProperty",value:function(p,m){this[p]=m}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Element,s.default=o},{"./main":280}],282:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=o("./main"))&&b.__esModule?b:{default:b},c=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=f();if(v&&v.has(x))return v.get(x);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var S;Object.prototype.hasOwnProperty.call(x,w)&&((S=C?Object.getOwnPropertyDescriptor(x,w):null)&&(S.get||S.set)?Object.defineProperty(_,w,S):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("./constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function m(x){return function(){var v,w=y(x);return h(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=y(this).constructor,Reflect.construct(w,arguments,v)):w.apply(this,arguments))}}function h(x,v){return!v||l(v)!=="object"&&typeof v!="function"?g(x):v}function g(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}u.default.Graphics=function(x){var v=C;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=m(C);function C(S,E,P,N,k){var M;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");L=k||document.createElement("canvas"),(M=_.call(this,L,N)).canvas=L;var I,L=P||c.P2D,P=N._userNode||document.body;for(I in k||P.appendChild(M.canvas),u.default.prototype)M[I]||(typeof u.default.prototype[I]=="function"?M[I]=u.default.prototype[I].bind(g(M)):M[I]=u.default.prototype[I]);return u.default.prototype._initializeInstanceVariables.apply(g(M)),M.width=S,M.height=E,M._pixelDensity=N._pixelDensity,L===c.WEBGL?(M._renderer=new u.default.RendererGL(M.canvas,g(M),!1),S=(k=M._renderer._adjustDimensions(S,E)).adjustedWidth,E=k.adjustedHeight):M._renderer=new u.default.Renderer2D(M.canvas,g(M),!1),N._elements.push(g(M)),Object.defineProperty(g(M),"deltaTime",{get:function(){return this._pInst.deltaTime}}),M._renderer.resize(S,E),M._renderer._applyDefaults(),h(M,g(M))}return v=C,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var S,E=this._pInst._elements.indexOf(this);for(S in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(S,this._events[S])}},{key:"createFramebuffer",value:function(S){return new u.default.Framebuffer(this,S)}}])&&d(v.prototype,x),w&&d(v,w),C}(u.default.Element);var b=u.default.Graphics;s.default=b},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(y=o("./main"))&&y.__esModule?y:{default:y},u=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var v=c();if(v&&v.has(x))return v.get(x);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var S;Object.prototype.hasOwnProperty.call(x,w)&&((S=C?Object.getOwnPropertyDescriptor(x,w):null)&&(S.get||S.set)?Object.defineProperty(_,w,S):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants"));function c(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,c=function(){return x},x)}function f(x){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function m(x){return function(){var v,w,_=g(x);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=g(this).constructor,Reflect.construct(_,arguments,v)):_.apply(this,arguments),_=this,!(w=v)||f(w)!=="object"&&typeof w!="function"?h(_):w}}function h(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function g(x){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}var y=function(x){var v=C;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=m(C);function C(S,E,A){var N;if(this instanceof C)return(N=_.call(this,S,E)).canvas=S,N._pixelsState=E,A?(N._isMainCanvas=!0,N._pInst._setProperty("_curElement",h(N)),N._pInst._setProperty("canvas",N.canvas),N._pInst._setProperty("width",N.width),N._pInst._setProperty("height",N.height)):(N.canvas.style.display="none",N._styles=[]),N._clipping=!1,N._clipInvert=!1,N._textSize=12,N._textLeading=15,N._textFont="sans-serif",N._textStyle=u.NORMAL,N._textAscent=null,N._textDescent=null,N._textAlign=u.LEFT,N._textBaseline=u.BASELINE,N._textWrap=u.WORD,N._rectMode=u.CORNER,N._ellipseMode=u.CENTER,N._curveTightness=0,N._imageMode=u.CORNER,N._tint=null,N._doStroke=!0,N._doFill=!0,N._strokeSet=!1,N._fillSet=!1,N._leadingSet=!1,N._pushPopDepth=0,N;throw new TypeError("Cannot call a class as a function")}return v=C,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(S){this._pushPopDepth--,S.properties&&Object.assign(this,S.properties)}},{key:"beginClip",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=S.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(S,E){this.width=S,this.height=E,this.elt.width=S*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(S,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(S,E,A,N){var k=this._pixelsState,M=k._pixelDensity,I=this.canvas;if(S===void 0&&E===void 0)S=E=0,A=k.width,N=k.height;else if(S*=M,E*=M,A===void 0&&N===void 0)return S<0||E<0||S>=I.width||E>=I.height?[0,0,0,0]:this._getPixel(S,E);return k=new l.default.Image(A*M,N*M),k.pixelDensity(M),k.canvas.getContext("2d").drawImage(I,S,E,A*M,N*M,0,0,A*M,N*M),k}},{key:"textLeading",value:function(S){return typeof S=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",S),this._pInst):this._textLeading}},{key:"textStyle",value:function(S){return S?(S!==u.NORMAL&&S!==u.ITALIC&&S!==u.BOLD&&S!==u.BOLDITALIC||this._setProperty("_textStyle",S),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(S,E){return S!==void 0?(this._setProperty("_textAlign",S),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(S){return this._setProperty("_textWrap",S),this._textWrap}},{key:"text",value:function(S,E,A,N,k){var M,I,L,P,R=this._pInst,V=this._textWrap,G=Number.MAX_VALUE,U=A;if((this._doFill||this._doStroke)&&S!==void 0){if(M=(S=(S=typeof S!="string"?S.toString():S).replace(/(\t)/g,"  ")).split(`
`),N!==void 0){switch(this._rectMode===u.CENTER&&(E-=N/2),this._textAlign){case u.CENTER:E+=N/2;break;case u.RIGHT:E+=N}if(k!==void 0){this._rectMode===u.CENTER&&(A-=k/2,U-=k/2);var S=A,Y=R.textAscent();switch(this._textBaseline){case u.BOTTOM:P=A+k,A=Math.max(P,A),U+=Y;break;case u.CENTER:P=A+k/2,A=Math.max(P,A),U+=Y/2}G=A+k-Y,this._textBaseline===u.CENTER&&(G=S+k-Y/2)}else this._textBaseline!==u.BOTTOM&&this._textBaseline!==u.CENTER||(U=A-(S=R.textSize()*this._textLeading)/2,G=A+S/2);if(V===u.WORD){for(var X=[],pe=0;pe<M.length;pe++){for(var $="",F=M[pe].split(" "),z=0;z<F.length;z++)I="".concat($+F[z])+" ",$=N<(L=this.textWidth(I))&&0<$.length?(X.push($),"".concat(F[z])+" "):I;X.push($)}var q=0;this._textBaseline===u.CENTER?q=(X.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(q=(X.length-1)*R.textLeading());for(var ee=0;ee<M.length;ee++){$="",F=M[ee].split(" ");for(var ae=0;ae<F.length;ae++)I="".concat($+F[ae])+" ",N<(L=this.textWidth(I))&&0<$.length?(this._renderText(R,$.trim(),E,A-q,G,U),$="".concat(F[ae])+" ",A+=R.textLeading()):$=I;this._renderText(R,$.trim(),E,A-q,G,U),A+=R.textLeading()}}else{for(var Q=[],le=0;le<M.length;le++)for(var ie=M[le].split($=""),Z=0;Z<ie.length;Z++)I="".concat($+ie[Z]),(L=this.textWidth(I))<=N?$+=ie[Z]:N<L&&0<$.length&&(Q.push($),$="".concat(ie[Z]));Q.push($);var ge=0;this._textBaseline===u.CENTER?ge=(Q.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(ge=(Q.length-1)*R.textLeading());for(var ne=0;ne<M.length;ne++){ie=M[ne].split($="");for(var ye=0;ye<ie.length;ye++)I="".concat($+ie[ye]),(L=this.textWidth(I))<=N?$+=ie[ye]:N<L&&0<$.length&&(this._renderText(R,$.trim(),E,A-ge,G,U),A+=R.textLeading(),$="".concat(ie[ye]))}this._renderText(R,$.trim(),E,A-ge,G,U),A+=R.textLeading()}}else{var xe=0;this._textBaseline===u.CENTER?xe=(M.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(xe=(M.length-1)*R.textLeading());for(var Ne=0;Ne<M.length;Ne++)this._renderText(R,M[Ne],E,A-xe,G,U-xe),A+=R.textLeading()}return R}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(S)==="object"&&S.font&&S.font.supported}},{key:"_updateTextMetrics",value:function(){var S,E,A,N,k,M;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((S=document.createElement("span")).style.fontFamily=this._textFont,S.style.fontSize="".concat(this._textSize,"px"),S.innerHTML="ABCjgq|",(M=document.createElement("div")).style.display="inline-block",M.style.width="1px",M.style.height="0px",N=((E=document.createElement("div")).appendChild(S),E.appendChild(M),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),M.style.verticalAlign="baseline",b(M)),k=b(S),A=N[1]-k[1],N=(M.style.verticalAlign="bottom",b(M)),k=b(S),M=N[1]-k[1]-A,document.body.removeChild(E),this._setProperty("_textAscent",A),this._setProperty("_textDescent",M)),this}}])&&d(v.prototype,x),w&&d(v,w),C}(l.default.Element);function b(x){var v=0,w=0;if(x.offsetParent)for(;v+=x.offsetLeft,w+=x.offsetTop,x=x.offsetParent;);else v+=x.offsetLeft,w+=x.offsetTop;return[v,w]}y.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*u._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer=y,o=l.default.Renderer,s.default=o},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(x,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=x("./main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=S?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=v[_])}return C.default=v,w&&w.set(v,C),C}(x("./constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function p(v,w,_){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(A,S,E){var A=function(N,k){for(;!Object.prototype.hasOwnProperty.call(N,k)&&(N=g(N))!==null;);return N}(A,S);if(A)return(A=Object.getOwnPropertyDescriptor(A,S)).get?A.get.call(E):A.value})(v,w,_||v)}function m(v,w){return(m=Object.setPrototypeOf||function(_,C){return _.__proto__=C,_})(v,w)}function h(v){return function(){var w,_=g(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=g(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function g(v){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}x("./p5.Renderer");var y="rgba(0,0,0,0)",b=function(v){var w=S;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&m(w,v);var _,C=h(S);function S(E,A,N){if(this instanceof S)return(E=C.call(this,E,A,N)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return w=S,(v=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof u.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new u.default.Graphics(this.width,this.height,c.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,A){p(g(S.prototype),"resize",this).call(this,E,A),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,A;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof u.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),A=(A=this._pInst).color.apply(A,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(A.levels),A=A.toString(),this._setFill(A),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,A){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,A).toString(),this.drawingContext.strokeStyle=E,A=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=A,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(p(g(S.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(c.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),p(g(S.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,A,N,k,M,I,L,P,R){E.gifProperties&&E._animateGif(this._pInst);try{u.default.MediaElement&&E instanceof u.default.MediaElement&&E._ensureCanvas();var V=(V=this._tint&&E.canvas?this._getTintedImageCanvas(E):V)||E.canvas||E.elt,G=1;E.width&&0<E.width&&(G=V.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(V,G*A,G*N,G*k,G*M,I,L,P,R),this._isErasing&&this._pInst.erase()}catch(U){if(U.name!=="NS_ERROR_NOT_AVAILABLE")throw U}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var A=E.tintCanvas.getContext("2d");return A.save(),A.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(A.drawImage(E.canvas,0,0),A.globalCompositeOperation="luminosity",A.drawImage(E.canvas,0,0),A.globalCompositeOperation="color",A.drawImage(E.canvas,0,0),A.globalCompositeOperation="multiply",A.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),A.fillRect(0,0,E.canvas.width,E.canvas.height),A.globalCompositeOperation="destination-in"),A.globalAlpha=this._tint[3]/255,A.drawImage(E.canvas,0,0),A.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==c.BLEND&&E!==c.REMOVE&&E!==c.DARKEST&&E!==c.LIGHTEST&&E!==c.DIFFERENCE&&E!==c.MULTIPLY&&E!==c.EXCLUSION&&E!==c.SCREEN&&E!==c.REPLACE&&E!==c.OVERLAY&&E!==c.HARD_LIGHT&&E!==c.SOFT_LIGHT&&E!==c.DODGE&&E!==c.BURN&&E!==c.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,A=arguments.length,N=new Array(A),k=0;k<A;k++)N[k]=arguments[k];var M=N[N.length-1],I=Array.prototype.slice.call(N,0,N.length-1);this.drawingContext.globalCompositeOperation=M,u.default.prototype.copy.apply(this,I),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,A){return E=this.drawingContext.getImageData(E,A,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,A=E._pixelDensity,N=this.width*A,A=this.height*A,N=this.drawingContext.getImageData(0,0,N,A);E._setProperty("imageData",N),E._setProperty("pixels",N.data)}},{key:"set",value:function(E,A,N){E=Math.floor(E),A=Math.floor(A);var k=this._pixelsState;if(N instanceof u.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(k._pixelDensity,k._pixelDensity),this.drawingContext.clearRect(E,A,N.width,N.height),this.drawingContext.drawImage(N.canvas,E,A),this.drawingContext.restore();else{var M=0,I=0,L=0,P=0,R=4*(A*k._pixelDensity*(this.width*k._pixelDensity)+E*k._pixelDensity);if(k.imageData||k.loadPixels(),typeof N=="number")R<k.pixels.length&&(L=I=M=N,P=255);else if(Array.isArray(N)){if(N.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");R<k.pixels.length&&(M=N[0],I=N[1],L=N[2],P=N[3])}else N instanceof u.default.Color&&R<k.pixels.length&&(M=N.levels[0],I=N.levels[1],L=N.levels[2],P=N.levels[3]);for(var V=0;V<k._pixelDensity;V++)for(var G=0;G<k._pixelDensity;G++)R=4*((A*k._pixelDensity+G)*this.width*k._pixelDensity+(E*k._pixelDensity+V)),k.pixels[R]=M,k.pixels[R+1]=I,k.pixels[R+2]=L,k.pixels[R+3]=P}}},{key:"updatePixels",value:function(E,A,N,k){var M=this._pixelsState,I=M._pixelDensity;E===void 0&&A===void 0&&N===void 0&&k===void 0&&(A=E=0,N=this.width,k=this.height),E*=I,A*=I,N*=I,k*=I,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=M.imageData),this.drawingContext.putImageData(M.imageData,E,A,0,0,N,k)}},{key:"_acuteArcToBezier",value:function(E,A){var I=A/2,N=Math.cos(I),P=Math.sin(I),k=1/Math.tan(I),I=E+I,M=Math.cos(I),I=Math.sin(I),L=(4-N)/3,P=P+(N-L)*k;return{ax:Math.cos(E).toFixed(7),ay:Math.sin(E).toFixed(7),bx:(L*M+P*I).toFixed(7),by:(L*I-P*M).toFixed(7),cx:(L*M-P*I).toFixed(7),cy:(L*I+P*M).toFixed(7),dx:Math.cos(E+A).toFixed(7),dy:Math.sin(E+A).toFixed(7)}}},{key:"arc",value:function(E,A,N,k,M,I,L){var P,R=this.drawingContext,V=N/2,G=k/2,U=[];for(E+=V,A+=G;1e-5<=I-M;)P=Math.min(I-M,c.HALF_PI),U.push(this._acuteArcToBezier(M,P)),M+=P;return this._doFill&&(this._clipping||R.beginPath(),U.forEach(function(Y,X){X===0&&R.moveTo(E+Y.ax*V,A+Y.ay*G),R.bezierCurveTo(E+Y.bx*V,A+Y.by*G,E+Y.cx*V,A+Y.cy*G,E+Y.dx*V,A+Y.dy*G)}),L!==c.PIE&&L!=null||R.lineTo(E,A),R.closePath(),this._clipping||R.fill()),this._doStroke&&(this._clipping||R.beginPath(),U.forEach(function(Y,X){X===0&&R.moveTo(E+Y.ax*V,A+Y.ay*G),R.bezierCurveTo(E+Y.bx*V,A+Y.by*G,E+Y.cx*V,A+Y.cy*G,E+Y.dx*V,A+Y.dy*G)}),L===c.PIE?(R.lineTo(E,A),R.closePath()):L===c.CHORD&&R.closePath(),this._clipping||R.stroke()),this}},{key:"ellipse",value:function(P){var A=this.drawingContext,N=this._doFill,k=this._doStroke,M=parseFloat(P[0]),I=parseFloat(P[1]),L=parseFloat(P[2]),P=parseFloat(P[3]);if(N&&!k){if(this._getFill()===y)return this}else if(!N&&k&&this._getStroke()===y)return this;M+=L/2,I+=P/2,L/=2,P/=2,this._clipping||A.beginPath(),A.ellipse(M,I,L,P,0,0,2*Math.PI),!this._clipping&&N&&A.fill(),!this._clipping&&k&&A.stroke()}},{key:"line",value:function(E,A,N,k){var M=this.drawingContext;return this._doStroke&&this._getStroke()!==y&&(this._clipping||M.beginPath(),M.moveTo(E,A),M.lineTo(N,k),M.stroke()),this}},{key:"point",value:function(E,A){var N,k,M=this.drawingContext;return!this._doStroke||this._getStroke()===y?this:(N=this._getStroke(),k=this._getFill(),this._clipping||this._setFill(N),this._clipping||M.beginPath(),M.arc(E,A,M.lineWidth/2,0,c.TWO_PI,!1),void(this._clipping||(M.fill(),this._setFill(k))))}},{key:"quad",value:function(E,A,N,k,M,I,L,P){var R=this.drawingContext,V=this._doFill,G=this._doStroke;if(V&&!G){if(this._getFill()===y)return this}else if(!V&&G&&this._getStroke()===y)return this;return this._clipping||R.beginPath(),R.moveTo(E,A),R.lineTo(N,k),R.lineTo(M,I),R.lineTo(L,P),R.closePath(),!this._clipping&&V&&R.fill(),!this._clipping&&G&&R.stroke(),this}},{key:"rect",value:function(G){var A,N,k=G[0],M=G[1],I=G[2],L=G[3],P=G[4],R=G[5],V=G[6],G=G[7],U=this.drawingContext,Y=this._doFill,X=this._doStroke;if(Y&&!X){if(this._getFill()===y)return this}else if(!Y&&X&&this._getStroke()===y)return this;return this._clipping||U.beginPath(),P===void 0?U.rect(k,M,I,L):(R===void 0&&(R=P),V===void 0&&(V=R),G===void 0&&(G=V),X=(Y=Math.abs(I))/2,N=(A=Math.abs(L))/2,A<2*(P=Y<2*P?X:P)&&(P=N),A<2*(R=Y<2*R?X:R)&&(R=N),A<2*(V=Y<2*V?X:V)&&(V=N),A<2*(G=Y<2*G?X:G)&&(G=N),this._clipping||U.beginPath(),U.moveTo(k+P,M),U.arcTo(k+I,M,k+I,M+L,R),U.arcTo(k+I,M+L,k,M+L,V),U.arcTo(k,M+L,k,M,G),U.arcTo(k,M,k+I,M,P),U.closePath()),!this._clipping&&this._doFill&&U.fill(),!this._clipping&&this._doStroke&&U.stroke(),this}},{key:"triangle",value:function(V){var A=this.drawingContext,N=this._doFill,k=this._doStroke,M=V[0],I=V[1],L=V[2],P=V[3],R=V[4],V=V[5];if(N&&!k){if(this._getFill()===y)return this}else if(!N&&k&&this._getStroke()===y)return this;this._clipping||A.beginPath(),A.moveTo(M,I),A.lineTo(L,P),A.lineTo(R,V),A.closePath(),!this._clipping&&N&&A.fill(),!this._clipping&&k&&A.stroke()}},{key:"endShape",value:function(E,A,N,k,M,I,L){if(A.length!==0&&(this._doStroke||this._doFill)){var P,R,V,G=E===c.CLOSE,U=(G&&!I&&A.push(A[0]),A.length);if(N&&L===null){if(3<U){var Y=[],X=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(A[1][0],A[1][1]),R=1;R+2<U;R++)P=A[R],Y[0]=[P[0],P[1]],Y[1]=[P[0]+(X*A[R+1][0]-X*A[R-1][0])/6,P[1]+(X*A[R+1][1]-X*A[R-1][1])/6],Y[2]=[A[R+1][0]+(X*A[R][0]-X*A[R+2][0])/6,A[R+1][1]+(X*A[R][1]-X*A[R+2][1])/6],Y[3]=[A[R+1][0],A[R+1][1]],this.drawingContext.bezierCurveTo(Y[1][0],Y[1][1],Y[2][0],Y[2][1],Y[3][0],Y[3][1]);G&&this.drawingContext.lineTo(A[R+1][0],A[R+1][1]),this._doFillStrokeClose(G)}}else if(k&&L===null){for(this._clipping||this.drawingContext.beginPath(),R=0;R<U;R++)A[R].isVert?A[R].moveTo?this.drawingContext.moveTo(A[R][0],A[R][1]):this.drawingContext.lineTo(A[R][0],A[R][1]):this.drawingContext.bezierCurveTo(A[R][0],A[R][1],A[R][2],A[R][3],A[R][4],A[R][5]);this._doFillStrokeClose(G)}else if(M&&L===null){for(this._clipping||this.drawingContext.beginPath(),R=0;R<U;R++)A[R].isVert?A[R].moveTo?this.drawingContext.moveTo(A[R][0],A[R][1]):this.drawingContext.lineTo(A[R][0],A[R][1]):this.drawingContext.quadraticCurveTo(A[R][0],A[R][1],A[R][2],A[R][3]);this._doFillStrokeClose(G)}else if(L===c.POINTS)for(R=0;R<U;R++)P=A[R],this._doStroke&&this._pInst.stroke(P[6]),this._pInst.point(P[0],P[1]);else if(L===c.LINES)for(R=0;R+1<U;R+=2)P=A[R],this._doStroke&&this._pInst.stroke(A[R+1][6]),this._pInst.line(P[0],P[1],A[R+1][0],A[R+1][1]);else if(L===c.TRIANGLES)for(R=0;R+2<U;R+=3)P=A[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0],P[1]),this.drawingContext.lineTo(A[R+1][0],A[R+1][1]),this.drawingContext.lineTo(A[R+2][0],A[R+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(A[R+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(A[R+2][6]),this.drawingContext.stroke());else if(L===c.TRIANGLE_STRIP)for(R=0;R+1<U;R++)P=A[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(A[R+1][0],A[R+1][1]),this.drawingContext.lineTo(P[0],P[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[R+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(A[R+1][5]),R+2<U&&(this.drawingContext.lineTo(A[R+2][0],A[R+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[R+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(A[R+2][5])),this._doFillStrokeClose(G);else if(L===c.TRIANGLE_FAN){if(2<U){for(this._clipping||this.drawingContext.beginPath(),R=2;R<U;R++)P=A[R],this.drawingContext.moveTo(A[0][0],A[0][1]),this.drawingContext.lineTo(A[R-1][0],A[R-1][1]),this.drawingContext.lineTo(P[0],P[1]),this.drawingContext.lineTo(A[0][0],A[0][1]),R<U-1&&(this._doFill&&P[5]!==A[R+1][5]||this._doStroke&&P[6]!==A[R+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(P[5]),this.drawingContext.fill(),this._pInst.fill(A[R+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(P[6]),this.drawingContext.stroke(),this._pInst.stroke(A[R+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(G)}}else if(L===c.QUADS)for(R=0;R+3<U;R+=4){for(P=A[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0],P[1]),V=1;V<4;V++)this.drawingContext.lineTo(A[R+V][0],A[R+V][1]);this.drawingContext.lineTo(P[0],P[1]),!this._clipping&&this._doFill&&this._pInst.fill(A[R+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[R+3][6]),this._doFillStrokeClose(G)}else if(L===c.QUAD_STRIP){if(3<U)for(R=0;R+1<U;R+=2)P=A[R],this._clipping||this.drawingContext.beginPath(),R+3<U?(this.drawingContext.moveTo(A[R+2][0],A[R+2][1]),this.drawingContext.lineTo(P[0],P[1]),this.drawingContext.lineTo(A[R+1][0],A[R+1][1]),this.drawingContext.lineTo(A[R+3][0],A[R+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(A[R+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[R+3][6])):(this.drawingContext.moveTo(P[0],P[1]),this.drawingContext.lineTo(A[R+1][0],A[R+1][1])),this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(A[0][0],A[0][1]),R=1;R<U;R++)(P=A[R]).isVert&&(P.moveTo?(G&&this.drawingContext.closePath(),this.drawingContext.moveTo(P[0],P[1])):this.drawingContext.lineTo(P[0],P[1]));this._doFillStrokeClose(G)}I=M=k=N=!1,G&&A.pop()}return this}},{key:"strokeCap",value:function(E){return E!==c.ROUND&&E!==c.SQUARE&&E!==c.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==c.ROUND&&E!==c.BEVEL&&E!==c.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,A,N,k,M,I,L,P){return this._pInst.beginShape(),this._pInst.vertex(E,A),this._pInst.bezierVertex(N,k,M,I,L,P),this._pInst.endShape(),this}},{key:"curve",value:function(E,A,N,k,M,I,L,P){return this._pInst.beginShape(),this._pInst.curveVertex(E,A),this._pInst.curveVertex(N,k),this._pInst.curveVertex(M,I),this._pInst.curveVertex(L,P),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,A,N,k,M,I){this.drawingContext.transform(E,A,N,k,M,I)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,A){return this.drawingContext.scale(E,A),this}},{key:"translate",value:function(E,A){return E instanceof u.default.Vector&&(A=E.y,E=E.x),this.drawingContext.translate(E,A),this}},{key:"_renderText",value:function(E,A,N,k,M,I){if(!(k<I||M<=k))return E.push(),this._isOpenType()?this._textFont._renderPath(A,N,k,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(A,N,k),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(A,N,k))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E=this._pInst,A=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),A=this._textFont,this._isOpenType()&&(A=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),A||"sans-serif");return/\s/.exec(A)&&(A='"'.concat(A,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(A),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,E}},{key:"push",value:function(){return this.drawingContext.save(),p(g(S.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,p(g(S.prototype),"pop",this).call(this,E)}}])&&d(w.prototype,v),_&&d(w,_),S}(u.default.Renderer),x=(b.prototype.text=function(v,w,_,A,S){A!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(E=!0,this.drawingContext.textBaseline=c.TOP);var E,A=u.default.Renderer.prototype.text.apply(this,arguments);return E&&(this.drawingContext.textBaseline=c.BASELINE),A},u.default.Renderer2D=b,u.default.Renderer2D);s.default=x},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(o=o("./main"))&&o.__esModule?o:{default:o};a.default.prototype._promisePreloads=[];function l(){return{}}var u=!(a.default.prototype.registerPromisePreload=function(c){a.default.prototype._promisePreloads.push(c)});a.default.prototype._setupPromisePreloads=function(){var c=!0,f=!1,d=void 0;try{for(var p,m=this._promisePreloads[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value,g=this,y=h.method,b=h.addCallbacks,x=h.legacyPreloadSetup,v=h.target||this,w=v[y].bind(v);if(v===a.default.prototype){if(u)continue;g=null,w=v[y]}v[y]=this._wrapPromisePreload(g,w,b),x&&(v[x.method]=this._legacyPreloadGenerator(g,x,v[y]))}}catch(_){f=!0,d=_}finally{try{c||m.return==null||m.return()}finally{if(f)throw d}}u=!0},a.default.prototype._wrapPromisePreload=function(c,f,d){var p=function(){for(var m=this,h=(this._incrementPreload(),null),g=null,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(d)for(var v=b.length-1;0<=v&&!g&&typeof b[v]=="function";v--)g=h,h=b.pop();var w=Promise.resolve(f.apply(this,b));return h&&w.then(h),g&&w.catch(g),w.then(function(){return m._decrementPreload()}),w};return p=c?p.bind(c):p},a.default.prototype._legacyPreloadGenerator=function(c,m,d){var p=m.createBaseObject||l,m=function(){var h=this;this._incrementPreload();for(var g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];var x=p.apply(this,y);return d.apply(this,y).then(function(v){Object.assign(x,v),h._decrementPreload()}),x};return m=c?m.bind(c):m}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=o("./main"))&&p.__esModule?p:{default:p},u=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var h=c();if(h&&h.has(m))return h.get(m);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var x;Object.prototype.hasOwnProperty.call(m,g)&&((x=b?Object.getOwnPropertyDescriptor(m,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=m[g])}return y.default=m,h&&h.set(m,y),y}(o("./constants"));function c(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,c=function(){return m},m)}function f(m){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(m)}o("./p5.Graphics"),o("./p5.Renderer2D"),o("../webgl/p5.RendererGL");var d="defaultCanvas0",p=(l.default.prototype.createCanvas=function(m,h,g,y){var b,x,v;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(g=u.P2D,y=arguments[2]):b=g||u.P2D,y)(v=document.getElementById(d))&&v.parentNode.removeChild(v),v=y,this._defaultGraphicsCreated=!1;else{if(b===u.WEBGL)(v=document.getElementById(d))&&(v.parentNode.removeChild(v),x=this._renderer,this._elements=this._elements.filter(function(_){return _!==x})),(v=document.createElement("canvas")).id=d,v.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)v=this.canvas;else{v=y||document.createElement("canvas");for(var w=0;document.getElementById("defaultCanvas".concat(w));)w++;d="defaultCanvas".concat(w),v.id=d,v.classList.add("p5Canvas")}this._setupDone||(v.dataset.hidden=!0,v.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(g=document.createElement("main"),document.body.appendChild(g)),document.getElementsByTagName("main")[0])).appendChild(v)}return b===u.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(v,this,!0)),this._elements.push(this._renderer),m=(y=this._renderer._adjustDimensions(m,h)).adjustedWidth,h=y.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(v,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(m,h),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(m,h,g){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,b,x,v={};for(y in this.drawingContext){var w=this.drawingContext[y];f(w)!=="object"&&typeof w!="function"&&(v[y]=w)}for(x in this._renderer instanceof l.default.RendererGL&&(m=(b=this._renderer._adjustDimensions(m,h)).adjustedWidth,h=b.adjustedHeight),this.width=m,this.height=h,this._renderer.resize(m,h),v)try{this.drawingContext[x]=v[x]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},l.default.prototype.createGraphics=function(m,h){for(var g=arguments.length,y=new Array(2<g?g-2:0),b=2;b<g;b++)y[b-2]=arguments[b];return y[0]instanceof HTMLCanvasElement&&(y[1]=y[0],y[0]=u.P2D),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(m,h,y[0],this,y[1])},l.default.prototype.createFramebuffer=function(m){return new l.default.Framebuffer(this,m)},l.default.prototype.clearDepth=function(m){this._assert3d("clearDepth"),this._renderer.clearDepth(m)},l.default.prototype.blendMode=function(m){l.default._validateParameters("blendMode",arguments),m===u.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),m=u.BLEND),this._renderer.blendMode(m)},l.default);s.default=p},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(o("../main")),c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var g=d();if(g&&g.has(h))return g.get(h);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var v;Object.prototype.hasOwnProperty.call(h,y)&&((v=x?Object.getOwnPropertyDescriptor(h,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=h[y])}return b.default=h,g&&g.set(h,b),b}(o("../constants")),f=p(o("../helpers"));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}function p(h){return h&&h.__esModule?h:{default:h}}function m(h){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(h)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),u.default.prototype._normalizeArcAngles=function(h,g,y,b,x){var v;return h-=c.TWO_PI*Math.floor(h/c.TWO_PI),g-=c.TWO_PI*Math.floor(g/c.TWO_PI),v=Math.min(Math.abs(h-g),c.TWO_PI-Math.abs(h-g)),x&&(h=h<=c.HALF_PI?Math.atan(y/b*Math.tan(h)):h>c.HALF_PI&&h<=3*c.HALF_PI?Math.atan(y/b*Math.tan(h))+c.PI:Math.atan(y/b*Math.tan(h))+c.TWO_PI,g=g<=c.HALF_PI?Math.atan(y/b*Math.tan(g)):g>c.HALF_PI&&g<=3*c.HALF_PI?Math.atan(y/b*Math.tan(g))+c.PI:Math.atan(y/b*Math.tan(g))+c.TWO_PI),g<h&&(g+=c.TWO_PI),{start:h,stop:g,correspondToSamePoint:v<1e-5}},u.default.prototype.arc=function(h,g,y,b,x,v,w,_){return u.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==v&&(x=this._toRadians(x),v=this._toRadians(v),y=Math.abs(y),b=Math.abs(b),h=f.default.modeAdjust(h,g,y,b,this._renderer._ellipseMode),(g=this._normalizeArcAngles(x,v,h.w,h.h,!0)).correspondToSamePoint?this._renderer.ellipse([h.x,h.y,h.w,h.h,_]):(this._renderer.arc(h.x,h.y,h.w,h.h,g.start,g.stop,w,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[h.x,h.y,h.w,h.h,g.start,g.stop,w]))),this},u.default.prototype.ellipse=function(h,g,y,b,x){return u.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},u.default.prototype.circle=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];u.default._validateParameters("circle",g);var b=g.slice(0,2);return b.push(g[2],g[2]),this._renderEllipse.apply(this,m(b))},u.default.prototype._renderEllipse=function(h,g,y,b,x){return(this._renderer._doStroke||this._renderer._doFill)&&(y<0&&(y=Math.abs(y)),b===void 0?b=y:b<0&&(b=Math.abs(b)),h=f.default.modeAdjust(h,g,y,b,this._renderer._ellipseMode),this._renderer.ellipse([h.x,h.y,h.w,h.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[h.x,h.y,h.w,h.h])),this},u.default.prototype.line=function(){for(var h,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("line",y),this._renderer._doStroke&&(h=this._renderer).line.apply(h,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",y),this},u.default.prototype.point=function(){for(var h,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("point",y),this._renderer._doStroke&&(y.length===1&&y[0]instanceof u.default.Vector?this._renderer.point.call(this._renderer,y[0].x,y[0].y,y[0].z):((h=this._renderer).point.apply(h,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",y))),this},u.default.prototype.quad=function(){for(var h,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("quad",y),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&y.length<12?this._renderer.quad.call(this._renderer,y[0],y[1],0,y[2],y[3],0,y[4],y[5],0,y[6],y[7],0,y[8],y[9]):((h=this._renderer).quad.apply(h,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",y))),this},u.default.prototype.rect=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return u.default._validateParameters("rect",g),this._renderRect.apply(this,g)},u.default.prototype.square=function(h,g,y,b,x,v,w){return u.default._validateParameters("square",arguments),this._renderRect.call(this,h,g,y,y,b,x,v,w)},u.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var h=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),g=[h.x,h.y,h.w,h.h],y=4;y<arguments.length;y++)g[y]=arguments[y];this._renderer.rect(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[h.x,h.y,h.w,h.h])}return this},u.default.prototype.triangle=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return u.default._validateParameters("triangle",g),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",g),this},o=u.default,s.default=o},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var m=f();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype.ellipseMode=function(p){return u.default._validateParameters("ellipseMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._ellipseMode=p),this},u.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},u.default.prototype.rectMode=function(p){return u.default._validateParameters("rectMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._rectMode=p),this},u.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},u.default.prototype.strokeCap=function(p){return u.default._validateParameters("strokeCap",arguments),p!==c.ROUND&&p!==c.SQUARE&&p!==c.PROJECT||this._renderer.strokeCap(p),this},u.default.prototype.strokeJoin=function(p){return u.default._validateParameters("strokeJoin",arguments),p!==c.ROUND&&p!==c.BEVEL&&p!==c.MITER||this._renderer.strokeJoin(p),this},u.default.prototype.strokeWeight=function(p){return u.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(p),this};var d=u.default;s.default=d},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(l=o("../main"))&&l.__esModule?l:{default:l};o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(u=this._renderer).bezier.apply(u,f),this},a.default.prototype.bezierDetail=function(u){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=u,this},a.default.prototype.bezierPoint=function(u,c,f,d,p){a.default._validateParameters("bezierPoint",arguments);var m=1-p;return Math.pow(m,3)*u+3*Math.pow(m,2)*p*c+3*m*Math.pow(p,2)*f+Math.pow(p,3)*d},a.default.prototype.bezierTangent=function(u,c,f,d,p){a.default._validateParameters("bezierTangent",arguments);var m=1-p;return 3*d*Math.pow(p,2)-3*f*Math.pow(p,2)+6*f*m*p-6*c*m*p+3*c*Math.pow(m,2)-3*u*Math.pow(m,2)},a.default.prototype.curve=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("curve",f),this._renderer._doStroke&&(u=this._renderer).curve.apply(u,f),this},a.default.prototype.curveDetail=function(u){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=u<3?3:u,this},a.default.prototype.curveTightness=function(u){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=u,this},a.default.prototype.curvePoint=function(u,c,f,d,p){a.default._validateParameters("curvePoint",arguments);var m=this._renderer._curveTightness,h=p*p*p,g=p*p;return u*((m-1)/2*h+(1-m)*g+(m-1)/2*p)+c*((m+3)/2*h+(-5-m)/2*g+1)+f*((-3-m)/2*h+(m+2)*g+(1-m)/2*p)+d*((1-m)/2*h+(m-1)/2*g)},a.default.prototype.curveTangent=function(u,c,f,d,g){a.default._validateParameters("curveTangent",arguments);var m=this._renderer._curveTightness,h=g*g*3,g=2*g;return u*((m-1)/2*h+(1-m)*g+(m-1)/2)+c*((m+3)/2*h+(-5-m)/2*g)+f*((-3-m)/2*h+(m+2)*g+(1-m)/2)+d*((1-m)/2*h+(m-1)/2*g)};var l=a.default;s.default=l},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(o,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(v=o("../main"))&&v.__esModule?v:{default:v},c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=f();if(_&&_.has(w))return _.get(w);var C,S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in w){var A;Object.prototype.hasOwnProperty.call(w,C)&&((A=E?Object.getOwnPropertyDescriptor(w,C):null)&&(A.get||A.set)?Object.defineProperty(S,C,A):S[C]=w[C])}return S.default=w,_&&_.set(w,S),S}(o("../constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}var d=null,p=[],m=[],h=!1,g=!1,y=!1,b=!1,x=!0,v=(u.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(m=[],b=!0),this},u.default.prototype.beginShape=function(w){var _;return u.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(_=this._renderer).beginShape.apply(_,arguments):(d=w===c.POINTS||w===c.LINES||w===c.TRIANGLES||w===c.TRIANGLE_FAN||w===c.TRIANGLE_STRIP||w===c.QUADS||w===c.QUAD_STRIP?w:null,p=[],m=[]),this},u.default.prototype.bezierVertex=function(){for(var w,_=arguments.length,C=new Array(_),S=0;S<_;S++)C[S]=arguments[S];if(u.default._validateParameters("bezierVertex",C),this._renderer.isP3D)(w=this._renderer).bezierVertex.apply(w,C);else if(p.length===0)u.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var E=[],A=0;A<C.length;A++)E[A]=C[A];E.isVert=!1,(b?m:p).push(E)}return this},u.default.prototype.curveVertex=function(){for(var w,_=arguments.length,C=new Array(_),S=0;S<_;S++)C[S]=arguments[S];return u.default._validateParameters("curveVertex",C),this._renderer.isP3D?(w=this._renderer).curveVertex.apply(w,C):(g=!0,this.vertex(C[0],C[1])),this},u.default.prototype.endContour=function(){if(!this._renderer.isP3D){var w=m[0].slice();w.isVert=m[0].isVert,w.moveTo=!1,m.push(w),x&&(p.push(p[0]),x=!1);for(var _=0;_<m.length;_++)p.push(m[_])}return this},u.default.prototype.endShape=function(w){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(u.default._validateParameters("endShape",arguments),_<1&&(console.log("\u{1F338} p5.js says: You can not have less than one instance"),_=1),this._renderer.isP3D)this._renderer.endShape(w,g,h,y,b,d,_);else{if(_!==1&&console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode"),p.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;_=w===c.CLOSE,_&&!b&&p.push(p[0]),this._renderer.endShape(w,p,g,h,y,b,d),x=!(b=y=h=g=!1),_&&p.pop()}return this},u.default.prototype.quadraticVertex=function(){for(var w,_=arguments.length,C=new Array(_),S=0;S<_;S++)C[S]=arguments[S];if(u.default._validateParameters("quadraticVertex",C),this._renderer.isP3D)(w=this._renderer).quadraticVertex.apply(w,C);else{if(this._contourInited)return(w={}).x=C[0],w.y=C[1],w.x3=C[2],w.y3=C[3],w.type=c.QUADRATIC,this._contourVertices.push(w),this;if(0<p.length){y=!0;for(var E=[],A=0;A<C.length;A++)E[A]=C[A];E.isVert=!1,(b?m:p).push(E)}else u.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},u.default.prototype.vertex=function(w,_,C,S,E){var A;return this._renderer.isP3D?(A=this._renderer).vertex.apply(A,arguments):((A=[]).isVert=!0,A[0]=w,A[1]=_,A[2]=0,A[3]=0,A[4]=0,A[5]=this._renderer._getFill(),A[6]=this._renderer._getStroke(),C&&(A.moveTo=C),(b?(m.length===0&&(A.moveTo=!0),m):p).push(A)),this},u.default.prototype.normal=function(w,_,C){var S;return this._assert3d("normal"),u.default._validateParameters("normal",arguments),(S=this._renderer).normal.apply(S,arguments),this},u.default);s.default=v},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(o,i,s){},{}],292:[function(o,i,s){"use strict";o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.noLoop=function(){this._loop=!1},o.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},o.default.prototype.isLooping=function(){return this._loop},o.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},o.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},o.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var l=parseInt(a),u=((isNaN(l)||l<1)&&(l=1),this._isGlobal?window:this);if(typeof u.draw=="function"){u.setup===void 0&&u.scale(u._pixelDensity,u._pixelDensity);for(var c=0;c<l;c++){u.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),u._renderer.isP3D&&u._renderer._update(),u._setProperty("frameCount",u.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{u.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},o=o.default,s.default=o},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var u=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||u?(u=this._renderer).applyMatrix.apply(u,l(arguments.length<=0?void 0:arguments[0])):(u=this._renderer).applyMatrix.apply(u,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(u,c){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(u),c),this},a.default.prototype.rotateX=function(u){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(u)),this},a.default.prototype.rotateY=function(u){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(u)),this},a.default.prototype.rotateZ=function(u){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(u)),this},a.default.prototype.scale=function(u,c,f){var d;return a.default._validateParameters("scale",arguments),u instanceof a.default.Vector?(u=(d=u).x,c=d.y,f=d.z):Array.isArray(u)&&(u=(d=u)[0],c=d[1],f=d[2]||1),isNaN(c)?c=f=u:isNaN(f)&&(f=1),this._renderer.scale(u,c,f),this},a.default.prototype.shearX=function(u){return a.default._validateParameters("shearX",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,0,Math.tan(u),1,0,0),this},a.default.prototype.shearY=function(u){return a.default._validateParameters("shearY",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,Math.tan(u),0,1,0,0),this},a.default.prototype.translate=function(u,c,f){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(u,c,f):this._renderer.translate(u,c),this},o=a.default,s.default=o},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator");var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(f){return function(d){if(Array.isArray(d)){for(var p=0,m=new Array(d.length);p<d.length;p++)m[p]=d[p];return m}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default.prototype.storeItem=function(f,d){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),d===void 0&&console.log("You cannot store undefined variables using storeItem().");var p=c(d);switch(p){case"number":case"boolean":d=d.toString();break;case"object":d instanceof l.default.Color?p="p5.Color":d instanceof l.default.Vector&&(p="p5.Vector",d=[d.x,d.y,d.z]),d=JSON.stringify(d)}localStorage.setItem(f,d),f="".concat(f,"p5TypeID"),localStorage.setItem(f,p)},l.default.prototype.getItem=function(f){var d=localStorage.getItem(f),p=localStorage.getItem("".concat(f,"p5TypeID"));if(p===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(d!==null)switch(p){case"number":d=parseFloat(d);break;case"boolean":d=d==="true";break;case"object":d=JSON.parse(d);break;case"p5.Color":d=JSON.parse(d),d=this.color.apply(this,u(d.levels));break;case"p5.Vector":d=JSON.parse(d),d=this.createVector.apply(this,u(d))}return d},l.default.prototype.clearStorage=function(){var f=this;Object.keys(localStorage).forEach(function(d){d.endsWith("p5TypeID")&&f.removeItem(d.replace("p5TypeID",""))})},l.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.object.keys"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(o=o("../core/main"))&&o.__esModule?o:{default:o};function c(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&f(y,b)}function f(y,b){return(f=Object.setPrototypeOf||function(x,v){return x.__proto__=v,x})(y,b)}function d(y){return function(){var b,x=p(y),x=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=p(this).constructor,Reflect.construct(x,arguments,b)):x.apply(this,arguments),this);if(!b||l(b)!=="object"&&typeof b!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function p(y){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(y)}function m(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){for(var x=0;x<b.length;x++){var v=b[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}function g(y,b,x){b&&h(y.prototype,b),x&&h(y,x)}u.default.prototype.createStringDict=function(y,b){return u.default._validateParameters("createStringDict",arguments),new u.default.StringDict(y,b)},u.default.prototype.createNumberDict=function(y,b){return u.default._validateParameters("createNumberDict",arguments),new u.default.NumberDict(y,b)},u.default.TypedDict=function(){function y(b,x){return m(this,y),b instanceof Object?this.data=b:(this.data={},this.data[b]=x),this}return g(y,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,x){this._validate(x)?this.data[b]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var x in b)this.set(x,b[x])}},{key:"create",value:function(b,x){b instanceof Object&&x===void 0?this._addObj(b):b!==void 0?this.set(b,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var x,v="";for(x in this.data)v+="".concat(x,",").concat(this.data[x],`
`);var w=new Blob([v],{type:"text/csv"});u.default.prototype.downloadFile(w,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,x){u.default.prototype.saveJSON(this.data,b,x)}},{key:"_validate",value:function(b){return!0}}]),y}(),u.default.StringDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){m(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="string"}}]),b}(),u.default.NumberDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){m(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]+=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,v){this.add(x,-v)}},{key:"mult",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]*=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]/=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var v,w=this.data[Object.keys(this.data)[0]];for(v in this.data)this.data[v]*x<w*x&&(w=this.data[v]);return w}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var v=Object.keys(this.data)[0],w=1;w<Object.keys(this.data).length;w++)Object.keys(this.data)[w]*x<v*x&&(v=Object.keys(this.data)[w]);return v}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),o=u.default.TypedDict,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function c(v,w,_){w&&u(v.prototype,w),_&&u(v,_)}function f(v,w){return(f=Object.setPrototypeOf||function(_,C){return _.__proto__=C,_})(v,w)}function d(v){return function(){var w,_,C=m(v);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=m(this).constructor,Reflect.construct(C,arguments,w)):C.apply(this,arguments),C=this,!(_=w)||g(_)!=="object"&&typeof _!="function"?p(C):_}}function p(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function m(v){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}function y(v,w,_){return(w._userNode||document.body).appendChild(v),_=new(_?l.default.MediaElement:l.default.Element)(v,w),w._elements.push(_),_}function b(v,A,_,C){var S=document.createElement(A),E=(typeof(_=_||"")=="string"&&(_=[_]),!0),A=!1,N=void 0;try{for(var k,M=_[Symbol.iterator]();!(E=(k=M.next()).done);E=!0){var I=k.value,L=document.createElement("source");L.setAttribute("src",I),S.appendChild(L)}}catch(R){A=!0,N=R}finally{try{E||M.return==null||M.return()}finally{if(A)throw N}}typeof C=="function"&&S.addEventListener("canplaythrough",function R(){C(),S.removeEventListener("canplaythrough",R)});var P=y(S,v,!0);return P.loadedmetadata=!1,S.addEventListener("loadedmetadata",function(){P.width=S.videoWidth,P.height=S.videoHeight,P.elt.width===0&&(P.elt.width=S.videoWidth),P.elt.height===0&&(P.elt.height=S.videoHeight),P.presetPlaybackRate&&(P.elt.playbackRate=P.presetPlaybackRate,delete P.presetPlaybackRate),P.loadedmetadata=!0}),P}l.default.prototype.select=function(v,w){return l.default._validateParameters("select",arguments),w=this._getContainer(w).querySelector(v),w?this._wrapElement(w):null},l.default.prototype.selectAll=function(v,w){l.default._validateParameters("selectAll",arguments);var _=[],C=this._getContainer(w).querySelectorAll(v);if(C)for(var S=0;S<C.length;S++){var E=this._wrapElement(C[S]);_.push(E)}return _},l.default.prototype._getContainer=function(v){var w=document;return typeof v=="string"?w=document.querySelector(v)||document:v instanceof l.default.Element?w=v.elt:v instanceof HTMLElement&&(w=v),w},l.default.prototype._wrapElement=function(v){var w,_=Array.prototype.slice.call(v.children);return v.tagName==="INPUT"&&v.type==="checkbox"?((w=new l.default.Element(v,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},w):v.tagName==="VIDEO"||v.tagName==="AUDIO"?new l.default.MediaElement(v,this):v.tagName==="SELECT"?this.createSelect(new l.default.Element(v,this)):0<_.length&&_.every(function(C){return C.tagName==="INPUT"||C.tagName==="LABEL"})?this.createRadio(new l.default.Element(v,this)):new l.default.Element(v,this)},l.default.prototype.removeElements=function(v){l.default._validateParameters("removeElements",arguments),this._elements.filter(function(w){return!(w.elt instanceof HTMLCanvasElement)}).map(function(w){return w.remove()})},l.default.Element.prototype.changed=function(v){return l.default.Element._adjustListener("change",v,this),this},l.default.Element.prototype.input=function(v){return l.default.Element._adjustListener("input",v,this),this},l.default.prototype.createDiv=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("div");return w.innerHTML=v,y(w,this)},l.default.prototype.createP=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("p");return w.innerHTML=v,y(w,this)},l.default.prototype.createSpan=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("span");return w.innerHTML=v,y(w,this)},l.default.prototype.createImg=function(){l.default._validateParameters("createImg",arguments);var v,w=document.createElement("img"),_=arguments;return 1<_.length&&typeof _[1]=="string"&&(w.alt=_[1]),2<_.length&&typeof _[2]=="string"&&(w.crossOrigin=_[2]),w.src=_[0],v=y(w,this),w.addEventListener("load",function(){v.width=w.offsetWidth||w.width,v.height=w.offsetHeight||w.height;var C=_[_.length-1];typeof C=="function"&&C(v)}),v},l.default.prototype.createA=function(v,w,_){l.default._validateParameters("createA",arguments);var C=document.createElement("a");return C.href=v,C.innerHTML=w,_&&(C.target=_),y(C,this)},l.default.prototype.createSlider=function(v,w,_,C){l.default._validateParameters("createSlider",arguments);var S=document.createElement("input");return S.type="range",S.min=v,S.max=w,C===0?S.step=1e-18:C&&(S.step=C),typeof _=="number"&&(S.value=_),y(S,this)},l.default.prototype.createButton=function(v,w){l.default._validateParameters("createButton",arguments);var _=document.createElement("button");return _.innerHTML=v,w&&(_.value=w),y(_,this)},l.default.prototype.createCheckbox=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];l.default._validateParameters("createCheckbox",w);var C=document.createElement("div"),S=document.createElement("input"),E=(S.type="checkbox",document.createElement("label")),A=(E.appendChild(S),C.appendChild(E),y(C,this));return A.checked=function(){var N=A.elt.firstElementChild.getElementsByTagName("input")[0];if(N){if(arguments.length===0)return N.checked;N.checked=!(arguments.length<=0||!arguments[0])}return A},this.value=function(N){return A.value=N,this},w[0]&&(A.value(w[0]),(C=document.createElement("span")).innerHTML=w[0],E.appendChild(C)),w[1]&&(S.checked=!0),A},l.default.prototype.createSelect=function(){for(var v,w=arguments.length,_=new Array(w),C=0;C<w;C++)_[C]=arguments[C];l.default._validateParameters("createSelect",_);var S,E=_[0];return E instanceof l.default.Element&&E.elt instanceof HTMLSelectElement?this.elt=(v=E).elt:E instanceof HTMLSelectElement?(v=y(E,this),this.elt=E):(S=document.createElement("select"),E&&typeof E=="boolean"&&S.setAttribute("multiple","true"),v=y(S,this),this.elt=S),v.option=function(A,N){var k;if(A!==void 0){for(var M,I=0;I<this.elt.length;I+=1)if(this.elt[I].textContent===A){k=I;break}k!==void 0?N===!1?this.elt.remove(k):this.elt[k].value=N:((M=document.createElement("option")).textContent=A,M.value=N===void 0?A:N,this.elt.appendChild(M),this._pInst._elements.push(M))}},v.selected=function(A){if(A!==void 0){for(var N=0;N<this.elt.length;N+=1)this.elt[N].value.toString()===A.toString()&&(this.elt.selectedIndex=N);return this}if(this.elt.getAttribute("multiple")){var k=[],M=!0,I=!1,L=void 0;try{for(var P,R=this.elt.selectedOptions[Symbol.iterator]();!(M=(P=R.next()).done);M=!0){var V=P.value;k.push(V.value)}}catch(G){I=!0,L=G}finally{try{M||R.return==null||R.return()}finally{if(I)throw L}}return k}return this.elt.value},v.disable=function(A){if(typeof A=="string")for(var N=0;N<this.elt.length;N++)this.elt[N].value.toString()===A&&(this.elt[N].disabled=!0,this.elt[N].selected=!1);else this.elt.disabled=!0;return this},v.enable=function(A){if(typeof A=="string")for(var N=0;N<this.elt.length;N++)this.elt[N].value.toString()===A&&(this.elt[N].disabled=!1,this.elt[N].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},v},l.default.prototype.createRadio=function(){function v(A){return A instanceof HTMLInputElement&&A.type==="radio"}function w(A){return A instanceof HTMLLabelElement}var _,C,S,E=arguments.length<=0?void 0:arguments[0];return E instanceof l.default.Element&&(E.elt instanceof HTMLDivElement||E.elt instanceof HTMLSpanElement)?(_=E,this.elt=E.elt):E instanceof HTMLDivElement||E instanceof HTMLSpanElement?(_=y(E,this),C=this.elt=E,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(S=arguments.length<=1?void 0:arguments[1])):(typeof E=="string"&&(S=E),C=document.createElement("div"),_=y(C,this),this.elt=C),_._name=S||"radioOption",_._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(A){return v(A)||w(A)&&v(A.firstElementChild)}).map(function(A){return v(A)?A:A.firstElementChild})},_.option=function(A,N){var k,M,I,L=!0,P=!1,R=void 0;try{for(var V,G=_._getOptionsArray()[Symbol.iterator]();!(L=(V=G.next()).done);L=!0){var U=V.value;if(U.value===A){k=U;break}}}catch(Y){P=!0,R=Y}finally{try{L||G.return==null||G.return()}finally{if(P)throw R}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",A)),k.setAttribute("name",_._name),w(k.parentElement)?M=k.parentElement:(M=document.createElement("label")).insertAdjacentElement("afterbegin",k),M.lastElementChild instanceof HTMLSpanElement?I=M.lastElementChild:(I=document.createElement("span"),k.insertAdjacentElement("afterend",I)),I.innerHTML=N===void 0?A:N,this.elt.appendChild(M),k},_.remove=function(A){var N=!0,k=!1,M=void 0;try{for(var I,L=_._getOptionsArray()[Symbol.iterator]();!(N=(I=L.next()).done);N=!0){var P=I.value;if(P.value===A)return void(w(P.parentElement)?P.parentElement:P).remove()}}catch(R){k=!0,M=R}finally{try{N||L.return==null||L.return()}finally{if(k)throw M}}},_.value=function(){var A="",N=!0,k=!1,M=void 0;try{for(var I,L=_._getOptionsArray()[Symbol.iterator]();!(N=(I=L.next()).done);N=!0){var P=I.value;if(P.checked){A=P.value;break}}}catch(R){k=!0,M=R}finally{try{N||L.return==null||L.return()}finally{if(k)throw M}}return A},_.selected=function(A){var N=null;if(A===void 0){var k=!0,M=!1,I=void 0;try{for(var L,P=_._getOptionsArray()[Symbol.iterator]();!(k=(L=P.next()).done);k=!0){var R=L.value;if(R.checked){N=R;break}}}catch(X){M=!0,I=X}finally{try{k||P.return==null||P.return()}finally{if(M)throw I}}}else{_._getOptionsArray().forEach(function($){$.checked=!1,$.removeAttribute("checked")});var V=!0,M=!1,I=void 0;try{for(var G,U=_._getOptionsArray()[Symbol.iterator]();!(V=(G=U.next()).done);V=!0){var Y=G.value;Y.value===A&&(Y.setAttribute("checked",!0),Y.checked=!0,N=Y)}}catch($){M=!0,I=$}finally{try{V||U.return==null||U.return()}finally{if(M)throw I}}}return N},_.disable=function(){var A=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],N=!0,k=!1,M=void 0;try{for(var I,L=_._getOptionsArray()[Symbol.iterator]();!(N=(I=L.next()).done);N=!0)I.value.setAttribute("disabled",A)}catch(P){k=!0,M=P}finally{try{N||L.return==null||L.return()}finally{if(k)throw M}}},_},l.default.prototype.createColorPicker=function(v){l.default._validateParameters("createColorPicker",arguments);var w=document.createElement("input");return w.type="color",v?v instanceof l.default.Color?w.value=v.toString("#rrggbb"):(l.default.prototype._colorMode="rgb",l.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},w.value=l.default.prototype.color(v).toString("#rrggbb")):w.value="#000000",(w=y(w,this)).color=function(){return v&&(v.mode&&(l.default.prototype._colorMode=v.mode),v.maxes&&(l.default.prototype._colorMaxes=v.maxes)),l.default.prototype.color(this.elt.value)},w},l.default.prototype.createInput=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",_=(l.default._validateParameters("createInput",arguments),document.createElement("input"));return _.setAttribute("value",v),_.setAttribute("type",w),y(_,this)},l.default.prototype.createFileInput=function(v){var w,_=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(l.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(w=document.createElement("input")).setAttribute("type","file"),_&&w.setAttribute("multiple",!0),w.addEventListener("change",function(C){var S=!0,E=!1,A=void 0;try{for(var N,k=C.target.files[Symbol.iterator]();!(S=(N=k.next()).done);S=!0){var M=N.value;l.default.File._load(M,v)}}catch(I){E=!0,A=I}finally{try{S||k.return==null||k.return()}finally{if(E)throw A}}},!1),y(w,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},l.default.prototype.createVideo=function(v,w){return l.default._validateParameters("createVideo",arguments),b(this,"video",v,w)},l.default.prototype.createAudio=function(v,w){return l.default._validateParameters("createAudio",arguments),b(this,"audio",v,w)},l.default.prototype.VIDEO="video",l.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(v){var w=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return w?new Promise(function(_,C){w.call(navigator,v,_,C)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),l.default.prototype.createCapture=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];if(l.default._validateParameters("createCapture",w),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var C,S=!0,E=!0,A=!1,N=0,k=w;N<k.length;N++){var M=k[N];M===l.default.prototype.VIDEO?E=!1:M===l.default.prototype.AUDIO?S=!1:g(M)==="object"?(M.flipped!==void 0&&(A=M.flipped,delete M.flipped),I=Object.assign({},I,M)):typeof M=="function"&&(C=M)}var I=Object.assign({},{video:S,audio:E},I),L=document.createElement("video"),P=(L.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(I).then(function(R){try{"srcObject"in L?L.srcObject=R:L.src=window.URL.createObjectURL(R)}catch{L.src=R}}).catch(function(R){R.name==="NotFoundError"&&l.default._friendlyError("No webcam found on this device","createCapture"),R.name==="NotAllowedError"&&l.default._friendlyError("Access to the camera was denied","createCapture"),console.error(R)}),y(L,this,!0));return P.loadedmetadata=!1,L.addEventListener("loadedmetadata",function(){L.play(),L.width?(P.width=L.width,P.height=L.height,A&&(P.elt.style.transform="scaleX(-1)")):(P.width=P.elt.width=L.videoWidth,P.height=P.elt.height=L.videoHeight),P.loadedmetadata=!0,C&&C(L.srcObject)}),P.flipped=A,P},l.default.prototype.createElement=function(v,w){return l.default._validateParameters("createElement",arguments),v=document.createElement(v),w!==void 0&&(v.innerHTML=w),y(v,this)},l.default.Element.prototype.addClass=function(v){return this.elt.className?this.hasClass(v)||(this.elt.className=this.elt.className+" "+v):this.elt.className=v,this},l.default.Element.prototype.removeClass=function(v){return this.elt.classList.remove(v),this},l.default.Element.prototype.hasClass=function(v){return this.elt.classList.contains(v)},l.default.Element.prototype.toggleClass=function(v){return this.elt.classList.contains(v)?this.elt.classList.remove(v):this.elt.classList.add(v),this},l.default.Element.prototype.child=function(v){return v===void 0?this.elt.childNodes:(typeof v=="string"?(v[0]==="#"&&(v=v.substring(1)),v=document.getElementById(v)):v instanceof l.default.Element&&(v=v.elt),v instanceof HTMLElement&&this.elt.appendChild(v),this)},l.default.Element.prototype.center=function(v){var w=this.elt.style.display,_=this.elt.style.display==="none",C=this.parent().style.display==="none",S={x:this.elt.offsetLeft,y:this.elt.offsetTop},E=(_&&this.show(),C&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),A=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return v==="both"||v===void 0?this.position(E/2+this.parent().offsetLeft,A/2+this.parent().offsetTop):v==="horizontal"?this.position(E/2+this.parent().offsetLeft,S.y):v==="vertical"&&this.position(S.x,A/2+this.parent().offsetTop),this.style("display",w),_&&this.hide(),C&&this.parent().hide(),this},l.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},l.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},l.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=v,this},l.default.Element.prototype._rotate=function(){var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=v,this},l.default.Element.prototype.style=function(v,w){if((w=w instanceof l.default.Color?"rgba("+w.levels[0]+","+w.levels[1]+","+w.levels[2]+","+w.levels[3]/255+")":w)===void 0){if(v.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(v);for(var _=v.split(";"),C=0;C<_.length;C++){var S=_[C].split(":");S[0]&&S[1]&&(this.elt.style[S[0].trim()]=S[1].trim())}}else this.elt.style[v]=w,v!=="width"&&v!=="height"&&v!=="left"&&v!=="top"||(w=window.getComputedStyle(this.elt).getPropertyValue(v).replace(/[^\d.]/g,""),this[v]=Math.round(parseFloat(w,10)));return this},l.default.Element.prototype.attribute=function(v,w){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return w===void 0?this.elt.getAttribute(v):(this.elt.setAttribute(v,w),this);if(w===void 0)return this.elt.firstChild.getAttribute(v);for(var _=0;_<this.elt.childNodes.length;_++)this.elt.childNodes[_].setAttribute(v,w)},l.default.Element.prototype.removeAttribute=function(v){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var w=0;w<this.elt.childNodes.length;w++)this.elt.childNodes[w].removeAttribute(v);return this.elt.removeAttribute(v),this},l.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},l.default.Element.prototype.show=function(){return this.elt.style.display="block",this},l.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},l.default.Element.prototype.size=function(v,w){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var _=v,C=w,S=l.default.prototype.AUTO;if(_!==S||C!==S){if(_===S?_=w*this.width/this.height:C===S&&(C=v*this.height/this.width),this.elt instanceof HTMLCanvasElement){var E,A={},N=this.elt.getContext("2d");for(E in N)A[E]=N[E];for(E in this.elt.setAttribute("width",_*this._pInst._pixelDensity),this.elt.setAttribute("height",C*this._pInst._pixelDensity),this.elt.style.width=_+"px",this.elt.style.height=C+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),A)this.elt.getContext("2d")[E]=A[E]}else this.elt.style.width=_+"px",this.elt.style.height=C+"px",this.elt.width=_,this.elt.height=C;this.width=_,this.height=C,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",_),this._pInst._setProperty("height",C))}return this},l.default.Element.prototype.remove=function(){this instanceof l.default.MediaElement&&(this.stop(),(w=this.elt.srcObject)!==null&&w.getTracks().forEach(function(_){_.stop()}));var v,w=this._pInst._elements.indexOf(this);for(v in w!==-1&&this._pInst._elements.splice(w,1),this._events)this.elt.removeEventListener(v,this._events[v]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},l.default.Element.prototype.drop=function(v,w){var _;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",_=function(C){C.preventDefault()}),this.elt.addEventListener("dragleave",_)),l.default.Element._attachListener("drop",function(S){S.preventDefault(),typeof w=="function"&&w.call(this,S);var S=S.dataTransfer.files,E=!0,A=!1,N=void 0;try{for(var k,M=S[Symbol.iterator]();!(E=(k=M.next()).done);E=!0){var I=k.value;l.default.File._load(I,v)}}catch(L){A=!0,N=L}finally{try{E||M.return==null||M.return()}finally{if(A)throw N}}},this)):console.log("The File APIs are not fully supported in this browser."),this},l.default.Element.prototype.draggable=function(v){var w,_="ontouchstart"in window,C=0,S=0,E=0,A=0,N=_?"touchend":"mouseup",k=_?"touchmove":"mousemove";function M(L){var P;L=L||window.event,A=_?(P=L.changedTouches,C=E-parseInt(P[0].clientX),S=A-parseInt(P[0].clientY),E=parseInt(P[0].clientX),parseInt(P[0].clientY)):(C=E-parseInt(L.clientX),S=A-parseInt(L.clientY),E=parseInt(L.clientX),parseInt(L.clientY)),v.style.left=v.offsetLeft-C+"px",v.style.top=v.offsetTop-S+"px"}function I(){document.removeEventListener(N,I,!1),document.removeEventListener(k,M,!1)}return v===void 0?w=v=this.elt:v!==this.elt&&v.elt!==this.elt&&(v=v.elt,w=this.elt),w.addEventListener(_?"touchstart":"mousedown",function(L){{var P;L=L||window.event,A=_?(P=L.changedTouches,E=parseInt(P[0].clientX),parseInt(P[0].clientY)):(E=parseInt(L.clientX),parseInt(L.clientY))}return document.addEventListener(N,I,!1),document.addEventListener(k,M,!1),!1},!1),w.style.cursor="move",this};function x(v,w,_,C){h(this,x),this.callback=v,this.time=w,this.id=_,this.val=C}o=function(v){var w=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&f(w,v);var _=d(C);function C(S,E){h(this,C);var A=p(E=_.call(this,S,E));return E.elt.crossOrigin="anonymous",E._prevTime=0,E._cueIDCounter=0,E._cues=[],E.pixels=[],E._pixelsState=p(E),E._pixelDensity=1,E._modified=!1,E._frameOnCanvas=-1,Object.defineProperty(A,"src",{get:function(){var N=A.elt.children[0].src,k=A.elt.src===window.location.href?"":A.elt.src;return N===window.location.href?k:N},set:function(N){for(var k=0;k<A.elt.children.length;k++)A.elt.removeChild(A.elt.children[k]);var M=document.createElement("source");M.src=N,S.appendChild(M),A.elt.src=N,A.modified=!0}}),A._onended=function(){},A.elt.onended=function(){A._onended(A)},E}return c(C,[{key:"play",value:function(){var S;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(S=this.elt.play())&&S.catch&&S.catch(function(E){E.name==="NotAllowedError"?console.error(E):console.error("Media play method encountered an unexpected error",E)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var S=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(S)},{passive:!0,once:!0})}},{key:"autoplay",value:function(S){var E=this,A=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",S),S&&!A&&(S=function(){return E._setupAutoplayFailDetection()},this.elt.readyState===4?S():this.elt.addEventListener("canplay",S,{passive:!0,once:!0})),this}},{key:"volume",value:function(S){if(S===void 0)return this.elt.volume;this.elt.volume=S}},{key:"speed",value:function(S){if(S===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=S:this.presetPlaybackRate=S}},{key:"time",value:function(S){return S===void 0?this.elt.currentTime:(this.elt.currentTime=S,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var S=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&S&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return l.default.Renderer2D.prototype.loadPixels.apply(this,E)}},{key:"updatePixels",value:function(S,E,A,N){return this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.updatePixels.call(this,S,E,A,N)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return l.default.Renderer2D.prototype.get.apply(this,E)}},{key:"_getPixel",value:function(){this.loadPixels();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return l.default.Renderer2D.prototype._getPixel.apply(this,E)}},{key:"set",value:function(S,E,A){this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.set.call(this,S,E,A),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];l.default.prototype.copy.apply(this,E)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];l.default.Image.prototype.mask.apply(this,E)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(S){this._modified=S}},{key:"onended",value:function(S){return this._onended=S,this}},{key:"connect",value:function(S){var E,A;if(typeof l.default.prototype.getAudioContext=="function")E=l.default.prototype.getAudioContext(),A=l.default.soundOut.input;else try{A=(E=S.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=E.createMediaElementSource(this.elt),this.audioSourceNode.connect(A)),S?S.input?this.audioSourceNode.connect(S.input):this.audioSourceNode.connect(S):this.audioSourceNode.connect(A)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(S,k,A){var N=this._cueIDCounter++,k=new x(k,S,N,A);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),N}},{key:"removeCue",value:function(S){for(var E=0;E<this._cues.length;E++)this._cues[E].id===S&&(console.log(S),this._cues.splice(E,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var S=this.time(),E=0;E<this._cues.length;E++){var A=this._cues[E].time,N=this._cues[E].val;this._prevTime<A&&A<=S&&this._cues[E].callback(N)}this._prevTime=S}}]),C}(l.default.Element),l.default.MediaElement=o,o=function(){function v(w,_){h(this,v),this.file=w,this._pInst=_,_=w.type.split("/"),this.type=_[0],this.subtype=_[1],this.name=w.name,this.size=w.size,this.data=void 0}return c(v,null,[{key:"_createLoader",value:function(w,_){var C=new FileReader;return C.onload=function(S){var E,A=new l.default.File(w);A.file.type==="application/json"?A.data=JSON.parse(S.target.result):A.file.type==="text/xml"?(E=new DOMParser().parseFromString(S.target.result,"text/xml"),A.data=new l.default.XML(E.documentElement)):A.data=S.target.result,_(A)},C}},{key:"_load",value:function(w,_){var C;/^text\//.test(w.type)||w.type==="application/json"?l.default.File._createLoader(w,_).readAsText(w):/^(video|audio)\//.test(w.type)?((C=new l.default.File(w)).data=URL.createObjectURL(w),_(C)):l.default.File._createLoader(w,_).readAsDataURL(w)}}]),v}(),l.default.File=o,o=l.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(g,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(g=g("../core/main"))&&g.__esModule?g:{default:g};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var l=a.default.prototype.pRotationZ=0,u=0,c=0,f="clockwise",d="clockwise",p="clockwise",m=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),h=30,g=(a.default.prototype.setMoveThreshold=function(y){a.default._validateParameters("setMoveThreshold",arguments),m=y},a.default.prototype.setShakeThreshold=function(y){a.default._validateParameters("setShakeThreshold",arguments),h=y},a.default.prototype._ondeviceorientation=function(y){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(y.beta)),this._setProperty("rotationY",this._fromDegrees(y.gamma)),this._setProperty("rotationZ",this._fromDegrees(y.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(y){this._updatePAccelerations(),this._setProperty("accelerationX",2*y.acceleration.x),this._setProperty("accelerationY",2*y.acceleration.y),this._setProperty("accelerationZ",2*y.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var y,b,x,v,w,_=this._isGlobal?window:this;typeof _.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&_.deviceMoved(),typeof _.deviceTurned=="function"&&(b=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,y=l+180,0<b-x&&b-x<270||b-x<-270?f="clockwise":(b-x<0||270<b-x)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(y=b),90<Math.abs(b-y)&&Math.abs(b-y)<270&&(y=b,this._setProperty("turnAxis","X"),_.deviceTurned()),this.pRotateDirectionX=f,l=y-180,x=this._toDegrees(this.rotationY)+180,b=this._toDegrees(this.pRotationY)+180,y=u+180,0<x-b&&x-b<270||x-b<-270?d="clockwise":(x-b<0||270<x-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(y=x),90<Math.abs(x-y)&&Math.abs(x-y)<270&&(y=x,this._setProperty("turnAxis","Y"),_.deviceTurned()),this.pRotateDirectionY=d,u=y-180,0<(b=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&b-x<270||b-x<-270?p="clockwise":(b-x<0||270<b-x)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(c=b),90<Math.abs(b-c)&&Math.abs(b-c)<270&&(c=b,this._setProperty("turnAxis","Z"),_.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),typeof _.deviceShaken=="function"&&(this.pAccelerationX!==null&&(v=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),h<v+w&&_.deviceShaken())},a.default);s.default=g},{"../core/main":280}],298:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(l){var u;this._downKeys[l.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",l.which),this._downKeys[l.which]=!0,this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyPressed!="function"||l.charCode||u.keyPressed(l)===!1&&l.preventDefault())},a.default.prototype._onkeyup=function(l){this._downKeys[l.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),this._setProperty("keyCode",l.which);var u=this._isGlobal?window:this;typeof u.keyReleased=="function"&&u.keyReleased(l)===!1&&l.preventDefault()},a.default.prototype._onkeypress=function(l){var u;l.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",l.which),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyTyped=="function"&&u.keyTyped(l)===!1&&l.preventDefault())},a.default.prototype._onblur=function(l){this._downKeys={}},a.default.prototype.keyIsDown=function(l){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[l]||!1},a.default.prototype._areDownKeys=function(){for(var l in this._downKeys)if(this._downKeys.hasOwnProperty(l)&&this._downKeys[l]===!0)return!0;return!1},o=a.default,s.default=o},{"../core/main":280}],299:[function(o,i,s){"use strict";function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function l(d){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(u=o("../core/main"))&&u.__esModule?u:{default:u},c=function(d){if(d&&d.__esModule)return d;if(d===null||l(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var m,h={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var y;Object.prototype.hasOwnProperty.call(d,m)&&((y=g?Object.getOwnPropertyDescriptor(d,m):null)&&(y.get||y.set)?Object.defineProperty(h,m,y):h[m]=d[m])}return h.default=d,p&&p.set(d,h),h}(o("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}u.default.prototype.movedX=0,u.default.prototype.movedY=0,u.default.prototype._hasMouseInteracted=!1,u.default.prototype.mouseX=0,u.default.prototype.mouseY=0,u.default.prototype.pmouseX=0,u.default.prototype.pmouseY=0,u.default.prototype.winMouseX=0,u.default.prototype.winMouseY=0,u.default.prototype.pwinMouseX=0,u.default.prototype.pwinMouseY=0,u.default.prototype.mouseButton=0,u.default.prototype.mouseIsPressed=!1,u.default.prototype._updateNextMouseCoords=function(d){var p,m,h,g,y;this._curElement!==null&&(!d.touches||0<d.touches.length)&&(p=this._curElement.elt,m=this.width,h=this.height,(g=d)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),y=p.getBoundingClientRect(),m=p.scrollWidth/m||1,p=p.scrollHeight/h||1,h={x:(g.clientX-y.left)/m,y:(g.clientY-y.top)/p,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",d.movementX),this._setProperty("movedY",d.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},u.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},u.default.prototype._setMouseButton=function(d){d.button===1?this._setProperty("mouseButton",c.CENTER):d.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},u.default.prototype._onmousemove=function(d){var p=this._isGlobal?window:this;this._updateNextMouseCoords(d),this.mouseIsPressed?typeof p.mouseDragged=="function"?p.mouseDragged(d)===!1&&d.preventDefault():typeof p.touchMoved=="function"&&p.touchMoved(d)===!1&&d.preventDefault():typeof p.mouseMoved=="function"&&p.mouseMoved(d)===!1&&d.preventDefault()},u.default.prototype._onmousedown=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(d),this._updateNextMouseCoords(d),this.touchstart||(typeof p.mousePressed=="function"?p.mousePressed(d)===!1&&d.preventDefault():typeof p.touchStarted=="function"&&p.touchStarted(d)===!1&&d.preventDefault(),this.touchstart=!1)},u.default.prototype._onmouseup=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof p.mouseReleased=="function"?p.mouseReleased(d)===!1&&d.preventDefault():typeof p.touchEnded=="function"&&p.touchEnded(d)===!1&&d.preventDefault(),this.touchend=!1)},u.default.prototype._ondragend=u.default.prototype._onmouseup,u.default.prototype._ondragover=u.default.prototype._onmousemove,u.default.prototype._onclick=function(d){var p=this._isGlobal?window:this;typeof p.mouseClicked=="function"&&p.mouseClicked(d)===!1&&d.preventDefault()},u.default.prototype._ondblclick=function(d){var p=this._isGlobal?window:this;typeof p.doubleClicked=="function"&&p.doubleClicked(d)===!1&&d.preventDefault()},u.default.prototype._mouseWheelDeltaY=0,u.default.prototype._pmouseWheelDeltaY=0,u.default.prototype._onwheel=function(d){var p=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",d.deltaY),typeof p.mouseWheel=="function"&&(d.delta=d.deltaY,p.mouseWheel(d)===!1&&d.preventDefault())},u.default.prototype.requestPointerLock=function(){var d=this._curElement.elt;return d.requestPointerLock=d.requestPointerLock||d.mozRequestPointerLock,d.requestPointerLock?(d.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},u.default.prototype.exitPointerLock=function(){document.exitPointerLock()},o=u.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.touches=[],o.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var l=[],u=0;u<a.touches.length;u++)l[u]=function(y,g,b,p){var m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,h=y.getBoundingClientRect(),g=y.scrollWidth/g||1,y=y.scrollHeight/b||1,b=p.touches[m]||p.changedTouches[m];return{x:(b.clientX-h.left)/g,y:(b.clientY-h.top)/y,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,a,u);this._setProperty("touches",l)}},o.default.prototype._ontouchstart=function(a){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof l.touchStarted=="function"&&(l.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},o.default.prototype._ontouchmove=function(a){var l=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof l.touchMoved=="function"?l.touchMoved(a)===!1&&a.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(a)===!1&&a.preventDefault()},o.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"&&(l.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},o=o.default,s.default=o},{"../core/main":280}],301:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l,u,c,f={_toPixels:function(d){var p,m;return d instanceof ImageData?d.data:d.getContext("2d")?d.getContext("2d").getImageData(0,0,d.width,d.height).data:d.getContext("webgl")?(m=(p=d.getContext("webgl")).drawingBufferWidth*p.drawingBufferHeight*4,m=new Uint8Array(m),p.readPixels(0,0,d.width,d.height,p.RGBA,p.UNSIGNED_BYTE,m),m):void 0},_getARGB:function(d,p){return p*=4,d[3+p]<<24&4278190080|d[p]<<16&16711680|d[1+p]<<8&65280|255&d[2+p]},_setPixels:function(d,p){for(var m,h=0,g=d.length;h<g;h++)d[0+(m=4*h)]=(16711680&p[h])>>>16,d[1+m]=(65280&p[h])>>>8,d[2+m]=255&p[h],d[3+m]=(4278190080&p[h])>>>24},_toImageData:function(d){return d instanceof ImageData?d:d.getContext("2d").getImageData(0,0,d.width,d.height)},_createImageData:function(d,p){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(d,p)},apply:function(d,y,m){var h=d.getContext("2d"),g=h.getImageData(0,0,d.width,d.height),y=y(g,m);y instanceof ImageData?h.putImageData(y,0,0,0,0,d.width,d.height):h.putImageData(g,0,0,0,0,d.width,d.height)},threshold:function(d){for(var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,m=f._toPixels(d),h=Math.floor(255*p),g=0;g<m.length;g+=4){var y=void 0,y=h<=.2126*m[g]+.7152*m[g+1]+.0722*m[g+2]?255:0;m[g]=m[g+1]=m[g+2]=y}},gray:function(d){for(var p=f._toPixels(d),m=0;m<p.length;m+=4){var h=p[m],g=p[m+1],y=p[m+2];p[m]=p[m+1]=p[m+2]=.2126*h+.7152*g+.0722*y}},opaque:function(d){for(var p=f._toPixels(d),m=0;m<p.length;m+=4)p[m+3]=255;return p},invert:function(d){for(var p=f._toPixels(d),m=0;m<p.length;m+=4)p[m]=255-p[m],p[m+1]=255-p[m+1],p[m+2]=255-p[m+2]},posterize:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,m=f._toPixels(d);if(p<2||255<p)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=p-1,g=0;g<m.length;g+=4){var y=m[g],b=m[g+1],x=m[g+2];m[g]=255*(y*p>>8)/h,m[g+1]=255*(b*p>>8)/h,m[g+2]=255*(x*p>>8)/h}},dilate:function(d){for(var p,m,h,g,y,b,x,v,w,_=f._toPixels(d),C=0,S=_.length?_.length/4:0,E=new Int32Array(S);C<S;)for(m=(p=C)+d.width;C<m;)g=h=f._getARGB(_,C),(w=C-1)<p&&(w=C),m<=(v=C+1)&&(v=C),(y=C-d.width)<0&&(y=0),S<=(b=C+d.width)&&(b=C),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(h=w,g=x),g<(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))&&(h=w,g=x),g<(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(h=y,g=v),g<(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(h=b,g=w),E[C++]=h;f._setPixels(_,E)},erode:function(d){for(var p,m,h,g,y,b,x,v,w,_=f._toPixels(d),C=0,S=_.length?_.length/4:0,E=new Int32Array(S);C<S;)for(m=(p=C)+d.width;C<m;)g=h=f._getARGB(_,C),(w=C-1)<p&&(w=C),m<=(v=C+1)&&(v=C),(y=C-d.width)<0&&(y=0),S<=(b=C+d.width)&&(b=C),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=w,g=x),(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))<g&&(h=w,g=x),(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<g&&(h=y,g=v),(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<g&&(h=b,g=w),E[C++]=h;f._setPixels(_,E)},blur:function(d,p){for(var m,h,g,y,b,x,v,w,_,C,S=f._toPixels(d),E=d.width,A=d.height,N=E*A,k=new Int32Array(N),M=0;M<N;M++)k[M]=f._getARGB(S,M);var I,L,P,R,V,G,U,Y,X=new Int32Array(N),pe=new Int32Array(N),$=new Int32Array(N),F=new Int32Array(N),z=0,q=3.5*p|0;if(a!==(q=q<1?1:q<248?q:248)){l=1+(a=q)<<1,u=new Int32Array(l),c=new Array(l);for(var ee=0;ee<l;ee++)c[ee]=new Int32Array(256);for(var ae=1,Q=q-1;ae<q;ae++){u[q+ae]=u[Q]=G=Q*Q,U=c[q+ae],Y=c[Q--];for(var le=0;le<256;le++)U[le]=Y[le]=G*le}V=u[q]=q*q,U=c[q];for(var ie=0;ie<256;ie++)U[ie]=V*ie}for(L=0;L<A;L++){for(I=0;I<E;I++){if(y=g=h=b=m=0,(x=I-a)<0)C=-x,x=0;else{if(E<=x)break;C=0}for(P=C;P<l&&!(E<=x);P++){var Z=k[x+z];R=c[P],b+=R[(-16777216&Z)>>>24],h+=R[(16711680&Z)>>16],g+=R[(65280&Z)>>8],y+=R[255&Z],m+=u[P],x++}X[v=z+I]=b/m,pe[v]=h/m,$[v]=g/m,F[v]=y/m}z+=E}for(_=(w=-a)*E,L=z=0;L<A;L++){for(I=0;I<E;I++){if(y=g=h=b=m=0,w<0)C=v=-w,x=I;else{if(A<=w)break;C=0,v=w,x=I+_}for(P=C;P<l&&!(A<=v);P++)R=c[P],b+=R[X[x]],h+=R[pe[x]],g+=R[$[x]],y+=R[F[x]],m+=u[P],v++,x+=E;k[I+z]=b/m<<24|h/m<<16|g/m<<8|y/m}z+=E,_+=E,w++}f._setPixels(S,k)}};s.default=f},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("omggif"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f){return function(d){if(Array.isArray(d)){for(var p=0,m=new Array(d.length);p<d.length;p++)m[p]=d[p];return m}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(f,d){return a.default._validateParameters("createImage",arguments),new a.default.Image(f,d)},a.default.prototype.saveCanvas=function(){for(var f,d,p,m,h,g,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];switch(a.default._validateParameters("saveCanvas",b),b[0]instanceof HTMLCanvasElement?(f=b[0],b.shift()):b[0]instanceof a.default.Element?(f=b[0].elt,b.shift()):b[0]instanceof a.default.Framebuffer?(m=b[0],(h=this.createGraphics(m.width,m.height)).pixelDensity(pixelDensity()),m.loadPixels(),h.loadPixels(),h.pixels.set(m.pixels),h.updatePixels(),f=h.elt,b.shift()):f=this._curElement&&this._curElement.elt,1<=b.length&&(d=b[0]),p=(p=2<=b.length?b[1]:p)||a.default.prototype._checkFileExtension(d,p)[1]||"png"){default:g="image/png";break;case"jpeg":case"jpg":g="image/jpeg"}f.toBlob(function(v){a.default.prototype.downloadFile(v,d,p),h&&h.remove()},g)},a.default.prototype.encodeAndDownloadGif=function(f,d){for(var p=f.gifProperties,m=p.loopLimit,h=(m===1?m=null:m===null&&(m=0),new Uint8Array(f.width*f.height*p.numFrames)),g=[],y={},b=0;b<p.numFrames;b++){for(var x=new Set,v=p.frames[b].image.data,w=v.length,_=new Uint32Array(f.width*f.height),C=0,S=0;C<w;C+=4,S++){var E=v[C+0]<<16|v[C+1]<<8|v[C+2]<<0;x.add(E),_[S]=E}var A=c(x).sort().toString();y[A]===void 0?y[A]={freq:1,frames:[b]}:(y[A].freq+=1,y[A].frames.push(b)),g.push(_)}for(var M=[],N=Object.keys(y).sort(function($,F){return y[F].freq-y[$].freq}),k=N[0].split(",").map(function($){return parseInt($)}),M=M.concat(y[k].frames),I=new Set(k),L=1;L<N.length;L++){var P=N[L].split(",").map(function($){return parseInt($)}).filter(function($){return!I.has($)});if(k.length+P.length<=256){for(var R=0;R<P.length;R++)k.push(P[R]),I.add(P[R]);M=M.concat(y[N[L]].frames)}}M=new Set(M);for(var V={},G=0;G<k.length;G++)V[k[G]]||(V[k[G]]=G);for(var U=1;U<k.length;)U<<=1;k.length=U;for(var m={loop:m,palette:new Uint32Array(k)},Y=new l.default.GifWriter(h,f.width,f.height,m),X={},pe=0;pe<p.numFrames;pe++)(function(F){var z=!M.has(F),q=z?[]:k,ee=new Uint8Array(f.width*f.height),ae={},Q=new Set,le=(g[F].forEach(function(ye,xe){z?(ae[ye]===void 0&&(ae[ye]=q.length,q.push(ye)),ee[xe]=ae[ye]):ee[xe]=V[ye],0<F&&g[F-1][xe]!==ye&&Q.add(ye)}),{}),ie=q.filter(function(ye){return!Q.has(ye)});if(0<ie.length){var ie=ie[0],Z=(z?ae:V)[ie];if(0<F){for(var ge=0;ge<g[F].length;ge++)g[F-1][ge]===g[F][ge]&&(ee[ge]=Z);le.transparent=Z,X.frameOpts.disposal=1}}if(le.delay=p.frames[F].delay/10,z){for(var ne=1;ne<q.length;)ne<<=1;q.length=ne,le.palette=new Uint32Array(q)}0<F&&Y.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),X={pixelPaletteIndex:ee,frameOpts:le}})(pe);X.frameOpts.disposal=1,Y.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),m=new Blob([h.slice(0,Y.end())],{type:"image/gif"}),a.default.prototype.downloadFile(m,d,"gif")},a.default.prototype.saveFrames=function(f,d,p,g,h){a.default._validateParameters("saveFrames",arguments),p=a.default.prototype.constrain(p=p||3,0,15),p*=1e3;var g=a.default.prototype.constrain(g||15,0,22),y=0,b=a.default.prototype._makeFrame,x=this._curElement.elt,v=[],w=setInterval(function(){v.push(b(f+y,d,x)),y++},1e3/g);setTimeout(function(){if(clearInterval(w),h)h(v);else for(var _=0,C=v;_<C.length;_++){var S=C[_];a.default.prototype.downloadFile(S.imageData,S.filename,S.ext)}v=[]},.01+p)},a.default.prototype._makeFrame=function(f,d,h){var m,h=this?this._curElement.elt:h;if(d)switch(d.toLowerCase()){case"png":m="image/png";break;case"jpeg":case"jpg":m="image/jpeg";break;default:m="image/png"}else d="png",m="image/png";var h=(h=h.toDataURL(m)).replace(m,"image/octet-stream"),g={};return g.imageData=h,g.filename=f,g.ext=d,g},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var u=h(o("../core/main")),c=h(o("../core/helpers")),f=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=m();if(v&&v.has(x))return v.get(x);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var S;Object.prototype.hasOwnProperty.call(x,w)&&((S=C?Object.getOwnPropertyDescriptor(x,w):null)&&(S.get||S.set)?Object.defineProperty(_,w,S):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants")),d=h(o("omggif")),p=o("gifenc");function m(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,m=function(){return x},x)}function h(x){return x&&x.__esModule?x:{default:x}}function g(x,v,w,_,C,S,E){try{var A=x[S](E),N=A.value}catch(k){return void w(k)}A.done?v(N):Promise.resolve(N).then(_,C)}function y(x,v,w,_,C,S,E,A,N,k,M){var I,L,P,R,V,G,U,Y,X;return x===f.COVER&&(I=v,P=w,U=S,Y=E,G=A,X=N,L=k,R=M,V=Math.max(U/L,Y/R),U/=V,Y/=V,V=G,G=X,I===f.CENTER?V+=(L-U)/2:I===f.RIGHT&&(V+=L-U),P===f.CENTER?G+=(R-Y)/2:P===f.BOTTOM&&(G+=R-Y),A=(X={x:V,y:G,w:U,h:Y}).x,N=X.y,k=X.w,M=X.h),x===f.CONTAIN&&(I=v,L=w,P=_,R=C,V=S,G=E,U=k,Y=M,X=Math.max(U/V,Y/G),U/=X,Y/=X,X=P,P=R,I===f.CENTER?X+=(V-U)/2:I===f.RIGHT&&(X+=V-U),L===f.CENTER?P+=(G-Y)/2:L===f.BOTTOM&&(P+=G-Y),_=(x={x:X,y:P,w:U,h:Y}).x,C=x.y,S=x.w,E=x.h),{sx:A,sy:N,sw:k,sh:M,dx:_,dy:C,dw:S,dh:E}}function b(x,v){return 0<x&&x<v?x:v}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadImage=function(x,v,w){u.default._validateParameters("loadImage",arguments);var _=new u.default.Image(1,1,this),C=this,S=new Request(x,{method:"GET",mode:"cors"});return fetch(x,S).then(function(E){var A,N=E.headers.get("content-type");N===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),N&&N.includes("image/gif")?E.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),M=_,I=v,L=w,P=(function(z){C._decrementPreload()}).bind(C),R=new d.default.GifReader(k),V=(M.width=M.canvas.width=R.width,M.height=M.canvas.height=R.height,[]),G=R.numFrames(),U=new Uint8ClampedArray(M.width*M.height*4),Y=0;Y<G;Y++){var X=R.frameInfo(Y),pe=M.drawingContext.getImageData(0,0,M.width,M.height),$=(U=pe.data.slice(),function(z,q){try{q.decodeAndBlitFrameRGBA(z,U)}catch(ee){u.default._friendlyFileLoadError(8,M.src),typeof L=="function"?L(ee):console.error(ee)}}(Y,R),new ImageData(U,M.width,M.height)),$=(M.drawingContext.putImageData($,0,0),X.delay);$===0&&($=10),V.push({image:M.drawingContext.getImageData(0,0,M.width,M.height),delay:10*$}),X.disposal===2?M.drawingContext.clearRect(X.x,X.y,X.width,X.height):X.disposal===3&&M.drawingContext.putImageData(pe,0,0,X.x,X.y,X.width,X.height)}(k=R.loopCount())===null?k=1:k===0&&(k=null),M.drawingContext.putImageData(V[0].image,0,0),1<V.length&&(M.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:V,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof I=="function"&&I(M),P()}},function(k){typeof w=="function"?(w(k),C._decrementPreload()):console.error(k)}):((A=new Image).onload=function(){_.width=_.canvas.width=A.width,_.height=_.canvas.height=A.height,_.drawingContext.drawImage(A,0,0),_.modified=!0,typeof v=="function"&&v(_),C._decrementPreload()},A.onerror=function(k){u.default._friendlyFileLoadError(0,A.src),typeof w=="function"?(w(k),C._decrementPreload()):console.error(k)},x.indexOf("data:image/")!==0&&(A.crossOrigin="Anonymous"),A.src=x),_.modified=!0}).catch(function(E){u.default._friendlyFileLoadError(0,x),typeof w=="function"?(w(E),C._decrementPreload()):console.error(E)}),_},u.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function w(_,C){var S,E,A,N,k,M,I,L,P,R,V,G,U,Y,X,pe,$,F,z,q,ee,ae,Q,le,ie,Z,ge=arguments;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(S=2<ge.length&&ge[2]!==void 0?ge[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof _!="string")throw TypeError("fileName parameter must be a string");ne.next=3;break;case 3:if(typeof C!="number")throw TypeError("Duration parameter must be a number");ne.next=5;break;case 5:if(E=S&&S.delay||0,A=S&&S.units||"seconds",N=S&&S.silent||!1,k=S&&S.notificationDuration||0,M=S&&S.notificationID||"progressBar",typeof E!="number")throw TypeError("Delay parameter must be a number");ne.next=12;break;case 12:if(A!=="seconds"&&A!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ne.next=14;break;case 14:if(typeof N!="boolean")throw TypeError("Silent parameter must be a boolean");ne.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");ne.next=18;break;case 18:if(typeof M!="string")throw TypeError("Notification ID parameter must be a string");ne.next=20;break;case 20:return this._recording=!0,R=this._targetFrameRate,I=(I=1/(R=R!==1/0&&R!==void 0&&R!==0?R:60)*1e3)<20?20:I,P=(L=A==="seconds"?C*R:C)+(R=A==="seconds"?E*R:E),R=R,this.frameCount=R,V=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(M)!==null&&document.getElementById(M).remove(),N||((U=this.createP("")).id(M),U.style("font-size","16px"),U.style("font-family","Montserrat"),U.style("background-color","#ffffffa0"),U.style("padding","8px"),U.style("border-radius","10px"),U.position(0,0)),this._renderer instanceof u.default.RendererGL&&(X=this.drawingContext,Y=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4)),this.noLoop(),ne.next=39,Promise.resolve();case 39:if(R<P)return this.redraw(),le=void 0,le=this._renderer instanceof u.default.RendererGL?(Y=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4),X.readPixels(0,0,X.drawingBufferWidth,X.drawingBufferHeight,X.RGBA,X.UNSIGNED_BYTE,Y),function(ye,xe,Ne){for(var Ae=parseInt(Ne/2),Me=4*xe,ze=new Uint8Array(4*xe),lt=0;lt<Ae;++lt){var We=lt*Me,Bt=(Ne-lt-1)*Me;ze.set(ye.subarray(We,We+Me)),ye.copyWithin(We,Bt,Bt+Me),ye.set(ze,Bt)}return ye}(Y,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(le),R++,N||U.html("Saved frame <b>"+G.length.toString()+"</b> out of "+L.toString()),ne.next=48,new Promise(function(ye){return setTimeout(ye,0)});ne.next=50;break;case 48:ne.next=39;break;case 50:N||U.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(V),pe=(0,p.GIFEncoder)(),$=function(ye){for(var xe=new Uint8Array(ye.length*ye[0].length),Ne=0;Ne<ye.length;Ne++)xe.set(ye[Ne],Ne*ye[0].length);var Ae=(0,p.quantize)(xe,256,{format:"rgba4444",oneBitAlpha:!0});return Ae.length===256?Ae[Ae.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Ae.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Ae}(G),F={},z=function(ye){for(var xe=ye.length/4,Ne=new Uint8Array(xe),Ae=0;Ae<xe;Ae++){var Me=ye[4*Ae]<<24|ye[4*Ae+1]<<16|ye[4*Ae+2]<<8|ye[4*Ae+3];F[Me]===void 0&&(F[Me]=(0,p.nearestColorIndex)($,ye.slice(4*Ae,4*(Ae+1)))),Ne[Ae]=F[Me]}return Ne},q=$.length-1,ee=[],ae=0;case 60:if(!(ae<G.length)){ne.next=71;break}if(Q=z(G[ae]),le=Q.slice(),ae===0)pe.writeFrame(Q,this.width,this.height,{palette:$,delay:I,dispose:1});else{for(ie=0;ie<Q.length;ie++)Q[ie]===ee[ie]&&(Q[ie]=q);pe.writeFrame(Q,this.width,this.height,{delay:I,transparent:!0,transparentIndex:q,dispose:1})}return ee=le,N||U.html("Rendered frame <b>"+ae.toString()+"</b> out of "+L.toString()),ne.next=68,new Promise(function(ye){return setTimeout(ye,0)});case 68:ae++,ne.next=60;break;case 71:pe.finish(),Z=pe.bytesView(),Z=new Blob([Z],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),N||(U.html("Done. Downloading your gif!\u{1F338}"),0<k&&setTimeout(function(){return U.remove()},1e3*k)),u.default.prototype.downloadFile(Z,_,"gif");case 80:case"end":return ne.stop()}},w,this)});var x,v=function(){var w=this,_=arguments;return new Promise(function(C,S){var E=x.apply(w,_);function A(k){g(E,C,S,A,N,"next",k)}function N(k){g(E,C,S,A,N,"throw",k)}A(void 0)})};return function(w,_){return v.apply(this,arguments)}}(),u.default.prototype.image=function(x,v,w,_,R,V,G,U,X,k,M,I){u.default._validateParameters("image",arguments);var Y=x.width,L=x.height,P=(I=I||f.CENTER,M=M||f.CENTER,x.elt&&(Y=Y!==void 0?Y:x.elt.width,L=L!==void 0?L:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(Y=Y!==void 0?Y:x.elt.videoWidth,L=L!==void 0?L:x.elt.videoHeight),_||Y),R=R||L,V=V||0,G=G||0,U=b(U!==void 0?U:Y,Y),Y=b(X!==void 0?X:L,L),X=1;x.elt&&!x.canvas&&x.elt.style.width&&(X=x.elt.videoWidth&&!_?x.elt.videoWidth:x.elt.width,X/=parseInt(x.elt.style.width,10)),V*=X,G*=X,Y*=X,U*=X,L=y(k,M,I,(L=c.default.modeAdjust(v,w,P,R,this._renderer._imageMode)).x,L.y,L.w,L.h,V,G,U,Y),this._renderer.image(x,L.sx,L.sy,L.sw,L.sh,L.dx,L.dy,L.dw,L.dh)},u.default.prototype.tint=function(){for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];u.default._validateParameters("tint",v);var _=this.color.apply(this,v);this._renderer._tint=_.levels},u.default.prototype.noTint=function(){this._renderer._tint=null},u.default.prototype._getTintedImageCanvas=u.default.Renderer2D.prototype._getTintedImageCanvas,u.default.prototype.imageMode=function(x){u.default._validateParameters("imageMode",arguments),x!==f.CORNER&&x!==f.CORNERS&&x!==f.CENTER||(this._renderer._imageMode=x)},o=u.default,s.default=o},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f,d){for(var p=0;p<d.length;p++){var m=d[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}a.default.Image=function(){function f(h,g){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=g,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var d,p,m;return d=f,(p=[{key:"pixelDensity",value:function(h){return h!==void 0?(h<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(b){var g,y=this.gifProperties,b=b._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=b),y.playing&&(y.timeDisplayed=b-y.lastChangeTime,g=y.frames[y.displayIndex].delay,y.timeDisplayed>=g&&(g=Math.floor(y.timeDisplayed/g),y.timeDisplayed=0,y.lastChangeTime=b,y.displayIndex+=g,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(b=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[b].image,0,0),y.displayIndex=b,this.setModified(!0))))}},{key:"_setProperty",value:function(h,g){this[h]=g,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,g,y,b){a.default.Renderer2D.prototype.updatePixels.call(this,h,g,y,b),this.setModified(!0)}},{key:"get",value:function(h,g,y,b){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,g)}},{key:"set",value:function(h,g,y){a.default.Renderer2D.prototype.set.call(this,h,g,y),this.setModified(!0)}},{key:"resize",value:function(h,g){h===0&&g===0?(h=this.canvas.width,g=this.canvas.height):h===0?h=this.canvas.width*g/this.canvas.height:g===0&&(g=this.canvas.height*h/this.canvas.width),h=Math.floor(h),g=Math.floor(g);var y=document.createElement("canvas");if(y.width=h,y.height=g,this.gifProperties)for(var b=this.gifProperties,x=0;x<b.numFrames;x++){for(var v=this.drawingContext.createImageData(h,g),w=(A=A=E=S=C=void 0,b.frames[x].image),_=v,C=0,S=0;S<_.height;S++)for(var E=0;E<_.width;E++){var A=Math.floor(E*w.width/_.width),A=4*(Math.floor(S*w.height/_.height)*w.width+A);_.data[C++]=w.data[A++],_.data[C++]=w.data[A++],_.data[C++]=w.data[A++],_.data[C++]=w.data[+A]}b.frames[x].image=v}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=h,this.canvas.height=this.height=g,this.drawingContext.drawImage(y,0,0,h,g,0,0,h,g),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];a.default.prototype.copy.apply(this,g)}},{key:"mask",value:function(h){var g=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,b=1,x=[h=h===void 0?this:h,0,0,(b=h instanceof a.default.Renderer?h._pInst._pixelDensity:b)*h.width,b*h.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=g,this.setModified(!0)}},{key:"filter",value:function(h,g){l.default.apply(this.canvas,l.default[h],g),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,g),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,g){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,h):a.default.prototype.saveCanvas(this.canvas,h,g)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var g;this.gifProperties&&(h<(g=this.gifProperties).numFrames&&0<=h?(g.timeDisplayed=0,g.lastChangeTime=0,g.displayIndex=h,this.drawingContext.putImageData(g.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,g){if(this.gifProperties){var y=this.gifProperties;if(g<y.numFrames&&0<=g)y.frames[g].delay=h;else{var b=!0,g=!1,x=void 0;try{for(var v,w=y.frames[Symbol.iterator]();!(b=(v=w.next()).done);b=!0)v.value.delay=h}catch(C){g=!0,x=C}finally{try{b||w.return==null||w.return()}finally{if(g)throw x}}}}}}])&&c(d.prototype,p),m&&c(d,m),f}(),o=a.default.Image,s.default=o},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(c){return c&&c.__esModule?c:{default:c}}o("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var c,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];a.default._validateParameters("blend",d),this._renderer?(c=this._renderer).blend.apply(c,d):a.default.Renderer2D.prototype.blend.apply(this,d)},a.default.prototype.copy=function(){for(var c,f,d,p,m,h,g,y,b,x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];if(a.default._validateParameters("copy",v),v.length===9)c=v[0],f=v[1],d=v[2],p=v[3],m=v[4],h=v[5],g=v[6],y=v[7],b=v[8];else{if(v.length!==8)throw new Error("Signature not supported");c=this,f=v[0],d=v[1],p=v[2],m=v[3],h=v[4],g=v[5],y=v[6],b=v[7]}a.default.prototype._copyHelper(this,c,f,d,p,m,h,g,y,b)},a.default.prototype._copyHelper=function(c,f,d,p,m,h,g,y,b,x){var v=f.canvas.width/f.width,w=0,_=0;f._renderer&&f._renderer.isP3D&&(w=f.width/2,_=f.height/2),c._renderer&&c._renderer.isP3D?(c.push(),c.resetMatrix(),c.noLights(),c.blendMode(c.BLEND),c.imageMode(c.CORNER),a.default.RendererGL.prototype.image.call(c._renderer,f,d+w,p+_,m,h,g,y,b,x),c.pop()):c.drawingContext.drawImage(f.canvas,v*(d+w),v*(p+_),v*m,v*h,g,y,b,x)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("filter",f);var g=(function(){var y,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])===!1&&(b.useWebGL=!1)),b}).apply(void 0,f),p=g.shader,m=g.operation,h=g.value,g=g.useWebGL;this._renderer.isP3D&&p?a.default.RendererGL.prototype.filter.call(this._renderer,p):g||this._renderer.isP3D?(!g&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,m,h):((p=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),p.filter.apply(p,f),this.copy(p._renderer,0,0,this.width,this.height,0,0,this.width,this.height),p.clear())):this.canvas!==void 0?l.default.apply(this.canvas,l.default[m],h):l.default.apply(this.elt,l.default[m],h)},a.default.prototype.get=function(c,f,d,p){var m;return a.default._validateParameters("get",arguments),(m=this._renderer).get.apply(m,arguments)},a.default.prototype.loadPixels=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},a.default.prototype.set=function(c,f,d){this._renderer.set(c,f,d)},a.default.prototype.updatePixels=function(c,f,d,p){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,f,d,p)},o=a.default,s.default=o},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=f(o("../core/main")),u=(o("whatwg-fetch"),o("es6-promise/auto"),f(o("fetch-jsonp"))),c=f(o("file-saver"));function f(h){return h&&h.__esModule?h:{default:h}}function d(h){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(h)}function p(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function m(h,g){g&&g!==!0&&g!=="true"||(g="");var y="";return(h=h||"untitled")&&h.includes(".")&&(y=h.split(".").pop()),g&&y!==g&&(y=g,h="".concat(h,".").concat(y)),[h,y]}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),l.default.prototype.loadJSON=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];l.default._validateParameters("loadJSON",g);for(var b,x,v,w=g[0],_={},C="json",S=1;S<g.length;S++){var E=g[S];typeof E=="string"?E!=="jsonp"&&E!=="json"||(C=E):typeof E=="function"?b?x=E:b=E:d(E)==="object"&&(E.hasOwnProperty("jsonpCallback")||E.hasOwnProperty("jsonpCallbackFunction"))&&(C="jsonp",v=E)}var A=this;return this.httpDo(w,"GET",v,C,function(N){for(var k in N)_[k]=N[k];b!==void 0&&b(N),A._decrementPreload()},function(N){if(l.default._friendlyFileLoadError(5,w),!x)throw N;x(N)}),_},l.default.prototype.loadStrings=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];l.default._validateParameters("loadStrings",g);for(var b,x,v=[],w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var C=this;return l.default.prototype.httpDo.call(this,g[0],"GET","text",function(S){for(var E=S.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),A=0,N=E.length;A<N;A+=32768)Array.prototype.push.apply(v,E.slice(A,Math.min(A+32768,N)));b!==void 0&&b(v),C._decrementPreload()},function(S){if(l.default._friendlyFileLoadError(3,S),!x)throw S;x(S)}),v},l.default.prototype.loadTable=function(h){var g,y,b,x=[],v=!1,w=h.substring(h.lastIndexOf(".")+1,h.length);w==="csv"?b=",":w==="ssv"?b=";":w==="tsv"&&(b="	");for(var _=1;_<arguments.length;_++)typeof arguments[_]=="function"?g===void 0?g=arguments[_]:y===void 0&&(y=arguments[_]):typeof arguments[_]=="string"&&(x.push(arguments[_]),arguments[_]==="header"&&(v=!0),arguments[_]==="csv"?b=",":arguments[_]==="ssv"?b=";":arguments[_]==="tsv"&&(b="	"));var C=new l.default.Table,S=this;return this.httpDo(h,"GET","table",function(E){for(var A,N,k={},M=0,I=[],L=0,P=null,R=function(){k.currentState=M,k.token=""},V=function(){P.push(k.token),R()},G=function(){k.currentState=4,I.push(P),P=null};;){if((A=E[L++])==null){if(k.escaped)throw new Error("Unclosed quote in file.");if(P){V(),G();break}}if(P===null&&(k.escaped=!1,P=[],R()),k.currentState===M){if(A==='"'){k.escaped=!0,k.currentState=1;continue}k.currentState=1}if(k.currentState===1&&k.escaped)if(A==='"')E[L]==='"'?(k.token+='"',L++):(k.escaped=!1,k.currentState=2);else{if(A==="\r")continue;k.token+=A}else A==="\r"?(E[L]===`
`&&L++,V(),G()):A===`
`?(V(),G()):A===b?V():k.currentState===1&&(k.token+=A)}if(v)C.columns=I.shift();else for(var U=0;U<I[0].length;U++)C.columns[U]="null";for(var Y=0;Y<I.length;Y++)(I[Y].length!==1||I[Y][0]!=="undefined"&&I[Y][0]!=="")&&((N=new l.default.TableRow).arr=I[Y],N.obj=function(X,pe){if((pe=pe||[])===void 0)for(var $=0;$<X.length;$++)pe[$.toString()]=$;return Object.fromEntries(pe.map(function(F,z){return[F,X[z]]}))}(I[Y],C.columns),C.addRow(N));typeof g=="function"&&g(C),S._decrementPreload()},function(E){l.default._friendlyFileLoadError(2,h),y?y(E):console.error(E)}),C},l.default.prototype.loadXML=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];for(var b,x,v=new l.default.XML,w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var C=this;return this.httpDo(g[0],"GET","xml",function(S){for(var E in S)v[E]=S[E];b!==void 0&&b(v),C._decrementPreload()},function(S){if(l.default._friendlyFileLoadError(1,S),!x)throw S;x(S)}),v},l.default.prototype.loadBytes=function(h,g,y){var b={},x=this;return this.httpDo(h,"GET","arrayBuffer",function(v){b.bytes=new Uint8Array(v),typeof g=="function"&&g(b),x._decrementPreload()},function(v){if(l.default._friendlyFileLoadError(6,h),!y)throw v;y(v)}),b},l.default.prototype.httpGet=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return l.default._validateParameters("httpGet",g),g.splice(1,0,"GET"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpPost=function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return l.default._validateParameters("httpPost",g),g.splice(1,0,"POST"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpDo=function(){for(var h,g,y,b={},x=0,v="text/plain",w=arguments.length-1;0<w&&typeof(w<0||arguments.length<=w?void 0:arguments[w])=="function";w--)x++;var _=arguments.length-x,C=arguments.length<=0?void 0:arguments[0];if(_==2&&typeof C=="string"&&d(arguments.length<=1?void 0:arguments[1])==="object")M=new Request(C,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var S,E="GET",A=1;A<arguments.length;A++){var N=A<0||arguments.length<=A?void 0:arguments[A];if(typeof N=="string")N==="GET"||N==="POST"||N==="PUT"||N==="DELETE"?E=N:N==="json"||N==="jsonp"||N==="binary"||N==="arrayBuffer"||N==="xml"||N==="text"||N==="table"?h=N:S=N;else if(typeof N=="number")S=N.toString();else if(d(N)==="object")if(N.hasOwnProperty("jsonpCallback")||N.hasOwnProperty("jsonpCallbackFunction"))for(var k in N)b[k]=N[k];else v=N instanceof l.default.XML?(S=N.serialize(),"application/xml"):(S=JSON.stringify(N),"application/json");else typeof N=="function"&&(g?y=N:g=N)}var _=E==="GET"?new Headers:new Headers({"Content-Type":v}),M=new Request(C,{method:E,mode:"cors",body:S,headers:_})}return(_=(_=(h=h||(C.includes("json")?"json":C.includes("xml")?"xml":"text"))==="jsonp"?(0,u.default)(C,b):fetch(M)).then(function(I){if(!I.ok)throw(L=new Error(I.body)).status=I.status,L.ok=!1,L;var L=0;switch((L=h!=="jsonp"?I.headers.get("content-length"):L)&&64e6<L&&l.default._friendlyFileLoadError(7,C),h){case"json":case"jsonp":return I.json();case"binary":return I.blob();case"arrayBuffer":return I.arrayBuffer();case"xml":return I.text().then(function(P){return P=new DOMParser().parseFromString(P,"text/xml"),new l.default.XML(P.documentElement)});default:return I.text()}})).then(g||function(){}),_.catch(y||console.error),_},window.URL=window.URL||window.webkitURL,l.default.prototype._pWriters=[],l.default.prototype.createWriter=function(h,g){var y,b;for(b in l.default.prototype._pWriters)if(l.default.prototype._pWriters[b].name===h)return y=new l.default.PrintWriter(h+this.millis(),g),l.default.prototype._pWriters.push(y),y;return y=new l.default.PrintWriter(h,g),l.default.prototype._pWriters.push(y),y},l.default.PrintWriter=function(h,g){var y=this;this.name=h,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),l.default.prototype.writeFile(x,h,g),l.default.prototype._pWriters)l.default.prototype._pWriters[b].name===this.name&&l.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},l.default.prototype.save=function(h,g,y){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)l.default.prototype.saveCanvas(x);else if(b[0]instanceof l.default.Renderer||b[0]instanceof l.default.Graphics)l.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")l.default.prototype.saveCanvas(x,b[0]);else switch(m(b[1],b[2])[1]){case"json":return void l.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void l.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?l.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof l.default.Table?l.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof l.default.Image?l.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof l.default.SoundFile&&l.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},l.default.prototype.saveJSON=function(h,g,y){l.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(y.split(`
`),g,"json")},l.default.prototype.saveJSONObject=l.default.prototype.saveJSON,l.default.prototype.saveJSONArray=l.default.prototype.saveJSON,l.default.prototype.saveStrings=function(h,g,y,b){l.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(g,y||"txt"),v=0;v<h.length;v++)b?x.write(h[v]+`\r
`):x.write(h[v]+`
`);x.close(),x.clear()},l.default.prototype.saveTable=function(h,g,y){l.default._validateParameters("saveTable",arguments),b=y===void 0?g.substring(g.lastIndexOf(".")+1,g.length):y;var b,x=this.createWriter(g,b),v=h.columns,w=b==="tsv"?"	":",";if(b!=="html"){if(v[0]!=="0"){for(var _=0;_<v.length;_++)_<v.length-1?x.write(v[_]+w):x.write(v[_]);x.write(`
`)}for(var C=0;C<h.rows.length;C++){for(var S=void 0,S=0;S<h.rows[C].arr.length;S++)S<h.rows[C].arr.length-1?b==="csv"&&String(h.rows[C].arr[S]).includes(",")?x.write('"'+h.rows[C].arr[S]+'"'+w):x.write(h.rows[C].arr[S]+w):b==="csv"&&String(h.rows[C].arr[S]).includes(",")?x.write('"'+h.rows[C].arr[S]+'"'):x.write(h.rows[C].arr[S]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),v[0]!=="0"){x.print("    <tr>");for(var E=0;E<v.length;E++){var A=p(v[E]);x.print("      <td>".concat(A)),x.print("      </td>")}x.print("    </tr>")}for(var N=0;N<h.rows.length;N++){x.print("    <tr>");for(var k=0;k<h.columns.length;k++){var M=p(h.rows[N].getString(k));x.print("      <td>".concat(M)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},l.default.prototype.writeFile=function(x,g,y){var b="application/octet-stream",x=(l.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));l.default.prototype.downloadFile(x,g,y)},l.default.prototype.downloadFile=function(h,x,v){var b,x=m(x,v),v=x[0];h instanceof Blob?c.default.saveAs(h,v):((b=document.createElement("a")).href=h,b.download=v,b.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},b.style.display="none",document.body.appendChild(b),l.default.prototype._isSafari()&&(h=(h=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(h)),b.click())},l.default.prototype._checkFileExtension=m,l.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},o=l.default,s.default=o},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Table=function(){function u(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],m=this,h=u;if(!(m instanceof h))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=p}var c,f,d;return c=u,(f=[{key:"addRow",value:function(p){if(p=p||new a.default.TableRow,p.arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,m){if(typeof m=="string"){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[m]===p)return this.rows[h]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].arr[m]===p)return this.rows[g];return null}},{key:"findRows",value:function(p,m){var h=[];if(typeof m=="string")for(var g=0;g<this.rows.length;g++)this.rows[g].obj[m]===p&&h.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[m]===p&&h.push(this.rows[y]);return h}},{key:"matchRow",value:function(p,m){if(typeof m=="number"){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[m].match(p))return this.rows[h]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].obj[m].match(p))return this.rows[g];return null}},{key:"matchRows",value:function(p,m){var h=[];if(typeof m=="number")for(var g=0;g<this.rows.length;g++)this.rows[g].arr[m].match(p)&&h.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[m].match(p)&&h.push(this.rows[y]);return h}},{key:"getColumn",value:function(p){var m=[];if(typeof p=="string")for(var h=0;h<this.rows.length;h++)m.push(this.rows[h].obj[p]);else for(var g=0;g<this.rows.length;g++)m.push(this.rows[g].arr[p]);return m}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,m){for(var h=[],g=0;g<p.length;g++)h.push(p.charAt(g).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(h.join("|"),"g");if(m===void 0)for(var b=0;b<this.columns.length;b++)for(var x=0;x<this.rows.length;x++){var v=(v=this.rows[x].arr[b]).replace(y,"");this.rows[x].arr[b]=v,this.rows[x].obj[this.columns[b]]=v}else if(typeof m=="string")for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].obj[m]).replace(y,""),C=(this.rows[w].obj[m]=_,this.columns.indexOf(m));this.rows[w].arr[C]=_}else for(var S=0;S<this.rows.length;S++){var E=(E=this.rows[S].arr[m]).replace(y,"");this.rows[S].arr[m]=E,this.rows[S].obj[this.columns[m]]=E}}},{key:"trim",value:function(p){var m=new RegExp(" ","g");if(p===void 0)for(var h=0;h<this.columns.length;h++)for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[h]).replace(m,"");this.rows[g].arr[h]=y,this.rows[g].obj[this.columns[h]]=y}else if(typeof p=="string")for(var b=0;b<this.rows.length;b++){var x=(x=this.rows[b].obj[p]).replace(m,""),v=(this.rows[b].obj[p]=x,this.columns.indexOf(p));this.rows[b].arr[v]=x}else for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].arr[p]).replace(m,"");this.rows[w].arr[p]=_,this.rows[w].obj[this.columns[p]]=_}}},{key:"removeColumn",value:function(g){typeof g=="string"?h=this.columns.indexOf(m=g):m=this.columns[h=g];var m,h,g=this.columns.splice(h+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(g);for(var y=0;y<this.rows.length;y++){var b=this.rows[y].arr,x=b.splice(h+1,b.length);b.pop(),this.rows[y].arr=b.concat(x),delete this.rows[y].obj[m]}}},{key:"set",value:function(p,m,h){this.rows[p].set(m,h)}},{key:"setNum",value:function(p,m,h){this.rows[p].setNum(m,h)}},{key:"setString",value:function(p,m,h){this.rows[p].setString(m,h)}},{key:"get",value:function(p,m){return this.rows[p].get(m)}},{key:"getNum",value:function(p,m){return this.rows[p].getNum(m)}},{key:"getString",value:function(p,m){return this.rows[p].getString(m)}},{key:"getObject",value:function(p){for(var m,h={},g=0;g<this.rows.length;g++)if(m=this.rows[g].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));h[m[p]]=m}else h[g]=this.rows[g].obj;return h}},{key:"getArray",value:function(){for(var p=[],m=0;m<this.rows.length;m++)p.push(this.rows[m].arr);return p}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(o,i,s){"use strict";o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.TableRow=function(){function l(d,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var m=[];d&&(m=d.split(p=p||",")),this.arr=m,this.obj=Object.fromEntries(m.entries()),this.table=null}var u,c,f;return u=l,(c=[{key:"set",value:function(d,p){if(typeof d=="string"){var m=this.table.columns.indexOf(d);if(!(0<=m))throw new Error('This table has no column named "'.concat(d,'"'));this.obj[d]=p,this.arr[m]=p}else{if(!(d<this.table.columns.length))throw new Error("Column #".concat(d," is out of the range of this table"));this.arr[d]=p,m=this.table.columns[d],this.obj[m]=p}}},{key:"setNum",value:function(d,p){p=parseFloat(p),this.set(d,p)}},{key:"setString",value:function(d,p){p=p.toString(),this.set(d,p)}},{key:"get",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d]}},{key:"getNum",value:function(d){var p=parseFloat(typeof d=="string"?this.obj[d]:this.arr[d]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[d]," is NaN (Not a Number)");return p}},{key:"getString",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d].toString()}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function u(c){for(var f=[],d=0;d<c.length;d++)f.push(new a.default.XML(c[d]));return f}a.default.XML=function(){function c(m){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");m?this.DOM=m:(m=document.implementation.createDocument(null,"doc"),this.DOM=m.createElement("root"))}var f,d,p;return f=c,(d=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(m){var h=this.DOM.innerHTML,g=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(m);y.innerHTML=h;for(var b=0;b<g.length;b++)y.setAttribute(g[b].nodeName,g[b].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var m=[],h=0;h<this.DOM.childNodes.length;h++)m.push(this.DOM.childNodes[h].nodeName);return m}},{key:"getChildren",value:function(m){return u(m?this.DOM.getElementsByTagName(m):this.DOM.children)}},{key:"getChild",value:function(m){if(typeof m!="string")return new a.default.XML(this.DOM.children[m]);var h=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.children[Symbol.iterator]();!(h=(b=x.next()).done);h=!0){var v=b.value;if(v.tagName===m)return new a.default.XML(v)}}catch(w){g=!0,y=w}finally{try{h||x.return==null||x.return()}finally{if(g)throw y}}}},{key:"addChild",value:function(m){m instanceof a.default.XML&&this.DOM.appendChild(m.DOM)}},{key:"removeChild",value:function(m){var h=-1;if(typeof m=="string"){for(var g=0;g<this.DOM.children.length;g++)if(this.DOM.children[g].tagName===m){h=g;break}}else h=m;h!==-1&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var m=[],h=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(h=(b=x.next()).done);h=!0){var v=b.value;m.push(v.nodeName)}}catch(w){g=!0,y=w}finally{try{h||x.return==null||x.return()}finally{if(g)throw y}}return m}},{key:"hasAttribute",value:function(m){var h={},g=!0,y=!1,b=void 0;try{for(var x,v=this.DOM.attributes[Symbol.iterator]();!(g=(x=v.next()).done);g=!0){var w=x.value;h[w.nodeName]=w.nodeValue}}catch(_){y=!0,b=_}finally{try{g||v.return==null||v.return()}finally{if(y)throw b}}return!!h[m]}},{key:"getNum",value:function(m,h){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(C){b=!0,x=C}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return Number(g[m])||h||0}},{key:"getString",value:function(m,h){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(C){b=!0,x=C}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return g[m]?String(g[m]):h||null}},{key:"setAttribute",value:function(m,h){this.DOM.setAttribute(m,h)}},{key:"getContent",value:function(m){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||m||null}},{key:"setContent",value:function(m){this.DOM.children.length||(this.DOM.textContent=m)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&l(f.prototype,d),p&&l(f,p),c}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(u,c,f){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(u,f),c)},a.default.prototype.dist=function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return a.default._validateParameters("dist",c),c.length===4?Math.hypot(c[2]-c[0],c[3]-c[1]):c.length===6?Math.hypot(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(u,c,f){return a.default._validateParameters("lerp",arguments),f*(c-u)+u},a.default.prototype.log=Math.log,a.default.prototype.mag=function(u,c){return a.default._validateParameters("mag",arguments),Math.hypot(u,c)},a.default.prototype.map=function(u,c,f,d,p,m){return a.default._validateParameters("map",arguments),u=(u-c)/(f-c)*(p-d)+d,m?d<p?this.constrain(u,d,p):this.constrain(u,p,d):u},a.default.prototype.max=function(){for(var u=function(p){return Math.max.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.min=function(){for(var u=function(p){return Math.min.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.norm=function(u,c,f){return a.default._validateParameters("norm",arguments),this.map(u,c,f,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(u,c){return c?(c=Math.pow(10,c),Math.round(u*c)/c):Math.round(u)},a.default.prototype.sq=function(u){return u*u},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(d){a.default._validateParameters("fract",arguments);var c,f=0,d=Number(d);return isNaN(d)||Math.abs(d)===1/0?d:(d<0&&(d=-d,f=1),String(d).includes(".")&&!String(d).includes("e")?(c=String(d),c=+("0"+c.slice(c.indexOf("."))),Math.abs(f-c)):d<1?Math.abs(f-d):0)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f,d){return(l=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(p,m,h){var g=[null];return g.push.apply(g,m),m=new(Function.bind.apply(p,g)),h&&u(m,h.prototype),m}).apply(null,arguments)}function u(c,f){return(u=Object.setPrototypeOf||function(d,p){return d.__proto__=p,d})(c,f)}a.default.prototype.createVector=function(c,f,d){return this instanceof a.default?l(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(c,f,d)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(d,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,d=(d=d("../core/main"))&&d.__esModule?d:{default:d};function a(p){return .5*(1-Math.cos(p*Math.PI))}var l,u=4095,c=4,f=.5,d=(d.default.prototype.noise=function(p){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(l==null){l=new Array(4096);for(var g=0;g<4096;g++)l[g]=Math.random()}p<0&&(p=-p),m<0&&(m=-m),h<0&&(h=-h);for(var y,b,x=Math.floor(p),v=Math.floor(m),w=Math.floor(h),_=p-x,C=m-v,S=h-w,E=0,A=.5,N=0;N<c;N++){var k=x+(v<<4)+(w<<8),M=a(_),I=a(C),L=l[k&u];L+=M*(l[k+1&u]-L),y=l[k+16&u],L+=I*((y+=M*(l[k+16+1&u]-y))-L),y=l[(k+=256)&u],y+=M*(l[k+1&u]-y),b=l[k+16&u],y+=I*((b+=M*(l[k+16+1&u]-b))-y),E+=(L+=a(S)*(y-L))*A,A*=f,x<<=1,v<<=1,w<<=1,1<=(_*=2)&&(x++,_--),1<=(C*=2)&&(v++,C--),1<=(S*=2)&&(w++,S--)}return E},d.default.prototype.noiseDetail=function(p,m){0<p&&(c=p),0<m&&(f=m)},d.default.prototype.noiseSeed=function(p){g=4294967296;var m,h,g,y={setSeed:function(x){h=m=(x??Math.random()*g)>>>0},getSeed:function(){return m},rand:function(){return(h=(1664525*h+1013904223)%g)/g}};y.setSeed(p),l=new Array(4096);for(var b=0;b<4096;b++)l[b]=y.rand()},d.default);s.default=d},{"../core/main":280}],313:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var h=f();if(h&&h.has(m))return h.get(m);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var x;Object.prototype.hasOwnProperty.call(m,g)&&((x=b?Object.getOwnPropertyDescriptor(m,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=m[g])}return y.default=m,h&&h.set(m,y),y}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m,h){for(var g=0;g<h.length;g++){var y=h[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}u.default.Vector=function(){function m(){var w=this,b=m;if(!(w instanceof b))throw new TypeError("Cannot call a class as a function");var x,v,w=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,v=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,v=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=v,this.z=w}var h,g,y;return h=m,y=[{key:"fromAngle",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new u.default.Vector(x*Math.cos(b),x*Math.sin(b),0)}},{key:"fromAngles",value:function(S,_){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,w=Math.cos(_),_=Math.sin(_),C=Math.cos(S),S=Math.sin(S);return new u.default.Vector(v*S*_,-v*C,v*S*w)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*c.TWO_PI)}},{key:"random3D",value:function(){var b=Math.random()*c.TWO_PI,x=2*Math.random()-1,w=Math.sqrt(1-x*x),v=w*Math.cos(b),w=w*Math.sin(b);return new u.default.Vector(v,w,x)}},{key:"copy",value:function(b){return b.copy(b)}},{key:"add",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),C.add(_),C}},{key:"rem",value:function(b,x){if(b instanceof u.default.Vector&&x instanceof u.default.Vector)return(b=b.copy()).rem(x),b}},{key:"sub",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),C.sub(_),C}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),C.mult(_),C}},{key:"rotate",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length===2?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),C.set(w)),C.rotate(_),C}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),C.div(_),C}},{key:"dot",value:function(b,x){return b.dot(x)}},{key:"cross",value:function(b,x){return b.cross(x)}},{key:"dist",value:function(b,x){return b.dist(x)}},{key:"lerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2],S=x[3];return S?S.set(w):(S=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),S.lerp(_,C),S}},{key:"slerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2],S=x[3];return S?S.set(w):(S=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),S.slerp(_,C),S}},{key:"mag",value:function(b){return b.mag()}},{key:"magSq",value:function(b){return b.magSq()}},{key:"normalize",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1];return x.length<2?_=w.copy():(_ instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),_.set(w)),_.normalize()}},{key:"limit",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length<3?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),C.set(w)),C.limit(_)}},{key:"setMag",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length<3?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),C.set(w)),C.setMag(_)}},{key:"heading",value:function(b){return b.heading()}},{key:"angleBetween",value:function(b,x){return b.angleBetween(x)}},{key:"reflect",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length<3?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),C.set(w)),C.reflect(_)}},{key:"array",value:function(b){return b.array()}},{key:"equals",value:function(b,x){var v;return b instanceof u.default.Vector?v=b:Array.isArray(b)?v=new u.default.Vector().set(b):u.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),v.equals(x)}}],(g=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(b,x,v){return b instanceof u.default.Vector?(this.x=b.x||0,this.y=b.y||0,this.z=b.z||0):Array.isArray(b)?(this.x=b[0]||0,this.y=b[1]||0,this.z=b[2]||0):(this.x=b||0,this.y=x||0,this.z=v||0),this}},{key:"copy",value:function(){return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new u.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(b,x,v){return b instanceof u.default.Vector?(this.x+=b.x||0,this.y+=b.y||0,this.z+=b.z||0):Array.isArray(b)?(this.x+=b[0]||0,this.y+=b[1]||0,this.z+=b[2]||0):(this.x+=b||0,this.y+=x||0,this.z+=v||0),this}},{key:"calculateRemainder2D",value:function(b,x){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(b,x,v){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),v!==0&&(this.z=this.z%v),this}},{key:"rem",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_,C,S=x[0],E=x[1],A=x[2];if(S instanceof u.default.Vector){if([S.x,S.y,S.z].every(Number.isFinite))return w=parseFloat(S.x),_=parseFloat(S.y),C=parseFloat(S.z),this.calculateRemainder3D(w,_,C)}else if(Array.isArray(S)){if(S.every(Number.isFinite))return S.length===2?this.calculateRemainder2D(S[0],S[1]):S.length===3?this.calculateRemainder3D(S[0],S[1],S[2]):void 0}else if(x.length===1){if(Number.isFinite(S)&&S!==0)return this.x=this.x%S,this.y=this.y%S,this.z=this.z%S,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(S,E)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(S,E,A)}},{key:"sub",value:function(b,x,v){return b instanceof u.default.Vector?(this.x-=b.x||0,this.y-=b.y||0,this.z-=b.z||0):Array.isArray(b)?(this.x-=b[0]||0,this.y-=b[1]||0,this.z-=b[2]||0):(this.x-=b||0,this.y-=x||0,this.z-=v||0),this}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_=x[0],C=x[1],S=x[2];return _ instanceof u.default.Vector?Number.isFinite(_.x)&&Number.isFinite(_.y)&&Number.isFinite(_.z)&&typeof _.x=="number"&&typeof _.y=="number"&&typeof _.z=="number"?(this.x*=_.x,this.y*=_.y,this.z*=_.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(_)?_.every(function(E){return Number.isFinite(E)})&&_.every(function(E){return typeof E=="number"})?_.length===1?(this.x*=_[0],this.y*=_[0],this.z*=_[0]):_.length===2?(this.x*=_[0],this.y*=_[1]):_.length===3&&(this.x*=_[0],this.y*=_[1],this.z*=_[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(w=x).every(function(E){return Number.isFinite(E)})&&w.every(function(E){return typeof E=="number"})?(x.length===1&&(this.x*=_,this.y*=_,this.z*=_),x.length===2&&(this.x*=_,this.y*=C),x.length===3&&(this.x*=_,this.y*=C,this.z*=S)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];if(w instanceof u.default.Vector)if(Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"){var S=w.z===0&&this.z===0;if(w.x===0||w.y===0||!S&&w.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=w.x,this.y/=w.y,S||(this.z/=w.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(w))if(w.every(Number.isFinite)&&w.every(function(E){return typeof E=="number"})){if(w.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;w.length===1?(this.x/=w[0],this.y/=w[0],this.z/=w[0]):w.length===2?(this.x/=w[0],this.y/=w[1]):w.length===3&&(this.x/=w[0],this.y/=w[1],this.z/=w[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(E){return typeof E=="number"})){if(x.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=w,this.y/=w,this.z/=w),x.length===2&&(this.x/=w,this.y/=_),x.length===3&&(this.x/=w,this.y/=_,this.z/=C)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var b=this.x,x=this.y,v=this.z;return b*b+x*x+v*v}},{key:"dot",value:function(b,x,v){return b instanceof u.default.Vector?this.dot(b.x,b.y,b.z):this.x*(b||0)+this.y*(x||0)+this.z*(v||0)}},{key:"cross",value:function(w){var x=this.y*w.z-this.z*w.y,v=this.z*w.x-this.x*w.z,w=this.x*w.y-this.y*w.x;return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,x,v,w):new u.default.Vector(x,v,w)}},{key:"dist",value:function(b){return b.copy().sub(this).mag()}},{key:"normalize",value:function(){var b=this.mag();return b!==0&&this.mult(1/b),this}},{key:"limit",value:function(b){var x=this.magSq();return b*b<x&&this.div(Math.sqrt(x)).mult(b),this}},{key:"setMag",value:function(b){return this.normalize().mult(b)}},{key:"heading",value:function(){var b=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(b):b}},{key:"setHeading",value:function(b){this.isPInst&&(b=this._toRadians(b));var x=this.mag();return this.x=x*Math.cos(b),this.y=x*Math.sin(b),this}},{key:"rotate",value:function(x){var x=this.heading()+x,v=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*v,this.y=Math.sin(x)*v,this}},{key:"angleBetween",value:function(b){var x;return this.magSq()*b.magSq()==0?NaN:(x=this.cross(b),b=Math.atan2(x.mag(),this.dot(b))*Math.sign(x.z||1),this.isPInst?this._fromRadians(b):b)}},{key:"lerp",value:function(b,x,v,w){return b instanceof u.default.Vector?this.lerp(b.x,b.y,b.z,x):(this.x+=(b-this.x)*w||0,this.y+=(x-this.y)*w||0,this.z+=(v-this.z)*w||0,this)}},{key:"slerp",value:function(b,x){if(x!==0){if(x===1)return this.set(b);var v=this.mag(),w=b.mag();if(v*w==0)this.mult(1-x).add(b.x*x,b.y*x,b.z*x);else{var _=this.cross(b),C=_.mag(),S=Math.atan2(C,this.dot(b));if(0<C)_.x/=C,_.y/=C,_.z/=C;else{if(S<.5*Math.PI)return this.mult(1-x).add(b.x*x,b.y*x,b.z*x),this;this.z===0&&b.z===0?_.set(0,0,1):this.x!==0?_.set(this.y,-this.x,0).normalize():_.set(1,0,0)}C=_.cross(this),b=1-x+x*w/v,_=b*Math.cos(x*S),w=b*Math.sin(x*S),this.x=this.x*_+C.x*w,this.y=this.y*_+C.y*w,this.z=this.z*_+C.z*w}}return this}},{key:"reflect",value:function(b){return b.normalize(),this.sub(b.mult(2*this.dot(b)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(C,x,v){var w,_,C=C instanceof u.default.Vector?(w=C.x||0,_=C.y||0,C.z||0):Array.isArray(C)?(w=C[0]||0,_=C[1]||0,C[2]||0):(w=C||0,_=x||0,v||0);return this.x===w&&this.y===_&&this.z===C}}])&&d(h.prototype,g),y&&d(h,y),m}();var p=u.default.Vector;s.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(f,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f},l="_lcg_random_state",u=4294967296,c=0,f=(a.default.prototype._lcg=function(d){return this[d]=(1664525*this[d]+1013904223)%u,this[d]/u},a.default.prototype._lcgSetSeed=function(d,p){this[d]=(p??Math.random()*u)>>>0},a.default.prototype.randomSeed=function(d){this._lcgSetSeed(l,d),this._gaussian_previous=!1},a.default.prototype.random=function(d,p){var m,h;return a.default._validateParameters("random",arguments),m=this[l]!=null?this._lcg(l):Math.random(),d===void 0?m:p===void 0?Array.isArray(d)?d[Math.floor(m*d.length)]:m*d:(p<d&&(h=d,d=p,p=h),m*(p-d)+d)},a.default.prototype.randomGaussian=function(d){var p,m,h,g,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)p=c,this._gaussian_previous=!1;else{for(;1<=(g=(m=this.random(2)-1)*m+(h=this.random(2)-1)*h););p=m*(g=Math.sqrt(-2*Math.log(g)/g)),c=h*g,this._gaussian_previous=!0}return p*y+(d||0)},a.default);s.default=f},{"../core/main":280}],315:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var m=f();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype._angleMode=c.RADIANS,u.default.prototype.acos=function(p){return this._fromRadians(Math.acos(p))},u.default.prototype.asin=function(p){return this._fromRadians(Math.asin(p))},u.default.prototype.atan=function(p){return this._fromRadians(Math.atan(p))},u.default.prototype.atan2=function(p,m){return this._fromRadians(Math.atan2(p,m))},u.default.prototype.cos=function(p){return Math.cos(this._toRadians(p))},u.default.prototype.sin=function(p){return Math.sin(this._toRadians(p))},u.default.prototype.tan=function(p){return Math.tan(this._toRadians(p))},u.default.prototype.degrees=function(p){return p*c.RAD_TO_DEG},u.default.prototype.radians=function(p){return p*c.DEG_TO_RAD},u.default.prototype.angleMode=function(p){if(u.default._validateParameters("angleMode",arguments),p===void 0)return this._angleMode;p!==c.DEGREES&&p!==c.RADIANS||p!==this._angleMode&&(p===c.RADIANS?(this._setProperty("pRotationX",this.pRotationX*c.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*c.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*c.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*c.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*c.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*c.RAD_TO_DEG)),this._angleMode=p)},u.default.prototype._toRadians=function(p){return this._angleMode===c.DEGREES?p*c.DEG_TO_RAD:p},u.default.prototype._toDegrees=function(p){return this._angleMode===c.RADIANS?p*c.RAD_TO_DEG:p},u.default.prototype._fromRadians=function(p){return this._angleMode===c.DEGREES?p*c.RAD_TO_DEG:p},u.default.prototype._fromDegrees=function(p){return this._angleMode===c.RADIANS?p*c.DEG_TO_RAD:p};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(o,i,s){"use strict";o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.textAlign=function(l,u){var c;return a.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},a.default.prototype.textLeading=function(l){var u;return a.default._validateParameters("textLeading",arguments),(u=this._renderer).textLeading.apply(u,arguments)},a.default.prototype.textSize=function(l){var u;return a.default._validateParameters("textSize",arguments),(u=this._renderer).textSize.apply(u,arguments)},a.default.prototype.textStyle=function(l){var u;return a.default._validateParameters("textStyle",arguments),(u=this._renderer).textStyle.apply(u,arguments)},a.default.prototype.textWidth=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];if(u[0]+="",a.default._validateParameters("textWidth",u),u[0].length===0)return 0;for(var f=u[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),d=[],p=0;p<f.length;p++)d.push(this._renderer.textWidth(f[p]));return Math.max.apply(Math,d)},a.default.prototype.textAscent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textAscent",u),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textDescent",u),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(l){return a.default._validateParameters("textWrap",[l]),this._renderer.textWrap(l)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(m=o("../core/main"))&&m.__esModule?m:{default:m},c=p(o("../core/constants")),f=p(o("opentype.js"));function d(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,d=function(){return h},h)}function p(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var g=d();if(g&&g.has(h))return g.get(h);var y,b,x={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h)Object.prototype.hasOwnProperty.call(h,y)&&((b=v?Object.getOwnPropertyDescriptor(h,y):null)&&(b.get||b.set)?Object.defineProperty(x,y,b):x[y]=h[y]);return x.default=h,g&&g.set(h,x),x}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadFont=function(h,g,y){u.default._validateParameters("loadFont",arguments);var b=new u.default.Font(this),x=this;return f.load(h,function(_,C){if(_)return u.default._friendlyFileLoadError(4,h),y!==void 0?y(_):void console.error(_,h);b.font=C,g!==void 0&&g(b),x._decrementPreload();var _=h.split("\\").pop().split("/").pop(),C=_.lastIndexOf("."),S=C<1?null:_.slice(C+1);["ttf","otf","woff","woff2"].includes(S)&&(S=_.slice(0,C!==-1?C:0),(_=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(h,`);
}
`))),document.head.appendChild(_))}),b},u.default.prototype.text=function(h,g,y,b,x){var v;return u.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(v=this._renderer).text.apply(v,arguments):this},u.default.prototype.textFont=function(h,g){if(u.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var m=u.default;s.default=m},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(o,i,s){"use strict";function a(E){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../core/main"))&&l.__esModule?l:{default:l},u=function(E){if(E&&E.__esModule)return E;if(E===null||f(E)!=="object"&&typeof E!="function")return{default:E};var A=c();if(A&&A.has(E))return A.get(E);var N,k={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in E){var I;Object.prototype.hasOwnProperty.call(E,N)&&((I=M?Object.getOwnPropertyDescriptor(E,N):null)&&(I.get||I.set)?Object.defineProperty(k,N,I):k[N]=E[N])}return k.default=E,A&&A.set(E,k),k}(o("../core/constants"));function c(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,c=function(){return E},E)}function f(E){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(A){return a(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":a(A)})(E)}function d(E,A){for(var N=0;N<A.length;N++){var k=A[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}function p(E,A){var N=E.length;return E[A<0?A%N+N:A%N]}function m(E,A,N,k){var M,I,L;return k?(m.tmpPoint1===void 0&&(m.tmpPoint1=[],m.tmpPoint2=[]),I=m.tmpPoint1,L=m.tmpPoint2,I.x=A.x-E.x,I.y=A.y-E.y,L.x=N.x-A.x,L.y=N.y-A.y,M=I.x*L.x+I.y*L.y,I=Math.sqrt(I.x*I.x+I.y*I.y),L=Math.sqrt(L.x*L.x+L.y*L.y),Math.acos(M/(I*L))<k):(A[0]-E[0])*(N[1]-E[1])-(N[0]-E[0])*(A[1]-E[1])==0}function h(F,q,z,ee,ae,I,L,P,R){var V=1-R,U=Math.pow(V,3),Y=Math.pow(V,2),$=R*R,X=$*R,G=U*F+3*Y*R*z+3*V*R*R*ae+X*L,U=U*q+3*Y*R*ee+3*V*R*R*I+X*P,Y=F+2*R*(z-F)+$*(ae-2*z+F),X=q+2*R*(ee-q)+$*(I-2*ee+q),pe=z+2*R*(ae-z)+$*(L-2*ae+z),$=ee+2*R*(I-ee)+$*(P-2*I+ee),F=V*F+R*z,z=V*q+R*ee,q=V*ae+R*L,ee=V*I+R*P,ae=90-180*Math.atan2(Y-pe,X-$)/Math.PI;return(pe<Y||X<$)&&(ae+=180),{x:G,y:U,m:{x:Y,y:X},n:{x:pe,y:$},start:{x:F,y:z},end:{x:q,y:ee},alpha:ae}}function g(E,A,N,k,M,I,L,P,R){return R==null?C(E,A,N,k,M,I,L,P):h(E,A,N,k,M,I,L,P,function(V,G,U,Y,X,pe,$,F,z){if(!(z<0||C(V,G,U,Y,X,pe,$,F)<z)){var q,ee=.5,ae=1-ee;for(q=C(V,G,U,Y,X,pe,$,F,ae);.01<Math.abs(q-z);)q=C(V,G,U,Y,X,pe,$,F,ae+=(q<z?1:-1)*(ee/=2));return ae}}(E,A,N,k,M,I,L,P,R))}function y(E,A,N){for(var k,M,I,L,P,R=0,V=0,G=(E=function(U,Y){function X(Ae,Me,ze){var lt,We;if(!Ae)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Ae[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Ae[0]){case"M":Me.X=Ae[1],Me.Y=Ae[2];break;case"A":Ae=["C"].concat(x.apply(0,[Me.x,Me.y].concat(Ae.slice(1))));break;case"S":We=ze==="C"||ze==="S"?(lt=2*Me.x-Me.bx,2*Me.y-Me.by):(lt=Me.x,Me.y),Ae=["C",lt,We].concat(Ae.slice(1));break;case"T":ze==="Q"||ze==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Ae=["C"].concat(_(Me.x,Me.y,Me.qx,Me.qy,Ae[1],Ae[2]));break;case"Q":Me.qx=Ae[1],Me.qy=Ae[2],Ae=["C"].concat(_(Me.x,Me.y,Ae[1],Ae[2],Ae[3],Ae[4]));break;case"L":Ae=["C"].concat(w(Me.x,Me.y,Ae[1],Ae[2]));break;case"H":Ae=["C"].concat(w(Me.x,Me.y,Ae[1],Me.y));break;case"V":Ae=["C"].concat(w(Me.x,Me.y,Me.x,Ae[1]));break;case"Z":Ae=["C"].concat(w(Me.x,Me.y,Me.X,Me.Y))}return Ae}function pe(Ae,Me){if(7<Ae[Me].length){Ae[Me].shift();for(var ze=Ae[Me];ze.length;)Q[Me]="A",q&&(le[Me]="A"),Ae.splice(Me++,0,["C"].concat(ze.splice(0,6)));Ae.splice(Me,1),F=Math.max(z.length,q&&q.length||0)}}function $(Ae,Me,ze,lt,We){Ae&&Me&&Ae[We][0]==="M"&&Me[We][0]!=="M"&&(Me.splice(We,0,["M",lt.x,lt.y]),ze.bx=0,ze.by=0,ze.x=Ae[We][1],ze.y=Ae[We][2],F=Math.max(z.length,q&&q.length||0))}var F,z=b(U),q=Y&&b(Y),ee={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],le=[],ie="",Z="";F=Math.max(z.length,q&&q.length||0);for(var ge=0;ge<F;ge++){(ie=z[ge]?z[ge][0]:ie)!=="C"&&(Q[ge]=ie,ge&&(Z=Q[ge-1])),z[ge]=X(z[ge],ee,Z),Q[ge]!=="A"&&ie==="C"&&(Q[ge]="C"),pe(z,ge),q&&((ie=q[ge]?q[ge][0]:ie)!=="C"&&(le[ge]=ie,ge&&(Z=le[ge-1])),q[ge]=X(q[ge],ae,Z),le[ge]!=="A"&&ie==="C"&&(le[ge]="C"),pe(q,ge)),$(z,q,ee,ae,ge),$(q,z,ae,ee,ge);var ne=z[ge],ye=q&&q[ge],xe=ne.length,Ne=q&&ye.length;ee.x=ne[xe-2],ee.y=ne[xe-1],ee.bx=parseFloat(ne[xe-4])||ee.x,ee.by=parseFloat(ne[xe-3])||ee.y,ae.bx=q&&(parseFloat(ye[Ne-4])||ae.x),ae.by=q&&(parseFloat(ye[Ne-3])||ae.y),ae.x=q&&ye[Ne-2],ae.y=q&&ye[Ne-1]}return q?[z,q]:z}(E)).length;V<G;V++){if((I=E[V])[0]==="M")k=+I[1],M=+I[2];else{if(A<R+(L=g(k,M,I[1],I[2],I[3],I[4],I[5],I[6]))&&!N)return{x:(P=g(k,M,I[1],I[2],I[3],I[4],I[5],I[6],A-R)).x,y:P.y,alpha:P.alpha};R+=L,k=+I[5],M=+I[6]}I.shift()}return P=(P=N?R:h(k,M,I[0],I[1],I[2],I[3],I[4],I[5],1)).alpha?{x:P.x,y:P.y,alpha:P.alpha}:P}function b(E){var A=[],N=0,k=0,M=0,I=0,L=0;if(E){E[0][0]==="M"&&(M=N=+E[0][1],I=k=+E[0][2],L++,A[0]=["M",N,k]);for(var P,R,V=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",G=L,U=E.length;G<U;G++){if(A.push(P=[]),(R=E[G])[0]!==R[0].toUpperCase())switch(P[0]=R[0].toUpperCase(),P[0]){case"A":P[1]=R[1],P[2]=R[2],P[3]=R[3],P[4]=R[4],P[5]=R[5],P[6]=+(R[6]+N),P[7]=+(R[7]+k);break;case"V":P[1]=+R[1]+k;break;case"H":P[1]=+R[1]+N;break;case"R":for(var Y,X=2,pe=(Y=[N,k].concat(R.slice(1))).length;X<pe;X++)Y[X]=+Y[X]+N,Y[++X]=+Y[X]+k;A.pop(),A=A.concat(v(Y,V));break;case"M":M=+R[1]+N,I=+R[2]+k;break;default:for(var $=1,F=R.length;$<F;$++)P[$]=+R[$]+($%2?N:k)}else if(R[0]==="R")Y=[N,k].concat(R.slice(1)),A.pop(),A=A.concat(v(Y,V)),P=["R"].concat(R.slice(-2));else for(var z=0,q=R.length;z<q;z++)P[z]=R[z];switch(P[0]){case"Z":N=M,k=I;break;case"H":N=P[1];break;case"V":k=P[1];break;case"M":M=P[P.length-2],I=P[P.length-1];break;default:N=P[P.length-2],k=P[P.length-1]}}}return A}function x(E,A,N,k,q,Q,ee,P,R,V){function G(Ne,Ae,Me){return{x:Ne*Math.cos(Me)-Ae*Math.sin(Me),y:Ne*Math.sin(Me)+Ae*Math.cos(Me)}}var U,F=Math.PI,z=120*F/180,Y=F/180*(+q||0),X=[],pe=(V?(ge=V[0],U=V[1],ie=V[2],Z=V[3]):(E=(ae=G(E,A,-Y)).x,A=ae.y,1<(pe=($=(E-(P=(ae=G(P,R,-Y)).x))/2)*$/(N*N)+(ae=(A-(R=ae.y))/2)*ae/(k*k))&&(N*=pe=Math.sqrt(pe),k*=pe),pe=N*N,le=k*k,ie=(Q=(Q===ee?-1:1)*Math.sqrt(Math.abs((pe*le-pe*ae*ae-le*$*$)/(pe*ae*ae+le*$*$))))*N*ae/k+(E+P)/2,Z=Q*-k*$/N+(A+R)/2,ge=Math.asin(((A-Z)/k).toFixed(9)),U=Math.asin(((R-Z)/k).toFixed(9)),(ge=E<ie?F-ge:ge)<0&&(ge=2*F+ge),(U=P<ie?F-U:U)<0&&(U=2*F+U),ee&&U<ge&&(ge-=2*F),!ee&&ge<U&&(U-=2*F)),U-ge),$=(Math.abs(pe)>z&&(le=U,ae=P,Q=R,U=ge+z*(ee&&ge<U?1:-1),X=x(P=ie+N*Math.cos(U),R=Z+k*Math.sin(U),N,k,q,0,ee,ae,Q,[U,le,ie,Z])),pe=U-ge,Math.cos(ge)),F=Math.sin(ge),z=Math.cos(U),q=Math.sin(U),ee=Math.tan(pe/4),ae=4/3*N*ee,Q=4/3*k*ee,le=[E,A],ie=[E+ae*F,A-Q*$],Z=[P+ae*q,R-Q*z],ge=[P,R];if(ie[0]=2*le[0]-ie[0],ie[1]=2*le[1]-ie[1],V)return[ie,Z,ge].concat(X);for(var ne=[],ye=0,xe=(X=[ie,Z,ge].concat(X).join().split(",")).length;ye<xe;ye++)ne[ye]=ye%2?G(X[ye-1],X[ye],Y).y:G(X[ye],X[ye+1],Y).x;return ne}function v(E,A){for(var N=[],k=0,M=E.length;k<M-2*!A;k+=2){var I=[{x:+E[k-2],y:+E[k-1]},{x:+E[k],y:+E[k+1]},{x:+E[k+2],y:+E[k+3]},{x:+E[k+4],y:+E[k+5]}];A?k?M-4===k?I[3]={x:+E[0],y:+E[1]}:M-2===k&&(I[2]={x:+E[0],y:+E[1]},I[3]={x:+E[2],y:+E[3]}):I[0]={x:+E[M-2],y:+E[M-1]}:M-4===k?I[3]=I[2]:k||(I[0]={x:+E[k],y:+E[k+1]}),N.push(["C",(-I[0].x+6*I[1].x+I[2].x)/6,(-I[0].y+6*I[1].y+I[2].y)/6,(I[1].x+6*I[2].x-I[3].x)/6,(I[1].y+6*I[2].y-I[3].y)/6,I[2].x,I[2].y])}return N}function w(E,A,N,k){return[E,A,N,k,N,k]}function _(E,A,N,k,M,I){return[1/3*E+2/3*N,1/3*A+2/3*k,1/3*M+2/3*N,1/3*I+2/3*k,M,I]}function C(E,A,N,k,M,I,L,P,R){for(var V=(R=1<(R=R??1)?1:R<0?0:R)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],U=0,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],X=0;X<12;X++){var $=V*G[X]+V,pe=S($,E,N,M,L),$=S($,A,k,I,P);U+=Y[X]*Math.sqrt(pe*pe+$*$)}return V*U}function S(E,A,N,k,M){return E*(E*(-3*A+9*N-9*k+3*M)+6*A-12*N+6*k)-3*A+3*N}l.default.Font=function(){function E(M){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.parent=M,this.cache={},this.font=void 0}var A,N,k;return A=E,(N=[{key:"textBounds",value:function(M){var I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,P=4<arguments.length?arguments[4]:void 0,R=P&&P.renderer&&P.renderer._pInst||this.parent,V=R._renderer.drawingContext,G=(V.textAlign||u.LEFT,V.textBaseline||u.BASELINE,G||R._renderer._textSize);if(!Q){for(var U=[],Y=[],X=[],pe=(X[0]=[],[]),$=this._scale(G),F=R._renderer.textLeading(),z=0,q=(this.font.forEachGlyph(M,I,L,G,P,function(Z,ge,ne,ye){var xe=Z.getMetrics();Z.index===0?X[z+=1]=[]:(X[z].push(ge+xe.xMin*$),X[z].push(ge+xe.xMax*$),pe.push(ne+z*F+-xe.yMin*$),pe.push(ne+z*F+-xe.yMax*$))}),0<X[z].length&&(U[z]=Math.min.apply(null,X[z]),Y[z]=Math.max.apply(null,X[z])),0),ee=0;ee<=z;ee++){U[ee]=Math.min.apply(null,X[ee]),Y[ee]=Math.max.apply(null,X[ee]);var ae=Y[ee]-U[ee];q<ae&&(q=ae)}var V=Math.min.apply(null,U),Q={x:V,y:L=Math.min.apply(null,pe),h:Math.max.apply(null,pe)-L,w:q,advance:V-I},G=this._handleAlignment(R._renderer,M,Q.x,Q.y,Q.w+Q.advance);Q.x=G.x,Q.y=G.y}return Q}},{key:"textToPoints",value:function(M,I,L,P,R){var V=I,G=[],U=M.split(/\r?\n|\r|\n/g);P=P||this.parent._renderer._textSize;for(var Y,X,pe,$=0;$<U.length;$++){var F=0;I=V;for(var z=(z=U[$]).replace("	","  "),q=this._getGlyphs(z),ee=0;ee<q.length;ee++){if(X=z,!((pe=q)[Y=ee].name&&pe[Y].name==="space"||X.length===pe.length&&X[Y]===" "))for(var ae=function(Z){for(var ge,ne=[],ye=0;ye<Z.length;ye++)Z[ye].type==="M"&&(ge&&ne.push(ge),ge=[]),ge.push(function(xe){var Ne=[xe.type];return xe.type==="M"||xe.type==="L"?Ne.push(xe.x,xe.y):xe.type==="C"?Ne.push(xe.x1,xe.y1,xe.x2,xe.y2,xe.x,xe.y):xe.type==="Q"&&Ne.push(xe.x1,xe.y1,xe.x,xe.y),Ne}(Z[ye]));return ne.push(ge),ne}(q[ee].getPath(I,L,P).commands),Q=0;Q<ae.length;Q++)for(var le=function(Z,ge){for(var ge=function(Me,ze){if(f(Me)!=="object")Me=ze;else for(var lt in ze)Me[lt]===void 0&&(Me[lt]=ze[lt]);return Me}(ge,{sampleFactor:.1,simplifyThreshold:0}),ne=y(Z,0,1),ye=ne/(ne*ge.sampleFactor),xe=[],Ne=0;Ne<ne;Ne+=ye)xe.push(y(Z,Ne));return ge.simplifyThreshold&&function(Ae){for(var Me=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ze=0,lt=Ae.length-1;3<Ae.length&&0<=lt;--lt)m(p(Ae,lt-1),p(Ae,lt),p(Ae,lt+1),Me)&&(Ae.splice(lt%Ae.length,1),ze++)}(xe,ge.simplifyThreshold),xe}(ae[Q],R),ie=0;ie<le.length;ie++)le[ie].x+=F,G.push(le[ie]);F+=q[ee].advanceWidth*this._scale(P)}L+=this.parent._renderer._textLeading}return G}},{key:"_getGlyphs",value:function(M){return this.font.stringToGlyphs(M)}},{key:"_getPath",value:function(M,V,L,P){var R=(P&&P.renderer&&P.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(R,M,V,L);return this.font.getPath(M,V.x,V.y,R._textSize,P)}},{key:"_getPathData",value:function(M,I,L,P){var R=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,I,L,P):f(I)==="object"&&(P=I),P&&typeof P.decimals=="number"&&(R=P.decimals),M.toPathData(R)}},{key:"_getSVG",value:function(M,I,L,P){var R=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,I,L,P):f(I)==="object"&&(P=I),P&&(typeof P.decimals=="number"&&(R=P.decimals),typeof P.strokeWidth=="number"&&(M.strokeWidth=P.strokeWidth),P.fill!==void 0&&(M.fill=P.fill),P.stroke!==void 0&&(M.stroke=P.stroke)),M.toSVG(R)}},{key:"_renderPath",value:function(G,Y,X,P){var R=P&&P.renderer||this.parent._renderer,V=R.drawingContext,G=(f(G)==="object"&&G.commands?G:this._getPath(G,Y,X,P)).commands,U=(V.beginPath(),!0),Y=!1,X=void 0;try{for(var pe,$=G[Symbol.iterator]();!(U=(pe=$.next()).done);U=!0){var F=pe.value;F.type==="M"?V.moveTo(F.x,F.y):F.type==="L"?V.lineTo(F.x,F.y):F.type==="C"?V.bezierCurveTo(F.x1,F.y1,F.x2,F.y2,F.x,F.y):F.type==="Q"?V.quadraticCurveTo(F.x1,F.y1,F.x,F.y):F.type==="Z"&&V.closePath()}}catch(z){Y=!0,X=z}finally{try{U||$.return==null||$.return()}finally{if(Y)throw X}}return R._doStroke&&R._strokeSet&&!R._clipping&&V.stroke(),R._doFill&&!R._clipping&&(R._fillSet||R._setFill(u._DEFAULT_TEXT_FILL),V.fill()),this}},{key:"_textWidth",value:function(M,I){return this.font.getAdvanceWidth(M,I)}},{key:"_textAscent",value:function(M){return this.font.ascender*this._scale(M)}},{key:"_textDescent",value:function(M){return-this.font.descender*this._scale(M)}},{key:"_scale",value:function(M){return 1/this.font.unitsPerEm*(M||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(M,I,L,P,R){var V=M._textSize;switch(R===void 0&&(R=this._textWidth(I,V)),M._textAlign){case u.CENTER:L-=R/2;break;case u.RIGHT:L-=R}switch(M._textBaseline){case u.TOP:P+=this._textAscent(V);break;case u.CENTER:P+=this._textAscent(V)/2;break;case u.BOTTOM:P-=this._textDescent(V)}return{x:L,y:P}}}])&&d(A.prototype,N),k&&d(A,k),E}(),o=l.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.append=function(a,l){return a.push(l),a},o.default.prototype.arrayCopy=function(a,l,u,c,f){var d,p;a=f!==void 0?(p=Math.min(f,a.length),d=c,a.slice(l,p+l)):(p=u!==void 0?(p=u,Math.min(p,a.length)):a.length,u=l,a.slice(d=0,p)),Array.prototype.splice.apply(u,[d,p].concat(a))},o.default.prototype.concat=function(a,l){return a.concat(l)},o.default.prototype.reverse=function(a){return a.reverse()},o.default.prototype.shorten=function(a){return a.pop(),a},o.default.prototype.shuffle=function(a,l){for(var u,c,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),d=(a=l||f?a:a.slice()).length;1<d;)u=this.random(0,1)*d|0,c=a[--d],a[d]=a[u],a[u]=c;return a},o.default.prototype.sort=function(a,c){var u=c?a.slice(0,Math.min(c,a.length)):a,c=c?a.slice(Math.min(c,a.length)):[];return(u=typeof u[0]=="string"?u.sort():u.sort(function(f,d){return f-d})).concat(c)},o.default.prototype.splice=function(a,l,u){return Array.prototype.splice.apply(a,[u,0].concat(l)),a},o.default.prototype.subset=function(a,l,u){return u!==void 0?a.slice(l,l+u):a.slice(l,a.length)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.float=function(l){return l instanceof Array?l.map(parseFloat):parseFloat(l)},a.default.prototype.int=function(l){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return l===1/0||l==="Infinity"?1/0:l===-1/0||l==="-Infinity"?-1/0:typeof l=="string"?parseInt(l,u):typeof l=="number"?0|l:typeof l=="boolean"?l?1:0:l instanceof Array?l.map(function(c){return a.default.prototype.int(c,u)}):void 0},a.default.prototype.str=function(l){return l instanceof Array?l.map(a.default.prototype.str):String(l)},a.default.prototype.boolean=function(l){return typeof l=="number"?l!==0:typeof l=="string"?l.toLowerCase()==="true":typeof l=="boolean"?l:l instanceof Array?l.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(l){return l=a.default.prototype.int(l,10),typeof l=="number"?(l+128)%256-128:l instanceof Array?l.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(l){return typeof l!="number"||isNaN(l)?l instanceof Array?l.map(a.default.prototype.char):typeof l=="string"?a.default.prototype.char(parseInt(l,10)):void 0:String.fromCharCode(l)},a.default.prototype.unchar=function(l){return typeof l=="string"&&l.length===1?l.charCodeAt(0):l instanceof Array?l.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(l,u){if(u=u??8,l instanceof Array)return l.map(function(f){return a.default.prototype.hex(f,u)});if(l===1/0||l===-1/0)return(l===1/0?"F":"0").repeat(u);if(typeof l=="number"){l<0&&(l=4294967295+l+1);for(var c=Number(l).toString(16).toUpperCase();c.length<u;)c="0".concat(c);return c=c.length>=u?c.substring(c.length-u,c.length):c}},a.default.prototype.unhex=function(l){return l instanceof Array?l.map(a.default.prototype.unhex):parseInt("0x".concat(l),16)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(p=o("../core/main"))&&p.__esModule?p:{default:p};function l(m,h){return function(g){if(Array.isArray(g))return g}(m)||function(g,y){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var b=[],x=!0,v=!1,w=void 0;try{for(var _,C=g[Symbol.iterator]();!(x=(_=C.next()).done)&&(b.push(_.value),!y||b.length!==y);x=!0);}catch(S){v=!0,w=S}finally{try{x||C.return==null||C.return()}finally{if(v)throw w}}return b}}(m,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(m,h,g){var b=l(m.toString().split("."),2),y=b[0],b=b[1];return g===void 0?(y=y.padStart(h,"0"),b?y+"."+b:y):(y=(m=l(m.toFixed(g).toString().split("."),2))[0],b=m[1],y=y.padStart(h,"0"),b===void 0?y:y+"."+b)}function c(b,h){var g=(b=b.toString()).indexOf("."),y=g!==-1?b.substring(g):"",b=(b=g!==-1?b.substring(0,g):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(h===0)y="";else if(h!==void 0)if(h>y.length)for(var x=h-(y+=g===-1?".":"").length+1,v=0;v<x;v++)y+="0";else y=y.substring(0,h+1);return b+y}function f(m){return 0<parseFloat(m)?"+".concat(m.toString()):m.toString()}function d(m){return 0<=parseFloat(m)?" ".concat(m.toString()):m.toString()}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),a.default.prototype.join=function(m,h){return a.default._validateParameters("join",arguments),m.join(h)},a.default.prototype.match=function(m,h){return a.default._validateParameters("match",arguments),m.match(h)},a.default.prototype.matchAll=function(m,h){a.default._validateParameters("matchAll",arguments);for(var g=new RegExp(h,"g"),y=g.exec(m),b=[];y!==null;)b.push(y),y=g.exec(m);return b},a.default.prototype.nf=function(m,h,g){return a.default._validateParameters("nf",arguments),m instanceof Array?m.map(function(y){return u(y,h,g)}):Object.prototype.toString.call(m)==="[object Arguments]"?m.length===3?this.nf(m[0],m[1],m[2]):m.length===2?this.nf(m[0],m[1]):this.nf(m[0]):u(m,h,g)},a.default.prototype.nfc=function(m,h){return a.default._validateParameters("nfc",arguments),m instanceof Array?m.map(function(g){return c(g,h)}):c(m,h)},a.default.prototype.nfp=function(){for(var m=arguments.length,h=new Array(m),g=0;g<m;g++)h[g]=arguments[g];a.default._validateParameters("nfp",h);var y=a.default.prototype.nf.apply(this,h);return y instanceof Array?y.map(f):f(y)},a.default.prototype.nfs=function(){for(var m=arguments.length,h=new Array(m),g=0;g<m;g++)h[g]=arguments[g];a.default._validateParameters("nfs",h);var y=a.default.prototype.nf.apply(this,h);return y instanceof Array?y.map(d):d(y)},a.default.prototype.split=function(m,h){return a.default._validateParameters("split",arguments),m.split(h)},a.default.prototype.splitTokens=function(m,h){var g,y;return a.default._validateParameters("splitTokens",arguments),y=h!==void 0?(y=/\]/g.exec(h=h),(g=/\[/g.exec(h))&&y?(h=h.slice(0,y.index)+h.slice(y.index+1),g=/\[/g.exec(h),h=h.slice(0,g.index)+h.slice(g.index+1),new RegExp("[\\[".concat(h,"\\]]"),"g")):y?(h=h.slice(0,y.index)+h.slice(y.index+1),new RegExp("[".concat(h,"\\]]"),"g")):g?(h=h.slice(0,g.index)+h.slice(g.index+1),new RegExp("[".concat(h,"\\[]"),"g")):new RegExp("[".concat(h,"]"),"g")):/\s/g,m.split(y).filter(function(b){return b})},a.default.prototype.trim=function(m){return a.default._validateParameters("trim",arguments),m instanceof Array?m.map(this.trim):m.trim()};var p=a.default;s.default=p},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.day=function(){return new Date().getDate()},o.default.prototype.hour=function(){return new Date().getHours()},o.default.prototype.minute=function(){return new Date().getMinutes()},o.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},o.default.prototype.month=function(){return new Date().getMonth()+1},o.default.prototype.second=function(){return new Date().getSeconds()},o.default.prototype.year=function(){return new Date().getFullYear()},o=o.default,s.default=o},{"../core/main":280}],323:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=(o("./p5.Geometry"),function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var h=f();if(h&&h.has(m))return h.get(m);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var x;Object.prototype.hasOwnProperty.call(m,g)&&((x=b?Object.getOwnPropertyDescriptor(m,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=m[g])}return y.default=m,h&&h.set(m,y),y}(o("../core/constants")));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}u.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},u.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},u.default.prototype.buildGeometry=function(m){return this._renderer.buildGeometry(m)},u.default.prototype.freeGeometry=function(m){this._renderer._freeBuffers(m.gid)},u.default.prototype.plane=function(){var m,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),u.default._validateParameters("plane",arguments),"plane|".concat(y,"|").concat(b));return this._renderer.geometryInHash(x)||((m=new u.default.Geometry(y,b,function(){for(var v,w,_=0;_<=this.detailY;_++)for(var C=_/this.detailY,S=0;S<=this.detailX;S++)v=S/this.detailX,w=new u.default.Vector(v-.5,C-.5,0),this.vertices.push(w),this.uvs.push(v,C)})).computeFaces().computeNormals(),y<=1&&b<=1?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,m)),this._renderer.drawBuffersScaled(x,h,g,1),this},u.default.prototype.box=function(m,h,g,y,b){this._assert3d("box"),u.default._validateParameters("box",arguments),m===void 0&&(m=50),h===void 0&&(h=m),g===void 0&&(g=h);var x,v=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,v=(b===void 0&&(b=v?1:4),"box|".concat(y=y===void 0?v?1:4:y,"|").concat(b));return this._renderer.geometryInHash(v)||((x=new u.default.Geometry(y,b,function(){var w=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(_,C){for(var C=4*C,S=0;S<4;S++){var E=_[S],E=new u.default.Vector((2*(1&E)-1)/2,((2&E)-1)/2,((4&E)/2-1)/2);w.vertices.push(E),w.uvs.push(1&S,(2&S)/2)}w.faces.push([C,1+C,2+C]),w.faces.push([2+C,1+C,3+C])})})).computeNormals(),y<=4&&b<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,x)),this._renderer.drawBuffersScaled(v,m,h,g),this},u.default.prototype.sphere=function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),u.default._validateParameters("sphere",arguments),this.ellipsoid(m,m,m,h,g),this};function d(m,h,g,y,b,x,v){m=m<=0?1:m,h=h<0?0:h,g=g<=0?m:g,y=y<3?3:y;for(var w,_,C=(x=x===void 0||x)?-2:0,S=(b=b<1?1:b)+((v=v===void 0?h!==0:v)?2:0),E=Math.atan2(m-h,g),A=Math.sin(E),N=Math.cos(E),k=C;k<=S;++k){var M=k/b,I=g*M,L=void 0,L=k<0?(M=I=0,m):b<k?(I=g,M=1,h):m+(h-m)*M;for(k!==-2&&k!==b+2||(L=0),I-=g/2,w=0;w<y;++w){var P=w/(y-1),V=2*Math.PI*P,R=Math.sin(V),V=Math.cos(V),G=(this.vertices.push(new u.default.Vector(R*L,I,V*L)),void 0),G=k<0?new u.default.Vector(0,-1,0):b<k&&h?new u.default.Vector(0,1,0):new u.default.Vector(R*N,A,V*N);this.vertexNormals.push(G),this.uvs.push(P,M)}}var U=0;if(x){for(_=0;_<y;++_)this.faces.push([U+_,U+y+(_+1)%y,U+y+_]);U+=2*y}for(k=0;k<b;++k){for(w=0;w<y;++w){var Y=(w+1)%y;this.faces.push([U+w,U+Y,U+y+Y]),this.faces.push([U+w,U+y+Y,U+y+w])}U+=y}if(v)for(U+=y,w=0;w<y;++w)this.faces.push([U+w,U+(w+1)%y,U+y])}u.default.prototype.cylinder=function(){var m,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],w=(this._assert3d("cylinder"),u.default._validateParameters("cylinder",arguments),"cylinder|".concat(y,"|").concat(b,"|").concat(x,"|").concat(v));return this._renderer.geometryInHash(w)||(m=new u.default.Geometry(y,b),d.call(m,1,1,1,y,b,x,v),y<=24&&b<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,m)),this._renderer.drawBuffersScaled(w,h,g,h),this},u.default.prototype.cone=function(){var m,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=(this._assert3d("cone"),u.default._validateParameters("cone",arguments),"cone|".concat(y,"|").concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||(m=new u.default.Geometry(y,b),d.call(m,1,0,1,y,b,x,!1),y<=24&&b<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,m)),this._renderer.drawBuffersScaled(v,h,g,h),this},u.default.prototype.ellipsoid=function(){var m,h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:h,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,v=(this._assert3d("ellipsoid"),u.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||((m=new u.default.Geometry(b,x,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,C=Math.PI*_-Math.PI/2,S=Math.cos(C),E=Math.sin(C),A=0;A<=this.detailX;A++){var N=A/this.detailX,M=2*Math.PI*N,k=Math.cos(M),M=Math.sin(M),M=new u.default.Vector(S*M,E,S*k);this.vertices.push(M),this.vertexNormals.push(M),this.uvs.push(N,_)}})).computeFaces(),b<=24&&x<=24?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(v,m)),this._renderer.drawBuffersScaled(v,h,g,y),this},u.default.prototype.torus=function(m,v,g,y){if(this._assert3d("torus"),u.default._validateParameters("torus",arguments),m===void 0)m=50;else if(!m)return;if(v===void 0)v=10;else if(!v)return;g===void 0&&(g=24),y===void 0&&(y=16);var b,x=(v/m).toPrecision(4),v="torus|".concat(x,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(v)||((b=new u.default.Geometry(g,y,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,C=2*Math.PI*_,S=Math.cos(C),E=Math.sin(C),A=1+x*S,N=0;N<=this.detailX;N++){var k=N/this.detailX,M=2*Math.PI*k,L=Math.cos(M),M=Math.sin(M),I=new u.default.Vector(A*L,A*M,x*E),L=new u.default.Vector(S*L,S*M,E);this.vertices.push(I),this.vertexNormals.push(L),this.uvs.push(k,_)}})).computeFaces(),g<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,b)),this._renderer.drawBuffersScaled(v,m,m,m),this},u.default.RendererGL.prototype.point=function(m,h){var g=[];return g.push(new u.default.Vector(m,h,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(g,this.immediateMode.buffers.point),this},u.default.RendererGL.prototype.triangle=function(v){var h=v[0],g=v[1],y=v[2],b=v[3],x=v[4],v=v[5],w=(this.geometryInHash("tri")||((w=new u.default.Geometry(1,1,function(){var S=[];S.push(new u.default.Vector(0,0,0)),S.push(new u.default.Vector(1,0,0)),S.push(new u.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=S,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var _=Math.sign(h*b-y*g+y*v-x*b+x*g-h*v),C=new u.default.Matrix([y-h,b-g,0,0,x-h,v-g,0,0,0,0,_,0,h,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=C,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},u.default.RendererGL.prototype.ellipse=function(m){this.arc(m[0],m[1],m[2],m[3],0,c.TWO_PI,c.OPEN,m[4])},u.default.RendererGL.prototype.arc=function(){var m,h=arguments.length<=0?void 0:arguments[0],g=arguments.length<=1?void 0:arguments[1],y=arguments.length<=2?void 0:arguments[2],b=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],v=arguments.length<=5?void 0:arguments[5],w=arguments.length<=6?void 0:arguments[6],_=(arguments.length<=7?void 0:arguments[7])||25,C=(Math.abs(v-x)>=c.TWO_PI?"".concat(S="ellipse","|"):"".concat(S="arc","|").concat(x,"|").concat(v,"|").concat(w,"|")).concat(_,"|"),S=(this.geometryInHash(C)||((m=new u.default.Geometry(_,1,function(){if(x.toFixed(10)!==v.toFixed(10)){w!==c.PIE&&w!==void 0||(this.vertices.push(new u.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var E=0;E<=_;E++){var N=(v-x)*(E/_)+x,A=.5+Math.cos(N)/2,N=.5+Math.sin(N)/2;this.vertices.push(new u.default.Vector(A,N,0)),this.uvs.push([A,N]),E<_-1&&(this.faces.push([0,E+1,E+2]),this.edges.push([E+1,E+2]))}switch(w){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case c.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case c.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),_<=50?m._edgesToVertices(m):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(S," with more than 50 detail")),this.createBuffers(C,m)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([h,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(C)}finally{this.uMVMatrix=S}return this},u.default.RendererGL.prototype.rect=function(m){var h=m[0],g=m[1],y=m[2],b=m[3];if(m[4]===void 0){var w=this._pInst._glAttributes.perPixelLighting,x=m[4]||(w?1:24),v=m[5]||(w?1:16),w="rect|".concat(x,"|").concat(v),_=(this.geometryInHash(w)||((_=new u.default.Geometry(x,v,function(){for(var G=0;G<=this.detailY;G++)for(var U=G/this.detailY,Y=0;Y<=this.detailX;Y++){var X=Y/this.detailX,pe=new u.default.Vector(X,U,0);this.vertices.push(pe),this.uvs.push(X,U)}0<x&&0<v&&(this.edges=[[0,x],[x,(x+1)*(v+1)-1],[(x+1)*(v+1)-1,(x+1)*v],[(x+1)*v,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(w,_)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([h,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(w)}finally{this.uMVMatrix=_}}else{var w=m[4],_=m[5]===void 0?w:m[5],C=m[6]===void 0?_:m[6],m=m[7]===void 0?C:m[7],M=y,S=b,N=((M+=h)<h&&(N=h,h=M,M=N),(S+=g)<g&&(N=g,g=S,S=N),Math.min((M-h)/2,(S-g)/2)),E=(N<w&&(w=N),N<_&&(_=N),N<C&&(C=N),N<m&&(m=N),h),A=g,N=M,h=S,k=(this.beginShape(),_!==0?(this.vertex(N-_,A),this.quadraticVertex(N,A,N,A+_)):this.vertex(N,A),C!==0?(this.vertex(N,h-C),this.quadraticVertex(N,h,N-C,h)):this.vertex(N,h),m!==0?(this.vertex(E+m,h),this.quadraticVertex(E,h,E,h-m)):this.vertex(E,h),w!==0?(this.vertex(E,A+w),this.quadraticVertex(E,A,E+w,A)):this.vertex(E,A),!(this.immediateMode.geometry.uvs.length=0)),g=!1,M=void 0;try{for(var I,L=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(I=L.next()).done);k=!0){var P=I.value,R=(P.x-E)/y,V=(P.y-A)/b;this.immediateMode.geometry.uvs.push(R,V)}}catch($){g=!0,M=$}finally{try{k||L.return==null||L.return()}finally{if(g)throw M}}this.endShape(c.CLOSE)}return this},u.default.RendererGL.prototype.quad=function(m,h,g,y,b,x,v,w,_,C,S,E){var A=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,N=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(m,"|").concat(h,"|").concat(g,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(v,"|").concat(w,"|").concat(_,"|").concat(C,"|").concat(S,"|").concat(E,"|").concat(A,"|").concat(N);if(!this.geometryInHash(k)){var M=new u.default.Geometry(A,N,function(){for(var Y=1/(this.detailX-1),X=1/(this.detailY-1),pe=0;pe<this.detailY;pe++)for(var $=0;$<this.detailX;$++){var F=$*Y,z=pe*X;this.vertices.push(new u.default.Vector((1-F)*((1-z)*m+z*C)+F*((1-z)*y+z*v),(1-F)*((1-z)*h+z*S)+F*((1-z)*b+z*w),(1-F)*((1-z)*g+z*E)+F*((1-z)*x+z*_))),this.uvs.push([F,z])}});M.faces=[];for(var I=0;I<N-1;I++)for(var L=0;L<A-1;L++){var P=L+I*A,R=L+1+(I+1)*A,V=L+(I+1)*A;M.faces.push([P,L+1+I*A,R]),M.faces.push([P,R,V])}M.computeNormals();for(var G=[M.edges.length=0,2,3,1],U=0;U<G.length;U++)M.edges.push([G[U],G[(U+1)%G.length]]);M._edgesToVertices(),this.createBuffers(k,M)}return this.drawBuffers(k),this},u.default.RendererGL.prototype.bezier=function(m,h,g,y,b,x,v,w,_,C,S,E){arguments.length===8&&(S=w,C=v,w=x,v=b,b=y,y=g,g=x=_=E=0);var A=this._pInst._bezierDetail||20;this.beginShape();for(var N=0;N<=A;N++){var k=Math.pow(1-N/A,3),M=N/A*3*Math.pow(1-N/A,2),I=3*Math.pow(N/A,2)*(1-N/A),L=Math.pow(N/A,3);this.vertex(m*k+y*M+v*I+C*L,h*k+b*M+w*I+S*L,g*k+x*M+_*I+E*L)}return this.endShape(),this},u.default.RendererGL.prototype.curve=function(m,h,g,y,b,x,v,w,_,C,S,E){arguments.length===8&&(C=v,S=w,v=b,w=y,b=y=g,g=x=_=E=0);var A=this._pInst._curveDetail;this.beginShape();for(var N=0;N<=A;N++){var k=.5*Math.pow(N/A,3),M=.5*Math.pow(N/A,2),I=N/A*.5;this.vertex(k*(3*y-m-3*v+C)+M*(2*m-5*y+4*v-C)+I*(-m+v)+2*y*.5,k*(3*b-h-3*w+S)+M*(2*h-5*b+4*w-S)+I*(-h+w)+2*b*.5,k*(3*x-g-3*_+E)+M*(2*g-5*x+4*_-E)+I*(-g+_)+2*x*.5)}return this.endShape(),this},u.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},u.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var m,h,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,S=0,E=1,A=0;S<1;){if(x=parseFloat(S.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(x),E.toFixed(6)===C.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(S.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(x);break}S+=C,E-=C,++A}}for(var N=this._lookUpTableBezier.length,k=[],M=0;M<4;M++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var I=[];for(M=0;M<4;M++)I.push([]);if(I[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),I[3]=this.curStrokeColor.slice(),_===6){this.isBezier=!0;var v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],L=Math.hypot(v[0]-v[1],w[0]-w[1]),R=Math.hypot(v[1]-v[2],w[1]-w[2]),P=Math.hypot(v[2]-v[3],w[2]-w[3]),R=L+R+P;for(L/=R,P/=R,b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[3][b]*L),k[2].push(k[0][b]*P+k[3][b]*(1-P)),I[1].push(I[0][b]*(1-L)+I[3][b]*L),I[2].push(I[0][b]*P+I[3][b]*(1-P));for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],M=m=h=0;M<4;M++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][M]*k[M][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][M]*I[M][b];m+=v[M]*this._lookUpTableBezier[y][M],h+=w[M]*this._lookUpTableBezier[y][M]}this.vertex(m,h)}this.curFillColor=k[3],this.curStrokeColor=I[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(_===9){this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var V=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(v[0]-v[1],w[0]-w[1],V[0]-V[1]),R=Math.hypot(v[1]-v[2],w[1]-w[2],V[1]-V[2]),U=Math.hypot(v[2]-v[3],w[2]-w[3],V[2]-V[3]),_=G+R+U;for(G/=_,U/=_,b=0;b<4;b++)k[1].push(k[0][b]*(1-G)+k[3][b]*G),k[2].push(k[0][b]*U+k[3][b]*(1-U)),I[1].push(I[0][b]*(1-G)+I[3][b]*G),I[2].push(I[0][b]*U+I[3][b]*(1-U));for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],M=m=h=g=0;M<4;M++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][M]*k[M][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][M]*I[M][b];m+=v[M]*this._lookUpTableBezier[y][M],h+=w[M]*this._lookUpTableBezier[y][M],g+=V[M]*this._lookUpTableBezier[y][M]}this.vertex(m,h,g)}this.curFillColor=k[3],this.curStrokeColor=I[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},u.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var m,h,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var C=1/this._lutQuadraticDetail,S=0,E=1,A=0;S<1;){if(x=parseFloat(S.toFixed(6)),this._lookUpTableQuadratic[A]=this._quadraticCoefficients(x),E.toFixed(6)===C.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(S.toFixed(6)),++A,this._lookUpTableQuadratic[A]=this._quadraticCoefficients(x);break}S+=C,E-=C,++A}}for(var N=this._lookUpTableQuadratic.length,k=[],M=0;M<3;M++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var I=[];for(M=0;M<3;M++)I.push([]);if(I[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),I[2]=this.curStrokeColor.slice(),_===4){this.isQuadratic=!0;var v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],L=Math.hypot(v[0]-v[1],w[0]-w[1]);for(L/=L+Math.hypot(v[1]-v[2],w[1]-w[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[2][b]*L),I[1].push(I[0][b]*(1-L)+I[2][b]*L);for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],M=m=h=0;M<3;M++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][M]*k[M][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][M]*I[M][b];m+=v[M]*this._lookUpTableQuadratic[y][M],h+=w[M]*this._lookUpTableQuadratic[y][M]}this.vertex(m,h)}this.curFillColor=k[2],this.curStrokeColor=I[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(_===6){this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var P=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],R=Math.hypot(v[0]-v[1],w[0]-w[1],P[0]-P[1]);for(R/=R+Math.hypot(v[1]-v[2],w[1]-w[2],P[1]-P[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-R)+k[2][b]*R),I[1].push(I[0][b]*(1-R)+I[2][b]*R);for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],M=m=h=g=0;M<3;M++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][M]*k[M][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][M]*I[M][b];m+=v[M]*this._lookUpTableQuadratic[y][M],h+=w[M]*this._lookUpTableQuadratic[y][M],g+=P[M]*this._lookUpTableQuadratic[y][M]}this.vertex(m,h,g)}this.curFillColor=k[2],this.curStrokeColor=I[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},u.default.RendererGL.prototype.curveVertex=function(){var m,h,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,S=0,E=1,A=0;S<1;){if(x=parseFloat(S.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(x),E.toFixed(6)===C.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(S.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(x);break}S+=C,E-=C,++A}}var N=this._lookUpTableBezier.length;if(_===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<N;b++)h=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],this.vertex(h,g);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}}else if(_===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),m=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<N;b++)h=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],y=m[0]*this._lookUpTableBezier[b][0]+m[1]*this._lookUpTableBezier[b][1]+m[2]*this._lookUpTableBezier[b][2]+m[3]*this._lookUpTableBezier[b][3],this.vertex(h,g,y);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}},u.default.RendererGL.prototype.image=function(m,E,g,A,b,x,v,w,_){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(m),this._pInst.textureMode(c.NORMAL);var C=0,S=(E<=m.width&&(C=E/m.width),1),E=(E+A<=m.width&&(S=(E+A)/m.width),0),A=(g<=m.height&&(E=g/m.height),1);g+b<=m.height&&(A=(g+b)/m.height),this.beginShape(),this.vertex(x,v,0,C,E),this.vertex(x+w,v,0,S,E),this.vertex(x+w,v+_,0,S,A),this.vertex(x,v+_,0,C,A),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var p=u.default;s.default=p},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(m=o("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var g=f();if(g&&g.has(h))return g.get(h);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var v;Object.prototype.hasOwnProperty.call(h,y)&&((v=x?Object.getOwnPropertyDescriptor(h,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=h[y])}return b.default=h,g&&g.set(h,b),b}(o("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}function d(h){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(h)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(h,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}var m=function(){function h(x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new u.default.Matrix,x.uMVMatrix=new u.default.Matrix,this.geometry=new u.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(h.nextGeometryId),h.nextGeometryId++,this.hasTransform=!1}var g,y,b;return g=h,(y=[{key:"transformVertices",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uMVMatrix.multiplyPoint(w)}):x}},{key:"transformNormals",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uNMatrix.multiplyVec3(w)}):x}},{key:"addGeometry",value:function(x){for(var v,w=this,_=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(S,E){return S===w.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),C=((v=this.geometry.vertices).push.apply(v,d(this.transformVertices(x.vertices))),(v=this.geometry.vertexNormals).push.apply(v,d(this.transformNormals(x.vertexNormals))),(v=this.geometry.uvs).push.apply(v,d(x.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,d(x.faces.map(function(S){return S.map(function(E){return E+_})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,d(x.edges.map(function(S){return S.map(function(E){return E+_})}))),d(x.vertexColors));C.length<4*x.vertices.length;)C.push.apply(C,d(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,d(C))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(v===c.TRIANGLE_STRIP||v===c.QUAD_STRIP)for(var _=2;_<x.vertices.length;_++)_%2==0?w.push([_,_-1,_-2]):w.push([_,_-2,_-1]);else if(v===c.TRIANGLE_FAN)for(var C=2;C<x.vertices.length;C++)w.push([0,C-1,C]);else for(var S=0;S<x.vertices.length;S+=3)w.push([S,S+1,S+2]);this.addGeometry(Object.assign({},x,{faces:w}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&p(g.prototype,y),b&&p(g,b),h}();m.nextGeometryId=0,s.default=m},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=o("../core/main"))&&d.__esModule?d:{default:d},u=function(p){if(p&&p.__esModule)return p;if(p===null||f(p)!=="object"&&typeof p!="function")return{default:p};var m=c();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../core/constants"));function c(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,c=function(){return p},p)}function f(p){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}l.default.prototype.orbitControl=function(p,m,h,_){var y=this,b=(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);p===void 0&&(p=1),m===void 0&&(m=p),h===void 0&&(h=1),f(_)!=="object"&&(_={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var S=_.disableTouchActions;this.touchActionsDisabled===!0||S!==void 0&&!S||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,v,w,S=_.freeRotation,_=S!==void 0&&S,C=[],S=(this.touches.forEach(function(L){y._renderer.prevTouches.forEach(function(P){L.id===P.id&&(P={x:L.x,y:L.y,px:P.x,py:P.y},C.push(P))})}),this._renderer.prevTouches=this.touches,0),E=0,A=0,N=0,k=0,M=this.height<this.width?this.height:this.width,I=!1;return 0<C.length?(I=0<C[0].x&&C[0].x<this.width&&0<C[0].y&&C[0].y<this.height,C.length===1?(E=-p*((x=C[0]).x-x.px)/M,A=m*(x.y-x.py)/M):(x=C[0],v=C[1],S=-(Math.hypot(x.x-v.x,x.y-v.y)-Math.hypot(x.px-v.px,x.py-v.py))*h*4e-4,N=.5*(x.x+v.x)-.5*(x.px+v.px),k=.5*(x.y+v.y)-.5*(x.py+v.py)),0<this.touches.length?I&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(I=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(S=Math.sign(this._mouseWheelDeltaY)*h,S*=.01,this._mouseWheelDeltaY=0,I&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(E=-p*this.movedX/M,A=m*this.movedY/M):this.mouseButton===this.RIGHT&&(N=this.movedX,k=this.movedY*b.yScale),I&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),S!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=S),.001<Math.abs(this._renderer.zoomVelocity)?(_?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,E===0&&A===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*E,.6*A),1e-6<this._renderer.rotateVelocity.magSq()?(_?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),N===0&&k===0||!this._renderer.executeRotateAndMove||(x=2*N/this.width,v=2*-k/this.height,this._renderer.moveVelocity.add(.15*x,.15*v)),1e-6<this._renderer.moveVelocity.magSq()?(h=b._getLocalAxes(),p=b.eyeX-b.centerX,m=b.eyeY-b.centerY,M=b.eyeZ-b.centerZ,I=Math.sqrt(p*p+m*m+M*M),S=new l.default.Vector(b.centerX,b.centerY,b.centerZ),S=b.cameraMatrix.multiplyPoint(S),(S=this._renderer.uPMatrix.multiplyAndNormalizePoint(S)).x-=this._renderer.moveVelocity.x,S.y-=this._renderer.moveVelocity.y,A=(E=this._renderer.uPMatrix.mat4)[15]===0?(w=(E[8]+S.x)/E[0]*I,(E[9]+S.y)/E[5]*I):(w=(S.x-E[12])/E[0],(S.y-E[13])/E[5]),b.setPosition(b.eyeX+w*h.x[0]+A*h.y[0],b.eyeY+w*h.x[1]+A*h.y[1],b.eyeZ+w*h.x[2]+A*h.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var p=arguments.length,m=new Array(p),h=0;h<p;h++)m[h]=arguments[h];l.default._validateParameters("debugMode",m);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);m[0]===u.GRID?this.registerMethod("post",this._grid(m[1],m[2],m[3],m[4],m[5])):m[0]===u.AXES?this.registerMethod("post",this._axesIcon(m[1],m[2],m[3],m[4])):(this.registerMethod("post",this._grid(m[0],m[1],m[2],m[3],m[4])),this.registerMethod("post",this._axesIcon(m[5],m[6],m[7],m[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1)},l.default.prototype._grid=function(p,m,h,g,y){p===void 0&&(p=this.width/2),m===void 0&&(m=Math.round(p/30)<4?4:Math.round(p/30)),h===void 0&&(h=0),g===void 0&&(g=0),y===void 0&&(y=0);var b=p/m,x=p/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var v=0;v<=m;v++)this.beginShape(this.LINES),this.vertex(-x+h,g,v*b-x+y),this.vertex(x+h,g,v*b-x+y),this.endShape();for(var w=0;w<=m;w++)this.beginShape(this.LINES),this.vertex(w*b-x+h,g,-x+y),this.vertex(w*b-x+h,g,x+y),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(p,m,h,g){return p===void 0&&(p=40<this.width/20?this.width/20:40),m===void 0&&(m=-this.width/4),h===void 0&&(h=m),g===void 0&&(g=m),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(m,h,g),this.vertex(m+p,h,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(m,h,g),this.vertex(m,h+p,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(m,h,g),this.vertex(m,h,g+p),this.endShape(),this.pop()}};var d=l.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.ambientLight=function(l,u,c,f){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var d=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(d._array[0],d._array[1],d._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(l,u,c){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},a.default.prototype.directionalLight=function(l,y,g,f,d,p){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),l=l instanceof a.default.Color?l:this.color(l,y,g);var m,h,y=arguments[arguments.length-1],g=typeof y=="number"?(m=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(m=y.x,h=y.y,y.z),y=Math.sqrt(m*m+h*h+g*g);return this._renderer.directionalLightDirections.push(m/y,h/y,g/y),this._renderer.directionalLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(l,g,y,f,d,p){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),l=l instanceof a.default.Color?l:this.color(l,g,y);var m,h,g=arguments[arguments.length-1],y=typeof g=="number"?(m=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(m=g.x,h=g.y,g.z);return this._renderer.pointLightPositions.push(m,h,y),this._renderer.pointLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(l){this._renderer.activeImageLight=l,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(l){this.filter(this._renderer._getSphereMapping(l))},a.default.prototype.lights=function(){this._assert3d("lights");var l=this.color("rgb(128,128,128)");return this.ambientLight(l),this.directionalLight(l,0,0,-1),this},a.default.prototype.lightFalloff=function(l,u,c){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),l<0&&(l=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),l===0&&u===0&&c===0&&(l=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=l,this._renderer.linearAttenuation=u,this._renderer.quadraticAttenuation=c,this},a.default.prototype.spotLight=function(l,u,c,f,d,p,m,h,g,y,b){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var x,v,w,_=arguments.length;switch(_){case 11:case 10:x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(m,h,g);break;case 9:l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),w=new a.default.Vector(d,p,m),y=h,b=g):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=new a.default.Vector(d,p,m),y=h,b=g):m instanceof a.default.Vector?(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=m,y=h,b=g):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(m,h,g));break;case 8:y=(w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,m)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,m)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),m),h);break;case 7:l instanceof a.default.Color&&u instanceof a.default.Vector?(x=l,v=u,w=new a.default.Vector(c,f,d),y=p,b=m):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p,b=m):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p,b=m):w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,m)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,m)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),m);break;case 6:f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d),y=p);break;case 5:l instanceof a.default.Color&&u instanceof a.default.Vector&&c instanceof a.default.Vector?(x=l,v=u,w=c,y=f,b=d):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d));break;case 4:x=l,v=u,w=c,y=f;break;case 3:x=l,v=u,w=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(_<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(v.x,v.y,v.z),w.normalize(),this._renderer.spotLightDirections.push(w.x,w.y,w.z),y===void 0&&(y=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),y=this._renderer._pInst._toRadians(y),this._renderer.spotLightAngle.push(Math.cos(y)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("noLights",u),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var l=(p=o("../core/main"))&&p.__esModule?p:{default:p};function u(m){return function(h){if(Array.isArray(h)){for(var g=0,y=new Array(h.length);g<h.length;g++)y[g]=h[g];return y}}(m)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(m,h,g,y,b,x,v){try{var w=m[x](v),_=w.value}catch(C){return void g(C)}w.done?h(_):Promise.resolve(_).then(y,b)}function f(m){return function(){var h=this,g=arguments;return new Promise(function(y,b){var x=m.apply(h,g);function v(_){c(x,y,b,v,w,"next",_)}function w(_){c(x,y,b,v,w,"throw",_)}v(void 0)})}}function d(m){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(m)}o("./p5.Geometry"),l.default.prototype.loadModel=function(m,h){l.default._validateParameters("loadModel",arguments);var g,y,b=!1,x=!1,v=!1,w=m.slice(-4),_=(h&&d(h)==="object"?(b=h.normalize||!1,g=h.successCallback,y=h.failureCallback,w=h.fileType||w,x=h.flipU||!1,v=h.flipV||!1):typeof h=="boolean"?(b=h,g=arguments[2],y=arguments[3],arguments[4]!==void 0&&(w=arguments[4])):(g=typeof h=="function"?h:void 0,y=arguments[2],arguments[3]!==void 0&&(w=arguments[3])),new l.default.Geometry),C=(_.gid="".concat(m,"|").concat(b),this);function S(){return(S=f(regeneratorRuntime.mark(function A(N){var k,M,I,L;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:for(k=[],M=0;M<N.length;M++)(I=N[M].match(/^mtllib (.+)/))&&function(){var R="",V=I[1],G=m.split("/");R=1<G.length?(G.pop(),G.join("/")+"/"+V):V,k.push(function(){return E.apply(this,arguments)}(R).then(function(U){return U?(Y=C,X=R,new Promise(function(pe,$){var F=null,z={};Y.loadStrings(X,function(q){for(var ee=0;ee<q.length;++ee){var ae,Q=q[ee].trim().split(/\s+/);Q[0]==="newmtl"?(ae=Q[1],z[F=ae]={}):Q[0]==="Kd"?z[F].diffuseColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ka"?z[F].ambientColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ks"?z[F].specularColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="map_Kd"&&(z[F].texturePath=Q[1])}pe(z)},$)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(R)),{});var Y,X}).catch(function(U){return console.warn("Error loading MTL file: ".concat(R),U),{}}))}();return P.prev=2,P.next=5,Promise.all(k);case 5:return L=P.sent,L=Object.assign.apply(Object,[{}].concat(u(L))),P.abrupt("return",L);case 10:return P.prev=10,P.t0=P.catch(2),P.abrupt("return",{});case 13:case"end":return P.stop()}},A,null,[[2,10]])}))).apply(this,arguments)}function E(){return(E=f(regeneratorRuntime.mark(function A(N){var k;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,fetch(N,{method:"HEAD"});case 3:return k=M.sent,M.abrupt("return",k.ok);case 7:return M.prev=7,M.t0=M.catch(0),M.abrupt("return",!1);case 10:case"end":return M.stop()}},A,null,[[0,7]])}))).apply(this,arguments)}return w.match(/\.stl$/i)?this.httpDo(m,"GET","arrayBuffer",function(A){(function(N,k){if(function(M){for(var I=new DataView(M),L=[115,111,108,105,100],P=0;P<5;P++)if(function(R,V,G){for(var U=0,Y=R.length;U<Y;U++)if(R[U]!==V.getUint8(G+U,!1))return;return 1}(L,I,P))return;return 1}(k))(function(M,I){for(var L,P,R,V,G,U,Y,X=new DataView(I),pe=X.getUint32(80,!0),$=!1,F=0;F<70;F++)X.getUint32(F,!1)===1129270351&&X.getUint8(F+4)===82&&X.getUint8(F+5)===61&&($=!0,V=[],G=X.getUint8(F+6)/255,U=X.getUint8(F+7)/255,Y=X.getUint8(F+8)/255);for(var z=0;z<pe;z++){for(var q,ee=84+50*z,ae=X.getFloat32(ee,!0),Q=X.getFloat32(4+ee,!0),le=X.getFloat32(8+ee,!0),ie=($&&(q=X.getUint16(48+ee,!0),R=32768&q?(L=G,P=U,Y):(L=(31&q)/31,P=(q>>5&31)/31,(q>>10&31)/31)),new l.default.Vector(ae,Q,le)),Z=1;Z<=3;Z++){var ge=ee+12*Z,ge=new l.default.Vector(X.getFloat32(ge,!0),X.getFloat32(4+ge,!0),X.getFloat32(8+ge,!0));M.vertices.push(ge),M.vertexNormals.push(ie),$&&V.push(L,P,R)}M.faces.push([3*z,3*z+1,3*z+2]),M.uvs.push([0,0],[0,0],[0,0])}})(N,k);else{if(k=new DataView(k),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");k=new TextDecoder("utf-8").decode(k).split(`
`),function(M,I){for(var L,P,R="",V=[],G=0;G<I.length;++G){for(var U=I[G].trim(),Y=U.split(" "),X=0;X<Y.length;++X)Y[X]===""&&Y.splice(X,1);if(Y.length!==0)switch(R){case"":if(Y[0]!=="solid")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "solid"'));R="solid";break;case"solid":if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "facet normal"'));L=new l.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),M.vertexNormals.push(L,L,L),R="facet normal";break;case"facet normal":if(Y[0]!=="outer"||Y[1]!=="loop")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(Y[0]==="vertex")P=new l.default.Vector(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])),M.vertices.push(P),M.uvs.push([0,0]),V.push(M.vertices.indexOf(P));else{if(Y[0]!=="endloop")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "vertex" or "endloop"'));M.faces.push(V),V=[],R="endloop"}break;case"endloop":if(Y[0]!=="endfacet")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(Y[0]!=="endsolid"){if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "endsolid" or "facet normal"'));L=new l.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),M.vertexNormals.push(L,L,L),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}}(N,k)}})(_,A),b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),C._decrementPreload(),typeof g=="function"&&g(_)},y):w.match(/\.obj$/i)?this.loadStrings(m,function(){var A=f(regeneratorRuntime.mark(function N(k){var M;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,function(){return S.apply(this,arguments)}(k);case 3:M=I.sent,function(L,P){for(var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},V={v:[],vt:[],vn:[]},G={},U=null,Y=new Set,X=!1,pe=!1,$=0;$<P.length;++$){var F=P[$].trim().split(/\b\s+/);if(0<F.length){if(F[0]==="usemtl")U=F[1];else if(F[0]==="v"||F[0]==="vn"){var z=new l.default.Vector(parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3]));V[F[0]].push(z)}else if(F[0]==="vt")z=[parseFloat(F[1]),1-parseFloat(F[2])],V[F[0]].push(z);else if(F[0]==="f")for(var q=3;q<F.length;++q){for(var ee=[],ae=[1,q-1,q],Q=0;Q<ae.length;++Q){for(var le,ie=F[ae[Q]],Z=ie.split("/"),ge=0;ge<Z.length;ge++)Z[ge]=parseInt(Z[ge])-1;G[ie]||(G[ie]={}),G[ie][U]===void 0?(le=L.vertices.length,L.vertices.push(V.v[Z[0]].copy()),L.uvs.push(V.vt[Z[1]]?V.vt[Z[1]].slice():[0,0]),L.vertexNormals.push(V.vn[Z[2]]?V.vn[Z[2]].copy():new l.default.Vector),G[ie][U]=le,ee.push(le),U&&R[U]&&R[U].diffuseColor&&Y.add(V.v[Z[0]])):ee.push(G[ie][U])}if(ee[0]!==ee[1]&&ee[0]!==ee[2]&&ee[1]!==ee[2])if(L.faces.push(ee),U&&R[U]&&R[U].diffuseColor){X=X=!0;for(var ne=R[U].diffuseColor,ye=0;ye<ee.length;ye++)L.vertexColors.push(ne[0]),L.vertexColors.push(ne[1]),L.vertexColors.push(ne[2])}else pe=!0}}}if(L.vertexNormals.length===0&&L.computeNormals(),X===pe)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(_,k,M),I.next=11;break;case 7:return I.prev=7,I.t0=I.catch(0),y?y(I.t0):l.default._friendlyError("Error during parsing: "+I.t0.message),I.abrupt("return");case 11:return I.prev=11,b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),C._decrementPreload(),typeof g=="function"&&g(_),I.finish(11);case 18:case"end":return I.stop()}},N,null,[[0,7,11,18]])}));return function(N){return A.apply(this,arguments)}}(),y):(l.default._friendlyFileLoadError(3,m),y?y():l.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),_},l.default.prototype.model=function(m){this._assert3d("model"),l.default._validateParameters("model",arguments),0<m.vertices.length&&(this._renderer.geometryInHash(m.gid)||(m.edges.length===0&&m._makeTriangleEdges(),m._edgesToVertices(),this._renderer.createBuffers(m.gid,m)),this._renderer.drawBuffers(m.gid))};var p=l.default;s.default=p},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var m=f();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Texture"),u.default.prototype.loadShader=function(p,m,h,g){u.default._validateParameters("loadShader",arguments),g=g||console.error;function y(){x._decrementPreload(),h&&h(b)}var b=new u.default.Shader,x=this,v=!1,w=!1;return this.loadStrings(p,function(_){b._vertSrc=_.join(`
`),w=!0,v&&y()},g),this.loadStrings(m,function(_){b._fragSrc=_.join(`
`),v=!0,w&&y()},g),b},u.default.prototype.createShader=function(p,m){return u.default._validateParameters("createShader",arguments),new u.default.Shader(this._renderer,p,m)},u.default.prototype.createFilterShader=function(p){u.default._validateParameters("createFilterShader",arguments);var m=p.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,m=new u.default.Shader(this._renderer,m,p);return this._renderer.GL?m.ensureCompiledOnContext(this):m.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),m},u.default.prototype.shader=function(p){return this._assert3d("shader"),u.default._validateParameters("shader",arguments),p.ensureCompiledOnContext(this),p.isStrokeShader()?this._renderer.userStrokeShader=p:(this._renderer.userFillShader=p,this._renderer._useNormalMaterial=!1),this},u.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},u.default.prototype.texture=function(p){return this._assert3d("texture"),u.default._validateParameters("texture",arguments),p.gifProperties&&p._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=p,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.textureMode=function(p){p!==c.IMAGE&&p!==c.NORMAL?console.warn("You tried to set ".concat(p," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=p},u.default.prototype.textureWrap=function(p){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,h=(this._renderer.textureWrapX=p,this._renderer.textureWrapY=m,!0),g=!1,y=void 0;try{for(var b,x=this._renderer.textures.values()[Symbol.iterator]();!(h=(b=x.next()).done);h=!0)b.value.setWrapMode(p,m)}catch(v){g=!0,y=v}finally{try{h||x.return==null||x.return()}finally{if(g)throw y}}},u.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var p=arguments.length,m=new Array(p),h=0;h<p;h++)m[h]=arguments[h];return u.default._validateParameters("normalMaterial",m),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},u.default.prototype.ambientMaterial=function(p,m,h){this._assert3d("ambientMaterial"),u.default._validateParameters("ambientMaterial",arguments);var g=u.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.emissiveMaterial=function(p,m,h,g){this._assert3d("emissiveMaterial"),u.default._validateParameters("emissiveMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.specularMaterial=function(p,m,h,g){this._assert3d("specularMaterial"),u.default._validateParameters("specularMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.shininess=function(p){return this._assert3d("shininess"),u.default._validateParameters("shininess",arguments),this._renderer._useShininess=p=p<1?1:p,this},u.default.prototype.metalness=function(p){return this._assert3d("metalness"),p=1-Math.exp(-p/100),this._renderer._useMetalness=p,this},u.default.RendererGL.prototype._applyColorBlend=function(p,y){var h=this.GL,g=this.drawMode===c.TEXTURE,y=y||this.userFillShader||this.userStrokeShader||this.userPointShader||g||this.curBlendMode!==c.BLEND||p[p.length-1]<1||this._isErasing;return y!==this._isBlending&&(y||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?h.enable(h.BLEND):h.disable(h.BLEND),h.depthMask(!0),this._isBlending=y),this._applyBlendMode(),p},u.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var p=this.GL;switch(this.curBlendMode){case c.BLEND:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.ADD:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE);break;case c.REMOVE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.DST_COLOR,p.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.ONE_MINUS_DST_COLOR,p.ONE_MINUS_SRC_COLOR,p.ONE,p.ONE);break;case c.REPLACE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ZERO);break;case c.SUBTRACT:p.blendEquationSeparate(p.FUNC_REVERSE_SUBTRACT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(o,i,s){"use strict";o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.prototype.camera=function(){var u;this._assert3d("camera");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("camera",f),(u=this._renderer._curCamera).camera.apply(u,f),this},a.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("perspective",f),(u=this._renderer._curCamera).perspective.apply(u,f),this},a.default.prototype.linePerspective=function(u){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(u===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=u},a.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("ortho",f),(u=this._renderer._curCamera).ortho.apply(u,f),this},a.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("frustum",f),(u=this._renderer._curCamera).frustum.apply(u,f),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new a.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},a.default.Camera=function(){function u(p){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var c,f,d;return c=u,(f=[{key:"perspective",value:function(y,m,h,g){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),m===void 0&&(m=this.defaultAspectRatio),h===void 0&&(h=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),g<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=m,this.cameraNear=h,this.cameraFar=g,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),b=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/m,0,0,0,0,-y*this.yScale,0,0,0,0,(g+h)*b,-1,0,0,2*g*h*b,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,S,h,g,y,b){E===void 0&&(E=-this._renderer.width/2),S===void 0&&(S=+this._renderer.width/2),h===void 0&&(h=-this._renderer.height/2),g===void 0&&(g=+this._renderer.height/2),y===void 0&&(y=0),b===void 0&&(b=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=y;var A=S-E,x=g-h,v=(this.cameraFar=b)-y,w=2/A,_=2/x*this.yScale,C=-2/v,S=-(S+E)/A,E=-(g+h)/x,A=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,0,0,C,0,S,E,A,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,S,h,g,y,b){E===void 0&&(E=.05*-this._renderer.width),S===void 0&&(S=.05*+this._renderer.width),h===void 0&&(h=.05*+this._renderer.height),g===void 0&&(g=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),this.cameraNear=y;var A=S-E,x=g-h,v=(this.cameraFar=b)-y,w=2*y/A,_=2*y/x*this.yScale,C=-2*b*y/v,S=(S+E)/A,E=(g+h)/x,A=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,S,E,A,-1,0,0,C,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,m,h,g){var y=this.centerX,b=this.centerY,x=this.centerZ,v=(y-=this.eyeX,b-=this.eyeY,x-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(v.rotate(this._renderer._pInst._toRadians(w),m,h,g),[y*v.mat4[0]+b*v.mat4[4]+x*v.mat4[8],y*v.mat4[1]+b*v.mat4[5]+x*v.mat4[9],y*v.mat4[2]+b*v.mat4[6]+x*v.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var m=this._getLocalAxes();this._rotateView(p,m.y[0],m.y[1],m.y[2])}},{key:"tilt",value:function(p){var m=this._getLocalAxes();this._rotateView(p,m.x[0],m.x[1],m.x[2])}},{key:"lookAt",value:function(p,m,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,m,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,m,h,g,y,b,x,v,w){return p===void 0&&(p=this.defaultEyeX,m=this.defaultEyeY,h=this.defaultEyeZ,g=p,y=m,v=1,w=x=b=0),this.eyeX=p,this.eyeY=m,this.eyeZ=h,g!==void 0&&(this.centerX=g,this.centerY=y,this.centerZ=b),x!==void 0&&(this.upX=x,this.upY=v,this.upZ=w),g=this._getLocalAxes(),this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1),y=-p,this.cameraMatrix.translate([y,-m,-h]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(g,y,h){var b=this._getLocalAxes(),g=[b.x[0]*g,b.x[1]*g,b.x[2]*g],y=[b.y[0]*y,b.y[1]*y,b.y[2]*y],b=[b.z[0]*h,b.z[1]*h,b.z[2]*h];this.camera(this.eyeX+g[0]+y[0]+b[0],this.eyeY+g[1]+y[1]+b[1],this.eyeZ+g[2]+y[2]+b[2],this.centerX+g[0]+y[0]+b[0],this.centerY+g[1]+y[1]+b[1],this.centerZ+g[2]+y[2]+b[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,m,h){var g=p-this.eyeX,y=m-this.eyeY,b=h-this.eyeZ;this.camera(p,m,h,this.centerX+g,this.centerY+y,this.centerZ+b,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var m=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];m<h.length;m++){var g=h[m];this[g]=p[g]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,m,h){var g,y,b,x,v,w,_,C,S,E,A,N,k,M,I,L,P,R;h===0?this.set(p):h===1?this.set(m):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(m.projMatrix.mat4[0]/p.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(m.projMatrix.mat4[5]/p.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new a.default.Vector(p.eyeX,p.eyeY,p.eyeZ),v=new a.default.Vector(m.eyeX,m.eyeY,m.eyeZ),L=new a.default.Vector(p.centerX,p.centerY,p.centerZ),R=new a.default.Vector(m.centerX,m.centerY,m.centerZ),b=a.default.Vector.dist(x,L),g=a.default.Vector.dist(v,R),g=b*Math.pow(g/b,h),b=a.default.Vector.sub(x,v),y=1,1e-6<(P=(M=x.copy().sub(v).sub(L).add(R)).magSq())&&(y=a.default.Vector.dot(b,M)/P,y=Math.max(0,Math.min(y,1))),b=a.default.Vector.lerp(a.default.Vector.lerp(x,L,y),a.default.Vector.lerp(v,R,y),h),M=p.cameraMatrix.createSubMatrix3x3(),P=m.cameraMatrix.createSubMatrix3x3(),x=M.row(2),L=P.row(2),v=M.row(1),R=P.row(1),p=new a.default.Vector,m=new a.default.Vector,w=new a.default.Vector,_=new a.default.Vector,1-(C=.5*((M=(P=P.mult3x3(M.copy().transpose3x3())).diagonal())[0]+M[1]+M[2]-1))<1e-7?(p.set(a.default.Vector.lerp(x,L,h)).normalize(),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),m.set(a.default.Vector.lerp(v,R,h)).normalize()):(L=1/(1-C),R=Math.max(M[0],M[1],M[2]),N=P.mat3[1]+P.mat3[3],k=P.mat3[2]+P.mat3[6],I=P.mat3[5]+P.mat3[7],R=R===M[0]?(E=.5*N*(L/=S=Math.sqrt((M[0]-C)*L)),A=.5*k*L,.5*(P.mat3[7]-P.mat3[5])/S):R===M[1]?(A=.5*I*(L/=E=Math.sqrt((M[1]-C)*L)),S=.5*N*L,.5*(P.mat3[2]-P.mat3[6])/E):(S=.5*k*(L/=A=Math.sqrt((M[2]-C)*L)),E=.5*I*L,.5*(P.mat3[3]-P.mat3[1])/A),N=h*Math.atan2(R,C),k=Math.cos(N),M=Math.sin(N),(R=new a.default.Matrix("mat3",[k+(I=1-k)*S*S,I*(L=S*E)+M*A,I*(P=A*S)-M*E,I*L-M*A,k+I*E*E,I*(h=E*A)+M*S,I*P+M*E,I*h-M*S,k+I*A*A])).multiplyVec3(x,p),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),R.multiplyVec3(v,m)),this.camera(w.x,w.y,w.z,_.x,_.y,_.z,m.x,m.y,m.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var p=new a.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p.yScale=this.yScale,p}},{key:"_getLocalAxes",value:function(){var p=this.eyeX-this.centerX,m=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,x=Math.sqrt(p*p+m*m+h*h),x=(x!==0&&(p/=x,m/=x,h/=x),this.upX),g=(v=this.upY)*h-(w=this.upZ)*m,y=-x*h+w*p,b=x*m-v*p,x=m*b-h*y,v=-p*b+h*g,w=p*y-m*g,_=Math.sqrt(g*g+y*y+b*b),_=(_!==0&&(g/=_,y/=_,b/=_),Math.sqrt(x*x+v*v+w*w));return _!==0&&(x/=_,v/=_,w/=_),{x:[g,y,b],y:[x,v,w],z:[p,m,h]}}},{key:"_orbit",value:function(p,_,w){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(x,b),w=((g=(g*=Math.pow(10,w))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,b))))+_),_=p;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),b.mult(Math.cos(w)),v.mult(Math.cos(_)*Math.sin(w)),x.mult(Math.sin(_)*Math.sin(w)),y.set(b).add(v).add(x),this.eyeX=g*y.x+this.centerX,this.eyeY=g*y.y+this.centerY,this.eyeZ=g*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,_,S){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(y,x),E=Math.atan2(_,w),E=(v.mult(Math.sin(E)),x.mult(Math.cos(E)).add(v),Math.sqrt(w*w+_*_)),v=a.default.Vector.cross(y,x),w=((g=(g*=Math.pow(10,S))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.cos(E)),_=Math.sin(E),S=b.dot(y),E=b.dot(x),C=S*w+E*_,S=-S*_+E*w,E=b.dot(v);b.x=C*y.x+S*x.x+E*v.x,b.y=C*y.y+S*x.y+E*v.y,b.z=C*y.z+S*x.z+E*v.z,x.mult(-_),y.mult(w).add(x).mult(g),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,b.x,b.y,b.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&l(c.prototype,f),d&&l(c,d),u}(),a.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix)},o=a.default.Camera,s.default=o},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.DataArray=function(){function l(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,p=this,m=l;if(!(p instanceof m))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(d),this.initialLength=d}var u,c,f;return u=l,(c=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var d;this.length<this.data.length/2&&(d=1<<Math.ceil(Math.log2(this.length)),(d=new Float32Array(d)).set(this.data.subarray(0,this.length),0),this.data=d)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var d=arguments.length,p=new Array(d),m=0;m<d;m++)p[m]=arguments[m];this.ensureLength(this.length+p.length),this.data.set(p,this.length),this.length+=p.length}},{key:"slice",value:function(d,p){return this.data.slice(d,Math.min(p,this.length))}},{key:"subArray",value:function(d,p){return this.data.subarray(d,Math.min(p,this.length))}},{key:"ensureLength",value:function(d){for(;this.data.length<d;){var p=new Float32Array(2*this.data.length);p.set(this.data,0),this.data=p}}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.DataArray,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(A,i,s){"use strict";function a(N){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(N)}function l(N){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(k){return a(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":a(k)})(N)}A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.object.get-own-property-descriptor"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.reflect.construct"),A("core-js/modules/es.reflect.get"),A("core-js/modules/es.regexp.to-string"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint8-clamped-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/es.weak-map"),A("core-js/modules/web.dom-collections.iterator"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint8-clamped-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(E=A("../core/main"))&&E.__esModule?E:{default:E},c=function(N){if(N&&N.__esModule)return N;if(N===null||l(N)!=="object"&&typeof N!="function")return{default:N};var k=p();if(k&&k.has(N))return k.get(N);var M,I={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in N){var P;Object.prototype.hasOwnProperty.call(N,M)&&((P=L?Object.getOwnPropertyDescriptor(N,M):null)&&(P.get||P.set)?Object.defineProperty(I,M,P):I[M]=N[M])}return I.default=N,k&&k.set(N,I),I}(A("../core/constants")),f=A("./p5.Texture"),d=A("./p5.RendererGL");function p(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,p=function(){return N},N)}function m(N,k){return function(M){if(Array.isArray(M))return M}(N)||function(M,I){if(Symbol.iterator in Object(M)||Object.prototype.toString.call(M)==="[object Arguments]"){var L=[],P=!0,R=!1,V=void 0;try{for(var G,U=M[Symbol.iterator]();!(P=(G=U.next()).done)&&(L.push(G.value),!I||L.length!==I);P=!0);}catch(Y){R=!0,V=Y}finally{try{P||U.return==null||U.return()}finally{if(R)throw V}}return L}}(N,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(N,k,M){return k in N?Object.defineProperty(N,k,{value:M,enumerable:!0,configurable:!0,writable:!0}):N[k]=M,N}function g(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function y(N,k){for(var M=0;M<k.length;M++){var I=k[M];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function b(N,k,M){k&&y(N.prototype,k),M&&y(N,M)}function x(N,k,M){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,L,P){var R=function(V,G){for(;!Object.prototype.hasOwnProperty.call(V,G)&&(V=_(V))!==null;);return V}(R,L);if(R)return(R=Object.getOwnPropertyDescriptor(R,L)).get?R.get.call(P):R.value})(N,k,M||N)}function v(N,k){return(v=Object.setPrototypeOf||function(M,I){return M.__proto__=I,M})(N,k)}function w(N){return function(){var k,M=_(N),M=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=_(this).constructor,Reflect.construct(M,arguments,k)):M.apply(this,arguments),this);if(!k||l(k)!=="object"&&typeof k!="function"){if(M!==void 0)return M;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function _(N){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(N)}var C=function(N){var k=I;if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(N&&N.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),N&&v(k,N);var M=w(I);function I(L){var P;return g(this,I),(P=M.call(this,L.target._renderer)).fbo=L,P.yScale=-1,P}return b(I,[{key:"_computeCameraDefaultSettings",value:function(){x(_(I.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),I}(u.default.Camera),S=(u.default.FramebufferCamera=C,function(){function N(k,M){g(this,N),this.framebuffer=k,this.property=M}return b(N,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),N}()),E=(u.default.FramebufferTexture=S,function(){function N(k){var M=this,I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},L=(g(this,N),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=I.format||c.UNSIGNED_BYTE,this.channels=I.channels||(k._renderer._pInst._glAttributes.alpha?c.RGBA:c.RGB),this.useDepth=I.depth===void 0||I.depth,this.depthFormat=I.depthFormat||c.FLOAT,this.textureFiltering=I.textureFiltering||c.LINEAR,I.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof I.antialias=="number"?this.antialiasSamples=I.antialias:this.antialiasSamples=I.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==c.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=I.density||k.pixelDensity(),k._renderer.GL);if(this.gl=L,I.width&&I.height?(P=k._renderer._adjustDimensions(I.width,I.height),this.width=P.adjustedWidth,this.height=P.adjustedHeight,this._autoSized=!1):(I.width===void 0!=(I.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),I.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(I.stencil===void 0||I.stencil),this.framebuffer=L.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=L.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var P=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=P,this.draw(function(){return M.target.clear()})}return b(N,[{key:"resize",value:function(k,M){this._autoSized=!1;var I=this.target._renderer._adjustDimensions(k,M);k=I.adjustedWidth,M=I.adjustedHeight,this.width=k,this.height=M,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===c.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===c.WEBGL&&this.depthFormat===c.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),[c.UNSIGNED_BYTE,c.FLOAT,c.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&![c.UNSIGNED_INT,c.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=c.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==c.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===c.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),k.halfFloat||this.format!==c.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.channels===c.RGB&&[c.FLOAT,c.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=c.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,M=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),I=k.getParameter(k.FRAMEBUFFER_BINDING),L=k.createTexture();if(!L)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,L);var P=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,P.internalFormat,this.width*this.density,this.height*this.density,0,P.format,P.type,null),this.colorTexture=L,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,L,0),this.useDepth){var L=k.createTexture();if(!L)throw new Error("Unable to create depth texture");var R=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,L),k.texImage2D(k.TEXTURE_2D,0,R.internalFormat,this.width*this.density,this.height*this.density,0,R.format,R.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,L,0),this.depthTexture=L}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),P.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(R=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),R.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new S(this,"depthTexture"),L=k.NEAREST,this.depthP5Texture=new u.default.Texture(this.target._renderer,this.depth,{minFilter:L,magFilter:L}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new S(this,"colorTexture"),P=this.textureFiltering===c.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new u.default.Texture(this.target._renderer,this.color,{minFilter:P,magFilter:P}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,M),k.bindFramebuffer(k.FRAMEBUFFER,I)}},{key:"_glColorFormat",value:function(){var k,M,I=this.gl,L=this.format===c.FLOAT?I.FLOAT:this.format===c.HALF_FLOAT?this.target.webglVersion===c.WEBGL2?I.HALF_FLOAT:I.getExtension("OES_texture_half_float").HALF_FLOAT_OES:I.UNSIGNED_BYTE,P=this.channels===c.RGBA?I.RGBA:I.RGB;return{internalFormat:this.target.webglVersion===c.WEBGL2?(h(M={},I.FLOAT,h({},I.RGBA,I.RGBA32F)),h(M,I.HALF_FLOAT,h({},I.RGBA,I.RGBA16F)),h(M,I.UNSIGNED_BYTE,(h(k={},I.RGBA,I.RGBA8),h(k,I.RGB,I.RGB8),k)),M[L][P]):this.format===c.HALF_FLOAT?I.RGBA:P,format:P,type:L}}},{key:"_glDepthFormat",value:function(){var I=this.gl,k=this.useStencil?this.depthFormat===c.FLOAT?I.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===c.WEBGL2?I.UNSIGNED_INT_24_8:I.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===c.FLOAT?I.FLOAT:I.UNSIGNED_INT,M=this.useStencil?I.DEPTH_STENCIL:I.DEPTH_COMPONENT,I=this.useStencil?this.depthFormat===c.FLOAT?I.DEPTH32F_STENCIL8:this.target.webglVersion===c.WEBGL2?I.DEPTH24_STENCIL8:I.DEPTH_STENCIL:this.target.webglVersion===c.WEBGL2?this.depthFormat===c.FLOAT?I.DEPTH_COMPONENT32F:I.DEPTH_COMPONENT24:I.DEPTH_COMPONENT;return{internalFormat:I,format:M,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var L=this.color,k=this.depth,M=this.colorRenderbuffer,I=this.depthRenderbuffer,L=(this._deleteTexture(L),k&&this._deleteTexture(k),this.gl);M&&L.deleteRenderbuffer(M),I&&L.deleteRenderbuffer(I),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new C(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,M=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&M.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var I=0,L=M;I<L.length;I++){var R=m(L[I],2),P=R[0],R=R[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,P,R)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,M=this.target._renderer.activeFramebuffer(),I=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,d.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,I.format,I.type),M?k.bindFramebuffer(k.FRAMEBUFFER,M._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,M,I,L){u.default._validateParameters("p5.Framebuffer.get",arguments);var P=this._glColorFormat();if(k===void 0&&M===void 0)M=k=0,I=this.width,L=this.height;else if(I===void 0&&L===void 0)return(k<0||M<0||k>=this.width||M>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),M=this.target.constrain(M,0,this.height-1)),(0,d.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,M*this.density,P.format,P.type);k=this.target.constrain(k,0,this.width-1),M=this.target.constrain(M,0,this.height-1),I=this.target.constrain(I,1,this.width-k),L=this.target.constrain(L,1,this.height-M);for(var R=(0,d.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,M*this.density,I*this.density,L*this.density,P.format,P.type),V=new Uint8ClampedArray(I*L*this.density*this.density*4),G=(V.fill(255),P.type===this.gl.RGB?3:4),U=0;U<L*this.density;U++)for(var Y=0;Y<I*this.density;Y++)for(var X=0;X<4;X++){var pe,$=4*(U*I*this.density+Y)+X;X<G&&(pe=G==4?$:(U*I*this.density+Y)*G+X,V[$]=R[pe])}return k=new u.default.Image(I*this.density,L*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(V),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(I,L),k}},{key:"updatePixels",value:function(){var k=this.gl,M=(this.colorP5Texture.bindTexture(),this._glColorFormat()),I=M.format===k.RGBA?4:3,I=this.width*this.height*this.density*this.density*I,L=M.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof L)||this.pixels.length!==I)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,M.internalFormat,this.width*this.density,this.height*this.density,0,M.format,M.type,this.pixels),this.colorP5Texture.unbindTexture(),L=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),L?k.bindFramebuffer(k.FRAMEBUFFER,L._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),N}()),A=u.default.Framebuffer=E;s.default=A},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(m=o("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var g=f();if(g&&g.has(h))return g.get(h);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var v;Object.prototype.hasOwnProperty.call(h,y)&&((v=x?Object.getOwnPropertyDescriptor(h,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=h[y])}return b.default=h,g&&g.set(h,b),b}(o("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}function d(h){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(h)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(h,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}u.default.Geometry=function(){function h(x,v,w){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new u.default.DataArray,this.lineTangentsIn=new u.default.DataArray,this.lineTangentsOut=new u.default.DataArray,this.lineSides=new u.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new u.default.DataArray,this.detailX=x!==void 0?x:1,this.detailY=v!==void 0?v:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,w instanceof Function&&w.call(this)}var g,y,b;return g=h,(y=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new u.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),v=new u.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),w=0;w<this.vertices.length;w++){var _=this.vertices[w];x.x=Math.min(x.x,_.x),x.y=Math.min(x.y,_.y),x.z=Math.min(x.z,_.z),v.x=Math.max(v.x,_.x),v.y=Math.max(v.y,_.y),v.z=Math.max(v.z,_.z)}var C=new u.default.Vector(v.x-x.x,v.y-x.y,v.z-x.z),S=new u.default.Vector((x.x+v.x)/2,(x.y+v.y)/2,(x.z+v.z)/2);this.boundingBoxCache={min:x,max:v,size:C,offset:S}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,v,w,_=this.detailX+1,C=0;C<this.detailY;C++)for(var S=0;S<this.detailX;S++)v=(C+1)*_+S+1,this.faces.push([C*_+S,x=C*_+S+1,w=(C+1)*_+S]),this.faces.push([w,x,v]);return this}},{key:"_getFaceNormal",value:function(v){var v=this.faces[v],w=this.vertices[v[0]],C=this.vertices[v[1]],v=this.vertices[v[2]],C=u.default.Vector.sub(C,w),v=u.default.Vector.sub(v,w),w=u.default.Vector.cross(C,v),_=u.default.Vector.mag(w),C=_/(u.default.Vector.mag(C)*u.default.Vector.mag(v));return C===0||isNaN(C)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),w):(1<C&&(C=1),w.mult(Math.asin(C)/_))}},{key:"computeNormals",value:function(){var x,v=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:c.FLAT,_=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,C=this.vertexNormals,S=this.vertices,E=this.faces;if(w===c.SMOOTH){for(var A={},N=[],k=Math.pow(10,_===void 0?3:_),M=function(V){return Math.round(V*k)/k},I=function(V){return"".concat(M(V.x),",").concat(M(V.y),",").concat(M(V.z))},L=0;L<S.length;L++){var P=S[L],R=I(P);A[R]===void 0&&(A[R]=N.length,N.push(P))}E.forEach(function(V){for(var G=0;G<3;++G){var U=V[G],U=S[U],U=I(U);V[G]=A[U]}}),this.edges.forEach(function(V){for(var G=0;G<2;++G){var U=V[G],U=S[U],U=I(U);V[G]=A[U]}}),this.vertices=S=N}for(x=C.length=0;x<S.length;++x)C.push(new u.default.Vector);for(E.forEach(function(V,G){for(var U=v._getFaceNormal(G),Y=0;Y<3;++Y){var X=V[Y];C[X].add(U)}}),x=0;x<S.length;++x)C[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var v=this.detailX+1,w=u.default.Vector.add(this.vertexNormals[x*v],this.vertexNormals[x*v+this.detailX]),w=u.default.Vector.div(w,2);this.vertexNormals[x*v]=w,this.vertexNormals[x*v+this.detailX]=w}return this}},{key:"averagePoleNormals",value:function(){for(var x=new u.default.Vector(0,0,0),v=0;v<this.detailX;v++)x.add(this.vertexNormals[v]);for(var x=u.default.Vector.div(x,this.detailX),w=0;w<this.detailX;w++)this.vertexNormals[w]=x;x=new u.default.Vector(0,0,0);for(var _=this.vertices.length-1;_>this.vertices.length-1-this.detailX;_--)x.add(this.vertexNormals[_]);x=u.default.Vector.div(x,this.detailX);for(var C=this.vertices.length-1;C>this.vertices.length-1-this.detailX;C--)this.vertexNormals[C]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,v=new Map,w=new Set,_=0;_<this.edges.length;_++){var C,S=this.edges[_-1],E=this.edges[_],A=this.vertices[E[0]],N=this.vertices[E[1]],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[0],4*(E[0]+1)):[0,0,0,0],M=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],I=N.copy().sub(A).normalize(),L=0<I.magSq();L&&this._addSegment(A,N,k,M,I),0<_&&S[1]===E[0]?w.has(E[0])||(w.add(E[0]),v.delete(E[0]),x&&L&&I.dot(x)<1-1e-8&&this._addJoin(A,x,I,k)):(L&&!w.has(E[0])&&((C=v.get(E[0]))?(this._addJoin(A,C.dir,I,k),v.delete(E[0]),w.add(E[0])):v.set(E[0],{point:A,dir:I.copy().mult(-1),color:k})),x&&!w.has(S[1])&&((C=v.get(S[1]))?(this._addJoin(this.vertices[S[1]],x,C.dir.copy().mult(-1),k),v.delete(S[1]),w.add(S[1])):v.set(S[1],{point:this.vertices[S[1]],dir:x,color:k}),x=void 0)),_!==this.edges.length-1||w.has(E[1])||((A=v.get(E[1]))?(this._addJoin(N,I,A.dir.copy().mult(-1),M),v.delete(E[1]),w.add(E[1])):v.set(E[1],{point:N,dir:I,color:M})),L&&(x=I)}var P=!0,R=!1,V=void 0;try{for(var G,U=v.values()[Symbol.iterator]();!(P=(G=U.next()).done);P=!0){var Y=G.value,X=Y.point,pe=Y.dir,$=Y.color;this._addCap(X,pe,$)}}catch(F){R=!0,V=F}finally{try{P||U.return==null||U.return()}finally{if(R)throw V}}return this}},{key:"_addSegment",value:function(S,E,w,_,C){var S=S.array(),E=E.array(),A=C.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var N=0,k=[this.lineTangentsIn,this.lineTangentsOut];N<k.length;N++)for(var M=k[N],I=0;I<6;I++)M.push.apply(M,d(A));return(C=this.lineVertices).push.apply(C,d(S).concat(d(E),d(S),d(E),d(E),d(S))),(C=this.lineVertexColors).push.apply(C,d(w).concat(d(_),d(w),d(_),d(_),d(w))),this}},{key:"_addCap",value:function(x,v,w){for(var _,C=x.array(),S=v.array(),E=[0,0,0],A=0;A<6;A++)(_=this.lineVertices).push.apply(_,d(C)),(_=this.lineTangentsIn).push.apply(_,d(S)),(_=this.lineTangentsOut).push.apply(_,E),(_=this.lineVertexColors).push.apply(_,d(w));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,v,w,_){for(var C,S=x.array(),E=v.array(),A=w.array(),N=0;N<12;N++)(C=this.lineVertices).push.apply(C,d(S)),(C=this.lineTangentsIn).push.apply(C,d(E)),(C=this.lineTangentsOut).push.apply(C,d(A)),(C=this.lineVertexColors).push.apply(C,d(_));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),v=this.vertices[0].copy(),w=0;w<this.vertices.length;w++)x.x=Math.max(x.x,this.vertices[w].x),v.x=Math.min(v.x,this.vertices[w].x),x.y=Math.max(x.y,this.vertices[w].y),v.y=Math.min(v.y,this.vertices[w].y),x.z=Math.max(x.z,this.vertices[w].z),v.z=Math.min(v.z,this.vertices[w].z);for(var _=u.default.Vector.lerp(x,v,.5),C=u.default.Vector.sub(x,v),S=200/Math.max(Math.max(C.x,C.y),C.z),E=0;E<this.vertices.length;E++)this.vertices[E].sub(_),this.vertices[E].mult(S)}return this}}])&&p(g.prototype,y),b&&p(g,b),h}();var m=u.default.Geometry;s.default=m},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(f,i,s){"use strict";f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f};function l(d,p){for(var m=0;m<p.length;m++){var h=p[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}var u=Array,c=function(d){return Array.isArray(d)},f=(typeof Float32Array<"u"&&(u=Float32Array,c=function(d){return Array.isArray(d)||d instanceof Float32Array}),a.default.Matrix=function(){function d(){var g=this,y=d;if(g instanceof y)return arguments.length&&((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])instanceof a.default&&(this.p5=(y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new u([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new u([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var p,m,h;return p=d,h=[{key:"identity",value:function(g){return new a.default.Matrix(g)}}],(m=[{key:"set",value:function(g){var y=arguments;if(g instanceof a.default.Matrix?y=g.mat4:c(g)&&(y=g),y.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(y.length,"."),"p5.Matrix.set");else for(var b=0;b<16;b++)this.mat4[b]=y[b];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var g;return this.mat3!==void 0?((g=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],g.mat3[1]=this.mat3[1],g.mat3[2]=this.mat3[2],g.mat3[3]=this.mat3[3],g.mat3[4]=this.mat3[4],g.mat3[5]=this.mat3[5],g.mat3[6]=this.mat3[6],g.mat3[7]=this.mat3[7],g.mat3[8]=this.mat3[8]):((g=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],g.mat4[1]=this.mat4[1],g.mat4[2]=this.mat4[2],g.mat4[3]=this.mat4[3],g.mat4[4]=this.mat4[4],g.mat4[5]=this.mat4[5],g.mat4[6]=this.mat4[6],g.mat4[7]=this.mat4[7],g.mat4[8]=this.mat4[8],g.mat4[9]=this.mat4[9],g.mat4[10]=this.mat4[10],g.mat4[11]=this.mat4[11],g.mat4[12]=this.mat4[12],g.mat4[13]=this.mat4[13],g.mat4[14]=this.mat4[14],g.mat4[15]=this.mat4[15]),g}},{key:"transpose",value:function(g){var y,b,x,v,w,_;return g instanceof a.default.Matrix?(y=g.mat4[1],b=g.mat4[2],x=g.mat4[3],v=g.mat4[6],w=g.mat4[7],_=g.mat4[11],this.mat4[0]=g.mat4[0],this.mat4[1]=g.mat4[4],this.mat4[2]=g.mat4[8],this.mat4[3]=g.mat4[12],this.mat4[4]=y,this.mat4[5]=g.mat4[5],this.mat4[6]=g.mat4[9],this.mat4[7]=g.mat4[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g.mat4[10],this.mat4[11]=g.mat4[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g.mat4[15]):c(g)&&(y=g[1],b=g[2],x=g[3],v=g[6],w=g[7],_=g[11],this.mat4[0]=g[0],this.mat4[1]=g[4],this.mat4[2]=g[8],this.mat4[3]=g[12],this.mat4[4]=y,this.mat4[5]=g[5],this.mat4[6]=g[9],this.mat4[7]=g[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g[10],this.mat4[11]=g[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g[15]),this}},{key:"invert",value:function(R){R instanceof a.default.Matrix?(y=R.mat4[0],b=R.mat4[1],x=R.mat4[2],v=R.mat4[3],w=R.mat4[4],_=R.mat4[5],C=R.mat4[6],S=R.mat4[7],E=R.mat4[8],A=R.mat4[9],N=R.mat4[10],k=R.mat4[11],M=R.mat4[12],I=R.mat4[13],L=R.mat4[14],P=R.mat4[15]):c(R)&&(y=R[0],b=R[1],x=R[2],v=R[3],w=R[4],_=R[5],C=R[6],S=R[7],E=R[8],A=R[9],N=R[10],k=R[11],M=R[12],I=R[13],L=R[14],P=R[15]);var y,b,x,v,w,_,C,S,E,A,N,k,M,I,L,P,R=y*_-b*w,V=y*C-x*w,G=y*S-v*w,U=b*C-x*_,Y=b*S-v*_,X=x*S-v*C,pe=E*I-A*M,$=E*L-N*M,F=E*P-k*M,z=A*L-N*I,q=A*P-k*I,ee=N*P-k*L,ae=R*ee-V*q+G*z+U*F-Y*$+X*pe;return ae?(this.mat4[0]=(_*ee-C*q+S*z)*(ae=1/ae),this.mat4[1]=(x*q-b*ee-v*z)*ae,this.mat4[2]=(I*X-L*Y+P*U)*ae,this.mat4[3]=(N*Y-A*X-k*U)*ae,this.mat4[4]=(C*F-w*ee-S*$)*ae,this.mat4[5]=(y*ee-x*F+v*$)*ae,this.mat4[6]=(L*G-M*X-P*V)*ae,this.mat4[7]=(E*X-N*G+k*V)*ae,this.mat4[8]=(w*q-_*F+S*pe)*ae,this.mat4[9]=(b*F-y*q-v*pe)*ae,this.mat4[10]=(M*Y-I*G+P*R)*ae,this.mat4[11]=(A*G-E*Y-k*R)*ae,this.mat4[12]=(_*$-w*z-C*pe)*ae,this.mat4[13]=(y*z-b*$+x*pe)*ae,this.mat4[14]=(I*V-M*U-L*R)*ae,this.mat4[15]=(E*U-A*V+N*R)*ae,this):null}},{key:"invert3x3",value:function(){var g=this.mat3[0],y=this.mat3[1],b=this.mat3[2],x=this.mat3[3],v=this.mat3[4],w=this.mat3[5],_=this.mat3[6],C=this.mat3[7],S=this.mat3[8],E=S*v-w*C,A=-S*x+w*_,N=C*x-v*_,k=g*E+y*A+b*N;return k?(this.mat3[0]=E*(k=1/k),this.mat3[1]=(-S*y+b*C)*k,this.mat3[2]=(w*y-b*v)*k,this.mat3[3]=A*k,this.mat3[4]=(S*g-b*_)*k,this.mat3[5]=(-w*g+b*x)*k,this.mat3[6]=N*k,this.mat3[7]=(-C*g+y*_)*k,this.mat3[8]=(v*g-y*x)*k,this):null}},{key:"transpose3x3",value:function(g){var y=(g=g===void 0?this.mat3:g)[1],b=g[2],x=g[5];return this.mat3[0]=g[0],this.mat3[1]=g[3],this.mat3[2]=g[6],this.mat3[3]=y,this.mat3[4]=g[4],this.mat3[5]=g[7],this.mat3[6]=b,this.mat3[7]=x,this.mat3[8]=g[8],this}},{key:"inverseTranspose",value:function(g){if(g=g.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=g[0],this.mat3[1]=g[1],this.mat3[2]=g[2],this.mat3[3]=g[4],this.mat3[4]=g[5],this.mat3[5]=g[6],this.mat3[6]=g[8],this.mat3[7]=g[9],this.mat3[8]=g[10]),g=this.invert3x3(),g)g.transpose3x3(this.mat3);else for(var y=0;y<9;y++)this.mat3[y]=0;return this}},{key:"determinant",value:function(){var g=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],y=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],v=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],w=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],_=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],C=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],S=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],E=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],A=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return g*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-y*A+b*E+x*S-v*C+w*_}},{key:"mult",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4[0],x=this.mat4[1],v=this.mat4[2],w=this.mat4[3];return this.mat4[0]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[1]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[2]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[3]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[4],x=this.mat4[5],v=this.mat4[6],w=this.mat4[7],this.mat4[4]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[5]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[6]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[7]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[8],x=this.mat4[9],v=this.mat4[10],w=this.mat4[11],this.mat4[8]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[9]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[10]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[11]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[12],x=this.mat4[13],v=this.mat4[14],w=this.mat4[15],this.mat4[12]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[13]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[14]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[15]=b*y[3]+x*y[7]+v*y[11]+w*y[15],this}},{key:"apply",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4,x=b[0],v=b[4],w=b[8],_=b[12],x=(b[0]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[4]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[8]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[12]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[1]),v=b[5],w=b[9],_=b[13],x=(b[1]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[5]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[9]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[13]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[2]),v=b[6],w=b[10],_=b[14],x=(b[2]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[6]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[10]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[14]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[3]),v=b[7],w=b[11],_=b[15];return b[3]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[7]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[11]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[15]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,this}},{key:"scale",value:function(g,y,b){return g instanceof a.default.Vector?(y=g.y,b=g.z,g=g.x):g instanceof Array&&(y=g[1],b=g[2],g=g[0]),this.mat4[0]*=g,this.mat4[1]*=g,this.mat4[2]*=g,this.mat4[3]*=g,this.mat4[4]*=y,this.mat4[5]*=y,this.mat4[6]*=y,this.mat4[7]*=y,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(R,q,z,x){q instanceof a.default.Vector?(z=q.y,x=q.z,q=q.x):q instanceof Array&&(z=q[1],x=q[2],q=q[0]);var v=Math.sqrt(q*q+z*z+x*x),v=(q*=1/v,z*=1/v,x*=1/v,this.mat4[0]),w=this.mat4[1],_=this.mat4[2],C=this.mat4[3],S=this.mat4[4],E=this.mat4[5],A=this.mat4[6],N=this.mat4[7],k=this.mat4[8],M=this.mat4[9],I=this.mat4[10],L=this.mat4[11],P=Math.sin(R),R=Math.cos(R),V=1-R,G=q*q*V+R,U=z*q*V+x*P,Y=x*q*V-z*P,X=q*z*V-x*P,pe=z*z*V+R,$=x*z*V+q*P,F=q*x*V+z*P,z=z*x*V-q*P,q=x*x*V+R;return this.mat4[0]=v*G+S*U+k*Y,this.mat4[1]=w*G+E*U+M*Y,this.mat4[2]=_*G+A*U+I*Y,this.mat4[3]=C*G+N*U+L*Y,this.mat4[4]=v*X+S*pe+k*$,this.mat4[5]=w*X+E*pe+M*$,this.mat4[6]=_*X+A*pe+I*$,this.mat4[7]=C*X+N*pe+L*$,this.mat4[8]=v*F+S*z+k*q,this.mat4[9]=w*F+E*z+M*q,this.mat4[10]=_*F+A*z+I*q,this.mat4[11]=C*F+N*z+L*q,this}},{key:"translate",value:function(x){var y=x[0],b=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*y+this.mat4[4]*b+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*y+this.mat4[5]*b+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*y+this.mat4[6]*b+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*y+this.mat4[7]*b+this.mat4[11]*x}},{key:"rotateX",value:function(g){this.rotate(g,1,0,0)}},{key:"rotateY",value:function(g){this.rotate(g,0,1,0)}},{key:"rotateZ",value:function(g){this.rotate(g,0,0,1)}},{key:"perspective",value:function(v,y,b,x){var v=1/Math.tan(v/2),w=1/(b-x);return this.mat4[0]=v/y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=v,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+b)*w,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*b*w,this.mat4[15]=0,this}},{key:"ortho",value:function(g,y,b,x,v,w){var _=1/(g-y),C=1/(b-x),S=1/(v-w);return this.mat4[0]=-2*_,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*C,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*S,this.mat4[11]=0,this.mat4[12]=(g+y)*_,this.mat4[13]=(x+b)*C,this.mat4[14]=(w+v)*S,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(g,y,b,x){var v=new Array(4),w=this.mat4;return v[0]=w[0]*g+w[4]*y+w[8]*b+w[12]*x,v[1]=w[1]*g+w[5]*y+w[9]*b+w[13]*x,v[2]=w[2]*g+w[6]*y+w[10]*b+w[14]*x,v[3]=w[3]*g+w[7]*y+w[11]*b+w[15]*x,v}},{key:"multiplyPoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,0);return new a.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(b){var y;if(b===this||b===this.mat3)y=this.copy().mat3;else if(b instanceof a.default.Matrix)y=b.mat3;else if(c(b))y=b;else{if(arguments.length!==9)return;y=arguments}var b=this.mat3[0],x=this.mat3[1],v=this.mat3[2];return this.mat3[0]=b*y[0]+x*y[3]+v*y[6],this.mat3[1]=b*y[1]+x*y[4]+v*y[7],this.mat3[2]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[3],x=this.mat3[4],v=this.mat3[5],this.mat3[3]=b*y[0]+x*y[3]+v*y[6],this.mat3[4]=b*y[1]+x*y[4]+v*y[7],this.mat3[5]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[6],x=this.mat3[7],v=this.mat3[8],this.mat3[6]=b*y[0]+x*y[3]+v*y[6],this.mat3[7]=b*y[1]+x*y[4]+v*y[7],this.mat3[8]=b*y[2]+x*y[5]+v*y[8],this}},{key:"column",value:function(g){return new a.default.Vector(this.mat3[3*g],this.mat3[3*g+1],this.mat3[3*g+2])}},{key:"row",value:function(g){return new a.default.Vector(this.mat3[g],this.mat3[g+3],this.mat3[g+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(g,y){return(y=y===void 0?g.copy():y).x=this.row(0).dot(g),y.y=this.row(1).dot(g),y.z=this.row(2).dot(g),y}},{key:"createSubMatrix3x3",value:function(){var g=new a.default.Matrix("mat3");return g.mat3[0]=this.mat4[0],g.mat3[1]=this.mat4[1],g.mat3[2]=this.mat4[2],g.mat3[3]=this.mat4[4],g.mat3[4]=this.mat4[5],g.mat3[5]=this.mat4[6],g.mat3[6]=this.mat4[8],g.mat3[7]=this.mat4[9],g.mat3[8]=this.mat4[10],g}}])&&l(p.prototype,m),h&&l(p,h),d}(),a.default.Matrix);s.default=f},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.RenderBuffer=function(){function l(d,p,m,h,g,y){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.size=d,this.src=p,this.dst=m,this.attr=h,this._renderer=g,this.map=y}var u,c,f;return u=l,(c=[{key:"_prepareBuffer",value:function(d,p){var m,h,g,x=p.attributes,y=this._renderer.GL,b=d.model||d,x=x[this.attr];x&&(m=d[this.dst],0<(h=b[this.src]).length?((g=!m)&&(d[this.dst]=m=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,m),!g&&b.dirtyFlags[this.src]===!1||(g=(d=this.map)?d(h):h,this._renderer._bindBuffer(m,y.ARRAY_BUFFER,g),b.dirtyFlags[this.src]=!1),p.enableAttrib(x,this.size)):(d=x.location)!==-1&&this._renderer.registerEnabled.has(d)&&(y.disableVertexAttribArray(d),this._renderer.registerEnabled.delete(d)))}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.RenderBuffer,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(m=o("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var g=f();if(g&&g.has(h))return g.get(h);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var v;Object.prototype.hasOwnProperty.call(h,y)&&((v=x?Object.getOwnPropertyDescriptor(h,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=h[y])}return b.default=h,g&&g.set(h,b),b}(o("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}function d(h){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(h)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("./p5.RenderBuffer"),u.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=h!==void 0?h:c.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var p={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},m=(u.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==c.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},u.default.RendererGL.prototype.vertex=function(h,g){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in p){var b=p[y],y=this.immediateMode.geometry[y];y.push.apply(y,d(y.slice(y.length-3*b,y.length-2*b)).concat(d(y.slice(y.length-b,y.length))))}var x,v,w=x=v=0,_=(arguments.length===3?w=arguments[2]:arguments.length===4?(x=arguments[2],v=arguments[3]):arguments.length===5&&(w=arguments[2],x=arguments[3],v=arguments[4]),new u.default.Vector(h,g,w)),_=(this.immediateMode.geometry.vertices.push(_),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),_=(this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(_[0],_[1],_[2],_[3]),this.textureMode!==c.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,v/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,v),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=w,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=w,this},u.default.RendererGL.prototype.normal=function(h,g,y){return h instanceof u.default.Vector?this._currentNormal=h:this._currentNormal=new u.default.Vector(h,g,y),this},u.default.RendererGL.prototype.endShape=function(h,g,y,b,x,v){var w,_=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===c.TESS&&(this.immediateMode.shapeMode,c.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),w=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN,w=!0),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._doFill&&!w&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(_),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},u.default.RendererGL.prototype._processVertices=function(h){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,h=h===c.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===c.TESS,h=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g||h)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},u.default.RendererGL.prototype._calculateEdges=function(h,g,y){var b=[],x=0,v=this.immediateMode.contourIndices.slice(),w=0;switch(h){case c.TRIANGLE_STRIP:for(x=0;x<g.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case c.TRIANGLE_FAN:for(x=1;x<g.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,g.length-1]);break;case c.TRIANGLES:for(x=0;x<g.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case c.LINES:for(x=0;x<g.length-1;x+=2)b.push([x,x+1]);break;case c.QUADS:for(x=0;x<g.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case c.QUAD_STRIP:for(x=0;x<g.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<g.length;x++)x+1<g.length&&x+1!==v[0]?b.push([x,x+1]):((y||w)&&b.push([x,w]),0<v.length&&(w=v.shift()))}return h!==c.TESS&&y&&b.push([g.length-1,0]),b},u.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,g=(this.immediateMode.shapeMode=c.TRIANGLES,[[]]),y=0;y<this.immediateMode.geometry.vertices.length;y++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===y&&(this.immediateMode.contourIndices.shift(),g.push([])),g[g.length-1].push(this.immediateMode.geometry.vertices[y].x,this.immediateMode.geometry.vertices[y].y,this.immediateMode.geometry.vertices[y].z,this.immediateMode.geometry.uvs[2*y],this.immediateMode.geometry.uvs[2*y+1],this.immediateMode.geometry.vertexColors[4*y],this.immediateMode.geometry.vertexColors[4*y+1],this.immediateMode.geometry.vertexColors[4*y+2],this.immediateMode.geometry.vertexColors[4*y+3],this.immediateMode.geometry.vertexNormals[y].x,this.immediateMode.geometry.vertexNormals[y].y,this.immediateMode.geometry.vertexNormals[y].z);for(var b,x=this._triangulate(g),v=this.immediateMode.geometry.vertices,w=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),_=0,C=x.length;_<C;_+=u.default.RendererGL.prototype.tessyVertexSize)w.push.apply(w,d(x.slice(_+5,_+9))),this.normal.apply(this,d(x.slice(_+9,_+12))),this.vertex.apply(this,d(x.slice(_,_+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(S){return S.map(function(E){if(!b.has(E)){var A=v[E],N=h.immediateMode.geometry.vertices.findIndex(function(V){return A.x===V.x&&A.y===V.y&&A.z===V.z});if(N===-1){for(var k=1/0,M=0,I=0;I<h.immediateMode.geometry.vertices.length;I++){var P=h.immediateMode.geometry.vertices[I],R=A.x-P.x,L=A.y-P.y,P=A.z-P.z,R=R*R+L*L+P*P;R<k&&(k=R,M=I)}N=M}b.set(E,N)}return b.get(E)})})),this.immediateMode.geometry.vertexColors=w},u.default.RendererGL.prototype._drawImmediateFill=function(){var h,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,y=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,h=this._getImmediateFillShader(),this._setFillUniforms(h),!0),x=!1,v=void 0;try{for(var w,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(w=_.next()).done);b=!0)w.value._prepareBuffer(this.immediateMode.geometry,h)}catch(C){x=!0,v=C}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}if(h.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),g===1)y.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{y.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,g)}catch{console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode")}h.unbindShader()},u.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,g=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),y=(this._setStrokeUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(this.immediateMode.geometry,g)}catch(_){b=!0,x=_}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),g.unbindShader()},u.default.RendererGL);s.default=m},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=(o("./p5.RendererGL"),o("./p5.RenderBuffer"),function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var m=f();if(m&&m.has(p))return m.get(p);var h,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var b;Object.prototype.hasOwnProperty.call(p,h)&&((b=y?Object.getOwnPropertyDescriptor(p,h):null)&&(b.get||b.set)?Object.defineProperty(g,h,b):g[h]=p[h])}return g.default=p,m&&m.set(p,g),g}(o("../core/constants")));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.RendererGL.prototype.freeGeometry=function(p){p.gid?this._freeBuffers(p.gid):console.warn("The model you passed to freeGeometry does not have an id!")},u.default.RendererGL.prototype._initBufferDefaults=function(p){var m;return this._freeBuffers(p),1e3<Object.keys(this.retainedMode.geometry).length&&(m=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(m)),this.retainedMode.geometry[p]={}},u.default.RendererGL.prototype._freeBuffers=function(p){var m,h=this.retainedMode.geometry[p];function g(y){var b=!0,x=!1,v=void 0;try{for(var w,_=y[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var C=w.value;h[C.dst]&&(m.deleteBuffer(h[C.dst]),h[C.dst]=null)}}catch(S){x=!0,v=S}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}}h&&(delete this.retainedMode.geometry[p],m=this.GL,h.indexBuffer&&m.deleteBuffer(h.indexBuffer),g(this.retainedMode.buffers.stroke),g(this.retainedMode.buffers.fill))},u.default.RendererGL.prototype.createBuffers=function(x,m){var h,g,y,b=this.GL,x=this._initBufferDefaults(x),v=(x.model=m,x.indexBuffer);return m.faces.length?(v=v||(x.indexBuffer=b.createBuffer()),y=(g=(h=u.default.RendererGL.prototype._flatten(m.faces)).some(function(w){return 65535<w}))?Uint32Array:Uint16Array,this._bindBuffer(v,b.ELEMENT_ARRAY_BUFFER,h,y),x.indexBufferType=g?b.UNSIGNED_INT:b.UNSIGNED_SHORT,x.vertexCount=3*m.faces.length):(v&&(b.deleteBuffer(v),x.indexBuffer=null),x.vertexCount=m.vertices?m.vertices.length:0),x.lineVertexCount=m.lineVertices?m.lineVertices.length/3:0,x},u.default.RendererGL.prototype.drawBuffers=function(p){var m=this.GL,h=this.retainedMode.geometry[p];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[p].vertexCount){this._useVertexColor=0<h.model.vertexColors.length;var g=this._getRetainedFillShader(),y=(this._setFillUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.retainedMode.buffers.fill[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(h,g)}catch(A){b=!0,x=A}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),h.indexBuffer&&this._bindBuffer(h.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,h.model.hasFillTransparency()),this._drawElements(m.TRIANGLES,p),g.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<h.lineVertexCount){this._useLineColor=0<h.model.vertexStrokeColors.length;var _=this._getRetainedStrokeShader(),C=(this._setStrokeUniforms(_),!0),b=!1,x=void 0;try{for(var S,E=this.retainedMode.buffers.stroke[Symbol.iterator]();!(C=(S=E.next()).done);C=!0)S.value._prepareBuffer(h,_)}catch(k){b=!0,x=k}finally{try{C||E.return==null||E.return()}finally{if(b)throw x}}_.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,h.model.hasStrokeTransparency()),this._drawArrays(m.TRIANGLES,p),_.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(h),this},u.default.RendererGL.prototype.drawBuffersScaled=function(p,m,h,g){var y=this.uMVMatrix.copy();try{this.uMVMatrix.scale(m,h,g),this.drawBuffers(p)}finally{this.uMVMatrix=y}},u.default.RendererGL.prototype._drawArrays=function(p,m){return this.GL.drawArrays(p,0,this.retainedMode.geometry[m].lineVertexCount),this},u.default.RendererGL.prototype._drawElements=function(p,h){var h=this.retainedMode.geometry[h],g=this.GL;if(h.indexBuffer){if(this._pInst.webglVersion!==c.WEBGL2&&h.indexBufferType===g.UNSIGNED_INT&&!g.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");g.drawElements(g.TRIANGLES,h.vertexCount,h.indexBufferType,0)}else g.drawArrays(p||g.TRIANGLES,0,h.vertexCount)},u.default.RendererGL.prototype._drawPoints=function(p,m){var h=this.GL,g=this._getImmediatePointShader();this._setPointUniforms(g),this._bindBuffer(m,h.ARRAY_BUFFER,this._vToNArray(p),Float32Array,h.STATIC_DRAW),g.enableAttrib(g.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.Points,0,p.length),g.unbindShader()};var d=u.default.RendererGL;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(I,i,s){"use strict";function a(U){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(U)}function l(U){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(Y){return a(Y)}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":a(Y)})(U)}I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.concat"),I("core-js/modules/es.array.copy-within"),I("core-js/modules/es.array.every"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.flat"),I("core-js/modules/es.array.flat-map"),I("core-js/modules/es.array.from"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.array.map"),I("core-js/modules/es.array.slice"),I("core-js/modules/es.array.some"),I("core-js/modules/es.array.unscopables.flat"),I("core-js/modules/es.array.unscopables.flat-map"),I("core-js/modules/es.map"),I("core-js/modules/es.object.assign"),I("core-js/modules/es.object.get-own-property-descriptor"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.reflect.construct"),I("core-js/modules/es.reflect.get"),I("core-js/modules/es.regexp.to-string"),I("core-js/modules/es.set"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.float64-array"),I("core-js/modules/es.typed-array.int16-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint16-array"),I("core-js/modules/es.typed-array.uint32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.weak-map"),I("core-js/modules/web.dom-collections.iterator"),I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.concat"),I("core-js/modules/es.array.copy-within"),I("core-js/modules/es.array.every"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.flat"),I("core-js/modules/es.array.flat-map"),I("core-js/modules/es.array.from"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.array.map"),I("core-js/modules/es.array.slice"),I("core-js/modules/es.array.some"),I("core-js/modules/es.array.unscopables.flat"),I("core-js/modules/es.array.unscopables.flat-map"),I("core-js/modules/es.map"),I("core-js/modules/es.object.assign"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.set"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.float64-array"),I("core-js/modules/es.typed-array.int16-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint16-array"),I("core-js/modules/es.typed-array.uint32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.readPixelsWebGL=V,s.readPixelWebGL=G,s.default=void 0;var u=h(I("../core/main")),c=function(U){if(U&&U.__esModule)return U;if(U===null||l(U)!=="object"&&typeof U!="function")return{default:U};var Y=m();if(Y&&Y.has(U))return Y.get(U);var X,pe={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(X in U){var F;Object.prototype.hasOwnProperty.call(U,X)&&((F=$?Object.getOwnPropertyDescriptor(U,X):null)&&(F.get||F.set)?Object.defineProperty(pe,X,F):pe[X]=U[X])}return pe.default=U,Y&&Y.set(U,pe),pe}(I("../core/constants")),f=h(I("./GeometryBuilder")),d=h(I("libtess")),p=(I("./p5.Shader"),I("./p5.Camera"),I("../core/p5.Renderer"),I("./p5.Matrix"),I("./p5.Framebuffer"),I("path"),I("./p5.Texture"));function m(){var U;return typeof WeakMap!="function"?null:(U=new WeakMap,m=function(){return U},U)}function h(U){return U&&U.__esModule?U:{default:U}}function g(U){return function(Y){if(Array.isArray(Y)){for(var X=0,pe=new Array(Y.length);X<Y.length;X++)pe[X]=Y[X];return pe}}(U)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(U)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(U,Y){for(var X=0;X<Y.length;X++){var pe=Y[X];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(U,pe.key,pe)}}function b(U,Y,X){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,$,F){var z=function(q,ee){for(;!Object.prototype.hasOwnProperty.call(q,ee)&&(q=_(q))!==null;);return q}(z,$);if(z)return(z=Object.getOwnPropertyDescriptor(z,$)).get?z.get.call(F):z.value})(U,Y,X||U)}function x(U,Y){return(x=Object.setPrototypeOf||function(X,pe){return X.__proto__=pe,X})(U,Y)}function v(U){return function(){var Y,X,pe=_(U);return Y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Y=_(this).constructor,Reflect.construct(pe,arguments,Y)):pe.apply(this,arguments),pe=this,!(X=Y)||l(X)!=="object"&&typeof X!="function"?w(pe):X}}function w(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function _(U){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(U)}function C(U,Y,X){Y in U?Object.defineProperty(U,Y,{value:X,enumerable:!0,configurable:!0,writable:!0}):U[Y]=X}function S(U,Y){M+="#define STROKE_CAP_".concat(U," ").concat(Y,`
`),N[c[U]]=Y}function E(U,Y){M+="#define STROKE_JOIN_".concat(U," ").concat(Y,`
`),k[c[U]]=Y}var A,N={},k={},M="",I=(S("ROUND",0),S("PROJECT",1),S("SQUARE",2),E("ROUND",0),E("MITER",1),E("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),L={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:I+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:I+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:M+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:M+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},P=L.sphereMappingFrag;for(A in L)L[A]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+L[A];C(I={},c.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),C(I,c.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),C(I,c.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),C(I,c.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),C(I,c.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),C(I,c.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),C(I,c.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),C(I,c.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var R=I;function V(U,Y,le,pe,$,F,z,q,ee,ae){var Q=Y.getParameter(Y.FRAMEBUFFER_BINDING),le=(Y.bindFramebuffer(Y.FRAMEBUFFER,le),q===Y.RGBA?4:3),ie=F*z*le,Z=ee===Y.UNSIGNED_BYTE?Uint8Array:Float32Array;if(U instanceof Z&&U.length===ie||(U=new Z(ie)),Y.readPixels(pe,ae?ae-$-z:$,F,z,q,ee,U),Y.bindFramebuffer(Y.FRAMEBUFFER,Q),ae)for(var ge=Math.floor(z/2),ne=new Z(F*le),ye=0;ye<ge;ye++){var xe=ye*F*4,Ne=(z-ye-1)*F*4;ne.set(U.subarray(xe,xe+4*F)),U.copyWithin(xe,Ne,Ne+4*F),U.set(ne,Ne)}return U}function G(U,ee,X,pe,$,F,z){var q=U.getParameter(U.FRAMEBUFFER_BINDING),ee=(U.bindFramebuffer(U.FRAMEBUFFER,ee),$===U.RGBA?4:3),ee=new(F===U.UNSIGNED_BYTE?Uint8Array:Float32Array)(ee);return U.readPixels(X,z?z-pe-1:pe,1,1,$,F,ee),U.bindFramebuffer(U.FRAMEBUFFER,q),Array.from(ee)}u.default.prototype.setAttributes=function(U,Y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var X=!0;if(Y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[U]!==Y&&(this._glAttributes[U]=Y,X=!1)):U instanceof Object&&this._glAttributes!==U&&(this._glAttributes=U,X=!1),this._renderer.isP3D&&!X){if(!this._setupDone){for(var pe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(pe))return void u.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},u.default.RendererGL=function(U){var Y=$;if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(U&&U.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),U&&x(Y,U);var X,pe=v($);function $(F,z,q,ee){if(this instanceof $)return(F=pe.call(this,F,z,q))._setAttributeDefaults(z),F._initContext(),F.isP3D=!0,F.geometryBuilder=void 0,F.GL=F.drawingContext,F._pInst._setProperty("drawingContext",F.drawingContext),F._isErasing=!1,F._clipDepths=[],F._isClipApplied=!1,F._stencilTestOn=!1,F._enableLighting=!1,F.ambientLightColors=[],F.mixedAmbientLight=[],F.mixedSpecularColor=[],F.specularColors=[1,1,1],F.directionalLightDirections=[],F.directionalLightDiffuseColors=[],F.directionalLightSpecularColors=[],F.pointLightPositions=[],F.pointLightDiffuseColors=[],F.pointLightSpecularColors=[],F.spotLightPositions=[],F.spotLightDirections=[],F.spotLightDiffuseColors=[],F.spotLightSpecularColors=[],F.spotLightAngle=[],F.spotLightConc=[],F.activeImageLight=null,F.diffusedTextures=new Map,F.specularTextures=new Map,F.drawMode=c.FILL,F.curFillColor=F._cachedFillStyle=[1,1,1,1],F.curAmbientColor=F._cachedFillStyle=[1,1,1,1],F.curSpecularColor=F._cachedFillStyle=[0,0,0,0],F.curEmissiveColor=F._cachedFillStyle=[0,0,0,0],F.curStrokeColor=F._cachedStrokeStyle=[0,0,0,1],F.curBlendMode=c.BLEND,F.preEraseBlend=void 0,F._cachedBlendMode=void 0,F.webglVersion===c.WEBGL2?F.blendExt=F.GL:F.blendExt=F.GL.getExtension("EXT_blend_minmax"),F._isBlending=!1,F._hasSetAmbient=!1,F._useSpecularMaterial=!1,F._useEmissiveMaterial=!1,F._useNormalMaterial=!1,F._useShininess=1,F._useMetalness=0,F._useLineColor=!1,F._useVertexColor=!1,F.registerEnabled=new Set,F._tint=[255,255,255,255],F.constantAttenuation=1,F.linearAttenuation=0,F.quadraticAttenuation=0,F.uMVMatrix=new u.default.Matrix,F.uPMatrix=new u.default.Matrix,F.uNMatrix=new u.default.Matrix("mat3"),F.curMatrix=new u.default.Matrix("mat3"),F._currentNormal=new u.default.Vector(0,0,1),F._curCamera=new u.default.Camera(w(F)),F._curCamera._computeCameraDefaultSettings(),F._curCamera._setDefaultCamera(),F.filterCamera=new u.default.Camera(w(F)),F.filterCamera._computeCameraDefaultSettings(),F.filterCamera._setDefaultCamera(),F.prevTouches=[],F.zoomVelocity=0,F.rotateVelocity=new u.default.Vector(0,0),F.moveVelocity=new u.default.Vector(0,0),F.executeZoom=!1,F.executeRotateAndMove=!1,F.specularShader=void 0,F.sphereMapping=void 0,F.diffusedShader=void 0,F._defaultLightShader=void 0,F._defaultImmediateModeShader=void 0,F._defaultNormalShader=void 0,F._defaultColorShader=void 0,F._defaultPointShader=void 0,F.userFillShader=void 0,F.userStrokeShader=void 0,F.userPointShader=void 0,F.retainedMode={geometry:{},buffers:{stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(F)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(F)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(F)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(F)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(F))],fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(F),F._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(F),F._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(F)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(F)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(F),F._flatten)],text:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(F),F._vToNArray),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(F),F._flatten)]}},F.immediateMode={geometry:new u.default.Geometry,shapeMode:c.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(F),F._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(F),F._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(F)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(F)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(F),F._flatten)],stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(F)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(F)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(F)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(F)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(F))],point:F.GL.createBuffer()}},F.pointSize=5,F.curStrokeWeight=1,F.curStrokeCap=c.ROUND,F.curStrokeJoin=c.ROUND,F.textures=new Map,F.framebuffers=new Set,F.activeFramebuffers=[],F.filterShader=void 0,F.filterLayer=void 0,F.filterLayerTemp=void 0,F.defaultFilterShaders={},F.textureMode=c.IMAGE,F.textureWrapX=c.CLAMP,F.textureWrapY=c.CLAMP,F._tex=null,F._curveTightness=6,F._lookUpTableBezier=[],F._lookUpTableQuadratic=[],F._lutBezierDetail=0,F._lutQuadraticDetail=0,F.isProcessingVertices=!1,F._tessy=F._initTessy(),F.fontInfos={},F._curShader=void 0,F;throw new TypeError("Cannot call a class as a function")}return Y=$,(U=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var F;if(this.geometryBuilder)return F=this.geometryBuilder.finish(),this.geometryBuilder=void 0,F;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(F){return this.beginGeometry(),F(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(F){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};F._glAttributes===null?F._glAttributes=z:F._glAttributes=Object.assign(z,F._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?c.WEBGL2:c.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var F=this.drawingContext;F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL),F.viewport(0,0,F.drawingBufferWidth,F.drawingBufferHeight),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var F=this.drawingContext;return F.getParameter(F.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(F,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(u.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),q=Math.min(F,ee),ee=Math.min(z,ee);return q===F&&ee===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(q,", height: ").concat(ee,".")),{adjustedWidth:q,adjustedHeight:ee}}},{key:"_resetContext",value:function(F,z){var q,ee=this.width,ae=this.height,le=this.canvas.id,Q=this._pInst instanceof u.default.Graphics,le=(Q?((q=this._pInst).canvas.parentNode.removeChild(q.canvas),q.canvas=document.createElement("canvas"),(q._pInst._userNode||document.body).appendChild(q.canvas),u.default.Element.call(q,q.canvas,q._pInst),q.width=ee,q.height=ae):((q=this.canvas)&&q.parentNode.removeChild(q),(q=document.createElement("canvas")).id=le,(this._pInst._userNode||document.body).appendChild(q),this._pInst.canvas=q,this.canvas=q),new u.default.RendererGL(this._pInst.canvas,this._pInst,!Q));this._pInst._setProperty("_renderer",le),le.resize(ee,ae),le._applyDefaults(),Q||this._pInst._elements.push(le),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,F)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),F=ee.levels[0]/255,z=ee.levels[1]/255,q=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(F,z,q,ee)}},{key:"fill",value:function(F,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ae._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(F,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ae._array}},{key:"strokeCap",value:function(F){this.curStrokeCap=F}},{key:"strokeJoin",value:function(F){this.curStrokeJoin=F}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(F,z){F.width===z.width&&F.height===z.height||F.resize(z.width,z.height),F.pixelDensity()!==z.pixelDensity()&&F.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var F,z,q=this,ee=this.getFilterLayer(),ae=void 0,Q=void 0,le=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(Q=arguments.length<=0?void 0:arguments[0],C(F={},c.BLUR,3),C(F,c.POSTERIZE,4),C(F,c.THRESHOLD,.5),ae=Q in(F=F)&&(arguments.length<=1?void 0:arguments[1])===void 0?F[Q]:arguments.length<=1?void 0:arguments[1],Q in this.defaultFilterShaders||(this.defaultFilterShaders[Q]=new u.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,R[Q])),this.filterShader=this.defaultFilterShaders[Q]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ie=(this.matchSize(ee,le),ee.draw(function(){return q._pInst.clear()}),[1/(le.width*le.pixelDensity()),1/(le.height*le.pixelDensity())]);Q===c.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,le),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(c.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ie),this.filterShader.setUniform("canvasSize",[le.width,le.height]),this.filterShader.setUniform("radius",Math.max(1,ae)),z.draw(function(){q.filterShader.setUniform("direction",[1,0]),q.filterShader.setUniform("tex0",le),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),ee.draw(function(){q.filterShader.setUniform("direction",[0,1]),q.filterShader.setUniform("tex0",z),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.pop()):ee.draw(function(){q._pInst.noStroke(),q._pInst.blendMode(c.BLEND),q._pInst.shader(q.filterShader),q.filterShader.setUniform("tex0",le),q.filterShader.setUniform("texelSize",ie),q.filterShader.setUniform("canvasSize",[le.width,le.height]),q.filterShader.setUniform("filterParameter",ae),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(c.CORNER),this._pInst.blendMode(c.BLEND),le.filterCamera._resize(),this._pInst.setCamera(le.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-le.width/2,-le.height/2,le.width,le.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(F){return F?this._pInst.pixelDensity(F):this._pInst.pixelDensity()}},{key:"blendMode",value:function(F){F===c.DARKEST||F===c.LIGHTEST||F===c.ADD||F===c.BLEND||F===c.SUBTRACT||F===c.SCREEN||F===c.EXCLUSION||F===c.REPLACE||F===c.MULTIPLY||F===c.REMOVE?this.curBlendMode=F:F!==c.BURN&&F!==c.OVERLAY&&F!==c.HARD_LIGHT&&F!==c.SOFT_LIGHT&&F!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(F,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(c.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,F/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var F=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},F=(b(_($.prototype),"beginClip",this).call(this,F),this.drawTarget()._isClipApplied=!0,this.GL);F.clearStencil(0),F.clear(F.STENCIL_BUFFER_BIT),F.enable(F.STENCIL_TEST),this._stencilTestOn=!0,F.stencilFunc(F.ALWAYS,1,255),F.stencilOp(F.KEEP,F.KEEP,F.REPLACE),F.disable(F.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var F=this.GL;F.stencilOp(F.KEEP,F.KEEP,F.KEEP),F.stencilFunc(this._clipInvert?F.EQUAL:F.NOTEQUAL,0,255),F.enable(F.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(_($.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(F){this.curStrokeWeight!==F&&(this.pointSize=F,this.curStrokeWeight=F)}},{key:"_getPixel",value:function(F,z){var q=this.GL;return G(q,null,F,z,q.RGBA,q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var F,z,q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(F=this._pInst._pixelDensity,z=this.GL,q._setProperty("pixels",V(q.pixels,z,null,0,0,this.width*F,this.height*F,z.RGBA,z.UNSIGNED_BYTE,this.height*F)))}},{key:"updatePixels",value:function(){var F=this._getTempFramebuffer();F.pixels=this._pixelsState.pixels,F.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(c.CENTER),this._pInst.image(F,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:c.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:c.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(F){return this.retainedMode.geometry[F]!==void 0}},{key:"viewport",value:function(F,z){this._viewport=[0,0,F,z],this.GL.viewport(0,0,F,z)}},{key:"resize",value:function(ae,ee){u.default.Renderer.prototype.resize.call(this,ae,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var ae=this._pixelsState,q=(ae.pixels!==void 0&&ae._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,ae=void 0;try{for(var Q,le=this.framebuffers[Symbol.iterator]();!(q=(Q=le.next()).done);q=!0)Q.value._canvasSizeChanged()}catch(ie){ee=!0,ae=ie}finally{try{q||le.return==null||le.return()}finally{if(ee)throw ae}}}},{key:"clear",value:function(){var F=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,q=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,ae=this.activeFramebuffer();ae&&ae.format===c.UNSIGNED_BYTE&&!ae.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(F*ee,z*ee,q*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(F,z,q,ee,ae,Q){arguments.length===16?u.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([F,z,0,0,q,ee,0,0,0,0,1,0,ae,Q,0,1])}},{key:"translate",value:function(F,z,q){return F instanceof u.default.Vector&&(q=F.z,z=F.y,F=F.x),this.uMVMatrix.translate([F,z,q]),this}},{key:"scale",value:function(F,z,q){return this.uMVMatrix.scale(F,z,q),this}},{key:"rotate",value:function(F,z){return z===void 0?this.rotateZ(F):(u.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(F){return this.rotate(F,1,0,0),this}},{key:"rotateY",value:function(F){return this.rotate(F,0,1,0),this}},{key:"rotateZ",value:function(F){return this.rotate(F,0,0,1),this}},{key:"push",value:function(){var F=u.default.Renderer.prototype.push.apply(this),z=F.properties;return z.uMVMatrix=this.uMVMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,F}},{key:"pop",value:function(){var F;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,q=new Array(z),ee=0;ee<z;ee++)q[ee]=arguments[ee];(F=b(_($.prototype),"pop",this)).call.apply(F,[this].concat(q)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var F=this.drawTarget();F._isClipApplied!==this._stencilTestOn&&(F._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var F=this.userStrokeShader;return F&&F.isStrokeShader()?F:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(F){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(P)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",F),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var F=this.userFillShader;if(this._useNormalMaterial&&(!F||!F.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!F||!F.isLightShader())return this._getLightShader()}else if(this._tex){if(!F||!F.isTextureShader())return this._getLightShader()}else if(!F)return this._getImmediateModeShader();return F}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var F=this.userFillShader;if(this._enableLighting){if(!F||!F.isLightShader())return this._getLightShader()}else if(this._tex){if(!F||!F.isTextureShader())return this._getLightShader()}else if(!F)return this._getColorShader();return F}},{key:"_getImmediatePointShader",value:function(){var F=this.userPointShader;return F&&F.isPointShader()?F:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+L.phongFrag):this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+L.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===c.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(F,z){var q="";return this.webglVersion===c.WEBGL2&&(q+=`#version 300 es
#define WEBGL2
`),F==="vert"?q+=`#define VERTEX_SHADER
`:F==="frag"&&(q+=`#define FRAGMENT_SHADER
`),z&&(q+="precision ".concat(z,` float;
`)),q}},{key:"_getEmptyTexture",value:function(){var F;return this._emptyTexture||((F=new u.default.Image(1,1)).set(0,0,255),this._emptyTexture=new u.default.Texture(this,F)),this._emptyTexture}},{key:"getTexture",value:function(F){F instanceof u.default.Framebuffer&&(F=F.color);var z=this.textures.get(F);return z||(z=new u.default.Texture(this,F),this.textures.set(F,z),z)}},{key:"getDiffusedTexture",value:function(F){var z,q,ee=this;return this.diffusedTextures.get(F)!=null?this.diffusedTextures.get(F):(z=Math.floor(F.height/F.width*200),q=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(L.imageLightVert,L.imageLightDiffusedFrag)),q.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",F),ee._pInst.noStroke(),ee._pInst.rectMode(c.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(F,q),q)}},{key:"getSpecularTexture",value:function(F){var z=this;if(this.specularTextures.get(F)!=null)return this.specularTextures.get(F);for(var q,ee=[],ae=this._pInst.createFramebuffer({width:512,height:512,density:1}),Q=Math.log(512)/Math.log(2),le=(this.specularShader||(this.specularShader=this._pInst.createShader(L.imageLightVert,L.imageLightSpecularFrag)),512);1<=le;le/=2)(function(ie){ae.resize(ie,ie);var Z=1-Math.log(ie)/Math.log(2)/Q;ae.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",F),z.specularShader.setUniform("roughness",Z),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(ie,ie)}),ee.push(ae.get().drawingContext.getImageData(0,0,ie,ie))})(le);return ae.remove(),q=new p.MipmapTexture(this,ee,{}),this.specularTextures.set(F,q),q}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(F){return new u.default.Framebuffer(this,F)}},{key:"_setStrokeUniforms",value:function(F){F.bindShader(),F.setUniform("uUseLineColor",this._useLineColor),F.setUniform("uMaterialColor",this.curStrokeColor),F.setUniform("uStrokeWeight",this.curStrokeWeight),F.setUniform("uStrokeCap",N[this.curStrokeCap]),F.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(F){var z=this,q=(F.bindShader(),this.mixedSpecularColor=g(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,ae){return z.curFillColor[ae]*z._useMetalness+ee*(1-z._useMetalness)})),F.setUniform("uUseVertexColor",this._useVertexColor),F.setUniform("uMaterialColor",this.curFillColor),F.setUniform("isTexture",!!this._tex),this._tex&&F.setUniform("uSampler",this._tex),F.setUniform("uTint",this._tint),F.setUniform("uHasSetAmbient",this._hasSetAmbient),F.setUniform("uAmbientMatColor",this.curAmbientColor),F.setUniform("uSpecularMatColor",this.mixedSpecularColor),F.setUniform("uEmissiveMatColor",this.curEmissiveColor),F.setUniform("uSpecular",this._useSpecularMaterial),F.setUniform("uEmissive",this._useEmissiveMaterial),F.setUniform("uShininess",this._useShininess),F.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(F),F.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),q=(F.setUniform("uPointLightCount",q),F.setUniform("uPointLightLocation",this.pointLightPositions),F.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),F.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),q=(F.setUniform("uDirectionalLightCount",q),F.setUniform("uLightingDirection",this.directionalLightDirections),F.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),F.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),q=(this.mixedAmbientLight=g(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=z._useMetalness,Math.max(0,ee)})),F.setUniform("uAmbientLightCount",q),F.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);F.setUniform("uSpotLightCount",q),F.setUniform("uSpotLightAngle",this.spotLightAngle),F.setUniform("uSpotLightConc",this.spotLightConc),F.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),F.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),F.setUniform("uSpotLightLocation",this.spotLightPositions),F.setUniform("uSpotLightDirection",this.spotLightDirections),F.setUniform("uConstantAttenuation",this.constantAttenuation),F.setUniform("uLinearAttenuation",this.linearAttenuation),F.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),F.bindTextures()}},{key:"_setImageLightUniforms",value:function(F){var z,q;F.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),F.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),q=20/this._useShininess,F.setUniform("levelOfDetail",8*q),F.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(F){F.bindShader(),F.setUniform("uMaterialColor",this.curStrokeColor),F.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(F,z,q,ee,ae){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,F),q!==void 0&&((F=q)instanceof u.default.DataArray?F=q.dataArray():F instanceof(ee||Float32Array)||(F=new(ee||Float32Array)(F)),this.GL.bufferData(z,F,ae||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(F,z){return F.length===z.length&&F.every(function(q,ee){return q===z[ee]})}},{key:"_isTypedArray",value:function(F){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return F instanceof z})}},{key:"_flatten",value:function(F){return F.flat()}},{key:"_vToNArray",value:function(F){return F.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(F){var z=F*F,q=1-F,ee=q*q;return[ee*q,3*ee*F,3*q*z,z*F]}},{key:"_quadraticCoefficients",value:function(F){var z=1-F;return[z*z,2*z*F,F*F]}},{key:"_bezierToCatmull",value:function(F){return[F[1],F[1]+(F[2]-F[0])/this._curveTightness,F[2]-(F[3]-F[1])/this._curveTightness,F[2]]}},{key:"_initTessy",value:function(){var F=new d.default.GluTesselator;return F.gluTessCallback(d.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,q){var ee=!0,ae=!1,Q=void 0;try{for(var le,ie=z[Symbol.iterator]();!(ee=(le=ie.next()).done);ee=!0){var Z=le.value;q.push(Z)}}catch(ge){ae=!0,Q=ge}finally{try{ee||ie.return==null||ie.return()}finally{if(ae)throw Q}}}),F.gluTessCallback(d.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==d.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),F.gluTessCallback(d.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),F.gluTessCallback(d.default.gluEnum.GLU_TESS_COMBINE,function(z,q,ee){for(var ae=new Array(u.default.RendererGL.prototype.tessyVertexSize).fill(0),Q=0;Q<ee.length;Q++)for(var le=0;le<ae.length;le++)ee[Q]!==0&&q[Q]&&(ae[le]+=q[Q][le]*ee[Q]);return ae}),F.gluTessCallback(d.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),F.gluTessProperty(d.default.gluEnum.GLU_TESS_WINDING_RULE,d.default.windingRule.GLU_TESS_WINDING_NONZERO),F}},{key:"_triangulate",value:function(F){var z=F[0]?F[0][2]:void 0,q=!0,ee=!0,Z=!1,ne=void 0;try{for(var ae,Q=F[Symbol.iterator]();!(ee=(ae=Q.next()).done);ee=!0)for(var le=ae.value,ie=0;ie<le.length;ie+=u.default.RendererGL.prototype.tessyVertexSize)if(le[ie+2]!==z){q=!1;break}}catch(lt){Z=!0,ne=lt}finally{try{ee||Q.return==null||Q.return()}finally{if(Z)throw ne}}q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var Z=[],ge=(this._tessy.gluTessBeginPolygon(Z),!0),ne=!1,ye=void 0;try{for(var xe,Ne=F[Symbol.iterator]();!(ge=(xe=Ne.next()).done);ge=!0){var Ae=xe.value;this._tessy.gluTessBeginContour();for(var Me=0;Me<Ae.length;Me+=u.default.RendererGL.prototype.tessyVertexSize){var ze=Ae.slice(Me,Me+u.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(ze,ze)}this._tessy.gluTessEndContour()}}catch(lt){ne=!0,ye=lt}finally{try{ge||Ne.return==null||Ne.return()}finally{if(ne)throw ye}}return this._tessy.gluTessEndPolygon(),Z}}])&&y(Y.prototype,U),X&&y(Y,X),$}(u.default.Renderer),u.default.prototype._assert3d=function(U){if(!this._renderer.isP3D)throw new Error("".concat(U,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},u.default.RendererGL.prototype.tessyVertexSize=12,I=u.default.RendererGL,s.default=I},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Shader=function(){function u(p,m,h){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=m,this._fragSrc=h,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var c,f,d;return c=u,(f=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return a.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return a.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(p){var m=new a.default.Shader(p._renderer,this._vertSrc,this._fragSrc);return m.ensureCompiledOnContext(p),m}},{key:"ensureCompiledOnContext",value:function(p){if(this._glProgram!==0&&this._renderer!==p._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=p._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,m=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),h=0;h<m;++h){var g=p.getActiveAttrib(this._glProgram,h),y=g.name,b=p.getAttribLocation(this._glProgram,y),x={};x.name=y,x.location=b,x.index=h,x.type=g.type,x.size=g.size,this.attributes[y]=x}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,m=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),h=0,g=0;g<m;++g){var y=p.getActiveUniform(this._glProgram,g),b={},x=(b.location=p.getUniformLocation(this._glProgram,y.name),b.size=y.size,y.name);1<y.size&&(x=x.substring(0,x.indexOf("[0]"))),b.name=x,b.type=y.type,b._cachedData=void 0,b.type===p.SAMPLER_2D&&(b.samplerIndex=h,h++,this.samplers.push(b)),b.isArray=1<y.size||b.type===p.FLOAT_MAT3||b.type===p.FLOAT_MAT4||b.type===p.FLOAT_VEC2||b.type===p.FLOAT_VEC3||b.type===p.FLOAT_VEC4||b.type===p.INT_VEC2||b.type===p.INT_VEC4||b.type===p.INT_VEC3,this.uniforms[x]=b}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,m=!0,h=!1,g=void 0;try{for(var y,b=this.samplers[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var x=y.value,v=x.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+x.samplerIndex),v.bindTexture(),v.update(),p.uniform1i(x.location,x.samplerIndex)}}catch(w){h=!0,g=w}finally{try{m||b.return==null||b.return()}finally{if(h)throw g}}}},{key:"updateTextures",value:function(){var p=!0,m=!1,h=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value.texture;b&&b.update()}}catch(x){m=!0,h=x}finally{try{p||y.return==null||y.return()}finally{if(m)throw h}}}},{key:"unbindTextures",value:function(){var p=!0,m=!1,h=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;this.setUniform(b.name,this._renderer._getEmptyTexture())}}catch(x){m=!0,h=x}finally{try{p||y.return==null||y.return()}finally{if(m)throw h}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,m=this._renderer.uPMatrix,h=this._renderer.uMVMatrix,g=h.copy();g.mult(m),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",m.mat4),this.setUniform("uModelViewMatrix",h.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,m){var h=this.uniforms[p];if(h){var g=this._renderer.GL;if(h.isArray){if(h._cachedData&&this._renderer._arraysEqual(h._cachedData,m))return;h._cachedData=m.slice(0)}else{if(h._cachedData&&h._cachedData===m)return;Array.isArray(m)?h._cachedData=m.slice(0):h._cachedData=m}var y=h.location;switch(this.useProgram(),h.type){case g.BOOL:m===!0?g.uniform1i(y,1):g.uniform1i(y,0);break;case g.INT:1<h.size?m.length&&g.uniform1iv(y,m):g.uniform1i(y,m);break;case g.FLOAT:1<h.size?m.length&&g.uniform1fv(y,m):g.uniform1f(y,m);break;case g.FLOAT_MAT3:g.uniformMatrix3fv(y,!1,m);break;case g.FLOAT_MAT4:g.uniformMatrix4fv(y,!1,m);break;case g.FLOAT_VEC2:1<h.size?m.length&&g.uniform2fv(y,m):g.uniform2f(y,m[0],m[1]);break;case g.FLOAT_VEC3:1<h.size?m.length&&g.uniform3fv(y,m):g.uniform3f(y,m[0],m[1],m[2]);break;case g.FLOAT_VEC4:1<h.size?m.length&&g.uniform4fv(y,m):g.uniform4f(y,m[0],m[1],m[2],m[3]);break;case g.INT_VEC2:1<h.size?m.length&&g.uniform2iv(y,m):g.uniform2i(y,m[0],m[1]);break;case g.INT_VEC3:1<h.size?m.length&&g.uniform3iv(y,m):g.uniform3i(y,m[0],m[1],m[2]);break;case g.INT_VEC4:1<h.size?m.length&&g.uniform4iv(y,m):g.uniform4i(y,m[0],m[1],m[2],m[3]);break;case g.SAMPLER_2D:g.activeTexture(g.TEXTURE0+h.samplerIndex),h.texture=m instanceof a.default.Texture?m:this._renderer.getTexture(m),g.uniform1i(y,h.samplerIndex),h.texture.src.gifProperties&&h.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(p){return p!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,m,h,g,y,b){var x;return p&&(p=p.location)!==-1&&(x=this._renderer.GL,this._renderer.registerEnabled.has(p)||(x.enableVertexAttribArray(p),this._renderer.registerEnabled.add(p)),this._renderer.GL.vertexAttribPointer(p,m,h||x.FLOAT,g||!1,y||0,b||0)),this}},{key:"disableRemainingAttributes",value:function(){var p=this,m=!0,h=!1,g=void 0;try{for(var y,b=this._renderer.registerEnabled.values()[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)(function(){var x=y.value;Object.keys(p.attributes).some(function(v){return p.attributes[v].location===x})||(p._renderer.GL.disableVertexAttribArray(x),p._renderer.registerEnabled.delete(x))})()}catch(x){h=!0,g=x}finally{try{m||b.return==null||b.return()}finally{if(h)throw g}}}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Shader,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.checkWebGLCapabilities=x,s.default=s.MipmapTexture=void 0;var u=(b=o("../core/main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=S?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=v[_])}return C.default=v,w&&w.set(v,C),C}(o("../core/constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){return(d=Object.setPrototypeOf||function(_,C){return _.__proto__=C,_})(v,w)}function p(v){return function(){var w,_=m(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=m(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function m(v){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function y(v,w,_){w&&g(v.prototype,w),_&&g(v,_)}u.default.Texture=function(){function v(A,_,E){h(this,v),this._renderer=A;var S=this._renderer.GL,E=(E=E||{},this.src=_,this.glTex=void 0,this.glTarget=S.TEXTURE_2D,this.glFormat=E.format||S.RGBA,this.mipmaps=!1,this.glMinFilter=E.minFilter||S.LINEAR,this.glMagFilter=E.magFilter||S.LINEAR,this.glWrapS=E.wrapS||S.CLAMP_TO_EDGE,this.glWrapT=E.wrapT||S.CLAMP_TO_EDGE,this.glDataType=E.dataType||S.UNSIGNED_BYTE,x(A)),A=(this.glFormat!==S.HALF_FLOAT||E.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=S.FLOAT),this.glFormat!==S.HALF_FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||E.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.glFormat!==S.FLOAT||E.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=S.UNSIGNED_BYTE),this.glFormat!==S.FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||E.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.isSrcMediaElement=u.default.MediaElement!==void 0&&_ instanceof u.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=u.default.Element!==void 0&&_ instanceof u.default.Element&&!(_ instanceof u.default.Graphics)&&!(_ instanceof u.default.Renderer),this.isSrcP5Image=_ instanceof u.default.Image,this.isSrcP5Graphics=_ instanceof u.default.Graphics,this.isSrcP5Renderer=_ instanceof u.default.Renderer,this.isImageData=typeof ImageData<"u"&&_ instanceof ImageData,this.isFramebufferTexture=_ instanceof u.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=A.width,this.height=A.height,this.init(A),this}return y(v,[{key:"_getTextureDataFromSource",value:function(){var w;return this.isFramebufferTexture?w=this.src.rawTexture():this.isSrcP5Image?w=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?w=this.src.elt:this.isImageData&&(w=this.src),w}},{key:"init",value:function(w){var _,C=this._renderer.GL;this.isFramebufferTexture||(this.glTex=C.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(_=new Uint8Array([1,1,1,1]),C.texImage2D(this.glTarget,0,C.RGBA,1,1,0,this.glFormat,this.glDataType,_)):C.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w))}},{key:"update",value:function(){var w,_,C,S=this.src;return S.width!==0&&S.height!==0&&!this.isFramebufferTexture&&(w=this._getTextureDataFromSource(),_=!1,C=this._renderer.GL,w.width!==this.width||w.height!==this.height?(_=!0,this.width=w.width||S.width,this.height=w.height||S.height,this.isSrcP5Image?S.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&S.setModified(!0)):this.isSrcP5Image?S.isModified()&&S.setModified(!(_=!0)):this.isSrcMediaElement?S.isModified()?S.setModified(!(_=!0)):S.loadedmetadata&&this._videoPrevUpdateTime!==S.time()&&(this._videoPrevUpdateTime=S.time(),_=!0):this.isImageData?S._dirty&&(_=!(S._dirty=!1)):_=!0,_&&(this.bindTexture(),C.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w)),_)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(w,_){var C=this._renderer.GL;this.glMinFilter=this.glFilter(w),this.glMagFilter=this.glFilter(_),this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(w){var _=this._renderer.GL;return w===c.NEAREST?_.NEAREST:_.LINEAR}},{key:"setWrapMode",value:function(w,_){function C(N){return(N&N-1)==0}var S=this._renderer.GL,A=this._getTextureDataFromSource(),A=A.naturalWidth&&A.naturalHeight?(E=A.naturalWidth,A.naturalHeight):(E=this.width,this.height),E=C(E),A=C(A);w===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapS=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):w===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapS=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):this.glWrapS=S.CLAMP_TO_EDGE,_===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapT=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):_===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapT=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):this.glWrapT=S.CLAMP_TO_EDGE,this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this.glWrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),v}();var b=function(v){var w=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&d(w,v);var _=p(C);function C(S,E,A){return h(this,C),E=(S=_.call(this,S,E,A))._renderer.GL,S.glMinFilter===E.LINEAR&&(S.glMinFilter=E.LINEAR_MIPMAP_LINEAR),S}return y(C,[{key:"glFilter",value:function(S){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(S){var E=this._renderer.GL;this.glTex=E.createTexture(),this.bindTexture();for(var A=0;A<S.length;A++)E.texImage2D(this.glTarget,A,this.glFormat,this.glFormat,this.glDataType,S[A]);this.glMinFilter=E.LINEAR_MIPMAP_LINEAR,E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,this.glMagFilter),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),C}(u.default.Texture);function x(S){var w=S.GL,S=S.webglVersion,_=S===c.WEBGL2?w.getExtension("EXT_color_buffer_float")&&w.getExtension("EXT_float_blend"):w.getExtension("OES_texture_float"),C=_&&w.getExtension("OES_texture_float_linear"),S=S===c.WEBGL2?w.getExtension("EXT_color_buffer_float"):w.getExtension("OES_texture_half_float");return{float:_,floatLinear:C,halfFloat:S,halfFloatLinear:S&&w.getExtension("OES_texture_half_float_linear")}}s.MipmapTexture=b,o=u.default.Texture,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.iterator");var u,c=(u=o("../core/main"))&&u.__esModule?u:{default:u},f=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=d();if(w&&w.has(v))return w.get(v);var _,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=S?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=v[_])}return C.default=v,w&&w.set(v,C),C}(o("../core/constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}function p(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function m(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function h(v,w,_){w&&m(v.prototype,w),_&&m(v,_)}o("./p5.Shader"),o("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(v){return this._isOpenType()?this._textFont._textWidth(v,this._textSize):0};var g=function(){function v(w,_){p(this,v),this.width=w,this.height=_,this.infos=[]}return h(v,[{key:"findImage",value:function(w){var _,C,S=this.width*this.height;if(S<w)throw new Error("font is too complex to render in 3D");for(var E=this.infos.length-1;0<=E;--E){var A=this.infos[E];if(A.index+w<S){C=(_=A).imageData;break}}if(!_){try{C=new ImageData(this.width,this.height)}catch{var N=document.getElementsByTagName("canvas")[0],k=!N,M=(N||((N=document.createElement("canvas")).style.display="none",document.body.appendChild(N)),N.getContext("2d"));M&&(C=M.createImageData(this.width,this.height)),k&&document.body.removeChild(N)}this.infos.push(_={index:0,imageData:C})}return M=_.index,_.index+=w,C._dirty=!0,{imageData:C,index:M}}}]),v}();function y(A,w,_,C,S){var E=A.imageData.data,A=4*A.index++;E[A++]=w,E[A++]=_,E[A++]=C,E[+A]=S}var b=Math.sqrt(3),x=function(){function v(w){p(this,v),this.font=w,this.strokeImageInfos=new g(64,64),this.colDimImageInfos=new g(64,64),this.rowDimImageInfos=new g(64,64),this.colCellImageInfos=new g(64,64),this.rowCellImageInfos=new g(64,64),this.glyphInfos={}}return h(v,[{key:"getGlyphInfo",value:function(w){var _=this.glyphInfos[w.index];if(!_){var C=w.getBoundingBox(),S=C.x1,E=C.y1,A=C.x2-S,N=C.y2-E,k=w.path.commands;if(A==0||N==0||!k.length)return this.glyphInfos[w.index]={};for(var M=[],I=[],L=[],P=8;0<=P;--P)L.push([]);for(P=8;0<=P;--P)I.push([]);var R,V,G,U,Y=function(){function Tt(At,Rt,Nt,Le){p(this,Tt),this.p0=At,this.c0=Rt,this.c1=Nt,this.p1=Le}return h(Tt,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ut){var Rt=c.default.Vector.lerp(this.p0,this.c0,ut),Le=c.default.Vector.lerp(this.c0,this.c1,ut),Nt=c.default.Vector.lerp(Rt,Le,ut),Le=(this.c1=c.default.Vector.lerp(this.c1,this.p1,ut),this.c0=c.default.Vector.lerp(Le,this.c1,ut),c.default.Vector.lerp(Nt,this.c0,ut)),ut=new Tt(this.p0,Rt,Nt,Le);return this.p0=Le,ut}},{key:"splitInflections",value:function(){var At=c.default.Vector.sub(this.c0,this.p0),Rt=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),At),Nt=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),At),c.default.Vector.mult(Rt,2)),Le=[],ut=Rt.x*Nt.y-Rt.y*Nt.x;return ut!==0&&0<=(At=(Nt=At.x*Nt.y-At.y*Nt.x)*Nt-4*ut*(At.x*Rt.y-At.y*Rt.x))&&(ut<0&&(ut=-ut,Nt=-Nt),At=(-Nt+(Rt=Math.sqrt(At)))/(2*ut),0<(Nt=(-Nt-Rt)/(2*ut))&&Nt<1&&(Le.push(this.split(Nt)),At=1-(1-At)/(1-Nt)),0<At&&At<1&&Le.push(this.split(At))),Le.push(this),Le}}]),Tt}(),X=!0,pe=!1,$=void 0;try{for(var F,z=k[Symbol.iterator]();!(X=(F=z.next()).done);X=!0){var q=F.value,ee=(q.x-S)/A,ae=(q.y-E)/N;if(!We(R,V,ee,ae)){switch(q.type){case"M":G=ee,U=ae;break;case"L":lt(R,V,ee,ae);break;case"Q":var Q=(q.x1-S)/A,le=(q.y1-E)/N;Me([R,ee,Q],[V,ae,le],{x:R,y:V,cx:Q,cy:le});break;case"Z":We(R,V,G,U)?M.push({x:R,y:V}):(lt(R,V,G,U),M.push({x:G,y:U}));break;case"C":for(var ie=function(he,Ve,Qe,Nt,Le,ut,Ge,fe){var he=new Y(new c.default.Vector(he,Ve),new c.default.Vector(Qe,Nt),new c.default.Vector(Le,ut),new c.default.Vector(Ge,fe)).splitInflections(),oe=[],be=30/b,Oe=!0,Ve=!1,Qe=void 0;try{for(var _t,Dt=he[Symbol.iterator]();!(Oe=(_t=Dt.next()).done);Oe=!0){for(var Ft=_t.value,Ut=[],Qr=void 0;!(.125<=(Qr=be/Ft.quadError()));){var Mr=Math.pow(Qr,.3333333333333333),lr=Ft.split(Mr),qr=Ft.split(1-Mr/(1-Mr));oe.push(lr),Ut.push(Ft),Ft=qr}Qr<1&&oe.push(Ft.split(.5)),oe.push(Ft),Array.prototype.push.apply(oe,Ut.reverse())}}catch(Fr){Ve=!0,Qe=Fr}finally{try{Oe||Dt.return==null||Dt.return()}finally{if(Ve)throw Qe}}return oe}(R,V,(q.x1-S)/A,(q.y1-E)/N,(q.x2-S)/A,(q.y2-E)/N,ee,ae),Z=0;Z<ie.length;Z++){var ge=ie[Z].toQuadratic();Me([ge.x,ge.x1,ge.cx],[ge.y,ge.y1,ge.cy],ge)}break;default:throw new Error("unknown command type: ".concat(q.type))}R=ee,V=ae}}}catch(Tt){pe=!0,$=Tt}finally{try{X||z.return==null||z.return()}finally{if(pe)throw $}}for(var ne=M.length,ye=this.strokeImageInfos.findImage(ne),xe=ye.index,Ne=0;Ne<ne;++Ne){var Ae=M[Ne];y(ye,ze(Ae.x),ze(Ae.y),ze(Ae.cx),ze(Ae.cy))}(_=this.glyphInfos[w.index]={glyph:w,uGlyphRect:[C.x1,-C.y1,C.x2,-C.y2],strokeImageInfo:ye,strokes:M,colInfo:Bt(L,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Bt(I,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[_.colInfo.dimOffset,_.rowInfo.dimOffset]}return _;function Me(Tt,At,Rt){var Nt=M.length;function Le(oe,be,Oe){for(var Ve=oe.length;0<Ve--;){var Qe=oe[Ve];Qe<be&&(be=Qe),Oe<Qe&&(Oe=Qe)}return{min:be,max:Oe}}M.push(Rt);for(var Rt=Le(Tt,1,0),Tt=Math.max(Math.floor(9*Rt.min-.5),0),ut=Math.min(Math.ceil(9*Rt.max+.5),9),Ge=Tt;Ge<ut;++Ge)L[Ge].push(Nt);for(var Rt=Le(At,1,0),Tt=Math.max(Math.floor(9*Rt.min-.5),0),fe=Math.min(Math.ceil(9*Rt.max+.5),9),he=Tt;he<fe;++he)I[he].push(Nt)}function ze(Tt){return(Tt=(Rt=255)*Tt)<(At=0)?At:Rt<Tt?Rt:Tt;var At,Rt}function lt(Tt,At,Rt,Nt){Me([Tt,Rt],[At,Nt],{x:Tt,y:At,cx:(Tt+Rt)/2,cy:(At+Nt)/2})}function We(Tt,At,Rt,Nt){return Math.abs(Rt-Tt)<1e-5&&Math.abs(Nt-At)<1e-5}function Bt(Tt,At,Rt){for(var Nt=Tt.length,Le=At.findImage(Nt),At=Le.index,ut=0,Ge=0;Ge<Nt;++Ge)ut+=Tt[Ge].length;for(var fe=Rt.findImage(ut),he=0;he<Nt;++he){var oe=Tt[he],be=oe.length,Oe=fe.index;y(Le,Oe>>7,127&Oe,be>>7,127&be);for(var Ve=0;Ve<be;++Ve){var Qe=oe[Ve]+xe;y(fe,Qe>>7,127&Qe,0,0)}}return{cellImageInfo:fe,dimOffset:At,dimImageInfo:Le}}}}]),v}();c.default.RendererGL.prototype._renderText=function(v,w,_,C,S){if(this._textFont&&typeof this._textFont!="string"){if(!(S<=C)&&this._doFill){if(this._isOpenType()){v.push();var S=this._doStroke,E=this.drawMode,A=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),N=(N=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(A)),_=this._textFont._handleAlignment(this,w,_,C),C=this._textSize/A.unitsPerEm,k=(this.translate(_.x,_.y,0),this.scale(C,C,1),this.GL),_=!this._defaultFontShader,M=this._getFontShader(),I=(M.init(),M.bindShader(),_&&(M.setUniform("uGridImageSize",[64,64]),M.setUniform("uCellsImageSize",[64,64]),M.setUniform("uStrokeImageSize",[64,64]),M.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),L=(I||((C=this._textGeom=new c.default.Geometry(1,1,function(){for(var Z=0;Z<=1;Z++)for(var ge=0;ge<=1;ge++)this.vertices.push(new c.default.Vector(ge,Z,0)),this.uvs.push(ge,Z)})).computeFaces().computeNormals(),I=this.createBuffers("glyph",C)),!0),_=!1,C=void 0;try{for(var P,R=this.retainedMode.buffers.text[Symbol.iterator]();!(L=(P=R.next()).done);L=!0)P.value._prepareBuffer(I,M)}catch(Z){_=!0,C=Z}finally{try{L||R.return==null||R.return()}finally{if(_)throw C}}this._bindBuffer(I.indexBuffer,k.ELEMENT_ARRAY_BUFFER),M.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var V=0,G=null,U=A.stringToGlyphs(w),Y=!0,X=!1,pe=void 0;try{for(var $,F=U[Symbol.iterator]();!(Y=($=F.next()).done);Y=!0){var z,q,ee=$.value,ae=(G&&(V+=A.getKerningValue(G,ee)),N.getGlyphInfo(ee));ae.uGlyphRect&&(z=ae.rowInfo,q=ae.colInfo,M.setUniform("uSamplerStrokes",ae.strokeImageInfo.imageData),M.setUniform("uSamplerRowStrokes",z.cellImageInfo.imageData),M.setUniform("uSamplerRows",z.dimImageInfo.imageData),M.setUniform("uSamplerColStrokes",q.cellImageInfo.imageData),M.setUniform("uSamplerCols",q.dimImageInfo.imageData),M.setUniform("uGridOffset",ae.uGridOffset),M.setUniform("uGlyphRect",ae.uGlyphRect),M.setUniform("uGlyphOffset",V),M.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),V+=ee.advanceWidth,G=ee}}catch(Z){X=!0,pe=Z}finally{try{Y||F.return==null||F.return()}finally{if(X)throw pe}}}finally{M.unbindShader(),this._doStroke=S,this.drawMode=E,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),v.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return v}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})});var Mre=class extends lAe{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Rre=class t extends Mre{static makeCurrent(){aAe(new t)}onAndCancel(r,n,o){return r.addEventListener(n,o),()=>{r.removeEventListener(n,o)}}dispatchEvent(r,n){r.dispatchEvent(n)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,n){return n=n||this.getDefaultDocument(),n.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,n){return n==="window"?window:n==="document"?r:n==="body"?r.body:null}getBaseHref(r){let n=GSt();return n==null?null:WSt(n)}resetBaseElement(){dR=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return uAe(document.cookie,r)}},dR=null;function GSt(){return dR=dR||document.querySelector("base"),dR?dR.getAttribute("href"):null}function WSt(t){return new URL(t,document.baseURI).pathname}var qSt=(()=>{let r=class r{build(){return new XMLHttpRequest}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})(),jre=new Do(""),yAe=(()=>{let r=class r{constructor(o,i){this._zone=i,this._eventNameToPlugin=new Map,o.forEach(s=>{s.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,i,s){return this._findPluginFor(i).addEventListener(o,i,s)}getZone(){return this._zone}_findPluginFor(o){let i=this._eventNameToPlugin.get(o);if(i)return i;if(i=this._plugins.find(a=>a.supports(o)),!i)throw new Ps(5101,!1);return this._eventNameToPlugin.set(o,i),i}};r.\u0275fac=function(i){return new(i||r)(Ot(jre),Ot(jn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})(),fz=class{constructor(r){this._doc=r}},Fre="ng-app-id",bAe=(()=>{let r=class r{constructor(o,i,s,a={}){this.doc=o,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Nre(a),this.resetHostNodes()}addStyles(o){for(let i of o)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(o){for(let i of o)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(i=>i.remove()),o.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let i of this.getAllStyles())this.addStyleToHost(o,i)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let i of this.hostNodes)this.addStyleToHost(i,o)}onStyleRemoved(o){let i=this.styleRef;i.get(o)?.elements?.forEach(s=>s.remove()),i.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${Fre}="${this.appId}"]`);if(o?.length){let i=new Map;return o.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(o,i){let s=this.styleRef;if(s.has(o)){let a=s.get(o);return a.usage+=i,a.usage}return s.set(o,{usage:i,elements:[]}),i}getStyleElement(o,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===o)return s.delete(i),a.removeAttribute(Fre),a;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(Fre,this.appId),o.appendChild(l),l}}addStyleToHost(o,i){let s=this.getStyleElement(o,i),a=this.styleRef,l=a.get(i)?.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn),Ot(sz),Ot(lR,8),Ot($2))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})(),Ore={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lre=/%COMP%/g,xAe="%COMP%",HSt=`_nghost-${xAe}`,YSt=`_ngcontent-${xAe}`,XSt=!0,KSt=new Do("",{providedIn:"root",factory:()=>XSt});function ZSt(t){return YSt.replace(Lre,t)}function QSt(t){return HSt.replace(Lre,t)}function vAe(t,r){return r.map(n=>n.replace(Lre,t))}var dz=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f=null){this.eventManager=o,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=u,this.ngZone=c,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Nre(u),this.defaultRenderer=new pR(o,l,c,this.platformIsServer)}createRenderer(o,i){if(!o||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===iR.ShadowDom&&(i=vs(ar({},i),{encapsulation:iR.Emulated}));let s=this.getOrCreateRenderer(o,i);return s instanceof pz?s.applyToHost(o):s instanceof mR&&s.applyStyles(),s}getOrCreateRenderer(o,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let l=this.doc,u=this.ngZone,c=this.eventManager,f=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case iR.Emulated:a=new pz(c,f,i,this.appId,d,l,u,p);break;case iR.ShadowDom:return new Pre(c,f,o,i,l,u,this.nonce,p);default:a=new mR(c,f,i,d,l,u,p);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};r.\u0275fac=function(i){return new(i||r)(Ot(yAe),Ot(bAe),Ot(sz),Ot(KSt),Ot(Dn),Ot($2),Ot(jn),Ot(lR))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})(),pR=class{constructor(r,n,o,i){this.eventManager=r,this.doc=n,this.ngZone=o,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(r,n){return n?this.doc.createElementNS(Ore[n]||n,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,n){(mAe(r)?r.content:r).appendChild(n)}insertBefore(r,n,o){r&&(mAe(r)?r.content:r).insertBefore(n,o)}removeChild(r,n){r&&r.removeChild(n)}selectRootElement(r,n){let o=typeof r=="string"?this.doc.querySelector(r):r;if(!o)throw new Ps(-5104,!1);return n||(o.textContent=""),o}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,n,o,i){if(i){n=i+":"+n;let s=Ore[i];s?r.setAttributeNS(s,n,o):r.setAttribute(n,o)}else r.setAttribute(n,o)}removeAttribute(r,n,o){if(o){let i=Ore[o];i?r.removeAttributeNS(i,n):r.removeAttribute(`${o}:${n}`)}else r.removeAttribute(n)}addClass(r,n){r.classList.add(n)}removeClass(r,n){r.classList.remove(n)}setStyle(r,n,o,i){i&(uR.DashCase|uR.Important)?r.style.setProperty(n,o,i&uR.Important?"important":""):r.style[n]=o}removeStyle(r,n,o){o&uR.DashCase?r.style.removeProperty(n):r.style[n]=""}setProperty(r,n,o){r!=null&&(r[n]=o)}setValue(r,n){r.nodeValue=n}listen(r,n,o){if(typeof r=="string"&&(r=Dre().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${n}`);return this.eventManager.addEventListener(r,n,this.decoratePreventDefault(o))}decoratePreventDefault(r){return n=>{if(n==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(n)):r(n))===!1&&n.preventDefault()}}};function mAe(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Pre=class extends pR{constructor(r,n,o,i,s,a,l,u){super(r,s,a,u),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=vAe(i.id,i.styles);for(let f of c){let d=document.createElement("style");l&&d.setAttribute("nonce",l),d.textContent=f,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,n){return super.appendChild(this.nodeOrShadowRoot(r),n)}insertBefore(r,n,o){return super.insertBefore(this.nodeOrShadowRoot(r),n,o)}removeChild(r,n){return super.removeChild(this.nodeOrShadowRoot(r),n)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mR=class extends pR{constructor(r,n,o,i,s,a,l,u){super(r,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?vAe(u,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},pz=class extends mR{constructor(r,n,o,i,s,a,l,u){let c=i+"-"+o.id;super(r,n,o,s,a,l,u,c),this.contentAttr=ZSt(c),this.hostAttr=QSt(c)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,n){let o=super.createElement(r,n);return super.setAttribute(o,this.contentAttr,""),o}},JSt=(()=>{let r=class r extends fz{constructor(o){super(o)}supports(o){return!0}addEventListener(o,i,s){return o.addEventListener(i,s,!1),()=>this.removeEventListener(o,i,s)}removeEventListener(o,i,s){return o.removeEventListener(i,s)}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})(),hAe=["alt","control","meta","shift"],eCt={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tCt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rCt=(()=>{let r=class r extends fz{constructor(o){super(o)}supports(o){return r.parseEventName(o)!=null}addEventListener(o,i,s){let a=r.parseEventName(i),l=r.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dre().onAndCancel(o,a.domEventName,l))}static parseEventName(o){let i=o.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=r._normalizeKey(i.pop()),l="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),l="code."),hAe.forEach(f=>{let d=i.indexOf(f);d>-1&&(i.splice(d,1),l+=f+".")}),l+=a,i.length!=0||a.length===0)return null;let c={};return c.domEventName=s,c.fullKey=l,c}static matchEventFullKeyCode(o,i){let s=eCt[o.key]||o.key,a="";return i.indexOf("code.")>-1&&(s=o.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),hAe.forEach(l=>{if(l!==s){let u=tCt[l];u(o)&&(a+=l+".")}}),a+=s,a===i)}static eventCallback(o,i,s){return a=>{r.matchEventFullKeyCode(a,o)&&s.runGuarded(()=>i(a))}}static _normalizeKey(o){return o==="esc"?"escape":o}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})();function wAe(t,r){return iAe(ar({rootComponent:t},nCt(r)))}function nCt(t){return{appProviders:[...lCt,...t?.providers??[]],platformProviders:aCt}}function oCt(){Rre.makeCurrent()}function iCt(){return new oz}function sCt(){return WTe(document),document}var aCt=[{provide:$2,useValue:fAe},{provide:qTe,useValue:oCt,multi:!0},{provide:Dn,useFactory:sCt,deps:[]}];var lCt=[{provide:GTe,useValue:"root"},{provide:oz,useFactory:iCt,deps:[]},{provide:jre,useClass:JSt,multi:!0,deps:[Dn,jn,$2]},{provide:jre,useClass:rCt,multi:!0,deps:[Dn]},dz,bAe,yAe,{provide:uz,useExisting:dz},{provide:pAe,useClass:qSt,deps:[]},[]];var _Ae=(()=>{let r=class r{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var yn="primary",FR=Symbol("RouteTitle"),Vre=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n[0]:n}return null}getAll(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _k(t){return new Vre(t)}function cCt(t,r,n){let o=n.path.split("/");if(o.length>t.length||n.pathMatch==="full"&&(r.hasChildren()||o.length<t.length))return null;let i={};for(let s=0;s<o.length;s++){let a=o[s],l=t[s];if(a[0]===":")i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:t.slice(0,o.length),posParams:i}}function fCt(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!ag(t[n],r[n]))return!1;return!0}function ag(t,r){let n=t?Gre(t):void 0,o=r?Gre(r):void 0;if(!n||!o||n.length!=o.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!DAe(t[i],r[i]))return!1;return!0}function Gre(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function DAe(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;let n=[...t].sort(),o=[...r].sort();return n.every((i,s)=>o[s]===i)}else return t===r}function NAe(t){return t.length>0?t[t.length-1]:null}function c1(t){return _re(t)?t:rAe(t)?em(Promise.resolve(t)):an(t)}var dCt={exact:OAe,subset:MAe},FAe={exact:pCt,subset:mCt,ignored:()=>!0};function SAe(t,r,n){return dCt[n.paths](t.root,r.root,n.matrixParams)&&FAe[n.queryParams](t.queryParams,r.queryParams)&&!(n.fragment==="exact"&&t.fragment!==r.fragment)}function pCt(t,r){return ag(t,r)}function OAe(t,r,n){if(!Y2(t.segments,r.segments)||!gz(t.segments,r.segments,n)||t.numberOfChildren!==r.numberOfChildren)return!1;for(let o in r.children)if(!t.children[o]||!OAe(t.children[o],r.children[o],n))return!1;return!0}function mCt(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(n=>DAe(t[n],r[n]))}function MAe(t,r,n){return RAe(t,r,r.segments,n)}function RAe(t,r,n,o){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Y2(i,n)||r.hasChildren()||!gz(i,n,o))}else if(t.segments.length===n.length){if(!Y2(t.segments,n)||!gz(t.segments,n,o))return!1;for(let i in r.children)if(!t.children[i]||!MAe(t.children[i],r.children[i],o))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Y2(t.segments,i)||!gz(t.segments,i,o)||!t.children[yn]?!1:RAe(t.children[yn],r,s,o)}}function gz(t,r,n){return r.every((o,i)=>FAe[n](t[i].parameters,o.parameters))}var u1=class{constructor(r=new Eo([],{}),n={},o=null){this.root=r,this.queryParams=n,this.fragment=o}get queryParamMap(){return this._queryParamMap??=_k(this.queryParams),this._queryParamMap}toString(){return yCt.serialize(this)}},Eo=class{constructor(r,n){this.segments=r,this.children=n,this.parent=null,Object.values(n).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yz(this)}},H2=class{constructor(r,n){this.path=r,this.parameters=n}get parameterMap(){return this._parameterMap??=_k(this.parameters),this._parameterMap}toString(){return PAe(this)}};function hCt(t,r){return Y2(t,r)&&t.every((n,o)=>ag(n.parameters,r[o].parameters))}function Y2(t,r){return t.length!==r.length?!1:t.every((n,o)=>n.path===r[o].path)}function gCt(t,r){let n=[];return Object.entries(t.children).forEach(([o,i])=>{o===yn&&(n=n.concat(r(i,o)))}),Object.entries(t.children).forEach(([o,i])=>{o!==yn&&(n=n.concat(r(i,o)))}),n}var yne=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:()=>new wR,providedIn:"root"});let t=r;return t})(),wR=class{parse(r){let n=new qre(r);return new u1(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(r){let n=`/${hR(r.root,!0)}`,o=vCt(r.queryParams),i=typeof r.fragment=="string"?`#${bCt(r.fragment)}`:"";return`${n}${o}${i}`}},yCt=new wR;function yz(t){return t.segments.map(r=>PAe(r)).join("/")}function hR(t,r){if(!t.hasChildren())return yz(t);if(r){let n=t.children[yn]?hR(t.children[yn],!1):"",o=[];return Object.entries(t.children).forEach(([i,s])=>{i!==yn&&o.push(`${i}:${hR(s,!1)}`)}),o.length>0?`${n}(${o.join("//")})`:n}else{let n=gCt(t,(o,i)=>i===yn?[hR(t.children[yn],!1)]:[`${i}:${hR(o,!1)}`]);return Object.keys(t.children).length===1&&t.children[yn]!=null?`${yz(t)}/${n[0]}`:`${yz(t)}/(${n.join("//")})`}}function jAe(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mz(t){return jAe(t).replace(/%3B/gi,";")}function bCt(t){return encodeURI(t)}function Wre(t){return jAe(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bz(t){return decodeURIComponent(t)}function CAe(t){return bz(t.replace(/\+/g,"%20"))}function PAe(t){return`${Wre(t.path)}${xCt(t.parameters)}`}function xCt(t){return Object.entries(t).map(([r,n])=>`;${Wre(r)}=${Wre(n)}`).join("")}function vCt(t){let r=Object.entries(t).map(([n,o])=>Array.isArray(o)?o.map(i=>`${mz(n)}=${mz(i)}`).join("&"):`${mz(n)}=${mz(o)}`).filter(n=>n);return r.length?`?${r.join("&")}`:""}var wCt=/^[^\/()?;#]+/;function Bre(t){let r=t.match(wCt);return r?r[0]:""}var _Ct=/^[^\/()?;=#]+/;function SCt(t){let r=t.match(_Ct);return r?r[0]:""}var CCt=/^[^=?&#]+/;function ECt(t){let r=t.match(CCt);return r?r[0]:""}var TCt=/^[^&#]+/;function ACt(t){let r=t.match(TCt);return r?r[0]:""}var qre=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Eo([],{}):new Eo([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(r.length>0||Object.keys(n).length>0)&&(o[yn]=new Eo(r,n)),o}parseSegment(){let r=Bre(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new Ps(4009,!1);return this.capture(r),new H2(bz(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let n=SCt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let i=Bre(this.remaining);i&&(o=i,this.capture(o))}r[bz(n)]=bz(o)}parseQueryParam(r){let n=ECt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let a=ACt(this.remaining);a&&(o=a,this.capture(o))}let i=CAe(n),s=CAe(o);if(r.hasOwnProperty(i)){let a=r[i];Array.isArray(a)||(a=[a],r[i]=a),a.push(s)}else r[i]=s}parseParens(r){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Bre(this.remaining),i=this.remaining[o.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ps(4010,!1);let s;o.indexOf(":")>-1?(s=o.slice(0,o.indexOf(":")),this.capture(s),this.capture(":")):r&&(s=yn);let a=this.parseChildren();n[s]=Object.keys(a).length===1?a[yn]:new Eo([],a),this.consumeOptional("//")}return n}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new Ps(4011,!1)}};function LAe(t){return t.segments.length>0?new Eo([],{[yn]:t}):t}function BAe(t){let r={};for(let[o,i]of Object.entries(t.children)){let s=BAe(i);if(o===yn&&s.segments.length===0&&s.hasChildren())for(let[a,l]of Object.entries(s.children))r[a]=l;else(s.segments.length>0||s.hasChildren())&&(r[o]=s)}let n=new Eo(t.segments,r);return kCt(n)}function kCt(t){if(t.numberOfChildren===1&&t.children[yn]){let r=t.children[yn];return new Eo(t.segments.concat(r.segments),r.children)}return t}function _R(t){return t instanceof u1}function ICt(t,r,n=null,o=null){let i=$Ae(t);return zAe(i,r,n,o)}function $Ae(t){let r;function n(s){let a={};for(let u of s.children){let c=n(u);a[u.outlet]=c}let l=new Eo(s.url,a);return s===t&&(r=l),l}let o=n(t.root),i=LAe(o);return r??i}function zAe(t,r,n,o){let i=t;for(;i.parent;)i=i.parent;if(r.length===0)return $re(i,i,i,n,o);let s=DCt(r);if(s.toRoot())return $re(i,i,new Eo([],{}),n,o);let a=NCt(s,i,t),l=a.processChildren?bR(a.segmentGroup,a.index,s.commands):VAe(a.segmentGroup,a.index,s.commands);return $re(i,a.segmentGroup,l,n,o)}function xz(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function SR(t){return typeof t=="object"&&t!=null&&t.outlets}function $re(t,r,n,o,i){let s={};o&&Object.entries(o).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let a;t===r?a=n:a=UAe(t,r,n);let l=LAe(BAe(a));return new u1(l,s,i)}function UAe(t,r,n){let o={};return Object.entries(t.children).forEach(([i,s])=>{s===r?o[i]=n:o[i]=UAe(s,r,n)}),new Eo(t.segments,o)}var vz=class{constructor(r,n,o){if(this.isAbsolute=r,this.numberOfDoubleDots=n,this.commands=o,r&&o.length>0&&xz(o[0]))throw new Ps(4003,!1);let i=o.find(SR);if(i&&i!==NAe(o))throw new Ps(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DCt(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new vz(!0,0,t);let r=0,n=!1,o=t.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([u,c])=>{l[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?n=!0:l===".."?r++:l!=""&&i.push(l))}),i):[...i,s]},[]);return new vz(n,r,o)}var xk=class{constructor(r,n,o){this.segmentGroup=r,this.processChildren=n,this.index=o}};function NCt(t,r,n){if(t.isAbsolute)return new xk(r,!0,0);if(!n)return new xk(r,!1,NaN);if(n.parent===null)return new xk(n,!0,0);let o=xz(t.commands[0])?0:1,i=n.segments.length-1+o;return FCt(n,i,t.numberOfDoubleDots)}function FCt(t,r,n){let o=t,i=r,s=n;for(;s>i;){if(s-=i,o=o.parent,!o)throw new Ps(4005,!1);i=o.segments.length}return new xk(o,!1,i-s)}function OCt(t){return SR(t[0])?t[0].outlets:{[yn]:t}}function VAe(t,r,n){if(t??=new Eo([],{}),t.segments.length===0&&t.hasChildren())return bR(t,r,n);let o=MCt(t,r,n),i=n.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){let s=new Eo(t.segments.slice(0,o.pathIndex),{});return s.children[yn]=new Eo(t.segments.slice(o.pathIndex),t.children),bR(s,0,i)}else return o.match&&i.length===0?new Eo(t.segments,{}):o.match&&!t.hasChildren()?Hre(t,r,n):o.match?bR(t,0,i):Hre(t,r,n)}function bR(t,r,n){if(n.length===0)return new Eo(t.segments,{});{let o=OCt(n),i={};if(Object.keys(o).some(s=>s!==yn)&&t.children[yn]&&t.numberOfChildren===1&&t.children[yn].segments.length===0){let s=bR(t.children[yn],r,n);return new Eo(t.segments,s.children)}return Object.entries(o).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=VAe(t.children[s],r,a))}),Object.entries(t.children).forEach(([s,a])=>{o[s]===void 0&&(i[s]=a)}),new Eo(t.segments,i)}}function MCt(t,r,n){let o=0,i=r,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(o>=n.length)return s;let a=t.segments[i],l=n[o];if(SR(l))break;let u=`${l}`,c=o<n.length-1?n[o+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!TAe(u,c,a))return s;o+=2}else{if(!TAe(u,{},a))return s;o++}i++}return{match:!0,pathIndex:i,commandIndex:o}}function Hre(t,r,n){let o=t.segments.slice(0,r),i=0;for(;i<n.length;){let s=n[i];if(SR(s)){let u=RCt(s.outlets);return new Eo(o,u)}if(i===0&&xz(n[0])){let u=t.segments[r];o.push(new H2(u.path,EAe(n[0]))),i++;continue}let a=SR(s)?s.outlets[yn]:`${s}`,l=i<n.length-1?n[i+1]:null;a&&l&&xz(l)?(o.push(new H2(a,EAe(l))),i+=2):(o.push(new H2(a,{})),i++)}return new Eo(o,{})}function RCt(t){let r={};return Object.entries(t).forEach(([n,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[n]=Hre(new Eo([],{}),0,o))}),r}function EAe(t){let r={};return Object.entries(t).forEach(([n,o])=>r[n]=`${o}`),r}function TAe(t,r,n){return t==n.path&&ag(r,n.parameters)}var xR="imperative",wl=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(wl||{}),$d=class{constructor(r,n){this.id=r,this.url=n}},CR=class extends $d{constructor(r,n,o="imperative",i=null){super(r,n),this.type=wl.NavigationStart,this.navigationTrigger=o,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},X2=class extends $d{constructor(r,n,o){super(r,n),this.urlAfterRedirects=o,this.type=wl.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$f=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}($f||{}),Yre=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Yre||{}),fb=class extends $d{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=wl.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},K2=class extends $d{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=wl.NavigationSkipped}},ER=class extends $d{constructor(r,n,o,i){super(r,n),this.error=o,this.target=i,this.type=wl.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wz=class extends $d{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xre=class extends $d{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kre=class extends $d{constructor(r,n,o,i,s){super(r,n),this.urlAfterRedirects=o,this.state=i,this.shouldActivate=s,this.type=wl.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zre=class extends $d{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qre=class extends $d{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jre=class{constructor(r){this.route=r,this.type=wl.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ene=class{constructor(r){this.route=r,this.type=wl.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},tne=class{constructor(r){this.snapshot=r,this.type=wl.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rne=class{constructor(r){this.snapshot=r,this.type=wl.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nne=class{constructor(r){this.snapshot=r,this.type=wl.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},one=class{constructor(r){this.snapshot=r,this.type=wl.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var TR=class{},Sk=class{constructor(r,n){this.url=r,this.navigationBehaviorOptions=n}};var ine=class{constructor(r){this.injector=r,this.outlet=null,this.route=null,this.children=new kz(this.injector),this.attachRef=null}},kz=(()=>{let r=class r{constructor(o){this.parentInjector=o,this.contexts=new Map}onChildOutletCreated(o,i){let s=this.getOrCreateContext(o);s.outlet=i,this.contexts.set(o,s)}onChildOutletDestroyed(o){let i=this.getContext(o);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let i=this.getContext(o);return i||(i=new ine(this.parentInjector),this.contexts.set(o,i)),i}getContext(o){return this.contexts.get(o)||null}};r.\u0275fac=function(i){return new(i||r)(Ot(ck))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),_z=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let n=this.pathFromRoot(r);return n.length>1?n[n.length-2]:null}children(r){let n=sne(r,this._root);return n?n.children.map(o=>o.value):[]}firstChild(r){let n=sne(r,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(r){let n=ane(r,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return ane(r,this._root).map(n=>n.value)}};function sne(t,r){if(t===r.value)return r;for(let n of r.children){let o=sne(t,n);if(o)return o}return null}function ane(t,r){if(t===r.value)return[r];for(let n of r.children){let o=ane(t,n);if(o.length)return o.unshift(r),o}return[]}var Bf=class{constructor(r,n){this.value=r,this.children=n}toString(){return`TreeNode(${this.value})`}};function bk(t){let r={};return t&&t.children.forEach(n=>r[n.value.outlet]=n),r}var Sz=class extends _z{constructor(r,n){super(r),this.snapshot=n,bne(this,r)}toString(){return this.snapshot.toString()}};function GAe(t){let r=jCt(t),n=new Ra([new H2("",{})]),o=new Ra({}),i=new Ra({}),s=new Ra({}),a=new Ra(""),l=new Ck(n,o,s,a,i,yn,t,r.root);return l.snapshot=r.root,new Sz(new Bf(l,[]),r)}function jCt(t){let r={},n={},o={},i="",s=new vk([],r,o,i,n,yn,t,null,{});return new Ez("",new Bf(s,[]))}var Ck=class{constructor(r,n,o,i,s,a,l,u){this.urlSubject=r,this.paramsSubject=n,this.queryParamsSubject=o,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Wn(c=>c[FR]))??an(void 0),this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Wn(r=>_k(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Wn(r=>_k(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cz(t,r,n="emptyOnly"){let o,{routeConfig:i}=t;return r!==null&&(n==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?o={params:ar(ar({},r.params),t.params),data:ar(ar({},r.data),t.data),resolve:ar(ar(ar(ar({},t.data),r.data),i?.data),t._resolvedData)}:o={params:ar({},t.params),data:ar({},t.data),resolve:ar(ar({},t.data),t._resolvedData??{})},i&&qAe(i)&&(o.resolve[FR]=i.title),o}var vk=class{get title(){return this.data?.[FR]}constructor(r,n,o,i,s,a,l,u,c){this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_k(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_k(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(o=>o.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${n}')`}},Ez=class extends _z{constructor(r,n){super(n),this.url=r,bne(this,n)}toString(){return WAe(this._root)}};function bne(t,r){r.value._routerState=t,r.children.forEach(n=>bne(t,n))}function WAe(t){let r=t.children.length>0?` { ${t.children.map(WAe).join(", ")} } `:"";return`${t.value}${r}`}function zre(t){if(t.snapshot){let r=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ag(r.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),r.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ag(r.params,n.params)||t.paramsSubject.next(n.params),fCt(r.url,n.url)||t.urlSubject.next(n.url),ag(r.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function lne(t,r){let n=ag(t.params,r.params)&&hCt(t.url,r.url),o=!t.parent!=!r.parent;return n&&!o&&(!t.parent||lne(t.parent,r.parent))}function qAe(t){return typeof t.title=="string"||t.title===null}var xne=(()=>{let r=class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=yn,this.activateEvents=new ca,this.deactivateEvents=new ca,this.attachEvents=new ca,this.detachEvents=new ca,this.parentContexts=Ir(kz),this.location=Ir(dk),this.changeDetector=Ir(Bd),this.inputBinder=Ir(vne,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:i,previousValue:s}=o.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ps(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ps(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ps(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,i){this.activated=o,this._activatedRoute=i,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,i){if(this.isActivated)throw new Ps(4013,!1);this._activatedRoute=o;let s=this.location,l=o.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new une(o,u,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=Ac({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fk]});let t=r;return t})(),une=class t{__ngOutletInjector(r){return new t(this.route,this.childContexts,r)}constructor(r,n,o){this.route=r,this.childContexts=n,this.parent=o}get(r,n){return r===Ck?this.route:r===kz?this.childContexts:this.parent.get(r,n)}},vne=new Do("");function PCt(t,r,n){let o=AR(t,r._root,n?n._root:void 0);return new Sz(o,r)}function AR(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){let o=n.value;o._futureSnapshot=r.value;let i=LCt(t,r,n);return new Bf(o,i)}else{if(t.shouldAttach(r.value)){let s=t.retrieve(r.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=r.value,a.children=r.children.map(l=>AR(t,l)),a}}let o=BCt(r.value),i=r.children.map(s=>AR(t,s));return new Bf(o,i)}}function LCt(t,r,n){return r.children.map(o=>{for(let i of n.children)if(t.shouldReuseRoute(o.value,i.value.snapshot))return AR(t,o,i);return AR(t,o)})}function BCt(t){return new Ck(new Ra(t.url),new Ra(t.params),new Ra(t.queryParams),new Ra(t.fragment),new Ra(t.data),t.outlet,t.component,t)}var kR=class{constructor(r,n){this.redirectTo=r,this.navigationBehaviorOptions=n}},HAe="ngNavigationCancelingError";function Tz(t,r){let{redirectTo:n,navigationBehaviorOptions:o}=_R(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=YAe(!1,$f.Redirect);return i.url=n,i.navigationBehaviorOptions=o,i}function YAe(t,r){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[HAe]=!0,n.cancellationCode=r,n}function $Ct(t){return XAe(t)&&_R(t.url)}function XAe(t){return!!t&&t[HAe]}var zCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ua({type:r,selectors:[["ng-component"]],standalone:!0,features:[pa],decls:1,vars:0,template:function(i,s){i&1&&kc(0,"router-outlet")},dependencies:[xne],encapsulation:2});let t=r;return t})();function UCt(t,r){return t.providers&&!t._injector&&(t._injector=QTe(t.providers,r,`Route: ${t.path}`)),t._injector??r}function wne(t){let r=t.children&&t.children.map(wne),n=r?vs(ar({},t),{children:r}):ar({},t);return!n.component&&!n.loadComponent&&(r||n.loadChildren)&&n.outlet&&n.outlet!==yn&&(n.component=zCt),n}function om(t){return t.outlet||yn}function VCt(t,r){let n=t.filter(o=>om(o)===r);return n.push(...t.filter(o=>om(o)!==r)),n}function OR(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let r=t.parent;r;r=r.parent){let n=r.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var GCt=(t,r,n,o)=>Wn(i=>(new cne(r,i.targetRouterState,i.currentRouterState,n,o).activate(t),i)),cne=class{constructor(r,n,o,i,s){this.routeReuseStrategy=r,this.futureState=n,this.currState=o,this.forwardEvent=i,this.inputBindingEnabled=s}activate(r){let n=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,o,r),zre(this.futureState.root),this.activateChildRoutes(n,o,r)}deactivateChildRoutes(r,n,o){let i=bk(n);r.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],o),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,o)})}deactivateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(i===s)if(i.component){let a=o.getContext(i.outlet);a&&this.deactivateChildRoutes(r,n,a.children)}else this.deactivateChildRoutes(r,n,o);else s&&this.deactivateRouteAndItsChildren(n,o)}deactivateRouteAndItsChildren(r,n){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,n):this.deactivateRouteAndOutlet(r,n)}detachAndStoreRouteSubtree(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=bk(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(o&&o.outlet){let a=o.outlet.detach(),l=o.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:a,route:r,contexts:l})}}deactivateRouteAndOutlet(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=bk(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(r,n,o){let i=bk(n);r.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],o),this.forwardEvent(new one(s.value.snapshot))}),r.children.length&&this.forwardEvent(new rne(r.value.snapshot))}activateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(zre(i),i===s)if(i.component){let a=o.getOrCreateContext(i.outlet);this.activateChildRoutes(r,n,a.children)}else this.activateChildRoutes(r,n,o);else if(i.component){let a=o.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),zre(l.route.value),this.activateChildRoutes(r,null,a.children)}else{let l=OR(i.snapshot);a.attachRef=null,a.route=i,a.injector=l??a.injector,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(r,null,a.children)}}else this.activateChildRoutes(r,null,o)}},Az=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},wk=class{constructor(r,n){this.component=r,this.route=n}};function WCt(t,r,n){let o=t._root,i=r?r._root:null;return gR(o,i,n,[o.value])}function qCt(t){let r=t.routeConfig?t.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:t,guards:r}}function Tk(t,r){let n=Symbol(),o=r.get(t,n);return o===n?typeof t=="function"&&!VTe(t)?t:r.get(t):o}function gR(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=bk(r);return t.children.forEach(a=>{HCt(a,s[a.value.outlet],n,o.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,l])=>vR(l,n.getContext(a),i)),i}function HCt(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,a=r?r.value:null,l=n?n.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=YCt(a,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Az(o)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?gR(t,r,l?l.children:null,o,i):gR(t,r,n,o,i),u&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new wk(l.outlet.component,a))}else a&&vR(r,l,i),i.canActivateChecks.push(new Az(o)),s.component?gR(t,null,l?l.children:null,o,i):gR(t,null,n,o,i);return i}function YCt(t,r,n){if(typeof n=="function")return n(t,r);switch(n){case"pathParamsChange":return!Y2(t.url,r.url);case"pathParamsOrQueryParamsChange":return!Y2(t.url,r.url)||!ag(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lne(t,r)||!ag(t.queryParams,r.queryParams);case"paramsChange":default:return!lne(t,r)}}function vR(t,r,n){let o=bk(t),i=t.value;Object.entries(o).forEach(([s,a])=>{i.component?r?vR(a,r.children.getContext(s),n):vR(a,null,n):vR(a,r,n)}),i.component?r&&r.outlet&&r.outlet.isActivated?n.canDeactivateChecks.push(new wk(r.outlet.component,i)):n.canDeactivateChecks.push(new wk(null,i)):n.canDeactivateChecks.push(new wk(null,i))}function MR(t){return typeof t=="function"}function XCt(t){return typeof t=="boolean"}function KCt(t){return t&&MR(t.canLoad)}function ZCt(t){return t&&MR(t.canActivate)}function QCt(t){return t&&MR(t.canActivateChild)}function JCt(t){return t&&MR(t.canDeactivate)}function eEt(t){return t&&MR(t.canMatch)}function KAe(t){return t instanceof BTe||t?.name==="EmptyError"}var hz=Symbol("INITIAL_VALUE");function Ek(){return tm(t=>JM(t.map(r=>r.pipe(jd(1),l1(hz)))).pipe(Wn(r=>{for(let n of r)if(n!==!0){if(n===hz)return hz;if(n===!1||tEt(n))return n}return!0}),ja(r=>r!==hz),jd(1)))}function tEt(t){return _R(t)||t instanceof kR}function rEt(t,r){return Rd(n=>{let{targetSnapshot:o,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return a.length===0&&s.length===0?an(vs(ar({},n),{guardsResult:!0})):nEt(a,o,i,t).pipe(Rd(l=>l&&XCt(l)?oEt(o,s,t,r):an(l)),Wn(l=>vs(ar({},n),{guardsResult:l})))})}function nEt(t,r,n,o){return em(t).pipe(Rd(i=>uEt(i.component,i.route,n,r,o)),a1(i=>i!==!0,!0))}function oEt(t,r,n,o){return em(r).pipe(tR(i=>ez(sEt(i.route.parent,o),iEt(i.route,o),lEt(t,i.path,n),aEt(t,i.route,n))),a1(i=>i!==!0,!0))}function iEt(t,r){return t!==null&&r&&r(new nne(t)),an(!0)}function sEt(t,r){return t!==null&&r&&r(new tne(t)),an(!0)}function aEt(t,r,n){let o=r.routeConfig?r.routeConfig.canActivate:null;if(!o||o.length===0)return an(!0);let i=o.map(s=>Sre(()=>{let a=OR(r)??n,l=Tk(s,a),u=ZCt(l)?l.canActivate(r,t):ib(a,()=>l(r,t));return c1(u).pipe(a1())}));return an(i).pipe(Ek())}function lEt(t,r,n){let o=r[r.length-1],s=r.slice(0,r.length-1).reverse().map(a=>qCt(a)).filter(a=>a!==null).map(a=>Sre(()=>{let l=a.guards.map(u=>{let c=OR(a.node)??n,f=Tk(u,c),d=QCt(f)?f.canActivateChild(o,t):ib(c,()=>f(o,t));return c1(d).pipe(a1())});return an(l).pipe(Ek())}));return an(s).pipe(Ek())}function uEt(t,r,n,o,i){let s=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!s||s.length===0)return an(!0);let a=s.map(l=>{let u=OR(r)??i,c=Tk(l,u),f=JCt(c)?c.canDeactivate(t,r,n,o):ib(u,()=>c(t,r,n,o));return c1(f).pipe(a1())});return an(a).pipe(Ek())}function cEt(t,r,n,o){let i=r.canLoad;if(i===void 0||i.length===0)return an(!0);let s=i.map(a=>{let l=Tk(a,t),u=KCt(l)?l.canLoad(r,n):ib(t,()=>l(r,n));return c1(u)});return an(s).pipe(Ek(),ZAe(o))}function ZAe(t){return LTe(la(r=>{if(typeof r!="boolean")throw Tz(t,r)}),Wn(r=>r===!0))}function fEt(t,r,n,o){let i=r.canMatch;if(!i||i.length===0)return an(!0);let s=i.map(a=>{let l=Tk(a,t),u=eEt(l)?l.canMatch(r,n):ib(t,()=>l(r,n));return c1(u)});return an(s).pipe(Ek(),ZAe(o))}var IR=class{constructor(r){this.segmentGroup=r||null}},DR=class extends Error{constructor(r){super(),this.urlTree=r}};function yk(t){return QM(new IR(t))}function dEt(t){return QM(new Ps(4e3,!1))}function pEt(t){return QM(YAe(!1,$f.GuardRejected))}var fne=class{constructor(r,n){this.urlSerializer=r,this.urlTree=n}lineralizeSegments(r,n){let o=[],i=n.root;for(;;){if(o=o.concat(i.segments),i.numberOfChildren===0)return an(o);if(i.numberOfChildren>1||!i.children[yn])return dEt(`${r.redirectTo}`);i=i.children[yn]}}applyRedirectCommands(r,n,o,i,s){if(typeof n!="string"){let l=n,{queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,params:m,data:h,title:g}=i,y=ib(s,()=>l({params:m,data:h,queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,title:g}));if(y instanceof u1)throw new DR(y);n=y}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),r,o);if(n[0]==="/")throw new DR(a);return a}applyRedirectCreateUrlTree(r,n,o,i){let s=this.createSegmentGroup(r,n.root,o,i);return new u1(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(r,n){let o={};return Object.entries(r).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);o[i]=n[l]}else o[i]=s}),o}createSegmentGroup(r,n,o,i){let s=this.createSegments(r,n.segments,o,i),a={};return Object.entries(n.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(r,u,o,i)}),new Eo(s,a)}createSegments(r,n,o,i){return n.map(s=>s.path[0]===":"?this.findPosParam(r,s,i):this.findOrReturn(s,o))}findPosParam(r,n,o){let i=o[n.path.substring(1)];if(!i)throw new Ps(4001,!1);return i}findOrReturn(r,n){let o=0;for(let i of n){if(i.path===r.path)return n.splice(o),i;o++}return r}},dne={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mEt(t,r,n,o,i){let s=_ne(t,r,n);return s.matched?(o=UCt(r,o),fEt(o,r,n,i).pipe(Wn(a=>a===!0?s:ar({},dne)))):an(s)}function _ne(t,r,n){if(r.path==="**")return hEt(n);if(r.path==="")return r.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ar({},dne):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(r.matcher||cCt)(n,t,r);if(!i)return ar({},dne);let s={};Object.entries(i.posParams??{}).forEach(([l,u])=>{s[l]=u.path});let a=i.consumed.length>0?ar(ar({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function hEt(t){return{matched:!0,parameters:t.length>0?NAe(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function AAe(t,r,n,o){return n.length>0&&bEt(t,n,o)?{segmentGroup:new Eo(r,yEt(o,new Eo(n,t.children))),slicedSegments:[]}:n.length===0&&xEt(t,n,o)?{segmentGroup:new Eo(t.segments,gEt(t,n,o,t.children)),slicedSegments:n}:{segmentGroup:new Eo(t.segments,t.children),slicedSegments:n}}function gEt(t,r,n,o){let i={};for(let s of n)if(Iz(t,r,s)&&!o[om(s)]){let a=new Eo([],{});i[om(s)]=a}return ar(ar({},o),i)}function yEt(t,r){let n={};n[yn]=r;for(let o of t)if(o.path===""&&om(o)!==yn){let i=new Eo([],{});n[om(o)]=i}return n}function bEt(t,r,n){return n.some(o=>Iz(t,r,o)&&om(o)!==yn)}function xEt(t,r,n){return n.some(o=>Iz(t,r,o))}function Iz(t,r,n){return(t.hasChildren()||r.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vEt(t,r,n,o){return om(t)!==o&&(o===yn||!Iz(r,n,t))?!1:_ne(r,t,n).matched}function wEt(t,r,n){return r.length===0&&!t.children[n]}var pne=class{};function _Et(t,r,n,o,i,s,a="emptyOnly"){return new mne(t,r,n,o,i,a,s).recognize()}var SEt=31,mne=class{constructor(r,n,o,i,s,a,l){this.injector=r,this.configLoader=n,this.rootComponentType=o,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new fne(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new Ps(4002,`'${r.segmentGroup}'`)}recognize(){let r=AAe(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(Wn(({children:n,rootSnapshot:o})=>{let i=new Bf(o,n),s=new Ez("",i),a=ICt(o,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(r){let n=new vk([],Object.freeze({}),Object.freeze(ar({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),yn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,r,yn,n).pipe(Wn(o=>({children:o,rootSnapshot:n})),uk(o=>{if(o instanceof DR)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof IR?this.noMatchError(o):o}))}processSegmentGroup(r,n,o,i,s){return o.segments.length===0&&o.hasChildren()?this.processChildren(r,n,o,s):this.processSegment(r,n,o,o.segments,i,!0,s).pipe(Wn(a=>a instanceof Bf?[a]:[]))}processChildren(r,n,o,i){let s=[];for(let a of Object.keys(o.children))a==="primary"?s.unshift(a):s.push(a);return em(s).pipe(tR(a=>{let l=o.children[a],u=VCt(n,a);return this.processSegmentGroup(r,u,l,a,i)}),zTe((a,l)=>(a.push(...l),a)),Ere(null),$Te(),Rd(a=>{if(a===null)return yk(o);let l=QAe(a);return CEt(l),an(l)}))}processSegment(r,n,o,i,s,a,l){return em(n).pipe(tR(u=>this.processSegmentAgainstRoute(u._injector??r,n,u,o,i,s,a,l).pipe(uk(c=>{if(c instanceof IR)return an(null);throw c}))),a1(u=>!!u),uk(u=>{if(KAe(u))return wEt(o,i,s)?an(new pne):yk(o);throw u}))}processSegmentAgainstRoute(r,n,o,i,s,a,l,u){return vEt(o,i,s,a)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(r,i,o,s,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(r,i,n,o,s,a,u):yk(i):yk(i)}expandSegmentAgainstRouteUsingRedirect(r,n,o,i,s,a,l){let{matched:u,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:p}=_ne(n,i,s);if(!u)return yk(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SEt&&(this.allowRedirects=!1));let m=new vk(s,c,Object.freeze(ar({},this.urlTree.queryParams)),this.urlTree.fragment,kAe(i),om(i),i.component??i._loadedComponent??null,i,IAe(i)),h=Cz(m,l,this.paramsInheritanceStrategy);m.params=Object.freeze(h.params),m.data=Object.freeze(h.data);let g=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,d,m,r);return this.applyRedirects.lineralizeSegments(i,g).pipe(Rd(y=>this.processSegment(r,o,n,y.concat(p),a,!1,l)))}matchSegmentAgainstRoute(r,n,o,i,s,a){let l=mEt(n,o,i,r,this.urlSerializer);return o.path==="**"&&(n.children={}),l.pipe(tm(u=>u.matched?(r=o._injector??r,this.getChildConfig(r,o,i).pipe(tm(({routes:c})=>{let f=o._loadedInjector??r,{parameters:d,consumedSegments:p,remainingSegments:m}=u,h=new vk(p,d,Object.freeze(ar({},this.urlTree.queryParams)),this.urlTree.fragment,kAe(o),om(o),o.component??o._loadedComponent??null,o,IAe(o)),g=Cz(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(g.params),h.data=Object.freeze(g.data);let{segmentGroup:y,slicedSegments:b}=AAe(n,p,m,c);if(b.length===0&&y.hasChildren())return this.processChildren(f,c,y,h).pipe(Wn(v=>new Bf(h,v)));if(c.length===0&&b.length===0)return an(new Bf(h,[]));let x=om(o)===s;return this.processSegment(f,c,y,b,x?yn:s,!0,h).pipe(Wn(v=>new Bf(h,v instanceof Bf?[v]:[])))}))):yk(n)))}getChildConfig(r,n,o){return n.children?an({routes:n.children,injector:r}):n.loadChildren?n._loadedRoutes!==void 0?an({routes:n._loadedRoutes,injector:n._loadedInjector}):cEt(r,n,o,this.urlSerializer).pipe(Rd(i=>i?this.configLoader.loadChildren(r,n).pipe(la(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):pEt(n))):an({routes:[],injector:r})}};function CEt(t){t.sort((r,n)=>r.value.outlet===yn?-1:n.value.outlet===yn?1:r.value.outlet.localeCompare(n.value.outlet))}function EEt(t){let r=t.value.routeConfig;return r&&r.path===""}function QAe(t){let r=[],n=new Set;for(let o of t){if(!EEt(o)){r.push(o);continue}let i=r.find(s=>o.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...o.children),n.add(i)):r.push(o)}for(let o of n){let i=QAe(o.children);r.push(new Bf(o.value,i))}return r.filter(o=>!n.has(o))}function kAe(t){return t.data||{}}function IAe(t){return t.resolve||{}}function TEt(t,r,n,o,i,s){return Rd(a=>_Et(t,r,n,o,a.extractedUrl,i,s).pipe(Wn(({state:l,tree:u})=>vs(ar({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function AEt(t,r){return Rd(n=>{let{targetSnapshot:o,guards:{canActivateChecks:i}}=n;if(!i.length)return an(n);let s=new Set(i.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let c of JAe(u))a.add(c);let l=0;return em(a).pipe(tR(u=>s.has(u)?kEt(u,o,t,r):(u.data=Cz(u,u.parent,t).resolve,an(void 0))),la(()=>l++),Tre(1),Rd(u=>l===a.size?an(n):s1))})}function JAe(t){let r=t.children.map(n=>JAe(n)).flat();return[t,...r]}function kEt(t,r,n,o){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!qAe(i)&&(s[FR]=i.title),IEt(s,t,r,o).pipe(Wn(a=>(t._resolvedData=a,t.data=Cz(t,t.parent,n).resolve,null)))}function IEt(t,r,n,o){let i=Gre(t);if(i.length===0)return an({});let s={};return em(i).pipe(Rd(a=>DEt(t[a],r,n,o).pipe(a1(),la(l=>{if(l instanceof kR)throw Tz(new wR,l);s[a]=l}))),Tre(1),nR(s),uk(a=>KAe(a)?s1:QM(a)))}function DEt(t,r,n,o){let i=OR(r)??o,s=Tk(t,i),a=s.resolve?s.resolve(r,n):ib(i,()=>s(r,n));return c1(a)}function Ure(t){return tm(r=>{let n=t(r);return n?em(n).pipe(Wn(()=>r)):an(r)})}var eke=(()=>{let r=class r{buildTitle(o){let i,s=o.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===yn);return i}getResolvedTitleForRoute(o){return o.data[FR]}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:()=>Ir(NEt),providedIn:"root"});let t=r;return t})(),NEt=(()=>{let r=class r extends eke{constructor(o){super(),this.title=o}updateTitle(o){let i=this.buildTitle(o);i!==void 0&&this.title.setTitle(i)}};r.\u0275fac=function(i){return new(i||r)(Ot(_Ae))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Sne=new Do("",{providedIn:"root",factory:()=>({})}),Cne=new Do(""),FEt=(()=>{let r=class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ir(Ire)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return an(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let i=c1(o.loadComponent()).pipe(Wn(tke),la(a=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=a}),rz(()=>{this.componentLoaders.delete(o)})),s=new wre(i,()=>new ro).pipe(vre());return this.componentLoaders.set(o,s),s}loadChildren(o,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return an({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=OEt(i,this.compiler,o,this.onLoadEndListener).pipe(rz(()=>{this.childrenLoaders.delete(i)})),l=new wre(a,()=>new ro).pipe(vre());return this.childrenLoaders.set(i,l),l}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function OEt(t,r,n,o){return c1(t.loadChildren()).pipe(Wn(tke),Rd(i=>i instanceof ZTe||Array.isArray(i)?an(i):em(r.compileModuleAsync(i))),Wn(i=>{o&&o(t);let s,a,l=!1;return Array.isArray(i)?(a=i,l=!0):(s=i.create(n).injector,a=s.get(Cne,[],{optional:!0,self:!0}).flat()),{routes:a.map(wne),injector:s}}))}function MEt(t){return t&&typeof t=="object"&&"default"in t}function tke(t){return MEt(t)?t.default:t}var Ene=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:()=>Ir(REt),providedIn:"root"});let t=r;return t})(),REt=(()=>{let r=class r{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,i){return o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),jEt=new Do("");var PEt=new Do(""),LEt=(()=>{let r=class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ro,this.transitionAbortSubject=new ro,this.configLoader=Ir(FEt),this.environmentInjector=Ir(ck),this.urlSerializer=Ir(yne),this.rootContexts=Ir(kz),this.location=Ir(hk),this.inputBindingEnabled=Ir(vne,{optional:!0})!==null,this.titleStrategy=Ir(eke),this.options=Ir(Sne,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Ir(Ene),this.createViewTransition=Ir(jEt,{optional:!0}),this.navigationErrorHandler=Ir(PEt,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>an(void 0),this.rootComponentType=null;let o=s=>this.events.next(new Jre(s)),i=s=>this.events.next(new ene(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let i=++this.navigationId;this.transitions?.next(vs(ar(ar({},this.transitions.value),o),{id:i}))}setupNavigations(o,i,s){return this.transitions=new Ra({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xR,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ja(a=>a.id!==0),Wn(a=>vs(ar({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),tm(a=>{let l=!1,u=!1;return an(a).pipe(tm(c=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",$f.SupersededByNewNavigation),s1;this.currentTransition=a,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?vs(ar({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!f&&d!=="reload"){let p="";return this.events.next(new K2(c.id,this.urlSerializer.serialize(c.rawUrl),p,Yre.IgnoredSameUrlNavigation)),c.resolve(!1),s1}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return an(c).pipe(tm(p=>{let m=this.transitions?.getValue();return this.events.next(new CR(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?s1:Promise.resolve(p)}),TEt(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),la(p=>{a.targetSnapshot=p.targetSnapshot,a.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=vs(ar({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new wz(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:h,restoredState:g,extras:y}=c,b=new CR(p,this.urlSerializer.serialize(m),h,g);this.events.next(b);let x=GAe(this.rootComponentType).snapshot;return this.currentTransition=a=vs(ar({},c),{targetSnapshot:x,urlAfterRedirects:m,extras:vs(ar({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,an(a)}else{let p="";return this.events.next(new K2(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Yre.IgnoredByUrlHandlingStrategy)),c.resolve(!1),s1}}),la(c=>{let f=new Xre(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Wn(c=>(this.currentTransition=a=vs(ar({},c),{guards:WCt(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),a)),rEt(this.environmentInjector,c=>this.events.next(c)),la(c=>{if(a.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Tz(this.urlSerializer,c.guardsResult);let f=new Kre(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),ja(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",$f.GuardRejected),!1)),Ure(c=>{if(c.guards.canActivateChecks.length)return an(c).pipe(la(f=>{let d=new Zre(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}),tm(f=>{let d=!1;return an(f).pipe(AEt(this.paramsInheritanceStrategy,this.environmentInjector),la({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(f,"",$f.NoDataFromResolver)}}))}),la(f=>{let d=new Qre(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}))}),Ure(c=>{let f=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(la(m=>{d.component=m}),Wn(()=>{})));for(let m of d.children)p.push(...f(m));return p};return JM(f(c.targetSnapshot.root)).pipe(Ere(null),jd(1))}),Ure(()=>this.afterPreactivation()),tm(()=>{let{currentSnapshot:c,targetSnapshot:f}=a,d=this.createViewTransition?.(this.environmentInjector,c.root,f.root);return d?em(d).pipe(Wn(()=>a)):an(a)}),Wn(c=>{let f=PCt(o.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=a=vs(ar({},c),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,a}),la(()=>{this.events.next(new TR)}),GCt(this.rootContexts,o.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),jd(1),la({next:c=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new X2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{l=!0}}),ws(this.transitionAbortSubject.pipe(la(c=>{throw c}))),rz(()=>{!l&&!u&&this.cancelNavigationTransition(a,"",$f.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),uk(c=>{if(u=!0,XAe(c))this.events.next(new fb(a.id,this.urlSerializer.serialize(a.extractedUrl),c.message,c.cancellationCode)),$Ct(c)?this.events.next(new Sk(c.url,c.navigationBehaviorOptions)):a.resolve(!1);else{let f=new ER(a.id,this.urlSerializer.serialize(a.extractedUrl),c,a.targetSnapshot??void 0);try{let d=ib(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(d instanceof kR){let{message:p,cancellationCode:m}=Tz(this.urlSerializer,d);this.events.next(new fb(a.id,this.urlSerializer.serialize(a.extractedUrl),p,m)),this.events.next(new Sk(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(f);let p=o.errorHandler(c);a.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(d)}}return s1}))}))}cancelNavigationTransition(o,i,s){let a=new fb(o.id,this.urlSerializer.serialize(o.extractedUrl),i,s);this.events.next(a),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function BEt(t){return t!==xR}var $Et=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:()=>Ir(zEt),providedIn:"root"});let t=r;return t})(),hne=class{shouldDetach(r){return!1}store(r,n){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,n){return r.routeConfig===n.routeConfig}},zEt=(()=>{let r=class r extends hne{};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=aR(r)))(s||r)}})(),r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),rke=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:()=>Ir(UEt),providedIn:"root"});let t=r;return t})(),UEt=(()=>{let r=class r extends rke{constructor(){super(...arguments),this.location=Ir(hk),this.urlSerializer=Ir(yne),this.options=Ir(Sne,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Ir(Ene),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new u1,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=GAe(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(i=>{i.type==="popstate"&&o(i.url,i.state)})}handleRouterEvent(o,i){if(o instanceof CR)this.stateMemento=this.createStateMemento();else if(o instanceof K2)this.rawUrlTree=i.initialUrl;else if(o instanceof wz){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else o instanceof TR?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):o instanceof fb&&(o.code===$f.GuardRejected||o.code===$f.NoDataFromResolver)?this.restoreHistory(i):o instanceof ER?this.restoreHistory(i,!0):o instanceof X2&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,i){let s=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,l=ar(ar({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",l)}else{let a=ar(ar({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(o,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===o.finalUrl&&a===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,i){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:i}:{navigationId:o}}};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=aR(r)))(s||r)}})(),r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),yR=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(yR||{});function VEt(t,r){t.events.pipe(ja(n=>n instanceof X2||n instanceof fb||n instanceof ER||n instanceof K2),Wn(n=>n instanceof X2||n instanceof K2?yR.COMPLETE:(n instanceof fb?n.code===$f.Redirect||n.code===$f.SupersededByNewNavigation:!1)?yR.REDIRECTING:yR.FAILED),ja(n=>n!==yR.REDIRECTING),jd(1)).subscribe(()=>{r()})}function GEt(t){throw t}var WEt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qEt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},nke=(()=>{let r=class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Ir(cz),this.stateManager=Ir(rke),this.options=Ir(Sne,{optional:!0})||{},this.pendingTasks=Ir(JTe),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Ir(LEt),this.urlSerializer=Ir(yne),this.location=Ir(hk),this.urlHandlingStrategy=Ir(Ene),this._events=new ro,this.errorHandler=this.options.errorHandler||GEt,this.navigated=!1,this.routeReuseStrategy=Ir($Et),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Ir(Cne,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Ir(vne,{optional:!0}),this.eventsSubscription=new P2,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof fb&&i.code!==$f.Redirect&&i.code!==$f.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof X2)this.navigated=!0;else if(i instanceof Sk){let l=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=ar({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||BEt(s.source)},l);this.scheduleNavigation(u,xR,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}YEt(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xR,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",i)},0)})}navigateToSyncWithBrowser(o,i,s){let a={replaceUrl:!0},l=s?.navigationId?s:null;if(s){let c=ar({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(a.state=c)}let u=this.parseUrl(o);this.scheduleNavigation(u,i,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(wne),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,i={}){let{relativeTo:s,queryParams:a,fragment:l,queryParamsHandling:u,preserveFragment:c}=i,f=c?this.currentUrlTree.fragment:l,d=null;switch(u){case"merge":d=ar(ar({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=$Ae(m)}catch{(typeof o[0]!="string"||o[0][0]!=="/")&&(o=[]),p=this.currentUrlTree.root}return zAe(p,o,d,f??null)}navigateByUrl(o,i={skipLocationChange:!1}){let s=_R(o)?o:this.parseUrl(o),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,xR,null,i)}navigate(o,i={skipLocationChange:!1}){return HEt(o),this.navigateByUrl(this.createUrlTree(o,i),i)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,i){let s;if(i===!0?s=ar({},WEt):i===!1?s=ar({},qEt):s=i,_R(o))return SAe(this.currentUrlTree,o,s);let a=this.parseUrl(o);return SAe(this.currentUrlTree,a,s)}removeEmptyProps(o){return Object.entries(o).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(o,i,s,a,l){if(this.disposed)return Promise.resolve(!1);let u,c,f;l?(u=l.resolve,c=l.reject,f=l.promise):f=new Promise((p,m)=>{u=p,c=m});let d=this.pendingTasks.add();return VEt(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:a,resolve:u,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function HEt(t){for(let r=0;r<t.length;r++)if(t[r]==null)throw new Ps(4008,!1)}function YEt(t){return!(t instanceof TR)&&!(t instanceof Sk)}var XEt=new Do("");function oke(t,...r){return sR([{provide:Cne,multi:!0,useValue:t},[],{provide:Ck,useFactory:KEt,deps:[nke]},{provide:nAe,multi:!0,useFactory:ZEt},r.map(n=>n.\u0275providers)])}function KEt(t){return t.routerState.root}function ZEt(){let t=Ir(Pf);return r=>{let n=t.get(mk);if(r!==n.components[0])return;let o=t.get(nke),i=t.get(QEt);t.get(JEt)===1&&o.initialNavigation(),t.get(eTt,null,Are.Optional)?.setUpPreloading(),t.get(XEt,null,Are.Optional)?.init(),o.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QEt=new Do("",{factory:()=>new ro}),JEt=new Do("",{providedIn:"root",factory:()=>1});var eTt=new Do("");var T2t=jf(cpt());re();Ee();fn();cr();kI();var UQ={kernelName:mb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,Yd(rt(n,"float32"),-1))}}};Ee();fn();Yn();Gs();Uo();ym();ls();oo();var fpt={kernelName:fg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Gr(rt(n,"float32")),i=Xn(wt(Mt(1),o));return Xr(Ct(t,i))}}}};Ee();fn();Yn();ym();ls();oo();var dpt={kernelName:dg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Xn(wt(Gr(rt(n,"float32")),1));return Ct(t,o)}}}};Ee();Ao();Ht();Si();var ppt={kernelName:zd,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=t,u=no(n.shape,i);return u.length>0&&(l=kt(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=no(o.shape,i);return u.length>0&&(l=kt(l,u)),Se(l,o.shape)}}}};Ee();var mpt={kernelName:hb,saveAllInputs:!0,gradFunc:(t,r)=>{let n={};return r.forEach((o,i)=>{n[i]=()=>t.clone()}),n}};Ee();zo();var hpt={kernelName:gb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>ir(n)}}};Ee();zo();var gpt={kernelName:yb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>ir(n)}}};Ee();fn();Yn();Uo();ym();ls();oo();var ypt={kernelName:pg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Xn(wt(Mt(1),Gr(rt(n,"float32")))))}}};Ee();$o();fn();Yn();Uo();ym();ls();var bpt={kernelName:mg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Xn(Ke(Mt(1),Gr(rt(n,"float32"))));return Ct(t,o)}}}};Ee();$o();Ao();Yn();cr();Gs();Ht();ls();Si();var xpt={kernelName:yg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=Ke(Gr(n),Gr(o)),u=we(t,Ct(o,l)),c=no(n.shape,i);return c.length>0&&(u=kt(u,c)),Se(u,n.shape)},b:()=>{let l=Ke(Gr(n),Gr(o)),u=Xr(we(t,Ct(n,l))),c=no(o.shape,i);return c.length>0&&(u=kt(u,c)),Se(u,o.shape)}}}};Ee();$o();fn();Yn();ls();var vpt={kernelName:hg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Ke(Gr(rt(n,"float32")),1))}}};Ee();fn();Yn();ls();oo();Uo();var wpt={kernelName:gg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,wt(Mt(1),Gr(rt(n,"float32"))))}}};Ee();$e();Ee();je();Ze();Ss();De();Ht();function l_r(t,r,n,o,i,s){let a=J(t,"dy","avgPool3dGrad"),l=J(r,"input","avgPool3dGrad"),u=a,c=l,f=!1;l.rank===4&&(f=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),de(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),de(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),ho("avgPool3dGrad",i,s);let d={dy:u,input:c},p={filterSize:n,strides:o,pad:i,dimRoundingMode:s},m=ue.runKernel(nS,d,p);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}var _pt=se({avgPool3dGrad_:l_r});var Spt={kernelName:xb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>_pt(t,o,i,s,a,l)}}};Ee();$e();Ee();je();Ze();De();Ht();function u_r(t,r,n,o,i){let s=J(t,"dy","avgPoolGrad"),a=J(r,"input","avgPoolGrad");de(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let l=a,u=s,c=!1;a.rank===3&&(c=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),de(l.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${l.rank}.`);let f={dy:u,input:l},d={filterSize:n,strides:o,pad:i},p=ue.runKernel(rS,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Cpt=se({avgPoolGrad_:u_r});var Ept={kernelName:bb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a}=n;return{x:()=>Cpt(t,o,i,s,a)}}};Ee();mm();var Tpt={kernelName:vb,inputsToSave:["a","b"],gradFunc:(t,r,n)=>{let[o,i]=r,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>zr(t,i,!1,!0),b:()=>zr(o,t,!0,!1)}:!s&&a?{a:()=>zr(t,i,!1,!1),b:()=>zr(t,o,!0,!1)}:s&&!a?{a:()=>zr(i,t,!1,!0),b:()=>zr(o,t,!1,!1)}:{a:()=>zr(i,t,!0,!0),b:()=>zr(t,o,!0,!0)}}};Ee();d3();var Apt={kernelName:wb,gradFunc:(t,r,n)=>{let{blockShape:o,crops:i}=n;return{x:()=>H1(t,o,i)}}};Ee();Si();var kpt={kernelName:Rne,gradFunc:(t,r,n)=>{let o=n,i=o.inputShape,s=o.shape,a=Array.from(s);for(let u=i.length-1;u>=0;u--)if(i[u]===s[u])a[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);let l=[];for(let u=0;u<a.length;u++)a[u]>1&&l.push(u);return{x:()=>kt(t,l,!0)}}};Ee();var Ipt={kernelName:sm,gradFunc:t=>({x:()=>t.clone()})};Ee();zo();var Dpt={kernelName:bg,gradFunc:t=>({x:()=>ir(t)})};Ee();wC();z1();_C();qf();zo();var Npt={kernelName:xg,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>go(za(Jl(o,i),Oc(o,s)),t,ir(t))}}};Ee();var Fpt={kernelName:_b,inputsToSave:["x"],gradFunc:UQ.gradFunc};Ee();IC();Ze();var Opt={kernelName:Sb,saveAllInputs:!0,gradFunc:(t,r,n)=>{let o=r.map(u=>u.shape),{axis:i}=n,s=as(i,r[0].shape)[0],a=o.map(u=>u[s]);return cs(t,a,s).map(u=>()=>u)}};Ee();CU();b8();Ss();Ze();var Mpt={kernelName:Cb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{dilations:s,strides:a,pad:l,dataFormat:u}=n;return de(Vf(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>oI(o.shape,t,i,a,l,u),filter:()=>OI(o,t,i.shape,a,l,u)}}};Ee();bC();CU();var Rpt={kernelName:Eb,inputsToSave:["dy","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u}=n;return{dy:()=>Vu(t,i,s,a,l,1,u),filter:()=>OI(t,o,i.shape,s,a,l,u)}}};Ee();$e();Ee();Ze();De();Ht();function c_r(t,r,n,o,i){let s=t;t.rank===4&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=r;a.rank===4&&(a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),de(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),de(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),de(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),de(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),de(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);let l={x:s,dy:a},u={strides:o,pad:i,filterShape:n};return ue.runKernel(lS,l,u)}var jpt=se({conv3DBackpropFilter_:c_r});koe();Ss();Ze();var Ppt={kernelName:Tb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s}=n;de(Vf(o),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let[a,l]=r;return{x:()=>v8(a.shape,t,l,i,s),filter:()=>jpt(a,t,l.shape,i,s)}}};Ee();fn();cr();Gs();cie();var Lpt={kernelName:vg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(Xr(_I(rt(n,"float32"))),t)}}};Ee();fn();cr();fie();var Bpt={kernelName:wg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(SI(rt(n,"float32")),t)}}};Ee();gm();C8();vx();var $pt={kernelName:Ab,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{let l=Poe([i],o.rank),u=aI(t,i,s,!a);return l!=null&&(u=Ur(u,l)),u}}}};Ee();Ss();wie();_ie();Ze();var zpt={kernelName:kb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s,dimRoundingMode:a}=n,l=o??[1,1];de(Vf(l),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${l}'`);let[u,c]=r;return de(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),de(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),de(u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),de(ga(i,l),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${l}'.`),ho("depthwiseConv2d",s,a),{x:()=>TU(u.shape,t,c,i,s,l,a),filter:()=>EU(u,t,c.shape,i,s,l,a)}}};$e();Ee();var Upt={kernelName:Ib,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,s={x:o,filter:i,dy:t},a={x:o,filter:i,dy:t};return{x:()=>ue.runKernel(Fk,s,n),filter:()=>ue.runKernel(Ok,a,n)}}};$e();Ee();var Vpt={kernelName:Sg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r,o={dy:t,y:n};return{x:()=>ue.runKernel(bS,o)}}};Ee();f0();cr();Gs();ls();var Gpt={kernelName:Cg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(yi(Xr(Gr(n))),2/Math.sqrt(Math.PI));return{x:()=>we(t,o)}}};Ee();cr();var Wpt={kernelName:Eg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,n)}}};Ee();Ht();var qpt={kernelName:Db,inputsToSave:["input"],gradFunc:(t,r)=>{let[n]=r;return{input:()=>Se(t,n.shape)}}};Ee();f0();cr();var Hpt={kernelName:Tg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,yi(n))}}};Ee();zo();var Ypt={kernelName:Ag,gradFunc:t=>({x:()=>ir(t)})};Ee();Ao();fn();Yn();cr();Gs();Ht();ls();Si();var Xpt={kernelName:kg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=Ct(t,rt(o,"float32")),u=no(n.shape,i);return u.length>0?Se(kt(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=no(o.shape,i);u.length>0&&(l=Se(kt(l,u),o.shape));let c=Gr(o);return Xr(Ct(l,rt(c,"float32")))}}}};Ee();$o();Ao();cr();Ht();aie();Uo();oo();Si();fI();var Kpt={kernelName:Nb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,r,n)=>{let{varianceEpsilon:o}=n,[i,s,a,l]=r,u=l??Mt(1),c=no(s.shape,i.shape),f=[];if(s.rank===1){for(let w=0;w<i.shape.length-1;++w)f.push(i.shape[w]);f.push(1)}let d=wt(i,s),p=we(t,u),m=xI(Ke(a,Mt(o))),h=we(we(we(m,m),m),Mt(-.5));return{x:()=>s.rank===1?Se(we(we(t,ya(Se(m,[1,1,1,s.shape[0]]),f)),u),i.shape):Se(we(we(t,m),u),i.shape),mean:()=>{let w=we(we(m,Mt(-1)),p);return s.rank===1&&(w=kt(w,c)),Se(w,s.shape)},variance:()=>{let w=we(we(h,d),p);return s.rank===1&&(w=kt(w,c)),Se(w,s.shape)},scale:()=>{let w=we(d,m),_=we(t,w);return s.rank===1&&(_=kt(_,c)),Se(_,s.shape)},offset:()=>{let w=t;return s.rank===1&&(w=kt(w,c)),Se(w,s.shape)}}}};Ee();gm();Ht();Q1();vx();vU();Ze();var Jpt={kernelName:Fb,inputsToSave:["x","indices"],gradFunc:(t,r,n)=>{let[o,i]=r,{axis:s,batchDims:a}=n,l=as(s,o.shape)[0],u=(c,f,d)=>()=>{let p=c.shape,m=f.size,h=p.slice(0,l),g=h.length,y=p.slice(s,p.length).slice(1),b=y.length,x=Zpt(0,g),v=Zpt(g+1,g+1+b),w=Qpt([h,[m],y]),_=Se(d,w),C=Se(f,[m]),S=Qpt([[g],x,v]),E=Ur(_,S),A=NI(E,C,c.shape[l]),N=t3(S);return A=Ur(A,N),A};if(a===1){let c=o.shape[0],f=o.split(c,0);return{x:()=>Qi(f.map((m,h)=>u(m,i.slice(h,1),t.slice(h,1))())).reshape(o.shape),indices:()=>i}}else return{x:u(o,i,t),indices:()=>i}}};function Zpt(t,r){let n=[];for(let o=t;o<r;++o)n.push(o);return n}function Qpt(t){let r=[];for(let n=0;n<t.length;++n)for(let o=0;o<t[n].length;++o)r.push(t[n][o]);return r}Ee();zo();var emt={kernelName:Ig,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>ir(n),b:()=>ir(o)}}};Ee();fn();var tmt={kernelName:am,gradFunc:t=>({x:()=>rt(t,"float32")})};Ee();zo();var rmt={kernelName:Dg,gradFunc:t=>({x:()=>ir(t)})};Ee();zo();var nmt={kernelName:Ng,gradFunc:t=>({x:()=>ir(t)})};Ee();zo();var omt={kernelName:Fg,gradFunc:t=>({x:()=>ir(t)})};Ee();m0();cr();qf();var imt={kernelName:Ob,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{alpha:i}=n,s=ni(o,0);return{x:()=>go(s,t,we(t,i))}}};Ee();$o();Yn();var smt={kernelName:Mg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Ke(n,1))}}};Ee();fn();Yn();var amt={kernelName:Og,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,rt(n,"float32"))}}};Ee();f0();cr();oo();Si();var lmt={kernelName:jne,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n;return{logits:()=>{let a=yi(o);return wt(t,we(kt(t,i,!0),a))}}}};Ee();$e();Ee();De();function f_r(t,r,n,o=5,i=1,s=1,a=.5){let l={x:t,y:r,dy:n},u={depthRadius:o,bias:i,alpha:s,beta:a};return ue.runKernel(TS,l,u)}var umt=se({localResponseNormalizationBackprop_:f_r});var cmt={kernelName:Mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{depthRadius:s,bias:a,alpha:l,beta:u}=n;return{x:()=>umt(o,i,t,s,a,l,u)}}};Ee();Ze();gm();fn();e3();cr();Ht();function VQ(t,r,n,o){return r.rank<n.rank&&(r=Se(r,Hd(r.shape,o))),t.rank<n.rank&&(t=Se(t,Hd(t.shape,o))),{x:()=>we(t,rt(Sl(n,r),t.dtype))}}var h2e={kernelName:Rb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{reductionIndices:i}=o,s=r[0],a=r[1],l=as(i,s.shape),u=VQ(t,a,s,l);return{x:()=>u.x()}}};Ee();fn();wC();i3();cr();var fmt={kernelName:Rg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(Jl(n,o),"float32")),b:()=>we(t,rt(hx(n,o),"float32"))}}};Ee();$e();Ee();je();Ze();Ss();De();Ht();function d_r(t,r,n,o,i,s,a){let l=J(t,"dy","maxPool3dGrad"),u=J(r,"input","maxPool3dGrad"),c=J(n,"output","maxPool3dGrad"),f=l,d=u,p=c,m=!1;u.rank===4&&(m=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=Se(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),de(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),de(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),de(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),ho("maxPool3dGrad",s,a);let h={dy:f,input:d,output:p},g={filterSize:o,strides:i,pad:s,dimRoundingMode:a},y=ue.runKernel(kS,h,g);return m?Se(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var dmt=se({maxPool3dGrad_:d_r});var pmt={kernelName:Pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=n;return{x:()=>dmt(t,o,i,s,a,l,u)}}};Ee();$e();Ee();je();Ze();Ss();De();function p_r(t,r,n,o,i,s,a){let l=J(t,"dy","maxPoolGrad"),u=J(r,"input","maxPoolGrad"),c=J(n,"output","maxPoolGrad");de(u.rank===l.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${l.rank})`),de(l.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),de(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),ho("maxPoolGrad",s,a);let f={dy:l,input:u,output:c},d={filterSize:o,strides:i,pad:s,dimRoundingMode:a};return ue.runKernel(AS,f,d)}var mmt=se({maxPoolGrad_:p_r});var hmt={kernelName:jb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l}=n;return{x:()=>mmt(t,o,i,s,a,l)}}};Ee();gm();Yn();cr();SC();Ht();Ze();var gmt={kernelName:Lb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=as(i,o.shape),l=joe(o.shape,s)[1],u=rn(l);return{x:()=>{let f=o.shape.slice();s.forEach(m=>{f[m]=1});let d=Se(t,f);return Ct(we(d,$i(o.shape,"float32")),u)}}}};Ee();Ze();var ymt={kernelName:Bb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{axis:i}=o,[s,a]=r,l=as(i,s.shape),u=VQ(t,a,s,l);return{x:()=>u.x()}}};Ee();fn();m0();z1();cr();var bmt={kernelName:jg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(Oc(n,o),"float32")),b:()=>we(t,rt(ni(n,o),"float32"))}}};Ee();Uu();var xmt={kernelName:$b,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>Br(t,s,o.shape)}}};Ee();Ao();Yn();O8();cr();Gs();Ht();Si();var vmt={kernelName:Pg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=no(n.shape,i);return l.length>0?Se(kt(t,l),n.shape):t},b:()=>{let l=we(t,Xr(d0(Ct(n,o)))),u=no(o.shape,i);return u.length>0?Se(kt(l,u),o.shape):l}}}};Ee();Ao();fn();cr();Ht();Si();var wmt={kernelName:Lg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=we(t,rt(o,"float32")),u=no(n.shape,i);return u.length>0?Se(kt(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=no(o.shape,i);return u.length>0?Se(kt(l,u),o.shape):l}}}};Ee();Gs();var _mt={kernelName:zb,gradFunc:t=>({x:()=>Xr(t)})};Ee();hI();var Smt={kernelName:Vb,inputsToSave:["indices"],gradFunc:(t,r)=>{let n=r[0];return{indices:()=>bo(n.shape,"float32")}}};Ee();zo();var Cmt={kernelName:Ub,gradFunc:t=>({x:()=>ir(t)})};Ee();FI();var Emt={kernelName:Gb,saveAllInputs:!0,gradFunc:(t,r,n)=>{let{axis:o}=n;return Ua(t,o).map(s=>()=>s)}};Ee();Uu();var g2e={kernelName:Wb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>Br(t,s,o.shape)}}};Ee();Ao();fn();m0();dI();cr();L1();Ht();Uo();oo();Si();qf();zo();var Tmt={kernelName:Bg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,r)=>{let[n,o,i]=r,s=n,a=o,l=Rr(s.shape,a.shape);return{a:()=>{let f=rt(a,"float32"),d=we(t,we(f,$a(s,wt(f,Mt(1))))),p=no(s.shape,l);return p.length>0&&(d=kt(d,p)),Se(d,s.shape)},b:()=>{let f=ni(s,0),d=go(f,Vs(s),ir(s)),p=we(t,we(i,d)),m=no(a.shape,l);return m.length>0&&(p=kt(p,m)),Se(p,a.shape)}}}};Ee();Ao();m0();cr();Ht();Si();qf();zo();var Amt={kernelName:qb,inputsToSave:["x","alpha"],gradFunc:(t,r)=>{let[n,o]=r,i=ni(n,0);return{x:()=>go(i,t,we(t,o)),alpha:()=>{let s=go(i,ir(t),we(t,n)),a=no(o.shape,t.shape);return a.length>0&&(s=kt(s,a)),Se(s,o.shape)}}}};Qie();Ee();S8();cr();Ht();vx();function m_r(t,r,n){let o=t.shape.slice();o[n]=1;let i=Se(r,o),s=xC(t,n,!0,!1),a=xC(t,n,!0,!0),l=we(s,a);return we(i,l)}function h_r(t,r,n){let o=t.shape.length,i=o-n.length,s=ce.getAxesPermutation(n,o),a=t;s!=null&&(a=Ur(t,s));let l=a.shape.slice(),c=l.splice(o-n.length,n.length).reduce((p,m)=>p*m,1);l.push(c);let f=a.reshape(l),d=m_r(f,r,i);if(d=d.reshape(a.shape),s!=null){let p=ce.getUndoAxesPermutation(s);d=Ur(d,p)}return d}var kmt={kernelName:Hb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=[];return i==null?s=o.shape.map((a,l)=>l):typeof i=="number"?s=[i]:s=i,{x:()=>h_r(o,t,s)}}};Ee();Ao();fn();Yn();cr();Gs();Ht();ls();Si();var Imt={kernelName:_g,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=Ct(t,rt(o,"float32")),u=no(n.shape,i);return u.length>0?Se(kt(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=no(o.shape,i);u.length>0&&(l=Se(kt(l,u),o.shape));let c=Gr(o);return Xr(Ct(l,rt(c,"float32")))}}}};Ee();Yn();Gs();ls();var Dmt={kernelName:$g,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Xr(Gr(n)))}}};Ee();fn();z1();cr();kI();var Nmt={kernelName:Ug,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(Oc(n,6),Yd(n));return{x:()=>we(t,rt(o,"float32"))}}};Ee();fn();cr();kI();var Fmt={kernelName:zg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,rt(Yd(n),"float32"))}}};Ee();Ht();var Omt={kernelName:Yb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Se(t,n.shape)}}};$e();Ee();var Mmt={kernelName:Kb,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel($S,i,n)}}};$e();Ee();var Rmt={kernelName:Xb,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(BS,i,n)}}};Ee();bx();Ze();var jmt={kernelName:Zb,gradFunc:(t,r,n)=>{let{dims:o}=n,i=as(o,t.shape);return{x:()=>us(t,i)}}};Ee();zo();var Pmt={kernelName:Vg,gradFunc:t=>({x:()=>ir(t)})};Ee();Yn();cr();Gs();L1();var Lmt={kernelName:Gg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Xr(Ct(t,we($a(n,1.5),2)))}}};Ee();fn();a3();cr();zo();var Bmt={kernelName:Qb,inputsToSave:["condition"],gradFunc:(t,r)=>{let[n]=r;return{condition:()=>rt(ir(n),"float32"),t:()=>we(t,rt(n,t.dtype)),e:()=>we(t,rt(G1(n),t.dtype))}}};Ee();fn();f0();m0();cr();Uo();Xie();qf();var $mt={kernelName:Wg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=ni(n,Mt(0)),i=Mt(Hie),s=Mt(Yie),a=we(t,s),l=we(we(t,i),yi(rt(n,"float32")));return go(o,a,l)}}}};Ee();cr();Uo();oo();var zmt={kernelName:Xg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(n,wt(Mt(1),n)))}}};Ee();zo();var Umt={kernelName:Yg,gradFunc:t=>({x:()=>ir(t)})};Ee();fn();_8();cr();var Vmt={kernelName:qg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(j1(rt(n,"float32")),t)}}};Ee();fn();Ioe();cr();var Gmt={kernelName:Hg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(sI(rt(n,"float32")),t)}}};Ee();q1();qU();var Wmt={kernelName:Jb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{begin:i,size:s}=n,a=o.shape,[l,u]=Vie(o,i,s),c=[];for(let f=0;f<t.rank;f++)c.push([l[f],a[f]-l[f]-u[f]]);return{x:()=>eu(t,c)}}};Ee();cr();oo();Si();var qmt={kernelName:nx,outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{dim:i}=n,s=!0,a=we(t,o);return{logits:()=>wt(a,we(kt(a,[i],s),o))}}};Ee();cr();eI();var Hmt={kernelName:Kg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,_l(n))}}};Ee();ZR();var y2e={kernelName:tx,gradFunc:(t,r,n)=>{let{blockShape:o,paddings:i}=n;return{x:()=>R1(t,o,i)}}};Ee();Wf();var b2e={kernelName:rx,gradFunc:(t,r,n)=>{let{axis:o}=n;return{x:()=>Nn(t,o)}}};Ee();fn();Yn();cr();ym();var Ymt={kernelName:Zg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,we(Xn(rt(n,"float32")),2))}}};Ee();fn();cr();var Xmt={kernelName:XS,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(rt(n,"float32"),2))}}};Ee();cr();Uo();oo();var Kmt={kernelName:Qg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Mt(2);return{a:()=>we(t,we(i,wt(n,o))),b:()=>we(t,we(i,wt(o,n)))}}};Ee();zo();var Zmt={kernelName:r0,gradFunc:t=>({x:()=>ir(t)})};Ee();Ao();Gs();Ht();Si();var Qmt={kernelName:Jg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rr(n.shape,o.shape);return{a:()=>{let l=t,u=no(n.shape,i);return u.length>0&&(l=kt(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=no(o.shape,i);return u.length>0&&(l=kt(l,u)),Se(Xr(l),o.shape)}}}};Ee();cr();SC();Ht();Ze();var Jmt={kernelName:ex,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,i=o.shape.slice(),{axis:s}=n;as(s,o.shape).forEach(c=>{i[c]=1});let l=Se(t,i),u=we(l,$i(o.shape,"float32"));return{x:()=>u}}};Ee();_8();Yn();ls();var eht={kernelName:e0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Gr(j1(n)))}}};Ee();cr();Uo();ls();oo();var tht={kernelName:t0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(wt(Mt(1),Gr(n)),t)}}};Ee();$o();Uu();zo();var rht={kernelName:lm,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{reps:i}=n;return{x:()=>{let a=ir(o);if(o.rank===1)for(let l=0;l<i[0];++l)a=Ke(a,Br(t,[l*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)a=Ke(a,Br(t,[l*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)a=Ke(a,Br(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else if(o.rank===4)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)for(let f=0;f<i[3];++f)a=Ke(a,Br(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2],f*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${o.rank} tensors yet.`);return a}}}};Ee();gm();vx();var nht={kernelName:um,gradFunc:(t,r,n)=>{let o=n,{perm:i}=o,s=t3(i);return{x:()=>Ur(t,s)}}};Ee();Q1();var oht={kernelName:ox,gradFunc:(t,r,n)=>{let o=n,{axis:i}=o;return{value:()=>Qi(t,i)}}};Ee();cI();n3();wC();_C();u3();SC();Uo();qf();zo();var iht={kernelName:ix,inputsToSave:["segmentIds"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>g_r(t,n)}}};function g_r(t,r){let n=Wu(r,ir(r)),o=p0(t,n),i=Jl(r,Mt(0,"int32")),s=o.rank-i.rank;for(let l=0;l<s;++l)i=Ci(i,l+1);i=za(i,$i(o.shape,"bool"));let a=ir(o);return go(i,o,a)}Ee();zo();var sht={kernelName:sx,gradFunc:t=>({x:()=>ir(t)})};BR();var y_r=[UQ,fpt,dpt,ppt,mpt,hpt,gpt,ypt,bpt,xpt,vpt,wpt,Spt,Ept,Tpt,Apt,kpt,Ipt,Dpt,Npt,Fpt,Opt,Rpt,Mpt,Ppt,Lpt,Bpt,$pt,zpt,Upt,Imt,Vpt,Gpt,Wpt,qpt,Hpt,Xpt,Ypt,Kpt,Jpt,emt,tmt,rmt,nmt,omt,imt,smt,amt,lmt,cmt,h2e,h2e,fmt,pmt,hmt,gmt,ymt,bmt,xmt,vmt,wmt,_mt,Smt,Cmt,Emt,g2e,g2e,Tmt,Amt,kmt,Dmt,Nmt,Fmt,Omt,Mmt,Rmt,jmt,Pmt,Lmt,Bmt,$mt,zmt,Umt,Vmt,Gmt,Wmt,qmt,Hmt,y2e,y2e,b2e,b2e,Ymt,Kmt,Xmt,Zmt,Qmt,Jmt,eht,tht,rht,nht,oht,iht,sht];for(let t of y_r)Pne(t);Jie();re();re();re();var Fd=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},Nu=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},Ie=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},xr=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},GQ=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}};var t6=class{constructor(r){this.maxEntries=r||100,this.cache=new Map}get(r){let n;return this.cache.has(r)&&(n=this.cache.get(r),this.cache.delete(r),this.cache.set(r,n)),n}put(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxEntries){let o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(r,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(r){if(r<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${r}.`);if(this.maxEntries>r)for(let n=0;n<this.maxEntries-r;n++){let o=this.cache.keys().next().value;this.cache.delete(o)}this.maxEntries=r}};re();function Bp(t,r){if(Array.isArray(t)){let n=[];for(let o=0;o<r;o++)n=n.concat(t);return n}else{let n=new Array(r);return n.fill(t),n}}function Od(t,r){if(!t)throw new GQ(r)}function v2e(t,r){let n=0;for(let o of t)o===r&&n++;return n}function na(t){return t.length===1?t[0]:t}function Fn(t){return Array.isArray(t)?t:[t]}function $p(t){let n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function $v(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(r,n)=>n.toUpperCase())}var Lp={};function QO(t){if(t==null)return null;let r={};return r.className=t.getClassName(),r.config=t.getConfig(),r}function x2e(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(r=>x2e(r));else{let r=Object.keys(t);for(let n of r){let o=t[n];o!=null&&typeof o=="object"&&(!Array.isArray(o)&&o.type==="ndarray"&&typeof o.value=="number"?t[n]=o.value:x2e(o))}}}function Hy(t,r={},n={},o="object",i=!1){if(typeof t=="string"){let s=t,a;if(s in n)a=n[s];else if(s in Lp)a=Lp[s];else if(a=r[s],a==null)throw new Ie(`Unknown ${o}: ${t}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{let s=t;if(s.className==null||s.config==null)throw new Ie(`${o}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);let a=s.className,l,u;if(a in n?[l,u]=n[a]:a in Lp?[l,u]=Lp.className:a in r&&([l,u]=r[a]),l==null)throw new Ie(`Unknown ${o}: ${a}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){let c={};for(let m of Object.keys(Lp))c[m]=Lp[m];for(let m of Object.keys(n))c[m]=n[m];let f=s.config;f.customObjects=c;let d=Object.assign({},Lp);for(let m of Object.keys(n))Lp[m]=n[m];x2e(s.config);let p=u(l,s.config,n,i);return Lp=Object.assign({},d),p}else{let c=Object.assign({},Lp);for(let d of Object.keys(n))Lp[d]=n[d];let f=new l(s.config);return Lp=Object.assign({},c),f}}}function b_r(t,r){return t<r?-1:t>r?1:0}function r6(t,r){return-1*b_r(t,r)}function zp(t){if(t==null)return t;let r=[];for(let n of t)r.indexOf(n)===-1&&r.push(n);return r}function aht(t){if(t==null)throw new Ie(`Invalid value in obj: ${JSON.stringify(t)}`);for(let r in t)if(t.hasOwnProperty(r))return!1;return!0}function Yy(t,r,n){if(n!=null&&t.indexOf(n)<0)throw new Ie(`${n} is not a valid ${r}.  Valid values are ${t} or null/undefined.`)}function WQ(t,r,n=0,o=1/0){return Od(n>=0),Od(o>=n),Array.isArray(t)&&t.length>=n&&t.length<=o&&t.every(i=>typeof i===r)}function Ri(t,r){Array.isArray(t)?(H.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((n,o)=>Ri(n,`element ${o+1} of ${r}`))):H.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got ${lht(t)}.`)}function lht(t){return t===null?"null":Array.isArray(t)?"["+t.map(r=>lht(r)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function uht(t,r,n){let o=n!=null?n():H.now(),i;return(...a)=>{let l=n!=null?n():H.now();return l-o<r||(o=l,i=t(...a)),i}}function qQ(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}re();var x_r=0;function YQ(){return x_r++}var HQ={};function E2(t=""){return t in HQ||(HQ[t]=0),HQ[t]+=1,t+HQ[t].toString()}re();var cht=["channelsFirst","channelsLast"],fht=["nearest","bilinear"],dht=["valid","same","causal"],pht=["max","avg"],mht=["sum","mul","concat","ave"];var JO=new Map;function Ko(t){Yy(cht,"DataFormat",t)}function ght(t){Yy(fht,"InterpolationFormat",t)}function Fu(t){Yy(dht,"PaddingMode",t)}function w2e(t){Yy(pht,"PoolMode",t)}var n6=[],hht="/";function Uh(t,r){n6.push(t);try{let n=r();return n6.pop(),n}catch(n){throw n6.pop(),n}}function v_r(){return n6.length===0?"":n6.join(hht)+hht}function XQ(t){if(!yht(t))throw new Error("Not a valid tensor name: '"+t+"'");return v_r()+t}function KQ(t){if(!yht(t))throw new Error("Not a valid tensor name: '"+t+"'");JO.has(t)||JO.set(t,0);let r=JO.get(t);if(JO.set(t,JO.get(t)+1),r>0){let n=`${t}_${r}`;return JO.set(n,1),n}else return t}var w_r=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function yht(t){return!!t.match(w_r)}re();re();re();function bht(t){return t===parseInt(t.toString(),10)}function Up(t,r,n){r==null&&(r=0),n==null&&(n=t.length);let o=1;for(let i=r;i<n;++i)o*=t[i];return o}function RA(t){if(t.length===0)return Number.NaN;let r=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o<r&&(r=o)}return r}function Vh(t){if(t.length===0)return Number.NaN;let r=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o>r&&(r=o)}return r}function Ou(t,r){if(r<t)throw new Ie(`end (${r}) < begin (${t}) is forbidden.`);let n=[];for(let o=t;o<r;++o)n.push(o);return n}re();var _2e;function os(){return _2e==null&&(_2e=HR().epsilon()),_2e}function Mu(){return"channelsLast"}function Vl(t,r){return rt(t,r)}function Uv(t,r=-1){let n=t.shape.slice();return r<0&&(r=n.length+r+1),n.splice(r,0,1),Se(t,n)}function xht(t,r){return Pe(()=>{if(t.shape.length!==2)throw new Ie(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let n=Uv(t,1);return QQ(n,[1,r,1])})}function vht(t){let r=[Up(t.shape)];return Se(t,r)}function wht(t){if(t.rank<=1)throw new Ie(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let r=[t.shape[0],Up(t.shape,1)];return Se(t,r)}function zv(t,r,n){return Pe(()=>{switch(t.rank){case 1:return CI(t,r,n);case 2:return g3(t,[r,0],[n,t.shape[1]]);case 3:return EI(t,[r,0,0],[n,t.shape[1],t.shape[2]]);case 4:return kC(t,[r,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Br(t,[r,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Br(t,[r,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Ie(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function S2e(t,r,n){return Pe(()=>{switch(t.rank){case 1:return CI(t,r,n);case 2:return g3(t,[0,r],[t.shape[0],n]);case 3:return EI(t,[0,0,r],[t.shape[0],t.shape[1],n]);case 4:return kC(t,[0,0,0,r],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function o6(t,r,n,o){return Pe(()=>{switch(t.rank){case 1:return CI(t,r,n);case 2:switch(o){case 1:return zv(t,r,n);case 2:return S2e(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 3:switch(o){case 1:return zv(t,r,n);case 2:return EI(t,[0,r,0],[t.shape[0],n,t.shape[2]]);case 3:return S2e(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 4:switch(o){case 1:return zv(t,r,n);case 2:return kC(t,[0,r,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return kC(t,[0,0,r,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return S2e(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function eM(t,r=-1){let n;return r<0&&(n=t[0].rank,n!==0?r=n:r=0),r===t[0].rank&&(r=-1),Nn(t,r)}function E2e(t,r){switch(t.rank){case 1:return m8([t,r]);case 2:return h8([t,r],0);case 3:return g8([t,r],0);case 4:return y8([t,r],0);default:throw new Ie(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function QQ(t,r){if(Array.isArray(r)||(r=[r]),t.rank!==r.length)throw new Ie(`The length of input n (${r.length}) does not match the number of dimensions in input x (${t.rank})`);return ya(t,r)}function tM(t,r=0,n=1,o,i){return AC(t,r,n,o,i)}function Vp(t,r,n,o){if(t.rank<2||r.rank<2)throw new xr(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${r.shape}`);if(r.rank>=3){let i=t.shape.slice(-1)[0],s=r.shape.slice(-2)[0];if(i!==s)throw new xr(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${r.shape}`)}if(t.rank===2&&r.rank===2)return ew.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?C2e(t.rank,o,Mu()):null,activation:n});{let i=t.shape.slice(),s=i.pop();t=Se(t,[-1,s]);let a=r.shape.slice(),l=a.pop(),u=a.pop(),c=[...a,l],f=Array.from({length:r.rank},(h,g)=>g===0?r.rank-2:g<=r.rank-2?g-1:g);r=Se(Ur(r,f),[u,-1]);let d=[...i,...c];return Se(ew.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?C2e(t.rank,o,Mu()):null,activation:n}),d)}}function JQ(t,r,n){return Pe(()=>(Array.isArray(r)?r=No(r,"int32"):r=rt(r,"int32"),p0(t,r,n)))}function jA(t){return we(t,t)}function C2e(t,r,n){let o=r.shape;if(r.rank!==1&&r.rank!==t)throw new Ie(`Unexpected bias dimensions: ${r.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1,1]):Se(r,[1,o[3],o[0],o[1],o[2]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===4){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1]):Se(r,[1,o[2],o[0],o[1]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===3){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1]):Se(r,[1,o[1],o[0]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,o[0]]):Se(r,[1].concat(o))}else if(t<3)return r;throw new Ie(`Unsupported input rank by biasAdd: ${r.rank}`)}function Ru(t,r,n){return Pe(()=>(n==null&&(n=Mu()),Ko(n),Ke(t,C2e(t.rank,r,n))))}function _ht(t,r=1){if(r!==1)throw new xr(`Support for alpha values other than 1 (${r}) is not implemented yet.`);return c0(t)}function Sht(t){return Pe(()=>Ct(t,Ke(To(t),1)))}function eJ(t,r,n,o){return Pe(()=>xie(t,r,n,o))}function Cht(t){return Pe(()=>{let r=Ke(.5,we(.2,t));return zs(r,0,1)})}function T2(t,r,n=!1){return n?t():r()}var Eht=["fanIn","fanOut","fanAvg"],Tht=["normal","uniform","truncatedNormal"];function __r(t){Yy(Eht,"FanMode",t)}function S_r(t){Yy(Tht,"Distribution",t)}var ju=class extends tt.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},Iht=(()=>{class t extends ju{apply(n,o){return bo(n,o)}}return t.className="Zeros",t})();tt.registerClass(Iht);var tJ=(()=>{class t extends ju{apply(n,o){return $i(n,o)}}return t.className="Ones",t})();tt.registerClass(tJ);var Dht=(()=>{class t extends ju{constructor(n){if(super(),typeof n!="object")throw new Ie(`Expected argument of type ConstantConfig but got ${n}`);if(n.value===void 0)throw new Ie(`config must have value set but got ${n}`);this.value=n.value}apply(n,o){return Pe(()=>we(Mt(this.value),$i(n,o)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();tt.registerClass(Dht);var Nht=(()=>{class t extends ju{constructor(n){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=n.minval||this.DEFAULT_MINVAL,this.maxval=n.maxval||this.DEFAULT_MAXVAL,this.seed=n.seed}apply(n,o){return Mc(n,this.minval,this.maxval,o,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();tt.registerClass(Nht);var Fht=(()=>{class t extends ju{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new xr(`randomNormal does not support dType ${o}.`);return tM(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();tt.registerClass(Fht);var Oht=(()=>{class t extends ju{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new xr(`truncatedNormal does not support dType ${o}.`);return DI(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();tt.registerClass(Oht);var Mht=(()=>{class t extends ju{constructor(n){super(),this.gain=n.gain!=null?n.gain:1}apply(n,o){return Pe(()=>{if(n.length!==2||n[0]!==n[1])throw new Ie("Identity matrix initializer can only be used for 2D square matrices.");return we(this.gain,vC(n[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();tt.registerClass(Mht);function C_r(t,r="channelsLast"){let n,o;if(Ko(r),t.length===2)n=t[0],o=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(r==="channelsFirst"){let i=Up(t,2);n=t[1]*i,o=t[0]*i}else if(r==="channelsLast"){let i=Up(t,0,t.length-2);n=t[t.length-2]*i,o=t[t.length-1]*i}}else{let i=Up(t);n=Math.sqrt(i),o=Math.sqrt(i)}return[n,o]}var If=(()=>{class t extends ju{constructor(n){if(super(),n.scale<0)throw new Ie(`scale must be a positive float. Got: ${n.scale}`);this.scale=n.scale==null?1:n.scale,this.mode=n.mode==null?"fanIn":n.mode,__r(this.mode),this.distribution=n.distribution==null?"normal":n.distribution,S_r(this.distribution),this.seed=n.seed}apply(n,o){let i=C_r(n),s=i[0],a=i[1],l=this.scale;if(this.mode==="fanIn"?l/=Math.max(1,s):this.mode==="fanOut"?l/=Math.max(1,a):l/=Math.max(1,(s+a)/2),this.distribution==="normal"){let u=Math.sqrt(l);if(o=o||"float32",o!=="float32"&&o!=="int32")throw new xr(`${this.getClassName()} does not support dType ${o}.`);return DI(n,0,u,o,this.seed)}else{let u=Math.sqrt(3*l);return Mc(n,-u,u,o,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();tt.registerClass(If);var T2e=(()=>{class t extends If{constructor(n){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return If.className}}return t.className="GlorotUniform",t})();tt.registerClass(T2e);var A2e=(()=>{class t extends If{constructor(n){super({scale:1,mode:"fanAvg",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return If.className}}return t.className="GlorotNormal",t})();tt.registerClass(A2e);var k2e=(()=>{class t extends If{constructor(n){super({scale:2,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return If.className}}return t.className="HeNormal",t})();tt.registerClass(k2e);var I2e=(()=>{class t extends If{constructor(n){super({scale:2,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return If.className}}return t.className="HeUniform",t})();tt.registerClass(I2e);var D2e=(()=>{class t extends If{constructor(n){super({scale:1,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return If.className}}return t.className="LeCunNormal",t})();tt.registerClass(D2e);var N2e=(()=>{class t extends If{constructor(n){super({scale:1,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return If.className}}return t.className="LeCunUniform",t})();tt.registerClass(N2e);var Rht=(()=>{class t extends ju{constructor(n){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=n.gain==null?this.DEFAULT_GAIN:n.gain,this.seed=n.seed}apply(n,o){return Pe(()=>{if(n.length<2)throw new xr("Shape must be at least 2D.");if(o!=="int32"&&o!=="float32"&&o!==void 0)throw new TypeError(`Unsupported data type ${o}.`);o=o;let i=H.sizeFromShape(n.slice(0,-1)),s=n[n.length-1],a=i*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);let l=[Math.max(s,i),Math.min(s,i)],u=tM(l,0,1,o,this.seed),c=kie.qr(u,!1),f=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(s,i)*Math.min(s,i)],[Math.min(s,i)+1]);return f=we(f,p.sign()),i<s&&(f=f.transpose()),we(Mt(this.gain),f.reshape(n))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();tt.registerClass(Rht);var Aht={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function kht(t,r={}){return Hy(t,tt.SerializationMap.getMap().classNameMap,r,"initializer")}function So(t){return QO(t)}function to(t){if(typeof t=="string"){let r=t in Aht?Aht[t]:t;if(r==="GlorotNormal")return new A2e;if(r==="GlorotUniform")return new T2e;if(r==="HeNormal")return new k2e;if(r==="HeUniform")return new I2e;if(r==="LeCunNormal")return new D2e;if(r==="LeCunUniform")return new N2e;{let n={};return n.className=r,n.config={},kht(n)}}else return t instanceof ju?t:kht(t)}function rJ(t){return Array.isArray(t)&&Array.isArray(t[0])}function rM(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function sr(t){let r;if(Array.isArray(t)){if(t.length!==1)throw new Ie(`Expected Tensor length to be 1; got ${t.length}`);r=t[0]}else r=t;return r}function Vr(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Ie(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function nM(t){let r=0;for(let n of t)n.shape.length===0?r+=1:r+=n.shape.reduce((o,i)=>o*i);return r}re();re();var Pht="Variable",i6=class{constructor(r,n="float32",o=Pht,i=!0,s=null){this.dtype=n??"float32",this.shape=r.shape,this.id=YQ(),o=o??Pht,this.originalName=XQ(o),this.name=KQ(this.originalName),this.trainable_=i,this.constraint=s,this.val=wU(r,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(r){return this.assertNotDisposed(),T_r(this.val,r),this.val.id!==r.id&&(this.val.assign(r),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(r){this.trainable_=r,this.val.trainable=r}};function T_r(t,r){if(t.shape.toString()!==r.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(r.shape))}function s6(t){return t.map(r=>r.read())}function oM(t){t.forEach(r=>{r[0].write(r[1])})}var po=class{constructor(r){this.dtype=r.dtype,this.shape=r.shape,r.shape!=null?this.ndim=r.shape.length:this.ndim=r.ndim,this.maxNDim=r.maxNDim,this.minNDim=r.minNDim,this.axes=r.axes||{}}},Gl=class{constructor(r,n,o,i,s,a,l){this.dtype=r,this.shape=n,this.sourceLayer=o,this.inputs=i,this.callArgs=s,this.outputTensorIndex=l,this.id=YQ(),a!=null&&(this.originalName=XQ(a),this.name=KQ(this.originalName)),this.rank=n.length}},A_r=0,Vv=class{constructor(r,n){this.callArgs=n,this.id=A_r++,this.outboundLayer=r.outboundLayer,this.inboundLayers=r.inboundLayers,this.nodeIndices=r.nodeIndices,this.tensorIndices=r.tensorIndices,this.inputTensors=r.inputTensors,this.outputTensors=r.outputTensors,this.inputMasks=r.inputMasks,this.outputMasks=r.outputMasks,this.inputShapes=r.inputShapes,this.outputShapes=r.outputShapes;for(let o of r.inboundLayers)o?.outboundNodes.push(this);r.outboundLayer.inboundNodes.push(this)}getConfig(){let r=[];for(let n of this.inboundLayers)n!=null?r.push(n.name):r.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:r,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},k_r=0,gr=class extends tt.Serializable{constructor(r={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=k_r++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=r.name;if(!n){let o=this.getClassName();n=$p(o)+"_"+E2(o)}if(this.name=n,this.trainable_=r.trainable==null?!0:r.trainable,r.inputShape!=null||r.batchInputShape!=null){let o;if(r.batchInputShape!=null)o=r.batchInputShape;else if(r.inputShape!=null){let s=null;r.batchSize!=null&&(s=r.batchSize),o=[s].concat(r.inputShape)}this.batchInputShape=o;let i=r.dtype;i==null&&(i=r.inputDType),i==null&&(i="float32"),this.dtype=i}r.weights!=null?this.initialWeights=r.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(r,n){return r.name+"_ib-"+n.toString()}getNodeAtIndex(r,n){if(this.inboundNodes.length===0)throw new Nu(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=r)throw new Ie(`Asked to get ${n} at node ${r}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[r]}getInputAt(r){return na(this.getNodeAtIndex(r,"input").inputTensors)}getOutputAt(r){return na(this.getNodeAtIndex(r,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Fd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Fd(`Layer ${this.name} is not connected, no input to return.`);return na(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Fd(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Fd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return na(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(r=>r())}get updates(){return this._updates}get built(){return this._built}set built(r){this._built=r}get trainable(){return this.trainable_}set trainable(r){this._trainableWeights.forEach(n=>n.trainable=r),this.trainable_=r}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(r=>r.trainable):[]}set trainableWeights(r){this._trainableWeights=r}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(r=>!r.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(r){this._nonTrainableWeights=r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(r){let n=Fn(r);if(this.inputSpec==null||this.inputSpec.length===0)return;let o=Fn(this.inputSpec);if(n.length!==o.length)throw new Ie(`Layer ${this.name} expects ${o.length} inputs, but it received ${n.length} input tensors. Input received: ${r}`);for(let i=0;i<n.length;i++){let s=n[i],a=o[i];if(a==null)continue;let l=s.rank;if(a.ndim!=null&&l!==a.ndim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${l}`);if(a.maxNDim!=null&&l>a.maxNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${l}`);if(a.minNDim!=null&&l<a.minNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${l}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new Ie(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){let u=s.shape;for(let c in a.axes){let f=Number(c),d=a.axes[c],p=f>=0?u[f]:u[u.length+f];if(d!=null&&[d,null].indexOf(p)===-1)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${d} but got shape ${u}.`)}}if(a.shape!=null)for(let u=0;u<a.shape.length;++u){let c=a.shape[u],f=s.shape[u];if(c!=null&&f!=null&&c!==f)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(r,n){return r}invokeCallHook(r,n){this._callHook!=null&&this._callHook(r,n)}setCallHook(r){this._callHook=r}clearCallHook(){this._callHook=null}apply(r,n){n=n||{},this.assertNotDisposed();let o=Fn(r),i=N_r(r),s=F_r(r);if(i===s)throw new Ie("Arguments to apply() must be all SymbolicTensors or all Tensors");return Uh(this.name,()=>{if(!this.built){this.assertInputCompatibility(r);let a=[];for(let l of Fn(r))a.push(l.shape);this.build(na(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(r),s){let a=this.call(r,n);this.supportsMasking&&this.setMaskMetadata(r,a);let l=Fn(a),u=[];for(let c of l)o.indexOf(c)!==-1&&(c=c.clone()),u.push(c);if(a=na(u),this.activityRegularizer!=null)throw new xr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{let a=I_r(r),l=this.computeOutputShape(a),u,c=D_r(r);if(this.warnOnIncompatibleInputShape(Array.isArray(r)?a[0]:a),l!=null&&l.length>0&&Array.isArray(l[0])?u=l.map((f,d)=>new Gl(c,f,this,Fn(r),n,this.name,d)):u=new Gl(c,l,this,Fn(r),n,this.name),this.addInboundNode(r,u,null,null,a,l,n),this._refCount++,this.activityRegularizer!=null)throw new xr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(r){if(this.batchInputShape!=null)if(r.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(r)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((o,i)=>{o!=null&&r[i]!=null&&r[i]!==o&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(r)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Fd(`The layer ${this.name} has never been called and thus has no defined output shape.`);let r=[];for(let n of this.inboundNodes){let o=JSON.stringify(n.outputShapes);r.indexOf(o)===-1&&r.push(o)}if(r.length===1){let n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Fd(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Nu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return nM(this.weights)}build(r){this.built=!0}getWeights(r=!1){return s6(r?this.trainableWeights:this.weights)}setWeights(r){Pe(()=>{let n=this.weights;if(n.length!==r.length)throw new Ie(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${r.length}, but the layer was expecting ${n.length} weights. Provided weights: ${r}...`);if(n.length===0)return;let o=[],i=s6(n);for(let s=0;s<i.length;++s){let a=i[s],l=n[s],u=r[s];if(!H.arraysEqual(a.shape,u.shape))throw new Ie(`Layer weight shape ${a.shape} not compatible with provided weight shape ${u.shape}`);o.push([l,u])}oM(o)})}addWeight(r,n,o,i,s,a,l,u){if(this._addedWeightNames.indexOf(r)!==-1)throw new Ie(`Duplicate weight name ${r} for layer ${this.name}`);this._addedWeightNames.push(r),o==null&&(o="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():to("zeros"));let c=i.apply(n,o),f=new i6(c,o,r,a,l);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(f.read())),a==null&&(a=!0),a?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(r){this.fastWeightInitDuringBuild=r}addLoss(r){r==null||Array.isArray(r)&&r.length===0||(r=Fn(r),this._losses!==void 0&&this._losses!==null&&this.losses.push(...r))}computeOutputShape(r){return r}computeMask(r,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(o=>{if(o!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(r,n,o){if(!this.supportsMasking)return;let i=this.computeMask(r,o),s=Fn(n),a=Fn(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let l=0;l<s.length;l++)s[l].kerasMask=a[l]}addInboundNode(r,n,o,i,s,a,l=null){let u=Fn(r);n=Fn(n),o=Fn(o),i=Fn(i),s=rM(s),a=rM(a);let c=[],f=[],d=[];for(let p of u)c.push(p.sourceLayer),f.push(p.nodeIndex),d.push(p.tensorIndex);new Vv({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:d,inputTensors:u,outputTensors:n,inputMasks:o,outputMasks:i,inputShapes:s,outputShapes:a},l);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){let r={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(r.batchInputShape=this.batchInputShape),this.dtype!=null&&(r.dtype=this.dtype),r}disposeWeights(){return this.weights.forEach(r=>r.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let r=0;return--this._refCount===0&&(r=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:r}}};function I_r(t){t=Fn(t);let r=[];for(let n of t)r.push(n.shape);return na(r)}function D_r(t){return"float32"}function F2e(t,r,n){if((r==null||n!=null&&n>0)&&(r=t.sourceLayer,n=t.nodeIndex),r.inboundNodes.length===0)return[t];{let o=r.inboundNodes[n];if(o.inboundLayers.length===0)return o.inputTensors;{let i=[];for(let s=0;s<o.inboundLayers.length;s++){let a=o.inputTensors[s],l=o.inboundLayers[s],u=o.nodeIndices[s],c=F2e(a,l,u);for(let f of c)i.indexOf(f)===-1&&i.push(f)}return i}}}function N_r(t){let r=!0;for(let n of Fn(t))if(!(n instanceof Gl)){r=!1;break}return r}function F_r(t){let r=!0;for(let n of Fn(t))if(n instanceof Gl){r=!1;break}return r}var A2=(()=>{class t extends gr{constructor(n){if(super({dtype:n.dtype,name:n.name!=null?n.name:E2("input").toString()}),n.batchSize==null&&(n.batchSize=null),n.sparse==null&&(n.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=n.sparse,n.inputShape!=null&&n.batchInputShape!=null)throw new Ie("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let o=n.batchInputShape;if(o==null){if(n.inputShape==null)throw new Ie("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");o=[n.batchSize].concat(n.inputShape)}else if(n.batchSize!=null)throw new Ie("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let i=n.dtype||"float32";this.batchInputShape=o,this.dtype=i,this.inputSpec=[{shape:o}];let s=new Gl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Vv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[o],outputShapes:[o]})}apply(n,o){throw new Ie(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();tt.registerClass(A2);function nJ(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Ie("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let r=t.batchShape;t.shape!=null&&r==null&&(r=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new A2({batchInputShape:r,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function O_r(t,r){if(t.dtype==null||t.dtype===r.dtype)return r;try{return rt(r,t.dtype)}catch{throw new Ie(`The dtype of the feed (${r.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var Xy=class t{constructor(r){if(this.id2Value={},this.id2Mask={},this.name2Id={},r instanceof t)for(let n in r.id2Value)this.id2Value[n]=r.id2Value[n],n in r.id2Mask&&(this.id2Mask[n]=r.id2Mask[n]);else{if(r==null)return;for(let n of r)this.add(n.key,n.value)}}add(r,n,o){if(this.id2Value[r.id]==null)this.id2Value[r.id]=O_r(r,n),this.name2Id[r.name]=r.id,o!=null&&(this.id2Mask[r.id]=o);else throw new Ie(`Duplicate key: name=${r.name}, id=${r.id}`);return this}addFeed(r){this.add(r.key,r.value)}hasKey(r){return this.id2Value[r.id]!=null}names(){return Object.keys(this.name2Id)}getValue(r){if(r instanceof Gl){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Value[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Value[n]}}getMask(r){if(r instanceof Gl){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Mask[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Cr(this.id2Mask)}},oJ=new t6,iJ=new t6;function Bht(t){oJ?.setMaxEntries(t),iJ?.setMaxEntries(t)}function PA(t,r,n,o){let i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],l=a.map(h=>h.name),u=[],c=r.names();for(let h of l)c.indexOf(h)!==-1?u.push(r.getValue(h)):u.push(null);o!=null&&(o.maxNumTensors=-1/0,o.minNumTensors=1/0);let f=l.join(",")+"|"+r.names().sort().join(","),d=oJ.get(f),p;if(d==null){let h=M_r(a,r);d=h.sorted,p=h.recipientCounts,oJ.put(f,d),iJ.put(f,p)}p={},i||Object.assign(p,iJ.get(f));let m=new Xy(r);for(let h=0;h<d.length;++h){if(o!=null){let A=Wk().numTensors;A>o.maxNumTensors&&(o.maxNumTensors=A),A<o.minNumTensors&&(o.minNumTensors=A)}let g=d[h],y=g.sourceLayer;if(y instanceof A2)continue;let b=[],x=[],v=[],w=!1;for(let A of g.inputs){let N=m.getValue(A),k=m.getMask(A);b.push(N),x.push(k),k!=null&&(w=!0),i||(p[A.name]--,p[A.name]===0&&!r.hasKey(A)&&l.indexOf(A.name)===-1&&!N.isDisposed&&A.sourceLayer.stateful!==!0&&v.push(N))}w&&(n=n||{},n.mask=x[0]);let _=Fn(y.apply(b,n)),C=null;y.supportsMasking&&(C=y.computeMask(b,x));let S=j_r(g),E=Array.isArray(S)?S:[S];for(let A=0;A<E.length;++A){m.hasKey(E[A])||m.add(E[A],_[A],Array.isArray(C)?C[0]:C);let N=l.indexOf(E[A].name);N!==-1&&(u[N]=_[A])}i||Cr(v)}return m.disposeMasks(),s?u:u[0]}function M_r(t,r){H.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],o={};if(t.length===1){let i=Lht(t[0],r);n=i.sorted,o=i.recipientMap}else{let i=new Set;for(let s of t){let{sorted:a,recipientMap:l}=Lht(s,r);for(let u of a)i.has(u.name)||(n.push(u),i.add(u.name));for(let u in l)o[u]==null&&(o[u]=new Set),l[u].forEach(c=>o[u].add(c))}}return{sorted:n,recipientCounts:R_r(o)}}function R_r(t){let r={};for(let n in t)r[n]=t[n].size;return r}function Lht(t,r){let n=new Set,o=[],i={};for(let l of r.names())n.add(l);let s=[],a=[];for(s.push(t);s.length>0;){let l=s[s.length-1];if(n.has(l.name)){s.pop();continue}let u=a[a.length-1]===s.length-1;if(l.inputs.length===0||u)s.pop(),o.push(l),n.add(l.name),u&&a.pop();else{a.push(s.length-1);for(let c of l.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(l.name),!n.has(c.name)&&s.push(c)}}return{sorted:o,recipientMap:i}}function j_r(t){let r;if(t.sourceLayer.inboundNodes.length===1)r=t.sourceLayer.output;else{let n=null;for(let o=0;o<t.sourceLayer.inboundNodes.length;++o)for(let i of t.sourceLayer.inboundNodes[o].outputTensors)if(i.id===t.id){n=o;break}r=t.sourceLayer.getOutputAt(n)}return r}var P_r=Fe();P_r.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Bht);re();re();re();function O2e(t,r){return Pe(()=>Xn(kt(we(t,t),r,!0)))}var LA=class extends tt.Serializable{getConfig(){return{}}},Uht=(()=>{class t extends LA{constructor(n){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>{let o=O2e(n,this.axis),i=zs(o,0,this.maxValue);return we(n,Ct(i,Ke(os(),o)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();tt.registerClass(Uht);var Vht=(()=>{class t extends LA{constructor(n){super(),this.defaultAxis=0,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>Ct(n,Ke(os(),O2e(n,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();tt.registerClass(Vht);var Ght=(()=>{class t extends LA{apply(n){return ba(n)}}return t.className="NonNeg",t})();tt.registerClass(Ght);var Wht=(()=>{class t extends LA{constructor(n){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=n.minValue!=null?n.minValue:this.defaultMinValue,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.rate=n.rate!=null?n.rate:this.defaultRate,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>{let o=O2e(n,this.axis),i=Ke(we(this.rate,zs(o,this.minValue,this.maxValue)),we(1-this.rate,o));return we(n,Ct(i,Ke(os(),o)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();tt.registerClass(Wht);var $ht={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ui(t){return QO(t)}function zht(t,r={}){return Hy(t,tt.SerializationMap.getMap().classNameMap,r,"constraint")}function ci(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in $ht?$ht[t]:t,config:{}};return zht(n)}else return t instanceof LA?t:zht(t)}var y6={};cn(y6,{Layer:()=>gr,RNN:()=>Ky,RNNCell:()=>qv,activation:()=>xSr,add:()=>kSr,alphaDropout:()=>fCr,average:()=>ISr,averagePooling1d:()=>ZSe,averagePooling2d:()=>QSe,averagePooling3d:()=>JSe,avgPool1d:()=>LSr,avgPool2d:()=>$Sr,avgPool3d:()=>USr,avgPooling1d:()=>BSr,avgPooling2d:()=>zSr,avgPooling3d:()=>VSr,batchNormalization:()=>RSr,bidirectional:()=>nCr,categoryEncoding:()=>gCr,centerCrop:()=>mCr,concatenate:()=>DSr,conv1d:()=>cSr,conv2d:()=>fSr,conv2dTranspose:()=>dSr,conv3d:()=>pSr,conv3dTranspose:()=>mSr,convLstm2d:()=>JSr,convLstm2dCell:()=>eCr,cropping2D:()=>gSr,dense:()=>vSr,depthwiseConv2d:()=>bSr,dot:()=>MSr,dropout:()=>wSr,elu:()=>oSr,embedding:()=>ASr,flatten:()=>SSr,gaussianDropout:()=>cCr,gaussianNoise:()=>uCr,globalAveragePooling1d:()=>GSr,globalAveragePooling2d:()=>WSr,globalMaxPool1d:()=>iCr,globalMaxPool2d:()=>sCr,globalMaxPooling1d:()=>xgt,globalMaxPooling2d:()=>vgt,gru:()=>HSr,gruCell:()=>YSr,input:()=>V2e,inputLayer:()=>nSr,layerNormalization:()=>jSr,leakyReLU:()=>sSr,lstm:()=>XSr,lstmCell:()=>KSr,masking:()=>dCr,maxPool1d:()=>aCr,maxPool2d:()=>lCr,maxPooling1d:()=>wgt,maxPooling2d:()=>_gt,maxPooling3d:()=>qSr,maximum:()=>NSr,minimum:()=>FSr,multiply:()=>OSr,permute:()=>TSr,prelu:()=>aSr,randomWidth:()=>yCr,reLU:()=>iSr,repeatVector:()=>CSr,rescaling:()=>pCr,reshape:()=>ESr,resizing:()=>hCr,rnn:()=>tCr,separableConv2d:()=>hSr,simpleRNN:()=>ZSr,simpleRNNCell:()=>QSr,softmax:()=>lSr,spatialDropout1d:()=>_Sr,stackedRNNCells:()=>rCr,thresholdedReLU:()=>uSr,timeDistributed:()=>oCr,upSampling2d:()=>ySr,zeroPadding2d:()=>PSr});re();re();function Gv(t){return Be(this,null,function*(){if(t==null)return;let r=[],n=[],o=[];for(let i in t){let s=t[i];if(typeof s!="number"){let a=s;r.push(a.data()),n.push(i),o.push(a)}}if(r.length>0){let i=yield Promise.all(r);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Cr(o)}})}function sJ(t){if(t!=null)for(let r in t){let n=t[r];typeof n!="number"&&n.dispose()}}var $_r=125,k2=class{constructor(){this.validationData=null}setParams(r){this.params=r}onEpochBegin(r,n){return Be(this,null,function*(){})}onEpochEnd(r,n){return Be(this,null,function*(){})}onBatchBegin(r,n){return Be(this,null,function*(){})}onBatchEnd(r,n){return Be(this,null,function*(){})}onTrainBegin(r){return Be(this,null,function*(){})}onTrainEnd(r){return Be(this,null,function*(){})}setModel(r){}},aJ=class{constructor(r,n=10){r==null&&(r=[]),this.callbacks=r,this.queueLength=n}append(r){this.callbacks.push(r)}setParams(r){for(let n of this.callbacks)n.setParams(r)}setModel(r){for(let n of this.callbacks)n.setModel(r)}onEpochBegin(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochBegin(r,n)})}onEpochEnd(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochEnd(r,n)})}onBatchBegin(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchBegin(r,n)})}onBatchEnd(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchEnd(r,n)})}onTrainBegin(r){return Be(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainBegin(r)})}onTrainEnd(r){return Be(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainEnd(r)})}},M2e=class extends k2{constructor(){super()}onEpochBegin(r){return Be(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(r,n){return Be(this,null,function*(){n==null&&(n={});let o=n.size==null?0:n.size;this.seen+=o;for(let i in n){let s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*o;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;let l=Pe(()=>Ke(this.totals[i],we(s,o)));this.totals[i]=l,a?.dispose()}}})}onEpochEnd(r,n){return Be(this,null,function*(){if(n!=null)for(let o of this.params.metrics)this.totals[o]!=null&&(typeof this.totals[o]=="number"?n[o]=this.totals[o]/this.seen:Pe(()=>{let i=we(Ct(1,this.seen),this.totals[o]);n[o]=i,this.totals[o].dispose(),_s(n[o])}))})}},lJ=class extends k2{onTrainBegin(r){return Be(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(r,n){return Be(this,null,function*(){n==null&&(n={}),this.epoch.push(r);for(let o in n)this.history[o]==null&&(this.history[o]=[]),this.history[o].push(n[o])})}syncData(){return Be(this,null,function*(){let r=[],n=[],o=[];for(let s in this.history){let a=this.history[s];for(let l=0;l<a.length;++l)if(typeof a[l]!="number"){let u=a[l];r.push(u.data()),n.push(s),o.push(l)}}let i=yield Promise.all(r);for(let s=0;s<i.length;++s)this.history[n[s]][o[s]].dispose(),this.history[n[s]][o[s]]=i[s][0]})}},uJ=class extends k2{constructor(r,n){if(super(),this.currentEpoch=0,this.nowFunc=r.nowFunc,this.nextFrameFunc=r.nextFrameFunc||jI,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=$_r),this.yieldEvery==="never"&&r.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");H.isNumber(this.yieldEvery)&&(this.maybeWait=uht(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=r.onTrainBegin,this.trainEnd=r.onTrainEnd,this.epochBegin=r.onEpochBegin,this.epochEnd=r.onEpochEnd,this.batchBegin=r.onBatchBegin,this.batchEnd=r.onBatchEnd,this.yield=r.onYield}maybeWait(r,n,o){return Be(this,null,function*(){let i=[];this.yield!=null&&(yield Gv(o),i.push(this.yield(r,n,o))),i.push(this.nextFrameFunc()),yield Promise.all(i)})}onEpochBegin(r,n){return Be(this,null,function*(){this.currentEpoch=r,this.epochBegin!=null&&(yield Gv(n),yield this.epochBegin(r,n))})}onEpochEnd(r,n){return Be(this,null,function*(){let o=[];this.epochEnd!=null&&(yield Gv(n),o.push(this.epochEnd(r,n))),this.yieldEvery==="epoch"&&o.push(this.nextFrameFunc()),yield Promise.all(o)})}onBatchBegin(r,n){return Be(this,null,function*(){this.batchBegin!=null&&(yield Gv(n),yield this.batchBegin(r,n))})}onBatchEnd(r,n){return Be(this,null,function*(){let o=[];this.batchEnd!=null&&(yield Gv(n),o.push(this.batchEnd(r,n))),this.yieldEvery==="batch"?o.push(this.nextFrameFunc()):H.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,r,n)),yield Promise.all(o)})}onTrainBegin(r){return Be(this,null,function*(){this.trainBegin!=null&&(yield Gv(r),yield this.trainBegin(r))})}onTrainEnd(r){return Be(this,null,function*(){this.trainEnd!=null&&(yield Gv(r),yield this.trainEnd(r))})}};function cJ(t,r){return t==null&&(t={}),t instanceof k2?[t]:Array.isArray(t)&&t[0]instanceof k2?t:Fn(t).map(o=>new uJ(o,r))}var qht=(()=>{class t{constructor(){}static registerCallbackConstructor(n,o){H.assert(n>=0&&Number.isInteger(n),()=>`Verbosity level is expected to be an integer >= 0, but got ${n}`),t.checkForDuplicate(o),t.constructors[n]==null&&(t.constructors[n]=[]),t.constructors[n].push(o)}static checkForDuplicate(n){for(let o in t.constructors)t.constructors[+o].forEach(s=>{if(s===n)throw new Ie("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(n){let o=[];for(let i in t.constructors){let s=+i;n>=s&&o.push(...t.constructors[s])}return o.map(i=>new i)}}return t.constructors={},t})();function fJ(t,r,n,o,i,s,a,l,u){let c=new lJ,f=[new M2e,...qht.createCallbacks(r)];t!=null&&f.push(...t),f.push(c);let d=new aJ(f);return d.setParams({epochs:n,initialEpoch:o,samples:i,steps:s,batchSize:a,verbose:r,doValidation:l,metrics:u}),{callbackList:d,history:c}}re();re();re();function Df(t,r={},n=!1){return Hy(t,tt.SerializationMap.getMap().classNameMap,r,"layer",n)}re();re();function a6(t,r){return Pe(()=>{t.dtype!=="float32"&&(t=rt(t,"float32"));let n=kt(jA(t),r,!0),o=qd(n.shape,os()),i=Xn(Wu(n,o));return Ct(t,i)})}function BA(t,r){return Pe(()=>yo(jA(wt(r,t)),-1))}function u6(t,r){return Pe(()=>yo(To(wt(r,t)),-1))}function c6(t,r){return Pe(()=>{let n=wt(t,r),o=zs(To(t),os(),Number.MAX_VALUE),i=To(Ct(n,o));return we(100,yo(i,-1))})}function z_r(t,r){return Pe(()=>{let n=zs(r,os(),Number.MAX_VALUE),o=Vs(Ke(1,n)),i=zs(t,os(),Number.MAX_VALUE),s=Vs(Ke(1,i));return yo(jA(wt(o,s)),-1)})}function U_r(t,r){return Pe(()=>{let n=Wu(0,wt(1,we(t,r)));return yo(jA(n),-1)})}function V_r(t,r){return Pe(()=>{let n=Wu(0,wt(1,we(t,r)));return yo(n,-1)})}function G_r(t,r){return Pe(()=>{let n=kt(we(t,r),-1),o=Us(we(wt(1,t),r),-1);return Wu(0,Ke(1,wt(o,n)))})}function W_r(t,r){return Pe(()=>{let n=Math.log(2),o=wt(r,t),i=wt(Ke(o,bm(we(-2,o))),n);return yo(i,-1)})}function $A(t,r,n=!1){return Pe(()=>{if(n)r=X1(r);else{let o=kt(r,r.shape.length-1,!0);r=Ct(r,o)}return r=zs(r,os(),1-os()),Xr(kt(we(rt(t,"float32"),Vs(r)),r.shape.length-1))})}function iM(t,r,n=!1){return Pe(()=>{let o=rt(d0(vht(t)),"int32");r=zs(r,os(),1-os());let i=r.shape,s=Se(h0(o,i[i.length-1]),i);return $A(s,r,n)})}function q_r(t,r){if(!H.arraysEqual(t.shape,r.shape))throw new Ie(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(r.shape)}`);return Pe(()=>{let n=ba(r),o=Xr(To(r));return Ke(wt(n,we(r,t)),U1(yi(o)))})}function sM(t,r){return Pe(()=>{let n;return n=zs(r,os(),1-os()),n=Vs(Ct(n,wt(1,n))),yo(q_r(t,n),-1)})}function H_r(t,r){return Pe(()=>{let n=zs(t,os(),1),o=zs(r,os(),1);return kt(we(t,Vs(Ct(n,o))),-1)})}function Y_r(t,r){return Pe(()=>{let n=Vs(Ke(os(),r));return yo(wt(r,we(t,n)),-1)})}function dJ(t,r){return Pe(()=>{let n=a6(t,-1),o=a6(r,-1),i=we(n,o);return Xr(kt(i,-1))})}var l6={meanSquaredError:BA,meanAbsoluteError:u6,meanAbsolutePercentageError:c6,meanSquaredLogarithmicError:z_r,squaredHinge:U_r,hinge:V_r,categoricalHinge:G_r,logcosh:W_r,categoricalCrossentropy:$A,sparseCategoricalCrossentropy:iM,binaryCrossentropy:sM,kullbackLeiblerDivergence:H_r,poisson:Y_r,cosineProximity:dJ};function pJ(t){if(typeof t=="string"){if(t in l6)return l6[t];let r=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ie(r)}else return t}re();re();function hJ(t,r){return Pe(()=>{let n=we(.5,Cs(r)),o=Vl(ni(r,n),t.dtype);return yo(Sl(t,o),-1)})}function gJ(t,r){return Pe(()=>Vl(Sl(Wd(t,-1),Wd(r,-1)),"float32"))}function X_r(t,r){return Pe(()=>rt(kt(za(Sl(t,1),Sl(r,1))),"float32"))}function K_r(t,r){return Pe(()=>rt(kt(za(Sl(t,0),Sl(r,1))),"float32"))}function Yht(t,r){return Pe(()=>{let n=X_r(t,r),o=K_r(t,r),i=Ke(n,o);return rt(go(ni(i,0),Ct(n,i),0),"float32")})}function R2e(t,r){return sM(t,r)}function j2e(t,r){return t.rank===r.rank&&(t=Rc(t,[t.rank-1])),r=Wd(r,-1),r.dtype!==t.dtype&&(r=rt(r,t.dtype)),rt(Sl(t,r),"float32")}var Z_r=BA,Q_r=BA,J_r=u6,e2r=u6,t2r=c6,r2r=c6,yJ=$A,n2r=dJ,P2e=iM,mJ={binaryAccuracy:hJ,categoricalAccuracy:gJ,precision:Yht,categoricalCrossentropy:yJ,sparseCategoricalCrossentropy:P2e,mse:Z_r,MSE:Q_r,mae:J_r,MAE:e2r,mape:t2r,MAPE:r2r,cosine:n2r};function Xht(t){if(typeof t=="string"&&t in mJ)return mJ[t];if(typeof t!="string"&&t!=null)return t;throw new Ie(`Unknown metric ${t}`)}function f6(t){if(Od(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let r;for(let n of Object.keys(l6))if(l6[n]===t){r=n;break}if(r!==void 0)return r;for(let n of Object.keys(mJ))if(mJ[n]===t){r=n;break}return r!==void 0?r:t.name}}re();function Zht(t){let r={Adagrad:()=>Kd.adagrad(.01),Adadelta:()=>Kd.adadelta(1,.95,os()),Adam:()=>Kd.adam(.001,.9,.999,os()),Adamax:()=>Kd.adamax(.002,.9,.999,os(),0),RMSProp:()=>Kd.rmsprop(.001,.9,0,os()),SGD:()=>Kd.sgd(.01)};if(r.adagrad=r.Adagrad,r.adadelta=r.Adadelta,r.adam=r.Adam,r.adamax=r.Adamax,r.rmsprop=r.RMSProp,r.sgd=r.SGD,t in r)return r[t]();throw new Ie(`Unknown Optimizer ${t}`)}function B2e(t,r,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!L2e(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let o=JSON.stringify(t);o.length>1048576&&console.warn(`User-defined metadata of model "${r}" is too large in size (length=${o.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function L2e(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let r=Object.keys(t);for(let n of r)if(typeof n!="string"||!L2e(t[n]))return!1;return!0}else if(Array.isArray(t)){for(let r of t)if(!L2e(r))return!1;return!0}else return!1;else{let r=typeof t;return r==="string"||r==="number"||r==="boolean"}}function Qht(t,r,n,o=console.log){let i=s2r(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(r=r||90,n=n||[.32,.61,.89,1]):(r=r||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(r*f)));let a;if(!i){s.push("Receives inputs"),a=[];for(let f in t.nodesByDepth)a.push(...t.nodesByDepth[f])}o("_".repeat(r)),bJ(s,n,o),o("=".repeat(r));let l=t.layers;for(let f=0;f<l.length;++f)i?a2r(l[f],n,o):l2r(l[f],n,a,o),o((f===l.length-1?"=":"_").repeat(r));t.checkTrainableWeightsConsistency();let u=i2r(t),c=nM(t.nonTrainableWeights);o(`Total params: ${u+c}`),o(`Trainable params: ${u}`),o(`Non-trainable params: ${c}`),o("_".repeat(r))}function i2r(t){let r;return t.collectedTrainableWeights!=null?r=nM(t.collectedTrainableWeights):r=nM(t.trainableWeights),r}function s2r(t){let r=!0,n=[],o=[];for(let i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(let i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){r=!1;break}o.push(...i)}if(r)for(let i of t.layers){let s=!1;for(let a of i.inboundNodes)if(o.indexOf(a)!==-1)if(s){r=!1;break}else s=!0;if(!r)break}return r}function bJ(t,r,n=console.log){let o="";for(let i=0;i<t.length;++i)i>0&&(o=o.slice(0,o.length-1)+" "),o+=t[i],o=o.slice(0,r[i]),o+=" ".repeat(r[i]-o.length);n(o)}function a2r(t,r,n){let o,i;try{i=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=t.name,a=t.getClassName(),l=[`${s} (${a})`,i,o,t.countParams().toString()];bJ(l,r,n)}function l2r(t,r,n,o){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}let a=[];for(let d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let m=d.inboundLayers[p].name,h=d.nodeIndices[p],g=d.tensorIndices[p];a.push(`${m}[${h}][${g}]`)}let l=t.name,u=t.getClassName(),c=a.length===0?"":a[0],f=[`${l} (${u})`,s,i,t.countParams().toString(),c];bJ(f,r,o);for(let d=1;d<a.length;++d)bJ(["","","","",a[d]],r,o)}function Jht(t,r,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&r===0&&typeof n=="string"}function d6(t,r){if(t===null)return null;if(typeof t=="string")return $v(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];Jht(r,i,s)?n.push(s):n.push(d6(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o];if(o==="name"&&typeof i=="string")n[o]=i;else{let s=$v(o);n[s]=d6(i,s)}}return n}}function xJ(t,r){if(t==null)return null;if(typeof t=="string")return $p(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];Jht(r,i,s)?n.push(s):n.push(xJ(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o],s=$p(o);(o==="name"||o==="className")&&typeof i=="string"?n[s]=i:n[s]=xJ(i,o)}return n}}var aM="4.19.0";re();var u2r=t=>{let r=Object.keys(t);if(r.length===0)return!1;let n=r[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},vJ=class t extends gr{constructor(r){if(super({}),this.containerNodes=new Set,this.name=r.name,this.name==null){let x=this.getClassName().toLowerCase();this.name=E2(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(r.inputs)?this.inputs=r.inputs.slice():this.inputs=[r.inputs],Array.isArray(r.outputs)?this.outputs=r.outputs.slice():this.outputs=[r.outputs],zp(this.inputs).length!==this.inputs.length)throw new Ie(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);zp(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let x of this.outputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(_)}for(let x of this.inputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;Od(w===0,"input layer has >1 nodes"),Od(_===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){let v=this.inputLayers[x];if(!(v instanceof A2))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${r.inputs}. Input ${x} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(let x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);let n={},o={},i={},s={},a={},l=[],u=(x,v,w,_,C,S)=>{(_==null||C==null||S==null)&&(_=x.sourceLayer,C=x.nodeIndex,S=x.tensorIndex);let E=_.inboundNodes[C];if(w.indexOf(E)!==-1)throw new Nu(`The tensor ${x.name} at layer "${_.name}" is part of a cycle.`);if(v.indexOf(E)!==-1)return;this.containerNodes.add(t.nodeKey(_,C)),_.id in a||(a[_.id]=Object.keys(a).length),w.indexOf(E)===-1&&w.push(E);let A=E.inboundLayers.length;for(let N=0;N<A;N++){let k=E.inputTensors[N],M=E.inboundLayers[N],I=E.nodeIndices[N],L=E.tensorIndices[N];u(k,v,w,M,I,L)}for(v.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);l.push(E)},c=[],f=[];for(let x of this.outputs)u(x,c,f);let d=l.slice().reverse();for(let x of d){o[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id],w=i[x.outboundLayer.id]==null?0:i[x.outboundLayer.id];v=Math.max(v,w),i[x.outboundLayer.id]=v,s[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let _=0;_<x.inboundLayers.length;_++){let C=x.inboundLayers[_],S=x.nodeIndices[_],E=C.inboundNodes[S],A=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(v+1,A),o[E.id]=E}}let p={};for(let x in n){let v=n[x];v in p||(p[v]=[]),p[v].push(o[x])}let m={};for(let x in i){let v=i[x];v in m||(m[v]=[]),m[v].push(s[x])}let h=Object.keys(m).map(x=>parseInt(x,10)).sort(r6);this.layers=[];for(let x of h){let v=m[x];v.sort((w,_)=>{let C=a[w.id],S=a[_.id];return C<S?-1:C>S?1:0});for(let w of v)w instanceof t&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=m,h=Object.keys(p).map(x=>parseInt(x,10)).sort(r6);let g=this.inputs.slice(),y=[];for(let x of h)for(let v of p[x]){let w=v.outboundLayer;if(w!=null){for(let _ of v.inputTensors)if(g.indexOf(_)===-1)throw new Nu(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${w.name}". The following previous layers were accessed without issue: ${y}`);for(let _ of v.outputTensors)g.push(_);y.push(w.name)}}this.nodesByDepth=p;let b=this.layers.map(x=>x.name);for(let x of b){let v=b.filter(w=>w===x).length;if(v!==1)throw new Nu(`The name "${x}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new Vv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let r={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let n of this.layers)r.numDisposedVariables+=n.dispose().numDisposedVariables;for(let n of this.internalContainerRefs)r.numDisposedVariables+=n.dispose().numDisposedVariables}return r.refCountAfterDispose=this._refCount,r}get trainable(){return this.trainable_}set trainable(r){this.layers.forEach(n=>{n._trainableWeights.forEach(o=>o.trainable=r)}),this.trainable_=r}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ie("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let r=[];for(let n of this.layers)r=r.concat(n.trainableWeights);return r}get nonTrainableWeights(){let r=[];for(let n of this.layers)r.push(...n.nonTrainableWeights);if(!this.trainable){let n=[];for(let o of this.layers)n.push(...o.trainableWeights);return n.concat(r)}return r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(r,n=!0){let o={},i=0,s=u2r(r);s&&this.parseWeights(r);for(let l of this.layers)for(let[u,c]of l.weights.entries()){let f=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${u}`:c.originalName;if(o[f]!=null)throw new Ie(`Duplicate weight name: ${f}`);o[f]=c,i++}let a=[];for(let l in r){let u=l;if(o[l]==null){let c=l.split("/");u=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(o[u]!=null)a.push([o[u],r[l]]);else if(n)throw new Ie(`Provided weight data has no target variable: ${l}`);delete o[u]}if(n){let l=[];for(let u in o)l.push(u);if(l.length>0)throw new Ie(`${l.length} of ${i} weights are not set: ${l}`)}oM(a)}parseWeights(r){for(let n in Object.keys(r)){let o=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=o.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(r[s]=r[n],delete r[n])}}updatedConfig(){let r=this.getConfig(),n={};return n.className=this.getClassName(),n.config=r,n.kerasVersion=`tfjs-layers ${aM}`,n.backend="TensorFlow.js",n}toJSON(r,n=!0){let o=xJ(this.updatedConfig());return n?JSON.stringify(o):o}call(r,n){return Pe(()=>{r=Fn(r);let o=new Xy;for(let i=0;i<this.inputs.length;++i)o.add(this.inputs[i],r[i]);return PA(this.outputs,o,n)})}computeMask(r,n){return Pe(()=>{r=Fn(r);let o;return n==null?o=Bp(null,r.length):o=Fn(n),this.runInternalGraph(r,o)[1]})}computeOutputShape(r){let n=rM(r);if(n.length!==this.inputLayers.length)throw new Ie(`Invalid inputShape argument ${r}: model has ${this.inputLayers.length} tensor inputs.`);let o={};for(let l=0;l<n.length;l++){let u=this.inputLayers[l],c=n[l],f=u.name+"_0_0";o[f]=c}let i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(r6);if(i.length>1)for(let l of i){let u=this.nodesByDepth[l];for(let c of u){let f=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(f.id)!==-1)continue;let d=[];for(let g=0;g<c.inboundLayers.length;g++){let y=c.inboundLayers[g],b=c.nodeIndices[g],x=c.tensorIndices[g],v=`${y.name}_${b}_${x}`,w=o[v];d.push(w)}let p=f.computeOutputShape(na(d)),m=rM(p),h=f.inboundNodes.indexOf(c);for(let g=0;g<m.length;g++){let y=`${f.name}_${h}_${g}`;o[y]=m[g]}}}let s=[],a=[];for(let l=0;l<this.outputLayers.length;l++){let u=this.outputLayers[l],c=this.outputLayersNodeIndices[l],f=this.outputLayersTensorIndices[l],d=`${u.name}_${c}_${f}`;a.push(d)}for(let l=0;l<a.length;l++){let u=a[l];Od(u in o),s.push(o[u])}return na(s)}runInternalGraph(r,n){n==null&&(n=Bp(null,r.length));let o={};for(let u=0;u<this.inputs.length;++u){let c=this.inputs[u],f=r[u],d=n[u];o[c.id]=[f,d]}let i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(r6);for(let u of i){let c=this.nodesByDepth[u];for(let f of c){let d=f.outboundLayer,p=f.inputTensors,m=f.outputTensors,h=new Array;for(let g of p)g.id in o&&h.push(o[g.id]);if(h.length===p.length){let g={},y,b,x,v;if(f.callArgs!=null&&(g=f.callArgs),h.length===1){let[w,_]=h[0];g.mask==null&&(g.mask=_),x=Fn(d.call(w,g)),v=Fn(d.computeMask(w,_)),y=[w],b=[_]}else y=h.map(w=>w[0]),b=h.map(w=>w[1]),g.mask==null&&(g.mask=b),x=Fn(d.call(y,g)),v=Fn(d.computeMask(y,b));if(d.activityRegularizer)throw new xr("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<m.length;++w){let _=m[w],C=x[w],S=v[w];o[_.id]=[C,S]}}}}let s=[],a=[],l=[];for(let u of this.outputs){Od(u.id in o,`Could not compute output ${u.name} : ${u.id}`);let[c,f]=o[u.id];l.push(c.shape),s.push(c),a.push(f)}return[s,a,l]}buildNodeConversionMap(r){let n={},o;for(let i of this.layers){o=i instanceof t?1:0;for(let s=0;s<i.inboundNodes.length;s++){let a=t.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=o,o+=1)}}return n}getLayer(r,n){if(n!=null)return this.findLayer(n);if(r==null)throw new Ie("Provide either a layer name or layer index");if(typeof r=="number")return this.findLayer(r);for(let o of this.layers)if(o.name===r)return o;throw new Ie(`No such layer: ${r}`)}findLayer(r){if(this.layers.length<=r)throw new Ie(`Was asked to retrieve layer at index ${r}, but model only has ${this.layers.length} layer(s).`);return this.layers[r]}calculateLosses(){return Pe(()=>{let r=[];for(let n of this.layers)for(let o=0;o<n.inboundNodes.length;++o){let i=t.nodeKey(n,o);this.containerNodes.has(i)&&r.push(...n.calculateLosses())}return r})}getConfig(){let r={name:this.name},n=this.buildNodeConversionMap(this.layers),o=[];for(let a of this.layers){let l=a.getClassName(),u=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){let p=a.inboundNodes[d],m=t.nodeKey(a,d),h={};if(this.containerNodes.has(m)){if(p.callArgs)try{JSON.stringify(p.callArgs),h=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),h={}}if(p.inboundLayers.length>0){let g=[];for(let y=0;y<p.inboundLayers.length;y++){let b=p.inboundLayers[y],x=p.nodeIndices[y],v=p.tensorIndices[y],w=t.nodeKey(b,x),_=n[w];_==null&&(_=0),g.push([b.name,_,v,h])}c.push(g)}}}let f={};f.name=a.name,f.className=l,f.config=u,f.inboundNodes=c,o.push(f)}r.layers=o;let i=[];for(let a=0;a<this.inputLayers.length;a++){let l=this.inputLayers[a],u=this.inputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.inputLayersTensorIndices[a];i.push([l.name,f,d])}r.inputLayers=i;let s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.outputLayersTensorIndices[a];s.push([l.name,f,d])}return r.outputLayers=s,r}static fromConfig(r,n,o={},i=!1){let s={},a={};function l(y,b){y.name in a?a[y.name].push(b):a[y.name]=[b]}function u(y,b){let x=[],v;for(let w of b){let _=w[0],C=w[1],S=w[2];if(v=w[3]==null?{}:w[3],!(_ in s)){l(y,b);return}let E=s[_];if(E.inboundNodes.length<=C){l(y,b);return}let A=E.inboundNodes[C];x.push(A.outputTensors[S])}x.length>0&&y.apply(na(x),v)}function c(y){let b=y.name,x=Df(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(i),s[b]=x,y.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new Ie(`Corrupted configuration, expected array for nodeData: ${w}`);l(x,w)})}let f=n.name,d=n.layers;for(let y of d)c(y);for(;!aht(a);)for(let y of d){let b=s[y.name];if(b.name in a){let x=a[b.name];delete a[b.name];for(let v of x)u(b,v)}}let p=[],m=[],h=n.inputLayers;for(let y of h){let b=y[0],x=y[1],v=y[2];Od(b in s);let _=s[b].inboundNodes[x].outputTensors;p.push(_[v])}let g=n.outputLayers;for(let y of g){let b=y[0],x=y[1],v=y[2];Od(b in s);let _=s[b].inboundNodes[x].outputTensors;m.push(_[v])}return new r({inputs:p,outputs:m,name:f})}get stateful(){if(this._stateful)throw new Ie("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let r of this.layers)if(r.stateful)return!0;return!1}resetStates(){Pe(()=>{this.layers.forEach(r=>{r.stateful&&r.resetStates()})})}};re();re();re();function c2r(t,r,n){let o=r.length;if(t==null||Array.isArray(t)&&t.length===0)return r.map(i=>null);if(o===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&r[0]in t?[t[r[0]]]:[t];if(Array.isArray(t)){if(t.length!==o)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${o} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let i=[];return r.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${o}) outputs, so ${n} must be either an array with ${o} elements or an object with ${r} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function wJ(t,r){return c2r(t,r,"classWeight")}function _J(t,r,n,o){return Be(this,null,function*(){if(r!=null||o!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let i=Pe(()=>{if(t.shape.length===1)return zu(t);if(t.shape.length===2){if(t.shape[1]>1)return Wd(t,1);if(t.shape[1]===1)return Se(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(yield i.data());Cr(i);let a=[];return s.forEach(l=>{if(n[l]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${l} exists in the data but not in classWeight`);a.push(n[l])}),No(a,"float32")}else return null})}function egt(t,r){return we(t,r)}var f2r=32;function ngt(t,r){let n,o,i=r;n=i.xs,o=i.ys,H.assert(n!=null&&o!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${r}`);let s=tgt("input",t.inputNames,n),a=tgt("output",t.outputNames,o),l=s[0].shape[0];H.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),H.assert(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<s.length;u++)H.assert(s[u].shape[0]===l,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${s[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);for(let u=0;u<a.length;u++)H.assert(a[u].shape[0]===l,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${a[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function tgt(t,r,n){if(n instanceof Jr)return[n];if(Array.isArray(n))return H.assert(n.length===r.length,()=>`Received an array of ${n.length} Tensors, but expected ${r.length} to match the ${t} keys ${r}.`),n;{let o=[];for(let i of r){if(n[i]==null)throw new Ie(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);o.push(n[i])}return o}}function d2r(t){if(t.length===3)throw new xr("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function ogt(t,r,n){return Be(this,null,function*(){let o=n.batchesPerEpoch!=null;if(H.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),H.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),H.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),H.assert(!o||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),H.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let i=n.validationData!=null,s,a;if(i)if(rgt(n.validationData))H.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let y=d2r(n.validationData);s=y.xs,a=y.ys}let l=t.makeTrainFunction(),u=t.getDedupedMetricsNames(),c;i?c=u.slice().concat(u.map(y=>"val_"+y)):c=u.slice();let f=cJ(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:m}=fJ(f,d,n.epochs,null,null,p2r(r,n),null,i,c);p.setModel(t),t.history=m,yield p.onTrainBegin(),t.stopTraining_=!1;let h=n.initialEpoch==null?0:n.initialEpoch,g=yield r.iterator();for(;h<n.epochs;){let y={};yield p.onEpochBegin(h);let b=0,x=0;for(o||(g=yield r.iterator());!o||b<n.batchesPerEpoch;){let v=yield g.next();if(o&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){let{xs:w,ys:_}=ngt(t,v.value),C={};C.batch=x,C.size=w[0].shape[0],yield p.onBatchBegin(x,C);let S=[];if(n.classWeight!=null){let N=wJ(n.classWeight,t.outputNames);for(let k=0;k<N.length;++k)S.push(yield _J(_[k],null,N[k]))}let E=w.concat(_).concat(S),A=l(E);Cr(E);for(let N=0;N<u.length;++N){let k=u[N],M=A[N];C[k]=M,_s(M)}yield p.onBatchEnd(x,C),sJ(C),x++,b++}if(o?b>=n.batchesPerEpoch:v.done){if(i){let w;rgt(n.validationData)?w=Fn(yield t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=Fn(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?f2r:n.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)y[`val_${t.metricsNames[_]}`]=w[_]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(h,y),h++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function p2r(t,r){let n=null;return r.batchesPerEpoch!=null?n=r.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function rgt(t){return typeof t.iterator=="function"}function m2r(t){return typeof t.next=="function"}function igt(t,r,n){return Be(this,null,function*(){n=n||{};let o=n.batches!=null,i=t.testFunction,s=[];if(n.verbose>0)throw new xr("Verbose mode is not implemented yet.");H.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let a=m2r(r)?r:yield r.iterator(),l=0,u=0;for(;!o||u<n.batches;){let c=yield a.next();if(s=Pe(()=>{if(c.value){let{xs:f,ys:d}=ngt(t,c.value),p=f.concat(d),m=Pe(()=>i(p));if(Cr(p),u===0)for(let g=0;g<m.length;++g)s.push(Mt(0));let h=p[0].shape[0];for(let g=0;g<m.length;++g){let y=m[g],b=s[g];s[g]=Pe(()=>Ke(s[g],we(h,y))),u>0&&Cr(b)}Cr(m),l+=h,++u}return s}),c.done){o&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){let f=s[c];s[c]=Ct(s[c],l),Cr(f)}return na(s)})}re();re();function SJ(t){H.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function lM(t,r,n){return t==null?[null]:Array.isArray(t)?t.map(o=>zv(o,r,n-r)):zv(t,r,n-r)}function CJ(t,r){return Pe(()=>t==null?null:Array.isArray(t)?t.map(n=>CJ(n,r)):JQ(t,r.dtype==="int32"?r:rt(r,"int32")))}function EJ(t,r){let n=[],o=0,i=null;for(;o<t;)i=o+r,i>=t&&(i=t),n.push([o,i]),o=i;return n}function $2e(t){let r=[];t instanceof Jr&&(t=[t]);for(let n=0;n<t.length;++n){let o=t[n];if(o.rank===1)r.push(Uv(o,1));else{if(o.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");r.push(o)}}return r}function Gp(t,r){if(t==null)return;let n=[];if(r instanceof Jr)n.push(r.id);else if(Array.isArray(r))r.forEach(i=>n.push(i.id));else if(r!=null)for(let i in r){let s=r[i];n.push(s.id)}let o=[];if(t instanceof Jr)n.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&o.push(i)});else if(t!=null)for(let i in t){let s=t[i];n.indexOf(s.id)===-1&&o.push(s)}o.forEach(i=>{i.isDisposed||i.dispose()})}function h2r(t){return t instanceof Jr}function z2e(t){return Array.isArray(t)}function sgt(t){return!h2r(t)&&!z2e(t)}function agt(t,r,n,o=!0,i=""){if(r==null||r.length===0){if(t!=null){let a=!1;if(z2e(t)&&t.length>0)a=!0;else if(sgt(t)){for(let l in t)if(t.hasOwnProperty(l)){a=!0;break}}else a=!0;if(a)throw new Ie(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return r.map(a=>null);let s;if(sgt(t)){t=t,s=[];for(let a of r){if(t[a]==null)throw new Ie(`No data provided for "${a}". Need data for each key in: ${r}`);s.push(t[a])}}else if(z2e(t)){if(t=t,t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${r.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,r.length>1)throw new Ie(`The model ${i} expects ${r.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=$2e(s),n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s). but got array with shape ${l.shape}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f>=0&&c!==f)throw new Ie(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${l.shape[0]} examples, each with shape [${l.shape.slice(1,l.shape.length)}] (tensor shape [${l.shape}])`)}}return s}function g2r(t,r,n){let o=zp(t.map(s=>s.shape[0]));o.sort();let i=zp(r.map(s=>s.shape[0]));if(i.sort(),o.length>1)throw new Ie(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new Ie(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(r.map(s=>s.shape))}`);if(o.length>0&&i.length>0&&!H.arraysEqual(o,i))throw new Ie(`Input Tensors should have the same number of samples as target Tensors. Found ${o[0]} input sample(s) and ${i[0]} target sample(s).`)}function y2r(t,r,n){let o=[BA,sM,$A];for(let i=0;i<t.length;++i){let s=t[i],a=r[i],l=n[i];if(a!=null){if(a===$A&&s.shape[s.shape.length-1]===1)throw new Ie(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(o.indexOf(a)!==-1){let u=s.shape.slice(1),c=l.slice(1);for(let f=0;f<u.length;++f){let d=u[f],p=c[f];if(p!=null&&d!==p)throw new Ie(`A target Tensor with shape ${s.shape} was passed for an output of shape ${l}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function lgt(t,r,n,o=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${r.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(r.length>1)throw new Ie(`The model expects ${r.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(l.shape)}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f!==c)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(l.shape)}.`)}}}function b2r(t,r){if(t==null||Array.isArray(t)&&t.length===0)return r.map(o=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return r.map(o=>n);{let o=[];for(let i of r){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),o.push(s)}return o}}var x2r="layers-model",Wv=(()=>{class t extends vJ{constructor(n){super(n),this.isTraining=!1}summary(n,o,i=console.log){if(!this.built)throw new Ie("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Qht(this,n,o,i)}compile(n){if(n.loss==null&&(n.loss=[]),this.loss=n.loss,typeof n.optimizer=="string")this.optimizer_=Zht(n.optimizer),this.isOptimizerOwned=!0;else{if(!(n.optimizer instanceof xa))throw new Ie("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=n.optimizer,this.isOptimizerOwned=!1}let o=[];if(!Array.isArray(n.loss)&&typeof n.loss!="string"&&typeof n.loss!="function"){n.loss=n.loss;for(let l in n.loss)if(this.outputNames.indexOf(l)===-1)throw new Ie(`Unknown entry in loss dictionary: "${l}". Only expected the following keys: ${this.outputNames}`);for(let l of this.outputNames)n.loss[l]==null&&console.warn(`Output "${l}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${l} during training`),o.push(pJ(n.loss[l]))}else if(Array.isArray(n.loss)){if(n.loss.length!==this.outputs.length)throw new Ie(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${n.loss}.`);o=n.loss.map(u=>pJ(u))}else{let l=pJ(n.loss);this.outputs.forEach(u=>{o.push(l)})}this.lossFunctions=o,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let l=0;l<this.outputs.length;++l){let u=this.internalOutputShapes[l],c=this.outputNames[l];this.feedOutputNames.push(c),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[l])}let i=[];this.metrics=n.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Uh("loss",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=this.lossFunctions[l];this.outputs.length>1&&(this.metricsTensors.push([u,l]),this.metricsNames.push(this.outputNames[l]+"_loss"))}});let s=b2r(n.metrics,this.outputNames),a=(l,u,c)=>{this.outputNames.length>1&&(u=this.outputNames[l]+"_"+u),this.metricsNames.push(u),this.metricsTensors.push([c,l])};Uh("metric",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=s[l];(f=>{let d="",p,m,h;for(let g of f){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let b=this.internalOutputShapes[l];b[b.length-1]===1||this.lossFunctions[l]===sM?["accuracy","acc"].indexOf(g)!==-1?m=hJ:["crossentropy","ce"].indexOf(g)!==-1&&(m=R2e):this.lossFunctions[l]===iM?["accuracy","acc"].indexOf(g)!==-1?m=j2e:["crossentropy","ce"].indexOf(g)!==-1&&(m=P2e):["accuracy","acc"].indexOf(g)!==-1?m=gJ:["crossentropy","ce"].indexOf(g)!==-1&&(m=yJ);let x;["accuracy","acc"].indexOf(g)!==-1?x="acc":["crossentropy","ce"].indexOf(g)!==-1&&(x="ce"),h=m,p=d+x}else h=Xht(g),p=d+f6(g);let y;Uh(p,()=>{y=h}),a(l,p,y)}})(u)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(n,o,i={}){let s=i.batchSize==null?32:i.batchSize;SJ(s);let l=this.standardizeUserDataXY(n,o,!0,s);try{let u=l[0].concat(l[1]);this.makeTestFunction();let c=this.testFunction,f=this.testLoop(c,u,s,i.verbose,i.steps);return na(f)}finally{Gp(l[0],n),Gp(l[1],o)}}evaluateDataset(n,o){return Be(this,null,function*(){return this.makeTestFunction(),igt(this,n,o)})}checkNumSamples(n,o,i,s="steps"){let a;if(i!=null){if(a=null,o!=null)throw new Ie(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${o}`)}else if(n!=null)Array.isArray(n)?a=n[0].shape[0]:a=n.shape[0];else throw new Ie(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(n,o){if(Array.isArray(o)&&o.length===0)throw new Ie("`outputs` is an empty Array, which is not allowed.");let i=Array.isArray(o),s=i?o:[o],a=this.retrieveSymbolicTensors(s),l=new Xy;if(n instanceof Jr&&(n=[n]),Array.isArray(n)){if(n.length!==this.inputs.length)throw new Ie(`The number of inputs provided (${n.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)l.add(this.inputs[c],n[c])}else for(let c of this.inputs){let f=n[c.name];if(f==null)throw new Ie(`No value is provided for the model's input ${c.name}`);l.add(c,f)}let u=PA(a,l);return i?u:u[0]}retrieveSymbolicTensors(n){let o=Bp(null,n.length),i=n.length;for(let s of this.layers){let a=Array.isArray(s.output)?s.output:[s.output],l=a.map(u=>u.name);for(let u=0;u<n.length;++u){let c=l.indexOf(n[u]);if(c!==-1&&(o[u]=a[c],i--),i===0)break}if(i===0)break}if(i>0){let s=[];throw o.forEach((a,l)=>{a==null&&s.push(n[l])}),new Ie(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return o}predictLoop(n,o=32,i=!1){return Pe(()=>{let s=this.checkNumSamples(n);if(i)throw new xr("Verbose predictLoop() is not implemented yet.");let a=EJ(s,o),l=this.outputs.map(u=>[]);for(let u=0;u<a.length;++u)Pe(()=>{let f=a[u][0],d=a[u][1],p=lM(n,f,d),m=[];if(Array.isArray(p))for(let g=0;g<p.length;++g)m.push({key:this.inputs[g],value:p[g]});else m.push({key:this.inputs[0],value:p});let h=new Xy(m);return PA(this.outputs,h)}).forEach((f,d)=>l[d].push(f));return na(l.map(u=>Nn(u,0)))})}predict(n,o={}){let i=$2e(n);lgt(i,this.inputNames,this.feedInputShapes,!1);try{let s=o.batchSize==null?32:o.batchSize;return SJ(s),this.predictLoop(i,s)}finally{Gp(i,n)}}predictOnBatch(n){lgt(n,this.inputNames,this.feedInputShapes,!0);let o=(Array.isArray(n)?n[0]:n).shape[0];return this.predictLoop(n,o)}standardizeUserDataXY(n,o,i=!0,s){if(this.optimizer_==null)throw new Nu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let l=0;l<this.feedOutputShapes.length;++l){let u=this.feedOutputShapes[l];this.feedLossFns[l]===iM?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(n=agt(n,this.feedInputNames,this.feedInputShapes,!1,"input"),o=agt(o,this.feedOutputNames,a,!1,"target"),g2r(n,o,null),y2r(o,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&n[0].shape[0]%s!==0)throw new Ie(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${n[0].shape[0]} sample(s).`);return[n,o]}standardizeUserData(n,o,i,s,a=!0,l){return Be(this,null,function*(){let[u,c]=this.standardizeUserDataXY(n,o,a,l);if(i!=null)throw new Error("sample weight is not supported yet.");let f=null;if(s!=null){let d=wJ(s,this.outputNames);f=[];for(let p=0;p<d.length;++p)f.push(yield _J(c[p],null,d[p]))}return[u,c,f]})}testLoop(n,o,i,s=0,a){return Pe(()=>{let l=this.checkNumSamples(o,i,a,"steps"),u=[];if(s>0)throw new xr("Verbose mode is not implemented yet.");if(a!=null)throw new xr("steps mode in testLoop() is not implemented yet");{let c=EJ(l,i),f=No(Ou(0,l));for(let d=0;d<c.length;++d){let p=c[d][0],m=c[d][1],h=zv(f,p,m-p),g=CJ(o,h),y=n(g);if(d===0)for(let b=0;b<y.length;++b)u.push(Mt(0));for(let b=0;b<y.length;++b){let x=y[b];u[b]=Ke(u[b],we(m-p,x))}}for(let d=0;d<u.length;++d)u[d]=Ct(u[d],l)}return u})}getDedupedMetricsNames(){let n=this.metricsNames,o=[];for(let i=0;i<n.length;++i){let s=n[i],a=s;if(v2e(n,s)>1){let l=v2e(n.slice(0,i),s);a+=`_${l}`}o.push(a)}return o}makeTrainFunction(){return n=>{let o=[],i=n.slice(0,this.inputs.length),s=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=n.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),l=[],u=()=>{let p=[];for(let y=0;y<this.inputs.length;++y)p.push({key:this.inputs[y],value:i[y]});let m=new Xy(p),h=PA(this.outputs,m,{training:!0}),g;for(let y=0;y<this.lossFunctions.length;++y){let b=this.lossFunctions[y],x=b(s[y],h[y]);a[y]!=null&&(x=egt(x,a[y]));let v=yo(x);o.push(v),y===0?g=x:g=Ke(g,x)}for(let y=0;y<this.metricsTensors.length;++y){let b;if(this.outputs.length>1&&y<this.outputs.length)b=o[y];else{let x=this.metricsTensors[y][0],v=this.metricsTensors[y][1];b=yo(x(s[v],h[v]))}_s(b),l.push(b)}return g=yo(g),this.calculateLosses().forEach(y=>{g=Ke(g,y)}),g},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(u,!0,c)].concat(l)}}makeTestFunction(){this.testFunction=n=>Pe(()=>{let o=[],i,s=n.slice(0,this.inputs.length),a=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),l=[];for(let f=0;f<this.inputs.length;++f)l.push({key:this.inputs[f],value:s[f]});let u=new Xy(l),c=PA(this.outputs,u);for(let f=0;f<this.lossFunctions.length;++f){let d=this.lossFunctions[f],p=yo(d(a[f],c[f]));f===0?i=p:i=Ke(i,p),o.push(i)}for(let f=0;f<this.metricsTensors.length;++f){let d=this.metricsTensors[f][0],p=this.metricsTensors[f][1],m=yo(d(a[p],c[p]));o.push(m)}return o})}fit(s,a){return Be(this,arguments,function*(n,o,i={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let l,u,c,f,d,p,m,h,g;try{let y=i.batchSize==null?32:i.batchSize;SJ(y);let x=yield this.standardizeUserData(n,o,i.sampleWeight,i.classWeight,!1,y);l=x[0],u=x[1],g=x[2];let v=!1,w;if(i.validationData!=null&&i.validationData.length>0){if(v=!0,i.validationData.length===2)d=i.validationData[0],p=i.validationData[1];else throw i.validationData.length===3?new xr("validationData including sample weights is not supported yet."):new Ie(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${i.validationData} is invalid.`);let I=yield this.standardizeUserData(d,p,null,null,!0,y);m=I[0],h=I[1],w=m.concat(h)}else if(i.validationSplit!=null&&i.validationSplit>0&&i.validationSplit<1){v=!0;let M=Math.floor(l[0].shape[0]*(1-i.validationSplit)),I=l[0].shape[0];m=lM(l,M,I),c=l,l=lM(l,0,M),h=lM(u,M,I),f=u,u=lM(u,0,M),w=m.concat(h)}else i.validationSteps!=null&&(v=!0);let _=l.concat(u).concat(g);this.checkTrainableWeightsConsistency();let C=this.makeTrainFunction(),S=this.getDedupedMetricsNames(),E,A;v?(this.makeTestFunction(),E=this.testFunction,A=S.slice().concat(S.map(M=>"val_"+M))):(E=null,w=[],A=S.slice());let N=cJ(i.callbacks,i.yieldEvery);return yield this.fitLoop(C,_,S,y,i.epochs,i.verbose,N,E,w,i.shuffle,A,i.initialEpoch,null,null)}finally{this.isTraining=!1,Gp(l,n),Gp(u,o),Gp(c,n),Gp(f,o),Gp(m,d),Gp(h,p),g!=null&&Cr(g)}})}fitLoop(n,o,i,s,a,l,u,c,f,d,p,m,h,g){return Be(this,null,function*(){s==null&&(s=32),a==null&&(a=1),d==null&&(d=!0),m==null&&(m=0);let y=!1;if(c!=null&&f!=null&&(y=!0),g!=null&&(y=!0,h==null))throw new Ie("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let b=this.checkNumSamples(o,s,h,"steps_per_epoch"),x;b!=null&&(x=Ou(0,b)),l==null&&(l=1);let{callbackList:v,history:w}=fJ(u,l,a,m,b,h,s,y,p);v.setModel(this),this.history=w,yield v.onTrainBegin(),this.stopTraining_=!1;for(let _=m;_<a;++_){yield v.onEpochBegin(_);let C={};if(h!=null)throw new xr("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new xr("batch shuffling is not implemneted yet");d&&H.shuffle(x);let S=No(x),E=EJ(b,s);for(let A=0;A<E.length;++A){let N={};if(yield v.onBatchBegin(A,N),Pe(()=>{let k=E[A][0],M=E[A][1],I=zv(S,k,M-k);N.batch=A,N.size=M-k;let L=CJ(o,I),P=n(L);for(let R=0;R<i.length;++R){let V=i[R],G=P[R];N[V]=G,_s(G)}if(A===E.length-1&&y){let R=this.testLoop(c,f,s);for(let V=0;V<i.length;++V){let G=i[V],U=R[V];_s(U),C["val_"+G]=U}}}),yield v.onBatchEnd(A,N),sJ(N),this.stopTraining_)break}S.dispose()}if(yield v.onEpochEnd(_,C),this.stopTraining_)break}return yield v.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(n,o){return Be(this,null,function*(){return ogt(this,n,o)})}trainOnBatch(n,o){return Be(this,null,function*(){let i=yield this.standardizeUserData(n,o),s=i[0],a=i[1],u=this.makeTrainFunction()(s.concat(a)),c=[];for(let f of u){let d=yield f.data();c.push(d[0])}return Cr(u),Gp(i[0],n),Gp(i[1],o),na(c)})}getNamedWeights(n){let o=[],i=n!=null&&n.trainableOnly,s=i?this.trainableWeights:this.weights,a=this.getWeights(i);for(let l=0;l<s.length;++l)i&&!s[l].trainable||o.push({name:s[l].originalName,tensor:a[l]});return o}set stopTraining(n){this.stopTraining_=n}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(n){this.optimizer_!==n&&(this.optimizer_=n,this.isOptimizerOwned=!1)}dispose(){let n=super.dispose();if(n.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let o=Wk().numTensors;this.optimizer_.dispose(),n.numDisposedVariables+=o-Wk().numTensors}return n}getLossIdentifiers(){let n;if(typeof this.loss=="string")n=$p(this.loss);else if(Array.isArray(this.loss)){for(let o of this.loss)if(typeof o!="string")throw new Error("Serialization of non-string loss is not supported.");n=this.loss.map(o=>$p(o))}else{let o=Object.keys(this.loss);n={};let i=this.loss;for(let s of o)if(typeof i[s]=="string")n[s]=$p(i[s]);else throw new Error("Serialization of non-string loss is not supported.")}return n}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[$p(f6(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(n=>$p(f6(n)));{let n={};for(let o in this.metrics)n[o]=$p(f6(this.metrics[o]));return n}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(n){if(n.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(n.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(n.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let o=d6(n.optimizer_config),i=Df(o),s;if(typeof n.loss=="string")s=$v(n.loss);else if(Array.isArray(n.loss))s=n.loss.map(l=>$v(l));else if(n.loss!=null){s={};for(let l in n.loss)s[l]=$v(n.loss[l])}let a;if(Array.isArray(n.metrics))a=n.metrics.map(l=>$v(l));else if(n.metrics!=null){a={};for(let l in n.metrics)a[l]=$v(n.metrics[l])}this.compile({loss:s,metrics:a,optimizer:i})}save(n,o){return Be(this,null,function*(){if(typeof n=="string"){let f=x0.getSaveHandlers(n);if(f.length===0)throw new Ie(`Cannot find any save handlers for URL '${n}'`);if(f.length>1)throw new Ie(`Found more than one (${f.length}) save handlers for URL '${n}'`);n=f[0]}if(n.save==null)throw new Ie("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let i=yield x0.encodeWeights(this.getNamedWeights(o)),u={modelTopology:this.toJSON(null,!1),format:x2r,generatedBy:`TensorFlow.js tfjs-layers v${aM}`,convertedBy:null};if((o==null?!1:o.includeOptimizer)&&this.optimizer!=null){u.trainingConfig=this.getTrainingConfig();let f="optimizer",{data:d,specs:p}=yield x0.encodeWeights(yield this.optimizer.getWeights(),f);i.specs.push(...p),i.data=x0.concatenateArrayBuffers([i.data,d])}return this.userDefinedMetadata!=null&&(B2e(this.userDefinedMetadata,this.name,!0),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=i.data,u.weightSpecs=i.specs,n.save(u)})}setUserDefinedMetadata(n){B2e(n,this.name),this.userDefinedMetadata=n}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();tt.registerClass(Wv);var v2r=(()=>{class t extends Wv{}return t.className="Functional",t})();tt.registerClass(v2r);re();var TJ=(()=>{class t extends Wv{constructor(n){if(super({inputs:[],outputs:[]}),n=n||{},this.trainable=!0,this.built=!1,this.name=n.name!=null?n.name:E2("sequential_"),n.layers!=null)for(let o of n.layers)this.add(o)}checkShape(n){if(n.inboundNodes[0].outputTensors[0].shape.some(i=>i<0))throw new Ie(`Negative dimension size caused by adding layer ${n.name} with input shape [${n.inboundNodes[0].inputTensors[0].shape}]`)}add(n){let o=n instanceof t||n instanceof Wv,i;if(o){if(i=n,i.outputs.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(i.inputs.length!==1)throw new Ie("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(n.inboundNodes.length===0){if(n.batchInputShape==null)throw new Ie("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let s=nJ({batchShape:n.batchInputShape,dtype:n.dtype,name:n.name+"_input"});n.apply(s)}if(o)this.outputs=i.outputs,this.inputs=i.inputs;else{if(n.inboundNodes.length!==1)throw new Ie(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${n.name} which has ${n.inboundNodes.length} pre-existing inbound connections.`);if(n.inboundNodes[0].outputTensors.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[n.inboundNodes[0].outputTensors[0]],this.inputs=F2e(this.outputs[0])}this.inboundNodes=[],new Vv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Bp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{let s=n.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(n),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let n=this.layers.length-1;this.layers[n].outboundNodes=[],this.outputs=[this.layers[n].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(n,o){return this.model==null&&this.build(),this.model.call(n,o)}build(n){if(Vr(n),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Wv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(n,o,i=console.log){this.built||this.build(),super.summary(n,o,i)}setWeights(n){this.model==null&&this.build(),this.model.setWeights(n)}evaluate(n,o,i={}){if(!this.built)throw new Nu("The model needs to be compiled before being used.");return this.model.evaluate(n,o,i)}evaluateDataset(n,o){return Be(this,null,function*(){if(!this.built)throw new Nu("The model needs to be compiled before being used.");return this.model.evaluateDataset(n,o)})}predict(n,o={}){return this.model==null&&this.build(),this.model.predict(n,o)}predictOnBatch(n){return this.model==null&&this.build(),this.model.predictOnBatch(n)}compile(n){this.build(),this.model.compile(n),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(n){this.model.optimizer=n}fit(s,a){return Be(this,arguments,function*(n,o,i={}){if(!this.built)throw new Nu("The model needs to be compiled before being used.");return this.model.fit(n,o,i)})}fitDataset(n,o){return Be(this,null,function*(){if(!this.built)throw new Nu("The model needs to be compiled before being used.");return this.model.fitDataset(n,o)})}trainOnBatch(n,o){return Be(this,null,function*(){return this.model.trainOnBatch(n,o)})}static fromConfig(n,o,i={},s=!1){let a,l={};if(o instanceof Array){if(o[0].className==null||o[0].className==="Merge")throw new Ie("Legacy serialization format not supported yet.");a=o}else H.assert(o.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=o.layers,delete o.layers,l=o;let u=new n(l);if(!(u instanceof t))throw new xr(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(let c of a){let d=Df(c,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),u.add(d)}return u}set stopTraining(n){if(this.model==null)throw new Ie("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=n}get stopTraining(){if(this.model==null)throw new Ie("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let n=[];for(let o of this.layers){let i={};i.className=o.getClassName(),i.config=o.getConfig(),n.push(i)}return{name:this.name,layers:n}}}return t.className="Sequential",t})();tt.registerClass(TJ);function U2e(t){return new TJ(t)}function V2e(t){return nJ(t)}re();re();re();var ka=class extends tt.Serializable{getConfig(){return{}}},_2r=(()=>{class t extends ka{apply(n,o=1){return _ht(n,o)}}return t.className="elu",t})();tt.registerClass(_2r);var S2r=(()=>{class t extends ka{apply(n){return vI(n)}}return t.className="selu",t})();tt.registerClass(S2r);var C2r=(()=>{class t extends ka{apply(n){return ba(n)}}return t.className="relu",t})();tt.registerClass(C2r);var E2r=(()=>{class t extends ka{apply(n){return Pe(()=>Hf(6,ba(n)))}}return t.className="relu6",t})();tt.registerClass(E2r);var T2r=(()=>{class t extends ka{apply(n){return n}}return t.className="linear",t})();tt.registerClass(T2r);var A2r=(()=>{class t extends ka{apply(n){return _l(n)}}return t.className="sigmoid",t})();tt.registerClass(A2r);var k2r=(()=>{class t extends ka{apply(n){return Cht(n)}}return t.className="hardSigmoid",t})();tt.registerClass(k2r);var I2r=(()=>{class t extends ka{apply(n){return bm(n)}}return t.className="softplus",t})();tt.registerClass(I2r);var D2r=(()=>{class t extends ka{apply(n){return Sht(n)}}return t.className="softsign",t})();tt.registerClass(D2r);var N2r=(()=>{class t extends ka{apply(n){return hm(n)}}return t.className="tanh",t})();tt.registerClass(N2r);var W2e=(()=>{class t extends ka{apply(n,o=-1){return X1(n,o)}}return t.className="softmax",t})();tt.registerClass(W2e);var F2r=(()=>{class t extends ka{apply(n,o=-1){return pI(n,o)}}return t.className="logSoftmax",t})();tt.registerClass(F2r);var O2r=(()=>{class t extends ka{apply(n){return Pe(()=>Pe(()=>{let o=Math.sqrt(2),i=we(.5,Ke(1,lI(Ct(n,o))));return we(n,i)}))}}return t.className="gelu",t})();tt.registerClass(O2r);var M2r=(()=>{class t extends ka{apply(n){return Pe(()=>we(.5,we(n,Ke(1,hm(we(Xn(Ct(2,Math.PI)),Ke(n,we(.044715,$a(n,3)))))))))}}return t.className="gelu_new",t})();tt.registerClass(M2r);var R2r=(()=>{class t extends ka{apply(n){return Pe(()=>we(n,hm(bm(n))))}}return t.className="mish",t})();tt.registerClass(R2r);var j2r=(()=>{class t extends ka{apply(n,o=1){return Pe(()=>we(_l(we(n,o)),n))}}return t.className="swish",t})();tt.registerClass(j2r);function Gh(t){return t.getClassName()}function G2e(t,r={}){return Hy(t,tt.SerializationMap.getMap().classNameMap,r,"activation")}function Wh(t){if(t==null){let r={};return r.className="linear",r.config={},G2e(r)}if(typeof t=="string"){let r={};return r.className=t,r.config={},G2e(r)}else return t instanceof ka?t:G2e(t)}re();re();function P2r(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var AJ=class extends tt.Serializable{},fgt=(()=>{class t extends AJ{constructor(n){super(),P2r(n),this.l1=n==null||n.l1==null?.01:n.l1,this.l2=n==null||n.l2==null?.01:n.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(n){return Pe(()=>{let o=bo([1]);return this.hasL1&&(o=Ke(o,kt(we(this.l1,To(n))))),this.hasL2&&(o=Ke(o,kt(we(this.l2,jA(n))))),Se(o,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(n,o){return new n({l1:o.l1,l2:o.l2})}}return t.className="L1L2",t})();tt.registerClass(fgt);var ugt={l1l2:"L1L2"};function Rn(t){return QO(t)}function cgt(t,r={}){return Hy(t,tt.SerializationMap.getMap().classNameMap,r,"regularizer")}function mo(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in ugt?ugt[t]:t,config:{}};return cgt(n)}else return t instanceof AJ?t:cgt(t)}var q2e=(()=>{class t extends gr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null&&(this.maxValue=n.maxValue)}call(n,o){n=sr(n);let i=ba(n);return this.maxValue!=null&&(i=zs(i,0,this.maxValue)),i}computeOutputShape(n){return n}getConfig(){let n={maxValue:this.maxValue},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ReLU",t})();tt.registerClass(q2e);var H2e=(()=>{class t extends gr{constructor(n){super(n??{}),this.DEFAULT_ALPHA=.3,n==null&&(n={}),this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=sr(n);return $1(i,this.alpha)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LeakyReLU",t})();tt.registerClass(H2e);var Y2e=(()=>{class t extends gr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",n==null&&(n={}),this.supportsMasking=!0,this.alphaInitializer=to(n.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=mo(n.alphaRegularizer),this.alphaConstraint=ci(n.alphaConstraint),n.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(n.sharedAxes))this.sharedAxes=n.sharedAxes;else if(typeof n.sharedAxes=="number")this.sharedAxes=[n.sharedAxes];else throw new Ie(`Expected sharedAxes to be a number or an array of numbers, but got ${n.sharedAxes}`)}build(n){n=Vr(n);let o=n.slice(1);if(this.sharedAxes!=null)for(let s of this.sharedAxes)o[s-1]=1;this.alpha=this.addWeight("alpha",o,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let i={};if(this.sharedAxes!=null)for(let s=1;s<n.length;++s)i[s]=n[s];this.inputSpec=[new po({ndim:n.length,axes:i})],this.built=!0}call(n,o){return n=sr(n),Y1(n,this.alpha.read())}getConfig(){let n={alphaInitializer:So(this.alphaInitializer),alphaRegularizer:Rn(this.alphaRegularizer),alphaConstraint:ui(this.alphaConstraint),sharedAxes:this.sharedAxes},o=super.getConfig();return Object.assign(n,o),n}}return t.className="PReLU",t})();tt.registerClass(Y2e);var X2e=(()=>{class t extends gr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA=1,n==null&&(n={}),n.alpha!=null&&n.alpha!==this.DEFAULT_ALPHA)throw new xr(`Non-default alpha value (${n.alpha}) is not supported by the ELU layer yet.`);this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=sr(n);return c0(i)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ELU",t})();tt.registerClass(X2e);var K2e=(()=>{class t extends gr{constructor(n){super(n??{}),this.DEFAULT_THETA=1,n==null&&(n={}),this.theta=n.theta==null?this.DEFAULT_THETA:n.theta}call(n,o){let i=sr(n);return we(i,rt(ni(i,this.theta),"float32"))}computeOutputShape(n){return n}getConfig(){let n={theta:this.theta},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ThresholdedReLU",t})();tt.registerClass(K2e);var Z2e=(()=>{class t extends gr{constructor(n){super(n??{}),this.DEFAULT_AXIS=1,n==null&&(n={}),this.softmax=new W2e().apply,this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis}call(n,o){return Pe(()=>{let i=sr(n),s=o.mask;if(s!=null){let a=we(wt($i(i.shape),rt(s,i.dtype)),Mt(-1e9));i=Ke(i,a)}return this.axis instanceof Array?this.axis.length>1?yi(wt(i,V1(i,this.axis,!0))):this.softmax(i,this.axis[0]):this.softmax(i,this.axis)})}computeOutputShape(n){return n}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Softmax",t})();tt.registerClass(Z2e);re();re();function I2(t,r,n){if(typeof t=="number")return Bp(t,r);if(t.length!==r)throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${t.length} elements.`);for(let o=0;o<r;++o){let i=t[o];if(!bht(i))throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function _c(t,r,n,o,i=1){if(t==null)return t;let s=r+(r-1)*(i-1),a;return n==="same"?a=t:a=t-s+1,Math.floor((a+o-1)/o)}function qh(t,r,n,o){if(t==null)return null;if(o==="valid")t=t*r+Vh([n-r,0]);else if(o==="same")t=t*r;else throw new Ie(`Unsupport padding mode: ${o}.`);return t}function m6(t,r){return Pe(()=>(Ko(r),r==="channelsFirst"?Ur(t,[0,2,3,1]):t))}function Q2e(t,r){return Pe(()=>(Ko(r),r==="channelsFirst"?Ur(t,[0,2,3,4,1]):t))}function B2r(t,r,n,o=1,i="valid",s,a=1){return Pe(()=>{if(s==null&&(s=Mu()),Ko(s),t.shape.length!==3)throw new Ie(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(r.shape.length!==3)throw new Ie(`The kernel for a conv1dWithBias operation should be 3, but is ${r.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ie(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=Ur(t,[0,2,1])),i==="causal")throw new xr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=nI(t,r,o,i==="same"?"same":"valid","NWC",a);return n!=null&&(l=Ru(l,n)),l})}function dgt(t,r,n,o=[1,1],i="valid",s,a,l=null){return Pe(()=>{if(s==null&&(s=Mu()),Ko(s),t.rank!==3&&t.rank!==4)throw new Ie(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(r.rank!==3&&r.rank!==4)throw new Ie(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=m6(t,s);if(i==="causal")throw new xr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=ew.conv2d({x:u,filter:r,strides:o,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:l}),s==="channelsFirst"&&(u=Ur(u,[0,3,1,2])),u})}function $2r(t,r,n,o=[1,1,1],i="valid",s,a){return Pe(()=>{if(s==null&&(s=Mu()),Ko(s),t.rank!==4&&t.rank!==5)throw new Ie(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(r.rank!==4&&r.rank!==5)throw new Ie(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let l=Q2e(t,s);if(i==="causal")throw new xr("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=x8(l,r,o,i==="same"?"same":"valid","NDHWC",a),n!=null&&(l=Ru(l,n)),s==="channelsFirst"&&(l=Ur(l,[0,4,1,2,3])),l})}var p6=class t extends gr{constructor(r,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(n),this.rank=r,Ri(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new xr(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=I2(n.kernelSize,r,"kernelSize"),this.strides=I2(n.strides==null?1:n.strides,r,"strides"),this.padding=n.padding==null?"valid":n.padding,Fu(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ko(this.dataFormat),this.activation=Wh(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=to(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ci(n.biasConstraint),this.biasRegularizer=mo(n.biasRegularizer),this.activityRegularizer=mo(n.activityRegularizer),this.dilationRate=I2(n.dilationRate==null?1:n.dilationRate,r,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ie(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ie(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ie(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(r){if(Od("kernelSize"in r,"required key 'kernelSize' not in config"),typeof r.kernelSize!="number"&&!WQ(r.kernelSize,"number",1,3))throw new Ie(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(r.kernelSize)}.`)}getConfig(){let r={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Gh(this.activation),useBias:this.useBias,biasInitializer:So(this.biasInitializer),biasRegularizer:Rn(this.biasRegularizer),activityRegularizer:Rn(this.activityRegularizer),biasConstraint:ui(this.biasConstraint)},n=super.getConfig();return Object.assign(r,n),r}},uM=class t extends p6{constructor(r,n){super(r,n),this.kernel=null,t.verifyArgs(n),this.filters=n.filters,Ri(this.filters,"filters"),this.kernelInitializer=to(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ci(n.kernelConstraint),this.kernelRegularizer=mo(n.kernelRegularizer)}build(r){r=Vr(r);let n=this.dataFormat==="channelsFirst"?1:r.length-1;if(r[n]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${r[n]}`);let o=r[n],i=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:o}}],this.built=!0}call(r,n){return Pe(()=>{r=sr(r);let o,i=this.bias==null?null:this.bias.read(),s=qQ(this.activation.getClassName());if(s!=null&&this.rank===2)o=dgt(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)o=B2r(r,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)o=dgt(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)o=$2r(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new xr("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(o=this.activation.apply(o))}return o})}computeOutputShape(r){r=Vr(r);let n=[],o=this.dataFormat==="channelsLast"?r.slice(1,r.length-1):r.slice(2);for(let s=0;s<o.length;++s){let a=_c(o[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[r[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){let r={filters:this.filters,kernelInitializer:So(this.kernelInitializer),kernelRegularizer:Rn(this.kernelRegularizer),kernelConstraint:ui(this.kernelConstraint)},n=super.getConfig();return Object.assign(r,n),r}static verifyArgs(r){if(!("filters"in r)||typeof r.filters!="number"||r.filters<1)throw new Ie(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(r.filters)}`)}},kJ=(()=>{class t extends uM{constructor(n){super(2,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!WQ(n.kernelSize,"number",1,2))throw new Ie(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv2D",t})();tt.registerClass(kJ);var IJ=(()=>{class t extends uM{constructor(n){super(3,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!(Array.isArray(n.kernelSize)&&(n.kernelSize.length===1||n.kernelSize.length===3)))throw new Ie(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv3D",t})();tt.registerClass(IJ);var J2e=(()=>{class t extends kJ{constructor(n){if(super(n),this.inputSpec=[new po({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Vr(n),n.length!==4)throw new Ie("Input should have rank 4; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new po({ndim:4,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{let i=sr(n);if(i.shape.length!==4)throw new Ie(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u;this.dataFormat==="channelsFirst"?(l=2,u=3):(l=1,u=2);let c=s[l],f=s[u],d=this.kernelSize[0],p=this.kernelSize[1],m=this.strides[0],h=this.strides[1],g=qh(c,m,d,this.padding),y=qh(f,h,p,this.padding),b=[a,g,y,this.filters];this.dataFormat!=="channelsLast"&&(i=Ur(i,[0,2,3,1]));let x=iI(i,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Ur(x,[0,3,1,2])),this.bias!=null&&(x=Ru(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(n){n=Vr(n);let o=n.slice(),i,s,a;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3):(i=3,s=1,a=2);let l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],f=this.strides[1];return o[i]=this.filters,o[s]=qh(o[s],c,l,this.padding),o[a]=qh(o[a],f,u,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv2DTranspose",t})();tt.registerClass(J2e);var eSe=(()=>{class t extends IJ{constructor(n){if(super(n),this.inputSpec=[new po({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Vr(n),n.length!==5)throw new Ie("Input should have rank 5; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new po({ndim:5,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{let i=sr(n);if(i.shape.length!==5)throw new Ie(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u,c;this.dataFormat==="channelsFirst"?(c=2,l=3,u=4):(c=1,l=2,u=3);let f=s[c],d=s[l],p=s[u],m=this.kernelSize[0],h=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[0],b=this.strides[1],x=this.strides[2],v=qh(f,y,m,this.padding),w=qh(d,b,h,this.padding),_=qh(p,x,g,this.padding),C=[a,v,w,_,this.filters];this.dataFormat!=="channelsLast"&&(i=Ur(i,[0,2,3,4,1]));let S=w8(i,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Ur(S,[0,4,1,2,3])),this.bias!==null&&(S=Ru(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(n){n=Vr(n);let o=n.slice(),i,s,a,l;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3,l=4):(i=4,s=1,a=2,l=3);let u=this.kernelSize[0],c=this.kernelSize[1],f=this.kernelSize[2],d=this.strides[0],p=this.strides[1],m=this.strides[2];return o[i]=this.filters,o[s]=qh(o[s],d,u,this.padding),o[a]=qh(o[a],p,c,this.padding),o[l]=qh(o[l],m,f,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv3DTranspose",t})();tt.registerClass(eSe);var z2r=(()=>{class t extends uM{constructor(n,o){if(super(n,o),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,o.filters==null)throw new Ie("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(o.kernelInitializer!=null||o.kernelRegularizer!=null||o.kernelConstraint!=null)throw new Ie("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(o.padding!=null&&o.padding!=="same"&&o.padding!=="valid")throw new Ie(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(o.padding)}`);this.depthMultiplier=o.depthMultiplier==null?1:o.depthMultiplier,this.depthwiseInitializer=to(o.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=mo(o.depthwiseRegularizer),this.depthwiseConstraint=ci(o.depthwiseConstraint),this.pointwiseInitializer=to(o.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=mo(o.pointwiseRegularizer),this.pointwiseConstraint=ci(o.pointwiseConstraint)}build(n){if(n=Vr(n),n.length<this.rank+2)throw new Ie(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(n)}`);let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(n[o])}`);let i=n[o],s=this.kernelSize.concat([i,this.depthMultiplier]),a=[];for(let u=0;u<this.rank;++u)a.push(1);a.push(i*this.depthMultiplier,this.filters);let l=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,l,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,l,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,l,this.biasConstraint):this.bias=null,this.inputSpec=[new po({ndim:this.rank+2,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{n=sr(n);let i;if(this.rank===1)throw new xr("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(n=Ur(n,[0,2,3,1])),i=wI(n,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=Ru(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),this.dataFormat==="channelsFirst"&&(i=Ur(i,[0,3,1,2])),i})}getConfig(){let n=super.getConfig();return delete n.rank,delete n.kernelInitializer,delete n.kernelRegularizer,delete n.kernelConstraint,n.depthwiseInitializer=So(this.depthwiseInitializer),n.pointwiseInitializer=So(this.pointwiseInitializer),n.depthwiseRegularizer=Rn(this.depthwiseRegularizer),n.pointwiseRegularizer=Rn(this.pointwiseRegularizer),n.depthwiseConstraint=ui(this.depthwiseConstraint),n.pointwiseConstraint=ui(this.pointwiseConstraint),n}}return t.className="SeparableConv",t})();var tSe=(()=>{class t extends z2r{constructor(n){super(2,n)}}return t.className="SeparableConv2D",t})();tt.registerClass(tSe);var rSe=(()=>{class t extends uM{constructor(n){super(1,n),t.verifyArgs(n),this.inputSpec=[{ndim:3}]}getConfig(){let n=super.getConfig();return delete n.rank,delete n.dataFormat,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!WQ(n.kernelSize,"number",1,1))throw new Ie(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv1D",t})();tt.registerClass(rSe);var nSe=(()=>{class t extends gr{constructor(n){super(n),typeof n.cropping=="number"?this.cropping=[[n.cropping,n.cropping],[n.cropping,n.cropping]]:typeof n.cropping[0]=="number"?this.cropping=[[n.cropping[0],n.cropping[0]],[n.cropping[1],n.cropping[1]]]:this.cropping=n.cropping,this.dataFormat=n.dataFormat===void 0?"channelsLast":n.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(n){return this.dataFormat==="channelsFirst"?[n[0],n[1],n[2]-this.cropping[0][0]-this.cropping[0][1],n[3]-this.cropping[1][0]-this.cropping[1][1]]:[n[0],n[1]-this.cropping[0][0]-this.cropping[0][1],n[2]-this.cropping[1][0]-this.cropping[1][1],n[3]]}call(n,o){return Pe(()=>{if(n=sr(n),this.dataFormat==="channelsLast"){let i=o6(n,this.cropping[0][0],n.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return o6(i,this.cropping[1][0],n.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let i=o6(n,this.cropping[0][0],n.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return o6(i,this.cropping[1][0],n.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let n={cropping:this.cropping,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Cropping2D",t})();tt.registerClass(nSe);var oSe=(()=>{class t extends gr{constructor(n){super(n),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=n.size==null?this.DEFAULT_SIZE:n.size,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ko(this.dataFormat),this.interpolation=n.interpolation==null?"nearest":n.interpolation,ght(this.interpolation)}computeOutputShape(n){if(this.dataFormat==="channelsFirst"){let o=n[2]==null?null:this.size[0]*n[2],i=n[3]==null?null:this.size[1]*n[3];return[n[0],n[1],o,i]}else{let o=n[1]==null?null:this.size[0]*n[1],i=n[2]==null?null:this.size[1]*n[2];return[n[0],o,i,n[3]]}}call(n,o){return Pe(()=>{let i=sr(n),s=i.shape;if(this.dataFormat==="channelsFirst"){i=Ur(i,[0,2,3,1]);let a=this.size[0]*s[2],l=this.size[1]*s[3],u=this.interpolation==="nearest"?qu.resizeNearestNeighbor(i,[a,l]):qu.resizeBilinear(i,[a,l]);return Ur(u,[0,3,1,2])}else{let a=this.size[0]*s[1],l=this.size[1]*s[2];return this.interpolation==="nearest"?qu.resizeNearestNeighbor(i,[a,l]):qu.resizeBilinear(i,[a,l])}})}getConfig(){let n={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}}return t.className="UpSampling2D",t})();tt.registerClass(oSe);re();re();function U2r(t,r,n=[1,1],o="valid",i,s){return Pe(()=>{i==null&&(i=Mu()),Ko(i);let a=m6(t,i);if(t.rank!==4)throw new Ie(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(r.rank!==4)throw new Ie(`depthwiseKernel is required to be 4-D, but is instead ${r.rank}-D`);return a=u0(a,r,n,o==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=Ur(a,[0,3,1,2])),a})}var iSe=(()=>{class t extends p6{constructor(n){super(2,n),this.depthwiseKernel=null,this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=to(n.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ci(n.depthwiseConstraint),this.depthwiseRegularizer=mo(n.depthwiseRegularizer)}build(n){if(n=Vr(n),n.length<4)throw new Ie(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(n)}.`);let o=this.dataFormat==="channelsFirst"?1:3;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${n[o]}).`);let i=n[o],s=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{n=sr(n);let i=U2r(n,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(i=Ru(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),i})}computeOutputShape(n){n=Vr(n);let o=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2],s=this.dataFormat==="channelsFirst"?n[1]*this.depthMultiplier:n[3]*this.depthMultiplier,a=_c(o,this.kernelSize[0],this.padding,this.strides[0]),l=_c(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[n[0],s,a,l]:[n[0],a,l,s]}getConfig(){let n=super.getConfig();return n.depthMultiplier=this.depthMultiplier,n.depthwiseInitializer=So(this.depthwiseInitializer),n.depthwiseRegularizer=Rn(this.depthwiseRegularizer),n.depthwiseConstraint=ui(this.depthwiseRegularizer),n}}return t.className="DepthwiseConv2D",t})();tt.registerClass(iSe);re();re();re();re();function sSe(t,r,n,o){if(Array.isArray(t)){if(r!=null||n!=null)throw new Ie("When inputs is an array, neither initialState or constants should be provided");o!=null&&(n=t.slice(t.length-o,t.length),t=t.slice(0,t.length-o)),t.length>1&&(r=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return r=i(r),n=i(n),{inputs:t,initialState:r,constants:n}}function aSe(t,r,n,o=!1,i,s,a=!1,l=!1){return Pe(()=>{let u=r.shape.length;if(u<3)throw new Ie(`Input should be at least 3D, but is ${u}D.`);let c=[1,0].concat(Ou(2,u));if(r=Ur(r,c),s!=null)throw new xr("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=rt(rt(i,"bool"),"float32"),i.rank===u-1&&(i=Ci(i,-1)),i=Ur(i,c)),o&&(r=us(r,0),i!=null&&(i=us(i,0)));let f=[],d,p=n,m=r.shape[0],h=Ua(r),g;i!=null&&(g=Ua(i));for(let b=0;b<m;++b){let x=h[b],v=Pe(()=>t(x,p));if(i==null)d=v[0],p=v[1];else{let w=Pe(()=>{let _=g[b],C=wt(Cs(_),_),S=Ke(we(v[0],_),we(p[0],C)),E=p.map((A,N)=>Ke(we(v[1][N],_),we(A,C)));return{output:S,newStates:E}});d=w.output,p=w.newStates}l&&f.push(d)}let y;return l&&(y=Qi(f,1)),[d,y,p]})}var Ky=(()=>{class t extends gr{constructor(n){super(n);let o;if(n.cell==null)throw new Ie("cell property is missing for the constructor of RNN.");if(Array.isArray(n.cell)?o=new FJ({cells:n.cell}):o=n.cell,o.stateSize==null)throw new Ie("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=o,this.returnSequences=n.returnSequences==null?!1:n.returnSequences,this.returnState=n.returnState==null?!1:n.returnState,this.goBackwards=n.goBackwards==null?!1:n.goBackwards,this._stateful=n.stateful==null?!1:n.stateful,this.unroll=n.unroll==null?!1:n.unroll,this.supportsMasking=!0,this.inputSpec=[new po({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ou(0,n).map(o=>null)}else return this.states_}setStates(n){this.states_=n}computeOutputShape(n){rJ(n)&&(n=n[0]),n=n;let o=this.cell.stateSize;Array.isArray(o)||(o=[o]);let i=o[0],s;if(this.returnSequences?s=[n[0],n[1],i]:s=[n[0],i],this.returnState){let a=[];for(let l of o)a.push([n[0],l]);return[s].concat(a)}else return s}computeMask(n,o){return Pe(()=>{Array.isArray(o)&&(o=o[0]);let i=this.returnSequences?o:null;if(this.returnState){let s=this.states.map(a=>null);return[i].concat(s)}else return i})}get states(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,o=[];for(let i=0;i<n;++i)o.push(null);return o}else return this.states_}set states(n){this.states_=n}build(n){if(this.numConstants!=null)throw new xr("Constants support is not implemented in RNN yet.");rJ(n)&&(n=n[0]),n=n;let i=this.stateful?n[0]:null,s=n.slice(2);this.inputSpec[0]=new po({shape:[i,null,...s]});let a=[n[0]].concat(n.slice(2));this.cell.build(a);let l;if(Array.isArray(this.cell.stateSize)?l=this.cell.stateSize:l=[this.cell.stateSize],this.stateSpec!=null){if(!H.arraysEqual(this.stateSpec.map(u=>u.shape[u.shape.length-1]),l))throw new Ie(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(u=>new po({shape:[null,u]}));this.stateful&&this.resetStates()}resetStates(n,o=!1){Pe(()=>{if(!this.stateful)throw new Fd("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape[0];if(i==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>bo([i,s])):this.states_=[bo([i,this.cell.stateSize])];else if(n==null)Cr(this.states_),this.keptStates!=null&&(Cr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>bo([i,s])):this.states_[0]=bo([i,this.cell.stateSize]);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o===!0?this.keptStates.push(this.states_.slice()):Cr(this.states_);for(let s=0;s<this.states_.length;++s){let a=n[s],l=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,u=[i,l];if(!H.arraysEqual(a.shape,u))throw new Ie(`State ${s} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>_s(s.clone()))})}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=sSe(n,i,s,this.numConstants);n=a.inputs,i=a.initialState,s=a.constants;let l=[],u=[];if(i!=null){o.initialState=i,l=l.concat(i),this.stateSpec=[];for(let f of i)this.stateSpec.push(new po({shape:f.shape}));u=u.concat(this.stateSpec)}if(s!=null&&(o.constants=s,l=l.concat(s),this.numConstants=s.length),l[0]instanceof Gl){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let m=super.apply(f,o);return this.inputSpec=p,m}else return super.apply(n,o)}call(n,o){return Pe(()=>{let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;n=sr(n),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(n));let l=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==l)throw new Ie(`RNN Layer has ${l} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let u={training:s},f=aSe((g,y)=>{let b=this.cell.call([g].concat(y),u);return[b[0],b.slice(1)]},n,a,this.goBackwards,i,null,this.unroll,this.returnSequences),d=f[0],p=f[1],m=f[2];this.stateful&&this.resetStates(m,s);let h=this.returnSequences?p:d;return this.returnState?[h].concat(m):h})}getInitialState(n){return Pe(()=>{let o=bo(n.shape);return o=kt(o,[1,2]),o=Uv(o),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>i>1?QQ(o,[1,i]):o):this.cell.stateSize>1?[QQ(o,[1,this.cell.stateSize])]:[o]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(n)}getConfig(){let n=super.getConfig(),o={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(o.numConstants=this.numConstants);let i=this.cell.getConfig();return this.getClassName()===t.className&&(o.cell={className:this.cell.getClassName(),config:i}),Object.assign(Object.assign(Object.assign({},i),n),o)}static fromConfig(n,o,i={}){let s=o.cell,a=Df(s,i);return new n(Object.assign(o,{cell:a}))}}return t.className="RNN",t})();tt.registerClass(Ky);var qv=class extends gr{},DJ=(()=>{class t extends qv{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Ri(this.units,"units"),this.activation=Wh(n.activation==null?this.DEFAULT_ACTIVATION:n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=to(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=to(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=to(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mo(n.kernelRegularizer),this.recurrentRegularizer=mo(n.recurrentRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.kernelConstraint=ci(n.kernelConstraint),this.recurrentConstraint=ci(n.recurrentConstraint),this.biasConstraint=ci(n.biasConstraint),this.dropout=RA([1,Vh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=RA([1,Vh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Vr(n),this.kernel=this.addWeight("kernel",[n[n.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{if(n=n,n.length!==2)throw new Ie(`SimpleRNNCell expects 2 input Tensors, got ${n.length}.`);let i=n[1];n=n[0];let s=o.training==null?!1:o.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Hv({ones:()=>Cs(n),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Hv({ones:()=>Cs(i),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a,l=this.dropoutMask,u=this.recurrentDropoutMask;l!=null?a=Vp(we(n,l),this.kernel.read()):a=Vp(n,this.kernel.read()),this.bias!=null&&(a=Ru(a,this.bias.read())),u!=null&&(i=we(i,u));let c=Ke(a,Vp(i,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Gh(this.activation),useBias:this.useBias,kernelInitializer:So(this.kernelInitializer),recurrentInitializer:So(this.recurrentInitializer),biasInitializer:So(this.biasInitializer),kernelRegularizer:Rn(this.kernelRegularizer),recurrentRegularizer:Rn(this.recurrentRegularizer),biasRegularizer:Rn(this.biasRegularizer),activityRegularizer:Rn(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),recurrentConstraint:ui(this.recurrentConstraint),biasConstraint:ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},n),o)}}return t.className="SimpleRNNCell",t})();tt.registerClass(DJ);var lSe=(()=>{class t extends Ky{constructor(n){n.cell=new DJ(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return new n(o)}}return t.className="SimpleRNN",t})();tt.registerClass(lSe);var NJ=(()=>{class t extends qv{constructor(n){if(super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.resetAfter)throw new Ie("GRUCell does not support reset_after parameter set to true.");this.units=n.units,Ri(this.units,"units"),this.activation=Wh(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Wh(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=to(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=to(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=to(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mo(n.kernelRegularizer),this.recurrentRegularizer=mo(n.recurrentRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.kernelConstraint=ci(n.kernelConstraint),this.recurrentConstraint=ci(n.recurrentConstraint),this.biasConstraint=ci(n.biasConstraint),this.dropout=RA([1,Vh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=RA([1,Vh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Vr(n);let o=n[n.length-1];this.kernel=this.addWeight("kernel",[o,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{if(n=n,n.length!==2)throw new Ie(`GRUCell expects 2 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training==null?!1:o.training,s=n[1];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Hv({ones:()=>Cs(n),rate:this.dropout,training:i,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Hv({ones:()=>Cs(s),rate:this.recurrentDropout,training:i,count:3,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,u,c,f;0<this.dropout&&this.dropout<1&&(n=we(n,a[0]));let d=Vp(n,this.kernel.read());this.useBias&&(d=Ru(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,l[0]));let p=this.recurrentKernel.read(),[m,h]=cs(p,[2*this.units,this.units],p.rank-1),g=Vp(s,m),[y,b,x]=cs(d,3,d.rank-1),[v,w]=cs(g,2,g.rank-1);u=this.recurrentActivation.apply(Ke(y,v)),c=this.recurrentActivation.apply(Ke(b,w));let _=Vp(we(c,s),h);f=this.activation.apply(Ke(x,_));let C=Ke(we(u,s),we(Ke(1,Xr(u)),f));return[C,C]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Gh(this.activation),recurrentActivation:Gh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:So(this.kernelInitializer),recurrentInitializer:So(this.recurrentInitializer),biasInitializer:So(this.biasInitializer),kernelRegularizer:Rn(this.kernelRegularizer),recurrentRegularizer:Rn(this.recurrentRegularizer),biasRegularizer:Rn(this.biasRegularizer),activityRegularizer:Rn(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),recurrentConstraint:ui(this.recurrentConstraint),biasConstraint:ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},n),o)}}return t.className="GRUCell",t})();tt.registerClass(NJ);var uSe=(()=>{class t extends Ky{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new NJ(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="GRU",t})();tt.registerClass(uSe);var cM=(()=>{class t extends qv{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Ri(this.units,"units"),this.activation=Wh(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Wh(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=to(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=to(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=to(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=n.unitForgetBias,this.kernelRegularizer=mo(n.kernelRegularizer),this.recurrentRegularizer=mo(n.recurrentRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.kernelConstraint=ci(n.kernelConstraint),this.recurrentConstraint=ci(n.recurrentConstraint),this.biasConstraint=ci(n.biasConstraint),this.dropout=RA([1,Vh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=RA([1,Vh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){var o;n=Vr(n);let i=n[n.length-1];this.kernel=this.addWeight("kernel",[i,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){let a=this.biasInitializer,l=this.units;s=new(o=class extends ju{apply(c,f){let d=a.apply([l]),p=new tJ().apply([l]),m=a.apply([l*2]);return E2e(E2e(d,p),m)}},o.className="CustomInit",o)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(n,o){return Pe(()=>{let i=o.training==null?!1:o.training;if(n=n,n.length!==3)throw new Ie(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let s=n[1],a=n[2];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Hv({ones:()=>Cs(n),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Hv({ones:()=>Cs(s),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));let l=this.dropoutMask,u=this.recurrentDropoutMask,c,f,d,p;0<this.dropout&&this.dropout<1&&(n=we(n,l[0]));let m=Vp(n,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,u[0])),m=Ke(m,Vp(s,this.recurrentKernel.read())),this.useBias&&(m=Ru(m,this.bias.read()));let[h,g,y,b]=cs(m,4,m.rank-1);c=this.recurrentActivation.apply(h),f=this.recurrentActivation.apply(g),d=Ke(we(f,a),we(c,this.activation.apply(y))),p=this.recurrentActivation.apply(b);let x=we(p,this.activation.apply(d));return[x,x,d]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Gh(this.activation),recurrentActivation:Gh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:So(this.kernelInitializer),recurrentInitializer:So(this.recurrentInitializer),biasInitializer:So(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Rn(this.kernelRegularizer),recurrentRegularizer:Rn(this.recurrentRegularizer),biasRegularizer:Rn(this.biasRegularizer),activityRegularizer:Rn(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),recurrentConstraint:ui(this.recurrentConstraint),biasConstraint:ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},n),o)}}return t.className="LSTMCell",t})();tt.registerClass(cM);var cSe=(()=>{class t extends Ky{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new cM(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="LSTM",t})();tt.registerClass(cSe);var FJ=(()=>{class t extends qv{constructor(n){super(n),this.cells=n.cells}get stateSize(){let n=[];for(let o of this.cells.slice().reverse())Array.isArray(o.stateSize)?n.push(...o.stateSize):n.push(o.stateSize);return n}call(n,o){return Pe(()=>{n=n;let i=n.slice(1),s=[];for(let u of this.cells.slice().reverse())Array.isArray(u.stateSize)?s.push(i.splice(0,u.stateSize.length)):s.push(i.splice(0,1));s.reverse();let a=[],l;for(let u=0;u<this.cells.length;++u){let c=this.cells[u];i=s[u],u===0?l=[n[0]].concat(i):l=[l[0]].concat(i),l=c.call(l,o),a.push(l.slice(1))}i=[];for(let u of a.slice().reverse())i.push(...u);return[l[0]].concat(i)})}build(n){rJ(n)&&(n=n[0]),n=n;let o;this.cells.forEach((i,s)=>{Uh(`RNNCell_${s}`,()=>{i.build(n),Array.isArray(i.stateSize)?o=i.stateSize[0]:o=i.stateSize,n=[n[0],o]})}),this.built=!0}getConfig(){let n=super.getConfig(),o=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(o)};return Object.assign(Object.assign({},n),s)}static fromConfig(n,o,i={}){let s=[];for(let a of o.cells)s.push(Df(a,i));return new n({cells:s})}get trainableWeights(){if(!this.trainable)return[];let n=[];for(let o of this.cells)n.push(...o.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let o of this.cells)n.push(...o.nonTrainableWeights);if(!this.trainable){let o=[];for(let i of this.cells)o.push(...i.trainableWeights);return o.concat(n)}return n}getWeights(){let n=[];for(let o of this.cells)n.push(...o.weights);return s6(n)}setWeights(n){let o=[];for(let i of this.cells){let s=i.weights.length,a=n.splice(s);for(let l=0;l<i.weights.length;++l)o.push([i.weights[l],a[l]])}oM(o)}}return t.className="StackedRNNCells",t})();tt.registerClass(FJ);function Hv(t){let{ones:r,rate:n,training:o=!1,count:i=1,dropoutFunc:s}=t,a=()=>s!=null?s(r(),n):eJ(r(),n),l=()=>T2(a,r,o);return!i||i<=1?_s(l().clone()):Array(i).fill(void 0).map(l).map(c=>_s(c.clone()))}var V2r=function(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n};var G2r=(()=>{class t extends Ky{constructor(n){if(n.unroll)throw new xr("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(n.cell))throw new xr("It is not possible at the moment to stack convolutional cells.");super(n),this.inputSpec=[new po({ndim:5})]}call(n,o){return Pe(()=>{if(this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),o&&o.constants)throw new Ie("ConvRNN2D cell does not support constants");let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}computeOutputShape(n){let o=this.computeSingleOutputShape(n);return this.returnSequences||(o=[o[0],...o.slice(2)]),this.returnState&&(o=[o,...Array(2).fill([n[0],...o.slice(-3)])]),o}getInitialState(n){return Pe(()=>{let{stateSize:o}=this.cell,i=n.shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)],l=bo(a);return Array.isArray(o)?Array(o.length).fill(l):[l]})}resetStates(n,o=!1){Pe(()=>{if(!this.stateful)throw new Fd("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)];if(i[0]==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>bo(a)):this.states_=[bo(a)];else if(n==null)Cr(this.states_),this.keptStates!=null&&(Cr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>bo(a)):this.states_[0]=bo(a);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o?this.keptStates.push(this.states_.slice()):Cr(this.states_);for(let u=0;u<this.states_.length;++u){let c=n[u],f=a;if(!H.arraysEqual(c.shape,f))throw new Ie(`State ${u} is incompatible with layer ${this.name}: expected shape=${f}, received shape=${c.shape}`);this.states_[u]=c}}this.states_=this.states_.map(u=>_s(u.clone()))})}computeSingleOutputShape(n){let{dataFormat:o,filters:i,kernelSize:s,padding:a,strides:l,dilationRate:u}=this.cell,c=o==="channelsFirst",f=n[c?3:2],d=n[c?4:3],p=_c(f,s[0],a,l[0],u[0]),m=_c(d,s[1],a,l[1],u[1]);return[...n.slice(0,2),...c?[i,p,m]:[p,m,i]]}}return t.className="ConvRNN2D",t})(),OJ=(()=>{class t extends cM{constructor(n){let{filters:o,kernelSize:i,strides:s,padding:a,dataFormat:l,dilationRate:u}=n;super(Object.assign(Object.assign({},n),{units:o})),this.filters=o,Ri(this.filters,"filters"),this.kernelSize=I2(i,2,"kernelSize"),this.kernelSize.forEach(c=>Ri(c,"kernelSize")),this.strides=I2(s||1,2,"strides"),this.strides.forEach(c=>Ri(c,"strides")),this.padding=a||"valid",Fu(this.padding),this.dataFormat=l||"channelsLast",Ko(this.dataFormat),this.dilationRate=I2(u||1,2,"dilationRate"),this.dilationRate.forEach(c=>Ri(c,"dilationRate"))}build(n){var o;n=Vr(n);let i=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[i]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${n[i]}`);let s=n[i],a=4,l=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",l,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let u=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let f=this.biasInitializer,d=this.filters;c=new(o=class extends ju{apply(m,h){let g=f.apply([d]),y=$i([d]),b=f.apply([d*2]);return eM([g,y,b])}},o.className="CustomInit",o)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(n,o){return Pe(()=>{if(n.length!==3)throw new Ie(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training||!1,s=n[0],a=n[1],l=n[2],u=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Hv({ones:()=>Cs(s),rate:this.dropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,f=(X,pe,$)=>!pe||!pe[$]?X:we(pe[$],X),d=f(s,c,0),p=f(s,c,1),m=f(s,c,2),h=f(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Hv({ones:()=>Cs(a),rate:this.recurrentDropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,y=f(a,g,0),b=f(a,g,1),x=f(a,g,2),v=f(a,g,3),w=3,[_,C,S,E]=cs(this.kernel.read(),u,w),[A,N,k,M]=this.useBias?cs(this.bias.read(),u):[null,null,null,null];d=this.inputConv(d,_,A,this.padding),p=this.inputConv(p,C,N,this.padding),m=this.inputConv(m,S,k,this.padding),h=this.inputConv(h,E,M,this.padding);let[I,L,P,R]=cs(this.recurrentKernel.read(),u,w);y=this.recurrentConv(y,I),b=this.recurrentConv(b,L),x=this.recurrentConv(x,P),v=this.recurrentConv(v,R);let V=this.recurrentActivation.apply(Ke(d,y)),G=this.recurrentActivation.apply(Ke(p,b)),U=Ke(we(G,l),we(V,this.activation.apply(Ke(m,x)))),Y=we(this.recurrentActivation.apply(Ke(h,v)),this.activation.apply(U));return[Y,Y,U]})}getConfig(){let n=super.getConfig(),{units:o}=n,i=V2r(n,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},i),s)}inputConv(n,o,i,s){let a=Vu(n,o,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return i?Ru(a,i,this.dataFormat):a}recurrentConv(n,o){return Vu(n,o,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();tt.registerClass(OJ);var fSe=(()=>{class t extends G2r{constructor(n){let o=new OJ(n);super(Object.assign(Object.assign({},n),{cell:o}))}static fromConfig(n,o){return new n(o)}}return t.className="ConvLSTM2D",t})();tt.registerClass(fSe);re();var MJ=(()=>{class t extends gr{constructor(n){super(n),this.rate=Math.max(Math.min(n.rate,1),0),this.noiseShape=n.noiseShape,this.seed=n.seed,this.supportsMasking=!0}getNoiseShape(n){if(this.noiseShape==null)return this.noiseShape;let o=n.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(this.noiseShape[s]==null?o[s]:this.noiseShape[s]);return i}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n);if(0<this.rate&&this.rate<1){let s=o.training==null?!1:o.training,a=this.getNoiseShape(i);return T2(()=>eJ(i,this.rate,a,this.seed),()=>i,s)}return n})}getConfig(){let n={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},o=super.getConfig();return Object.assign(n,o),n}dispose(){return super.dispose()}}return t.className="Dropout",t})();tt.registerClass(MJ);var dSe=(()=>{class t extends MJ{constructor(n){super(n),this.inputSpec=[{ndim:3}]}getNoiseShape(n){let o=n.shape;return[o[0],1,o[2]]}}return t.className="SpatialDropout1D",t})();tt.registerClass(dSe);var pSe=(()=>{class t extends gr{constructor(n){if(super(n),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.batchInputShape==null&&n.inputShape==null&&n.inputDim!=null){let o=null;n.batchSize!=null&&(o=n.batchSize),this.batchInputShape=[o,n.inputDim]}this.units=n.units,Ri(this.units,"units"),this.activation=Wh(n.activation),n.useBias!=null&&(this.useBias=n.useBias),this.kernelInitializer=to(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=to(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ci(n.kernelConstraint),this.biasConstraint=ci(n.biasConstraint),this.kernelRegularizer=mo(n.kernelRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.activityRegularizer=mo(n.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(n){n=Vr(n);let o=n[n.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[o,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:o}}],this.built=!0}computeOutputShape(n){n=Vr(n);let o=n.slice();return o[o.length-1]=this.units,o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n),s=qQ(this.activation.getClassName()),a;return s!=null?a=Vp(i,this.kernel.read(),s,this.bias?this.bias.read():null):(a=Vp(i,this.kernel.read()),this.bias!=null&&(a=Ru(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){let n={units:this.units,activation:Gh(this.activation),useBias:this.useBias,kernelInitializer:So(this.kernelInitializer),biasInitializer:So(this.biasInitializer),kernelRegularizer:Rn(this.kernelRegularizer),biasRegularizer:Rn(this.biasRegularizer),activityRegularizer:Rn(this.activityRegularizer),kernelConstraint:ui(this.kernelConstraint),biasConstraint:ui(this.biasConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dense",t})();tt.registerClass(pSe);var mSe=(()=>{class t extends gr{constructor(n){n=n||{},super(n),this.inputSpec=[{minNDim:3}],this.dataFormat=n.dataFormat}computeOutputShape(n){n=Vr(n);for(let o of n.slice(1))if(o==null)throw new Ie(`The shape of the input to "Flatten" is not fully defined (got ${n.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[n[0],Up(n,1)]}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n);if(this.dataFormat==="channelsFirst"&&i.rank>1){let s=[0];for(let a=2;a<i.rank;++a)s.push(a);s.push(1),i=Ur(i,s)}return wht(i)})}getConfig(){let n={};this.dataFormat!=null&&(n.dataFormat=this.dataFormat);let o=super.getConfig();return Object.assign(n,o),n}}return t.className="Flatten",t})();tt.registerClass(mSe);var hSe=(()=>{class t extends gr{constructor(n){super(n),this.supportsMasking=!0,this.activation=Wh(n.activation)}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n);return this.activation.apply(i)})}getConfig(){let n={activation:Gh(this.activation)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Activation",t})();tt.registerClass(hSe);var gSe=(()=>{class t extends gr{constructor(n){super(n),this.n=n.n,this.inputSpec=[{ndim:2}]}computeOutputShape(n){return[n[0],this.n,n[1]]}call(n,o){return Pe(()=>(n=sr(n),xht(n,this.n)))}getConfig(){let n={n:this.n},o=super.getConfig();return Object.assign(n,o),n}}return t.className="RepeatVector",t})();tt.registerClass(gSe);var ySe=(()=>{class t extends gr{constructor(n){super(n),this.targetShape=n.targetShape;for(let o=0;o<this.targetShape.length;++o)this.isUnknown(this.targetShape[o])&&(this.targetShape[o]=null)}isUnknown(n){return n<0||n==null}fixUnknownDimension(n,o){let i="Total size of new array must be unchanged.",s=o.slice(),a=1,l=null;for(let c=0;c<s.length;++c){let f=s[c];if(this.isUnknown(f))if(l===null)l=c;else throw new Ie("Can only specifiy one unknown dimension.");else a*=f}let u=Up(n);if(l!==null){if(a===0||u%a!==0)throw new Ie(i);s[l]=u/a}else if(u!==a)throw new Ie(i);return s}computeOutputShape(n){let o=!1;for(let i=0;i<n.length;++i)if(this.isUnknown(n[i])){o=!0;break}return o?n.slice(0,1).concat(this.targetShape):n.slice(0,1).concat(this.fixUnknownDimension(n.slice(1),this.targetShape))}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n),s=i.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Se(i,a)})}getConfig(){let n={targetShape:this.targetShape},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Reshape",t})();tt.registerClass(ySe);var bSe=(()=>{class t extends gr{constructor(n){if(super(n),n.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(n.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${n.dims} instead.`);let o=Ou(1,n.dims.length+1);if(!H.arraysEqual(n.dims.slice().sort(),o))throw new Error("Invalid permutation `dims`: "+JSON.stringify(n.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=n.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new po({ndim:this.dims.length+1})]}computeOutputShape(n){n=Vr(n);let o=n.slice();return this.dims.forEach((i,s)=>{o[s+1]=n[i]}),o}call(n,o){return Ur(sr(n),this.dimsIncludingBatch)}getConfig(){let n={dims:this.dims},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Permute",t})();tt.registerClass(bSe);var xSe=(()=>{class t extends gr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null?this.maskValue=n.maskValue==null?0:n.maskValue:this.maskValue=0}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={maskValue:this.maskValue};return Object.assign(o,n),o}computeMask(n,o){let i=sr(n);return gC(xm(i,this.maskValue),-1)}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n),l=gC(xm(i,this.maskValue),-1,!0);return we(i,rt(l,i.dtype))})}}return t.className="Masking",t})();tt.registerClass(xSe);re();var vSe=(()=>{class t extends gr{constructor(n){if(super(n),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",n.batchInputShape==null&&n.inputShape==null){let o=null;n.batchSize!=null&&(o=n.batchSize),n.inputLength==null?this.batchInputShape=[o,null]:this.batchInputShape=[o].concat(Fn(n.inputLength))}this.inputDim=n.inputDim,Ri(this.inputDim,"inputDim"),this.outputDim=n.outputDim,Ri(this.outputDim,"outputDim"),this.embeddingsInitializer=to(n.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=mo(n.embeddingsRegularizer),this.activityRegularizer=mo(n.activityRegularizer),this.embeddingsConstraint=ci(n.embeddingsConstraint),this.maskZero=n.maskZero,this.supportsMasking=n.maskZero,this.inputLength=n.inputLength}build(n){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(n){}computeMask(n,o){return Pe(()=>this.maskZero?(n=sr(n),xm(n,ir(n))):null)}computeOutputShape(n){if(n=Vr(n),this.inputLength==null)return[...n,this.outputDim];let o=Fn(this.inputLength);if(o.length!==n.length-1)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);{let i=0;for(let s=0;s<o.length;++s){let a=o[s],l=n[s+1];if(a!=null&&l!=null&&a!==l)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);a==null&&(o[i]=l),i++}}return[n[0],...o,this.outputDim]}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n);i.dtype!=="int32"&&(i=Vl(i,"int32"));let s=JQ(this.embeddings.read(),Se(i,[i.size]));return Se(s,Vr(this.computeOutputShape(i.shape)))})}getConfig(){let n={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:So(this.embeddingsInitializer),embeddingsRegularizer:Rn(this.embeddingsRegularizer),activityRegularizer:Rn(this.activityRegularizer),embeddingsConstraint:ui(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Embedding",t})();tt.registerClass(vSe);re();re();var Yv=class extends gr{constructor(r){super(r||{}),this.supportsMasking=!0}mergeFunction(r){throw new xr}computeElementwiseOpOutputShape(r,n){if(r==null||n==null)return null;if(r.length<n.length)return this.computeElementwiseOpOutputShape(n,r);if(n.length===0)return r;let o=r.slice(0,r.length-n.length);for(let i=0;i<n.length;++i){let s=r[r.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)o.push(null);else if(s===1)o.push(a);else if(a===1)o.push(s);else{if(s!==a)throw new Ie("Operands could not be broadcast together with shapes "+JSON.stringify(r)+" "+JSON.stringify(n));o.push(s)}}return o}build(r){if(Array.isArray(r)&&!Array.isArray(r[0])&&(r=[Vr(r)]),r=r,r.length<2)throw new Ie(`A merge layer should be called on an Array of at least 2 inputs. Got ${r.length} input(s).`);let n=[];for(let s of r)s!=null&&s[0]!==null&&n.push(s[0]);if(n=zp(n),n.length>1)throw new Ie(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(r)}.`);let o=r[0]==null?null:r[0].slice(1);for(let s=1;s<r.length;++s){let a=r[s]==null?null:r[s].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}let i=r.map(s=>s.length);r.indexOf(null)===-1&&zp(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return Pe(()=>{if(r=r,this.reshapeRequired){let o=[],i=r.map(s=>s.rank);if(i.indexOf(null)===-1){let s=Vh(i);for(let a of r){let l=a.rank;for(let u=0;u<s-l;++u)a=Uv(a,1);o.push(a)}return this.mergeFunction(o)}else{let s=!1;for(let u of r){let c=u.rank;if(c==null){let f=u.shape,d=f[0],p=f.slice(1).concat([d]),m=Se(u,[d].concat(Up(f.slice(1))));m=Ur(m,[1,0]),m=Se(m,p),o.push(m),s=!0}else if(c>1){let f=Ou(1,c).concat([0]);o.push(Ur(u,f)),s=!0}else o.push(u)}let a=this.mergeFunction(o),l=a.rank;if(s){if(l==null){let u=a.shape,c=u.length,f=u[c-1],d=[f].concat(u.slice(0,u.length-1));a=Se(Ur(Se(a,[-1,f]),[1,0]),d)}else if(l>1){let u=[l-1].concat(Ou(0,l-1));a=Ur(a,u)}}return a}}else return this.mergeFunction(r)})}computeOutputShape(r){r=r;let n;r[0]==null?n=null:n=r[0].slice(1);for(let i=1;i<r.length;++i){let s=r[i]==null?null:r[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let o=[];for(let i of r)i!=null&&i[0]!==null&&o.push(i[0]);return o=zp(o),o.length===1?n=o.concat(n):n=[null].concat(n),n}computeMask(r,n){return Pe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ie("`mask` should be an Array");if(!Array.isArray(r))throw new Ie("`inputs` should be an Array");if(n.length!==r.length)throw new Ie(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${r.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Ci(i,0));let o=n[0];for(let i=1;i<n.length-1;++i)o=za(o,n[i]);return o})}},wSe=(()=>{class t extends Yv{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return o})}}return t.className="Add",t})();tt.registerClass(wSe);var _Se=(()=>{class t extends Yv{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=we(o,n[i]);return o})}}return t.className="Multiply",t})();tt.registerClass(_Se);var SSe=(()=>{class t extends Yv{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return we(1/n.length,o)})}}return t.className="Average",t})();tt.registerClass(SSe);var CSe=(()=>{class t extends Yv{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=Wu(o,n[i]);return o})}}return t.className="Maximum",t})();tt.registerClass(CSe);var ESe=(()=>{class t extends Yv{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=Hf(o,n[i]);return o})}}return t.className="Minimum",t})();tt.registerClass(ESe);var TSe=(()=>{class t extends Yv{constructor(n){super(n),this.DEFAULT_AXIS=-1,n==null&&(n={}),this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){if(!(Array.isArray(n)&&Array.isArray(n[0]))||n.length===1)throw new Ie("A `Concatenate` layer should be called on a list of at least 2 inputs");n=n;let o=!0;for(let s of n)if(s!=null){o=!1;break}if(o)return;let i=[];for(let s=0;s<n.length;++s){let a=n[s].slice();a.splice(this.axis,1);let l=!1;for(let u of i)if(H.arraysEqual(u,a)){l=!0;break}l||i.push(a)}if(i.length>1)throw new Ie("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(n))}mergeFunction(n){return Pe(()=>eM(n,this.axis))}computeOutputShape(n){if(!(Array.isArray(n)&&Array.isArray(n[0])))throw new Ie("A `Concatenate` layer should be called on a list of inputs.");let o=n,i=o[0].slice(),s=this.axis<0?i.length+this.axis:this.axis;for(let a of o.slice(1)){if(i[s]==null||a[s]==null){i[s]=null;break}i[s]+=a[s]}return i}computeMask(n,o){if(o==null)return null;if(!Array.isArray(o))throw new Ie("`mask` should be an array for Concatenate");if(!Array.isArray(n))throw new Ie("`inputs` should be an array for Concatenate");if(o.length!==n.length)throw new Ie(`Mismatch in the length of mask (${o.length}) and the legnth of inputs (${n.length})`);return Pe(()=>{let i=!0;if(o.forEach(l=>{if(l!=null){i=!1;return}}),i)return null;let s=[];for(let l=0;l<n.length;++l)o[l]==null?s.push(rt(Cs(n[l]),"bool")):o[l].rank<n[l].rank?s.push(Ci(o[l],-1)):s.push(o[l]);let a=Nn(s,this.axis);return Qk(a,-1,!1)})}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Concatenate",t})();tt.registerClass(TSe);function h6(t,r){for(;t<0;)t+=r;return t}function W2r(t,r,n){if(t.shape.length>3||r.shape.length>3)throw new xr("batchDot is not implemented for tensors of 4D or higher rank yet");if(H.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),H.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${r.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||r.dtype==="complex64")throw new xr("batchDot is not implemented for complex64-type Tensors yet.");let o=t.shape.length,i=r.shape.length;n==null&&(n=[o-1,i-2]);let s=n;return Pe(()=>{let a;if(o>i){a=o-i;let u=[];for(let c=0;c<a;++c)u.push(1);r=Se(r,r.shape.concat(u))}else if(i>o){a=i-o;let u=[];for(let c=0;c<a;++c)u.push(1);t=Se(t,t.shape.concat(u))}else a=0;let l;if(t.shape.length===2&&r.shape.length===2)s[0]===s[1]?l=kt(we(t,r),s[0]):l=kt(we(Ur(t,[1,0]),r),s[1]);else{let u=s[0]!==t.shape.length-1,c=s[1]===r.shape.length-1;l=zr(t,r,u,c)}if(a>0){let u;o>i?u=o+i-3:u=o-1;let c=[];for(let f=u;f<u+a;++f)c.push(f);l=Rc(l,c)}return l.shape.length===1&&(l=Ci(l,1)),l})}var ASe=(()=>{class t extends Yv{constructor(n){super(n),this.axes=n.axes,this.normalize=n.normalize==null?!1:n.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){H.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0],i=n[1];if(o.length>3||i.length>3)throw new xr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);if(o[s[0]]!==i[s[1]])throw new Ie(`Dimension incompatibility: ${o[s[0]]} !== ${i[s[1]]}`)}mergeFunction(n){if(n.length!==2)throw new Ie(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${n.length} input(s).`);let o=n[0],i=n[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,l)=>h6(a,n[l].shape.length)):s=[h6(this.axes,o.shape.length),h6(this.axes,i.shape.length)],this.normalize&&(o=a6(o,s[0]),i=a6(i,s[1])),W2r(o,i,s)}interpretAxes(n,o){let i;return Array.isArray(this.axes)?i=this.axes:i=[h6(this.axes,n.length),h6(this.axes,o.length)],i}computeOutputShape(n){H.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0].slice(),i=n[1].slice();if(o.length>3||i.length>3)throw new xr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);o.splice(s[0],1),i.splice(s[1],1),i.splice(0,1);let a=o.concat(i);return a.length===1&&a.push(1),a}computeMask(n,o){return null}getConfig(){let n={axes:this.axes,normalize:this.normalize},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dot",t})();tt.registerClass(ASe);re();var kSe=(()=>{class t extends gr{constructor(n){super(n),this.supportsMasking=!0,this.stddev=n.stddev}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={stddev:this.stddev};return Object.assign(o,n),o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n);return T2(()=>Ke(tM(i.shape,0,this.stddev),i),()=>i,o.training||!1)})}}return t.className="GaussianNoise",t})();tt.registerClass(kSe);var ISe=(()=>{class t extends gr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=sr(n);return this.rate>0&&this.rate<1?T2(()=>{let a=Math.sqrt(this.rate/(1-this.rate));return we(i,tM(i.shape,1,a))},()=>i,o.training||!1):i})}}return t.className="GaussianDropout",t})();tt.registerClass(ISe);var DSe=(()=>{class t extends gr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate,this.noiseShape=n.noiseShape}_getNoiseShape(n){return this.noiseShape||sr(n).shape}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return Pe(()=>{if(this.rate<1&&this.rate>0){let i=this._getNoiseShape(n);return T2(()=>{let a=sr(n),c=-1.6732632423543772*1.0507009873554805,f=Jl(Mc(i),this.rate);f=Vl(f,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,m=Ke(we(a,f),we(Ke(f,-1),c));return Ke(we(m,d),p)},()=>sr(n),o.training||!1)}return n})}}return t.className="AlphaDropout",t})();tt.registerClass(DSe);re();re();function g6(t,r,n,o,i,s=.001){let a;if(t.rank===2)a=l8(t,r,n,o,i,s);else if(t.rank===3)a=u8(t,r,n,o,i,s);else if(t.rank===4)a=c8(t,r,n,o,i,s);else throw new xr(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function q2r(t,r,n,o,i=.001){return Pe(()=>{let s=CC(t,o),a=s.mean,l=s.variance;return[g6(t,a,l,n,r,i),a,l]})}function H2r(t,r,n,o,i=.001){return Pe(()=>{let s=CC(t,o),a=s.mean,l=s.variance,u=[];for(let h of Ou(0,t.rank))o.indexOf(h)!==-1?u.push(1):u.push(t.shape[h]);let c=Se(a,u),f=Se(l,u),d=r==null?null:Se(r,u),p=n==null?null:Se(n,u);return[g6(t,c,f,p,d,i),a,l]})}function Y2r(t,r,n,o,i=.001){return H.arraysEqual(o.slice().sort(),Ou(0,t.rank-1))?q2r(t,r,n,o,i):H2r(t,r,n,o,i)}var NSe=(()=>{class t extends gr{constructor(n){n==null&&(n={}),super(n),this.supportsMasking=!0,this.axis=n.axis==null?-1:n.axis,this.momentum=n.momentum==null?.99:n.momentum,this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=to(n.betaInitializer||"zeros"),this.gammaInitializer=to(n.gammaInitializer||"ones"),this.movingMeanInitializer=to(n.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=to(n.movingVarianceInitializer||"ones"),this.betaConstraint=ci(n.betaConstraint),this.gammaConstraint=ci(n.gammaConstraint),this.betaRegularizer=mo(n.betaRegularizer),this.gammaRegularizer=mo(n.gammaRegularizer)}build(n){n=Vr(n);let o=this.axis>=0?this.axis:this.axis+n.length,i=n[o];if(i==null)throw new Ie(`Axis ${o} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(n)}.`);this.inputSpec=[new po({ndim:n.length,axes:{[o]:i}})];let s=[i];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(n,o){return Pe(()=>{let i=o.training==null?!1:o.training,s=sr(n),a=s.shape,l=a.length,u=Ou(0,l),c=this.axis>=0?this.axis:this.axis+l;u.splice(c,1);let f=Bp(1,l);f[c]=a[c];let d=u.slice();d.sort();let p=!H.arraysEqual(d,Ou(0,l).slice(0,l-1)),m=()=>{if(p){let v=Se(this.movingMean.read(),f),w=Se(this.movingVariance.read(),f),_=this.center?Se(this.beta.read(),f):null,C=this.scale?Se(this.gamma.read(),f):null;return g6(s,v,w,_,C,this.epsilon)}else return g6(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!i)return m();let[h,g,y]=Y2r(s,this.gamma.read(),this.beta.read(),u,this.epsilon),b=(v,w,_)=>{Pe(()=>{let C=1-_,S=v.read(),E=we(wt(S,w),C);v.write(wt(S,E))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,y,this.momentum)})(),h})}getConfig(){let n={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:So(this.betaInitializer),gammaInitializer:So(this.gammaInitializer),movingMeanInitializer:So(this.movingMeanInitializer),movingVarianceInitializer:So(this.movingVarianceInitializer),betaRegularizer:Rn(this.betaRegularizer),gammaRegularizer:Rn(this.gammaRegularizer),betaConstraint:ui(this.betaConstraint),gammaConstraint:ui(this.gammaConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BatchNormalization",t})();tt.registerClass(NSe);var FSe=(()=>{class t extends gr{constructor(n){if(n==null&&(n={}),super(n),this.axis=n.axis==null?-1:n.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let o of this.axis)if(!Number.isInteger(o))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=to(n.betaInitializer||"zeros"),this.gammaInitializer=to(n.gammaInitializer||"ones"),this.betaRegularizer=mo(n.betaRegularizer),this.gammaRegularizer=mo(n.gammaRegularizer),this.supportsMasking=!0}build(n){n=Vr(n);let o=n.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=o);for(let a of this.axis)if(a<0||a>=o)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==zp(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let i=this.axis.map(a=>n[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(n,o){let i=sr(n),s=i.shape,a=s.length;return Pe(()=>{let{mean:u,variance:c}=CC(i,this.axis,!0),f=Bp(1,a);for(let y of this.axis)f[y]=s[y];let d=y=>y!=null&&y.shape.length!==a?Se(y,f):y,p=this.scale?d(this.gamma.read()):null,m=this.center?d(this.beta.read()):null,h=[],g=[];for(let y=0;y<a;++y)this.axis.indexOf(y)!==-1?(h.push(s[y]),g.push(1)):(h.push(1),g.push(s[y]));return u=ya(u,h),c=ya(c,h),p!=null&&(p=ya(p,g)),m!=null&&(m=ya(m,g)),g6(i,u,c,m,p,this.epsilon)})}getConfig(){let n={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:So(this.betaInitializer),gammaInitializer:So(this.gammaInitializer),betaRegularizer:Rn(this.betaRegularizer),gammaRegularizer:Rn(this.gammaRegularizer)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LayerNormalization",t})();tt.registerClass(FSe);re();re();function X2r(t,r,n){return Pe(()=>{if(t.rank!==4)throw new Ie(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(r==null&&(r=[[1,1],[1,1]]),r.length!==2||r[0].length!==2||r[1].length!==2)throw new Ie("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Mu()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ie(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let o;return n==="channelsFirst"?o=[[0,0],[0,0],r[0],r[1]]:o=[[0,0],r[0],r[1],[0,0]],eu(t,o)})}var OSe=(()=>{class t extends gr{constructor(n){if(n==null&&(n={}),super(n),this.dataFormat=n.dataFormat==null?Mu():n.dataFormat,n.padding==null)this.padding=[[1,1],[1,1]];else if(typeof n.padding=="number")this.padding=[[n.padding,n.padding],[n.padding,n.padding]];else{if(n.padding=n.padding,n.padding.length!==2)throw new Ie(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${n.padding.length} array.`);let o,i;if(typeof n.padding[0]=="number")o=[n.padding[0],n.padding[0]],i=[n.padding[1],n.padding[1]];else{if(n.padding=n.padding,n.padding[0].length!==2)throw new Ie(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${n.padding[0].length} array.`);if(o=n.padding[0],n.padding[1].length!==2)throw new Ie(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${n.padding[1].length} array.`);i=n.padding[1]}this.padding=[o,i]}this.inputSpec=[new po({ndim:4})]}computeOutputShape(n){n=Vr(n);let o,i;return this.dataFormat==="channelsFirst"?(n[2]!=null&&n[2]>=0?o=n[2]+this.padding[0][0]+this.padding[0][1]:o=null,n[3]!=null&&n[3]>=0?i=n[3]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],n[1],o,i]):(n[1]!=null&&n[1]>=0?o=n[1]+this.padding[0][0]+this.padding[0][1]:o=null,n[2]!=null&&n[2]>=0?i=n[2]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],o,i,n[3]])}call(n,o){return Pe(()=>X2r(sr(n),this.padding,this.dataFormat))}getConfig(){let n={padding:this.padding,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ZeroPadding2D",t})();tt.registerClass(OSe);re();re();function $J(t,r,n,o,i,s){return Pe(()=>{Ko(i),w2e(s),Fu(o),n==null&&(n=[1,1]),o==null&&(o="valid"),i==null&&(i=Mu()),s==null&&(s="max"),t=m6(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=W1(t,r,n,l):a=M1(t,r,n,l),i==="channelsFirst"&&(a=Ur(a,[0,3,1,2])),a})}function pgt(t,r,n,o,i,s){return Pe(()=>{Ko(i),w2e(s),Fu(o),n==null&&(n=[1,1,1]),o==null&&(o="valid"),i==null&&(i=Mu()),s==null&&(s="max"),t=Q2e(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=H8(t,r,n,l):a=a8(t,r,n,l),i==="channelsFirst"&&(a=Ur(a,[0,4,1,2,3])),a})}var RJ=class extends gr{constructor(r){if(r.poolSize==null&&(r.poolSize=2),super(r),typeof r.poolSize=="number")this.poolSize=[r.poolSize];else if(Array.isArray(r.poolSize)&&r.poolSize.length===1&&typeof r.poolSize[0]=="number")this.poolSize=r.poolSize;else throw new Ie(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.poolSize)}`);if(Ri(this.poolSize,"poolSize"),r.strides==null)this.strides=this.poolSize;else if(typeof r.strides=="number")this.strides=[r.strides];else if(Array.isArray(r.strides)&&r.strides.length===1&&typeof r.strides[0]=="number")this.strides=r.strides;else throw new Ie(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.strides)}`);Ri(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,Fu(this.padding),this.inputSpec=[new po({ndim:3})]}computeOutputShape(r){r=Vr(r);let n=_c(r[1],this.poolSize[0],this.padding,this.strides[0]);return[r[0],n,r[2]]}call(r,n){return Pe(()=>{this.invokeCallHook(r,n),r=Uv(sr(r),2);let o=this.poolingFunction(sr(r),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Rc(o,[2])})}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(r,n),r}},MSe=(()=>{class t extends RJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Fu(s),$J(n,o,i,s,a,"max")}}return t.className="MaxPooling1D",t})();tt.registerClass(MSe);var RSe=(()=>{class t extends RJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Fu(s),$J(n,o,i,s,a,"avg")}}return t.className="AveragePooling1D",t})();tt.registerClass(RSe);var jJ=class extends gr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==2)throw new Ie(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides];Ri(this.poolSize,"poolSize"),Ri(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ko(this.dataFormat),Fu(this.padding),this.inputSpec=[new po({ndim:4})]}computeOutputShape(r){r=Vr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2];return n=_c(n,this.poolSize[0],this.padding,this.strides[0]),o=_c(o,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o]:[r[0],n,o,r[3]]}call(r,n){return Pe(()=>(this.invokeCallHook(r,n),this.poolingFunction(sr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},jSe=(()=>{class t extends jJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Fu(s),$J(n,o,i,s,a,"max")}}return t.className="MaxPooling2D",t})();tt.registerClass(jSe);var PSe=(()=>{class t extends jJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Fu(s),$J(n,o,i,s,a,"avg")}}return t.className="AveragePooling2D",t})();tt.registerClass(PSe);var PJ=class extends gr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==3)throw new Ie(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides,r.strides];Ri(this.poolSize,"poolSize"),Ri(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ko(this.dataFormat),Fu(this.padding),this.inputSpec=[new po({ndim:5})]}computeOutputShape(r){r=Vr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2],i=this.dataFormat==="channelsFirst"?r[4]:r[3];return n=_c(n,this.poolSize[0],this.padding,this.strides[0]),o=_c(o,this.poolSize[1],this.padding,this.strides[1]),i=_c(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o,i]:[r[0],n,o,i,r[4]]}call(r,n){return Pe(()=>(this.invokeCallHook(r,n),this.poolingFunction(sr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},LSe=(()=>{class t extends PJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Fu(s),pgt(n,o,i,s,a,"max")}}return t.className="MaxPooling3D",t})();tt.registerClass(LSe);var BSe=(()=>{class t extends PJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Fu(s),pgt(n,o,i,s,a,"avg")}}return t.className="AveragePooling3D",t})();tt.registerClass(BSe);var LJ=class extends gr{constructor(r){super(r),this.inputSpec=[new po({ndim:3})]}computeOutputShape(r){return[r[0],r[2]]}call(r,n){throw new xr}},$Se=(()=>{class t extends LJ{constructor(n){super(n||{})}call(n,o){return Pe(()=>{let i=sr(n);return yo(i,1)})}}return t.className="GlobalAveragePooling1D",t})();tt.registerClass($Se);var zSe=(()=>{class t extends LJ{constructor(n){super(n||{})}call(n,o){return Pe(()=>{let i=sr(n);return Us(i,1)})}}return t.className="GlobalMaxPooling1D",t})();tt.registerClass(zSe);var BJ=class extends gr{constructor(r){super(r),this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ko(this.dataFormat),this.inputSpec=[new po({ndim:4})]}computeOutputShape(r){return r=r,this.dataFormat==="channelsLast"?[r[0],r[3]]:[r[0],r[1]]}call(r,n){throw new xr}getConfig(){let r={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},USe=(()=>{class t extends BJ{call(n,o){return Pe(()=>{let i=sr(n);return this.dataFormat==="channelsLast"?yo(i,[1,2]):yo(i,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();tt.registerClass(USe);var VSe=(()=>{class t extends BJ{call(n,o){return Pe(()=>{let i=sr(n);return this.dataFormat==="channelsLast"?Us(i,[1,2]):Us(i,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();tt.registerClass(VSe);re();re();var zJ=class extends gr{constructor(r){super(r),this.layer=r.layer}build(r){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(r){this.layer!=null&&(this.layer.trainable=r)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(r){this.layer.setWeights(r)}getConfig(){let r={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(r,n),r}setFastWeightInitDuringBuild(r){super.setFastWeightInitDuringBuild(r),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(r)}static fromConfig(r,n,o={}){let i=n.layer,s=Df(i,o);delete n.layer;let a={layer:s};return Object.assign(a,n),new r(a)}},GSe=(()=>{class t extends zJ{constructor(n){super(n),this.supportsMasking=!0}build(n){if(n=Vr(n),n.length<3)throw new Ie(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(n)}`);this.inputSpec=[{shape:n}];let o=[n[0]].concat(n.slice(2));this.layer.built||(this.layer.build(o),this.layer.built=!0),super.build(n)}computeOutputShape(n){n=Vr(n);let o=[n[0]].concat(n.slice(2)),i=this.layer.computeOutputShape(o),s=n[1];return[i[0],s].concat(i.slice(1))}call(n,o){return Pe(()=>(n=sr(n),aSe((l,u)=>[sr(this.layer.call(l,o)),[]],n,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();tt.registerClass(GSe);function K2r(t){Yy(mht,"BidirectionalMergeMode",t)}var Z2r="concat",WSe=(()=>{class t extends zJ{constructor(n){super(n);let o=n.layer.getConfig(),i={};i.className=n.layer.getClassName(),i.config=o,this.forwardLayer=Df(i),o.goBackwards=o.goBackwards!==!0;let s={};if(s.className=n.layer.getClassName(),s.config=o,this.backwardLayer=Df(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=n.mergeMode===void 0?Z2r:n.mergeMode,K2r(this.mergeMode),n.weights)throw new xr("weights support is not implemented for Bidirectional layer yet.");this._stateful=n.layer.stateful,this.returnSequences=n.layer.returnSequences,this.returnState=n.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=n.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(n){this._trainable=n,this.forwardLayer!=null&&(this.forwardLayer.trainable=n),this.backwardLayer!=null&&(this.backwardLayer.trainable=n)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(n){let o=n.length,i=Math.floor(o/2);this.forwardLayer.setWeights(n.slice(0,i)),this.backwardLayer.setWeights(n.slice(i))}computeOutputShape(n){let o=this.forwardLayer.computeOutputShape(n);Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o;let i,s,a;return this.returnState&&(a=o.slice(1)),i=o[0],i=i,this.mergeMode==="concat"?(i[i.length-1]*=2,s=[i]):this.mergeMode==null?s=[i,i.slice()]:s=[i],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[i].concat(a).concat(a.slice()):na(s)}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=sSe(n,i,s,this.numConstants);if(n=a.inputs,i=a.initialState,s=a.constants,Array.isArray(n)&&(i=n.slice(1),n=n[0]),(i==null||i.length===0)&&s==null)return super.apply(n,o);let l=[],u=[];if(i!=null){let f=i.length;if(f%2>0)throw new Ie("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");o.initialState=i,l.push(...i);let d=i.map(p=>new po({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,f/2),this.backwardLayer.stateSpec=d.slice(f/2),u.push(...d)}if(s!=null)throw new xr("Support for constants in Bidirectional layers is not implemented yet.");let c=l[0]instanceof Gl;for(let f of l)if(f instanceof Gl!==c)throw new Ie("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let m=super.apply(f,o);return this.inputSpec=p,m}else return super.apply(n,o)}call(n,o){return Pe(()=>{let i=o.initialState,s,a;if(i==null)s=this.forwardLayer.call(n,o),a=this.backwardLayer.call(n,o);else{let c=i.slice(0,i.length/2),f=i.slice(i.length/2);s=this.forwardLayer.call(n,Object.assign(o,{initialState:c})),a=this.backwardLayer.call(n,Object.assign(o,{initialState:f}))}let l;this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=us(a,1));let u;return this.mergeMode==="concat"?u=eM([s,a]):this.mergeMode==="sum"?u=Ke(s,a):this.mergeMode==="ave"?u=we(.5,Ke(s,a)):this.mergeMode==="mul"?u=we(s,a):this.mergeMode==null&&(u=[s,a]),this.returnState?this.mergeMode==null?u.concat(l):[u].concat(l):u})}resetStates(n){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(n){Uh(this.forwardLayer.name,()=>{this.forwardLayer.build(n)}),Uh(this.backwardLayer.name,()=>{this.backwardLayer.build(n)}),this.built=!0}computeMask(n,o){Array.isArray(o)&&(o=o[0]);let i;if(this.returnSequences?this.mergeMode==null?i=[o,o]:i=o:this.mergeMode==null?i=[null,null]:i=null,this.returnState){let a=this.forwardLayer.states.map(l=>null);return Array.isArray(i)?i.concat(a).concat(a):[i].concat(a).concat(a)}else return i}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(n),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(n)}getConfig(){let n={mergeMode:this.mergeMode},o=super.getConfig();return Object.assign(n,o),n}static fromConfig(n,o){let i=Df(o.layer);if(delete o.layer,o.numConstants!=null)throw new xr("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let s=o;return s.layer=i,new n(s)}}return t.className="Bidirectional",t})();tt.registerClass(WSe);re();var qSe=(()=>{class t extends gr{constructor(n){super(n),this.scale=n.scale,n.offset?this.offset=n.offset:this.offset=0}getConfig(){let n={scale:this.scale,offset:this.offset},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return Pe(()=>(n=sr(n),n.dtype!=="float32"&&(n=Vl(n,"float32")),Ke(we(n,this.scale),this.offset)))}}return t.className="Rescaling",t})();tt.registerClass(qSe);re();var{resizeBilinear:Q2r,cropAndResize:J2r}=qu,HSe=(()=>{class t extends gr{constructor(n){super(n),this.height=n.height,this.width=n.width}centerCrop(n,o,i,s,a,l,u,c){return Pe(()=>{let f,d=!1,p=o/l,m=i/u,h=(s+o)/l,g=(a+i)/u,y=[p,m,h,g],b=[];n.rank===3?(d=!0,f=Qi([n])):f=n;for(let C=0;C<f.shape[0];C++)b.push(y);let x=La(b,[b.length,4]),v=g0(0,b.length,1,"int32"),_=J2r(f,x,v,[s,a],"nearest");return d?Vl(sr(Ua(_)),c):Vl(_,c)})}upsize(n,o,i,s){return Pe(()=>{let a=Q2r(n,[o,i]);return Vl(a,s)})}call(n,o){return Pe(()=>{let i=sr(n),s=i.dtype,a=i.shape,l=a[a.length-3],u=a[a.length-2],c=0;l!==this.height&&(c=Math.floor((l-this.height)/2));let f=0;return u!==this.width&&(f=Math.floor((u-this.width)/2),f===0&&(f=1)),c>=0&&f>=0?this.centerCrop(i,c,f,this.height,this.width,l,u,s):this.upsize(n,this.height,this.width,s)})}getConfig(){let n={height:this.height,width:this.width},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Vr(n);let o=n.length-3,i=n.length-2;return n[o]=this.height,n[i]=this.width,n}}return t.className="CenterCrop",t})();tt.registerClass(HSe);re();re();re();re();function mgt(t,r,n,o){let i=sr(t);if(i.dtype!=="int32"&&(i=Vl(i,"int32")),r==="int")return i;let s=i.shape;if(i.rank===0&&(i=Ci(i,-1)),r==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Ci(i,-1)),i.rank>2)throw new Ie(`When outputMode is not int, maximum output rank is 2 Received outputMode ${r} and input shape ${s} which would result in output rank ${i.rank}.`);let a=["multiHot","oneHot"].includes(r),l=i,u;if(typeof o<"u"&&r==="count"?u=QR(l,o,n,a):u=QR(l,[],n,a),r!=="tfIdf")return u;if(o)return we(u,o);throw new Ie("When outputMode is 'tfIdf', weights must be provided.")}var YSe=(()=>{class t extends gr{constructor(n){super(n),this.numTokens=n.numTokens,n.outputMode?this.outputMode=n.outputMode:this.outputMode="multiHot"}getConfig(){let n={numTokens:this.numTokens,outputMode:this.outputMode},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){return n=Vr(n),n==null?[this.numTokens]:this.outputMode==="oneHot"&&n[n.length-1]!==1?(n.push(this.numTokens),n):(n[n.length-1]=this.numTokens,n)}call(n,o){return Pe(()=>{n=sr(n),n.dtype!=="int32"&&(n=Vl(n,"int32"));let i;if(typeof o.countWeights<"u"){if(this.outputMode!=="count")throw new Ie(`countWeights is not used when outputMode !== count.
              Received countWeights=${o.countWeights}`);i=sr(o.countWeights)}let s=Us(n),a=px(n),l=ni(this.numTokens,s).bufferSync().get(0),u=Jl(a,0).bufferSync().get(0);if(!(l&&u))throw new Ie(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return mgt(n,this.outputMode,this.numTokens,i)})}}return t.className="CategoryEncoding",t})();tt.registerClass(YSe);re();var tSr=["bilinear","nearest"],hgt=new Set(tSr),XSe=(()=>{class t extends gr{constructor(n){if(super(n),this.height=n.height,this.width=n.width,n.interpolation)if(hgt.has(n.interpolation))this.interpolation=n.interpolation;else throw new Ie(`Invalid interpolation parameter: ${n.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!n.cropToAspectRatio}computeOutputShape(n){n=Vr(n);let o=n[2];return[this.height,this.width,o]}getConfig(){let n={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return Pe(()=>{let i=[this.height,this.width];if(this.interpolation==="bilinear")return qu.resizeBilinear(n,i,!this.cropToAspectRatio);if(this.interpolation==="nearest")return qu.resizeNearestNeighbor(n,i,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...hgt]} are supported`)})}}return t.className="Resizing",t})();tt.registerClass(XSe);re();var ggt=(()=>{class t{constructor(n){this.seed=n}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var ygt=(()=>{class t extends gr{constructor(n){super(n),this.randomGenerator=new ggt(n.seed)}getConfig(){let n={seed:this.randomGenerator.seed},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BaseRandomLayer",t})();re();var rSr=["bilinear","nearest"],bgt=new Set(rSr),KSe=(()=>{class t extends ygt{constructor(n){super(n);let{factor:o,interpolation:i="bilinear"}=n;if(this.factor=o,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ie(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ie(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ie(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(i)if(bgt.has(i))this.interpolation=i;else throw new Ie(`Invalid interpolation parameter: ${i} is not implemented`)}getConfig(){let n={factor:this.factor,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Vr(n);let o=n[2];return[this.imgHeight,-1,o]}call(n,o){return Pe(()=>{let i=sr(n);this.imgHeight=i.shape[i.shape.length-3];let s=i.shape[i.shape.length-2];this.widthFactor=Mc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);let l=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return qu.resizeBilinear(n,l);case"nearest":return qu.resizeNearestNeighbor(n,l);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...bgt]} are supported`)}})}}return t.className="RandomWidth",t})();tt.registerClass(KSe);function nSr(t){return new A2(t)}function oSr(t){return new X2e(t)}function iSr(t){return new q2e(t)}function sSr(t){return new H2e(t)}function aSr(t){return new Y2e(t)}function lSr(t){return new Z2e(t)}function uSr(t){return new K2e(t)}function cSr(t){return new rSe(t)}function fSr(t){return new kJ(t)}function dSr(t){return new J2e(t)}function pSr(t){return new IJ(t)}function mSr(t){return new eSe(t)}function hSr(t){return new tSe(t)}function gSr(t){return new nSe(t)}function ySr(t){return new oSe(t)}function bSr(t){return new iSe(t)}function xSr(t){return new hSe(t)}function vSr(t){return new pSe(t)}function wSr(t){return new MJ(t)}function _Sr(t){return new dSe(t)}function SSr(t){return new mSe(t)}function CSr(t){return new gSe(t)}function ESr(t){return new ySe(t)}function TSr(t){return new bSe(t)}function ASr(t){return new vSe(t)}function kSr(t){return new wSe(t)}function ISr(t){return new SSe(t)}function DSr(t){return new TSe(t)}function NSr(t){return new CSe(t)}function FSr(t){return new ESe(t)}function OSr(t){return new _Se(t)}function MSr(t){return new ASe(t)}function RSr(t){return new NSe(t)}function jSr(t){return new FSe(t)}function PSr(t){return new OSe(t)}function ZSe(t){return new RSe(t)}function LSr(t){return ZSe(t)}function BSr(t){return ZSe(t)}function QSe(t){return new PSe(t)}function $Sr(t){return QSe(t)}function zSr(t){return QSe(t)}function JSe(t){return new BSe(t)}function USr(t){return JSe(t)}function VSr(t){return JSe(t)}function GSr(t){return new $Se(t)}function WSr(t){return new USe(t)}function xgt(t){return new zSe(t)}function vgt(t){return new VSe(t)}function wgt(t){return new MSe(t)}function _gt(t){return new jSe(t)}function qSr(t){return new LSe(t)}function HSr(t){return new uSe(t)}function YSr(t){return new NJ(t)}function XSr(t){return new cSe(t)}function KSr(t){return new cM(t)}function ZSr(t){return new lSe(t)}function QSr(t){return new DJ(t)}function JSr(t){return new fSe(t)}function eCr(t){return new OJ(t)}function tCr(t){return new Ky(t)}function rCr(t){return new FJ(t)}function nCr(t){return new WSe(t)}function oCr(t){return new GSe(t)}var iCr=xgt,sCr=vgt,aCr=wgt,lCr=_gt;function uCr(t){return new kSe(t)}function cCr(t){return new ISe(t)}function fCr(t){return new DSe(t)}function dCr(t){return new xSe(t)}function pCr(t){return new qSe(t)}function mCr(t){return new HSe(t)}function hCr(t){return new XSe(t)}function gCr(t){return new YSe(t)}function yCr(t){return new KSe(t)}re();var wCr=Fe();wCr.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});re();re();var Sgt;(function(t){let r;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(r=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(Sgt||(Sgt={}));re();re();re();re();re();re();re();re();re();F1();re();var xEr=jf(p3());re();var yEr=jf(p3());re();re();re();var w5o=Symbol("out"),_5o=Symbol("field"),S5o=Symbol("quote"),C5o=Symbol("quoteafterquote"),E5o=Symbol("quoteinquote");re();re();re();re();re();re();re();re();re();function at(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&H.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the CPU backend.`)})}var DEr=va.whereImpl,Egt=(()=>{class t extends lg{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new f1(this,Uf())}write(n,o,i){this.firstUse&&(this.firstUse=!1,Fe().get("IS_NODE")&&ce.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let s={id:this.nextDataId()};return this.data.set(s,{values:n,dtype:i,refCount:1}),s}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&H.isString(i[0])){let a=i.map(l=>H.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return{dataId:s,shape:n,dtype:o}}refCount(n){return this.data.has(n)?this.data.get(n).refCount:0}incRef(n){let o=this.data.get(n);o.refCount++}decRef(n){if(this.data.has(n)){let o=this.data.get(n);o.refCount--}}move(n,o,i,s,a){this.data.set(n,{values:o,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}read(n){return Be(this,null,function*(){return this.readSync(n)})}readSync(n){let{dtype:o,complexTensorInfos:i}=this.data.get(n);if(o==="complex64"){let s=this.readSync(i.real.dataId),a=this.readSync(i.imag.dataId);return ce.mergeRealAndImagArrays(s,a)}return H.convertBackendValuesAndArrayBuffer(this.data.get(n).values,o)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>H.decodeString(s));return Qt(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qt(n.shape,n.dtype,o)}makeOutput(n,o,i){return Uf().makeTensorFromTensorInfo(this.makeTensorInfo(o,i,n),this)}disposeData(n,o=!1){if(this.data.has(n)){if(this.data.get(n).refCount--,!o&&this.data.get(n).refCount>0)return!1;let{complexTensorInfos:i}=this.data.get(n);i!=null&&(this.disposeData(i.real.dataId,!0),this.disposeData(i.imag.dataId,!0)),this.data.delete(n)}return!0}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}time(n){return Be(this,null,function*(){let o=H.now();return n(),{kernelMs:H.now()-o}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(n){at([n],"where");let o=this.readSync(n.dataId);return DEr(n.shape,o)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var NCe={};cn(NCe,{addImpl:()=>nCe,bincountImpl:()=>pM,bincountReduceImpl:()=>VJ,bitwiseAndImpl:()=>oCe,castImpl:()=>rCe,ceilImpl:()=>iCe,concatImpl:()=>GJ,equalImpl:()=>sCe,expImpl:()=>lCe,expm1Impl:()=>cCe,floorDivImpl:()=>dCe,floorImpl:()=>fCe,gatherNdImpl:()=>WJ,gatherV2Impl:()=>qJ,greaterEqualImpl:()=>mCe,greaterImpl:()=>pCe,lessEqualImpl:()=>gCe,lessImpl:()=>hCe,linSpaceImpl:()=>HJ,logImpl:()=>yCe,maxImpl:()=>YJ,maximumImpl:()=>bCe,minimumImpl:()=>xCe,multiplyImpl:()=>b6,negImpl:()=>vCe,notEqualImpl:()=>wCe,prodImpl:()=>_Ce,raggedGatherImpl:()=>XJ,raggedRangeImpl:()=>KJ,raggedTensorToTensorImpl:()=>ZJ,rangeImpl:()=>QJ,rsqrtImpl:()=>CCe,scatterImpl:()=>Hh,sigmoidImpl:()=>r0t,simpleAbsImpl:()=>tCe,sliceImpl:()=>TCe,sparseFillEmptyRowsImpl:()=>JJ,sparseReshapeImpl:()=>eee,sparseSegmentReductionImpl:()=>hM,sqrtImpl:()=>i0t,squaredDifferenceImpl:()=>ACe,staticRegexReplaceImpl:()=>kCe,stridedSliceImpl:()=>tee,stringNGramsImpl:()=>ree,stringSplitImpl:()=>nee,stringToHashBucketFastImpl:()=>oee,subImpl:()=>DCe,tileImpl:()=>iee,topKImpl:()=>see,transposeImpl:()=>mM,uniqueImpl:()=>aee});re();function tCe(t){let r=new Float32Array(t.length);for(let n=0;n<t.length;++n)r[n]=Math.abs(t[n]);return r}var NEr=t=>{let{x:r}=t.inputs,n=t.backend;at(r,"abs");let o=new Float32Array(H.sizeFromShape(r.shape)),i=n.data.get(r.dataId).values;return o=tCe(i),n.makeOutput(o,r.shape,r.dtype)},Tgt={kernelName:mb,backendName:"cpu",kernelFunc:NEr};re();re();function dn(t){return(r,n,o,i,s)=>{let a=ce.assertAndGetBroadcastShape(r,n),l=a.length,u=H.computeStrides(a),c=H.sizeFromShape(a),f=H.getTypedArrayFromDType(s,c),d=r.length,p=n.length,m=H.computeStrides(r),h=H.computeStrides(n),g=ce.getBroadcastDims(r,a),y=ce.getBroadcastDims(n,a);if(g.length+y.length===0)for(let b=0;b<f.length;++b)f[b]=t(o[b%o.length],i[b%i.length]);else for(let b=0;b<f.length;++b){let x=H.indexToLoc(b,l,u),v=x.slice(-d);g.forEach(S=>v[S]=0);let w=H.locToIndex(v,d,m),_=x.slice(-p);y.forEach(S=>_[S]=0);let C=H.locToIndex(_,p,h);f[b]=t(o[w],i[C])}return[f,a]}}re();re();re();re();function Fs(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=n.makeTensorInfo(o.shape,"complex64"),u=n.data.get(l.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(o.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},l}var Agt={kernelName:sS,backendName:"cpu",kernelFunc:Fs};function fM(t,r,n="float32"){if(n==="complex64"){let i=fM(t,r,"float32"),s=fM(t,r,"float32");return Fs({inputs:{real:i,imag:s},backend:t})}let o=H.makeZerosTypedArray(H.sizeFromShape(r),n);return t.makeTensorInfo(r,n,o)}re();function hl(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var kgt={kernelName:am,backendName:"cpu",kernelFunc:hl};re();function Wp(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var Igt={kernelName:LS,backendName:"cpu",kernelFunc:Wp};function rCe(t,r,n,o){if(o==="int32"){let i=Int32Array.from(t);return[r,"int32",i]}if(o==="bool"){let i=H.toTypedArray([0],n),[s,a]=dn((l,u)=>l!==u?1:0)(r,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${o}`)}function qp(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return hl({inputs:{x:i},backend:n});let f=fM(n,i.shape,i.dtype),d=qp({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=Fs({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){let f=Wp({inputs:{input:i},backend:n}),d=qp({inputs:{x:f},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(f),d}if(!H.hasEncodingLoss(i.dtype,s)){let f=hl({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:s}}let a=n.data.get(i.dataId).values,[l,u,c]=rCe(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}var Dgt={kernelName:sm,backendName:"cpu",kernelFunc:qp};function vn(t,r,n,o){return n==null?({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;at([a,l],t);let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=a.dtype==="string"?ce.fromUint8ToStringArray(c):c,p=a.dtype==="string"?ce.fromUint8ToStringArray(f):f,m=o||a.dtype,[h,g]=r(a.shape,l.shape,d,p,m);return u.makeTensorInfo(g,m,h)}:({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;if(a.dtype==="complex64"||l.dtype==="complex64"){let c=qp({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),f=u.data.get(c.dataId),d=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,m=u.data.get(d.dataId).values,h=u.data.get(p.dataId).values,g=qp({inputs:{x:l},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(g.dataId),b=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,v=u.data.get(b.dataId).values,w=u.data.get(x.dataId).values,[_,C,S]=n(a.shape,l.shape,m,h,v,w),E=u.makeTensorInfo(S,"float32",_),A=u.makeTensorInfo(S,"float32",C),N=Fs({inputs:{real:E,imag:A},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(A),N}else{let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=o||a.dtype,[p,m]=r(a.shape,l.shape,c,f,d);return u.makeTensorInfo(m,d,p)}}}function dM(t){return(r,n,o,i,s,a)=>{let l=ce.assertAndGetBroadcastShape(r,n),u=H.sizeFromShape(l),c=l.length,f=H.computeStrides(l),d=H.getTypedArrayFromDType("float32",u),p=H.getTypedArrayFromDType("float32",u),m=ce.getBroadcastDims(r,l),h=ce.getBroadcastDims(n,l),g=ce.mergeRealAndImagArrays(o,i),y=ce.mergeRealAndImagArrays(s,a),b=r.length,x=H.computeStrides(r),v=n.length,w=H.computeStrides(n);if(m.length+h.length===0)for(let _=0;_<d.length;_++){let C=_%g.length,S=_%y.length,E=t(g[C*2],g[C*2+1],y[S*2],y[S*2+1]);d[_]=E.real,p[_]=E.imag}else for(let _=0;_<d.length;_++){let C=H.indexToLoc(_,c,f),S=C.slice(-b);m.forEach(M=>S[M]=0);let E=H.locToIndex(S,b,x),A=C.slice(-v);h.forEach(M=>A[M]=0);let N=H.locToIndex(A,v,w),k=t(g[E*2],g[E*2+1],y[N*2],y[N*2+1]);d[_]=k.real,p[_]=k.imag}return[d,p,l]}}var nCe=dn((t,r)=>t+r),FEr=dM((t,r,n,o)=>({real:t+n,imag:r+o})),Zy=vn(zd,nCe,FEr),Ngt={kernelName:zd,backendName:"cpu",kernelFunc:Zy};re();function pM(t,r,n,o,i){let s=H.sizeFromShape(o),a=H.makeZerosTypedArray(i,n);for(let l=0;l<t.length;l++){let u=t[l];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(s>0?a[u]+=r[l]:a[u]+=1)}return a}function VJ(t,r,n,o=!1){let i=t.shape[0],s=t.shape[1],a=Qt([i,n],r.dtype);for(let l=0;l<i;l++)for(let u=0;u<s;u++){let c=t.get(l,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(o?a.set(1,l,c):r.size>0?a.set(a.get(l,c)+r.get(l,u),l,c):a.set(a.get(l,c)+1,l,c))}return a}re();var oCe=dn((t,r)=>t&r),OEr=vn(p1,oCe),Fgt={kernelName:p1,backendName:"cpu",kernelFunc:OEr};re();re();function sa(t){return(r,n,o)=>{let i=H.getArrayFromDType(n,r.length);for(let s=0;s<r.length;++s)i[s]=t(r[s],o);return i}}re();function _r(t,r,n){let o=sa(r);return Sc(t,o,n)}function Sc(t,r,n){return({inputs:o,attrs:i,backend:s})=>{let{x:a}=o;at(a,t);let l=s,u=l.data.get(a.dataId).values,c;if(a.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=ce.fromUint8ToStringArray(u)}else c=u;let f=n||a.dtype,d=r(c,f,i);return l.makeTensorInfo(a.shape,f,d)}}var iCe=sa(t=>Math.ceil(t)),MEr=Sc(bg,iCe),Ogt={kernelName:bg,backendName:"cpu",kernelFunc:MEr};re();function GJ(t,r,n,o){let i=H.getArrayFromDType(n,H.sizeFromShape(r));if(o&&n!=="string"){let s=0;t.forEach(a=>{let l=H.sizeFromShape(a.shape);i.set(a.vals,s),s+=l})}else{let s=0;t.forEach(a=>{let l=n==="string"?ce.fromUint8ToStringArray(a.vals):a.vals,u=0;for(let c=0;c<a.shape[0];++c){let f=c*r[1]+s;for(let d=0;d<a.shape[1];++d)i[f+d]=l[u++]}s+=a.shape[1]})}return i}re();var sCe=dn((t,r)=>t===r?1:0),aCe=vn(m1,sCe,null,"bool"),Mgt={kernelName:m1,backendName:"cpu",kernelFunc:aCe};re();var lCe=sa(t=>Math.exp(t)),uCe=Sc(Eg,lCe,"float32"),Rgt={kernelName:Eg,backendName:"cpu",kernelFunc:uCe};re();var cCe=sa(t=>Math.expm1(t)),REr=Sc(Tg,cCe),jgt={kernelName:Tg,backendName:"cpu",kernelFunc:REr};re();var fCe=sa(t=>Math.floor(t)),jEr=Sc(Ag,fCe),Pgt={kernelName:Ag,backendName:"cpu",kernelFunc:jEr};re();var dCe=dn((t,r)=>Math.floor(t/r)),PEr=vn(kg,dCe,null,"int32"),Lgt={kernelName:kg,backendName:"cpu",kernelFunc:PEr};re();function WJ(t,r,n,o,i,s,a,l,u){let c=Qt([o,s],n);for(let f=0;f<o;f++){let d=[],p=0;for(let m=0;m<i;m++){let h=t[f*i+m];p+=h*a[m],d.push(h)}if(p<0||p>=u/s)throw new Error(`Invalid indices: ${d} does not index into ${l}`);for(let m=0;m<s;m++)c.values[f*s+m]=r.get(...r.indexToLoc(p*s+m))}return c}re();function qJ(t,r,n){let o=Qt(n,t.dtype);for(let i=0;i<o.size;++i){let a=o.indexToLoc(i).slice(),l=a[0],u=a[2],c=r.locToIndex([l,u]);a[2]=r.values[c];let f=t.locToIndex(a);0<=f&&f<t.values.length&&(o.values[i]=t.values[f])}return o}re();var pCe=dn((t,r)=>t>r?1:0),LEr=vn(h1,pCe,null,"bool"),Bgt={kernelName:h1,backendName:"cpu",kernelFunc:LEr};re();var mCe=dn((t,r)=>t>=r?1:0),BEr=vn(Ig,mCe,null,"bool"),$gt={kernelName:Ig,backendName:"cpu",kernelFunc:BEr};re();var hCe=dn((t,r)=>t<r?1:0),$Er=vn(g1,hCe,null,"bool"),zgt={kernelName:g1,backendName:"cpu",kernelFunc:$Er};re();var gCe=dn((t,r)=>t<=r?1:0),zEr=vn(y1,gCe,null,"bool"),Ugt={kernelName:y1,backendName:"cpu",kernelFunc:zEr};re();function HJ(t,r,n){let o=(r-t)/(n-1),i=H.makeZerosTypedArray(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+o;return i}re();var yCe=sa(t=>Math.log(t)),UEr=Sc(Og,yCe),Vgt={kernelName:Og,backendName:"cpu",kernelFunc:UEr};re();function YJ(t,r,n,o){let i=H.getTypedArrayFromDType(o,H.sizeFromShape(n));for(let s=0;s<i.length;++s){let a=s*r,l=t[a];for(let u=0;u<r;++u){let c=t[a+u];(Number.isNaN(c)||c>l)&&(l=c)}i[s]=l}return i}re();var bCe=dn((t,r)=>Math.max(t,r)),VEr=vn(Rg,bCe),Ggt={kernelName:Rg,backendName:"cpu",kernelFunc:VEr};re();var xCe=dn((t,r)=>Math.min(t,r)),GEr=vn(jg,xCe),Wgt={kernelName:jg,backendName:"cpu",kernelFunc:GEr};re();var b6=dn((t,r)=>t*r),WEr=dM((t,r,n,o)=>({real:t*n-r*o,imag:t*o+r*n})),zA=vn(Lg,b6,WEr),qgt={kernelName:Lg,backendName:"cpu",kernelFunc:zA};re();function vCe(t,r,n){let o=H.createScalarValue(-1,n);return b6([],r,o,t,n)}function qEr(t){let{inputs:r,backend:n}=t,{x:o}=r;at(o,"neg");let i=n.data.get(o.dataId).values,[s,a]=vCe(i,o.shape,o.dtype);return n.makeTensorInfo(a,o.dtype,s)}var Hgt={kernelName:zb,backendName:"cpu",kernelFunc:qEr};re();var wCe=dn((t,r)=>t!==r?1:0),HEr=vn(w1,wCe,null,"bool"),Ygt={kernelName:w1,backendName:"cpu",kernelFunc:HEr};re();re();re();function mM(t,r,n,o,i){let s=r.length,a=H.sizeFromShape(r),l=H.computeStrides(r),u=H.computeStrides(i),c=H.getTypedArrayFromDType(n,H.sizeFromShape(i));for(let f=0;f<a;++f){let d=H.indexToLoc(f,s,l),p=new Array(d.length);for(let h=0;h<p.length;h++)p[h]=d[o[h]];let m=H.locToIndex(p,s,u);c[m]=t[f]}return c}function fi(t){let{inputs:r,attrs:n,backend:o}=t,{x:i}=r,{perm:s}=n;at(i,"transpose");let a=i.shape.length,l=new Array(a);for(let d=0;d<l.length;d++)l[d]=i.shape[s[d]];let u=o.data.get(i.dataId).values,c=mM(u,i.shape,i.dtype,s,l);return{dataId:o.write(c,l,i.dtype),shape:l,dtype:i.dtype}}var Xgt={kernelName:um,backendName:"cpu",kernelFunc:fi};function _Ce(t,r,n,o){let[i,s]=ce.computeOutAndReduceShapes(t,o),a=Bi(r,"int32"),l=H.makeZerosTypedArray(H.sizeFromShape(i),a),u=H.sizeFromShape(s);for(let c=0;c<l.length;++c){let f=c*u,d=1;for(let p=0;p<u;++p)d*=n[f+p];l[c]=d}return{outVals:l,outShape:i,outDtype:a}}function YEr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"prod");let l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=ce.getAxesPermutation(u,l),f=u,d=i,p=[];c!=null&&(d=fi({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),f=ce.getInnerMostAxes(f.length,l));let m=n.data.get(d.dataId).values,{outVals:h,outShape:g,outDtype:y}=_Ce(d.shape,d.dtype,m,f),b=g;return a&&(b=ce.expandShapeToKeepDim(g,u)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,y,h)}var Kgt={kernelName:Hb,backendName:"cpu",kernelFunc:YEr};re();function XEr(t,r,n){t.forEach((o,i)=>{if(o<0||o>=n){let s=H.indexToLoc(i,r.length,H.computeStrides(r)).join(",");throw new Error(`indices[${s}] = ${o} is not in [0, ${n})`)}})}function KEr(t,r){for(let n=0;n<t.length;++n){let o=t[n],i=n===t.length-1?r:t[n+1].length;if(o.length===0)throw new Error("Ragged splits may not be empty");if(o[0]<0)throw new Error("Ragged splits must be non-negative");if(o[o.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<o.length;++s)if(o[s-1]>o[s])throw new Error("Ragged splits must be sorted in ascending order")}}function ZEr(t,r,n,o){let i=[],s=0,a=r.length-1+n.length,l=new Array(a).fill(null).map(()=>[0]);KEr(n,o);let u=1;for(let c=0;c<r.length-1;++c){u*=r[c];let f=r[c+1];for(let d=1;d<u+1;++d)l[c].push(d*f)}for(let c=0;c<t.length;++c){let f=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){let m=n[p],h=p+r.length-1;if(h>=0){let g=l[h],y=g[g.length-1]-m[f];for(let b=f;b<d;++b)l[h].push(m[b+1]+y)}f=m[f],d=m[d]}d!==f&&(i.push([f,d]),s+=d-f)}return{outSplits:l,valueSlices:i,numValues:s}}function QEr(t){let r=[];for(let n=0;n<t.length;++n){let o=t[n].length,i=H.getArrayFromDType("int32",o);r.push(i),t[n].forEach((s,a)=>i[a]=s)}return r}function Zgt(t,r){let n=t.slice(0,r);for(;n.length<r;)n.push(1);for(let o=r;o<t.length;o++)n[r-1]*=t[o];return n}function JEr(t,r,n,o,i,s){let a=Zgt(r,2)[1],l=Zgt(s,2)[1],u=0;for(let c of n)for(let f=c[0];f<c[1];++f){for(let d=0;d<o;++d)i[u*l+d]=t[f*a+d];++u}}function eTr(t,r,n,o,i){let s=r.slice();s[0]=i;let a=H.getArrayFromDType(n,H.sizeFromShape(s)),l=t.length,u=l===0?0:l/r[0];return JEr(t,r,o,u,a,s),[a,s]}function XJ(t,r,n,o,i,s,a,l){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(r[0].length===0)throw new Error("Split tensors must not be scalars");let u=r[0][0]-1;if(XEr(s,a,u),o.length===0)throw new Error("params.rank must be nonzero");let c=o[0],{outSplits:f,valueSlices:d,numValues:p}=ZEr(s,a,t,c),m=QEr(f),h=eTr(n,o,i,d,p);return[m,h[0],h[1]]}re();var Qgt=2147483647;function KJ(t,r,n,o,i,s,a){if(r.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");let l=r.length===0,u=i.length===0,c=a.length===0,f=[];l||f.push(r[0]),u||f.push(i[0]),c||f.push(a[0]);for(let y=1;y<f.length;++y)if(f[y]!==f[y-1])throw new Error("starts, limits, and deltas must have the same shape");let d=f.length===0?1:f[0],p=H.getArrayFromDType("int32",d+1);p[0]=0;for(let y=0;y<d;++y){let b=l?t[0]:t[y],x=u?o[0]:o[y],v=c?s[0]:s[y];if(v===0)throw new Error("Requires delta != 0");let w;if(v>0&&x<b||v<0&&x>b)w=0;else if(w=Math.ceil(Math.abs((x-b)/v)),w>Qgt)throw new Error(`Requires ((limit - start) / delta) <= ${Qgt}`);p[y+1]=p[y]+w}let m=p[d],h=H.getArrayFromDType(n,m),g=0;for(let y=0;y<d;++y){let b=p[y+1]-p[y],x=l?t[0]:t[y],v=c?s[0]:s[y];for(let w=0;w<b;++w)h[g++]=x,x+=v}return[p,h]}re();var Hp=ce.RowPartitionType,SCe=class t{constructor(r,n,o,i,s,a,l,u,c,f){this.shape=r,this.shapeShape=n,this.values=o,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=l,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=ce.getRowPartitionTypesHelper(f),this.raggedRank=ce.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(r){return this.rowPartitionTypes[0]===Hp.FIRST_DIM_SIZE?this.rowPartitionTypes[r+1]:this.rowPartitionTypes[r]}getRowPartitionTensor(r){return this.rowPartitionTypes[0]===Hp.FIRST_DIM_SIZE?this.rowPartitionValues[r+1]:this.rowPartitionValues[r]}getMaxWidth(r){let n=this.getRowPartitionTensor(r-1);switch(this.getRowPartitionTypeByDimension(r-1)){case Hp.VALUE_ROWIDS:return t.getMaxWidthValueRowID(n);case Hp.ROW_SPLITS:return t.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Hp[this.getRowPartitionTypeByDimension(r-1)]}`)}}static getMaxWidthRowSplit(r){let n=r.length;if(n===0||n===1)return 0;let o=0;for(let i=0;i<n-1;++i){let s=r[i+1]-r[i];s>o&&(o=s)}return o}static getMaxWidthValueRowID(r){let n=r.length;if(n===0)return 0;let o=0,i=r[0],s=0;for(let a=1;a<n;++a){let l=r[a];l!==i&&(i=l,s=Math.max(a-o,s),o=a)}return Math.max(n-o,s)}tensorShapeFromTensor(r,n,o=!0){if(n.length===0){if(r[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return e0t(r,o)}calculateOutputSize(r){let n=this.valuesShape,o=this.defaultValueShape;ce.validateDefaultValueShape(o,n);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=ce.combineRaggedTensorToTensorShapes(this.raggedRank,i,n);a[0]<0&&(a[0]=r);for(let l=1;l<=this.raggedRank;++l)a[l]<0&&(a[l]=this.getMaxWidth(l));return a}calculateFirstParentOutputIndex(r,n,o){let i=Math.min(r,o),s=[],a=0;for(let l=0;l<i;++l,a+=n)s.push(a);for(let l=i;l<r;++l)s.push(-1);return H.assert(s.length===r,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(r,n,o,i){let s=r.length,a=[];for(let l=0;l<s-1;++l){let u=r[l+1]-r[l],c=Math.min(i,u),f=n[l];f===-1&&(c=0);for(let d=0;d<c;++d)a.push(f),f+=o;for(let d=0;d<u-c;++d)a.push(-1)}if(s>0&&a.length!==r[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(r,n,o,i){let s=r.length,a=[];if(s===0)return[];let l=0,u=r[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];a.push(c);for(let f=1;f<s;++f){let d=r[f];if(d===u)c>=0&&(++l,l<i?c+=o:c=-1);else{if(l=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==r.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(r,n,o,i){let s=this.getRowPartitionTensor(r),a=this.getRowPartitionTypeByDimension(r);switch(a){case Hp.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,o,i);case Hp.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,o,i);default:throw new Error(`Unsupported partition type: ${Hp[a]}`)}}getFirstDimensionSize(){let r=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case Hp.FIRST_DIM_SIZE:return r[0];case Hp.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Hp.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Hp[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),o=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*o[u+1];let s=e0t(o,!1),a=H.getArrayFromDType(this.valuesDType,H.sizeFromShape(s));if(i[0]*o[0]>0){let u=this.calculateFirstParentOutputIndex(n,i[0],o[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,i[c],o[c]);this.setOutput(this.raggedRank,u,a,s)}return[s,a]}setOutput(r,n,o,i){if(o.length===0)return;let s=this.values,a=o,l=i.slice();l=l.slice(r+1);let u=H.sizeFromShape(l),c=n.length,f=this.defaultValue;if(f.length!==u&&f.length!==1){let h=this.defaultValueShape;Pe(()=>{let g=Se(f,h);f=l0(g,l).dataSync()})}let d=0,p=0,m=0;for(let h=0;h<=c;++h){let g=h<c?n[h]:-1;if(g===m){++m;continue}if(p<m){let y=s.subarray(d*u),b=a.subarray(p*u),x=(m-p)*u;Jgt(b,y,x)}if(h>=c){let y=o.length;g=Math.floor(y/u)}if(g>m)if(this.defaultValue.length===1)a.subarray(m*u,g*u).fill(this.defaultValue[0]),m=g;else for(;g>m;){let y=a.slice(m*u);Jgt(y,f,u),++m}g<0?(d=h+1,p=m):(d=h,p=m,m=p+1)}}};function Jgt(t,r,n){for(let o=0;o<n;o++)t[o]=r[o]}function e0t(t,r){let n=[];for(let o of t){if(o<0){if(!r)throw new Error(`Dimension ${o} must be >= 0`);if(o<-1)throw new Error(`Dimension ${o} must be >= -1`);o=-1}n.push(o)}return n}function ZJ(t,r,n,o,i,s,a,l,u,c){return new SCe(t,r,n,o,i,s,a,l,u,c).compute()}re();function QJ(t,r,n,o){let i=t===r,s=t<r&&n<0,a=r<t&&n>1;if(i||s||a)return H.makeZerosTypedArray(0,o);let l=Math.abs(Math.ceil((r-t)/n)),u=H.makeZerosTypedArray(l,o);r<t&&n===1&&(n=-1),u[0]=t;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}re();var CCe=sa(t=>1/Math.sqrt(t)),tTr=Sc(Gg,CCe),t0t={kernelName:Gg,backendName:"cpu",kernelFunc:tTr};re();function Hh(t,r,n,o,i,s,a,l,u,c){let f=[o/i,i],d=t.values,p=r.values;if(o===0)return Qt(n,r.dtype);let m=u instanceof wn?u:Qt(f,r.dtype);typeof u=="string"||typeof u=="number"?m.values.fill(u):typeof u=="boolean"&&m.values.fill(+u);for(let h=0;h<s;h++){let g=[],y=0;for(let b=0;b<a;b++){let x=d[h*a+b];g.push(x),y+=x*l[b]}if(y<0||y>=o/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let b=0;b<i;b++)c?m.values[y*i+b]+=p[h*i+b]:m.values[y*i+b]=r.rank===0?p[0]:p[h*i+b]}return m}re();var r0t=sa(t=>1/(1+Math.exp(-t))),ECe=_r(Xg,t=>1/(1+Math.exp(-t))),n0t={kernelName:Xg,backendName:"cpu",kernelFunc:ECe};re();function TCe(t,r,n,o,i){let s=Es.isSliceContinous(o,r,n),a=H.sizeFromShape(n),l=H.computeStrides(o);if(s){let d=Es.computeFlatOffset(r,l);return i==="string"?t.slice(d,d+a):t.subarray(d,d+a)}let u=i==="string"?ce.fromUint8ToStringArray(t):t,c=Qt(o,i,u),f=Qt(n,i);for(let d=0;d<f.size;++d){let p=f.indexToLoc(d),m=p.map((h,g)=>h+r[g]);f.set(c.get(...m),...p)}return i==="string"?ce.fromStringArrayToUint8(f.values):f.values}function Yp(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o;at(i,"slice");let[l,u]=Es.parseSliceParams(i,s,a);Es.assertParamsValid(i,l,u);let c=n.data.get(i.dataId).values,f=TCe(c,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,f)}var o0t={kernelName:Jb,backendName:"cpu",kernelFunc:Yp};re();function JJ(t,r,n,o,i,s,a){let l=r[0],u=s[0],c=new Array(u),f=new Array(l),d=r[1];if(u===0){if(l!==0)throw new Error(ce.getSparseFillEmptyRowsIndicesDenseShapeMismatch(l));let y=H.getArrayFromDType(n,0),b=H.getArrayFromDType(i,0);return[y,[0,d],b,c,f]}let p=!0,m=0,h=new Array(u).fill(0);for(let y=0;y<l;++y){let b=t[y*d];if(b<0)throw new Error(ce.getSparseFillEmptyRowsNegativeIndexErrorMessage(y,b));if(b>=u)throw new Error(ce.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(y,b,u));++h[b],p=p&&b>=m,m=b}let g=!0;for(let y=0;y<u;++y){let b=h[y]===0;c[y]=b,g=g&&!b,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(g&&p){let y=t,b=o;for(let x=0;x<l;++x)f[x]=x;return[y,[l,d],b,c,f]}else{let y=h[u-1],b=H.getArrayFromDType(n,y*d),x=H.getArrayFromDType(i,y),v=new Array(u).fill(0);for(let w=0;w<l;++w){let _=t[w*d],C=v[_],S=(_===0?0:h[_-1])+C;v[_]++;for(let E=0;E<d;++E)b[S*d+E]=t[w*d+E];x[S]=o[w],f[w]=S}for(let w=0;w<u;++w)if(v[w]===0){let C=w===0?0:h[w-1];b[C*d+0]=w;for(let S=1;S<d;++S)b[C*d+S]=0;x[C]=a}return[b,[y,d],x,c,f]}}re();function eee(t,r,n,o,i){let s=H.sizeFromShape(o),a=r[0],l=i.length,u=[],c=1,f=-1;for(let y=0;y<l;++y){let b=i[y];if(b===-1){if(f!==-1)throw new Error(ce.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(f,y));f=y,u.push(1)}else{if(b<0)throw new Error(ce.getSparseReshapeNegativeOutputDimErrorMessage(y,b));c*=b,u.push(b)}}if(f!==-1){if(c<=0)throw new Error(ce.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let y=Math.trunc(s/c);if(c*y!==s)throw new Error(ce.getSparseReshapeInputOutputMultipleErrorMessage(o,u));u[f]=y}if(H.sizeFromShape(u)!==s)throw new Error(ce.getSparseReshapeInputOutputMismatchErrorMessage(o,u));let p=o.length,m=[];if(p>0){m[p-1]=1;for(let y=p-2;y>=0;--y)m[y]=m[y+1]*o[y+1]}let h=[];if(l>0){h[l-1]=1;for(let y=l-2;y>=0;--y)h[y]=h[y+1]*u[y+1]}let g=H.getArrayFromDType(n,a*l);for(let y=0;y<a;++y){let b=0;for(let x=0;x<p;++x)b+=t[y*p+x]*m[x];for(let x=0;x<l;++x)g[y*l+x]=Math.trunc(b/h[x]),b%=h[x]}return[g,[a,l],u]}re();function hM(t,r,n,o,i,s=!1,a=0){let l=o.length,u=[r[0],t.length/r[0]],c=u[1],d=l>0?i[l-1]+1:0;if(d<0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=r.slice();p[0]=d;let m=p.reduce((v,w)=>v*w,1),h=H.getArrayFromDType(n,m);if(l===0)return d>0&&h.fill(a),[h,p];if(d<=0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,y=1,b=0,x=i[g];for(;;){let v=0;if(y<l){if(v=i[y],x===v){++y;continue}if(x>=v)throw new Error(ce.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(x<0||x>=d)throw new Error(ce.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(x,d));x>b&&h.fill(a,b*c,x*c);for(let w=g;w<y;++w){let _=o[w];if(_<0||_>=u[0])throw new Error(ce.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(w,o[w],u[0]));for(let C=0;C<c;C++)h[x*c+C]+=t[_*c+C]}if(s)for(let w=0;w<c;w++)h[x*c+w]/=y-g;if(g=y,++y,b=x+1,x=v,y>l)break}return b<d&&h.fill(a,b*c,d*c),[h,p]}re();var i0t=sa(t=>Math.sqrt(t)),rTr=_r(Zg,t=>Math.sqrt(t)),s0t={kernelName:Zg,backendName:"cpu",kernelFunc:rTr};re();var ACe=dn((t,r)=>{let n=t-r;return n*n}),nTr=vn(Qg,ACe),a0t={kernelName:Qg,backendName:"cpu",kernelFunc:nTr};re();var kCe=sa((t,r)=>{let{pattern:n,replaceGlobal:o,rewrite:i}=r;return t.replace(new RegExp(n,o?"g":""),i)}),oTr=Sc(_1,kCe),l0t={kernelName:_1,backendName:"cpu",kernelFunc:oTr};re();function tee(t,r,n,o){let i=Qt(t,r.dtype);for(let s=0;s<i.size;s++){let a=i.indexToLoc(s),l=new Array(a.length);for(let u=0;u<l.length;u++)l[u]=a[u]*n[u]+o[u];i.set(r.get(...l),...a)}return i}re();var ICe=class{constructor(r,n,o,i,s,a){this.separator=H.encodeString(r),this.nGramWidths=n,this.leftPad=H.encodeString(o),this.rightPad=H.encodeString(i),this.padWidth=s,this.preserveShort=a}getPadWidth(r){return Math.min(this.padWidth<0?r-1:this.padWidth,r-1)}getNumNGrams(r,n){let o=this.getPadWidth(n);return Math.max(0,r+2*o-n+1)}createNGrams(r,n,o,i,s,a){for(let l=0;l<s;++l){let u=this.getPadWidth(a),c=Math.max(0,u-l),f=Math.max(0,u-(s-(l+1))),d=a-(c+f),p=n+(c>0?0:l-u),m=0;m+=c*this.leftPad.length;for(let x=0;x<d;++x)m+=r[p+x].length;m+=f*this.rightPad.length;let h=c+f+d-1;m+=h*this.separator.length,o[i+l]=new Uint8Array(m);let g=o[i+l],y=0,b=x=>x.forEach(v=>g[y++]=v);for(let x=0;x<c;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(r[p+x]),b(this.separator);if(d>0){b(r[p+d-1]);for(let x=0;x<f;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<f-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(r,n){let o=r.length,i=n.length;if(i>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<i;++c){let f=n[c]>=u;if(f=f&&n[c]<=o,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${o}]`);u=n[c]}if(u!==o)throw new Error(`Last split value must be data size. Expected ${o}, got ${u}`)}let s=i-1,a=H.getArrayFromDType("int32",i);if(o===0||i===0){let u=new Array(o);for(let c=0;c<=s;++c)a[c]=0;return[u,a]}a[0]=0;for(let u=1;u<=s;++u){let c=n[u]-n[u-1],f=0;this.nGramWidths.forEach(d=>{f+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&f===0&&(f=1),a[u]=a[u-1]+f}let l=new Array(a[s]);for(let u=0;u<s;++u){let c=n[u],f=a[u];if(this.nGramWidths.forEach(d=>{let p=n[u+1]-n[u],m=this.getNumNGrams(p,d);this.createNGrams(r,c,l,f,m,d),f+=m}),this.preserveShort&&f===a[u]){let d=n[u+1]-n[u];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(r,c,l,f,1,p)}}return[l,a]}};function ree(t,r,n,o,i,s,a,l){return new ICe(n,o,i,s,a,l).compute(t,r)}re();function iTr(t,r,n,o){if(!t.length)return;if(r.length===0){for(let s=0;s<t.length;++s)o.push(t.subarray(s,s+1));return}if(r.length===1){let s=r[0],a=t.indexOf(s);for(;a!==-1;){let l=t.subarray(0,a);(!n||l.length!==0)&&o.push(l),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&o.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||r.indexOf(t[s])!==-1){let a=t.subarray(i,s);(!n||a.length!==0)&&o.push(a),i=s+1}}function nee(t,r,n){let o=t.length,i=[],s=0,a=0,l=new Array(o);for(let p=0;p<o;++p){let m=i.length;iTr(t[p],r,n,i);let h=i.length-m;l[p]=h,s+=h,a=Math.max(a,h)}let u=H.getArrayFromDType("int32",s*2),c=new Array(s),f=[o,a],d=0;for(let p=0;p<o;++p)for(let m=0;m<l[p];++m)u[d*2]=p,u[d*2+1]=m,c[d]=i[d],++d;return[u,c,f]}re();function oee(t,r){let n=H.getArrayFromDType("int32",t.length);for(let o=0;o<t.length;++o)n[o]=H.fingerPrint64(t[o]).modulo(r).getLowBitsUnsigned();return n}re();var DCe=dn((t,r)=>t-r),sTr=dM((t,r,n,o)=>({real:t-n,imag:r-o})),x6=vn(Jg,DCe,sTr),u0t={kernelName:Jg,backendName:"cpu",kernelFunc:x6};re();function iee(t,r){let n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*r[i];let o=Qt(n,t.dtype);for(let i=0;i<o.values.length;++i){let s=o.indexToLoc(i),a=new Array(t.rank);for(let u=0;u<a.length;u++)a[u]=s[u]%t.shape[u];let l=t.locToIndex(a);o.values[i]=t.values[l]}return o}re();var v6=(t,r)=>{let n=r.value-t.value;return n===0?t.index-r.index:n};function c0t(t,r,n=0,o=t.length-1){for(;o>n;){if(o-n>600){let l=o-n+1,u=r-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*Math.sign(u-l/2),p=Math.max(n,Math.floor(r-u*f/l+d)),m=Math.min(o,Math.floor(r+(l-u)*f/l+d));c0t(t,r,p,m)}let i=t[r],s=n,a=o;for(H.swap(t,n,r),v6(t[o],i)>0&&H.swap(t,n,o);s<a;){for(H.swap(t,s,a),s++,a--;v6(t[s],i)<0;)s=s+1;for(;v6(t[a],i)>0;)a=a-1}v6(t[n],i)===0?H.swap(t,n,a):(a=a+1,H.swap(t,a,o)),a<=r&&(n=a+1),r<=a&&(o=a-1)}}function see(t,r,n,o,i){let s=r[r.length-1],[a,l]=[t.length/s,s],u=H.getTypedArrayFromDType(n,a*o),c=H.getTypedArrayFromDType("int32",a*o);for(let d=0;d<a;d++){let p=d*l,m=t.subarray(p,p+l),h=new Array(m.length);m.forEach((x,v)=>h[v]={value:x,index:v}),o<h.length&&(c0t(h,o),h=h.slice(0,o)),i&&h.sort(v6);let g=d*o,y=u.subarray(g,g+o),b=c.subarray(g,g+o);for(let x=0;x<o;x++)y[x]=h[x].value,b[x]=h[x].index}let f=r.slice();return f[f.length-1]=o,[Qt(f,n,u),Qt(f,"int32",c)]}re();function aee(t,r,n,o){let i=H.parseAxisParam(r,n)[0],s=[1,n[0],1];for(let h=0;h<i;h++)s[0]*=n[h];s[1]=n[i];for(let h=i+1;h<n.length;h++)s[2]*=n[h];let a=new Map,l=new Int32Array(n[i]),u=new wn(s,o,t),c=[],f=s[0]===1&&s[2]===1;for(let h=0;h<n[i];h++){let g;if(f)g=t[h].toString();else{let b=[];for(let x=0;x<s[0];x++)for(let v=0;v<s[2];v++)b.push(u.get(x,h,v));g=b.join(",")}let y=a.get(g);if(y!=null)l[h]=y;else{let b=a.size;a.set(g,b),l[h]=b,c.push(h)}}let d=s.slice();d[1]=a.size;let p=new wn(d,o);c.forEach((h,g)=>{for(let y=0;y<s[0];y++)for(let b=0;b<s[2];b++)p.set(u.get(y,h,b),y,g,b)});let m=n.slice();return m[i]=d[1],{outputValues:p.values,outputShape:m,indices:l}}qR("cpu",()=>new Egt,1);re();re();re();var FCe=_r(Sg,t=>t>=0?t:Math.exp(t)-1),f0t={kernelName:Sg,backendName:"cpu",kernelFunc:FCe};re();function OCe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o;at([i],"leakyRelu");let a=H.sizeFromShape(i.shape),l=n.data.get(i.dataId).values,u=H.getTypedArrayFromDType("float32",a);for(let c=0;c<l.length;c++)u[c]=l[c]<0?s*l[c]:l[c];return n.makeTensorInfo(i.shape,"float32",u)}var d0t={kernelName:Ob,backendName:"cpu",kernelFunc:OCe};re();var aTr=dn((t,r)=>t<0?r*t:t);function MCe(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r;at([o,i],"prelu");let s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,[l,u]=aTr(o.shape,i.shape,s,a,"float32");return n.makeTensorInfo(u,"float32",l)}var p0t={kernelName:qb,backendName:"cpu",kernelFunc:MCe};re();var RCe=_r(zg,t=>Math.max(0,t)),m0t={kernelName:zg,backendName:"cpu",kernelFunc:RCe};re();var jCe=_r(Ug,t=>Math.min(Math.max(0,t),6)),h0t={kernelName:Ug,backendName:"cpu",kernelFunc:jCe};function UA(t,r,n,o,i){if(n==="linear")return hl({inputs:{x:r},backend:t});if(n==="relu")return RCe({inputs:{x:r},backend:t});if(n==="elu")return FCe({inputs:{x:r},backend:t});if(n==="relu6")return jCe({inputs:{x:r},backend:t});if(n==="prelu")return MCe({inputs:{x:r,alpha:o},backend:t});if(n==="leakyrelu")return OCe({inputs:{x:r},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return ECe({inputs:{x:r},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}re();re();function pn(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=H.sizeFromShape(i.shape),l=H.inferFromImplicitShape(s,a),u=H.sizeFromShape(l);H.assert(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){let f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;f.shape=l,d.shape=l}return{dataId:i.dataId,shape:l,dtype:i.dtype}}var g0t={kernelName:Yb,backendName:"cpu",kernelFunc:pn};function PCe(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;at([i,s],"matMul");let u=i.shape.length,c=s.shape.length,f=a?i.shape[u-2]:i.shape[u-1],d=l?s.shape[c-1]:s.shape[c-2],p=a?i.shape[u-1]:i.shape[u-2],m=l?s.shape[c-2]:s.shape[c-1],h=i.shape.slice(0,-2),g=s.shape.slice(0,-2),y=H.sizeFromShape(h),b=H.sizeFromShape(g),v=Gu.assertAndGetBroadcastShape(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,m]);H.assert(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${l} must match.`);let w=a?[y,f,p]:[y,p,f],_=l?[b,m,d]:[b,d,m],C=pn({inputs:{x:i},backend:n,attrs:{shape:w}}),S=pn({inputs:{x:s},backend:n,attrs:{shape:_}}),E=a?C.shape[1]:C.shape[2],A=a?C.shape[2]:C.shape[1],N=l?S.shape[1]:S.shape[2],k=Math.max(y,b),M=n.data.get(C.dataId).values,I=n.data.get(S.dataId).values,L=H.computeStrides(C.shape),P=H.computeStrides(S.shape),[R,V,G]=a?[L[0],1,L[1]]:[L[0],L[1],1],[U,Y,X]=l?[1,P[1],P[0]]:[P[1],1,P[0]],pe=A*N,$=Qt([k,A,N],C.dtype),F=$.values,z=n.blockSize;for(let q=0;q<k;q++){let ee=q%y,ae=q%b;for(let Q=0;Q<A;Q+=z){let le=Math.min(Q+z,A);for(let ie=0;ie<N;ie+=z){let Z=Math.min(ie+z,N);for(let ge=0;ge<E;ge+=z){let ne=Math.min(ge+z,E);for(let ye=Q;ye<le;ye++)for(let xe=ie;xe<Z;xe++){let Ne=0;for(let Ae=ge;Ae<ne;Ae++){let Me=M[ee*R+ye*V+Ae*G],ze=I[Ae*U+xe*Y+ae*X];Ne+=Me*ze}F[q*pe+(ye*N+xe)]+=Ne}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(S),n.makeTensorInfo(v,$.dtype,$.values)}var y0t={kernelName:vb,backendName:"cpu",kernelFunc:PCe};function lTr(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o,p,m,h,g=[];p=PCe({inputs:{a:i,b:s},attrs:{transposeA:u,transposeB:c},backend:n}),a&&(m=Zy({inputs:{a:p,b:a},backend:n}),g.push(p),p=m),f&&(h=UA(n,p,f,l,d),g.push(p),p=h);for(let b of g)n.disposeIntermediateTensorInfo(b);return p}var b0t={kernelName:S1,backendName:"cpu",kernelFunc:lTr};re();var uTr=_r(fg,t=>Math.acos(t)),x0t={kernelName:fg,backendName:"cpu",kernelFunc:uTr};re();var cTr=_r(dg,t=>Math.acosh(t)),v0t={kernelName:dg,backendName:"cpu",kernelFunc:cTr};re();function fTr(t){let{inputs:r,backend:n}=t,o=r;at(r,"addN");let i=o.map(l=>n.data.get(l.dataId).values),s=Qt(o[0].shape,o[0].dtype),a=s.values;for(let l=0;l<o.length;l++){let u=i[l];for(let c=0;c<a.length;c++)a[c]+=u[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}var w0t={kernelName:hb,backendName:"cpu",kernelFunc:fTr};re();function dTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"all");let l=H.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=fi({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("all",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),m=H.sizeFromShape(p),h=H.makeZerosTypedArray(H.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<h.length;++b){let x=b*m,v=g[x];for(let w=0;w<m;++w){let _=g[x+w];v=v&&_}h[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,h);if(a){let b=ce.expandShapeToKeepDim(d,l),x=pn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var _0t={kernelName:eS,backendName:"cpu",kernelFunc:dTr};re();function pTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"any");let l=H.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=fi({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("any",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),m=H.sizeFromShape(p),h=H.makeZerosTypedArray(H.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<h.length;++b){let x=b*m,v=g[x];for(let w=0;w<m;++w){let _=g[x+w];v=v||_}h[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,h);if(a){let b=ce.expandShapeToKeepDim(d,l),x=pn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var S0t={kernelName:tS,backendName:"cpu",kernelFunc:pTr};re();function mTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;at(i,"argMax");let a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=fi({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMax",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=H.sizeFromShape(f),m=H.makeZerosTypedArray(p,"int32"),h=H.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,x=g[b],v=0;for(let w=0;w<h;++w){let _=g[b+w];_>x&&(x=_,v=w)}m[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",m)}var C0t={kernelName:gb,backendName:"cpu",kernelFunc:mTr};re();function hTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;at(i,"argMin");let a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=fi({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMin",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=H.sizeFromShape(f),m=H.makeZerosTypedArray(p,"int32"),h=H.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,x=g[b],v=0;for(let w=0;w<h;++w){let _=g[b+w];_<x&&(x=_,v=w)}m[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",m)}var E0t={kernelName:yb,backendName:"cpu",kernelFunc:hTr};re();var gTr=_r(pg,t=>Math.asin(t)),T0t={kernelName:pg,backendName:"cpu",kernelFunc:gTr};re();var yTr=_r(mg,t=>Math.asinh(t)),A0t={kernelName:mg,backendName:"cpu",kernelFunc:yTr};re();var bTr=_r(hg,t=>Math.atan(t)),k0t={kernelName:hg,backendName:"cpu",kernelFunc:bTr};re();var xTr=dn((t,r)=>Math.atan2(t,r)),vTr=vn(yg,xTr),I0t={kernelName:yg,backendName:"cpu",kernelFunc:vTr};re();var wTr=_r(gg,t=>Math.atanh(t)),D0t={kernelName:gg,backendName:"cpu",kernelFunc:wTr};re();re();function gM(t,r,n,o,i,s){let a=i.strideHeight,l=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,m=i.padInfo.left,h=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Qt(i.outShape,n),y=g.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],x=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let w=0;w<i.batchSize;++w){let _=w*b,C=w*o[0];for(let S=0;S<i.inChannels;++S)for(let E=0;E<i.outHeight;++E){let A=E*a-p,N=Math.max(0,A),k=Math.min(i.inHeight,f+A),M=_+E*x;for(let I=0;I<i.outWidth;++I){let L=I*l-m,P=Math.max(0,L),R=Math.min(i.inWidth,d+L),V=h,G=0,U=0;for(let X=N;X<k;X+=u){let pe=C+X*o[1];for(let $=P;$<R;$+=c){let F=pe+$*o[2],z=t[F+S];s==="max"&&z>V?V=z:s==="avg"&&(G+=z,U++)}if(isNaN(V))break}let Y=M+I*v+S;y[Y]=s==="avg"?G/U:V}}}return g}function lee(t,r,n,o,i=!1,s=!1){let a=Qt(o.outShape,"int32"),l=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,f=o.dilationWidth,d=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.top,h=o.padInfo.left,g=Qt(r,n,t);for(let y=0;y<o.batchSize;++y)for(let b=0;b<o.inChannels;++b)for(let x=0;x<o.outHeight;++x){let v=x*l-m,w=v;for(;w<0;)w+=c;let _=Math.min(o.inHeight,d+v);for(let C=0;C<o.outWidth;++C){let S=C*u-h,E=S;for(;E<0;)E+=f;let A=Math.min(o.inWidth,p+S),N=Number.NEGATIVE_INFINITY,k=-1;for(let M=w;M<_;M+=c){let I=M-v;for(let L=E;L<A;L+=f){let P=L-S,R=g.get(y,M,L,b);R>N&&(N=R,i?k=s?((y*o.inHeight+M)*o.inWidth+L)*o.inChannels+b:(M*o.inWidth+L)*o.inChannels+b:k=I*p+P)}}a.set(k,y,x,C,b)}}return a}function uee(t,r,n,o,i,s){let a=i.strideDepth,l=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,h=i.effectiveFilterWidth,g=i.padInfo.front,y=i.padInfo.top,b=i.padInfo.left,x=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Qt(i.outShape,n),w=v.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let A=0;A<i.batchSize;++A){let N=A*_,k=A*o[0];for(let M=0;M<i.inChannels;++M)for(let I=0;I<i.outDepth;++I){let L=I*a-g,P=L;for(;P<0;)P+=c;let R=Math.min(i.inDepth,p+L),V=N+I*C;for(let G=0;G<i.outHeight;++G){let U=G*l-y,Y=U;for(;Y<0;)Y+=f;let X=Math.min(i.inHeight,m+U),pe=V+G*S;for(let $=0;$<i.outWidth;++$){let F=$*u-b,z=F;for(;z<0;)z+=d;let q=Math.min(i.inWidth,h+F),ee=pe+$*E,ae=x,Q=0,le=0;for(let Z=P;Z<R;Z+=c){let ge=k+Z*o[1];for(let ne=Y;ne<X;ne+=f){let ye=ge+ne*o[2];for(let xe=z;xe<q;xe+=d){let Ne=ye+xe*o[3],Ae=t[Ne+M];if(s==="max"&&Ae>ae?ae=Ae:s==="avg"&&(Q+=Ae,le++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}let ie=ee+M;w[ie]=s==="avg"?Q/Math.max(le,1):ae}}}}return v}function N0t(t,r){let n=Qt(r.outShape,"int32"),o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,a=r.dilationDepth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,h=r.padInfo.left;for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outDepth;++b){let x=b*o-p,v=x;for(;v<0;)v+=a;let w=Math.min(r.inDepth,c+x);for(let _=0;_<r.outHeight;++_){let C=_*i-m,S=C;for(;S<0;)S+=l;let E=Math.min(r.inHeight,f+C);for(let A=0;A<r.outWidth;++A){let N=A*s-h,k=N;for(;k<0;)k+=u;let M=Math.min(r.inWidth,d+N),I=Number.NEGATIVE_INFINITY,L=-1;for(let P=v;P<w;P+=a){let R=P-x;for(let V=S;V<E;V+=l){let G=V-C;for(let U=k;U<M;U+=u){let Y=U-N,X=t.get(g,P,V,U,y);X>=I&&(I=X,L=R*f*d+G*f+Y)}}}n.set(L,g,b,_,A,y)}}}return n}function _Tr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;at(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))d=hl({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,m=H.computeStrides(i.shape),h=gM(p,i.shape,i.dtype,m,f,"avg");d=n.makeTensorInfo(f.outShape,i.dtype,h.values)}return d}var F0t={kernelName:bb,backendName:"cpu",kernelFunc:_Tr};re();function STr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;at(i,"avgPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=uee(d,i.shape,i.dtype,H.computeStrides(i.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}var O0t={kernelName:xb,backendName:"cpu",kernelFunc:STr};re();function CTr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;at([i,s],"avgPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=f.strideDepth,p=f.strideHeight,m=f.strideWidth,h=f.filterDepth,g=f.filterHeight,y=f.filterWidth,b=f.dilationDepth,x=f.dilationHeight,v=f.dilationWidth,w=f.effectiveFilterDepth,_=f.effectiveFilterHeight,C=f.effectiveFilterWidth,S=w-1-f.padInfo.front,E=C-1-f.padInfo.left,A=_-1-f.padInfo.top,N=Qt(s.shape,"float32"),k=1/(h*g*y),M=n.bufferSync(i);for(let I=0;I<f.batchSize;++I)for(let L=0;L<f.inChannels;++L)for(let P=0;P<f.inDepth;++P)for(let R=0;R<f.inHeight;++R)for(let V=0;V<f.inWidth;++V){let G=P-S,U=R-A,Y=V-E,X=0;for(let pe=0;pe<w;pe+=b){let $=(G+pe)/d;if(!($<0||$>=f.outDepth||Math.floor($)!==$))for(let F=0;F<_;F+=x){let z=(U+F)/p;if(!(z<0||z>=f.outHeight||Math.floor(z)!==z))for(let q=0;q<C;q+=v){let ee=(Y+q)/m;if(ee<0||ee>=f.outWidth||Math.floor(ee)!==ee)continue;let ae=M.get(I,$,z,ee,L);X+=ae}}}N.set(X*k,I,P,R,V,L)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}var M0t={kernelName:nS,backendName:"cpu",kernelFunc:CTr};re();function ETr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;at([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=f.strideHeight,p=f.strideWidth,m=f.filterHeight,h=f.filterWidth,g=f.dilationHeight,y=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,v=x-1-f.padInfo.left,w=b-1-f.padInfo.top,_=Qt(a.shape,"float32"),C=1/(m*h),S=n.data.get(i.dataId).values,E=Qt(i.shape,"float32",S);for(let A=0;A<f.batchSize;++A)for(let N=0;N<f.inChannels;++N)for(let k=0;k<f.inHeight;++k)for(let M=0;M<f.inWidth;++M){let I=k-w,L=M-v,P=0;for(let R=0;R<b;R+=g){let V=(I+R)/d;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let G=0;G<x;G+=y){let U=(L+G)/p;if(U<0||U>=f.outWidth||Math.floor(U)!==U)continue;let Y=E.get(A,V,U,N);P+=Y}}_.set(P*C,A,k,M,N)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}var R0t={kernelName:rS,backendName:"cpu",kernelFunc:ETr};re();function TTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,scale:s,offset:a,mean:l,variance:u}=r;H.assert(l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),H.assert(a==null||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),H.assert(s==null||l.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),at([i,l,u,s,a],"batchNorm");let{varianceEpsilon:c}=o;c==null&&(c=.001);let f=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values,m=s?n.data.get(s.dataId).values:new Float32Array([1]),h=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(f.length),y=h.length,b=m.length,x=p.length,v=d.length,w=0,_=0,C=0,S=0;for(let E=0;E<f.length;++E)g[E]=h[w++]+(f[E]-d[_++])*m[C++]/Math.sqrt(p[S++]+c),w>=y&&(w=0),_>=v&&(_=0),C>=b&&(C=0),S>=x&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,g)}var j0t={kernelName:Nb,backendName:"cpu",kernelFunc:TTr};re();function ATr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;at([i],"batchToSpaceND");let l=s.reduce((b,x)=>b*x),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),m=pn({inputs:{x:i},backend:n,attrs:{shape:u}}),h=fi({inputs:{x:m},backend:n,attrs:{perm:c}}),g=pn({inputs:{x:h},backend:n,attrs:{shape:f}}),y=Yp({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}var P0t={kernelName:wb,backendName:"cpu",kernelFunc:ATr};re();function kTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=pM(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var L0t={kernelName:oS,backendName:"cpu",kernelFunc:kTr};re();function ITr(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var B0t={kernelName:iS,backendName:"cpu",kernelFunc:ITr};re();var DTr=_r(xg,(t,r)=>{let n=r;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),$0t={kernelName:xg,backendName:"cpu",kernelFunc:DTr};re();var NTr=t=>{let{x:r}=t.inputs,n=t.backend,o=new Float32Array(H.sizeFromShape(r.shape)),i=n.data.get(r.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values;for(let c=0;c<l.length;c++){let f=l[c],d=u[c];o[c]=Math.hypot(f,d)}return n.makeOutput(o,r.shape,"float32")},z0t={kernelName:_b,backendName:"cpu",kernelFunc:NTr};re();re();function Qy(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var U0t={kernelName:CS,backendName:"cpu",kernelFunc:Qy};function D2(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=H.parseAxisParam(i,r[0].shape)[0],a=r.map(g=>g.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(g=>g.shape),s);if(H.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(g=>H.sizeFromShape(g.shape)>0);if(u.length===1)return hl({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){let g=u.map(w=>Wp({inputs:{input:w},backend:n})),y=u.map(w=>Qy({inputs:{input:w},backend:n})),b=D2({inputs:g,backend:n,attrs:{axis:s}}),x=D2({inputs:y,backend:n,attrs:{axis:s}}),v=Fs({inputs:{real:b,imag:x},backend:n});return g.forEach(w=>n.disposeIntermediateTensorInfo(w)),y.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),v}let c=u.map(g=>{let b=[-1,H.sizeFromShape(g.shape.slice(s))];return pn({inputs:{x:g},backend:n,attrs:{shape:b}})}),f=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));l=ce.computeOutShape(c.map(g=>g.shape),1);let d=c[0].shape[0]===1,p=GJ(f,l,r[0].dtype,d),m=ce.computeOutShape(u.map(g=>g.shape),s),h=n.makeTensorInfo(m,r[0].dtype,p);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),h}var V0t={kernelName:Sb,backendName:"cpu",kernelFunc:D2};re();function LCe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o;at([i,s],"conv2d");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),m=p.filterHeight,h=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,v=p.dataFormat==="channelsLast",w=new wn(p.outShape,i.dtype),_=H.computeStrides(i.shape),C=H.computeStrides(s.shape),S=_[0],E=v?_[1]:_[2],A=v?_[2]:1,N=v?1:_[1],k=w.strides[0],M=v?w.strides[1]:w.strides[2],I=v?w.strides[2]:1,L=v?1:w.strides[1],P=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,V=w.values;for(let G=0;G<p.batchSize;++G){let U=G*S,Y=G*k;for(let X=0;X<p.outHeight;++X){let pe=Y+X*M,$=X*p.strideHeight-x;for(let F=0;F<m;++F){let z=$+F*g;if(z<0||z>=p.inHeight)continue;let q=F*C[0],ee=U+z*E;for(let ae=0;ae<p.outWidth;++ae){let Q=pe+ae*I,le=ae*p.strideWidth-b;for(let ie=0;ie<h;++ie){let Z=le+ie*y;if(Z<0||Z>=p.inWidth)continue;let ge=q+ie*C[1],ne=ee+Z*A,ye=ge;for(let xe=0;xe<p.inChannels;++xe){let Ne=P[ne+xe*N];for(let Ae=0;Ae<p.outChannels;++Ae)V[Q+Ae*L]+=Ne*R[ye+Ae];ye+=p.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,V)}var G0t={kernelName:Cb,backendName:"cpu",kernelFunc:LCe};re();function FTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o;at([i,s],"conv2dBackpropFilter");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),{strideHeight:m,strideWidth:h,filterHeight:g,filterWidth:y}=p,b=p.dataFormat==="channelsLast",x=new wn(p.filterShape,"float32"),v=p.padInfo.left,w=p.padInfo.top,_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,S=new wn(i.shape,i.dtype,_),E=new wn(s.shape,s.dtype,C);for(let A=0;A<g;++A){let N=Math.max(0,Math.ceil((w-A)/m)),k=Math.min(p.outHeight,(p.inHeight+w-A)/m);for(let M=0;M<y;++M){let I=Math.max(0,Math.ceil((v-M)/h)),L=Math.min(p.outWidth,(p.inWidth+v-M)/h);for(let P=0;P<p.inChannels;++P)for(let R=0;R<p.outChannels;++R){let V=0;for(let G=0;G<p.batchSize;++G)for(let U=N;U<k;++U){let Y=A+U*m-w;for(let X=I;X<L;++X){let pe=M+X*h-v;b?V+=S.get(G,Y,pe,P)*E.get(G,U,X,R):V+=S.get(G,P,Y,pe)*E.get(G,R,U,X)}}x.set(V,A,M,P,R)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var W0t={kernelName:aS,backendName:"cpu",kernelFunc:FTr};re();function OTr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o;at([i,s],"conv2dBackpropInput");let d=H.computeStrides(s.shape),p=H.computeStrides(i.shape),m=ce.convertConv2DDataFormat(c),h=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,m),g=new wn(h.inShape,"float32"),y=g.values,b=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,[v,w,_]=d,{batchSize:C,filterHeight:S,filterWidth:E,inChannels:A,inHeight:N,inWidth:k,outChannels:M,outHeight:I,outWidth:L,strideHeight:P,strideWidth:R}=h;m=h.dataFormat;let V=S-1-h.padInfo.top,G=E-1-h.padInfo.left,U=m==="channelsLast",Y=g.strides[0],X=U?g.strides[1]:g.strides[2],pe=U?g.strides[2]:1,$=U?1:g.strides[1],F=p[0],z=U?p[1]:p[2],q=U?p[2]:1,ee=U?1:p[1];for(let ae=0;ae<C;++ae)for(let Q=0;Q<A;++Q)for(let le=0;le<N;++le){let ie=le-V,Z=Math.max(0,Math.ceil(ie/P)),ge=Math.min(I,(S+ie)/P);for(let ne=0;ne<k;++ne){let ye=ne-G,xe=Math.max(0,Math.ceil(ye/R)),Ne=Math.min(L,(E+ye)/R),Ae=0;for(let ze=Z;ze<ge;++ze){let lt=ze*P-ie;for(let We=xe;We<Ne;++We){let Bt=We*R-ye,Tt=F*ae+z*ze+q*We,At=v*(S-1-lt)+w*(E-1-Bt)+_*Q;for(let Rt=0;Rt<M;++Rt){let Nt=b[Tt+ee*Rt],Le=x[At+Rt];Ae+=Nt*Le}}}let Me=Y*ae+X*le+pe*ne+$*Q;y[Me]=Ae}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var q0t={kernelName:Eb,backendName:"cpu",kernelFunc:OTr};re();function MTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o;at([i,s],"conv3d");let c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),{filterDepth:f,filterHeight:d,filterWidth:p,dilationDepth:m,dilationHeight:h,dilationWidth:g,padInfo:y}=c,b=y.front,x=y.left,v=y.top,w=new wn(c.outShape,i.dtype),_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,S=w.values,E=H.computeStrides(i.shape),A=H.computeStrides(s.shape);for(let N=0;N<c.batchSize;++N){let k=N*E[0],M=N*w.strides[0];for(let I=0;I<c.outDepth;++I){let L=M+I*w.strides[1],P=I*c.strideDepth-b;for(let R=0;R<f;++R){let V=P+R*m;if(V<0||V>=c.inDepth)continue;let G=R*A[0],U=k+V*E[1];for(let Y=0;Y<c.outHeight;++Y){let X=L+Y*w.strides[2],pe=Y*c.strideHeight-v;for(let $=0;$<d;++$){let F=pe+$*h;if(F<0||F>=c.inHeight)continue;let z=G+$*A[1],q=U+F*E[2];for(let ee=0;ee<c.outWidth;++ee){let ae=X+ee*c.outChannels,Q=ee*c.strideWidth-x;for(let le=0;le<p;++le){let ie=Q+le*g;if(ie<0||ie>=c.inWidth)continue;let Z=z+le*A[2],ge=q+ie*c.inChannels,ne=Z;for(let ye=0;ye<c.inChannels;++ye){let xe=_[ge+ye];for(let Ne=0;Ne<c.outChannels;++Ne)S[ae+Ne]+=xe*C[ne+Ne];ne+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var H0t={kernelName:Tb,backendName:"cpu",kernelFunc:MTr};re();function RTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o;at([i,s],"conv3dBackpropFilterV2");let c=H.computeStrides(i.shape),f=H.computeStrides(s.shape),d=ce.computeConv3DInfo(i.shape,u,a,1,l),p=d.strideDepth,m=d.strideHeight,h=d.strideWidth,g=d.filterDepth,y=d.filterHeight,b=d.filterWidth,x=new wn(d.filterShape,"float32"),v=x.values,[w,_,C,S]=x.strides,E=n.data.get(s.dataId).values,[A,N,k,M]=f,I=n.data.get(i.dataId).values,[L,P,R,V]=c,G=d.padInfo.front,U=d.padInfo.left,Y=d.padInfo.top;for(let X=0;X<g;++X){let pe=Math.max(0,Math.ceil((G-X)/p)),$=Math.min(d.outDepth,(d.inDepth+G-X)/p),F=X*w;for(let z=0;z<y;++z){let q=Math.max(0,Math.ceil((Y-z)/m)),ee=Math.min(d.outHeight,(d.inHeight+Y-z)/m),ae=z*_+F;for(let Q=0;Q<b;++Q){let le=Math.max(0,Math.ceil((U-Q)/h)),ie=Math.min(d.outWidth,(d.inWidth+U-Q)/h),Z=Q*C+ae;for(let ge=0;ge<d.inChannels;++ge){let ne=ge*S+Z;for(let ye=0;ye<d.outChannels;++ye){let xe=0;for(let Ne=0;Ne<d.batchSize;++Ne){let Ae=Ne*L,Me=Ne*A;for(let ze=pe;ze<$;++ze){let We=(X+ze*p-G)*P+Ae,Bt=ze*N+Me;for(let Tt=q;Tt<ee;++Tt){let Rt=(z+Tt*m-Y)*R+We,Nt=Tt*k+Bt;for(let Le=le;Le<ie;++Le){let Ge=(Q+Le*h-U)*V+Rt,fe=Le*M+Nt;xe+=I[Ge+ge]*E[fe+ye]}}}}v[ne+ye]=xe}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var Y0t={kernelName:lS,backendName:"cpu",kernelFunc:RTr};re();function jTr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o;at([i],"conv3dBackpropInputV2");let c=H.computeStrides(i.shape),f=H.computeStrides(s.shape),d=ce.computeConv3DInfo(u,s.shape,l,1,a),p=new wn(d.inShape,"float32"),m=p.values,[h,g,y,b]=p.strides,x=n.data.get(i.dataId).values,[v,w,_,C]=c,S=n.data.get(s.dataId).values,[E,A,N,k]=f,{batchSize:M,filterDepth:I,filterHeight:L,filterWidth:P,inChannels:R,inDepth:V,inHeight:G,inWidth:U,outChannels:Y,outDepth:X,outHeight:pe,outWidth:$,strideDepth:F,strideHeight:z,strideWidth:q}=d,ee=I-1-d.padInfo.front,ae=L-1-d.padInfo.top,Q=P-1-d.padInfo.left;for(let le=0;le<M;++le)for(let ie=0;ie<R;++ie)for(let Z=0;Z<V;++Z){let ge=Z-ee,ne=Math.max(0,Math.ceil(ge/F)),ye=Math.min(X,(I+ge)/F);for(let xe=0;xe<G;++xe){let Ne=xe-ae,Ae=Math.max(0,Math.ceil(Ne/z)),Me=Math.min(pe,(L+Ne)/z);for(let ze=0;ze<U;++ze){let lt=ze-Q,We=Math.max(0,Math.ceil(lt/q)),Bt=Math.min($,(P+lt)/q),Tt=0;for(let At=ne;At<ye;++At){let Rt=At*F-ge;for(let Nt=Ae;Nt<Me;++Nt){let Le=Nt*z-Ne;for(let ut=We;ut<Bt;++ut){let Ge=ut*q-lt,fe=v*le+w*At+_*Nt+C*ut,he=E*(I-1-Rt)+A*(L-1-Le)+N*(P-1-Ge)+k*ie;for(let oe=0;oe<Y;++oe){let be=x[fe+oe],Oe=S[he+oe];Tt+=be*Oe}}}}m[h*le+g*Z+y*xe+b*ze+ie]=Tt}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}var X0t={kernelName:uS,backendName:"cpu",kernelFunc:jTr};re();var PTr=_r(vg,t=>Math.cos(t)),K0t={kernelName:vg,backendName:"cpu",kernelFunc:PTr};re();var LTr=_r(wg,t=>Math.cosh(t)),Z0t={kernelName:wg,backendName:"cpu",kernelFunc:LTr};re();function BTr(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,[f,d,p,m]=i.shape,h=s.shape[0],[g,y]=l,b=Qt([h,g,y,m],"float32"),x=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,_=H.computeStrides(i.shape),C=H.computeStrides(b.shape);for(let S=0;S<h;S++){let E=S*4,A=x[E],N=x[E+1],k=x[E+2],M=x[E+3],I=v[S];if(I>=f)continue;let L=g>1?(k-A)*(d-1)/(g-1):0,P=y>1?(M-N)*(p-1)/(y-1):0;for(let R=0;R<g;R++){let V=g>1?A*(d-1)+R*L:.5*(A+k)*(d-1);if(V<0||V>d-1){for(let G=0;G<y;G++)for(let U=0;U<m;U++){let Y=U+G*C[2]+R*C[1]+S*C[0];b.values[Y]=c}continue}if(u==="bilinear"){let G=Math.floor(V),U=Math.ceil(V),Y=V-G;for(let X=0;X<y;X++){let pe=y>1?N*(p-1)+X*P:.5*(N+M)*(p-1);if(pe<0||pe>p-1){for(let q=0;q<m;q++){let ee=q+X*C[2]+R*C[1]+S*C[0];b.values[ee]=c}continue}let $=Math.floor(pe),F=Math.ceil(pe),z=pe-$;for(let q=0;q<m;q++){let ee=q+$*_[2]+G*_[1]+I*_[0],ae=w[ee];ee=q+F*_[2]+G*_[1]+I*_[0];let Q=w[ee];ee=q+$*_[2]+U*_[1]+I*_[0];let le=w[ee];ee=q+F*_[2]+U*_[1]+I*_[0];let ie=w[ee],Z=ae+(Q-ae)*z,ge=le+(ie-le)*z;ee=q+X*C[2]+R*C[1]+S*C[0],b.values[ee]=Z+(ge-Z)*Y}}}else for(let G=0;G<y;++G){let U=y>1?N*(p-1)+G*P:.5*(N+M)*(p-1);if(U<0||U>p-1){for(let pe=0;pe<m;pe++){let $=pe+G*C[2]+R*C[1]+S*C[0];b.values[$]=c}continue}let Y=Math.round(U),X=Math.round(V);for(let pe=0;pe<m;pe++){let $=pe+Y*_[2]+X*_[1]+I*_[0],F=pe+G*C[2]+R*C[1]+S*C[0];b.values[F]=w[$]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var Q0t={kernelName:fS,backendName:"cpu",kernelFunc:BTr};re();function $Tr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;at(i,"cumprod");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=fi({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=Bi(c.dtype,"int32"),p=H.makeOnesTypedArray(H.sizeFromShape(c.shape),d),m=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],g=l?(b,x)=>b+h-x-1:(b,x)=>b+x;for(let b=0;b<m.length;b+=h)for(let x=0;x<h;x++){let v=g(b,x);if(x===0)p[v]=a?1:m[v];else{let w=g(b,x-1);p[v]=a?m[w]*p[w]:m[v]*p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=fi({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var J0t={kernelName:cS,backendName:"cpu",kernelFunc:$Tr};re();function zTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;at(i,"cumsum");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=fi({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=Bi(c.dtype,"int32"),p=H.makeZerosTypedArray(H.sizeFromShape(c.shape),d),m=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],g=l?(b,x)=>b+h-x-1:(b,x)=>b+x;for(let b=0;b<m.length;b+=h)for(let x=0;x<h;x++){let v=g(b,x);if(x===0)p[v]=a?0:m[v];else{let w=g(b,x-1);p[v]=a?m[w]+p[w]:m[v]+p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=fi({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var eyt={kernelName:Ab,backendName:"cpu",kernelFunc:zTr};re();function UTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=pM(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=VJ(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var tyt={kernelName:dS,backendName:"cpu",kernelFunc:UTr};re();function VTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o;H.assert(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);let l=i.shape[0],u=i.shape[1],c=i.shape[2],f=i.shape[3],d=u*s,p=c*s,m=f/(s*s),h=n.data.get(i.dataId).values,g=new Float32Array(l*d*p*m),y=0;for(let b=0;b<l;++b)for(let x=0;x<d;++x){let v=Math.floor(x/s),w=x%s;for(let _=0;_<p;++_){let C=Math.floor(_/s),S=_%s,E=(w*s+S)*m;for(let A=0;A<m;++A){let k=A+E+f*(C+c*(v+u*b));g[y++]=h[k]}}}return n.makeTensorInfo([l,d,p,m],i.dtype,g)}var ryt={kernelName:pS,backendName:"cpu",kernelFunc:VTr};re();function BCe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;at([i,s],"depthwiseConv2DNative");let f=H.computeStrides(i.shape),d=H.computeStrides(s.shape),p=u;p==null&&(p=[1,1]),H.assert(ce.eitherStridesOrDilationsAreOne(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);let m=ce.computeConv2DInfo(i.shape,s.shape,a,p,l,c,!0),{filterHeight:h,filterWidth:g,dilationHeight:y,dilationWidth:b,padInfo:x}=m,v=x.left,w=x.top,_=m.outChannels/m.inChannels,C=new wn(m.outShape,i.dtype),S=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,A=C.values;for(let N=0;N<m.batchSize;++N){let k=N*f[0],M=N*C.strides[0];for(let I=0;I<m.outHeight;++I){let L=M+I*C.strides[1],P=I*m.strideHeight-w;for(let R=0;R<h;++R){let V=P+R*y;if(V<0||V>=m.inHeight)continue;let G=R*d[0],U=k+V*f[1];for(let Y=0;Y<m.outWidth;++Y){let X=L+Y*C.strides[2],pe=Y*m.strideWidth-v;for(let $=0;$<g;++$){let F=pe+$*b;if(F<0||F>=m.inWidth)continue;let z=G+$*d[1],q=U+F*m.inChannels,ee=X,ae=z;for(let Q=0;Q<m.inChannels;++Q){let le=S[q+Q];for(let ie=0;ie<_;++ie)A[ee+ie]+=le*E[ae+ie];ee+=_,ae+=_}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var nyt={kernelName:kb,backendName:"cpu",kernelFunc:BCe};re();function GTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o;at([i,s],"depthwiseConv2dNativeBackpropFilter");let d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),{strideHeight:p,strideWidth:m,filterHeight:h,filterWidth:g}=d,y=new wn(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,v=d.outChannels/d.inChannels,w=n.data.get(i.dataId).values,_=new wn(i.shape,i.dtype,w),C=n.data.get(s.dataId).values,S=new wn(s.shape,s.dtype,C);for(let E=0;E<h;++E){let A=Math.max(0,Math.ceil((x-E)/p)),N=Math.min(d.outHeight,(d.inHeight+x-E)/p);for(let k=0;k<g;++k){let M=Math.max(0,Math.ceil((b-k)/m)),I=Math.min(d.outWidth,(d.inWidth+b-k)/m);for(let L=0;L<d.outChannels;++L){let P=Math.trunc(L/v),R=L%v,V=0;for(let G=0;G<d.batchSize;++G)for(let U=A;U<N;++U){let Y=E+U*p-x;for(let X=M;X<I;++X){let pe=k+X*m-b;V+=_.get(G,Y,pe,P)*S.get(G,U,X,L)}}y.set(V,E,k,P,R)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var oyt={kernelName:mS,backendName:"cpu",kernelFunc:GTr};re();function WTr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o;at([i,s],"depthwiseConv2DNativeBackpropInput");let d=H.computeStrides(i.shape),p=H.computeStrides(s.shape),m=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),h=new wn(m.inShape,"float32"),g=h.values,[y,b,x]=h.strides,v=n.data.get(i.dataId).values,[w,_,C]=d,S=n.data.get(s.dataId).values,[E,A,N]=p,{batchSize:k,filterHeight:M,filterWidth:I,inChannels:L,inHeight:P,inWidth:R,outChannels:V,outHeight:G,outWidth:U,strideHeight:Y,strideWidth:X}=m,pe=M-1-m.padInfo.top,$=I-1-m.padInfo.left,F=V/L;for(let z=0;z<k;++z)for(let q=0;q<L;++q)for(let ee=0;ee<P;++ee){let ae=ee-pe,Q=Math.max(0,Math.ceil(ae/Y)),le=Math.min(G,(M+ae)/Y);for(let ie=0;ie<R;++ie){let Z=ie-$,ge=Math.max(0,Math.ceil(Z/X)),ne=Math.min(U,(I+Z)/X),ye=0;for(let xe=Q;xe<le;++xe){let Ne=xe*Y-ae;for(let Ae=ge;Ae<ne;++Ae){let Me=Ae*X-Z,ze=w*z+_*xe+C*Ae,lt=E*(M-1-Ne)+A*(I-1-Me)+N*q;for(let We=0;We<F;++We){let Bt=q*F+We,Tt=v[ze+Bt],At=S[lt+We];ye+=Tt*At}}}g[y*z+b*ee+x*ie+q]=ye}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}var iyt={kernelName:hS,backendName:"cpu",kernelFunc:WTr};re();function qTr(t){let{inputs:r,backend:n}=t,{x:o}=r,i=H.sizeFromShape(o.shape),s=n.data.get(o.dataId).values,a=Qt([i,i],o.dtype),l=a.values;for(let c=0;c<s.length;c++)l[c*i+c]=s[c];let u=[...o.shape,...o.shape];return n.makeTensorInfo(u,a.dtype,a.values)}var syt={kernelName:gS,backendName:"cpu",kernelFunc:qTr};re();var ayt={kernelName:Ib,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i}=t,{strides:s,pad:a,dilations:l}=n,u=r,c=u.data.get(o.dataId).values,f=o.shape.length,d=u.data.get(i.dataId).values,p=i.shape.length,{batchSize:m,inHeight:h,inWidth:g,inChannels:y,outHeight:b,outWidth:x,padInfo:v,strideHeight:w,strideWidth:_,filterHeight:C,filterWidth:S,dilationHeight:E,dilationWidth:A,outShape:N}=ce.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),k=H.sizeFromShape(N),M=N.length,I=H.getArrayFromDType(o.dtype,k);for(let P=0;P<m;++P)for(let R=0;R<b;++R){let V=R*w-v.top;for(let G=0;G<x;++G){let U=G*_-v.left;for(let Y=0;Y<y;++Y){let X=Number.MIN_SAFE_INTEGER;for(let $=0;$<C;++$){let F=V+$*E;if(F>=0&&F<h)for(let z=0;z<S;++z){let q=U+z*A;if(q>=0&&q<g){let ee=H.locToIndex([P,F,q,Y],f,H.computeStrides(o.shape)),ae=H.locToIndex([$,z,Y],p,H.computeStrides(i.shape)),Q=c[ee]+d[ae];Q>X&&(X=Q)}}}let pe=H.locToIndex([P,R,G,Y],M,H.computeStrides(N));I[pe]=X}}}return{dataId:u.write(H.toTypedArray(I,o.dtype),N,o.dtype),shape:N,dtype:o.dtype}}};re();var lyt={kernelName:Ok,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=H.toNestedArray(o.shape,c.data.get(o.dataId).values),d=H.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:m,inWidth:h,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:A}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);H.assert(s.rank===A.length,()=>`Error in ${Ok}, dy must have the same rank as output ${A.length}, but got ${s.rank}`);let N=H.toNestedArray(A,c.data.get(s.dataId).values),k=H.makeZerosNestedTypedArray(i.shape,i.dtype);for(let I=0;I<p;++I)for(let L=0;L<y;++L){let P=L*v-x.top;for(let R=0;R<b;++R){let V=R*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,Y=0,X=0;for(let pe=0;pe<_;++pe){let $=P+pe*S;if($>=0&&$<m)for(let F=0;F<C;++F){let z=V+F*E;if(z>=0&&z<h){let q=f[I][$][z][G]+d[pe][F][G];q>U&&(U=q,Y=pe,X=F)}}}k[Y][X][G]+=N[I][L][R][G]}}}return{dataId:c.write(H.toTypedArray(k,o.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};re();var uyt={kernelName:Fk,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=H.toNestedArray(o.shape,c.data.get(o.dataId).values),d=H.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:m,inWidth:h,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:A}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);H.assert(s.rank===A.length,()=>`Error in ${Fk}, dy must have the same rank as output ${A.length}, but got ${s.rank}`);let N=H.toNestedArray(A,c.data.get(s.dataId).values),k=H.makeZerosNestedTypedArray(o.shape,o.dtype);for(let I=0;I<p;++I)for(let L=0;L<y;++L){let P=L*v-x.top;for(let R=0;R<b;++R){let V=R*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,Y=P<0?0:P,X=V<0?0:V;for(let pe=0;pe<_;++pe){let $=P+pe*S;if($>=0&&$<m)for(let F=0;F<C;++F){let z=V+F*E;if(z>=0&&z<h){let q=f[I][$][z][G]+d[pe][F][G];q>U&&(U=q,Y=$,X=z)}}}k[I][Y][X][G]+=N[I][L][R][G]}}}return{dataId:c.write(H.toTypedArray(k,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function HTr(t){let{inputs:r,backend:n,attrs:o}=t,{image:i}=r,{canvas:s,options:a}=o,{contextOptions:l,imageOptions:u}=a||{},c=u?.alpha||1,f=l?.contextType||"2d";if(f!=="2d")throw new Error(`Context type ${l.contextType} is not supported by the CPU backend.`);let d=s.getContext(f,l?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${f} type.`);let[p,m]=i.shape.slice(0,2),h=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,y=i.dtype==="float32"?255:1,b=new Uint8ClampedArray(m*p*4);for(let v=0;v<p*m;++v){let w=[0,0,0,255*c];for(let C=0;C<h;C++){let S=g[v*h+C];if(i.dtype==="float32"){if(S<0||S>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${S}.`)}else if(i.dtype==="int32"&&(S<0||S>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${S}.`);h===1?(w[0]=S*y,w[1]=S*y,w[2]=S*y):w[C]=S*y}let _=v*4;b[_+0]=Math.round(w[0]),b[_+1]=Math.round(w[1]),b[_+2]=Math.round(w[2]),b[_+3]=Math.round(w[3])}s.width=m,s.height=p;let x=new ImageData(b,m,p);return d.putImageData(x,0,0),i}var cyt={kernelName:Mk,backendName:"cpu",kernelFunc:HTr};re();re();function Xv(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"sum");let l;i.dtype==="bool"?l=qp({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):l=hl({inputs:{x:i},backend:n});let u=l.shape.length,c=H.parseAxisParam(s,l.shape),f=ce.getAxesPermutation(c,u),d=c,p=l;f!=null&&(p=fi({inputs:{x:l},backend:n,attrs:{perm:f}}),d=ce.getInnerMostAxes(d.length,u)),ce.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[m,h]=ce.computeOutAndReduceShapes(p.shape,d),g=ce.upcastType(p.dtype,"int32"),y=fM(n,m,g),b=H.sizeFromShape(h),x=n.data.get(y.dataId).values,v=n.data.get(p.dataId).values;for(let w=0;w<x.length;++w){let _=w*b,C=0;for(let S=0;S<b;++S)C+=v[_+S];x[w]=C}if(a){let w=ce.expandShapeToKeepDim(y.shape,c),_=y;y=pn({inputs:{x:y},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(_)}return n.disposeIntermediateTensorInfo(l),f!=null&&n.disposeIntermediateTensorInfo(p),y}var fyt={kernelName:ex,backendName:"cpu",kernelFunc:Xv};function YTr(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,m=a.length,h=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(m,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=fi({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),h.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);H.arraysEqual(v.shape,w)||(v=pn({inputs:{x:v},backend:n,attrs:{shape:w}}),h.push(v)),p===null?p=v:(p=zA({inputs:{a:v,b:p},backend:n}),h.push(p))}g<d-1&&(c[g]>=0&&(p=Xv({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-m),keepDims:!1}}),h.push(p)),m--)}for(let g of h)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var dyt={kernelName:yS,backendName:"cpu",kernelFunc:YTr};re();function XTr(t){let{inputs:r,backend:n}=t,{dy:o,y:i}=r;at([o,i],"eluGrad");let s=new Float32Array(H.sizeFromShape(i.shape)),a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;++u){let c=a[u];c>=0?s[u]=l[u]:s[u]=l[u]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}var pyt={kernelName:bS,backendName:"cpu",kernelFunc:XTr};re();var KTr=ce.ERF_P,ZTr=ce.ERF_A1,QTr=ce.ERF_A2,JTr=ce.ERF_A3,eAr=ce.ERF_A4,tAr=ce.ERF_A5,rAr=_r(Cg,t=>{let r=Math.sign(t),n=Math.abs(t),o=1/(1+KTr*n);return r*(1-((((tAr*o+eAr)*o+JTr)*o+QTr)*o+ZTr)*o*Math.exp(-n*n))}),myt={kernelName:Cg,backendName:"cpu",kernelFunc:rAr};re();function yM(t){let{inputs:r,backend:n,attrs:o}=t,{input:i}=r,{dim:s}=o,a=i.shape.length,l=i.shape.slice(),u=s;return s<0&&(H.assert(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+s+1),l.splice(u,0,1),pn({inputs:{x:i},backend:n,attrs:{shape:l}})}var hyt={kernelName:Db,backendName:"cpu",kernelFunc:yM};re();re();re();var nAr=dn((t,r)=>t/r),w6=vn(_g,nAr),_6={kernelName:_g,backendName:"cpu",kernelFunc:w6};function cee(t,r,n){let o=t.shape,i=o[0],s=o[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,u=a.complexTensorInfos.imag,c=[i,s],f=H.sizeFromShape(c),d=H.getTypedArrayFromDType("float32",f),p=H.getTypedArrayFromDType("float32",f);for(let y=0;y<i;y++){let b=Yp({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,s]}}),x=Yp({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,s]}}),v=Fs({inputs:{real:b,imag:x},backend:n}),{real:w,imag:_}=oAr(v,r,n),C=ce.mergeRealAndImagArrays(w,_);for(let S=0;S<s;S++){let E=ce.getComplexWithIndex(C,S);d[y*s+S]=E.real,p[y*s+S]=E.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}let m=n.makeTensorInfo(c,"float32",d),h=n.makeTensorInfo(c,"float32",p),g=Fs({inputs:{real:m,imag:h},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(h),g}function oAr(t,r,n){let o=H.sizeFromShape(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(iAr(o)){let l=$Ce(s,a,o,r,n),u=[t.shape[0],t.shape[1]];if(r){let c=n.makeTensorInfo(u,"float32",l.real),f=n.makeTensorInfo(u,"float32",l.imag),d=n.makeTensorInfo([],"float32",H.createScalarValue(o,"float32")),p=hl({inputs:{x:d},backend:n}),m=_6.kernelFunc({inputs:{a:c,b:d},backend:n}),h=_6.kernelFunc({inputs:{a:f,b:p},backend:n}),g=n.data.get(m.dataId).values,y=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(h),{real:g,imag:y}}return l}else{let l=ce.mergeRealAndImagArrays(s,a),u=sAr(l,o,r);return ce.splitRealAndImagArrays(u)}}function iAr(t){return(t&t-1)===0}function $Ce(t,r,n,o,i){if(n===1)return{real:t,imag:r};let s=ce.mergeRealAndImagArrays(t,r),a=n/2,l=ce.complexWithEvenIndex(s),u=l.real,c=l.imag,f=[u.length],d=i.makeTensorInfo(f,"float32",u),p=i.makeTensorInfo(f,"float32",c),m=Fs({inputs:{real:d,imag:p},backend:i}),h=ce.complexWithOddIndex(s),g=h.real,y=h.imag,b=[g.length],x=i.makeTensorInfo(b,"float32",g),v=i.makeTensorInfo(b,"float32",y),w=Fs({inputs:{real:x,imag:v},backend:i}),_=$Ce(u,c,a,o,i),C=_.real,S=_.imag,E=[C.length],A=i.makeTensorInfo(E,"float32",C),N=i.makeTensorInfo(E,"float32",S),k=Fs({inputs:{real:A,imag:N},backend:i}),M=$Ce(g,y,a,o,i),I=M.real,L=M.imag,P=[I.length],R=i.makeTensorInfo(P,"float32",I),V=i.makeTensorInfo(P,"float32",L),G=Fs({inputs:{real:R,imag:V},backend:i}),U=ce.exponents(n,o),Y=[U.real.length],X=i.makeTensorInfo(Y,"float32",U.real),pe=i.makeTensorInfo(Y,"float32",U.imag),$=Fs({inputs:{real:X,imag:pe},backend:i}),F=zA({inputs:{a:$,b:G},backend:i}),z=Zy({inputs:{a:k,b:F},backend:i}),q=x6({inputs:{a:k,b:F},backend:i}),ee=Wp({inputs:{input:z},backend:i}),ae=Wp({inputs:{input:q},backend:i}),Q=Qy({inputs:{input:z},backend:i}),le=Qy({inputs:{input:q},backend:i}),ie=D2({inputs:[ee,ae],backend:i,attrs:{axis:0}}),Z=D2({inputs:[Q,le],backend:i,attrs:{axis:0}}),ge=i.data.get(ie.dataId).values,ne=i.data.get(Z.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(m),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(A),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(Z),{real:ge,imag:ne}}function sAr(t,r,n){let o=new Float32Array(r*2);for(let i=0;i<r;i++){let s=0,a=0;for(let l=0;l<r;l++){let u=ce.exponent(i*l,r,n),c=ce.getComplexWithIndex(t,l);s+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(s/=r,a/=r),ce.assignToTypedArray(o,s,a,i)}return o}function aAr(t){let{inputs:r,backend:n}=t,{input:o}=r,i=H.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=pn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=cee(l,!1,n),c=pn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var gyt={kernelName:xS,backendName:"cpu",kernelFunc:aAr};re();function S6(t){let{backend:r,attrs:n}=t,{shape:o,value:i,dtype:s}=n,a=s||H.inferDtype(i),l=H.getArrayFromDType(a,H.sizeFromShape(o));return lAr(l,i,a),r.makeTensorInfo(o,a,l)}var yyt={kernelName:vS,backendName:"cpu",kernelFunc:S6};function lAr(t,r,n){t.fill(r)}re();var byt={kernelName:wS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,i=n,s=H.getTypedArrayFromDType(o.dtype,H.sizeFromShape(o.shape)),[a,l,u,c]=o.shape,f=i.data.get(o.dataId).values;for(let p=0;p<a;p++){let m=p*u*l*c;for(let h=0;h<l;h++){let g=h*(u*c);for(let y=0;y<u;y++){let b=y*c;for(let x=0;x<c;x++){let v=Math.round(u-y-1),w=m+g+b+x,_=f[w];if(v>=0&&v<u){let C=v*c,S=m+g+C+x;_=f[S]}s[w]=_}}}}return{dataId:i.write(s,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function uAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:m,leakyreluAlpha:h}=o,g=LCe({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;if(f==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){let b=pn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=Zy({inputs:{a:g,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else g=Zy({inputs:{a:g,b:a},backend:n});n.disposeIntermediateTensorInfo(y)}if(m){let y=g;if(f==="NCHW"&&m==="prelu"&&l.shape.length===1&&l.shape[0]!==1){let b=pn({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});g=UA(n,g,m,b,h),n.disposeIntermediateTensorInfo(b)}else g=UA(n,g,m,l,h);n.disposeIntermediateTensorInfo(y)}return g}var xyt={kernelName:C1,backendName:"cpu",kernelFunc:uAr};re();function cAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:m,leakyreluAlpha:h}=o,g=BCe({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;g=Zy({inputs:{a:g,b:a},backend:n}),n.disposeIntermediateTensorInfo(y)}if(m){let y=g;g=UA(n,g,m,l,h),n.disposeIntermediateTensorInfo(y)}return g}var vyt={kernelName:E1,backendName:"cpu",kernelFunc:cAr};re();function fAr(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=H.sizeFromShape(o.shape),a=i.shape,l=a[a.length-1],[u,c,f,d]=ce.prepareAndValidate(o,i);if(c===0)return n.makeTensorInfo(u,o.dtype,[]);let p=n.data.get(i.dataId).values,m=n.bufferSync(o),h=WJ(p,m,o.dtype,c,l,f,d,o.shape,s);return n.makeTensorInfo(u,o.dtype,h.values)}var wyt={kernelName:_S,backendName:"cpu",kernelFunc:fAr};re();function dAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o;at([i,s],"gatherV2");let u=H.parseAxisParam(a,i.shape)[0],c=n.data.get(s.dataId).values,f=i.shape[u];for(let w=0;w<c.length;++w){let _=c[w];H.assert(_<=f-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${f-1}]`)}let d=l;l==null&&(d=0);let p=H.sizeFromShape(s.shape),m=ce.segment_util.collectGatherOpShapeInfo(i,s,u,d),h=pn({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=pn({inputs:{x:s},backend:n,attrs:{shape:[m.batchSize,p/m.batchSize]}}),y=[m.batchSize,m.outerSize,p/m.batchSize,m.sliceSize],b=n.bufferSync(g),x=n.bufferSync(h),v=qJ(x,b,y);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,v.dtype,v.values)}var _yt={kernelName:Fb,backendName:"cpu",kernelFunc:dAr};re();function pAr(t){let{inputs:r,backend:n}=t,{input:o}=r,i=H.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=pn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=cee(l,!0,n),c=pn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var Syt={kernelName:SS,backendName:"cpu",kernelFunc:pAr};re();var mAr=_r(Dg,t=>Number.isFinite(t)?1:0,"bool"),Cyt={kernelName:Dg,backendName:"cpu",kernelFunc:mAr};re();var hAr=_r(Ng,t=>Math.abs(t)===1/0?1:0,"bool"),Eyt={kernelName:Ng,backendName:"cpu",kernelFunc:hAr};re();var gAr=_r(Fg,t=>Number.isNaN(t)?1:0,"bool"),Tyt={kernelName:Fg,backendName:"cpu",kernelFunc:gAr};re();function yAr(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=HJ(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var Ayt={kernelName:ES,backendName:"cpu",kernelFunc:yAr};re();var bAr=_r(Mg,t=>Math.log1p(t)),kyt={kernelName:Mg,backendName:"cpu",kernelFunc:bAr};re();var xAr=dn((t,r)=>t&&r),vAr=vn(b1,xAr,null,"bool"),Iyt={kernelName:b1,backendName:"cpu",kernelFunc:vAr};re();var wAr=_r(x1,t=>t?0:1,"bool"),Dyt={kernelName:x1,backendName:"cpu",kernelFunc:wAr};re();var _Ar=dn((t,r)=>t||r),SAr=vn(v1,_Ar,null,"bool"),Nyt={kernelName:v1,backendName:"cpu",kernelFunc:SAr};re();function CAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o;at(i,"LRN");let c=i.shape[3],f=c-1,d=n.data.get(i.dataId).values,p=H.sizeFromShape(i.shape),m=new Float32Array(p);function h(g){let y=g%c,b=g-y+Math.max(0,y-s),x=g-y+Math.min(y+s,f),v=0;for(;b<=x;b++){let w=d[b];v+=w*w}return v}for(let g=0;g<p;g++){let y=h(g),b=d[g]*Math.pow(a+l*y,-u);m[g]=b}return n.makeTensorInfo(i.shape,i.dtype,m)}var Fyt={kernelName:Mb,backendName:"cpu",kernelFunc:CAr};re();function EAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o;at(a,"LRNGrad");let d=H.sizeFromShape(a.shape),p=a.shape[3],m=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,y=new Float32Array(d),b=d;for(let x=0;x<b;x++){let v=x%p,w=x-v+Math.max(0,v-l),_=x-v+Math.min(p,v+l+1),C=0;for(let S=w;S<_;S++)C+=Math.pow(h[S],2);C=c*C+u;for(let S=w;S<_;S++){let E=-2*c*f*h[S]*g[x]/C;x===S&&(E+=Math.pow(C,-f)),E*=m[x],y[S]+=E}}return n.makeTensorInfo(a.shape,i.dtype,y)}var Oyt={kernelName:TS,backendName:"cpu",kernelFunc:EAr};re();re();re();function zCe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=n,u=i.shape,c=u.length,f=H.parseAxisParam(s,u),d=f,p=ce.getAxesPermutation(d,c),m=l.data.get(i.dataId).values;if(p!=null){let w=new Array(c);for(let _=0;_<w.length;_++)w[_]=u[p[_]];m=mM(m,u,i.dtype,p,w),d=ce.getInnerMostAxes(d.length,c),u=w}at(i,"max"),ce.assertAxesAreInnerMostDims("max",d,c);let[h,g]=ce.computeOutAndReduceShapes(u,d),y=H.sizeFromShape(g),b=YJ(m,y,h,i.dtype),x=l.write(b,h,i.dtype),v=h;return a&&(v=ce.expandShapeToKeepDim(h,f)),{dataId:x,shape:v,dtype:i.dtype}}var Myt={kernelName:Rb,backendName:"cpu",kernelFunc:zCe};re();function TAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;at(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))d=hl({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,m=H.computeStrides(i.shape),h=gM(p,i.shape,i.dtype,m,f,"max");d=n.makeTensorInfo(f.outShape,i.dtype,h.values)}return d}var Ryt={kernelName:jb,backendName:"cpu",kernelFunc:TAr};re();function AAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;at(i,"maxPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=uee(d,i.shape,i.dtype,H.computeStrides(i.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}var jyt={kernelName:Pb,backendName:"cpu",kernelFunc:AAr};re();function kAr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;at([i,s],"maxPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=n.bufferSync(s),p=N0t(d,f),m=f.strideDepth,h=f.strideHeight,g=f.strideWidth,y=f.dilationDepth,b=f.dilationHeight,x=f.dilationWidth,v=f.effectiveFilterDepth,w=f.effectiveFilterHeight,_=f.effectiveFilterWidth,C=v-1-f.padInfo.front,S=_-1-f.padInfo.left,E=w-1-f.padInfo.top,A=Qt(s.shape,"float32"),N=n.bufferSync(i);for(let k=0;k<f.batchSize;++k)for(let M=0;M<f.inChannels;++M)for(let I=0;I<f.inDepth;++I)for(let L=0;L<f.inHeight;++L)for(let P=0;P<f.inWidth;++P){let R=I-C,V=L-E,G=P-S,U=0;for(let Y=0;Y<v;Y+=y){let X=(R+Y)/m;if(!(X<0||X>=f.outDepth||Math.floor(X)!==X))for(let pe=0;pe<w;pe+=b){let $=(V+pe)/h;if(!($<0||$>=f.outHeight||Math.floor($)!==$))for(let F=0;F<_;F+=x){let z=(G+F)/g;if(z<0||z>=f.outWidth||Math.floor(z)!==z)continue;let q=v*w*_-1-p.get(k,X,$,z,M),ee=Y*w*_+pe*_+F,ae=q===ee?1:0;if(ae===0)continue;let Q=N.get(k,X,$,z,M);U+=Q*ae}}}A.set(U,k,I,L,P,M)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}var Pyt={kernelName:kS,backendName:"cpu",kernelFunc:kAr};re();function IAr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;at([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),m=n.data.get(l.dataId).values,h=Qt(p.outShape,l.dtype,lee(m,l.shape,l.dtype,p).values),g=p.strideHeight,y=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,v=p.effectiveFilterHeight,w=p.effectiveFilterWidth,_=w-1-p.padInfo.left,C=v-1-p.padInfo.top,S=Qt(l.shape,"float32"),E=n.data.get(i.dataId).values,A=Qt(i.shape,"float32",E);for(let N=0;N<p.batchSize;++N)for(let k=0;k<p.inChannels;++k)for(let M=0;M<p.inHeight;++M)for(let I=0;I<p.inWidth;++I){let L=M-C,P=I-_,R=0;for(let V=0;V<v;V+=b){let G=(L+V)/g;if(!(G<0||G>=p.outHeight||Math.floor(G)!==G))for(let U=0;U<w;U+=x){let Y=(P+U)/y;if(Y<0||Y>=p.outWidth||Math.floor(Y)!==Y)continue;let X=v*w-1-h.get(N,G,Y,k),pe=V*w+U,$=X===pe?1:0;if($===0)continue;let F=A.get(N,G,Y,k);R+=F*$}}S.set(R,N,M,I,k)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}var Lyt={kernelName:AS,backendName:"cpu",kernelFunc:IAr};re();re();re();function Byt(t,r,n,o,i){let s=H.computeStrides(r),a=gM(t,r,n,s,i,"max"),l=lee(t,r,n,i,!0,o);return[a.values,l.values]}var $yt={kernelName:IS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;at(o,"MaxPoolWithArgmax");let c=u.data.get(o.dataId).values,f=ce.computePool2DInfo(o.shape,i,s,[1,1],a),[d,p]=Byt(c,o.shape,o.dtype,l,f),m=u.write(d,f.outShape,o.dtype),h=u.write(p,f.outShape,o.dtype);return[{dataId:m,shape:f.outShape,dtype:o.dtype},{dataId:h,shape:f.outShape,dtype:"int32"}]}};re();function DAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=H.parseAxisParam(s,i.shape),c=ce.computeOutAndReduceShapes(i.shape,l)[1],f=H.sizeFromShape(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));d.push(p);let m=qp({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(m);let h=w6({inputs:{a:m,b:p},backend:n});d.push(h);let g=Xv({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:a}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}var zyt={kernelName:Lb,backendName:"cpu",kernelFunc:DAr};re();function NAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"min");let l=H.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=fi({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),m=H.sizeFromShape(p),h=H.makeZerosTypedArray(H.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<h.length;++b){let x=b*m,v=g[x];for(let w=0;w<m;++w){let _=g[x+w];(Number.isNaN(_)||_<v)&&(v=_)}h[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,h);if(a){let b=ce.expandShapeToKeepDim(d,l),x=pn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var Uyt={kernelName:Bb,backendName:"cpu",kernelFunc:NAr};re();function FAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,mode:a}=o;at(i,"mirrorPad");let l=s.map((v,w)=>v[0]+i.shape[w]+v[1]),u=s.map(v=>v[0]),c=s.map((v,w)=>v[0]+i.shape[w]),f=a==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,m=H.computeStrides(i.shape),h=H.sizeFromShape(l),g=l.length,y=H.computeStrides(l),b=H.getTypedArrayFromDType(i.dtype,h);for(let v=0;v<h;v++){let w=H.indexToLoc(v,g,y);for(let C=0;C<g;C++)w[C]<u[C]?w[C]=u[C]*2-w[C]-f:w[C]>=c[C]&&(w[C]=(c[C]-1)*2-w[C]+f);w=w.map((C,S)=>C-u[S]);let _=H.locToIndex(w,p,m);b[v]=d[_]}return{dataId:n.write(b,l,i.dtype),shape:l,dtype:i.dtype}}var Vyt={kernelName:$b,backendName:"cpu",kernelFunc:FAr};re();var OAr=dn((t,r)=>{let n=t%r;return t<0&&r<0||t>=0&&r>=0?n:(n+r)%r}),MAr=vn(Pg,OAr),Gyt={kernelName:Pg,backendName:"cpu",kernelFunc:MAr};re();var qyt=jf(p3());re();function UCe(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=i.shape.length,l=s;if(l===-1&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);let u=H.parseAxisParam([l],i.shape),c=zCe({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),f=ce.expandShapeToKeepDim(c.shape,u),d=pn({inputs:{x:c},backend:n,attrs:{shape:f}}),p=x6({inputs:{a:i,b:d},backend:n}),m=uCe({inputs:{x:p},backend:n}),h=Xv({inputs:{x:m},backend:n,attrs:{axis:u,keepDims:!1}}),g=pn({inputs:{x:h},backend:n,attrs:{shape:f}}),y=w6({inputs:{a:m,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}var Wyt={kernelName:nx,backendName:"cpu",kernelFunc:UCe};function RAr(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o;at(i,"multinomial");let u=l?i:UCe({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=u.shape[0],f=u.shape[1],d=n.data.get(u.dataId).values,p=[c,s],m=H.makeZerosTypedArray(H.sizeFromShape(p),"int32");for(let h=0;h<c;++h){let g=h*f,y=new Float32Array(f-1);y[0]=d[g];for(let v=1;v<y.length;++v)y[v]=y[v-1]+d[g+v];let b=qyt.alea(a.toString()),x=h*s;for(let v=0;v<s;++v){let w=b();m[x+v]=y.length;for(let _=0;_<y.length;_++)if(w<y[_]){m[x+v]=_;break}}}return l||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",m)}var Hyt={kernelName:DS,backendName:"cpu",kernelFunc:RAr};re();var jAr=va.nonMaxSuppressionV3Impl;function PAr(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o;at(i,"NonMaxSuppression");let c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d}=jAr(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Yyt={kernelName:NS,backendName:"cpu",kernelFunc:PAr};re();var LAr=va.nonMaxSuppressionV4Impl;function BAr(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o;at(i,"NonMaxSuppressionPadded");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:m}=LAr(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}var Xyt={kernelName:FS,backendName:"cpu",kernelFunc:BAr};re();var $Ar=va.nonMaxSuppressionV5Impl;function zAr(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o;at(i,"NonMaxSuppressionWithScore");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=a,m=l,h=u,g=c,{selectedIndices:y,selectedScores:b}=$Ar(f,d,p,m,h,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var Kyt={kernelName:OS,backendName:"cpu",kernelFunc:zAr};re();function UAr(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o;at(i,"oneHot");let c=H.sizeFromShape(i.shape),f=new Float32Array(c*a);f.fill(u);let d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<a&&(f[p*a+d[p]]=l);return n.makeTensorInfo([...i.shape,a],s,f)}var Zyt={kernelName:Vb,backendName:"cpu",kernelFunc:UAr};re();re();function C6(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(o.dtype==="complex64"){let i=Wp({inputs:{input:o},backend:n}),s=C6({inputs:{x:i},backend:n}),a=Qy({inputs:{input:o},backend:n}),l=C6({inputs:{x:a},backend:n}),u=Fs({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return S6({backend:n,attrs:{shape:o.shape,value:0,dtype:o.dtype}})}var Qyt={kernelName:sx,backendName:"cpu",kernelFunc:C6};function Jyt(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(o.dtype==="complex64"){let i=Wp({inputs:{input:o},backend:n}),s=Jyt({inputs:{x:i},backend:n}),a=Qy({inputs:{input:o},backend:n}),l=C6({inputs:{x:a},backend:n}),u=Fs({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return S6({backend:n,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}var ebt={kernelName:Ub,backendName:"cpu",kernelFunc:Jyt};re();function VCe(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return yM({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{H.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),H.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=yM({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=D2({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var tbt={kernelName:Gb,backendName:"cpu",kernelFunc:VCe};re();function VAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;at(i,"pad");let l=s.map((x,v)=>x[0]+i.shape[v]+x[1]),u=s.map(x=>x[0]),c=n.data.get(i.dataId).values,f=H.sizeFromShape(i.shape),d=i.shape.length,p=H.computeStrides(i.shape),m=H.sizeFromShape(l),h=l.length,g=H.computeStrides(l),y=H.getTypedArrayFromDType(i.dtype,m);a!==0&&y.fill(a);for(let x=0;x<f;x++){let w=H.indexToLoc(x,d,p).map((C,S)=>C+u[S]),_=H.locToIndex(w,h,g);y[_]=c[x]}return{dataId:n.write(y,l,i.dtype),shape:l,dtype:i.dtype}}var fee={kernelName:Wb,backendName:"cpu",kernelFunc:VAr};re();var GAr=dn((t,r)=>Math.pow(t,r)),WAr=vn(Bg,GAr),rbt={kernelName:Bg,backendName:"cpu",kernelFunc:WAr};re();function qAr(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.data.get(b.dataId).values),c=i.map(b=>b.shape),f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,[p,m,h]=XJ(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(h,s.dtype,m);return g.concat([y])}var nbt={kernelName:MS,backendName:"cpu",kernelFunc:qAr};re();function HAr(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=KJ(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var obt={kernelName:RS,backendName:"cpu",kernelFunc:HAr};re();function YAr(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,p=l.map(y=>n.data.get(y.dataId).values),m=l.map(y=>y.shape),[h,g]=ZJ(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,m,u);return n.makeTensorInfo(h,s.dtype,g)}var ibt={kernelName:jS,backendName:"cpu",kernelFunc:YAr};re();function XAr(t){let{backend:r,attrs:n}=t,{start:o,stop:i,dtype:s,step:a}=n,l=QJ(o,i,a,s);return r.makeTensorInfo([l.length],s,l)}var sbt={kernelName:PS,backendName:"cpu",kernelFunc:XAr};re();var KAr=_r($g,t=>1/t),abt={kernelName:$g,backendName:"cpu",kernelFunc:KAr};re();function ZAr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;at(i,"resizeBilinear");let u=H.computeStrides(i.shape),[c,f]=l,[d,p,m,h]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(H.sizeFromShape([d,c,f,h])),b=[s&&c>1?p-1:p,s&&f>1?m-1:m],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=0,w=b[0]/x[0],_=b[1]/x[1];for(let C=0;C<d;C++)for(let S=0;S<c;S++){let E;a?E=w*(S+.5)-.5:E=w*S;let A=Math.max(0,Math.floor(E)),N=E-A,k=Math.min(p-1,Math.ceil(E)),M=C*u[0]+A*u[1],I=C*u[0]+k*u[1];for(let L=0;L<f;L++){let P;a?P=_*(L+.5)-.5:P=_*L;let R=Math.max(0,Math.floor(P)),V=P-R,G=Math.min(m-1,Math.ceil(P)),U=M+R*u[2],Y=I+R*u[2],X=M+G*u[2],pe=I+G*u[2];for(let $=0;$<h;$++){let F=g[U+$],z=g[Y+$],q=g[X+$],ee=g[pe+$],ae=F+(q-F)*V,Q=z+(ee-z)*V,le=ae+(Q-ae)*N;y[v++]=le}}}return n.makeTensorInfo([d,c,f,h],"float32",y)}var lbt={kernelName:Kb,backendName:"cpu",kernelFunc:ZAr};re();function QAr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;at([s,i],"resizeBilinearGrad");let l=H.computeStrides(i.shape),[u,c,f,d]=i.shape,[,p,m]=s.shape,h=new Float32Array(u*c*f*d),g=[a&&p>1?c-1:c,a&&m>1?f-1:f],y=[a&&p>1?p-1:p,a&&m>1?m-1:m],b=g[0]/y[0],x=g[1]/y[1],v=n.data.get(s.dataId).values,w=0;for(let _=0;_<u;_++){let C=_*l[0];for(let S=0;S<p;S++){let E=S*b,A=Math.floor(E),N=Math.min(Math.ceil(E),c-1),k=C+A*l[1],M=C+N*l[1],I=E-A,L=1-I;for(let P=0;P<m;P++){let R=P*x,V=Math.floor(R),G=Math.min(Math.ceil(R),f-1),U=R-V,Y=1-U,X=k+V*l[2],pe=k+G*l[2],$=M+V*l[2],F=M+G*l[2],z=L*Y,q=L*U,ee=I*Y,ae=I*U;for(let Q=0;Q<d;Q++){let le=v[w++];h[X+Q]+=le*z,h[pe+Q]+=le*q,h[$+Q]+=le*ee,h[F+Q]+=le*ae}}}}return n.makeTensorInfo([u,f,c,d],"float32",h)}var ubt={kernelName:$S,backendName:"cpu",kernelFunc:QAr};re();function JAr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;at(i,"resizeNearestNeighbor");let u=H.computeStrides(i.shape),[c,f]=l,[d,p,m,h]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(d*c*f*h),b=[s&&c>1?p-1:p,s&&f>1?m-1:m],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=b[0]/x[0],w=b[1]/x[1],_=0;for(let C=0;C<d;C++){let S=C*u[0];for(let E=0;E<c;E++){let A=a?v*(E+.5):v*E,N=Math.min(p-1,s?Math.round(A):Math.floor(A));a&&(N=Math.max(0,N));let k=S+N*u[1];for(let M=0;M<f;M++){let I=a?w*(M+.5):w*M,L=Math.min(m-1,s?Math.round(I):Math.floor(I));a&&(L=Math.max(0,L));let P=k+L*u[2];for(let R=0;R<h;R++){let V=g[P+R];y[_++]=V}}}}return n.makeTensorInfo([d,c,f,h],i.dtype,y)}var cbt={kernelName:Xb,backendName:"cpu",kernelFunc:JAr};re();function ekr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;at([s,i],"resizeNearestNeighborGrad");let l=H.computeStrides(i.shape),u=H.computeStrides(s.shape),[c,f,d,p]=i.shape,[,m,h]=s.shape,g=new Float32Array(c*f*d*p),y=n.data.get(s.dataId).values,b=[a&&m>1?f-1:f,a&&h>1?d-1:d],x=[a&&m>1?m-1:m,a&&h>1?h-1:h],v=b[0]/x[0],w=b[1]/x[1],_=1/v,C=1/w,S=Math.ceil(_)*2+2,E=Math.ceil(C)*2+2;for(let A=0;A<c;A++){let N=A*l[0];for(let k=0;k<f;k++){let M=N+k*l[1],I=Math.floor(k*_),L=Math.floor(I-S/2);for(let P=0;P<d;P++){let R=M+P*l[2],V=Math.floor(P*C),G=Math.floor(V-E/2);for(let U=0;U<p;U++){let Y=0;for(let X=0;X<S;X++){let pe=X+L;if(pe<0||pe>=m)continue;let $=N+pe*u[1],F=pe*v,z=Math.min(f-1,a?Math.round(F):Math.floor(F));if(k===z)for(let q=0;q<E;q++){let ee=q+G;if(ee<0||ee>=h)continue;let ae=$+ee*u[2],Q=ee*w,le=Math.min(d-1,a?Math.round(Q):Math.floor(Q));P===le&&(Y+=y[ae+U])}}g[R+U]=Y}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}var fbt={kernelName:BS,backendName:"cpu",kernelFunc:ekr};re();function tkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o;at(i,"reverse");let a=i.shape.length,l=H.parseAxisParam(s,i.shape);if(a===0)return hl({inputs:{x:i},backend:n});let u=new wn(i.shape,i.dtype),c=n.bufferSync(i);for(let f=0;f<u.size;f++){let d=u.indexToLoc(f),p=d.slice();l.forEach(m=>p[m]=i.shape[m]-1-p[m]),u.set(c.get(...p),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}var dbt={kernelName:Zb,backendName:"cpu",kernelFunc:tkr};re();var pbt={kernelName:nC,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=H.getTypedArrayFromDType(o.dtype,H.sizeFromShape(o.shape)),[c,f,d,p]=o.shape,[m,h]=ce.getImageCenter(a,f,d),g=255,y=Math.sin(i),b=Math.cos(i),x=l.data.get(o.dataId).values;for(let w=0;w<c;w++){let _=w*d*f*p;for(let C=0;C<f;C++){let S=C*(d*p);for(let E=0;E<d;E++){let A=E*p;for(let N=0;N<p;N++){let k=[c,C,E,N],M=k[2],I=k[1],L=(M-m)*b-(I-h)*y,P=(M-m)*y+(I-h)*b;L=Math.round(L+m),P=Math.round(P+h);let R=s;if(typeof s!="number"&&(N===3?R=g:R=s[N]),L>=0&&L<d&&P>=0&&P<f){let G=P*(d*p),U=L*p,Y=_+G+U+N;R=x[Y]}let V=_+S+A+N;u[V]=R}}}}return{dataId:l.write(u,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();var rkr=_r(Vg,t=>{let r=Math.floor(t);return t-r<.5?Math.floor(t):t-r>.5?Math.ceil(t):r%2===0?r:r+1}),mbt={kernelName:Vg,backendName:"cpu",kernelFunc:rkr};re();function nkr(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=!0,m=n.bufferSync(i),h=n.bufferSync(s),g=Hh(m,h,a,d,c,u,l,f,0,p);return n.makeTensorInfo(a,g.dtype,g.values)}var hbt={kernelName:zS,backendName:"cpu",kernelFunc:nkr};re();re();function okr(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<r?n=i+1:o=i;return o}function ikr(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<=r?n=i+1:o=i;return o}function gbt(t,r,n,o,i,s){let a=H.getArrayFromDType("int32",n*i);for(let l=0;l<n;++l){let u=t.slice(l*o,(l+1)*o),c=l*i;for(let f=0;f<i;++f)a[c+f]=s==="left"?okr(u,r[f+c]):ikr(u,r[f+c])}return a}function skr(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=gbt(l,u,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}var ybt={kernelName:VS,backendName:"cpu",kernelFunc:skr};re();function akr(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r;at([o,i,s],"select");let a=o.shape.length,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=Bi(i.dtype,s.dtype),d=H.makeZerosTypedArray(H.sizeFromShape(i.shape),f),p=0,m=a===0||a>1||i.shape.length===1?1:H.sizeFromShape(i.shape.slice(1));for(let h=0;h<l.length;h++)for(let g=0;g<m;g++)l[h]===1?d[p++]=u[h]:d[p++]=c[h];return n.makeTensorInfo(i.shape,f,d)}var bbt={kernelName:Qb,backendName:"cpu",kernelFunc:akr};re();var lkr=ce.SELU_SCALEALPHA,ukr=ce.SELU_SCALE,ckr=_r(Wg,t=>t>=0?ukr*t:lkr*(Math.exp(t)-1)),xbt={kernelName:Wg,backendName:"cpu",kernelFunc:ckr};re();var fkr=_r(Yg,t=>t<0?-1:t>0?1:0),vbt={kernelName:Yg,backendName:"cpu",kernelFunc:fkr};re();var dkr=_r(qg,t=>Math.sin(t)),wbt={kernelName:qg,backendName:"cpu",kernelFunc:dkr};re();var pkr=_r(Hg,t=>Math.sinh(t)),_bt={kernelName:Hg,backendName:"cpu",kernelFunc:pkr};re();var mkr=11920928955078125e-23,Sbt=Math.log(mkr)+2,hkr=_r(Kg,t=>{let r=t>-Sbt,n=t<Sbt,o=Math.exp(t),i;return n?i=o:r?i=t:i=Math.log(1+o),i}),Cbt={kernelName:Kg,backendName:"cpu",kernelFunc:hkr};re();function gkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;at([i],"spaceToBatchND");let l=H.sizeFromShape(s),u=[[0,0]];u.push(...a);for(let C=1+s.length;C<i.shape.length;++C)u.push([0,0]);let c=fee.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),f=ce.getReshaped(c.shape,s,l,!1),d=ce.getPermuted(f.length,s.length,!1),p=ce.getReshapedPermuted(c.shape,s,l,!1),g=pn({inputs:{x:c},backend:n,attrs:{shape:f}}),x=fi({inputs:{x:g},backend:n,attrs:{perm:d}}),_=pn({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),_}var Ebt={kernelName:tx,backendName:"cpu",kernelFunc:gkr};re();function ykr(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values[0],[d,p,m,h,g]=JJ(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,m),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var Tbt={kernelName:GS,backendName:"cpu",kernelFunc:ykr};re();function bkr(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.data.get(i.dataId).values),l=n.data.get(o.dataId).values,u=Array.from(n.data.get(s.dataId).values),[c,f,d]=eee(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var Abt={kernelName:WS,backendName:"cpu",kernelFunc:bkr};re();function xkr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=hM(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var kbt={kernelName:qS,backendName:"cpu",kernelFunc:xkr};re();function vkr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=hM(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var Ibt={kernelName:HS,backendName:"cpu",kernelFunc:vkr};re();function wkr(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),m=!1,h=n.bufferSync(i),g;switch(s.dtype){case"bool":{let y=n.bufferSync(s),b=!!n.data.get(a.dataId).values[0];g=Hh(h,y,l,p,f,c,u,d,b,m);break}case"float32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=Hh(h,y,l,p,f,c,u,d,b,m);break}case"int32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=Hh(h,y,l,p,f,c,u,d,b,m);break}case"string":{let y=n.bufferSync(s),b=H.decodeString(n.data.get(a.dataId).values[0]);g=Hh(h,y,l,p,f,c,u,d,b,m);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(l,g.dtype,g.values)}var Dbt={kernelName:YS,backendName:"cpu",kernelFunc:wkr};re();re();function _kr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=H.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=new Array(i.shape.length).fill(0),f=i.shape.slice();return u.map(d=>{let p=[...f];p[l]=d;let m=Yp({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[l]+=d,m})}var Nbt={kernelName:rx,backendName:"cpu",kernelFunc:_kr};re();var Fbt={kernelName:XS,backendName:"cpu",kernelFunc:({inputs:t,backend:r})=>{let{x:n}=t,o=r;at(n,"square");let i=o.data.get(n.dataId).values,s=new Float32Array(i.length);for(let l=0;l<i.length;++l){let u=i[l];s[l]=u*u}return{dataId:o.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};re();var Skr=_r(r0,(t,r)=>{let n=r;return isNaN(t)?NaN:t>0?1:n.alpha}),Obt={kernelName:r0,backendName:"cpu",kernelFunc:Skr};re();function Ckr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o;at(i,"stridedSlice");let{finalShapeSparse:m,finalShape:h,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Es.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=pn({inputs:{x:i},backend:n,attrs:{shape:h}});else if(y||b){H.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let C=Es.computeOutShape(x,v,w),S=Yp({inputs:{x:i},backend:n,attrs:{begin:x,size:C}});_=pn({inputs:{x:S},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(S)}else{let C=n.bufferSync(i),S=tee(m,C,w,x);_=n.makeTensorInfo(h,S.dtype,S.values)}return _}var Mbt={kernelName:KS,backendName:"cpu",kernelFunc:Ckr};re();function Ekr(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.data.get(f.dataId).values,m=n.data.get(d.dataId).values,[h,g]=ree(p,m,i,s,a,l,u,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",g)]}var Rbt={kernelName:ZS,backendName:"cpu",kernelFunc:Ekr};re();function Tkr(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values[0],[c,f,d]=nee(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var jbt={kernelName:QS,backendName:"cpu",kernelFunc:Tkr};re();function Akr(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.data.get(s.dataId).values,l=oee(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var Pbt={kernelName:JS,backendName:"cpu",kernelFunc:Akr};re();var kkr=_r(e0,t=>Math.tan(t)),Lbt={kernelName:e0,backendName:"cpu",kernelFunc:kkr};re();var Ikr=_r(t0,t=>Math.tanh(t)),Bbt={kernelName:t0,backendName:"cpu",kernelFunc:Ikr};re();function Dkr(t){let{inputs:r,backend:n}=t,{tensor:o,indices:i,updates:s}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=ce.calculateShapes(s,i,o.shape),d=!1,p=n.bufferSync(i),m=n.bufferSync(s),h=n.bufferSync(o),g=Hh(p,m,o.shape,f,u,l,a,c,h,d);return n.makeTensorInfo(o.shape,g.dtype,g.values)}var $bt={kernelName:US,backendName:"cpu",kernelFunc:Dkr};re();function Nkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;at(i,"tile");let a=iee(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}var zbt={kernelName:lm,backendName:"cpu",kernelFunc:Nkr};re();function Fkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o;at(i,"topk");let l=n.data.get(i.dataId).values,[u,c]=see(l,i.shape,i.dtype,s,a);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}var Ubt={kernelName:eC,backendName:"cpu",kernelFunc:Fkr};re();function Okr(t){let{inputs:r,attrs:n,backend:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=n,[f,d,p,m]=i.shape,[h,g]=c??[d,p],y=[f,h,g,m],b=H.computeStrides(i.shape),x=b[0],v=b[1],w=b[2],_=H.computeStrides(y),C=_[0],S=_[1],E=_[2],A=H.getTypedArrayFromDType(i.dtype,H.sizeFromShape(y));A.fill(u);let N=o.data.get(i.dataId).values,k=o.data.get(s.dataId).values;for(let I=0;I<f;++I){let L=s.shape[0]===1?k:k.subarray(I*8,I*8+8);for(let P=0;P<h;++P)for(let R=0;R<g;++R)for(let V=0;V<m;++V){let G,U=L[6]*R+L[7]*P+1;if(U===0)continue;let Y=(L[0]*R+L[1]*P+L[2])/U,X=(L[3]*R+L[4]*P+L[5])/U,pe=Vbt(Y,p,l),$=Vbt(X,d,l);switch(a){case"nearest":G=Lkr(N,d,p,x,v,w,I,$,pe,V,u);break;case"bilinear":G=Bkr(N,d,p,x,v,w,I,$,pe,V,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}let F=I*C+P*S+R*E+V;A[F]=G}return o.makeTensorInfo(y,i.dtype,A)}return{dataId:o.write(A,y,i.dtype),shape:i.shape,dtype:i.dtype}}var Gbt={kernelName:tC,backendName:"cpu",kernelFunc:Okr};function Vbt(t,r,n){switch(n){case"reflect":return Mkr(t,r);case"wrap":return Rkr(t,r);case"nearest":return Pkr(t,r);case"constant":default:return jkr(t,r)}}function Mkr(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=2*r;n<o&&(n=o*Math.trunc(-n/o)+n),n=n<-r?n+o:-n-1}else if(n>r-1)if(r<=1)n=0;else{let o=2*r;n-=o*Math.trunc(n/o),n>=r&&(n=o-n-1)}return H.clamp(0,n,r-1)}function Rkr(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=r-1;n+=r*(Math.trunc(-n/o)+1)}else if(n>r-1)if(r<=1)n=0;else{let o=r-1;n-=r*Math.trunc(n/o)}return H.clamp(0,n,r-1)}function jkr(t,r){return t}function Pkr(t,r){return H.clamp(0,t,r-1)}function E6(t,r,n,o,i,s,a,l,u,c,f){let d=a*o+l*i+u*s+c;return 0<=l&&l<r&&0<=u&&u<n?t[d]:f}function Lkr(t,r,n,o,i,s,a,l,u,c,f){let d=Math.round(l),p=Math.round(u);return E6(t,r,n,o,i,s,a,d,p,c,f)}function Bkr(t,r,n,o,i,s,a,l,u,c,f){let d=Math.floor(l),p=Math.floor(u),m=d+1,h=p+1,g=(h-u)*E6(t,r,n,o,i,s,a,d,p,c,f)+(u-p)*E6(t,r,n,o,i,s,a,d,h,c,f),y=(h-u)*E6(t,r,n,o,i,s,a,m,p,c,f)+(u-p)*E6(t,r,n,o,i,s,a,m,h,c,f);return(m-l)*g+(l-d)*y}re();function $kr(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;at(s,"unique");let a=o.data.get(s.dataId).values,{outputValues:l,outputShape:u,indices:c}=aee(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var Wbt={kernelName:rC,backendName:"cpu",kernelFunc:$kr};re();function zkr(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i.shape.length,l=i.shape[s],u=new Array(a-1),c=0;for(let m=0;m<a;m++)m!==s&&(u[c++]=i.shape[m]);let f=new Array(a).fill(0),d=i.shape.slice();d[s]=1;let p=new Array(l);for(let m=0;m<p.length;m++){f[s]=m;let h=Yp({inputs:{x:i},backend:n,attrs:{begin:f,size:d}});p[m]=pn({inputs:{x:h},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(h)}return p}var qbt={kernelName:ox,backendName:"cpu",kernelFunc:zkr};re();function Ukr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o;at(i,"unsortedSegmentSum");let l=i.shape.length,u=s.shape.length,c=[],f=[],d=l-u,p=s;for(let h=0;h<d;++h){let g=yM({inputs:{input:p},backend:n,attrs:{dim:h+1}});p=g,f.push(g)}for(let h=0;h<a;++h){let g=H.createScalarValue(h,"int32"),y=n.makeTensorInfo([],"int32",g),b=aCe({inputs:{a:y,b:p},backend:n}),x=qp({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),v=zA({inputs:{a:x,b:i},backend:n}),w=Xv({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(w),f.push(y),f.push(b),f.push(x),f.push(v),f.push(w)}let m=VCe({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(h=>n.disposeIntermediateTensorInfo(h)),m}var Hbt={kernelName:ix,backendName:"cpu",kernelFunc:Ukr};var Vkr=[b0t,Tgt,x0t,v0t,Ngt,w0t,_0t,S0t,C0t,E0t,T0t,A0t,k0t,I0t,D0t,F0t,O0t,M0t,R0t,y0t,j0t,P0t,L0t,Fgt,B0t,Dgt,Ogt,$0t,Agt,z0t,V0t,G0t,W0t,q0t,H0t,Y0t,X0t,K0t,Z0t,Q0t,J0t,eyt,tyt,ryt,nyt,oyt,iyt,syt,ayt,lyt,uyt,cyt,dyt,f0t,pyt,Mgt,myt,Rgt,hyt,jgt,gyt,yyt,byt,Pgt,Lgt,xyt,vyt,wyt,_yt,Bgt,$gt,kgt,Syt,U0t,Cyt,Eyt,Tyt,d0t,zgt,Ugt,Ayt,Vgt,kyt,Iyt,Dyt,Nyt,Fyt,Oyt,Myt,Ggt,Ryt,jyt,Pyt,Lyt,$yt,zyt,Uyt,Wgt,Vyt,Gyt,Hyt,qgt,Hgt,Yyt,Xyt,Kyt,Ygt,Zyt,ebt,tbt,fee,rbt,p0t,Kgt,nbt,obt,ibt,sbt,Igt,_6,abt,m0t,h0t,g0t,lbt,ubt,cbt,fbt,dbt,pbt,mbt,t0t,hbt,ybt,bbt,xbt,n0t,vbt,wbt,_bt,o0t,Wyt,Cbt,Ebt,Tbt,Abt,kbt,Ibt,Dbt,Nbt,s0t,Fbt,a0t,l0t,Obt,Mbt,Rbt,jbt,Pbt,u0t,fyt,Lbt,Bbt,$bt,zbt,Ubt,Gbt,Xgt,Wbt,qbt,Hbt,Qyt];for(let t of Vkr)Pk(t);re();re();re();re();var VA={},dee={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Ybt(t,r){VA[t]=r}function Nf(t,r){if(!(t in VA)||r!=null){let o=Wkr(t,r);if(o!==null)VA[t]=o;else return console.log("Could not get context for WebGL version",t),null}let n=VA[t];return n==null||n.isContextLost()?(delete VA[t],Nf(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),VA[t])}function Gkr(t){if(!Fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Wkr(t,r){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=r??Gkr(t);return n.addEventListener("webglcontextlost",o=>{o.preventDefault(),delete VA[t]},!1),Fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(dee.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",dee)||n.getContext("experimental-webgl",dee):n.getContext("webgl2",dee)}re();var GA=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(GA||{}),Wl=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Wl||{}),gl=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(gl||{});function WA(t,r){return[r,t]}function Xbt(t,r){return t*r}function T6(t){let r=H.sizeFromShape(t),n=Math.ceil(r/4);return H.sizeToSquarishShape(n)}function Jy(t,r){return[Math.max(1,Math.ceil(r/2)),Math.max(1,Math.ceil(t/2))]}function Kbt(t,r){let[n,o]=Jy(t,r);return n*o*4}function A6(t,r){let n=t,o,i,s,a,l,u,c,f,d,p;return Fe().getNumber("WEBGL_VERSION")===2?(o=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,l=n.RED,c=4,f=1,d=n.HALF_FLOAT,p=n.FLOAT,u=n.RGBA8):(o=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,l=t.RGBA,c=4,f=4,d=r!=null?r.HALF_FLOAT_OES:null,p=t.FLOAT,u=t.RGBA),{internalFormatFloat:o,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:l,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:d,textureTypeFloat:p}}function Wt(t,r){let n=r();return Fe().getBool("DEBUG")&&qkr(t),n}function qkr(t){let r=t.getError();if(r!==t.NO_ERROR)throw new Error("WebGL Error: "+Xkr(t,r))}var Hkr=596e-10,Ykr=65504;function Zbt(t){return!!(Fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Hkr<Math.abs(t)&&Math.abs(t)<Ykr)}function Xkr(t,r){switch(r){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function k6(t,r){return Kv(t,()=>t.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function Qbt(t,r){let n=Kv(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Jbt(t,r){let n=Kv(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),Fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw YCe(r,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Kkr=/ERROR: [0-9]+:([0-9]+):/g;function YCe(t,r){let n=Kkr.exec(r);if(n==null){console.log(`Couldn't parse line number in error: ${r}`),console.log(t);return}let o=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((d,p)=>H.rightPad((p+1).toString(),s)+d),l=0;for(let d=0;d<a.length;d++)l=Math.max(a[d].length,l);let u=a.slice(0,o-1),c=a.slice(o-1,o),f=a.slice(o);console.log(u.join(`
`)),console.log(r.split(`
`)[0]),console.log(`%c ${H.rightPad(c[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function ext(t){return Kv(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function txt(t,r){if(Wt(t,()=>t.linkProgram(r)),!Fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(r,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function mee(t,r){if(Wt(t,()=>t.validateProgram(r)),t.getProgramParameter(r,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function rxt(t,r){let n=Kv(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function nxt(t,r){let n=Kv(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function oxt(t){return Kv(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ixt(t,r){let n=Fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||r<=0){let o=`[${t}x${r}]`;throw new Error("Requested texture size "+o+" is invalid.")}if(t>n||r>n){let o=`[${t}x${r}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+i+".")}}function sxt(t){return Kv(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function XCe(t,r,n,o,i,s,a){let l=t.getAttribLocation(r,n);return l===-1?!1:(Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,o)),Wt(t,()=>t.vertexAttribPointer(l,i,t.FLOAT,!1,s,a)),Wt(t,()=>t.enableVertexAttribArray(l)),!0)}function Zkr(t,r,n){Jkr(t,n),Wt(t,()=>t.activeTexture(t.TEXTURE0+n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r))}function axt(t,r,n){return Kv(t,()=>t.getUniformLocation(r,n),'uniform "'+n+'" not present in program.')}function lxt(t,r,n){return t.getUniformLocation(r,n)}function uxt(t,r,n,o){Wt(t,()=>Zkr(t,r,o)),Wt(t,()=>t.uniform1i(n,o))}function hee(t,r,n){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0))}function KCe(t,r){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,r)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function I6(t){let r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Qkr(t,r))}function Qkr(t,r){switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function Kv(t,r,n){let o=Wt(t,()=>r());if(o==null)throw new Error(n);return o}function Jkr(t,r){let n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,o=r+t.TEXTURE0;if(o<t.TEXTURE0||o>n){let i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function N2(t,r=2){return H.sizeFromShape(t.slice(0,t.length-r))}function F2(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function D6(t){let r=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(r=[N2(t),...F2(t)]),r}function cxt(t,r=!1){let n=Fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=Fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");o===1/0&&Fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),r&&(n=n*2,o=o*2,t=t.map((l,u)=>u>=t.length-2?H.nearestLargerEven(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=H.squeezeShape(t).newShape);let i=H.sizeFromShape(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);let a=s!=null&&Math.max(...s)>o&&Math.min(...s)<=(r?2:1)&&Math.min(...s)>0;if(s==null||a)if(r){let l=N2(t),u=2,c=2;t.length&&([u,c]=F2(t)),i=l*(u/2)*(c/2),s=H.sizeToSquarishShape(i).map(f=>f*2)}else s=H.sizeToSquarishShape(i);return s}function pee(t){return t%2===0}function qA(t,r){if(t=t.slice(-2),r=r.slice(-2),H.arraysEqual(t,r)||!t.length||!r.length||t[0]===0||t[1]===0||r[0]===0||r[1]===0)return!0;if(t.length!==r.length){let n=t[t.length-1],o=r[r.length-1];if(n===o||pee(n)&&pee(o)&&(t[0]===1||r[0]===1))return!0}return t[1]===r[1]&&pee(t[0])&&pee(r[0])}var WCe,qCe;function fxt(t){if(WCe==null){let r=Nf(t);WCe=r.getParameter(r.MAX_TEXTURE_SIZE)}return WCe}function dxt(t){if(qCe==null){let r=Nf(t);qCe=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,qCe)}function pxt(t){if(t===0)return 0;let r,n=Nf(t);return Md(n,"EXT_disjoint_timer_query_webgl2")&&t===2?r=2:Md(n,"EXT_disjoint_timer_query")?r=1:r=0,r}function Md(t,r){return t.getExtension(r)!=null}function ZCe(t){try{if(Nf(t)!=null)return!0}catch(r){return console.log("Error when getting WebGL context: ",r),!1}return!1}function mxt(t){if(t===0)return!1;let r=Nf(t);if(t===1){if(!Md(r,"OES_texture_float"))return!1}else if(!Md(r,"EXT_color_buffer_float"))return!1;return HCe(r)}function hxt(t){if(t===0)return!1;let r=Nf(t);if(t===1){if(!Md(r,"OES_texture_float")||!Md(r,"WEBGL_color_buffer_float"))return!1}else{if(Md(r,"EXT_color_buffer_float"))return HCe(r);let o="EXT_color_buffer_half_float";if(Md(r,o)){let i=r.getExtension(o);return eIr(r,i)}return!1}return HCe(r)}function HCe(t){let r=A6(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function eIr(t,r){let n=A6(t,r),o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);let l=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(a),l}function gxt(t){return t!==2?!1:Nf(t).fenceSync!=null}function eb(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&H.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the WebGL backend.`)})}var dr=Fe();dr.registerFlag("HAS_WEBGL",()=>dr.getNumber("WEBGL_VERSION")>0);dr.registerFlag("WEBGL_VERSION",()=>ZCe(2)?2:ZCe(1)?1:0);dr.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);dr.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>dr.get("WEBGL_VERSION")===2);dr.registerFlag("WEBGL_CPU_FORWARD",()=>!0);dr.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);dr.registerFlag("WEBGL_PACK",()=>dr.getBool("HAS_WEBGL"));dr.registerFlag("WEBGL_PACK_NORMALIZATION",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_CLIP",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_REDUCE",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_LAZILY_UNPACK",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_CONV_IM2COL",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>fxt(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dxt(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=dr.getNumber("WEBGL_VERSION");return t===0?0:pxt(t)});dr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>dr.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ax.isMobile());dr.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>mxt(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>dr.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:dr.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));dr.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>hxt(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_FENCE_API_ENABLED",()=>gxt(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>dr.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);dr.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});dr.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>ax.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});dr.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);dr.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);dr.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);dr.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);dr.registerFlag("WEBGL_EXP_CONV",()=>!1);dr.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>dr.getBool("IS_TEST"));dr.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);dr.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);dr.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);dr.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);re();re();function di(){let t,r,n,o,i,s,a,l,u,c;return Fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",r="in",n="out",o="in",i="texture",s="outputColor",a="out vec4 outputColor;",l=Fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",r="attribute",n="varying",o="varying",i="texture2D",s="gl_FragColor",a="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:r,varyingVs:n,varyingFs:o,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:l,defineSpecialInf:u,defineRound:c}}re();re();re();function Yh(t,r,n="index"){let o=H.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / ${i}`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${l};`}).join("")}function HA(t,r,n="index"){let o=H.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${l};`}).join("")}function tIr(t,r){let n=t.length,o=t.map(s=>`${r}[${s}]`),i=new Array(n-1);i[n-2]=o[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${o[s+1]})`;return i}function yxt(t,r,n="index"){let o=t.map((s,a)=>a),i=tIr(o,r);return i.map((s,a)=>{let l=`int ${t[a]} = ${n} / ${i[a]}`,u=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${l}; ${u};`}).join("")}function bM(t){let r=H.computeStrides(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${r[0]} + coords.y * ${r[1]} + coords.z;
  }
`}function xM(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var yee=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:bxt}=ce;function xxt(t,r,n){let o=[];if(t.forEach(m=>{let h=H.sizeFromShape(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?o.push(`uniform float ${m.name}${h>1?`[${h}]`:""};`):(o.push(`uniform sampler2D ${m.name};`),o.push(`uniform int offset${m.name};`)),n.enableShapeUniforms){let{uniformShape:g}=bee(n.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(g.length){case 1:o.push(`uniform int ${m.name}Shape;`);break;case 2:o.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:o.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:o.push(`uniform ivec4 ${m.name}Shape;`);break;default:break}o.push(`uniform ivec2 ${m.name}TexShape;`)}}),n.enableShapeUniforms){switch(r.logicalShape.length){case 1:o.push("uniform int outShape;");break;case 2:o.push("uniform ivec2 outShape;"),o.push("uniform int outShapeStrides;");break;case 3:o.push("uniform ivec3 outShape;"),o.push("uniform ivec2 outShapeStrides;");break;case 4:o.push("uniform ivec4 outShape;"),o.push("uniform ivec3 outShapeStrides;");break;default:break}o.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(m=>{o.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});let i=o.join(`
`),s=t.map(m=>rIr(m,r,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=r.texShape,l=di(),u=iIr(l),c,f,d=lIr(l);return r.isPacked?(c=nIr(r.logicalShape,a,n.enableShapeUniforms),f=aIr(l)):(c=oIr(r.logicalShape,a,n.enableShapeUniforms),f=sIr(l)),n.packedInputs&&(d+=dIr),[d,u,f,i,c,s,n.userCode].join(`
`)}function wM(t,r=!1){let n=t.shapeInfo.logicalShape;switch(n.length){case 0:return CIr(t,r);case 1:return TIr(t,r);case 2:return kIr(t,r);case 3:return DIr(t,r);case 4:return FIr(t,r);case 5:return OIr(t);case 6:return MIr(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function vxt(t,r){switch(t.shapeInfo.logicalShape.length){case 0:return SIr(t);case 1:return EIr(t,r);case 2:return AIr(t,r);case 3:return IIr(t,r);default:return NIr(t,r)}}function rIr(t,r,n=!1,o){let i="";n?i+=vxt(t,o):i+=wM(t,o);let s=t.shapeInfo.logicalShape,a=r.logicalShape;return s.length<=a.length&&(n?i+=RIr(t,r):i+=jIr(t,r)),i}function nIr(t,r,n){switch(t.length){case 0:return wxt();case 1:return pIr(t,r,n);case 2:return wIr(t,r,n);case 3:return hIr(t,r,n);default:return yIr(t,r,n)}}function oIr(t,r,n){switch(t.length){case 0:return wxt();case 1:return mIr(t,r,n);case 2:return _Ir(t,r,n);case 3:return gIr(t,r,n);case 4:return bIr(t,r,n);case 5:return xIr(t,r);case 6:return vIr(t,r);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function iIr(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function sIr(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function aIr(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function lIr(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${uIr}
    ${cIr}
    ${fIr}
  `}var uIr=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cIr=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fIr=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dIr=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function wxt(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function pIr(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return o[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${o[1]}.0);
      }
    `:o[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${o[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      return 2 * (resTexRC.x * ${o[1]} + resTexRC.y);
    }
  `}function mIr(t,r,n){return r[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return resTexRC.x * ${r[1]} + resTexRC.y;
    }
  `}function hIr(t,r,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function gIr(t,r,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${HA(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let o=Yh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec3(r, c, d);
    }
  `}function yIr(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2),a=s,l="",u="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],l=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+l,u=`b${c}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      ${l}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${u});
    }
  `}function bIr(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${HA(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let o=Yh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec4(r, c, d, d2);
    }
  `}function xIr(t,r){let n=Yh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${r[0]},
                             ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function vIr(t,r){let n=Yh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function wIr(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(H.arraysEqual(t,r))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));
      }
    `;let i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));

      int index = resTexRC.x * ${o[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function _Ir(t,r,n){return H.arraysEqual(t,r)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function YA(t){return`offset${t}`}function SIr(t){let r=t.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=di();return`
    vec4 ${n}() {
      return ${o.texture2D}(${r}, halfCR);
    }
  `}function CIr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${o}() {return ${n};}`;let[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${o}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let a=YA(n);if(r)return`
    float ${o}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;let[l,u]=t.shapeInfo.texShape;return`
    float ${o}() {
      vec2 uv = uvFromFlat(${l}, ${u}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function EIr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=di();if(r)return`
    vec4 ${o}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;let a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function TIr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${o}(int index) {
        ${_M(t)}
      }
    `;let i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${o}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let l=YA(n);return a===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:r?`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${l});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}function AIr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=s[0],l=s[1],u=di();if(s!=null&&H.arraysEqual(n,s))return r?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);

        return ${u.texture2D}(${o}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${a}.0);

        return ${u.texture2D}(${o}, uv);
      }
    `;if(r)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `;let c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `}function kIr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape;if(s!=null&&H.arraysEqual(n,s)){if(r)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `;let p=s[0],m=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${p}.0);
      return sampleTexture(${o}, uv);
    }
  `}let{newShape:a,keptDims:l}=H.squeezeShape(n),u=a;if(u.length<n.length){let p=SM(t,u),m=["row","col"];return`
      ${wM(p,r)}
      float ${i}(int row, int col) {
        return ${i}(${CM(m,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${_M(t)}
      }
    `;let c=s[0],f=s[1],d=YA(o);return f===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${o}, uv);
    }
  `:c===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${o}, uv);
    }
  `:r?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
        return sampleTexture(${o}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${o}, uv);
  }
`}function IIr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){let p=n.slice(1),m=[1,2],h=SM(t,p),g=["b","row","col"];return`
        ${vxt(h,r)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${CM(g,m)});
        }
      `}let l=di();if(r)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `;let u=a[0],c=a[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${c}, ${d}, ${f}, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `}function DIr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[1]*n[2],a=n[2],{newShape:l,keptDims:u}=H.squeezeShape(n),c=l;if(c.length<n.length){let g=SM(t,c),y=["row","col","depth"];return`
        ${wM(g,r)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${CM(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${_M(t)}
      }
    `;let f=t.shapeInfo.texShape,d=f[0],p=f[1],m=t.shapeInfo.flatOffset;if(p===s&&m==null)return r?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${o}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${o}, uv);
        }
      `;if(p===a&&m==null)return r?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${o}, uv);
    }
  `;let h=YA(o);return r?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${o}Shape[1] * ${o}Shape[2];
      int stride1 = ${o}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${h};
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
      return sampleTexture(${o}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${h};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${o}, uv);
      }
  `}function NIr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=di();if(r)return`
    vec4 ${o}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;let s=t.shapeInfo.logicalShape,a=s.length,l=t.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],c=u[0],f=u[1],d=Math.ceil(s[a-1]/2),p=d*Math.ceil(s[a-2]/2),m="int b, int row, int col",h=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<a-1;g++)m=`int b${g}, `+m,p*=s[a-g-1],h=`b${g} * ${p} + `+h;return`
    vec4 ${o}(${m}) {
      int index = ${h};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function FIr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[3],a=n[2]*s,l=n[1]*a,{newShape:u,keptDims:c}=H.squeezeShape(n);if(u.length<n.length){let x=SM(t,u),v=["row","col","depth","depth2"];return`
      ${wM(x,r)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${CM(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${l}, ${a}, ${s}, 1)));
        ${_M(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],m=d[1],h=`int stride2 = ${o}Shape[3];`,g=`int stride1 = ${o}Shape[2] * stride2;`,y=`int stride0 = ${o}Shape[1] * stride1;`;if(m===l&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${h}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;if(m===s&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;let b=YA(o);return r?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${h}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${b});
      return sampleTexture(${o}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${m}, index + ${b});
      return sampleTexture(${o}, uv);
    }
  `}function OIr(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r[4],s=r[3]*i,a=r[2]*s,l=r[1]*a,{newShape:u,keptDims:c}=H.squeezeShape(r);if(u.length<r.length){let g=SM(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${wM(g)}
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        return ${o}(${CM(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${a}, ${s}, ${i})) +
          depth3;
        ${_M(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],m=d[1];if(m===l&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===i&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]},
               ${r[2]*r[3]}, ${r[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;let h=YA(n);return`
    float ${o}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${h};
      vec2 uv = uvFromFlat(${p}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function MIr(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=H.squeezeShape(r);if(i.length<r.length){let y=SM(t,i),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${wM(y)}
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${o}(${CM(b,s)});
      }
    `}let a=r[5],l=r[4]*a,u=r[3]*l,c=r[2]*u,f=r[1]*c;if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${u}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${_M(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],h=p[1];if(h===f&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${u}, ${l}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===a&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]*r[4]},
               ${r[2]*r[3]*r[4]},
               ${r[3]*r[4]},
               ${r[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;let g=YA(n);return`
    float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${u} +
          depth2 * ${l} + depth3 * ${a} + depth4 + ${g};
      vec2 uv = uvFromFlat(${m}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function _M(t){let r=t.name,n=H.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${r};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${r}[i];
      }
    }
  `}function RIr(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=r.logicalShape.length,l=bxt(t.shapeInfo.logicalShape,r.logicalShape),u=$r(a),c=a-s,f,d=["x","y","z","w","u","v"];s===0?f="":a<2&&l.length>=1?f="coords = 0;":f=l.map(x=>`coords.${d[x+c]} = 0;`).join(`
`);let p="";a<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((x,v)=>`coords.${d[v+c]}`).join(", ");let m="return outputValue;",g=H.sizeFromShape(t.shapeInfo.logicalShape)===1,b=H.sizeFromShape(r.logicalShape)===1;if(s===1&&!g&&!b)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!b)a===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(l.length){let x=s-2,v=s-1;l.indexOf(x)>-1&&l.indexOf(v)>-1?m="return vec4(outputValue.x);":l.indexOf(x)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${o}(${p});
      ${m}
    }
  `}function jIr(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=r.texShape,a=t.shapeInfo.texShape,l=t.shapeInfo.logicalShape.length,u=r.logicalShape.length;if(!t.shapeInfo.isUniform&&l===u&&t.shapeInfo.flatOffset==null&&H.arraysEqual(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let c=$r(u),f=bxt(t.shapeInfo.logicalShape,r.logicalShape),d=u-l,p,m=["x","y","z","w","u","v"];l===0?p="":u<2&&f.length>=1?p="coords = 0;":p=f.map(g=>`coords.${m[g+d]} = 0;`).join(`
`);let h="";return u<2&&l>0?h="coords":h=t.shapeInfo.logicalShape.map((g,y)=>`coords.${m[y+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${o}(${h});
    }
  `}function $r(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function bee(t,r,n){let{newShape:o,keptDims:i}=H.squeezeShape(r),s=r.length,a=t&&s===3&&r[0]===1,l=a?r.slice(1):o,u=!t&&s>1&&!H.arraysEqual(r,n)&&o.length<s||a;return{useSqueezeShape:u,uniformShape:u?l:r,keptDims:i}}function SM(t,r){let n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=r,n}function CM(t,r){return r.map(n=>t[n]).join(", ")}function Sxt(t,r,n,o){let i=n.map((f,d)=>{let p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:r.variableNames[d],shapeInfo:p}}),s=i.map(f=>f.shapeInfo),a={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},l=xxt(i,a,r),u=Jbt(t.gl,l),c=t.createProgram(u);return Fe().get("ENGINE_COMPILE_ONLY")?{program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},QCe(t,r,c)))}function QCe(t,r,n){let o=[],i=[],s,a,l,u=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Fe().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));let f=!1;for(let d of r.variableNames){let p={name:d,uniform:t.getUniformLocation(n,d,f),offset:t.getUniformLocation(n,`offset${d}`,f)};r.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,f),p.texShape=t.getUniformLocation(n,`${d}TexShape`,f)),o.push(p)}if(r.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",f),l=t.getUniformLocation(n,"outShapeStrides",f),a=t.getUniformLocation(n,"outTexShape",f)),r.customUniforms)for(let d of r.customUniforms)i.push(t.getUniformLocation(n,d.name,f));return{variablesLocations:o,customUniformLocations:i,infLoc:u,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:a}}function _xt(t,r){if(t.length!==r.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${r.length} inputs`);t.forEach((n,o)=>{let i=n.logicalShape,s=r[o],a=s.shape;if(!H.arraysEqual(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;let l=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!H.arraysEqual(l,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${l} and ${u} must match`)})}function Cxt(t,r,n,o,i){r.program.enableShapeUniforms||(_xt(r.inShapeInfos,n),_xt([r.outShapeInfo],[o]));let s=o.texData.texture,a=o.texData.texShape;o.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(r.webGLProgram),t.bindVertexArray(r.webGLProgram.vao),Fe().getNumber("WEBGL_VERSION")===1&&r.infLoc!==null&&t.gl.uniform1f(r.infLoc,1/0),r.nanLoc!==null&&t.gl.uniform1f(r.nanLoc,NaN);for(let u=0;u<n.length;++u){let c=n[u],{uniform:f,offset:d,shape:p,texShape:m}=r.variablesLocations[u];if(p){let{uniformShape:h}=bee(r.program.packedInputs,c.shape,c.texData.texShape);switch(h.length){case 1:t.gl.uniform1iv(p,new Int32Array(h));break;case 2:t.gl.uniform2iv(p,new Int32Array(h));break;case 3:t.gl.uniform3iv(p,new Int32Array(h));break;case 4:t.gl.uniform4iv(p,new Int32Array(h));break;default:break}}if(m&&t.gl.uniform2i(m,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(H.sizeFromShape(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let h=c.uniformValues;h instanceof Float32Array||(h=new Float32Array(h)),t.gl.uniform1fv(f,h)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,u)}}let l=r.outShapeLocation;if(l)switch(o.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(o.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(o.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(o.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(o.shape));break;default:break}if(r.outShapeStridesLocation){let u=H.computeStrides(o.shape);switch(o.shape.length){case 2:t.gl.uniform1iv(r.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(r.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(r.outShapeStridesLocation,new Int32Array(u));break;default:break}}if(r.outTexShapeLocation&&t.gl.uniform2i(r.outTexShapeLocation,o.texData.texShape[0],o.texData.texShape[1]),r.program.customUniforms&&i)for(let u=0;u<r.program.customUniforms.length;++u){let c=r.program.customUniforms[u],f=r.customUniformLocations[u],d=i[u];if(c.type==="float")t.gl.uniform1fv(f,d);else if(c.type==="vec2")t.gl.uniform2fv(f,d);else if(c.type==="vec3")t.gl.uniform3fv(f,d);else if(c.type==="vec4")t.gl.uniform4fv(f,d);else if(c.type==="int")t.gl.uniform1iv(f,d);else if(c.type==="ivec2")t.gl.uniform2iv(f,d);else if(c.type==="ivec3")t.gl.uniform3iv(f,d);else if(c.type==="ivec4")t.gl.uniform4iv(f,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function Ext(t,r,n){let o="";r.concat(n).forEach(a=>{let l=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){let u=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:d}=bee(t.packedInputs,a.shape,u),p="",m="",h="";if(f.length===1&&t.packedInputs){let _=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];p=`${_[0]>1}_${_[1]>1}`}else if(f.length===2&&!t.packedInputs)m=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){let _=H.computeStrides(f);h=`${_[0]===u[1]}_${_[_.length-1]===u[1]}`}let g=a.shape.length,y=f.length===2&&H.arraysEqual(a.shape,u),b=H.sizeFromShape(a.shape)===1,x=ce.getBroadcastDims(a.shape,n.shape),v=!t.packedInputs&&g===n.shape.length&&H.arraysEqual(u,n.texData.texShape),w=t.packedInputs||f.length>2?"":`${u[0]>1}_${u[1]>1}`;o+=`${g}_${v}_${c?d:""}_${f.length}_${b}_${x}_${y}_${p}_${m}_${h}_${w}_${l}`}else{let u=a.isUniform?"uniform":a.texData.texShape;o+=`${a.shape}_${u}_${l}`}});let i=t.userCode,s=t.constructor.name;return s+="_"+o+"_"+i+`${Fe().getNumber("WEBGL_VERSION")}`,s}function Un(t){return Fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var xee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=GA.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=di();this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?HA(["r","c","d"],r):Yh(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};var vee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=GA.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=di();this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?HA(["r","c","d"],r):Yh(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};var wee=class{constructor(r){this.variableNames=["A"],this.outTexUsage=Wl.DOWNLOAD;let n=di();this.outputShape=r,this.userCode=`
      ${yee}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}};var _ee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Wl.DOWNLOAD;let n=di();this.outputShape=r,this.userCode=`
      ${yee}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}};var BIr={R:0,G:1,B:2,A:3},N6=class{constructor(r,n=!1,o="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=di();this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let l=0;l<o.length;l++){let u=o[l];a+=`
          if(offset == ${l}) {
            result = values[${BIr[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?xM():bM(r)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${o.length});

        flatIndex = idiv(flatIndex, ${o.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}};var See=class{constructor(r,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=di();this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){let u=a*2+l;i+=`
          localCoords = coords;
          if(localCoords[2] + ${l} < ${this.enableShapeUniforms?"outShape[2]":`${r[2]}`}) {
          localCoords[2] += ${l};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${r[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${o.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?xM():bM(r)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${o.output} = ${s};
        }
    `}};re();re();function Txt(t){let r=di(),n=`${r.version}
    precision highp float;
    ${r.attribute} vec3 clipSpacePos;
    ${r.attribute} vec2 uv;
    ${r.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Qbt(t,n)}function Axt(t){let r=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return rxt(t,r)}function kxt(t){let r=new Uint16Array([0,1,2,2,1,3]);return nxt(t,r)}function F6(t,r,n,o,i,s){ixt(r,n);let a=oxt(t),l=t.TEXTURE_2D;return Wt(t,()=>t.bindTexture(l,a)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),Fe().getNumber("WEBGL_VERSION")===1?Wt(t,()=>t.texImage2D(l,0,o,r,n,0,i,s,null)):Wt(t,()=>t.texStorage2D(l,1,o,r,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,r]}}function JCe(t){return t.internalFormatFloat}function Ixt(t,r,n,o){let[i,s]=WA(r,n);return F6(t,i,s,JCe(o),o.textureFormatFloat,t.FLOAT)}function eEe(t){return t.internalFormatHalfFloat}function Dxt(t,r,n,o){let[i,s]=WA(r,n);return F6(t,i,s,eEe(o),o.textureFormatFloat,o.textureTypeHalfFloat)}function tEe(t){return t.downloadTextureFormat}function Nxt(t,r,n,o){let[i,s]=WA(r,n);return F6(t,i,s,tEe(o),t.RGBA,t.UNSIGNED_BYTE)}function rEe(t){return t.internalFormatPackedFloat}function Fxt(t,r,n,o){let[i,s]=Jy(r,n);return F6(t,i,s,rEe(o),t.RGBA,t.FLOAT)}function nEe(t){return t.internalFormatPackedHalfFloat}function Oxt(t,r,n,o){let[i,s]=Jy(r,n);return F6(t,i,s,nEe(o),t.RGBA,o.textureTypeHalfFloat)}function Mxt(t,r,n){return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),XCe(t,r,"clipSpacePos",n,3,20,0)&&XCe(t,r,"uv",n,2,20,12)}function Rxt(t,r,n,o,i,s){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r));let a,l,u;i instanceof Uint8Array?(a=new Uint8Array(n*o*4),l=t.UNSIGNED_BYTE,u=t.RGBA):(a=new Float32Array(n*o*4),l=t.FLOAT,u=s.internalFormatPackedFloat),a.set(i),Fe().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,o,t.RGBA,l,a)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,o,0,t.RGBA,l,a)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function jxt(t,r,n){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r)),n.data instanceof Uint8Array?Fe().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Fe().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Pxt(t,r,n,o){let i=t.createBuffer();Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));let l=4*4*r*n;return Wt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,l,t.STREAM_READ)),Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,0)),Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function Lxt(t,r,n){let o=t,i=new Float32Array(n);return o.bindBuffer(o.PIXEL_PACK_BUFFER,r),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,i),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),i}function Bxt(t,r,n,o){let[i,s]=WA(r,n),a=4,l=new Uint8Array(Xbt(r*n,a));return Wt(t,()=>t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function $xt(t,r,n,o,i,s,a,l){let u=t,c=new Float32Array(Kbt(s,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,r),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function zxt(t,r,n){let o=new Float32Array(r*n*4);return Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,o)),o}var EM=class{constructor(r){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=Fe().getNumber("WEBGL_VERSION");if(r!=null?(this.gl=r,Ybt(n,r)):this.gl=Nf(n),r=this.gl,Fe().getNumber("WEBGL_VERSION")===2){let s=r;this.createVertexArray=()=>Wt(s,()=>s.createVertexArray()),this.bindVertexArray=a=>Wt(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>Wt(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>Wt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(r!=null){let s=r.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Wt(r,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>Wt(r,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Wt(r,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>Wt(r,()=>r.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Fe().getNumber("WEBGL_VERSION")===1){let s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=k6(this.gl,s),Md(this.gl,a))this.textureHalfFloatExtension=k6(this.gl,a);else if(Fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),Md(this.gl,i))this.colorBufferHalfFloatExtension=k6(this.gl,i);else if(Fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",Md(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else if(Md(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Axt(this.gl),this.indexBuffer=kxt(this.gl),this.framebuffer=sxt(this.gl),this.textureConfig=A6(this.gl,this.textureHalfFloatExtension)}get debug(){return Fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let r=this.gl;Wt(r,()=>r.finish()),Wt(r,()=>r.bindFramebuffer(r.FRAMEBUFFER,null)),Wt(r,()=>r.deleteFramebuffer(this.framebuffer)),Wt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,null)),Wt(r,()=>r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)),Wt(r,()=>r.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(r,n){return this.throwIfDisposed(),Ixt(this.gl,r,n,this.textureConfig)}createFloat16MatrixTexture(r,n){return this.throwIfDisposed(),Dxt(this.gl,r,n,this.textureConfig)}createUnsignedBytesMatrixTexture(r,n){return this.throwIfDisposed(),Nxt(this.gl,r,n,this.textureConfig)}uploadPixelDataToTexture(r,n){this.throwIfDisposed(),jxt(this.gl,r,n)}uploadDenseMatrixToTexture(r,n,o,i){this.throwIfDisposed(),Rxt(this.gl,r,n,o,i,this.textureConfig)}createFloat16PackedMatrixTexture(r,n){return this.throwIfDisposed(),Oxt(this.gl,r,n,this.textureConfig)}createPackedMatrixTexture(r,n){return this.throwIfDisposed(),Fxt(this.gl,r,n,this.textureConfig)}deleteMatrixTexture(r){this.throwIfDisposed(),this.outputTexture===r&&(KCe(this.gl,this.framebuffer),this.outputTexture=null),Wt(this.gl,()=>this.gl.deleteTexture(r))}downloadByteEncodedFloatMatrixFromOutputTexture(r,n,o){return this.downloadMatrixDriver(r,()=>Bxt(this.gl,n,o,this.textureConfig))}downloadPackedMatrixFromBuffer(r,n,o,i,s,a){return $xt(this.gl,r,n,o,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(r,n){return Lxt(this.gl,r,n)}createBufferFromTexture(r,n,o){this.bindTextureToFrameBuffer(r);let i=Pxt(this.gl,n,o,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){let r=this.createFence(this.gl);return this.pollFence(r)}createFence(r){let n,o;if(Fe().getBool("WEBGL_FENCE_API_ENABLED")){let i=r,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),o=()=>{let a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),o=()=>this.isQueryAvailable(n,Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):o=()=>!0;return{query:n,isFencePassed:o}}downloadMatrixFromPackedTexture(r,n,o){return this.downloadMatrixDriver(r,()=>zxt(this.gl,n,o))}createProgram(r){this.throwIfDisposed();let n=this.gl;this.vertexShader==null&&(this.vertexShader=Txt(n));let o=ext(n);Wt(n,()=>n.attachShader(o,this.vertexShader)),Wt(n,()=>n.attachShader(o,r)),txt(n,o);let i=Object.assign(o,{vao:this.createVertexArray()});return this.debug&&mee(n,i),i}buildVao(r){this.setProgram(r),this.bindVertexArray(r.vao);let n=this.gl;Wt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Mxt(n,r,this.vertexBuffer)}deleteProgram(r){this.throwIfDisposed(),r===this.program&&(this.program=null),r!=null&&(Wt(this.gl,()=>this.gl.deleteProgram(r)),this.deleteVertexArray(r.vao))}setProgram(r){this.throwIfDisposed(),this.program=r,this.program!=null&&this.debug&&mee(this.gl,this.program),Wt(this.gl,()=>this.gl.useProgram(r))}getUniformLocation(r,n,o=!0){return this.throwIfDisposed(),o?axt(this.gl,r,n):lxt(this.gl,r,n)}getAttributeLocation(r,n){return this.throwIfDisposed(),Wt(this.gl,()=>this.gl.getAttribLocation(r,n))}getUniformLocationNoThrow(r,n){return this.throwIfDisposed(),this.gl.getUniformLocation(r,n)}setInputMatrixTexture(r,n,o){this.throwIfDisposed(),this.throwIfNoProgram(),uxt(this.gl,r,n,o)}setOutputMatrixTexture(r,n,o){this.setOutputMatrixTextureDriver(r,o,n)}setOutputPackedMatrixTexture(r,n,o){this.throwIfDisposed();let[i,s]=Jy(n,o);this.setOutputMatrixTextureDriver(r,i,s)}setOutputMatrixWriteRegion(r,n,o,i){this.setOutputMatrixWriteRegionDriver(o,r,i,n)}setOutputPackedMatrixWriteRegion(r,n,o,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&mee(this.gl,this.program),I6(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let r=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Wt(r,()=>r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=k6(this.gl,Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.createQuery();return o.beginQuery(i.TIME_ELAPSED_EXT,s),s}let r=this.getQueryTimerExtensionWebGL1(),n=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,n),n}endQuery(){if(Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,o=this.getQueryTimerExtensionWebGL2();n.endQuery(o.TIME_ELAPSED_EXT);return}let r=this.getQueryTimerExtensionWebGL1();r.endQueryEXT(r.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(r){return Be(this,null,function*(){return yield H.repeatedTry(()=>this.disposed||this.isQueryAvailable(r,Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(r,Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(r,n){if(n===0)return null;if(n===2){let o=this.gl;return o.getQueryParameter(r,o.QUERY_RESULT)/1e6}else{let o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(r,n){if(n===0)return!0;if(n===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.getQueryParameter(r,o.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{let o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(r,o.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(r){return new Promise(n=>{this.addItemToPoll(()=>r.isFencePassed(),()=>n())})}pollItems(){let r=zIr(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=r;++n){let{resolveFn:o}=this.itemsToPoll[n];o()}this.itemsToPoll=this.itemsToPoll.slice(r+1)}addItemToPoll(r,n){if(this.itemsToPoll.push({isDoneFn:r,resolveFn:n}),this.itemsToPoll.length>1)return;let o;"setTimeoutCustom"in Fe().platform&&(o=Fe().platform.setTimeoutCustom.bind(Fe().platform)),H.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,o)}bindTextureToFrameBuffer(r){this.throwIfDisposed(),hee(this.gl,r,this.framebuffer),this.debug&&I6(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(hee(this.gl,this.outputTexture,this.framebuffer),this.debug&&I6(this.gl)):KCe(this.gl,this.framebuffer)}downloadMatrixDriver(r,n){this.bindTextureToFrameBuffer(r);let o=n();return this.unbindTextureToFrameBuffer(),o}setOutputMatrixTextureDriver(r,n,o){this.throwIfDisposed();let i=this.gl;hee(i,r,this.framebuffer),this.debug&&I6(i),this.outputTexture=r,Wt(i,()=>i.viewport(0,0,n,o)),Wt(i,()=>i.scissor(0,0,n,o))}setOutputMatrixWriteRegionDriver(r,n,o,i){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.scissor(r,n,o,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function zIr(t){let r=0;for(;r<t.length&&t[r]();++r);return r-1}var{addImpl:Uxt,bincountImpl:Cee,bincountReduceImpl:Vxt,bitwiseAndImpl:Gxt,castImpl:Wxt,ceilImpl:qxt,concatImpl:Hxt,equalImpl:Yxt,expImpl:Xxt,expm1Impl:Kxt,floorImpl:Zxt,gatherNdImpl:Qxt,gatherV2Impl:Jxt,greaterImpl:evt,greaterEqualImpl:tvt,lessImpl:rvt,lessEqualImpl:nvt,linSpaceImpl:ovt,logImpl:ivt,maxImpl:svt,maximumImpl:avt,minimumImpl:lvt,multiplyImpl:uvt,negImpl:cvt,notEqualImpl:fvt,prodImpl:dvt,raggedGatherImpl:pvt,raggedRangeImpl:mvt,raggedTensorToTensorImpl:hvt,rangeImpl:gvt,rsqrtImpl:yvt,scatterImpl:bvt,sigmoidImpl:xvt,simpleAbsImpl:Eee,sliceImpl:vvt,sparseFillEmptyRowsImpl:wvt,sparseReshapeImpl:_vt,sparseSegmentReductionImpl:Tee,sqrtImpl:Svt,staticRegexReplaceImpl:Cvt,stridedSliceImpl:Evt,stringNGramsImpl:Tvt,stringSplitImpl:Avt,stringToHashBucketFastImpl:kvt,subImpl:Ivt,tileImpl:Dvt,topKImpl:Nvt,transposeImpl:XA,uniqueImpl:Fvt}=NCe;function oEe(t,r){return["x","y","z","w","u","v"].slice(0,r).map(n=>`${t}.${n}`)}function ji(t,r){return r===1?[t]:oEe(t,r)}function Ovt(t,r){if(t===1)return"rc";let n="";for(let o=0;o<t;o++)n+=r[o],o<t-1&&(n+=",");return n}var Aee=class{constructor(r){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.enableShapeUniforms=Un(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=ji("rc",this.rank),o=$r(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(r){let n=[];for(let o=0;o<=1;o++)for(let i=0;i<=1;i++){let s=`${o===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${r[r.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(r){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let o=this.rank-2;o<this.rank;o++)n+=`${r[o]} >= ${this.enableShapeUniforms?`outShape[${o}]`:this.outputShape[o]}`,o<this.rank-1&&(n+="||");return n}getSetup(r){if(this.rank===1)return"";let n=r.slice(-2),o=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${o};
      bool rEdge = rp1 >= ${i};
    `}getOutput(r){let n=this.getSourceCoordsArr(r);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}};var TM=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length);let o="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),o+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${UIr(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?xM():bM(r)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":r[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":r[2]};

        ${o}

        setOutput(result);
      }
    `}};function UIr(t,r){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${r?yxt(["r","c","d"],"inputShape"):Yh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}re();var kee=class{constructor(r){this.gpgpu=r,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(r,n,o){let i=Rvt(n,o),s=jvt(r,i,o);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);let a=Mvt(r,i,this.gpgpu.gl,this.gpgpu.textureConfig,o);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let l;return i===gl.PACKED_2X2_FLOAT32?l=this.gpgpu.createPackedMatrixTexture(r[0],r[1]):i===gl.PACKED_2X2_FLOAT16?l=this.gpgpu.createFloat16PackedMatrixTexture(r[0],r[1]):i===gl.UNPACKED_FLOAT32?l=this.gpgpu.createFloat32MatrixTexture(r[0],r[1]):i===gl.UNPACKED_FLOAT16?l=this.gpgpu.createFloat16MatrixTexture(r[0],r[1]):i===gl.PACKED_4X1_UNSIGNED_BYTE&&(l=this.gpgpu.createUnsignedBytesMatrixTexture(r[0],r[1])),this.usedTextures[s].push(l),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),l}releaseTexture(r,n,o,i){if(this.freeTextures==null)return;let s=Rvt(o,i),a=jvt(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);let l=Mvt(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=Fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(r.texture),this._numBytesAllocated-=l):(this.freeTextures[a].push(r),this.numFreeTextures++,this._numBytesFree+=l),this.numUsedTextures--;let c=this.usedTextures[a],f=c&&c.indexOf(r);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let r=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${r})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let r in this.freeTextures)this.freeTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let r in this.usedTextures)this.usedTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function VIr(t,r){let n=t;if(r===n.R32F)return 4;if(r===n.R16F)return 2;if(r===n.RGBA32F)return 16;if(r===t.RGBA)return 16;if(r===n.RGBA16F)return 8;if(r===n.RGBA8)return 4;throw new Error(`Unknown internal format ${r}`)}function Mvt(t,r,n,o,i){let s=GIr(r,o),a;if(i){let[u,c]=Jy(t[0],t[1]);a=u*c}else{let[u,c]=WA(t[0],t[1]);a=u*c}let l=VIr(n,s);return a*l}function GIr(t,r){switch(t){case gl.PACKED_2X2_FLOAT32:return rEe(r);case gl.PACKED_2X2_FLOAT16:return nEe(r);case gl.UNPACKED_FLOAT32:return JCe(r);case gl.UNPACKED_FLOAT16:return eEe(r);case gl.PACKED_4X1_UNSIGNED_BYTE:return tEe(r);default:throw new Error(`Unknown physical texture type ${t}`)}}function WIr(t){return Fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?gl.PACKED_2X2_FLOAT32:gl.UNPACKED_FLOAT32:t?gl.PACKED_2X2_FLOAT16:gl.UNPACKED_FLOAT16}function Rvt(t,r){if(t===Wl.UPLOAD)return gl.PACKED_2X2_FLOAT32;if(t===Wl.RENDER||t==null)return WIr(r);if(t===Wl.DOWNLOAD||t===Wl.PIXELS)return gl.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function jvt(t,r,n){return`${t[0]}_${t[1]}_${r}_${n}`}var Ia=class{constructor(r,n){this.variableNames=["A"],this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},ys="if (isnan(x)) return x;",Pvt="return x;",iEe="return abs(x);";var Lvt="return (x >= 0.0) ? x : (exp(x) - 1.0);",Bvt=ys+`
  return (x < 0.0) ? 0.0 : x;
`,$vt=ys+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,tb="return x;",zvt="return 1.0 / (1.0 + exp(-1.0 * x));";var Vvt="return x;",Gvt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Wvt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qvt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Hvt="return 1.0 / (1.0 + exp(-1.0 * x));",Cc=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var Iee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length);let n=r.length,o=ji("rc",n),i=$r(n),s=Ovt(n,o),a=o.slice(-2),l=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${l}));
      }
    `}};var HIr=va.whereImpl,YIr=1e-7,XIr=1e-4,Dee={};function KIr(t){return t in Dee||(Dee[t]={}),Dee[t]}var ZIr=Fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),QIr=600;function JIr(){return Fe().global.screen==null?1024:Fe().global.screen.height*Fe().global.screen.width*window.devicePixelRatio*QIr/1024/1024}var Yvt=(()=>{class t extends lg{nextDataId(){return t.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let o;if(n!=null){if(n instanceof EM)o=n;else{let i=Nf(Fe().getNumber("WEBGL_VERSION"),n);o=new EM(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let i=Nf(Fe().getNumber("WEBGL_VERSION"));o=new EM(i),this.binaryCache=KIr(Fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=o,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new kee(this.gpgpu),this.numMBBeforeWarning=JIr(),this.texData=new f1(this,Uf())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,o,i,s,a,l){let u=this.makeTensorInfo(o,i),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:n,texShape:[s,a]},c.texShape=[s,a];let f=D6(o),d=new N6(f,!1,l),p=this.runWebGLProgram(d,[u],i,[[s,a]]);return p.shape=o,c.texture=null,this.disposeIntermediateTensorInfo(u),p.dataId}write(n,o,i){if((Fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Fe().getBool("DEBUG"))&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let s={id:this.nextDataId()};return this.texData.set(s,{shape:o,dtype:i,values:n,usage:Wl.UPLOAD,refCount:1}),s}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){let o=this.texData.get(n);o.refCount++}decRef(n){if(this.texData.has(n)){let o=this.texData.get(n);o.refCount--}}move(n,o,i,s,a){if(Fe().getBool("DEBUG")&&this.checkNumericalProblems(o),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:s,values:o,usage:Wl.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let o=this.texData.get(n),{values:i,dtype:s,complexTensorInfos:a,slice:l,shape:u,isPacked:c}=o;if(l!=null){let m;c?m=new Cc(u,tb):m=new Ia(u,tb);let h=this.runWebGLProgram(m,[{dataId:n,shape:u,dtype:s}],s),g=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),g}if(i!=null)return this.convertAndCacheOnCPU(n);if(s==="string")return i;let f=this.activeTimers!=null,d;f&&(d=H.now());let p;if(s==="complex64"){let m=this.readSync(a.real.dataId),h=this.readSync(a.imag.dataId);p=ce.mergeRealAndImagArrays(m,h)}else p=this.getValuesFromTexture(n);return f&&(this.downloadWaitMs+=H.now()-d),this.convertAndCacheOnCPU(n,p)}read(n){return Be(this,null,function*(){if(this.pendingRead.has(n)){let g=this.pendingRead.get(n);return new Promise(y=>g.push(y))}let o=this.texData.get(n),{values:i,shape:s,slice:a,dtype:l,complexTensorInfos:u,isPacked:c}=o;if(a!=null){let g;c?g=new Cc(s,tb):g=new Ia(s,tb);let y=this.runWebGLProgram(g,[{dataId:n,shape:s,dtype:l}],l),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(i!=null)return this.convertAndCacheOnCPU(n);if(Fe().getBool("DEBUG")&&!Fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let f=null,d;if(l!=="complex64"&&Fe().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(n);let g=this.texData.get(d.dataId);f=this.gpgpu.createBufferFromTexture(g.texture.texture,...T6(s))}this.pendingRead.set(n,[]),l!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(l==="complex64"){let g=yield Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),y=g[0],b=g[1];p=ce.mergeRealAndImagArrays(y,b)}else if(f==null)p=this.getValuesFromTexture(n);else{let g=H.sizeFromShape(s);p=this.gpgpu.downloadFloat32MatrixFromBuffer(f,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),f!=null){let g=this.gpgpu.gl;Wt(g,()=>g.deleteBuffer(f))}let m=this.convertAndCacheOnCPU(n,p),h=this.pendingRead.get(n);return this.pendingRead.delete(n),h.forEach(g=>g(m)),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&Uf().removeDataId(n,this),this.pendingDeletes--),m})}readToGPU(n,o={}){let i=this.texData.get(n),{values:s,shape:a,slice:l,dtype:u,isPacked:c,texture:f}=i;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(l!=null){let h;c?h=new Cc(a,tb):h=new Ia(a,tb);let g=this.runWebGLProgram(h,[{dataId:n,shape:a,dtype:u}],u),y=this.readToGPU(g,o);return this.disposeIntermediateTensorInfo(g),y}if(f==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(n,o.customTexShape),p=Uf().makeTensorFromTensorInfo(d),m=this.texData.get(d.dataId);return Object.assign({tensorRef:p},m.texture)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>H.decodeString(s));return Qt(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qt(n.shape,n.dtype,o)}checkNumericalProblems(n){if(n!=null)for(let o=0;o<n.length;o++){let i=n[o];if(!Zbt(i))throw Fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:o,dtype:i,isPacked:s}=this.texData.get(n),a=H.sizeFromShape(o);if(Fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let m=this.decode(n),h=this.texData.get(m.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...T6(o)).subarray(0,a);return this.disposeIntermediateTensorInfo(m),g}let l=Fe().getBool("WEBGL_PACK")&&s===!0,u=l?D6(o):o,c=l?new _ee(u):new wee(u),f=this.runWebGLProgram(c,[{shape:u,dtype:i,dataId:n}],"float32"),d=this.texData.get(f.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(f),p}timerAvailable(){return Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){let o=this.activeTimers,i=[],s=!1;this.programTimersStack==null?(this.programTimersStack=i,s=!0):this.activeTimers.push(i),this.activeTimers=i,n();let a=H.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),l=H.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=o,s&&(this.programTimersStack=null);let u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Be(this,null,function*(){if(Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(a);u.kernelMs=H.sum(c),u.getExtraProfileInfo=()=>c.map((f,d)=>({name:l[d],ms:f})).map(f=>`${f.name}: ${f.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:H.now(),endMs:null}}endTimer(n){return Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=H.now(),n)}getQueryTime(n){return Be(this,null,function*(){if(Fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(n);let o=n;return o.endMs-o.startMs})}disposeData(n,o=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(o?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!o&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:i}=this.texData.get(n);return i!=null&&(this.disposeData(i.real.dataId,o),this.disposeData(i.imag.dataId,o)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:o,dtype:i,texShape:s,usage:a,isPacked:l,slice:u}=this.texData.get(n),c=u&&u.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(o,s,a,l)));let d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,o=ZIr){return Fe().getBool("WEBGL_CPU_FORWARD")&&n.every(i=>this.texData.get(i.dataId).texture==null&&H.sizeFromShape(i.shape)<o)}getGPGPUContext(){return this.gpgpu}where(n){ce.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let o=n.dataSync();return HIr(n.shape,o)}packedUnaryOp(n,o,i){let s=new Cc(n.shape,o),a=this.compileAndRun(s,[n],i);return Uf().makeTensorFromTensorInfo(a)}abs(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let s=Eee(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,s)}if(Fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,iEe,n.dtype);let o=new Ia(n.shape,iEe),i=this.compileAndRun(o,[n]);return Uf().makeTensorFromTensorInfo(i)}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&H.isString(i[0])){let a=i.map(l=>H.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return this.texData.get(s).usage=null,{dataId:s,shape:n,dtype:o}}makeOutput(n,o,i){return Uf().makeTensorFromTensorInfo(this.makeTensorInfo(n,o,i),this)}unpackTensor(n){let o=new Iee(n.shape);return this.runWebGLProgram(o,[n],n.dtype)}packTensor(n){let o=new Aee(n.shape);return this.runWebGLProgram(o,[n],n.dtype,null,!0)}packedReshape(n,o){let i=[N2(n.shape),...F2(n.shape)],s={dtype:n.dtype,shape:i,dataId:n.dataId},a=[N2(o),...F2(o)],l=new TM(a,i),u=!0,c=[i],f=this.runWebGLProgram(l,[s],n.dtype,c,u);return{dataId:f.dataId,shape:o,dtype:f.dtype}}decode(n,o){let i=this.texData.get(n),{isPacked:s,shape:a,dtype:l}=i;if(o!=null){let m=H.sizeFromShape(a),h=o[0]*o[1]*4;H.assert(m<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let u=D6(a),c;s?c=new vee(u):c=new xee(u);let f=!0,d=[o??T6(u)],p=this.runWebGLProgram(c,[{shape:u,dtype:l,dataId:n}],l,d,f,o);return{dtype:l,shape:a,dataId:p.dataId}}runWebGLProgram(n,o,i,s,a=!1,l){let u=this.makeTensorInfo(n.outputShape,i),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===GA.DENSE){let x=l??T6(n.outputShape);c.texShape=x.map(v=>v*2)}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),H.sizeFromShape(u.shape)===0)return c.values=H.getTypedArrayFromDType(u.dtype,0),u;let f=[],d=o.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(x.dataId);if(v.texture==null){if(!n.packedInputs&&H.sizeFromShape(x.shape)<=Fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:v.values};n.packedInputs&&(v.isPacked=!0,v.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!v.isPacked!=!!n.packedInputs)x=v.isPacked?this.unpackTensor(x):this.packTensor(x),f.push(x),v=this.texData.get(x.dataId);else if(v.isPacked&&!qA(v.shape,x.shape)){let w=x,_=x.shape;x.shape=v.shape,x=this.packedReshape(x,_),f.push(x),v=this.texData.get(x.dataId),w.shape=_}return{shape:x.shape,texData:v,isUniform:!1}});this.uploadToGPU(u.dataId);let p={shape:u.shape,texData:c,isUniform:!1},m=Ext(n,d,p),h=this.getAndSaveBinary(m,()=>Sxt(this.gpgpu,n,d,p)),g=this.activeTimers!=null,y;g&&(y=this.startTimer()),Fe().get("ENGINE_COMPILE_ONLY")||Cxt(this.gpgpu,h,d,p,s),f.forEach(x=>this.disposeIntermediateTensorInfo(x)),g&&(y=this.endTimer(y),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(y)}));let b=Fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){let x=H.now();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!Fe().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&a===!1){let x=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),x}return u}compileAndRun(n,o,i,s,a=!1){return i=i||o[0].dtype,this.runWebGLProgram(n,o,i,s,a)}getAndSaveBinary(n,o){return n in this.binaryCache||(this.binaryCache[n]=o()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(o=>{this.gpgpu.deleteProgram(this.binaryCache[o].webGLProgram),delete this.binaryCache[o]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Pe(()=>{if(!Fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=Fe().getBool("DEBUG");Fe().set("DEBUG",!1);let o=this.abs(Mt(1e-8)).dataSync()[0];if(Fe().set("DEBUG",n),o>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?YIr:XIr}uploadToGPU(n){let o=this.texData.get(n),{shape:i,dtype:s,values:a,texture:l,usage:u,isPacked:c}=o;if(l!=null)return;let f=this.activeTimers!=null,d;f&&(d=H.now());let p=o.texShape;if(p==null&&(p=cxt(i,c),o.texShape=p),a!=null){let m=D6(i),h,g=p[1],y=p[0],b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(c||!b)&&([g,y]=Jy(p[0],p[1])),c?h=new See(m,b):h=new N6(m,b);let x=b?[y,g]:p,v=this.makeTensorInfo(x,s),w=this.texData.get(v.dataId);b?w.usage=Wl.PIXELS:w.usage=Wl.UPLOAD,w.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),g,y,a);let _=[[y,g]],S=this.runWebGLProgram(h,[v],s,_,!0),E=this.texData.get(S.dataId);o.texShape=E.texShape,o.isPacked=E.isPacked,o.usage=E.usage,Fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(o.texture=E.texture,o.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),f&&(this.uploadWaitMs+=H.now()-d)}else{let m=this.acquireTexture(p,u,s,c);o.texture=m}}convertAndCacheOnCPU(n,o){let i=this.texData.get(n),{dtype:s}=i;return o!=null&&(i.values=eDr(o,s)),i.values}acquireTexture(n,o,i,s){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,o,s)}computeBytes(n,o){return n[0]*n[1]*H.bytesPerElement(o)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){return Be(this,null,function*(){let n=[];if(this.gpgpu.parallelCompilationExtension){for(let[,o]of Object.entries(this.binaryCache))n.push(this.checkCompletionAsync_(o));return Promise.all(n)}else{for(let[,o]of Object.entries(this.binaryCache)){let i=new Promise(s=>{try{this.checkCompletion_(o),s(!0)}catch(a){throw a}});n.push(i)}return Promise.all(n)}})}checkCompletionAsync_(n){return Be(this,null,function*(){return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(n):(yield jI(),this.checkCompletionAsync_(n))})}checkCompletion_(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(YCe(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:o,customUniformLocations:i,infLoc:s,nanLoc:a,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=QCe(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=o,n.customUniformLocations=i,n.infLoc=s,n.nanLoc=a,n.outShapeLocation=l,n.outShapeStridesLocation=u,n.outTexShapeLocation=c}}createTensorFromGPUData(n,o,i){n.channels=n.channels||"RGBA";let{texture:s,height:a,width:l,channels:u}=n,c=Uf().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let f=c.writeTexture(s,o,i,a,l,u);return Uf().makeTensorFromDataId(f,o,i,c)}}return t.nextDataId=0,t})();function eDr(t,r){if(r==="float32"||r==="complex64")return t;if(r==="int32"||r==="bool"){let n=r==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let o=0;o<n.length;++o)n[o]=Math.round(t[o]);return n}else throw new Error(`Unknown dtype ${r}`)}ax.isBrowser()&&qR("webgl",()=>new Yvt,2);re();re();re();re();re();var AM=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var Ec=class{constructor(r,n,o){this.variableNames=["A","B"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${r}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};re();var Of=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Ff=class{constructor(r,n,o,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ce.assertAndGetBroadcastShape(n,o);let s=this.outputShape.length;this.enableShapeUniforms=Un(s);let a="";if(i)if(s===0||H.sizeFromShape(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${$r(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let u=ji("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${r}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}};re();re();function Pi(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var Xvt={kernelName:am,backendName:"webgl",kernelFunc:Pi};function Tc(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.makeTensorInfo(o.shape,"complex64"),a=n.texData.get(s.dataId),l=Pi({inputs:{x:o},backend:n}),u=Pi({inputs:{x:i},backend:n});return a.complexTensorInfos={real:l,imag:u},s}var Kvt={kernelName:sS,backendName:"webgl",kernelFunc:Tc};re();var sEe="return (a < 0.) ? b * a : a;",aEe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function tDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o,a=n.makeTensorInfo([],"float32",H.createScalarValue(s,"float32")),l=Fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ff(aEe,i.shape,a.shape):new Ec(sEe,i.shape,a.shape),u=n.runWebGLProgram(l,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),u}var Zvt={kernelName:Ob,backendName:"webgl",kernelFunc:tDr};re();var lEe="return (a < 0.) ? b * a : a;",uEe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function rDr(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r,s=Fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ff(uEe,o.shape,i.shape):new Ec(lEe,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],"float32")}var Qvt={kernelName:qb,backendName:"webgl",kernelFunc:rDr};var Xp="if (isnan(x)) return x;";function Jt({opSnippet:t,packedOpSnippet:r,cpuKernelImpl:n,dtype:o}){return({inputs:i,backend:s})=>{let{x:a}=i,l=s,u=o||a.dtype;if(l.shouldExecuteOnCPU([a])&&n!=null){let d=l.texData.get(a.dataId),p=n(d.values,u);return l.makeTensorInfo(a.shape,u,p)}let c=Fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&r!=null,f;return c?f=new Cc(a.shape,r):f=new Ia(a.shape,t),l.runWebGLProgram(f,[a],u)}}function On({opSnippet:t,packedOpSnippet:r,checkOutOfBounds:n=!1,supportsComplex:o=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:l})=>{let{a:u,b:c}=a,f=l;if(o&&u.dtype==="complex64"){let h=f.texData.get(u.dataId),g=f.texData.get(c.dataId),[y,b]=[[h.complexTensorInfos.real,g.complexTensorInfos.real],[h.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(v=>{let[w,_]=v,C={dataId:w.dataId,dtype:w.dtype,shape:u.shape},S={dataId:_.dataId,dtype:_.dtype,shape:c.shape},E=new Ec(t,u.shape,c.shape);return f.runWebGLProgram(E,[C,S],Bi(w.dtype,_.dtype))}),x=Tc({inputs:{real:y,imag:b},backend:f});return f.disposeIntermediateTensorInfo(y),f.disposeIntermediateTensorInfo(b),x}let d=s||Bi(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([u,c]))&&i!=null){let h=f.texData.get(u.dataId).values,g=f.texData.get(c.dataId).values,y=u.dtype==="string"?ce.fromUint8ToStringArray(h):h,b=u.dtype==="string"?ce.fromUint8ToStringArray(g):g,[x,v]=i(u.shape,c.shape,y,b,d),w=f.makeTensorInfo(v,d),_=f.texData.get(w.dataId);return _.values=x,w}let p=Fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&r!=null,m;return p?m=new Ff(r,u.shape,c.shape,n):m=new Ec(t,u.shape,c.shape),f.runWebGLProgram(m,[u,c],d)}}function Zv(t,r=!1){if(t==="linear")return r?Vvt:Pvt;if(t==="relu")return r?Wvt:Bvt;if(t==="elu")return r?Gvt:Lvt;if(t==="relu6")return r?qvt:$vt;if(t==="prelu")return r?uEe:lEe;if(t==="leakyrelu")return r?aEe:sEe;if(t==="sigmoid")return r?Hvt:zvt;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var kM=class{constructor(r,n,o,i=!1,s=!1,a=!1,l=null,u=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=Un(this.outputShape.length);let f=i?r[1]:r[2],d=Math.ceil(f/2),p=i?"i * 2, rc.y":"rc.y, i * 2",m=s?"rc.z, i * 2":"i * 2, rc.z",h=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],y="",b="";l&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${l}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${l}
        }`:y=`vec4 activation(vec4 x) {
          ${l}
        }`,b="result = activation(result);");let x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",w="rc.x";r[0]<n[0]?v=`imod(rc.x, ${r[0]})`:n[0]<r[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${g[0]});
          result += (${h[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}};re();re();var cEe={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},O6=class{constructor(r,n,o){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${r}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var Jvt="return a * b;";function M6(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=ce.upcastType(o.dtype,i.dtype);if(o.dtype==="complex64"){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),c=new O6(cEe.REAL,o.shape,i.shape),f=new O6(cEe.IMAG,o.shape,i.shape),d=[{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),m=n.runWebGLProgram(f,d,"float32"),h=Tc({inputs:{real:p,imag:m},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),h}if(n.shouldExecuteOnCPU([o,i])){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),[c,f]=uvt(o.shape,i.shape,l.values,u.values,s),d=n.makeTensorInfo(f,s),p=n.texData.get(d.dataId);return p.values=c,d}let a;return Fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Ff(Jvt,o.shape,i.shape):a=new Ec(Jvt,o.shape,i.shape),n.runWebGLProgram(a,[o,i],s)}var e1t={kernelName:Lg,backendName:"webgl",kernelFunc:M6};re();function t1t(t,r,n){let o=[N2(t.shape),...F2(t.shape)],i={dtype:t.dtype,shape:o,dataId:t.dataId},s=[N2(r),...F2(r)],a=new TM(s,o),l=!0,u=[o],c=n.runWebGLProgram(a,[i],t.dtype,u,l);return{dataId:c.dataId,shape:r,dtype:c.dtype}}function yt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=n,l=H.sizeFromShape(i.shape),u=H.inferFromImplicitShape(s,l),c=H.sizeFromShape(u);H.assert(l===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);let f=a.texData.get(i.dataId);return f.isPacked&&!qA(i.shape,u)&&!(f.texture!==null&&qA(f.shape,u))?t1t(i,u,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}var r1t={kernelName:Yb,backendName:"webgl",kernelFunc:yt};re();re();re();re();var R6=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l=Math.floor(o/4)*4,u=o%4,c="sumValue += dot(values, ones);";if(n!=null){let d=1/n;c=`sumValue += dot(values * ${H.isInt(d)?d.toPrecision(2):d}, ones);`}let f="";s%o>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${l};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var Nee=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l="0.0",u="";n==="prod"?l="1.0":n==="min"?(l="1.0 / 1e-20",u="min"):n==="max"&&(l="-1.0 / 1e-20",u="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");let f=Math.floor(o/4)*4,d=o%4,p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";n==="all"?(l="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(l="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let h="";s%o>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${l};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        vec4 minMaxValue = vec4(${l});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function oDr(t){let r=[];for(;r.length===0||r[r.length-1].outSize!==1;){let n=r.length?r[r.length-1].outSize:t[1],o=ce.computeOptimalWindowSize(n);r.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return r}function Mf(t,r,n,o){let i=oDr(t.shape),s=t;for(let a=0;a<i.length;a++){let{inSize:l,windowSize:u,outSize:c}=i[a],f,d;n==="mean"?f=a===0?new R6({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},l):new R6({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c}):f=new Nee({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},n),d=s,s=o.runWebGLProgram(f,[s],r),d.dataId!==t.dataId&&o.disposeIntermediateTensorInfo(d)}return s}re();var Fee=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[n[a]];this.outputShape=o,this.rank=o.length;let i=$r(this.rank),s=iDr(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}};function iDr(t){let r=t.length;if(r>6)throw Error(`Transpose for rank ${r} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],o=new Array(r);for(let i=0;i<t.length;i++)o[t[i]]=n[i];return o.join()}var Oee=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let o=new Array(r.length);for(let f=0;f<o.length;f++)o[f]=r[n[f]];if(this.outputShape=o,this.rank=o.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let i=$r(this.rank),s=oEe("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=s[f];let l=`vec2(${a.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${o[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${l})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${u}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${o[this.rank-2]}) {
        result[2] = ${c};
        if(${u}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function O2(t,r,n){let o=Fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Oee(t.shape,r):new Fee(t.shape,r);return n.runWebGLProgram(o,[t],t.dtype)}function n1t(t,r,n,o){let i=r,s=t.shape.length,a=H.parseAxisParam(i,t.shape),l=a,u=ce.getAxesPermutation(l,s),c=u!=null,f=t;c&&(f=O2(t,u,o),l=ce.getInnerMostAxes(l.length,s)),ce.assertAxesAreInnerMostDims("sum",l,s);let[d,p]=ce.computeOutAndReduceShapes(f.shape,l),m=d;n&&(m=ce.expandShapeToKeepDim(d,a));let h=H.sizeFromShape(p),y=H.sizeFromShape(t.shape)/h,b=yt({inputs:{x:f},attrs:{shape:[y,h]},backend:o}),x=k1(t.dtype),v=Mf(b,x,"sum",o),w=yt({inputs:{x:v},attrs:{shape:m},backend:o});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(v),c&&o.disposeIntermediateTensorInfo(f),w}function KA(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;return n1t(i,s,a,n)}var o1t={kernelName:ex,backendName:"webgl",kernelFunc:KA};re();function Zo(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{perm:s}=o,a=n,l=i.shape.length,u=new Array(l);for(let f=0;f<u.length;f++)u[f]=i.shape[s[f]];let c;if(a.shouldExecuteOnCPU([i])){let d=a.texData.get(i.dataId).values,p=XA(d,i.shape,i.dtype,s,u);c=a.makeTensorInfo(u,i.dtype);let m=a.texData.get(c.dataId);m.values=p}else c=O2(i,s,a);return c}var i1t={kernelName:um,backendName:"webgl",kernelFunc:Zo};var fEe=1e3;function ZA({a:t,b:r,transposeA:n,transposeB:o,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:u=null}){let c=t.shape.length,f=r.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=o?r.shape[f-1]:r.shape[f-2],m=n?t.shape[c-1]:t.shape[c-2],h=o?r.shape[f-2]:r.shape[f-1],g=t.shape.slice(0,-2),y=r.shape.slice(0,-2),b=H.sizeFromShape(g),x=H.sizeFromShape(y),w=Gu.assertAndGetBroadcastShape(t.shape.slice(0,-2),r.shape.slice(0,-2)).concat([m,h]);H.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${r.shape} and transposeA=${n} and transposeB=${o} must match.`);let _=n?[b,d,m]:[b,m,d],C=o?[x,h,p]:[x,p,h],S=yt({inputs:{x:t},backend:i,attrs:{shape:_}}),E=yt({inputs:{x:r},backend:i,attrs:{shape:C}}),A=[S,E],N=Math.max(b,x),k=n?S.shape[1]:S.shape[2],M=s!=null,I=a!=null,L=u==="leakyrelu",P=u!=null?Zv(u,!0):null,R=M||I||L||P!=null,V;if((m===1||h===1)&&k>fEe&&R===!1){let U=S,Y=E;n&&(U=Zo({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),A.push(U)),o&&(Y=Zo({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(Y));let X=h!==1,pe=h===1,$=U;X&&($=yt({inputs:{x:U},backend:i,attrs:{shape:[N,k,1]}}),A.push($));let F=h===1?2:1,z=Y;pe&&(z=yt({inputs:{x:Y},backend:i,attrs:{shape:[N,1,k]}}),A.push(z));let q=M6({inputs:{a:$,b:z},backend:i});V=KA({inputs:{x:q},backend:i,attrs:{axis:F,keepDims:!0}}),A.push(q)}else{let U=Bi(t.dtype,r.dtype),Y=new kM(_,C,[N,m,h],n,o,M,P,I,L),X=[S,E];if(s!=null&&X.push(s),I&&X.push(a),L){let pe=i.makeTensorInfo([],"float32",H.createScalarValue(l,"float32"));X.push(pe),A.push(pe)}V=i.runWebGLProgram(Y,X,U)}let G=yt({inputs:{x:V},backend:i,attrs:{shape:w}});A.push(V);for(let U of A)i.disposeIntermediateTensorInfo(U);return G}function sDr(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o;return ZA({a:i,b:s,transposeA:u,transposeB:c,backend:n,bias:a,preluActivationWeights:l,leakyreluAlpha:d,activation:f})}var s1t={kernelName:S1,backendName:"webgl",kernelFunc:sDr};re();var a1t="return abs(x);";function aDr(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])&&o.dtype!=="complex64"){let s=n.texData.get(o.dataId),a=Eee(s.values);return n.makeTensorInfo(o.shape,o.dtype,a)}let i;return Fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Cc(o.shape,a1t):i=new Ia(o.shape,a1t),n.runWebGLProgram(i,[o],o.dtype)}var l1t={kernelName:mb,backendName:"webgl",kernelFunc:aDr};re();var lDr=ys+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,uDr=Jt({opSnippet:lDr}),u1t={kernelName:fg,backendName:"webgl",kernelFunc:uDr};re();var cDr=ys+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,fDr=Jt({opSnippet:cDr}),c1t={kernelName:dg,backendName:"webgl",kernelFunc:fDr};re();var f1t="return a + b;",dDr=On({opSnippet:f1t,packedOpSnippet:f1t,supportsComplex:!0,cpuKernelImpl:Uxt}),d1t={kernelName:zd,backendName:"webgl",kernelFunc:dDr};re();var Mee=class{constructor(r,n){this.outputShape=[],this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`float v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}};var Ree=class{constructor(r,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`vec4 v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}};function jee(t){let{inputs:r,backend:n}=t,o=r;if(o.length===1)return Pi({inputs:{x:o[0]},backend:n});if(o.length>Fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(o.length/2),c=jee({inputs:o.slice(0,u),backend:n}),f=jee({inputs:o.slice(u),backend:n});return jee({inputs:[c,f],backend:n})}let i=o.map(u=>u.dtype).reduce((u,c)=>Bi(u,c)),s=o.map(u=>u.shape),l=Fe().getBool("WEBGL_PACK")?new Ree(o[0].shape,s):new Mee(o[0].shape,s);return n.runWebGLProgram(l,o,i)}var p1t={kernelName:hb,backendName:"webgl",kernelFunc:jee};re();function pDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("all",c,l);let[p,m]=ce.computeOutAndReduceShapes(d.shape,c),h=H.sizeFromShape(m),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}}),y=Mf(g,g.dtype,"all",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var m1t={kernelName:eS,backendName:"webgl",kernelFunc:pDr};re();function mDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("any",c,l);let[p,m]=ce.computeOutAndReduceShapes(d.shape,c),h=H.sizeFromShape(m),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}}),y=Mf(g,g.dtype,"any",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var h1t={kernelName:tS,backendName:"webgl",kernelFunc:mDr};re();re();var Pee=class{constructor(r,n,o){this.variableNames=["A"];let{windowSize:i,batchSize:s,outSize:a}=r;o||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];let l=n==="max"?">":"<",u=o?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${l} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};re();var Lee=class{constructor(r,n,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,H.assert(r.length>2,()=>`Packed arg${o.charAt(0).toUpperCase()+o.slice(1)} supports only inputs with rank above 2.`);let s=r[r.length-1],a=Math.ceil(s/n);this.outputShape=r.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");let l=this.outputShape,u=l.length,c=$r(u),f=ji("coords",u),d,p;if(a===1){p=u+1;let E=$r(p);d=`
        ${E} sourceLocR = ${E}(${f.join()}, 0);
        ++${f[u-1]};
        ${E} sourceLocG = ${E}(${f.join()}, 0);
        ++${f[u-2]};
        ${E} sourceLocA = ${E}(${f.join()}, 0);
        --${f[u-1]};
        ${E} sourceLocB = ${E}(${f.join()}, 0);
        --${f[u-2]};`}else p=u,d=`
        ${c} sourceLocR = coords;
        ++${f[u-1]};
        ${c} sourceLocG = coords;
        ++${f[u-2]};
        ${c} sourceLocA = coords;
        --${f[u-1]};
        ${c} sourceLocB = coords;
        --${f[u-2]};`;let m=["x","y","z","w","u","v"].slice(0,p),h="."+m[p-1],g=m.map(E=>"int "+E),y=ji("sourceLocR",p-1).concat("inIdx.r"),b=ji("sourceLocG",p-1).concat("inIdx.g"),x=ji("sourceLocB",p-1).concat("inIdx.b"),v=ji("sourceLocA",p-1).concat("inIdx.a"),w=o==="max"?"greaterThan":"lessThan",_=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()})));`,C=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,S=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${S}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[u-1]} < ${l[u-1]-1};
        bool hasNextRow = ${f[u-2]} < ${l[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function g1t(t,r,n,o=null){let i=r.shape[0],s=r.shape[1];o!=null&&(i=o.shape[0],s=o.shape[1]);let a=ce.computeOptimalWindowSize(s),l={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},u=new Pee(l,n,o==null),c=[r];o!=null&&c.push(o);let f=t.runWebGLProgram(u,c,"int32");if(f.shape[1]===1)return f;let d=g1t(t,r,n,f);return t.disposeIntermediateTensorInfo(f),d}function y1t(t,r,n,o=null){let i=o!=null?o.shape:r.shape,s=i[i.length-1],a=ce.computeOptimalWindowSize(s),l=new Lee(i,a,n,o==null),u=o==null?[r]:[r,o],c=t.runWebGLProgram(l,u,"int32");if(c.shape.length===r.shape.length){let f=y1t(t,r,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function Bee(t,r,n,o){let i=[n];if(ce.assertAxesAreInnerMostDims("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,r.shape.length),!Fe().getBool("WEBGL_PACK_REDUCE")||r.shape.length<=2){let s=[],a=t.texData.get(r.dataId),l=a!==null&&a.isPacked,u=r;l&&(u=t.unpackTensor(r),s.push(u));let[c,f]=ce.computeOutAndReduceShapes(u.shape,i),d=H.sizeFromShape(f),p=yt({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});s.push(p);let m=g1t(t,p,o);s.push(m);let h=yt({inputs:{x:m},backend:t,attrs:{shape:c}});return s.forEach(g=>t.disposeIntermediateTensorInfo(g)),h}return y1t(t,r,o)}function hDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Zo({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMax",[a[0]],u.shape.length);let f=Bee(n,u,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var b1t={kernelName:gb,backendName:"webgl",kernelFunc:hDr};re();function gDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Zo({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMin",[a[0]],u.shape.length);let f=Bee(n,u,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var x1t={kernelName:yb,backendName:"webgl",kernelFunc:gDr};re();var yDr=ys+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,bDr=Jt({opSnippet:yDr}),v1t={kernelName:pg,backendName:"webgl",kernelFunc:bDr};re();var xDr=ys+"return log(x + sqrt(x * x + 1.0));",vDr=Jt({opSnippet:xDr}),w1t={kernelName:mg,backendName:"webgl",kernelFunc:vDr};re();var wDr=ys+`
  return atan(x);
`,_Dr=Jt({opSnippet:wDr}),_1t={kernelName:hg,backendName:"webgl",kernelFunc:_Dr};re();var SDr=AM+`
  return atan(a, b);
`,CDr=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Of+`
  return result;
`,EDr=On({opSnippet:SDr,packedOpSnippet:CDr}),S1t={kernelName:yg,backendName:"webgl",kernelFunc:EDr};re();var TDr=ys+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,ADr=Jt({opSnippet:TDr}),C1t={kernelName:gg,backendName:"webgl",kernelFunc:ADr};re();var Xh=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.top,h=r.padInfo.left;this.outputShape=r.outShape;let g=n==="avg",y=`((batch  * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + d`,b=`(xR * ${r.inWidth} + xC) * ${r.inChannels} + d`,x="0.0";if(g||(x="-1.0 / 1e-20"),o){let E=">=";this.userCode=`
        const ivec2 strides = ivec2(${l}, ${u});
        const ivec2 pads = ivec2(${m}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?y:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let v="max",w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");let _=Math.floor(a/4)*4,C=a%4,S=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${m}, ${h});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${S}
          }

          int xC = xCCorner + ${_};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${S}
          }
        }
        setOutput(${w});
      }
    `}},M2=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideDepth,u=r.strideHeight,c=r.strideWidth,f=r.dilationDepth,d=r.dilationHeight,p=r.dilationWidth,m=r.effectiveFilterDepth,h=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,x=r.padInfo.left;this.outputShape=r.outShape;let v=n==="avg",w="0.0";if(v||(w="-1.0 / 1e-20"),o){let N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${l}, ${u}, ${c});
        const ivec3 pads = ivec3(${y}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${r.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${r.inDepth} + xD) * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`((xD * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`wD * ${h} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let _="max",C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");let S=Math.floor(a/4)*4,E=a%4,A=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${l}, ${u}, ${c});
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${S}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${A}
            }

            int xC = xCCorner + ${S};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${A}
            }
          }
        }
        setOutput(${C});
      }
    `}};function kDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;eb(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))return Pi({inputs:{x:i},backend:n});let d=new Xh(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}var E1t={kernelName:bb,backendName:"webgl",kernelFunc:kDr};re();function IDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,u,c),p=new M2(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}var T1t={kernelName:xb,backendName:"webgl",kernelFunc:IDr};re();var $ee=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=u-1-r.padInfo.top,d=c-1-r.padInfo.left,p=1/(n*o);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${l}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},zee=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,h=d-1-r.padInfo.front,g=p-1-r.padInfo.top,y=m-1-r.padInfo.left,b=1/(n*o*i);this.userCode=`
      const ivec3 pads = ivec3(${h}, ${g}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function DDr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),m=new zee(p);return n.runWebGLProgram(m,[i],a.dtype)}var A1t={kernelName:nS,backendName:"webgl",kernelFunc:DDr};re();function NDr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;eb([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=new $ee(f);return n.runWebGLProgram(d,[i],a.dtype)}var k1t={kernelName:rS,backendName:"webgl",kernelFunc:NDr};re();function FDr(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;return ZA({a:i,b:s,transposeA:a,transposeB:l,backend:n})}var I1t={kernelName:vb,backendName:"webgl",kernelFunc:FDr};re();re();var Uee=class{constructor(r,n,o,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="0.0";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="1.0";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${l};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};re();var Vee=class{constructor(r,n,o,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="vec4(0.0)";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        vec4 offset = ${l};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var ODr=({inputs:t,backend:r,attrs:n})=>{let{x:o,mean:i,variance:s,offset:a,scale:l}=t;H.assert(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),H.assert(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),H.assert(l==null||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=[o,i,s],f=null;a!=null&&(f=a.shape,c.push(a));let d=null;l!=null&&(d=l.shape,c.push(l));let p=Fe().getBool("WEBGL_PACK_NORMALIZATION")?new Vee(o.shape,i.shape,s.shape,f,d,u):new Uee(o.shape,i.shape,s.shape,f,d,u);return r.runWebGLProgram(p,c,c[0].dtype)},D1t={kernelName:Nb,backendName:"webgl",kernelFunc:ODr};re();re();var Gee=class{constructor(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;let n=$r(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let o=MDr(this.rank),i,s=r.map((a,l)=>`sourceLoc.${dEe[l]} = start[${l}] + coords.${dEe[l]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${o}));
      }
    `}},dEe=["x","y","z","w","u","v"];function MDr(t){if(t===1)return"sourceLoc";if(t<=6)return dEe.slice(0,t).map(r=>"sourceLoc."+r).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var Wee=class{constructor(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=$r(this.rank),o=ji("coords",this.rank),i=ji("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,l=`
      result.x = ${a};
      if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${o[this.rank-1]};
      if (++${o[this.rank-2]} < ${r[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${r.map((f,d)=>`start[${d}]`).join()});`:r.map((f,d)=>`${i[d]} = ${o[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${l}
        ${u}
        setOutput(result);
      }
    `}};function RDr(t,r,n,o){let i=o.texData.get(t.dataId),s=o.makeTensorInfo(n,t.dtype),a=o.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let l=Es.computeFlatOffset(r,H.computeStrides(t.shape));i.slice&&(l+=i.slice.flatOffset),a.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||t.dataId};let u=o.dataRefCount.get(a.slice.origDataId)||1;return o.dataRefCount.set(a.slice.origDataId,u+1),s}function Kh(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o,[l,u]=Es.parseSliceParams(i,s,a);if(Es.assertParamsValid(i,l,u),H.sizeFromShape(u)===0)return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){let d=n.texData.get(i.dataId),p=vvt(d.values,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,p)}let{isPacked:c}=n.texData.get(i.dataId),f=Es.isSliceContinous(i.shape,l,u);if(c||!f){let d=Fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wee(u):new Gee(u),p=[l];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),RDr(i,l,u,n)}var N1t={kernelName:Jb,backendName:"webgl",kernelFunc:Kh};var jDr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;H.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((x,v)=>x*v),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),m=[],h=yt({inputs:{x:i},backend:n,attrs:{shape:u}}),g=Zo({inputs:{x:h},backend:n,attrs:{perm:c}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:f}}),b=Kh({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return m.push(h),m.push(g),m.push(y),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},F1t={kernelName:wb,backendName:"webgl",kernelFunc:jDr};re();function PDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=Cee(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var O1t={kernelName:oS,backendName:"webgl",kernelFunc:PDr};re();var LDr=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,BDr=`
  return float(int(a.r) & int(b.r));
`;function $Dr(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=Fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=Fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([o,i])||a===1){let u=n.texData.get(o.dataId).values,c=n.texData.get(i.dataId).values,[f,d]=Gxt(o.shape,i.shape,u,c,o.dtype),p=n.makeTensorInfo(d,o.dtype),m=n.texData.get(p.dataId);return m.values=f,p}let l;return s?l=new Ff(LDr,o.shape,i.shape,!1):l=new Ec(BDr,o.shape,i.shape),n.runWebGLProgram(l,[o,i],o.dtype)}var M1t={kernelName:p1,backendName:"webgl",kernelFunc:$Dr};re();function zDr(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.readSync(o.dataId),a=n.readSync(i.dataId),l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var R1t={kernelName:iS,backendName:"webgl",kernelFunc:zDr};re();re();re();var UDr="return float(a != b);",pEe=On({opSnippet:UDr,cpuKernelImpl:fvt,dtype:"bool"}),j1t={kernelName:w1,backendName:"webgl",kernelFunc:pEe};re();function Qv(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Pi({inputs:{x:i.complexTensorInfos.real},backend:n})}var P1t={kernelName:LS,backendName:"webgl",kernelFunc:Qv};var VDr="return float(int(x));";function L1t(t,r){let n=new Ia(t.shape,VDr),o=r.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}function mEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return Pi({inputs:{x:i},backend:n});let a=bo(i.shape),l=mEe({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),u=Tc({inputs:{real:l,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(l),u}if(i.dtype==="complex64"){let a=Qv({inputs:{input:i},backend:n}),l=mEe({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),l}if(!H.hasEncodingLoss(i.dtype,s)){let a=Pi({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){let a=n.texData.get(i.dataId).values,[l,u,c]=Wxt(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}if(s==="int32")return L1t(i,n);if(s==="bool"){let a=n.makeTensorInfo([],"bool",H.getTypedArrayFromDType("bool",1)),u=pEe({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}var B1t={kernelName:sm,backendName:"webgl",kernelFunc:mEe};re();var $1t="return ceil(x);",GDr=Jt({opSnippet:$1t,packedOpSnippet:$1t,cpuKernelImpl:qxt}),z1t={kernelName:bg,backendName:"webgl",kernelFunc:GDr};re();var qee=class{constructor(r){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var Hee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function WDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{clipValueMin:s,clipValueMax:a}=o,l;Fe().getBool("WEBGL_PACK_CLIP")?l=new Hee(i.shape):l=new qee(i.shape);let u=[[s],[a]];return n.runWebGLProgram(l,[i],i.dtype,u)}var U1t={kernelName:xg,backendName:"webgl",kernelFunc:WDr};re();var Yee=class{constructor(r){this.variableNames=["real","imag"],this.outputShape=r,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function V1t(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}}function qDr(t){let{inputs:r,backend:n}=t,{x:o}=r,i=n.texData.get(o.dataId),s=new Yee(o.shape),a=[V1t(o,i.complexTensorInfos.real),V1t(o,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}var G1t={kernelName:_b,backendName:"webgl",kernelFunc:qDr};re();re();re();var Xee=class{constructor(r){this.outputShape=[],this.outputShape=ce.computeOutShape(r,1),this.variableNames=r.map((a,l)=>`T${l}`);let n=new Array(r.length-1);n[0]=r[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+r[a][1];let o=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){let l=n[a-1];o.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${l}));`)}let i=n.length,s=n[n.length-1];o.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${o.join(`
        `)}
      }
    `}};re();var Zee=class{constructor(r,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ce.computeOutShape(r,n);let o=this.outputShape,i=o.length,s=$r(i),a=ji("coords",i),l=["x","y","z","w","u","v"].slice(0,i);this.variableNames=r.map((g,y)=>`T${y}`);let u=new Array(r.length-1);u[0]=r[0][n];for(let g=1;g<u.length;g++)u[g]=u[g-1]+r[g][n];let c=l[n],f=l.slice(-2),d=l.join(),p=`if (${c} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${f.join()}));
        }`;for(let g=1;g<u.length;g++){let y=u[g-1];p+=`
        if (${c} < ${u[g]}  && ${c} >= ${u[g-1]}) {
          return getChannel(
            getT${g}(${Kee(l,c,y)}),
            vec2(${Kee(f,c,y)}));
        }`}let m=u.length,h=u[u.length-1];p+=`
        return getChannel(
          getT${m}(${Kee(l,c,h)}),
          vec2(${Kee(f,c,h)}));`,this.userCode=`
      float getValue(${l.map(g=>"int "+g)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${o[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${o[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${o[i-2]} &&
            ${a[i-1]} < ${o[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}};function Kee(t,r,n){let o=t.indexOf(r);return t.map((s,a)=>a===o?`${s} - ${n}`:s).join()}re();function QA(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Pi({inputs:{x:i.complexTensorInfos.imag},backend:n})}var W1t={kernelName:CS,backendName:"webgl",kernelFunc:QA};function IM(t,r,n){let o=t[0].dtype;if(o==="complex64"){let m=t.map(x=>Qv({inputs:{input:x},backend:n})),h=t.map(x=>QA({inputs:{input:x},backend:n})),g=IM(m,r,n),y=IM(h,r,n),b=Tc({inputs:{real:g,imag:y},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}let i=n.shouldExecuteOnCPU(t);if(o==="string"&&(i=!0),i){let m=t.map(w=>{let C=[-1,H.sizeFromShape(w.shape.slice(r))];return yt({inputs:{x:w},backend:n,attrs:{shape:C}})}),h=m.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),g=ce.computeOutShape(m.map(w=>w.shape),1),y=m[0].shape[0]===1,b=Hxt(h,g,o,y),x=ce.computeOutShape(t.map(w=>w.shape),r),v=n.makeTensorInfo(x,o,b);return m.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}let s=t.filter(m=>H.sizeFromShape(m.shape)>0),a=Fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){let m=a?new Ia(t[0].shape,tb):new Cc(t[0].shape,tb);return n.runWebGLProgram(m,t,o)}let l=Fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>l){let m=[];for(let g=0;g<s.length;g+=l){let y=s.slice(g,g+l);m.push(IM(y,r,n))}let h=IM(m,r,n);for(let g of m)n.disposeIntermediateTensorInfo(g);return h}if(a){let m=new Zee(s.map(h=>h.shape),r);return n.runWebGLProgram(m,s,o)}let{tensors2D:u,outShape:c}=HDr(s,r,n),f=new Xee(u.map(m=>m.shape)),d=n.runWebGLProgram(f,u,o);u.forEach(m=>n.disposeIntermediateTensorInfo(m));let p=yt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function HDr(t,r,n){let o=ce.computeOutShape(t.map(s=>s.shape),r);return{tensors2D:t.map(s=>yt({inputs:{x:s},attrs:{shape:[-1,H.sizeFromShape(s.shape.slice(r))]},backend:n})),outShape:o}}function hEe(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=H.parseAxisParam(i,r[0].shape)[0],a=r.map(c=>c.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(c=>c.shape),s);if(H.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(c=>H.sizeFromShape(c.shape)>0);return u.length===1?Pi({inputs:{x:u[0]},backend:n}):IM(u,s,n)}var q1t={kernelName:Sb,backendName:"webgl",kernelFunc:hEe};re();var DM=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=r.outShape;let a=r.padInfo.top,l=r.padInfo.left,u=r.strideHeight,c=r.strideWidth,f=r.dilationHeight,d=r.dilationWidth,p=r.filterHeight,m=r.filterWidth,h=Math.floor(r.inChannels/4)*4,g=r.inChannels%4,y=r.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,v=y?3:1,w="",_="";o&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:w=`
          float activation(float x) {
            ${o}
          }
        `,_="result = activation(result);");let C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${r.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${_}
        setOutput(result);
      }
    `}},Qee=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let n=r.padInfo.front,o=r.padInfo.top,i=r.padInfo.left,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.filterDepth,p=r.filterHeight,m=r.filterWidth,h=Math.floor(r.inChannels/4)*4,g=r.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${l});
      const ivec3 pads = ivec3(${n}, ${o}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};re();var NM=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=Un(this.outputShape.length);let a=r.padInfo.left,l=r.strideWidth,u=r.dilationWidth,c=r.filterHeight,f=r.filterWidth,d=f,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)p+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${r.inChannels}; d1 += 2) {
       `;for(let y=0;y<f;y++)p+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){let b=y*2;if(p+=`
           xC = xCCorner + ${b*u};
           `,l===1){if(b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<f)){let x=a%2===0?H.nearestLargerEven(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<f&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<f&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${r.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<f&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${r.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let m="",h="";o&&(i?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${o}
         }`:s?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${o}
         }`:m=`vec4 activation(vec4 x) {
           ${o}
         }`,h="result = activation(result);");let g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${h}
         setOutput(result);
       }
     `}};re();var Jee=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length);let{dataFormat:o}=n,i=di(),s=o==="channelsLast",a=s?1:2,l=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${r[2]} && pos < ${r[1]}) {`,c="";for(let f=0;f<=1;f++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${f};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${l}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}};function ete(t,r){let n=t.length;return n>=3?r?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!r&&n===1&&t[0]>1?[t[0],1]:null}function tte({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let u=t.shape,c=o.texData.get(t.dataId),f=n.inChannels,d=u[0]*u[1]*u[2],p=n.outChannels,m=n.dataFormat==="channelsLast",h=!1,g=!1,y,b=[];if(s!=null){let w=ete(s.shape,m);w!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:w}}),b.push(s))}if(i!=null){let w=ete(i.shape,m);w!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:w}}),b.push(i))}if(!((d===1||p===1)&&f>fEe)&&c.isPacked&&m&&c.texture!=null&&u[2]%2!==0&&H.arraysEqual(c.shape.slice(-3),u.slice(-3))){let w=u[0]*u[1]*(u[2]+1),_={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,H.assert(qA(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);let S=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(S);let E=ZA({a:_,b:S,backend:o,transposeA:h,transposeB:g,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a}),A=o.texData.get(E.dataId);H.assert(A.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,A.shape=n.outShape,y=Pi({inputs:{x:E},backend:o}),y.shape=n.outShape,b.push(E)}else{let w=n.outHeight*n.outWidth,_=yt({inputs:{x:t},backend:o,attrs:{shape:m?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),C=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}}),S=ZA({a:m?_:C,b:m?C:_,transposeA:!m,transposeB:g,backend:o,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a});y=yt({inputs:{x:S},backend:o,attrs:{shape:n.outShape}}),b.push(_),b.push(C),b.push(S)}for(let w of b)o.disposeIntermediateTensorInfo(w);return y}function rte({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let{filterWidth:u,filterHeight:c,inChannels:f,outWidth:d,outHeight:p,dataFormat:m}=n,h=m==="channelsLast",g=u*c*f,y=p*d,b=[n.batchSize,g,y],x=!0,v=!1,w=[];if(s!=null){let G=ete(s.shape,h);G!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:G}}),w.push(s))}if(i!=null){let G=ete(i.shape,h);G!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:G}}),w.push(i))}let _=yt({inputs:{x:r},backend:o,attrs:{shape:[1,g,H.sizeFromShape(r.shape)/g]}});w.push(_);let C=new Jee(b,n),S=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=o.runWebGLProgram(C,[t],"float32",S),A=yt({inputs:{x:E},backend:o,attrs:{shape:b}});w.push(E),w.push(A);let N=i!=null,k=s!=null,M=l==="leakyrelu",I=l?Zv(l,!0):null,L=new kM(h?A.shape:_.shape,h?_.shape:A.shape,h?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,v,N,I,k,M),P=h?[A,_]:[_,A];if(i&&P.push(i),k&&P.push(s),M){let G=o.makeTensorInfo([],"float32",H.createScalarValue(a,"float32"));P.push(G),w.push(G)}let R=o.runWebGLProgram(L,P,"float32"),V=yt({inputs:{x:R},backend:o,attrs:{shape:n.outShape}});w.push(R);for(let G of w)o.disposeIntermediateTensorInfo(G);return V}function YDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),m;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))m=tte({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&Fe().getBool("WEBGL_EXP_CONV")){let g=new NM(p),y=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];m=n.runWebGLProgram(g,[i,s],"float32",y)}else if(Fe().getBool("WEBGL_CONV_IM2COL"))m=rte({x:i,filter:s,convInfo:p,backend:n});else{let g=new DM(p);m=n.runWebGLProgram(g,[i,s],"float32")}let h=yt({inputs:{x:m},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(m),h}var H1t={kernelName:Cb,backendName:"webgl",kernelFunc:YDr};re();var nte=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},ote=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dataFormat==="channelsLast",l=n-1-r.padInfo.top,u=o-1-r.padInfo.left,c=a?1:2,f=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            for (int d2 = 0; d2 < ${r.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},ite=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.padInfo.front,a=r.padInfo.top,l=r.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yF = 0; yF < ${r.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${r.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${r.outHeight}; yR++) {
              int xR = wR + yR * ${o} - ${a};

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${r.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${l};

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},ste=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=n-1-r.padInfo.front,c=o-1-r.padInfo.top,f=i-1-r.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${r.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${o}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${o} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${r.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function XDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),m=new nte(p);return n.runWebGLProgram(m,[i,s],"float32")}var Y1t={kernelName:aS,backendName:"webgl",kernelFunc:XDr};re();var ate=class{constructor(r){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=r.inShape,this.enableShapeUniforms=Un(this.outputShape.length);let n=r.filterHeight,o=r.filterWidth,i=n-1-r.padInfo.top,s=o-1-r.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            int wCPerm = ${o} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${r.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${r.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function KDr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(c),p=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,d);if(Fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let m=[[p.strideHeight,p.strideWidth]],h=new ate(p);return n.runWebGLProgram(h,[i,s],"float32",m)}else{let m=new ote(p);return n.runWebGLProgram(m,[i,s],"float32")}}var X1t={kernelName:Eb,backendName:"webgl",kernelFunc:KDr};re();function ZDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),f=new Qee(c);return n.runWebGLProgram(f,[i,s],"float32")}var K1t={kernelName:Tb,backendName:"webgl",kernelFunc:ZDr};re();function QDr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o,c=ce.computeConv3DInfo(i.shape,u,a,1,l),f=new ite(c);return n.runWebGLProgram(f,[i,s],"float32")}var Z1t={kernelName:lS,backendName:"webgl",kernelFunc:QDr};re();function JDr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o,c=ce.computeConv3DInfo(u,s.shape,l,1,a),f=new ste(c);return n.runWebGLProgram(f,[i,s],"float32")}var Q1t={kernelName:uS,backendName:"webgl",kernelFunc:JDr};re();var eNr=Xp+`
  return cos(x);
`,tNr=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Of}
  return result;
`,rNr=Jt({opSnippet:eNr,packedOpSnippet:tNr}),J1t={kernelName:vg,backendName:"webgl",kernelFunc:rNr};re();var nNr=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,oNr=Jt({opSnippet:nNr}),ewt={kernelName:wg,backendName:"webgl",kernelFunc:oNr};re();var lte=class{constructor(r,n,o,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,l,u,c]=r,[f]=n,[d,p]=o;this.outputShape=[f,d,p,c];let m=i==="bilinear"?1:0,[h,g]=[`${l-1}.0`,`${u-1}.0`],[y,b,x]=d>1?[`${(l-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[v,w,_]=p>1?[`${(u-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${w};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var iNr=t=>{let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,f=new lte(i.shape,s.shape,l,u,c);return n.runWebGLProgram(f,[i,s,a],"float32")},twt={kernelName:fS,backendName:"webgl",kernelFunc:iNr};re();var FM=function(t){return t.Prod="*",t.Sum="+",t}(FM||{}),j6=class{constructor(r,n,o,i){this.op=r,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let s=this.outputShape.length,a=this.op===FM.Prod?"1.0":"0.0",l=o?a:`getX(${rwt(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1],c="",f="";o?(c=i?`end != ${u-1}`:"end != 0",f=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${u}`:"end >= pow2",f=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${$r(s)} coords = getOutputCoords();
        int end = ${nwt(s,"coords",this.op)};
        float val = ${l};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${nwt(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${rwt(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function rwt(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.x, ${r}.y`;if(t===3)return`${r}.x, ${r}.y, ${r}.z`;if(t===4)return`${r}.x, ${r}.y, ${r}.z, ${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function nwt(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.y`;if(t===3)return`${r}.z`;if(t===4)return`${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}re();function ute(t,r,n,o,i,s){let a=r.shape.length,l=ce.getAxesPermutation([o],a),u=r;l!=null&&(u=Zo({inputs:{x:r},backend:n,attrs:{perm:l}}));let c=ce.getInnerMostAxes(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${r.shape.length-1} but got axis=${o}`);let f=u.shape[c],d=Pi({inputs:{x:u},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){let m=new j6(t,u.shape,!1,s),h=[[p]],g=d;d=n.runWebGLProgram(m,[d],d.dtype,h),n.disposeIntermediateTensorInfo(g)}if(i){let p=new j6(t,u.shape,i,s),m=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(m)}if(l!=null){let p=ce.getUndoAxesPermutation(l),m=Zo({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),m}return d}function sNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return ute(FM.Prod,i,n,s,a,l)}var owt={kernelName:cS,backendName:"webgl",kernelFunc:sNr};re();function aNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return ute(FM.Sum,i,n,s,a,l)}var iwt={kernelName:Ab,backendName:"webgl",kernelFunc:aNr};re();function lNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=Cee(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=Vxt(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var swt={kernelName:dS,backendName:"webgl",kernelFunc:lNr};re();var cte=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=[],this.outputShape=r,this.blockSize=n,this.dataFormat=o,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function uNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o,l=i.shape[0],u=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],f=a==="NHWC"?i.shape[3]:i.shape[1],d=u*s,p=c*s,m=f/(s*s),h=a==="NHWC"?[l,d,p,m]:[l,m,d,p],g=new cte(h,s,a);return n.runWebGLProgram(g,[i],i.dtype)}var awt={kernelName:pS,backendName:"webgl",kernelFunc:uNr};re();var OM=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=Un(this.outputShape.length);let a=r.filterHeight,l=r.filterWidth,u=r.outChannels/r.inChannels,c="",f="";o&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:c=`
          float activation(float x) {
            ${o}
          }
        `,f="result = activation(result);");let d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${l}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${f}
        setOutput(result);
      }
    `}};re();var MM=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=Un(this.outputShape.length);let a=r.outChannels/r.inChannels,l=r.padInfo.left,u=r.strideWidth,c=r.dilationWidth,f=r.filterHeight,d=r.filterWidth,p=d,m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)m+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;m+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let b=0;b<d;b++)m+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){let x=b*2;if(m+=`
          xC = xCCorner + ${x*c};
          `,u===1){if(x<d&&(l%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?m+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){let v=l%2===0?H.nearestLargerEven(c):c;c%2===0&&l%2===1||c%2!==0&&l%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:m+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):v===1?m+=`
                    xC${x+1} = xTexelC${x};
                    `:m+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(l%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(m+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(m+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(m+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let h="",g="";o&&(i?h=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?h=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:h=`vec4 activation(vec4 x) {
          ${o}
        }`,g="result = activation(result);");let y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}};function cNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o,f=u;f==null&&(f=[1,1]),H.assert(ce.eitherStridesOrDilationsAreOne(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);let d=ce.computeConv2DInfo(i.shape,s.shape,a,f,l,c,!0),p;Fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new MM(d):p=new OM(d);let m=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",m)}var lwt={kernelName:kb,backendName:"webgl",kernelFunc:cNr};re();var fte=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.outChannels/r.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},dte=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=n-1-r.padInfo.top,l=o-1-r.padInfo.left,u=r.outChannels/r.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function fNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o,d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),p=new fte(d);return n.runWebGLProgram(p,[i,s],"float32")}var uwt={kernelName:mS,backendName:"webgl",kernelFunc:fNr};re();function dNr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o,d=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),p=new dte(d);return n.runWebGLProgram(p,[i,s],"float32")}var cwt={kernelName:hS,backendName:"webgl",kernelFunc:dNr};re();var pte=class{constructor(r){this.variableNames=["X"],this.outputShape=[r,r],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function pNr(t){let{inputs:r,backend:n}=t,{x:o}=r,i=[...o.shape,...o.shape],s=H.sizeFromShape(o.shape),a=yt({inputs:{x:o},backend:n,attrs:{shape:[s]}}),l=new pte(s),u=n.runWebGLProgram(l,[a],a.dtype),c=yt({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),c}var fwt={kernelName:gS,backendName:"webgl",kernelFunc:pNr};re();var mte=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let{inHeight:n,inWidth:o,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:l,filterWidth:u,dilationHeight:c,dilationWidth:f}=r,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${l}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${o}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function mNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeDilation2DInfo(i.shape,s.shape,a,l,"NHWC",u),f,d=new mte(c);f=n.runWebGLProgram(d,[i,s],"float32");let p=yt({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}var dwt={kernelName:Ib,backendName:"webgl",kernelFunc:mNr};re();function hNr(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,m=a.length,h=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(m,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=Zo({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),h.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);H.arraysEqual(v.shape,w)||(v=yt({inputs:{x:v},backend:n,attrs:{shape:w}}),h.push(v)),p===null?p=v:(p=M6({inputs:{a:v,b:p},backend:n}),h.push(p))}g<d-1&&(c[g]>=0&&(p=KA({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-m),keepDims:!1}}),h.push(p)),m--)}for(let g of h)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var pwt={kernelName:yS,backendName:"webgl",kernelFunc:hNr};re();var gNr="return (x >= 0.0) ? x : (exp(x) - 1.0);",yNr=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,bNr=Jt({opSnippet:gNr,packedOpSnippet:yNr}),mwt={kernelName:Sg,backendName:"webgl",kernelFunc:bNr};re();var xNr="return (b >= 0.0) ? a : a * (b + 1.0);",vNr=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,wNr=t=>{let{inputs:r,backend:n}=t,{dy:o,y:i}=r,s=Fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ff(vNr,o.shape,i.shape):new Ec(xNr,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],o.dtype)},hwt={kernelName:bS,backendName:"webgl",kernelFunc:wNr};re();var _Nr=`
  return vec4(equal(a, b));
`,SNr="return float(a == b);",CNr=On({opSnippet:SNr,packedOpSnippet:_Nr,dtype:"bool",cpuKernelImpl:Yxt}),gwt={kernelName:m1,backendName:"webgl",kernelFunc:CNr};re();var ENr=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ce.ERF_P};
  float a1 = ${ce.ERF_A1};
  float a2 = ${ce.ERF_A2};
  float a3 = ${ce.ERF_A3};
  float a4 = ${ce.ERF_A4};
  float a5 = ${ce.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,TNr=Jt({opSnippet:ENr}),ywt={kernelName:Cg,backendName:"webgl",kernelFunc:TNr};re();var ANr=Xp+`
  return exp(x);
`,kNr=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gEe=Jt({opSnippet:ANr,packedOpSnippet:kNr,cpuKernelImpl:Xxt,dtype:"float32"}),bwt={kernelName:Eg,backendName:"webgl",kernelFunc:gEe};re();function hte(t){let{inputs:r,attrs:n,backend:o}=t,{dim:i}=n,{input:s}=r,a=s.shape.length,l=s.shape.slice(),u=i;return i<0&&(H.assert(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+i+1),l.splice(u,0,1),yt({inputs:{x:s},backend:o,attrs:{shape:l}})}var xwt={kernelName:Db,backendName:"webgl",kernelFunc:hte};re();var vwt="return exp(x) - 1.0;",INr=Jt({opSnippet:vwt,packedOpSnippet:vwt,cpuKernelImpl:Kxt}),wwt={kernelName:Tg,backendName:"webgl",kernelFunc:INr};re();re();var P6=class{constructor(r,n,o){this.variableNames=["real","imag"];let i=n[1];this.outputShape=n;let s=o?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=o?`${i}.0`:"1.0",l;if(r==="real")l="return real * expR - imag * expI;";else if(r==="imag")l="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${r}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${l}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function gte(t,r,n){let o=n.texData.get(t.dataId),i=H.sizeFromShape(t.shape),s=t.shape[t.shape.length-1],a=i/s,l=yt({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),u=l.shape,c=new P6("real",u,r),f=new P6("imag",u,r),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:u},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:u}],p=n.runWebGLProgram(c,d,"float32"),m=n.runWebGLProgram(f,d,"float32"),h=Tc({inputs:{real:p,imag:m},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m);let g=yt({inputs:{x:h},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),g}function DNr(t){let{inputs:r,backend:n}=t,{input:o}=r;return gte(o,!1,n)}var _wt={kernelName:xS,backendName:"webgl",kernelFunc:DNr};re();var yte=class{constructor(r,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=r,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Jv(t){let{backend:r,attrs:n}=t,{shape:o,value:i}=n,{dtype:s}=n;if(s=s||H.inferDtype(i),s==="string"){let a=H.getArrayFromDType(s,H.sizeFromShape(o));return a.fill(i),r.makeTensorInfo(o,s,a)}else{let a=new yte(o,i),l=[[i]];return r.runWebGLProgram(a,[],s,l)}}var Swt={kernelName:vS,backendName:"webgl",kernelFunc:Jv};re();var bte=class{constructor(r){this.variableNames=["Image"],this.outputShape=[];let n=r[2];this.outputShape=r,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var Cwt={kernelName:wS,backendName:"webgl",kernelFunc:({inputs:t,backend:r})=>{let{image:n}=t,o=r,i=new bte(n.shape);return o.runWebGLProgram(i,[n],n.dtype)}};re();var Ewt="return floor(x);",NNr=Jt({opSnippet:Ewt,packedOpSnippet:Ewt,cpuKernelImpl:Zxt}),Twt={kernelName:Ag,backendName:"webgl",kernelFunc:NNr};re();var FNr=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,ONr=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,MNr=On({opSnippet:FNr,packedOpSnippet:ONr,dtype:"int32"}),Awt={kernelName:kg,backendName:"webgl",kernelFunc:MNr};re();re();var xte=class{constructor(r){this.variableNames=["A"];let n=di(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${o}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var vte=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=di(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${o}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}};var kwt={kernelName:Rk,backendName:"webgl",kernelFunc:RNr},RM,yEe=Fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function RNr(t){let{inputs:r,backend:n,attrs:o}=t,{pixels:i}=r,{numChannels:s}=o,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,u],d=[c,u,s];if(l||a){let g=Fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(RM==null||g!==yEe)&&(yEe=g,RM=document.createElement("canvas").getContext("2d",{willReadFrequently:yEe})),RM.canvas.width=u,RM.canvas.height=c,RM.drawImage(i,0,0,u,c),i=RM.canvas}let p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Wl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);let m=Fe().getBool("WEBGL_PACK")?new vte(d):new xte(d),h=n.runWebGLProgram(m,[p],"int32");return n.disposeData(p.dataId),h}re();function jNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:m,leakyreluAlpha:h}=o,g=ce.convertConv2DDataFormat(f),y=ce.computeConv2DInfo(i.shape,s.shape,u,d,c,p,!1,g),b,x=[],v=a!=null,w=l!=null,_=m==="leakyrelu",C=()=>{let E=[i,s],A=(N,k)=>{if(k==="NCHW"&&N.shape.length===1&&N.shape[0]!==1){let M=yt({inputs:{x:N},backend:n,attrs:{shape:[N.shape[0],1,1]}});return x.push(M),M}return N};if(v&&E.push(A(a,f)),w&&E.push(A(l,f)),_){let N=n.makeTensorInfo([],"float32",H.createScalarValue(h,"float32"));E.push(N),x.push(N)}return E};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=tte({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:m,preluActivationWeights:l,leakyreluAlpha:h});else if(y.strideWidth<=2&&g==="channelsLast"&&Fe().getBool("WEBGL_EXP_CONV")){let E=m?Zv(m,!0):null,A=new NM(y,v,E,w,_),N=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],k=C();b=n.runWebGLProgram(A,k,"float32",N)}else if(Fe().getBool("WEBGL_CONV_IM2COL"))b=rte({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:m,preluActivationWeights:l,leakyreluAlpha:h});else{let E=m?Zv(m,!1):null,A=new DM(y,v,E,w,_),N=C();b=n.runWebGLProgram(A,N,"float32")}let S=yt({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return x.push(b),x.forEach(E=>n.disposeIntermediateTensorInfo(E)),S}var Iwt={kernelName:C1,backendName:"webgl",kernelFunc:jNr};re();function PNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dilations:f,dimRoundingMode:d,activation:p,leakyreluAlpha:m}=o,h=[],g=f;g==null&&(g=[1,1]),H.assert(ce.eitherStridesOrDilationsAreOne(u,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`);let y=ce.computeConv2DInfo(i.shape,s.shape,u,g,c,d,!0),b=Fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=p?Zv(p,b):null,v=[i,s],w=a!=null,_=l!=null,C=p==="leakyrelu";if(w&&v.push(a),_&&v.push(l),C){let N=n.makeTensorInfo([],"float32",H.createScalarValue(m,"float32"));v.push(N),h.push(N)}let S;b?S=new MM(y,w,x,_,C):S=new OM(y,w,x,_,C);let E=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],A=n.runWebGLProgram(S,v,"float32",E);return h.forEach(N=>n.disposeIntermediateTensorInfo(N)),A}var Dwt={kernelName:E1,backendName:"webgl",kernelFunc:PNr};re();var wte=class{constructor(r,n,o,i){this.sliceDim=r,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=o;let s=$r(o.length),a=`
    int index;`;for(let l=0;l<this.sliceDim;l++)a+=`
          index = round(getIndices(coords[0], ${l}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[l]};
          flattenIndex += index * ${this.strides[l]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function LNr(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=i.shape,a=s[s.length-1],l=H.sizeFromShape(o.shape),[u,c,f,d]=ce.prepareAndValidate(o,i),p=yt({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),m=yt({inputs:{x:o},backend:n,attrs:{shape:[H.sizeFromShape(o.shape)/f,f]}});if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let b=n.readSync(i.dataId),x=n.bufferSync(o),v=Qxt(b,x,o.dtype,c,a,f,d,o.shape,l);return n.makeTensorInfo(u,o.dtype,v.values)}let h=new wte(a,d,[c,f],o.shape),g=n.runWebGLProgram(h,[m,p],m.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var Nwt={kernelName:_S,backendName:"webgl",kernelFunc:LNr};re();var _te=class{constructor(r,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let o=$r(this.rank),i=BNr(r,2);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${r[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}};function BNr(t,r){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let i=0;i<t.length;i++)i===2?o.push("index"):o.push(`${n[i]}`);return o.join()}function bEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o,u=H.parseAxisParam(a,i.shape)[0];if(Fe().get("DEBUG")){let x=n.readSync(s.dataId),v=i.shape[u];for(let w=0;w<x.length;++w){let _=x[w];H.assert(_<=v-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${v-1}]`)}}let c=ce.segment_util.collectGatherOpShapeInfo(i,s,u,l),f=H.sizeFromShape(s.shape),d=[],p=yt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),m=yt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});d.push(p),d.push(m);let h=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){let x=n.bufferSync(m),v=n.bufferSync(p),w=Jxt(v,x,h);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}let g=new _te(p.shape,h),y=n.runWebGLProgram(g,[p,m],p.dtype);d.push(y);let b=yt({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}var Fwt={kernelName:Fb,backendName:"webgl",kernelFunc:bEe};re();var $Nr="return float(a > b);",zNr=`
  return vec4(greaterThan(a, b));
`,UNr=On({opSnippet:$Nr,packedOpSnippet:zNr,cpuKernelImpl:evt,dtype:"bool"}),Owt={kernelName:h1,backendName:"webgl",kernelFunc:UNr};re();var VNr="return float(a >= b);",GNr=`
  return vec4(greaterThanEqual(a, b));
`,WNr=On({opSnippet:VNr,packedOpSnippet:GNr,dtype:"bool",cpuKernelImpl:tvt}),Mwt={kernelName:Ig,backendName:"webgl",kernelFunc:WNr};re();function qNr(t){let{inputs:r,backend:n}=t,{input:o}=r;return gte(o,!0,n)}var Rwt={kernelName:SS,backendName:"webgl",kernelFunc:qNr};re();var HNr="return float(!isnan(x) && !isinf(x));",YNr=Jt({opSnippet:HNr,dtype:"bool"}),jwt={kernelName:Dg,backendName:"webgl",kernelFunc:YNr};re();var XNr="return float(isinf(x));",KNr=Jt({opSnippet:XNr,dtype:"bool"}),Pwt={kernelName:Ng,backendName:"webgl",kernelFunc:KNr};re();var ZNr="return float(isnan(x));",QNr=Jt({opSnippet:ZNr,dtype:"bool"}),Lwt={kernelName:Fg,backendName:"webgl",kernelFunc:QNr};re();var JNr="return float(a < b);",eFr=`
  return vec4(lessThan(a, b));
`,tFr=On({opSnippet:JNr,packedOpSnippet:eFr,cpuKernelImpl:rvt,dtype:"bool"}),Bwt={kernelName:g1,backendName:"webgl",kernelFunc:tFr};re();var rFr="return float(a <= b);",nFr=`
  return vec4(lessThanEqual(a, b));
`,oFr=On({opSnippet:rFr,packedOpSnippet:nFr,cpuKernelImpl:nvt,dtype:"bool"}),$wt={kernelName:y1,backendName:"webgl",kernelFunc:oFr};re();function iFr(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=ovt(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var zwt={kernelName:ES,backendName:"webgl",kernelFunc:iFr};re();var sFr=Xp+`
  return x < 0.0 ? 0./0. : log(x);
`,aFr=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,lFr=Jt({opSnippet:sFr,packedOpSnippet:aFr,cpuKernelImpl:ivt}),Uwt={kernelName:Og,backendName:"webgl",kernelFunc:lFr};re();var uFr=Xp+`
  return log(1.0 + x);
`,cFr=Jt({opSnippet:uFr}),Vwt={kernelName:Mg,backendName:"webgl",kernelFunc:cFr};re();var fFr="return float(a >= 1.0 && b >= 1.0);",dFr=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,pFr=On({opSnippet:fFr,packedOpSnippet:dFr,dtype:"bool"}),Gwt={kernelName:b1,backendName:"webgl",kernelFunc:pFr};re();var mFr="return float(!(x >= 1.0));",hFr=Jt({opSnippet:mFr}),Wwt={kernelName:x1,backendName:"webgl",kernelFunc:hFr};re();var gFr="return float(a >= 1.0 || b >= 1.0);",yFr=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,bFr=On({opSnippet:gFr,packedOpSnippet:yFr,dtype:"bool"}),qwt={kernelName:v1,backendName:"webgl",kernelFunc:bFr};re();var Ste=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[];let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${l}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}};var Cte=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${l}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}};var xFr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o,c=Fe().getBool("WEBGL_PACK_NORMALIZATION")?new Cte(i.shape,s,a,l,u):new Ste(i.shape,s,a,l,u);return n.runWebGLProgram(c,[i],i.dtype)},Hwt={kernelName:Mb,backendName:"webgl",kernelFunc:xFr};re();var Ete=class{constructor(r,n,o,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=r,this.depth=r[3],this.depthRadius=n,this.bias=o,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${o});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var vFr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o,d=new Ete(i.shape,l,u,c,f);return n.runWebGLProgram(d,[i,s,a],i.dtype)},Ywt={kernelName:TS,backendName:"webgl",kernelFunc:vFr};re();re();re();function Xwt(t,r,n,o){let i=H.sizeFromShape(r),a=H.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=Mf(l,t.dtype,"max",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}function xEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=n.shouldExecuteOnCPU([i]),m=i;if(d){if(p){let v=n.texData.get(m.dataId).values,w=new Array(l);for(let S=0;S<w.length;S++)w[S]=i.shape[f[S]];let _=XA(v,i.shape,i.dtype,f,w);m=n.makeTensorInfo(w,i.dtype);let C=n.texData.get(m.dataId);C.values=_}else m=O2(i,f,n);c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("max",c,l);let[h,g]=ce.computeOutAndReduceShapes(m.shape,c),y=h;a&&(y=ce.expandShapeToKeepDim(h,u));let b;if(p){let v=n.texData.get(m.dataId).values,w=svt(v,H.sizeFromShape(g),y,i.dtype);b=n.makeTensorInfo(y,i.dtype);let _=n.texData.get(b.dataId);_.values=w}else b=Xwt(m,g,y,n);return d&&n.disposeIntermediateTensorInfo(m),b}var Kwt={kernelName:Rb,backendName:"webgl",kernelFunc:xEe};re();var wFr=AM+`
  return max(a, b);
`,_Fr=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Of+`
  return result;
`,SFr=On({opSnippet:wFr,packedOpSnippet:_Fr,cpuKernelImpl:avt}),Zwt={kernelName:Rg,backendName:"webgl",kernelFunc:SFr};re();function CFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;eb(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))return Pi({inputs:{x:i},backend:n});let d=new Xh(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}var Qwt={kernelName:jb,backendName:"webgl",kernelFunc:CFr};re();function EFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,c,u),p=new M2(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}var Jwt={kernelName:Pb,backendName:"webgl",kernelFunc:EFr};re();var Tte=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideHeight,o=r.strideWidth,i=r.dilationHeight,s=r.effectiveFilterHeight,a=r.effectiveFilterWidth,l=s-1-r.padInfo.top,u=a-1-r.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},Ate=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.dilationDepth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterDepth,c=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=u-1-r.padInfo.front,p=c-1-r.padInfo.top,m=f-1-r.padInfo.left,h=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${h} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function TFr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),m=new M2(p,"max",!0),h=n.runWebGLProgram(m,[a],a.dtype),g=new Ate(p),y=n.runWebGLProgram(g,[i,h],a.dtype);return n.disposeIntermediateTensorInfo(h),y}var e_t={kernelName:kS,backendName:"webgl",kernelFunc:TFr};re();function AFr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;eb([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),m=!0,h=new Xh(p,"max",m),g=n.runWebGLProgram(h,[l],l.dtype),y=new Tte(p),b=n.runWebGLProgram(y,[i,g],l.dtype);return n.disposeIntermediateTensorInfo(g),b}var t_t={kernelName:AS,backendName:"webgl",kernelFunc:AFr};re();re();function r_t(t,r,n,o){let i=new Xh(n,"max",!1),s=o.runWebGLProgram(i,[t],"float32");i=new Xh(n,"max",!0,!0,r);let a=o.runWebGLProgram(i,[t],"float32");return[s,a]}var n_t={kernelName:IS,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;H.assert(o.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.shape.length}.`);let c=[1,1];H.assert(ce.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let f=ce.computePool2DInfo(o.shape,i,s,c,a),[d,p]=r_t(o,l,f,u);return[d,p]}};re();re();function o_t(t,r,n,o){let i=H.sizeFromShape(r),a=H.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=Mf(l,"float32","mean",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}var i_t={kernelName:Lb,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{keepDims:i,axis:s}=r,a=n,l=o.shape.length,u=H.parseAxisParam(s,o.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=a.shouldExecuteOnCPU([o]),m=[],h=o;if(d){if(p){let w=a.texData.get(h.dataId).values,_=new Array(l);for(let E=0;E<_.length;E++)_[E]=o.shape[f[E]];let C=XA(w,o.shape,o.dtype,f,_);h=a.makeTensorInfo(_,o.dtype);let S=a.texData.get(h.dataId);S.values=C}else h=O2(o,f,a);m.push(h),c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("sum",c,l);let[g,y]=ce.computeOutAndReduceShapes(h.shape,c),b=g;i&&(b=ce.expandShapeToKeepDim(g,u));let x=o_t(h,y,b,a);for(let v of m)a.disposeIntermediateTensorInfo(v);return x}};re();function kFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",c,l);let[p,m]=ce.computeOutAndReduceShapes(d.shape,c),h=H.sizeFromShape(m),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}}),y=Mf(g,g.dtype,"min",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var s_t={kernelName:Bb,backendName:"webgl",kernelFunc:kFr};re();var IFr=AM+`
  return min(a, b);
`,DFr=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Of+`
  return result;
`,NFr=On({opSnippet:IFr,packedOpSnippet:DFr,cpuKernelImpl:lvt}),a_t={kernelName:jg,backendName:"webgl",kernelFunc:NFr};re();var kte=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=n.map((f,d)=>f[0]+r[d]+f[1]);let i=r.length,s=$r(i),a=n.map(f=>f[0]).join(","),l=n.map((f,d)=>f[0]+r[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=o==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}};var Ite=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((h,g)=>h[0]+r[g]+h[1]);let i=r.length,s=$r(i),a=n.map(h=>h[0]).join(","),l=n.map((h,g)=>h[0]+r[g]).join(","),u=ji("rc",i),c=ji("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=o==="reflect"?0:1,m="";if(i===1){let h=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;m=`
        ${s} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let h=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;m=`
        ${s} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${h}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${u[i-1]} += 1;
          if(${f}) {
            ${h}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var FFr=({inputs:t,backend:r,attrs:n})=>{let{x:o}=t,{paddings:i,mode:s}=n,a=Fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ite(o.shape,i,s):new kte(o.shape,i,s);return r.runWebGLProgram(a,[o],o.dtype)},l_t={kernelName:$b,backendName:"webgl",kernelFunc:FFr};re();var OFr=`if (b == 0.0) return NAN;
  return mod(a, b);`,MFr=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Of+`
  return result;
`,RFr=On({opSnippet:OFr,packedOpSnippet:MFr}),u_t={kernelName:Pg,backendName:"webgl",kernelFunc:RFr};re();var Dte=class{constructor(r,n,o){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[r,o],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};re();re();var jFr=`
if (a == b) {
  return 1.0;
};
return a / b;`,PFr=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,vEe=On({opSnippet:jFr,packedOpSnippet:PFr,checkOutOfBounds:!0}),c_t={kernelName:_g,backendName:"webgl",kernelFunc:vEe};re();var f_t="return a - b;",wEe=On({opSnippet:f_t,packedOpSnippet:f_t,supportsComplex:!0,cpuKernelImpl:Ivt}),d_t={kernelName:Jg,backendName:"webgl",kernelFunc:wEe};function _Ee(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=H.parseAxisParam([s],i.shape),l=xEe({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),u=ce.expandShapeToKeepDim(l.shape,a),c=yt({inputs:{x:l},backend:n,attrs:{shape:u}}),f=wEe({inputs:{a:i,b:c},backend:n}),d=gEe({inputs:{x:f},backend:n}),p=KA({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),m=yt({inputs:{x:p},backend:n,attrs:{shape:u}}),h=vEe({inputs:{a:d,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),h}var p_t={kernelName:nx,backendName:"webgl",kernelFunc:_Ee};function LFr(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o,u=l?i:_Ee({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=u.shape[0],f=u.shape[1],d=new Dte(c,f,s),p=[[a]],m=n.runWebGLProgram(d,[u],"int32",p);return l||n.disposeIntermediateTensorInfo(u),m}var m_t={kernelName:DS,backendName:"webgl",kernelFunc:LFr};re();var BFr=ys+`
  return -x;
`,$Fr=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function zFr(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])){let s=n.texData.get(o.dataId),[a,l]=cvt(s.values,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,a)}let i;return Fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Cc(o.shape,$Fr):i=new Ia(o.shape,BFr),n.runWebGLProgram(i,[o],o.dtype)}var h_t={kernelName:zb,backendName:"webgl",kernelFunc:zFr};re();var UFr=va.nonMaxSuppressionV3Impl;function VFr(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d}=UFr(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var g_t={kernelName:NS,backendName:"webgl",kernelFunc:VFr};re();var GFr=va.nonMaxSuppressionV4Impl;function WFr(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:m}=GFr(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}var y_t={kernelName:FS,backendName:"webgl",kernelFunc:WFr};re();var qFr=va.nonMaxSuppressionV5Impl;function HFr(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),p=a,m=l,h=u,g=c,{selectedIndices:y,selectedScores:b}=qFr(f,d,p,m,h,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var b_t={kernelName:OS,backendName:"webgl",kernelFunc:HFr};re();var Nte=class{constructor(r,n,o,i){this.variableNames=["indices"],this.outputShape=[r,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${o}),
                      float(index == coords.y)));
      }
    `}};var YFr=t=>{let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o,c=H.sizeFromShape(i.shape),f=new Nte(c,a,l,u),d=yt({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[d],s);n.disposeIntermediateTensorInfo(d);let m=[...i.shape,a],h=yt({inputs:{x:p},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(p),h},x_t={kernelName:Vb,backendName:"webgl",kernelFunc:YFr};re();re();function L6(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="complex64"){let i=Qv({inputs:{input:o},backend:n}),s=L6({inputs:{x:i},backend:n}),a=QA({inputs:{input:o},backend:n}),l=L6({inputs:{x:a},backend:n}),u=Tc({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return Jv({attrs:{shape:o.shape,dtype:o.dtype,value:o.dtype==="string"?"":0},backend:n})}var v_t={kernelName:sx,backendName:"webgl",kernelFunc:L6};function w_t(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(o.dtype==="complex64"){let i=Qv({inputs:{input:o},backend:n}),s=w_t({inputs:{x:i},backend:n}),a=QA({inputs:{input:o},backend:n}),l=L6({inputs:{x:a},backend:n}),u=Tc({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return Jv({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:n})}var __t={kernelName:Ub,backendName:"webgl",kernelFunc:w_t};re();function XFr(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return hte({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{H.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),H.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=hte({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=hEe({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var S_t={kernelName:Gb,backendName:"webgl",kernelFunc:XFr};re();var Fte=class{constructor(r,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+r[f]+c[1]);let i=r.length,s=$r(i),a=n.map(c=>c[0]).join(","),l=n.map((c,f)=>c[0]+r[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}};var Ote=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+r[y]+g[1]);let i=r.length,s=$r(i),a=n.map(g=>g[0]).join(","),l=n.map((g,y)=>g[0]+r[y]).join(","),u=ji("rc",i),c=ji("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${f}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${f}) {`],m=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="";for(let g=0,y=i===1?2:4;g<y;g++)h+=`
        ${p[g]}
        if (${m}) {
          result[${g}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;h+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var SEe=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;if(H.sizeFromShape(i.shape)===0){let c=s.map((f,d)=>f[0]+i.shape[d]+f[1]);return Jv({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}let l=Fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ote(i.shape,s,a):new Fte(i.shape,s,a),u=[[a]];return n.runWebGLProgram(l,[i],i.dtype,u)},C_t={kernelName:Wb,backendName:"webgl",kernelFunc:SEe};re();var KFr=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,ZFr=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Of+`
  return result;
`,QFr=On({opSnippet:KFr,packedOpSnippet:ZFr}),E_t={kernelName:Bg,backendName:"webgl",kernelFunc:QFr};re();function JFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=[],c=H.parseAxisParam(s,i.shape),f=c,d=ce.getAxesPermutation(f,l),p=i;d!=null&&(p=Zo({inputs:{x:i},backend:n,attrs:{perm:d}}),f=ce.getInnerMostAxes(f.length,l),u.push(p)),ce.assertAxesAreInnerMostDims("prod",f,l);let m;if(n.shouldExecuteOnCPU([p])){let h=n.texData.get(p.dataId).values,{outVals:g,outShape:y,outDtype:b}=dvt(p.shape,p.dtype,h,f);m=n.makeTensorInfo(y,b,g)}else{let[h,g]=ce.computeOutAndReduceShapes(p.shape,f),y=H.sizeFromShape(g),b=yt({inputs:{x:p},backend:n,attrs:{shape:[-1,y]}}),x=k1(i.dtype),v=Mf(b,x,"prod",n);m=yt({inputs:{x:v},backend:n,attrs:{shape:h}}),u.push(b),u.push(v)}if(a){u.push(m);let h=ce.expandShapeToKeepDim(m.shape,c);m=yt({inputs:{x:m},backend:n,attrs:{shape:h}})}return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),m}var T_t={kernelName:Hb,backendName:"webgl",kernelFunc:JFr};re();function eOr(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.readSync(b.dataId)),c=i.map(b=>b.shape),f=n.readSync(s.dataId),d=n.readSync(a.dataId),[p,m,h]=pvt(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(h,s.dtype,m);return g.concat([y])}var A_t={kernelName:MS,backendName:"webgl",kernelFunc:eOr};re();function tOr(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=mvt(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var k_t={kernelName:RS,backendName:"webgl",kernelFunc:tOr};re();function rOr(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=n.readSync(a.dataId),p=l.map(y=>n.readSync(y.dataId)),m=l.map(y=>y.shape),[h,g]=hvt(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,m,u);return n.makeTensorInfo(h,s.dtype,g)}var I_t={kernelName:jS,backendName:"webgl",kernelFunc:rOr};re();var CEe=t=>{let{backend:r,attrs:n}=t,{start:o,stop:i,step:s,dtype:a}=n,l=gvt(o,i,s,a);return r.makeTensorInfo([l.length],a,l)},D_t={kernelName:PS,backendName:"webgl",kernelFunc:CEe};re();var nOr="return 1.0 / x;",oOr=Jt({opSnippet:nOr}),N_t={kernelName:$g,backendName:"webgl",kernelFunc:oOr};re();var iOr=ys+`
  return (x < 0.0) ? 0.0 : x;
`,sOr=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aOr=Jt({opSnippet:iOr,packedOpSnippet:sOr}),F_t={kernelName:zg,backendName:"webgl",kernelFunc:aOr};re();var lOr=ys+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,uOr=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cOr=Jt({opSnippet:lOr,packedOpSnippet:uOr}),O_t={kernelName:Ug,backendName:"webgl",kernelFunc:cOr};re();var Mte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var Rte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function fOr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Rte(i.shape,u,c,s,a):new Mte(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],"float32")}var M_t={kernelName:Kb,backendName:"webgl",kernelFunc:fOr};re();var jte=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,m=1/d,h=Math.ceil(p)*2+2,g=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${m});

        const int winHeight = int(${h});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function dOr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new jte(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var R_t={kernelName:$S,backendName:"webgl",kernelFunc:dOr};re();var Pte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",m;s?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var Lte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",m;s?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function pOr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Lte(i.shape,u,c,s,a):new Pte(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],i.dtype)}var j_t={kernelName:Xb,backendName:"webgl",kernelFunc:pOr};re();var Bte=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,m=1/d,h=Math.ceil(p)*2+2,g=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${m});

        const int winHeight = int(${h});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${o} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${o} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function mOr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new Bte(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var P_t={kernelName:BS,backendName:"webgl",kernelFunc:mOr};re();var $te=class{constructor(r,n){this.variableNames=["x"];let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);if(this.outputShape=r,o===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${r[0]} - coord - 1));
        }
      `;return}let i=l=>n.indexOf(l)!==-1&&r[l]!==1?`${r[l]} - coords[${l}] - 1`:`coords[${l}]`,s=r.map((l,u)=>i(u)).join(","),a=$r(o);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};var zte=class{constructor(r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);this.outputShape=r;let i=ji("rc",o),s=`${i[o-1]} + 1 < ${this.outputShape[o-1]}`,a=`${i[o-2]} + 1 < ${this.outputShape[o-2]}`,l=$r(o);o===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${r[0]} - rc - 1),
            ${r[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${r[0]} - (rc  + 1) - 1),
                ${r[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${f(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(h){return p(h)}function c(h){return h[o-1]="("+h[o-1]+" + 1)",p(h)}function f(h){return h[o-2]="("+h[o-2]+" + 1)",p(h)}function d(h){return h[o-1]="("+h[o-1]+" + 1)",h[o-2]="("+h[o-2]+" + 1)",p(h)}function p(h){let g=r.map((x,v)=>m(v,h)),y=g.join(","),b=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function m(h,g){return n.indexOf(h)!==-1&&r[h]!==1?`${r[h]} - ${g[h]} - 1`:`${g[h]}`}}};function hOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o,a=i.shape.length,l=H.parseAxisParam(s,i.shape);if(a===0)return Pi({inputs:{x:i},backend:n});let u=Fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zte(i.shape,l):new $te(i.shape,l);return n.runWebGLProgram(u,[i],i.dtype)}var L_t={kernelName:Zb,backendName:"webgl",kernelFunc:hOr};re();re();var Ute=class{constructor(r,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let o=r[1],i=r[2];this.outputShape=r;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${o}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var B_t={kernelName:nC,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=new Ute(o.shape,s),[c,f]=ce.getImageCenter(a,o.shape[1],o.shape[2]),d=[[c,f,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(u,[o],o.dtype,d)}};re();var gOr=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,yOr=Jt({opSnippet:gOr}),$_t={kernelName:Vg,backendName:"webgl",kernelFunc:yOr};re();var bOr="return inversesqrt(x);",xOr=Jt({opSnippet:bOr,cpuKernelImpl:yvt}),z_t={kernelName:Gg,backendName:"webgl",kernelFunc:xOr};re();var R2=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let c=$r(s.length),f=$r(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,m="";i===1?m="i":i===2&&(m="i, coords[1]");let h=`getUpdates(${m})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${r}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}};var Vte=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let c=$r(s.length),f=$r(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,m="";i===1?m="i":i===2&&(m="i, coords[1]");let h=`getUpdates(${m})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${r}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${h};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}};function vOr(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=[d/c,c];if(d===0)return n.makeTensorInfo(a,i.dtype);let m=yt({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),h=yt({inputs:{x:s},backend:n,attrs:{shape:[u,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y;Fe().getBool("WEBGL_PACK")?y=new Vte(u,l,m.shape.length,h.shape.length,f,p):y=new R2(u,l,m.shape.length,h.shape.length,f,p);let b=n.runWebGLProgram(y,[h,m,g],h.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),x}var U_t={kernelName:zS,backendName:"webgl",kernelFunc:vOr};re();re();var Gte=class{constructor(r,n,o,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[r,o];let s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,l=Fe().getNumber("WEBGL_VERSION")===2?s:a,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${l}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function wOr(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=new Gte(i.shape[0],i.shape[1],s.shape[1],a),u=[[i.shape[1]]];return n.runWebGLProgram(l,[i,s],"int32",u)}var V_t={kernelName:VS,backendName:"webgl",kernelFunc:wOr};re();var Wte=class{constructor(r,n,o){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(o>4)throw Error(`Where for rank ${o} is not yet supported`);if(o===1)s="resRC",i="resRC";else{let l=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],c=[];for(let f=0;f<n.length;f++)c.push(`${l[f]}`),f<r&&u.push(`${l[f]}`);i=u.join(),s=c.join()}let a=$r(o);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}};function _Or(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r,a=new Wte(o.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[o,i,s],Bi(i.dtype,s.dtype))}var G_t={kernelName:Qb,backendName:"webgl",kernelFunc:_Or};re();var SOr=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${ce.SELU_SCALEALPHA};
  float scale = ${ce.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,COr=Jt({opSnippet:SOr}),W_t={kernelName:Wg,backendName:"webgl",kernelFunc:COr};re();var EOr=Xp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,TOr=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AOr=Jt({opSnippet:EOr,packedOpSnippet:TOr,cpuKernelImpl:xvt}),q_t={kernelName:Xg,backendName:"webgl",kernelFunc:AOr};re();var kOr=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,IOr=Jt({opSnippet:kOr}),H_t={kernelName:Yg,backendName:"webgl",kernelFunc:IOr};re();var DOr=Xp+`
  return sin(x);
`,NOr=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Of}
  return result;
`,FOr=Jt({opSnippet:DOr,packedOpSnippet:NOr}),Y_t={kernelName:qg,backendName:"webgl",kernelFunc:FOr};re();var OOr=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,MOr=Jt({opSnippet:OOr}),X_t={kernelName:Hg,backendName:"webgl",kernelFunc:MOr};re();var ROr=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,jOr=Jt({opSnippet:ROr}),K_t={kernelName:Kg,backendName:"webgl",kernelFunc:jOr};re();var POr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;H.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((b,x)=>b*x),u=[[0,0]];u.push(...a);for(let b=1+s.length;b<i.shape.length;++b)u.push([0,0]);let c=[],f=SEe({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),d=ce.getReshaped(f.shape,s,l,!1),p=ce.getPermuted(d.length,s.length,!1),m=ce.getReshapedPermuted(f.shape,s,l,!1),h=yt({inputs:{x:f},backend:n,attrs:{shape:d}}),g=Zo({inputs:{x:h},backend:n,attrs:{perm:p}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:m}});return c.push(f),c.push(h),c.push(g),c.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},Z_t={kernelName:tx,backendName:"webgl",kernelFunc:POr};re();function LOr(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.readSync(o.dataId),u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId)[0],[d,p,m,h,g]=wvt(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,m),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var Q_t={kernelName:GS,backendName:"webgl",kernelFunc:LOr};re();function BOr(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.readSync(i.dataId)),l=n.readSync(o.dataId),u=Array.from(n.readSync(s.dataId)),[c,f,d]=_vt(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var J_t={kernelName:WS,backendName:"webgl",kernelFunc:BOr};re();function $Or(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=Tee(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var e2t={kernelName:qS,backendName:"webgl",kernelFunc:$Or};re();function zOr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=Tee(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var t2t={kernelName:HS,backendName:"webgl",kernelFunc:zOr};re();function UOr(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),m=!1;if(s.dtype==="string"){let b=n.bufferSync(i),x=n.bufferSync(s),v=H.decodeString(n.readSync(a.dataId)[0]),w=bvt(b,x,l,p,f,c,u,d,v,m);return n.makeTensorInfo(l,w.dtype,w.values)}let h=new R2(c,u,i.shape.length,s.shape.length,d,[p,1],m),g=n.runWebGLProgram(h,[s,i,a],s.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(g),y}var r2t={kernelName:YS,backendName:"webgl",kernelFunc:UOr};re();function VOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=H.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=i.shape.length,f=new Array(c).fill(0),d=i.shape.slice();return u.map(p=>{let m=[...d];m[l]=p;let h=Kh({inputs:{x:i},backend:n,attrs:{begin:f,size:m}});return f[l]+=p,h})}var n2t={kernelName:rx,backendName:"webgl",kernelFunc:VOr};re();var o2t="return sqrt(x);",GOr=Jt({opSnippet:o2t,packedOpSnippet:o2t,cpuKernelImpl:Svt}),i2t={kernelName:Zg,backendName:"webgl",kernelFunc:GOr};re();var WOr="return x * x;",qOr=Jt({opSnippet:WOr}),s2t={kernelName:XS,backendName:"webgl",kernelFunc:qOr};re();var a2t="return (a - b) * (a - b);",HOr=On({opSnippet:a2t,packedOpSnippet:a2t}),l2t={kernelName:Qg,backendName:"webgl",kernelFunc:HOr};re();function YOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;if(i.dtype!=="string")throw new Error("Input must be of datatype string");let s=n.readSync(i.dataId),a=ce.fromUint8ToStringArray(s),l=Cvt(a,"string",o);return n.makeTensorInfo(i.shape,"string",l)}var u2t={kernelName:_1,backendName:"webgl",kernelFunc:YOr};re();function XOr({inputs:t,attrs:r,backend:n}){let{x:o}=t,i=ys+`
    return x > 0.0 ? 1.0 : float(${r.alpha});
  `,s=new Ia(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}var c2t={kernelName:r0,backendName:"webgl",kernelFunc:XOr};re();var qte=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=o;let i=o.length,s=$r(o.length),a=$r(o.length),l="";if(i===1)l="coords * strides + begin";else{let u=0;l=o.map((c,f)=>(u++,o.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${u-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${r});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${l}));
      }
    `}};function KOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o,{finalShapeSparse:m,finalShape:h,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Es.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=yt({inputs:{x:i},backend:n,attrs:{shape:h}});else if(y||b){H.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let S=Es.computeOutShape(x,v,w),E=Kh({inputs:{x:i},backend:n,attrs:{begin:x,size:S}});_=yt({inputs:{x:E},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([i])){let E=n.readSync(i.dataId),A=Qt(i.shape,i.dtype,E),N=Evt(m,A,w,x);_=n.makeTensorInfo(h,i.dtype,N.values)}else{let E=new qte(x,w,m);_=n.runWebGLProgram(E,[i],i.dtype)}let C=yt({inputs:{x:_},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(_),C}var f2t={kernelName:KS,backendName:"webgl",kernelFunc:KOr};re();function ZOr(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.readSync(f.dataId),m=n.readSync(d.dataId),[h,g]=Tvt(p,m,i,s,a,l,u,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",g)]}var d2t={kernelName:ZS,backendName:"webgl",kernelFunc:ZOr};re();function QOr(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.readSync(s.dataId),u=n.readSync(a.dataId)[0],[c,f,d]=Avt(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var p2t={kernelName:QS,backendName:"webgl",kernelFunc:QOr};re();function JOr(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.readSync(s.dataId),l=kvt(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var m2t={kernelName:JS,backendName:"webgl",kernelFunc:JOr};re();var eMr="return tan(x);",tMr=Jt({opSnippet:eMr}),h2t={kernelName:e0,backendName:"webgl",kernelFunc:tMr};re();var rMr=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,nMr=Jt({opSnippet:rMr}),g2t={kernelName:t0,backendName:"webgl",kernelFunc:nMr};re();function oMr(t){let{inputs:r,backend:n,attrs:o}=t,{tensor:i,indices:s,updates:a}=r,{}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(a,s,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);let m=yt({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),h=yt({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),g=yt({inputs:{x:i},backend:n,attrs:{shape:p}}),y=new R2(u,l,m.shape.length,h.shape.length,f,p,!1,!0),b=n.runWebGLProgram(y,[h,m,g],g.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}var y2t={kernelName:US,backendName:"webgl",kernelFunc:oMr};re();var Hte=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[a]*n[a];this.outputShape=o,this.rank=o.length;let i=$r(this.rank),s=iMr(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}};function iMr(t){let r=t.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(r===1)return`imod(resRC, ${t[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],o=[];for(let i=0;i<t.length;i++)o.push(`imod(${n[i]}, ${t[i]})`);return o.join()}function EEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;if(i.dtype==="string"||i.shape.length>5){let u=n.readSync(i.dataId),c=i.dtype==="string"?u.map(p=>H.decodeString(p)):u,f=Qt(i.shape,i.dtype,c),d=Dvt(f,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}let a=new Hte(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var b2t={kernelName:lm,backendName:"webgl",kernelFunc:EEe};re();var Yte=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=r,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},Xte=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=r,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function JA(t,r){r!==null&&t.disposeIntermediateTensorInfo(r)}function x2t(t){let r=1;for(;r<t;)r*=2;return r}function sMr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o,l=Fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([i])||f<l||s>u){let N=n.readSync(i.dataId),[k,M]=Nvt(N,c,i.dtype,s,a);return[n.makeTensorInfo(k.shape,k.dtype,k.values),n.makeTensorInfo(M.shape,M.dtype,M.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[i,Jv({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,m=p?n.unpackTensor(i):i,g=H.sizeFromShape(c)/f,y=yt({inputs:{x:m},attrs:{shape:[g,f]},backend:n});p&&JA(n,m);let b=x2t(s),x=x2t(f),v=null,w=()=>v===null?[y,y]:[y,v],_=(N,k,M)=>{let I=w(),L=new Yte(M),R=[[f],[v===null?1:0],[Number.NEGATIVE_INFINITY],[N],[k]],V=v;v=n.runWebGLProgram(L,I,"int32",R),JA(n,V)};for(let N=1;N<b;N*=2){let k=N*2;for(let M=N;M>=1;M/=2)_(k,M,[g,x])}for(let N=x;N>b;N/=2){let k=w(),M=new Xte([g,N/2]),L=[[f],[v===null?1:0],[b]],P=v;v=n.runWebGLProgram(M,k,"int32",L),JA(n,P);let R=b/2,V=R*2;for(let G=R;G>=1;G/=2)_(V,G,v.shape)}let C=v;v=Kh({inputs:{x:v},backend:n,attrs:{begin:0,size:[g,s]}}),JA(n,C);let S=bEe({inputs:{x:y,indices:v},backend:n,attrs:{axis:1,batchDims:1}});JA(n,y);let E=c.slice(0,-1);E.push(s),C=v,v=yt({inputs:{x:v},attrs:{shape:E},backend:n}),JA(n,C);let A=S;return S=yt({inputs:{x:S},attrs:{shape:E},backend:n}),JA(n,A),[S,v]}var v2t={kernelName:eC,backendName:"webgl",kernelFunc:sMr};re();var Kte=class{constructor(r,n,o,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;let l=o==="nearest"?1:2,u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${r} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${r}));

                if (${l} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function aMr(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=o,[f,d,p,m]=i.shape,[h,g]=c??[d,p],y=[f,h,g,m],b=new Kte(d,p,a,l,u,y);return n.runWebGLProgram(b,[i,s],"float32")}var w2t={kernelName:tC,backendName:"webgl",kernelFunc:aMr};re();function lMr(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;eb(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let a=o.readSync(s.dataId),{outputValues:l,outputShape:u,indices:c}=Fvt(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var _2t={kernelName:rC,backendName:"webgl",kernelFunc:lMr};re();function uMr(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i,l=a.shape.length,u=i.shape[s],c=new Array(l-1),f=0;for(let g=0;g<l;g++)g!==s&&(c[f++]=a.shape[g]);let d=[],p=new Array(l).fill(0),m=a.shape.slice();m[s]=1;let h=new Array(u);for(let g=0;g<h.length;g++){p[s]=g;let y=Kh({inputs:{x:a},backend:n,attrs:{begin:p,size:m}}),b=yt({inputs:{x:y},backend:n,attrs:{shape:c}});h[g]=b,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),h}var S2t={kernelName:ox,backendName:"webgl",kernelFunc:uMr};re();var Zte=class{constructor(r,n){this.variableNames=["x","segmentIds"];let o=r.windowSize,i=r.batchSize,s=r.inSize,a=r.numSegments,l=a*Math.ceil(s/o);this.outputShape=[i,l];let u="0.0",c="sumValue",f=Math.floor(o/4)*4,d=o%4,p=`
        sumValue += dot(values, segFilter);
    `,m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let h="";s%o>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${o}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function cMr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o,l=i.shape.length,u=[],c=0,f=ce.getAxesPermutation([c],l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),u.push(d),c=ce.getInnerMostAxes(1,l)[0]);let p=ce.segment_util.computeOutShape(d.shape,c,a),m=H.sizeFromShape([d.shape[c]]),h=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}});u.push(h);let g=k1(i.dtype),y=(w,_,C,S,E)=>{let A=w.shape[0],N=w.shape[1],k=ce.segment_util.segOpComputeOptimalWindowSize(N,E),M={windowSize:k,inSize:N,batchSize:A,numSegments:E},I=new Zte(M,_),L=n.compileAndRun(I,[w,C],S);if(u.push(L),L.shape[1]===E)return L;let P=CEe({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),R=EEe({inputs:{x:P},backend:n,attrs:{reps:[N/k]}});return u.push(P),u.push(R),y(L,_,R,S,E)},b=y(h,"unsortedSegmentSum",s,g,a),x=yt({inputs:{x:b},backend:n,attrs:{shape:p}}),v=x;if(f!=null){u.push(x);let w=ce.getUndoAxesPermutation(f);v=Zo({inputs:{x:v},backend:n,attrs:{perm:w}})}return u.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}var C2t={kernelName:ix,backendName:"webgl",kernelFunc:cMr};var fMr=[s1t,l1t,u1t,c1t,d1t,p1t,m1t,h1t,b1t,x1t,v1t,w1t,_1t,S1t,C1t,E1t,T1t,A1t,k1t,I1t,D1t,F1t,O1t,M1t,R1t,B1t,z1t,U1t,Kvt,G1t,q1t,H1t,Y1t,X1t,K1t,Z1t,Q1t,J1t,ewt,twt,owt,iwt,swt,awt,lwt,uwt,cwt,fwt,dwt,pwt,mwt,hwt,gwt,ywt,bwt,xwt,wwt,_wt,Swt,Cwt,Twt,Awt,kwt,Iwt,Dwt,Nwt,Fwt,Owt,Mwt,Xvt,Rwt,W1t,jwt,Pwt,Lwt,Zvt,Bwt,$wt,zwt,Uwt,Vwt,Gwt,Wwt,qwt,Hwt,Ywt,Kwt,Zwt,Qwt,Jwt,e_t,t_t,n_t,i_t,s_t,a_t,l_t,u_t,m_t,e1t,h_t,g_t,y_t,b_t,j1t,x_t,__t,S_t,C_t,E_t,Qvt,T_t,A_t,k_t,I_t,D_t,P1t,c_t,N_t,F_t,O_t,r1t,M_t,R_t,j_t,P_t,L_t,B_t,$_t,z_t,U_t,V_t,G_t,W_t,q_t,H_t,Y_t,X_t,N1t,p_t,K_t,Z_t,Q_t,J_t,e2t,t2t,r2t,n2t,i2t,s2t,l2t,u2t,c2t,f2t,d2t,p2t,m2t,d_t,o1t,h2t,g2t,y2t,b2t,v2t,w2t,i1t,_2t,S2t,C2t,v_t];for(let t of fMr)Pk(t);re();var dMr=["vis"],A2t=(()=>{let r=class r{get settings(){return this._tensorflowSettings.getValue()}set settings(o){this._tensorflowSettings.getValue()!==o&&this._tensorflowSettings.next(o)}constructor(){this.modelTrainned=new ca,this._tensorflowSettings=new Ra(null),this.settings$=this._tensorflowSettings.asObservable().pipe(ob(),oR({bufferSize:1,refCount:!0})),this.settings$.pipe(la(o=>Be(this,null,function*(){if(o){let{inputs:i,labels:s,mainLayers:a,finalLayer:l}=o,u=vm(i,[i.length,2],"float32"),c=No(s);this.model=U2e(),a.forEach(m=>this.model.add(m)),this.model.add(l),this.model.compile(o.compiler),this.model.compile({optimizer:Kd.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]});let f={name:"show.fitCallbacks",tab:"Training",drawArea:this.container?.nativeElement},d={onTrainEnd:()=>{alert("Trainning complete!"),this.modelTrainned.emit(this.model)}},p=vs(ar({},o.fit),{callbacks:[T2t.show.fitCallbacks(f,["loss","acc"]),d]});yield this.model.fit(u,c,p)}}))).subscribe()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ua({type:r,selectors:[["app-tensorflow-visualization"]],viewQuery:function(i,s){if(i&1&&Ld(dMr,7),i&2){let a;Pu(a=Lu())&&(s.container=a.first)}},inputs:{settings:"settings"},outputs:{modelTrainned:"modelTrainned"},standalone:!0,features:[pa],decls:3,vars:0,consts:[["vis",""],[1,"container"]],template:function(i,s){i&1&&(fa(0,"div",1),kc(1,"div",null,0),da())},styles:[".container[_ngcontent-%COMP%]{background:#fff;width:100%;height:100%;margin-top:40px}"]});let t=r;return t})();var D2t=jf(I2t());var Qte=class{constructor(r,n,o,i,s){this.p=r,this.background=n,this.ground=o,this.w=i,this.y=s}drawBackground(){let r=Math.round(this.w/this.background.width)+1;for(let n=0;n<r;n++)this.p.image(this.background,this.background.width*n,this.y-this.ground.height-this.background.height)}drawGround(){let r=Math.round(this.w/this.ground.width)+1;for(let n=0;n<r;n++)this.p.image(this.ground,this.ground.width*n,this.y-this.ground.height)}};var Jte=class{constructor(r,n,o,i,s,a){this.p=r,this.upPipe=n,this.downPipe=o,this.w=i,this.h=s,this.minBottom=0,this.maxBottom=0,this.yBottom=0,this.distancePipe=420,this.x=0,this.velocity=5,this.targetX=0,this.targetY=0,this.minBottom=this.h-480,this.maxBottom=this.h-140,this.yBottom=r.random(this.minBottom,this.maxBottom),this.x=a}draw(){let r=this.yBottom-this.distancePipe,n=0-this.downPipe.height+r;if(r>0){let o=Math.round(r/this.downPipe.height)+1;for(let i=0;i<o;i++)n*i>0?this.p.image(this.downPipe,this.x,n*i):this.p.image(this.downPipe,this.x,n)}this.p.image(this.downPipe,this.x,this.yBottom),this.p.image(this.upPipe,this.x,this.yBottom-this.distancePipe),this.targetY=this.yBottom-70,this.targetX=this.x+65,this.image=this.downPipe,this.x=this.x-this.velocity}isOffscreen(r){let n=!1;if(this.x+this.downPipe.width<-10){let i=r.sort((s,a)=>s.x<a.x?1:s.x>a.x?-1:0)[0].x+400;this.x=i,this.yBottom=this.p.random(this.minBottom,this.maxBottom),n=!0}return n}isOffscreenScore(r){return this.targetX>r?1:0}};var ere=class{constructor(r,n,o,i,s=-5){this.p=r,this.bird=n,this.ground=o,this.height=i,this.isAlive=!0,this.x=70,this.y=0,this.gravity=.9,this.velocity=0,this.score=0,this.generation=0,this.isAlive=!0,this.y=window.innerHeight/2-170,this.jumpForce=s}update(r){let n=this.getNearObstacle(r),o=0,i=0;n?.targetX>this.x?i=n?.targetX-this.x:i=this.x-n?.targetX,n?.targetY<this.y?o=n?.targetY-this.y:o=this.y-n?.targetY,this.fall(i,o),this.p.image(this.bird,this.x,this.y)}fall(r,n){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.score=this.score-r-n}getNearObstacle(r){return r.filter(o=>o.x>=this.x+this.bird.width).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0]}hits(r){let o=r.filter(i=>i.x<this.x+this.bird.width).sort((i,s)=>i.x<s.x?-1:i.x>s.x?1:0)[0];return(this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y+this.bird.height>o.yBottom+10||this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y<o.yBottom-180)&&(this.isAlive=!1),!1}isOffScreen(){(this.y+this.bird.height<0||this.y>this.height-this.ground.height)&&(this.isAlive=!1)}jump(){this.velocity+=this.jumpForce,this.velocity*=.9}info(r){let n=r.filter(o=>o.targetX>=this.x).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0];return{agentY:this.y,targetY:n?.targetY}}};var mMr=["canvas"];function hMr(t,r){if(t&1){let n=V2();fa(0,"app-tensorflow-visualization",3),lb("modelTrainned",function(i){L2(n);let s=ig();return B2(s.modelTrainned(i))}),da()}if(t&2){let n=ig();og("settings",n.settings)}}var AEe=function(t){return t[t.Nothing=0]="Nothing",t[t.Jump=1]="Jump",t}(AEe||{}),N2t=(()=>{let r=class r{get model(){return this._model.getValue()}set model(o){this._model.getValue()!==o&&this._model.next(o)}constructor(){this.screenYSize=window.innerHeight,this.data=[],this.inputs=[],this.labels=[],this._model=new Ra(null),this.model$=this._model.asObservable().pipe(ob(),oR({bufferSize:1,refCount:!0})),this.nextYellowPointX=0,this.birdX=0,this.scorePipes=0,this.obstacles=[],this.width=window.innerWidth,this.height=window.innerHeight;let o=this.creatingDataToTraining();this.settingTensorflow()}ngOnInit(){this.canvas,this._model.subscribe(o=>{o&&(this.p=new D2t.default(this.sketch.bind(this)))})}sketch(o){o.setup=()=>this.setup(o),o.draw=()=>this.draw(o)}setup(o){let i=o.loadImage("assets/bg.png"),s=o.loadImage("assets/ground.png");this.upPipe=o.loadImage("assets/pipeUp.png"),this.downPipe=o.loadImage("assets/pipeDown.png");let a=o.loadImage("assets/bird.png");this.background=new Qte(o,i,s,this.width,this.height),this.initObstacles(o,this.upPipe,this.downPipe),o.createCanvas(this.width,this.height,this.canvas.nativeElement),this.bird=new ere(o,a,s,this.height)}draw(o){o.background(111,197,206),this.background.drawBackground(),this.obstacles.forEach(m=>{m.draw(),m.isOffscreen(this.obstacles)&&(this.scorePipes+=1)}),this.bird.update(this.obstacles);let{agentY:i,targetY:s}=this.bird.info(this.obstacles),a=La([[i,s]]),l=this.model?.predict(a),f=Wd(l,1).arraySync()[0];["Nothing","JUMP"][f]==="JUMP"&&this.bird.jump(),o.textSize(20),o.text(`Score (Pipe counter): ${this.scorePipes}`,10,110),this.background.drawGround()}initObstacles(o,i,s){this.obstacles=[];let a=400;for(let l=0;l<10;l++)this.obstacles.push(new Jte(o,i,s,this.width,this.height,this.width+a*l))}settingTensorflow(){this.inputs=this.data.map(o=>[o.yAgent,o.yTarget]),this.labels=this.data.map(o=>Number(o.action)),this.settings={compiler:{optimizer:Kd.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:512,epochs:10},inputs:this.inputs,labels:this.labels,mainLayers:[y6.dense({units:10,activation:"relu",inputShape:[2]})],finalLayer:y6.dense({units:2,activation:"softmax"})}}creatingDataToTraining(){for(let o=0;o<this.screenYSize;o+=5)for(let i=0;i<this.screenYSize;i+=5)i<o?this.data.push({yAgent:i,yTarget:o,action:AEe.Nothing}):this.data.push({yAgent:i,yTarget:o,action:AEe.Jump});return JSON.stringify(this.data)}modelTrainned(o){this.model=o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ua({type:r,selectors:[["app-flappy-bird-supervised"]],viewQuery:function(i,s){if(i&1&&Ld(mMr,7),i&2){let a;Pu(a=Lu())&&(s.canvas=a.first)}},standalone:!0,features:[pa],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(fa(0,"div"),ab(1,hMr,1,1,"app-tensorflow-visualization",1),kc(2,"canvas",2,0),da()),i&2&&(Pd(),og("ngIf",!s.model),Pd(),og("width",0))},dependencies:[ub,cAe,A2t],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block;width:100%;height:100%}"]});let t=r;return t})();var F2t=[{path:"",component:N2t}];var gMr="@",yMr=(()=>{let r=class r{constructor(o,i,s,a,l){this.doc=o,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=l,this._rendererFactoryPromise=null,this.scheduler=Ir(HTe,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-JY34BBNM.js").then(i=>i)).catch(i=>{throw new Ps(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(o,i){let s=this.delegate.createRenderer(o,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new kEe(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(l=>{let u=l.createRenderer(o,i);a.use(u),this.scheduler?.notify(9)}).catch(l=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(i){az()},r.\u0275prov=Lr({token:r,factory:r.\u0275fac});let t=r;return t})(),kEe=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let n of this.replay)n(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,n){return this.delegate.createElement(r,n)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,n){this.delegate.appendChild(r,n)}insertBefore(r,n,o,i){this.delegate.insertBefore(r,n,o,i)}removeChild(r,n,o){this.delegate.removeChild(r,n,o)}selectRootElement(r,n){return this.delegate.selectRootElement(r,n)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,n,o,i){this.delegate.setAttribute(r,n,o,i)}removeAttribute(r,n,o){this.delegate.removeAttribute(r,n,o)}addClass(r,n){this.delegate.addClass(r,n)}removeClass(r,n){this.delegate.removeClass(r,n)}setStyle(r,n,o,i){this.delegate.setStyle(r,n,o,i)}removeStyle(r,n,o){this.delegate.removeStyle(r,n,o)}setProperty(r,n,o){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(r,n,o)),this.delegate.setProperty(r,n,o)}setValue(r,n){this.delegate.setValue(r,n)}listen(r,n,o){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(r,n,o)),this.delegate.listen(r,n,o)}shouldReplay(r){return this.replay!==null&&r.startsWith(gMr)}};function O2t(t="animations"){return YTe("NgAsyncAnimations"),sR([{provide:uz,useFactory:(r,n,o)=>new yMr(r,n,o,t),deps:[Dn,dz,jn]},{provide:z2,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var M2t={providers:[oAe({eventCoalescing:!0}),oke(F2t),O2t()]};var DEe;try{DEe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{DEe=!1}var Da=(()=>{let r=class r{constructor(o){this._platformId=o,this.isBrowser=this._platformId?dAe(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||DEe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};r.\u0275fac=function(i){return new(i||r)(Ot($2))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var B6;function bMr(){if(B6==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>B6=!0}))}finally{B6=B6||!1}return B6}function jM(t){return bMr()?t:!!t.capture}var Zh=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(Zh||{}),tre,ek;function rre(){if(ek==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ek=!1,ek;if("scrollBehavior"in document.documentElement.style)ek=!0;else{let t=Element.prototype.scrollTo;t?ek=!/\{\s*\[native code\]\s*\}/.test(t.toString()):ek=!1}}return ek}function PM(){if(typeof document!="object"||!document)return Zh.NORMAL;if(tre==null){let t=document.createElement("div"),r=t.style;t.dir="rtl",r.width="1px",r.overflow="auto",r.visibility="hidden",r.pointerEvents="none",r.position="absolute";let n=document.createElement("div"),o=n.style;o.width="2px",o.height="1px",t.appendChild(n),document.body.appendChild(t),tre=Zh.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,tre=t.scrollLeft===0?Zh.NEGATED:Zh.INVERTED),t.remove()}return tre}var IEe;function xMr(){if(IEe==null){let t=typeof document<"u"?document.head:null;IEe=!!(t&&(t.createShadowRoot||t.attachShadow))}return IEe}function R2t(t){if(xMr()){let r=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function Qh(t){return t.composedPath?t.composedPath()[0]:t.target}function $6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function j2t(t,...r){return r.length?r.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function tk(t){return t!=null&&`${t}`!="false"}function LM(t){return Array.isArray(t)?t:[t]}function Os(t){return t==null?"":typeof t=="string"?t:`${t}px`}function e1(t){return t instanceof Zi?t.nativeElement:t}var vMr=(()=>{let r=class r{create(o){return typeof MutationObserver>"u"?null:new MutationObserver(o)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var P2t=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({providers:[vMr]});let t=r;return t})();var L2t=new Set,rk,wMr=(()=>{let r=class r{constructor(o,i){this._platform=o,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):SMr}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&_Mr(o,this._nonce),this._matchMedia(o)}};r.\u0275fac=function(i){return new(i||r)(Ot(Da),Ot(lR,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function _Mr(t,r){if(!L2t.has(t))try{rk||(rk=document.createElement("style"),r&&rk.setAttribute("nonce",r),rk.setAttribute("type","text/css"),document.head.appendChild(rk)),rk.sheet&&(rk.sheet.insertRule(`@media ${t} {body{ }}`,0),L2t.add(t))}catch(n){console.error(n)}}function SMr(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var $2t=(()=>{let r=class r{constructor(o,i){this._mediaMatcher=o,this._zone=i,this._queries=new Map,this._destroySubject=new ro}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return B2t(LM(o)).some(s=>this._registerQuery(s).mql.matches)}observe(o){let s=B2t(LM(o)).map(l=>this._registerQuery(l).observable),a=JM(s);return a=ez(a.pipe(jd(1)),a.pipe(nz(1),rR(0))),a.pipe(Wn(l=>{let u={matches:!1,breakpoints:{}};return l.forEach(({matches:c,query:f})=>{u.matches=u.matches||c,u.breakpoints[f]=c}),u}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let i=this._mediaMatcher.matchMedia(o),a={observable:new ZM(l=>{let u=c=>this._zone.run(()=>l.next(c));return i.addListener(u),()=>{i.removeListener(u)}}).pipe(l1(i),Wn(({matches:l})=>({query:o,matches:l})),ws(this._destroySubject)),mql:i};return this._queries.set(o,a),a}};r.\u0275fac=function(i){return new(i||r)(Ot(wMr),Ot(jn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function B2t(t){return t.map(r=>r.split(",")).reduce((r,n)=>r.concat(n)).map(r=>r.trim())}var OEe=(()=>{let r=class r{constructor(o){this._platform=o}isDisabled(o){return o.hasAttribute("disabled")}isVisible(o){return EMr(o)&&getComputedStyle(o).visibility==="visible"}isTabbable(o){if(!this._platform.isBrowser)return!1;let i=CMr(OMr(o));if(i&&(z2t(i)===-1||!this.isVisible(i)))return!1;let s=o.nodeName.toLowerCase(),a=z2t(o);return o.hasAttribute("contenteditable")?a!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!NMr(o)?!1:s==="audio"?o.hasAttribute("controls")?a!==-1:!1:s==="video"?a===-1?!1:a!==null?!0:this._platform.FIREFOX||o.hasAttribute("controls"):o.tabIndex>=0}isFocusable(o,i){return FMr(o)&&!this.isDisabled(o)&&(i?.ignoreVisibility||this.isVisible(o))}};r.\u0275fac=function(i){return new(i||r)(Ot(Da))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function CMr(t){try{return t.frameElement}catch{return null}}function EMr(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function TMr(t){let r=t.nodeName.toLowerCase();return r==="input"||r==="select"||r==="button"||r==="textarea"}function AMr(t){return IMr(t)&&t.type=="hidden"}function kMr(t){return DMr(t)&&t.hasAttribute("href")}function IMr(t){return t.nodeName.toLowerCase()=="input"}function DMr(t){return t.nodeName.toLowerCase()=="a"}function G2t(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let r=t.getAttribute("tabindex");return!!(r&&!isNaN(parseInt(r,10)))}function z2t(t){if(!G2t(t))return null;let r=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(r)?-1:r}function NMr(t){let r=t.nodeName.toLowerCase(),n=r==="input"&&t.type;return n==="text"||n==="password"||r==="select"||r==="textarea"}function FMr(t){return AMr(t)?!1:TMr(t)||kMr(t)||t.hasAttribute("contenteditable")||G2t(t)}function OMr(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var FEe=class{get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}constructor(r,n,o,i,s=!1,a){this._element=r,this._checker=n,this._ngZone=o,this._document=i,this._injector=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let r=this._startAnchor,n=this._endAnchor;r&&(r.removeEventListener("focus",this.startAnchorListener),r.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(r)))})}focusFirstTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(r)))})}focusLastTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(r)))})}_getRegionBoundary(r){let n=this._element.querySelectorAll(`[cdk-focus-region-${r}], [cdkFocusRegion${r}], [cdk-focus-${r}]`);return r=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(r){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let o=this._getFirstTabbableElement(n);return o?.focus(r),!!o}return n.focus(r),!0}return this.focusFirstTabbableElement(r)}focusFirstTabbableElement(r){let n=this._getRegionBoundary("start");return n&&n.focus(r),!!n}focusLastTabbableElement(r){let n=this._getRegionBoundary("end");return n&&n.focus(r),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=0;o<n.length;o++){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[o]):null;if(i)return i}return null}_getLastTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=n.length-1;o>=0;o--){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[o]):null;if(i)return i}return null}_createAnchor(){let r=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,r),r.classList.add("cdk-visually-hidden"),r.classList.add("cdk-focus-trap-anchor"),r.setAttribute("aria-hidden","true"),r}_toggleAnchorTabIndex(r,n){r?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(r){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_executeOnStable(r){this._ngZone.isStable?this._injector?sb(r,{injector:this._injector}):r():this._ngZone.onStable.pipe(jd(1)).subscribe(r)}},W2t=(()=>{let r=class r{constructor(o,i,s){this._checker=o,this._ngZone=i,this._injector=Ir(Pf),this._document=s}create(o,i=!1){return new FEe(o,this._checker,this._ngZone,this._document,i,this._injector)}};r.\u0275fac=function(i){return new(i||r)(Ot(OEe),Ot(jn),Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function MEe(t){return t.buttons===0||t.detail===0}function REe(t){let r=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!r&&r.identifier===-1&&(r.radiusX==null||r.radiusX===1)&&(r.radiusY==null||r.radiusY===1)}var MMr=new Do("cdk-input-modality-detector-options"),RMr={ignoreKeys:[18,17,224,91,16]},q2t=650,BM=jM({passive:!0,capture:!0}),jMr=(()=>{let r=class r{get mostRecentModality(){return this._modality.value}constructor(o,i,s,a){this._platform=o,this._mostRecentTarget=null,this._modality=new Ra(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(u=>u===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Qh(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<q2t||(this._modality.next(MEe(l)?"keyboard":"mouse"),this._mostRecentTarget=Qh(l))},this._onTouchstart=l=>{if(REe(l)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Qh(l)},this._options=ar(ar({},RMr),a),this.modalityDetected=this._modality.pipe(nz(1)),this.modalityChanged=this.modalityDetected.pipe(ob()),o.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,BM),s.addEventListener("mousedown",this._onMousedown,BM),s.addEventListener("touchstart",this._onTouchstart,BM)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,BM),document.removeEventListener("mousedown",this._onMousedown,BM),document.removeEventListener("touchstart",this._onTouchstart,BM))}};r.\u0275fac=function(i){return new(i||r)(Ot(Da),Ot(jn),Ot(Dn),Ot(MMr,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var ore=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(ore||{}),PMr=new Do("cdk-focus-monitor-default-options"),nre=jM({passive:!0,capture:!0}),H2t=(()=>{let r=class r{constructor(o,i,s,a,l){this._ngZone=o,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ro,this._rootNodeFocusAndBlurListener=u=>{let c=Qh(u);for(let f=c;f;f=f.parentElement)u.type==="focus"?this._onFocus(u,f):this._onBlur(u,f)},this._document=a,this._detectionMode=l?.detectionMode||ore.IMMEDIATE}monitor(o,i=!1){let s=e1(o);if(!this._platform.isBrowser||s.nodeType!==1)return an();let a=R2t(s)||this._getDocument(),l=this._elementInfo.get(s);if(l)return i&&(l.checkChildren=!0),l.subject;let u={checkChildren:i,subject:new ro,rootNode:a};return this._elementInfo.set(s,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(o){let i=e1(o),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(o,i,s){let a=e1(o),l=this._getDocument().activeElement;a===l?this._getClosestElementsInfo(a).forEach(([u,c])=>this._originChanged(u,i,c)):(this._setOrigin(i),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((o,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(o){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(o)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:o&&this._isLastInteractionFromInputLabel(o)?"mouse":"program"}_shouldBeAttributedToTouch(o){return this._detectionMode===ore.EVENTUAL||!!o?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(o,i){o.classList.toggle("cdk-focused",!!i),o.classList.toggle("cdk-touch-focused",i==="touch"),o.classList.toggle("cdk-keyboard-focused",i==="keyboard"),o.classList.toggle("cdk-mouse-focused",i==="mouse"),o.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(o,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=o,this._originFromTouchInteraction=o==="touch"&&i,this._detectionMode===ore.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?q2t:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(o,i){let s=this._elementInfo.get(i),a=Qh(o);!s||!s.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),s)}_onBlur(o,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&o.relatedTarget instanceof Node&&i.contains(o.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(o,i){o.subject.observers.length&&this._ngZone.run(()=>o.subject.next(i))}_registerGlobalListeners(o){if(!this._platform.isBrowser)return;let i=o.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,nre),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,nre)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ws(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(o){let i=o.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nre),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nre),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(o,i,s){this._setClasses(o,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(o){let i=[];return this._elementInfo.forEach((s,a)=>{(a===o||s.checkChildren&&a.contains(o))&&i.push([a,s])}),i}_isLastInteractionFromInputLabel(o){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===o||o.nodeName!=="INPUT"&&o.nodeName!=="TEXTAREA"||o.disabled)return!1;let a=o.labels;if(a){for(let l=0;l<a.length;l++)if(a[l].contains(i))return!0}return!1}};r.\u0275fac=function(i){return new(i||r)(Ot(jn),Ot(Da),Ot(jMr),Ot(Dn,8),Ot(PMr,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var nk=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(nk||{}),U2t="cdk-high-contrast-black-on-white",V2t="cdk-high-contrast-white-on-black",NEe="cdk-high-contrast-active",Y2t=(()=>{let r=class r{constructor(o,i){this._platform=o,this._document=i,this._breakpointSubscription=Ir($2t).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return nk.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(o):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(o.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return nk.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return nk.BLACK_ON_WHITE}return nk.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(NEe,U2t,V2t),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===nk.BLACK_ON_WHITE?o.add(NEe,U2t):i===nk.WHITE_ON_BLACK&&o.add(NEe,V2t)}}};r.\u0275fac=function(i){return new(i||r)(Ot(Da),Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var LMr=new Do("cdk-dir-doc",{providedIn:"root",factory:BMr});function BMr(){return Ir(Dn)}var $Mr=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function zMr(t){let r=t?.toLowerCase()||"";return r==="auto"&&typeof navigator<"u"&&navigator?.language?$Mr.test(navigator.language)?"rtl":"ltr":r==="rtl"?"rtl":"ltr"}var $M=(()=>{let r=class r{constructor(o){if(this.value="ltr",this.change=new ca,o){let i=o.body?o.body.dir:null,s=o.documentElement?o.documentElement.dir:null;this.value=zMr(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}};r.\u0275fac=function(i){return new(i||r)(Ot(LMr,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var j2=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({});let t=r;return t})();function VMr(){return!0}var GMr=new Do("mat-sanity-checks",{providedIn:"root",factory:VMr}),bs=(()=>{let r=class r{constructor(o,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return $6()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};r.\u0275fac=function(i){return new(i||r)(Ot(Y2t),Ot(GMr,8),Ot(Dn))},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[j2,j2]});let t=r;return t})();var Kp=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Kp||{}),PEe=class{constructor(r,n,o,i=!1){this._renderer=r,this.element=n,this.config=o,this._animationForciblyDisabledThroughCss=i,this.state=Kp.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},K2t=jM({passive:!0,capture:!0}),LEe=class{constructor(){this._events=new Map,this._delegateEventHandler=r=>{let n=Qh(r);n&&this._events.get(r.type)?.forEach((o,i)=>{(i===n||i.contains(n))&&o.forEach(s=>s.handleEvent(r))})}}addHandler(r,n,o,i){let s=this._events.get(n);if(s){let a=s.get(o);a?a.add(i):s.set(o,new Set([i]))}else this._events.set(n,new Map([[o,new Set([i])]])),r.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,K2t)})}removeHandler(r,n,o){let i=this._events.get(r);if(!i)return;let s=i.get(n);s&&(s.delete(o),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(r),document.removeEventListener(r,this._delegateEventHandler,K2t)))}},Z2t={enterDuration:225,exitDuration:150},WMr=800,Q2t=jM({passive:!0,capture:!0}),J2t=["mousedown","touchstart"],eSt=["mouseup","mouseleave","touchend","touchcancel"],U6=class U6{constructor(r,n,o,i){this._target=r,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=e1(o))}fadeInRipple(r,n,o={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=ar(ar({},Z2t),o.animation);o.centered&&(r=i.left+i.width/2,n=i.top+i.height/2);let a=o.radius||qMr(r,n,i),l=r-i.left,u=n-i.top,c=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-a}px`,f.style.top=`${u-a}px`,f.style.height=`${a*2}px`,f.style.width=`${a*2}px`,o.color!=null&&(f.style.backgroundColor=o.color),f.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(f);let d=window.getComputedStyle(f),p=d.transitionProperty,m=d.transitionDuration,h=p==="none"||m==="0s"||m==="0s, 0s"||i.width===0&&i.height===0,g=new PEe(this,f,o,h);f.style.transform="scale3d(1, 1, 1)",g.state=Kp.FADING_IN,o.persistent||(this._mostRecentTransientRipple=g);let y=null;return!h&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>this._finishRippleTransition(g),x=()=>this._destroyRipple(g);f.addEventListener("transitionend",b),f.addEventListener("transitioncancel",x),y={onTransitionEnd:b,onTransitionCancel:x}}),this._activeRipples.set(g,y),(h||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(r){if(r.state===Kp.FADING_OUT||r.state===Kp.HIDDEN)return;let n=r.element,o=ar(ar({},Z2t),r.config.animation);n.style.transitionDuration=`${o.exitDuration}ms`,n.style.opacity="0",r.state=Kp.FADING_OUT,(r._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(r)}fadeOutAll(){this._getActiveRipples().forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){let n=e1(r);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,J2t.forEach(o=>{U6._eventManager.addHandler(this._ngZone,o,n,this)}))}handleEvent(r){r.type==="mousedown"?this._onMousedown(r):r.type==="touchstart"?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eSt.forEach(n=>{this._triggerElement.addEventListener(n,this,Q2t)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(r){r.state===Kp.FADING_IN?this._startFadeOutTransition(r):r.state===Kp.FADING_OUT&&this._destroyRipple(r)}_startFadeOutTransition(r){let n=r===this._mostRecentTransientRipple,{persistent:o}=r.config;r.state=Kp.VISIBLE,!o&&(!n||!this._isPointerDown)&&r.fadeOut()}_destroyRipple(r){let n=this._activeRipples.get(r)??null;this._activeRipples.delete(r),this._activeRipples.size||(this._containerRect=null),r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),r.state=Kp.HIDDEN,n!==null&&(r.element.removeEventListener("transitionend",n.onTransitionEnd),r.element.removeEventListener("transitioncancel",n.onTransitionCancel)),r.element.remove()}_onMousedown(r){let n=MEe(r),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+WMr;!this._target.rippleDisabled&&!n&&!o&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!REe(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=r.changedTouches;if(n)for(let o=0;o<n.length;o++)this.fadeInRipple(n[o].clientX,n[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(r=>{let n=r.state===Kp.VISIBLE||r.config.terminateOnPointerUp&&r.state===Kp.FADING_IN;!r.config.persistent&&n&&r.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let r=this._triggerElement;r&&(J2t.forEach(n=>U6._eventManager.removeHandler(n,r,this)),this._pointerUpEventsRegistered&&(eSt.forEach(n=>r.removeEventListener(n,this,Q2t)),this._pointerUpEventsRegistered=!1))}};U6._eventManager=new LEe;var tSt=U6;function qMr(t,r,n){let o=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom));return Math.sqrt(o*o+i*i)}var V6=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[bs,bs]});let t=r;return t})();var HMr=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[bs]});let t=r;return t})();var BEe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[V6,bs,HMr]});let t=r;return t})();var oSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[bs,V6,bs]});let t=r;return t})();var YMr=20,G6=(()=>{let r=class r{constructor(o,i,s){this._ngZone=o,this._platform=i,this._scrolled=new ro,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(o){this.scrollContainers.has(o)||this.scrollContainers.set(o,o.elementScrolled().subscribe(()=>this._scrolled.next(o)))}deregister(o){let i=this.scrollContainers.get(o);i&&(i.unsubscribe(),this.scrollContainers.delete(o))}scrolled(o=YMr){return this._platform.isBrowser?new ZM(i=>{this._globalSubscription||this._addGlobalListener();let s=o>0?this._scrolled.pipe(Cre(o)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):an()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((o,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(o,i){let s=this.getAncestorScrollContainers(o);return this.scrolled(i).pipe(ja(a=>!a||s.indexOf(a)>-1))}getAncestorScrollContainers(o){let i=[];return this.scrollContainers.forEach((s,a)=>{this._scrollableContainsElement(a,o)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(o,i){let s=e1(i),a=o.getElementRef().nativeElement;do if(s==a)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let o=this._getWindow();return eR(o.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};r.\u0275fac=function(i){return new(i||r)(Ot(jn),Ot(Da),Ot(Dn,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),sre=(()=>{let r=class r{constructor(o,i,s,a){this.elementRef=o,this.scrollDispatcher=i,this.ngZone=s,this.dir=a,this._destroyed=new ro,this._elementScrolled=new ZM(l=>this.ngZone.runOutsideAngular(()=>eR(this.elementRef.nativeElement,"scroll").pipe(ws(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(o){let i=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";o.left==null&&(o.left=s?o.end:o.start),o.right==null&&(o.right=s?o.start:o.end),o.bottom!=null&&(o.top=i.scrollHeight-i.clientHeight-o.bottom),s&&PM()!=Zh.NORMAL?(o.left!=null&&(o.right=i.scrollWidth-i.clientWidth-o.left),PM()==Zh.INVERTED?o.left=o.right:PM()==Zh.NEGATED&&(o.left=o.right?-o.right:o.right)):o.right!=null&&(o.left=i.scrollWidth-i.clientWidth-o.right),this._applyScrollToOptions(o)}_applyScrollToOptions(o){let i=this.elementRef.nativeElement;rre()?i.scrollTo(o):(o.top!=null&&(i.scrollTop=o.top),o.left!=null&&(i.scrollLeft=o.left))}measureScrollOffset(o){let i="left",s="right",a=this.elementRef.nativeElement;if(o=="top")return a.scrollTop;if(o=="bottom")return a.scrollHeight-a.clientHeight-a.scrollTop;let l=this.dir&&this.dir.value=="rtl";return o=="start"?o=l?s:i:o=="end"&&(o=l?i:s),l&&PM()==Zh.INVERTED?o==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:l&&PM()==Zh.NEGATED?o==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:o==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}};r.\u0275fac=function(i){return new(i||r)(En(Zi),En(G6),En(jn),En($M,8))},r.\u0275dir=Ac({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let t=r;return t})(),XMr=20,W6=(()=>{let r=class r{constructor(o,i,s){this._platform=o,this._change=new ro,this._changeListener=a=>{this._change.next(a)},this._document=s,i.runOutsideAngular(()=>{if(o.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let o=this._getWindow();o.removeEventListener("resize",this._changeListener),o.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let o={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),o}getViewportRect(){let o=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:o.top,left:o.left,bottom:o.top+s,right:o.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let o=this._document,i=this._getWindow(),s=o.documentElement,a=s.getBoundingClientRect(),l=-a.top||o.body.scrollTop||i.scrollY||s.scrollTop||0,u=-a.left||o.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:l,left:u}}change(o=XMr){return o>0?this._change.pipe(Cre(o)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let o=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:o.innerWidth,height:o.innerHeight}:{width:0,height:0}}};r.\u0275fac=function(i){return new(i||r)(Ot(Da),Ot(jn),Ot(Dn,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var t1=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({});let t=r;return t})(),$Ee=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[j2,t1,j2,t1]});let t=r;return t})();var q6=class{attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},zEe=class extends q6{constructor(r,n,o,i,s){super(),this.component=r,this.viewContainerRef=n,this.injector=o,this.componentFactoryResolver=i,this.projectableNodes=s}},are=class extends q6{constructor(r,n,o,i){super(),this.templateRef=r,this.viewContainerRef=n,this.context=o,this.injector=i}get origin(){return this.templateRef.elementRef}attach(r,n=this.context){return this.context=n,super.attach(r)}detach(){return this.context=void 0,super.detach()}},UEe=class extends q6{constructor(r){super(),this.element=r instanceof Zi?r.nativeElement:r}},VEe=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof zEe)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof are)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof UEe)return this._attachedPortal=r,this.attachDomPortal(r)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var lre=class extends VEe{constructor(r,n,o,i,s){super(),this.outletElement=r,this._componentFactoryResolver=n,this._appRef=o,this._defaultInjector=i,this.attachDomPortal=a=>{this._document;let l=a.element;l.parentNode;let u=this._document.createComment("dom-portal");l.parentNode.insertBefore(u,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(l,u)})},this._document=s}attachComponentPortal(r){let o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),i;return r.viewContainerRef?(i=r.viewContainerRef.createComponent(o,r.viewContainerRef.length,r.injector||r.viewContainerRef.injector,r.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=o.create(r.injector||this._defaultInjector||Pf.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=r,i}attachTemplatePortal(r){let n=r.viewContainerRef,o=n.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return o.rootNodes.forEach(i=>this.outletElement.appendChild(i)),o.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(o);i!==-1&&n.remove(i)}),this._attachedPortal=r,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}};var sSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({});let t=r;return t})();var aSt=rre(),GEe=class{constructor(r,n){this._viewportRuler=r,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=Os(-this._previousScrollPosition.left),r.style.top=Os(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,n=this._document.body,o=r.style,i=n.style,s=o.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),aSt&&(o.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),aSt&&(o.scrollBehavior=s,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,o=this._viewportRuler.getViewportSize();return n.scrollHeight>o.height||n.scrollWidth>o.width}};var WEe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._ngZone=n,this._viewportRuler=o,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(ja(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ure=class{enable(){}disable(){}attach(){}};function qEe(t,r){return r.some(n=>{let o=t.bottom<n.top,i=t.top>n.bottom,s=t.right<n.left,a=t.left>n.right;return o||i||s||a})}function lSt(t,r){return r.some(n=>{let o=t.top<n.top,i=t.bottom>n.bottom,s=t.left<n.left,a=t.right>n.right;return o||i||s||a})}var HEe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._viewportRuler=n,this._ngZone=o,this._config=i,this._scrollSubscription=null}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:i}=this._viewportRuler.getViewportSize();qEe(n,[{width:o,height:i,bottom:i,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},KMr=(()=>{let r=class r{constructor(o,i,s,a){this._scrollDispatcher=o,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new ure,this.close=l=>new WEe(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new GEe(this._viewportRuler,this._document),this.reposition=l=>new HEe(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=a}};r.\u0275fac=function(i){return new(i||r)(Ot(G6),Ot(W6),Ot(jn),Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),cre=class{constructor(r){if(this.scrollStrategy=new ure,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,r){let n=Object.keys(r);for(let o of n)r[o]!==void 0&&(this[o]=r[o])}}};var YEe=class{constructor(r,n){this.connectionPair=r,this.scrollableViewProperties=n}};var pSt=(()=>{let r=class r{constructor(o){this._attachedOverlays=[],this._document=o}ngOnDestroy(){this.detach()}add(o){this.remove(o),this._attachedOverlays.push(o)}remove(o){let i=this._attachedOverlays.indexOf(o);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),ZMr=(()=>{let r=class r extends pSt{constructor(o,i){super(o),this._ngZone=i,this._keydownListener=s=>{let a=this._attachedOverlays;for(let l=a.length-1;l>-1;l--)if(a[l]._keydownEvents.observers.length>0){let u=a[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s);break}}}add(o){super.add(o),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn),Ot(jn,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),QMr=(()=>{let r=class r extends pSt{constructor(o,i,s){super(o),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Qh(a)},this._clickListener=a=>{let l=Qh(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let f=c.length-1;f>-1;f--){let d=c[f];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(l)||d.overlayElement.contains(u))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(a)):p.next(a)}}}add(o){if(super.add(o),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let o=this._document.body;o.removeEventListener("pointerdown",this._pointerDownListener,!0),o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(o){o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0)}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn),Ot(Da),Ot(jn,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),mSt=(()=>{let r=class r{constructor(o,i){this._platform=i,this._document=o}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let o="cdk-overlay-container";if(this._platform.isBrowser||$6()){let s=this._document.querySelectorAll(`.${o}[platform="server"], .${o}[platform="test"]`);for(let a=0;a<s.length;a++)s[a].remove()}let i=this._document.createElement("div");i.classList.add(o),$6()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};r.\u0275fac=function(i){return new(i||r)(Ot(Dn),Ot(Da))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),XEe=class{constructor(r,n,o,i,s,a,l,u,c,f=!1,d){this._portalOutlet=r,this._host=n,this._pane=o,this._config=i,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=u,this._outsideClickDispatcher=c,this._animationsDisabled=f,this._injector=d,this._backdropElement=null,this._backdropClick=new ro,this._attachments=new ro,this._detachments=new ro,this._locationChanges=P2.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new ro,this._outsidePointerEvents=new ro,this._renders=new ro,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=sAe(()=>KTe(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(r){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(r);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),sb(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,r&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=ar(ar({},this._config),r),this._updateElementSize()}setDirection(r){this._config=vs(ar({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=Os(this._config.width),r.height=Os(this._config.height),r.minWidth=Os(this._config.minWidth),r.minHeight=Os(this._config.minHeight),r.maxWidth=Os(this._config.maxWidth),r.maxHeight=Os(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let r=this._backdropElement;if(r){if(this._animationsDisabled){this._disposeBackdrop(r);return}r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{r.addEventListener("transitionend",this._backdropTransitionendHandler)}),r.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(r)},500))}}_toggleClasses(r,n,o){let i=LM(n||[]).filter(s=>!!s);i.length&&(o?r.classList.add(...i):r.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let r=this._renders.pipe(ws(tz(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),r.unsubscribe())})})}_disposeScrollStrategy(){let r=this._scrollStrategy;r&&(r.disable(),r.detach&&r.detach())}_disposeBackdrop(r){r&&(r.removeEventListener("click",this._backdropClickHandler),r.removeEventListener("transitionend",this._backdropTransitionendHandler),r.remove(),this._backdropElement===r&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},uSt="cdk-overlay-connected-position-bounding-box",JMr=/([A-Za-z%]+)$/,KEe=class{get positions(){return this._preferredPositions}constructor(r,n,o,i,s){this._viewportRuler=n,this._document=o,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ro,this._resizeSubscription=P2.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(uSt),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,n=this._overlayRect,o=this._viewportRect,i=this._containerRect,s=[],a;for(let l of this._preferredPositions){let u=this._getOriginPoint(r,i,l),c=this._getOverlayPoint(u,n,l),f=this._getOverlayFit(c,n,o,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,u);return}if(this._canFitWithFlexibleDimensions(f,c,o)){s.push({position:l,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,l)});continue}(!a||a.overlayFit.visibleArea<f.visibleArea)&&(a={overlayFit:f,overlayPoint:c,originPoint:u,position:l,overlayRect:n})}if(s.length){let l=null,u=-1;for(let c of s){let f=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);f>u&&(u=f,l=c)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ok(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(uSt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,n)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,n,o){let i;if(o.originX=="center")i=r.left+r.width/2;else{let a=this._isRtl()?r.right:r.left,l=this._isRtl()?r.left:r.right;i=o.originX=="start"?a:l}n.left<0&&(i-=n.left);let s;return o.originY=="center"?s=r.top+r.height/2:s=o.originY=="top"?r.top:r.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(r,n,o){let i;o.overlayX=="center"?i=-n.width/2:o.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let s;return o.overlayY=="center"?s=-n.height/2:s=o.overlayY=="top"?0:-n.height,{x:r.x+i,y:r.y+s}}_getOverlayFit(r,n,o,i){let s=fSt(n),{x:a,y:l}=r,u=this._getOffset(i,"x"),c=this._getOffset(i,"y");u&&(a+=u),c&&(l+=c);let f=0-a,d=a+s.width-o.width,p=0-l,m=l+s.height-o.height,h=this._subtractOverflows(s.width,f,d),g=this._subtractOverflows(s.height,p,m),y=h*g;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:h==s.width}}_canFitWithFlexibleDimensions(r,n,o){if(this._hasFlexibleDimensions){let i=o.bottom-n.y,s=o.right-n.x,a=cSt(this._overlayRef.getConfig().minHeight),l=cSt(this._overlayRef.getConfig().minWidth),u=r.fitsInViewportVertically||a!=null&&a<=i,c=r.fitsInViewportHorizontally||l!=null&&l<=s;return u&&c}return!1}_pushOverlayOnScreen(r,n,o){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let i=fSt(n),s=this._viewportRect,a=Math.max(r.x+i.width-s.width,0),l=Math.max(r.y+i.height-s.height,0),u=Math.max(s.top-o.top-r.y,0),c=Math.max(s.left-o.left-r.x,0),f=0,d=0;return i.width<=s.width?f=c||-a:f=r.x<this._viewportMargin?s.left-o.left-r.x:0,i.height<=s.height?d=u||-l:d=r.y<this._viewportMargin?s.top-o.top-r.y:0,this._previousPushAmount={x:f,y:d},{x:r.x+f,y:r.y+d}}_applyPosition(r,n){if(this._setTransformOrigin(r),this._setOverlayElementStyles(n,r),this._setBoundingBoxStyles(n,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!eRr(this._lastScrollVisibility,o)){let i=new YEe(r,o);this._positionChanges.next(i)}this._lastScrollVisibility=o}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,i=r.overlayY;r.overlayX==="center"?o="center":this._isRtl()?o=r.overlayX==="start"?"right":"left":o=r.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${o} ${i}`}_calculateBoundingBoxRect(r,n){let o=this._viewportRect,i=this._isRtl(),s,a,l;if(n.overlayY==="top")a=r.y,s=o.height-a+this._viewportMargin;else if(n.overlayY==="bottom")l=o.height-r.y+this._viewportMargin*2,s=o.height-l+this._viewportMargin;else{let m=Math.min(o.bottom-r.y+o.top,r.y),h=this._lastBoundingBoxSize.height;s=m*2,a=r.y-m,s>h&&!this._isInitialRender&&!this._growAfterOpen&&(a=r.y-h/2)}let u=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,c=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,f,d,p;if(c)p=o.width-r.x+this._viewportMargin*2,f=r.x-this._viewportMargin;else if(u)d=r.x,f=o.right-r.x;else{let m=Math.min(o.right-r.x+o.left,r.x),h=this._lastBoundingBoxSize.width;f=m*2,d=r.x-m,f>h&&!this._isInitialRender&&!this._growAfterOpen&&(d=r.x-h/2)}return{top:a,left:d,bottom:l,right:p,width:f,height:s}}_setBoundingBoxStyles(r,n){let o=this._calculateBoundingBoxRect(r,n);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Os(o.height),i.top=Os(o.top),i.bottom=Os(o.bottom),i.width=Os(o.width),i.left=Os(o.left),i.right=Os(o.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(i.maxHeight=Os(s)),a&&(i.maxWidth=Os(a))}this._lastBoundingBoxSize=o,ok(this._boundingBox.style,i)}_resetBoundingBoxStyles(){ok(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ok(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,n){let o={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){let f=this._viewportRuler.getViewportScrollPosition();ok(o,this._getExactOverlayY(n,r,f)),ok(o,this._getExactOverlayX(n,r,f))}else o.position="static";let l="",u=this._getOffset(n,"x"),c=this._getOffset(n,"y");u&&(l+=`translateX(${u}px) `),c&&(l+=`translateY(${c}px)`),o.transform=l.trim(),a.maxHeight&&(i?o.maxHeight=Os(a.maxHeight):s&&(o.maxHeight="")),a.maxWidth&&(i?o.maxWidth=Os(a.maxWidth):s&&(o.maxWidth="")),ok(this._pane.style,o)}_getExactOverlayY(r,n,o){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,r);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),r.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;i.bottom=`${a-(s.y+this._overlayRect.height)}px`}else i.top=Os(s.y);return i}_getExactOverlayX(r,n,o){let i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,r);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o));let a;if(this._isRtl()?a=r.overlayX==="end"?"left":"right":a=r.overlayX==="end"?"right":"left",a==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(s.x+this._overlayRect.width)}px`}else i.left=Os(s.x);return i}_getScrollVisibility(){let r=this._getOriginRect(),n=this._pane.getBoundingClientRect(),o=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:lSt(r,o),isOriginOutsideView:qEe(r,o),isOverlayClipped:lSt(n,o),isOverlayOutsideView:qEe(n,o)}}_subtractOverflows(r,...n){return n.reduce((o,i)=>o-Math.max(i,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+r-this._viewportMargin,bottom:o.top+n-this._viewportMargin,width:r-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,n){return n==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&LM(r).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){let r=this._origin;if(r instanceof Zi)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let n=r.width||0,o=r.height||0;return{top:r.y,bottom:r.y+o,left:r.x,right:r.x+n,height:o,width:n}}};function ok(t,r){for(let n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}function cSt(t){if(typeof t!="number"&&t!=null){let[r,n]=t.split(JMr);return!n||n==="px"?parseFloat(r):null}return t||null}function fSt(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function eRr(t,r){return t===r?!0:t.isOriginClipped===r.isOriginClipped&&t.isOriginOutsideView===r.isOriginOutsideView&&t.isOverlayClipped===r.isOverlayClipped&&t.isOverlayOutsideView===r.isOverlayOutsideView}var dSt="cdk-global-overlay-wrapper",ZEe=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(r){let n=r.getConfig();this._overlayRef=r,this._width&&!n.width&&r.updateSize({width:this._width}),this._height&&!n.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(dSt),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:a,maxHeight:l}=o,u=(i==="100%"||i==="100vw")&&(!a||a==="100%"||a==="100vw"),c=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",m="",h="",g="";u?g="flex-start":f==="center"?(g="center",p?h=d:m=d):p?f==="left"||f==="end"?(g="flex-end",m=d):(f==="right"||f==="start")&&(g="flex-start",h=d):f==="left"||f==="start"?(g="flex-start",m=d):(f==="right"||f==="end")&&(g="flex-end",h=d),r.position=this._cssPosition,r.marginLeft=u?"0":m,r.marginTop=c?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=u?"0":h,n.justifyContent=g,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,o=n.style;n.classList.remove(dSt),o.justifyContent=o.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},tRr=(()=>{let r=class r{constructor(o,i,s,a){this._viewportRuler=o,this._document=i,this._platform=s,this._overlayContainer=a}global(){return new ZEe}flexibleConnectedTo(o){return new KEe(o,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};r.\u0275fac=function(i){return new(i||r)(Ot(W6),Ot(Dn),Ot(Da),Ot(mSt))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),rRr=0,r1=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f,d,p,m,h){this.scrollStrategies=o,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=a,this._keyboardDispatcher=l,this._injector=u,this._ngZone=c,this._document=f,this._directionality=d,this._location=p,this._outsideClickDispatcher=m,this._animationsModuleType=h}create(o){let i=this._createHostElement(),s=this._createPaneElement(i),a=this._createPortalOutlet(s),l=new cre(o);return l.direction=l.direction||this._directionality.value,new XEe(a,i,s,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(ck))}position(){return this._positionBuilder}_createPaneElement(o){let i=this._document.createElement("div");return i.id=`cdk-overlay-${rRr++}`,i.classList.add("cdk-overlay-pane"),o.appendChild(i),i}_createHostElement(){let o=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalOutlet(o){return this._appRef||(this._appRef=this._injector.get(mk)),new lre(o,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};r.\u0275fac=function(i){return new(i||r)(Ot(KMr),Ot(mSt),Ot(lz),Ot(tRr),Ot(ZMr),Ot(Pf),Ot(jn),Ot(Dn),Ot($M),Ot(hk),Ot(QMr),Ot(z2,8))},r.\u0275prov=Lr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var nRr=new Do("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=Ir(r1);return()=>t.scrollStrategies.reposition()}});function oRr(t){return()=>t.scrollStrategies.reposition()}var iRr={provide:nRr,deps:[r1],useFactory:oRr},fre=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({providers:[r1,iRr],imports:[j2,sSt,$Ee,$Ee]});let t=r;return t})();var dre=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[bs,ub,P2t,bs]});let t=r;return t})();var uRr=new Do("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=Ir(r1);return()=>t.scrollStrategies.reposition()}});function cRr(t){return()=>t.scrollStrategies.reposition()}var fRr={provide:uRr,deps:[r1],useFactory:cRr};var hSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({providers:[fRr],imports:[ub,fre,BEe,bs,t1,dre,BEe,bs]});let t=r;return t})();var gSt=["*"],pRr=["content"],mRr=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],hRr=["mat-drawer","mat-drawer-content","*"];function gRr(t,r){if(t&1){let n=V2();fa(0,"div",1),lb("click",function(){L2(n);let i=ig();return B2(i._onBackdropClicked())}),da()}if(t&2){let n=ig();rm("mat-drawer-shown",n._isShowingBackdrop())}}function yRr(t,r){t&1&&(fa(0,"mat-drawer-content"),Lf(1,2),da())}var bRr={transformDrawer:fR("transform",[gk("open, open-instant",cb({transform:"none",visibility:"visible"})),gk("void",cb({"box-shadow":"none",visibility:"hidden"})),q2("void => open-instant",W2("0ms")),q2("void <=> open, open-instant => void",W2("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var xRr=new Do("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:vRr}),ySt=new Do("MAT_DRAWER_CONTAINER");function vRr(){return!1}var H6=(()=>{let r=class r extends sre{constructor(o,i,s,a,l){super(s,a,l),this._changeDetectorRef=o,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};r.\u0275fac=function(i){return new(i||r)(En(Bd),En(UTe(()=>JEe)),En(Zi),En(G6),En(jn))},r.\u0275cmp=ua({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,s){i&2&&kre("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},standalone:!0,features:[sg([{provide:sre,useExisting:r}]),cR,pa],ngContentSelectors:gSt,decls:1,vars:0,template:function(i,s){i&1&&(nm(),Lf(0))},encapsulation:2,changeDetection:0});let t=r;return t})(),QEe=(()=>{let r=class r{get position(){return this._position}set position(o){o=o==="end"?"end":"start",o!==this._position&&(this._isAttached&&this._updatePositionInParent(o),this._position=o,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(o){this._mode=o,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(o){this._disableClose=tk(o)}get autoFocus(){let o=this._autoFocus;return o??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(o){(o==="true"||o==="false"||o==null)&&(o=tk(o)),this._autoFocus=o}get opened(){return this._opened}set opened(o){this.toggle(tk(o))}constructor(o,i,s,a,l,u,c,f){this._elementRef=o,this._focusTrapFactory=i,this._focusMonitor=s,this._platform=a,this._ngZone=l,this._interactivityChecker=u,this._doc=c,this._container=f,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ro,this._animationEnd=new ro,this._animationState="void",this.openedChange=new ca(!0),this._openedStream=this.openedChange.pipe(ja(d=>d),Wn(()=>{})),this.openedStart=this._animationStarted.pipe(ja(d=>d.fromState!==d.toState&&d.toState.indexOf("open")===0),nR(void 0)),this._closedStream=this.openedChange.pipe(ja(d=>!d),Wn(()=>{})),this.closedStart=this._animationStarted.pipe(ja(d=>d.fromState!==d.toState&&d.toState==="void"),nR(void 0)),this._destroyed=new ro,this.onPositionChanged=new ca,this._modeChanged=new ro,this._injector=Ir(Pf),this.openedChange.pipe(ws(this._destroyed)).subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{eR(this._elementRef.nativeElement,"keydown").pipe(ja(d=>d.keyCode===27&&!this.disableClose&&!j2t(d)),ws(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(ob((d,p)=>d.fromState===p.fromState&&d.toState===p.toState)).subscribe(d=>{let{fromState:p,toState:m}=d;(m.indexOf("open")===0&&p==="void"||m==="void"&&p.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(o,i){this._interactivityChecker.isFocusable(o)||(o.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{o.removeEventListener("blur",s),o.removeEventListener("mousedown",s),o.removeAttribute("tabindex")};o.addEventListener("blur",s),o.addEventListener("mousedown",s)})),o.focus(i)}_focusByCssSelector(o,i){let s=this._elementRef.nativeElement.querySelector(o);s&&this._forceFocus(s,i)}_takeFocus(){if(!this._focusTrap)return;let o=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":sb(()=>{!this._focusTrap.focusInitialElement()&&typeof o.focus=="function"&&o.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(o){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,o):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let o=this._doc.activeElement;return!!o&&this._elementRef.nativeElement.contains(o)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(o){return this.toggle(!0,o)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(o=!this.opened,i){o&&i&&(this._openedVia=i);let s=this._setOpen(o,!o&&this._isFocusWithinDrawer(),this._openedVia||"program");return o||(this._openedVia=null),s}_setOpen(o,i,s){return this._opened=o,o?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(jd(1)).subscribe(l=>a(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(o){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,s=i.parentNode;o==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,i)),s.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}};r.\u0275fac=function(i){return new(i||r)(En(Zi),En(W2t),En(H2t),En(Da),En(jn),En(OEe),En(Dn,8),En(ySt,8))},r.\u0275cmp=ua({type:r,selectors:[["mat-drawer"]],viewQuery:function(i,s){if(i&1&&Ld(pRr,5),i&2){let a;Pu(a=Lu())&&(s._content=a.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,s){i&1&&tAe("@transform.start",function(l){return s._animationStarted.next(l)})("@transform.done",function(l){return s._animationEnd.next(l)}),i&2&&(eAe("@transform",s._animationState),ng("align",null),rm("mat-drawer-end",s.position==="end")("mat-drawer-over",s.mode==="over")("mat-drawer-push",s.mode==="push")("mat-drawer-side",s.mode==="side")("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[pa],ngContentSelectors:gSt,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,s){i&1&&(nm(),fa(0,"div",1,0),Lf(2),da())},dependencies:[sre],encapsulation:2,data:{animation:[bRr.transformDrawer]},changeDetection:0});let t=r;return t})(),JEe=(()=>{let r=class r{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(o){this._autosize=tk(o)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(o){this._backdropOverride=o==null?null:tk(o)}get scrollable(){return this._userContent||this._content}constructor(o,i,s,a,l,u=!1,c){this._dir=o,this._element=i,this._ngZone=s,this._changeDetectorRef=a,this._animationMode=c,this._drawers=new iz,this.backdropClick=new ca,this._destroyed=new ro,this._doCheckSubject=new ro,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ro,this._injector=Ir(Pf),o&&o.change.pipe(ws(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(ws(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=u}ngAfterContentInit(){this._allDrawers.changes.pipe(l1(this._allDrawers),ws(this._destroyed)).subscribe(o=>{this._drawers.reset(o.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(l1(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(o=>{this._watchDrawerToggle(o),this._watchDrawerPosition(o),this._watchDrawerMode(o)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(rR(10),ws(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(o=>o.open())}close(){this._drawers.forEach(o=>o.close())}updateContentMargins(){let o=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")o+=this._left._getWidth();else if(this._left.mode=="push"){let s=this._left._getWidth();o+=s,i-=s}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let s=this._right._getWidth();i+=s,o-=s}}o=o||null,i=i||null,(o!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:o,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(o){o._animationStarted.pipe(ja(i=>i.fromState!==i.toState),ws(this._drawers.changes)).subscribe(i=>{i.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),o.mode!=="side"&&o.openedChange.pipe(ws(this._drawers.changes)).subscribe(()=>this._setContainerClass(o.opened))}_watchDrawerPosition(o){o&&o.onPositionChanged.pipe(ws(this._drawers.changes)).subscribe(()=>{sb(()=>{this._validateDrawers()},{injector:this._injector,phase:XTe.Read})})}_watchDrawerMode(o){o&&o._modeChanged.pipe(ws(tz(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(o){let i=this._element.nativeElement.classList,s="mat-drawer-container-has-open";o?i.add(s):i.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(o=>{o.position=="end"?(this._end!=null,this._end=o):(this._start!=null,this._start=o)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(o=>o&&!o.disableClose&&this._drawerHasBackdrop(o)).forEach(o=>o._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(o){return o!=null&&o.opened}_drawerHasBackdrop(o){return this._backdropOverride==null?!!o&&o.mode!=="side":this._backdropOverride}};r.\u0275fac=function(i){return new(i||r)(En($M,8),En(Zi),En(jn),En(Bd),En(W6),En(xRr),En(z2,8))},r.\u0275cmp=ua({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(i,s,a){if(i&1&&(G2(a,H6,5),G2(a,QEe,5)),i&2){let l;Pu(l=Lu())&&(s._content=l.first),Pu(l=Lu())&&(s._allDrawers=l)}},viewQuery:function(i,s){if(i&1&&Ld(H6,5),i&2){let a;Pu(a=Lu())&&(s._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,s){i&2&&rm("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[sg([{provide:ySt,useExisting:r}]),pa],ngContentSelectors:hRr,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,s){i&1&&(nm(mRr),ab(0,gRr,1,2,"div",0),Lf(1),Lf(2,1),ab(3,yRr,2,0,"mat-drawer-content")),i&2&&(U2(s.hasBackdrop?0:-1),Pd(3),U2(s._content?-1:3))},dependencies:[H6],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let t=r;return t})();var bSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[bs,t1,t1,bs]});let t=r;return t})();var xSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({imports:[bs,bs]});let t=r;return t})();var vSt={transformMenu:fR("transformMenu",[gk("void",cb({opacity:0,transform:"scale(0.8)"})),q2("void => enter",W2("120ms cubic-bezier(0, 0, 0.2, 1)",cb({opacity:1,transform:"scale(1)"}))),q2("* => void",W2("100ms 25ms linear",cb({opacity:0})))]),fadeInItems:fR("fadeInItems",[gk("showing",cb({opacity:1})),q2("void => *",[cb({opacity:0}),W2("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},N_i=vSt.fadeInItems,F_i=vSt.transformMenu;var _Rr=new Do("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=Ir(r1);return()=>t.scrollStrategies.reposition()}});function SRr(t){return()=>t.scrollStrategies.reposition()}var CRr={provide:_Rr,deps:[r1],useFactory:SRr};var wSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Hn({type:r}),r.\u0275inj=qn({providers:[CRr],imports:[ub,V6,bs,fre,t1,bs]});let t=r;return t})();var _St=(()=>{let r=class r{constructor(){this.title="victorbarbosa"}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ua({type:r,selectors:[["app-root"]],standalone:!0,features:[pa],decls:10,vars:1,consts:[["drawer",""],[1,"example-container"],[3,"mode"],[1,"top-bar"],[1,"title"]],template:function(i,s){i&1&&(fa(0,"mat-drawer-container",1)(1,"mat-drawer",2,0),pk(3,"I'm a drawer"),da(),fa(4,"mat-drawer-content")(5,"div",3)(6,"div",4),pk(7,"Victor Barbosa"),da()(),fa(8,"div"),kc(9,"router-outlet"),da()()()),i&2&&(Pd(),og("mode","over"))},dependencies:[xne,bSt,QEe,JEe,H6,dre,hSt,oSt,wSt,xSt],styles:['.top-bar[_ngcontent-%COMP%]{float:right;width:100%;display:flex;align-items:flex-end;justify-content:flex-end;position:fixed;background:#000}.top-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;left:10px;align-self:center;font-size:x-large}.top-bar[_ngcontent-%COMP%]:after{content:"";background:#fff;position:absolute;width:100vw;height:1px}mat-drawer-content[_ngcontent-%COMP%]{height:100vh}']});let t=r;return t})();wAe(_St,M2t).catch(t=>console.error(t));
